<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Library ccf-database documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Library ccf-database documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li >HuBMAPTissueBlock</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>projects/ccf-database/src/lib/hubmap/hubmap-data.ts</code>
        </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#@id" >@id</a>
                            </li>
                            <li>
                                <a href="#@type" >@type</a>
                            </li>
                            <li>
                                <a href="#bad" >bad</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#data" >data</a>
                            </li>
                            <li>
                                <a href="#datasets" >datasets</a>
                            </li>
                            <li>
                                <a href="#description" >description</a>
                            </li>
                            <li>
                                <a href="#donor" >donor</a>
                            </li>
                            <li>
                                <a href="#label" >label</a>
                            </li>
                            <li>
                                <a href="#link" >link</a>
                            </li>
                            <li>
                                <a href="#rui_location" >rui_location</a>
                            </li>
                            <li>
                                <a href="#sample_type" >sample_type</a>
                            </li>
                            <li>
                                <a href="#section_count" >section_count</a>
                            </li>
                            <li>
                                <a href="#section_size" >section_size</a>
                            </li>
                            <li>
                                <a href="#section_units" >section_units</a>
                            </li>
                            <li>
                                <a href="#sections" >sections</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#getDataset" >getDataset</a>
                            </li>
                            <li>
                                <a href="#getDatasetThumbnail" >getDatasetThumbnail</a>
                            </li>
                            <li>
                                <a href="#getDonor" >getDonor</a>
                            </li>
                            <li>
                                <a href="#getRuiLocation" >getRuiLocation</a>
                            </li>
                            <li>
                                <a href="#getSection" >getSection</a>
                            </li>
                            <li>
                                <a href="#getTissueBlock" >getTissueBlock</a>
                            </li>
                            <li>
                                <a href="#toJsonLd" >toJsonLd</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(data: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, assetsApi: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, portalUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, serviceToken?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="193" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:193</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>data</td>
                                                  
                                                        <td>
                                                                        <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>assetsApi</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>portalUrl</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>serviceToken</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            Yes
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="@id"></a>
                    <span class="name">
                        <span ><b>@id</b></span>
                        <a href="#@id"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="180" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:180</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="@type"></a>
                    <span class="name">
                        <span ><b>@type</b></span>
                        <a href="#@type"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;Sample&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="181" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:181</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="bad"></a>
                    <span class="name">
                        <span ><b>bad</b></span>
                        <a href="#bad"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="177" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:177</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="data"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>data</b></span>
                        <a href="#data"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="195" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:195</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="datasets"></a>
                    <span class="name">
                        <span ><b>datasets</b></span>
                        <a href="#datasets"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>JsonLdObj[]</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="193" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:193</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="description"></a>
                    <span class="name">
                        <span ><b>description</b></span>
                        <a href="#description"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="183" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:183</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="donor"></a>
                    <span class="name">
                        <span ><b>donor</b></span>
                        <a href="#donor"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>JsonLdObj</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="178" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:178</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="label"></a>
                    <span class="name">
                        <span ><b>label</b></span>
                        <a href="#label"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="182" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:182</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="link"></a>
                    <span class="name">
                        <span ><b>link</b></span>
                        <a href="#link"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="184" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:184</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="rui_location"></a>
                    <span class="name">
                        <span ><b>rui_location</b></span>
                        <a href="#rui_location"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>JsonLdObj</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="191" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:191</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sample_type"></a>
                    <span class="name">
                        <span ><b>sample_type</b></span>
                        <a href="#sample_type"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;Tissue Block&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="186" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:186</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="section_count"></a>
                    <span class="name">
                        <span ><b>section_count</b></span>
                        <a href="#section_count"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="187" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:187</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="section_size"></a>
                    <span class="name">
                        <span ><b>section_size</b></span>
                        <a href="#section_size"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="188" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:188</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="section_units"></a>
                    <span class="name">
                        <span ><b>section_units</b></span>
                        <a href="#section_units"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="189" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:189</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sections"></a>
                    <span class="name">
                        <span ><b>sections</b></span>
                        <a href="#sections"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>JsonLdObj[]</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="192" class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:192</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDataset"></a>
                    <span class="name">
                        <span ><b>getDataset</b></span>
                        <a href="#getDataset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDataset(dataset: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, assetsApi: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, portalUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, serviceToken?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="292"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:292</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dataset</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>assetsApi</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>&#x27;&#x27;</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>portalUrl</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>&#x27;&#x27;</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>serviceToken</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>JsonLdObj</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDatasetThumbnail"></a>
                    <span class="name">
                        <span ><b>getDatasetThumbnail</b></span>
                        <a href="#getDatasetThumbnail"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDatasetThumbnail(dataset: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, assetsApi: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, serviceToken?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="340"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:340</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dataset</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>assetsApi</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>serviceToken</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string | undefined</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDonor"></a>
                    <span class="name">
                        <span ><b>getDonor</b></span>
                        <a href="#getDonor"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getDonor(donor: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, portalUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="368"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:368</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>donor</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>portalUrl</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>JsonLdObj</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getRuiLocation"></a>
                    <span class="name">
                        <span ><b>getRuiLocation</b></span>
                        <a href="#getRuiLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getRuiLocation(data: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, donor: JsonLdObj)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="424"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:424</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>donor</td>
                                    <td>
                                            <code>JsonLdObj</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>JsonLdObj | undefined</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSection"></a>
                    <span class="name">
                        <span ><b>getSection</b></span>
                        <a href="#getSection"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSection(section: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, data: <a href="../undefineds/JsonDict.html" target="_self">JsonDict</a>, portalUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="272"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:272</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>section</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>data</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#JsonDict" target="_self" >JsonDict</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>portalUrl</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>JsonLdObj</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTissueBlock"></a>
                    <span class="name">
                        <span ><b>getTissueBlock</b></span>
                        <a href="#getTissueBlock"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getTissueBlock()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="466"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:466</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>JsonLdObj</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toJsonLd"></a>
                    <span class="name">
                        <span ><b>toJsonLd</b></span>
                        <a href="#toJsonLd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>toJsonLd()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="470"
                            class="link-to-prism">projects/ccf-database/src/lib/hubmap/hubmap-data.ts:470</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>JsonLdObj</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { JsonLd, JsonLdObj } from &#x27;jsonld/jsonld-spec&#x27;;
import { get, omit, set, toNumber } from &#x27;lodash&#x27;;

import { rui } from &#x27;../util/prefixes&#x27;;


type JsonDict &#x3D; Record&lt;string, unknown&gt;;
const HBM_PREFIX &#x3D; &#x27;https://entity.api.hubmapconsortium.org/entities/&#x27;;

// eslint-disable-next-line max-len
export const DR1_VU_THUMBS &#x3D; new Set([&#x27;VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0009-LK-102-7-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0010-LK-155-40-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-96-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0014-LK-203-108-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0016-LK-202-89-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-21-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-1-1-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0005-RK-4-172-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-85-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0007-LK-203-103-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-100-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-10-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-75-PAS_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg&#x27;, &#x27;VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg&#x27;]);
// eslint-disable-next-line max-len
export const UFL_THUMBS &#x3D; { &#x27;HBM558.SRZG.629&#x27;: &#x27;HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg&#x27;, &#x27;HBM562.NTMH.548&#x27;: &#x27;HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg&#x27;, &#x27;HBM685.KHRQ.684&#x27;: &#x27;HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg&#x27;, &#x27;HBM278.SFQW.627&#x27;: &#x27;HBM278.SFQW.627_UFL0008-LY09-1-1.jpg&#x27;, &#x27;HBM427.SMGB.866&#x27;: &#x27;HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg&#x27;, &#x27;HBM432.LLCF.677&#x27;: &#x27;HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg&#x27;, &#x27;HBM586.ZSVS.996&#x27;: &#x27;HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg&#x27;, &#x27;HBM285.XMBT.542&#x27;: &#x27;HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg&#x27;, &#x27;HBM289.BWJW.663&#x27;: &#x27;HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg&#x27;, &#x27;HBM255.SRPR.985&#x27;: &#x27;HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg&#x27;, &#x27;HBM799.WXHD.535&#x27;: &#x27;HBM799.WXHD.535_UFL0009-LY02-1-1.jpg&#x27;, &#x27;HBM294.RZFN.624&#x27;: &#x27;HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg&#x27;, &#x27;HBM383.TRQG.424&#x27;: &#x27;HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg&#x27;, &#x27;HBM647.MFQB.496&#x27;: &#x27;HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg&#x27;, &#x27;HBM237.GGPR.739&#x27;: &#x27;HBM237.GGPR.739_UFL0006-LY01-1-1.jpg&#x27;, &#x27;HBM288.TPBD.654&#x27;: &#x27;HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg&#x27;, &#x27;HBM974.NDXT.675&#x27;: &#x27;HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg&#x27;, &#x27;HBM589.SLVV.423&#x27;: &#x27;HBM589.SLVV.423_UFL0008-LY10-1-1.jpg&#x27;, &#x27;HBM794.RLFN.358&#x27;: &#x27;HBM794.RLFN.358_UFL0006-LY03-1-1.jpg&#x27;, &#x27;HBM372.BQSR.778&#x27;: &#x27;HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg&#x27;, &#x27;HBM499.TKDW.458&#x27;: &#x27;HBM499.TKDW.458_UFL0009-LY03-1-1.jpg&#x27;, &#x27;HBM342.PRQB.739&#x27;: &#x27;HBM342.PRQB.739_UFL0003-LY06-1-1.jpg&#x27;, &#x27;HBM633.CLVN.674&#x27;: &#x27;HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg&#x27;, &#x27;HBM343.JQKM.578&#x27;: &#x27;HBM343.JQKM.578_UFL0009-LY01-1-1.jpg&#x27;, &#x27;HBM987.XGTH.368&#x27;: &#x27;HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg&#x27;, &#x27;HBM964.CWCP.788&#x27;: &#x27;HBM964.CWCP.788_UFL0006-LY02-2-1.jpg&#x27;, &#x27;HBM244.TJLK.223&#x27;: &#x27;HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg&#x27;, &#x27;HBM646.FSBQ.966&#x27;: &#x27;HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg&#x27;, &#x27;HBM572.GXSB.234&#x27;: &#x27;HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg&#x27;, &#x27;HBM772.TKGJ.794&#x27;: &#x27;HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg&#x27;, &#x27;HBM239.CBWR.263&#x27;: &#x27;HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg&#x27;, &#x27;HBM992.NRTT.383&#x27;: &#x27;HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg&#x27;, &#x27;HBM283.DQXD.546&#x27;: &#x27;HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg&#x27;, &#x27;HBM795.JHND.856&#x27;: &#x27;HBM795.JHND.856_UFL0007-SP-1-2-1.jpg&#x27;, &#x27;HBM267.BZKT.867&#x27;: &#x27;HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg&#x27;, &#x27;HBM838.DLMJ.782&#x27;: &#x27;HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg&#x27;, &#x27;HBM337.FSXL.564&#x27;: &#x27;HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg&#x27;, &#x27;HBM355.JDLK.244&#x27;: &#x27;HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg&#x27;, &#x27;HBM599.PSZG.737&#x27;: &#x27;HBM599.PSZG.737_UFL0006-LY02-1-1.jpg&#x27; };

/** UUID to TMC mapping. */
const GROUP_UUID_MAPPING: { [uuid: string]: string } &#x3D; {
  &#x27;03b3d854-ed44-11e8-8bce-0e368f3075e8&#x27;: &#x27;TMC-UCSD&#x27;,
  &#x27;07a29e4c-ed43-11e8-b56a-0e8017bdda58&#x27;: &#x27;TMC-Florida&#x27;,
  &#x27;308f5ffc-ed43-11e8-b56a-0e8017bdda58&#x27;: &#x27;TMC-CalTech&#x27;,
  &#x27;5bd084c8-edc2-11e8-802f-0e368f3075e8&#x27;: &#x27;HBM-TestingGroup&#x27;,
  &#x27;73bb26e4-ed43-11e8-8f19-0a7c1eab007a&#x27;: &#x27;TMC-Vanderbilt&#x27;,
  &#x27;def5fd76-ed43-11e8-b56a-0e8017bdda58&#x27;: &#x27;TMC-Stanford&#x27;,
  &#x27;5c106f29-ea2d-11e9-85e8-0efb3ba9a670&#x27;: &#x27;RTI-General Electric&#x27;,
  &#x27;301615f9-c870-11eb-a8dc-35ce3d8786fe&#x27;: &#x27;TMC-UConn&#x27;
};

function createRuiOrganLookup(): { [organName: string]: string } {
  const lookup: { [organName: string]: string } &#x3D; {};
  Object.entries(rui).forEach(([k, v]) &#x3D;&gt; (lookup[k] &#x3D; v.id));
  return lookup;
}

/** RUI organ name to entity identifier. */
const RUI_ORGANS: { [organName: string]: string } &#x3D; createRuiOrganLookup();

// Taken from: https://github.com/hubmapconsortium/commons/blob/master/hubmap_commons/hubmap_const.py#L101
/** HBM organ names to set of RUI organs. */
const HBM_ORGANS: { [organName: string]: string[] } &#x3D; {
  AO: [RUI_ORGANS.body, RUI_ORGANS.heart, RUI_ORGANS.aorta], //&#x27;Aorta&#x27;,
  BL: [RUI_ORGANS.body, RUI_ORGANS.urinary_bladder], //&#x27;Bladder&#x27;,
  BD: [RUI_ORGANS.body, RUI_ORGANS.pelvis, RUI_ORGANS.blood], //&#x27;Blood&#x27;, *
  BM: [RUI_ORGANS.body, RUI_ORGANS.pelvis, RUI_ORGANS.bone_marrow], //&#x27;Bone Marrow&#x27;, *
  BR: [RUI_ORGANS.body, RUI_ORGANS.brain], //&#x27;Brain&#x27;,
  LB: [RUI_ORGANS.body, RUI_ORGANS.respiratory_system, RUI_ORGANS.lungs, RUI_ORGANS.left_bronchus], //&#x27;Bronchus (Left)&#x27;,
  RB: [RUI_ORGANS.body, RUI_ORGANS.respiratory_system, RUI_ORGANS.lungs, RUI_ORGANS.right_bronchus], //&#x27;Bronchus (Right)&#x27;,
  LE: [RUI_ORGANS.body, RUI_ORGANS.eye, RUI_ORGANS.eye_left], //&#x27;Eye (Left)&#x27;,
  RE: [RUI_ORGANS.body, RUI_ORGANS.eye, RUI_ORGANS.eye_right], //&#x27;Eye (Right)&#x27;,
  LF: [RUI_ORGANS.body, RUI_ORGANS.fallopian_tube, RUI_ORGANS.fallopian_tube_left], //&#x27;Fallopian Tube (Left)&#x27;,
  RF: [RUI_ORGANS.body, RUI_ORGANS.fallopian_tube, RUI_ORGANS.fallopian_tube_right], //&#x27;Fallopian Tube (Right)&#x27;,
  HT: [RUI_ORGANS.body, RUI_ORGANS.heart], //&#x27;Heart&#x27;,
  LK: [RUI_ORGANS.body, RUI_ORGANS.kidney, RUI_ORGANS.kidney_left], //&#x27;Kidney (Left)&#x27;,
  RK: [RUI_ORGANS.body, RUI_ORGANS.kidney, RUI_ORGANS.kidney_right], //&#x27;Kidney (Right)&#x27;,
  LI: [RUI_ORGANS.body, RUI_ORGANS.large_intestine, RUI_ORGANS.colon], //&#x27;Large Intestine&#x27;,
  LV: [RUI_ORGANS.body, RUI_ORGANS.liver], //&#x27;Liver&#x27;,
  LL: [RUI_ORGANS.body, RUI_ORGANS.respiratory_system, RUI_ORGANS.lungs, RUI_ORGANS.left_lung], //&#x27;Lung (Left)&#x27;,
  LN: [RUI_ORGANS.body, RUI_ORGANS.knee, RUI_ORGANS.knee_left], //&#x27;Knee (Left)&#x27;,
  RL: [RUI_ORGANS.body, RUI_ORGANS.respiratory_system, RUI_ORGANS.lungs, RUI_ORGANS.right_lung], //&#x27;Lung (Right)&#x27;,
  RN: [RUI_ORGANS.body, RUI_ORGANS.knee, RUI_ORGANS.knee_right], //&#x27;Knee (Right)&#x27;,
  LY: [RUI_ORGANS.body, RUI_ORGANS.lymph_node, RUI_ORGANS.mesenteric_lymph_node], //&#x27;Lymph Node&#x27;,
  LO: [RUI_ORGANS.body, RUI_ORGANS.ovary, RUI_ORGANS.ovary_left], //&#x27;Ovary (Left)&#x27;,
  RO: [RUI_ORGANS.body, RUI_ORGANS.ovary, RUI_ORGANS.ovary_right], //&#x27;Ovary (Right)&#x27;,
  PA: [RUI_ORGANS.body, RUI_ORGANS.pancreas], //&#x27;Pancreas&#x27;,
  PL: [RUI_ORGANS.body], //&#x27;Placenta&#x27;, *
  SI: [RUI_ORGANS.body, RUI_ORGANS.small_intestine], //&#x27;Small Intestine&#x27;,
  SK: [RUI_ORGANS.body, RUI_ORGANS.skin], //&#x27;Skin&#x27;,
  SP: [RUI_ORGANS.body, RUI_ORGANS.spleen], //&#x27;Spleen&#x27;,
  ST: [RUI_ORGANS.body], //&#x27;Sternum&#x27;, *
  TH: [RUI_ORGANS.body, RUI_ORGANS.thymus], //&#x27;Thymus&#x27;,
  TR: [RUI_ORGANS.body, RUI_ORGANS.respiratory_system, RUI_ORGANS.lungs, RUI_ORGANS.trachea], //&#x27;Trachea&#x27;,
  UR: [RUI_ORGANS.body, RUI_ORGANS.ureter], //&#x27;Ureter&#x27;,
  UT: [RUI_ORGANS.body, RUI_ORGANS.uterus], //&#x27;Uterus&#x27;,
  OT: [RUI_ORGANS.body], //&#x27;Other&#x27;
};

const ENTITY_CONTEXT &#x3D; {
  &#x27;@base&#x27;: &#x27;http://purl.org/ccf/latest/ccf-entity.owl#&#x27;,
  &#x27;@vocab&#x27;: &#x27;http://purl.org/ccf/latest/ccf-entity.owl#&#x27;,
  ccf: &#x27;http://purl.org/ccf/latest/ccf.owl#&#x27;,
  rdfs: &#x27;http://www.w3.org/2000/01/rdf-schema#&#x27;,

  label: &#x27;rdfs:label&#x27;,
  description: &#x27;rdfs:comment&#x27;,
  link: {
    &#x27;@id&#x27;: &#x27;rdfs:seeAlso&#x27;,
    &#x27;@type&#x27;: &#x27;@id&#x27;
  },
  samples: {
    &#x27;@reverse&#x27;: &#x27;has_donor&#x27;
  },
  sections: {
    &#x27;@id&#x27;: &#x27;has_tissue_section&#x27;,
    &#x27;@type&#x27;: &#x27;@id&#x27;
  },
  datasets: {
    &#x27;@id&#x27;: &#x27;has_dataset&#x27;,
    &#x27;@type&#x27;: &#x27;@id&#x27;
  },
  // eslint-disable-next-line @typescript-eslint/naming-convention
  rui_location: {
    &#x27;@id&#x27;: &#x27;has_spatial_entity&#x27;,
    &#x27;@type&#x27;: &#x27;@id&#x27;
  },
  ontologyTerms: {
    &#x27;@id&#x27;: &#x27;has_ontology_term&#x27;,
    &#x27;@type&#x27;: &#x27;@id&#x27;
  },
  cellTypeTerms: {
    &#x27;@id&#x27;: &#x27;has_cell_type_term&#x27;,
    &#x27;@type&#x27;: &#x27;@id&#x27;
  },
  thumbnail: {
    &#x27;@id&#x27;: &#x27;has_thumbnail&#x27;
  }
};

/**
 * Converts a hubmap response object into JsonLd.
 *
 * @param data The hubmap data.
 * @returns The converted data.
 */
export function hubmapResponseAsJsonLd(data: unknown, assetsApi &#x3D; &#x27;&#x27;, portalUrl &#x3D; &#x27;&#x27;, serviceToken?: string, debug &#x3D; false): JsonLd {
  const entries &#x3D; (get(data, &#x27;hits.hits&#x27;, []) as JsonDict[])
    .map(e &#x3D;&gt; get(e, &#x27;_source&#x27;, {}) as JsonDict);

  const donorLookup: Record&lt;string, JsonLdObj&gt; &#x3D; {};
  const unflattened: JsonLdObj[] &#x3D; entries.map(e &#x3D;&gt;
    new HuBMAPTissueBlock(e, assetsApi, portalUrl, serviceToken).toJsonLd()
  );
  for (const donor of unflattened) {
    const donorId &#x3D; donor[&#x27;@id&#x27;] as string;
    if (!donorLookup[donorId]) {
      donorLookup[donorId] &#x3D; donor;
    } else {
      const samples &#x3D; donorLookup[donorId].samples as JsonLdObj[];
      samples.push((donor.samples as JsonLdObj[])[0]);
    }
  }
  const donors &#x3D; Object.values(donorLookup);

  if (debug) {
    debugDonors(donors);
    console.log(donors.map(d &#x3D;&gt; ({ &#x27;@context&#x27;: ENTITY_CONTEXT, ...d })));
  }

  return { &#x27;@context&#x27;: ENTITY_CONTEXT, &#x27;@graph&#x27;: donors };
}

function debugDonors(donors: JsonLdObj[]) {
  let datasets: JsonLdObj[] &#x3D; [];
  let deleted &#x3D; 0;
  for (const donor of donors.filter(d &#x3D;&gt; (d.samples as []).length &gt; 1)) {
    const samples &#x3D; donor.samples as JsonLdObj[];
    for (let i&#x3D;0; i &lt; samples.length; i++) {
      const blockId &#x3D; samples[i][&#x27;@id&#x27;] as string;
      datasets &#x3D; datasets.concat(samples[i].datasets as JsonLdObj[]);
      for (const section of samples[i].sections as JsonLdObj[]) {
        datasets &#x3D; datasets.concat(section.datasets as JsonLdObj[]);
      }
      for (let j&#x3D;i+1; j &lt; samples.length; j++) {
        const sections &#x3D; samples[j].sections as JsonLdObj[];
        if (sections.find(s &#x3D;&gt; s[&#x27;@id&#x27;] &#x3D;&#x3D;&#x3D; blockId)) {
          samples[i].deleteMe &#x3D; true;
          deleted++;
        }
      }
    }
    donor.samples &#x3D; samples.filter(s &#x3D;&gt; s.deleteMe !&#x3D;&#x3D; true);
  }
  if (deleted &gt; 0) {
    console.log(&#x60;⚠ ${deleted} sections identified as blocks&#x60;);
  }
}

export class HuBMAPTissueBlock {
  bad &#x3D; false;
  donor: JsonLdObj;

  &#x27;@id&#x27;: string;
  &#x27;@type&#x27; &#x3D; &#x27;Sample&#x27;;
  label: string;
  description: string;
  link: string;

  sample_type &#x3D; &#x27;Tissue Block&#x27;;
  section_count: number;
  section_size: number;
  section_units: string;

  rui_location: JsonLdObj;
  sections: JsonLdObj[];
  datasets: JsonLdObj[];

  constructor(public data: JsonDict, assetsApi &#x3D; &#x27;&#x27;, portalUrl &#x3D; &#x27;&#x27;, serviceToken?: string) {
    const entityType &#x3D; this.data.entity_type;
    if (entityType !&#x3D;&#x3D; &#x27;Sample&#x27;) {
      this.bad &#x3D; true;
      return;
    }
    const ancestors &#x3D; (this.data.ancestors || []) as JsonDict[];
    const descendants &#x3D; (this.data.descendants || []) as JsonDict[];

    const donor &#x3D; ancestors.find(e &#x3D;&gt; e.entity_type &#x3D;&#x3D;&#x3D; &#x27;Donor&#x27;) as JsonDict;
    this.donor &#x3D; this.getDonor(donor, portalUrl);
    const ruiLocation &#x3D; this.getRuiLocation(data, this.donor);
    if (!ruiLocation) {
      this.bad &#x3D; true;
    } else {
      this.rui_location &#x3D; ruiLocation;
    }

    if (!GROUP_UUID_MAPPING[data.group_uuid as string]) {
      GROUP_UUID_MAPPING[data.group_uuid as string] &#x3D; data.group_name as string;
    }

    const dateEntered &#x3D; new Date(data.last_modified_timestamp as number).toLocaleDateString();
    const groupName &#x3D; GROUP_UUID_MAPPING[data.group_uuid as string] || data.group_name as string;
    const creator &#x3D; data.created_by_user_displayname;

    this[&#x27;@id&#x27;] &#x3D; HBM_PREFIX + data.uuid;
    this.label &#x3D; &#x60;Registered ${dateEntered}, ${creator}, ${groupName}&#x60;;
    this.link &#x3D; &#x60;${portalUrl}browse/sample/${data.uuid}&#x60;;

    const sectionLookup: Record&lt;string, JsonLdObj&gt; &#x3D; {};
    const sections: JsonLdObj[] &#x3D; [];
    this.sections &#x3D; sections;
    const datasets: JsonLdObj[] &#x3D; [];
    this.datasets &#x3D; datasets;

    for (const descendant of descendants.filter(d &#x3D;&gt; d.entity_type &#x3D;&#x3D;&#x3D; &#x27;Sample&#x27;)) {
      const section &#x3D; this.getSection(descendant, data, portalUrl);

      const sectionId &#x3D; descendant.submission_id as string;
      sectionLookup[sectionId] &#x3D; section;
      sections.push(section);
      section.section_number &#x3D; section.section_number ?? sections.length;
    }
    for (const descendant of descendants) {
      if (descendant.entity_type &#x3D;&#x3D;&#x3D; &#x27;Dataset&#x27;) {
        const dataset &#x3D; this.getDataset(descendant, assetsApi, portalUrl, serviceToken);

        const sectionId &#x3D; get(descendant, [&#x27;ingest_metadata&#x27;, &#x27;metadata&#x27;, &#x27;tissue_id&#x27;]) as string;
        if (sectionLookup[sectionId]) {
          (sectionLookup[sectionId].datasets as JsonLd[])?.push(dataset);
        } else {
          datasets.push(dataset);
        }
      }
    }

    const loc: JsonDict &#x3D; ruiLocation ?? {};
    const dims &#x3D; &#x60;${loc.x_dimension} x ${loc.y_dimension} x ${loc.z_dimension} ${loc.dimension_units}&#x60;;
    this.section_count &#x3D; loc.slice_count as number || sections.length;
    const sSize &#x3D; parseFloat(
      (loc.slice_thickness as number ||
        ((loc.z_dimension as number || 0) / Math.max(this.section_count, 1)))
        .toFixed(1)
    );
    this.section_size &#x3D; sSize;
    const sUnits &#x3D; loc.dimension_units as string || &#x27;millimeter&#x27;;
    this.section_units &#x3D; sUnits;

    this.description &#x3D; &#x60;${dims}, ${sSize} ${sUnits}, ${data.specimen_type}, ${this.section_count} Sections&#x60;;

    sections.forEach((section, index) &#x3D;&gt; {
      section.description &#x3D; &#x60;${loc.x_dimension} x ${loc.y_dimension} x ${sSize} ${sUnits}, ${sSize} ${sUnits}, ${section.description}&#x60;;
      section.section_number &#x3D; index + 1;
    });
  }

  getSection(section: JsonDict, data: JsonDict, portalUrl: string): JsonLdObj {
    const dateEntered &#x3D; new Date(section.last_modified_timestamp as number).toLocaleDateString();
    const groupName &#x3D; GROUP_UUID_MAPPING[section.group_uuid as string] || section.group_name as string;
    const creator &#x3D; section.created_by_user_displayname;

    return {
      &#x27;@id&#x27;: HBM_PREFIX + section.uuid,
      &#x27;@type&#x27;: &#x27;Sample&#x27;,
      label: &#x60;Registered ${dateEntered}, ${creator}, ${groupName}&#x60;,
      description: &#x60;${data.specimen_type}&#x60;,
      link: &#x60;${portalUrl}browse/sample/${section.uuid}&#x60;,

      sample_type: &#x27;Tissue Section&#x27;,
      section_number: 1,

      samples: [],
      datasets: []
    };
  }

  getDataset(dataset: JsonDict, assetsApi &#x3D; &#x27;&#x27;, portalUrl &#x3D; &#x27;&#x27;, serviceToken?: string): JsonLdObj {
    const dateEntered &#x3D; new Date(dataset.last_modified_timestamp as number).toLocaleDateString();
    const groupName &#x3D; GROUP_UUID_MAPPING[dataset.group_uuid as string] || dataset.group_name as string;
    const creator &#x3D; dataset.created_by_user_displayname;

    const types &#x3D; [
      ...dataset.data_types as string[],
      get(dataset, [&#x27;ingest_metadata&#x27;, &#x27;metadata&#x27;, &#x27;assay_type&#x27;], &#x27;&#x27;)
    ];
    const typesSearch &#x3D; types.join(&#x27;|&#x27;).toLowerCase();

    let technology: string;
    let thumbnail &#x3D; &#x27;assets/icons/ico-unknown.svg&#x27;;
    if (typesSearch.indexOf(&#x27;10x&#x27;) !&#x3D;&#x3D; -1) {
      technology &#x3D; &#x27;10x&#x27;;
      thumbnail &#x3D; &#x27;assets/icons/ico-bulk-10x.svg&#x27;;
    } else if (typesSearch.indexOf(&#x27;af&#x27;) !&#x3D;&#x3D; -1) {
      technology &#x3D; &#x27;AF&#x27;;
      thumbnail &#x3D; &#x27;assets/icons/ico-spatial-af.svg&#x27;;
    } else if (typesSearch.indexOf(&#x27;codex&#x27;) !&#x3D;&#x3D; -1) {
      technology &#x3D; &#x27;CODEX&#x27;;
      thumbnail &#x3D; &#x27;assets/icons/ico-spatial-codex.svg&#x27;;
    } else if (typesSearch.indexOf(&#x27;imc&#x27;) !&#x3D;&#x3D; -1) {
      technology &#x3D; &#x27;IMC&#x27;;
      thumbnail &#x3D; &#x27;assets/icons/ico-spatial-imc.svg&#x27;;
    } else if ((typesSearch.indexOf(&#x27;lc&#x27;) !&#x3D;&#x3D; -1) &amp;&amp; (typesSearch.indexOf(&#x27;af&#x27;) &#x3D;&#x3D;&#x3D; -1)) {
      technology &#x3D; &#x27;LC&#x27;;
      thumbnail &#x3D; &#x27;assets/icons/ico-bulk-lc.svg&#x27;;
    } else if (typesSearch.indexOf(&#x27;maldi&#x27;) !&#x3D;&#x3D; -1) {
      technology &#x3D; &#x27;MALDI&#x27;;
    } else if (typesSearch.indexOf(&#x27;pas&#x27;) !&#x3D;&#x3D; -1) {
      technology &#x3D; &#x27;PAS&#x27;;
    } else {
      technology &#x3D; &#x27;OTHER&#x27;;
    }
    thumbnail &#x3D; this.getDatasetThumbnail(dataset, assetsApi, serviceToken) ?? thumbnail;

    return {
      &#x27;@id&#x27;: HBM_PREFIX + dataset.uuid,
      &#x27;@type&#x27;: &#x27;Dataset&#x27;,
      label: &#x60;Registered ${dateEntered}, ${creator}, ${groupName}&#x60;,
      description: &#x60;Data/Assay Types: ${types.join(&#x27;, &#x27;)}&#x60;,
      link: &#x60;${portalUrl}browse/dataset/${dataset.uuid}&#x60;,
      technology,
      thumbnail
    };
  }

  getDatasetThumbnail(dataset: JsonDict, assetsApi: string, serviceToken?: string): string | undefined {
    if (dataset.thumbnail_file) {
      const thumbnailFile &#x3D; dataset.thumbnail_file as JsonDict;
      return &#x60;${assetsApi}/${thumbnailFile.file_uuid}/${thumbnailFile.filename}&#x60; + (serviceToken ? &#x60;?token&#x3D;${serviceToken}&#x60; : &#x27;&#x27;);
    } else if (dataset.group_uuid &#x3D;&#x3D;&#x3D; &#x27;73bb26e4-ed43-11e8-8f19-0a7c1eab007a&#x27;) { // TMC-Vanderbilt
      const tiffs &#x3D; (get(dataset, &#x27;metadata.files&#x27;, []) as { rel_path: string }[])
        .filter(f &#x3D;&gt; /\.(ome\.tif|ome\.tiff)$/.test(f.rel_path))
        .filter(f &#x3D;&gt; !/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(f.rel_path))
        .filter(f &#x3D;&gt; DR1_VU_THUMBS.has(
          f.rel_path.split(&#x27;/&#x27;).slice(-1)[0].split(&#x27;?&#x27;)[0].replace(&#x27;.ome.tif&#x27;, &#x27;_thumbnail.jpg&#x27;)
        ))
        .map(f &#x3D;&gt; &#x60;${assetsApi}/${dataset.uuid}/${f.rel_path}&#x60; + (serviceToken ? &#x60;?token&#x3D;${serviceToken}&#x60; : &#x27;&#x27;));

      if (tiffs.length &gt; 0) {
        const thumb &#x3D; tiffs[0].split(&#x27;/&#x27;).slice(-1)[0].split(&#x27;?&#x27;)[0].replace(&#x27;.ome.tif&#x27;, &#x27;_thumbnail.jpg&#x27;);
        if (DR1_VU_THUMBS.has(thumb)) {
          return &#x60;assets/thumbnails/TMC-Vanderbilt/DR1/${thumb}&#x60;;
        }
      }
    } else if (dataset.group_uuid &#x3D;&#x3D;&#x3D; &#x27;07a29e4c-ed43-11e8-b56a-0e8017bdda58&#x27;) { // TMC-Florida
      const thumb &#x3D; UFL_THUMBS[dataset.hubmap_id as string];
      if (thumb) {
        return &#x60;assets/thumbnails/TMC-Florida/${thumb}&#x60;;
      }
    }
    return undefined;
  }

  getDonor(donor: JsonDict, portalUrl: string): JsonLdObj {
    const donorDescription &#x3D; (donor.description as string || &#x27;&#x27;).toLowerCase();
    let sex: &#x27;Male&#x27; | &#x27;Female&#x27; | undefined;
    if (donorDescription.includes(&#x27;female&#x27;)) {
      sex &#x3D; &#x27;Female&#x27;;
    } else if (donorDescription.includes(&#x27;male&#x27;)) {
      sex &#x3D; &#x27;Male&#x27;;
    }
    const ageMatch &#x3D; donorDescription.match(/age ([0-9]+)/);
    let age: number | undefined;
    if (ageMatch) {
      age &#x3D; toNumber(ageMatch[1]);
    }
    let bmi: number | undefined;
    for (const md of get(donor, &#x27;metadata.organ_donor_data&#x27;, []) as JsonDict[]) {
      if (md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Feminine gender&#x27; || md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Female&#x27;) {
        sex &#x3D; &#x27;Female&#x27;;
      } else if (md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Masculine gender&#x27; || md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Male&#x27;) {
        sex &#x3D; &#x27;Male&#x27;;
      } else if (md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Current chronological age&#x27; || md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Age&#x27;) {
        age &#x3D; toNumber(md.data_value);
      } else if (md.preferred_term &#x3D;&#x3D;&#x3D; &#x27;Body mass index&#x27;) {
        bmi &#x3D; toNumber(md.data_value);
      }
    }
    let label &#x3D; &#x27;&#x27;;
    if (sex &amp;&amp; age) {
      label +&#x3D; &#x60;${sex}, Age ${age}&#x60;;
      if (bmi) {
        label +&#x3D; &#x60;, BMI ${bmi.toFixed(1)}&#x60;;
      }
    }

    const dateEntered &#x3D; new Date(donor.last_modified_timestamp as number).toLocaleDateString();
    const groupName &#x3D; GROUP_UUID_MAPPING[donor.group_uuid as string] || donor.group_name as string;
    const creator &#x3D; donor.created_by_user_displayname;

    return {
      &#x27;@id&#x27;: HBM_PREFIX + donor.uuid,
      &#x27;@type&#x27;: &#x27;Donor&#x27;,
      label,
      description: &#x60;Entered ${dateEntered}, ${creator}, ${groupName}&#x60;,
      link: &#x60;${portalUrl}browse/donor/${donor.uuid}&#x60;,

      age,
      sex,
      bmi,

      consortium_name: &#x27;HuBMAP&#x27;,
      provider_name: groupName,
      provider_uuid: donor.group_uuid as string,

      samples: []
    };
  }

  getRuiLocation(data: JsonDict, donor: JsonLdObj): JsonLdObj | undefined {
    const ancestors &#x3D; (data.ancestors || []) as JsonDict[];
    const organSample &#x3D; ancestors.find(e &#x3D;&gt; e.entity_type &#x3D;&#x3D;&#x3D; &#x27;Sample&#x27; &amp;&amp; e.specimen_type &#x3D;&#x3D;&#x3D; &#x27;organ&#x27;) as JsonDict;
    const ontologyTerms &#x3D; HBM_ORGANS[organSample?.organ as string] || [RUI_ORGANS.body];

    let spatialEntity: JsonLdObj | undefined;
    let ruiLocation &#x3D; data.rui_location as JsonDict;
    if (ruiLocation) {
      // RUI Location may come in as an unparsed string
      if (typeof ruiLocation &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
        ruiLocation &#x3D; JSON.parse(ruiLocation as string) as JsonDict;
      }
      if (ruiLocation.alignment_id) { // Detect RUI 0.5 generated JSON
        console.log(&#x27;Detected a deprecated rui_location&#x27;, data.uuid);
      } else if ((ruiLocation as unknown as { &#x27;@id&#x27;: string })[&#x27;@id&#x27;]) { // Detect RUI 1.0+ generated JSON-LD
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        spatialEntity &#x3D; ruiLocation as unknown as JsonLdObj;
      }
    }
    if (spatialEntity) {
      spatialEntity.ccf_annotations &#x3D; ontologyTerms.concat(spatialEntity.ccf_annotations as string[] || []);

      // Patch to fix RUI 0.5 Kidney and Spleen Placements
      const target: string &#x3D; get(spatialEntity, [&#x27;placement&#x27;, &#x27;target&#x27;]) ?? &#x27;&#x27;;
      if (target.startsWith(&#x27;http://purl.org/ccf/latest/ccf.owl#VHSpleenCC&#x27;)) {
        if (donor.sex &#x3D;&#x3D;&#x3D; &#x27;Male&#x27;) {
          set(spatialEntity, [&#x27;placement&#x27;, &#x27;target&#x27;], target.replace(&#x27;#VHSpleenCC&#x27;, &#x27;#VHMSpleenCC&#x27;));
        } else {
          set(spatialEntity, [&#x27;placement&#x27;, &#x27;target&#x27;], target.replace(&#x27;#VHSpleenCC&#x27;, &#x27;#VHFSpleenCC&#x27;));
        }
      }
      if (target &#x3D;&#x3D;&#x3D; &#x27;http://purl.org/ccf/latest/ccf.owl#VHLeftKidney&#x27; || target &#x3D;&#x3D;&#x3D; &#x27;http://purl.org/ccf/latest/ccf.owl#VHRightKidney&#x27;) {
        if (donor.sex &#x3D;&#x3D;&#x3D; &#x27;Male&#x27;) {
          set(spatialEntity, [&#x27;placement&#x27;, &#x27;target&#x27;], target.replace(&#x27;#VH&#x27;, &#x27;#VHM&#x27;) + &#x27;_Patch&#x27;);
        } else {
          set(spatialEntity, [&#x27;placement&#x27;, &#x27;target&#x27;], target.replace(&#x27;#VH&#x27;, &#x27;#VHF&#x27;) + &#x27;_Patch&#x27;);
        }
      }
    }
    return spatialEntity;
  }

  getTissueBlock(): JsonLdObj {
    return omit({ ...this }, [&#x27;data&#x27;, &#x27;bad&#x27;, &#x27;donor&#x27;]) as unknown as JsonLdObj;
  }

  toJsonLd(): JsonLdObj {
    return { ...this.donor, samples: [this.getTissueBlock()] };
  }
}
</code></pre>
    </div>
</div>



                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'HuBMAPTissueBlock.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
