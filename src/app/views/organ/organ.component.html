<div class="ccf-organ wrapper">
  <div *ngIf="!is3D" class="container">
    <svg class="organ-group" viewBox="0 0 800 1000">
      <use class="organ" [attr.href]="dataService.organImagePath | async" #image></use>
      <ng-container *ngFor="let sample of dataService.organOverlays | async">
        <use class="centroid" attr.href="{{ sample.overlayUrl }}#centroid" #centroid></use>
        <use class="overlay" attr.href="{{ sample.overlayUrl }}#overlay" routerLink="/tissues"
             (mouseenter)="activeMetadata = [sample.metadata]" (mouseleave)="activeMetadata = []" #overlay></use>
        <g *ngIf="dataService.getCounts(sample) | async as counts" ccf-callout class="callout" [boundary]="image"
           [centroid]="overlay">
          <xhtml:div>
            {{ counts.patients }} <strong>{{ pluralizeSuffix(counts.patients, 'Patient') }}</strong><br />
            {{ pluralize(counts.tissueSamples, 'Tissue sample') }} <br />
            {{ pluralize(counts.tissueSlices, 'Tissue slice') }}<br />
            {{ pluralize(counts.tissueImages, 'Tissue image') }}<br />
            {{ pluralize(counts.cells, 'Cell') }}
          </xhtml:div>
        </g>
      </ng-container>
    </svg>

    <ccf-metadata class="metadata" [metadata]="activeMetadata"></ccf-metadata>
  </div>

  <ccf-organ3d *ngIf="is3D" base="assets/3d/kidney/base.gltf" [baseRotation]="{ x: -0.78539816339 }"></ccf-organ3d>
</div>
