(()=>{"use strict";var e,d={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return d[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=d,e=[],a.O=(n,r,u,l)=>{if(!r){var c=1/0;for(t=0;t<e.length;t++){for(var[r,u,l]=e[t],i=!0,f=0;f<r.length;f++)(!1&l||c>=l)&&Object.keys(a.O).every(b=>a.O[b](r[f]))?r.splice(f--,1):(i=!1,l<c&&(c=l));if(i){e.splice(t--,1);var o=u();void 0!==o&&(n=o)}}return n}l=l||0;for(var t=e.length;t>0&&e[t-1][2]>l;t--)e[t]=e[t-1];e[t]=[r,u,l]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=u=>0===e[u];var n=(u,l)=>{var f,o,[t,c,i]=l,s=0;for(f in c)a.o(c,f)&&(a.m[f]=c[f]);if(i)var _=i(a);for(u&&u(l);s<t.length;s++)a.o(e,o=t[s])&&e[o]&&e[o][0](),e[t[s]]=0;return a.O(_)},r=self.webpackChunkccf_ui=self.webpackChunkccf_ui||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[429],{138:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const G=HTMLElement;window.HTMLElement=function(){return Reflect.construct(G,[],this.constructor)},HTMLElement.prototype=G.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,G)}()}()},142:()=>{!function(G,ne){"use strict";function he(){var e=Ge.splice(0,Ge.length);for(V=0;e.length;)e.shift().call(null,e.shift())}function ye(e,r){for(var i=0,h=e.length;i<h;i++)je(e[i],r)}function Ve(e){return function(r){L(r)&&(je(r,e),le.length&&ye(r.querySelectorAll(le),e))}}function Ie(e){var r=R.call(e,"is"),i=e.nodeName.toUpperCase(),h=Te.call(Ne,r?st+r.toUpperCase():Xe+i);return r&&-1<h&&!Ze(i,r)?-1:h}function Ze(e,r){return-1<le.indexOf(e+'[is="'+r+'"]')}function Ue(e){var r=e.currentTarget,i=e.attrChange,h=e.attrName,s=e.target,o=e[ot]||2,l=e[pt]||3;!n||s&&s!==r||!r[Ee]||"style"===h||e.prevValue===e.newValue&&(""!==e.newValue||i!==o&&i!==l)||r[Ee](h,i===o?null:e.prevValue,i===l?null:e.newValue)}function et(e){var r=Ve(e);return function(i){Ge.push(r,i.target),V&&clearTimeout(V),V=setTimeout(he,1)}}function de(e){k&&(k=!1,e.currentTarget.removeEventListener(bt,de)),le.length&&ye((e.target||A).querySelectorAll(le),e.detail===pe?pe:Le),z&&function(){for(var e,r=0,i=T.length;r<i;r++)De.contains(e=T[r])||(i--,T.splice(r--,1),je(e,pe))}()}function ve(e,r){var i=this;$.call(i,e,r),xe.call(i,{target:i})}function Ae(e,r,i){var h=r.apply(e,i),s=Ie(h);return-1<s&&ae(h,Ye[s]),i.pop()&&le.length&&function(e){for(var r,i=0,h=e.length;i<h;i++)ae(r=e[i],Ye[Ie(r)])}(h.querySelectorAll(le)),h}function Be(e,r){b(e,r),We?We.observe(e,oe):(I&&(e.setAttribute=ve,e[me]=nt(e),e[be](Et,xe)),e[be](He,Ue)),e[qe]&&n&&(e.created=!0,e[qe](),e.created=!1)}function U(e){throw new Error("A "+e+" type is already registered")}function je(e,r){var i,h,s=Ie(e);-1<s&&!B.call(e,"TEMPLATE")&&(we(e,Ye[s]),s=0,r!==Le||e[Le]?r!==pe||e[pe]||(e[Le]=!1,e[pe]=!0,h="disconnected",s=1):(e[pe]=!1,e[Le]=!0,h="connected",s=1,z&&Te.call(T,e)<0&&T.push(e)),s&&(i=e[r+ce]||e[h+ce])&&i.call(e))}function ke(){}function J(e,r,i){var h=i&&i[te]||"",s=r.prototype,o=w(s),l=r.observedAttributes||Oe,d={prototype:o};x(o,qe,{value:function(){if(f)f=!1;else if(!this[Je]){this[Je]=!0,new r(this),s[qe]&&s[qe].call(this);var p=m[v.get(r)];(!t||p.create.length>1)&&tt(this)}}}),x(o,Ee,{value:function(p){-1<Te.call(l,p)&&s[Ee]&&s[Ee].apply(this,arguments)}}),s[rt]&&x(o,vt,{value:s[rt]}),s[mt]&&x(o,kt,{value:s[mt]}),h&&(d[te]=h),e=e.toUpperCase(),m[e]={constructor:r,create:h?[h,C(e)]:[e]},v.set(r,e),A[se](e.toLowerCase(),d),ut(e),E[e].r()}function gt(e){var r=m[e.toUpperCase()];return r&&r.constructor}function yt(e){return"string"==typeof e?e:e&&e.is||""}function tt(e){for(var r,i=e[Ee],h=i?e.attributes:Oe,s=h.length;s--;)i.call(e,(r=h[s]).name||r.nodeName,null,r.value||r.nodeValue)}function ut(e){return(e=e.toUpperCase())in E||(E[e]={},E[e].p=new c(function(r){E[e].r=r})),E[e].p}function ft(){Me&&delete G.customElements,Re(G,"customElements",{configurable:!0,value:new ke}),Re(G,"CustomElementRegistry",{configurable:!0,value:ke});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),r=e.length;r--;function(i){var h=G[i];if(h){G[i]=function(s){var o,l;return s||(s=this),s[Je]||(f=!0,o=m[v.get(s.constructor)],(s=(l=t&&1===o.create.length)?Reflect.construct(h,Oe,o.constructor):A.createElement.apply(A,o.create))[Je]=!0,f=!1,l||tt(s)),s},G[i].prototype=h.prototype;try{h.prototype.constructor=G[i]}catch(s){Re(h,Je,{value:G[i]})}}}(e[r]));A.createElement=function(i,h){var s=yt(h);return s?H.call(this,i,C(s)):H.call(this,i)},ue||(X=!0,A[se](""))}var A=G.document,re=G.Object,ht=function(e){var r,i,h,s,o=/^[A-Z]+[a-z]/,d=function(_,g){(g=g.toLowerCase())in p||(p[_]=(p[_]||[]).concat(g),p[g]=p[g.toUpperCase()]=_)},p=(re.create||re)(null),y={};for(i in e)for(s in e[i])for(p[s]=h=e[i][s],r=0;r<h.length;r++)p[h[r].toLowerCase()]=p[h[r].toUpperCase()]=s;return y.get=function(_){return"string"==typeof _?p[_]||(o.test(_)?[]:""):function(_){var g,M=[];for(g in p)_.test(g)&&M.push(g);return M}(_)},y.set=function(_,g){return o.test(_)?d(_,g):d(g,_),y},y}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ne&&(ne={type:ne||"auto"});var Ge,xe,ze,nt,We,ie,we,ae,Ce,e,r,i,h,s,se="registerElement",dt=1e5*G.Math.random()>>0,me="__"+se+dt,be="addEventListener",Le="attached",ce="Callback",pe="detached",te="extends",Ee="attributeChanged"+ce,vt=Le+ce,rt="connected"+ce,mt="disconnected"+ce,qe="created"+ce,kt=pe+ce,ot="ADDITION",pt="REMOVAL",He="DOMAttrModified",bt="DOMContentLoaded",Et="DOMSubtreeModified",Xe="<",st="=",Mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,wt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ne=[],Ye=[],le="",De=A.documentElement,Te=Ne.indexOf||function(e){for(var r=this.length;r--&&this[r]!==e;);return r},it=re.prototype,Pe=it.hasOwnProperty,at=it.isPrototypeOf,Re=re.defineProperty,Oe=[],Ke=re.getOwnPropertyDescriptor,Y=re.getOwnPropertyNames,Ct=re.getPrototypeOf,$e=re.setPrototypeOf,Se=!!re.__proto__,Je="__dreCEv1",Me=G.customElements,t=!/^force/.test(ne.type)&&!!(Me&&Me.define&&Me.get&&Me.whenDefined),a=re.create||re,u=G.Map||function(){var e,r=[],i=[];return{get:function(h){return i[Te.call(r,h)]},set:function(h,s){(e=Te.call(r,h))<0?i[r.push(h)-1]=s:i[e]=s}}},c=G.Promise||function(e){function r(o){for(h=!0;i.length;)i.shift()(o)}var i=[],h=!1,s={catch:function(){return s},then:function(o){return i.push(o),h&&setTimeout(r,1),s}};return e(r),s},f=!1,m=a(null),E=a(null),v=new u,C=function(e){return e.toLowerCase()},w=re.create||function e(r){return r?(e.prototype=r,new e):this},b=$e||(Se?function(e,r){return e.__proto__=r,e}:Y&&Ke?function(){function e(r,i){for(var h,s=Y(i),o=0,l=s.length;o<l;o++)Pe.call(r,h=s[o])||Re(r,h,Ke(i,h))}return function(r,i){do{e(r,i)}while((i=Ct(i))&&!at.call(i,r));return r}}():function(e,r){for(var i in r)e[i]=r[i];return e}),N=G.MutationObserver||G.WebKitMutationObserver,S=G.HTMLAnchorElement,P=(G.HTMLElement||G.Element||G.Node).prototype,z=!at.call(P,De),x=z?function(e,r,i){return e[r]=i.value,e}:Re,L=z?function(e){return 1===e.nodeType}:function(e){return at.call(P,e)},T=z&&[],Z=P.attachShadow,W=P.cloneNode,B=P.closest||function(e){for(var r=this;r&&r.nodeName!==e;)r=r.parentNode;return r},K=P.dispatchEvent,R=P.getAttribute,Q=P.hasAttribute,F=P.removeAttribute,$=P.setAttribute,O=A.createElement,j=A.importNode,H=O,oe=N&&{attributes:!0,characterData:!0,attributeOldValue:!0},_e=N||function(e){I=!1,De.removeEventListener(He,_e)},V=0,ue=se in A&&!/^force-all/.test(ne.type),fe=!0,X=!1,I=!0,k=!0,n=!0;if(N&&((Ce=A.createElement("div")).innerHTML="<div><div></div></div>",new N(function(e,r){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var i=(Ce=Ke(P,"innerHTML"))&&Ce.set;i&&Re(P,"innerHTML",{set:function(h){for(;this.lastChild;)this.removeChild(this.lastChild);i.call(this,h)}})}r.disconnect(),Ce=null}).observe(Ce,{childList:!0,subtree:!0}),Ce.innerHTML=""),ue||($e||Se?(we=function(e,r){at.call(r,e)||Be(e,r)},ae=Be):ae=we=function(e,r){e[me]||(e[me]=re(!0),Be(e,r))},z?(I=!1,e=Ke(P,be),r=e.value,i=function(o){var l=new CustomEvent(He,{bubbles:!0});l.attrName=o,l.prevValue=R.call(this,o),l.newValue=null,l[pt]=l.attrChange=2,F.call(this,o),K.call(this,l)},h=function(o,l){var d=Q.call(this,o),p=d&&R.call(this,o),y=new CustomEvent(He,{bubbles:!0});$.call(this,o,l),y.attrName=o,y.prevValue=d?p:null,y.newValue=l,d?y.MODIFICATION=y.attrChange=1:y[ot]=y.attrChange=0,K.call(this,y)},s=function(o){var l,d=o.currentTarget,p=d[me],y=o.propertyName;p.hasOwnProperty(y)&&(p=p[y],(l=new CustomEvent(He,{bubbles:!0})).attrName=p.name,l.prevValue=p.value||null,l.newValue=p.value=d[y]||null,null==l.prevValue?l[ot]=l.attrChange=0:l.MODIFICATION=l.attrChange=1,K.call(d,l))},e.value=function(o,l,d){o===He&&this[Ee]&&this.setAttribute!==h&&(this[me]={className:{name:"class",value:this.className}},this.setAttribute=h,this.removeAttribute=i,r.call(this,"propertychange",s)),r.call(this,o,l,d)},Re(P,be,e)):N||(De[be](He,_e),De.setAttribute(me,1),De.removeAttribute(me),I&&(xe=function(e){var r,i,h,s=this;if(s===e.target){for(h in r=s[me],s[me]=i=nt(s),i){if(!(h in r))return ze(0,s,h,r[h],i[h],ot);if(i[h]!==r[h])return ze(1,s,h,r[h],i[h],"MODIFICATION")}for(h in r)if(!(h in i))return ze(2,s,h,r[h],i[h],pt)}},ze=function(e,r,i,h,s,o){var l={attrChange:e,currentTarget:r,attrName:i,prevValue:h,newValue:s};l[o]=e,Ue(l)},nt=function(e){for(var r,i,h={},s=e.attributes,o=0,l=s.length;o<l;o++)"setAttribute"!==(i=(r=s[o]).name)&&(h[i]=r.value);return h})),A[se]=function(e,r){if(i=e.toUpperCase(),fe&&(fe=!1,N?(We=function(p,y){function _(g,M){for(var D=0,q=g.length;D<q;M(g[D++]));}return new N(function(g){for(var M,D,q,ee=0,ge=g.length;ee<ge;ee++)"childList"===(M=g[ee]).type?(_(M.addedNodes,p),_(M.removedNodes,y)):(D=M.target,n&&D[Ee]&&"style"!==M.attributeName&&(q=R.call(D,M.attributeName))!==M.oldValue&&D[Ee](M.attributeName,M.oldValue,q))})}(Ve(Le),Ve(pe)),(ie=function(p){return We.observe(p,{childList:!0,subtree:!0}),p})(A),Z&&(P.attachShadow=function(){return ie(Z.apply(this,arguments))})):(Ge=[],A[be]("DOMNodeInserted",et(Le)),A[be]("DOMNodeRemoved",et(pe))),A[be](bt,de),A[be]("readystatechange",de),A.importNode=function(p,y){switch(p.nodeType){case 1:return Ae(A,j,[p,!!y]);case 11:for(var _=A.createDocumentFragment(),g=p.childNodes,M=g.length,D=0;D<M;D++)_.appendChild(A.importNode(g[D],!!y));return _;default:return W.call(p,!!y)}},P.cloneNode=function(p){return Ae(this,W,[!!p])}),X)return X=!1;if(-2<Te.call(Ne,st+i)+Te.call(Ne,Xe+i)&&U(e),!Mt.test(i)||-1<Te.call(wt,i))throw new Error("The type "+e+" is invalid");var i,h,s=function(){return l?A.createElement(d,i):A.createElement(d)},o=r||it,l=Pe.call(o,te),d=l?r[te].toUpperCase():i;return l&&-1<Te.call(Ne,Xe+d)&&U(d),h=Ne.push((l?st:Xe)+i)-1,le=le.concat(le.length?",":"",l?d+'[is="'+e.toLowerCase()+'"]':d),s.prototype=Ye[h]=Pe.call(o,"prototype")?o.prototype:w(P),le.length&&ye(A.querySelectorAll(le),Le),s},A.createElement=H=function(e,r){var i=yt(r),h=i?O.call(A,e,C(i)):O.call(A,e),s=""+e,o=Te.call(Ne,(i?st:Xe)+(i||s).toUpperCase()),l=-1<o;return i&&(h.setAttribute("is",i=i.toLowerCase()),l&&(l=Ze(s.toUpperCase(),i))),n=!A.createElement.innerHTMLHelper,l&&ae(h,Ye[o]),h}),addEventListener("beforeunload",function(){delete A.createElement,delete A.importNode,delete A[se]},!1),ke.prototype={constructor:ke,define:t?function(e,r,i){if(i)J(e,r,i);else{var h=e.toUpperCase();m[h]={constructor:r,create:[h]},v.set(r,h),Me.define(e,r)}}:J,get:t?function(e){return Me.get(e)||gt(e)}:gt,whenDefined:t?function(e){return c.race([Me.whenDefined(e),ut(e)])}:ut},!Me||/^force/.test(ne.type))ft();else if(!ne.noBuiltIn)try{!function(e,r,i){var h=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(r[te]="a",(e.prototype=w(S.prototype)).constructor=e,G.customElements.define(i,e,r),!h.test(A.createElement("a",{is:i}).outerHTML)||!h.test((new e).outerHTML))throw r}(function e(){return Reflect.construct(S,[],e)},{},"document-register-element-a"+dt)}catch(e){ft()}if(!ne.noBuiltIn)try{if(O.call(A,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){C=function(r){return{is:r.toLowerCase()}}}}(window)},277:()=>{"use strict";!function(t){const a=t.performance;function u(I){a&&a.mark&&a.mark(I)}function c(I,k){a&&a.measure&&a.measure(I,k)}u("Zone");const f=t.__Zone_symbol_prefix||"__zone_symbol__";function m(I){return f+I}const E=!0===t[m("forceDuplicateZoneCheck")];if(t.Zone){if(E||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let v=(()=>{class I{constructor(n,e){this._parent=n,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new w(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=I.current;for(;n.parent;)n=n.parent;return n}static get current(){return V.zone}static get currentTask(){return ue}static __load_patch(n,e,r=!1){if(oe.hasOwnProperty(n)){if(!r&&E)throw Error("Already loaded patch: "+n)}else if(!t["__Zone_disable_"+n]){const i="Zone:"+n;u(i),oe[n]=e(t,I,_e),c(i,i)}}get parent(){return this._parent}get name(){return this._name}get(n){const e=this.getZoneWith(n);if(e)return e._properties[n]}getZoneWith(n){let e=this;for(;e;){if(e._properties.hasOwnProperty(n))return e;e=e._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,e){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const r=this._zoneDelegate.intercept(this,n,e),i=this;return function(){return i.runGuarded(r,this,arguments,e)}}run(n,e,r,i){V={parent:V,zone:this};try{return this._zoneDelegate.invoke(this,n,e,r,i)}finally{V=V.parent}}runGuarded(n,e=null,r,i){V={parent:V,zone:this};try{try{return this._zoneDelegate.invoke(this,n,e,r,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{V=V.parent}}runTask(n,e,r){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");if(n.state===B&&(n.type===H||n.type===j))return;const i=n.state!=Q;i&&n._transitionTo(Q,R),n.runCount++;const h=ue;ue=n,V={parent:V,zone:this};try{n.type==j&&n.data&&!n.data.isPeriodic&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,n,e,r)}catch(s){if(this._zoneDelegate.handleError(this,s))throw s}}finally{n.state!==B&&n.state!==$&&(n.type==H||n.data&&n.data.isPeriodic?i&&n._transitionTo(R,Q):(n.runCount=0,this._updateTaskCount(n,-1),i&&n._transitionTo(B,Q,B))),V=V.parent,ue=h}}scheduleTask(n){if(n.zone&&n.zone!==this){let r=this;for(;r;){if(r===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);r=r.parent}}n._transitionTo(K,B);const e=[];n._zoneDelegates=e,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(r){throw n._transitionTo($,K,B),this._zoneDelegate.handleError(this,r),r}return n._zoneDelegates===e&&this._updateTaskCount(n,1),n.state==K&&n._transitionTo(R,K),n}scheduleMicroTask(n,e,r,i){return this.scheduleTask(new b(O,n,e,r,i,void 0))}scheduleMacroTask(n,e,r,i,h){return this.scheduleTask(new b(j,n,e,r,i,h))}scheduleEventTask(n,e,r,i,h){return this.scheduleTask(new b(H,n,e,r,i,h))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");n._transitionTo(F,R,Q);try{this._zoneDelegate.cancelTask(this,n)}catch(e){throw n._transitionTo($,F),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(n,-1),n._transitionTo(B,F),n.runCount=0,n}_updateTaskCount(n,e){const r=n._zoneDelegates;-1==e&&(n._zoneDelegates=null);for(let i=0;i<r.length;i++)r[i]._updateTaskCount(n.type,e)}}return I.__symbol__=m,I})();const C={name:"",onHasTask:(I,k,n,e)=>I.hasTask(n,e),onScheduleTask:(I,k,n,e)=>I.scheduleTask(n,e),onInvokeTask:(I,k,n,e,r,i)=>I.invokeTask(n,e,r,i),onCancelTask:(I,k,n,e)=>I.cancelTask(n,e)};class w{constructor(k,n,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=k,this._parentDelegate=n,this._forkZS=e&&(e&&e.onFork?e:n._forkZS),this._forkDlgt=e&&(e.onFork?n:n._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:n._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:n._interceptZS),this._interceptDlgt=e&&(e.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:n._invokeZS),this._invokeDlgt=e&&(e.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:n._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:n._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:n._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:n._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=e&&e.onHasTask;(r||n&&n._hasTaskZS)&&(this._hasTaskZS=r?e:C,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=k,e.onScheduleTask||(this._scheduleTaskZS=C,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=C,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=C,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}fork(k,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,k,n):new v(k,n)}intercept(k,n,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,k,n,e):n}invoke(k,n,e,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,k,n,e,r,i):n.apply(e,r)}handleError(k,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,k,n)}scheduleTask(k,n){let e=n;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,k,n),e||(e=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=O)throw new Error("Task is missing scheduleFn.");T(n)}return e}invokeTask(k,n,e,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,k,n,e,r):n.callback.apply(e,r)}cancelTask(k,n){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,k,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");e=n.cancelFn(n)}return e}hasTask(k,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,k,n)}catch(e){this.handleError(k,e)}}_updateTaskCount(k,n){const e=this._taskCounts,r=e[k],i=e[k]=r+n;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:k})}}class b{constructor(k,n,e,r,i,h){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=k,this.source=n,this.data=r,this.scheduleFn=i,this.cancelFn=h,!e)throw new Error("callback is not defined");this.callback=e;const s=this;this.invoke=k===H&&r&&r.useG?b.invokeTask:function(){return b.invokeTask.call(t,s,this,arguments)}}static invokeTask(k,n,e){k||(k=this),fe++;try{return k.runCount++,k.zone.runTask(k,n,e)}finally{1==fe&&Z(),fe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(B,K)}_transitionTo(k,n,e){if(this._state!==n&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${k}', expecting state '${n}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=k,k==B&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const N=m("setTimeout"),S=m("Promise"),P=m("then");let L,z=[],x=!1;function T(I){if(0===fe&&0===z.length)if(L||t[S]&&(L=t[S].resolve(0)),L){let k=L[P];k||(k=L.then),k.call(L,Z)}else t[N](Z,0);I&&z.push(I)}function Z(){if(!x){for(x=!0;z.length;){const I=z;z=[];for(let k=0;k<I.length;k++){const n=I[k];try{n.zone.runTask(n,null,null)}catch(e){_e.onUnhandledError(e)}}}_e.microtaskDrainDone(),x=!1}}const W={name:"NO ZONE"},B="notScheduled",K="scheduling",R="scheduled",Q="running",F="canceling",$="unknown",O="microTask",j="macroTask",H="eventTask",oe={},_e={symbol:m,currentZoneFrame:()=>V,onUnhandledError:X,microtaskDrainDone:X,scheduleMicroTask:T,showUncaughtError:()=>!v[m("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:X,patchMethod:()=>X,bindArguments:()=>[],patchThen:()=>X,patchMacroTask:()=>X,patchEventPrototype:()=>X,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>X,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>X,wrapWithCurrentZone:()=>X,filterProperties:()=>[],attachOriginToPatched:()=>X,_redefineProperty:()=>X,patchCallbacks:()=>X};let V={parent:null,zone:new v(null,null)},ue=null,fe=0;function X(){}c("Zone","Zone"),t.Zone=v}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const ne=Object.getOwnPropertyDescriptor,he=Object.defineProperty,ye=Object.getPrototypeOf,_t=Object.create,Ve=Array.prototype.slice,Ie="addEventListener",Ze="removeEventListener",Ue=Zone.__symbol__(Ie),et=Zone.__symbol__(Ze),de="true",ve="false",Ae=Zone.__symbol__("");function Be(t,a){return Zone.current.wrap(t,a)}function lt(t,a,u,c,f){return Zone.current.scheduleMacroTask(t,a,u,c,f)}const U=Zone.__symbol__,je="undefined"!=typeof window,ke=je?window:void 0,J=je&&ke||"object"==typeof self&&self||global,yt=[null];function tt(t,a){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=Be(t[u],a+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,re=!("nw"in J)&&void 0!==J.process&&"[object process]"==={}.toString.call(J.process),ht=!re&&!A&&!(!je||!ke.HTMLElement),Ge=void 0!==J.process&&"[object process]"==={}.toString.call(J.process)&&!A&&!(!je||!ke.HTMLElement),xe={},ze=function(t){if(!(t=t||J.event))return;let a=xe[t.type];a||(a=xe[t.type]=U("ON_PROPERTY"+t.type));const u=this||t.target||J,c=u[a];let f;if(ht&&u===ke&&"error"===t.type){const m=t;f=c&&c.call(this,m.message,m.filename,m.lineno,m.colno,m.error),!0===f&&t.preventDefault()}else f=c&&c.apply(this,arguments),null!=f&&!f&&t.preventDefault();return f};function nt(t,a,u){let c=ne(t,a);if(!c&&u&&ne(u,a)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const f=U("on"+a+"patched");if(t.hasOwnProperty(f)&&t[f])return;delete c.writable,delete c.value;const m=c.get,E=c.set,v=a.substr(2);let C=xe[v];C||(C=xe[v]=U("ON_PROPERTY"+v)),c.set=function(w){let b=this;!b&&t===J&&(b=J),b&&(b[C]&&b.removeEventListener(v,ze),E&&E.apply(b,yt),"function"==typeof w?(b[C]=w,b.addEventListener(v,ze,!1)):b[C]=null)},c.get=function(){let w=this;if(!w&&t===J&&(w=J),!w)return null;const b=w[C];if(b)return b;if(m){let N=m&&m.call(this);if(N)return c.set.call(this,N),"function"==typeof w.removeAttribute&&w.removeAttribute(a),N}return null},he(t,a,c),t[f]=!0}function We(t,a,u){if(a)for(let c=0;c<a.length;c++)nt(t,"on"+a[c],u);else{const c=[];for(const f in t)"on"==f.substr(0,2)&&c.push(f);for(let f=0;f<c.length;f++)nt(t,c[f],u)}}const ie=U("originalInstance");function we(t){const a=J[t];if(!a)return;J[U(t)]=a,J[t]=function(){const f=tt(arguments,t);switch(f.length){case 0:this[ie]=new a;break;case 1:this[ie]=new a(f[0]);break;case 2:this[ie]=new a(f[0],f[1]);break;case 3:this[ie]=new a(f[0],f[1],f[2]);break;case 4:this[ie]=new a(f[0],f[1],f[2],f[3]);break;default:throw new Error("Arg list too long.")}},se(J[t],a);const u=new a(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(f){"function"==typeof u[f]?J[t].prototype[f]=function(){return this[ie][f].apply(this[ie],arguments)}:he(J[t].prototype,f,{set:function(m){"function"==typeof m?(this[ie][f]=Be(m,t+"."+f),se(this[ie][f],m)):this[ie][f]=m},get:function(){return this[ie][f]}})}(c);for(c in a)"prototype"!==c&&a.hasOwnProperty(c)&&(J[t][c]=a[c])}function ae(t,a,u){let c=t;for(;c&&!c.hasOwnProperty(a);)c=ye(c);!c&&t[a]&&(c=t);const f=U(a);let m=null;if(c&&(!(m=c[f])||!c.hasOwnProperty(f))&&(m=c[f]=c[a],ft(c&&ne(c,a)))){const v=u(m,f,a);c[a]=function(){return v(this,arguments)},se(c[a],m)}return m}function Ce(t,a,u){let c=null;function f(m){const E=m.data;return E.args[E.cbIdx]=function(){m.invoke.apply(this,arguments)},c.apply(E.target,E.args),m}c=ae(t,a,m=>function(E,v){const C=u(E,v);return C.cbIdx>=0&&"function"==typeof v[C.cbIdx]?lt(C.name,v[C.cbIdx],C,f):m.apply(E,v)})}function se(t,a){t[U("OriginalDelegate")]=a}let dt=!1,me=!1;function Le(){if(dt)return me;dt=!0;try{const t=ke.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(me=!0)}catch(t){}return me}Zone.__load_patch("ZoneAwarePromise",(t,a,u)=>{const c=Object.getOwnPropertyDescriptor,f=Object.defineProperty,E=u.symbol,v=[],C=!0===t[E("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],w=E("Promise"),b=E("then");u.onUnhandledError=s=>{if(u.showUncaughtError()){const o=s&&s.rejection;o?console.error("Unhandled Promise rejection:",o instanceof Error?o.message:o,"; Zone:",s.zone.name,"; Task:",s.task&&s.task.source,"; Value:",o,o instanceof Error?o.stack:void 0):console.error(s)}},u.microtaskDrainDone=()=>{for(;v.length;){const s=v.shift();try{s.zone.runGuarded(()=>{throw s.throwOriginal?s.rejection:s})}catch(o){P(o)}}};const S=E("unhandledPromiseRejectionHandler");function P(s){u.onUnhandledError(s);try{const o=a[S];"function"==typeof o&&o.call(this,s)}catch(o){}}function z(s){return s&&s.then}function x(s){return s}function L(s){return n.reject(s)}const T=E("state"),Z=E("value"),W=E("finally"),B=E("parentPromiseValue"),K=E("parentPromiseState"),Q=null,F=!0,$=!1;function j(s,o){return l=>{try{V(s,o,l)}catch(d){V(s,!1,d)}}}const _e=E("currentTaskTrace");function V(s,o,l){const d=function(){let s=!1;return function(l){return function(){s||(s=!0,l.apply(null,arguments))}}}();if(s===l)throw new TypeError("Promise resolved with itself");if(s[T]===Q){let p=null;try{("object"==typeof l||"function"==typeof l)&&(p=l&&l.then)}catch(y){return d(()=>{V(s,!1,y)})(),s}if(o!==$&&l instanceof n&&l.hasOwnProperty(T)&&l.hasOwnProperty(Z)&&l[T]!==Q)fe(l),V(s,l[T],l[Z]);else if(o!==$&&"function"==typeof p)try{p.call(l,d(j(s,o)),d(j(s,!1)))}catch(y){d(()=>{V(s,!1,y)})()}else{s[T]=o;const y=s[Z];if(s[Z]=l,s[W]===W&&o===F&&(s[T]=s[K],s[Z]=s[B]),o===$&&l instanceof Error){const _=a.currentTask&&a.currentTask.data&&a.currentTask.data.__creationTrace__;_&&f(l,_e,{configurable:!0,enumerable:!1,writable:!0,value:_})}for(let _=0;_<y.length;)X(s,y[_++],y[_++],y[_++],y[_++]);if(0==y.length&&o==$){s[T]=0;let _=l;try{throw new Error("Uncaught (in promise): "+function(s){return s&&s.toString===Object.prototype.toString?(s.constructor&&s.constructor.name||"")+": "+JSON.stringify(s):s?s.toString():Object.prototype.toString.call(s)}(l)+(l&&l.stack?"\n"+l.stack:""))}catch(g){_=g}C&&(_.throwOriginal=!0),_.rejection=l,_.promise=s,_.zone=a.current,_.task=a.currentTask,v.push(_),u.scheduleMicroTask()}}}return s}const ue=E("rejectionHandledHandler");function fe(s){if(0===s[T]){try{const o=a[ue];o&&"function"==typeof o&&o.call(this,{rejection:s[Z],promise:s})}catch(o){}s[T]=$;for(let o=0;o<v.length;o++)s===v[o].promise&&v.splice(o,1)}}function X(s,o,l,d,p){fe(s);const y=s[T],_=y?"function"==typeof d?d:x:"function"==typeof p?p:L;o.scheduleMicroTask("Promise.then",()=>{try{const g=s[Z],M=!!l&&W===l[W];M&&(l[B]=g,l[K]=y);const D=o.run(_,void 0,M&&_!==L&&_!==x?[]:[g]);V(l,!0,D)}catch(g){V(l,!1,g)}},l)}const k=function(){};class n{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(o){return V(new this(null),F,o)}static reject(o){return V(new this(null),$,o)}static race(o){let l,d,p=new this((g,M)=>{l=g,d=M});function y(g){l(g)}function _(g){d(g)}for(let g of o)z(g)||(g=this.resolve(g)),g.then(y,_);return p}static all(o){return n.allWithCallback(o)}static allSettled(o){return(this&&this.prototype instanceof n?this:n).allWithCallback(o,{thenCallback:d=>({status:"fulfilled",value:d}),errorCallback:d=>({status:"rejected",reason:d})})}static allWithCallback(o,l){let d,p,y=new this((D,q)=>{d=D,p=q}),_=2,g=0;const M=[];for(let D of o){z(D)||(D=this.resolve(D));const q=g;try{D.then(ee=>{M[q]=l?l.thenCallback(ee):ee,_--,0===_&&d(M)},ee=>{l?(M[q]=l.errorCallback(ee),_--,0===_&&d(M)):p(ee)})}catch(ee){p(ee)}_++,g++}return _-=2,0===_&&d(M),y}constructor(o){const l=this;if(!(l instanceof n))throw new Error("Must be an instanceof Promise.");l[T]=Q,l[Z]=[];try{o&&o(j(l,F),j(l,$))}catch(d){V(l,!1,d)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return n}then(o,l){let d=this.constructor[Symbol.species];(!d||"function"!=typeof d)&&(d=this.constructor||n);const p=new d(k),y=a.current;return this[T]==Q?this[Z].push(y,p,o,l):X(this,y,p,o,l),p}catch(o){return this.then(null,o)}finally(o){let l=this.constructor[Symbol.species];(!l||"function"!=typeof l)&&(l=n);const d=new l(k);d[W]=W;const p=a.current;return this[T]==Q?this[Z].push(p,d,o,o):X(this,p,d,o,o),d}}n.resolve=n.resolve,n.reject=n.reject,n.race=n.race,n.all=n.all;const e=t[w]=t.Promise;t.Promise=n;const r=E("thenPatched");function i(s){const o=s.prototype,l=c(o,"then");if(l&&(!1===l.writable||!l.configurable))return;const d=o.then;o[b]=d,s.prototype.then=function(p,y){return new n((g,M)=>{d.call(this,g,M)}).then(p,y)},s[r]=!0}return u.patchThen=i,e&&(i(e),ae(t,"fetch",s=>function(s){return function(o,l){let d=s.apply(o,l);if(d instanceof n)return d;let p=d.constructor;return p[r]||i(p),d}}(s))),Promise[a.__symbol__("uncaughtPromiseErrors")]=v,n}),Zone.__load_patch("toString",t=>{const a=Function.prototype.toString,u=U("OriginalDelegate"),c=U("Promise"),f=U("Error"),m=function(){if("function"==typeof this){const w=this[u];if(w)return"function"==typeof w?a.call(w):Object.prototype.toString.call(w);if(this===Promise){const b=t[c];if(b)return a.call(b)}if(this===Error){const b=t[f];if(b)return a.call(b)}}return a.call(this)};m[u]=a,Function.prototype.toString=m;const E=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":E.call(this)}});let ce=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){ce=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){ce=!1}const pe={useG:!0},te={},Ee={},vt=new RegExp("^"+Ae+"(\\w+)(true|false)$"),rt=U("propagationStopped");function mt(t,a){const u=(a?a(t):t)+ve,c=(a?a(t):t)+de,f=Ae+u,m=Ae+c;te[t]={},te[t][ve]=f,te[t][de]=m}function qe(t,a,u){const c=u&&u.add||Ie,f=u&&u.rm||Ze,m=u&&u.listeners||"eventListeners",E=u&&u.rmAll||"removeAllListeners",v=U(c),C="."+c+":",N=function(L,T,Z){if(L.isRemoved)return;const W=L.callback;"object"==typeof W&&W.handleEvent&&(L.callback=K=>W.handleEvent(K),L.originalDelegate=W),L.invoke(L,T,[Z]);const B=L.options;B&&"object"==typeof B&&B.once&&T[f].call(T,Z.type,L.originalDelegate?L.originalDelegate:L.callback,B)},S=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][ve]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}},P=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][de]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}};function z(L,T){if(!L)return!1;let Z=!0;T&&void 0!==T.useG&&(Z=T.useG);const W=T&&T.vh;let B=!0;T&&void 0!==T.chkDup&&(B=T.chkDup);let K=!1;T&&void 0!==T.rt&&(K=T.rt);let R=L;for(;R&&!R.hasOwnProperty(c);)R=ye(R);if(!R&&L[c]&&(R=L),!R||R[v])return!1;const Q=T&&T.eventNameToString,F={},$=R[v]=R[c],O=R[U(f)]=R[f],j=R[U(m)]=R[m],H=R[U(E)]=R[E];let oe;function _e(o,l){return!ce&&"object"==typeof o&&o?!!o.capture:ce&&l?"boolean"==typeof o?{capture:o,passive:!0}:o?"object"==typeof o&&!1!==o.passive?Object.assign(Object.assign({},o),{passive:!0}):o:{passive:!0}:o}T&&T.prepend&&(oe=R[U(T.prepend)]=R[T.prepend]);const k=Z?function(o){if(!F.isExisting)return $.call(F.target,F.eventName,F.capture?P:S,F.options)}:function(o){return $.call(F.target,F.eventName,o.invoke,F.options)},n=Z?function(o){if(!o.isRemoved){const l=te[o.eventName];let d;l&&(d=l[o.capture?de:ve]);const p=d&&o.target[d];if(p)for(let y=0;y<p.length;y++)if(p[y]===o){p.splice(y,1),o.isRemoved=!0,0===p.length&&(o.allRemoved=!0,o.target[d]=null);break}}if(o.allRemoved)return O.call(o.target,o.eventName,o.capture?P:S,o.options)}:function(o){return O.call(o.target,o.eventName,o.invoke,o.options)},r=T&&T.diff?T.diff:function(o,l){const d=typeof l;return"function"===d&&o.callback===l||"object"===d&&o.originalDelegate===l},i=Zone[U("UNPATCHED_EVENTS")],h=t[U("PASSIVE_EVENTS")],s=function(o,l,d,p,y=!1,_=!1){return function(){const g=this||t;let M=arguments[0];T&&T.transferEventName&&(M=T.transferEventName(M));let D=arguments[1];if(!D)return o.apply(this,arguments);if(re&&"uncaughtException"===M)return o.apply(this,arguments);let q=!1;if("function"!=typeof D){if(!D.handleEvent)return o.apply(this,arguments);q=!0}if(W&&!W(o,D,g,arguments))return;const ee=ce&&!!h&&-1!==h.indexOf(M),ge=_e(arguments[2],ee);if(i)for(let Qe=0;Qe<i.length;Qe++)if(M===i[Qe])return ee?o.call(g,M,D,ge):o.apply(this,arguments);const Ot=!!ge&&("boolean"==typeof ge||ge.capture),Nt=!(!ge||"object"!=typeof ge)&&ge.once,Zt=Zone.current;let Ht=te[M];Ht||(mt(M,Q),Ht=te[M]);const Dt=Ht[Ot?de:ve];let Lt,ct=g[Dt],Rt=!1;if(ct){if(Rt=!0,B)for(let Qe=0;Qe<ct.length;Qe++)if(r(ct[Qe],D))return}else ct=g[Dt]=[];const St=g.constructor.name,It=Ee[St];It&&(Lt=It[M]),Lt||(Lt=St+l+(Q?Q(M):M)),F.options=ge,Nt&&(F.options.once=!1),F.target=g,F.capture=Ot,F.eventName=M,F.isExisting=Rt;const Tt=Z?pe:void 0;Tt&&(Tt.taskData=F);const Fe=Zt.scheduleEventTask(Lt,D,Tt,d,p);return F.target=null,Tt&&(Tt.taskData=null),Nt&&(ge.once=!0),!ce&&"boolean"==typeof Fe.options||(Fe.options=ge),Fe.target=g,Fe.capture=Ot,Fe.eventName=M,q&&(Fe.originalDelegate=D),_?ct.unshift(Fe):ct.push(Fe),y?g:void 0}};return R[c]=s($,C,k,n,K),oe&&(R.prependListener=s(oe,".prependListener:",function(o){return oe.call(F.target,F.eventName,o.invoke,F.options)},n,K,!0)),R[f]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=arguments[2],p=!!d&&("boolean"==typeof d||d.capture),y=arguments[1];if(!y)return O.apply(this,arguments);if(W&&!W(O,y,o,arguments))return;const _=te[l];let g;_&&(g=_[p?de:ve]);const M=g&&o[g];if(M)for(let D=0;D<M.length;D++){const q=M[D];if(r(q,y))return M.splice(D,1),q.isRemoved=!0,0===M.length&&(q.allRemoved=!0,o[g]=null,"string"==typeof l)&&(o[Ae+"ON_PROPERTY"+l]=null),q.zone.cancelTask(q),K?o:void 0}return O.apply(this,arguments)},R[m]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=[],p=kt(o,Q?Q(l):l);for(let y=0;y<p.length;y++){const _=p[y];d.push(_.originalDelegate?_.originalDelegate:_.callback)}return d},R[E]=function(){const o=this||t;let l=arguments[0];if(l){T&&T.transferEventName&&(l=T.transferEventName(l));const d=te[l];if(d){const _=o[d[ve]],g=o[d[de]];if(_){const M=_.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}if(g){const M=g.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}}}else{const d=Object.keys(o);for(let p=0;p<d.length;p++){const _=vt.exec(d[p]);let g=_&&_[1];g&&"removeListener"!==g&&this[E].call(this,g)}this[E].call(this,"removeListener")}if(K)return this},se(R[c],$),se(R[f],O),H&&se(R[E],H),j&&se(R[m],j),!0}let x=[];for(let L=0;L<a.length;L++)x[L]=z(a[L],u);return x}function kt(t,a){if(!a){const m=[];for(let E in t){const v=vt.exec(E);let C=v&&v[1];if(C&&(!a||C===a)){const w=t[E];if(w)for(let b=0;b<w.length;b++)m.push(w[b])}}return m}let u=te[a];u||(mt(a),u=te[a]);const c=t[u[ve]],f=t[u[de]];return c?f?c.concat(f):c.slice():f?f.slice():[]}function ot(t,a){const u=t.Event;u&&u.prototype&&a.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(f,m){f[rt]=!0,c&&c.apply(f,m)})}function pt(t,a,u,c,f){const m=Zone.__symbol__(c);if(a[m])return;const E=a[m]=a[c];a[c]=function(v,C,w){return C&&C.prototype&&f.forEach(function(b){const N=`${u}.${c}::`+b,S=C.prototype;if(S.hasOwnProperty(b)){const P=t.ObjectGetOwnPropertyDescriptor(S,b);P&&P.value?(P.value=t.wrapWithCurrentZone(P.value,N),t._redefineProperty(C.prototype,b,P)):S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}else S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}),E.call(a,v,C,w)},t.attachOriginToPatched(a[c],E)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],st=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],le=["load"],De=["blur","error","focus","load","resize","scroll","messageerror"],Te=["bounce","finish","start"],it=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Pe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],at=["close","error","open","message"],Re=["error","message"],Oe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function Ke(t,a,u){if(!u||0===u.length)return a;const c=u.filter(m=>m.target===t);if(!c||0===c.length)return a;const f=c[0].ignoreProperties;return a.filter(m=>-1===f.indexOf(m))}function Y(t,a,u,c){t&&We(t,Ke(t,a,u),c)}Zone.__load_patch("util",(t,a,u)=>{u.patchOnProperties=We,u.patchMethod=ae,u.bindArguments=tt,u.patchMacroTask=Ce;const c=a.__symbol__("BLACK_LISTED_EVENTS"),f=a.__symbol__("UNPATCHED_EVENTS");t[f]&&(t[c]=t[f]),t[c]&&(a[c]=a[f]=t[c]),u.patchEventPrototype=ot,u.patchEventTarget=qe,u.isIEOrEdge=Le,u.ObjectDefineProperty=he,u.ObjectGetOwnPropertyDescriptor=ne,u.ObjectCreate=_t,u.ArraySlice=Ve,u.patchClass=we,u.wrapWithCurrentZone=Be,u.filterProperties=Ke,u.attachOriginToPatched=se,u._redefineProperty=Object.defineProperty,u.patchCallbacks=pt,u.getGlobalObjects=()=>({globalSources:Ee,zoneSymbolEventNames:te,eventNames:Oe,isBrowser:ht,isMix:Ge,isNode:re,TRUE_STR:de,FALSE_STR:ve,ZONE_SYMBOL_PREFIX:Ae,ADD_EVENT_LISTENER_STR:Ie,REMOVE_EVENT_LISTENER_STR:Ze})});const $e=U("zoneTask");function Se(t,a,u,c){let f=null,m=null;u+=c;const E={};function v(w){const b=w.data;return b.args[0]=function(){return w.invoke.apply(this,arguments)},b.handleId=f.apply(t,b.args),w}function C(w){return m.call(t,w.data.handleId)}f=ae(t,a+=c,w=>function(b,N){if("function"==typeof N[0]){const S={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?N[1]||0:void 0,args:N},P=N[0];N[0]=function(){try{return P.apply(this,arguments)}finally{S.isPeriodic||("number"==typeof S.handleId?delete E[S.handleId]:S.handleId&&(S.handleId[$e]=null))}};const z=lt(a,N[0],S,v,C);if(!z)return z;const x=z.data.handleId;return"number"==typeof x?E[x]=z:x&&(x[$e]=z),x&&x.ref&&x.unref&&"function"==typeof x.ref&&"function"==typeof x.unref&&(z.ref=x.ref.bind(x),z.unref=x.unref.bind(x)),"number"==typeof x||x?x:z}return w.apply(t,N)}),m=ae(t,u,w=>function(b,N){const S=N[0];let P;"number"==typeof S?P=E[S]:(P=S&&S[$e],P||(P=S)),P&&"string"==typeof P.type?"notScheduled"!==P.state&&(P.cancelFn&&P.data.isPeriodic||0===P.runCount)&&("number"==typeof S?delete E[S]:S&&(S[$e]=null),P.zone.cancelTask(P)):w.apply(t,N)})}Zone.__load_patch("legacy",t=>{const a=t[Zone.__symbol__("legacyPatch")];a&&a()}),Zone.__load_patch("queueMicrotask",(t,a,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(f,m){a.current.scheduleMicroTask("queueMicrotask",m[0])})}),Zone.__load_patch("timers",t=>{const a="set",u="clear";Se(t,a,u,"Timeout"),Se(t,a,u,"Interval"),Se(t,a,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{Se(t,"request","cancel","AnimationFrame"),Se(t,"mozRequest","mozCancel","AnimationFrame"),Se(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,a)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ae(t,u[c],(m,E,v)=>function(C,w){return a.current.run(m,t,w,v)})}),Zone.__load_patch("EventTarget",(t,a,u)=>{(function(t,a){a.patchEventPrototype(t,a)})(t,u),function(t,a){if(Zone[a.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:f,FALSE_STR:m,ZONE_SYMBOL_PREFIX:E}=a.getGlobalObjects();for(let C=0;C<u.length;C++){const w=u[C],S=E+(w+m),P=E+(w+f);c[w]={},c[w][m]=S,c[w][f]=P}const v=t.EventTarget;v&&v.prototype&&a.patchEventTarget(t,[v&&v.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,a,u)=>{we("MutationObserver"),we("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,a,u)=>{we("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,a,u)=>{we("FileReader")}),Zone.__load_patch("on_property",(t,a,u)=>{!function(t,a){if(re&&!Ge||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=a.__Zone_ignore_on_properties;if(ht){const E=window,v=function(){try{const t=ke.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:E,ignoreProperties:["error"]}]:[];Y(E,Oe.concat(["messageerror"]),c&&c.concat(v),ye(E)),Y(Document.prototype,Oe,c),void 0!==E.SVGElement&&Y(E.SVGElement.prototype,Oe,c),Y(Element.prototype,Oe,c),Y(HTMLElement.prototype,Oe,c),Y(HTMLMediaElement.prototype,st,c),Y(HTMLFrameSetElement.prototype,Et.concat(De),c),Y(HTMLBodyElement.prototype,Et.concat(De),c),Y(HTMLFrameElement.prototype,le,c),Y(HTMLIFrameElement.prototype,le,c);const C=E.HTMLMarqueeElement;C&&Y(C.prototype,Te,c);const w=E.Worker;w&&Y(w.prototype,Re,c)}const f=a.XMLHttpRequest;f&&Y(f.prototype,it,c);const m=a.XMLHttpRequestEventTarget;m&&Y(m&&m.prototype,it,c),"undefined"!=typeof IDBIndex&&(Y(IDBIndex.prototype,Pe,c),Y(IDBRequest.prototype,Pe,c),Y(IDBOpenDBRequest.prototype,Pe,c),Y(IDBDatabase.prototype,Pe,c),Y(IDBTransaction.prototype,Pe,c),Y(IDBCursor.prototype,Pe,c)),u&&Y(WebSocket.prototype,at,c)}(u,t)}),Zone.__load_patch("customElements",(t,a,u)=>{!function(t,a){const{isBrowser:u,isMix:c}=a.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&a.patchCallbacks(a,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,a)=>{!function(w){const b=w.XMLHttpRequest;if(!b)return;const N=b.prototype;let P=N[Ue],z=N[et];if(!P){const O=w.XMLHttpRequestEventTarget;if(O){const j=O.prototype;P=j[Ue],z=j[et]}}const x="readystatechange",L="scheduled";function T(O){const j=O.data,H=j.target;H[m]=!1,H[v]=!1;const oe=H[f];P||(P=H[Ue],z=H[et]),oe&&z.call(H,x,oe);const _e=H[f]=()=>{if(H.readyState===H.DONE)if(!j.aborted&&H[m]&&O.state===L){const ue=H[a.__symbol__("loadfalse")];if(0!==H.status&&ue&&ue.length>0){const fe=O.invoke;O.invoke=function(){const X=H[a.__symbol__("loadfalse")];for(let I=0;I<X.length;I++)X[I]===O&&X.splice(I,1);!j.aborted&&O.state===L&&fe.call(O)},ue.push(O)}else O.invoke()}else!j.aborted&&!1===H[m]&&(H[v]=!0)};return P.call(H,x,_e),H[u]||(H[u]=O),F.apply(H,j.args),H[m]=!0,O}function Z(){}function W(O){const j=O.data;return j.aborted=!0,$.apply(j.target,j.args)}const B=ae(N,"open",()=>function(O,j){return O[c]=0==j[2],O[E]=j[1],B.apply(O,j)}),R=U("fetchTaskAborting"),Q=U("fetchTaskScheduling"),F=ae(N,"send",()=>function(O,j){if(!0===a.current[Q]||O[c])return F.apply(O,j);{const H={target:O,url:O[E],isPeriodic:!1,args:j,aborted:!1},oe=lt("XMLHttpRequest.send",Z,H,T,W);O&&!0===O[v]&&!H.aborted&&oe.state===L&&oe.invoke()}}),$=ae(N,"abort",()=>function(O,j){const H=function(O){return O[u]}(O);if(H&&"string"==typeof H.type){if(null==H.cancelFn||H.data&&H.data.aborted)return;H.zone.cancelTask(H)}else if(!0===a.current[R])return $.apply(O,j)})}(t);const u=U("xhrTask"),c=U("xhrSync"),f=U("xhrListener"),m=U("xhrScheduled"),E=U("xhrURL"),v=U("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,a){const u=t.constructor.name;for(let c=0;c<a.length;c++){const f=a[c],m=t[f];if(m){if(!ft(ne(t,f)))continue;t[f]=(v=>{const C=function(){return v.apply(this,tt(arguments,u+"."+f))};return se(C,v),C})(m)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,a)=>{function u(c){return function(f){kt(t,c).forEach(E=>{const v=t.PromiseRejectionEvent;if(v){const C=new v(c,{promise:f.promise,reason:f.rejection});E.invoke(C)}})}}t.PromiseRejectionEvent&&(a[U("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),a[U("rejectionHandledHandler")]=u("rejectionhandled"))})},648:(G,ne,he)=>{"use strict";he(277),he(142),he(138)}},G=>{G(G.s=648)}]);
/*! (C) Andrea Giammarchi - @WebReflection - ISC Style License */
!function(e,t){"use strict";function n(){var e=C.splice(0,C.length);for(We=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)p(e[n],t)}function o(e){return function(t){Re(t)&&(p(t,e),le.length&&r(t.querySelectorAll(le),e))}}function l(e){var t=Be.call(e,"is"),n=e.nodeName.toUpperCase(),r=ie.call(re,t?ee+t.toUpperCase():J+n);return t&&-1<r&&!a(n,t)?-1:r}function a(e,t){return-1<le.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[X]||2,a=e[$]||3;!rt||o&&o!==t||!t[B]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[B](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=o(e);return function(e){C.push(t,e.target),We&&clearTimeout(We),We=setTimeout(n,1)}}function c(e){nt&&(nt=!1,e.currentTarget.removeEventListener(W,c)),le.length&&r((e.target||g).querySelectorAll(le),e.detail===x?x:_),Ve&&function(){for(var e,t=0,n=Ue.length;t<n;t++)e=Ue[t],ae.contains(e)||(n--,Ue.splice(t--,1),p(e,x))}()}function s(e,t){var n=this;Ge.call(n,e,t),w.call(n,{target:n})}function m(e,t,n){var r=t.apply(e,n),o=l(r);return-1<o&&F(r,oe[o]),n.pop()&&le.length&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],F(t,oe[l(t)])}(r.querySelectorAll(le)),r}function f(e,t){De(e,t),N?N.observe(e,$e):(tt&&(e.setAttribute=s,e[R]=O(e),e[U](Y,w)),e[U](Q,i)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function d(e){throw new Error("A "+e+" type is already registered")}function p(e,t){var n,r,o=l(e);-1<o&&!xe.call(e,"TEMPLATE")&&(I(e,oe[o]),o=0,t!==_||e[_]?t!==x||e[x]||(e[_]=!1,e[x]=!0,r="disconnected",o=1):(e[x]=!1,e[_]=!0,r="connected",o=1,Ve&&ie.call(Ue,e)<0&&Ue.push(e)),o&&(n=e[t+k]||e[r+k])&&n.call(e))}function h(){}function T(e,t,n){var r=n&&n[q]||"",o=t.prototype,l=Ne(o),a=t.observedAttributes||fe,i={prototype:l};Pe(l,z,{value:function(){if(ye)ye=!1;else if(!this[Me]){this[Me]=!0,new t(this),o[z]&&o[z].call(this);var e=Ce[Ae.get(t)];(!ve||e.create.length>1)&&E(this)}}}),Pe(l,B,{value:function(e){-1<ie.call(a,e)&&o[B]&&o[B].apply(this,arguments)}}),o[j]&&Pe(l,Z,{value:o[j]}),o[G]&&Pe(l,K,{value:o[G]}),r&&(i[q]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),g[V](e.toLowerCase(),i),v(e),we[e].r()}function L(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function M(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[B],r=n?e.attributes:fe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function v(e){return(e=e.toUpperCase())in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function H(){Ee&&delete e.customElements,me(e,"customElements",{configurable:!0,value:new h}),me(e,"CustomElementRegistry",{configurable:!0,value:h});for(var t=y.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Me]||(ye=!0,t=Ce[Ae.get(e.constructor)],(e=(r=ve&&1===t.create.length)?Reflect.construct(n,fe,t.constructor):g.createElement.apply(g,t.create))[Me]=!0,ye=!1,r||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){!0,me(n,Me,{value:e[t]})}}}(t[n]));g.createElement=function(e,t){var n=M(t);return n?Xe.call(this,e,Oe(n)):Xe.call(this,e)},Ye||(et=!0,g[V](""))}var g=e.document,b=e.Object,y=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function(e,t){(t=t.toLowerCase())in i||(i[e]=(i[e]||[]).concat(t),i[t]=i[t.toUpperCase()]=e)},i=(b.create||b)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],i[o]=r,t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?i[e]||(l.test(e)?[]:""):function(e){var t,n=[];for(t in i)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return l.test(e)?a(e,t):a(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var C,w,A,O,N,D,I,F,S,V="registerElement",P=1e5*e.Math.random()>>0,R="__"+V+P,U="addEventListener",_="attached",k="Callback",x="detached",q="extends",B="attributeChanged"+k,Z=_+k,j="connected"+k,G="disconnected"+k,z="created"+k,K=x+k,X="ADDITION",$="REMOVAL",Q="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",J="<",ee="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],oe=[],le="",ae=g.documentElement,ie=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ue=b.prototype,ce=ue.hasOwnProperty,se=ue.isPrototypeOf,me=b.defineProperty,fe=[],de=b.getOwnPropertyDescriptor,pe=b.getOwnPropertyNames,he=b.getPrototypeOf,Te=b.setPrototypeOf,Le=!!b.__proto__,Me="__dreCEv1",Ee=e.customElements,ve=!/^force/.test(t.type)&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),He=b.create||b,ge=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ie.call(t,e)]},set:function(r,o){(e=ie.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},ye=!1,Ce=He(null),we=He(null),Ae=new ge,Oe=function(e){return e.toLowerCase()},Ne=b.create||function e(t){return t?(e.prototype=t,new e):this},De=Te||(Le?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,r=pe(t),o=0,l=r.length;o<l;o++)n=r[o],ce.call(e,n)||me(e,n,de(t,n))}return function(t,n){do{e(t,n)}while((n=he(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ie=e.MutationObserver||e.WebKitMutationObserver,Fe=e.HTMLAnchorElement,Se=(e.HTMLElement||e.Element||e.Node).prototype,Ve=!se.call(Se,ae),Pe=Ve?function(e,t,n){return e[t]=n.value,e}:me,Re=Ve?function(e){return 1===e.nodeType}:function(e){return se.call(Se,e)},Ue=Ve&&[],_e=Se.attachShadow,ke=Se.cloneNode,xe=Se.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},qe=Se.dispatchEvent,Be=Se.getAttribute,Ze=Se.hasAttribute,je=Se.removeAttribute,Ge=Se.setAttribute,ze=g.createElement,Ke=g.importNode,Xe=ze,$e=Ie&&{attributes:!0,characterData:!0,attributeOldValue:!0},Qe=Ie||function(e){tt=!1,ae.removeEventListener(Q,Qe)},We=0,Ye=V in g&&!/^force-all/.test(t.type),Je=!0,et=!1,tt=!0,nt=!0,rt=!0;if(Ie&&((S=g.createElement("div")).innerHTML="<div><div></div></div>",new Ie(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(S=de(Se,"innerHTML"))&&S.set;n&&me(Se,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),S=null}).observe(S,{childList:!0,subtree:!0}),S.innerHTML=""),Ye||(Te||Le?(I=function(e,t){se.call(t,e)||f(e,t)},F=f):F=I=function(e,t){e[R]||(e[R]=b(!0),f(e,t))},Ve?(tt=!1,function(){var e=de(Se,U),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=Be.call(this,e),t.newValue=null,t[$]=t.attrChange=2,je.call(this,e),qe.call(this,t)},r=function(e,t){var n=Ze.call(this,e),r=n&&Be.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[X]=o.attrChange=0,qe.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[R],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],(t=new CustomEvent(Q,{bubbles:!0})).attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[X]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,qe.call(n,t))};e.value=function(e,l,a){e===Q&&this[B]&&this.setAttribute!==r&&(this[R]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},me(Se,U,e)}()):Ie||(ae[U](Q,Qe),ae.setAttribute(R,1),ae.removeAttribute(R),tt&&(w=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[R],o[R]=n=O(o),n){if(!(r in t))return A(0,o,r,t[r],n[r],X);if(n[r]!==t[r])return A(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return A(2,o,r,t[r],n[r],$)}},A=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,i(a)},O=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),g[V]=function(e,t){if(n=e.toUpperCase(),Je&&(Je=!1,Ie?(N=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ie(function(r){for(var o,l,a,i=0,u=r.length;i<u;i++)"childList"===(o=r[i]).type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,rt&&l[B]&&"style"!==o.attributeName&&(a=Be.call(l,o.attributeName))!==o.oldValue&&l[B](o.attributeName,o.oldValue,a))})}(o(_),o(x)),(D=function(e){return N.observe(e,{childList:!0,subtree:!0}),e})(g),_e&&(Se.attachShadow=function(){return D(_e.apply(this,arguments))})):(C=[],g[U]("DOMNodeInserted",u(_)),g[U]("DOMNodeRemoved",u(x))),g[U](W,c),g[U]("readystatechange",c),g.importNode=function(e,t){switch(e.nodeType){case 1:return m(g,Ke,[e,!!t]);case 11:for(var n=g.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l++)n.appendChild(g.importNode(r[l],!!t));return n;default:return ke.call(e,!!t)}},Se.cloneNode=function(e){return m(this,ke,[!!e])}),et)return et=!1;if(-2<ie.call(re,ee+n)+ie.call(re,J+n)&&d(e),!te.test(n)||-1<ie.call(ne,n))throw new Error("The type "+e+" is invalid");var n,l,a=function(){return s?g.createElement(f,n):g.createElement(f)},i=t||ue,s=ce.call(i,q),f=s?t[q].toUpperCase():n;return s&&-1<ie.call(re,J+f)&&d(f),l=re.push((s?ee:J)+n)-1,le=le.concat(le.length?",":"",s?f+'[is="'+e.toLowerCase()+'"]':f),a.prototype=oe[l]=ce.call(i,"prototype")?i.prototype:Ne(Se),le.length&&r(g.querySelectorAll(le),_),a},g.createElement=Xe=function(e,t){var n=M(t),r=n?ze.call(g,e,Oe(n)):ze.call(g,e),o=""+e,l=ie.call(re,(n?ee:J)+(n||o).toUpperCase()),i=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=a(o.toUpperCase(),n))),rt=!g.createElement.innerHTMLHelper,i&&F(r,oe[l]),r}),addEventListener("beforeunload",function(){delete g.createElement,delete g.importNode,delete g[V]},!1),h.prototype={constructor:h,define:ve?function(e,t,n){if(n)T(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Ee.define(e,t)}}:T,get:ve?function(e){return Ee.get(e)||L(e)}:L,whenDefined:ve?function(e){return be.race([Ee.whenDefined(e),v(e)])}:v},!Ee||/^force/.test(t.type))H();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[q]="a",(t.prototype=Ne(Fe.prototype)).constructor=t,e.customElements.define(r,t,n),!o.test(g.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Fe,[],e)},{},"document-register-element-a"+P)}catch(e){H()}if(!t.noBuiltIn)try{if(ze.call(g,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Oe=function(e){return{is:e.toLowerCase()}}}}(window);
var pFe=Object.defineProperty,gFe=Object.defineProperties,mFe=Object.getOwnPropertyDescriptors,O9=Object.getOwnPropertySymbols,_Fe=Object.prototype.hasOwnProperty,yFe=Object.prototype.propertyIsEnumerable,Ui=Math.pow,I9=(pt,We,Be)=>We in pt?pFe(pt,We,{enumerable:!0,configurable:!0,writable:!0,value:Be}):pt[We]=Be,K=(pt,We)=>{for(var Be in We||(We={}))_Fe.call(We,Be)&&I9(pt,Be,We[Be]);if(O9)for(var Be of O9(We))yFe.call(We,Be)&&I9(pt,Be,We[Be]);return pt},Lt=(pt,We)=>gFe(pt,mFe(We));(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{2:pt=>{"use strict";pt.exports=Be,pt.exports.default=Be;var We=1e20;function Be(Ke,dt,Ze,St,Rt,be){this.fontSize=Ke||24,this.buffer=void 0===dt?3:dt,this.cutoff=St||.25,this.fontFamily=Rt||"sans-serif",this.fontWeight=be||"normal",this.radius=Ze||8;var me=this.size=this.fontSize+2*this.buffer,Ie=me+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=me,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ie*Ie),this.gridInner=new Float64Array(Ie*Ie),this.f=new Float64Array(Ie),this.z=new Float64Array(Ie+1),this.v=new Uint16Array(Ie),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(me/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Tt(Ke,dt,Ze,St,Rt,be){for(var me=0;me<dt;me++)At(Ke,me,dt,Ze,St,Rt,be);for(var Ie=0;Ie<Ze;Ie++)At(Ke,Ie*dt,1,dt,St,Rt,be)}function At(Ke,dt,Ze,St,Rt,be,me){var Ie,_e,Se,Vt;for(be[0]=0,me[0]=-We,me[1]=We,Ie=0;Ie<St;Ie++)Rt[Ie]=Ke[dt+Ie*Ze];for(Ie=1,_e=0,Se=0;Ie<St;Ie++){do{Se=(Rt[Ie]-Rt[Vt=be[_e]]+Ie*Ie-Vt*Vt)/(Ie-Vt)/2}while(Se<=me[_e]&&--_e>-1);be[++_e]=Ie,me[_e]=Se,me[_e+1]=We}for(Ie=0,_e=0;Ie<St;Ie++){for(;me[_e+1]<Ie;)_e++;Ke[dt+Ie*Ze]=Rt[Vt=be[_e]]+(Ie-Vt)*(Ie-Vt)}}Be.prototype._draw=function(Ke,dt){var be,me,Ie,_e,Se,Vt,je,Mn,Et,Ze=this.ctx.measureText(Ke),St=Ze.width,Rt=2*this.buffer;dt&&this.useMetrics?(Se=Math.floor(Ze.actualBoundingBoxAscent),Mn=this.buffer+Math.ceil(Ze.actualBoundingBoxAscent),Vt=this.buffer,je=this.buffer,be=(me=Math.min(this.size,Math.ceil(Ze.actualBoundingBoxRight-Ze.actualBoundingBoxLeft)))+Rt,Ie=(_e=Math.min(this.size-Vt,Math.ceil(Ze.actualBoundingBoxAscent+Ze.actualBoundingBoxDescent)))+Rt,this.ctx.textBaseline="alphabetic"):(be=me=this.size,Ie=_e=this.size,Se=19*this.fontSize/24,Vt=je=0,Mn=this.middle,this.ctx.textBaseline="middle"),me&&_e&&(this.ctx.clearRect(je,Vt,me,_e),this.ctx.fillText(Ke,this.buffer,Mn),Et=this.ctx.getImageData(je,Vt,me,_e));var Qt=new Uint8ClampedArray(be*Ie);return function(Ke,dt,Ze,St,Rt,be,me){be.fill(We,0,dt*Ze),me.fill(0,0,dt*Ze);for(var Ie=(dt-St)/2,_e=0;_e<Rt;_e++)for(var Se=0;Se<St;Se++){var Vt=(_e+Ie)*dt+Se+Ie,je=Ke.data[4*(_e*St+Se)+3]/255;if(1===je)be[Vt]=0,me[Vt]=We;else if(0===je)be[Vt]=We,me[Vt]=0;else{var Mn=Math.max(0,.5-je),Et=Math.max(0,je-.5);be[Vt]=Mn*Mn,me[Vt]=Et*Et}}}(Et,be,Ie,me,_e,this.gridOuter,this.gridInner),Tt(this.gridOuter,be,Ie,this.f,this.v,this.z),Tt(this.gridInner,be,Ie,this.f,this.v,this.z),function(Ke,dt,Ze,St,Rt,be,me){for(var Ie=0;Ie<dt*Ze;Ie++){var _e=Math.sqrt(St[Ie])-Math.sqrt(Rt[Ie]);Ke[Ie]=Math.round(255-255*(_e/be+me))}}(Qt,be,Ie,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Qt,metrics:{width:me,height:_e,sdfWidth:be,sdfHeight:Ie,top:Se,left:0,advance:St}}},Be.prototype.draw=function(Ke){return this._draw(Ke,!1).data},Be.prototype.drawWithMetrics=function(Ke){return this._draw(Ke,!0)}},517:(pt,We)=>{"use strict";var yt=(()=>{return(Tt=yt||(yt={})).typeOfFunction="function",Tt.boolTrue=!0,yt;var Tt})();function L(Tt,At,Ke){if(!Ke||typeof Ke.value!==yt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+At+"> is not a method!");return{configurable:yt.boolTrue,get:function(){var dt=Ke.value.bind(this);return Object.defineProperty(this,At,{value:dt,configurable:yt.boolTrue,writable:yt.boolTrue}),dt}}}We.ak=L,We.ZP=L},266:(pt,We,Be)=>{pt.exports={ResizeSensor:Be(835),ElementQueries:Be(845)}},845:function(pt,We,Be){"use strict";var yt,L,Tt;"undefined"!=typeof window&&window,L=[Be(835)],void 0!==(Tt="function"==typeof(yt=function(At){var Ke=function(){var Ze,St={},Rt=[];function be(Ne){Ne||(Ne=document.documentElement);var le=window.getComputedStyle(Ne,null).fontSize;return parseFloat(le)||16}function Ie(Ne,le){var zt=le.split(/\d/),$t=zt[zt.length-1];switch(le=parseFloat(le),$t){case"px":return le;case"em":return le*be(Ne);case"rem":return le*be();case"vw":return le*document.documentElement.clientWidth/100;case"vh":return le*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Kt=document.documentElement.clientWidth/100,ai=document.documentElement.clientHeight/100;return le*(0,Math["vmin"===$t?"min":"max"])(Kt,ai);default:return le}}function _e(Ne,le){this.element=Ne;var zt,$t,Kt,ai,Oi,xe,cn,jn,Me=["min-width","min-height","max-width","max-height"];this.call=function(){for(zt in Kt=function(Ne){if(!Ne.getBoundingClientRect)return{width:Ne.offsetWidth,height:Ne.offsetHeight};var le=Ne.getBoundingClientRect();return{width:Math.round(le.width),height:Math.round(le.height)}}(this.element),xe={},St[le])!St[le].hasOwnProperty(zt)||(ai=Ie(this.element,($t=St[le][zt]).value),Oi="width"===$t.property?Kt.width:Kt.height,cn="","min"===$t.mode&&Oi>=ai&&(cn+=$t.value),"max"===$t.mode&&Oi<=ai&&(cn+=$t.value),xe[jn=$t.mode+"-"+$t.property]||(xe[jn]=""),cn&&-1===(" "+xe[jn]+" ").indexOf(" "+cn+" ")&&(xe[jn]+=" "+cn));for(var Ii in Me)!Me.hasOwnProperty(Ii)||(xe[Me[Ii]]?this.element.setAttribute(Me[Ii],xe[Me[Ii]].substr(1)):this.element.removeAttribute(Me[Ii]))}}function Se(Ne,le){Ne.elementQueriesSetupInformation||(Ne.elementQueriesSetupInformation=new _e(Ne,le)),Ne.elementQueriesSensor||(Ne.elementQueriesSensor=new At(Ne,function(){Ne.elementQueriesSetupInformation.call()}))}function Vt(Ne,le,zt,$t){if(void 0===St[Ne]){St[Ne]=[];var Kt=Rt.length;Ze.innerHTML+="\n"+Ne+" {animation: 0.1s element-queries;}",Ze.innerHTML+="\n"+Ne+" > .resize-sensor {min-width: "+Kt+"px;}",Rt.push(Ne)}St[Ne].push({mode:le,property:zt,value:$t})}function je(Ne){var le;if(document.querySelectorAll&&(le=Ne?Ne.querySelectorAll.bind(Ne):document.querySelectorAll.bind(document)),!le&&"undefined"!=typeof $$&&(le=$$),!le&&"undefined"!=typeof jQuery&&(le=jQuery),!le)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return le}function Et(Ne){var le=[],zt=[],$t=[],Kt=0,ai=-1,Oi=[];for(var xe in Ne.children)if(Ne.children.hasOwnProperty(xe)&&Ne.children[xe].tagName&&"img"===Ne.children[xe].tagName.toLowerCase()){le.push(Ne.children[xe]);var cn=Ne.children[xe].getAttribute("min-width")||Ne.children[xe].getAttribute("data-min-width"),jn=Ne.children[xe].getAttribute("data-src")||Ne.children[xe].getAttribute("url");$t.push(jn),zt.push({minWidth:cn}),cn?Ne.children[xe].style.display="none":(Kt=le.length-1,Ne.children[xe].style.display="block")}function Ii(){var Er,Ut=!1;for(Er in le)!le.hasOwnProperty(Er)||zt[Er].minWidth&&Ne.offsetWidth>zt[Er].minWidth&&(Ut=Er);if(Ut||(Ut=Kt),ai!==Ut)if(Oi[Ut])le[ai].style.display="none",le[Ut].style.display="block",ai=Ut;else{var rs=new Image;rs.onload=function(){le[Ut].src=$t[Ut],le[ai].style.display="none",le[Ut].style.display="block",Oi[Ut]=!0,ai=Ut},rs.src=$t[Ut]}else le[Ut].src=$t[Ut]}ai=Kt,Ne.resizeSensorInstance=new At(Ne,Ii),Ii()}var qn=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,Ci=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function yi(Ne){var le,zt,$t,Kt;for(Ne=Ne.replace(/'/g,'"');null!==(le=qn.exec(Ne));)for(zt=le[1]+le[3],$t=le[2];null!==(Kt=Ci.exec($t));)Vt(zt,Kt[1],Kt[2],Kt[3])}function vi(Ne){var le="";if(Ne)if("string"==typeof Ne)(-1!==(Ne=Ne.toLowerCase()).indexOf("min-width")||-1!==Ne.indexOf("max-width"))&&yi(Ne);else for(var zt=0,$t=Ne.length;zt<$t;zt++)1===Ne[zt].type?(-1!==(le=Ne[zt].selectorText||Ne[zt].cssText).indexOf("min-height")||-1!==le.indexOf("max-height")||-1!==le.indexOf("min-width")||-1!==le.indexOf("max-width"))&&yi(le):4===Ne[zt].type?vi(Ne[zt].cssRules||Ne[zt].rules):3===Ne[zt].type&&Ne[zt].styleSheet.hasOwnProperty("cssRules")&&vi(Ne[zt].styleSheet.cssRules)}var wr=!1;this.init=function(){var Ne="animationstart";void 0!==document.documentElement.style.webkitAnimationName?Ne="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?Ne="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(Ne="oanimationstart"),document.body.addEventListener(Ne,function($t){var Kt=$t.target,ai=Kt&&window.getComputedStyle(Kt,null),Oi=ai&&ai.getPropertyValue("animation-name");if(Oi&&-1!==Oi.indexOf("element-queries")){Kt.elementQueriesSensor=new At(Kt,function(){Kt.elementQueriesSetupInformation&&Kt.elementQueriesSetupInformation.call()});var jn=window.getComputedStyle(Kt.resizeSensor,null).getPropertyValue("min-width");jn=parseInt(jn.replace("px","")),Se($t.target,Rt[jn])}}),wr||((Ze=document.createElement("style")).type="text/css",Ze.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",Ze.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(Ze),wr=!0);for(var le=0,zt=document.styleSheets.length;le<zt;le++)try{document.styleSheets[le].href&&0===document.styleSheets[le].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[le].href),vi(document.styleSheets[le].cssRules||document.styleSheets[le].rules||document.styleSheets[le].cssText)}catch($t){}!function(){for(var le=je()("[data-responsive-image],[responsive-image]"),zt=0,$t=le.length;zt<$t;zt++)Et(le[zt])}()},this.findElementQueriesElements=function(Ne){!function(Ne){var le=je(Ne);for(var zt in St)if(St.hasOwnProperty(zt))for(var $t=le(zt,Ne),Kt=0,ai=$t.length;Kt<ai;Kt++)Se($t[Kt],zt)}(Ne)},this.update=function(){this.init()}};Ke.update=function(){Ke.instance.update()},Ke.detach=function(Ze){Ze.elementQueriesSetupInformation?(Ze.elementQueriesSensor.detach(),delete Ze.elementQueriesSetupInformation,delete Ze.elementQueriesSensor):Ze.resizeSensorInstance&&(Ze.resizeSensorInstance.detach(),delete Ze.resizeSensorInstance)},Ke.init=function(){Ke.instance||(Ke.instance=new Ke),Ke.instance.init()};return Ke.findElementQueriesElements=function(Ze){Ke.instance.findElementQueriesElements(Ze)},Ke.listen=function(){!function(Ze){if(document.addEventListener)document.addEventListener("DOMContentLoaded",Ze,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var St=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(Ze(),clearInterval(St))},10);else window.onload=Ze}(Ke.init)},Ke})?yt.apply(We,L):yt)&&(pt.exports=Tt)},835:function(pt,We,Be){"use strict";var yt,L;"undefined"!=typeof window&&window,void 0!==(L="function"==typeof(yt=function(){if("undefined"==typeof window)return null;var Tt="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),At=Tt.requestAnimationFrame||Tt.mozRequestAnimationFrame||Tt.webkitRequestAnimationFrame||function(me){return Tt.setTimeout(me,20)},Ke=Tt.cancelAnimationFrame||Tt.mozCancelAnimationFrame||Tt.webkitCancelAnimationFrame||function(me){Tt.clearTimeout(me)};function dt(me,Ie){var _e=Object.prototype.toString.call(me),Se="[object Array]"===_e||"[object NodeList]"===_e||"[object HTMLCollection]"===_e||"[object Object]"===_e||"undefined"!=typeof jQuery&&me instanceof jQuery||"undefined"!=typeof Elements&&me instanceof Elements,Vt=0,je=me.length;if(Se)for(;Vt<je;Vt++)Ie(me[Vt]);else Ie(me)}function Ze(me){if(!me.getBoundingClientRect)return{width:me.offsetWidth,height:me.offsetHeight};var Ie=me.getBoundingClientRect();return{width:Math.round(Ie.width),height:Math.round(Ie.height)}}function St(me,Ie){Object.keys(Ie).forEach(function(_e){me.style[_e]=Ie[_e]})}var Rt=function(me,Ie){var _e=0;function Se(){var Mn,Et,je=[];this.add=function(Qt){je.push(Qt)},this.call=function(Qt){for(Mn=0,Et=je.length;Mn<Et;Mn++)je[Mn].call(this,Qt)},this.remove=function(Qt){var qn=[];for(Mn=0,Et=je.length;Mn<Et;Mn++)je[Mn]!==Qt&&qn.push(je[Mn]);je=qn},this.length=function(){return je.length}}function Vt(je,Mn){if(je){if(je.resizedAttached)return void je.resizedAttached.add(Mn);je.resizedAttached=new Se,je.resizedAttached.add(Mn),je.resizeSensor=document.createElement("div"),je.resizeSensor.dir="ltr",je.resizeSensor.className="resize-sensor";var Et={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},Qt={position:"absolute",left:"0px",top:"0px",transition:"0s"};St(je.resizeSensor,Et);var qn=document.createElement("div");qn.className="resize-sensor-expand",St(qn,Et);var Ci=document.createElement("div");St(Ci,Qt),qn.appendChild(Ci);var yi=document.createElement("div");yi.className="resize-sensor-shrink",St(yi,Et);var vi=document.createElement("div");St(vi,Qt),St(vi,{width:"200%",height:"200%"}),yi.appendChild(vi),je.resizeSensor.appendChild(qn),je.resizeSensor.appendChild(yi),je.appendChild(je.resizeSensor);var wr=window.getComputedStyle(je),Ne=wr?wr.getPropertyValue("position"):null;"absolute"!==Ne&&"relative"!==Ne&&"fixed"!==Ne&&"sticky"!==Ne&&(je.style.position="relative");var le=!1,zt=0,$t=Ze(je),Kt=0,ai=0,Oi=!0;_e=0;var cn=function(){if(Oi){if(0===je.offsetWidth&&0===je.offsetHeight)return void(_e||(_e=At(function(){_e=0,cn()})));Oi=!1}var Ut,Er;Er=je.offsetHeight,Ci.style.width=(Ut=je.offsetWidth)+10+"px",Ci.style.height=Er+10+"px",qn.scrollLeft=Ut+10,qn.scrollTop=Er+10,yi.scrollLeft=Ut+10,yi.scrollTop=Er+10};je.resizeSensor.resetSensor=cn;var jn=function(){zt=0,le&&(Kt=$t.width,ai=$t.height,je.resizedAttached&&je.resizedAttached.call($t))},Me=function(){$t=Ze(je),(le=$t.width!==Kt||$t.height!==ai)&&!zt&&(zt=At(jn)),cn()},Ii=function(Ut,Er,rs){Ut.attachEvent?Ut.attachEvent("on"+Er,rs):Ut.addEventListener(Er,rs)};Ii(qn,"scroll",Me),Ii(yi,"scroll",Me),_e=At(function(){_e=0,cn()})}}dt(me,function(je){Vt(je,Ie)}),this.detach=function(je){_e||(Ke(_e),_e=0),Rt.detach(me,je)},this.reset=function(){me.resizeSensor.resetSensor()}};if(Rt.reset=function(me){dt(me,function(Ie){Ie.resizeSensor.resetSensor()})},Rt.detach=function(me,Ie){dt(me,function(_e){!_e||_e.resizedAttached&&"function"==typeof Ie&&(_e.resizedAttached.remove(Ie),_e.resizedAttached.length())||_e.resizeSensor&&(_e.contains(_e.resizeSensor)&&_e.removeChild(_e.resizeSensor),delete _e.resizeSensor,delete _e.resizedAttached)})},"undefined"!=typeof MutationObserver){var be=new MutationObserver(function(me){for(var Ie in me)if(me.hasOwnProperty(Ie))for(var _e=me[Ie].addedNodes,Se=0;Se<_e.length;Se++)_e[Se].resizeSensor&&Rt.reset(_e[Se])});document.addEventListener("DOMContentLoaded",function(me){be.observe(document.body,{childList:!0,subtree:!0})})}return Rt})?yt.call(We,Be,We,pt):yt)&&(pt.exports=L)},457:function(pt,We){var Be,L;void 0!==(L="function"==typeof(Be=function(){"use strict";function At(be,me,Ie){var _e=new XMLHttpRequest;_e.open("GET",be),_e.responseType="blob",_e.onload=function(){Rt(_e.response,me,Ie)},_e.onerror=function(){console.error("could not download file")},_e.send()}function Ke(be){var me=new XMLHttpRequest;me.open("HEAD",be,!1);try{me.send()}catch(Ie){}return 200<=me.status&&299>=me.status}function dt(be){try{be.dispatchEvent(new MouseEvent("click"))}catch(Ie){var me=document.createEvent("MouseEvents");me.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),be.dispatchEvent(me)}}var Ze="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,St=Ze.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Rt=Ze.saveAs||("object"!=typeof window||window!==Ze?function(){}:"download"in HTMLAnchorElement.prototype&&!St?function(be,me,Ie){var _e=Ze.URL||Ze.webkitURL,Se=document.createElement("a");Se.download=me=me||be.name||"download",Se.rel="noopener","string"==typeof be?(Se.href=be,Se.origin===location.origin?dt(Se):Ke(Se.href)?At(be,me,Ie):dt(Se,Se.target="_blank")):(Se.href=_e.createObjectURL(be),setTimeout(function(){_e.revokeObjectURL(Se.href)},4e4),setTimeout(function(){dt(Se)},0))}:"msSaveOrOpenBlob"in navigator?function(be,me,Ie){if(me=me||be.name||"download","string"!=typeof be)navigator.msSaveOrOpenBlob(function(be,me){return void 0===me?me={autoBom:!1}:"object"!=typeof me&&(console.warn("Deprecated: Expected third argument to be a object"),me={autoBom:!me}),me.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(be.type)?new Blob(["\ufeff",be],{type:be.type}):be}(be,Ie),me);else if(Ke(be))At(be,me,Ie);else{var _e=document.createElement("a");_e.href=be,_e.target="_blank",setTimeout(function(){dt(_e)})}}:function(be,me,Ie,_e){if((_e=_e||open("","_blank"))&&(_e.document.title=_e.document.body.innerText="downloading..."),"string"==typeof be)return At(be,me,Ie);var Se="application/octet-stream"===be.type,Vt=/constructor/i.test(Ze.HTMLElement)||Ze.safari,je=/CriOS\/[\d]+/.test(navigator.userAgent);if((je||Se&&Vt||St)&&"undefined"!=typeof FileReader){var Mn=new FileReader;Mn.onloadend=function(){var qn=Mn.result;qn=je?qn:qn.replace(/^data:[^;]*;/,"data:attachment/file;"),_e?_e.location.href=qn:location=qn,_e=null},Mn.readAsDataURL(be)}else{var Et=Ze.URL||Ze.webkitURL,Qt=Et.createObjectURL(be);_e?_e.location=Qt:location.href=Qt,_e=null,setTimeout(function(){Et.revokeObjectURL(Qt)},4e4)}});Ze.saveAs=Rt.saveAs=Rt,pt.exports=Rt})?Be.apply(We,[]):Be)&&(pt.exports=L)},524:(pt,We,Be)=>{var yt;!function(L,Tt,At,Ke){"use strict";var je,dt=["","webkit","Moz","MS","ms","o"],Ze=Tt.createElement("div"),Rt=Math.round,be=Math.abs,me=Date.now;function Ie(A,R,U){return setTimeout(qn(A,U),R)}function _e(A,R,U){return!!Array.isArray(A)&&(Se(A,U[R],U),!0)}function Se(A,R,U){var ie;if(A)if(A.forEach)A.forEach(R,U);else if(A.length!==Ke)for(ie=0;ie<A.length;)R.call(U,A[ie],ie,A),ie++;else for(ie in A)A.hasOwnProperty(ie)&&R.call(U,A[ie],ie,A)}function Vt(A,R,U){var ie="DEPRECATED METHOD: "+R+"\n"+U+" AT \n";return function(){var Pe=new Error("get-stack-trace"),Ue=Pe&&Pe.stack?Pe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_n=L.console&&(L.console.warn||L.console.log);return _n&&_n.call(L.console,ie,Ue),A.apply(this,arguments)}}je="function"!=typeof Object.assign?function(R){if(R===Ke||null===R)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(R),ie=1;ie<arguments.length;ie++){var Pe=arguments[ie];if(Pe!==Ke&&null!==Pe)for(var Ue in Pe)Pe.hasOwnProperty(Ue)&&(U[Ue]=Pe[Ue])}return U}:Object.assign;var Mn=Vt(function(R,U,ie){for(var Pe=Object.keys(U),Ue=0;Ue<Pe.length;)(!ie||ie&&R[Pe[Ue]]===Ke)&&(R[Pe[Ue]]=U[Pe[Ue]]),Ue++;return R},"extend","Use `assign`."),Et=Vt(function(R,U){return Mn(R,U,!0)},"merge","Use `assign`.");function Qt(A,R,U){var Pe,ie=R.prototype;(Pe=A.prototype=Object.create(ie)).constructor=A,Pe._super=ie,U&&je(Pe,U)}function qn(A,R){return function(){return A.apply(R,arguments)}}function Ci(A,R){return"function"==typeof A?A.apply(R&&R[0]||Ke,R):A}function yi(A,R){return A===Ke?R:A}function vi(A,R,U){Se(zt(R),function(ie){A.addEventListener(ie,U,!1)})}function wr(A,R,U){Se(zt(R),function(ie){A.removeEventListener(ie,U,!1)})}function Ne(A,R){for(;A;){if(A==R)return!0;A=A.parentNode}return!1}function le(A,R){return A.indexOf(R)>-1}function zt(A){return A.trim().split(/\s+/g)}function $t(A,R,U){if(A.indexOf&&!U)return A.indexOf(R);for(var ie=0;ie<A.length;){if(U&&A[ie][U]==R||!U&&A[ie]===R)return ie;ie++}return-1}function Kt(A){return Array.prototype.slice.call(A,0)}function ai(A,R,U){for(var ie=[],Pe=[],Ue=0;Ue<A.length;){var _n=R?A[Ue][R]:A[Ue];$t(Pe,_n)<0&&ie.push(A[Ue]),Pe[Ue]=_n,Ue++}return U&&(ie=R?ie.sort(function(gr,Hr){return gr[R]>Hr[R]}):ie.sort()),ie}function Oi(A,R){for(var U,ie,Pe=R[0].toUpperCase()+R.slice(1),Ue=0;Ue<dt.length;){if((ie=(U=dt[Ue])?U+Pe:R)in A)return ie;Ue++}return Ke}var xe=1;function jn(A){var R=A.ownerDocument||A;return R.defaultView||R.parentWindow||L}var Ii="ontouchstart"in L,Ut=Oi(L,"PointerEvent")!==Ke,Er=Ii&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),rs="touch",ss="mouse",jr=["x","y"],kr=["clientX","clientY"];function ti(A,R){var U=this;this.manager=A,this.callback=R,this.element=A.element,this.target=A.options.inputTarget,this.domHandler=function(ie){Ci(A.options.enable,[A])&&U.handler(ie)},this.init()}function so(A,R,U){var ie=U.pointers.length,Pe=U.changedPointers.length,Ue=1&R&&ie-Pe==0,_n=12&R&&ie-Pe==0;U.isFirst=!!Ue,U.isFinal=!!_n,Ue&&(A.session={}),U.eventType=R,function(A,R){var U=A.session,ie=R.pointers,Pe=ie.length;U.firstInput||(U.firstInput=Na(R)),Pe>1&&!U.firstMultiple?U.firstMultiple=Na(R):1===Pe&&(U.firstMultiple=!1);var Ue=U.firstInput,_n=U.firstMultiple,lr=_n?_n.center:Ue.center,gr=R.center=oo(ie);R.timeStamp=me(),R.deltaTime=R.timeStamp-Ue.timeStamp,R.angle=ao(lr,gr),R.distance=os(lr,gr),function(A,R){var U=R.center,ie=A.offsetDelta||{},Pe=A.prevDelta||{},Ue=A.prevInput||{};(1===R.eventType||4===Ue.eventType)&&(Pe=A.prevDelta={x:Ue.deltaX||0,y:Ue.deltaY||0},ie=A.offsetDelta={x:U.x,y:U.y}),R.deltaX=Pe.x+(U.x-ie.x),R.deltaY=Pe.y+(U.y-ie.y)}(U,R),R.offsetDirection=ki(R.deltaX,R.deltaY);var Hr=La(R.deltaTime,R.deltaX,R.deltaY);R.overallVelocityX=Hr.x,R.overallVelocityY=Hr.y,R.overallVelocity=be(Hr.x)>be(Hr.y)?Hr.x:Hr.y,R.scale=_n?function(A,R){return os(R[0],R[1],kr)/os(A[0],A[1],kr)}(_n.pointers,ie):1,R.rotation=_n?function(A,R){return ao(R[1],R[0],kr)+ao(A[1],A[0],kr)}(_n.pointers,ie):0,R.maxPointers=U.prevInput?R.pointers.length>U.prevInput.maxPointers?R.pointers.length:U.prevInput.maxPointers:R.pointers.length,function(A,R){var Pe,Ue,_n,lr,U=A.lastInterval||R,ie=R.timeStamp-U.timeStamp;if(8!=R.eventType&&(ie>25||U.velocity===Ke)){var gr=R.deltaX-U.deltaX,Hr=R.deltaY-U.deltaY,pn=La(ie,gr,Hr);Ue=pn.x,_n=pn.y,Pe=be(pn.x)>be(pn.y)?pn.x:pn.y,lr=ki(gr,Hr),A.lastInterval=R}else Pe=U.velocity,Ue=U.velocityX,_n=U.velocityY,lr=U.direction;R.velocity=Pe,R.velocityX=Ue,R.velocityY=_n,R.direction=lr}(U,R);var pn=A.element;Ne(R.srcEvent.target,pn)&&(pn=R.srcEvent.target),R.target=pn}(A,U),A.emit("hammer.input",U),A.recognize(U),A.session.prevInput=U}function Na(A){for(var R=[],U=0;U<A.pointers.length;)R[U]={clientX:Rt(A.pointers[U].clientX),clientY:Rt(A.pointers[U].clientY)},U++;return{timeStamp:me(),pointers:R,center:oo(R),deltaX:A.deltaX,deltaY:A.deltaY}}function oo(A){var R=A.length;if(1===R)return{x:Rt(A[0].clientX),y:Rt(A[0].clientY)};for(var U=0,ie=0,Pe=0;Pe<R;)U+=A[Pe].clientX,ie+=A[Pe].clientY,Pe++;return{x:Rt(U/R),y:Rt(ie/R)}}function La(A,R,U){return{x:R/A||0,y:U/A||0}}function ki(A,R){return A===R?1:be(A)>=be(R)?A<0?2:4:R<0?8:16}function os(A,R,U){U||(U=jr);var ie=R[U[0]]-A[U[0]],Pe=R[U[1]]-A[U[1]];return Math.sqrt(ie*ie+Pe*Pe)}function ao(A,R,U){return U||(U=jr),180*Math.atan2(R[U[1]]-A[U[1]],R[U[0]]-A[U[0]])/Math.PI}ti.prototype={handler:function(){},init:function(){this.evEl&&vi(this.element,this.evEl,this.domHandler),this.evTarget&&vi(this.target,this.evTarget,this.domHandler),this.evWin&&vi(jn(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&wr(this.element,this.evEl,this.domHandler),this.evTarget&&wr(this.target,this.evTarget,this.domHandler),this.evWin&&wr(jn(this.element),this.evWin,this.domHandler)}};var au={mousedown:1,mousemove:2,mouseup:4},lu="mousedown",cu="mousemove mouseup";function Cl(){this.evEl=lu,this.evWin=cu,this.pressed=!1,ti.apply(this,arguments)}Qt(Cl,ti,{handler:function(R){var U=au[R.type];1&U&&0===R.button&&(this.pressed=!0),2&U&&1!==R.which&&(U=4),this.pressed&&(4&U&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[R],changedPointers:[R],pointerType:ss,srcEvent:R}))}});var fc={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},cd={2:rs,3:"pen",4:ss,5:"kinect"},uu="pointerdown",Vs="pointermove pointerup pointercancel";function Qe(){this.evEl=uu,this.evWin=Vs,ti.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}L.MSPointerEvent&&!L.PointerEvent&&(uu="MSPointerDown",Vs="MSPointerMove MSPointerUp MSPointerCancel"),Qt(Qe,ti,{handler:function(R){var U=this.store,ie=!1,Pe=R.type.toLowerCase().replace("ms",""),Ue=fc[Pe],_n=cd[R.pointerType]||R.pointerType,lr=_n==rs,gr=$t(U,R.pointerId,"pointerId");1&Ue&&(0===R.button||lr)?gr<0&&(U.push(R),gr=U.length-1):12&Ue&&(ie=!0),!(gr<0)&&(U[gr]=R,this.callback(this.manager,Ue,{pointers:U,changedPointers:[R],pointerType:_n,srcEvent:R}),ie&&U.splice(gr,1))}});var du={touchstart:1,touchmove:2,touchend:4,touchcancel:8},G="touchstart",Y="touchstart touchmove touchend touchcancel";function J(){this.evTarget=G,this.evWin=Y,this.started=!1,ti.apply(this,arguments)}function T(A,R){var U=Kt(A.touches),ie=Kt(A.changedTouches);return 12&R&&(U=ai(U.concat(ie),"identifier",!0)),[U,ie]}Qt(J,ti,{handler:function(R){var U=du[R.type];if(1===U&&(this.started=!0),this.started){var ie=T.call(this,R,U);12&U&&ie[0].length-ie[1].length==0&&(this.started=!1),this.callback(this.manager,U,{pointers:ie[0],changedPointers:ie[1],pointerType:rs,srcEvent:R})}}});var D={touchstart:1,touchmove:2,touchend:4,touchcancel:8},B="touchstart touchmove touchend touchcancel";function Z(){this.evTarget=B,this.targetIds={},ti.apply(this,arguments)}function $(A,R){var U=Kt(A.touches),ie=this.targetIds;if(3&R&&1===U.length)return ie[U[0].identifier]=!0,[U,U];var Pe,Ue,_n=Kt(A.changedTouches),lr=[],gr=this.target;if(Ue=U.filter(function(Hr){return Ne(Hr.target,gr)}),1===R)for(Pe=0;Pe<Ue.length;)ie[Ue[Pe].identifier]=!0,Pe++;for(Pe=0;Pe<_n.length;)ie[_n[Pe].identifier]&&lr.push(_n[Pe]),12&R&&delete ie[_n[Pe].identifier],Pe++;return lr.length?[ai(Ue.concat(lr),"identifier",!0),lr]:void 0}function fe(){ti.apply(this,arguments);var A=qn(this.handler,this);this.touch=new Z(this.manager,A),this.mouse=new Cl(this.manager,A),this.primaryTouch=null,this.lastTouches=[]}function Ge(A,R){1&A?(this.primaryTouch=R.changedPointers[0].identifier,tn.call(this,R)):12&A&&tn.call(this,R)}function tn(A){var R=A.changedPointers[0];if(R.identifier===this.primaryTouch){var U={x:R.clientX,y:R.clientY};this.lastTouches.push(U);var ie=this.lastTouches;setTimeout(function(){var Ue=ie.indexOf(U);Ue>-1&&ie.splice(Ue,1)},2500)}}function xn(A){for(var R=A.srcEvent.clientX,U=A.srcEvent.clientY,ie=0;ie<this.lastTouches.length;ie++){var Pe=this.lastTouches[ie],Ue=Math.abs(R-Pe.x),_n=Math.abs(U-Pe.y);if(Ue<=25&&_n<=25)return!0}return!1}Qt(Z,ti,{handler:function(R){var U=D[R.type],ie=$.call(this,R,U);!ie||this.callback(this.manager,U,{pointers:ie[0],changedPointers:ie[1],pointerType:rs,srcEvent:R})}}),Qt(fe,ti,{handler:function(R,U,ie){var Ue=ie.pointerType==ss;if(!(Ue&&ie.sourceCapabilities&&ie.sourceCapabilities.firesTouchEvents)){if(ie.pointerType==rs)Ge.call(this,U,ie);else if(Ue&&xn.call(this,ie))return;this.callback(R,U,ie)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Wt=Oi(Ze.style,"touchAction"),bt=Wt!==Ke,nn="compute",ji="manipulation",Hi="none",fn="pan-x",bi="pan-y",pc=function(){if(!bt)return!1;var A={},R=L.CSS&&L.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){A[U]=!R||L.CSS.supports("touch-action",U)}),A}();function lo(A,R){this.manager=A,this.set(R)}function Ba(A){this.options=je({},this.defaults,A||{}),this.id=xe++,this.manager=null,this.options.enable=yi(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ue(A){return 16&A?"cancel":8&A?"end":4&A?"move":2&A?"start":""}function i_(A){return 16==A?"down":8==A?"up":2==A?"left":4==A?"right":""}function De(A,R){var U=R.manager;return U?U.get(A):A}function nr(){Ba.apply(this,arguments)}function mc(){nr.apply(this,arguments),this.pX=null,this.pY=null}function pu(){nr.apply(this,arguments)}function xh(){Ba.apply(this,arguments),this._timer=null,this._input=null}function gu(){nr.apply(this,arguments)}function la(){nr.apply(this,arguments)}function El(){Ba.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Va(A,R){return(R=R||{}).recognizers=yi(R.recognizers,Va.defaults.preset),new Sl(A,R)}function Sl(A,R){this.options=je({},Va.defaults,R||{}),this.options.inputTarget=this.options.inputTarget||A,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=A,this.input=function(A){return new(A.options.inputClass||(Ut?Qe:Er?Z:Ii?fe:Cl))(A,so)}(this),this.touchAction=new lo(this,this.options.touchAction),yp(this,!0),Se(this.options.recognizers,function(U){var ie=this.add(new U[0](U[1]));U[2]&&ie.recognizeWith(U[2]),U[3]&&ie.requireFailure(U[3])},this)}function yp(A,R){var ie,U=A.element;U.style&&(Se(A.options.cssProps,function(Pe,Ue){ie=Oi(U.style,Ue),R?(A.oldCssProps[ie]=U.style[ie],U.style[ie]=Pe):U.style[ie]=A.oldCssProps[ie]||""}),R||(A.oldCssProps={}))}lo.prototype={set:function(A){A==nn&&(A=this.compute()),bt&&this.manager.element.style&&pc[A]&&(this.manager.element.style[Wt]=A),this.actions=A.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var A=[];return Se(this.manager.recognizers,function(R){Ci(R.options.enable,[R])&&(A=A.concat(R.getTouchAction()))}),function(A){if(le(A,Hi))return Hi;var R=le(A,fn),U=le(A,bi);return R&&U?Hi:R||U?R?fn:bi:le(A,ji)?ji:"auto"}(A.join(" "))},preventDefaults:function(A){var R=A.srcEvent,U=A.offsetDirection;if(!this.manager.session.prevented){var ie=this.actions,Pe=le(ie,Hi)&&!pc[Hi],Ue=le(ie,bi)&&!pc[bi],_n=le(ie,fn)&&!pc[fn];if(Pe&&1===A.pointers.length&&A.distance<2&&A.deltaTime<250)return;return _n&&Ue||!(Pe||Ue&&6&U||_n&&24&U)?void 0:this.preventSrc(R)}R.preventDefault()},preventSrc:function(A){this.manager.session.prevented=!0,A.preventDefault()}},Ba.prototype={defaults:{},set:function(A){return je(this.options,A),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(A){if(_e(A,"recognizeWith",this))return this;var R=this.simultaneous;return R[(A=De(A,this)).id]||(R[A.id]=A,A.recognizeWith(this)),this},dropRecognizeWith:function(A){return _e(A,"dropRecognizeWith",this)||(A=De(A,this),delete this.simultaneous[A.id]),this},requireFailure:function(A){if(_e(A,"requireFailure",this))return this;var R=this.requireFail;return-1===$t(R,A=De(A,this))&&(R.push(A),A.requireFailure(this)),this},dropRequireFailure:function(A){if(_e(A,"dropRequireFailure",this))return this;A=De(A,this);var R=$t(this.requireFail,A);return R>-1&&this.requireFail.splice(R,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(A){return!!this.simultaneous[A.id]},emit:function(A){var R=this,U=this.state;function ie(Pe){R.manager.emit(Pe,A)}U<8&&ie(R.options.event+ue(U)),ie(R.options.event),A.additionalEvent&&ie(A.additionalEvent),U>=8&&ie(R.options.event+ue(U))},tryEmit:function(A){if(this.canEmit())return this.emit(A);this.state=32},canEmit:function(){for(var A=0;A<this.requireFail.length;){if(!(33&this.requireFail[A].state))return!1;A++}return!0},recognize:function(A){var R=je({},A);if(!Ci(this.options.enable,[this,R]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(R),30&this.state&&this.tryEmit(R)},process:function(A){},getTouchAction:function(){},reset:function(){}},Qt(nr,Ba,{defaults:{pointers:1},attrTest:function(A){var R=this.options.pointers;return 0===R||A.pointers.length===R},process:function(A){var R=this.state,U=A.eventType,ie=6&R,Pe=this.attrTest(A);return ie&&(8&U||!Pe)?16|R:ie||Pe?4&U?8|R:2&R?4|R:2:32}}),Qt(mc,nr,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var A=this.options.direction,R=[];return 6&A&&R.push(bi),24&A&&R.push(fn),R},directionTest:function(A){var R=this.options,U=!0,ie=A.distance,Pe=A.direction,Ue=A.deltaX,_n=A.deltaY;return Pe&R.direction||(6&R.direction?(Pe=0===Ue?1:Ue<0?2:4,U=Ue!=this.pX,ie=Math.abs(A.deltaX)):(Pe=0===_n?1:_n<0?8:16,U=_n!=this.pY,ie=Math.abs(A.deltaY))),A.direction=Pe,U&&ie>R.threshold&&Pe&R.direction},attrTest:function(A){return nr.prototype.attrTest.call(this,A)&&(2&this.state||!(2&this.state)&&this.directionTest(A))},emit:function(A){this.pX=A.deltaX,this.pY=A.deltaY;var R=i_(A.direction);R&&(A.additionalEvent=this.options.event+R),this._super.emit.call(this,A)}}),Qt(pu,nr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Hi]},attrTest:function(A){return this._super.attrTest.call(this,A)&&(Math.abs(A.scale-1)>this.options.threshold||2&this.state)},emit:function(A){1!==A.scale&&(A.additionalEvent=this.options.event+(A.scale<1?"in":"out")),this._super.emit.call(this,A)}}),Qt(xh,Ba,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(A){var R=this.options,U=A.pointers.length===R.pointers,ie=A.distance<R.threshold,Pe=A.deltaTime>R.time;if(this._input=A,!ie||!U||12&A.eventType&&!Pe)this.reset();else if(1&A.eventType)this.reset(),this._timer=Ie(function(){this.state=8,this.tryEmit()},R.time,this);else if(4&A.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(A){8===this.state&&(A&&4&A.eventType?this.manager.emit(this.options.event+"up",A):(this._input.timeStamp=me(),this.manager.emit(this.options.event,this._input)))}}),Qt(gu,nr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Hi]},attrTest:function(A){return this._super.attrTest.call(this,A)&&(Math.abs(A.rotation)>this.options.threshold||2&this.state)}}),Qt(la,nr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return mc.prototype.getTouchAction.call(this)},attrTest:function(A){var U,R=this.options.direction;return 30&R?U=A.overallVelocity:6&R?U=A.overallVelocityX:24&R&&(U=A.overallVelocityY),this._super.attrTest.call(this,A)&&R&A.offsetDirection&&A.distance>this.options.threshold&&A.maxPointers==this.options.pointers&&be(U)>this.options.velocity&&4&A.eventType},emit:function(A){var R=i_(A.offsetDirection);R&&this.manager.emit(this.options.event+R,A),this.manager.emit(this.options.event,A)}}),Qt(El,Ba,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ji]},process:function(A){var R=this.options,U=A.pointers.length===R.pointers,ie=A.distance<R.threshold,Pe=A.deltaTime<R.time;if(this.reset(),1&A.eventType&&0===this.count)return this.failTimeout();if(ie&&Pe&&U){if(4!=A.eventType)return this.failTimeout();var Ue=!this.pTime||A.timeStamp-this.pTime<R.interval,_n=!this.pCenter||os(this.pCenter,A.center)<R.posThreshold;if(this.pTime=A.timeStamp,this.pCenter=A.center,_n&&Ue?this.count+=1:this.count=1,this._input=A,0==this.count%R.taps)return this.hasRequireFailures()?(this._timer=Ie(function(){this.state=8,this.tryEmit()},R.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Ie(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Va.VERSION="2.0.7",Va.defaults={domEvents:!1,touchAction:nn,enable:!0,inputTarget:null,inputClass:null,preset:[[gu,{enable:!1}],[pu,{enable:!1},["rotate"]],[la,{direction:6}],[mc,{direction:6},["swipe"]],[El],[El,{event:"doubletap",taps:2},["tap"]],[xh]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Sl.prototype={set:function(A){return je(this.options,A),A.touchAction&&this.touchAction.update(),A.inputTarget&&(this.input.destroy(),this.input.target=A.inputTarget,this.input.init()),this},stop:function(A){this.session.stopped=A?2:1},recognize:function(A){var R=this.session;if(!R.stopped){this.touchAction.preventDefaults(A);var U,ie=this.recognizers,Pe=R.curRecognizer;(!Pe||Pe&&8&Pe.state)&&(Pe=R.curRecognizer=null);for(var Ue=0;Ue<ie.length;)U=ie[Ue],2===R.stopped||Pe&&U!=Pe&&!U.canRecognizeWith(Pe)?U.reset():U.recognize(A),!Pe&&14&U.state&&(Pe=R.curRecognizer=U),Ue++}},get:function(A){if(A instanceof Ba)return A;for(var R=this.recognizers,U=0;U<R.length;U++)if(R[U].options.event==A)return R[U];return null},add:function(A){if(_e(A,"add",this))return this;var R=this.get(A.options.event);return R&&this.remove(R),this.recognizers.push(A),A.manager=this,this.touchAction.update(),A},remove:function(A){if(_e(A,"remove",this))return this;if(A=this.get(A)){var R=this.recognizers,U=$t(R,A);-1!==U&&(R.splice(U,1),this.touchAction.update())}return this},on:function(A,R){if(A!==Ke&&R!==Ke){var U=this.handlers;return Se(zt(A),function(ie){U[ie]=U[ie]||[],U[ie].push(R)}),this}},off:function(A,R){if(A!==Ke){var U=this.handlers;return Se(zt(A),function(ie){R?U[ie]&&U[ie].splice($t(U[ie],R),1):delete U[ie]}),this}},emit:function(A,R){this.options.domEvents&&function(A,R){var U=Tt.createEvent("Event");U.initEvent(A,!0,!0),U.gesture=R,R.target.dispatchEvent(U)}(A,R);var U=this.handlers[A]&&this.handlers[A].slice();if(U&&U.length){R.type=A,R.preventDefault=function(){R.srcEvent.preventDefault()};for(var ie=0;ie<U.length;)U[ie](R),ie++}},destroy:function(){this.element&&yp(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},je(Va,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Sl,Input:ti,TouchAction:lo,TouchInput:Z,MouseInput:Cl,PointerEventInput:Qe,TouchMouseInput:fe,SingleTouchInput:J,Recognizer:Ba,AttrRecognizer:nr,Tap:El,Pan:mc,Swipe:la,Pinch:pu,Rotate:gu,Press:xh,on:vi,off:wr,each:Se,merge:Et,extend:Mn,assign:je,inherit:Qt,bindFn:qn,prefixed:Oi}),(void 0!==L?L:"undefined"!=typeof self?self:{}).Hammer=Va,(yt=function(){return Va}.call(We,Be,We,pt))!==Ke&&(pt.exports=yt)}(window,document)},815:function(pt,We,Be){var yt;pt=Be.nmd(pt),function(){var L,dt="Expected a function",St="__lodash_hash_undefined__",be="__lodash_placeholder__",cn=1/0,jn=9007199254740991,Ut=4294967295,Eh=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ss="[object Arguments]",sa="[object Array]",li="[object Boolean]",ht="[object Date]",Pi="[object Error]",oa="[object Function]",ka="[object GeneratorFunction]",Ri="[object Map]",Ur="[object Number]",tr="[object Object]",ro="[object Promise]",jr="[object RegExp]",kr="[object Set]",ti="[object String]",dc="[object Symbol]",ui="[object WeakMap]",vl="[object ArrayBuffer]",Na="[object DataView]",oo="[object Float32Array]",La="[object Float64Array]",ki="[object Int8Array]",os="[object Int16Array]",ao="[object Int32Array]",hc="[object Uint8Array]",bl="[object Uint8ClampedArray]",au="[object Uint16Array]",lu="[object Uint32Array]",cu=/\b__p \+= '';/g,Cl=/\b(__p \+=) '' \+/g,fc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cd=/&(?:amp|lt|gt|quot|#39);/g,uu=/[&<>"']/g,Vs=RegExp(cd.source),Qe=RegExp(uu.source),du=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/,D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(B.source),$=/^\s+/,ae=/\s/,de=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ge=/,? & /,tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xn=/[()=,{}\[\]\/\s]/,Wt=/\\(\\)?/g,bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nn=/\w*$/,ni=/^[-+]0x[0-9a-f]+$/i,ji=/^0b[01]+$/i,Hi=/^\[object .+?Constructor\]$/,fn=/^0o[0-7]+$/i,bi=/^(?:0|[1-9]\d*)$/,pc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lo=/($^)/,ud=/['\n\r\u2028\u2029\\]/g,wl="\\ud800-\\udfff",$i="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Dn="\\u2700-\\u27bf",fu="a-z\\xdf-\\xf6\\xf8-\\xff",De="A-Z\\xc0-\\xd6\\xd8-\\xde",nr="\\ufe0e\\ufe0f",mc="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xh="["+wl+"]",gu="["+mc+"]",la="["+$i+"]",El="\\d+",Va="["+Dn+"]",_p="["+fu+"]",xt="[^"+wl+mc+El+Dn+fu+De+"]",Sl="\\ud83c[\\udffb-\\udfff]",ca="[^"+wl+"]",dd="(?:\\ud83c[\\udde6-\\uddff]){2}",A="[\\ud800-\\udbff][\\udc00-\\udfff]",R="["+De+"]",U="\\u200d",ie="(?:"+_p+"|"+xt+")",Pe="(?:"+R+"|"+xt+")",Ue="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_n="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",lr="(?:"+la+"|"+Sl+")?",gr="["+nr+"]?",pM=gr+lr+"(?:"+U+"(?:"+[ca,dd,A].join("|")+")"+gr+lr+")*",hd="(?:"+[Va,dd,A].join("|")+")"+pM,gi="(?:"+[ca+la+"?",la,dd,A,xh].join("|")+")",vp=RegExp("['\u2019]","g"),r_=RegExp(la,"g"),Mh=RegExp(Sl+"(?="+Sl+")|"+gi+pM,"g"),f0=RegExp([R+"?"+_p+"+"+Ue+"(?="+[gu,R,"$"].join("|")+")",Pe+"+"+_n+"(?="+[gu,R+ie,"$"].join("|")+")",R+"?"+ie+"+"+Ue,R+"+"+_n,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",El,hd].join("|"),"g"),gM=RegExp("["+U+wl+$i+nr+"]"),xl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Th=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mM=-1,$e={};$e[oo]=$e[La]=$e[ki]=$e[os]=$e[ao]=$e[hc]=$e[bl]=$e[au]=$e[lu]=!0,$e[ss]=$e[sa]=$e[vl]=$e[li]=$e[Na]=$e[ht]=$e[Pi]=$e[oa]=$e[Ri]=$e[Ur]=$e[tr]=$e[jr]=$e[kr]=$e[ti]=$e[ui]=!1;var wi={};wi[ss]=wi[sa]=wi[vl]=wi[Na]=wi[li]=wi[ht]=wi[oo]=wi[La]=wi[ki]=wi[os]=wi[ao]=wi[Ri]=wi[Ur]=wi[tr]=wi[jr]=wi[kr]=wi[ti]=wi[dc]=wi[hc]=wi[bl]=wi[au]=wi[lu]=!0,wi[Pi]=wi[oa]=wi[ui]=!1;var Fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_M=parseFloat,_0=parseInt,ge="object"==typeof global&&global&&global.Object===Object&&global,as="object"==typeof self&&self&&self.Object===Object&&self,Xn=ge||as||Function("return this")(),Ml=We&&!We.nodeType&&We,ua=Ml&&pt&&!pt.nodeType&&pt,co=ua&&ua.exports===Ml,s_=co&&ge.process,Gi=function(){try{return ua&&ua.require&&ua.require("util").types||s_&&s_.binding&&s_.binding("util")}catch(he){}}(),tt=Gi&&Gi.isArrayBuffer,yn=Gi&&Gi.isDate,Mi=Gi&&Gi.isMap,Us=Gi&&Gi.isRegExp,_c=Gi&&Gi.isSet,Sr=Gi&&Gi.isTypedArray;function xr(W,he,se){switch(se.length){case 0:return W.call(he);case 1:return W.call(he,se[0]);case 2:return W.call(he,se[0],se[1]);case 3:return W.call(he,se[0],se[1],se[2])}return W.apply(he,se)}function cr(W,he,se,at){for(var Dt=-1,Hn=null==W?0:W.length;++Dt<Hn;){var mr=W[Dt];he(at,mr,se(mr),W)}return at}function ls(W,he){for(var se=-1,at=null==W?0:W.length;++se<at&&!1!==he(W[se],se,W););return W}function fd(W,he){for(var se=null==W?0:W.length;se--&&!1!==he(W[se],se,W););return W}function un(W,he){for(var se=-1,at=null==W?0:W.length;++se<at;)if(!he(W[se],se,W))return!1;return!0}function da(W,he){for(var se=-1,at=null==W?0:W.length,Dt=0,Hn=[];++se<at;){var mr=W[se];he(mr,se,W)&&(Hn[Dt++]=mr)}return Hn}function Tl(W,he){return!(null==W||!W.length)&&za(W,he,0)>-1}function Ah(W,he,se){for(var at=-1,Dt=null==W?0:W.length;++at<Dt;)if(se(he,W[at]))return!0;return!1}function di(W,he){for(var se=-1,at=null==W?0:W.length,Dt=Array(at);++se<at;)Dt[se]=he(W[se],se,W);return Dt}function ur(W,he){for(var se=-1,at=he.length,Dt=W.length;++se<at;)W[Dt+se]=he[se];return W}function mu(W,he,se,at){var Dt=-1,Hn=null==W?0:W.length;for(at&&Hn&&(se=W[++Dt]);++Dt<Hn;)se=he(se,W[Dt],Dt,W);return se}function pd(W,he,se,at){var Dt=null==W?0:W.length;for(at&&Dt&&(se=W[--Dt]);Dt--;)se=he(se,W[Dt],Dt,W);return se}function uo(W,he){for(var se=-1,at=null==W?0:W.length;++se<at;)if(he(W[se],se,W))return!0;return!1}var Ei=o_("length");function Dh(W,he,se){var at;return se(W,function(Dt,Hn,mr){if(he(Dt,Hn,mr))return at=Hn,!1}),at}function gd(W,he,se,at){for(var Dt=W.length,Hn=se+(at?1:-1);at?Hn--:++Hn<Dt;)if(he(W[Hn],Hn,W))return Hn;return-1}function za(W,he,se){return he==he?function(W,he,se){for(var at=se-1,Dt=W.length;++at<Dt;)if(W[at]===he)return at;return-1}(W,he,se):gd(W,yc,se)}function bp(W,he,se,at){for(var Dt=se-1,Hn=W.length;++Dt<Hn;)if(at(W[Dt],he))return Dt;return-1}function yc(W){return W!=W}function $r(W,he){var se=null==W?0:W.length;return se?md(W,he)/se:NaN}function o_(W){return function(he){return null==he?L:he[W]}}function Oo(W){return function(he){return null==W?L:W[he]}}function Io(W,he,se,at,Dt){return Dt(W,function(Hn,mr,hi){se=at?(at=!1,Hn):he(se,Hn,mr,hi)}),se}function md(W,he){for(var se,at=-1,Dt=W.length;++at<Dt;){var Hn=he(W[at]);Hn!==L&&(se=se===L?Hn:se+Hn)}return se}function _d(W,he){for(var se=-1,at=Array(W);++se<W;)at[se]=he(se);return at}function y0(W){return W&&W.slice(0,vc(W)+1).replace($,"")}function Po(W){return function(he){return W(he)}}function l_(W,he){return di(he,function(se){return W[se]})}function Oh(W,he){return W.has(he)}function bM(W,he){for(var se=-1,at=W.length;++se<at&&za(he,W[se],0)>-1;);return se}function CM(W,he){for(var se=W.length;se--&&za(he,W[se],0)>-1;);return se}function PF(W,he){for(var se=W.length,at=0;se--;)W[se]===he&&++at;return at}var RF=Oo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),kF=Oo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function FF(W){return"\\"+Fe[W]}function Ih(W){return gM.test(W)}function v0(W){var he=-1,se=Array(W.size);return W.forEach(function(at,Dt){se[++he]=[Dt,at]}),se}function wM(W,he){return function(se){return W(he(se))}}function _u(W,he){for(var se=-1,at=W.length,Dt=0,Hn=[];++se<at;){var mr=W[se];(mr===he||mr===be)&&(W[se]=be,Hn[Dt++]=se)}return Hn}function c_(W){var he=-1,se=Array(W.size);return W.forEach(function(at){se[++he]=at}),se}function Ph(W){return Ih(W)?function(W){for(var he=Mh.lastIndex=0;Mh.test(W);)++he;return he}(W):Ei(W)}function Ua(W){return Ih(W)?function(W){return W.match(Mh)||[]}(W):function(W){return W.split("")}(W)}function vc(W){for(var he=W.length;he--&&ae.test(W.charAt(he)););return he}var d_=Oo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Rh=function W(he){var u,se=(he=null==he?Xn:Rh.defaults(Xn.Object(),he,Rh.pick(Xn,Th))).Array,at=he.Date,Dt=he.Error,Hn=he.Function,mr=he.Math,hi=he.Object,h_=he.RegExp,f_=he.String,fa=he.TypeError,Ti=se.prototype,yu=hi.prototype,Cp=he["__core-js_shared__"],Wi=Hn.prototype.toString,fi=yu.hasOwnProperty,UF=0,kh=(u=/[^.]+$/.exec(Cp&&Cp.keys&&Cp.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",xs=yu.toString,xM=Wi.call(hi),p_=Xn._,yd=h_("^"+Wi.call(fi).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cs=co?he.Buffer:L,Al=he.Symbol,vd=he.Uint8Array,w0=cs?cs.allocUnsafe:L,pa=wM(hi.getPrototypeOf,hi),g_=hi.create,wp=yu.propertyIsEnumerable,qt=Ti.splice,MM=Al?Al.isConcatSpreadable:L,Fh=Al?Al.iterator:L,vu=Al?Al.toStringTag:L,Ep=function(){try{var u=Dc(hi,"defineProperty");return u({},"",{}),u}catch(h){}}(),E0=he.clearTimeout!==Xn.clearTimeout&&he.clearTimeout,TM=at&&at.now!==Xn.Date.now&&at.now,AM=he.setTimeout!==Xn.setTimeout&&he.setTimeout,Te=mr.ceil,Tn=mr.floor,rn=hi.getOwnPropertySymbols,Mr=cs?cs.isBuffer:L,m_=he.isFinite,Nh=Ti.join,ja=wM(hi.keys,hi),dr=mr.max,Fr=mr.min,jF=at.now,DM=he.parseInt,Lh=mr.random,Sp=Ti.reverse,Gr=Dc(he,"DataView"),js=Dc(he,"Map"),xp=Dc(he,"Promise"),ga=Dc(he,"Set"),ho=Dc(he,"WeakMap"),Bh=Dc(hi,"create"),Vh=ho&&new ho,bd={},OM=Iu(Gr),__=Iu(js),y_=Iu(xp),S0=Iu(ga),v_=Iu(ho),Mp=Al?Al.prototype:L,Cd=Mp?Mp.valueOf:L,zh=Mp?Mp.toString:L;function O(u){if(Xi(u)&&!Bt(u)&&!(u instanceof vn)){if(u instanceof fo)return u;if(fi.call(u,"__wrapped__"))return Jh(u)}return new fo(u)}var bu=function(){function u(){}return function(h){if(!Yi(h))return{};if(g_)return g_(h);u.prototype=h;var m=new u;return u.prototype=L,m}}();function Uh(){}function fo(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=L}function vn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ut,this.__views__=[]}function Hs(u){var h=-1,m=null==u?0:u.length;for(this.clear();++h<m;){var b=u[h];this.set(b[0],b[1])}}function Dl(u){var h=-1,m=null==u?0:u.length;for(this.clear();++h<m;){var b=u[h];this.set(b[0],b[1])}}function Ha(u){var h=-1,m=null==u?0:u.length;for(this.clear();++h<m;){var b=u[h];this.set(b[0],b[1])}}function ma(u){var h=-1,m=null==u?0:u.length;for(this.__data__=new Ha;++h<m;)this.add(u[h])}function _a(u){var h=this.__data__=new Dl(u);this.size=h.size}function Hh(u,h){var m=Bt(u),b=!m&&Qa(u),x=!m&&!b&&Ja(u),P=!m&&!b&&!x&&of(u),z=m||b||x||P,H=z?_d(u.length,f_):[],X=H.length;for(var ye in u)(h||fi.call(u,ye))&&(!z||!("length"==ye||x&&("offset"==ye||"parent"==ye)||P&&("buffer"==ye||"byteLength"==ye||"byteOffset"==ye)||mo(ye,X)))&&H.push(ye);return H}function E_(u){var h=u.length;return h?u[Ol(0,h-1)]:L}function A0(u,h){return Nd(Ts(u),Cu(h,0,u.length))}function wd(u){return Nd(Ts(u))}function S_(u,h,m){(m!==L&&!Ot(u[h],m)||m===L&&!(h in u))&&Ga(u,h,m)}function $a(u,h,m){var b=u[h];(!fi.call(u,h)||!Ot(b,m)||m===L&&!(h in u))&&Ga(u,h,m)}function Ed(u,h){for(var m=u.length;m--;)if(Ot(u[m][0],h))return m;return-1}function Ip(u,h,m,b){return wc(u,function(x,P,z){h(b,x,m(x),z)}),b}function zM(u,h){return u&&va(h,Kr(h),u)}function Ga(u,h,m){"__proto__"==h&&Ep?Ep(u,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[h]=m}function x_(u,h){for(var m=-1,b=h.length,x=se(b),P=null==u;++m<b;)x[m]=P?L:cf(u,h[m]);return x}function Cu(u,h,m){return u==u&&(m!==L&&(u=u<=m?u:m),h!==L&&(u=u>=h?u:h)),u}function us(u,h,m,b,x,P){var z,H=1&h,X=2&h,ye=4&h;if(m&&(z=x?m(u,b,x,P):m(u)),z!==L)return z;if(!Yi(u))return u;var ve=Bt(u);if(ve){if(z=function(u){var h=u.length,m=new u.constructor(h);return h&&"string"==typeof u[0]&&fi.call(u,"index")&&(m.index=u.index,m.input=u.input),m}(u),!H)return Ts(u,z)}else{var Oe=fs(u),Je=Oe==oa||Oe==ka;if(Ja(u))return Vp(u,H);if(Oe==tr||Oe==ss||Je&&!x){if(z=X||Je?{}:Z0(u),!H)return X?function(u,h){return va(u,Y0(u),h)}(u,function(u,h){return u&&va(h,Ds(h),u)}(z,u)):function(u,h){return va(u,U_(u),h)}(u,zM(z,u))}else{if(!wi[Oe])return x?u:{};z=function(u,h,m){var b=u.constructor;switch(h){case vl:return Tu(u);case li:case ht:return new b(+u);case Na:return function(u,h){var m=h?Tu(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}(u,m);case oo:case La:case ki:case os:case ao:case hc:case bl:case au:case lu:return N_(u,m);case Ri:return new b;case Ur:case ti:return new b(u);case jr:return function(u){var h=new u.constructor(u.source,nn.exec(u));return h.lastIndex=u.lastIndex,h}(u);case kr:return new b;case dc:return function(u){return Cd?hi(Cd.call(u)):{}}(u)}}(u,Oe,H)}}P||(P=new _a);var Ct=P.get(u);if(Ct)return Ct;P.set(u,z),rT(u)?u.forEach(function(Yt){z.add(us(Yt,h,m,Yt,u,P))}):eT(u)&&u.forEach(function(Yt,wn){z.set(wn,us(Yt,h,m,wn,u,P))});var Cn=ve?L:(ye?X?V_:kl:X?Ds:Kr)(u);return ls(Cn||u,function(Yt,wn){Cn&&(Yt=u[wn=Yt]),$a(z,wn,us(Yt,h,m,wn,u,P))}),z}function Pp(u,h,m){var b=m.length;if(null==u)return!b;for(u=hi(u);b--;){var x=m[b],z=u[x];if(z===L&&!(x in u)||!(0,h[x])(z))return!1}return!0}function $h(u,h,m){if("function"!=typeof u)throw new fa(dt);return Zh(function(){u.apply(L,m)},h)}function Cc(u,h,m,b){var x=-1,P=Tl,z=!0,H=u.length,X=[],ye=h.length;if(!H)return X;m&&(h=di(h,Po(m))),b?(P=Ah,z=!1):h.length>=200&&(P=Oh,z=!1,h=new ma(h));e:for(;++x<H;){var ve=u[x],Oe=null==m?ve:m(ve);if(ve=b||0!==ve?ve:0,z&&Oe==Oe){for(var Je=ye;Je--;)if(h[Je]===Oe)continue e;X.push(ve)}else P(h,Oe,b)||X.push(ve)}return X}O.templateSettings={escape:du,evaluate:G,interpolate:Y,variable:"",imports:{_:O}},(O.prototype=Uh.prototype).constructor=O,(fo.prototype=bu(Uh.prototype)).constructor=fo,(vn.prototype=bu(Uh.prototype)).constructor=vn,Hs.prototype.clear=function(){this.__data__=Bh?Bh(null):{},this.size=0},Hs.prototype.delete=function(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h},Hs.prototype.get=function(u){var h=this.__data__;if(Bh){var m=h[u];return m===St?L:m}return fi.call(h,u)?h[u]:L},Hs.prototype.has=function(u){var h=this.__data__;return Bh?h[u]!==L:fi.call(h,u)},Hs.prototype.set=function(u,h){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=Bh&&h===L?St:h,this},Dl.prototype.clear=function(){this.__data__=[],this.size=0},Dl.prototype.delete=function(u){var h=this.__data__,m=Ed(h,u);return!(m<0||(m==h.length-1?h.pop():qt.call(h,m,1),--this.size,0))},Dl.prototype.get=function(u){var h=this.__data__,m=Ed(h,u);return m<0?L:h[m][1]},Dl.prototype.has=function(u){return Ed(this.__data__,u)>-1},Dl.prototype.set=function(u,h){var m=this.__data__,b=Ed(m,u);return b<0?(++this.size,m.push([u,h])):m[b][1]=h,this},Ha.prototype.clear=function(){this.size=0,this.__data__={hash:new Hs,map:new(js||Dl),string:new Hs}},Ha.prototype.delete=function(u){var h=hs(this,u).delete(u);return this.size-=h?1:0,h},Ha.prototype.get=function(u){return hs(this,u).get(u)},Ha.prototype.has=function(u){return hs(this,u).has(u)},Ha.prototype.set=function(u,h){var m=hs(this,u),b=m.size;return m.set(u,h),this.size+=m.size==b?0:1,this},ma.prototype.add=ma.prototype.push=function(u){return this.__data__.set(u,St),this},ma.prototype.has=function(u){return this.__data__.has(u)},_a.prototype.clear=function(){this.__data__=new Dl,this.size=0},_a.prototype.delete=function(u){var h=this.__data__,m=h.delete(u);return this.size=h.size,m},_a.prototype.get=function(u){return this.__data__.get(u)},_a.prototype.has=function(u){return this.__data__.has(u)},_a.prototype.set=function(u,h){var m=this.__data__;if(m instanceof Dl){var b=m.__data__;if(!js||b.length<199)return b.push([u,h]),this.size=++m.size,this;m=this.__data__=new Ha(b)}return m.set(u,h),this.size=m.size,this};var wc=Ya(Wa),T_=Ya(Rp,!0);function O0(u,h){var m=!0;return wc(u,function(b,x,P){return m=!!h(b,x,P)}),m}function Gh(u,h,m){for(var b=-1,x=u.length;++b<x;){var P=u[b],z=h(P);if(null!=z&&(H===L?z==z&&!jo(z):m(z,H)))var H=z,X=P}return X}function P0(u,h){var m=[];return wc(u,function(b,x,P){h(b,x,P)&&m.push(b)}),m}function Wr(u,h,m,b,x){var P=-1,z=u.length;for(m||(m=r1),x||(x=[]);++P<z;){var H=u[P];h>0&&m(H)?h>1?Wr(H,h-1,m,b,x):ur(x,H):b||(x[x.length]=H)}return x}var Sd=V0(),xd=V0(!0);function Wa(u,h){return u&&Sd(u,h,Kr)}function Rp(u,h){return u&&xd(u,h,Kr)}function Wh(u,h){return da(h,function(m){return Uo(u[m])})}function Ro(u,h){for(var m=0,b=(h=Mc(h,u)).length;null!=u&&m<b;)u=u[dn(h[m++])];return m&&m==b?u:L}function $n(u,h,m){var b=h(u);return Bt(u)?b:ur(b,m(u))}function qr(u){return null==u?u===L?"[object Undefined]":"[object Null]":vu&&vu in hi(u)?function(u){var h=fi.call(u,vu),m=u[vu];try{u[vu]=L;var b=!0}catch(P){}var x=xs.call(u);return b&&(h?u[vu]=m:delete u[vu]),x}(u):function(u){return xs.call(u)}(u)}function ds(u,h){return u>h}function Md(u,h){return null!=u&&fi.call(u,h)}function Td(u,h){return null!=u&&h in hi(u)}function wu(u,h,m){for(var b=m?Ah:Tl,x=u[0].length,P=u.length,z=P,H=se(P),X=1/0,ye=[];z--;){var ve=u[z];z&&h&&(ve=di(ve,Po(h))),X=Fr(ve.length,X),H[z]=!m&&(h||x>=120&&ve.length>=120)?new ma(z&&ve):L}ve=u[0];var Oe=-1,Je=H[0];e:for(;++Oe<x&&ye.length<X;){var Ct=ve[Oe],Gt=h?h(Ct):Ct;if(Ct=m||0!==Ct?Ct:0,!(Je?Oh(Je,Gt):b(ye,Gt,m))){for(z=P;--z;){var Cn=H[z];if(!(Cn?Oh(Cn,Gt):b(u[z],Gt,m)))continue e}Je&&Je.push(Gt),ye.push(Ct)}}return ye}function ya(u,h,m){var b=null==(u=G_(u,h=Mc(h,u)))?u:u[dn(Bo(h))];return null==b?L:xr(b,u,m)}function UM(u){return Xi(u)&&qr(u)==ss}function kp(u,h,m,b,x){return u===h||(null==u||null==h||!Xi(u)&&!Xi(h)?u!=u&&h!=h:function(u,h,m,b,x,P){var z=Bt(u),H=Bt(h),X=z?sa:fs(u),ye=H?sa:fs(h),ve=(X=X==ss?tr:X)==tr,Oe=(ye=ye==ss?tr:ye)==tr,Je=X==ye;if(Je&&Ja(u)){if(!Ja(h))return!1;z=!0,ve=!1}if(Je&&!ve)return P||(P=new _a),z||of(u)?Gp(u,h,m,b,x,P):function(u,h,m,b,x,P,z){switch(m){case Na:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case vl:return!(u.byteLength!=h.byteLength||!P(new vd(u),new vd(h)));case li:case ht:case Ur:return Ot(+u,+h);case Pi:return u.name==h.name&&u.message==h.message;case jr:case ti:return u==h+"";case Ri:var H=v0;case kr:if(H||(H=c_),u.size!=h.size&&!(1&b))return!1;var ye=z.get(u);if(ye)return ye==h;b|=2,z.set(u,h);var ve=Gp(H(u),H(h),b,x,P,z);return z.delete(u),ve;case dc:if(Cd)return Cd.call(u)==Cd.call(h)}return!1}(u,h,X,m,b,x,P);if(!(1&m)){var Ct=ve&&fi.call(u,"__wrapped__"),Gt=Oe&&fi.call(h,"__wrapped__");if(Ct||Gt){var Cn=Ct?u.value():u,Yt=Gt?h.value():h;return P||(P=new _a),x(Cn,Yt,m,b,P)}}return!!Je&&(P||(P=new _a),function(u,h,m,b,x,P){var z=1&m,H=kl(u),X=H.length;if(X!=kl(h).length&&!z)return!1;for(var Oe=X;Oe--;){var Je=H[Oe];if(!(z?Je in h:fi.call(h,Je)))return!1}var Ct=P.get(u),Gt=P.get(h);if(Ct&&Gt)return Ct==h&&Gt==u;var Cn=!0;P.set(u,h),P.set(h,u);for(var Yt=z;++Oe<X;){var wn=u[Je=H[Oe]],Rn=h[Je];if(b)var Ws=z?b(Rn,wn,Je,h,u,P):b(wn,Rn,Je,u,h,P);if(!(Ws===L?wn===Rn||x(wn,Rn,m,b,P):Ws)){Cn=!1;break}Yt||(Yt="constructor"==Je)}if(Cn&&!Yt){var gs=u.constructor,Ho=h.constructor;gs!=Ho&&"constructor"in u&&"constructor"in h&&!("function"==typeof gs&&gs instanceof gs&&"function"==typeof Ho&&Ho instanceof Ho)&&(Cn=!1)}return P.delete(u),P.delete(h),Cn}(u,h,m,b,x,P))}(u,h,m,b,kp,x))}function D_(u,h,m,b){var x=m.length,P=x,z=!b;if(null==u)return!P;for(u=hi(u);x--;){var H=m[x];if(z&&H[2]?H[1]!==u[H[0]]:!(H[0]in u))return!1}for(;++x<P;){var X=(H=m[x])[0],ye=u[X],ve=H[1];if(z&&H[2]){if(ye===L&&!(X in u))return!1}else{var Oe=new _a;if(b)var Je=b(ye,ve,X,u,h,Oe);if(!(Je===L?kp(ve,ye,3,b,Oe):Je))return!1}}return!0}function O_(u){return!(!Yi(u)||function(u){return!!kh&&kh in u}(u))&&(Uo(u)?yd:Hi).test(Iu(u))}function $M(u){return"function"==typeof u?u:null==u?Os:"object"==typeof u?Bt(u)?Dd(u[0],u[1]):WM(u):Fu(u)}function R0(u){if(!Yp(u))return ja(u);var h=[];for(var m in hi(u))fi.call(u,m)&&"constructor"!=m&&h.push(m);return h}function k0(u,h){return u<h}function GM(u,h){var m=-1,b=$s(u)?se(u.length):[];return wc(u,function(x,P,z){b[++m]=h(x,P,z)}),b}function WM(u){var h=No(u);return 1==h.length&&h[0][2]?o1(h[0][0],h[0][1]):function(m){return m===u||D_(m,u,h)}}function Dd(u,h){return Lo(u)&&s1(h)?o1(dn(u),h):function(m){var b=cf(m,u);return b===L&&b===h?ag(m,u):kp(h,b,3)}}function I_(u,h,m,b,x){u!==h&&Sd(h,function(P,z){if(x||(x=new _a),Yi(P))!function(u,h,m,b,x,P,z){var H=W_(u,m),X=W_(h,m),ye=z.get(X);if(ye)S_(u,m,ye);else{var ve=P?P(H,X,m+"",u,h,z):L,Oe=ve===L;if(Oe){var Je=Bt(X),Ct=!Je&&Ja(X),Gt=!Je&&!Ct&&of(X);ve=X,Je||Ct||Gt?Bt(H)?ve=H:qi(H)?ve=Ts(H):Ct?(Oe=!1,ve=Vp(X,!0)):Gt?(Oe=!1,ve=N_(X,!0)):ve=[]:og(X)||Qa(X)?(ve=H,Qa(H)?ve=HC(H):(!Yi(H)||Uo(H))&&(ve=Z0(X))):Oe=!1}Oe&&(z.set(X,ve),x(ve,X,b,P,z),z.delete(X)),S_(u,m,ve)}}(u,h,z,m,I_,b,x);else{var H=b?b(W_(u,z),P,z+"",u,h,x):L;H===L&&(H=P),S_(u,z,H)}},Ds)}function Eu(u,h){var m=u.length;if(m)return mo(h+=h<0?m:0,m)?u[h]:L}function qh(u,h,m){h=h.length?di(h,function(P){return Bt(P)?function(z){return Ro(z,1===P.length?P[0]:P)}:P}):[Os];var b=-1;return h=di(h,Po(jt())),function(W,he){var se=W.length;for(W.sort(function(P,z){return function(u,h,m){for(var b=-1,x=u.criteria,P=h.criteria,z=x.length,H=m.length;++b<z;){var X=Tc(x[b],P[b]);if(X)return b>=H?X:X*("desc"==m[b]?-1:1)}return u.index-h.index}(P,z,m)});se--;)W[se]=W[se].value;return W}(GM(u,function(P,z,H){return{criteria:di(h,function(ye){return ye(P)}),index:++b,value:P}}))}function F0(u,h,m){for(var b=-1,x=h.length,P={};++b<x;){var z=h[b],H=Ro(u,z);m(H,z)&&Np(P,Mc(z,u),H)}return P}function Fo(u,h,m,b){var x=b?bp:za,P=-1,z=h.length,H=u;for(u===h&&(h=Ts(h)),m&&(H=di(u,Po(m)));++P<z;)for(var X=0,ye=h[P],ve=m?m(ye):ye;(X=x(H,ve,X,b))>-1;)H!==u&&qt.call(H,X,1),qt.call(u,X,1);return u}function Yh(u,h){for(var m=u?h.length:0,b=m-1;m--;){var x=h[m];if(m==b||x!==P){var P=x;mo(x)?qt.call(u,x,1):Su(u,x)}}return u}function Ol(u,h){return u+Tn(Lh()*(h-u+1))}function Fp(u,h){var m="";if(!u||h<1||h>jn)return m;do{h%2&&(m+=u),(h=Tn(h/2))&&(u+=u)}while(h);return m}function bn(u,h){return Xp(a1(u,h,Os),u+"")}function qM(u){return E_(Gd(u))}function ZF(u,h){var m=Gd(u);return Nd(m,Cu(h,0,m.length))}function Np(u,h,m,b){if(!Yi(u))return u;for(var x=-1,P=(h=Mc(h,u)).length,z=P-1,H=u;null!=H&&++x<P;){var X=dn(h[x]),ye=m;if("__proto__"===X||"constructor"===X||"prototype"===X)return u;if(x!=z){var ve=H[X];(ye=b?b(ve,X,H):L)===L&&(ye=Yi(ve)?ve:mo(h[x+1])?[]:{})}$a(H,X,ye),H=H[X]}return u}var P_=Vh?function(u,h){return Vh.set(u,h),u}:Os,po=Ep?function(u,h){return Ep(u,"toString",{configurable:!0,enumerable:!1,value:ky(h),writable:!0})}:Os;function R_(u){return Nd(Gd(u))}function Yr(u,h,m){var b=-1,x=u.length;h<0&&(h=-h>x?0:x+h),(m=m>x?x:m)<0&&(m+=x),x=h>m?0:m-h>>>0,h>>>=0;for(var P=se(x);++b<x;)P[b]=u[b+h];return P}function QF(u,h){var m;return wc(u,function(b,x,P){return!(m=h(b,x,P))}),!!m}function Xh(u,h,m){var b=0,x=null==u?b:u.length;if("number"==typeof h&&h==h&&x<=2147483647){for(;b<x;){var P=b+x>>>1,z=u[P];null!==z&&!jo(z)&&(m?z<=h:z<h)?b=P+1:x=P}return x}return k_(u,h,Os,m)}function k_(u,h,m,b){var x=0,P=null==u?0:u.length;if(0===P)return 0;for(var z=(h=m(h))!=h,H=null===h,X=jo(h),ye=h===L;x<P;){var ve=Tn((x+P)/2),Oe=m(u[ve]),Je=Oe!==L,Ct=null===Oe,Gt=Oe==Oe,Cn=jo(Oe);if(z)var Yt=b||Gt;else Yt=ye?Gt&&(b||Je):H?Gt&&Je&&(b||!Ct):X?Gt&&Je&&!Ct&&(b||!Cn):!Ct&&!Cn&&(b?Oe<=h:Oe<h);Yt?x=ve+1:P=ve}return Fr(P,4294967294)}function N0(u,h){for(var m=-1,b=u.length,x=0,P=[];++m<b;){var z=u[m],H=h?h(z):z;if(!m||!Ot(H,X)){var X=H;P[x++]=0===z?0:z}}return P}function L0(u){return"number"==typeof u?u:jo(u)?NaN:+u}function go(u){if("string"==typeof u)return u;if(Bt(u))return di(u,go)+"";if(jo(u))return zh?zh.call(u):"";var h=u+"";return"0"==h&&1/u==-cn?"-0":h}function Sc(u,h,m){var b=-1,x=Tl,P=u.length,z=!0,H=[],X=H;if(m)z=!1,x=Ah;else if(P>=200){var ye=h?null:B_(u);if(ye)return c_(ye);z=!1,x=Oh,X=new ma}else X=h?[]:H;e:for(;++b<P;){var ve=u[b],Oe=h?h(ve):ve;if(ve=m||0!==ve?ve:0,z&&Oe==Oe){for(var Je=X.length;Je--;)if(X[Je]===Oe)continue e;h&&X.push(Oe),H.push(ve)}else x(X,Oe,m)||(X!==H&&X.push(Oe),H.push(ve))}return H}function Su(u,h){return null==(u=G_(u,h=Mc(h,u)))||delete u[dn(Bo(h))]}function Lp(u,h,m,b){return Np(u,h,m(Ro(u,h)),b)}function xu(u,h,m,b){for(var x=u.length,P=b?x:-1;(b?P--:++P<x)&&h(u[P],P,u););return m?Yr(u,b?0:P,b?P+1:x):Yr(u,b?P+1:0,b?x:P)}function YM(u,h){var m=u;return m instanceof vn&&(m=m.value()),mu(h,function(b,x){return x.func.apply(x.thisArg,ur([b],x.args))},m)}function Mu(u,h,m){var b=u.length;if(b<2)return b?Sc(u[0]):[];for(var x=-1,P=se(b);++x<b;)for(var z=u[x],H=-1;++H<b;)H!=x&&(P[x]=Cc(P[x]||z,u[H],h,m));return Sc(Wr(P,1),h,m)}function Bp(u,h,m){for(var b=-1,x=u.length,P=h.length,z={};++b<x;)m(z,u[b],b<P?h[b]:L);return z}function xc(u){return qi(u)?u:[]}function F_(u){return"function"==typeof u?u:Os}function Mc(u,h){return Bt(u)?u:Lo(u,h)?[u]:tC(Zn(u))}var XM=bn;function qa(u,h,m){var b=u.length;return m=m===L?b:m,!h&&m>=b?u:Yr(u,h,m)}var KM=E0||function(u){return Xn.clearTimeout(u)};function Vp(u,h){if(h)return u.slice();var m=u.length,b=w0?w0(m):new u.constructor(m);return u.copy(b),b}function Tu(u){var h=new u.constructor(u.byteLength);return new vd(h).set(new vd(u)),h}function N_(u,h){var m=h?Tu(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}function Tc(u,h){if(u!==h){var m=u!==L,b=null===u,x=u==u,P=jo(u),z=h!==L,H=null===h,X=h==h,ye=jo(h);if(!H&&!ye&&!P&&u>h||P&&z&&X&&!H&&!ye||b&&z&&X||!m&&X||!x)return 1;if(!b&&!P&&!ye&&u<h||ye&&m&&x&&!b&&!P||H&&m&&x||!z&&x||!X)return-1}return 0}function Id(u,h,m,b){for(var x=-1,P=u.length,z=m.length,H=-1,X=h.length,ye=dr(P-z,0),ve=se(X+ye),Oe=!b;++H<X;)ve[H]=h[H];for(;++x<z;)(Oe||x<P)&&(ve[m[x]]=u[x]);for(;ye--;)ve[H++]=u[x++];return ve}function B0(u,h,m,b){for(var x=-1,P=u.length,z=-1,H=m.length,X=-1,ye=h.length,ve=dr(P-H,0),Oe=se(ve+ye),Je=!b;++x<ve;)Oe[x]=u[x];for(var Ct=x;++X<ye;)Oe[Ct+X]=h[X];for(;++z<H;)(Je||x<P)&&(Oe[Ct+m[z]]=u[x++]);return Oe}function Ts(u,h){var m=-1,b=u.length;for(h||(h=se(b));++m<b;)h[m]=u[m];return h}function va(u,h,m,b){var x=!m;m||(m={});for(var P=-1,z=h.length;++P<z;){var H=h[P],X=b?b(m[H],u[H],H,m,u):L;X===L&&(X=u[H]),x?Ga(m,H,X):$a(m,H,X)}return m}function _r(u,h){return function(m,b){var x=Bt(m)?cr:Ip,P=h?h():{};return x(m,u,jt(b,2),P)}}function Il(u){return bn(function(h,m){var b=-1,x=m.length,P=x>1?m[x-1]:L,z=x>2?m[2]:L;for(P=u.length>3&&"function"==typeof P?(x--,P):L,z&&ps(m[0],m[1],z)&&(P=x<3?L:P,x=1),h=hi(h);++b<x;){var H=m[b];H&&u(h,H,b,P)}return h})}function Ya(u,h){return function(m,b){if(null==m)return m;if(!$s(m))return u(m,b);for(var x=m.length,P=h?x:-1,z=hi(m);(h?P--:++P<x)&&!1!==b(z[P],P,z););return m}}function V0(u){return function(h,m,b){for(var x=-1,P=hi(h),z=b(h),H=z.length;H--;){var X=z[u?H:++x];if(!1===m(P[X],X,P))break}return h}}function zp(u){return function(h){var m=Ih(h=Zn(h))?Ua(h):L,b=m?m[0]:h.charAt(0),x=m?qa(m,1).join(""):h.slice(1);return b[u]()+x}}function Pl(u){return function(h){return mu(Py(xy(h).replace(vp,"")),u,"")}}function Rd(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=bu(u.prototype),b=u.apply(m,h);return Yi(b)?b:m}}function U0(u){return function(h,m,b){var x=hi(h);if(!$s(h)){var P=jt(m,3);h=Kr(h),m=function(H){return P(x[H],H,x)}}var z=u(h,m,b);return z>-1?x[P?h[z]:z]:L}}function Du(u){return Xa(function(h){var m=h.length,b=m,x=fo.prototype.thru;for(u&&h.reverse();b--;){var P=h[b];if("function"!=typeof P)throw new fa(dt);if(x&&!z&&"wrapper"==Wp(P))var z=new fo([],!0)}for(b=z?b:m;++b<m;){var H=Wp(P=h[b]),X="wrapper"==H?z_(P):L;z=X&&qp(X[0])&&424==X[1]&&!X[4].length&&1==X[9]?z[Wp(X[0])].apply(z,X[3]):1==P.length&&qp(P)?z[H]():z.thru(P)}return function(){var ye=arguments,ve=ye[0];if(z&&1==ye.length&&Bt(ve))return z.plant(ve).value();for(var Oe=0,Je=m?h[Oe].apply(this,ye):ve;++Oe<m;)Je=h[Oe].call(this,Je);return Je}})}function Ac(u,h,m,b,x,P,z,H,X,ye){var ve=128&h,Oe=1&h,Je=2&h,Ct=24&h,Gt=512&h,Cn=Je?L:Rd(u);return function Yt(){for(var wn=arguments.length,Rn=se(wn),Ws=wn;Ws--;)Rn[Ws]=arguments[Ws];if(Ct)var gs=Fd(Yt),Ho=PF(Rn,gs);if(b&&(Rn=Id(Rn,b,x,Ct)),P&&(Rn=B0(Rn,P,z,Ct)),wn-=Ho,Ct&&wn<ye){var Qn=_u(Rn,gs);return $0(u,h,Ac,Yt.placeholder,m,Rn,Qn,H,X,ye-wn)}var nl=Oe?m:this,Rc=Je?nl[u]:u;return wn=Rn.length,H?Rn=l1(Rn,H):Gt&&wn>1&&Rn.reverse(),ve&&X<wn&&(Rn.length=X),this&&this!==Xn&&this instanceof Yt&&(Rc=Cn||Rd(Rc)),Rc.apply(nl,Rn)}}function j0(u,h){return function(m,b){return function(u,h,m,b){return Wa(u,function(x,P,z){h(b,m(x),P,z)}),b}(m,u,h(b),{})}}function L_(u,h){return function(m,b){var x;if(m===L&&b===L)return h;if(m!==L&&(x=m),b!==L){if(x===L)return b;"string"==typeof m||"string"==typeof b?(m=go(m),b=go(b)):(m=L0(m),b=L0(b)),x=u(m,b)}return x}}function Up(u){return Xa(function(h){return h=di(h,Po(jt())),bn(function(m){var b=this;return u(h,function(x){return xr(x,b,m)})})})}function jp(u,h){var m=(h=h===L?" ":go(h)).length;if(m<2)return m?Fp(h,u):h;var b=Fp(h,Te(u/Ph(h)));return Ih(h)?qa(Ua(b),0,u).join(""):b.slice(0,u)}function H0(u){return function(h,m,b){return b&&"number"!=typeof b&&ps(h,m,b)&&(m=b=L),h=el(h),m===L?(m=h,h=0):m=el(m),function(u,h,m,b){for(var x=-1,P=dr(Te((h-u)/(m||1)),0),z=se(P);P--;)z[b?P:++x]=u,u+=m;return z}(h,m,b=b===L?h<m?1:-1:el(b),u)}}function Hp(u){return function(h,m){return"string"==typeof h&&"string"==typeof m||(h=Gs(h),m=Gs(m)),u(h,m)}}function $0(u,h,m,b,x,P,z,H,X,ye){var ve=8&h;h|=ve?32:64,4&(h&=~(ve?64:32))||(h&=-4);var Cn=[u,h,x,ve?P:L,ve?z:L,ve?L:P,ve?L:z,H,X,ye],Yt=m.apply(L,Cn);return qp(u)&&eC(Yt,Cn),Yt.placeholder=b,Qh(Yt,u,h)}function kd(u){var h=mr[u];return function(m,b){if(m=Gs(m),(b=null==b?0:Fr(on(b),292))&&m_(m)){var x=(Zn(m)+"e").split("e");return+((x=(Zn(h(x[0]+"e"+(+x[1]+b)))+"e").split("e"))[0]+"e"+(+x[1]-b))}return h(m)}}var B_=ga&&1/c_(new ga([,-0]))[1]==cn?function(u){return new ga(u)}:Ly;function Ou(u){return function(h){var m=fs(h);return m==Ri?v0(h):m==kr?function(W){var he=-1,se=Array(W.size);return W.forEach(function(at){se[++he]=[at,at]}),se}(h):function(W,he){return di(he,function(se){return[se,W[se]]})}(h,u(h))}}function Rl(u,h,m,b,x,P,z,H){var X=2&h;if(!X&&"function"!=typeof u)throw new fa(dt);var ye=b?b.length:0;if(ye||(h&=-97,b=x=L),z=z===L?z:dr(on(z),0),H=H===L?H:on(H),ye-=x?x.length:0,64&h){var ve=b,Oe=x;b=x=L}var Je=X?L:z_(u),Ct=[u,h,m,b,x,ve,Oe,P,z,H];if(Je&&function(u,h){var m=u[1],b=h[1],x=m|b;if(!(x<131||(128==b&&8==m||128==b&&256==m&&u[7].length<=h[8]||384==b&&h[7].length<=h[8]&&8==m)))return u;1&b&&(u[2]=h[2],x|=1&m?0:4);var H=h[3];if(H){var X=u[3];u[3]=X?Id(X,H,h[4]):H,u[4]=X?_u(u[3],be):h[4]}(H=h[5])&&(u[5]=(X=u[5])?B0(X,H,h[6]):H,u[6]=X?_u(u[5],be):h[6]),(H=h[7])&&(u[7]=H),128&b&&(u[8]=null==u[8]?h[8]:Fr(u[8],h[8])),null==u[9]&&(u[9]=h[9]),u[0]=h[0],u[1]=x}(Ct,Je),u=Ct[0],h=Ct[1],m=Ct[2],b=Ct[3],x=Ct[4],!(H=Ct[9]=Ct[9]===L?X?0:u.length:dr(Ct[9]-ye,0))&&24&h&&(h&=-25),h&&1!=h)Gt=8==h||16==h?function(u,h,m){var b=Rd(u);return function x(){for(var P=arguments.length,z=se(P),H=P,X=Fd(x);H--;)z[H]=arguments[H];var ye=P<3&&z[0]!==X&&z[P-1]!==X?[]:_u(z,X);return(P-=ye.length)<m?$0(u,h,Ac,x.placeholder,L,z,ye,L,L,m-P):xr(this&&this!==Xn&&this instanceof x?b:u,this,z)}}(u,h,H):32!=h&&33!=h||x.length?Ac.apply(L,Ct):function(u,h,m,b){var x=1&h,P=Rd(u);return function z(){for(var H=-1,X=arguments.length,ye=-1,ve=b.length,Oe=se(ve+X),Je=this&&this!==Xn&&this instanceof z?P:u;++ye<ve;)Oe[ye]=b[ye];for(;X--;)Oe[ye++]=arguments[++H];return xr(Je,x?m:this,Oe)}}(u,h,m,b);else var Gt=function(u,h,m){var b=1&h,x=Rd(u);return function P(){return(this&&this!==Xn&&this instanceof P?x:u).apply(b?m:this,arguments)}}(u,h,m);return Qh((Je?P_:eC)(Gt,Ct),u,h)}function G0(u,h,m,b){return u===L||Ot(u,yu[m])&&!fi.call(b,m)?h:u}function JM(u,h,m,b,x,P){return Yi(u)&&Yi(h)&&(P.set(h,u),I_(u,h,L,JM,P),P.delete(h)),u}function $p(u){return og(u)?L:u}function Gp(u,h,m,b,x,P){var z=1&m,H=u.length,X=h.length;if(H!=X&&!(z&&X>H))return!1;var ye=P.get(u),ve=P.get(h);if(ye&&ve)return ye==h&&ve==u;var Oe=-1,Je=!0,Ct=2&m?new ma:L;for(P.set(u,h),P.set(h,u);++Oe<H;){var Gt=u[Oe],Cn=h[Oe];if(b)var Yt=z?b(Cn,Gt,Oe,h,u,P):b(Gt,Cn,Oe,u,h,P);if(Yt!==L){if(Yt)continue;Je=!1;break}if(Ct){if(!uo(h,function(wn,Rn){if(!Oh(Ct,Rn)&&(Gt===wn||x(Gt,wn,m,b,P)))return Ct.push(Rn)})){Je=!1;break}}else if(Gt!==Cn&&!x(Gt,Cn,m,b,P)){Je=!1;break}}return P.delete(u),P.delete(h),Je}function Xa(u){return Xp(a1(u,L,Xr),u+"")}function kl(u){return $n(u,Kr,U_)}function V_(u){return $n(u,Ds,Y0)}var z_=Vh?function(u){return Vh.get(u)}:Ly;function Wp(u){for(var h=u.name+"",m=bd[h],b=fi.call(bd,h)?m.length:0;b--;){var x=m[b],P=x.func;if(null==P||P==u)return x.name}return h}function Fd(u){return(fi.call(O,"placeholder")?O:u).placeholder}function jt(){var u=O.iteratee||ku;return u=u===ku?$M:u,arguments.length?u(arguments[0],arguments[1]):u}function hs(u,h){var m=u.__data__;return function(u){var h=typeof u;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==u:null===u}(h)?m["string"==typeof h?"string":"hash"]:m.map}function No(u){for(var h=Kr(u),m=h.length;m--;){var b=h[m],x=u[b];h[m]=[b,x,s1(x)]}return h}function Dc(u,h){var m=function(W,he){return null==W?L:W[he]}(u,h);return O_(m)?m:L}var U_=rn?function(u){return null==u?[]:(u=hi(u),da(rn(u),function(h){return wp.call(u,h)}))}:Pc,Y0=rn?function(u){for(var h=[];u;)ur(h,U_(u)),u=pa(u);return h}:Pc,fs=qr;function K0(u,h,m){for(var b=-1,x=(h=Mc(h,u)).length,P=!1;++b<x;){var z=dn(h[b]);if(!(P=null!=u&&m(u,z)))break;u=u[z]}return P||++b!=x?P:!!(x=null==u?0:u.length)&&my(x)&&mo(z,x)&&(Bt(u)||Qa(u))}function Z0(u){return"function"!=typeof u.constructor||Yp(u)?{}:bu(pa(u))}function r1(u){return Bt(u)||Qa(u)||!!(MM&&u&&u[MM])}function mo(u,h){var m=typeof u;return!!(h=null==h?jn:h)&&("number"==m||"symbol"!=m&&bi.test(u))&&u>-1&&u%1==0&&u<h}function ps(u,h,m){if(!Yi(m))return!1;var b=typeof h;return!!("number"==b?$s(m)&&mo(h,m.length):"string"==b&&h in m)&&Ot(m[h],u)}function Lo(u,h){if(Bt(u))return!1;var m=typeof u;return!("number"!=m&&"symbol"!=m&&"boolean"!=m&&null!=u&&!jo(u))||T.test(u)||!J.test(u)||null!=h&&u in hi(h)}function qp(u){var h=Wp(u),m=O[h];if("function"!=typeof m||!(h in vn.prototype))return!1;if(u===m)return!0;var b=z_(m);return!!b&&u===b[0]}(Gr&&fs(new Gr(new ArrayBuffer(1)))!=Na||js&&fs(new js)!=Ri||xp&&fs(xp.resolve())!=ro||ga&&fs(new ga)!=kr||ho&&fs(new ho)!=ui)&&(fs=function(u){var h=qr(u),m=h==tr?u.constructor:L,b=m?Iu(m):"";if(b)switch(b){case OM:return Na;case __:return Ri;case y_:return ro;case S0:return kr;case v_:return ui}return h});var J0=Cp?Uo:Vy;function Yp(u){var h=u&&u.constructor;return u===("function"==typeof h&&h.prototype||yu)}function s1(u){return u==u&&!Yi(u)}function o1(u,h){return function(m){return null!=m&&m[u]===h&&(h!==L||u in hi(m))}}function a1(u,h,m){return h=dr(h===L?u.length-1:h,0),function(){for(var b=arguments,x=-1,P=dr(b.length-h,0),z=se(P);++x<P;)z[x]=b[h+x];x=-1;for(var H=se(h+1);++x<h;)H[x]=b[x];return H[h]=m(z),xr(u,this,H)}}function G_(u,h){return h.length<2?u:Ro(u,Yr(h,0,-1))}function l1(u,h){for(var m=u.length,b=Fr(h.length,m),x=Ts(u);b--;){var P=h[b];u[b]=mo(P,m)?x[P]:L}return u}function W_(u,h){if(("constructor"!==h||"function"!=typeof u[h])&&"__proto__"!=h)return u[h]}var eC=q_(P_),Zh=AM||function(u,h){return Xn.setTimeout(u,h)},Xp=q_(po);function Qh(u,h,m){var b=h+"";return Xp(u,function(u,h){var m=h.length;if(!m)return u;var b=m-1;return h[b]=(m>1?"& ":"")+h[b],h=h.join(m>2?", ":" "),u.replace(de,"{\n/* [wrapped with "+h+"] */\n")}(b,function(u,h){return ls(Eh,function(m){var b="_."+m[0];h&m[1]&&!Tl(u,b)&&u.push(b)}),u.sort()}(function(u){var h=u.match(fe);return h?h[1].split(Ge):[]}(b),m)))}function q_(u){var h=0,m=0;return function(){var b=jF(),x=16-(b-m);if(m=b,x>0){if(++h>=800)return arguments[0]}else h=0;return u.apply(L,arguments)}}function Nd(u,h){var m=-1,b=u.length,x=b-1;for(h=h===L?b:h;++m<h;){var P=Ol(m,x),z=u[P];u[P]=u[m],u[m]=z}return u.length=h,u}var h,m,tC=(h=sf(function(u){var h=[];return 46===u.charCodeAt(0)&&h.push(""),u.replace(D,function(m,b,x,P){h.push(x?P.replace(Wt,"$1"):b||m)}),h},function(b){return 500===m.size&&m.clear(),b}),m=h.cache,h);function dn(u){if("string"==typeof u||jo(u))return u;var h=u+"";return"0"==h&&1/u==-cn?"-0":h}function Iu(u){if(null!=u){try{return Wi.call(u)}catch(h){}try{return u+""}catch(h){}}return""}function Jh(u){if(u instanceof vn)return u.clone();var h=new fo(u.__wrapped__,u.__chain__);return h.__actions__=Ts(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}var h1=bn(function(u,h){return qi(u)?Cc(u,Wr(h,1,qi,!0)):[]}),f1=bn(function(u,h){var m=Bo(h);return qi(m)&&(m=L),qi(u)?Cc(u,Wr(h,1,qi,!0),jt(m,2)):[]}),p1=bn(function(u,h){var m=Bo(h);return qi(m)&&(m=L),qi(u)?Cc(u,Wr(h,1,qi,!0),L,m):[]});function X_(u,h,m){var b=null==u?0:u.length;if(!b)return-1;var x=null==m?0:on(m);return x<0&&(x=dr(b+x,0)),gd(u,jt(h,3),x)}function K_(u,h,m){var b=null==u?0:u.length;if(!b)return-1;var x=b-1;return m!==L&&(x=on(m),x=m<0?dr(b+x,0):Fr(x,b-1)),gd(u,jt(h,3),x,!0)}function Xr(u){return null!=u&&u.length?Wr(u,1):[]}function iC(u){return u&&u.length?u[0]:L}var sC=bn(function(u){var h=di(u,xc);return h.length&&h[0]===u[0]?wu(h):[]}),_1=bn(function(u){var h=Bo(u),m=di(u,xc);return h===Bo(m)?h=L:m.pop(),m.length&&m[0]===u[0]?wu(m,jt(h,2)):[]}),oC=bn(function(u){var h=Bo(u),m=di(u,xc);return(h="function"==typeof h?h:L)&&m.pop(),m.length&&m[0]===u[0]?wu(m,L,h):[]});function Bo(u){var h=null==u?0:u.length;return h?u[h-1]:L}var Q_=bn(J_);function J_(u,h){return u&&u.length&&h&&h.length?Fo(u,h):u}var lC=Xa(function(u,h){var m=null==u?0:u.length,b=x_(u,h);return Yh(u,di(h,function(x){return mo(x,m)?+x:x}).sort(Tc)),b});function ey(u){return null==u?u:Sp.call(u)}var dC=bn(function(u){return Sc(Wr(u,1,qi,!0))}),ty=bn(function(u){var h=Bo(u);return qi(h)&&(h=L),Sc(Wr(u,1,qi,!0),jt(h,2))}),Qp=bn(function(u){var h=Bo(u);return h="function"==typeof h?h:L,Sc(Wr(u,1,qi,!0),L,h)});function hC(u){if(!u||!u.length)return[];var h=0;return u=da(u,function(m){if(qi(m))return h=dr(m.length,h),!0}),_d(h,function(m){return di(u,o_(m))})}function O1(u,h){if(!u||!u.length)return[];var m=hC(u);return null==h?m:di(m,function(b){return xr(h,L,b)})}var fC=bn(function(u,h){return qi(u)?Cc(u,h):[]}),aN=bn(function(u){return Mu(da(u,qi))}),_o=bn(function(u){var h=Bo(u);return qi(h)&&(h=L),Mu(da(u,qi),jt(h,2))}),ny=bn(function(u){var h=Bo(u);return h="function"==typeof h?h:L,Mu(da(u,qi),L,h)}),iy=bn(hC),nf=bn(function(u){var h=u.length,m=h>1?u[h-1]:L;return m="function"==typeof m?(u.pop(),m):L,O1(u,m)});function ry(u){var h=O(u);return h.__chain__=!0,h}function Bd(u,h){return h(u)}var sy=Xa(function(u){var h=u.length,m=h?u[0]:0,b=this.__wrapped__,x=function(P){return x_(P,u)};return!(h>1||this.__actions__.length)&&b instanceof vn&&mo(m)?((b=b.slice(m,+m+(h?1:0))).__actions__.push({func:Bd,args:[x],thisArg:L}),new fo(b,this.__chain__).thru(function(P){return h&&!P.length&&P.push(L),P})):this.thru(x)}),R1=_r(function(u,h,m){fi.call(u,m)?++u[m]:Ga(u,m,1)}),N1=U0(X_),L1=U0(K_);function cy(u,h){return(Bt(u)?ls:wc)(u,jt(h,3))}function Jp(u,h){return(Bt(u)?fd:T_)(u,jt(h,3))}var V1=_r(function(u,h,m){fi.call(u,m)?u[m].push(h):Ga(u,m,[h])}),vC=bn(function(u,h,m){var b=-1,x="function"==typeof h,P=$s(u)?se(u.length):[];return wc(u,function(z){P[++b]=x?xr(h,z,m):ya(z,h,m)}),P}),bC=_r(function(u,h,m){Ga(u,m,h)});function Za(u,h){return(Bt(u)?di:GM)(u,jt(h,3))}var wC=_r(function(u,h,m){u[m?0:1].push(h)},function(){return[[],[]]}),tg=bn(function(u,h){if(null==u)return[];var m=h.length;return m>1&&ps(u,h[0],h[1])?h=[]:m>2&&ps(h[0],h[1],h[2])&&(h=[h[0]]),qh(u,Wr(h,1),[])}),Pu=TM||function(){return Xn.Date.now()};function ng(u,h,m){return h=m?L:h,Rl(u,128,L,L,L,L,h=u&&null==h?u.length:h)}function dy(u,h){var m;if("function"!=typeof h)throw new fa(dt);return u=on(u),function(){return--u>0&&(m=h.apply(this,arguments)),u<=1&&(h=L),m}}var rf=bn(function(u,h,m){var b=1;if(m.length){var x=_u(m,Fd(rf));b|=32}return Rl(u,b,h,m,x)}),zd=bn(function(u,h,m){var b=3;if(m.length){var x=_u(m,Fd(zd));b|=32}return Rl(h,b,u,m,x)});function DC(u,h,m){var b,x,P,z,H,X,ye=0,ve=!1,Oe=!1,Je=!0;if("function"!=typeof u)throw new fa(dt);function Ct(Qn){var nl=b,Rc=x;return b=x=L,ye=Qn,z=u.apply(Rc,nl)}function Gt(Qn){return ye=Qn,H=Zh(wn,h),ve?Ct(Qn):z}function Yt(Qn){var nl=Qn-X;return X===L||nl>=h||nl<0||Oe&&Qn-ye>=P}function wn(){var Qn=Pu();if(Yt(Qn))return Rn(Qn);H=Zh(wn,function(Qn){var qT=h-(Qn-X);return Oe?Fr(qT,P-(Qn-ye)):qT}(Qn))}function Rn(Qn){return H=L,Je&&b?Ct(Qn):(b=x=L,z)}function Ho(){var Qn=Pu(),nl=Yt(Qn);if(b=arguments,x=this,X=Qn,nl){if(H===L)return Gt(X);if(Oe)return KM(H),H=Zh(wn,h),Ct(X)}return H===L&&(H=Zh(wn,h)),z}return h=Gs(h)||0,Yi(m)&&(ve=!!m.leading,P=(Oe="maxWait"in m)?dr(Gs(m.maxWait)||0,h):P,Je="trailing"in m?!!m.trailing:Je),Ho.cancel=function(){H!==L&&KM(H),ye=0,b=X=x=H=L},Ho.flush=function(){return H===L?z:Rn(Pu())},Ho}var H1=bn(function(u,h){return $h(u,1,h)}),OC=bn(function(u,h,m){return $h(u,Gs(h)||0,m)});function sf(u,h){if("function"!=typeof u||null!=h&&"function"!=typeof h)throw new fa(dt);var m=function(){var b=arguments,x=h?h.apply(this,b):b[0],P=m.cache;if(P.has(x))return P.get(x);var z=u.apply(this,b);return m.cache=P.set(x,z)||P,z};return m.cache=new(sf.Cache||Ha),m}function py(u){if("function"!=typeof u)throw new fa(dt);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}sf.Cache=Ha;var $1=XM(function(u,h){var m=(h=1==h.length&&Bt(h[0])?di(h[0],Po(jt())):di(Wr(h,1),Po(jt()))).length;return bn(function(b){for(var x=-1,P=Fr(b.length,m);++x<P;)b[x]=h[x].call(this,b[x]);return xr(u,this,b)})}),ig=bn(function(u,h){var m=_u(h,Fd(ig));return Rl(u,32,L,h,m)}),PC=bn(function(u,h){var m=_u(h,Fd(PC));return Rl(u,64,L,h,m)}),G1=Xa(function(u,h){return Rl(u,256,L,L,L,h)});function Ot(u,h){return u===h||u!=u&&h!=h}var q=Hp(ds),FC=Hp(function(u,h){return u>=h}),Qa=UM(function(){return arguments}())?UM:function(u){return Xi(u)&&fi.call(u,"callee")&&!wp.call(u,"callee")},Bt=se.isArray,NC=tt?Po(tt):function(u){return Xi(u)&&qr(u)==vl};function $s(u){return null!=u&&my(u.length)&&!Uo(u)}function qi(u){return Xi(u)&&$s(u)}var Ja=Mr||Vy,LC=yn?Po(yn):function(u){return Xi(u)&&qr(u)==ht};function Ca(u){if(!Xi(u))return!1;var h=qr(u);return h==Pi||"[object DOMException]"==h||"string"==typeof u.message&&"string"==typeof u.name&&!og(u)}function Uo(u){if(!Yi(u))return!1;var h=qr(u);return h==oa||h==ka||"[object AsyncFunction]"==h||"[object Proxy]"==h}function sg(u){return"number"==typeof u&&u==on(u)}function my(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=jn}function Yi(u){var h=typeof u;return null!=u&&("object"==h||"function"==h)}function Xi(u){return null!=u&&"object"==typeof u}var eT=Mi?Po(Mi):function(u){return Xi(u)&&fs(u)==Ri};function iT(u){return"number"==typeof u||Xi(u)&&qr(u)==Ur}function og(u){if(!Xi(u)||qr(u)!=tr)return!1;var h=pa(u);if(null===h)return!0;var m=fi.call(h,"constructor")&&h.constructor;return"function"==typeof m&&m instanceof m&&Wi.call(m)==xM}var UC=Us?Po(Us):function(u){return Xi(u)&&qr(u)==jr},rT=_c?Po(_c):function(u){return Xi(u)&&fs(u)==kr};function yy(u){return"string"==typeof u||!Bt(u)&&Xi(u)&&qr(u)==ti}function jo(u){return"symbol"==typeof u||Xi(u)&&qr(u)==dc}var of=Sr?Po(Sr):function(u){return Xi(u)&&my(u.length)&&!!$e[qr(u)]},Oc=Hp(k0),vy=Hp(function(u,h){return u<=h});function jC(u){if(!u)return[];if($s(u))return yy(u)?Ua(u):Ts(u);if(Fh&&u[Fh])return function(W){for(var he,se=[];!(he=W.next()).done;)se.push(he.value);return se}(u[Fh]());var h=fs(u);return(h==Ri?v0:h==kr?c_:Gd)(u)}function el(u){return u?(u=Gs(u))===cn||u===-cn?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function on(u){var h=el(u),m=h%1;return h==h?m?h-m:h:0}function by(u){return u?Cu(on(u),0,Ut):0}function Gs(u){if("number"==typeof u)return u;if(jo(u))return NaN;if(Yi(u)){var h="function"==typeof u.valueOf?u.valueOf():u;u=Yi(h)?h+"":h}if("string"!=typeof u)return 0===u?u:+u;u=y0(u);var m=ji.test(u);return m||fn.test(u)?_0(u.slice(2),m?2:8):ni.test(u)?NaN:+u}function HC(u){return va(u,Ds(u))}function Zn(u){return null==u?"":go(u)}var sT=Il(function(u,h){if(Yp(h)||$s(h))va(h,Kr(h),u);else for(var m in h)fi.call(h,m)&&$a(u,m,h[m])}),oT=Il(function(u,h){va(h,Ds(h),u)}),Ud=Il(function(u,h,m,b){va(h,Ds(h),u,b)}),aT=Il(function(u,h,m,b){va(h,Kr(h),u,b)}),$C=Xa(x_),cT=bn(function(u,h){u=hi(u);var m=-1,b=h.length,x=b>2?h[2]:L;for(x&&ps(h[0],h[1],x)&&(b=1);++m<b;)for(var P=h[m],z=Ds(P),H=-1,X=z.length;++H<X;){var ye=z[H],ve=u[ye];(ve===L||Ot(ve,yu[ye])&&!fi.call(u,ye))&&(u[ye]=P[ye])}return u}),af=bn(function(u){return u.push(L,JM),xr(KC,L,u)});function cf(u,h,m){var b=null==u?L:Ro(u,h);return b===L?m:b}function ag(u,h){return null!=u&&K0(u,h,Td)}var lg=j0(function(u,h,m){null!=h&&"function"!=typeof h.toString&&(h=xs.call(h)),u[h]=m},ky(Os)),dT=j0(function(u,h,m){null!=h&&"function"!=typeof h.toString&&(h=xs.call(h)),fi.call(u,h)?u[h].push(m):u[h]=[m]},jt),qC=bn(ya);function Kr(u){return $s(u)?Hh(u):R0(u)}function Ds(u){return $s(u)?Hh(u,!0):function(u){if(!Yi(u))return function(u){var h=[];if(null!=u)for(var m in hi(u))h.push(m);return h}(u);var h=Yp(u),m=[];for(var b in u)"constructor"==b&&(h||!fi.call(u,b))||m.push(b);return m}(u)}var XC=Il(function(u,h,m){I_(u,h,m)}),KC=Il(function(u,h,m,b){I_(u,h,m,b)}),fT=Xa(function(u,h){var m={};if(null==u)return m;var b=!1;h=di(h,function(P){return P=Mc(P,u),b||(b=P.length>1),P}),va(u,V_(u),m),b&&(m=us(m,7,$p));for(var x=h.length;x--;)Su(m,h[x]);return m}),pT=Xa(function(u,h){return null==u?{}:function(u,h){return F0(u,h,function(m,b){return ag(u,b)})}(u,h)});function ZC(u,h){if(null==u)return{};var m=di(V_(u),function(b){return[b]});return h=jt(h),F0(u,m,function(b,x){return h(b,x[0])})}var gT=Ou(Kr),JC=Ou(Ds);function Gd(u){return null==u?[]:l_(u,Kr(u))}var bT=Pl(function(u,h,m){return h=h.toLowerCase(),u+(m?Sy(h):h)});function Sy(u){return ug(Zn(u).toLowerCase())}function xy(u){return(u=Zn(u))&&u.replace(pc,RF).replace(r_,"")}var wT=Pl(function(u,h,m){return u+(m?"-":"")+h.toLowerCase()}),ET=Pl(function(u,h,m){return u+(m?" ":"")+h.toLowerCase()}),yN=zp("toLowerCase"),AT=Pl(function(u,h,m){return u+(m?"_":"")+h.toLowerCase()}),Ay=Pl(function(u,h,m){return u+(m?" ":"")+ug(h)}),sw=Pl(function(u,h,m){return u+(m?" ":"")+h.toUpperCase()}),ug=zp("toUpperCase");function Py(u,h,m){return u=Zn(u),(h=m?L:h)===L?function(W){return xl.test(W)}(u)?function(W){return W.match(f0)||[]}(u):function(W){return W.match(tn)||[]}(u):u.match(h)||[]}var Ry=bn(function(u,h){try{return xr(u,L,h)}catch(m){return Ca(m)?m:new Dt(m)}}),ow=Xa(function(u,h){return ls(h,function(m){m=dn(m),Ga(u,m,rf(u[m],u))}),u});function ky(u){return function(){return u}}var bN=Du(),Ru=Du(!0);function Os(u){return u}function ku(u){return $M("function"==typeof u?u:us(u,1))}var Fy=bn(function(u,h){return function(m){return ya(m,u,h)}}),aw=bn(function(u,h){return function(m){return ya(u,m,h)}});function Ny(u,h,m){var b=Kr(h),x=Wh(h,b);null==m&&(!Yi(h)||!x.length&&b.length)&&(m=h,h=u,u=this,x=Wh(h,Kr(h)));var P=!(Yi(m)&&"chain"in m&&!m.chain),z=Uo(u);return ls(x,function(H){var X=h[H];u[H]=X,z&&(u.prototype[H]=function(){var ye=this.__chain__;if(P||ye){var ve=u(this.__wrapped__),Oe=ve.__actions__=Ts(this.__actions__);return Oe.push({func:X,args:arguments,thisArg:u}),ve.__chain__=ye,ve}return X.apply(u,ur([this.value()],arguments))})}),u}function Ly(){}var FT=Up(di),NT=Up(un),cw=Up(uo);function Fu(u){return Lo(u)?o_(dn(u)):function(u){return function(h){return Ro(h,u)}}(u)}var LT=H0(),BT=H0(!0);function Pc(){return[]}function Vy(){return!1}var kt=L_(function(u,h){return u+h},0),zy=kd("ceil"),wN=L_(function(u,h){return u/h},1),Ll=kd("floor"),fw=L_(function(u,h){return u*h},1),pw=kd("round"),gw=L_(function(u,h){return u-h},0);return O.after=function(u,h){if("function"!=typeof h)throw new fa(dt);return u=on(u),function(){if(--u<1)return h.apply(this,arguments)}},O.ary=ng,O.assign=sT,O.assignIn=oT,O.assignInWith=Ud,O.assignWith=aT,O.at=$C,O.before=dy,O.bind=rf,O.bindAll=ow,O.bindKey=zd,O.castArray=function(){if(!arguments.length)return[];var u=arguments[0];return Bt(u)?u:[u]},O.chain=ry,O.chunk=function(u,h,m){h=(m?ps(u,h,m):h===L)?1:dr(on(h),0);var b=null==u?0:u.length;if(!b||h<1)return[];for(var x=0,P=0,z=se(Te(b/h));x<b;)z[P++]=Yr(u,x,x+=h);return z},O.compact=function(u){for(var h=-1,m=null==u?0:u.length,b=0,x=[];++h<m;){var P=u[h];P&&(x[b++]=P)}return x},O.concat=function(){var u=arguments.length;if(!u)return[];for(var h=se(u-1),m=arguments[0],b=u;b--;)h[b-1]=arguments[b];return ur(Bt(m)?Ts(m):[m],Wr(h,1))},O.cond=function(u){var h=null==u?0:u.length,m=jt();return u=h?di(u,function(b){if("function"!=typeof b[1])throw new fa(dt);return[m(b[0]),b[1]]}):[],bn(function(b){for(var x=-1;++x<h;){var P=u[x];if(xr(P[0],this,b))return xr(P[1],this,b)}})},O.conforms=function(u){return function(u){var h=Kr(u);return function(m){return Pp(m,u,h)}}(us(u,1))},O.constant=ky,O.countBy=R1,O.create=function(u,h){var m=bu(u);return null==h?m:zM(m,h)},O.curry=function AC(u,h,m){var b=Rl(u,8,L,L,L,L,L,h=m?L:h);return b.placeholder=AC.placeholder,b},O.curryRight=function hy(u,h,m){var b=Rl(u,16,L,L,L,L,L,h=m?L:h);return b.placeholder=hy.placeholder,b},O.debounce=DC,O.defaults=cT,O.defaultsDeep=af,O.defer=H1,O.delay=OC,O.difference=h1,O.differenceBy=f1,O.differenceWith=p1,O.drop=function(u,h,m){var b=null==u?0:u.length;return b?Yr(u,(h=m||h===L?1:on(h))<0?0:h,b):[]},O.dropRight=function(u,h,m){var b=null==u?0:u.length;return b?Yr(u,0,(h=b-(h=m||h===L?1:on(h)))<0?0:h):[]},O.dropRightWhile=function(u,h){return u&&u.length?xu(u,jt(h,3),!0,!0):[]},O.dropWhile=function(u,h){return u&&u.length?xu(u,jt(h,3),!0):[]},O.fill=function(u,h,m,b){var x=null==u?0:u.length;return x?(m&&"number"!=typeof m&&ps(u,h,m)&&(m=0,b=x),function(u,h,m,b){var x=u.length;for((m=on(m))<0&&(m=-m>x?0:x+m),(b=b===L||b>x?x:on(b))<0&&(b+=x),b=m>b?0:by(b);m<b;)u[m++]=h;return u}(u,h,m,b)):[]},O.filter=function(u,h){return(Bt(u)?da:P0)(u,jt(h,3))},O.flatMap=function(u,h){return Wr(Za(u,h),1)},O.flatMapDeep=function(u,h){return Wr(Za(u,h),cn)},O.flatMapDepth=function(u,h,m){return m=m===L?1:on(m),Wr(Za(u,h),m)},O.flatten=Xr,O.flattenDeep=function(u){return null!=u&&u.length?Wr(u,cn):[]},O.flattenDepth=function(u,h){return null!=u&&u.length?Wr(u,h=h===L?1:on(h)):[]},O.flip=function(u){return Rl(u,512)},O.flow=bN,O.flowRight=Ru,O.fromPairs=function(u){for(var h=-1,m=null==u?0:u.length,b={};++h<m;){var x=u[h];b[x[0]]=x[1]}return b},O.functions=function(u){return null==u?[]:Wh(u,Kr(u))},O.functionsIn=function(u){return null==u?[]:Wh(u,Ds(u))},O.groupBy=V1,O.initial=function(u){return null!=u&&u.length?Yr(u,0,-1):[]},O.intersection=sC,O.intersectionBy=_1,O.intersectionWith=oC,O.invert=lg,O.invertBy=dT,O.invokeMap=vC,O.iteratee=ku,O.keyBy=bC,O.keys=Kr,O.keysIn=Ds,O.map=Za,O.mapKeys=function(u,h){var m={};return h=jt(h,3),Wa(u,function(b,x,P){Ga(m,h(b,x,P),b)}),m},O.mapValues=function(u,h){var m={};return h=jt(h,3),Wa(u,function(b,x,P){Ga(m,x,h(b,x,P))}),m},O.matches=function(u){return WM(us(u,1))},O.matchesProperty=function(u,h){return Dd(u,us(h,1))},O.memoize=sf,O.merge=XC,O.mergeWith=KC,O.method=Fy,O.methodOf=aw,O.mixin=Ny,O.negate=py,O.nthArg=function(u){return u=on(u),bn(function(h){return Eu(h,u)})},O.omit=fT,O.omitBy=function(u,h){return ZC(u,py(jt(h)))},O.once=function(u){return dy(2,u)},O.orderBy=function(u,h,m,b){return null==u?[]:(Bt(h)||(h=null==h?[]:[h]),Bt(m=b?L:m)||(m=null==m?[]:[m]),qh(u,h,m))},O.over=FT,O.overArgs=$1,O.overEvery=NT,O.overSome=cw,O.partial=ig,O.partialRight=PC,O.partition=wC,O.pick=pT,O.pickBy=ZC,O.property=Fu,O.propertyOf=function(u){return function(h){return null==u?L:Ro(u,h)}},O.pull=Q_,O.pullAll=J_,O.pullAllBy=function(u,h,m){return u&&u.length&&h&&h.length?Fo(u,h,jt(m,2)):u},O.pullAllWith=function(u,h,m){return u&&u.length&&h&&h.length?Fo(u,h,L,m):u},O.pullAt=lC,O.range=LT,O.rangeRight=BT,O.rearg=G1,O.reject=function(u,h){return(Bt(u)?da:P0)(u,py(jt(h,3)))},O.remove=function(u,h){var m=[];if(!u||!u.length)return m;var b=-1,x=[],P=u.length;for(h=jt(h,3);++b<P;){var z=u[b];h(z,b,u)&&(m.push(z),x.push(b))}return Yh(u,x),m},O.rest=function(u,h){if("function"!=typeof u)throw new fa(dt);return bn(u,h=h===L?h:on(h))},O.reverse=ey,O.sampleSize=function(u,h,m){return h=(m?ps(u,h,m):h===L)?1:on(h),(Bt(u)?A0:ZF)(u,h)},O.set=function(u,h,m){return null==u?u:Np(u,h,m)},O.setWith=function(u,h,m,b){return b="function"==typeof b?b:L,null==u?u:Np(u,h,m,b)},O.shuffle=function(u){return(Bt(u)?wd:R_)(u)},O.slice=function(u,h,m){var b=null==u?0:u.length;return b?(m&&"number"!=typeof m&&ps(u,h,m)?(h=0,m=b):(h=null==h?0:on(h),m=m===L?b:on(m)),Yr(u,h,m)):[]},O.sortBy=tg,O.sortedUniq=function(u){return u&&u.length?N0(u):[]},O.sortedUniqBy=function(u,h){return u&&u.length?N0(u,jt(h,2)):[]},O.split=function(u,h,m){return m&&"number"!=typeof m&&ps(u,h,m)&&(h=m=L),(m=m===L?Ut:m>>>0)?(u=Zn(u))&&("string"==typeof h||null!=h&&!UC(h))&&!(h=go(h))&&Ih(u)?qa(Ua(u),0,m):u.split(h,m):[]},O.spread=function(u,h){if("function"!=typeof u)throw new fa(dt);return h=null==h?0:dr(on(h),0),bn(function(m){var b=m[h],x=qa(m,0,h);return b&&ur(x,b),xr(u,this,x)})},O.tail=function(u){var h=null==u?0:u.length;return h?Yr(u,1,h):[]},O.take=function(u,h,m){return u&&u.length?Yr(u,0,(h=m||h===L?1:on(h))<0?0:h):[]},O.takeRight=function(u,h,m){var b=null==u?0:u.length;return b?Yr(u,(h=b-(h=m||h===L?1:on(h)))<0?0:h,b):[]},O.takeRightWhile=function(u,h){return u&&u.length?xu(u,jt(h,3),!1,!0):[]},O.takeWhile=function(u,h){return u&&u.length?xu(u,jt(h,3)):[]},O.tap=function(u,h){return h(u),u},O.throttle=function(u,h,m){var b=!0,x=!0;if("function"!=typeof u)throw new fa(dt);return Yi(m)&&(b="leading"in m?!!m.leading:b,x="trailing"in m?!!m.trailing:x),DC(u,h,{leading:b,maxWait:h,trailing:x})},O.thru=Bd,O.toArray=jC,O.toPairs=gT,O.toPairsIn=JC,O.toPath=function(u){return Bt(u)?di(u,dn):jo(u)?[u]:Ts(tC(Zn(u)))},O.toPlainObject=HC,O.transform=function(u,h,m){var b=Bt(u),x=b||Ja(u)||of(u);if(h=jt(h,4),null==m){var P=u&&u.constructor;m=x?b?new P:[]:Yi(u)&&Uo(P)?bu(pa(u)):{}}return(x?ls:Wa)(u,function(z,H,X){return h(m,z,H,X)}),m},O.unary=function(u){return ng(u,1)},O.union=dC,O.unionBy=ty,O.unionWith=Qp,O.uniq=function(u){return u&&u.length?Sc(u):[]},O.uniqBy=function(u,h){return u&&u.length?Sc(u,jt(h,2)):[]},O.uniqWith=function(u,h){return h="function"==typeof h?h:L,u&&u.length?Sc(u,L,h):[]},O.unset=function(u,h){return null==u||Su(u,h)},O.unzip=hC,O.unzipWith=O1,O.update=function(u,h,m){return null==u?u:Lp(u,h,F_(m))},O.updateWith=function(u,h,m,b){return b="function"==typeof b?b:L,null==u?u:Lp(u,h,F_(m),b)},O.values=Gd,O.valuesIn=function(u){return null==u?[]:l_(u,Ds(u))},O.without=fC,O.words=Py,O.wrap=function(u,h){return ig(F_(h),u)},O.xor=aN,O.xorBy=_o,O.xorWith=ny,O.zip=iy,O.zipObject=function(u,h){return Bp(u||[],h||[],$a)},O.zipObjectDeep=function(u,h){return Bp(u||[],h||[],Np)},O.zipWith=nf,O.entries=gT,O.entriesIn=JC,O.extend=oT,O.extendWith=Ud,Ny(O,O),O.add=kt,O.attempt=Ry,O.camelCase=bT,O.capitalize=Sy,O.ceil=zy,O.clamp=function(u,h,m){return m===L&&(m=h,h=L),m!==L&&(m=(m=Gs(m))==m?m:0),h!==L&&(h=(h=Gs(h))==h?h:0),Cu(Gs(u),h,m)},O.clone=function(u){return us(u,4)},O.cloneDeep=function(u){return us(u,5)},O.cloneDeepWith=function(u,h){return us(u,5,h="function"==typeof h?h:L)},O.cloneWith=function(u,h){return us(u,4,h="function"==typeof h?h:L)},O.conformsTo=function(u,h){return null==h||Pp(u,h,Kr(h))},O.deburr=xy,O.defaultTo=function(u,h){return null==u||u!=u?h:u},O.divide=wN,O.endsWith=function(u,h,m){u=Zn(u),h=go(h);var b=u.length,x=m=m===L?b:Cu(on(m),0,b);return(m-=h.length)>=0&&u.slice(m,x)==h},O.eq=Ot,O.escape=function(u){return(u=Zn(u))&&Qe.test(u)?u.replace(uu,kF):u},O.escapeRegExp=function(u){return(u=Zn(u))&&Z.test(u)?u.replace(B,"\\$&"):u},O.every=function(u,h,m){var b=Bt(u)?un:O0;return m&&ps(u,h,m)&&(h=L),b(u,jt(h,3))},O.find=N1,O.findIndex=X_,O.findKey=function(u,h){return Dh(u,jt(h,3),Wa)},O.findLast=L1,O.findLastIndex=K_,O.findLastKey=function(u,h){return Dh(u,jt(h,3),Rp)},O.floor=Ll,O.forEach=cy,O.forEachRight=Jp,O.forIn=function(u,h){return null==u?u:Sd(u,jt(h,3),Ds)},O.forInRight=function(u,h){return null==u?u:xd(u,jt(h,3),Ds)},O.forOwn=function(u,h){return u&&Wa(u,jt(h,3))},O.forOwnRight=function(u,h){return u&&Rp(u,jt(h,3))},O.get=cf,O.gt=q,O.gte=FC,O.has=function(u,h){return null!=u&&K0(u,h,Md)},O.hasIn=ag,O.head=iC,O.identity=Os,O.includes=function(u,h,m,b){u=$s(u)?u:Gd(u),m=m&&!b?on(m):0;var x=u.length;return m<0&&(m=dr(x+m,0)),yy(u)?m<=x&&u.indexOf(h,m)>-1:!!x&&za(u,h,m)>-1},O.indexOf=function(u,h,m){var b=null==u?0:u.length;if(!b)return-1;var x=null==m?0:on(m);return x<0&&(x=dr(b+x,0)),za(u,h,x)},O.inRange=function(u,h,m){return h=el(h),m===L?(m=h,h=0):m=el(m),function(u,h,m){return u>=Fr(h,m)&&u<dr(h,m)}(u=Gs(u),h,m)},O.invoke=qC,O.isArguments=Qa,O.isArray=Bt,O.isArrayBuffer=NC,O.isArrayLike=$s,O.isArrayLikeObject=qi,O.isBoolean=function(u){return!0===u||!1===u||Xi(u)&&qr(u)==li},O.isBuffer=Ja,O.isDate=LC,O.isElement=function(u){return Xi(u)&&1===u.nodeType&&!og(u)},O.isEmpty=function(u){if(null==u)return!0;if($s(u)&&(Bt(u)||"string"==typeof u||"function"==typeof u.splice||Ja(u)||of(u)||Qa(u)))return!u.length;var h=fs(u);if(h==Ri||h==kr)return!u.size;if(Yp(u))return!R0(u).length;for(var m in u)if(fi.call(u,m))return!1;return!0},O.isEqual=function(u,h){return kp(u,h)},O.isEqualWith=function(u,h,m){var b=(m="function"==typeof m?m:L)?m(u,h):L;return b===L?kp(u,h,L,m):!!b},O.isError=Ca,O.isFinite=function(u){return"number"==typeof u&&m_(u)},O.isFunction=Uo,O.isInteger=sg,O.isLength=my,O.isMap=eT,O.isMatch=function(u,h){return u===h||D_(u,h,No(h))},O.isMatchWith=function(u,h,m){return m="function"==typeof m?m:L,D_(u,h,No(h),m)},O.isNaN=function(u){return iT(u)&&u!=+u},O.isNative=function(u){if(J0(u))throw new Dt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return O_(u)},O.isNil=function(u){return null==u},O.isNull=function(u){return null===u},O.isNumber=iT,O.isObject=Yi,O.isObjectLike=Xi,O.isPlainObject=og,O.isRegExp=UC,O.isSafeInteger=function(u){return sg(u)&&u>=-jn&&u<=jn},O.isSet=rT,O.isString=yy,O.isSymbol=jo,O.isTypedArray=of,O.isUndefined=function(u){return u===L},O.isWeakMap=function(u){return Xi(u)&&fs(u)==ui},O.isWeakSet=function(u){return Xi(u)&&"[object WeakSet]"==qr(u)},O.join=function(u,h){return null==u?"":Nh.call(u,h)},O.kebabCase=wT,O.last=Bo,O.lastIndexOf=function(u,h,m){var b=null==u?0:u.length;if(!b)return-1;var x=b;return m!==L&&(x=(x=on(m))<0?dr(b+x,0):Fr(x,b-1)),h==h?function(W,he,se){for(var at=se+1;at--;)if(W[at]===he)return at;return at}(u,h,x):gd(u,yc,x,!0)},O.lowerCase=ET,O.lowerFirst=yN,O.lt=Oc,O.lte=vy,O.max=function(u){return u&&u.length?Gh(u,Os,ds):L},O.maxBy=function(u,h){return u&&u.length?Gh(u,jt(h,2),ds):L},O.mean=function(u){return $r(u,Os)},O.meanBy=function(u,h){return $r(u,jt(h,2))},O.min=function(u){return u&&u.length?Gh(u,Os,k0):L},O.minBy=function(u,h){return u&&u.length?Gh(u,jt(h,2),k0):L},O.stubArray=Pc,O.stubFalse=Vy,O.stubObject=function(){return{}},O.stubString=function(){return""},O.stubTrue=function(){return!0},O.multiply=fw,O.nth=function(u,h){return u&&u.length?Eu(u,on(h)):L},O.noConflict=function(){return Xn._===this&&(Xn._=p_),this},O.noop=Ly,O.now=Pu,O.pad=function(u,h,m){u=Zn(u);var b=(h=on(h))?Ph(u):0;if(!h||b>=h)return u;var x=(h-b)/2;return jp(Tn(x),m)+u+jp(Te(x),m)},O.padEnd=function(u,h,m){u=Zn(u);var b=(h=on(h))?Ph(u):0;return h&&b<h?u+jp(h-b,m):u},O.padStart=function(u,h,m){u=Zn(u);var b=(h=on(h))?Ph(u):0;return h&&b<h?jp(h-b,m)+u:u},O.parseInt=function(u,h,m){return m||null==h?h=0:h&&(h=+h),DM(Zn(u).replace($,""),h||0)},O.random=function(u,h,m){if(m&&"boolean"!=typeof m&&ps(u,h,m)&&(h=m=L),m===L&&("boolean"==typeof h?(m=h,h=L):"boolean"==typeof u&&(m=u,u=L)),u===L&&h===L?(u=0,h=1):(u=el(u),h===L?(h=u,u=0):h=el(h)),u>h){var b=u;u=h,h=b}if(m||u%1||h%1){var x=Lh();return Fr(u+x*(h-u+_M("1e-"+((x+"").length-1))),h)}return Ol(u,h)},O.reduce=function(u,h,m){var b=Bt(u)?mu:Io,x=arguments.length<3;return b(u,jt(h,4),m,x,wc)},O.reduceRight=function(u,h,m){var b=Bt(u)?pd:Io,x=arguments.length<3;return b(u,jt(h,4),m,x,T_)},O.repeat=function(u,h,m){return h=(m?ps(u,h,m):h===L)?1:on(h),Fp(Zn(u),h)},O.replace=function(){var u=arguments,h=Zn(u[0]);return u.length<3?h:h.replace(u[1],u[2])},O.result=function(u,h,m){var b=-1,x=(h=Mc(h,u)).length;for(x||(x=1,u=L);++b<x;){var P=null==u?L:u[dn(h[b])];P===L&&(b=x,P=m),u=Uo(P)?P.call(u):P}return u},O.round=pw,O.runInContext=W,O.sample=function(u){return(Bt(u)?E_:qM)(u)},O.size=function(u){if(null==u)return 0;if($s(u))return yy(u)?Ph(u):u.length;var h=fs(u);return h==Ri||h==kr?u.size:R0(u).length},O.snakeCase=AT,O.some=function(u,h,m){var b=Bt(u)?uo:QF;return m&&ps(u,h,m)&&(h=L),b(u,jt(h,3))},O.sortedIndex=function(u,h){return Xh(u,h)},O.sortedIndexBy=function(u,h,m){return k_(u,h,jt(m,2))},O.sortedIndexOf=function(u,h){var m=null==u?0:u.length;if(m){var b=Xh(u,h);if(b<m&&Ot(u[b],h))return b}return-1},O.sortedLastIndex=function(u,h){return Xh(u,h,!0)},O.sortedLastIndexBy=function(u,h,m){return k_(u,h,jt(m,2),!0)},O.sortedLastIndexOf=function(u,h){if(null!=u&&u.length){var b=Xh(u,h,!0)-1;if(Ot(u[b],h))return b}return-1},O.startCase=Ay,O.startsWith=function(u,h,m){return u=Zn(u),m=null==m?0:Cu(on(m),0,u.length),h=go(h),u.slice(m,m+h.length)==h},O.subtract=gw,O.sum=function(u){return u&&u.length?md(u,Os):0},O.sumBy=function(u,h){return u&&u.length?md(u,jt(h,2)):0},O.template=function(u,h,m){var b=O.templateSettings;m&&ps(u,h,m)&&(h=L),u=Zn(u),h=Ud({},h,b,G0);var H,X,x=Ud({},h.imports,b.imports,G0),P=Kr(x),z=l_(x,P),ye=0,ve=h.interpolate||lo,Oe="__p += '",Je=h_((h.escape||lo).source+"|"+ve.source+"|"+(ve===Y?bt:lo).source+"|"+(h.evaluate||lo).source+"|$","g"),Ct="//# sourceURL="+(fi.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mM+"]")+"\n";u.replace(Je,function(Yt,wn,Rn,Ws,gs,Ho){return Rn||(Rn=Ws),Oe+=u.slice(ye,Ho).replace(ud,FF),wn&&(H=!0,Oe+="' +\n__e("+wn+") +\n'"),gs&&(X=!0,Oe+="';\n"+gs+";\n__p += '"),Rn&&(Oe+="' +\n((__t = ("+Rn+")) == null ? '' : __t) +\n'"),ye=Ho+Yt.length,Yt}),Oe+="';\n";var Gt=fi.call(h,"variable")&&h.variable;if(Gt){if(xn.test(Gt))throw new Dt("Invalid `variable` option passed into `_.template`")}else Oe="with (obj) {\n"+Oe+"\n}\n";Oe=(X?Oe.replace(cu,""):Oe).replace(Cl,"$1").replace(fc,"$1;"),Oe="function("+(Gt||"obj")+") {\n"+(Gt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(H?", __e = _.escape":"")+(X?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Oe+"return __p\n}";var Cn=Ry(function(){return Hn(P,Ct+"return "+Oe).apply(L,z)});if(Cn.source=Oe,Ca(Cn))throw Cn;return Cn},O.times=function(u,h){if((u=on(u))<1||u>jn)return[];var m=Ut,b=Fr(u,Ut);h=jt(h),u-=Ut;for(var x=_d(b,h);++m<u;)h(m);return x},O.toFinite=el,O.toInteger=on,O.toLength=by,O.toLower=function(u){return Zn(u).toLowerCase()},O.toNumber=Gs,O.toSafeInteger=function(u){return u?Cu(on(u),-jn,jn):0===u?u:0},O.toString=Zn,O.toUpper=function(u){return Zn(u).toUpperCase()},O.trim=function(u,h,m){if((u=Zn(u))&&(m||h===L))return y0(u);if(!u||!(h=go(h)))return u;var b=Ua(u),x=Ua(h);return qa(b,bM(b,x),CM(b,x)+1).join("")},O.trimEnd=function(u,h,m){if((u=Zn(u))&&(m||h===L))return u.slice(0,vc(u)+1);if(!u||!(h=go(h)))return u;var b=Ua(u);return qa(b,0,CM(b,Ua(h))+1).join("")},O.trimStart=function(u,h,m){if((u=Zn(u))&&(m||h===L))return u.replace($,"");if(!u||!(h=go(h)))return u;var b=Ua(u);return qa(b,bM(b,Ua(h))).join("")},O.truncate=function(u,h){var m=30,b="...";if(Yi(h)){var x="separator"in h?h.separator:x;m="length"in h?on(h.length):m,b="omission"in h?go(h.omission):b}var P=(u=Zn(u)).length;if(Ih(u)){var z=Ua(u);P=z.length}if(m>=P)return u;var H=m-Ph(b);if(H<1)return b;var X=z?qa(z,0,H).join(""):u.slice(0,H);if(x===L)return X+b;if(z&&(H+=X.length-H),UC(x)){if(u.slice(H).search(x)){var ye,ve=X;for(x.global||(x=h_(x.source,Zn(nn.exec(x))+"g")),x.lastIndex=0;ye=x.exec(ve);)var Oe=ye.index;X=X.slice(0,Oe===L?H:Oe)}}else if(u.indexOf(go(x),H)!=H){var Je=X.lastIndexOf(x);Je>-1&&(X=X.slice(0,Je))}return X+b},O.unescape=function(u){return(u=Zn(u))&&Vs.test(u)?u.replace(cd,d_):u},O.uniqueId=function(u){var h=++UF;return Zn(u)+h},O.upperCase=sw,O.upperFirst=ug,O.each=cy,O.eachRight=Jp,O.first=iC,Ny(O,function(){var u={};return Wa(O,function(h,m){fi.call(O.prototype,m)||(u[m]=h)}),u}(),{chain:!1}),O.VERSION="4.17.21",ls(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){O[u].placeholder=O}),ls(["drop","take"],function(u,h){vn.prototype[u]=function(m){m=m===L?1:dr(on(m),0);var b=this.__filtered__&&!h?new vn(this):this.clone();return b.__filtered__?b.__takeCount__=Fr(m,b.__takeCount__):b.__views__.push({size:Fr(m,Ut),type:u+(b.__dir__<0?"Right":"")}),b},vn.prototype[u+"Right"]=function(m){return this.reverse()[u](m).reverse()}}),ls(["filter","map","takeWhile"],function(u,h){var m=h+1,b=1==m||3==m;vn.prototype[u]=function(x){var P=this.clone();return P.__iteratees__.push({iteratee:jt(x,3),type:m}),P.__filtered__=P.__filtered__||b,P}}),ls(["head","last"],function(u,h){var m="take"+(h?"Right":"");vn.prototype[u]=function(){return this[m](1).value()[0]}}),ls(["initial","tail"],function(u,h){var m="drop"+(h?"":"Right");vn.prototype[u]=function(){return this.__filtered__?new vn(this):this[m](1)}}),vn.prototype.compact=function(){return this.filter(Os)},vn.prototype.find=function(u){return this.filter(u).head()},vn.prototype.findLast=function(u){return this.reverse().find(u)},vn.prototype.invokeMap=bn(function(u,h){return"function"==typeof u?new vn(this):this.map(function(m){return ya(m,u,h)})}),vn.prototype.reject=function(u){return this.filter(py(jt(u)))},vn.prototype.slice=function(u,h){u=on(u);var m=this;return m.__filtered__&&(u>0||h<0)?new vn(m):(u<0?m=m.takeRight(-u):u&&(m=m.drop(u)),h!==L&&(m=(h=on(h))<0?m.dropRight(-h):m.take(h-u)),m)},vn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},vn.prototype.toArray=function(){return this.take(Ut)},Wa(vn.prototype,function(u,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),x=O[b?"take"+("last"==h?"Right":""):h],P=b||/^find/.test(h);!x||(O.prototype[h]=function(){var z=this.__wrapped__,H=b?[1]:arguments,X=z instanceof vn,ye=H[0],ve=X||Bt(z),Oe=function(wn){var Rn=x.apply(O,ur([wn],H));return b&&Je?Rn[0]:Rn};ve&&m&&"function"==typeof ye&&1!=ye.length&&(X=ve=!1);var Je=this.__chain__,Ct=!!this.__actions__.length,Gt=P&&!Je,Cn=X&&!Ct;if(!P&&ve){z=Cn?z:new vn(this);var Yt=u.apply(z,H);return Yt.__actions__.push({func:Bd,args:[Oe],thisArg:L}),new fo(Yt,Je)}return Gt&&Cn?u.apply(this,H):(Yt=this.thru(Oe),Gt?b?Yt.value()[0]:Yt.value():Yt)})}),ls(["pop","push","shift","sort","splice","unshift"],function(u){var h=Ti[u],m=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",b=/^(?:pop|shift)$/.test(u);O.prototype[u]=function(){var x=arguments;if(b&&!this.__chain__){var P=this.value();return h.apply(Bt(P)?P:[],x)}return this[m](function(z){return h.apply(Bt(z)?z:[],x)})}}),Wa(vn.prototype,function(u,h){var m=O[h];if(m){var b=m.name+"";fi.call(bd,b)||(bd[b]=[]),bd[b].push({name:h,func:m})}}),bd[Ac(L,2).name]=[{name:"wrapper",func:L}],vn.prototype.clone=function(){var u=new vn(this.__wrapped__);return u.__actions__=Ts(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Ts(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Ts(this.__views__),u},vn.prototype.reverse=function(){if(this.__filtered__){var u=new vn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},vn.prototype.value=function(){var u=this.__wrapped__.value(),h=this.__dir__,m=Bt(u),b=h<0,x=m?u.length:0,P=function(u,h,m){for(var b=-1,x=m.length;++b<x;){var P=m[b],z=P.size;switch(P.type){case"drop":u+=z;break;case"dropRight":h-=z;break;case"take":h=Fr(h,u+z);break;case"takeRight":u=dr(u,h-z)}}return{start:u,end:h}}(0,x,this.__views__),z=P.start,H=P.end,X=H-z,ye=b?H:z-1,ve=this.__iteratees__,Oe=ve.length,Je=0,Ct=Fr(X,this.__takeCount__);if(!m||!b&&x==X&&Ct==X)return YM(u,this.__actions__);var Gt=[];e:for(;X--&&Je<Ct;){for(var Cn=-1,Yt=u[ye+=h];++Cn<Oe;){var wn=ve[Cn],Ws=wn.type,gs=(0,wn.iteratee)(Yt);if(2==Ws)Yt=gs;else if(!gs){if(1==Ws)continue e;break e}}Gt[Je++]=Yt}return Gt},O.prototype.at=sy,O.prototype.chain=function(){return ry(this)},O.prototype.commit=function(){return new fo(this.value(),this.__chain__)},O.prototype.next=function(){this.__values__===L&&(this.__values__=jC(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?L:this.__values__[this.__index__++]}},O.prototype.plant=function(u){for(var h,m=this;m instanceof Uh;){var b=Jh(m);b.__index__=0,b.__values__=L,h?x.__wrapped__=b:h=b;var x=b;m=m.__wrapped__}return x.__wrapped__=u,h},O.prototype.reverse=function(){var u=this.__wrapped__;if(u instanceof vn){var h=u;return this.__actions__.length&&(h=new vn(this)),(h=h.reverse()).__actions__.push({func:Bd,args:[ey],thisArg:L}),new fo(h,this.__chain__)}return this.thru(ey)},O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=function(){return YM(this.__wrapped__,this.__actions__)},O.prototype.first=O.prototype.head,Fh&&(O.prototype[Fh]=function(){return this}),O}();Xn._=Rh,(yt=function(){return Rh}.call(We,Be,We,pt))!==L&&(pt.exports=yt)}.call(this)},478:function(pt){pt.exports=function(){"use strict";function We(G,Y){for(var J=0;J<Y.length;J++){var T=Y[J];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(G,T.key,T)}}function L(G,Y){(null==Y||Y>G.length)&&(Y=G.length);for(var J=0,T=new Array(Y);J<Y;J++)T[J]=G[J];return T}function Tt(G,Y){var J="undefined"!=typeof Symbol&&G[Symbol.iterator]||G["@@iterator"];if(J)return(J=J.call(G)).next.bind(J);if(Array.isArray(G)||(J=function(G,Y){if(G){if("string"==typeof G)return L(G,Y);var J=Object.prototype.toString.call(G).slice(8,-1);if("Object"===J&&G.constructor&&(J=G.constructor.name),"Map"===J||"Set"===J)return Array.from(G);if("Arguments"===J||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return L(G,Y)}}(G))||Y&&G&&"number"==typeof G.length){J&&(G=J);var T=0;return function(){return T>=G.length?{done:!0}:{done:!1,value:G[T++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var At={exports:{}};function Ke(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}At.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Ke,changeDefaults:function(G){At.exports.defaults=G}};var Ze=/[&<>"']/,St=/[&<>"']/g,Rt=/[<>"']|&(?!#?\w+;)/,be=/[<>"']|&(?!#?\w+;)/g,me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ie=function(Y){return me[Y]};var Se=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Vt(G){return G.replace(Se,function(Y,J){return"colon"===(J=J.toLowerCase())?":":"#"===J.charAt(0)?"x"===J.charAt(1)?String.fromCharCode(parseInt(J.substring(2),16)):String.fromCharCode(+J.substring(1)):""})}var je=/(^|[^\[])\^/g;var Et=/[^\w:]/g,Qt=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var Ci={},yi=/^[^:]+:\/*[^/]*$/,vi=/^([^:]+:)[\s\S]*$/,wr=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Ne(G,Y){Ci[" "+G]||(Ci[" "+G]=yi.test(G)?G+"/":Kt(G,"/",!0));var J=-1===(G=Ci[" "+G]).indexOf(":");return"//"===Y.substring(0,2)?J?Y:G.replace(vi,"$1")+Y:"/"===Y.charAt(0)?J?Y:G.replace(wr,"$1")+Y:G+Y}function Kt(G,Y,J){var T=G.length;if(0===T)return"";for(var D=0;D<T;){var B=G.charAt(T-D-1);if(B!==Y||J){if(B===Y||!J)break;D++}else D++}return G.substr(0,T-D)}var cn_escape=function(G,Y){if(Y){if(Ze.test(G))return G.replace(St,Ie)}else if(Rt.test(G))return G.replace(be,Ie);return G},cn_unescape=Vt,cn_edit=function(G,Y){G=G.source||G,Y=Y||"";var J={replace:function(D,B){return B=(B=B.source||B).replace(je,"$1"),G=G.replace(D,B),J},getRegex:function(){return new RegExp(G,Y)}};return J},cn_cleanUrl=function(G,Y,J){if(G){var T;try{T=decodeURIComponent(Vt(J)).replace(Et,"").toLowerCase()}catch(D){return null}if(0===T.indexOf("javascript:")||0===T.indexOf("vbscript:")||0===T.indexOf("data:"))return null}Y&&!Qt.test(J)&&(J=Ne(Y,J));try{J=encodeURI(J).replace(/%25/g,"%")}catch(D){return null}return J},cn_noopTest={exec:function(){}},cn_merge=function(G){for(var J,T,Y=1;Y<arguments.length;Y++)for(T in J=arguments[Y])Object.prototype.hasOwnProperty.call(J,T)&&(G[T]=J[T]);return G},cn_checkSanitizeDeprecation=function(G){G&&G.sanitize&&!G.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},cn_repeatString=function(G,Y){if(Y<1)return"";for(var J="";Y>1;)1&Y&&(J+=G),Y>>=1,G+=G;return J+G},jn=At.exports.defaults,Me=Kt,Ii=function(G,Y){var T=G.replace(/\|/g,function(B,Z,$){for(var ae=!1,de=Z;--de>=0&&"\\"===$[de];)ae=!ae;return ae?"|":" |"}).split(/ \|/),D=0;if(T.length>Y)T.splice(Y);else for(;T.length<Y;)T.push("");for(;D<T.length;D++)T[D]=T[D].trim().replace(/\\\|/g,"|");return T},Ut=cn_escape,Er=function(G,Y){if(-1===G.indexOf(Y[1]))return-1;for(var J=G.length,T=0,D=0;D<J;D++)if("\\"===G[D])D++;else if(G[D]===Y[0])T++;else if(G[D]===Y[1]&&--T<0)return D;return-1};function rs(G,Y,J){var T=Y.href,D=Y.title?Ut(Y.title):null,B=G[1].replace(/\\([\[\]])/g,"$1");return"!"!==G[0].charAt(0)?{type:"link",raw:J,href:T,title:D,text:B}:{type:"image",raw:J,href:T,title:D,text:Ut(B)}}var ss=function(){function G(J){this.options=J||jn}var Y=G.prototype;return Y.space=function(T){var D=this.rules.block.newline.exec(T);if(D)return D[0].length>1?{type:"space",raw:D[0]}:{raw:"\n"}},Y.code=function(T){var D=this.rules.block.code.exec(T);if(D){var B=D[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:D[0],codeBlockStyle:"indented",text:this.options.pedantic?B:Me(B,"\n")}}},Y.fences=function(T){var D=this.rules.block.fences.exec(T);if(D){var B=D[0],Z=function(G,Y){var J=G.match(/^(\s+)(?:```)/);if(null===J)return Y;var T=J[1];return Y.split("\n").map(function(D){var B=D.match(/^\s+/);return null===B?D:B[0].length>=T.length?D.slice(T.length):D}).join("\n")}(B,D[3]||"");return{type:"code",raw:B,lang:D[2]?D[2].trim():D[2],text:Z}}},Y.heading=function(T){var D=this.rules.block.heading.exec(T);if(D){var B=D[2].trim();if(/#$/.test(B)){var Z=Me(B,"#");(this.options.pedantic||!Z||/ $/.test(Z))&&(B=Z.trim())}return{type:"heading",raw:D[0],depth:D[1].length,text:B}}},Y.nptable=function(T){var D=this.rules.block.nptable.exec(T);if(D){var B={type:"table",header:Ii(D[1].replace(/^ *| *\| *$/g,"")),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:D[3]?D[3].replace(/\n$/,"").split("\n"):[],raw:D[0]};if(B.header.length===B.align.length){var $,Z=B.align.length;for($=0;$<Z;$++)B.align[$]=/^ *-+: *$/.test(B.align[$])?"right":/^ *:-+: *$/.test(B.align[$])?"center":/^ *:-+ *$/.test(B.align[$])?"left":null;for(Z=B.cells.length,$=0;$<Z;$++)B.cells[$]=Ii(B.cells[$],B.header.length);return B}}},Y.hr=function(T){var D=this.rules.block.hr.exec(T);if(D)return{type:"hr",raw:D[0]}},Y.blockquote=function(T){var D=this.rules.block.blockquote.exec(T);if(D){var B=D[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:D[0],text:B}}},Y.list=function(T){var D=this.rules.block.list.exec(T);if(D){var Ge,tn,xn,Wt,bt,nn,ni,ji,Hi,B=D[0],Z=D[2],$=Z.length>1,ae={type:"list",raw:B,ordered:$,start:$?+Z.slice(0,-1):"",loose:!1,items:[]},de=D[0].match(this.rules.block.item),fe=!1,fn=de.length;xn=this.rules.block.listItemStart.exec(de[0]);for(var bi=0;bi<fn;bi++){if(B=Ge=de[bi],this.options.pedantic||(Hi=Ge.match(new RegExp("\\n\\s*\\n {0,"+(xn[0].length-1)+"}\\S")))&&(bt=Ge.length-Hi.index+de.slice(bi+1).join("\n").length,ae.raw=ae.raw.substring(0,ae.raw.length-bt),B=Ge=Ge.substring(0,Hi.index),fn=bi+1),bi!==fn-1){if(Wt=this.rules.block.listItemStart.exec(de[bi+1]),this.options.pedantic?Wt[1].length>xn[1].length:Wt[1].length>=xn[0].length||Wt[1].length>3){de.splice(bi,2,de[bi]+(!this.options.pedantic&&Wt[1].length<xn[0].length&&!de[bi].match(/\n$/)?"":"\n")+de[bi+1]),bi--,fn--;continue}(!this.options.pedantic||this.options.smartLists?Wt[2][Wt[2].length-1]!==Z[Z.length-1]:$===(1===Wt[2].length))&&(bt=de.slice(bi+1).join("\n").length,ae.raw=ae.raw.substring(0,ae.raw.length-bt),bi=fn-1),xn=Wt}tn=Ge.length,~(Ge=Ge.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(tn-=Ge.length,Ge=Ge.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+tn+"}","gm"),"")),Ge=Me(Ge,"\n"),bi!==fn-1&&(B+="\n"),nn=fe||/\n\n(?!\s*$)/.test(B),bi!==fn-1&&(fe="\n\n"===B.slice(-2),nn||(nn=fe)),nn&&(ae.loose=!0),this.options.gfm&&(ji=void 0,(ni=/^\[[ xX]\] /.test(Ge))&&(ji=" "!==Ge[1],Ge=Ge.replace(/^\[[ xX]\] +/,""))),ae.items.push({type:"list_item",raw:B,task:ni,checked:ji,loose:nn,text:Ge})}return ae}},Y.html=function(T){var D=this.rules.block.html.exec(T);if(D)return{type:this.options.sanitize?"paragraph":"html",raw:D[0],pre:!this.options.sanitizer&&("pre"===D[1]||"script"===D[1]||"style"===D[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(D[0]):Ut(D[0]):D[0]}},Y.def=function(T){var D=this.rules.block.def.exec(T);if(D)return D[3]&&(D[3]=D[3].substring(1,D[3].length-1)),{type:"def",tag:D[1].toLowerCase().replace(/\s+/g," "),raw:D[0],href:D[2],title:D[3]}},Y.table=function(T){var D=this.rules.block.table.exec(T);if(D){var B={type:"table",header:Ii(D[1].replace(/^ *| *\| *$/g,"")),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:D[3]?D[3].replace(/\n$/,"").split("\n"):[]};if(B.header.length===B.align.length){B.raw=D[0];var $,Z=B.align.length;for($=0;$<Z;$++)B.align[$]=/^ *-+: *$/.test(B.align[$])?"right":/^ *:-+: *$/.test(B.align[$])?"center":/^ *:-+ *$/.test(B.align[$])?"left":null;for(Z=B.cells.length,$=0;$<Z;$++)B.cells[$]=Ii(B.cells[$].replace(/^ *\| *| *\| *$/g,""),B.header.length);return B}}},Y.lheading=function(T){var D=this.rules.block.lheading.exec(T);if(D)return{type:"heading",raw:D[0],depth:"="===D[2].charAt(0)?1:2,text:D[1]}},Y.paragraph=function(T){var D=this.rules.block.paragraph.exec(T);if(D)return{type:"paragraph",raw:D[0],text:"\n"===D[1].charAt(D[1].length-1)?D[1].slice(0,-1):D[1]}},Y.text=function(T){var D=this.rules.block.text.exec(T);if(D)return{type:"text",raw:D[0],text:D[0]}},Y.escape=function(T){var D=this.rules.inline.escape.exec(T);if(D)return{type:"escape",raw:D[0],text:Ut(D[1])}},Y.tag=function(T,D,B){var Z=this.rules.inline.tag.exec(T);if(Z)return!D&&/^<a /i.test(Z[0])?D=!0:D&&/^<\/a>/i.test(Z[0])&&(D=!1),!B&&/^<(pre|code|kbd|script)(\s|>)/i.test(Z[0])?B=!0:B&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Z[0])&&(B=!1),{type:this.options.sanitize?"text":"html",raw:Z[0],inLink:D,inRawBlock:B,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Z[0]):Ut(Z[0]):Z[0]}},Y.link=function(T){var D=this.rules.inline.link.exec(T);if(D){var B=D[2].trim();if(!this.options.pedantic&&/^</.test(B)){if(!/>$/.test(B))return;var Z=Me(B.slice(0,-1),"\\");if((B.length-Z.length)%2==0)return}else{var $=Er(D[2],"()");if($>-1){var de=(0===D[0].indexOf("!")?5:4)+D[1].length+$;D[2]=D[2].substring(0,$),D[0]=D[0].substring(0,de).trim(),D[3]=""}}var fe=D[2],Ge="";if(this.options.pedantic){var tn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(fe);tn&&(fe=tn[1],Ge=tn[3])}else Ge=D[3]?D[3].slice(1,-1):"";return fe=fe.trim(),/^</.test(fe)&&(fe=this.options.pedantic&&!/>$/.test(B)?fe.slice(1):fe.slice(1,-1)),rs(D,{href:fe&&fe.replace(this.rules.inline._escapes,"$1"),title:Ge&&Ge.replace(this.rules.inline._escapes,"$1")},D[0])}},Y.reflink=function(T,D){var B;if((B=this.rules.inline.reflink.exec(T))||(B=this.rules.inline.nolink.exec(T))){var Z=(B[2]||B[1]).replace(/\s+/g," ");if(!(Z=D[Z.toLowerCase()])||!Z.href){var $=B[0].charAt(0);return{type:"text",raw:$,text:$}}return rs(B,Z,B[0])}},Y.emStrong=function(T,D,B){void 0===B&&(B="");var Z=this.rules.inline.emStrong.lDelim.exec(T);if(Z&&(!Z[3]||!B.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var $=Z[1]||Z[2]||"";if(!$||$&&(""===B||this.rules.inline.punctuation.exec(B))){var de,fe,ae=Z[0].length-1,Ge=ae,tn=0,xn="*"===Z[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(xn.lastIndex=0,D=D.slice(-1*T.length+ae);null!=(Z=xn.exec(D));)if(de=Z[1]||Z[2]||Z[3]||Z[4]||Z[5]||Z[6]){if(fe=de.length,Z[3]||Z[4]){Ge+=fe;continue}if((Z[5]||Z[6])&&ae%3&&!((ae+fe)%3)){tn+=fe;continue}if(!((Ge-=fe)>0))return fe=Math.min(fe,fe+Ge+tn),Math.min(ae,fe)%2?{type:"em",raw:T.slice(0,ae+Z.index+fe+1),text:T.slice(1,ae+Z.index+fe)}:{type:"strong",raw:T.slice(0,ae+Z.index+fe+1),text:T.slice(2,ae+Z.index+fe-1)}}}}},Y.codespan=function(T){var D=this.rules.inline.code.exec(T);if(D){var B=D[2].replace(/\n/g," "),Z=/[^ ]/.test(B),$=/^ /.test(B)&&/ $/.test(B);return Z&&$&&(B=B.substring(1,B.length-1)),B=Ut(B,!0),{type:"codespan",raw:D[0],text:B}}},Y.br=function(T){var D=this.rules.inline.br.exec(T);if(D)return{type:"br",raw:D[0]}},Y.del=function(T){var D=this.rules.inline.del.exec(T);if(D)return{type:"del",raw:D[0],text:D[2]}},Y.autolink=function(T,D){var Z,$,B=this.rules.inline.autolink.exec(T);if(B)return $="@"===B[2]?"mailto:"+(Z=Ut(this.options.mangle?D(B[1]):B[1])):Z=Ut(B[1]),{type:"link",raw:B[0],text:Z,href:$,tokens:[{type:"text",raw:Z,text:Z}]}},Y.url=function(T,D){var B;if(B=this.rules.inline.url.exec(T)){var Z,$;if("@"===B[2])$="mailto:"+(Z=Ut(this.options.mangle?D(B[0]):B[0]));else{var ae;do{ae=B[0],B[0]=this.rules.inline._backpedal.exec(B[0])[0]}while(ae!==B[0]);Z=Ut(B[0]),$="www."===B[1]?"http://"+Z:Z}return{type:"link",raw:B[0],text:Z,href:$,tokens:[{type:"text",raw:Z,text:Z}]}}},Y.inlineText=function(T,D,B){var $,Z=this.rules.inline.text.exec(T);if(Z)return $=D?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Z[0]):Ut(Z[0]):Z[0]:Ut(this.options.smartypants?B(Z[0]):Z[0]),{type:"text",raw:Z[0],text:$}},G}(),sa=cn_noopTest,Yn=cn_edit,li=cn_merge,ht={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:sa,table:sa,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ht.def=Yn(ht.def).replace("label",ht._label).replace("title",ht._title).getRegex(),ht.bullet=/(?:[*+-]|\d{1,9}[.)])/,ht.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,ht.item=Yn(ht.item,"gm").replace(/bull/g,ht.bullet).getRegex(),ht.listItemStart=Yn(/^( *)(bull) */).replace("bull",ht.bullet).getRegex(),ht.list=Yn(ht.list).replace(/bull/g,ht.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ht.def.source+")").getRegex(),ht._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ht._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ht.html=Yn(ht.html,"i").replace("comment",ht._comment).replace("tag",ht._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ht.paragraph=Yn(ht._paragraph).replace("hr",ht.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ht._tag).getRegex(),ht.blockquote=Yn(ht.blockquote).replace("paragraph",ht.paragraph).getRegex(),ht.normal=li({},ht),ht.gfm=li({},ht.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ht.gfm.nptable=Yn(ht.gfm.nptable).replace("hr",ht.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ht._tag).getRegex(),ht.gfm.table=Yn(ht.gfm.table).replace("hr",ht.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ht._tag).getRegex(),ht.pedantic=li({},ht.normal,{html:Yn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ht._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sa,paragraph:Yn(ht.normal._paragraph).replace("hr",ht.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ht.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Ye={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:sa,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:sa,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Ye.punctuation=Yn(Ye.punctuation).replace(/punctuation/g,Ye._punctuation).getRegex(),Ye.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ye.escapedEmSt=/\\\*|\\_/g,Ye._comment=Yn(ht._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ye.emStrong.lDelim=Yn(Ye.emStrong.lDelim).replace(/punct/g,Ye._punctuation).getRegex(),Ye.emStrong.rDelimAst=Yn(Ye.emStrong.rDelimAst,"g").replace(/punct/g,Ye._punctuation).getRegex(),Ye.emStrong.rDelimUnd=Yn(Ye.emStrong.rDelimUnd,"g").replace(/punct/g,Ye._punctuation).getRegex(),Ye._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ye._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ye._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ye.autolink=Yn(Ye.autolink).replace("scheme",Ye._scheme).replace("email",Ye._email).getRegex(),Ye._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ye.tag=Yn(Ye.tag).replace("comment",Ye._comment).replace("attribute",Ye._attribute).getRegex(),Ye._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ye._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ye._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ye.link=Yn(Ye.link).replace("label",Ye._label).replace("href",Ye._href).replace("title",Ye._title).getRegex(),Ye.reflink=Yn(Ye.reflink).replace("label",Ye._label).getRegex(),Ye.reflinkSearch=Yn(Ye.reflinkSearch,"g").replace("reflink",Ye.reflink).replace("nolink",Ye.nolink).getRegex(),Ye.normal=li({},Ye),Ye.pedantic=li({},Ye.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Yn(/^!?\[(label)\]\((.*?)\)/).replace("label",Ye._label).getRegex(),reflink:Yn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ye._label).getRegex()}),Ye.gfm=li({},Ye.normal,{escape:Yn(Ye.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ye.gfm.url=Yn(Ye.gfm.url,"i").replace("email",Ye.gfm._extended_email).getRegex(),Ye.breaks=li({},Ye.gfm,{br:Yn(Ye.br).replace("{2,}","*").getRegex(),text:Yn(Ye.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Pi={block:ht,inline:Ye},oa=ss,ka=At.exports.defaults,Ri=Pi.block,Ur=Pi.inline,Fa=cn_repeatString;function tr(G){return G.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ro(G){var J,T,Y="",D=G.length;for(J=0;J<D;J++)T=G.charCodeAt(J),Math.random()>.5&&(T="x"+T.toString(16)),Y+="&#"+T+";";return Y}var ci=function(){function G(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||ka,this.options.tokenizer=this.options.tokenizer||new oa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var T={block:Ri.normal,inline:Ur.normal};this.options.pedantic?(T.block=Ri.pedantic,T.inline=Ur.pedantic):this.options.gfm&&(T.block=Ri.gfm,T.inline=this.options.breaks?Ur.breaks:Ur.gfm),this.tokenizer.rules=T}G.lex=function(T,D){return new G(D).lex(T)},G.lexInline=function(T,D){return new G(D).inlineTokens(T)};var Y=G.prototype;return Y.lex=function(T){return T=T.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(T,this.tokens,!0),this.inline(this.tokens),this.tokens},Y.blockTokens=function(T,D,B){var $,ae,de,fe,Ge,tn,Z=this;for(void 0===D&&(D=[]),void 0===B&&(B=!0),this.options.pedantic&&(T=T.replace(/^ +$/gm,""));T;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Wt){return!!($=Wt.call(Z,T,D))&&(T=T.substring($.raw.length),D.push($),!0)}))){if($=this.tokenizer.space(T)){T=T.substring($.raw.length),$.type&&D.push($);continue}if($=this.tokenizer.code(T)){T=T.substring($.raw.length),(fe=D[D.length-1])&&"paragraph"===fe.type?(fe.raw+="\n"+$.raw,fe.text+="\n"+$.text):D.push($);continue}if($=this.tokenizer.fences(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.heading(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.nptable(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.hr(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.blockquote(T)){T=T.substring($.raw.length),$.tokens=this.blockTokens($.text,[],B),D.push($);continue}if($=this.tokenizer.list(T)){for(T=T.substring($.raw.length),de=$.items.length,ae=0;ae<de;ae++)$.items[ae].tokens=this.blockTokens($.items[ae].text,[],!1);D.push($);continue}if($=this.tokenizer.html(T)){T=T.substring($.raw.length),D.push($);continue}if(B&&($=this.tokenizer.def(T))){T=T.substring($.raw.length),this.tokens.links[$.tag]||(this.tokens.links[$.tag]={href:$.href,title:$.title});continue}if($=this.tokenizer.table(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.lheading(T)){T=T.substring($.raw.length),D.push($);continue}if(Ge=T,this.options.extensions&&this.options.extensions.startBlock&&function(){var Wt=1/0,bt=T.slice(1),nn=void 0;Z.options.extensions.startBlock.forEach(function(ni){"number"==typeof(nn=ni.call(this,bt))&&nn>=0&&(Wt=Math.min(Wt,nn))}),Wt<1/0&&Wt>=0&&(Ge=T.substring(0,Wt+1))}(),B&&($=this.tokenizer.paragraph(Ge))){fe=D[D.length-1],tn&&"paragraph"===fe.type?(fe.raw+="\n"+$.raw,fe.text+="\n"+$.text):D.push($),tn=Ge.length!==T.length,T=T.substring($.raw.length);continue}if($=this.tokenizer.text(T)){T=T.substring($.raw.length),(fe=D[D.length-1])&&"text"===fe.type?(fe.raw+="\n"+$.raw,fe.text+="\n"+$.text):D.push($);continue}if(T){var xn="Infinite loop on byte: "+T.charCodeAt(0);if(this.options.silent){console.error(xn);break}throw new Error(xn)}}return D},Y.inline=function(T){var D,B,Z,$,ae,de,fe=T.length;for(D=0;D<fe;D++)switch(de=T[D],de.type){case"paragraph":case"text":case"heading":de.tokens=[],this.inlineTokens(de.text,de.tokens);break;case"table":for(de.tokens={header:[],cells:[]},$=de.header.length,B=0;B<$;B++)de.tokens.header[B]=[],this.inlineTokens(de.header[B],de.tokens.header[B]);for($=de.cells.length,B=0;B<$;B++)for(ae=de.cells[B],de.tokens.cells[B]=[],Z=0;Z<ae.length;Z++)de.tokens.cells[B][Z]=[],this.inlineTokens(ae[Z],de.tokens.cells[B][Z]);break;case"blockquote":this.inline(de.tokens);break;case"list":for($=de.items.length,B=0;B<$;B++)this.inline(de.items[B].tokens)}return T},Y.inlineTokens=function(T,D,B,Z){var $=this;void 0===D&&(D=[]),void 0===B&&(B=!1),void 0===Z&&(Z=!1);var ae,de,fe,tn,xn,Wt,Ge=T;if(this.tokens.links){var bt=Object.keys(this.tokens.links);if(bt.length>0)for(;null!=(tn=this.tokenizer.rules.inline.reflinkSearch.exec(Ge));)bt.includes(tn[0].slice(tn[0].lastIndexOf("[")+1,-1))&&(Ge=Ge.slice(0,tn.index)+"["+Fa("a",tn[0].length-2)+"]"+Ge.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(tn=this.tokenizer.rules.inline.blockSkip.exec(Ge));)Ge=Ge.slice(0,tn.index)+"["+Fa("a",tn[0].length-2)+"]"+Ge.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(tn=this.tokenizer.rules.inline.escapedEmSt.exec(Ge));)Ge=Ge.slice(0,tn.index)+"++"+Ge.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;T;)if(xn||(Wt=""),xn=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(ni){return!!(ae=ni.call($,T,D))&&(T=T.substring(ae.raw.length),D.push(ae),!0)}))){if(ae=this.tokenizer.escape(T)){T=T.substring(ae.raw.length),D.push(ae);continue}if(ae=this.tokenizer.tag(T,B,Z)){T=T.substring(ae.raw.length),B=ae.inLink,Z=ae.inRawBlock,(de=D[D.length-1])&&"text"===ae.type&&"text"===de.type?(de.raw+=ae.raw,de.text+=ae.text):D.push(ae);continue}if(ae=this.tokenizer.link(T)){T=T.substring(ae.raw.length),"link"===ae.type&&(ae.tokens=this.inlineTokens(ae.text,[],!0,Z)),D.push(ae);continue}if(ae=this.tokenizer.reflink(T,this.tokens.links)){T=T.substring(ae.raw.length),de=D[D.length-1],"link"===ae.type?(ae.tokens=this.inlineTokens(ae.text,[],!0,Z),D.push(ae)):de&&"text"===ae.type&&"text"===de.type?(de.raw+=ae.raw,de.text+=ae.text):D.push(ae);continue}if(ae=this.tokenizer.emStrong(T,Ge,Wt)){T=T.substring(ae.raw.length),ae.tokens=this.inlineTokens(ae.text,[],B,Z),D.push(ae);continue}if(ae=this.tokenizer.codespan(T)){T=T.substring(ae.raw.length),D.push(ae);continue}if(ae=this.tokenizer.br(T)){T=T.substring(ae.raw.length),D.push(ae);continue}if(ae=this.tokenizer.del(T)){T=T.substring(ae.raw.length),ae.tokens=this.inlineTokens(ae.text,[],B,Z),D.push(ae);continue}if(ae=this.tokenizer.autolink(T,ro)){T=T.substring(ae.raw.length),D.push(ae);continue}if(!B&&(ae=this.tokenizer.url(T,ro))){T=T.substring(ae.raw.length),D.push(ae);continue}if(fe=T,this.options.extensions&&this.options.extensions.startInline&&function(){var ni=1/0,ji=T.slice(1),Hi=void 0;$.options.extensions.startInline.forEach(function(fn){"number"==typeof(Hi=fn.call(this,ji))&&Hi>=0&&(ni=Math.min(ni,Hi))}),ni<1/0&&ni>=0&&(fe=T.substring(0,ni+1))}(),ae=this.tokenizer.inlineText(fe,Z,tr)){T=T.substring(ae.raw.length),"_"!==ae.raw.slice(-1)&&(Wt=ae.raw.slice(-1)),xn=!0,(de=D[D.length-1])&&"text"===de.type?(de.raw+=ae.raw,de.text+=ae.text):D.push(ae);continue}if(T){var nn="Infinite loop on byte: "+T.charCodeAt(0);if(this.options.silent){console.error(nn);break}throw new Error(nn)}}return D},function(G,Y,J){Y&&We(G.prototype,Y),J&&We(G,J)}(G,null,[{key:"rules",get:function(){return{block:Ri,inline:Ur}}}]),G}(),jr=At.exports.defaults,kr=cn_cleanUrl,ti=cn_escape,dc=function(){function G(J){this.options=J||jr}var Y=G.prototype;return Y.code=function(T,D,B){var Z=(D||"").match(/\S*/)[0];if(this.options.highlight){var $=this.options.highlight(T,Z);null!=$&&$!==T&&(B=!0,T=$)}return T=T.replace(/\n$/,"")+"\n",Z?'<pre><code class="'+this.options.langPrefix+ti(Z,!0)+'">'+(B?T:ti(T,!0))+"</code></pre>\n":"<pre><code>"+(B?T:ti(T,!0))+"</code></pre>\n"},Y.blockquote=function(T){return"<blockquote>\n"+T+"</blockquote>\n"},Y.html=function(T){return T},Y.heading=function(T,D,B,Z){return this.options.headerIds?"<h"+D+' id="'+this.options.headerPrefix+Z.slug(B)+'">'+T+"</h"+D+">\n":"<h"+D+">"+T+"</h"+D+">\n"},Y.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},Y.list=function(T,D,B){var Z=D?"ol":"ul";return"<"+Z+(D&&1!==B?' start="'+B+'"':"")+">\n"+T+"</"+Z+">\n"},Y.listitem=function(T){return"<li>"+T+"</li>\n"},Y.checkbox=function(T){return"<input "+(T?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Y.paragraph=function(T){return"<p>"+T+"</p>\n"},Y.table=function(T,D){return D&&(D="<tbody>"+D+"</tbody>"),"<table>\n<thead>\n"+T+"</thead>\n"+D+"</table>\n"},Y.tablerow=function(T){return"<tr>\n"+T+"</tr>\n"},Y.tablecell=function(T,D){var B=D.header?"th":"td";return(D.align?"<"+B+' align="'+D.align+'">':"<"+B+">")+T+"</"+B+">\n"},Y.strong=function(T){return"<strong>"+T+"</strong>"},Y.em=function(T){return"<em>"+T+"</em>"},Y.codespan=function(T){return"<code>"+T+"</code>"},Y.br=function(){return this.options.xhtml?"<br/>":"<br>"},Y.del=function(T){return"<del>"+T+"</del>"},Y.link=function(T,D,B){if(null===(T=kr(this.options.sanitize,this.options.baseUrl,T)))return B;var Z='<a href="'+ti(T)+'"';return D&&(Z+=' title="'+D+'"'),Z+">"+B+"</a>"},Y.image=function(T,D,B){if(null===(T=kr(this.options.sanitize,this.options.baseUrl,T)))return B;var Z='<img src="'+T+'" alt="'+B+'"';return D&&(Z+=' title="'+D+'"'),Z+(this.options.xhtml?"/>":">")},Y.text=function(T){return T},G}(),so=function(){function G(){}var Y=G.prototype;return Y.strong=function(T){return T},Y.em=function(T){return T},Y.codespan=function(T){return T},Y.del=function(T){return T},Y.html=function(T){return T},Y.text=function(T){return T},Y.link=function(T,D,B){return""+B},Y.image=function(T,D,B){return""+B},Y.br=function(){return""},G}(),ui=function(){function G(){this.seen={}}var Y=G.prototype;return Y.serialize=function(T){return T.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Y.getNextSafeSlug=function(T,D){var B=T,Z=0;if(this.seen.hasOwnProperty(B)){Z=this.seen[T];do{B=T+"-"+ ++Z}while(this.seen.hasOwnProperty(B))}return D||(this.seen[T]=Z,this.seen[B]=0),B},Y.slug=function(T,D){void 0===D&&(D={});var B=this.serialize(T);return this.getNextSafeSlug(B,D.dryrun)},G}(),Sh=dc,vl=so,Na=ui,oo=At.exports.defaults,La=cn_unescape,os=ci,ao=function(){function G(J){this.options=J||oo,this.options.renderer=this.options.renderer||new Sh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new vl,this.slugger=new Na}G.parse=function(T,D){return new G(D).parse(T)},G.parseInline=function(T,D){return new G(D).parseInline(T)};var Y=G.prototype;return Y.parse=function(T,D){void 0===D&&(D=!0);var Z,$,ae,de,fe,Ge,tn,xn,Wt,bt,nn,ni,ji,Hi,fn,bi,pc,lo,ud,B="",wl=T.length;for(Z=0;Z<wl;Z++)if(bt=T[Z],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[bt.type]&&(!1!==(ud=this.options.extensions.renderers[bt.type].call(this,bt))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(bt.type)))B+=ud||"";else switch(bt.type){case"space":continue;case"hr":B+=this.renderer.hr();continue;case"heading":B+=this.renderer.heading(this.parseInline(bt.tokens),bt.depth,La(this.parseInline(bt.tokens,this.textRenderer)),this.slugger);continue;case"code":B+=this.renderer.code(bt.text,bt.lang,bt.escaped);continue;case"table":for(xn="",tn="",de=bt.header.length,$=0;$<de;$++)tn+=this.renderer.tablecell(this.parseInline(bt.tokens.header[$]),{header:!0,align:bt.align[$]});for(xn+=this.renderer.tablerow(tn),Wt="",de=bt.cells.length,$=0;$<de;$++){for(tn="",fe=(Ge=bt.tokens.cells[$]).length,ae=0;ae<fe;ae++)tn+=this.renderer.tablecell(this.parseInline(Ge[ae]),{header:!1,align:bt.align[ae]});Wt+=this.renderer.tablerow(tn)}B+=this.renderer.table(xn,Wt);continue;case"blockquote":Wt=this.parse(bt.tokens),B+=this.renderer.blockquote(Wt);continue;case"list":for(nn=bt.ordered,ni=bt.start,ji=bt.loose,de=bt.items.length,Wt="",$=0;$<de;$++)bi=(fn=bt.items[$]).checked,pc=fn.task,Hi="",fn.task&&(lo=this.renderer.checkbox(bi),ji?fn.tokens.length>0&&"text"===fn.tokens[0].type?(fn.tokens[0].text=lo+" "+fn.tokens[0].text,fn.tokens[0].tokens&&fn.tokens[0].tokens.length>0&&"text"===fn.tokens[0].tokens[0].type&&(fn.tokens[0].tokens[0].text=lo+" "+fn.tokens[0].tokens[0].text)):fn.tokens.unshift({type:"text",text:lo}):Hi+=lo),Hi+=this.parse(fn.tokens,ji),Wt+=this.renderer.listitem(Hi,pc,bi);B+=this.renderer.list(Wt,nn,ni);continue;case"html":B+=this.renderer.html(bt.text);continue;case"paragraph":B+=this.renderer.paragraph(this.parseInline(bt.tokens));continue;case"text":for(Wt=bt.tokens?this.parseInline(bt.tokens):bt.text;Z+1<wl&&"text"===T[Z+1].type;)Wt+="\n"+((bt=T[++Z]).tokens?this.parseInline(bt.tokens):bt.text);B+=D?this.renderer.paragraph(Wt):Wt;continue;default:var gc='Token with "'+bt.type+'" type was not found.';if(this.options.silent)return void console.error(gc);throw new Error(gc)}return B},Y.parseInline=function(T,D){D=D||this.renderer;var Z,$,ae,B="",de=T.length;for(Z=0;Z<de;Z++)if($=T[Z],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[$.type]&&(!1!==(ae=this.options.extensions.renderers[$.type].call(this,$))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes($.type)))B+=ae||"";else switch($.type){case"escape":B+=D.text($.text);break;case"html":B+=D.html($.text);break;case"link":B+=D.link($.href,$.title,this.parseInline($.tokens,D));break;case"image":B+=D.image($.href,$.title,$.text);break;case"strong":B+=D.strong(this.parseInline($.tokens,D));break;case"em":B+=D.em(this.parseInline($.tokens,D));break;case"codespan":B+=D.codespan($.text);break;case"br":B+=D.br();break;case"del":B+=D.del(this.parseInline($.tokens,D));break;case"text":B+=D.text($.text);break;default:var fe='Token with "'+$.type+'" type was not found.';if(this.options.silent)return void console.error(fe);throw new Error(fe)}return B},G}(),hc=ss,bl=dc,au=so,lu=ui,cu=cn_merge,Cl=cn_checkSanitizeDeprecation,fc=cn_escape,cd=At.exports.getDefaults,uu=At.exports.changeDefaults,Vs=At.exports.defaults;function Qe(G,Y,J){if(null==G)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof G)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(G)+", string expected");if("function"==typeof Y&&(J=Y,Y=null),Y=cu({},Qe.defaults,Y||{}),Cl(Y),J){var D,T=Y.highlight;try{D=os.lex(G,Y)}catch(ae){return J(ae)}var B=function(de){var fe;if(!de)try{Y.walkTokens&&Qe.walkTokens(D,Y.walkTokens),fe=ao.parse(D,Y)}catch(Ge){de=Ge}return Y.highlight=T,de?J(de):J(null,fe)};if(!T||T.length<3||(delete Y.highlight,!D.length))return B();var Z=0;return Qe.walkTokens(D,function(ae){"code"===ae.type&&(Z++,setTimeout(function(){T(ae.text,ae.lang,function(de,fe){if(de)return B(de);null!=fe&&fe!==ae.text&&(ae.text=fe,ae.escaped=!0),0==--Z&&B()})},0))}),void(0===Z&&B())}try{var $=os.lex(G,Y);return Y.walkTokens&&Qe.walkTokens($,Y.walkTokens),ao.parse($,Y)}catch(ae){if(ae.message+="\nPlease report this to https://github.com/markedjs/marked.",Y.silent)return"<p>An error occurred:</p><pre>"+fc(ae.message+"",!0)+"</pre>";throw ae}}return Qe.options=Qe.setOptions=function(G){return cu(Qe.defaults,G),uu(Qe.defaults),Qe},Qe.getDefaults=cd,Qe.defaults=Vs,Qe.use=function(){for(var G=this,Y=arguments.length,J=new Array(Y),T=0;T<Y;T++)J[T]=arguments[T];var Z,D=cu.apply(void 0,[{}].concat(J)),B=Qe.defaults.extensions||{renderers:{},childTokens:{}};J.forEach(function($){if($.extensions&&(Z=!0,$.extensions.forEach(function(de){if(!de.name)throw new Error("extension name required");if(de.renderer){var fe=B.renderers?B.renderers[de.name]:null;B.renderers[de.name]=fe?function(){for(var Ge=arguments.length,tn=new Array(Ge),xn=0;xn<Ge;xn++)tn[xn]=arguments[xn];var Wt=de.renderer.apply(this,tn);return!1===Wt&&(Wt=fe.apply(this,tn)),Wt}:de.renderer}if(de.tokenizer){if(!de.level||"block"!==de.level&&"inline"!==de.level)throw new Error("extension level must be 'block' or 'inline'");B[de.level]?B[de.level].unshift(de.tokenizer):B[de.level]=[de.tokenizer],de.start&&("block"===de.level?B.startBlock?B.startBlock.push(de.start):B.startBlock=[de.start]:"inline"===de.level&&(B.startInline?B.startInline.push(de.start):B.startInline=[de.start]))}de.childTokens&&(B.childTokens[de.name]=de.childTokens)})),$.renderer&&function(){var de=Qe.defaults.renderer||new bl,fe=function(xn){var Wt=de[xn];de[xn]=function(){for(var bt=arguments.length,nn=new Array(bt),ni=0;ni<bt;ni++)nn[ni]=arguments[ni];var ji=$.renderer[xn].apply(de,nn);return!1===ji&&(ji=Wt.apply(de,nn)),ji}};for(var Ge in $.renderer)fe(Ge);D.renderer=de}(),$.tokenizer&&function(){var de=Qe.defaults.tokenizer||new hc,fe=function(xn){var Wt=de[xn];de[xn]=function(){for(var bt=arguments.length,nn=new Array(bt),ni=0;ni<bt;ni++)nn[ni]=arguments[ni];var ji=$.tokenizer[xn].apply(de,nn);return!1===ji&&(ji=Wt.apply(de,nn)),ji}};for(var Ge in $.tokenizer)fe(Ge);D.tokenizer=de}(),$.walkTokens){var ae=Qe.defaults.walkTokens;D.walkTokens=function(de){$.walkTokens.call(G,de),ae&&ae(de)}}Z&&(D.extensions=B),Qe.setOptions(D)})},Qe.walkTokens=function(G,Y){for(var D,J=function(){var Z=D.value;switch(Y(Z),Z.type){case"table":for(var ae,$=Tt(Z.tokens.header);!(ae=$()).done;)Qe.walkTokens(ae.value,Y);for(var Ge,fe=Tt(Z.tokens.cells);!(Ge=fe()).done;)for(var Wt,xn=Tt(Ge.value);!(Wt=xn()).done;)Qe.walkTokens(Wt.value,Y);break;case"list":Qe.walkTokens(Z.items,Y);break;default:Qe.defaults.extensions&&Qe.defaults.extensions.childTokens&&Qe.defaults.extensions.childTokens[Z.type]?Qe.defaults.extensions.childTokens[Z.type].forEach(function(nn){Qe.walkTokens(Z[nn],Y)}):Z.tokens&&Qe.walkTokens(Z.tokens,Y)}},T=Tt(G);!(D=T()).done;)J()},Qe.parseInline=function(G,Y){if(null==G)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof G)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(G)+", string expected");Y=cu({},Qe.defaults,Y||{}),Cl(Y);try{var J=os.lexInline(G,Y);return Y.walkTokens&&Qe.walkTokens(J,Y.walkTokens),ao.parseInline(J,Y)}catch(T){if(T.message+="\nPlease report this to https://github.com/markedjs/marked.",Y.silent)return"<p>An error occurred:</p><pre>"+fc(T.message+"",!0)+"</pre>";throw T}},Qe.Parser=ao,Qe.parser=ao.parse,Qe.Renderer=bl,Qe.TextRenderer=au,Qe.Lexer=os,Qe.lexer=os.lex,Qe.Tokenizer=hc,Qe.Slugger=lu,Qe.parse=Qe,Qe}()},310:(pt,We,Be)=>{"use strict";var yt=Be(948);Object.defineProperty(We,"__esModule",{value:!0}),We.isMobile=function(){return void 0!==L.window.orientation},We.default=function(Ze){if(!Ze&&!(0,Tt.default)())return"Node";if((0,At.default)(Ze))return"Electron";var St="undefined"!=typeof navigator?navigator:{},Rt=Ze||St.userAgent||"";if(Rt.indexOf("Edge")>-1)return"Edge";var be=-1!==Rt.indexOf("MSIE "),me=-1!==Rt.indexOf("Trident/");return be||me?"IE":L.window.chrome?"Chrome":L.window.safari?"Safari":L.window.mozInnerScreenX?"Firefox":"Unknown"};var L=Be(151),Tt=yt(Be(602)),At=yt(Be(344))},151:(pt,We,Be)=>{"use strict";var yt=Be(948);Object.defineProperty(We,"__esModule",{value:!0}),We.console=We.process=We.document=We.global=We.window=We.self=void 0;var L=yt(Be(321)),Tt={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,L.default)(process))&&process};We.self=Tt.self||Tt.window||Tt.global,We.window=Tt.window||Tt.self||Tt.global,We.global=Tt.global||Tt.self||Tt.window,We.document=Tt.document||{},We.process=Tt.process||{};var Rt=console;We.console=Rt},761:(pt,We,Be)=>{"use strict";var L=Be(948),Tt=Be(321);Object.defineProperty(We,"CO",{enumerable:!0,get:function(){return At.global}}),Object.defineProperty(We,"qs",{enumerable:!0,get:function(){return dt.default}});var At=Be(151),dt=(Rt(Be(602)),Rt(Be(310)));L(Be(344));function St(be){if("function"!=typeof WeakMap)return null;var me=new WeakMap,Ie=new WeakMap;return(St=function(Se){return Se?Ie:me})(be)}function Rt(be,me){if(!me&&be&&be.__esModule)return be;if(null===be||"object"!==Tt(be)&&"function"!=typeof be)return{default:be};var Ie=St(me);if(Ie&&Ie.has(be))return Ie.get(be);var _e={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Vt in be)if("default"!==Vt&&Object.prototype.hasOwnProperty.call(be,Vt)){var je=Se?Object.getOwnPropertyDescriptor(be,Vt):null;je&&(je.get||je.set)?Object.defineProperty(_e,Vt,je):_e[Vt]=be[Vt]}return _e.default=be,Ie&&Ie.set(be,_e),_e}},602:(pt,We,Be)=>{"use strict";var yt=Be(948);Object.defineProperty(We,"__esModule",{value:!0}),We.default=At,We.isBrowserMainThread=function(){return At()&&"undefined"!=typeof document};var L=yt(Be(321)),Tt=yt(Be(344));function At(){return!("object"===("undefined"==typeof process?"undefined":(0,L.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,Tt.default)()}},344:(pt,We,Be)=>{"use strict";var yt=Be(948);Object.defineProperty(We,"__esModule",{value:!0}),We.default=function(At){if("undefined"!=typeof window&&"object"===(0,L.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,L.default)(process.versions)&&Boolean(process.versions.electron))return!0;var Ke="object"===("undefined"==typeof navigator?"undefined":(0,L.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,dt=At||Ke;return!!(dt&&dt.indexOf("Electron")>=0)};var L=yt(Be(321))},166:(pt,We,Be)=>{"use strict";var yt={};Be.r(yt),Be.d(yt,{decode:()=>t0e,encode:()=>n0e});var L={};Be.r(L),Be.d(L,{decode:()=>a0e,encode:()=>l0e});var Tt={};Be.r(Tt),Be.d(Tt,{decode:()=>c0e,encode:()=>u0e});var At={};function Ke(n){return"function"==typeof n}Be.r(At),Be.d(At,{decode:()=>d0e,encode:()=>h0e});let dt=!1;const Ze={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else dt&&console.log("RxJS: Back to a better error behavior. Thank you. <3");dt=n},get useDeprecatedSynchronousErrorHandling(){return dt}};function St(n){setTimeout(()=>{throw n},0)}const Rt={closed:!0,next(n){},error(n){if(Ze.useDeprecatedSynchronousErrorHandling)throw n;St(n)},complete(){}},be=Array.isArray||(n=>n&&"number"==typeof n.length);function me(n){return null!==n&&"object"==typeof n}const _e=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class Se{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof Se)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Ke(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof _e?Vt(o.errors):[o]}}if(be(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(me(l))try{l.unsubscribe()}catch(c){e=e||[],c instanceof _e?e=e.concat(Vt(c.errors)):e.push(c)}}}if(e)throw new _e(e)}add(e){let t=e;if(!e)return Se.EMPTY;switch(typeof e){case"function":t=new Se(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof Se)){const s=t;t=new Se,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof Se){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function Vt(n){return n.reduce((e,t)=>e.concat(t instanceof _e?t.errors:t),[])}Se.EMPTY=((n=new Se).closed=!0,n);const je="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Et extends Se{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Rt;break;case 1:if(!e){this.destination=Rt;break}if("object"==typeof e){e instanceof Et?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Qt(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Qt(this,e,t,i)}}[je](){return this}static create(e,t,i){const r=new Et(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Qt extends Et{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;Ke(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==Rt&&(o=Object.create(t),Ke(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;Ze.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=Ze;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):St(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;St(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);Ze.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),Ze.useDeprecatedSynchronousErrorHandling)throw i;St(i)}}__tryOrSetError(e,t,i){if(!Ze.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return Ze.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(St(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const yi="function"==typeof Symbol&&Symbol.observable||"@@observable";function vi(n){return n}function wr(...n){return Ne(n)}function Ne(n){return 0===n.length?vi:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let le=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof Et)return n;if(n[je])return n[je]()}return n||e||t?new Et(n,e,t):new Et(Rt)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||Ze.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Ze.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){Ze.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof Et?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=zt(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[yi](){return this}pipe(...t){return 0===t.length?this:Ne(t)(this)}toPromise(t){return new(t=zt(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function zt(n){if(n||(n=Ze.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Kt=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ai extends Se{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class Oi extends Et{constructor(e){super(e),this.destination=e}}let xe=(()=>{class n extends le{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[je](){return new Oi(this)}lift(t){const i=new cn(this,this);return i.operator=t,i}next(t){if(this.closed)throw new Kt;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new Kt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new Kt;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new Kt;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new Kt;return this.hasError?(t.error(this.thrownError),Se.EMPTY):this.isStopped?(t.complete(),Se.EMPTY):(this.observers.push(t),new ai(this,t))}asObservable(){const t=new le;return t.source=this,t}}return n.create=(e,t)=>new cn(e,t),n})();class cn extends xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):Se.EMPTY}}function jn(n){return n&&"function"==typeof n.schedule}function Me(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Ii(n,e))}}class Ii{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new Ut(e,this.project,this.thisArg))}}class Ut extends Et{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Er=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},ss="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ht=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ye(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Pi=n=>{if(n&&"function"==typeof n[yi])return(n=>e=>{const t=n[yi]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(ht(n))return Er(n);if(Ye(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,St),e))(n);if(n&&"function"==typeof n[ss])return(n=>e=>{const t=n[ss]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${me(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Ri(n,e){return new le(t=>{const i=new Se;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function ci(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[yi]}(n))return function(n,e){return new le(t=>{const i=new Se;return i.add(e.schedule(()=>{const r=n[yi]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Ye(n))return function(n,e){return new le(t=>{const i=new Se;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(ht(n))return Ri(n,e);if(function(n){return n&&"function"==typeof n[ss]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{const i=new Se;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[ss](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof le?n:new le(Pi(n))}class jr extends Et{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ti extends Et{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function so(n,e){if(e.closed)return;if(n instanceof le)return n.subscribe(e);let t;try{t=Pi(n)(e)}catch(i){e.error(i)}return t}function ui(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(ui((r,s)=>ci(n(r,s)).pipe(Me((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new Sh(n,t)))}class Sh{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new vl(e,this.project,this.concurrent))}}class vl extends ti{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new jr(this),i=this.destination;i.add(t);const r=so(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function oo(n=Number.POSITIVE_INFINITY){return ui(vi,n)}function La(n,e){return e?Ri(n,e):new le(Er(n))}function ki(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return jn(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof le?n[0]:oo(e)(La(n,t))}function os(){return function(e){return e.lift(new ao(e))}}class ao{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new hc(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class hc extends Et{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class bl extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new Se,e.add(this.source.subscribe(new lu(this.getSubject(),this))),e.closed&&(this._connection=null,e=Se.EMPTY)),e}refCount(){return os()(this)}}const au=(()=>{const n=bl.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class lu extends Oi{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function fc(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new cd(r,e));const s=Object.create(i,au);return s.source=i,s.subjectFactory=r,s}}class cd{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function uu(){return new xe}function Vs(){return n=>os()(fc(uu)(n))}function Qe(n){for(let e in n)if(n[e]===Qe)return e;throw Error("Could not find renamed property on target object.")}function du(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function G(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(G).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Y(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const J=Qe({__forward_ref__:Qe});function T(n){return n.__forward_ref__=T,n.toString=function(){return G(this())},n}function D(n){return B(n)?n():n}function B(n){return"function"==typeof n&&n.hasOwnProperty(J)&&n.__forward_ref__===T}class $ extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function fe(n){return"string"==typeof n?n:null==n?"":String(n)}function Ge(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():fe(n)}function bt(n,e){const t=e?` in ${e}`:"";throw new $("201",`No provider for ${Ge(n)} found${t}`)}function $i(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function De(n){return{providers:n.providers||[],imports:n.imports||[]}}function nr(n){return mc(n,la)||mc(n,Va)}function mc(n,e){return n.hasOwnProperty(e)?n[e]:null}function gu(n){return n&&(n.hasOwnProperty(El)||n.hasOwnProperty(_p))?n[El]:null}const la=Qe({\u0275prov:Qe}),El=Qe({\u0275inj:Qe}),Va=Qe({ngInjectableDef:Qe}),_p=Qe({ngInjectorDef:Qe});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let Sl;function ca(n){const e=Sl;return Sl=n,e}function dd(n,e,t){const i=nr(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&xt.Optional?null:void 0!==e?e:void bt(G(n),"Injector")}function R(n){return{toString:n}.toString()}var U=(()=>((U=U||{})[U.OnPush=0]="OnPush",U[U.Default=1]="Default",U))(),Ue=(()=>((Ue=Ue||{})[Ue.Emulated=0]="Emulated",Ue[Ue.None=2]="None",Ue[Ue.ShadowDom=3]="ShadowDom",Ue))();const _n="undefined"!=typeof globalThis&&globalThis,lr="undefined"!=typeof window&&window,gr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Hr="undefined"!=typeof global&&global,pn=_n||Hr||lr||gr,hd={},gi=[],vp=Qe({\u0275cmp:Qe}),r_=Qe({\u0275dir:Qe}),Mh=Qe({\u0275pipe:Qe}),f0=Qe({\u0275mod:Qe}),gM=Qe({\u0275loc:Qe}),xl=Qe({\u0275fac:Qe}),Th=Qe({__NG_ELEMENT_ID__:Qe});let mM=0;function $e(n){return R(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===U.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||gi,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ue.Emulated,id:"c",styles:n.styles||gi,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=mM++,i.inputs=_0(n.inputs,t),i.outputs=_0(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(p0):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(g0):null,i})}function p0(n){return Xn(n)||function(n){return n[r_]||null}(n)}function g0(n){return function(n){return n[Mh]||null}(n)}const m0={};function Fe(n){return R(()=>{const e={type:n.type,bootstrap:n.bootstrap||gi,declarations:n.declarations||gi,imports:n.imports||gi,exports:n.exports||gi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(m0[n.id]=n.type),e})}function _0(n,e){if(null==n)return hd;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const ge=$e;function as(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xn(n){return n[vp]||null}function co(n,e){const t=n[f0]||null;if(!t&&!0===e)throw new Error(`Type ${G(n)} does not have '\u0275mod' property.`);return t}function Oo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Io(n){return Array.isArray(n)&&!0===n[1]}function a_(n){return 0!=(8&n.flags)}function md(n){return 2==(2&n.flags)}function _d(n){return 1==(1&n.flags)}function ha(n){return null!==n.template}function y0(n){return 0!=(512&n[2])}function vc(n,e){return n.hasOwnProperty(xl)?n[xl]:null}class d_{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Kn(){return C0}function C0(n){return n.type.prototype.ngOnChanges&&(n.setInput=SM),EM}function EM(){const n=W(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===hd)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function SM(n,e,t,i){const r=W(n)||function(n,e){return n[Rh]=e}(n,{previous:hd,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new d_(l&&l.currentValue,e,o===hd),n[i]=e}Kn.ngInherit=!0;const Rh="__ngSimpleChanges__";function W(n){return n[Rh]||null}const Hn="http://www.w3.org/2000/svg";let hi;function Ti(n){return!!n.listen}const yu={createRenderer:(n,e)=>void 0!==hi?hi:"undefined"!=typeof document?document:void 0};function Wi(n){for(;Array.isArray(n);)n=n[0];return n}function kh(n,e){return Wi(e[n])}function xs(n,e){return Wi(e[n.index])}function p_(n,e){return n.data[e]}function yd(n,e){return n[e]}function cs(n,e){const t=e[n];return Oo(t)?t:t[0]}function Al(n){return 4==(4&n[2])}function vd(n){return 128==(128&n[2])}function pa(n,e){return null==e?null:n[e]}function g_(n){n[18]=0}function wp(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const qt={lFrame:bu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function E0(){return qt.bindingsEnabled}function Te(){return qt.lFrame.lView}function Tn(){return qt.lFrame.tView}function rn(n){return qt.lFrame.contextLView=n,n[8]}function Mr(){let n=m_();for(;null!==n&&64===n.type;)n=n.parent;return n}function m_(){return qt.lFrame.currentTNode}function ja(n,e){const t=qt.lFrame;t.currentTNode=n,t.isParent=e}function dr(){return qt.lFrame.isParent}function Fr(){qt.lFrame.isParent=!1}function Lh(){return qt.isInCheckNoChangesMode}function Sp(n){qt.isInCheckNoChangesMode=n}function Gr(){const n=qt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function js(){return qt.lFrame.bindingIndex}function ga(){return qt.lFrame.bindingIndex++}function ho(n){const e=qt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function bd(n,e){const t=qt.lFrame;t.bindingIndex=t.bindingRootIndex=n,__(e)}function __(n){qt.lFrame.currentDirectiveIndex=n}function y_(n){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function S0(){return qt.lFrame.currentQueryIndex}function v_(n){qt.lFrame.currentQueryIndex=n}function Mp(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Cd(n,e,t){if(t&xt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&xt.Host||(r=Mp(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=qt.lFrame=O();return i.currentTNode=e,i.lView=n,!0}function zh(n){const e=O(),t=n[1];qt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function O(){const n=qt.lFrame,e=null===n?null:n.child;return null===e?bu(n):e}function bu(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Uh(){const n=qt.lFrame;return qt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const fo=Uh;function vn(){const n=Uh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ms(){return qt.lFrame.selectedIndex}function Hs(n){qt.lFrame.selectedIndex=n}function ir(){const n=qt.lFrame;return p_(n.tView,n.selectedIndex)}function Tp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=d&&(n.destroyHooks||(n.destroyHooks=[])).push(t,d)}}function Ap(n,e,t){Ha(n,e,3,t)}function Dp(n,e,t,i){(3&n[2])===t&&Ha(n,e,t,i)}function b_(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Ha(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(NM(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function NM(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class jh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Op(n,e,t){const i=Ti(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];w_(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function T0(n){return 3===n||4===n||6===n}function w_(n){return 64===n.charCodeAt(0)}function Hh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||E_(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function E_(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function A0(n){return-1!==n}function wd(n){return 32767&n}function $a(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Ed=!0;function Ip(n){const e=Ed;return Ed=n,e}let x_=0;function us(n,e){const t=Pp(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,M_(i.data,n),M_(e,null),M_(i.blueprint,null));const r=$h(n,e),s=n.injectorIndex;if(A0(r)){const o=wd(r),a=$a(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function M_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Pp(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function $h(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Cc(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Th)&&(i=t[Th]),null==i&&(i=t[Th]=x_++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function T_(n,e,t){if(t&xt.Optional)return n;bt(e,"NodeInjector")}function O0(n,e,t,i){if(t&xt.Optional&&void 0===i&&(i=null),0==(t&(xt.Self|xt.Host))){const r=n[9],s=ca(void 0);try{return r?r.get(e,i,t&xt.Optional):dd(e,i,t&xt.Optional)}finally{ca(s)}}return T_(i,e,t)}function Gh(n,e,t,i=xt.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Th)?n[Th]:void 0;return"number"==typeof e?e>=0?255&e:P0:e}(t);if("function"==typeof s){if(!Cd(e,n,i))return i&xt.Host?T_(r,t,i):O0(e,t,i,r);try{const o=s(i);if(null!=o||i&xt.Optional)return o;bt(t)}finally{fo()}}else if("number"==typeof s){let o=null,a=Pp(n,e),l=-1,c=i&xt.Host?e[16][6]:null;for((-1===a||i&xt.SkipSelf)&&(l=-1===a?$h(n,e):e[a+8],-1!==l&&Wh(i,!1)?(o=e[1],a=wd(l),e=$a(l,e)):a=-1);-1!==a;){const d=e[1];if(Rp(s,a,d.data)){const f=Wr(a,e,t,o,i,c);if(f!==I0)return f}l=e[a+8],-1!==l&&Wh(i,e[1].data[a+8]===c)&&Rp(s,a,e)?(o=d,a=wd(l),e=$a(l,e)):a=-1}}}return O0(e,t,i,r)}const I0={};function P0(){return new Ro(Mr(),Te())}function Wr(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],d=Sd(a,o,t,null==i?md(a)&&Ed:i!=o&&0!=(3&a.type),r&xt.Host&&s===a);return null!==d?xd(e,o,d,a):I0}function Sd(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,d=s>>20,p=r?a+d:n.directiveEnd;for(let g=i?a:a+d;g<p;g++){const _=o[g];if(g<l&&t===_||g>=l&&_.type===t)return g}if(r){const g=o[l];if(g&&ha(g)&&g.type===t)return l}return null}function xd(n,e,t,i){let r=n[t];const s=e.data;if(function(n){return n instanceof jh}(r)){const o=r;o.resolving&&function(n,e){throw new $("200",`Circular dependency in DI detected for ${n}`)}(Ge(s[t]));const a=Ip(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ca(o.injectImpl):null;Cd(n,i,xt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=C0(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&ca(l),Ip(a),o.resolving=!1,fo()}}return r}function Rp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Wh(n,e){return!(n&xt.Self||n&xt.Host&&e)}class Ro{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Gh(this._tNode,this._lView,e,void 0,t)}}function $n(n){return R(()=>{const e=n.prototype.constructor,t=e[xl]||qr(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[xl]||qr(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function qr(n){return B(n)?()=>{const e=qr(D(n));return e&&e()}:vc(n)}function ds(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(T0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Mr(),n)}const Td="__parameters__";function ya(n,e,t){return R(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const f=l.hasOwnProperty(Td)?l[Td]:Object.defineProperty(l,Td,{value:[]})[Td];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ce{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Eu=Function;function ko(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),ko(i,e)):e!==n&&e.push(i)}return e}function Fo(n,e){n.forEach(t=>Array.isArray(t)?Fo(t,e):e(t))}function Yh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ol(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ec(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function po(n,e,t){let i=Yr(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function R_(n,e){const t=Yr(n,e);if(t>=0)return n[1|t]}function Yr(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Mu={},Bp="__NG_DI_FLAG__",xc="ngTempTokenPath",Mc=/\n/gm,qa="__source",Vp=Qe({provide:String,useValue:Qe});let Tu;function Od(n){const e=Tu;return Tu=n,e}function ZM(n,e=xt.Default){if(void 0===Tu)throw new Error("inject() must be called from an injection context");return null===Tu?dd(n,void 0,e):Tu.get(n,e&xt.Optional?null:void 0,e)}function I(n,e=xt.Default){return(Sl||ZM)(D(n),e)}const Tc=I;function Au(n){const e=[];for(let t=0;t<n.length;t++){const i=D(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=xt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=B0(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(I(r,s))}else e.push(I(i))}return e}function Id(n,e){return n[Bp]=e,n.prototype[Bp]=e,n}function B0(n){return n[Bp]}function Ts(n,e,t,i){const r=n[xc];throw e[qa]&&r.unshift(e[qa]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=G(e);if(Array.isArray(e))r=e.map(G).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):G(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Mc,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[xc]=null,n}const Pd=Id(ya("Inject",n=>({token:n})),-1),_r=Id(ya("Optional"),8),Ya=Id(ya("SkipSelf"),4);let kd;function Ou(n){var e;return(null===(e=function(){if(void 0===kd&&(kd=null,pn.trustedTypes))try{kd=pn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return kd}())||void 0===e?void 0:e.createHTML(n))||n}class kl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class V_ extends kl{getTypeName(){return"HTML"}}class z_ extends kl{getTypeName(){return"Style"}}class Wp extends kl{getTypeName(){return"Script"}}class Fd extends kl{getTypeName(){return"URL"}}class jt extends kl{getTypeName(){return"ResourceURL"}}function hs(n){return n instanceof kl?n.changingThisBreaksApplicationSecurity:n}function No(n,e){const t=Dc(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function Dc(n){return n instanceof kl&&n.getTypeName()||null}class K0{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ou(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class n1{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ou(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Ou(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const i1=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,r1=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mo(n){return(n=String(n)).match(i1)||n.match(r1)?n:"unsafe:"+n}function ps(n){return(n=String(n)).split(",").map(e=>mo(e.trim())).join(", ")}function Lo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Kh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const qp=Lo("area,br,col,hr,img,wbr"),Q0=Lo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),J0=Lo("rp,rt"),j_=Kh(qp,Kh(Q0,Lo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kh(J0,Lo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kh(J0,Q0)),H_=Lo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$_=Lo("srcset"),G_=Kh(H_,$_,Lo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),l1=Lo("script,style,template");class W_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!j_.hasOwnProperty(t))return this.sanitizedSomething=!0,!l1.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!G_.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;H_[a]&&(l=mo(l)),$_[a]&&(l=ps(l)),this.buf.push(" ",o,'="',Xp(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();j_.hasOwnProperty(t)&&!qp.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Xp(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const eC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zh=/([^\#-~ |!])/g;function Xp(n){return n.replace(/&/g,"&amp;").replace(eC,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Zh,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qh;function q_(n,e){let t=null;try{Qh=Qh||function(n){const e=new n1(n);return function(){try{return!!(new window.DOMParser).parseFromString(Ou(""),"text/html")}catch(n){return!1}}()?new K0(e):e}(n);let i=e?String(e):"";t=Qh.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Qh.getInertBodyElement(i)}while(i!==s);return Ou((new W_).sanitizeChildren(Nd(t)||t))}finally{if(t){const i=Nd(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Nd(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var dn=(()=>((dn=dn||{})[dn.NONE=0]="NONE",dn[dn.HTML=1]="HTML",dn[dn.STYLE=2]="STYLE",dn[dn.SCRIPT=3]="SCRIPT",dn[dn.URL=4]="URL",dn[dn.RESOURCE_URL=5]="RESOURCE_URL",dn))();function Jh(n){const e=function(){const n=Te();return n&&n[12]}();return e?e.sanitize(dn.URL,n)||"":No(n,"URL")?hs(n):mo(fe(n))}const K_="__ngContext__";function Xr(n,e){n[K_]=e}function Z_(n){const e=function(n){return n[K_]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Kp(n){return n.ngOriginalError}function C1(n,...e){n.error(...e)}class Vo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),r=function(n){return n&&n.ngErrorLogger||C1}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Kp(e)):null}_findOriginalError(e){let t=e&&Kp(e);for(;t&&Kp(t);)t=Kp(t);return t||null}}const dC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pn))();function ty(n){return n.ownerDocument.defaultView}function Qp(n){return n.ownerDocument}function Ka(n){return n instanceof Function?n():n}var _o=(()=>((_o=_o||{})[_o.Important=1]="Important",_o[_o.DashCase=2]="DashCase",_o))();function iy(n,e){return undefined(n,e)}function nf(n){const e=n[3];return Io(e)?e[3]:e}function Bd(n){return mC(n[13])}function sy(n){return mC(n[4])}function mC(n){for(;null!==n&&!Io(n);)n=n[4];return n}function Vd(n,e,t,i,r){if(null!=i){let s,o=!1;Io(i)?s=i:Oo(i)&&(o=!0,i=i[0]);const a=Wi(i);0===n&&null!==t?null==r?CC(e,t,a):Za(e,t,a,r||null,!0):1===n&&null!==t?Za(e,t,a,r||null,!0):2===n?function(n,e,t){const i=eg(n,e);i&&function(n,e,t,i){Ti(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,i,r){const s=t[7];s!==Wi(t)&&Vd(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];zd(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function ay(n,e,t){return Ti(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function yC(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,wp(r,-1)),t.splice(i,1)}function ly(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&yC(r,i),e>0&&(n[t-1][4]=i[4]);const s=Ol(n,10+e);!function(n,e){zd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function cy(n,e){if(!(256&e[2])){const t=e[11];Ti(t)&&t.destroyNode&&zd(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Jp(n[1],n);for(;e;){let t=null;if(Oo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Oo(e)&&Jp(e[1],e),e=e[3];null===e&&(e=n),Oo(e)&&Jp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Jp(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof jh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Wi(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&Ti(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Io(e[3])){t!==e[3]&&yC(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function vC(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Ue.None||r===Ue.Emulated)return null}return xs(i,t)}(n,e.parent,t)}function Za(n,e,t,i,r){Ti(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function CC(n,e,t){Ti(n)?n.appendChild(e,t):e.appendChild(t)}function wC(n,e,t,i,r){null!==i?Za(n,e,t,i,r):CC(n,e,t)}function eg(n,e){return Ti(n)?n.parentNode(e):e.parentNode}function EC(n,e,t){return xC(n,e,t)}let xC=function(n,e,t){return 40&n.type?xs(n,t):null};function tg(n,e,t,i){const r=vC(n,i,e),s=e[11],a=EC(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)wC(s,r,t[l],a,!1);else wC(s,r,t,a,!1)}function Pu(n,e){if(null!==e){const t=e.type;if(3&t)return xs(e,n);if(4&t)return ng(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Pu(n,i);{const r=n[e.index];return Io(r)?ng(-1,r):Wi(r)}}if(32&t)return iy(e,n)()||Wi(n[e.index]);{const i=TC(n,e);return null!==i?Array.isArray(i)?i[0]:Pu(nf(n[16]),i):Pu(n,e.next)}}return null}function TC(n,e){return null!==e?n[16][6].projection[e.projection]:null}function ng(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Pu(i,r)}return e[7]}function rf(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Xr(Wi(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)rf(n,e,t.child,i,r,s,!1),Vd(e,n,r,a,s);else if(32&l){const c=iy(t,i);let d;for(;d=c();)Vd(e,n,r,d,s);Vd(e,n,r,a,s)}else 16&l?hy(n,e,i,t,r,s):Vd(e,n,r,a,s);t=o?t.projectionNext:t.next}}function zd(n,e,t,i,r,s){rf(t,i,n.firstChild,e,r,s,!1)}function hy(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Vd(e,n,r,l[c],s);else rf(n,e,l,o[3],r,s,!0)}function OC(n,e,t){Ti(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function fy(n,e,t){Ti(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function sf(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const IC="ng-template";function $1(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==sf(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function ig(n){return 4===n.type&&n.value!==IC}function PC(n,e,t){return e===(4!==n.type||t?n.value:IC)}function G1(n,e,t){let i=4;const r=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(T0(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!PC(n,l,t)||""===l&&1===e.length){if(ba(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!$1(n.attrs,c,t)){if(ba(i))return!1;o=!0}continue}const f=W1(8&i?"class":l,r,ig(n),t);if(-1===f){if(ba(i))return!1;o=!0;continue}if(""!==c){let p;p=f>s?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==sf(g,c,0)||2&i&&c!==p){if(ba(i))return!1;o=!0}}}}else{if(!o&&!ba(i)&&!ba(l))return!1;if(o&&ba(l))continue;o=!1,i=l|1&i}}return ba(i)||o}function ba(n){return 0==(1&n)}function W1(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function RC(n,e,t=!1){for(let i=0;i<e.length;i++)if(G1(n,e[i],t))return!0;return!1}function K1(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function kC(n,e){return n?":not("+e.trim()+")":e}function Z1(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ba(o)&&(e+=kC(s,r),r=""),i=o,s=s||!ba(i);t++}return""!==r&&(e+=kC(s,r)),e}const Ot={};function q(n){FC(Tn(),Te(),Ms()+n,Lh())}function FC(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Ap(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Dp(e,s,0,t)}Hs(t)}function Qa(n,e){return n<<17|e<<2}function Bt(n){return n>>17&32767}function qi(n){return 2|n}function Fl(n){return(131068&n)>>2}function Ja(n,e){return-131069&n|e<<2}function gy(n){return 1|n}function $C(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];v_(r),o.contentQueries(2,e[s],s)}}}function af(n,e,t,i,r,s,o,a,l,c){const d=e.blueprint.slice();return d[0]=r,d[2]=140|i,g_(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[16]=2==e.type?n[16]:d,d}function jd(n,e,t,i,r){let s=n.data[e];if(null===s)s=function(n,e,t,i,r){const s=m_(),o=dr(),l=n.data[e]=function(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),qt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function(){const n=qt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ja(s,!0),s}function Hd(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function lf(n,e,t){zh(e);try{const i=n.viewQuery;null!==i&&Iy(1,i,t);const r=n.template;null!==r&&GC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&$C(n,e),n.staticViewQueries&&Iy(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)TT(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,vn()}}function $d(n,e,t,i){const r=e[2];if(256==(256&r))return;zh(e);const s=Lh();try{g_(e),function(n){qt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&GC(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Ap(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Dp(e,c,0,null),b_(e,0)}if(function(n){for(let e=Bd(n);null!==e;e=sy(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&wp(s,1),r[2]|=1024}}}(e),function(n){for(let e=Bd(n);null!==e;e=sy(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];vd(i)&&$d(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&$C(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Ap(e,c)}else{const c=n.contentHooks;null!==c&&Dp(e,c,1),b_(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Hs(~r);else{const s=r,o=t[++i],a=t[++i];bd(o,s),a(2,e[s])}}}finally{Hs(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)MT(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Iy(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&Ap(e,c)}else{const c=n.viewHooks;null!==c&&Dp(e,c,2),b_(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,wp(e[3],-1))}finally{vn()}}function uT(n,e,t,i){const r=e[10],s=!Lh(),o=Al(e);try{s&&!o&&r.begin&&r.begin(),o&&lf(n,e,i),$d(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function GC(n,e,t,i,r){const s=Ms(),o=2&i;try{Hs(-1),o&&e.length>20&&FC(n,e,20,Lh()),t(i,r)}finally{Hs(s)}}function WC(n,e,t){if(a_(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function cf(n,e,t){!E0()||(function(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||us(t,e),Xr(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=ha(l);c&&CT(e,t,l);const d=xd(e,n,a,t);Xr(d,e),null!==o&&wT(0,a-r,d,l,0,o),c&&(cs(t.index,e)[8]=d)}}(n,e,t,xs(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=qt.lFrame.currentDirectiveIndex;try{Hs(o);for(let l=i;l<r;l++){const c=n.data[l],d=e[l];__(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&tw(c,d)}}finally{Hs(-1),__(a)}}(n,e,t))}function wy(n,e,t=xs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function ag(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=lg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function lg(n,e,t,i,r,s,o,a,l,c){const d=20+i,f=d+r,p=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ot);return t}(d,f),g="function"==typeof c?c():c;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function YC(n,e,t,i){const r=sw(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&ug(n).push(i,r.length-1))}function XC(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function yo(n,e,t,i,r,s,o,a){const l=xs(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[i])?(ow(n,t,d,i,r),md(e)&&function(n,e){const t=cs(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,Ti(s)?s.setProperty(l,i,r):w_(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Ey(n,e,t,i){let r=!1;if(E0()){const s=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];RC(t,o.selectors,!1)&&(r||(r=[]),Cc(us(t,e),n,o.type),ha(o)?(nw(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,Sy(t,n.data.length,s.length);for(let d=0;d<s.length;d++){const f=s[d];f.providersResolver&&f.providersResolver(f)}let a=!1,l=!1,c=Hd(n,e,s.length,null);for(let d=0;d<s.length;d++){const f=s[d];t.mergedAttrs=Hh(t.mergedAttrs,f.hostAttrs),xy(n,t,e,c,f),bT(c,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const d=r[c],f=d.inputs,p=null===s||ig(e)?null:ET(f,s);o.push(p),a=XC(f,c,a),l=XC(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new $("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Hh(t.mergedAttrs,t.attrs),r}function ew(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function tw(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function nw(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function bT(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ha(e)&&(t[""]=n)}}function Sy(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function xy(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=vc(r.type)),o=new jh(s,ha(r),null);n.blueprint[i]=o,t[i]=o,ew(n,e,0,i,Hd(n,t,r.hostVars,Ot),r)}function CT(n,e,t){const i=xs(e,n),r=ag(t),s=n[10],o=cg(n,af(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function tl(n,e,t,i,r,s){const o=xs(n,e);!function(n,e,t,i,r,s,o){if(null==s)Ti(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?fe(s):o(s,i||"",r);Ti(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function wT(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],f=o[l++];null!==a?i.setInput(t,f,c,d):t[d]=f}}}function ET(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function iw(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function MT(n,e){const t=cs(e,n);if(vd(t)){const i=t[1];80&t[2]?$d(i,t,i.template,t[8]):t[5]>0&&Ty(t)}}function Ty(n){for(let i=Bd(n);null!==i;i=sy(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];$d(o,s,o.template,s[8])}else s[5]>0&&Ty(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=cs(t[i],n);vd(r)&&r[5]>0&&Ty(r)}}function TT(n,e){const t=cs(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),lf(i,t,t[8])}function cg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Ay(n){for(;n;){n[2]|=64;const e=nf(n);if(y0(n)&&!e)return n;n=e}return null}function Oy(n,e,t){const i=e[10];i.begin&&i.begin();try{$d(n,e,n.template,t)}catch(r){throw Ry(e,r),r}finally{i.end&&i.end()}}function rw(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Z_(t),r=i[1];uT(r,i,r.template,t)}}(n[8])}function Iy(n,e,t){v_(0),e(n,t)}const PT=(()=>Promise.resolve(null))();function sw(n){return n[7]||(n[7]=[])}function ug(n){return n.cleanup||(n.cleanup=[])}function Py(n,e,t){return(null===n||ha(n))&&(t=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Ry(n,e){const t=n[9],i=t?t.get(Vo,null):null;i&&i.handleError(e)}function ow(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Nl(n,e,t){const i=kh(e,n);!function(n,e,t){Ti(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function dg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Y(r,a):2==s&&(i=Y(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const Ru=new Ce("INJECTOR",-1);class Os{get(e,t=Mu){if(t===Mu){const i=new Error(`NullInjectorError: No provider for ${G(e)}!`);throw i.name="NullInjectorError",i}return t}}const ku=new Ce("Set Injector scope."),uf={},kT={};let Fy;function aw(){return void 0===Fy&&(Fy=new Os),Fy}function lw(n,e=null,t=null,i){return new Ly(n,t,e||aw(),i)}class Ly{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&Fo(t,a=>this.processProvider(a,e,t)),Fo([e],a=>this.processInjectorType(a,[],s)),this.records.set(Ru,Fu(void 0,this));const o=this.records.get(ku);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:G(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Mu,i=xt.Default){this.assertNotDestroyed();const r=Od(this),s=ca(void 0);try{if(!(i&xt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ce}(e)&&nr(e);a=l&&this.injectableDefInScope(l)?Fu(By(e),uf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&xt.Self?aw():this.parent).get(e,t=i&xt.Optional&&t===Mu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[xc]=o[xc]||[]).unshift(G(e)),r)throw o;return Ts(o,e,"R3InjectorError",this.source)}throw o}finally{ca(s),Od(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(G(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=D(e)))return!1;let r=gu(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=gu(s)),null==r)return!1;if(null!=r.imports&&!a){let d;i.push(o);try{Fo(r.imports,f=>{this.processInjectorType(f,t,i)&&(void 0===d&&(d=[]),d.push(f))})}finally{}if(void 0!==d)for(let f=0;f<d.length;f++){const{ngModule:p,providers:g}=d[f];Fo(g,_=>this.processProvider(_,p,g||gi))}}this.injectorDefTypes.add(o);const l=vc(o)||(()=>new o);this.records.set(o,Fu(l,uf));const c=r.providers;if(null!=c&&!a){const d=e;Fo(c,f=>this.processProvider(f,d,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Pc(e=D(e))?e:D(e&&e.provide);const s=function(n,e,t){return uw(n)?Fu(void 0,n.useValue):Fu(cw(n),uf)}(e);if(Pc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Fu(void 0,uf,!0),o.factory=()=>Au(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===uf&&(t.value=kT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=D(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function By(n){const e=nr(n),t=null!==e?e.factory:vc(n);if(null!==t)return t;if(n instanceof Ce)throw new Error(`Token ${G(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=Ec(e,"?");throw new Error(`Can't resolve all parameters for ${G(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[la]||n[Va]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function cw(n,e,t){let i;if(Pc(n)){const r=D(n);return vc(r)||By(r)}if(uw(n))i=()=>D(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Au(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>I(D(n.useExisting));else{const r=D(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return vc(r)||By(r);i=()=>new r(...Au(n.deps))}return i}function Fu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uw(n){return null!==n&&"object"==typeof n&&Vp in n}function Pc(n){return"function"==typeof n}const dw=function(n,e,t){return function(n,e=null,t=null,i){const r=lw(n,e,t,i);return r._resolveInjectorDefTypes(),r}({name:t},e,n,t)};class kt{static create(e,t){return Array.isArray(e)?dw(e,t,""):dw(e.providers,e.parent,e.name||"")}}function P9(n,e){Tp(Z_(n)[1],Mr())}function vt(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ha(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=XT(n.inputs),o.declaredInputs=XT(n.declaredInputs),o.outputs=XT(n.outputs);const a=r.hostBindings;a&&N9(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&k9(n,l),c&&F9(n,c),du(n.inputs,r.inputs),du(n.declaredInputs,r.declaredInputs),du(n.outputs,r.outputs),ha(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===vt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Hh(r.hostAttrs,t=Hh(t,r.hostAttrs))}}(i)}function XT(n){return n===hd?{}:n===gi?[]:n}function k9(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function F9(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function N9(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}kt.THROW_IF_NOT_FOUND=Mu,kt.NULL=new Os,kt.\u0275prov=ue({token:kt,providedIn:"any",factory:()=>I(Ru)}),kt.__NG_ELEMENT_ID__=-1;let mw=null;function hg(){if(!mw){const n=pn.Symbol;if(n&&n.iterator)mw=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(mw=i)}}}return mw}class Bl{constructor(e){this.wrapped=e}static wrap(e){return new Bl(e)}static unwrap(e){return Bl.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Bl}}function Hy(n){return!!KT(n)&&(Array.isArray(n)||!(n instanceof Map)&&hg()in n)}function KT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function kc(n,e,t){return n[e]=t}function qs(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function df(n,e,t,i){const r=qs(n,e,t);return qs(n,e+1,i)||r}function an(n,e,t,i){const r=Te();return qs(r,ga(),e)&&(Tn(),tl(ir(),r,n,e,t,i)),an}function pg(n,e,t,i){return qs(n,ga(),t)?e+fe(t)+i:Ot}function wt(n,e,t,i,r,s,o,a){const l=Te(),c=Tn(),d=n+20,f=c.firstCreatePass?function(n,e,t,i,r,s,o,a,l){const c=e.consts,d=jd(e,n,4,o||null,pa(c,a));Ey(e,t,d,pa(c,l)),Tp(e,d);const f=d.tViews=lg(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,i,r,s,o):c.data[d];ja(f,!1);const p=l[11].createComment("");tg(c,l,p,f),Xr(p,l),cg(l,l[d]=iw(p,l,p,f)),_d(f)&&cf(c,l,f),null!=o&&wy(l,f,a)}function ms(n){return yd(qt.lFrame.contextLView,20+n)}function E(n,e=xt.Default){const t=Te();return null===t?I(n,e):Gh(Mr(),t,D(n),e)}function re(n,e,t){const i=Te();return qs(i,ga(),e)&&yo(Tn(),ir(),i,n,e,i[11],t,!1),re}function tA(n,e,t,i,r){const o=r?"class":"style";ow(n,t,e.inputs[o],o,i)}function F(n,e,t,i){const r=Te(),s=Tn(),o=20+n,a=r[11],l=r[o]=ay(a,e,qt.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,i,r,s,o){const a=e.consts,c=jd(e,n,2,r,pa(a,s));return Ey(e,t,c,pa(a,o)),null!==c.attrs&&dg(c,c.attrs,!1),null!==c.mergedAttrs&&dg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];ja(c,!0);const d=c.mergedAttrs;null!==d&&Op(a,l,d);const f=c.classes;null!==f&&fy(a,l,f);const p=c.styles;null!==p&&OC(a,l,p),64!=(64&c.flags)&&tg(s,r,l,c),0===qt.lFrame.elementDepthCount&&Xr(l,r),qt.lFrame.elementDepthCount++,_d(c)&&(cf(s,r,c),WC(s,c,r)),null!==i&&wy(r,c)}function N(){let n=Mr();dr()?Fr():(n=n.parent,ja(n,!1));const e=n;qt.lFrame.elementDepthCount--;const t=Tn();t.firstCreatePass&&(Tp(t,n),a_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&tA(t,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&tA(t,e,Te(),e.stylesWithoutHost,!1)}function rt(n,e,t,i){F(n,e,t,i),N()}function hf(n,e,t){const i=Te(),r=Tn(),s=n+20,o=r.firstCreatePass?function(n,e,t,i,r){const s=e.consts,o=pa(s,i),a=jd(e,n,8,"ng-container",o);return null!==o&&dg(a,o,!0),Ey(e,t,a,pa(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];ja(o,!0);const a=i[s]=i[11].createComment("");tg(r,i,a,o),Xr(a,i),_d(o)&&(cf(r,i,o),WC(r,o,i)),null!=t&&wy(i,o)}function ff(){let n=Mr();const e=Tn();dr()?Fr():(n=n.parent,ja(n,!1)),e.firstCreatePass&&(Tp(e,n),a_(n)&&e.queries.elementEnd(n))}function rr(){return Te()}function Gy(n){return!!n&&"function"==typeof n.then}function ZN(n){return!!n&&"function"==typeof n.subscribe}const vw=ZN;function we(n,e,t,i){const r=Te(),s=Tn(),o=Mr();return QN(s,r,r[11],o,n,e,!!t,i),we}function Wy(n,e){const t=Mr(),i=Te(),r=Tn();return QN(r,i,Py(y_(r.data),t,i),t,n,e,!1),Wy}function QN(n,e,t,i,r,s,o,a){const l=_d(i),d=n.firstCreatePass&&ug(n),f=e[8],p=sw(e);let g=!0;if(3&i.type||a){const v=xs(i,e),C=a?a(v):v,w=p.length,M=a?k=>a(Wi(k[i.index])):i.index;if(Ti(t)){let k=null;if(!a&&l&&(k=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,g=!1;else{s=nA(i,e,f,s,!1);const V=t.listen(C,r,s);p.push(s,V),d&&d.push(r,M,w,w+1)}}else s=nA(i,e,f,s,!0),C.addEventListener(r,s,o),p.push(s),d&&d.push(r,M,w,o)}else s=nA(i,e,f,s,!1);const _=i.outputs;let y;if(g&&null!==_&&(y=_[r])){const v=y.length;if(v)for(let C=0;C<v;C+=2){const j=e[y[C]][y[C+1]].subscribe(s),ee=p.length;p.push(s,j),d&&d.push(r,i.index,ee,-(ee+1))}}}function JN(n,e,t,i){try{return!1!==t(i)}catch(r){return Ry(n,r),!1}}function nA(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?cs(n.index,e):e;0==(32&e[2])&&Ay(a);let l=JN(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=JN(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function nt(n=1){return function(n){return(qt.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,qt.lFrame.contextLView))[8]}(n)}function g7(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?RC(n,s,!0):K1(i,s))return r}else t=r}return t}function Ar(n){const e=Te()[16][6];if(!e.projection){const i=e.projection=Ec(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?g7(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function kn(n,e=0,t){const i=Te(),r=Tn(),s=jd(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Fr(),64!=(64&s.flags)&&function(n,e,t){hy(e[11],0,e,t,vC(n,t,e),EC(t.parent||e[6],t,e))}(r,i,s)}function qy(n,e,t){return iA(n,"",e,"",t),qy}function iA(n,e,t,i,r){const s=Te(),o=pg(s,e,t,i);return o!==Ot&&yo(Tn(),ir(),s,n,o,s[11],r,!1),iA}function c2(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Bt(s):Fl(s),l=!1;for(;0!==a&&(!1===l||o);){const d=n[a+1];y7(n[a],e)&&(l=!0,n[a+1]=i?gy(d):qi(d)),a=i?Bt(d):Fl(d)}l&&(n[t+1]=i?qi(s):gy(s))}function y7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Yr(n,e)>=0}const Zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function u2(n){return n.substring(Zr.key,Zr.keyEnd)}function d2(n,e){const t=Zr.textEnd;return t===e?-1:(e=Zr.keyEnd=function(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Zr.key=e,t),Eg(n,e,t))}function Eg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function pf(n,e,t){return zl(n,e,t,!1),pf}function lt(n,e){return zl(n,e,null,!0),lt}function Vn(n){Ul(po,Fc,n,!0)}function Fc(n,e){for(let t=function(n){return function(n){Zr.key=0,Zr.keyEnd=0,Zr.value=0,Zr.valueEnd=0,Zr.textEnd=n.length}(n),d2(n,Eg(n,0,Zr.textEnd))}(e);t>=0;t=d2(e,t))po(n,u2(e),!0)}function zl(n,e,t,i){const r=Te(),s=Tn(),o=ho(2);s.firstUpdatePass&&_2(s,n,o,i),e!==Ot&&qs(r,o,e)&&v2(s,s.data[Ms()],r,r[11],n,r[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=G(hs(n)))),n}(e,t),i,o)}function Ul(n,e,t,i){const r=Tn(),s=ho(2);r.firstUpdatePass&&_2(r,null,s,i);const o=Te();if(t!==Ot&&qs(o,s,t)){const a=r.data[Ms()];if(C2(a,i)&&!m2(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Y(l,t||"")),tA(r,a,o,t,i)}else!function(n,e,t,i,r,s,o,a){r===Ot&&(r=gi);let l=0,c=0,d=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==d||null!==f;){const p=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let y,_=null;d===f?(l+=2,c+=2,p!==g&&(_=f,y=g)):null===f||null!==d&&d<f?(l+=2,_=d):(c+=2,_=f,y=g),null!==_&&v2(n,e,t,i,_,y,o,a),d=l<r.length?r[l]:null,f=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(n,e,t){if(null==t||""===t)return gi;const i=[],r=hs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function m2(n,e){return e>=n.expandoStartIndex}function _2(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Ms()],o=m2(n,t);C2(s,i)&&null===e&&!o&&(e=!1),e=function(n,e,t,i){const r=y_(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Yy(t=rA(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=rA(r,n,e,t,i),null===s){let l=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Fl(i))return n[Bt(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=rA(null,n,e,l[1],i),l=Yy(l,e.attrs,i),function(n,e,t,i){n[Bt(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Yy(i,n[s].hostAttrs,t);return Yy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Bt(o),l=Fl(o);n[i]=t;let d,c=!1;if(Array.isArray(t)){const f=t;d=f[1],(null===d||Yr(f,d)>0)&&(c=!0)}else d=t;if(r)if(0!==l){const p=Bt(n[a+1]);n[i+1]=Qa(p,a),0!==p&&(n[p+1]=Ja(n[p+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Qa(a,0),0!==a&&(n[a+1]=Ja(n[a+1],i)),a=i;else n[i+1]=Qa(l,0),0===a?a=i:n[l+1]=Ja(n[l+1],i),l=i;c&&(n[i+1]=qi(n[i+1])),c2(n,d,i,!0),c2(n,d,i,!1),function(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Yr(s,e)>=0&&(t[i+1]=gy(t[i+1]))}(e,d,n,i,s),o=Qa(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function rA(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Yy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Yy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),po(n,o,!!t||e[++s]))}return void 0===n?null:n}function v2(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];bw(function(n){return 1==(1&n)}(c)?b2(l,e,t,r,Fl(c),o):void 0)||(bw(s)||function(n){return 2==(2&n)}(c)&&(s=b2(l,null,t,r,a,o)),function(n,e,t,i,r){const s=Ti(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:_o.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=_o.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,kh(Ms(),t),r,s))}function b2(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),d=c?l[1]:l,f=null===d;let p=t[r+1];p===Ot&&(p=f?gi:void 0);let g=f?R_(p,i):d===i?p:void 0;if(c&&!bw(g)&&(g=R_(l,i)),bw(g)&&(a=g,o))return a;const _=n[r+1];r=o?Bt(_):Fl(_)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=R_(l,i))}return a}function bw(n){return void 0!==n}function C2(n,e){return 0!=(n.flags&(e?16:32))}function Re(n,e=""){const t=Te(),i=Tn(),r=n+20,s=i.firstCreatePass?jd(i,r,1,e,null):i.data[r],o=t[r]=function(n,e){return Ti(n)?n.createText(e):n.createTextNode(e)}(t[11],e);tg(i,t,o,s),ja(s,!1)}function Ai(n){return _s("",n,""),Ai}function _s(n,e,t){const i=Te(),r=pg(i,n,e,t);return r!==Ot&&Nl(i,Ms(),r),_s}function Cw(n,e,t,i,r){const s=Te(),o=function(n,e,t,i,r,s){const a=df(n,js(),t,r);return ho(2),a?e+fe(t)+i+fe(r)+s:Ot}(s,n,e,t,i,r);return o!==Ot&&Nl(s,Ms(),o),Cw}function rl(n,e,t){const i=Te();return qs(i,ga(),e)&&yo(Tn(),ir(),i,n,e,i[11],t,!0),rl}function Sg(n,e,t){const i=Te();if(qs(i,ga(),e)){const s=Tn(),o=ir();yo(s,o,i,n,e,Py(y_(s.data),o,i),t,!0)}return Sg}const gf=void 0;var Z7=["en",[["a","p"],["AM","PM"],gf],[["AM","PM"],gf,gf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gf,"{1} 'at' {0}",gf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let xg={};function z2(n){return n in xg||(xg[n]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[n]),xg[n]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const ww="en-US";let U2=ww;function sA(n){$i(n,"Expected localeId to be defined"),"string"==typeof n&&(U2=n.toLowerCase().replace(/_/g,"-"))}function lA(n,e,t,i,r){if(n=D(n),Array.isArray(n))for(let s=0;s<n.length;s++)lA(n[s],e,t,i,r);else{const s=Tn(),o=Te();let a=Pc(n)?n:D(n.provide),l=cw(n);const c=Mr(),d=1048575&c.providerIndexes,f=c.directiveStart,p=c.providerIndexes>>20;if(Pc(n)||!n.multi){const g=new jh(l,r,E),_=uA(a,e,r?d:d+p,f);-1===_?(Cc(us(c,o),s,a),cA(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)):(t[_]=g,o[_]=g)}else{const g=uA(a,e,d+p,f),_=uA(a,e,d,d+p),y=g>=0&&t[g],v=_>=0&&t[_];if(r&&!v||!r&&!y){Cc(us(c,o),s,a);const C=function(n,e,t,i,r){const s=new jh(n,t,E);return s.multi=[],s.index=e,s.componentProviders=0,dL(s,r,i&&!t),s}(r?YY:qY,t.length,r,i,l);!r&&v&&(t[_].providerFactory=C),cA(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(C),o.push(C)}else cA(s,n,g>-1?g:_,dL(t[r?_:g],l,!r&&i));!r&&i&&v&&t[_].componentProviders++}}}function cA(n,e,t,i){const r=Pc(e);if(r||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const l=a.indexOf(t);-1===l?a.push(t,[i,o]):a[l+1].push(i,o)}else a.push(t,o)}}}function dL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function uA(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function qY(n,e,t,i){return dA(this.multi,[])}function YY(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=xd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),dA(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],dA(r,s);return s}function dA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ft(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=Tn();if(i.firstCreatePass){const r=ha(n);lA(t,i.data,i.blueprint,r,!0),lA(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class hL{}const pL="ngComponent";class ZY{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${G(n)}. Did you add it to @NgModule.entryComponents?`);return e[pL]=n,e}(e)}}class sl{}function Tw(...n){}function Tg(n,e){return new ot(xs(n,e))}sl.NULL=new ZY;const eX=function(){return Tg(Mr(),Te())};let ot=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=eX,n})();function gL(n){return n instanceof ot?n.nativeElement:n}class mf{}let Nc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>nX(),n})();const nX=function(){const n=Te(),t=cs(Mr().index,n);return function(n){return n[11]}(Oo(t)?t:n)};let fA=(()=>{class n{}return n.\u0275prov=ue({token:n,providedIn:"root",factory:()=>null}),n})();class Nu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const mL=new Nu("12.2.5");class _L{constructor(){}supports(e){return Hy(e)}create(e){return new oX(e)}}const sX=(n,e)=>e;class oX{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sX}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<vL(i,r,s)?t:i,a=vL(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const g=p<s.length?s[p]:s[p]=0,_=g+p;d<=_&&_<c&&(s[p]=g+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Hy(e))throw new Error(`Error trying to diff '${G(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[hg()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new aX(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new yL),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class aX{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lX{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class yL{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new lX,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vL(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class bL{constructor(){}supports(e){return e instanceof Map||KT(e)}create(){return new cX}}class cX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||KT(e)))throw new Error(`Error trying to diff '${G(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new uX(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class uX{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function CL(){return new Ag([new _L])}let Ag=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||CL()),deps:[[n,new Ya,new _r]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=ue({token:n,providedIn:"root",factory:CL}),n})();function wL(){return new Dg([new bL])}let Dg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||wL()),deps:[[n,new Ya,new _r]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=ue({token:n,providedIn:"root",factory:wL}),n})();function Aw(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Wi(s)),Io(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Aw(l[1],l,c,i)}const o=t.type;if(8&o)Aw(n,e,t.child,i);else if(32&o){const a=iy(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=TC(e,t);if(Array.isArray(a))i.push(...a);else{const l=nf(e[16]);Aw(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Jy{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Aw(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Io(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(ly(e,i),Ol(t,i))}this._attachedToViewContainer=!1}cy(this._lView[1],this._lView)}onDestroy(e){YC(this._lView[1],this._lView,null,e)}markForCheck(){Ay(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Oy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){Sp(!0);try{Oy(n,e,t)}finally{Sp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){zd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class hX extends Jy{constructor(e){super(e),this._view=e}detectChanges(){rw(this._view)}checkNoChanges(){!function(n){Sp(!0);try{rw(n)}finally{Sp(!1)}}(this._view)}get context(){return null}}const pX=function(n){return function(n,e,t){if(md(n)&&!t){const i=cs(n.index,e);return new Jy(i,i)}return 47&n.type?new Jy(e[16],e):null}(Mr(),Te(),16==(16&n))};let zn=(()=>{class n{}return n.__NG_ELEMENT_ID__=pX,n})();const _X=[new bL],vX=new Ag([new _L]),bX=new Dg(_X),wX=function(){return Dw(Mr(),Te())};let Ys=(()=>{class n{}return n.__NG_ELEMENT_ID__=wX,n})();const EX=Ys,SX=class extends EX{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=af(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),lf(t,i,e),new Jy(i)}};function Dw(n,e){return 4&n.type?new SX(e,n,Tg(n,e)):null}class Lc{}const TX=function(){return ML(Mr(),Te())};let Qr=(()=>{class n{}return n.__NG_ELEMENT_ID__=TX,n})();const DX=Qr,SL=class extends DX{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Tg(this._hostTNode,this._hostLView)}get injector(){return new Ro(this._hostTNode,this._hostLView)}get parentInjector(){const e=$h(this._hostTNode,this._hostLView);if(A0(e)){const t=$a(e,this._hostLView),i=wd(e);return new Ro(t[1].data[i+8],t)}return new Ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=xL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=i||this.parentInjector;if(!s&&null==e.ngModule&&o){const l=o.get(Lc,null);l&&(s=l)}const a=e.create(o,r,void 0,s);return this.insert(a.hostView,t),a}insert(e,t){const i=e._lView,r=i[1];if(function(n){return Io(n[3])}(i)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const f=i[3],p=new SL(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Yh(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=ng(s,o),l=i[11],c=eg(l,o[7]);return null!==c&&function(n,e,t,i,r,s){i[0]=r,i[6]=e,zd(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),Yh(pA(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=xL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=ly(this._lContainer,t);i&&(Ol(pA(this._lContainer),t),cy(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=ly(this._lContainer,t);return i&&null!=Ol(pA(this._lContainer),t)?new Jy(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function xL(n){return n[8]}function pA(n){return n[8]||(n[8]=[])}function ML(n,e){let t;const i=e[n.index];if(Io(i))t=i;else{let r;if(8&n.type)r=Wi(i);else{const s=e[11];r=s.createComment("");const o=xs(n,e);Za(s,eg(s,o),r,function(n,e){return Ti(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=iw(i,e,r,n),cg(e,t)}return new SL(t,n,e)}const Rg={};class WL extends sl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Xn(e);return new YL(t,this.ngModule)}}function qL(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const xK=new Ce("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>dC});class YL extends hL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(Z1).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return qL(this.componentDef.inputs)}get outputs(){return qL(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const s=n.get(t,Rg,r);return s!==Rg||i===Rg?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(mf,yu),a=s.get(fA,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=i?function(n,e,t){if(Ti(n))return n.selectRootElement(e,t===Ue.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):ay(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?Hn:"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),f=this.componentDef.onPush?576:528,p=function(n,e){return{components:[],scheduler:n||dC,clean:PT,playerHandler:e||null,flags:0}}(),g=lg(0,null,null,1,0,null,null,null,null,null),_=af(null,g,p,f,null,null,o,l,a,s);let y,v;zh(_);try{const C=function(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=jd(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(dg(l,c,!0),null!==n&&(Op(r,n,c),null!==l.classes&&fy(r,n,l.classes),null!==l.styles&&OC(r,n,l.styles)));const d=i.createRenderer(n,e),f=af(t,ag(e),null,e.onPush?64:16,t[20],l,i,d,s||null,null);return o.firstCreatePass&&(Cc(us(l,t),o,e.type),nw(o,l),Sy(l,t.length,1)),cg(t,f),t[20]=f}(d,this.componentDef,_,o,l);if(d)if(i)Op(l,d,["ng-version",mL.full]);else{const{attrs:w,classes:M}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ba(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);w&&Op(l,d,w),M&&M.length>0&&fy(l,d,M.join(" "))}if(v=p_(g,20),void 0!==t){const w=v.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const k=t[M];w.push(null!=k?Array.from(k):null)}}y=function(n,e,t,i,r){const s=t[1],o=function(n,e,t){const i=Mr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),xy(n,i,e,Hd(n,e,1,null),t));const r=xd(e,n,i.directiveStart,i);Xr(r,e);const s=xs(i,e);return s&&Xr(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=Mr();e.contentQueries(1,o,l.directiveStart)}const a=Mr();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Hs(a.index),ew(t[1],a,0,a.directiveStart,a.directiveEnd,e),tw(e,o)),o}(C,this.componentDef,_,p,[P9]),lf(g,_,null)}finally{vn()}return new AK(this.componentType,y,Tg(v,_),_,v)}}class AK extends class{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new hX(r),this.componentType=e}get injector(){return new Ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const kg=new Map;class IK extends Lc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new WL(this);const i=co(e),r=function(n){return n[gM]||null}(e);r&&sA(r),this._bootstrapComponents=Ka(i.bootstrap),this._r3Injector=lw(e,t,[{provide:Lc,useValue:this},{provide:sl,useValue:this.componentFactoryResolver}],G(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=kt.THROW_IF_NOT_FOUND,i=xt.Default){return e===kt||e===Lc||e===Ru?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class TA extends class{}{constructor(e){super(),this.moduleType=e,null!==co(e)&&function(n){const e=new Set;!function t(i){const r=co(i,!0),s=r.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${G(e)} vs ${G(e.name)}`)}(s,kg.get(s),i),kg.set(s,i));const o=Ka(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new IK(this.moduleType,e)}}function av(n,e,t){const i=Gr()+n,r=Te();return r[i]===Ot?kc(r,i,t?e.call(t):e()):function(n,e){return n[e]}(r,i)}function Fg(n,e,t,i){return ZL(Te(),Gr(),n,e,t,i)}function lv(n,e){const t=n[e];return t===Ot?void 0:t}function ZL(n,e,t,i,r,s){const o=e+t;return qs(n,o,r)?kc(n,o+1,s?i.call(s,r):i(r)):lv(n,o+1)}function hn(n,e){const t=Tn();let i;const r=n+20;t.firstCreatePass?(i=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}throw new $("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=vc(i.type)),o=ca(E);try{const a=Ip(!1),l=s();return Ip(a),function(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Te(),r,l),l}finally{ca(o)}}function gn(n,e,t){const i=n+20,r=Te(),s=yd(r,i);return uv(r,cv(r,i)?ZL(r,Gr(),e,s.transform,t,s):s.transform(t))}function nB(n,e,t,i){const r=n+20,s=Te(),o=yd(s,r);return uv(s,cv(s,r)?function(n,e,t,i,r,s,o){const a=e+t;return df(n,a,r,s)?kc(n,a+2,o?i.call(o,r,s):i(r,s)):lv(n,a+2)}(s,Gr(),e,o.transform,t,i,o):o.transform(t,i))}function cv(n,e){return n[1].data[e].pure}function uv(n,e){return Bl.isWrapped(e)&&(e=Bl.unwrap(e),n[js()]=Ot),e}function AA(n){return e=>{setTimeout(n,void 0,e)}}const Ve=class extends xe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const f=e;a=null===(r=f.next)||void 0===r?void 0:r.bind(f),l=null===(s=f.error)||void 0===s?void 0:s.bind(f),c=null===(o=f.complete)||void 0===o?void 0:o.bind(f)}this.__isAsync&&(l=AA(l),a&&(a=AA(a)),c&&(c=AA(c)));const d=super.subscribe({next:a,error:l,complete:c});return e instanceof Se&&e.add(d),d}};function GK(){return this._results[hg()]()}class vf{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=hg(),i=vf.prototype;i[t]||(i[t]=GK)}get changes(){return this._changes||(this._changes=new Ve)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=ko(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class DA{constructor(e){this.queryList=e,this.matches=null}clone(){return new DA(this.queryList)}setDirty(){this.queryList.setDirty()}}class OA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new OA(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==aB(e,t).matches&&this.queries[t].setDirty()}}class iB{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class IA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new IA(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class PA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new PA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,YK(t,s)),this.matchTNodeWithReadOption(e,t,Sd(t,e,s,!1,!1))}else i===Ys?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Sd(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ot||r===Qr||r===Ys&&4&t.type)this.addMatch(t.index,-2);else{const s=Sd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function YK(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function KK(n,e,t,i){return-1===t?function(n,e){return 11&n.type?Tg(n,e):4&n.type?Dw(n,e):null}(e,n):-2===t?function(n,e,t){return t===ot?Tg(e,n):t===Ys?Dw(e,n):t===Qr?ML(e,n):void 0}(n,e,i):xd(n,n[1],t,e)}function rB(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:KK(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function RA(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=rB(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let f=10;f<d.length;f++){const p=d[f];p[17]===p[3]&&RA(p[1],p,c,i)}if(null!==d[9]){const f=d[9];for(let p=0;p<f.length;p++){const g=f[p];RA(g[1],g,c,i)}}}}}return i}function It(n){const e=Te(),t=Tn(),i=S0();v_(i+1);const r=aB(t,i);if(n.dirty&&Al(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?RA(t,e,i,[]):rB(t,e,r,i);n.reset(s,gL),n.notifyOnChanges()}return!0}return!1}function ii(n,e,t){const i=Tn();i.firstCreatePass&&(oB(i,new iB(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),sB(i,Te(),e)}function Fi(n,e,t,i){const r=Tn();if(r.firstCreatePass){const s=Mr();oB(r,new iB(e,t,i),s.index),function(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}sB(r,Te(),t)}function Pt(){return function(n,e){return n[19].queries[e].queryList}(Te(),S0())}function sB(n,e,t){const i=new vf(4==(4&t));YC(n,e,i,i.destroy),null===e[19]&&(e[19]=new OA),e[19].queries.push(new DA(i))}function oB(n,e,t){null===n.queries&&(n.queries=new IA),n.queries.track(new PA(e,t))}function aB(n,e){return n.queries.getByIndex(e)}function kw(n,e){return Dw(n,e)}const bf=new Ce("Application Initializer");let Lg=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Tw,this.reject=Tw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Gy(s))t.push(s);else if(vw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(I(bf,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const hv=new Ce("AppId"),MZ={provide:hv,useFactory:function(){return`${VA()}${VA()}${VA()}`},deps:[]};function VA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xB=new Ce("Platform Initializer"),ll=new Ce("Platform ID"),fv=new Ce("appBootstrapListener");let Lw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const Lu=new Ce("LocaleId"),MB=new Ce("DefaultCurrencyCode");class AZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const zA=function(n){return new TA(n)},DZ=zA,OZ=function(n){return Promise.resolve(zA(n))},TB=function(n){const e=zA(n),i=Ka(co(n).declarations).reduce((r,s)=>{const o=Xn(s);return o&&r.push(new YL(o)),r},[]);return new AZ(e,i)},IZ=TB,PZ=function(n){return Promise.resolve(TB(n))};let Cf=(()=>{class n{constructor(){this.compileModuleSync=DZ,this.compileModuleAsync=OZ,this.compileModuleAndAllComponentsSync=IZ,this.compileModuleAndAllComponentsAsync=PZ}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const AB=new Ce("compilerOptions"),kZ=(()=>Promise.resolve(0))();function UA(n){"undefined"==typeof Zone?kZ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ft{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ve(!1),this.onMicrotaskEmpty=new Ve(!1),this.onStable=new Ve(!1),this.onError=new Ve(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=pn.requestAnimationFrame,e=pn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(pn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,HA(n),n.isCheckStableRunning=!0,jA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),HA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return DB(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),OB(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return DB(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),OB(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,HA(n),jA(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ft.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ft.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,NZ,Tw,Tw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const NZ={};function jA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function HA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function DB(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function OB(n){n._nesting--,jA(n)}class VZ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ve,this.onMicrotaskEmpty=new Ve,this.onStable=new Ve,this.onError=new Ve}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let $A=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ft.assertNotInAngularZone(),UA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())UA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(I(ft))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),IB=(()=>{class n{constructor(){this._applications=new Map,GA.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return GA.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class zZ{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let GA=new zZ,PB=!0,RB=!1;function Co(){return RB=!0,PB}let $l;const kB=new Ce("AllowMultipleToken");function FB(n,e,t=[]){const i=`Platform: ${e}`,r=new Ce(i);return(s=[])=>{let o=qA();if(!o||o.injector.get(kB,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:ku,useValue:"platform"});!function(n){if($l&&!$l.destroyed&&!$l.injector.get(kB,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$l=n.get(NB);const e=n.get(xB,null);e&&e.forEach(t=>t())}(kt.create({providers:a,name:i}))}return function(n){const e=qA();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function qA(){return $l&&!$l.destroyed?$l:null}let NB=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new VZ:("zone.js"===n?void 0:n)||new ft({enableLongStackTrace:Co(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:ft,useValue:a}];return a.run(()=>{const c=kt.create({providers:l,parent:this.injector,name:t.moduleType.name}),d=t.create(c),f=d.injector.get(Vo,null);if(!f)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const p=a.onError.subscribe({next:g=>{f.handleError(g)}});d.onDestroy(()=>{YA(this._modules,d),p.unsubscribe()})}),function(n,e,t){try{const i=t();return Gy(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(f,a,()=>{const p=d.injector.get(Lg);return p.runInitializers(),p.donePromise.then(()=>(sA(d.injector.get(Lu,ww)||ww),this._moduleDoBootstrap(d),d))})})}bootstrapModule(t,i=[]){const r=LB({},i);return function(n,e,t){const i=new TA(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(qd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${G(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(I(kt))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();function LB(n,e){return Array.isArray(e)?e.reduce(LB,n):Object.assign(Object.assign({},n),e)}let qd=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new le(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new le(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{ft.assertNotInAngularZone(),UA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{ft.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),f.unsubscribe()}});this.isStable=ki(a,l.pipe(Vs()))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof hL?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Lc),a=r.create(kt.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get($A,null),d=c&&a.injector.get(IB);return c&&d&&d.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),YA(this.components,a),d&&d.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;YA(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fv,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(I(ft),I(kt),I(Vo),I(sl),I(Lg))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();function YA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const fQ=FB(null,"core",[{provide:ll,useValue:"unknown"},{provide:NB,deps:[kt]},{provide:IB,deps:[]},{provide:Lw,deps:[]}]),yQ=[{provide:qd,useClass:qd,deps:[ft,kt,Vo,sl,Lg]},{provide:xK,deps:[ft],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Lg,useClass:Lg,deps:[[new _r,bf]]},{provide:Cf,useClass:Cf,deps:[]},MZ,{provide:Ag,useFactory:function(){return vX},deps:[]},{provide:Dg,useFactory:function(){return bX},deps:[]},{provide:Lu,useFactory:function(n){return sA(n=n||"undefined"!=typeof $localize&&$localize.locale||ww),n},deps:[[new Pd(Lu),new _r,new Ya]]},{provide:MB,useValue:"USD"}];let bQ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(I(qd))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:yQ}),n})(),Xw=null;function Bc(){return Xw}const ct=new Ce("DocumentToken");let Sf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({factory:vJ,token:n,providedIn:"platform"}),n})();function vJ(){return I(d3)}let d3=(()=>{class n extends Sf{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bc().getBaseHref(this._doc)}onPopState(t){const i=Bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Bc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){h3()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){h3()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({factory:CJ,token:n,providedIn:"platform"}),n})();function h3(){return!!window.history.pushState}function CJ(){return new d3(I(ct))}function cD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function f3(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Vu(n){return n&&"?"!==n[0]?"?"+n:n}let zg=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({factory:wJ,token:n,providedIn:"root"}),n})();function wJ(n){const e=I(ct).location;return new p3(I(Sf),e&&e.origin||"")}const uD=new Ce("appBaseHref");let p3=(()=>{class n extends zg{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Vu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Vu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Vu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(I(Sf),I(uD,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Ug=(()=>{class n{constructor(t,i){this._subject=new Ve,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=f3(g3(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Vu(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,g3(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vu(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vu(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.\u0275fac=function(t){return new(t||n)(I(zg),I(Sf))},n.normalizeQueryParams=Vu,n.joinWithSlash=cD,n.stripTrailingSlash=f3,n.\u0275prov=ue({factory:SJ,token:n,providedIn:"root"}),n})();function SJ(){return new Ug(I(zg),I(Sf))}function g3(n){return n.replace(/\/index.html$/,"")}var Nr=(()=>((Nr=Nr||{})[Nr.Zero=0]="Zero",Nr[Nr.One=1]="One",Nr[Nr.Two=2]="Two",Nr[Nr.Few=3]="Few",Nr[Nr.Many=4]="Many",Nr[Nr.Other=5]="Other",Nr))();const PJ=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=z2(e);if(t)return t;const i=e.split("-")[0];if(t=z2(i),t)return t;if("en"===i)return Z7;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[st.PluralCase]};class sE{}let aee=(()=>{class n extends sE{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(PJ(i||this.locale)(t)){case Nr.Zero:return"zero";case Nr.One:return"one";case Nr.Two:return"two";case Nr.Few:return"few";case Nr.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(I(Lu))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();function S3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let oE=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Hy(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${G(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(E(Ag),E(Dg),E(ot),E(Nc))},n.\u0275dir=ge({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class cee{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yl=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new cee(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new x3(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new x3(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(E(Qr),E(Ys),E(Ag))},n.\u0275dir=ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class x3{constructor(e,t){this.record=e,this.view=t}}let bs=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new dee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){M3("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){M3("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(E(Qr),E(Ys))},n.\u0275dir=ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dee{constructor(){this.$implicit=null,this.ngIf=null}}function M3(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${G(e)}'.`)}class vD{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let bv=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),bD=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new vD(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(E(Qr),E(Ys),E(bv,9))},n.\u0275dir=ge({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),T3=(()=>{class n{constructor(t,i,r){r._addDefault(new vD(t,i))}}return n.\u0275fac=function(t){return new(t||n)(E(Qr),E(Ys),E(bv,9))},n.\u0275dir=ge({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),D3=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(Dg),E(Nc))},n.\u0275dir=ge({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();function Xl(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${G(n)}'`)}class pee{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class gee{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const mee=new gee,_ee=new pee;let Uu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Gy(t))return mee;if(ZN(t))return _ee;throw Xl(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(E(zn,16))},n.\u0275pipe=as({name:"async",type:n,pure:!1}),n})();const Eee=/#/g;let O3=(()=>{class n{constructor(t){this._localization=t}transform(t,i,r){if(null==t)return"";if("object"!=typeof i||null===i)throw Xl(n,i);return i[function(n,e,t,i){let r=`=${n}`;if(e.indexOf(r)>-1||(r=t.getPluralCategory(n,i),e.indexOf(r)>-1))return r;if(e.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(t,Object.keys(i),this._localization,r)].replace(Eee,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(E(sE,16))},n.\u0275pipe=as({name:"i18nPlural",type:n,pure:!0}),n})(),I3=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=as({name:"json",type:n,pure:!1}),n})(),Sn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[{provide:sE,useClass:aee}]}),n})();const R3="browser";function xf(n){return n===R3}function ED(n){return"server"===n}class N3{}class SD extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){Xw||(Xw=n)}(new SD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Cv=Cv||document.querySelector("base"),Cv?Cv.getAttribute("href"):null);return null==t?null:function(n){aE=aE||document.createElement("a"),aE.setAttribute("href",n);const e=aE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Cv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return S3(document.cookie,e)}}let aE,Cv=null;const L3=new Ce("TRANSITION_ID"),zee=[{provide:bf,useFactory:function(n,e,t){return()=>{t.get(Lg).donePromise.then(()=>{const i=Bc(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[L3,ct,kt],multi:!0}];class xD{static init(){!function(n){GA=n}(new xD)}addToWindow(e){pn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},pn.getAllAngularTestabilities=()=>e.getAllTestabilities(),pn.getAllAngularRootElements=()=>e.getAllRootElements(),pn.frameworkStabilizers||(pn.frameworkStabilizers=[]),pn.frameworkStabilizers.push(i=>{const r=pn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Bc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Uee=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const wv=new Ce("EventManagerPlugins");let cE=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I(wv),I(ft))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class MD{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Bc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let V3=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Ev=(()=>{class n extends V3{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(z3),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(z3))}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();function z3(n){Bc().remove(n)}const TD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},AD=/%COMP%/g;function uE(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?uE(n,r,t):(r=r.replace(AD,n),t.push(r))}return t}function H3(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dE=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new DD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case Ue.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new nte(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case Ue.ShadowDom:return new ite(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=uE(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I(cE),I(Ev),I(hv))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class DD{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(TD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=TD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=TD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(_o.DashCase|_o.Important)?e.style.setProperty(t,i,r&_o.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&_o.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,H3(i)):this.eventManager.addEventListener(e,t,H3(i))}}class nte extends DD{constructor(e,t,i,r){super(e),this.component=i;const s=uE(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(AD,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(AD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class ite extends DD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=uE(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rte=(()=>{class n extends MD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const W3=["alt","control","meta","shift"],dte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fte=(()=>{class n extends MD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(W3.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&q3.hasOwnProperty(e)&&(e=q3[e]))}return dte[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),W3.forEach(s=>{s!=r&&hte[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Xd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({factory:function(){return I(ID)},token:n,providedIn:"root"}),n})(),ID=(()=>{class n extends Xd{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case dn.NONE:return i;case dn.HTML:return No(i,"HTML")?hs(i):q_(this._doc,String(i)).toString();case dn.STYLE:return No(i,"Style")?hs(i):i;case dn.SCRIPT:if(No(i,"Script"))return hs(i);throw new Error("unsafe value used in a script context");case dn.URL:return Dc(i),No(i,"URL")?hs(i):mo(String(i));case dn.RESOURCE_URL:if(No(i,"ResourceURL"))return hs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function(n){return new V_(n)}(t)}bypassSecurityTrustStyle(t){return function(n){return new z_(n)}(t)}bypassSecurityTrustScript(t){return function(n){return new Wp(n)}(t)}bypassSecurityTrustUrl(t){return function(n){return new Fd(n)}(t)}bypassSecurityTrustResourceUrl(t){return function(n){return new jt(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({factory:function(){return function(n){return new ID(n.get(ct))}(I(Ru))},token:n,providedIn:"root"}),n})();const Cte=FB(fQ,"browser",[{provide:ll,useValue:R3},{provide:xB,useValue:function(){SD.makeCurrent(),xD.init()},multi:!0},{provide:ct,useFactory:function(){return function(n){hi=n}(document),document},deps:[]}]),wte=[[],{provide:ku,useValue:"root"},{provide:Vo,useFactory:function(){return new Vo},deps:[]},{provide:wv,useClass:rte,multi:!0,deps:[ct,ft,ll]},{provide:wv,useClass:fte,multi:!0,deps:[ct]},[],{provide:dE,useClass:dE,deps:[cE,Ev,hv]},{provide:mf,useExisting:dE},{provide:V3,useExisting:Ev},{provide:Ev,useClass:Ev,deps:[ct]},{provide:$A,useClass:$A,deps:[ft]},{provide:cE,useClass:cE,deps:[wv,ft]},{provide:N3,useClass:Uee,deps:[]},[]];let hE=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:hv,useValue:t.appId},{provide:L3,useExisting:hv},zee]}}}return n.\u0275fac=function(t){return new(t||n)(I(n,12))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:wte,imports:[Sn,bQ]}),n})();"undefined"!=typeof window&&window;class Ote extends Se{constructor(e,t){super()}schedule(e,t=0){return this}}class fE extends Ote{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let X3=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class Kl extends X3{constructor(e,t=X3.now){super(e,()=>Kl.delegate&&Kl.delegate!==this?Kl.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return Kl.delegate&&Kl.delegate!==this?Kl.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Rte=new class extends Kl{}(class extends fE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),Zl=new le(n=>n.complete());function pE(n){return n?function(n){return new le(e=>n.schedule(()=>e.complete()))}(n):Zl}function ut(...n){let e=n[n.length-1];return jn(e)?(n.pop(),Ri(n,e)):La(n)}function jg(n,e){return new le(e?t=>e.schedule(Fte,0,{error:n,subscriber:t}):t=>t.error(n))}function Fte({error:n,subscriber:e}){e.error(n)}class Go{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return ut(this.value);case"E":return jg(this.error);case"C":return pE()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new Go("N",e):Go.undefinedValueNotification}static createError(e){return new Go("E",void 0,e)}static createComplete(){return Go.completeNotification}}Go.completeNotification=new Go("C"),Go.undefinedValueNotification=new Go("N",void 0);class gE extends Et{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(gE.dispatch,this.delay,new Lte(e,this.destination)))}_next(e){this.scheduleMessage(Go.createNext(e))}_error(e){this.scheduleMessage(Go.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Go.createComplete()),this.unsubscribe()}}class Lte{constructor(e,t){this.notification=e,this.destination=t}}class Mf extends xe{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Bte(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new Kt;if(this.isStopped||this.hasError?o=Se.EMPTY:(this.observers.push(e),o=new ai(this,e)),r&&e.add(e=new gE(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Rte).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class Bte{constructor(e,t){this.time=e,this.value=t}}function Or(n,e){return"function"==typeof e?t=>t.pipe(Or((i,r)=>ci(n(i,r)).pipe(Me((s,o)=>e(i,s,r,o))))):t=>t.lift(new Vte(n))}class Vte{constructor(e){this.project=e}call(e,t){return t.subscribe(new zte(e,this.project))}}class zte extends ti{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new jr(this),r=this.destination;r.add(i),this.innerSubscription=so(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const mE={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if("undefined"==typeof window)return mE.schedule(n,0);if(void 0===window.requestAnimationFrame)return mE.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let RD;function Kte(n,e,t){let i=t;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function(n,e){if(!RD){const t=Element.prototype;RD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&RD.call(n,e)}(n,r)||(i=s,0))),i}class Qte{constructor(e,t){this.componentFactory=t.get(sl).resolveComponentFactory(e)}create(e){return new Jte(this.componentFactory,e)}}class Jte{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Mf(1),this.events=this.eventEmitters.pipe(Or(i=>ki(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(ft),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=mE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?function(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=kt.create({providers:[],parent:this.injector}),i=function(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Kte(a,e,r);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(zn),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(qd).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Me(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=mE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new d_(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class ene extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function Nt(n){return null!=n&&"false"!=`${n}`}function Eo(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function _E(n){return Array.isArray(n)?n:[n]}function Br(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ju(n){return n instanceof ot?n.nativeElement:n}const Tf=new Kl(fE);function Hg(n,e=Tf){return t=>t.lift(new rne(n,e))}class rne{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new sne(e,this.dueTime,this.scheduler))}}class sne extends Et{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(one,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function one(n){n.debouncedNext()}let kD=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({factory:function(){return new n},token:n,providedIn:"root"}),n})(),K3=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ju(t);return new le(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new xe,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(I(kD))},n.\u0275prov=ue({factory:function(){return new n(I(kD))},token:n,providedIn:"root"}),n})(),FD=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new Ve,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Nt(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Eo(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Hg(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E(K3),E(ot),E(ft))},n.\u0275dir=ge({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),yE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[kD]}),n})();class sr extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Kt;return this._value}next(e){super.next(this._value=e)}}function Wo(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Zd(){}function Di(n,e,t){return function(r){return r.lift(new yne(n,e,t))}}class yne{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new vne(e,this.nextOrObserver,this.error,this.complete))}}class vne extends Et{constructor(e,t,i,r){super(e),this._tapNext=Zd,this._tapError=Zd,this._tapComplete=Zd,this._tapError=i||Zd,this._tapComplete=r||Zd,Ke(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Zd,this._tapError=t.error||Zd,this._tapComplete=t.complete||Zd)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function On(n,e){return function(i){return i.lift(new bne(n,e))}}class bne{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Cne(e,this.predicate,this.thisArg))}}class Cne extends Et{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}const eV=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function _i(n){return e=>0===n?pE():e.lift(new wne(n))}class wne{constructor(e){if(this.total=e,this.total<0)throw new eV}call(e,t){return t.subscribe(new Ene(e,this.total))}}class Ene extends Et{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function zD(n){return e=>e.lift(new Sne(n))}class Sne{constructor(e){this.total=e}call(e,t){return t.subscribe(new xne(e,this.total))}}class xne extends Et{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function qo(n,e){return t=>t.lift(new Mne(n,e))}class Mne{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Tne(e,this.compare,this.keySelector))}}class Tne extends Et{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}function Gn(n){return e=>e.lift(new Ane(n))}class Ane{constructor(e){this.notifier=e}call(e,t){const i=new Dne(e),r=so(this.notifier,new jr(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class Dne extends ti{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let UD;try{UD="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){UD=!1}let Wg,ri=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?xf(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!UD)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(I(ll))},n.\u0275prov=ue({factory:function(){return new n(I(ll))},token:n,providedIn:"root"}),n})(),Tv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const tV=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function nV(){if(Wg)return Wg;if("object"!=typeof document||!document)return Wg=new Set(tV),Wg;let n=document.createElement("input");return Wg=new Set(tV.filter(e=>(n.setAttribute("type",e),n.type===e))),Wg}let Av,Af,jD;function qg(n){return function(){if(null==Av&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Av=!0}))}finally{Av=Av||!1}return Av}()?n:!!n.capture}function iV(){if(null==Af){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Af=!1,Af;if("scrollBehavior"in document.documentElement.style)Af=!0;else{const n=Element.prototype.scrollTo;Af=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Af}function bE(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Df(n){return n.composedPath?n.composedPath()[0]:n.target}function CE(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const sV="cdk-describedby-message-container",oV="cdk-describedby-message",wE="cdk-describedby-host";let Fne=0;const Vc=new Map;let Is=null,aV=(()=>{class n{constructor(t){this._document=t}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=HD(i,r);"string"!=typeof i?(lV(i),Vc.set(s,{messageElement:i,referenceCount:0})):Vc.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){if(!i||!this._isElementNode(t))return;const s=HD(i,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof i){const o=Vc.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}Is&&0===Is.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const t=this._document.querySelectorAll(`[${wE}]`);for(let i=0;i<t.length;i++)this._removeCdkDescribedByReferenceIds(t[i]),t[i].removeAttribute(wE);Is&&this._deleteMessagesContainer(),Vc.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");lV(r),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),Is.appendChild(r),Vc.set(HD(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){const i=Vc.get(t),r=i&&i.messageElement;Is&&r&&Is.removeChild(r),Vc.delete(t)}_createMessagesContainer(){if(!Is){const t=this._document.getElementById(sV);t&&t.parentNode&&t.parentNode.removeChild(t),Is=this._document.createElement("div"),Is.id=sV,Is.style.visibility="hidden",Is.classList.add("cdk-visually-hidden"),this._document.body.appendChild(Is)}}_deleteMessagesContainer(){Is&&Is.parentNode&&(Is.parentNode.removeChild(Is),Is=null)}_removeCdkDescribedByReferenceIds(t){const i=CE(t,"aria-describedby").filter(r=>0!=r.indexOf(oV));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=Vc.get(i);(function(n,e,t){const i=CE(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(wE,""),r.referenceCount++}_removeMessageReference(t,i){const r=Vc.get(i);r.referenceCount--,function(n,e,t){const r=CE(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(wE)}_isElementDescribedByMessage(t,i){const r=CE(t,"aria-describedby"),s=Vc.get(i),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({factory:function(){return new n(I(ct))},token:n,providedIn:"root"}),n})();function HD(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function lV(n){n.id||(n.id=`${oV}-${Fne++}`)}class cV{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new xe,this._typeaheadSubscription=Se.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new xe,this.change=new xe,e instanceof vf&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Di(t=>this._pressedLetters.push(t)),Hg(e),On(()=>this._pressedLetters.length>0),Me(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Wo(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof vf?this._items.toArray():this._items}}class uV extends cV{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class dV extends cV{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let hV=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===pV(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=pV(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||fV(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(I(ri))},n.\u0275prov=ue({factory:function(){return new n(I(ri))},token:n,providedIn:"root"}),n})();function fV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function pV(n){if(!fV(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Wne{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(_i(1)).subscribe(e)}}let gV=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Wne(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(I(hV),I(ft),I(ct))},n.\u0275prov=ue({factory:function(){return new n(I(hV),I(ft),I(ct))},token:n,providedIn:"root"}),n})();function mV(n){return 0===n.offsetX&&0===n.offsetY}function _V(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const yV=new Ce("cdk-input-modality-detector-options"),Zne={ignoreKeys:[18,17,224,91,16]},Yg=qg({passive:!0,capture:!0});let bV=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new sr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Df(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(mV(o)?"keyboard":"mouse"),this._mostRecentTarget=Df(o))},this._onTouchstart=o=>{_V(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Df(o))},this._options=Object.assign(Object.assign({},Zne),s),this.modalityDetected=this._modality.pipe(zD(1)),this.modalityChanged=this.modalityDetected.pipe(qo()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Yg),r.addEventListener("mousedown",this._onMousedown,Yg),r.addEventListener("touchstart",this._onTouchstart,Yg)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,Yg),document.removeEventListener("mousedown",this._onMousedown,Yg),document.removeEventListener("touchstart",this._onTouchstart,Yg))}}return n.\u0275fac=function(t){return new(t||n)(I(ri),I(ft),I(ct),I(yV,8))},n.\u0275prov=ue({factory:function(){return new n(I(ri),I(ft),I(ct),I(yV,8))},token:n,providedIn:"root"}),n})();const CV=new Ce("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),wV=new Ce("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let EE=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>new Promise(a=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,a(),"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].parentNode.removeChild(i[s]);return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(I(CV,8),I(ft),I(ct),I(wV,8))},n.\u0275prov=ue({factory:function(){return new n(I(CV,8),I(ft),I(ct),I(wV,8))},token:n,providedIn:"root"}),n})();const EV=new Ce("cdk-focus-monitor-default-options"),SE=qg({passive:!0,capture:!0});let dl=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new xe,this._rootNodeFocusAndBlurListener=a=>{const l=Df(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let d=l;d;d=d.parentElement)c.call(this,a,d)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=ju(t);if(!this._platform.isBrowser||1!==r.nodeType)return ut(null);const s=function(n){if(function(){if(null==jD){const n="undefined"!=typeof document?document.head:null;jD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return jD}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new xe,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=ju(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ju(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,i,r){r?t.classList.add(i):t.classList.remove(i)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){this._toggleClass(t,"cdk-focused",!!i),this._toggleClass(t,"cdk-touch-focused","touch"===i),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(t,"cdk-mouse-focused","mouse"===i),this._toggleClass(t,"cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Df(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,SE),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,SE)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,SE),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,SE),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(I(ft),I(ri),I(bV),I(ct,8),I(EV,8))},n.\u0275prov=ue({factory:function(){return new n(I(ft),I(ri),I(bV),I(ct,8),I(EV,8))},token:n,providedIn:"root"}),n})();const SV="cdk-high-contrast-black-on-white",xV="cdk-high-contrast-white-on-black",$D="cdk-high-contrast-active";let MV=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove($D),t.remove(SV),t.remove(xV),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add($D),t.add(SV)):2===i&&(t.add($D),t.add(xV))}}}return n.\u0275fac=function(t){return new(t||n)(I(ri),I(ct))},n.\u0275prov=ue({factory:function(){return new n(I(ri),I(ct))},token:n,providedIn:"root"}),n})(),Jne=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(I(MV))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Tv,yE]]}),n})();const TV=new Ce("cdk-dir-doc",{providedIn:"root",factory:function(){return Tc(ct)}});let Yo=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Ve,t){const r=t.documentElement?t.documentElement.dir:null,s=(t.body?t.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(I(TV,8))},n.\u0275prov=ue({factory:function(){return new n(I(TV,8))},token:n,providedIn:"root"}),n})(),Ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const AV=new Nu("12.2.5");class DV{}const Hu="*";function Ql(n,e){return{type:7,name:n,definitions:e,options:{}}}function So(n,e=null){return{type:4,styles:e,timings:n}}function OV(n,e=null){return{type:2,steps:n,options:e}}function Jn(n){return{type:6,styles:n,offset:null}}function vr(n,e,t){return{type:0,name:n,styles:e,options:t}}function nie(n){return{type:5,steps:n}}function Zs(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function iie(n=null){return{type:9,options:n}}function rie(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function IV(n){Promise.resolve(null).then(n)}class Xg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){IV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class PV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?IV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function RV(){return"undefined"!=typeof window&&void 0!==window.document}function WD(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Qd(n){switch(n.length){case 0:return new Xg;case 1:return n[0];default:return new PV(n)}}function kV(n,e,t,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(d=>{const f=d.offset,p=f==l,g=p&&c||{};Object.keys(d).forEach(_=>{let y=_,v=d[_];if("offset"!==_)switch(y=e.normalizePropertyName(y,o),v){case"!":v=r[_];break;case Hu:v=s[_];break;default:v=e.normalizeStyleValue(_,y,v,o)}g[y]=v}),p||a.push(g),c=g,l=f}),o.length){const d="\n - ";throw new Error(`Unable to animate due to the following errors:${d}${o.join(d)}`)}return a}function qD(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&YD(t,"start",n)));break;case"done":n.onDone(()=>i(t&&YD(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&YD(t,"destroy",n)))}}function YD(n,e,t){const i=t.totalTime,s=XD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function XD(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function wa(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function FV(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let KD=(n,e)=>!1,ZD=(n,e)=>!1,NV=(n,e,t)=>[];const LV=WD();(LV||"undefined"!=typeof Element)&&(KD=RV()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),ZD=(()=>{if(LV||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):ZD}})(),NV=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let Of=null,BV=!1;function QD(n){Of||(Of=("undefined"!=typeof document?document.body:null)||{},BV=!!Of.style&&"WebkitAppearance"in Of.style);let e=!0;return Of.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Of.style,!e&&BV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Of.style)),e}const JD=ZD,eO=KD,tO=NV;function VV(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let zV=(()=>{class n{validateStyleProperty(t){return QD(t)}matchesElement(t,i){return JD(t,i)}containsElement(t,i){return eO(t,i)}query(t,i,r){return tO(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Xg(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class xE{}xE.NOOP=new zV;const nO="ng-enter",ME="ng-leave",TE="ng-trigger",AE=".ng-trigger",jV="ng-animating",iO=".ng-animating";function If(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:rO(parseFloat(e[1]),e[2])}function rO(n,e){switch(e){case"s":return 1e3*n;default:return n}}function DE(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=rO(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=rO(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:s,easing:o}}(n,e,t)}function Kg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Jd(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Kg(n,t);return t}function $V(n,e,t){return t?e+":"+t+";":""}function GV(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=$V(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=$V(0,hie(t),n.style[t]));n.setAttribute("style",e)}function zc(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=oO(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),WD()&&GV(n))}function Pf(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=oO(t);n.style[i]=""}),WD()&&GV(n))}function Iv(n){return Array.isArray(n)?1==n.length?n[0]:OV(n):n}const sO=new RegExp("{{\\s*(.+?)\\s*}}","g");function WV(n){let e=[];if("string"==typeof n){let t;for(;t=sO.exec(n);)e.push(t[1]);sO.lastIndex=0}return e}function OE(n,e,t){const i=n.toString(),r=i.replace(sO,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==i?n:r}function IE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const die=/-+([a-z0-9])/g;function oO(n){return n.replace(die,(...e)=>e[1].toUpperCase())}function hie(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qV(n,e){return 0===n||0===e}function YV(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var r=1;r<e.length;r++){let a=e[r];o.forEach(function(l){a[l]=aO(n,l)})}}return e}function Ea(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function aO(n,e){return window.getComputedStyle(n)[e]}function fie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,e,t){if(":"==n[0]){const l=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(XV(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(XV(o,r))}(i,t,e)):t.push(n),t}const RE=new Set(["true","1"]),kE=new Set(["false","0"]);function XV(n,e){const t=RE.has(n)||kE.has(n),i=RE.has(e)||kE.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?RE.has(n):kE.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?RE.has(e):kE.has(e)),o&&a}}const mie=new RegExp("s*:selfs*,?","g");function lO(n,e,t){return new _ie(n).build(e,t)}class _ie{constructor(e){this._driver=e}build(e,t){const i=new bie(t);return this._resetContextStyleTimingState(i),Ea(this,Iv(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};if(i.styles.forEach(a=>{if(FE(a)){const l=a;Object.keys(l).forEach(c=>{WV(l[c]).forEach(d=>{o.hasOwnProperty(d)||s.add(d)})})}}),s.size){const a=IE(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ea(this,Iv(e.animation),t);return{type:1,matchers:fie(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Rf(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ea(this,i,t)),options:Rf(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Ea(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Rf(e.options)}}visitAnimate(e,t){const i=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return cO(DE(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=cO(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||DE(i,e),cO(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Jn({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Jn(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==Hu?i.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(e.styles);let r=!1,s=null;return i.forEach(o=>{if(FE(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let d=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),d=!1),s=c.startTime),d&&(l[a]={startTime:s,endTime:r}),t.options&&function(n,e,t){const i=e.params||{},r=WV(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const o=[];let a=!1,l=!1,c=0;const d=e.steps.map(C=>{const w=this._makeStyleAst(C,t);let M=null!=w.offset?w.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(FE(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(FE(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(w.styles),k=0;return null!=M&&(s++,k=w.offset=M),l=l||k<0||k>1,a=a||k<c,c=k,o.push(k),w});l&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(p=1/(f-1));const g=f-1,_=t.currentTime,y=t.currentAnimateTimings,v=y.duration;return d.forEach((C,w)=>{const M=p>0?w==g?1:p*w:o[w],k=M*v;t.currentTime=_+y.delay+k,y.duration=k,this._validateStyleAst(C,t),C.offset=M,i.styles.push(C)}),i}visitReference(e,t){return{type:8,animation:Ea(this,Iv(e.animation),t),options:Rf(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Rf(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Rf(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(mie,"")),[n=n.replace(/@\*/g,AE).replace(/@\w+/g,t=>AE+"-"+t.substr(1)).replace(/:animating/g,iO),e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,wa(t.collectedStyles,t.currentQuerySelector,{});const a=Ea(this,Iv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Rf(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:DE(e.timings,t.errors,!0);return{type:12,animation:Ea(this,Iv(e.animation),t),timings:i,options:null}}}class bie{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function FE(n){return!Array.isArray(n)&&"object"==typeof n}function Rf(n){return n?(n=Kg(n)).params&&(n.params=function(n){return n?Kg(n):null}(n.params)):n={},n}function cO(n,e,t){return{duration:n,delay:e,easing:t}}function uO(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class NE{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const xie=new RegExp(":enter","g"),Tie=new RegExp(":leave","g");function dO(n,e,t,i,r,s={},o={},a,l,c=[]){return(new Aie).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class Aie{buildKeyframes(e,t,i,r,s,o,a,l,c,d=[]){c=c||new NE;const f=new hO(e,t,c,r,s,d,[]);f.options=l,f.currentTimeline.setStyles([o],null,f.errors,l),Ea(this,i,f);const p=f.timelines.filter(g=>g.containsAnimation());if(p.length&&Object.keys(a).length){const g=p[p.length-1];g.allowOnlyTimelineStyles()||g.setStyles([a],null,f.errors,l)}return p.length?p.map(g=>g.buildKeyframes()):[uO(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?If(i.duration):null,a=null!=i.delay?If(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ea(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=LE);const o=If(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ea(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?If(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ea(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return DE(t.params?OE(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?If(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=LE);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const f=t.createSubContext(e.options,c);s&&f.delayNextStep(s),c===t.element&&(l=f.currentTimeline),Ea(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const f=d.currentTime;Ea(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const LE={};class hO{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=LE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new BE(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=If(i.duration)),null!=i.delay&&(r.delay=If(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=OE(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new hO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=LE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new Die(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(xie,"."+this._enterClassName)).replace(Tie,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class BE{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new BE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Hu,this._currentKeyframe[t]=Hu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},o=function(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Hu})):Jd(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=OE(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:Hu),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Jd(a,!0);Object.keys(c).forEach(d=>{const f=c[d];"!"==f?e.add(d):f==Hu&&t.add(d)}),i||(c.offset=l/this.duration),r.push(c)});const s=e.size?IE(e.values()):[],o=t.size?IE(t.values()):[];if(i){const a=r[0],l=Kg(a);a.offset=0,l.offset=1,r=[a,l]}return uO(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Die extends BE{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Jd(e[0],!1);l.offset=0,s.push(l);const c=Jd(e[0],!1);c.offset=QV(a),s.push(c);const d=e.length-1;for(let f=1;f<=d;f++){let p=Jd(e[f],!1);p.offset=QV((t+p.offset*i)/o),s.push(p)}i=o,t=0,r="",e=s}return uO(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function QV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class fO{}class Iie extends fO{normalizePropertyName(e,t){return oO(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(Pie[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${e}:${i}`)}return o+s}}const Pie=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function JV(n,e,t,i,r,s,o,a,l,c,d,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:f,errors:p}}const pO={};class ez{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],o=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):o}build(e,t,i,r,s,o,a,l,c,d){const f=[],p=this.ast.options&&this.ast.options.params||pO,_=this.buildStyles(i,a&&a.params||pO,f),y=l&&l.params||pO,v=this.buildStyles(r,y,f),C=new Set,w=new Map,M=new Map,k="void"===r,V={params:Object.assign(Object.assign({},p),y)},j=d?[]:dO(e,t,this.ast.animation,s,o,_,v,V,c,f);let ee=0;if(j.forEach(oe=>{ee=Math.max(oe.duration+oe.delay,ee)}),f.length)return JV(t,this._triggerName,i,r,k,_,v,[],[],w,M,ee,f);j.forEach(oe=>{const pe=oe.element,Ee=wa(w,pe,{});oe.preStyleProps.forEach(te=>Ee[te]=!0);const ke=wa(M,pe,{});oe.postStyleProps.forEach(te=>ke[te]=!0),pe!==t&&C.add(pe)});const ce=IE(C.values());return JV(t,this._triggerName,i,r,k,_,v,j,ce,w,M,ee)}}class Fie{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Kg(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=OE(l,r,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),i[c]=l})}}),i}}class Lie{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new Fie(r.style,r.options&&r.options.params||{},i)}),tz(this.states,"true","1"),tz(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new ez(e,r,this.states))}),this.fallbackTransition=function(n,e,t){return new ez(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function tz(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Vie=new NE;class zie{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=lO(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,s=kV(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let o;const a=new Map;if(s?(o=dO(this._driver,t,s,nO,ME,{},{},i,Vie,r),o.forEach(d=>{const f=wa(a,d.element,{});d.postStyleProps.forEach(p=>f[p]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((d,f)=>{Object.keys(d).forEach(p=>{d[p]=this._driver.computeStyle(f,p,Hu)})});const c=Qd(o.map(d=>{const f=a.get(d.element);return this._buildPlayer(d,{},f)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,r){const s=XD(t,"","","");return qD(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const nz="ng-animate-queued",iz="ng-animate-disabled",rz=".ng-animate-disabled",$ie=[],sz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gie={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hl="__ng_removed";class gO{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(i?e.value:e),i){const s=Kg(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Pv="void",mO=new gO(Pv);class Wie{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,fl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);const s=wa(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=wa(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(fl(e,TE),fl(e,TE+"-"+t),a[t]=mO),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new _O(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(fl(e,TE),fl(e,TE+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new gO(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=mO),c.value!==Pv&&l.value===c.value){if(!function(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const y=[],v=s.matchStyles(l.value,l.params,y),C=s.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{Pf(e,v),zc(e,C)})}return}const p=wa(this._engine.playersByElement,e,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=s.matchTransition(l.value,c.value,e,c.params),_=!1;if(!g){if(!r)return;g=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:c,player:o,isFallbackTransition:_}),_||(fl(e,nz),o.onStart(()=>{Zg(e,nz)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const v=this._engine.playersByElement.get(e);if(v){let C=v.indexOf(o);C>=0&&v.splice(C,1)}}),this.players.push(o),p.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,AE,!0);i.forEach(r=>{if(r[hl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const l=this.trigger(e,a,Pv,r);l&&o.push(l)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&Qd(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||mO,d=new gO(Pv),f=new _O(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[hl];(!s||s===sz)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){fl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=XD(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,qD(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class qie{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Wie(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,r){if(VE(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!VE(t))return;const s=t[hl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),fl(e,iz)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Zg(e,iz))}removeNode(e,t,i,r){if(VE(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r){this.collectedLeaveElements.push(t),t[hl]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,r,s){return VE(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,AE,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,iO,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[hl];if(t&&t.setForRemoval){if(e[hl]=sz,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,rz)&&this.markElementAsDisabled(e,!1),this.driver.query(e,rz,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)fl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Qd(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new NE,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(Q=>{d.add(Q);const ze=this.driver.query(Q,".ng-animate-queued",!0);for(let He=0;He<ze.length;He++)d.add(ze[He])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=lz(p,this.collectedEnterElements),_=new Map;let y=0;g.forEach((Q,ze)=>{const He=nO+y++;_.set(ze,He),Q.forEach(qe=>fl(qe,He))});const v=[],C=new Set,w=new Set;for(let Q=0;Q<this.collectedLeaveElements.length;Q++){const ze=this.collectedLeaveElements[Q],He=ze[hl];He&&He.setForRemoval&&(v.push(ze),C.add(ze),He.hasAnimation?this.driver.query(ze,".ng-star-inserted",!0).forEach(qe=>C.add(qe)):w.add(ze))}const M=new Map,k=lz(p,Array.from(C));k.forEach((Q,ze)=>{const He=ME+y++;M.set(ze,He),Q.forEach(qe=>fl(qe,He))}),e.push(()=>{g.forEach((Q,ze)=>{const He=_.get(ze);Q.forEach(qe=>Zg(qe,He))}),k.forEach((Q,ze)=>{const He=M.get(ze);Q.forEach(qe=>Zg(qe,He))}),v.forEach(Q=>{this.processLeaveNode(Q)})});const V=[],j=[];for(let Q=this._namespaceList.length-1;Q>=0;Q--)this._namespaceList[Q].drainQueuedTransitions(t).forEach(He=>{const qe=He.player,Mt=He.element;if(V.push(qe),this.collectedEnterElements.length){const pi=Mt[hl];if(pi&&pi.setForMove)return void qe.destroy()}const Bn=!f||!this.driver.containsElement(f,Mt),it=M.get(Mt),er=_.get(Mt),Pn=this._buildInstruction(He,i,er,it,Bn);if(Pn.errors&&Pn.errors.length)j.push(Pn);else{if(Bn)return qe.onStart(()=>Pf(Mt,Pn.fromStyles)),qe.onDestroy(()=>zc(Mt,Pn.toStyles)),void r.push(qe);if(He.isFallbackTransition)return qe.onStart(()=>Pf(Mt,Pn.fromStyles)),qe.onDestroy(()=>zc(Mt,Pn.toStyles)),void r.push(qe);Pn.timelines.forEach(pi=>pi.stretchStartingKeyframe=!0),i.append(Mt,Pn.timelines),o.push({instruction:Pn,player:qe,element:Mt}),Pn.queriedElements.forEach(pi=>wa(a,pi,[]).push(qe)),Pn.preStyleProps.forEach((pi,pr)=>{const ra=Object.keys(pi);if(ra.length){let Bs=l.get(pr);Bs||l.set(pr,Bs=new Set),ra.forEach(Ra=>Bs.add(Ra))}}),Pn.postStyleProps.forEach((pi,pr)=>{const ra=Object.keys(pi);let Bs=c.get(pr);Bs||c.set(pr,Bs=new Set),ra.forEach(Ra=>Bs.add(Ra))})}});if(j.length){const Q=[];j.forEach(ze=>{Q.push(`@${ze.triggerName} has failed due to:\n`),ze.errors.forEach(He=>Q.push(`- ${He}\n`))}),V.forEach(ze=>ze.destroy()),this.reportError(Q)}const ee=new Map,ce=new Map;o.forEach(Q=>{const ze=Q.element;i.has(ze)&&(ce.set(ze,ze),this._beforeAnimationBuild(Q.player.namespaceId,Q.instruction,ee))}),r.forEach(Q=>{const ze=Q.element;this._getPreviousPlayers(ze,!1,Q.namespaceId,Q.triggerName,null).forEach(qe=>{wa(ee,ze,[]).push(qe),qe.destroy()})});const oe=v.filter(Q=>uz(Q,l,c)),pe=new Map;az(pe,this.driver,w,c,Hu).forEach(Q=>{uz(Q,l,c)&&oe.push(Q)});const ke=new Map;g.forEach((Q,ze)=>{az(ke,this.driver,new Set(Q),l,"!")}),oe.forEach(Q=>{const ze=pe.get(Q),He=ke.get(Q);pe.set(Q,Object.assign(Object.assign({},ze),He))});const te=[],ne=[],Ae={};o.forEach(Q=>{const{element:ze,player:He,instruction:qe}=Q;if(i.has(ze)){if(d.has(ze))return He.onDestroy(()=>zc(ze,qe.toStyles)),He.disabled=!0,He.overrideTotalTime(qe.totalTime),void r.push(He);let Mt=Ae;if(ce.size>1){let it=ze;const er=[];for(;it=it.parentNode;){const Pn=ce.get(it);if(Pn){Mt=Pn;break}er.push(it)}er.forEach(Pn=>ce.set(Pn,Mt))}const Bn=this._buildAnimation(He.namespaceId,qe,ee,s,ke,pe);if(He.setRealPlayer(Bn),Mt===Ae)te.push(He);else{const it=this.playersByElement.get(Mt);it&&it.length&&(He.parentPlayer=Qd(it)),r.push(He)}}else Pf(ze,qe.fromStyles),He.onDestroy(()=>zc(ze,qe.toStyles)),ne.push(He),d.has(ze)&&r.push(He)}),ne.forEach(Q=>{const ze=s.get(Q.element);if(ze&&ze.length){const He=Qd(ze);Q.setRealPlayer(He)}}),r.forEach(Q=>{Q.parentPlayer?Q.syncPlayerEvents(Q.parentPlayer):Q.destroy()});for(let Q=0;Q<v.length;Q++){const ze=v[Q],He=ze[hl];if(Zg(ze,ME),He&&He.hasAnimation)continue;let qe=[];if(a.size){let Bn=a.get(ze);Bn&&Bn.length&&qe.push(...Bn);let it=this.driver.query(ze,iO,!0);for(let er=0;er<it.length;er++){let Pn=a.get(it[er]);Pn&&Pn.length&&qe.push(...Pn)}}const Mt=qe.filter(Bn=>!Bn.destroyed);Mt.length?Zie(this,ze,Mt):this.processLeaveNode(ze)}return v.length=0,te.forEach(Q=>{this.players.push(Q),Q.onDone(()=>{Q.destroy();const ze=this.players.indexOf(Q);this.players.splice(ze,1)}),Q.play()}),te}elementContainsData(e,t){let i=!1;const r=t[hl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Pv;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==s,f=wa(i,c,[]);this._getPreviousPlayers(c,d,o,a,t.toState).forEach(g=>{const _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),f.push(g)})}Pf(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],d=new Set,f=new Set,p=t.timelines.map(_=>{const y=_.element;d.add(y);const v=y[hl];if(v&&v.removedBeforeQueried)return new Xg(_.duration,_.delay);const C=y!==l,w=function(n){const e=[];return cz(n,e),e}((i.get(y)||$ie).map(ee=>ee.getRealPlayer())).filter(ee=>!!ee.element&&ee.element===y),M=s.get(y),k=o.get(y),V=kV(0,this._normalizer,0,_.keyframes,M,k),j=this._buildPlayer(_,V,w);if(_.subTimeline&&r&&f.add(y),C){const ee=new _O(e,a,y);ee.setRealPlayer(j),c.push(ee)}return j});c.forEach(_=>{wa(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>fl(_,jV));const g=Qd(p);return g.onDestroy(()=>{d.forEach(_=>Zg(_,jV)),zc(l,t.toStyles)}),f.forEach(_=>{wa(r,_,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Xg(e.duration,e.delay)}}class _O{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Xg,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>qD(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function VE(n){return n&&1===n.nodeType}function oz(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function az(n,e,t,i,r){const s=[];t.forEach(l=>s.push(oz(l)));const o=[];i.forEach((l,c)=>{const d={};l.forEach(f=>{const p=d[f]=e.computeStyle(c,f,r);(!p||0==p.length)&&(c[hl]=Gie,o.push(c))}),n.set(c,d)});let a=0;return t.forEach(l=>oz(l,s[a++])),o}function lz(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}const zE="$$classes";function fl(n,e){if(n.classList)n.classList.add(e);else{let t=n[zE];t||(t=n[zE]={}),t[e]=!0}}function Zg(n,e){if(n.classList)n.classList.remove(e);else{let t=n[zE];t&&delete t[e]}}function Zie(n,e,t){Qd(t).onDone(()=>n.processLeaveNode(e))}function cz(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof PV?cz(i.players,e):e.push(i)}}function uz(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class UE{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new qie(e,t,i),this._timelineEngine=new zie(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=lO(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function(n,e,t){return new Lie(n,e,t)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=FV(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=FV(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function dz(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=yO(e[0]),e.length>1&&(i=yO(e[e.length-1]))):e&&(t=yO(e)),t||i?new Qg(n,t,i):null}class Qg{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=Qg.initialStylesByElement.get(e);r||Qg.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&zc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zc(this._element,this._initialStyles),this._endStyles&&(zc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Qg.initialStylesByElement.delete(this._element),this._startStyles&&(Pf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pf(this._element,this._endStyles),this._endStyles=null),zc(this._element,this._initialStyles),this._state=3)}}function yO(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];ere(r)&&(e=e||{},e[r]=n[r])}return e}function ere(n){return"display"===n||"position"===n}Qg.initialStylesByElement=new WeakMap;const hz="animation",fz="animationend";class ire{constructor(e,t,i,r,s,o,a){this._element=e,this._name=t,this._duration=i,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function(n,e){const t=bO(n,"").trim();let i=0;t.length&&(function(n,e){let t=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&t++;return t}(t)+1,e=`${t}, ${e}`),jE(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),mz(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){pz(this._element,this._name,"paused")}resume(){pz(this._element,this._name,"running")}setPosition(e){const t=gz(this._element,this._name);this._position=e*this._duration,jE(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),mz(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const i=bO(n,"").split(","),r=vO(i,e);r>=0&&(i.splice(r,1),jE(n,"",i.join(",")))}(this._element,this._name))}}function pz(n,e,t){jE(n,"PlayState",t,gz(n,e))}function gz(n,e){const t=bO(n,"");return t.indexOf(",")>0?vO(t.split(","),e):vO([t],e)}function vO(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function mz(n,e,t){t?n.removeEventListener(fz,e):n.addEventListener(fz,e)}function jE(n,e,t,i){const r=hz+e;if(null!=i){const s=n.style[r];if(s.length){const o=s.split(",");o[i]=t,t=o.join(",")}}n.style[r]=t}function bO(n,e){return n.style[hz+e]||""}class _z{constructor(e,t,i,r,s,o,a,l){this.element=e,this.keyframes=t,this.animationName=i,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ire(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:aO(this.element,i))})}this.currentSnapshot=e}}class cre extends Xg{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=VV(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class vz{constructor(){this._count=0}validateStyleProperty(e){return QD(e)}matchesElement(e,t){return JD(e,t)}containsElement(e,t){return eO(e,t)}query(e,t,i){return tO(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(a=>VV(a));let r=`@keyframes ${t} {\n`,s="";i.forEach(a=>{s=" ";const l=parseFloat(a.offset);r+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const d=a[c];switch(c){case"offset":return;case"easing":return void(d&&(r+=`${s}animation-timing-function: ${d};\n`));default:return void(r+=`${s}${c}: ${d};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(e,t,i,r,s,o=[],a){const l=o.filter(v=>v instanceof _z),c={};qV(i,r)&&l.forEach(v=>{let C=v.currentSnapshot;Object.keys(C).forEach(w=>c[w]=C[w])});const d=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(e[r]=i[r])})}),e}(t=YV(e,t,c));if(0==i)return new cre(e,d);const f="gen_css_kf_"+this._count++,p=this.buildKeyframeElement(e,f,t);(function(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(p);const _=dz(e,t),y=new _z(e,t,f,i,r,s,d,_);return y.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(p)),y}}class Cz{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:aO(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class pre{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(wz().toString()),this._cssKeyframesDriver=new vz}validateStyleProperty(e){return QD(e)}matchesElement(e,t){return JD(e,t)}containsElement(e,t){return eO(e,t)}query(e,t,i){return tO(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,r,s,o);const d={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(d.easing=s);const f={},p=o.filter(_=>_ instanceof Cz);qV(i,r)&&p.forEach(_=>{let y=_.currentSnapshot;Object.keys(y).forEach(v=>f[v]=y[v])});const g=dz(e,t=YV(e,t=t.map(_=>Jd(_,!1)),f));return new Cz(e,t,d,g)}}function wz(){return RV()&&Element.prototype.animate||{}}let mre=(()=>{class n extends DV{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Ue.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?OV(t):t;return Ez(this._renderer,null,i,"register",[r]),new _re(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(I(mf),I(ct))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class _re extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new yre(this._id,e,t||{},this._renderer)}}class yre{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ez(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Ez(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Sz="@.disabled";let vre=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{o&&o.parentNode(s)&&o.removeChild(s.parentNode,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(s);return d||(d=new xz("",s,this.engine),this._rendererCache.set(s,d)),d}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return i.data.animation.forEach(l),new bre(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(I(mf),I(UE),I(ft))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class xz{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Sz?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class bre extends xz{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Sz?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let Ere=(()=>{class n extends UE{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(I(ct),I(xE),I(fO))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const Xo=new Ce("AnimationModuleType"),Mz=[{provide:DV,useClass:mre},{provide:fO,useFactory:function(){return new Iie}},{provide:UE,useClass:Ere},{provide:mf,useFactory:function(n,e,t){return new vre(n,e,t)},deps:[dE,UE,ft]}],Tz=[{provide:xE,useFactory:function(){return"function"==typeof wz()?new pre:new vz}},{provide:Xo,useValue:"BrowserAnimations"},...Mz],Az=[{provide:xE,useClass:zV},{provide:Xo,useValue:"NoopAnimations"},...Mz];let CO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Az:Tz}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:Tz,imports:[hE]}),n})();function Dre(n,e){if(1&n&&rt(0,"mat-pseudo-checkbox",4),2&n){const t=nt();re("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function Ore(n,e){if(1&n&&(F(0,"span",5),Re(1),N()),2&n){const t=nt();q(1),_s("(",t.group.label,")")}}const Ire=["*"],Dz=new Nu("12.2.5"),Rre=new Ce("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Lf,Un=(()=>{class n{constructor(t,i,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checkIsEnabled(t){return!(!Co()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Dz.full!==AV.full&&console.warn("The Angular Material version ("+Dz.full+") does not match the Angular CDK version ("+AV.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(I(MV),I(Rre,8),I(ct))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Ov],Ov]}),n})();function Jg(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Nt(e)}}}function kf(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Ff(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Nt(e)}}}function Nf(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Eo(t):this.defaultTabIndex}}}function wO(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new xe,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}try{Lf="undefined"!=typeof Intl}catch(n){Lf=!1}let Rv=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({factory:function(){return new n},token:n,providedIn:"root"}),n})();class Gre{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Iz={enterDuration:225,exitDuration:150},EO=qg({passive:!0}),Pz=["mousedown","touchstart"],Rz=["mouseup","mouseleave","touchend","touchcancel"];class kz{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ju(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Iz),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(d),d.style.transform="scale(1)";const f=new Gre(this,d,i);return f.state=0,this._activeRipples.add(f),i.persistent||(this._mostRecentTransientRipple=f),this._runTimeoutOutsideZone(()=>{const p=f===this._mostRecentTransientRipple;f.state=1,!i.persistent&&(!p||!this._isPointerDown)&&f.fadeOut()},c),f}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Iz),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.parentNode.removeChild(i)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ju(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Pz))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Rz),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=mV(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_V(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,EO)})})}_removeTriggerEvents(){this._triggerElement&&(Pz.forEach(e=>{this._triggerElement.removeEventListener(e,this,EO)}),this._pointerUpEventsRegistered&&Rz.forEach(e=>{this._triggerElement.removeEventListener(e,this,EO)}))}}const Fz=new Ce("mat-ripple-global-options");let Ko=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new kz(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(ft),E(ri),E(Fz,8),E(Xo,8))},n.\u0275dir=ge({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&lt("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),Jl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Un,Tv],Un]}),n})(),Xre=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(E(Xo,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,i){2&t&&lt("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),Kre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Un]]}),n})();const GE=new Ce("MAT_OPTION_PARENT_COMPONENT"),Zre=Jg(class{});let Qre=0,Nz=(()=>{class n extends Zre{constructor(t){var i;super(),this._labelId="mat-optgroup-label-"+Qre++,this._inert=null!==(i=null==t?void 0:t.inertGroups)&&void 0!==i&&i}}return n.\u0275fac=function(t){return new(t||n)(E(GE,8))},n.\u0275dir=ge({type:n,inputs:{label:"label"},features:[vt]}),n})();const WE=new Ce("MatOptgroup");let Jre=0;class Lz{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let ese=(()=>{class n{constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Jre++,this.onSelectionChange=new Ve,this._stateChanges=new xe}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Nt(t)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Wo(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new Lz(this,t))}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(zn),E(void 0),E(Nz))},n.\u0275dir=ge({type:n,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),qE=(()=>{class n extends ese{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(zn),E(GE,8),E(WE,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,i){1&t&&we("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&t&&(rl("id",i.id),an("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),lt("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[vt],ngContentSelectors:Ire,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(Ar(),wt(0,Dre,1,2,"mat-pseudo-checkbox",0),F(1,"span",1),kn(2),N(),wt(3,Ore,2,1,"span",2),rt(4,"div",3)),2&t&&(re("ngIf",i.multiple),q(3),re("ngIf",i.group&&i.group._inert),q(1),re("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[bs,Ko,Xre],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function SO(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}let YE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Jl,Sn,Un,Kre]]}),n})();function Uc(n,e,t,i){return Ke(t)&&(i=t,t=void 0),i?Uc(n,e,t).pipe(Me(r=>be(r)?i(...r):i(r))):new le(r=>{Vz(n,e,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function Vz(n,e,t,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)Vz(n[o],e,t,i,r)}i.add(s)}function XE(...n){return oo(1)(ut(...n))}function es(...n){const e=n[n.length-1];return jn(e)?(n.pop(),t=>XE(n,t,e)):t=>XE(n,t)}const sse=["underline"],ose=["connectionContainer"],ase=["inputContainer"],lse=["label"];function cse(n,e){1&n&&(hf(0),F(1,"div",14),rt(2,"div",15),rt(3,"div",16),rt(4,"div",17),N(),F(5,"div",18),rt(6,"div",15),rt(7,"div",16),rt(8,"div",17),N(),ff())}function use(n,e){1&n&&(F(0,"div",19),kn(1,1),N())}function dse(n,e){if(1&n&&(hf(0),kn(1,2),F(2,"span"),Re(3),N(),ff()),2&n){const t=nt(2);q(3),Ai(t._control.placeholder)}}function hse(n,e){1&n&&kn(0,3,["*ngSwitchCase","true"])}function fse(n,e){1&n&&(F(0,"span",23),Re(1," *"),N())}function pse(n,e){if(1&n){const t=rr();F(0,"label",20,21),we("cdkObserveContent",function(){return rn(t),nt().updateOutlineGap()}),wt(2,dse,4,1,"ng-container",12),wt(3,hse,1,0,"ng-content",12),wt(4,fse,2,0,"span",22),N()}if(2&n){const t=nt();lt("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),re("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),an("for",t._control.id)("aria-owns",t._control.id),q(2),re("ngSwitchCase",!1),q(1),re("ngSwitchCase",!0),q(1),re("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function gse(n,e){1&n&&(F(0,"div",24),kn(1,4),N())}function mse(n,e){if(1&n&&(F(0,"div",25,26),rt(2,"span",27),N()),2&n){const t=nt();q(2),lt("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function _se(n,e){1&n&&(F(0,"div"),kn(1,5),N()),2&n&&re("@transitionMessages",nt()._subscriptAnimationState)}function yse(n,e){if(1&n&&(F(0,"div",31),Re(1),N()),2&n){const t=nt(2);re("id",t._hintLabelId),q(1),Ai(t.hintLabel)}}function vse(n,e){if(1&n&&(F(0,"div",28),wt(1,yse,2,2,"div",29),kn(2,6),rt(3,"div",30),kn(4,7),N()),2&n){const t=nt();re("@transitionMessages",t._subscriptAnimationState),q(1),re("ngIf",t.hintLabel)}}const bse=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Cse=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],zz=new Ce("MatError"),Ese={transitionMessages:Ql("transitionMessages",[vr("enter",Jn({opacity:1,transform:"translateY(0%)"})),Zs("void => enter",[Jn({opacity:0,transform:"translateY(-5px)"}),So("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n}),n})();const Uz=new Ce("MatHint");let Bf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n,selectors:[["mat-label"]]}),n})(),xse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n,selectors:[["mat-placeholder"]]}),n})();const jz=new Ce("MatPrefix"),Hz=new Ce("MatSuffix");let xO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n,selectors:[["","matSuffix",""]],features:[Ft([{provide:Hz,useExisting:n}])]}),n})(),$z=0;const Ase=kf(class{constructor(n){this._elementRef=n}},"primary"),Wz=new Ce("MAT_FORM_FIELD_DEFAULT_OPTIONS"),KE=new Ce("MatFormField");let em=(()=>{class n extends Ase{constructor(t,i,r,s,o,a,l,c){super(t),this._changeDetectorRef=i,this._dir=s,this._defaults=o,this._platform=a,this._ngZone=l,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new xe,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+$z++,this._labelId="mat-form-field-label-"+$z++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==c,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Nt(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(es(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Gn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Gn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),ki(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(es(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(es(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Gn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Uc(this._label.nativeElement,"transitionend").pipe(_i(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let i=0,r=0;const s=this._connectionContainerRef.nativeElement,o=s.querySelectorAll(".mat-form-field-outline-start"),a=s.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const l=s.getBoundingClientRect();if(0===l.width&&0===l.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const c=this._getStartEnd(l),d=t.children,f=this._getStartEnd(d[0].getBoundingClientRect());let p=0;for(let g=0;g<d.length;g++)p+=d[g].offsetWidth;i=Math.abs(f-c)-5,r=p>0?.75*p+10:0}for(let l=0;l<o.length;l++)o[l].style.width=`${i}px`;for(let l=0;l<a.length;l++)a[l].style.width=`${r}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(zn),E(ot),E(Yo,8),E(Wz,8),E(ri),E(ft),E(Xo,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(Fi(r,Fv,5),Fi(r,Fv,7),Fi(r,Bf,5),Fi(r,Bf,7),Fi(r,xse,5),Fi(r,zz,5),Fi(r,Uz,5),Fi(r,jz,5),Fi(r,Hz,5)),2&t){let s;It(s=Pt())&&(i._controlNonStatic=s.first),It(s=Pt())&&(i._controlStatic=s.first),It(s=Pt())&&(i._labelChildNonStatic=s.first),It(s=Pt())&&(i._labelChildStatic=s.first),It(s=Pt())&&(i._placeholderChild=s.first),It(s=Pt())&&(i._errorChildren=s),It(s=Pt())&&(i._hintChildren=s),It(s=Pt())&&(i._prefixChildren=s),It(s=Pt())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(ii(sse,5),ii(ose,7),ii(ase,5),ii(lse,5)),2&t){let r;It(r=Pt())&&(i.underlineRef=r.first),It(r=Pt())&&(i._connectionContainerRef=r.first),It(r=Pt())&&(i._inputContainerRef=r.first),It(r=Pt())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&lt("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ft([{provide:KE,useExisting:n}]),vt],ngContentSelectors:Cse,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(Ar(bse),F(0,"div",0),F(1,"div",1,2),we("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),wt(3,cse,9,0,"ng-container",3),wt(4,use,2,0,"div",4),F(5,"div",5,6),kn(7),F(8,"span",7),wt(9,pse,5,16,"label",8),N(),N(),wt(10,gse,2,0,"div",9),N(),wt(11,mse,3,4,"div",10),F(12,"div",11),wt(13,_se,2,1,"div",12),wt(14,vse,5,2,"div",13),N(),N()),2&t&&(q(3),re("ngIf","outline"==i.appearance),q(1),re("ngIf",i._prefixChildren.length),q(5),re("ngIf",i._hasFloatingLabel()),q(1),re("ngIf",i._suffixChildren.length),q(1),re("ngIf","outline"!=i.appearance),q(1),re("ngSwitch",i._getDisplayedMessages()),q(1),re("ngSwitchCase","error"),q(1),re("ngSwitchCase","hint"))},directives:[bs,bv,bD,FD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Ese.transitionMessages]},changeDetection:0}),n})(),Nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Un,yE],Un]}),n})();function Lv(...n){if(1===n.length){const e=n[0];if(be(e))return ZE(e,null);if(me(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ZE(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return ZE(n=1===n.length&&be(n[0])?n[0]:n,null).pipe(Me(t=>e(...t)))}return ZE(n,null)}function ZE(n,e){return new le(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=ci(n[a]);let c=!1;t.add(l.subscribe({next:d=>{c||(c=!0,o++),r[a]=d},error:d=>t.error(d),complete:()=>{s++,(s===i||!c)&&(o===i&&t.next(e?e.reduce((d,f,p)=>(d[f]=r[p],d),{}):r),t.complete())}}))}})}function Sa(n){return function(t){const i=new Dse(n),r=t.lift(i);return i.caught=r}}class Dse{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Ose(e,this.selector,this.caught))}}class Ose extends ti{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new jr(this);this.add(i);const r=so(t,i);r!==i&&this.add(r)}}}class Ise{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Pse(e,this.callback))}}class Pse extends Et{constructor(e,t){super(e),this.add(new Se(t))}}class Yz{}class Xz{}class $u{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof $u?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new $u;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof $u?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Rse{encodeKey(e){return Kz(e)}encodeValue(e){return Kz(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Fse=/%(\d[a-f0-9])/gi,Nse={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Kz(n){return encodeURIComponent(n).replace(Fse,(e,t)=>{var i;return null!==(i=Nse[t])&&void 0!==i?i:e})}function Zz(n){return`${n}`}class eh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Rse,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new eh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Zz(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Zz(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Lse{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Qz(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Jz(n){return"undefined"!=typeof Blob&&n instanceof Blob}function eU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Bv{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new $u),this.context||(this.context=new Lse),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new eh,this.urlWithParams=t}serializeBody(){return null===this.body?null:Qz(this.body)||Jz(this.body)||eU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof eh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||eU(this.body)?null:Jz(this.body)?this.body.type||null:Qz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof eh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,d=e.params||this.params;const f=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new Bv(i,r,o,{params:d,headers:c,context:f,reportProgress:l,responseType:s,withCredentials:a})}}var Vr=(()=>((Vr=Vr||{})[Vr.Sent=0]="Sent",Vr[Vr.UploadProgress=1]="UploadProgress",Vr[Vr.ResponseHeader=2]="ResponseHeader",Vr[Vr.DownloadProgress=3]="DownloadProgress",Vr[Vr.Response=4]="Response",Vr[Vr.User=5]="User",Vr))();class MO{constructor(e,t=200,i="OK"){this.headers=e.headers||new $u,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class TO extends MO{constructor(e={}){super(e),this.type=Vr.ResponseHeader}clone(e={}){return new TO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class QE extends MO{constructor(e={}){super(e),this.type=Vr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new QE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tU extends MO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function AO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nm=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Bv)s=t;else{let l,c;l=r.headers instanceof $u?r.headers:new $u(r.headers),r.params&&(c=r.params instanceof eh?r.params:new eh({fromObject:r.params})),s=new Bv(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ut(s).pipe(function(n,e){return ui(n,e,1)}(l=>this.handler.handle(l)));if(t instanceof Bv||"events"===r.observe)return o;const a=o.pipe(On(l=>l instanceof QE));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Me(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Me(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Me(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(Me(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new eh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,AO(r,i))}post(t,i,r={}){return this.request("POST",t,AO(r,i))}put(t,i,r={}){return this.request("PUT",t,AO(r,i))}}return n.\u0275fac=function(t){return new(t||n)(I(Yz))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class nU{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const iU=new Ce("HTTP_INTERCEPTORS");let zse=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const Use=/^\)\]\}',?\n/;let rU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new le(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,_)=>r.setRequestHeader(g,_.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=1223===r.status?204:r.status,_=r.statusText||"OK",y=new $u(r.getAllResponseHeaders()),v=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new TO({headers:y,status:g,statusText:_,url:v}),o},l=()=>{let{headers:g,status:_,statusText:y,url:v}=a(),C=null;204!==_&&(C=void 0===r.response?r.responseText:r.response),0===_&&(_=C?200:0);let w=_>=200&&_<300;if("json"===t.responseType&&"string"==typeof C){const M=C;C=C.replace(Use,"");try{C=""!==C?JSON.parse(C):null}catch(k){C=M,w&&(w=!1,C={error:k,text:C})}}w?(i.next(new QE({body:C,headers:g,status:_,statusText:y,url:v||void 0})),i.complete()):i.error(new tU({error:C,headers:g,status:_,statusText:y,url:v||void 0}))},c=g=>{const{url:_}=a(),y=new tU({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:_||void 0});i.error(y)};let d=!1;const f=g=>{d||(i.next(a()),d=!0);let _={type:Vr.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),"text"===t.responseType&&!!r.responseText&&(_.partialText=r.responseText),i.next(_)},p=g=>{let _={type:Vr.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),i.next(_)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:Vr.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(I(N3))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const DO=new Ce("XSRF_COOKIE_NAME"),OO=new Ce("XSRF_HEADER_NAME");class sU{}let Hse=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=S3(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(I(ct),I(ll),I(DO))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),IO=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(I(sU),I(OO))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),$se=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(iU,[]);this.chain=i.reduceRight((r,s)=>new nU(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(I(Xz),I(kt))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Gse=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:IO,useClass:zse}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:DO,useValue:t.cookieName}:[],t.headerName?{provide:OO,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[IO,{provide:iU,useExisting:IO,multi:!0},{provide:sU,useClass:Hse},{provide:DO,useValue:"XSRF-TOKEN"},{provide:OO,useValue:"X-XSRF-TOKEN"}]}),n})(),oU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[nm,{provide:Yz,useClass:$se},rU,{provide:Xz,useExisting:rU}],imports:[[Gse.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Wse=["*"];function aU(n){return Error(`Unable to find icon with the name "${n}"`)}function lU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function cU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Vf{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Vv=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Vf(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(dn.HTML,r);if(!o)throw cU(r);return this._addSvgIconConfig(t,i,new Vf("",o,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Vf(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(dn.HTML,i);if(!s)throw cU(i);return this._addSvgIconSetConfig(t,new Vf("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(dn.RESOURCE_URL,t);if(!i)throw lU(t);const r=this._cachedIconsByUrl.get(i);return r?ut(JE(r)):this._loadSvgIconFromConfig(new Vf(t,null)).pipe(Di(s=>this._cachedIconsByUrl.set(i,s)),Me(s=>JE(s)))}getNamedSvgIcon(t,i=""){const r=uU(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):jg(aU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ut(JE(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Me(i=>JE(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ut(r):Lv(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Sa(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(dn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ut(null)})))).pipe(Me(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw aU(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Di(i=>t.svgText=i),Me(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ut(null):this._fetchIcon(t).pipe(Di(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString("<svg></svg>");return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString("<svg></svg>"),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(dn.RESOURCE_URL,r);if(!a)throw lU(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(function(n){return e=>e.lift(new Ise(n))}(()=>this._inProgressUrlFetches.delete(a)),Vs());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(uU(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return Xse(s)?new Vf(s.url,null,s.options):new Vf(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(I(nm,8),I(Xd),I(ct,8),I(Vo))},n.\u0275prov=ue({factory:function(){return new n(I(nm,8),I(Xd),I(ct,8),I(Vo))},token:n,providedIn:"root"}),n})();function JE(n){return n.cloneNode(!0)}function uU(n,e){return n+":"+e}function Xse(n){return!(!n.url||!n.options)}const Kse=kf(class{constructor(n){this._elementRef=n}}),Zse=new Ce("mat-icon-location",{providedIn:"root",factory:function(){const n=Tc(ct),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),dU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],eoe=dU.map(n=>`[${n}]`).join(", "),toe=/^url\(['"]?#(.*?)['"]?\)$/;let Ps=(()=>{class n extends Kse{constructor(t,i,r,s,o){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=Se.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Nt(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=t.querySelectorAll("style");for(let s=0;s<i.length;s++)i[s].textContent+=" ";const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&t.removeChild(r)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(eoe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)dU.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(toe):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(_i(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(Vv),ds("aria-hidden"),E(Zse),E(Vo))},n.\u0275cmp=$e({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(an("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),lt("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[vt],ngContentSelectors:Wse,decls:1,vars:0,template:function(t,i){1&t&&(Ar(),kn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Ir=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Un],Un]}),n})();new class extends Kl{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends fE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let soe=1;const ooe=Promise.resolve(),eS={};function hU(n){return n in eS&&(delete eS[n],!0)}const fU={setImmediate(n){const e=soe++;return eS[e]=!0,ooe.then(()=>hU(e)&&n()),e},clearImmediate(n){hU(n)}};new class extends Kl{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends fE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=fU.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(fU.clearImmediate(t),e.scheduled=void 0)}});function zv(n){return!!n&&(n instanceof le||"function"==typeof n.lift&&"function"==typeof n.subscribe)}class doe{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new hoe(e,this.durationSelector))}}class hoe extends ti{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:r}=this;t=r(e)}catch(r){return this.destination.error(r)}const i=so(t,new jr(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function PO(n){return!be(n)&&n-parseFloat(n)+1>=0}function poe(n){const{index:e,period:t,subscriber:i}=n;if(i.next(e),!i.closed){if(-1===t)return i.complete();n.index=e+1,this.schedule(n,t)}}function tS(n,e=Tf){return function(n){return function(t){return t.lift(new doe(n))}}(()=>function(n=0,e,t){let i=-1;return PO(e)?i=Number(e)<1?1:Number(e):jn(e)&&(t=e),jn(t)||(t=Tf),new le(r=>{const s=PO(n)?n:+n-t.now();return t.schedule(poe,s,{index:0,period:i,subscriber:r})})}(n,e))}function jc(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(d){let f;s++,!r||a?(a=!1,r=new Mf(n,e,i),f=r.subscribe(this),o=d.subscribe({next(p){r.next(p)},error(p){a=!0,r.error(p)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):f=r.subscribe(this),this.add(()=>{s--,f.unsubscribe(),f=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}class pU{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new xe,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}let nS=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({factory:function(){return new n},token:n,providedIn:"root"}),n})(),im=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new xe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new le(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(tS(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ut()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(On(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ju(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Uc(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(I(ft),I(ri),I(ct,8))},n.\u0275prov=ue({factory:function(){return new n(I(ft),I(ri),I(ct,8))},token:n,providedIn:"root"}),n})(),zf=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new xe,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(tS(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(I(ri),I(ft),I(ct,8))},n.\u0275prov=ue({factory:function(){return new n(I(ri),I(ft),I(ct,8))},token:n,providedIn:"root"}),n})(),Uv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})(),vU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Ov,Tv,Uv],Ov,Uv]}),n})();class RO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class rm extends RO{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Uf extends RO{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Poe extends RO{constructor(e){super(),this.element=e instanceof ot?e.nativeElement:e}}class iS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof rm?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Uf?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Poe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Roe extends iS{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let jf=(()=>{class n extends iS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ve,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(E(sl),E(Qr),E(ct))},n.\u0275dir=ge({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[vt]}),n})(),rS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();function CU(n,e=!1){return t=>t.lift(new koe(n,e))}class koe{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new Foe(e,this.predicate,this.inclusive))}}class Foe extends Et{constructor(e,t,i){super(e),this.predicate=t,this.inclusive=i,this.index=0}_next(e){const t=this.destination;let i;try{i=this.predicate(e,this.index++)}catch(r){return void t.error(r)}this.nextOrComplete(e,i)}nextOrComplete(e,t){const i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())}}const wU=iV();class Noe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Br(-this._previousScrollPosition.left),e.style.top=Br(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),wU&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wU&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Loe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class EU{enable(){}disable(){}attach(){}}function kO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function SU(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Boe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();kO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Voe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new EU,this.close=o=>new Loe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Noe(this._viewportRuler,this._document),this.reposition=o=>new Boe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(I(im),I(zf),I(ft),I(ct))},n.\u0275prov=ue({factory:function(){return new n(I(im),I(zf),I(ft),I(ct))},token:n,providedIn:"root"}),n})();class jv{constructor(e){if(this.scrollStrategy=new EU,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class zoe{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Uoe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let xU=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({factory:function(){return new n(I(ct))},token:n,providedIn:"root"}),n})(),joe=(()=>{class n extends xU{constructor(t){super(t),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(I(ct))},n.\u0275prov=ue({factory:function(){return new n(I(ct))},token:n,providedIn:"root"}),n})(),Hoe=(()=>{class n extends xU{constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._clickListener=r=>{const s=Df(r),o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){const l=o[a];if(!(l._outsidePointerEvents.observers.length<1)&&l.hasAttached()){if(l.overlayElement.contains(s))break;l._outsidePointerEvents.next(r)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(I(ct),I(ri))},n.\u0275prov=ue({factory:function(){return new n(I(ct),I(ri))},token:n,providedIn:"root"}),n})();const th="undefined"!=typeof window?window:{},MU=void 0!==th.__karma__&&!!th.__karma__||void 0!==th.jasmine&&!!th.jasmine||void 0!==th.jest&&!!th.jest||void 0!==th.Mocha&&!!th.Mocha;let sm=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||MU){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].parentNode.removeChild(r[s])}const i=this._document.createElement("div");i.classList.add(t),MU?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(I(ct),I(ri))},n.\u0275prov=ue({factory:function(){return new n(I(ct),I(ri))},token:n,providedIn:"root"}),n})();class $oe{constructor(e,t,i,r,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new xe,this._attachments=new xe,this._detachments=new xe,this._locationChanges=Se.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._keydownEvents=new xe,this._outsidePointerEvents=new xe,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Br(this._config.width),e.height=Br(this._config.height),e.minWidth=Br(this._config.minWidth),e.minHeight=Br(this._config.minHeight),e.maxWidth=Br(this._config.maxWidth),e.maxHeight=Br(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(!e)return;let t,i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const r=e.classList;_E(t).forEach(s=>{s&&(i?r.add(s):r.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Gn(ki(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const TU="cdk-overlay-connected-position-bounding-box",Goe=/([A-Za-z%]+)$/;class AU{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new xe,this._resizeSubscription=Se.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(TU),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=[];let s;for(let o of this._preferredPositions){let a=this._getOriginPoint(e,o),l=this._getOverlayPoint(a,t,o),c=this._getOverlayFit(l,t,i,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,a);this._canFitWithFlexibleDimensions(c,l,i)?r.push({position:o,origin:a,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(a,o)}):(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:l,originPoint:a,position:o,overlayRect:t})}if(r.length){let o=null,a=-1;for(const l of r){const c=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);c>a&&(a=c,o=l)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(TU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,r;if("center"==t.originX)i=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,o=this._isRtl()?e.left:e.right;i="start"==t.originX?s:o}return r="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:r}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=OU(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,g=a+s.height-i.height,_=this._subtractOverflows(s.width,0-o,o+s.width-i.width),y=this._subtractOverflows(s.height,p,g),v=_*y;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:y===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=DU(this._overlayRef.getConfig().minHeight),a=DU(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=OU(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let d=0,f=0;return d=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,f=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:d,y:f},{x:e.x+d,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Uoe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,d,f,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),_=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,d=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),_=this._lastBoundingBoxSize.width;d=2*g,f=e.x-g,d>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-_/2)}return{top:o,left:f,bottom:a,right:p,width:d,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Br(i.height),r.top=Br(i.top),r.bottom=Br(i.bottom),r.width=Br(i.width),r.left=Br(i.left),r.right=Br(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Br(s)),o&&(r.maxWidth=Br(o))}this._lastBoundingBoxSize=i,Hf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Hf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Hf(i,this._getExactOverlayY(t,e,d)),Hf(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Br(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Br(o.maxWidth):s&&(i.maxWidth="")),Hf(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Br(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Br(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:SU(e,i),isOriginOutsideView:kO(e,i),isOverlayClipped:SU(t,i),isOverlayOutsideView:kO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&_E(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ot)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Hf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function DU(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Goe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function OU(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class Woe{constructor(e,t,i,r,s,o,a){this._preferredPositions=[],this._positionStrategy=new AU(i,r,s,o,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,i,r){const s=new zoe(e,t,i,r);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const IU="cdk-global-overlay-wrapper";class qoe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(IU),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(IU),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Yoe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new qoe}connectedTo(t,i,r){return new Woe(i,r,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new AU(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(I(zf),I(ct),I(ri),I(sm))},n.\u0275prov=ue({factory:function(){return new n(I(zf),I(ct),I(ri),I(sm))},token:n,providedIn:"root"}),n})(),Xoe=0,Zo=(()=>{class n{constructor(t,i,r,s,o,a,l,c,d,f,p){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=f,this._outsideClickDispatcher=p}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new jv(t);return o.direction=o.direction||this._directionality.value,new $oe(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Xoe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(qd)),new Roe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(I(Voe),I(sm),I(sl),I(Yoe),I(joe),I(kt),I(ft),I(ct),I(Yo),I(Ug),I(Hoe))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const Koe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],PU=new Ce("cdk-connected-overlay-scroll-strategy");let Zoe=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(E(ot))},n.\u0275dir=ge({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),RU=(()=>{class n{constructor(t,i,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Se.EMPTY,this._attachSubscription=Se.EMPTY,this._detachSubscription=Se.EMPTY,this._positionSubscription=Se.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Ve,this.positionChange=new Ve,this.attach=new Ve,this.detach=new Ve,this.overlayKeydown=new Ve,this.overlayOutsideClick=new Ve,this._templatePortal=new Uf(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Nt(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Nt(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Nt(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Nt(t)}get push(){return this._push}set push(t){this._push=Nt(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Koe);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Wo(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new jv({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this.origin.elementRef).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(CU(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E(Zo),E(Ys),E(Qr),E(PU),E(Yo,8))},n.\u0275dir=ge({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Kn]}),n})();const Joe={provide:PU,deps:[Zo],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Hv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[Zo,Joe],imports:[[Ov,rS,vU],vU]}),n})();const kU=["mat-button",""],FU=["*"],tae=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],nae=kf(Jg(Ff(class{constructor(n){this._elementRef=n}})));let $f=(()=>{class n extends nae{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of tae)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(dl),E(Xo,8))},n.\u0275cmp=$e({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&ii(Ko,5),2&t){let r;It(r=Pt())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(an("disabled",i.disabled||null),lt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[vt],attrs:kU,ngContentSelectors:FU,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(Ar(),F(0,"span",0),kn(1),N(),rt(2,"span",1),rt(3,"span",2)),2&t&&(q(2),lt("mat-button-ripple-round",i.isRoundButton||i.isIconButton),re("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Ko],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Jl,Un],Un]}),n})();class LU extends Et{notifyNext(e,t,i,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class iae extends Et{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function BU(n,e,t,i,r=new iae(n,t,i)){if(!r.closed)return e instanceof le?e.subscribe(r):Pi(e)(r)}const VU={};function Ki(...n){let e,t;return jn(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&be(n[0])&&(n=n[0]),La(n,t).lift(new zU(e))}class zU{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new rae(e,this.resultSelector))}}class rae extends LU{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(VU),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(BU(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,o=this.toRespond?r[i]===VU?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const UU=new Set;let om,jU=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oae}matchMedia(t){return this._platform.WEBKIT&&function(n){if(!UU.has(n))try{om||(om=document.createElement("style"),om.setAttribute("type","text/css"),document.head.appendChild(om)),om.sheet&&(om.sheet.insertRule(`@media ${n} {.fx-query-test{ }}`,0),UU.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(I(ri))},n.\u0275prov=ue({factory:function(){return new n(I(ri))},token:n,providedIn:"root"}),n})();function oae(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let FO=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new xe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return HU(_E(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Ki(HU(_E(t)).map(o=>this._registerQuery(o).observable));return s=XE(s.pipe(_i(1)),s.pipe(zD(1),Hg(0))),s.pipe(Me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new le(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(es(i),Me(({matches:o})=>({query:t,matches:o})),Gn(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(I(jU),I(ft))},n.\u0275prov=ue({factory:function(){return new n(I(jU),I(ft))},token:n,providedIn:"root"}),n})();function HU(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function aae(n,e){if(1&n){const t=rr();F(0,"div",1),F(1,"button",2),we("click",function(){return rn(t),nt().action()}),Re(2),N(),N()}if(2&n){const t=nt();q(2),Ai(t.data.action)}}function lae(n,e){}const NO=new Ce("MatSnackBarData");class sS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const cae=Math.pow(2,31)-1;class LO{constructor(e,t){this._overlayRef=t,this._afterDismissed=new xe,this._afterOpened=new xe,this._onAction=new xe,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,cae))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let uae=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(E(LO),E(NO))},n.\u0275cmp=$e({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(F(0,"span"),Re(1),N(),wt(2,aae,3,1,"div",0)),2&t&&(q(1),Ai(i.data.message),q(1),re("ngIf",i.hasAction))},directives:[bs,$f],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),n})();const dae={snackBarState:Ql("state",[vr("void, hidden",Jn({transform:"scale(0.8)",opacity:0})),vr("visible",Jn({transform:"scale(1)",opacity:1})),Zs("* => visible",So("150ms cubic-bezier(0, 0, 0.2, 1)")),Zs("* => void, * => hidden",So("75ms cubic-bezier(0.4, 0.0, 1, 1)",Jn({opacity:0})))])};let hae=(()=>{class n extends iS{constructor(t,i,r,s,o){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new xe,this._onExit=new xe,this._onEnter=new xe,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(_i(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(E(ft),E(ot),E(zn),E(ri),E(sS))},n.\u0275cmp=$e({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,i){if(1&t&&ii(jf,7),2&t){let r;It(r=Pt())&&(i._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&Wy("@state.done",function(s){return i.onAnimationEnd(s)}),2&t&&Sg("@state",i._animationState)},features:[vt],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(F(0,"div",0),wt(1,lae,0,0,"ng-template",1),N(),rt(2,"div")),2&t&&(q(2),an("aria-live",i._live)("role",i._role))},directives:[jf],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[dae.snackBarState]}}),n})(),GU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Hv,rS,Sn,Gf,Un],Un]}),n})();const WU=new Ce("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new sS}});let pae=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=uae,this.snackBarContainerComponent=hae,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s=Object.assign(Object.assign({},this._defaultConfig),r);return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=kt.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:sS,useValue:i}]}),o=new rm(this.snackBarContainerComponent,i.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(t,i){const r=Object.assign(Object.assign(Object.assign({},new sS),this._defaultConfig),i),s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new LO(o,s);if(t instanceof Ys){const l=new Uf(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new rm(t,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Gn(s.detachments())).subscribe(l=>{const c=s.overlayElement.classList;l.matches?c.add(this.handsetCssClass):c.remove(this.handsetCssClass)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new jv;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return kt.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:LO,useValue:i},{provide:NO,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(I(Zo),I(EE),I(kt),I(FO),I(n,12),I(WU))},n.\u0275prov=ue({factory:function(){return new n(I(Zo),I(EE),I(Ru),I(FO),I(n,12),I(WU))},token:n,providedIn:GU}),n})();function Le(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function Cs(n,e){return function(t,i){e(t,i,n)}}function Xe(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function pl(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function KU(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function VO(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||KU()}const ZU="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",aS=VO();class yae{constructor(e,t,i="sessionStorage"){this.storage=function(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(e){return null}}(i),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function zO(n,e,t,i=600){const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}const QU={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function JU(n){return"string"==typeof n?QU[n.toUpperCase()]||QU.WHITE:n}function lS(n,e){if(!n)throw new Error(e||"Assertion failed")}const ec={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},$v=ec.window||ec.self||ec.global,ej=ec.process||{};function am(){let n;if(aS&&$v.performance)n=$v.performance.now();else if(ej.hrtime){const e=ej.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}console;const lm={debug:aS&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},xae={enabled:!0,level:0};function gl(){}const tj={},nj={once:!0};function Mae(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}let UO=(()=>{class n{constructor({id:t}={id:""}){this.id=t,this.VERSION=ZU,this._startTs=am(),this._deltaTs=am(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new yae("__probe-".concat(this.id,"__"),xae),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,e=["constructor"]){const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((am()-this._startTs).toPrecision(10))}getDelta(){return Number((am()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}assert(t,i){lS(t,i)}warn(t){return this._getLogFunction(0,t,lm.warn,arguments,nj)}error(t){return this._getLogFunction(0,t,lm.error,arguments)}deprecated(t,i){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(t,i){return this.error("`".concat(t,"` has been removed. Use `").concat(i,"` instead"))}probe(t,i){return this._getLogFunction(t,i,lm.log,arguments,{time:!0,once:!0})}log(t,i){return this._getLogFunction(t,i,lm.debug,arguments)}info(t,i){return this._getLogFunction(t,i,console.info,arguments)}once(t,i){return this._getLogFunction(t,i,lm.debug||lm.info,arguments,nj)}table(t,i,r){return i?this._getLogFunction(t,i,console.table||gl,r&&[r],{tag:Mae(i)}):gl}image({logLevel:t,priority:i,image:r,message:s="",scale:o=1}){return this._shouldLog(t||i)?aS?function({image:n,message:e="",scale:t=1}){if("string"==typeof n){const r=new Image;return r.onload=()=>{const s=zO(r,e,t);console.log(...s)},r.src=n,gl}const i=n.nodeName||"";if("img"===i.toLowerCase())return console.log(...zO(n,e,t)),gl;if("canvas"===i.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...zO(r,e,t)),r.src=n.toDataURL(),gl}return gl}({image:r,message:s,scale:o}):function({image:n,message:e="",scale:t=1}){let i=null;try{i=Be(307)}catch(r){}return i?()=>i(n,{fit:"box",width:"".concat(Math.round(80*t),"%")}).then(r=>console.log(r)):gl}({image:r,message:s,scale:o}):gl}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(t){return this._storage.config[t]}set(t,i){this._storage.updateConfiguration({[t]:i})}time(t,i){return this._getLogFunction(t,i,console.time?console.time:console.info)}timeEnd(t,i){return this._getLogFunction(t,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,i){return this._getLogFunction(t,i,console.timeStamp||gl)}group(t,i,r={collapsed:!1}){r=rj({logLevel:t,message:i,opts:r});const{collapsed:s}=r;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,i,r={}){return this.group(t,i,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||gl)}withGroup(t,i,r){this.group(t,i)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=ij(t)}_getLogFunction(t,i,r,s=[],o){if(this._shouldLog(t)){o=rj({logLevel:t,message:i,args:s,opts:o}),lS(r=r||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=am();const a=o.tag||o.message;if(o.once){if(tj[a])return gl;tj[a]=am()}return i=function(n,e,t){if("string"==typeof e){const i=t.time?function(n,e=8){const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function(n,e,t){return!aS&&"string"==typeof n&&(e&&(e=JU(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=JU(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),r.bind(console,i,...o.args)}return gl}}return n.VERSION=ZU,n})();function ij(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return lS(Number.isFinite(e)&&e>=0),e}function rj(n){const{logLevel:e,message:t}=n;n.logLevel=ij(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(n.args=i,typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return lS("string"===r||"object"===r),Object.assign(n,n.opts)}const Nn=new UO({id:"deck"}),Wn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Wn,"IDENTITY",{get:()=>Nn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const Hc={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},sj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},gt=new UO({id:"luma.gl"});function xo(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function cS(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function An(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function uS(n){return xo(cS(n),"Invalid WebGLRenderingContext"),n}function Qs(n){return xo(An(n),"Requires WebGL2"),n}const Gv={};const Wv=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(Wv.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Wf=function(e){const t=this;this.gl=e,function(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(Gv[i]=!0)}while(0!==i);for(i in Gv)if(Gv[i])return delete Gv[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,d){const f=t.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const p=f.attribs[s];return p.buffer=t.currentArrayBuffer,p.size=o,p.type=a,p.normalized=l,p.stride=c,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{globalThis.console&&globalThis.console.log&&globalThis.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Wf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Wf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new Wv(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Wf.prototype.createVertexArrayOES=function(){const e=new Wv(this);return this.vertexArrayObjects.push(e),e},Wf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Wf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Wv&&e.hasBeenBound&&e.ext===this)},Wf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function(n,e){Gv[n]=!0,void 0!==e&&function(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],d=r?r.attribs[l]:null;if((!r||c.enabled!==d.enabled)&&(c.enabled?i.enableVertexAttribArray.call(t,l):i.disableVertexAttribArray.call(t,l)),c.enabled){let f=!1;(!r||c.buffer!==d.buffer)&&(o!==c.buffer&&(i.bindBuffer.call(t,34962,c.buffer),o=c.buffer),f=!0),(f||c.cached!==d.cached)&&i.vertexAttribPointer.call(t,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const oj="OES_element_index",aj="WEBGL_draw_buffers",lj="WEBGL_debug_renderer_info",Li=n=>An(n)?void 0:0,qae={3074:n=>An(n)?void 0:36064,35723:n=>An(n)?void 0:4352,35977:Li,32937:Li,36795:(n,e)=>{const t=An(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(lj);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(lj);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Li,35071:Li,37447:Li,36063:(n,e)=>{if(!An(n)){const t=n.getExtension(aj);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Li,35374:Li,35377:Li,34852:n=>{if(!An(n)){const e=n.getExtension(aj);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(oj)?2147483647:65535,33001:n=>n.getExtension(oj)?16777216:65535,33e3:n=>16777216,37157:Li,35373:Li,35657:Li,36183:Li,37137:Li,34045:Li,35978:Li,35979:Li,35968:Li,35376:Li,35375:Li,35659:Li,37154:Li,35371:Li,35658:Li,35076:Li,35077:Li,35380:Li},cj="ANGLE_instanced_arrays",uj={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{xo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[cj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){xo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{xo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{xo(!1)},deleteQuery:()=>{xo(!1)},beginQuery:()=>{xo(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},jO={readBuffer:(n,e,t)=>{An(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function(n,e){return{webgl2:An(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!An(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>{if(!An(n))switch(r){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,i,r)},getTexParameter(n,e,t,i){switch(i){case 34046:const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function(n,e,t){const i=qae[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function sle(n,{extension:e,target:t,target2:i}){const r=uj[e];xo(r);const{meta:s={}}=r,{suffix:o=""}=s,a=n.getExtension(e);for(const l of Object.keys(r)){const c=`${l}${o}`;let d=null;"meta"===l||"function"==typeof n[l]||(a&&"function"==typeof a[c]?d=(...f)=>a[c](...f):"function"==typeof r[l]&&(d=r[l].bind(t))),d&&(t[l]=d,i[l]=d)}}globalThis.polyfillContext=function(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Wf(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&sle(n,{extension:t,target:n.luma,target2:n})}(n,uj),function(n,{target:e,target2:t}){Object.keys(jO).forEach(i=>{if("function"==typeof jO[i]){const r=n[i]?n[i].bind(n):()=>{},s=jO[i].bind(null,n,r);e[i]=s,t[i]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const HO={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},nh=(n,e,t)=>e?n.enable(t):n.disable(t),dj=(n,e,t)=>n.hint(t,e),xa=(n,e,t)=>n.pixelStorei(t,e);function qv(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const lle={3042:nh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:nh,2885:(n,e)=>n.cullFace(e),2929:nh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:nh,35723:dj,36006:(n,e)=>{const t=An(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:dj,2849:(n,e)=>n.lineWidth(e),32823:nh,32824:"polygonOffset",10752:"polygonOffset",35977:nh,32938:"sampleCoverage",32939:"sampleCoverage",3089:nh,3088:(n,e)=>n.scissor(...e),2960:nh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:xa,3317:xa,37440:xa,37441:xa,37443:xa,3330:xa,3332:xa,3331:xa,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:xa,32878:xa,3316:xa,3315:xa,32877:xa,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=qv(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=qv(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=qv(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=qv(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=qv(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function br(n,e,t){return void 0!==e[n]?e[n]:t[n]}const cle={blendEquation:(n,e,t)=>n.blendEquationSeparate(br(32777,e,t),br(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(br(32969,e,t),br(32968,e,t),br(32971,e,t),br(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(br(32824,e,t),br(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(br(32938,e,t),br(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,br(2962,e,t),br(2967,e,t),br(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,br(34816,e,t),br(36003,e,t),br(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,br(2964,e,t),br(2965,e,t),br(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,br(34817,e,t),br(34818,e,t),br(34819,e,t))},hj={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},$c=(n,e)=>n.isEnabled(e),fj={3042:$c,2884:$c,2929:$c,3024:$c,32823:$c,32926:$c,32928:$c,3089:$c,2960:$c,35977:$c};function pj(n){for(const e in n)return!1;return!0}function ule(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function gj(n,e){const t=n[e].bind(n);n[e]=function(...r){const s=r[0];return s in n.state.cache&&n.state.enable?n.state.cache[s]:t(...r)},Object.defineProperty(n[e],"name",{value:`${e}-from-cache`,configurable:!1})}function dle(n,e,t){const i=n[e].bind(n);n[e]=function(...s){const{valueChanged:o,oldValue:a}=t(n.state._updateCache,...s);return o&&i(...s),a},Object.defineProperty(n[e],"name",{value:`${e}-to-cache`,configurable:!1})}class fle{constructor(e,{copyState:t=!1,log:i=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(n,e){if("number"==typeof(e=e||HO)){const r=e,s=fj[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=fj[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},HO),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){xo(this.stateStack.length>0),Gu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){xo(void 0!==s);const o=e[s],a=this.cache[s];ule(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function mj(n,e={}){const{enable:t=!0,copyState:i}=e;if(xo(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new fle(n,{copyState:i}),function(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const s in hj)dle(n,s,hj[s]);gj(n,"getParameter"),gj(n,"isEnabled")}return n.state.enable=t,n}function _j(n){xo(n.state),n.state.pop()}function Gu(n,e){if(xo(cS(n),"setParameters requires a WebGL context"),pj(e))return;const t={};for(const r in e){const s=Number(r),o=lle[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)cle[r](n,e,i)}function tc(n,e,t){if(pj(e))return t(n);const{nocatch:i=!0}=e;let r;if(function(n){n.state||mj(n,{copyState:!1}),n.state.push()}(n),Gu(n,e),i)r=t(n),_j(n);else try{r=t(n)}finally{_j(n)}return r}function dS(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent;return!!(e&&e.indexOf("Electron")>=0)}()}function cm(n){const{luma:e}=n;if(n.canvas&&e){const{clientWidth:t}=e.canvasSizeInfo;return t?n.drawingBufferWidth/t:1}return 1}function $O(n,e,t=!0){return function(n,e,t,i,r){const s=yj(n[0],e,t);let o=vj(n[1],e,i,r),a=yj(n[0]+1,e,t);const l=a===t-1?a:a-1;let c;return a=vj(n[1]+1,e,i,r),r?(a=0===a?a:a+1,c=o,o=a):c=a===i-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}(e,cm(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function yj(n,e,t){return Math.min(Math.round(n*e),t-1)}function vj(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const GO=dS(),ble=GO&&"undefined"!=typeof document,bj={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Cj(n={}){xo(GO,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},bj,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function({canvas:n,width:e=800,height:t=600,onError:i}){let r;return"string"==typeof n?(ble&&"complete"===document.readyState||i(`createGLContext called on canvas '${n}' before page was loaded`),r=document.getElementById(n)):n?r=n:(r=document.createElement("canvas"),r.id="lumagl-canvas",r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(t)?`${t}px`:"100%",document.body.insertBefore(r,document.body.firstChild)),r}({canvas:s,width:e,height:t,onError:i});return r=function(n,e){const{onError:t}=e;let i=null;const r=l=>i=l.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${i||"Unknown error"}`)}(o,n),r?(r=WO(r,n),function(n){const e=An(n)?"WebGL2":"WebGL1",t=function(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);gt.info(1,`${e}${n.debug?" debug":""} context ${t?`(${t.vendor},${t.renderer})`:""}`)()}(r),r):null}function WO(n,e={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},bj,e);const{manageState:t,debug:i}=e;return t&&mj(n,{copyState:!1,log:(...r)=>gt.log(1,...r)()}),GO&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),gt.level=Math.max(gt.level,1)):gt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function wj(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class Ej{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=wj(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(wj()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class qO{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof Ej?e:new Ej(t,i)),this.stats[t]}}const Yv="8.5.12",qf=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new qO({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==Yv)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${Yv}`);function et(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function YO(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return et(void 0!==i,`Accessing undefined constant GL.${e}`),i}function ih(n,e){e=Number(e);for(const t in n)if(n[t]===e)return`GL.${t}`;return String(e)}globalThis.luma||(dS()&&gt.log(1,`luma.gl ${Yv} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=globalThis.luma||{VERSION:Yv,version:Yv,log:gt,stats:qf,globals:{modules:{},nodeIO:{}}}),globalThis;const XO={};function Qo(n="id"){return XO[n]=XO[n]||1,`${n}-${XO[n]++}`}function Sj(n){return et("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function um(n){let e=!0;for(const t in n){e=!1;break}return e}function xj(n,e,t,i){const r=`See luma.gl ${t} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw gt.removed(`Calling removed method ${e}.${o}: `,r)(),new Error(o)})})}const dm="Resource subclass must define virtual methods";class Wu{get[Symbol.toStringTag](){return"Resource"}constructor(e,t={}){uS(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||Qo(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){et(e=YO(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=An(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension)){const a=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1;return s?l:a}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=An(this.gl),o={},a=t||Object.keys(r);for(const l of a){const c=r[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const f=i?ih(this.gl,l):l;o[f]=this.getParameter(l,e),i&&"GLenum"===c.type&&(o[f]=ih(this.gl,o[f]))}}return o}setParameter(e,t){et(e=YO(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=An(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=YO(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return xj(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(dm)}_deleteHandle(){throw new Error(dm)}_bindHandle(e){throw new Error(dm)}_getOptsFromHandle(){throw new Error(dm)}_getParameter(e,t){throw new Error(dm)}_setParameter(e,t){throw new Error(dm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=qf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];qf.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this[Symbol.toStringTag]){const i=qf.get("Memory Usage");i.get("GPU Memory").addCount(e),i.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this[Symbol.toStringTag]){const t=qf.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function KO(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Xv(n,{clamped:e=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ple({data:n,width:e,height:t}){const i=Math.round(e/2),r=Math.round(t/2),s=new Uint8Array(i*r*4);for(let o=0;o<r;o++)for(let a=0;a<i;a++)for(let l=0;l<4;l++)s[4*(o*i+a)+l]=n[4*(2*o*e+2*a)+l];return{data:s,width:i,height:r}}function ZO(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)a in e&&gt.removed(`${n}.${a}`,i[a]?`${n}.${i[a]}`:"N/A")();for(const a in r)a in e&&gt.deprecated(`${n}.${a}`,`${n}.${r[a]}`)();let o=null;for(const a in s)if(a in e){const l=s[a];gt.deprecated(`${n}.${a}`,`${n}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const Rle={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},kle={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Jo{static getBytesPerElement(e){return Xv(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return et(e.size),Xv(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Jo(...[Rle,...e])}constructor(...e){e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Jo.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Jo.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=ZO("Accessor",e,kle)).type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const Tj={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Fle={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Tj},Nle={removedProps:Tj};class Si extends Wu{get[Symbol.toStringTag](){return"Buffer"}constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/Jo.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/Jo.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=ZO("Buffer",e,Fle),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=ZO("Buffer",e,Nle))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new Jo(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;et(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(Qs(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:i=0,size:r}){const{gl:s}=this;return Qs(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,t,i,r),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}={}){Qs(this.gl);const s=Xv(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,r||o),c=a+l);const d=Math.min(o,l);return et((r=r||d)<=d),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}={}){return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(et(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,i=e.byteLength+t){et(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=KO(e);return et(s),this.setAccessor(new Jo(this.accessor,{type:s})),this}_setByteLength(e,t=this.usage){et(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/Xv(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new Jo(this.accessor,{type:KO(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return gt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return gt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return gt.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return gt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Jo(this.accessor,e),this}}const QO={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Aj={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Dj={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Vle=[9729,9728],Oj=globalThis.WebGLBuffer||function(){};class Yf extends Wu{get[Symbol.toStringTag](){return"Texture"}static isSupported(e,t={}){const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function(n,e){const t=QO[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=An(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function(n,e){const t=QO[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=Qo("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then(w=>this.initialize(Object.assign({},e,{pixels:w,data:w}))),this;const i="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:d}=e;t||(t=r);let{width:f,height:p,dataFormat:g,type:_,compressed:y=!1,mipmaps:v=!0}=e;const{depth:C=0}=e;return({width:f,height:p,compressed:y,dataFormat:g,type:_}=this._deduceParameters({format:s,type:_,dataFormat:g,compressed:y,data:t,width:f,height:p})),this.width=f,this.height=p,this.depth=C,this.format=s,this.type=_,this.dataFormat=g,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),v&&this._isNPOT()&&(gt.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),v=!1,this._updateForNPOT(l)),this.mipmaps=v,this.setImageData({data:t,width:f,height:p,depth:C,format:s,type:_,dataFormat:g,border:o,mipmaps:v,parameters:c,compressed:y}),v&&this.generateMipmap(),this.setParameters(l),a&&(this.data=t),i&&(this._video={video:t,parameters:l,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:i=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(e={}){return this._isNPOT()?(gt.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),tc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:d=this.type,width:f=this.width,height:p=this.height,dataFormat:g=this.dataFormat,compressed:_=!1}=e;c||(c=i),({type:d,dataFormat:g,compressed:_,width:f,height:p}=this._deduceParameters({format:s,type:d,dataFormat:g,compressed:_,data:c,width:f,height:p}));const{gl:y}=this;y.bindTexture(this.target,this.handle);let v=null;({data:c,dataType:v}=this._getDataType({data:c,compressed:_}));let C,w=0;return tc(this.gl,l,()=>{switch(v){case"null":y.texImage2D(t,r,s,f,p,o,g,d,c);break;case"typed-array":y.texImage2D(t,r,s,f,p,o,g,d,c,a);break;case"buffer":C=Qs(y),C.bindBuffer(35052,c.handle||c),C.texImage2D(t,r,s,f,p,o,g,d,a),C.bindBuffer(35052,null);break;case"browser-object":An(y)?y.texImage2D(t,r,s,f,p,o,g,d,c):y.texImage2D(t,r,s,g,d,c);break;case"compressed":for(const[M,k]of c.entries())y.compressedTexImage2D(t,M,k.format,k.width,k.height,o,k.data),w+=k.levelSize;break;default:et(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===v?w:c&&c.byteLength?c.byteLength:this.width*this.height*(Aj[this.dataFormat]||4)*(Dj[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:i=null,x:r=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:d=this.type,dataFormat:f=this.dataFormat,compressed:p=!1,offset:g=0,border:_=this.border,parameters:y={}}){if(({type:d,dataFormat:f,compressed:p,width:o,height:a}=this._deduceParameters({format:c,type:d,dataFormat:f,compressed:p,data:i,width:o,height:a})),et(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=t),i&&i.data){const v=i;i=v.data,o=v.shape[0],a=v.shape[1]}i instanceof Si&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),tc(this.gl,y,()=>{if(p)this.gl.compressedTexSubImage2D(e,l,r,s,o,a,c,i);else if(null===i)this.gl.texSubImage2D(e,l,r,s,o,a,f,d,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,l,r,s,o,a,f,d,i,g);else if(i instanceof Oj){const v=Qs(this.gl);v.bindBuffer(35052,i),v.texSubImage2D(e,l,r,s,o,a,f,d,g),v.bindBuffer(35052,null)}else An(this.gl)?Qs(this.gl).texSubImage2D(e,l,r,s,o,a,f,d,i):this.gl.texSubImage2D(e,l,r,s,f,d,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return gt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Si?{data:e.handle,dataType:"buffer"}:e instanceof Oj?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:l}=e;const c=QO[t];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:l,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},et(r,"Could not deduced texture size"),et(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),et(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:et(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(An(this.gl)||!this.width||!this.height||Sj(this.width)&&Sj(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Vle.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function zle(n,e){return et("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error(`Could not load image ${n}.`)),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class ea extends Yf{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Yf.isSupported(e,t)}constructor(e,t={}){uS(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:zle(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Xf="EXT_color_buffer_float",Ij={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Xf,bpp:2},33327:{gl2:Xf,bpp:4},34842:{gl2:Xf,bpp:8},33326:{gl2:Xf,bpp:4},33328:{gl2:Xf,bpp:8},34836:{gl2:Xf,bpp:16},35898:{gl2:Xf,bpp:4}};class hm extends Wu{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e,{format:t}={format:null}){return!t||function(n,e,t){const i=t[e];if(!i)return!1;const r=An(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,Ij)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:i=1,samples:r=0}){return et(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&An(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,t,i):this.gl.renderbufferStorage(36161,e,t,i),this.format=e,this.width=t,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Ij[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const Nj="clear: bad arguments";function eI(n,{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}={}){const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),et(0!==o,Nj),tc(n,s,()=>{n.clear(o)})}function Lj(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function mn(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){Lj(s,i,r,o,a,"next",l)}function a(l){Lj(s,i,r,o,a,"throw",l)}o(void 0)})}}const tI=[34069,34070,34071,34072,34073,34074];let qle=(()=>{class n extends Yf{get[Symbol.toStringTag](){return"TextureCube"}constructor(t,i={}){uS(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(t={}){const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage({face:t,data:i,x:r=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:t,data:i,x:r,y:s,mipmapLevel:o})}setCubeMapImageData({width:t,height:i,pixels:r,data:s,border:o=0,format:a=6408,type:l=5121}){var c=this;return mn(function*(){const{gl:d}=c,f=r||s,p=yield Promise.all(tI.map(g=>{const _=f[g];return Promise.all(Array.isArray(_)?_:[_])}));c.bind(),tI.forEach((g,_)=>{p[_].length>1&&!1!==c.opts.mipmaps&&gt.warn(`${c.id} has mipmap and multiple LODs.`)(),p[_].forEach((y,v)=>{t&&i?d.texImage2D(g,v,a,t,i,o,a,l,y):d.texImage2D(g,v,a,a,l,y)})}),c.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:d=5121}=t,{gl:f}=this,p=o||a;return this.bind(),p instanceof Promise?p.then(g=>this.setImageDataForFace(Object.assign({},t,{face:i,data:g,pixels:g}))):this.width||this.height?f.texImage2D(i,0,c,r,s,l,c,d,p):f.texImage2D(i,0,c,c,d,p),this}}return n.FACES=tI,n})();class Yle extends Yf{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return An(e)}constructor(e,t={}){Qs(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:i,height:r,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:d,parameters:f={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),tc(this.gl,f,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,d),d instanceof Si&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,c))}),this._trackAllocatedMemory(d&&d.byteLength?d.byteLength:this.width*this.height*this.depth*(Aj[this.dataFormat]||4)*(Dj[this.type]||1),"Texture"),this.loaded=!0,this}}function Bj(n,e){et(n instanceof ea||n instanceof qle||n instanceof Yle);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:d}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:d},e))}function Xle(n,e){const{gl:t,width:i,height:r,id:s}=n;return new ts(t,Object.assign({},e,{id:`framebuffer-for-${s}`,width:i,height:r,attachments:{36064:n}}))}function hS(n,e={}){const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:d,deleteFramebuffer:f}=Kv(n);et(d);const{gl:p,handle:g,attachments:_}=d;a=a||d.width,l=l||d.height,36064===s&&null===g&&(s=1028),et(_[s]),c=c||_[s].type,o=function(n,e,t,i,r){if(n)return n;return new(Xv(e=e||5121,{clamped:!1}))(i*r*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return et(!1),0}}(t))}(o,c,r,a,l),c=c||KO(o);const y=p.bindFramebuffer(36160,g);return p.readPixels(t,i,a,l,r,c,o),p.bindFramebuffer(36160,y||null),f&&d.delete(),o}function nI(n,{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}={}){let i=hS(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=Ple({data:i,width:r,height:s}));!function({data:n,width:e,height:t,bytesPerPixel:i=4,temp:r}){const s=e*i;r=r||new Uint8Array(s);for(let o=0;o<t/2;++o){const a=o*s,l=(t-o-1)*s;r.set(n.subarray(a,a+s)),n.copyWithin(a,l,l+s),n.set(r,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),l=a.createImageData(r,s);return l.data.set(i),a.putImageData(l,0,0),o.toDataURL()}function Kv(n){return n instanceof ts?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Xle(n),deleteFramebuffer:!0}}const Vj="Multiple render targets not supported";class ts extends Wu{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e,t={}){const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new ts(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Qs(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Qs(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:i=null,color:r=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:c}){if(et(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,i)for(const d in i){const f=i[d];(Array.isArray(f)?f[0]:f).resize({width:e,height:t})}else i=this._createDefaultAttachments(r,s,o,e,t);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:r,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),i&&this._setDrawBuffers(i),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:t,height:i}=e;if(null===this.handle)return et(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&gt.log(2,`Resizing framebuffer ${this.id} to ${t}x${i}`)();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e,{clearAttachments:t=!1,resizeAttachments:i=!0}={}){const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){et(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=r[a];let c=l;if(c)if(c instanceof hm)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[d,f=0,p=0]=l;c=d,this._attachTexture({attachment:a,texture:d,layer:f,level:p})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});else this._unattach(a);i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function(n){return(ts.STATUS||{})[n]||`Framebuffer error ${n}`}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(e={}){const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&eI(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,l)=>{!function(n,{framebuffer:e=null,buffer:t=6144,drawBuffer:i=0,value:r=[0,0,0,0]}={}){Qs(n),tc(n,{framebuffer:e},()=>{switch(t){case 6144:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:et(!1,Nj)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return gt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return gt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return gt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return gt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return gt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return gt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:i=0,width:r,height:s}){const o=Qs(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===t&&0===i&&void 0===r&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,i,r,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=ih(this.gl,r)),r}getAttachmentParameters(e=36064,t,i=this.constructor.ATTACHMENT_PARAMETERS||[]){const r={};for(const s of i)r[t?ih(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(e=!0){const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?ih(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return"undefined"!=typeof window&&window.open(nI(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>gt.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const i=nI(this,{targetMaxHeight:100});return gt.image({logLevel:e,message:t,image:i},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new ea(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new hm(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new hm(this.gl,{id:`${this.id}-depth`,format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&et(!1),o}_unattach(e){const t=this.attachments[e];!t||(t instanceof hm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:i}=this;i.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:i,level:r}){const{gl:s}=this;switch(s.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:Qs(s).framebufferTextureLayer(36160,e,t.target,r,i);break;case 34067:const a=function(n){return n<34069?n+34069:n}(i);s.framebufferTexture2D(36160,e,a,t.handle,r);break;case 3553:s.framebufferTexture2D(36160,e,3553,t.handle,r);break;default:et(!1,"Illegal texture type")}s.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=function(n){return An(n)?n:null}(this.gl);t?t.readBuffer(e):et(36064===e||1029===e,Vj),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=Qs(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):et(1===e.length&&(36064===e[0]||1029===e[0]),Vj)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in zj)void 0===n.luma.caps[e]&&(n.luma.caps[e]=jj(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}ts.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const zj={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const e=new ea(n,{format:6408,type:5126,dataFormat:6408}),t=new ts(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function iI(n,e){return Uj(n,e)}function Uj(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>jj(n,t))}function jj(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function(n,e){const t=zj[e];let i;et(t,e);const r=An(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&Boolean(n.getExtension(s))}else"string"==typeof r?i=Boolean(n.getExtension(r)):"boolean"==typeof r?i=r:et(!1);return i}(n,e)),n.luma.caps[e]||gt.log(2,`Feature: ${e} not supported`)(),n.luma.caps[e]}class rI{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return K(K({},this.source.getAccessor()),this.opts)}}const Zv=new class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,d=t*i+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,d)}let f;l&&(f=l*i+s);const p=this._allocate(c,d,a,f);return e&&o?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.props.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return i&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.props.poolSize)&&t.splice(s,0,i),t.length>this.props.poolSize&&t.shift()}},lce=(Math,1/180*Math.PI),Zi={};function uce(n,{precision:e=Zi.precision||4}={}){return n=function(n){return Math.round(n/Zi.EPSILON)*Zi.EPSILON}(n),`${parseFloat(n.toPrecision(e))}`}function rh(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function qu(n,e,t){if(rh(n)){t=t||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let i=0;i<t.length&&i<n.length;++i)t[i]=e(n[i],i,t);return t}return e(n)}function Qv(n){return function(n,e){return qu(n,t=>t*lce,void 0)}(n)}function Kf(n,e,t){return qu(n,i=>Math.max(e,Math.min(t,i)))}function fS(n,e,t){return rh(n)?n.map((i,r)=>fS(i,e[r],t)):t*e+(1-t)*n}function Jv(n,e,t){const i=Zi.EPSILON;t&&(Zi.EPSILON=t);try{if(n===e)return!0;if(rh(n)&&rh(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Jv(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Zi.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Zi.EPSILON=i}}function Yu(n,e){if(!n)throw new Error(`math.gl assertion ${e}`)}Zi.EPSILON=1e-12,Zi.debug=!1,Zi.precision=4,Zi.printTypes=!1,Zi.printDegrees=!1,Zi.printRowMajor=!0;class sI extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Yu(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:rh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Zi)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+uce(this[i],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Jv(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Zi.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function Rs(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function pS(n,e,t=""){if(Zi.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error(`math.gl: ${t} some fields set to invalid numbers'`);return n}const Hj={};function oI(n,e){Hj[n]||(Hj[n]=!0,console.warn(`${n} has been removed in version ${e}, see upgrade guide for more information`))}class _ce extends sI{get ELEMENTS(){return Yu(!1),0}copy(e){return Yu(!1),this}get x(){return this[0]}set x(e){this[0]=Rs(e)}get y(){return this[1]}set y(e){this[1]=Rs(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return Rs(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return Rs(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Yu(e>=0&&e<this.ELEMENTS,"index is out of range"),Rs(this[e])}setComponent(e,t){return Yu(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Gc=1e-6,ta="undefined"!=typeof Float32Array?Float32Array:Array;function $j(){var n=new ta(3);return ta!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Gj(n,e,t){var i=new ta(3);return i[0]=n,i[1]=e,i[2]=t,i}function Wj(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function gS(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function qj(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function Yj(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}$j();const aI=[0,0,0],Xj={};class Js extends _ce{static get ZERO(){return Xj.ZERO=Xj.ZERO||Object.freeze(new Js(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&rh(e)?this.copy(e):(Zi.debug&&(Rs(e),Rs(t),Rs(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Zi.debug&&(Rs(e.x),Rs(e.y),Rs(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Rs(e)}angle(e){return function(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),f=d&&Wj(n,e)/d;return Math.acos(Math.min(Math.max(f,-1),1))}(this,e)}cross(e){return gS(this,this,e),this.check()}rotateX({radians:e,origin:t=aI}){return function(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=aI}){return function(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=aI}){return function(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return qj(this,this,e),this.check()}transformAsVector(e){return Yj(this,this,e),this.check()}transformByMatrix3(e){return function(n,e,t){var i=e[0],r=e[1],s=e[2];n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],l=e[1],c=e[2],d=r*c-s*l,f=s*a-i*c,p=i*l-r*a,g=r*p-s*f,_=s*d-i*p,y=i*f-r*d,v=2*t[3];f*=v,p*=v,_*=2,y*=2,n[0]=a+(d*=v)+(g*=2),n[1]=l+f+_,n[2]=c+p+y}(this,this,e),this.check()}}const Kj=new Js;function fm(n,e,t,i){Kj.set(n,e,t);const r=Kj.len();return{distance:i/r,normal:new Js(-n/r,-e/r,-t/r)}}function Nce(n){return n-Math.fround(n)}let tb;function lI(n,{size:e=1,startIndex:t=0,endIndex:i}){Number.isFinite(i)||(i=n.length);const r=(i-t)/e;tb=Zv.allocate(tb,r,{type:Float32Array,size:2*e});let s=t,o=0;for(;s<i;){for(let a=0;a<e;a++){const l=n[s++];tb[o+a]=l,tb[o+a+e]=Nce(l)}o+=2*e}return tb.subarray(0,r*e*2)}function mS(n){return n.stride||n.size*n.bytesPerElement}function Zj(n,e){e.offset&&Nn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=mS(n),s=("vertexOffset"in e?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return Lt(K({},e),{offset:s,stride:t})}function nc(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const Qj=[],Jj=[];function _S(n,e=0,t=1/0){let i=Qj;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(Jj.length=n.length,i=Jj):i=Qj,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function e4(n){return n&&n[Symbol.asyncIterator]}function cI(n,e=(()=>!0)){return Array.isArray(n)?t4(n,e,[]):e(n)?[n]:[]}function t4(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?t4(r,e,t):e(r)&&t.push(r)}return t}function zce({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const Uce=[],yS=[[0,1/0]];function uI({source:n,target:e,start:t=0,end:i,size:r,getData:s}){const o=n.length,a=(i=i||e.length)-t;if(o>a)return void e.set(n.subarray(0,a),t);if(e.set(n,t),!s)return;let l=o;for(;l<a;){const c=s(l,n);for(let d=0;d<r;d++)e[t+l]=c[d]||0,l++}}const $ce={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function n4(n,e){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",K(K(K({},$ce[n.type]),e),n)):null}function i4(n,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function r4(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function s4(n){n.push(n.shift())}function dI(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function o4({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,l=t.byteOffset,c=t.startIndices,d=r&&c,f=dI(t,e),p=t.state.constant;if(!d&&i>=f)return;const g=p?t.value:t.getBuffer().getData({srcByteOffset:l});if(t.settings.normalized&&!p){const C=s;s=(w,M)=>t._normalizeConstant(C(w,M))}const _=p?(C,w)=>s(g,w):(C,w)=>s(g.subarray(C,C+a),w),y=n.getData({length:i}),v=new Float32Array(f);(function({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return uI({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const l=i&&((d,f)=>i(d+a,f)),c=Math.min(r.length,s.length);for(let d=1;d<c;d++){const f=r[d]*t,p=s[d]*t;uI({source:n.subarray(o,f),target:e,start:a,end:p,size:t,getData:l}),o=f,a=p}a<e.length&&uI({source:[],target:e,start:a,size:t,getData:l})})({source:y,target:v,sourceStartIndices:r,targetStartIndices:c,size:a,getData:_}),n.byteLength<v.byteLength+l&&n.reallocate(v.byteLength+l),n.subData({data:v,offset:l})}class hI extends class{constructor(e,t){this.gl=e,this.id=t.id,this.size=t.size;const i=t.logicalType||t.type,r=5130===i;let{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),t.defaultValue=s;let o=i;r?o=5126:!o&&t.isIndexed?o=e&&iI(e,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),t.logicalType=i,t.type=o;let a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.shaderAttributes={},this.doublePrecision=r,r&&!1===t.fp64&&(a=Float32Array),t.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Si(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*mS(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Zv.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function(n,e){const t=Zj(n,e);return{high:t,low:Lt(K({},t),{offset:t.offset+4*n.size})}}(this.getAccessor(),t||{});return i[e]=new rI(this,s.high),i["".concat(e,"64Low")]=r?new rI(this,s.low):new Float32Array(this.size),i}if(t){const i=Zj(this.getAccessor(),t);return{[e]:new rI(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:t}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof Si&&(e={buffer:e});const i=K(K({},this.settings),e);if(t.bufferAccessor=i,e.constant){let r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),t.constant&&this._areValuesEqual(r,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){const r=e.buffer;t.externalBuffer=r,t.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;i.type=e.type||r.accessor.type,i.bytesPerElement=r.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=mS(i)}else if(e.value){this._checkExternalBuffer(e);let r=e.value;t.externalBuffer=null,t.constant=!1,this.value=r,i.bytesPerElement=r.BYTES_PER_ELEMENT,i.stride=mS(i);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&r instanceof Float64Array&&(r=lI(r,i));const a=r.byteLength+o+2*i.stride;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:r,offset:o}),i.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?lI(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:i}=this,r=i.allocatedValue,s=Zv.allocate(r,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?lI(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const i=this.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Nn.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}{constructor(e,t={}){super(e,t);const{transition:i=!1,noAlloc:r=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=t;Object.assign(this.settings,{transition:i,noAlloc:r,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:yS,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return n4(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function(n,e){if(n===yS||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=yS}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Uce}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate({numInstances:e,copy:t.updateRanges!==yS}),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,d]of s)o.call(r,this,{data:t,startRow:c,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else for(const[c,d]of s){const f=Number.isFinite(c)?this.getVertexOffset(c):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:p})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;return e?!r.noAlloc&&(i.binaryValue===e?(this.clearNeedsUpdate(),!0):(i.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),r.transform||t!==this.startIndices?(nc(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function(n,{size:e,stride:t,offset:i,startIndices:r,nested:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:e,l=i?i/o:0,c=Math.floor((n.length-l)/a);return(d,{index:f,target:p})=>{if(!r){const v=f*a+l;for(let C=0;C<e;C++)p[C]=n[v+C];return p}const g=r[f],_=r[f+1]||c;let y;if(s){y=new Array(_-g);for(let v=g;v<_;v++){const C=v*a+l;p=new Array(e);for(let w=0;w<e;w++)p[w]=n[C+w];y[v-g]=p}}else if(a===e)y=n.subarray(g*e+l,_*e+l);else{y=new n.constructor((_-g)*e);let v=0;for(let C=g;C<_;C++){const w=C*a+l;for(let M=0;M<e;M++)y[v++]=n[w+M]}}return y}}(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:e.size&&e.size!==this.size}),!1):(this.clearNeedsUpdate(),this.setData(e),!0))):(i.binaryValue=null,i.binaryAccessor=null,!1)}getVertexOffset(e){const{startIndices:t}=this;return(t?t[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:d,startIndices:f}=e,{accessor:p,transform:g}=a,_=l.binaryAccessor||("function"==typeof p?p:s[p]);nc("function"==typeof _,'accessor "'.concat(p,'" is not a function'));let y=e.getVertexOffset(i);const{iterable:v,objectInfo:C}=_S(t,i,r);for(const w of v){C.index++;let M=_(w,C);if(g&&(M=g.call(this,M)),f){const k=(C.index<f.length-1?f[C.index+1]:o)-f[C.index];if(M&&Array.isArray(M[0])){let V=y;for(const j of M)e._normalizeValue(j,c,V),V+=d}else M&&M.length>d?c.set(M,y):(e._normalizeValue(M,C.target,0),zce({target:c,source:C.target,start:y,count:k}));y+=k*d}else e._normalizeValue(M,c,y),y+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let fI={};function eo(n){Nn.level>0&&fI[n]&&fI[n].call(...arguments)}function Ma(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const a4="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",qce=`#version 300 es\n${a4}`;function l4(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function c4(n={}){const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?qce:e>300?`#version ${e}\n${a4}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,e){switch(e){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return Ma(!1),null}}(t,i);return e>=300?`#version ${e} ${300===e?"es":""}\nin ${i} ${t};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${s};\n}`:`varying ${i} ${t};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class u4 extends Wu{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return An(e)}constructor(e,t={}){Qs(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,um(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,gt.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof Si?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,i=0,r){const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,i,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Zce{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof Si?i:i.buffer:null}getData(e={}){const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&et(An(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const s=this.feedbackMap[r];r in t&&(i[s]=r)}Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:l,accessor:c}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:l,accessor:c})}}return i}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,{model:t}){const{program:i}=t;e.transformFeedback=new u4(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],et(i[s]instanceof Si)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new Si(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function d4(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const nb="vs",eue={[nb]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},vS="__LUMA_INJECT_DECLARATIONS__",h4=/void\s+main\s*\([^)]*\)\s*\{\n?/,f4=/}\n?[^{}]*$/,gI=[];function p4(n,e,t,i=!1){const r=e===nb;for(const s in t){const o=t[s];o.sort((l,c)=>l.order-c.order),gI.length=o.length;for(let l=0,c=o.length;l<c;++l)gI[l]=o[l].injection;const a=`${gI.join("\n")}\n`;switch(s){case"vs:#decl":r&&(n=n.replace(vS,a));break;case"vs:#main-start":r&&(n=n.replace(h4,l=>l+a));break;case"vs:#main-end":r&&(n=n.replace(f4,l=>a+l));break;case"fs:#decl":r||(n=n.replace(vS,a));break;case"fs:#main-start":r||(n=n.replace(h4,l=>l+a));break;case"fs:#main-end":r||(n=n.replace(f4,l=>a+l));break;default:n=n.replace(s,l=>l+a)}}return n=n.replace(vS,""),i&&(n=n.replace(/\}\s*$/,s=>s+eue[e])),n}function mI(n){const e={};return Ma(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?`${e[i]}\n${t[i]}`:t[i]}),e}const tue={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},bS="transform_uSize_",g4="transform_position";const cue={10241:9728,10240:9728,10242:33071,10243:33071};class due{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap)a[f]=i[this.samplerTextureMap[f]];this._setSourceTextureParameters();const d=function({sourceTextureMap:n,targetTextureVarying:e,targetTexture:t}){const i={};let r,s;e&&(({width:r,height:s}=t),i[`${bS}${e}`]=[r,s]);for(const o in n)({width:r,height:s}=n[o]),i[`${bS}${o}`]=[r,s];return i}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,d)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:c,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],i=hS(t);if(!e)return i;const r=i.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ma(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let l=0;l<i.length;l+=4)for(let c=0;c<s;c++)o[a++]=i[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof ea)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Si(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new ts(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(cue)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=Bj(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function({vs:n,sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}){let s=Object.keys(e).length,o=null;const a={};let l=n,c={};if(s>0||t){const d=l.split("\n"),f=d.slice();if(d.forEach((p,g,_)=>{if(s>0){const y=function(n,e){const t={},i=function(n){return l4(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=function(n){const e=`transform_uSampler_${n}`,t=`${bS}${n}`;return{samplerName:e,sizeName:t,uniformDeclerations:`  uniform sampler2D ${e};\n  uniform vec2 ${t};`}}(s),f=`  ${r} ${s} = transform_getInput(${a}, ${l}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ma(!1),null}}(r)};\n`;return t[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":f},samplerTextureMap:t}}return null}(p,e);if(y){const{updatedLine:v,inject:C}=y;f[g]=v,c=mI([c,C]),Object.assign(a,y.samplerTextureMap),s--}}t&&!o&&(o=function(n,e){const t=l4(n,["varying","out"]);return t&&t.name===e?t.type:null}(p,t))}),t){et(i);const p=`${bS}${t}`;c=mI([c,{"vs:#decl":`uniform vec2 ${p};\n`,"vs:#main-start":`     vec2 ${g4} = transform_getPos(${p});\n     gl_Position = vec4(${g4}, 0, 1.);\n`}])}l=f.join("\n")}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),c=mI([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:r,fs:e._fs||c4({version:d4(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[tue].concat(e.modules||[]):e.modules,uniforms:s,inject:c}}}const _I={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function fue(n){let e=m4(n);return"object"===e?n?"type"in n?Object.assign({},n,_I[n.type]):"value"in n?(e=m4(n.value),Object.assign({type:e},n,_I[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},_I[e])}function m4(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class yI{constructor({name:e,vs:t,fs:i,dependencies:r=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:d,fragmentShader:f}){Ma("string"==typeof e),this.name=e,this.vs=t||d,this.fs=i||f,this.getModuleUniforms=o,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];const r=t.slice(0,2);"string"==typeof i&&(i={order:0,injection:i}),e[r][t]=i}return e}(c),s&&(this.uniforms=function(n){const e={};for(const t in n){const r=fue(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Ma(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}_defaultGetUniforms(e={}){const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ma(s.validate(e[r],s),`${this.name}: invalid ${r}`),t[r]=e[r]):t[r]=s.value}return t}}function _ue(n){return function(n){const e={},t={};return vI({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(y4(n))}function vI({modules:n,level:e,moduleMap:t,moduleDepth:i}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const r of n)t[r.name]=r,(void 0===i[r.name]||i[r.name]<e)&&(i[r.name]=e);for(const r of n)r.dependencies&&vI({modules:r.dependencies,level:e+1,moduleMap:t,moduleDepth:i})}function y4(n,e){return n.map(t=>(t instanceof yI||(Ma("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${t}' and use it directly.`),Ma(t.name,"shader module has no name"),(t=new yI(t)).dependencies=y4(t.dependencies)),t))}const bI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Zf={};function xue(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(bI).forEach(n=>{Zf[n]=n});const CI={};function v4(n,e,t={}){const i=bI[e];if(Ma(i,e),!function(n={}){const e="undefined"!=typeof window&&window.navigator||{},t=n.userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in CI)return CI[e];const o=`#extension GL_${i[0]} : ${t.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const l=n.getShaderParameter(a,35713);return n.deleteShader(a),CI[e]=l,l}function CS(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function(n,e){const t=bI[e];Ma(t,e);const i=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&t[1]||t[0],r="string"==typeof i?Boolean(n.getExtension(i)):i;return Ma(!1===r||!0===r),r}(n,t))}function pm(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const b4=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Due=[...b4,[pm("attribute"),"in $1"],[pm("varying"),"out $1"]],Oue=[...b4,[pm("varying"),"in $1"]],C4=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Iue=[...C4,[pm("in"),"attribute $1"],[pm("out"),"varying $1"]],Pue=[...C4,[pm("in"),"varying $1"]],wI="gl_FragColor",EI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Rue=/void\s+main\s*\([^)]*\)\s*\{\n?/;function wS(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Lue=`\n\n${vS}\n\n`,w4={[nb]:"vertex",fs:"fragment"};function E4(n,{id:e,source:t,type:i,modules:r,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:d}){Ma("string"==typeof t,"shader source must be a string");const f=i===nb,p=t.split("\n");let g=100,_="",y=t;0===p[0].indexOf("#version ")?(g=300,_=p[0],y=p.slice(1).join("\n")):_=`#version ${g}`;const v={};r.forEach(j=>{Object.assign(v,j.getDefines())}),Object.assign(v,s);let C=c?`${_}\n${function({id:n,source:e,type:t}){return n&&"string"==typeof n&&-1===e.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${w4[t]}\n\n`:""}({id:e,source:t,type:i})}\n${function({type:n}){return`\n#define SHADER_TYPE_${w4[n].toUpperCase()}\n`}({type:i})}\n${function(n){switch(function(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:xue(t,i),vendor:t,renderer:i,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n)}\n${function(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return CS(n,Zf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),CS(n,Zf.GLSL_DERIVATIVES)&&v4(n,Zf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),CS(n,Zf.GLSL_FRAG_DATA)&&v4(n,Zf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),CS(n,Zf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n)}\n${function(n={}){let e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+=`#define ${i.toUpperCase()} ${n[i]}\n`)}return 0===e&&(t+="\n"),t}(v)}\n${f?"":"precision highp float;\n\n"}\n`:`${_}\n`;const w=function(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(o),M={},k={},V={};for(const j in a){const ee="string"==typeof a[j]?{injection:a[j],order:0}:a[j],ce=j.match(/^(v|f)s:(#)?([\w-]+)$/);if(ce){const pe=ce[3];ce[2]?"decl"===pe?k[j]=[ee]:V[j]=[ee]:M[j]=[ee]}else V[j]=[ee]}for(const j of r){d&&j.checkDeprecations(y,d),C+=j.getModuleSource(i,g);const ce=j.injections[i];for(const oe in ce){const pe=oe.match(/^(v|f)s:#([\w-]+)$/);if(pe){const ke="decl"===pe[2]?k:V;ke[oe]=ke[oe]||[],ke[oe].push(ce[oe])}else M[oe]=M[oe]||[],M[oe].push(ce[oe])}}return C+=Lue,C=p4(C,i,k),C+=function(n,e){let t="";for(const i in n){const r=n[i];if(t+=`void ${r.signature} {\n`,r.header&&(t+=`  ${r.header}`),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+=`  ${o.injection}\n`}r.footer&&(t+=`  ${r.footer}`),t+="}\n"}return t}(w[i],M),C+=y,C=p4(C,i,V),C=function(n,e,t){switch(e){case 300:return t?wS(n,Due):function(n){const e=(n=wS(n,Oue)).match(EI);if(e){const t=e[1];n=n.replace(new RegExp(`\\b${wI}\\b`,"g"),t)}else{const t="fragmentColor";n=n.replace(Rue,i=>`out vec4 ${t};\n${i}`).replace(new RegExp(`\\b${wI}\\b`,"g"),t)}return n}(n);case 100:return t?wS(n,Iue):function(n){const e=(n=wS(n,Pue)).match(EI);if(e){const t=e[1];n=n.replace(EI,"").replace(new RegExp(`\\b${t}\\b`,"g"),wI)}return n}(n);default:throw new Error(`unknown GLSL version ${e}`)}}(C,l?100:g,f),C}function zue(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const Wue={5126:Qi.bind(null,"uniform1fv",Ta,1,to),35664:Qi.bind(null,"uniform2fv",Ta,2,to),35665:Qi.bind(null,"uniform3fv",Ta,3,to),35666:Qi.bind(null,"uniform4fv",Ta,4,to),5124:Qi.bind(null,"uniform1iv",sh,1,to),35667:Qi.bind(null,"uniform2iv",sh,2,to),35668:Qi.bind(null,"uniform3iv",sh,3,to),35669:Qi.bind(null,"uniform4iv",sh,4,to),35670:Qi.bind(null,"uniform1iv",sh,1,to),35671:Qi.bind(null,"uniform2iv",sh,2,to),35672:Qi.bind(null,"uniform3iv",sh,3,to),35673:Qi.bind(null,"uniform4iv",sh,4,to),35674:Qi.bind(null,"uniformMatrix2fv",Ta,4,Xu),35675:Qi.bind(null,"uniformMatrix3fv",Ta,9,Xu),35676:Qi.bind(null,"uniformMatrix4fv",Ta,16,Xu),35678:ks,35680:ks,5125:Qi.bind(null,"uniform1uiv",ES,1,to),36294:Qi.bind(null,"uniform2uiv",ES,2,to),36295:Qi.bind(null,"uniform3uiv",ES,3,to),36296:Qi.bind(null,"uniform4uiv",ES,4,to),35685:Qi.bind(null,"uniformMatrix2x3fv",Ta,6,Xu),35686:Qi.bind(null,"uniformMatrix2x4fv",Ta,8,Xu),35687:Qi.bind(null,"uniformMatrix3x2fv",Ta,6,Xu),35688:Qi.bind(null,"uniformMatrix3x4fv",Ta,12,Xu),35689:Qi.bind(null,"uniformMatrix4x2fv",Ta,8,Xu),35690:Qi.bind(null,"uniformMatrix4x3fv",Ta,12,Xu),35678:ks,35680:ks,35679:ks,35682:ks,36289:ks,36292:ks,36293:ks,36298:ks,36299:ks,36300:ks,36303:ks,36306:ks,36307:ks,36308:ks,36311:ks},que={},Yue={},Xue={},S4=[0];function SI(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(S4[0]=n,n=S4);const r=n.length;if(r%e&&gt.warn(`Uniform size should be multiples of ${e}`,n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Ta(n,e){return SI(n,e,Float32Array,que)}function sh(n,e){return SI(n,e,Int32Array,Yue)}function ES(n,e){return SI(n,e,Uint32Array,Xue)}function x4(n,e,t){const i=Wue[t.type];if(!i)throw new Error(`Unknown GLSL uniform type ${t.type}`);return i().bind(null,n,e)}function Kue(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function Que(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Yf||n instanceof hm)||n instanceof ts&&Boolean(n.texture)}function Jue(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function ks(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Qi(n,e,t,i){let r=null,s=null;return(o,a,l)=>{const c=e(l,t),d=c.length;let f=!1;if(null===r)r=new Float32Array(d),s=d,f=!0;else{et(s===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(c[p]!==r[p]){f=!0;break}}return f&&(i(o,n,a,c),r.set(c)),f}}function to(n,e,t,i){n[e](t,i)}function Xu(n,e,t,i){n[e](t,!1,i)}function SS(n,e="unnamed"){const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function T4(n,e){let t="";for(let i=0;i<e.length;i++){const r=e[i];if((n[i+3]||n[i+2]||n[i+1])&&(t+=`${r}\n`,n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0;t+=A4(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,l)}}return t}function A4(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return`${t}${n}`}class ib extends Wu{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return et(!1),"unknown"}}constructor(e,t){uS(e),et("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:SS(t.source,null)||t.id||Qo(`unnamed ${ib.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=SS(e,null);t&&(this.id=Qo(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${ib.getTypeName(this.shaderType)}:${this.id}`}getName(){return SS(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||SS(e)||"(unnamed)",l=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)} shader ${a}`;for(let d=0;d<r.length;d++){const f=r[d];if(f.length<=1)continue;const p=f.split(":"),g=p[0],_=parseInt(p[2],10);if(isNaN(_))throw new Error(`GLSL compilation error in ${l}: ${n}`);"WARNING"!==g?s[_]=f:o[_]=f}const c=function(n,e=1,t=": "){const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return A4(a,r-a.length)+t+s})}(e);return{shaderName:l,errors:T4(s,c),warnings:T4(o,c)}}(i,this.source,this.shaderType,this.id);throw gt.error(`GLSL compilation errors in ${r}\n${s}`)(),gt.warn(`GLSL compilation warnings in ${r}\n${o}`)(),new Error(`GLSL compilation errors in ${r}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class xI extends ib{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class MI extends ib{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ns=5126,rb=5124,sb=5125,TI={[ns]:[ns,1,"float"],35664:[ns,2,"vec2"],35665:[ns,3,"vec3"],35666:[ns,4,"vec4"],[rb]:[rb,1,"int"],35667:[rb,2,"ivec2"],35668:[rb,3,"ivec3"],35669:[rb,4,"ivec4"],[sb]:[sb,1,"uint"],36294:[sb,2,"uvec2"],36295:[sb,3,"uvec3"],36296:[sb,4,"uvec4"],35670:[ns,1,"bool"],35671:[ns,2,"bvec2"],35672:[ns,3,"bvec3"],35673:[ns,4,"bvec4"],35674:[ns,8,"mat2"],35685:[ns,8,"mat2x3"],35686:[ns,8,"mat2x4"],35675:[ns,12,"mat3"],35687:[ns,12,"mat3x2"],35688:[ns,12,"mat3x4"],35676:[ns,16,"mat4"],35689:[ns,16,"mat4x2"],35690:[ns,16,"mat4x3"]};function k4(n){const e=TI[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function F4(n,e){switch(n){case 5120:case 5121:case 5122:case 5123:n=ns}for(const t in TI){const[i,r,s]=TI[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class Rde{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),l=t.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!An(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=k4(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const l={location:e,name:t,accessor:new Jo(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=k4(i),l={location:e,name:t,accessor:new Jo({type:s,size:r*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const kde=35981,Fde=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class L4 extends Wu{get[Symbol.toStringTag](){return"Program"}constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",Fde),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=kde}=e;return this.hash=t||"",this.vs="string"==typeof i?new xI(this.gl,{id:`${e.id}-vs`,source:i}):i,this.fs="string"==typeof r?new MI(this.gl,{id:`${e.id}-fs`,source:r}):r,et(this.vs instanceof xI),et(this.fs instanceof MI),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Qs(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Rde(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:i,offset:r=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:d=c>0,vertexArray:f=null,transformFeedback:p,framebuffer:g,parameters:_={},uniforms:y,samplers:v}){if((y||v)&&(gt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(y||{})),gt.priority>=e){const C=g?g.id:"default",w=`mode=${ih(this.gl,t)} verts=${i} instances=${c} indexType=${ih(this.gl,l)} isInstanced=${d} isIndexed=${a} Framebuffer=${C}`;gt.log(e,w)()}return et(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||d&&0===c||(f.bindForDraw(i,c,()=>{if(void 0!==g&&(_=Object.assign({},_,{framebuffer:g})),p){const C=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return et(!1),0}}(t);p.begin(C)}this._bindTextures(),tc(this.gl,_,()=>{a&&d?this.gl2.drawElementsInstanced(t,i,l,r,c):a&&An(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(t,s,o,i,l,r):a?this.gl.drawElements(t,i,l,r):d?this.gl2.drawArraysInstanced(t,r,i,c):this.gl.drawArrays(t,r,i)}),p&&p.end()}),0))}setUniforms(e={}){gt.priority>=2&&function(n,e,t){for(const i in n){const r=n[i];if((!t||Boolean(t[i]))&&!Que(r))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${i}`,r),new Error(`${e} Bad uniform ${i}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof ts&&(s=s.texture),s instanceof Yf)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=r;a.bind(l),s=l,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&Jue(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new xI({handle:r});break;case 35632:i.fs=new MI({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=Qo(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),gt.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),gt.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||gt.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=Kue(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=x4(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,`${r}[${o}]`),this._uniformSetters[`${r}[${o}]`]=x4(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class ob{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new ob(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),d=this._getHash(t),f=this._getHash(i),p=c.map(M=>this._getHash(M.name)).sort(),g=o.map(M=>this._getHash(M)),_=Object.keys(r).sort(),y=Object.keys(s).sort(),v=[],C=[];for(const M of _)v.push(this._getHash(M)),v.push(this._getHash(r[M]));for(const M of y)C.push(this._getHash(M)),C.push(this._getHash(s[M]));const w=`${d}/${f}D${v.join("/")}M${p.join("/")}I${C.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[w]){const M=function(n,e){const{vs:t,fs:i}=e,r=_ue(e.modules||[]);return{gl:n,vs:E4(n,Object.assign({},e,{source:t,type:nb,modules:r})),fs:E4(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:zue(r)}}(this.gl,{vs:t,fs:i,modules:c,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[w]=new L4(this.gl,{hash:w,vs:M.vs,fs:M.fs,varyings:o,bufferMode:a}),this._getUniforms[w]=M.getUniforms||(k=>{}),this._useCounts[w]=0}return this._useCounts[w]++,this._programCache[w]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;t[r++]=a,i[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;i[l]||(t[r++]=a,i[l]=!0)}return t.length=r,t}}let MS=null;class Aa extends Wu{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e,t={}){return!t.constantAttributeZero||An(e)||"Chrome"===function(n){if(!VO())return"Node";if(KU(n))return"Electron";const t=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":$v.chrome?"Chrome":$v.safari?"Safari":$v.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Aa(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Aa.MAX_ATTRIBUTES=Aa.MAX_ATTRIBUTES||e.getParameter(34921),Aa.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Aa._setConstantFloatArray(e,t,i);break;case Int32Array:Aa._setConstantIntArray(e,t,i);break;case Uint32Array:Aa._setConstantUintArray(e,t,i);break;default:et(!1)}}constructor(e,t={}){super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Aa.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return et(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:d}=i,{gl:f,gl2:p}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,t.handle),c?(et(An(f)),p.vertexAttribIPointer(e,r,s,o,a)):f.vertexAttribPointer(e,r,s,l,o,a),f.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e,t=!0){return!t&&0===e&&!Aa.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Si(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function(n,e){return new n(function(n){return(!MS||MS.byteLength<n)&&(MS=new ArrayBuffer(n)),MS}(n.BYTES_PER_ELEMENT*e),0,e)}(t.constructor,s);(function({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:et(!1)}}static _setConstantIntArray(e,t,i){switch(et(An(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:et(!1)}}static _setConstantUintArray(e,t,i){switch(et(An(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:et(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return et(Number.isFinite(t)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(t,e);default:return this.gl.getVertexAttrib(t,e)}})}}const jde=/^(.+)__LOCATION_([0-9]+)$/,Hde=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class $de{constructor(e,t={}){this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Aa(e),xj(this,"VertexArray","v6.0",Hde),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,i={}){if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t,i={}){const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Si(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Si&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Si&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,gt.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const d=Jo.resolve(l.accessor,this.accessors[o]||{},i,r),{size:f,type:p}=d;return et(Number.isFinite(f)&&Number.isFinite(p)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=jde.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Si)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Si)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Si))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(Aa.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Aa.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Si){const a=i;if(o){const l=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,t={}){return gt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function ab(n,e={}){const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=","+(o%i==0?" ":"")),r+=ab(n[o],e);return`${r}${n.length>t?"...":"]"}`}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function B4(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let c,d,f,s="NOT PROVIDED",o=1,a=0,l=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),c=-1!==s.indexOf("nt")),e instanceof Si){const p=e,{data:g,changed:_}=p.getDebugData();let y;return d=_?"*":"",f=g,l=p.byteLength,a=l/g.BYTES_PER_ELEMENT/o,t?y=`${t.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${ih(r,s)})`:(c=!0,y=`${l} bytes`),{[i]:`${d}${ab(f,{size:o,isInteger:c})}`,"Format ":y}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=-1!==s.indexOf("nt"),{[i]:`${ab(f,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function qde(n,e){const{type:t,size:i}=e,r=F4(t,i);return r?`${n} (${r.name})`:n}function V4({header:n="Uniforms",program:e,uniforms:t,undefinedOnly:i=!1}){et(e);const s=".*Matrix",a={},l=Object.keys(e._uniformSetters).sort();let c=0;for(const p of l)!p.match(".*_.*")&&!p.match(s)&&AI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)p.match(s)&&AI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)a[p]||AI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;let d=0;const f={};if(!i)for(const p in t){const g=t[p];a[p]||(d++,f[p]={Type:`NOT USED: ${g}`,[n]:ab(g)})}return{table:a,count:c,unusedTable:f,unusedCount:d}}function AI({table:n,header:e,uniforms:t,uniformName:i,undefinedOnly:r}){const s=t[i],o=function(n){return null!=n}(s);return!(r&&o||(n[i]={[e]:o?ab(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function z4(n){const{type:e,size:t}=n.accessor,i=F4(e,t);return i?`${i.name} ${n.name}`:n.name}const Kde={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Qde(n,e){const{attributeMap:t=Kde}=e||{};return t&&t[n]||n}function Jde(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}et(Number.isFinite(e.size),`attribute ${n} needs size`)}const U4=()=>{},nhe={};class ym{constructor(e,t={}){const{id:i=Qo("model")}=t;et(cS(e)),this.id=i,this.gl=e,this.id=t.id||Qo("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||ob.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},et(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return et(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return et(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Qde(s,undefined);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const l=o.value,c=K({},o);delete c.value,i[a]=[new Si(n,l),c],Jde(s,c)}}if(r){const s=r.value||r;et(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Si(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(um(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return eI(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;let c;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),gt.priority>=2&&(c=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:f=d.isIndexed,indexType:p=d.indexType,indexOffset:g=d.indexOffset,vertexArrayInstanced:_=d.isInstanced}=this.props;_&&!this.isInstanced&&gt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:y,instanceCount:v}=this,{onBeforeRender:C=U4,onAfterRender:w=U4}=this.props;C(),this.program.setUniforms(this.uniforms);const M=this.program.draw(Object.assign(nhe,e,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:p,isInstanced:y,instanceCount:v,offset:f?g:0}));return w(),gt.priority>=2&&this._logDrawCallEnd(c,l,i),M}transform(e={}){const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return gt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:d}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}et(t instanceof L4,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new $de(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Si&&t.delete()}}_setAnimationProps(e){this.animated&&et(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(um(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new u4(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),gt.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:gt.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function({vertexArray:n,header:e="Attributes"}){if(!n.configuration)return{};const t={};n.elements&&(t.ELEMENT_ARRAY_BUFFER=B4(n,n.elements,null,e));const i=n.values;for(const r in i){const s=n._getAttributeInfo(r);if(s){let o=`${r}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${r}: ${qde(s.name,a)}`),t[o]=B4(n,i[r],a,e)}}return t}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=V4({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:d}=V4({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&gt.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&gt.log("UNUSED UNIFORMS",Object.keys(a))();const f=function(n){const e={},t=`Accessors for ${n.id}`;for(const i of n.attributeInfos)i&&(e[`in ${z4(i)}`]={[t]:JSON.stringify(i.accessor)});for(const i of n.varyingInfos)i&&(e[`out ${z4(i)}`]={[t]:JSON.stringify(i.accessor)});return e}(this.vertexArray.configuration);gt.table(e,s)(),gt.table(e,o)(),gt.table(e+1,f)(),r&&r.log({logLevel:2,message:`Rendered to ${r.id}`}),gt.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class DI{static isSupported(e){return An(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();et(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new ym(t,Object.assign({},e,{fs:e.fs||c4({version:d4(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(n){return!(um(n.feedbackBuffers)&&um(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new Zce(e,t)),function(n){return!(um(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new due(e,t)),et(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}function TS(){}const she={onStart:TS,onUpdate:TS,onInterrupt:TS,onEnd:TS};class lb{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=K(K({},she),e),this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const fhe={interpolation:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="interpolation",this.transition=new lb(i),this.attribute=t,this.attributeInTransition=new hI(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(n,e){const t=r4(e.size);return new DI(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new Si(e,r),new Si(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();const{buffers:r,attribute:s}=this;s4(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)o4(K({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=dI(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:i4(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{time:t,settings:{duration:i,easing:r}}=this.transition,s=r(t/i);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},spring:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="spring",this.transition=new lb(i),this.attribute=t,this.attributeInTransition=new hI(e,Lt(K({},t.settings),{normalized:!1})),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(n){return new ea(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(n,e){return new ts(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(n,e,t){const i=r4(e.size);return new DI(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Si(e,r),new Si(e,r),new Si(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)o4(K({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=dI(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:i4(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),s4(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),hS(i)[0]>0||r.end(),!0)}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}};class phe{constructor(e,{id:t,timeline:i}){this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=DI.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);!o||this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void Nn.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=fhe[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Nn.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const j4="attributeManager.invalidate";class bhe{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new phe(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,t){this._add(e,t)}addInstanced(e,t){this._add(e,t,{instanced:1})}remove(e){for(let t=0;t<e.length;t++){const i=e[t];void 0!==this.attributes[i]&&(this.attributes[i].delete(),delete this.attributes[i])}}invalidate(e,t){const i=this._invalidateTrigger(e,t);eo(j4,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);eo(j4,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}={}){let l=!1;eo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const d=this.attributes[c],f=d.settings.accessor;d.startIndices=i,s[c]&&Nn.removed("props.".concat(c),"data.attributes.".concat(c))(),d.setExternalBuffer(o[c])||d.setBinaryValue(o[f],e.startIndices)||!o[f]&&d.setConstantValue(s[f])||d.needsUpdate()&&(l=!0,this._updateAttribute({attribute:d,numInstances:t,data:e,props:s,context:a})),this.needsRedraw|=d.needsRedraw()}l&&eo("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r=K({},i.getAttributes());for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}getAccessors(){return this.updateTriggers}_add(e,t,i={}){t&&Nn.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const r in e)this.attributes[r]=this._createAttribute(r,e[r],i);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r=Lt(K({},t),{id:e,isIndexed:t.isIndexed||t.elements||!1,constant:t.constant||!1,size:(t.elements?1:t.size)||1,value:t.value||null,divisor:t.instanced||i.instanced?1:t.divisor||0});return new hI(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;eo("attribute.updateStart",t),t.allocate(i)&&eo("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,eo("attribute.updateEnd",t,i))}}function $4(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function G4(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const She={interpolation:class extends lb{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=fS(t,i,o)}},spring:class extends lb{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=$4(n[o],e[o],t[o],i,r);return s}return $4(n,e,t,i,r)}(s,o,t,i,r);const l=G4(a,t),c=G4(a,o);l<1e-5&&c<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class xhe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;t=c,this.remove(e)}if(!(r=n4(r)))return;const o=She[r.type];if(!o)return void Nn.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start(Lt(K({},r),{fromValue:t,toValue:i})),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const AS={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},{COMPONENT:Mhe}=AS;function Dhe(n,e){if(!n.transitions)return null;const t={},i=II(n);for(const r in n.transitions){const s=i[r],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&OI(n[r],e[r],s)&&(t[r]=!0)}return t}function W4({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}={}){if(e===n)return null;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=OI(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=OI(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return null}function OI(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Phe(n,e){if(null===e)return"oldProps is null, initial diff";const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function q4(n,e,t){let i=n.updateTriggers[t];i=null==i?{}:i;let r=e.updateTriggers[t];return r=null==r?{}:r,W4({oldProps:r,newProps:i,triggerName:t})}function II(n){const e=n[Mhe],t=e&&e.constructor;return t?t._propTypes:{}}function Bhe(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function DS(n){let t,e={};return i=>{for(const r in i)if(!Bhe(i[r],e[r])){t=n(i),e=i;break}return t}}function Vhe(n,e){if(!e)return n;const t=K(K({},n),e);if("defines"in e&&(t.defines=K(K({},n.defines),e.defines)),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i=K({},n.inject);for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function PI(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],g=e[11],_=e[12],y=e[13],v=e[14],C=e[15],w=t*a-i*o,M=t*l-r*o,k=t*c-s*o,V=i*l-r*a,j=i*c-s*a,ee=r*c-s*l,ce=d*y-f*_,oe=d*v-p*_,pe=d*C-g*_,Ee=f*v-p*y,ke=f*C-g*y,te=p*C-g*v,ne=w*te-M*ke+k*Ee+V*pe-j*oe+ee*ce;return ne?(n[0]=(a*te-l*ke+c*Ee)*(ne=1/ne),n[1]=(r*ke-i*te-s*Ee)*ne,n[2]=(y*ee-v*j+C*V)*ne,n[3]=(p*j-f*ee-g*V)*ne,n[4]=(l*pe-o*te-c*oe)*ne,n[5]=(t*te-r*pe+s*oe)*ne,n[6]=(v*k-_*ee-C*M)*ne,n[7]=(d*ee-p*k+g*M)*ne,n[8]=(o*ke-a*pe+c*ce)*ne,n[9]=(i*pe-t*ke-s*ce)*ne,n[10]=(_*j-y*k+C*w)*ne,n[11]=(f*k-d*j-g*w)*ne,n[12]=(a*oe-o*Ee-l*ce)*ne,n[13]=(t*Ee-i*oe+r*ce)*ne,n[14]=(y*M-_*V-v*w)*ne,n[15]=(d*V-f*M+p*w)*ne,n):null}function Qf(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=e[8],p=e[9],g=e[10],_=e[11],y=e[12],v=e[13],C=e[14],w=e[15],M=t[0],k=t[1],V=t[2],j=t[3];return n[0]=M*i+k*a+V*f+j*y,n[1]=M*r+k*l+V*p+j*v,n[2]=M*s+k*c+V*g+j*C,n[3]=M*o+k*d+V*_+j*w,n[4]=(M=t[4])*i+(k=t[5])*a+(V=t[6])*f+(j=t[7])*y,n[5]=M*r+k*l+V*p+j*v,n[6]=M*s+k*c+V*g+j*C,n[7]=M*o+k*d+V*_+j*w,n[8]=(M=t[8])*i+(k=t[9])*a+(V=t[10])*f+(j=t[11])*y,n[9]=M*r+k*l+V*p+j*v,n[10]=M*s+k*c+V*g+j*C,n[11]=M*o+k*d+V*_+j*w,n[12]=(M=t[12])*i+(k=t[13])*a+(V=t[14])*f+(j=t[15])*y,n[13]=M*r+k*l+V*p+j*v,n[14]=M*s+k*c+V*g+j*C,n[15]=M*o+k*d+V*_+j*w,n}function OS(n,e,t){var o,a,l,c,d,f,p,g,_,y,v,C,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],l=e[2],c=e[3],d=e[4],f=e[5],p=e[6],g=e[7],_=e[8],y=e[9],v=e[10],C=e[11],n[0]=o=e[0],n[1]=a,n[2]=l,n[3]=c,n[4]=d,n[5]=f,n[6]=p,n[7]=g,n[8]=_,n[9]=y,n[10]=v,n[11]=C,n[12]=o*i+d*r+_*s+e[12],n[13]=a*i+f*r+y*s+e[13],n[14]=l*i+p*r+v*s+e[14],n[15]=c*i+g*r+C*s+e[15]),n}function IS(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Y4(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],f=e[10],p=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+c*i,n[5]=o*r+d*i,n[6]=a*r+f*i,n[7]=l*r+p*i,n[8]=c*r-s*i,n[9]=d*r-o*i,n[10]=f*r-a*i,n[11]=p*r-l*i,n}function X4(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],d=e[5],f=e[6],p=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+c*i,n[1]=o*r+d*i,n[2]=a*r+f*i,n[3]=l*r+p*i,n[4]=c*r-s*i,n[5]=d*r-o*i,n[6]=f*r-a*i,n[7]=p*r-l*i,n}function K4(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function PS(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}!function(){var n=new ta(4);ta!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const Z4=[0,0,0,0],hfe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ffe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pfe=[0,0,0],gfe=[0,0,0],mfe=DS(function({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=function(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=Z4,l=Z4,c=n.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:f,offsetMode:p}=Q4(n,e,t);return p&&(l=n.projectPosition(d||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=PS([],l,o),s=i||s,o=Qf([],r,s),o=Qf([],o,hfe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:d}}(n,t,i),d=n.getDistanceScales(),f=[n.width*e,n.height*e],p=n.projectionMatrix.transform([0,0,-n.focalDistance,1])[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:pfe,project_uScale:n.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(c){const _=n.getDistanceScales(c);switch(t){case Wn.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=_.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=_.unitsPerMeter2;break;case Wn.LNGLAT:case Wn.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=_.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=_.unitsPerDegree2;break;case Wn.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,_.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,_.unitsPerMeter2[2]]}}return g});function Q4(n,e,t=gfe){let r,i=t,s=!0;switch(r=e===Wn.LNGLAT_OFFSETS||e===Wn.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Hc.WEB_MERCATOR:(e===Wn.LNGLAT||e===Wn.CARTESIAN)&&(s=!1);break;case Hc.WEB_MERCATOR_AUTO_OFFSET:e===Wn.LNGLAT?i=r:e===Wn.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Hc.IDENTITY:i=n.position.map(Math.fround);break;case Hc.GLOBE:s=!1,r=null;break;default:s=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}class bfe extends sI{get ELEMENTS(){return Yu(!1),0}get RANK(){return Yu(!1),0}toString(){let e="[";if(Zi.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=` ${this[i*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=Rs(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function RS(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function J4(n,e){return n[0]=-e[0],n[1]=-e[1],n}function e5(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}!function(){var n=new ta(2);ta!=Float32Array&&(n[0]=0,n[1]=0)}();const t5=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Efe=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sfe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),bm={};class Ht extends bfe{static get IDENTITY(){return bm.IDENTITY=bm.IDENTITY||Object.freeze(new Ht(t5)),bm.IDENTITY}static get ZERO(){return bm.ZERO=bm.ZERO||Object.freeze(new Ht(Efe)),bm.ZERO}get INDICES(){return Sfe}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,l,c,d,f,p,g,_,y,v){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=d,this[10]=f,this[11]=p,this[12]=g,this[13]=_,this[14]=y,this[15]=v,this.check()}setRowMajor(e,t,i,r,s,o,a,l,c,d,f,p,g,_,y,v){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=t,this[5]=o,this[6]=d,this[7]=_,this[8]=i,this[9]=a,this[10]=f,this[11]=y,this[12]=r,this[13]=l,this[14]=p,this[15]=v,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(t5)}fromQuaternion(e){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,d=i*o,f=i*a,p=r*o,g=r*a,_=r*l,y=s*o,v=s*a,C=s*l;n[0]=1-f-_,n[1]=d+C,n[2]=p-v,n[3]=0,n[4]=d-C,n[5]=1-c-_,n[6]=g+y,n[7]=0,n[8]=p+v,n[9]=g-y,n[10]=1-c-f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:i,top:r,near:s,far:o}){return o===1/0?Ht._computeInfinitePerspectiveOffCenter(this,e,t,i,r,s):function(n,e,t,i,r,s,o){var a=1/(t-e),l=1/(r-i),c=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*l,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*l,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*c,n[15]=0}(this,e,t,i,r,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,i,r,s,o){const l=2*o/(s-r),c=(i+t)/(i-t),d=(s+r)/(s-r),g=-2*o;return e[0]=2*o/(i-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=d,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,t,i){return 1===arguments.length&&({eye:e,center:t,up:i}=e),function(n,e,t,i){var r,s,o,a,l,c,d,f,p,g,_=e[0],y=e[1],v=e[2],C=i[0],w=i[1],M=i[2],k=t[0],V=t[1],j=t[2];Math.abs(_-k)<Gc&&Math.abs(y-V)<Gc&&Math.abs(v-j)<Gc?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(d=_-k,f=y-V,p=v-j,r=w*(p*=g=1/Math.hypot(d,f,p))-M*(f*=g),s=M*(d*=g)-C*p,o=C*f-w*d,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=f*o-p*s,l=p*r-d*o,c=d*s-f*r,(g=Math.hypot(a,l,c))?(a*=g=1/g,l*=g,c*=g):(a=0,l=0,c=0),n[0]=r,n[1]=a,n[2]=d,n[3]=0,n[4]=s,n[5]=l,n[6]=f,n[7]=0,n[8]=o,n[9]=c,n[10]=p,n[11]=0,n[12]=-(r*_+s*y+o*v),n[13]=-(a*_+l*y+c*v),n[14]=-(d*_+f*y+p*v),n[15]=1)}(this,e,t=t||[0,0,0],i=i||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:i,top:r,near:s=.1,far:o=500}){return function(n,e,t,i,r,s,o){var a=1/(e-t),l=1/(i-r),c=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*l,n[14]=(o+s)*c,n[15]=1}(this,e,t,i,r,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:i=1,near:r=.1,far:s=500}){if(e>2*Math.PI)throw Error("radians");const a=i*Math.tan(e/2),l=a*t;return(new Ht).ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:s})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return function(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(this,e,i,r,s),this.check()}determinant(){return function(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8],d=n[9],f=n[10],p=n[11],g=n[12],_=n[13],y=n[14],v=n[15];return(e*o-t*s)*(f*v-p*y)-(e*a-i*s)*(d*v-p*_)+(e*l-r*s)*(d*y-f*_)+(t*a-i*o)*(c*v-p*g)-(t*l-r*o)*(c*y-f*g)+(i*l-r*a)*(c*_-d*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return PI(this,this),this.check()}multiplyLeft(e){return Qf(this,e,this),this.check()}multiplyRight(e){return Qf(this,this,e),this.check()}rotateX(e){return Y4(this,this,e),this.check()}rotateY(e){return function(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],d=e[9],f=e[10],p=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-c*i,n[1]=o*r-d*i,n[2]=a*r-f*i,n[3]=l*r-p*i,n[8]=s*i+c*r,n[9]=o*i+d*r,n[10]=a*i+f*r,n[11]=l*i+p*r}(this,this,e),this.check()}rotateZ(e){return X4(this,this,e),this.check()}rotateXYZ([e,t,i]){return this.rotateX(e).rotateY(t).rotateZ(i)}rotateAxis(e,t){return function(n,e,t,i){var l,c,d,f,p,g,_,y,v,C,w,M,k,V,j,ee,ce,oe,pe,Ee,ke,te,ne,Ae,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<Gc||(r*=a=1/a,s*=a,o*=a,l=Math.sin(t),c=Math.cos(t),p=e[1],g=e[2],_=e[3],v=e[5],C=e[6],w=e[7],k=e[9],V=e[10],j=e[11],pe=r*s*(d=1-c)-o*l,Ee=s*s*d+c,ke=o*s*d+r*l,te=r*o*d+s*l,ne=s*o*d-r*l,Ae=o*o*d+c,n[0]=(f=e[0])*(ee=r*r*d+c)+(y=e[4])*(ce=s*r*d+o*l)+(M=e[8])*(oe=o*r*d-s*l),n[1]=p*ee+v*ce+k*oe,n[2]=g*ee+C*ce+V*oe,n[3]=_*ee+w*ce+j*oe,n[4]=f*pe+y*Ee+M*ke,n[5]=p*pe+v*Ee+k*ke,n[6]=g*pe+C*Ee+V*ke,n[7]=_*pe+w*Ee+j*ke,n[8]=f*te+y*ne+M*Ae,n[9]=p*te+v*ne+k*Ae,n[10]=g*te+C*ne+V*Ae,n[11]=_*te+w*ne+j*Ae,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?IS(this,this,e):IS(this,this,[e,e,e]),this.check()}translate(e){return OS(this,this,e),this.check()}transform(e,t){return 4===e.length?(pS(t=PS(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;switch(i){case 2:t=function(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:t=qj(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return pS(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:t=Yj(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return pS(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}transformPoint(e,t){return oI("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return oI("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return oI("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function Cm(n,e){const t=PS([],e,n);return K4(t,t,1/t[3]),t}function n5(n,e){const t=n%e;return t<0?e+t:t}function i5(n,e,t){return n<e?e:n>t?t:n}const RI=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function Ku(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ic=Math.PI,r5=ic/4,rc=ic/180,kI=180/ic,FI=4003e4,kS=85.051129;function FS([n,e]){return Ku(Number.isFinite(n)),Ku(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude"),[512*(n*rc+ic)/(2*ic),512*(ic+Math.log(Math.tan(r5+e*rc*.5)))/(2*ic)]}function wm([n,e]){const t=n/512*(2*ic)-ic,i=2*(Math.atan(Math.exp(e/512*(2*ic)-ic))-r5);return[t*kI,i*kI]}function NI({latitude:n,longitude:e,highPrecision:t=!1}){Ku(Number.isFinite(n)&&Number.isFinite(e));const i={},s=Math.cos(n*rc),o=512/360,a=o/s,l=512/FI/s;if(i.unitsPerMeter=[l,l,l],i.metersPerUnit=[1/l,1/l,1/l],i.unitsPerDegree=[o,a,l],i.degreesPerUnit=[1/o,1/a,1/l],t){const c=rc*Math.tan(n*rc)/s,f=512/FI*c,p=f/a*l;i.unitsPerDegree2=[0,o*c/2,f],i.unitsPerMeter2=[p,0,p]}return i}function s5(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=NI({longitude:t,latitude:i,highPrecision:!0}),d=FS(n);d[0]+=s*(l[0]+c[0]*o),d[1]+=o*(l[1]+c[1]*o);const f=wm(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[f[0],f[1],p]:f}function a5(n){return 2*Math.atan(.5/n)*kI}function l5(n,e){const[t,i,r=0]=n;return Ku(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Cm(e,[t,i,r,1])}function ub(n,e,t=0){const[i,r,s]=n;if(Ku(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Cm(e,[i,r,s,1]);const o=Cm(e,[i,r,0,1]),a=Cm(e,[i,r,1,1]),l=o[2],c=a[2];return e5([],o,a,l===c?0:((t||0)-l)/(c-l))}const c5=Math.PI/180;function u5(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Cm(i,[e,0,1,1]),s=Cm(i,[e,n.height,1,1]),c=wm(e5([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return c[2]=t,c}const Nfe=Math.PI/180,Lfe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],BI=[0,0,0],Vfe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};let Em=(()=>{class n{constructor(t={}){const{id:i=null,x:r=0,y:s=0,width:o=1,height:a=1}=t;this.id=i||this.constructor.displayName||"viewport",this.x=r,this.y=s,this.width=o||1,this.height=a||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Hc.WEB_MERCATOR:Hc.WEB_MERCATOR_AUTO_OFFSET:Hc.IDENTITY}equals(t){return t instanceof n&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Jv(t.projectionMatrix,this.projectionMatrix)&&Jv(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:i=!0}={}){const s=l5(this.projectPosition(t),this.pixelProjectionMatrix),[o,a]=s,l=i?a:this.height-a;return 2===t.length?[o,l]:[o,l,s[2]]}unproject(t,{topLeft:i=!0,targetZ:r}={}){const[s,o,a]=t,d=ub([s,i?o:this.height-o,a],this.pixelUnprojectionMatrix,r&&r*this.distanceScales.unitsPerMeter[2]),[f,p,g]=this.unprojectPosition(d);return Number.isFinite(a)?[f,p,g]:Number.isFinite(r)?[f,p,r]:[f,p]}projectPosition(t){const[i,r]=this.projectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[i,r]=this.unprojectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return this.isGeospatial?FS(t):t}unprojectFlat(t){return this.isGeospatial?wm(t):t}getBounds(t={}){const i={targetZ:t.z||0},r=this.unproject([0,0],i),s=this.unproject([this.width,0],i),o=this.unproject([0,this.height],i),a=this.unproject([this.width,this.height],i);return[Math.min(r[0],s[0],o[0],a[0]),Math.min(r[1],s[1],o[1],a[1]),Math.max(r[0],s[0],o[0],a[0]),Math.max(r[1],s[1],o[1],a[1])]}getDistanceScales(t=null){return t?NI({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:i,width:r=1,height:s=1}){return t<this.x+this.width&&this.x<t+r&&i<this.y+this.height&&this.y<i+s}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){const e={};return e.left=fm(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),e.right=fm(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),e.bottom=fm(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),e.top=fm(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),e.near=fm(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),e.far=fm(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),e}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,i){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:t,fovyRadians:i,aspect:r,focalDistance:s,near:o,far:a}){return t?(new Ht).orthographic({fovy:i,aspect:r,focalDistance:s,near:o,far:a}):(new Ht).perspective({fovy:i,aspect:r,near:o,far:a})}_initViewMatrix(t){const{viewMatrix:i=Lfe,longitude:r=null,latitude:s=null,zoom:o=null,position:a=null,modelMatrix:l=null,focalDistance:c=1,distanceScales:d=null}=t;this.isGeospatial=Number.isFinite(s)&&Number.isFinite(r),this.zoom=o,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){Ku(Number.isFinite(n));const e=Math.cos(n*rc);return function(n){return RI(n)}(FI*e)-9}({latitude:s})+Math.log2(c):0);const f=Math.pow(2,this.zoom);this.scale=f,this.distanceScales=this.isGeospatial?NI({latitude:s,longitude:r}):d||Vfe,this.focalDistance=c,this.distanceScales.metersPerUnit=new Js(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new Js(this.distanceScales.unitsPerMeter),this.position=BI,this.meterOffset=BI,a&&(this.position=a,this.modelMatrix=l,this.meterOffset=l?l.transformVector(a):a),this.isGeospatial?(this.longitude=r,this.latitude=s,this.center=this._getCenterInWorld({longitude:r,latitude:s})):this.center=a?this.projectPosition(a):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new Ht).multiplyRight(this.viewMatrixUncentered).translate(new Js(this.center||BI).negate())}_getCenterInWorld({longitude:t,latitude:i}){const{meterOffset:r,distanceScales:s}=this,o=new Js(this.projectPosition([t,i,0]));if(r){const a=new Js(r).scale(s.unitsPerMeter);o.add(a)}return o}_initProjectionMatrix(t){const{projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,focalDistance:c=1}=t;this.projectionMatrix=i||this._createProjectionMatrix({orthographic:r,fovyRadians:s||o*Nfe,aspect:this.width/this.height,focalDistance:c,near:a,far:l})}_initPixelMatrices(){const t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Qf(t,t,this.projectionMatrix),Qf(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=PI([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];IS(i,i,[this.width/2,-this.height/2,1]),OS(i,i,[1,-1,0]),Qf(r,i,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=i,this.pixelUnprojectionMatrix=PI([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Nn.warn("Pixel project matrix not invertible")()}}return n.displayName="Viewport",n})(),g5=(()=>{class n extends Em{constructor(t={}){const{latitude:i=0,longitude:r=0,zoom:s=11,pitch:o=0,bearing:a=0,nearZMultiplier:l=.1,farZMultiplier:c=1.01,orthographic:d=!1,repeat:f=!1,worldOffset:p=0}=t;let{width:g,height:_,altitude:y=1.5}=t;const v=Math.pow(2,s);g=g||1,_=_||1,y=Math.max(.75,y);const{fov:C,aspect:w,focalDistance:M,near:k,far:V}=function({width:n,height:e,fovy:t=a5(1.5),altitude:i,pitch:r=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==i&&(t=a5(i));const a=.5*t*rc,l=function(n){return.5/Math.tan(.5*n*rc)}(t),c=r*rc,d=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/e,focalDistance:l,near:s,far:(Math.sin(c)*d+l)*o}}({width:g,height:_,pitch:o,altitude:y,nearZMultiplier:l,farZMultiplier:c});let j=function({height:n,pitch:e,bearing:t,altitude:i,scale:r,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return OS(o,o,[0,0,-i]),Y4(o,o,-e*rc),X4(o,o,t*rc),IS(o,o,[r/=n,r,r]),s&&OS(o,o,function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),o}({height:_,pitch:o,bearing:a,scale:v,altitude:y});p&&(j=(new Ht).translate([512*p,0,0]).multiplyLeft(j)),super(Lt(K({},t),{width:g,height:_,viewMatrix:j,longitude:r,latitude:i,zoom:s,orthographic:d,fovyRadians:C,aspect:w,focalDistance:M,near:k,far:V})),this.latitude=i,this.longitude=r,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=y,this.orthographic=d,this._subViewports=f?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),i=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360);for(let s=i;s<=r;s++){const o=s?new n(Lt(K({},this),{worldOffset:s})):this;this._subViewports.push(o)}}return this._subViewports}addMetersToLngLat(t,i){return s5(t,i)}panByPosition(t,i){const r=ub(i,this.pixelUnprojectionMatrix),o=RS([],this.projectFlat(t),J4([],r)),a=RS([],this.center,o),[l,c]=this.unprojectFlat(a);return{longitude:l,latitude:c}}getBounds(t={}){const i=function(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let l,c;return(n.fovy?.5*n.fovy*c5:Math.atan(.5/n.altitude))>(90-n.pitch)*c5-.01?(l=u5(n,0,e),c=u5(n,t,e)):(l=r([0,0],s),c=r([t,0],s)),[o,a,c,l]}(this,t.z||0);return[Math.min(i[0][0],i[1][0],i[2][0],i[3][0]),Math.min(i[0][1],i[1][1],i[2][1],i[3][1]),Math.max(i[0][0],i[1][0],i[2][0],i[3][0]),Math.max(i[0][1],i[1][1],i[2][1],i[3][1])]}fitBounds(t,i={}){const{width:r,height:s}=this,{longitude:o,latitude:a,zoom:l}=function({width:n,height:e,bounds:t,minExtent:i=0,maxZoom:r=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[c,d]]=t;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:Ku(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const f=FS([a,i5(d,-kS,kS)]),p=FS([c,i5(l,-kS,kS)]),g=[Math.max(Math.abs(p[0]-f[0]),i),Math.max(Math.abs(p[1]-f[1]),i)],_=[n-s.left-s.right-2*Math.abs(o[0]),e-s.top-s.bottom-2*Math.abs(o[1])];Ku(_[0]>0&&_[1]>0);const y=_[0]/g[0],v=_[1]/g[1],k=wm([(p[0]+f[0])/2+(s.right-s.left)/2/y,(p[1]+f[1])/2+(s.bottom-s.top)/2/v]),V=Math.min(r,RI(Math.abs(Math.min(y,v))));return Ku(Number.isFinite(V)),{longitude:k[0],latitude:k[1],zoom:V}}(K({width:r,height:s,bounds:t},i));return new n({width:r,height:s,longitude:o,latitude:a,zoom:l})}}return n.displayName="WebMercatorViewport",n})();function VI(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof g5){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function m5(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,l=0]=n;switch(t&&([o,a,l]=PS([],[o,a,l,1],t)),i){case Wn.LNGLAT:return VI([o,a,l],e,s);case Wn.LNGLAT_OFFSETS:return VI([o+r[0],a+r[1],l+(r[2]||0)],e,s);case Wn.METER_OFFSETS:return VI(s5(r,[o,a,l]),e,s);case Wn.CARTESIAN:default:return e.isGeospatial?[o+r[0],a+r[1],l+r[2]]:e.projectPosition([o,a,l])}}const jfe={10241:9987,10240:9729,10242:33071,10243:33071},zI={},Gfe={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>Boolean(n)===Boolean(e)},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||hb(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>UI(n,e)},accessor:{validate(n,e){const t=NS(n);return"function"===t||t===NS(e.value)},equal:(n,e,t)=>"function"==typeof e||UI(n,e)},array:{validate:(n,e)=>e.optional&&!n||hb(n),equal:(n,e,t)=>t.compare?UI(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t?t.props:{};return i&&n?i(n):n}},image:{transform:(n,e,t)=>function(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof ea)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new ea(t,Lt(K({},e),{parameters:K(K(K({},jfe),i),n.props.textureParameters)}));return zI[r.id]=!0,r}(t,n),release:n=>{!function(n){!n||!(n instanceof ea)||zI[n.id]&&(n.delete(),delete zI[n.id])}(n)}}};function UI(n,e){if(n===e)return!0;if(!hb(n)||!hb(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function qfe(n,e){switch(NS(e)){case"object":return db(n,e);case"array":return db(n,{type:"array",value:e,compare:!1});case"boolean":return db(n,{type:"boolean",value:e});case"number":return db(n,{type:"number",value:e});case"function":return db(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function db(n,e){return"type"in e?K(K({name:n},Gfe[e.type]),e):"value"in e?K({name:n,type:NS(e.value)},e):{name:n,type:"object",value:e}}function hb(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function NS(n){return hb(n)?"array":null===n?"null":typeof n}const{COMPONENT:jI,ASYNC_ORIGINAL:LS,ASYNC_RESOLVED:fb,ASYNC_DEFAULTS:BS}=AS;function Yfe(){const n=this,e=_5(n.constructor),t=Object.create(e);t[jI]=n,t[LS]={},t[fb]={};for(let i=0;i<arguments.length;++i){const r=arguments[i];for(const s in r)t[s]=r[s]}return Object.freeze(t),t}function _5(n){return VS(n,"_mergedDefaultProps")||(function(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=_5(t),s=function(n){const e={},t={},i={};for(const[r,s]of Object.entries(n))if(s&&s.deprecatedFor)i[r]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{const o=qfe(r,s);e[r]=o,t[r]=o.value}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(VS(n,"defaultProps")||{}),o=function(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function(n){const e=VS(n,"layerName")||VS(n,"componentName");return e||Nn.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a=K(K({},t._propTypes),s.propTypes);!function(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=Jfe(o))}n[BS]=t,n[LS]={},Object.defineProperties(n,i)}(o,a);const l=K(K({},t._deprecatedProps),s.deprecatedProps);(function(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])y5(this,s)||(this[s]=i);Nn.deprecated(r,e[t].join("/"))()}})})(o,l),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=l}(n),n._mergedDefaultProps)}function Jfe(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||e4(e)?this[LS][n]=e:this[fb][n]=e},get(){if(this[fb]){if(n in this[fb])return this[fb][n]||this[BS][n];if(n in this[LS]){const e=this[jI]&&this[jI].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[BS][n]}}return this[BS][n]}}}function y5(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function VS(n,e){return y5(n,e)&&n[e]}function HI(n){var e;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(e=n[Symbol.asyncIterator]),null==e&&Symbol.iterator&&(e=n[Symbol.iterator])),null==e&&(e=n["@@asyncIterator"]),null==e&&(e=n["@@iterator"]),null==e)throw new TypeError("Object is not async iterable");return e.call(n)}const{ASYNC_ORIGINAL:tpe,ASYNC_RESOLVED:npe,ASYNC_DEFAULTS:ipe}=AS,rpe=Object.freeze({});class v5{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=rpe,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[npe]||{},i=e[tpe]||e,r=e[ipe]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var i;const r=null===(i=this.layer)||void 0===i?void 0:i.props.fetch;r&&(t=r(t,{propName:e,layer:this.layer}))}if(t instanceof Promise)return void this._watchPromise(e,t);if(e4(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){const i=this.asyncProps[e];t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{var o;s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r);const a=null===(o=this.layer)||void 0===o?void 0:o.props.onDataLoad;"data"===e&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;null===(o=this.layer)||void 0===o||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}_resolveAsyncIterable(e,t){var i=this;return mn(function*(){var r;"data"!==e&&i._setPropValue(e,t);const s=i.asyncProps[e];s.pendingLoadCount++;const o=s.pendingLoadCount;let a=[],l=0;var f,c=!0,d=!1;try{for(var g,_,p=HI(t);c=(g=yield p.next()).done,_=yield g.value,!c;c=!0){const v=_,{dataTransform:C}=i.component?i.component.props:{};a=C?C(v,a):a.concat(v),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:l,endRow:a.length}]}),l=a.length,i._setAsyncPropValue(e,a,o)}}catch(v){d=!0,f=v}finally{try{!c&&null!=p.return&&(yield p.return())}finally{if(d)throw f}}const y=null===(r=i.layer)||void 0===r?void 0:r.props.onDataLoad;y&&y(a,{propName:e,layer:i.layer})})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:b5,ASYNC_RESOLVED:C5,ASYNC_DEFAULTS:spe}=AS,ope={};let ape=0,lpe=(()=>{class n{constructor(){this.props=Yfe.apply(this,arguments),this.id=this.props.id,this.count=ape++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(t){const{props:i}=this,r={};for(const s in i[spe])s in i[C5]?r[s]=i[C5][s]:s in i[b5]&&(r[s]=i[b5][s]);return new this.constructor(K(K(K({},i),r),t))}get stats(){return this.internalState.stats}_initState(){this.internalState=new v5({})}}return n.componentName="Component",n.defaultProps=ope,n})();class cpe extends v5{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const sc=n=>"function"==typeof n,oh=n=>null!==n&&"object"==typeof n,E5=n=>oh(n)&&n.constructor==={}.constructor,upe=n=>n&&"function"==typeof n[Symbol.iterator],dpe=n=>n&&"function"==typeof n[Symbol.asyncIterator],pb=n=>"undefined"!=typeof Response&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,Sm=n=>"undefined"!=typeof Blob&&n instanceof Blob,S5=n=>(n=>"undefined"!=typeof ReadableStream&&n instanceof ReadableStream||oh(n)&&sc(n.tee)&&sc(n.cancel)&&sc(n.getReader))(n)||(n=>oh(n)&&sc(n.read)&&sc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function Jf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function $I(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function GI(n){var e,t;let i;return Jf(n,"null loader"),Jf($I(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=Lt(K({},n=n[0]),{options:K(K({},n.options),i)})),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const Wc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},WI=Wc.global||Wc.self||Wc.window||{},_pe="object"!=typeof process||"[object process]"!==String(process)||process.browser,x5="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);x5&&parseFloat(x5[1]);const YI={};function ype(n){for(const e in YI)n.startsWith(e)&&(n=n.replace(e,YI[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n=`${n}`),n}const vpe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,bpe=/^([-\w.]+\/[-\w.+]+)/;function Cpe(n){const e=bpe.exec(n);return e?e[1]:n}function M5(n){const e=vpe.exec(n);return e?e[1]:""}const wpe=/\?.*/;function zS(n){if(pb(n)){const e=XI(n.url||"");return{url:e,type:Cpe(n.headers.get("content-type")||"")||M5(e)}}return Sm(n)?{url:XI(n.name||""),type:n.type||""}:"string"==typeof n?{url:XI(n),type:M5(n)}:{url:"",type:""}}function Epe(n){return pb(n)?n.headers["content-length"]||-1:Sm(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function XI(n){return n.replace(wpe,"")}function T5(n){return KI.apply(this,arguments)}function KI(){return(KI=mn(function*(n){if(pb(n))return n;const e={},t=Epe(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=zS(n);r&&(e["content-type"]=r);const s=yield Mpe(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o})).apply(this,arguments)}function Spe(n){return ZI.apply(this,arguments)}function ZI(){return(ZI=mn(function*(n){if(!n.ok){const e=yield xpe(n);throw new Error(e)}})).apply(this,arguments)}function xpe(n){return QI.apply(this,arguments)}function QI(){return(QI=mn(function*(n){let e=`Failed to fetch resource ${n.url} (${n.status}): `;try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=` ${yield n.text()}`),e+=i,e=e.length>60?`${e.slice(60)}...`:e}catch(t){}return e})).apply(this,arguments)}function Mpe(n){return JI.apply(this,arguments)}function JI(){return(JI=mn(function*(n){if("string"==typeof n)return`data:,${n.slice(0,5)}`;if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}return n instanceof ArrayBuffer?`data:base64,${Tpe(n.slice(0,5))}`:null})).apply(this,arguments)}function Tpe(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function A5(n,e){return eP.apply(this,arguments)}function eP(){return(eP=mn(function*(n,e){if("string"==typeof n){n=ype(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(t=e.fetch),yield fetch(n,t)}return yield T5(n)})).apply(this,arguments)}function Jt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const D5=new UO({id:"loaders.gl"});class Ape{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const O5={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){Jt(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Ope={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function tP(){WI.loaders=WI.loaders||{};const{loaders:n}=WI;return n._state=n._state||{},n._state}const nP=()=>{const n=tP();return n.globalOptions=n.globalOptions||K({},O5),n.globalOptions};function Ipe(n,e,t,i){return t=t||[],function(n,e){P5(n,null,O5,Ope,e);for(const t of e)P5(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function(n,e,t){const r=K({},n.options||{});return function(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new Ape),k5(r,nP()),k5(r,e),r}(e,n,i)}function I5(n,e){const t=nP(),i=n||t;return"function"==typeof i.fetch?i.fetch:oh(i.fetch)?r=>A5(r,i):null!=e&&e.fetch?null==e?void 0:e.fetch:A5}function P5(n,e,t,i,r){const s=e||"Top level",o=e?`${e}.`:"";for(const a in n){const l=!e&&oh(n[a]),c="baseUri"===a&&!e,d="workerUrl"===a&&e;if(!(a in t)&&!c&&!d)if(a in i)D5.warn(`${s} loader option '${o}${a}' no longer supported, use '${i[a]}'`)();else if(!l){const f=Rpe(a,r);D5.warn(`${s} loader option '${o}${a}' not recognized. ${f}`)()}}}function Rpe(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return`Did you mean '${r.id}.${s}'?`;const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||`Did you mean '${r.id}.${s}'?`)}return i}function k5(n,e){for(const t in e)t in e&&(n[t]=E5(e[t])&&E5(n[t])?K(K({},n[t]),e[t]):e[t])}function qc(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}function Npe(n,e="3.0.12"){return qc(n,"no worker provided"),!(!e||!n.version)}const Yc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Lpe=Yc.global||Yc.self||Yc.window||{},iP="object"!=typeof process||"[object process]"!==String(process)||process.browser,rP="function"==typeof importScripts,Bpe="undefined"!=typeof window&&void 0!==window.orientation,F5="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),sP=(F5&&parseFloat(F5[1]),new Map);function N5(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function L5(n,e=!0,t){const i=t||new Set;if(n)if(B5(n))i.add(n);else if(B5(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)L5(n[r],e,i);return void 0===t?Array.from(i):[]}function B5(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}const oP=()=>{};class V5{static isSupported(){return"undefined"!=typeof Worker}constructor(e){Jt(this,"name",void 0),Jt(this,"source",void 0),Jt(this,"url",void 0),Jt(this,"terminated",!1),Jt(this,"worker",void 0),Jt(this,"onMessage",void 0),Jt(this,"onError",void 0),Jt(this,"_loadableURL","");const{name:t,source:i,url:r}=e;qc(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=oP,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=oP,this.onError=oP,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||L5(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=function(n){qc(n.source&&!n.url||!n.source&&n.url);let e=sP.get(n.source||n.url);return e||(n.url&&(e=function(n){return n.startsWith("http")?N5(function(n){return`try {\n  importScripts('${n}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}(n)):n}(n.url),sP.set(n.url,e)),n.source&&(e=N5(n.source),sP.set(n.source,e))),qc(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}}class jpe{constructor(e,t){Jt(this,"name",void 0),Jt(this,"workerThread",void 0),Jt(this,"isRunning",void 0),Jt(this,"result",void 0),Jt(this,"_resolve",void 0),Jt(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){qc(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){qc(this.isRunning),this.isRunning=!1,this._reject(e)}}class Hpe{constructor(e){Jt(this,"name","unnamed"),Jt(this,"source",void 0),Jt(this,"url",void 0),Jt(this,"maxConcurrency",1),Jt(this,"maxMobileConcurrency",1),Jt(this,"onDebug",()=>{}),Jt(this,"reuseWorkers",!0),Jt(this,"props",{}),Jt(this,"jobQueue",[]),Jt(this,"idleQueue",[]),Jt(this,"count",0),Jt(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=K(K({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return mn(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return mn(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new jpe(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new V5({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Bpe?this.maxMobileConcurrency:this.maxConcurrency}}const $pe={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class Zu{static isSupported(){return V5.isSupported()}static getWorkerFarm(e={}){return Zu._workerFarm=Zu._workerFarm||new Zu({}),Zu._workerFarm.setProps(e),Zu._workerFarm}constructor(e){Jt(this,"props",void 0),Jt(this,"workerPools",new Map),this.props=K({},$pe),this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props=K(K({},this.props),e);for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new Hpe({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function Wpe(n,e={}){const i=`${n.id}-worker.js`;let r=(e[n.id]||{}).workerUrl;if("test"===e._workerType&&(r=`modules/${n.module}/dist/${i}`),!r){let s=n.version;"latest"===s&&(s="latest"),r=`https://unpkg.com/@loaders.gl/${n.module}${s?`@${s}`:""}/dist/${i}`}return qc(r),r}function qpe(n,e){return!!Zu.isSupported()&&n.worker&&(null==e?void 0:e.worker)}function Ype(n,e,t,i,r){return aP.apply(this,arguments)}function aP(){return(aP=mn(function*(n,e,t,i,r){const s=n.id,o=Wpe(n,t),l=Zu.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t));const c=yield l.startJob("process-on-worker",Xpe.bind(null,r));return c.postMessage("process",{input:e,options:t}),yield(yield c.result).result})).apply(this,arguments)}function Xpe(n,e,t,i){return lP.apply(this,arguments)}function lP(){return(lP=mn(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(i.error);break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn(`parse-with-worker unknown message ${t}`)}})).apply(this,arguments)}Jt(Zu,"_workerFarm",void 0);var U5=Be(521);function j5(n){if(function(n){return n&&"object"==typeof n&&n.isBuffer}(n)&&(n=function(n){return U5.toArrayBuffer?U5.toArrayBuffer(n):n}(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function Jpe(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}function H5(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function ege(n){return uP.apply(this,arguments)}function uP(){return(uP=mn(function*(n){const e=[];var r,t=!0,i=!1;try{for(var o,a,s=HI(n);t=(o=yield s.next()).done,a=yield o.value,!t;t=!0)e.push(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return Jpe(...e)})).apply(this,arguments)}const ige=262144;function $5(n){this.wrapped=n}function gb(n){return new $5(n)}function mb(n){var e,t;function r(o,a){try{var l=n[o](a),c=l.value,d=c instanceof $5;Promise.resolve(d?c.wrapped:c).then(function(f){d?r("return"===o?"return":"next",f):s(l.done?"return":"normal",f)},function(f){r("throw",f)})}catch(f){s("throw",f)}}function s(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?r(e.key,e.arg):t=null}this._invoke=function(o,a){return new Promise(function(l,c){var d={key:o,arg:a,resolve:l,reject:c,next:null};t?t=t.next=d:(e=t=d,r(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function hP(n){return function(){return new mb(n.apply(this,arguments))}}function fP(){return(fP=hP(function*(n,e){const t=(null==e?void 0:e.chunkSize)||1048576;let i=0;for(;i<n.size;){const r=i+t,s=yield gb(n.slice(i,r).arrayBuffer());i=r,yield s}})).apply(this,arguments)}function G5(n,e){return _pe?function(n,e){return pP.apply(this,arguments)}(n,e):function(n,e){return gP.apply(this,arguments)}(n,e)}function pP(){return(pP=hP(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield gb(r);if(s)return;yield j5(o)}}catch(r){t.releaseLock()}})).apply(this,arguments)}function gP(){return(gP=hP(function*(n,e){var r,t=!0,i=!1;try{for(var o,a,s=HI(n);t=(o=yield gb(s.next())).done,a=yield gb(o.value),!t;t=!0)yield j5(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield gb(s.return()))}finally{if(i)throw r}}})).apply(this,arguments)}function cge(n,e){if("string"==typeof n)return function*(n,e){const t=(null==e?void 0:e.chunkSize)||262144;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*(n,e={}){const{chunkSize:t=ige}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(Sm(n))return function(n,e){return fP.apply(this,arguments)}(n,e);if(S5(n))return G5(n,e);if(pb(n))return G5(n.body,e);throw new Error("makeIterator")}mb.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},mb.prototype.next=function(n){return this._invoke("next",n)},mb.prototype.throw=function(n){return this._invoke("throw",n)},mb.prototype.return=function(n){return this._invoke("return",n)};const mP="Cannot convert supplied data type";function uge(n,e,t){if(e.text&&"string"==typeof n)return n;if((n=>n&&"object"==typeof n&&n.isBuffer)(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(mP)}function dge(n,e,t){return _P.apply(this,arguments)}function _P(){return(_P=mn(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return uge(n,e);if(Sm(n)&&(n=yield T5(n)),pb(n)){const r=n;return yield Spe(r),e.binary?yield r.arrayBuffer():yield r.text()}if(S5(n)&&(n=cge(n,t)),upe(n)||dpe(n))return ege(n);throw new Error(mP)})).apply(this,arguments)}function fge(n,e,t=null){if(t)return t;const i=K({fetch:I5(e,n)},n);return Array.isArray(i.loaders)||(i.loaders=null),i}function pge(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}const W5=()=>{const n=tP();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function q5(n){const e=W5();n=Array.isArray(n)?n:[n];for(const t of n){const i=GI(t);e.find(r=>i===r)||e.unshift(i)}}const mge=/\.([^.]+)$/;function _ge(n){return bP.apply(this,arguments)}function bP(){return(bP=mn(function*(n,e=[],t,i){if(!X5(n))return null;let r=Y5(n,e,Lt(K({},t),{nothrow:!0}),i);if(r)return r;if(Sm(n)&&(r=Y5(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(K5(n));return r})).apply(this,arguments)}function Y5(n,e=[],t,i){if(!X5(n))return null;if(e&&!Array.isArray(e))return GI(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...W5()),function(n){for(const e of n)GI(e)}(r);const s=function(n,e,t,i){const{url:r,type:s}=zS(n),o=r||(null==i?void 0:i.url);let a=null;return null!=t&&t.mimeType&&(a=CP(e,null==t?void 0:t.mimeType)),a=a||function(n,e){const t=e&&mge.exec(e),i=t&&t[1];return i?function(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),a=a||CP(e,s),a=a||function(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(Ege(e,t))return t}else if(ArrayBuffer.isView(e)){if(Z5(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&Z5(e,0,t))return t;return null}(e,n),a=a||CP(e,null==t?void 0:t.fallbackMimeType),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error(K5(n));return s}function X5(n){return!(n instanceof Response&&204===n.status)}function K5(n){const{url:e,type:t}=zS(n);let i="No valid loader found";return n&&(i+=` data: "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?wP(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?wP(n,0,e):""}(n)}", contentType: "${t}"`),e&&(i+=` url: ${e}`),i}function CP(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e===`application/x.${t.id}`)return t;return null}function Ege(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function Z5(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function(n,e,t,i){if(i instanceof ArrayBuffer)return function(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===wP(n,e,i.length);default:return!1}}(n,e,t,r))}function wP(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function US(n,e,t,i){return EP.apply(this,arguments)}function EP(){return(EP=mn(function*(n,e,t,i){qc(!i||"object"==typeof i),e&&!Array.isArray(e)&&!$I(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=zS(n),o=pge(e,i),a=yield _ge(n,o,t);return a?(i=fge({url:r,parse:US,loaders:o},t=Ipe(t,a,o,r),i),yield Mge(a,n,t,i)):null})).apply(this,arguments)}function Mge(n,e,t,i){return SP.apply(this,arguments)}function SP(){return(SP=mn(function*(n,e,t,i){if(Npe(n),e=yield dge(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(qpe(n,t))return yield Ype(n,e,t,i,US);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw qc(!n.parseSync),new Error(`${n.id} loader - no parser found and worker is disabled`)})).apply(this,arguments)}function _b(n,e,t,i){return xP.apply(this,arguments)}function xP(){return(xP=mn(function*(n,e,t,i){!Array.isArray(e)&&!$I(e)&&(t=e,e=void 0);const r=I5(t);let s=n;return"string"==typeof n&&(s=yield r(n)),Sm(n)&&(s=yield r(n)),yield US(s,e,t)})).apply(this,arguments)}const Q5=Ui(2,24)-1,Pge=Object.freeze([]),Rge=DS(({oldViewport:n,viewport:e})=>n.equals(e));let Xc=new Uint8ClampedArray(0);const kge={data:{type:"data",value:Pge,async:!0},dataComparator:null,_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r=Lt(K({},r),{fetch:Lt(K({},null===(a=r)||void 0===a?void 0:a.fetch),{signal:s})}));let l=o.contains(n);return!l&&!r&&(o.add({resourceId:n,data:_b(n,i),persistent:!1}),l=!0),l?o.subscribe({resourceId:n,onChange:c=>t.internalState.reloadAsyncProp(e,c),consumerId:t.id,requestId:e}):_b(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Wn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};let yb=(()=>{class n extends lpe{toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}raiseError(t,i){var r,s,o,a;i&&(t.message="".concat(i,": ").concat(t.message)),(null===(r=(s=this.props).onError)||void 0===r?void 0:r.call(s,t))||null===(o=this.context)||void 0===o||null===(a=o.onError)||void 0===a||a.call(o,t,this)}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(t=!0){this.internalState&&(this.internalState.needsRedraw=t)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(t){const{viewport:i}=this.context,r=m5(t,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,o,a]=l5(r,i.pixelProjectionMatrix);return 2===t.length?[s,o]:[s,o,a]}unproject(t){const{viewport:i}=this.context;return i.unproject(t)}projectPosition(t){return function(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(n){const e=K({},n);let{coordinateSystem:t}=n;const{viewport:i,coordinateOrigin:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return t===Wn.DEFAULT&&(t=i.isGeospatial?Wn.LNGLAT:Wn.CARTESIAN),void 0===s&&(e.fromCoordinateSystem=t),void 0===o&&(e.fromCoordinateOrigin=r),e.coordinateSystem=t,e}(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:d}=Q4(t,i,r),f=m5(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});d&&function(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(f,f,t.projectPosition(l||c));return f}(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===Wn.DEFAULT||t===Wn.LNGLAT||t===Wn.CARTESIAN}onHover(t,i){return!!this.props.onHover&&this.props.onHover(t,i)}onClick(t,i){return!!this.props.onClick&&this.props.onClick(t,i)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,i=[]){return i[0]=t+1&255,i[1]=t+1>>8&255,i[2]=t+1>>8>>8&255,i}decodePickingColor(t){nc(t instanceof Uint8Array);const[i,r,s]=t;return i+256*r+65536*s-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(t){for(const i of this.props.extensions)t=Vhe(t,i.getShaders.call(this,i));return t}shouldUpdateState({changeFlags:s}){return s.propsOrDataChanged}updateState({oldProps:t,props:i,changeFlags:s}){const o=this.getAttributeManager();if(s.dataChanged&&o){const{dataChanged:c}=s;if(Array.isArray(c))for(const d of c)o.invalidateAll(d);else o.invalidateAll()}const l=i.highlightedObjectIndex>=0||i.pickable;if((t.highlightedObjectIndex>=0||t.pickable)!==l&&o){const{pickingColors:c,instancePickingColors:d}=o.attributes,f=c||d;f&&(l&&f.constant&&(f.constant=!1,o.invalidate(f.id)),!f.value&&!l&&(f.constant=!0,f.value=[0,0,0]))}}finalizeState(){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(t){for(const i of this.getModels())i.draw(t)}getPickingInfo({info:t}){const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}activateViewport(t){const i=this.internalState.viewport;this.internalState.viewport=t,(!i||!Rge({oldViewport:i,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all",i=""){const r=this.getAttributeManager();!r||("all"===t?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const i of this.getModels())this._setModelAttributes(i,t)}_updateAttributes(t){const i=this.getAttributeManager();if(!i)return;const r=this.getNumInstances(t),s=this.getStartIndices(t);i.update({data:t.data,numInstances:r,startIndices:s,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});const o=i.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const i=t.update(),r=Object.create(this.props);for(const s in i)Object.defineProperty(r,s,{value:i[s]});return r}return this.props}calculateInstancePickingColors(t,{numInstances:i}){if(t.constant)return;const r=Math.floor(Xc.length/3);if(this.internalState.usesPickingColorCache=!0,r<i){i>Q5&&Nn.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Xc=Zv.allocate(Xc,i,{size:3,copy:!0,maxCount:Math.max(i,Q5)});const s=Math.floor(Xc.length/3),o=[];for(let a=r;a<s;a++)this.encodePickingColor(a,o),Xc[3*a+0]=o[0],Xc[3*a+1]=o[1],Xc[3*a+2]=o[2]}t.value=Xc.subarray(0,3*i)}_setModelAttributes(t,i){const o=this.getAttributeManager().getShaderAttributes(i,t.userData.excludeAttributes||{});t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,s=i||r,o=s.getVertexOffset(t),a=s.getVertexOffset(t+1);s.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;this.internalState.usesPickingColorCache&&r.value.buffer!==Xc.buffer&&(r.value=Xc.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}getNumInstances(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(t.data)}getStartIndices(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){eo("layer.initialize",this),this._initState(),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const t=this.needsUpdate();eo("layer.update",this,t),t&&this._updateState()}_updateState(){const t=this.props,i=this.context.viewport,r=this._updateUniformTransition();this.internalState.propsInTransition=r,this.context.viewport=this.internalState.viewport||i,this.props=r;try{const s=this._getUpdateParams(),o=this.getModels();if(this.context.gl)this.updateState(s);else try{this.updateState(s)}catch(l){}for(const l of this.props.extensions)l.updateState.call(this,s,l);const a=this.getModels()[0]!==o[0];this._updateModules(s,a),this.isComposite?this._renderLayers(s):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=i,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){eo("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}drawLayer({moduleParameters:t=null,uniforms:i={},parameters:r={}}){this._updateAttributeTransition();const s=this.props;this.props=this.internalState.propsInTransition||s;const{opacity:o}=this.props;i.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(i)||[0,0];Gu(this.context.gl,{polygonOffset:l}),tc(this.context.gl,r,()=>{const c={moduleParameters:t,uniforms:i,parameters:r,context:this.context};for(const d of this.props.extensions)d.draw.call(this,c,d);this.draw(c)})}finally{this.props=s}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(t){const{changeFlags:i}=this.internalState;for(const s in t)if(t[s]){let o=!1;switch(s){case"dataChanged":Array.isArray(i[s])&&(i[s]=Array.isArray(t[s])?i[s].concat(t[s]):t[s],o=!0);default:i[s]||(i[s]=t[s],o=!0)}o&&eo("layer.changeFlag",this,s,t)}const r=i.dataChanged||i.updateTriggersChanged||i.propsChanged||i.extensionsChanged;i.propsOrDataChanged=r,i.somethingChanged=r||t.viewportChanged||t.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(t,i){const r=function(n,e){const t=W4({newProps:n,oldProps:e,propTypes:II(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(n,e){if(null===e)return"oldProps is null, initial diff";let t=null;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function(n,e){if(null===e)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&q4(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&q4(n,e,r)&&(t[r]=!0,i=t);return i}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Phe(n,e),transitionsChanged:Dhe(n,e)}}(t,i);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged)this.internalState.uniformTransitions.add(s,i[s],t[s],t.transitions[s]);return this.setChangeFlags(r)}validateProps(){!function(n){const e=II(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}setModuleParameters(t){for(const i of this.getModels())i.updateModuleSettings(t)}updateAutoHighlight(t){this.props.autoHighlight&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const i={pickingSelectedColor:t.picked?t.color:null},{highlightColor:r}=this.props;t.picked&&"function"==typeof r&&(i.pickingHighlightColor=r(t)),this.setModuleParameters(i),this.setNeedsRedraw()}_updateModules({props:t,oldProps:i},r){const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=t;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==o||i.highlightColor!==a){const l={};s||(l.pickingSelectedColor=null),Array.isArray(a)&&(l.pickingHighlightColor=a),Number.isInteger(o)&&(l.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let i=!1;i=i||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const r=this.getAttributeManager(),s=r&&r.getNeedsRedraw(t);return i=i||s,i}_getAttributeManager(){return new bhe(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){nc(!this.internalState&&!this.state),nc(isFinite(this.props.coordinateSystem));const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new cpe({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Nn.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new xhe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(t){eo("layer.matched",this,this===t);const{state:i,internalState:r}=t;this!==t&&(this.internalState=r,this.internalState.layer=this,this.state=i,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}return n.layerName="Layer",n.defaultProps=kge,n})(),J5=(()=>{class n extends yb{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:i}=t;return i&&i.__source&&i.__source.parent&&i.__source.parent.id===this.id&&(t.object=i.__source.object,t.index=i.__source.index),t}renderLayers(){return null}filterSubLayer(t){return!0}shouldRenderSubLayer(t,i){return i&&i.length}getSubLayerClass(t,i){const{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||i}getSubLayerRow(t,i,r){return t.__source={parent:this,object:i,index:r},t}getSubLayerAccessor(t){if("function"==typeof t){const i={data:this.props.data,target:[]};return(r,s)=>r&&r.__source?(i.index=r.__source.index,t(r.__source.object,i)):t(r,s)}return t}getSubLayerProps(t={}){const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:d,coordinateSystem:f,coordinateOrigin:p,wrapLongitude:g,positionFormat:_,modelMatrix:y,extensions:v,fetch:C,_subLayerProps:w}=this.props,M={opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:d,coordinateSystem:f,coordinateOrigin:p,wrapLongitude:g,positionFormat:_,modelMatrix:y,extensions:v,fetch:C},k=w&&w[t.id],V=k&&k.updateTriggers,j=t.id||"sublayer";if(k){const ee=this.constructor._propTypes,ce=t.type?t.type._propTypes:{};for(const oe in k){const pe=ce[oe]||ee[oe];pe&&"accessor"===pe.type&&(k[oe]=this.getSubLayerAccessor(k[oe]))}}Object.assign(M,t,k),M.id="".concat(this.props.id,"-").concat(j),M.updateTriggers=K(K({all:this.props.updateTriggers.all},t.updateTriggers),V);for(const ee of v){const ce=ee.getSubLayerProps.call(this,ee);ce&&Object.assign(M,ce,{updateTriggers:Object.assign(M.updateTriggers,ce.updateTriggers)})}return M}_updateAutoHighlight(t){for(const i of this.getSubLayers())i.updateAutoHighlight(t)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:t}=this.internalState;const i=!t||this.needsUpdate();i&&(t=this.renderLayers(),t=cI(t,Boolean),this.internalState.subLayers=t),eo("compositeLayer.renderLayers",this,i,t);for(const r of t)r.parent=this}}return n.layerName="CompositeLayer",n})();const Nge=/([0-9]+\.?[0-9]*)(%|px)/;function jS(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=n.match(Nge);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function HS(n,e){return n.relative?Math.round(n.position*e):n.position}function vb(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&vb(i,r)))return!1}return!0}class MP{constructor(e={}){const{id:t=null,x:i=0,y:r=0,width:s="100%",height:o="100%",projectionMatrix:a=null,fovy:l=50,near:c=.1,far:d=1e3,modelMatrix:f=null,viewportInstance:p=null,type:g=Em}=e;nc(!p||p instanceof Em),this.viewportInstance=p,this.id=t||this.constructor.displayName||"view",this.type=g,this.props=Lt(K({},e),{id:this.id,projectionMatrix:a,fovy:l,near:c,far:d,modelMatrix:f}),this._parseDimensions({x:i,y:r,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):vb(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return this._getViewport(i,r)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t=K({},e);for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){return{x:HS(this._x,e),y:HS(this._y,t),width:HS(this._width,e),height:HS(this._height,t)}}_getControllerProps(e){let t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),K(K({},e),t)):null}_getViewport(e,t){const{type:i}=this;return new i(K(K(K({},e),this.props),t))}_parseDimensions({x:e,y:t,width:i,height:r}){this._x=jS(e),this._y=jS(t),this._width=jS(i),this._height=jS(r)}}const bb=()=>{},eH={transitionEasing:n=>n,transitionInterruption:1,onTransitionStart:bb,onTransitionInterrupt:bb,onTransitionEnd:bb};class Lge{constructor(e,t={}){this.ControllerState=e,this.props=K(K({},eH),t),this.propsInTransition=null,this.transition=new lb(t.timeline),this.onViewStateChange=t.onViewStateChange||bb,this.onStateChange=t.onStateChange||bb,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(e=K(K({},eH),e),this.props=e,this._shouldIgnoreViewportChange(i,e))return t;if(this._isTransitionEnabled(e)){const{interruption:r,endProps:s}=this.transition.settings,o=K(K({},i),2===r?s:this.propsInTransition||i);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&Boolean(i)}_isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(i),{transitionInterpolator:s}=t,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(t)}}_onTransitionUpdate(e){const{time:t,settings:{interpolator:i,startProps:r,endProps:s,duration:o,easing:a}}=e,l=a(t/o),c=i.interpolateProps(r,s,l);this.propsInTransition=new this.ControllerState(K(K({},this.props),c)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}const tH=["longitude","latitude","zoom","bearing","pitch"],Vge=["longitude","latitude","zoom"];class nH extends class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare||Object.keys(t))if(!(i in e)||!(i in t)||!Jv(e[i],t[i]))return!1;return!0}initializeProps(e,t){let i;if(this._propsToExtract){const r={},s={};for(const o of this._propsToExtract)r[o]=e[o],s[o]=t[o];i={start:r,end:s}}else i={start:e,end:t};return this._checkRequiredProps(i.start),this._checkRequiredProps(i.end),i}interpolateProps(e,t,i){return t}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(t=>{const i=e[t];nc(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}{constructor(e={}){super((Array.isArray(e)?e:e.transitionProps)||{compare:tH,extract:tH,required:Vge}),this.opts=e}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),l=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(l),aroundPosition:l,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=fS(e[s]||0,t[s]||0,i);if(t.aroundPosition){const s=this.opts.makeViewport(K(K({},t),r));Object.assign(r,s.panByPosition(t.aroundPosition,fS(e.around,t.around,i)))}return r}}const ah={transitionDuration:0},zge={transitionDuration:300,transitionEasing:n=>n,transitionInterruption:1},GS=n=>1-(1-n)*(1-n),xm_WHEEL=["wheel"],xm_PAN=["panstart","panmove","panend"],xm_PINCH=["pinchstart","pinchmove","pinchend"],xm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],xm_DOUBLE_TAP=["doubletap"],xm_KEYBOARD=["keydown"];class TP{constructor(e,t={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new Lge(e,Lt(K({},t),{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));const i=this.linearTransitionProps;this._transition=i&&Lt(K({},zge),{transitionInterpolator:new nH({transitionProps:i})}),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:t}=this;this.controllerState=new t(K(K({makeViewport:this.makeViewport},this.controllerStateProps),this._state));const i=this._eventStartBlocked;switch(e.type){case"panstart":return!i&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!i&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!i&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:t,y:i}=this.controllerStateProps,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.controllerStateProps;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:t}=e;!0===t&&(t=300),this.inertia=t;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,d=Boolean(this.onViewStateChange);this.toggleEvents(xm_WHEEL,d&&i),this.toggleEvents(xm_PAN,d&&(r||s)),this.toggleEvents(xm_PINCH,d&&(a||l)),this.toggleEvents(xm_TRIPLE_PAN,d&&l),this.toggleEvents(xm_DOUBLE_TAP,d&&o),this.toggleEvents(xm_KEYBOARD,d&&c),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t={},i={}){const r=K(K({},e.getViewportProps()),t),s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,ah,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,ah,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,Lt(K({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:GS}),{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,ah,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,Lt(K({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:GS}),{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,Lt(K({},this._getTransitionProps({around:t})),{transitionDuration:r?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,ah,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,ah,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,Lt(K({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:GS}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(i,ah,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,ah,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t,_lastPinchEvent:i}=this;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),l=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,Lt(K({},this._getTransitionProps({around:r})),{transitionDuration:t,transitionEasing:GS}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),c.isZooming=!0;break;case"Equal":l=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":t?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":t?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(r),c.isPanning=!0);break;case"ArrowUp":t?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(r),c.isPanning=!0);break;case"ArrowDown":t?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{_transition:t}=this;return t?e?Lt(K({},t),{transitionInterpolator:new nH(Lt(K({},e),{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):t:ah}}class iH{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const lh_target=[0,0,0];class WS extends iH{constructor({makeViewport:e,width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=lh_target,zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:d=-(1/0),maxZoom:f=Infinity,startPanPosition:p,startRotatePos:g,startRotationX:_,startRotationOrbit:y,startZoomPosition:v,startZoom:C}){super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:d,maxZoom:f}),this._state={startPanPosition:p,startRotatePos:g,startRotationX:_,startRotationOrbit:y,startZoomPosition:v,startZoom:C},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this._state.startPanPosition||t;if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:l}=this._viewportProps;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let c;if(e){let d=(e[0]-r[0])/a;(s<-90||s>90)&&(d*=-1),c={rotationX:s+(e[1]-r[1])/l*180,rotationOrbit:o+180*d}}else c={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i=K({},this._viewportProps),{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){const{zoom:r}=this._viewportProps;let{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=r,o=this._unproject(t)||this._unproject(e));const a=this._calculateNewZoom({scale:i,startZoom:s}),l=this.makeViewport(Lt(K({},this._viewportProps),{zoom:a}));return this._getUpdatedState(K({zoom:a},l.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Number.isFinite(t)||(t=this._viewportProps.zoom),Kf(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this._viewportProps;return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new WS(K(K(K({},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Kf(r,i,t),e.rotationX=Kf(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function(n,e){const t=n%360;return t<0?360+t:t}(a+180)-180),e}}class jge extends TP{constructor(e){super(WS,e)}get linearTransitionProps(){return["target","zoom","rotationX","rotationOrbit"]}}class Hge extends TP{constructor(e){e.dragMode=e.dragMode||"pan",super(WS,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const $ge=(new Ht).lookAt({eye:[0,0,1]});function Gge({width:n,height:e,near:t,far:i}){return n=n||1,e=e||1,(new Ht).ortho({left:-n/2,right:n/2,bottom:-e/2,top:e/2,near:t,far:i})}class Wge extends Em{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,c=Math.pow(2,o);super(Lt(K({},e),{longitude:null,position:a,viewMatrix:$ge.clone().scale([c,c*(l?-1:1),c]),projectionMatrix:Gge({width:t,height:i,near:r,far:s}),zoom:o}))}panByPosition(e,t){const r=RS([],e,J4([],ub(t,this.pixelUnprojectionMatrix)));return{target:RS([],this.center,r)}}}let qge=(()=>{class n extends MP{constructor(t){super(Lt(K({},t),{type:Wge}))}get controller(){return this._getControllerProps({type:Hge})}}return n.displayName="OrthographicView",n})();const qS=Math.PI/180;function Yge({height:n,fovy:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o=.5/Math.tan(e*qS/2),a="Z"===t?[0,0,1]:[0,1,0],l="Z"===t?[0,-o,0]:[0,0,o],c=(new Ht).lookAt({eye:l,up:a});c.rotateX(i*qS),"Z"===t?c.rotateZ(r*qS):c.rotateY(r*qS);const d=Math.pow(2,s)/(n||1);return c.scale(d),c}class Xge extends Em{constructor(e){const{height:t,fovy:i,orbitAxis:r,target:s=[0,0,0],rotationX:o=0,rotationOrbit:a=0,zoom:l=0}=e;super(Lt(K({},e),{longitude:null,viewMatrix:Yge({height:t,fovy:i,orbitAxis:r,rotationX:o,rotationOrbit:a,zoom:l}),fovy:i,position:s,zoom:l})),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,l,c]=ub([i,o,s],this.pixelUnprojectionMatrix);return[a,l,c]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}let Kge=(()=>{class n extends MP{constructor(t={}){const{orbitAxis:i="Z"}=t;super(Lt(K({},t),{orbitAxis:i,type:Xge}))}get controller(){return this._getControllerProps({type:jge})}}return n.displayName="OrbitView",n})();const Zge=[255,255,255],Qge=1;let Jge=0;class rH{constructor(e={}){const{color:t=Zge}=e,{intensity:i=Qge}=e;this.id=e.id||"ambient-".concat(Jge++),this.color=t,this.intensity=i,this.type="ambient"}}const eme=[255,255,255],tme=1,nme=[0,0,-1];let ime=0;class sH{constructor(e={}){const{color:t=eme}=e,{intensity:i=tme}=e,{direction:r=nme}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(ime++),this.color=t,this.intensity=i,this.type="directional",this.direction=new Js(r).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class oH{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props=K({},e)}preRender(){}getModuleParameters(){}cleanup(){}}class AP extends class{constructor(e,t={}){const{id:i="pass"}=t;this.id=i,this.gl=e,this.props=K({},t)}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}{render(e){return Gu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:t,views:i,onViewportActive:r,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;s&&function(n){Gu(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(o);const a=[];for(const l of t){const c=l.viewport||l,d=i&&i[c.id];r(c);const f=this._getDrawLayerParams(c,e);e.view=d;const p=c.subViewports||[c];for(const g of p){e.viewport=g;const _=this._drawLayersInViewport(o,e,f);a.push(_)}}return a}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,effects:s,moduleParameters:o}){const a=[],l=aH(),c={viewport:e,isPicking:i.startsWith("picking"),renderPass:i};for(let d=0;d<t.length;d++){const f=t[d],p=this._shouldDrawLayer(f,c,r),_={shouldDrawLayer:p,layerRenderIndex:l(f,p)};p&&(_.moduleParameters=this._getModuleParameters(f,s,i,o),_.layerParameters=this.getLayerParameters(f,d)),a[d]=_}return a}_drawLayersInViewport(e,{layers:t,pass:i,viewport:r,view:s},o){const a=function(n,{viewport:e}){const t=n.canvas?n.canvas.clientHeight||n.canvas.height:100,i=e,r=cm(n);return[i.x*r,(t-i.y-i.height)*r,i.width*r,i.height*r]}(e,{viewport:r});if(s&&s.props.clear){const c=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;tc(e,{scissorTest:!0,scissor:a},()=>eI(e,c))}const l={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Gu(e,{viewport:a});for(let c=0;c<t.length;c++){const d=t[c],{shouldDrawLayer:f,layerRenderIndex:p,moduleParameters:g,layerParameters:_}=o[c];if(f&&d.props.pickable&&l.pickableCount++,d.isComposite)l.compositeCount++;else if(f){l.visibleCount++,g.viewport=r;try{d.drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:_})}catch(y){d.raiseError(y,"drawing ".concat(d," to ").concat(i))}}}return l}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t){return e.props.parameters}_shouldDrawLayer(e,t,i){if(!this.shouldDrawLayer(e)||!e.props.visible||(t.layer=e,i&&!i(t)))return!1;let s=e.parent;for(;s;){if(!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:cm(this.gl)});if(t)for(const o of t)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,t),r)}}function aH(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in t){const d=t[l]=t[l]||aH(e[l],e);c=d(r,s),t[a]=d}else Number.isFinite(o)?(c=o+(e[l]||0),t[a]=null):c=n;return s&&c>=n&&(n=c+1),e[a]=c,c};return i}class ame extends AP{constructor(e,t){super(e,t),this.shadowMap=new ea(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new hm(e,{format:33189,width:1,height:1}),this.fbo=new ts(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;tc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=cm(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render(Lt(K({},e),{target:t,pass:"shadow"}))})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const cme=Object.keys(Wn).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Wn[n],";")).join(""),ume=Object.keys(Hc).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Hc[n],";")).join(""),dme="".concat(cme,"\n").concat(ume,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),hme={},DP={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:dme,getUniforms:function(n=hme){return n.viewport?function({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=Wn.DEFAULT,coordinateOrigin:r,autoWrapLongitude:s=!1}={}){i===Wn.DEFAULT&&(i=n.isGeospatial?Wn.LNGLAT:Wn.CARTESIAN);const o=mfe({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||ffe,o}(n):{}}},mme=DS(function({viewport:n,center:e}){return new Ht(n.viewProjectionMatrix).invert().transform(e)}),_me=DS(function({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function(n,e){const[t,i,r]=n,s=ub([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Js(n.center).negate()),l=s.map(d=>a.transform(d)),c=(new Ht).ortho({left:Math.min(...l.map(d=>d[0])),right:Math.max(...l.map(d=>d[0])),bottom:Math.min(...l.map(d=>d[1])),top:Math.max(...l.map(d=>d[1])),near:Math.min(...l.map(d=>-d[2])),far:Math.max(...l.map(d=>-d[2]))});t.push(c.multiplyRight(o))}return t}),yme=[0,0,0,1],vme=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],OP={name:"shadow",dependencies:[DP],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>{if(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0){const{shadowEnabled:t=!0}=n;return t&&n.shadowMatrices&&n.shadowMatrices.length>0?function(n={},e={}){const t={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||yme,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},i=mme({viewport:n.viewport,center:e.project_uCenter}),r=[],s=_me({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let o=0;o<n.shadowMatrices.length;o++){const a=s[o],l=a.clone().translate(new Js(n.viewport.center).negate());e.project_uCoordinateSystem===Wn.LNGLAT&&e.project_uProjectionMode===Hc.WEB_MERCATOR?(s[o]=l,r[o]=i):(s[o]=a.clone().multiplyRight(vme),r[o]=l.transform(i))}for(let o=0;o<s.length;o++)t["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],t["shadow_uProjectCenters[".concat(o,"]")]=r[o],t["shadow_uShadowMap".concat(o)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[o]:n.dummyShadowMap;return t}(n,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},Sme={color:[255,255,255],intensity:1},lH=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],xme=[0,0,0,200/255];class IP extends oH{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=xme,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=ob.getDefaultProgramManager(e),OP&&this.programManager.addDefaultModule(OP)),this.dummyShadowMap||(this.dummyShadowMap=new ea(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(OP),this.programManager=null)}_createLightMatrix(){const e=[];for(const t of this.directionalLights){const i=(new Ht).lookAt({eye:new Js(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new ame(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new rH(Sme),this.directionalLights.push(new sH(lH[0]),new sH(lH[1])))}}let Mme=1,Tme=1;class cH{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=Mme++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Tme++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Ame{constructor(e,t,i){this.id=e,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=_b(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Dme{constructor({gl:e,protocol:t}){this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new Ame(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i];r.resource&&r.resource.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),i&&(o[t]=a,a.onChange=r,a.resource=i,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Ome=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},DP],Ime=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Pme(n){const e=ob.getDefaultProgramManager(n);for(const t of Ome)e.addDefaultModule(t);for(const t of Ime)e.addShaderHook(t);return e}const Fme=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class Nme{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Dme({gl:e,protocol:"deck://"}),this.context=Lt(K({},Fme),{layerManager:this,gl:e,deck:t,programManager:e&&Pme(e),stats:i||new qO({id:"deck.gl"}),viewport:r||new Em({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new cH,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){eo("layerManager.setLayers",this,t,e),this.lastRenderedLayers=e,e=cI(e,Boolean);for(const i of e)i.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return eo("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?Nn.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&Nn.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite&&r.getSubLayers()}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class Lme{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return"string"==typeof e?this.views.find(t=>t.id===e):e}getViewState(e){const t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=cI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!vb(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Nn.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)(K({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height})},t))}_updateController(e,t,i,r){let s=e.controller;return s?(s=Lt(K(K(K({},t),e.props),s),{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height}),r?r.setProps(s):r=this._createController(e,s),r):null}_rebuildViewports(){const{width:e,height:t,views:i}=this,r=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=i.length;o--;){const a=i[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:t,viewState:l});let d=r[a.id];a.controller&&!d&&(s=!0),(s||!a.controller)&&d&&(d.finalize(),d=null),this.controllers[a.id]=this._updateController(a,l,c,d),this._viewports.unshift(c)}for(const o in r)r[o]&&!this.controllers[o]&&r[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class Vme extends iH{constructor({makeViewport:e,width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,maxZoom:d=20,minZoom:f=0,maxPitch:p=60,minPitch:g=0,startPanLngLat:_,startZoomLngLat:y,startRotatePos:v,startBearing:C,startPitch:w,startZoom:M,normalize:k}={}){nc(Number.isFinite(s)),nc(Number.isFinite(r)),nc(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:d,minZoom:f,maxPitch:p,minPitch:g,normalize:k}),this._state={startPanLngLat:_,startZoomLngLat:y,startRotatePos:v,startBearing:C,startPitch:w,startZoom:M},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this._state.startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this._state;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return a=e?this._calculateNewPitchAndBearing(Lt(K({},this._getRotationParams(e,r)),{startBearing:s,startPitch:o})):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this._state;Number.isFinite(r)||(r=this._viewportProps.zoom,s=this._unproject(t)||this._unproject(e));const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport(Lt(K({},this._viewportProps),{zoom:o}));return this._getUpdatedState(K({zoom:o},a.panByPosition(s,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i=K({},this._viewportProps),{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}_zoomFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor(K(K(K({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=Kf(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Kf(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,function({width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s=0,bearing:o=0}){(t<-180||t>180)&&(t=n5(t+180,360)-180),(o<-180||o>180)&&(o=n5(o+180,360)-180);const a=RI(e/512);if(r<=a)r=a,i=0;else{const l=e/2/Math.pow(2,r),c=wm([0,l])[1];if(i<c)i=c;else{const d=wm([0,512-l])[1];i>d&&(i=d)}}return{width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s,bearing:o}}(e)),e}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Kf(t+Math.log2(e),r,i)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:t,startBearing:i,startPitch:r}){t=Kf(t,-1,1);const{minPitch:s,maxPitch:o}=this._viewportProps;let l=r;return t>0?l=r+t*(o-r):t<0&&(l=r-t*(s-r)),{pitch:l,bearing:i+180*e}}_getRotationParams(e,t){const i=e[0]-t[0],r=e[1]-t[1],s=e[1],o=t[1],{width:a,height:l}=this._viewportProps,c=i/a;let d=0;return r>0?Math.abs(l-o)>5&&(d=r/(o-l)*1.2):r<0&&o>5&&(d=1-s/o),d=Math.min(1,Math.max(-1,d)),{deltaScaleX:c,deltaScaleY:d}}}class zme extends TP{constructor(e){e.dragMode=e.dragMode||"pan",super(Vme,e)}setProps(e){const t=this.controllerStateProps;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState(K(K({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}let Ume=(()=>{class n extends MP{constructor(t){super(Lt(K({},t),{type:g5}))}get controller(){return this._getControllerProps({type:zme})}}return n.displayName="MapView",n})();const jme=new IP;class Hme{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!vb(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof IP)||this._internalEffects.push(jme)}}class $me extends AP{}const dH={blendFunc:[1,0,32771,0],blendEquation:32774};class hH extends AP{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:d},pass:f="picking",redrawReason:p,pickZ:g}){const _=this.gl;return this.pickZ=g,tc(_,Lt(K({scissorTest:!0,scissor:[a,l,c,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},dH),{blend:!g}),()=>{super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pass:f,redrawReason:p})})}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t){const i=this.pickZ?{blend:!1}:Lt(K({},dH),{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return K(K({},e.props.parameters),i)}}class Wme{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new $me(e),this.pickLayersPass=new hH(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||ts.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(Lt(K({},e),{target:i}));this._postRender(e.effects,e),this.renderCount++,eo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new ts(this.gl),new ts(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const qme={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Yme({pickedColors:n,layers:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){if(n){const{x:o,y:a,width:l,height:c}=s;let d=r*r,f=-1,p=0;for(let g=0;g<c;g++){const _=g+a-i,y=_*_;if(y>d)p+=4*l;else for(let v=0;v<l;v++){if(n[p+3]-1>=0){const w=v+o-t,M=w*w+y;M<=d&&(d=M,f=p)}p+=4}}if(f>=0){const g=n[f+3]-1,_=n.slice(f,f+4),y=e[g];if(y){const v=y.decodePickingColor(_),C=Math.floor(f/4/l);return{pickedColor:_,pickedLayer:y,pickedObjectIndex:v,pickedX:o+(f/4-C*l),pickedY:a+C}}Nn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return qme}function fH({pickInfo:n,mode:e,viewports:t,layerFilter:i,pixelRatio:r,x:s,y:o,z:a}){const l=n&&n.pickedLayer,d=function(n,e,t){for(let i=n.length-1;i>=0;i--){const r=n[i];if(r.containsPixel(e)&&(!t||t(r)))return r}return n[0]}(t,{x:s,y:o},i&&l&&(p=>i({layer:l,viewport:p,isPicking:!0,renderPass:"picking:".concat(e)}))),f=d&&d.unproject([s-d.x,o-d.y],{targetZ:a});return{color:null,layer:null,viewport:d,index:-1,picked:!1,x:s,y:o,pixel:[s,o],coordinate:f,devicePixel:n&&[n.pickedX,n.pickedY],pixelRatio:r}}function Kme(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===i){const f=t.index,p=t.layerId,g=o&&o.props.id;if(g!==p||a!==f){if(g!==p){const _=r.find(y=>y.props.id===p);_&&l.unshift(_)}t.layerId=g,t.index=a,t.info=null}}const c=fH(n),d=new Map;return d.set(null,c),l.forEach(f=>{let p=K({},c);f===o&&(p.color=s,p.index=a,p.picked=!0),p=pH({layer:f,info:p,mode:i}),f===o&&"hover"===i&&(t.info=p),d.set(p.layer.id,p),"hover"===i&&p.layer.updateAutoHighlight(p)}),d}function pH({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class Qme{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new hH(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?i.find(p=>p.id===o):null,c=a&&r.find(p=>p.id===a)||r[0],d=c&&c.unproject([e-c.x,t-c.y]),f={x:e,y:t,viewport:c,coordinate:d,layer:l};return l?K(K({},s),f):Object.assign(f,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new ts(e),ts.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new ts(e),this.depthFBO.attach({36064:new ea(e,{format:An(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length>255?(Nn.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:d}){if(!(e=this._getPickable(e)))return{result:[],emptyInfo:fH({viewports:i,x:r,y:s})};this._resizeBuffer();const f=cm(this.gl),p=$O(this.gl,[r,s],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],_=Math.round(o*f),{width:y,height:v}=this.pickingFBO,C=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:_,deviceWidth:y,deviceHeight:v});let w;const M=[],k={};for(let V=0;V<a;V++){const ee=Yme({pickedColors:C&&this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:d,deviceRect:C,pass:"picking:".concat(l),redrawReason:l}),layers:e,deviceX:g[0],deviceY:g[1],deviceRadius:_,deviceRect:C});let ce;if(ee.pickedLayer&&c&&this.depthFBO&&(ce=this._drawAndSample({layers:[ee.pickedLayer],views:t,viewports:i,onViewportActive:d,deviceRect:{x:ee.pickedX,y:ee.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0})[0]*i[0].distanceScales.metersPerUnit[2]+i[0].position[2]),ee.pickedColor&&V+1<a){const oe=ee.pickedColor[3]-1;k[oe]=!0,e[oe].disablePickingIndex(ee.pickedObjectIndex)}w=Kme({pickInfo:ee,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,layerFilter:this.layerFilter,viewports:i,x:r,y:s,z:ce,pixelRatio:f});for(const oe of w.values())oe.layer&&M.push(oe);if(!ee.pickedColor)break}for(const V in k)e[V].restorePickingColors();return{result:M,emptyInfo:w&&w.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:d}){if(!(e=this._getPickable(e)))return[];this._resizeBuffer();const f=cm(this.gl),p=$O(this.gl,[r,s],!0),g=p.x,_=p.y+p.height,y=$O(this.gl,[r+o,s+a],!0),C=y.y,k=function({pickedColors:n,layers:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4){const r=n[i+3]-1;if(r>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e[r];a?t.set(o,{pickedColor:s,pickedLayer:a,pickedObjectIndex:a.decodePickingColor(s)}):Nn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}({pickedColors:this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:d,deviceRect:{x:g,y:C,width:y.x+y.width-g,height:_-C},pass:"picking:".concat(l),redrawReason:l}),layers:e}),V=new Map,j=Number.isFinite(c);for(let ee=0;ee<k.length&&!(j&&V.size>=c);ee++){const ce=k[ee];let oe={color:ce.pickedColor,layer:null,index:ce.pickedObjectIndex,picked:!0,x:r,y:s,width:o,height:a,pixelRatio:f};oe=pH({layer:ce.pickedLayer,info:oe,mode:l}),V.has(oe.object)||V.set(oe.object,oe)}return Array.from(V.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,pass:o,redrawReason:a,pickZ:l}){if(e.length<1)return null;const c=l?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:c,deviceRect:s,pass:o,redrawReason:a,pickZ:l});const{x:d,y:f,width:p,height:g}=s,_=new(l?Float32Array:Uint8Array)(p*g*4);return hS(c,{sourceX:d,sourceY:f,sourceWidth:p,sourceHeight:g,target:_}),_}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),l=Math.min(r,e+i+1)-o,c=Math.min(s,t+i+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const Jme={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class e_e{constructor(e){const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Jme),t.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,i){const r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}remove(){this.el&&this.el.remove()}}function gH(n,e){if(!n)throw new Error(e)}const Kc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},mH=Kc.global||Kc.self||Kc.window,n_e="object"!=typeof process||"[object process]"!==String(process)||process.browser,_H="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:i_e}=(_H&&parseFloat(_H[1]),mH),PP="undefined"!=typeof Image,RP="undefined"!=typeof ImageBitmap,r_e=Boolean(i_e),kP=!!n_e||r_e;function yH(n){const e=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}function vH(n){switch(yH(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}const a_e=/^data:image\/svg\+xml/,l_e=/\.svg((\?|#).*)?$/;function FP(n){return n&&(a_e.test(n)||l_e.test(n))}function c_e(n,e){if(FP(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return CH(n,e)}function CH(n,e){if(FP(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function wH(n,e,t){return NP.apply(this,arguments)}function NP(){return(NP=mn(function*(n,e,t){const i=c_e(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield u_e(s||i,e)}finally{s&&r.revokeObjectURL(s)}})).apply(this,arguments)}function u_e(n,e){return LP.apply(this,arguments)}function LP(){return(LP=mn(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error(`Could not load image ${n}: ${s}`))}catch(s){r(s)}})})).apply(this,arguments)}const d_e={};let EH=!0;function h_e(n,e,t){return BP.apply(this,arguments)}function BP(){return(BP=mn(function*(n,e,t){let i;i=FP(t)?yield wH(n,e,t):CH(n,t);const r=e&&e.imagebitmap;return yield f_e(i,r)})).apply(this,arguments)}function f_e(n){return VP.apply(this,arguments)}function VP(){return(VP=mn(function*(n,e=null){if((p_e(e)||!EH)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),EH=!1}return yield createImageBitmap(n)})).apply(this,arguments)}function p_e(n){for(const e in n||d_e)return!1;return!0}const Zc=!1,Cb=!0;function zP(n){const e=wb(n);return function(n){const e=wb(n);return e.byteLength>=24&&2303741511===e.getUint32(0,Zc)?{mimeType:"image/png",width:e.getUint32(16,Zc),height:e.getUint32(20,Zc)}:null}(e)||function(n){const e=wb(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,Zc)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Zc);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Zc),width:e.getUint16(s+7,Zc)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Zc)}return null}(e)||function(n){const e=wb(n);return e.byteLength>=10&&1195984440===e.getUint32(0,Zc)?{mimeType:"image/gif",width:e.getUint16(6,Cb),height:e.getUint16(8,Cb)}:null}(e)||function(n){const e=wb(n);return e.byteLength>=14&&16973===e.getUint16(0,Zc)&&e.getUint32(2,Cb)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Cb),height:e.getUint32(22,Cb)}:null}(e)}function wb(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function b_e(n,e){const{mimeType:t}=zP(n)||{},{_parseImageNode:i}=mH;return gH(i),i(n,t,e)}function UP(){return(UP=mn(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{};let a;switch(w_e(r)){case"imagebitmap":a=yield h_e(n,e,s);break;case"image":a=yield wH(n,e,s);break;case"data":a=yield b_e(n,e);break;default:gH(!1)}return"data"===r&&(a=vH(a)),a})).apply(this,arguments)}function w_e(n){switch(n){case"auto":case"data":return function(){if(RP)return"imagebitmap";if(PP)return"image";if(kP)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return RP||PP||kP;case"imagebitmap":return RP;case"image":return PP;case"data":return kP;default:throw new Error(`@loaders.gl/images: image ${n} not supported in this environment`)}}(n),n}}const jP={id:"image",module:"images",name:"Images",version:"3.0.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,e,t){return UP.apply(this,arguments)},tests:[n=>Boolean(zP(new DataView(n)))],options:{image:{type:"auto",decode:!0}}};var Mm=Be(761);const S_e={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},Eb="8.5.8",YS=Mm.CO.deck&&Mm.CO.deck.VERSION;if(YS&&YS!==Eb)throw new Error("deck.gl - multiple versions detected: ".concat(YS," vs ").concat(Eb));YS||(Nn.log(1,"deck.gl ".concat(Eb))(),Mm.CO.deck=Object.assign(Mm.CO.deck||{},{VERSION:Eb,version:Eb,log:Nn,_registerLoggers:function(n){fI=n}}),q5([S_e,[jP,{imagebitmap:{premultiplyAlpha:"none"}}]]));const x_e=Mm.CO.deck;class XS extends Wu{get[Symbol.toStringTag](){return"Query"}static isSupported(e,t=[]){const i=An(e),r=Uj(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:et(!1)}return s}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return XS.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const SH=dS()&&"undefined"!=typeof document;let F_e=0;class N_e{constructor(e={}){const{onCreateContext:t=(v=>Cj(v)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:c={},debug:d=!1,createFramebuffer:f=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:g=!0,stats:_=qf.get("animation-loop-"+F_e++)}=e;let{useDevicePixels:y=!0}=e;"useDevicePixelRatio"in e&&(gt.deprecated("useDevicePixelRatio","useDevicePixels")(),y=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:d,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=_,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:g,useDevicePixels:y}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return et("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=XS.isSupported(this.gl,["timers"])?new XS(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return mn(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return gt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=SH?new Promise((e,t)=>{SH&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?WO(this.props.gl,e):this.onCreateContext(e),!cS(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){Gu(n,HO)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,e={}){if(n.canvas)return void function(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(gt.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),l=Math.floor(r*o);n.canvas.width=a,n.canvas.height=l,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==l)&&(gt.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,function(n){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels),e);const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ts(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var L_e=Be(524),KS=Be.n(L_e);const B_e={mousedown:1,mousemove:2,mouseup:4};(function(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function(n,e){for(let t=0;t<n.length;t++)if(n[t].pointerId===i.pointerId)return!0;return!1}(r)||r.push(i)),e.call(this,i)}})(KS().PointerEventInput),function(n){n.prototype.handler=function(t){let i=B_e[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(KS().MouseInput);const j_e=KS().Manager,Qc=KS(),H_e=Qc?[[Qc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Qc.Rotate,{enable:!1}],[Qc.Pinch,{enable:!1}],[Qc.Swipe,{enable:!1}],[Qc.Pan,{threshold:0,enable:!1}],[Qc.Press,{enable:!1}],[Qc.Tap,{event:"doubletap",taps:2,enable:!1}],[Qc.Tap,{event:"anytap",enable:!1}],[Qc.Tap,{enable:!1}]]:null,TH={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},$_e={doubletap:["tap"]},G_e={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},$P={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},W_e={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},AH={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},q_e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Tm="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let DH=!1;try{const n={get passive(){return DH=!0,!0}};Tm.addEventListener("test",n,n),Tm.removeEventListener("test",n,n)}catch(n){}const Y_e=-1!==q_e.indexOf("firefox"),{WHEEL_EVENTS:X_e}=$P,IH=4.000244140625;class Q_e{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.events=X_e.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!DH&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;Tm.WheelEvent&&(Y_e&&e.deltaMode===Tm.WheelEvent.DOM_DELTA_PIXEL&&(t/=Tm.devicePixelRatio),e.deltaMode===Tm.WheelEvent.DOM_DELTA_LINE&&(t*=40));const i={x:e.clientX,y:e.clientY};0!==t&&t%IH==0&&(t=Math.floor(t/IH)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,i)}_onWheel(e,t,i){this.callback({type:"wheel",center:i,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:J_e}=$P,PH="pointermove",RH="pointerover",kH="pointerout",FH="pointerleave";class eye{constructor(e,t,i={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=J_e.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===PH&&(this.enableMoveEvent=t),e===RH&&(this.enableOverEvent=t),e===kH&&(this.enableOutEvent=t),e===FH&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:RH,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:kH,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:FH,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:PH,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:tye}=$P,NH="keydown";class nye{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=tye.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===NH&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:NH,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}const BH="contextmenu";class iye{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===BH&&(this.options.enable=t)}handleEvent(e){!this.options.enable||this.callback({type:BH,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const rye={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},VH={srcElement:"root",priority:0};class mye{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;i&&("object"!=typeof i||i.addEventListener)&&(i={srcElement:i}),i=i?Object.assign({},VH,i):VH;let l=a.get(i.srcElement);l||(l=[],a.set(i.srcElement,l));const c={type:e,handler:t,srcElement:i.srcElement,priority:i.priority};r&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let d=l.length-1;for(;d>=0&&!(l[d].priority>=c.priority);)d--;l.splice(d+1,0,c)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let i=e.srcEvent.target;for(;i&&i!==t.rootElement;){if(this._emit(t,i),t.handled)return;i=i.parentNode}this._emit(t,"root")}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let l=0;l<i.length;l++){const{type:c,handler:d,once:f}=i[l];if(d(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),f&&a.push(i[l]),r)break}for(let l=0;l<a.length;l++){const{type:c,handler:d}=a[l];this.remove(c,d)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(n){const e=rye[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===r,o=2===r,a=3===r):2===e?(s=Boolean(1&t),o=Boolean(4&t),a=Boolean(2&t)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}(e),function(n,e){const{srcEvent:t}=n;if(!n.center&&!Number.isFinite(t.clientX))return null;const i=n.center||{x:t.clientX,y:t.clientY},r=e.getBoundingClientRect();return{center:i,offsetCenter:{x:(i.x-r.left-e.clientLeft)/(r.width/e.offsetWidth||1),y:(i.y-r.top-e.clientTop)/(r.height/e.offsetHeight||1)}}}(e,t),{handled:!1,rootElement:t})}}const _ye={events:null,recognizers:null,recognizerOptions:{},Manager:j_e,touchAction:"none",tabIndex:0};class yye{constructor(e=null,t={}){this.options=Object.assign({},_ye,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:i}=t;i&&this.on(i)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||H_e}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(TH).forEach(r=>{const s=this.manager.get(r);s&&TH[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new Q_e(e,this._onOtherEvent,{enable:!1}),this.moveInput=new eye(e,this._onOtherEvent,{enable:!1}),this.keyInput=new nye(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new iye(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=$_e[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const d in e)this._addEventHandler(d,e[d],i,r,s);return}const{manager:o,events:a}=this,l=AH[e]||e;let c=a.get(l);c||(c=new mye(this),a.set(l,c),c.recognizerName=W_e[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,t,i,r,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(AH[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of i.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:t}=e,i=G_e[t.type];i&&this.manager.emit(i,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function tp(){}const zH={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:tp,onResize:tp,onViewStateChange:tp,onInteractionStateChange:tp,onBeforeRender:tp,onAfterRender:tp,onLoad:tp,onError:(n,e)=>Nn.error(n)(),_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",debug:!1,drawPickingColors:!1};class QS{constructor(e){e=K(K({},zH),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&Nn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,Mm.qs)()&&Nn.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new qO({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Zv.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Nn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Nn.removed("onLayerClick","onClick")(),e.initialViewState&&!vb(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});!t||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e](K({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport},i));return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),nc(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:i}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:d,autoResizeDrawingBuffer:f}=e;return new N_e({width:t,height:i,useDevicePixels:d,autoResizeDrawingBuffer:f,autoResizeViewport:!1,gl:r,onCreateContext:p=>Cj(Lt(K(K({},s),p),{canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()})),onInitialize:p=>this._setGLContext(p.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Ume({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let r=i,s=!1;for(const o of t)r=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip){const o=this.props.getTooltip(r);this.tooltip.setTooltip(o,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,WO(e,{enable:!0,copyState:!0})),this.tooltip=new e_e(this.canvas),Gu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new cH;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new yye(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in sj)this.eventManager.on(r,this._onEvent);this.viewManager=new Lme({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Nme(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new Hme,this.deckRenderer=new Wme(e),this.deckPicker=new Qme(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Gu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(K({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Nn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=Lt(K({},this.viewState),{[e.viewId]:t}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=sj[e.type],i=e.offsetCenter;if(!t||!i)return;const r=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[t.handler]||o.props[t.handler]),l=this.props[t.handler];let c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=qf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}QS.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(oH)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},QS.defaultProps=zH,QS.VERSION=x_e.VERSION;const JS={name:"project32",dependencies:[DP],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},wye={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},ex=K({inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=wye){const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=Boolean(n.pickingActive),e.picking_uAttribute=Boolean(n.pickingAttribute)),e}}),UH={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class ch{static get DRAW_MODE(){return UH}constructor(e={}){const{id:t=Qo("geometry"),drawMode:i=UH.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?K({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,et(ArrayBuffer.isView(r.value),`${this._print(i)}: must be typed array or object with value as typed array`),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(et(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(i=Math.min(i,o.length/a))}return et(Number.isFinite(i)),i}}const jH=()=>{},Aye={10241:9987,10240:9729,10242:33071,10243:33071};function Dye(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function Oye(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function Sb(n){return n&&(n.id||n.url)}function HH(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];n[Sb(r)]=Lt(K({},r),{x:s,y:t})}}class kye{constructor(e,{onUpdate:t=jH,onError:i=jH}){this.gl=e,this.onUpdate=t,this.onError=i,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?Sb(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,data:s,getIcon:o}){e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),o&&(this._getIcon=o),r&&(this._mapping=r),i&&this._updateIconAtlas(i),this._autoPacking&&(s||o)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(s))}get isLoaded(){return 0===this._pendingCount}_updateIconAtlas(e){var t;null===(t=this._texture)||void 0===t||t.delete(),this._texture=null,this._externalTexture=e,this.onUpdate()}_updateAutoPacking(e){const t=Object.values(function(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:s}=_S(n);for(const o of r){s.index++;const a=e(o,s),l=Sb(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[l]&&(!t[l]||a.url!==t[l].url)&&(i[l]=Lt(K({},a),{source:o,sourceIndex:s.index}))}return i}(e,this._getIcon,this._mapping)||{});if(t.length>0){const{mapping:i,xOffset:r,yOffset:s,rowHeight:o,canvasHeight:a}=function({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<n.length;l++){const c=n[l];if(!t[Sb(c)]){const{height:f,width:p}=c;i+p+e>o&&(HH(t,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:c,xOffset:i}),i=i+p+e,s=Math.max(s,f)}}return a.length>0&&HH(t,a,r),{mapping:t,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Dye(s+r+e)}}({icons:t,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=i,this._xOffset=r,this._yOffset=s,this._canvasHeight=a,this._texture||(this._texture=new ea(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:Aye})),this._texture.height!==this._canvasHeight&&(this._texture=function(n,e,t,i){const r=e.width,s=e.height,o=Bj(e,{width:t,height:i});return function(n,e,t={}){const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=t;let{targetX:a,targetY:l,targetZ:c,width:d,height:f}=t;const{framebuffer:p,deleteFramebuffer:g}=Kv(n);et(p);const{gl:_,handle:y}=p,v=void 0!==a||void 0!==l||void 0!==c;a=a||0,l=l||0,c=c||0;const C=_.bindFramebuffer(36160,y);et(e);let w=null;if(e instanceof Yf&&(w=e,d=Number.isFinite(d)?d:w.width,f=Number.isFinite(f)?f:w.height,w.bind(0),e=w.target),v)switch(e){case 3553:case 34067:_.copyTexSubImage2D(e,s,a,l,i,r,d,f);break;case 35866:case 32879:Qs(_).copyTexSubImage3D(e,s,a,l,c,i,r,d,f)}else _.copyTexImage2D(e,s,o,i,r,d,f,0);w&&w.unbind(),_.bindFramebuffer(36160,C||null),g&&p.delete()}(e,o,{targetY:0,width:r,height:s}),e.delete(),o}(0,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(t)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,_b(i.url,jP,this._loadOptions).then(r=>{const s=Sb(i),{x:o,y:a,width:l,height:c}=this._mapping[s],d=Oye(t,r,l,c);this._texture.setSubImageData({data:d,x:o,y:a,width:l,height:c}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const $H=[0,0,0,255],Fye={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:$H},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};let Nye=(()=>{class n extends yb{getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[JS,ex]})}initializeState(){this.state={iconManager:new kye(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:$H},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState({oldProps:t,props:i,changeFlags:r}){super.updateState({props:i,oldProps:t,changeFlags:r});const s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c}=i,{iconManager:d}=this.state;d.setProps({loadOptions:i.loadOptions});let f=!1;if(o||this.internalState.isAsyncPropLoading("iconAtlas")?(t.iconAtlas!==i.iconAtlas&&d.setProps({iconAtlas:o,autoPacking:!1}),t.iconMapping!==i.iconMapping&&(d.setProps({iconMapping:a}),f=!0)):d.setProps({autoPacking:!0}),(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&d.setProps({data:l,getIcon:c}),f&&(s.invalidate("instanceOffsets"),s.invalidate("instanceIconFrames"),s.invalidate("instanceColorModes")),r.extensionsChanged){var g;const{gl:_}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(_),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(){super.finalizeState(),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:i,sizeMinPixels:r,sizeMaxPixels:s,sizeUnits:o,billboard:a,alphaCutoff:l}=this.props,{iconManager:c}=this.state,{viewport:d}=this.context,f=c.getTexture();f&&this.state.model.setUniforms(t).setUniforms({iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeScale:i*("pixels"===o?d.metersPerPixel:1),sizeMinPixels:r,sizeMaxPixels:s,billboard:a,alphaCutoff:l}).draw()}_getModel(t){return new ym(t,Lt(K({},this.getShaders()),{id:this.props.id,geometry:new ch({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}_onUpdate(){this.setNeedsRedraw()}_onError(t){const{onIconError:i}=this.getCurrentLayer().props;i?i(t):Nn.error(t.error)()}getInstanceOffset(t){const i=this.state.iconManager.getIconMapping(t);return[i.width/2-i.anchorX||0,i.height/2-i.anchorY||0]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const i=this.state.iconManager.getIconMapping(t);return[i.x||0,i.y||0,i.width||0,i.height||0]}}return n.layerName="IconLayer",n.defaultProps=Fye,n})();const WH=[],Bye={getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};let Vye=(()=>{class n extends Nye{getShaders(){return Lt(K({},super.getShaders()),{fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(i,{index:r,target:s})=>this.encodePickingColor(r,s)}})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;let{outlineColor:s}=i;s!==r.outlineColor&&(s=s.map(o=>o/255),s[3]=Number.isFinite(s[3])?s[3]:1,this.setState({outlineColor:s})),!i.sdf&&i.outlineWidth&&Nn.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:i,smoothing:r,outlineWidth:s}=this.props,{outlineColor:o}=this.state;t.uniforms=Lt(K({},t.uniforms),{buffer:.75,outlineBuffer:s?Math.max(r,.75*(1-s)):-1,gamma:r,sdf:Boolean(i),outlineColor:o}),super.draw(t)}getInstanceOffset(t){return t?Array.from(t).map(i=>super.getInstanceOffset(i)):WH}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).map(i=>super.getInstanceIconFrame(i)):WH}}return n.layerName="MultiIconLayer",n.defaultProps=Bye,n})();var zye=Be(2),Uye=Be.n(zye);const Hye=[];function $ye(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function qH(n,e,t,i){let r=0;for(let s=e;s<t;s++){const o=n[s];let a=null;const l=i&&i[o];l&&(a=l.width),r+=a}return r}function YH(n,e,t,i,r,s){let o=e,a=0;for(let l=e;l<t;l++){const c=qH(n,l,l+1,r);a+c>i&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function qye(n,e,t,i,r=0,s){void 0===s&&(s=n.length);const o=[];return"break-all"===e?YH(n,r,s,t,i,o):function(n,e,t,i,r,s){let o=e,a=e,l=e,c=0;for(let d=e;d<t;d++)if((" "===n[d]||" "===n[d+1]||d+1===t)&&(l=d+1),l>a){let f=qH(n,a,l,r);c+f>i&&(o<a&&(s.push(a),o=a,c=0),f>i&&(f=YH(n,a,l,i,r,s),o=s[s.length-1])),a=l,c+=f}}(n,r,s,t,i,o),o}function Yye(n,e,t,i,r,s){let o=0,a=0;for(let l=e;l<t;l++){const c=n[l],d=i[c];d?(a||(a=d.height),r[l]=o+d.width/2,o+=d.width):(Nn.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),r[l]=o,o+=32)}s[0]=o,s[1]=a}function XH(n,e,t,i,r){const s=(n=Array.from(n)).length,o=new Array(s),a=new Array(s),l=new Array(s),c=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,d=[0,0],f=[];let p=0,g=0,_=0;for(let y=0;y<=s;y++){const v=n[y];if(("\n"===v||y===s)&&(_=y),_>g){const C=c?qye(n,t,i,r,g,_):Hye;for(let w=0;w<=C.length;w++){const M=0===w?g:C[w-1],k=w<C.length?C[w]:_;Yye(n,M,k,r,o,f);for(let V=M;V<k;V++)a[V]=p+f[1]/2,l[V]=f[0];p+=f[1]*e,d[0]=Math.max(d[0],f[0])}g=_}"\n"===v&&(o[g]=0,a[g]=0,l[g]=0,g++)}return d[1]=p,{x:o,y:a,rowWidth:l,size:d}}const KH=function(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),ZH="Monaco, monospace",qP=new class{constructor(e=5){this.limit=e,this.clear()}clear(){this._cache={},this._order=[]}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(this._deleteCache(e),this._deleteOrder(e))}_deleteCache(e){delete this._cache[e]}_deleteOrder(e){const t=this._order.findIndex(i=>i===e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}(3),eve=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function nve(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function s6(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="baseline",n.textAlign="left"}class ive{constructor(){this.props={fontFamily:ZH,fontWeight:"normal",characterSet:KH,fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12},this._key=null,this._atlas=null}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){eve.forEach(o=>{o in e&&(this.props[o]=e[o])});const t=this._key;this._key=this._getKey();const i=function(n,e){const t=qP.get(n);if(!t)return e;const i=[];let s=Object.keys(t.mapping);s=new Set(s);let o=e;return o instanceof Array&&(o=new Set(o)),o.forEach(a=>{s.has(a)||i.push(a)}),i}(this._key,this.props.characterSet),r=qP.get(this._key);if(r&&0===i.length)return void(this._key!==t&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,qP.set(this._key,s)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:l,radius:c,cutoff:d}=this.props;let f=i&&i.data;f||(f=document.createElement("canvas"),f.width=1024);const p=f.getContext("2d");s6(p,r,o,s);const{mapping:g,canvasHeight:_,xOffset:y,yOffset:v}=function({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o,d=0;for(const p of n)if(!s[p]){const g=e(p,d++);c+g+2*i>r&&(c=0,l++),s[p]={x:c+i,y:a+l*(t+2*i)+i,width:g,height:t},c+=g+2*i}const f=t+2*i;return{mapping:s,xOffset:c,yOffset:a+l*f,canvasHeight:$ye(a+(l+1)*f)}}(K({getFontWidth:C=>p.measureText(C).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024},i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}));if(f.height!==_){const C=p.getImageData(0,0,f.width,f.height);f.height=_,p.putImageData(C,0,0)}if(s6(p,r,o,s),l){const C=new(Uye())(o,a,c,d,r,s),w=p.getImageData(0,0,C.size,C.size);for(const M of t)nve(C.draw(M),w),p.putImageData(w,g[M].x-a,g[M].y+a)}else for(const C of t)p.fillText(C,g[C].x,g[C].y+.9*o);return{xOffset:y,yOffset:v,mapping:g,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const ove={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};let ave=(()=>{class n extends yb{getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[JS,ex]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),r.extensionsChanged){var s;const{gl:o}=this.context;null===(s=this.state.model)||void 0===s||s.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{viewport:i}=this.context,{billboard:r,sizeScale:s,sizeUnits:o,sizeMinPixels:a,sizeMaxPixels:l,getLineWidth:c}=this.props;let{padding:d}=this.props;const f="pixels"===o?i.metersPerPixel:1;d.length<4&&(d=[d[0],d[1],d[0],d[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(c),padding:d,sizeScale:s*f,sizeMinPixels:a,sizeMaxPixels:l}).draw()}_getModel(t){return new ym(t,Lt(K({},this.getShaders()),{id:this.props.id,geometry:new ch({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0}))}}return n.layerName="TextBackgroundLayer",n.defaultProps=ove,n})();const o6={fontSize:64,buffer:4,sdf:!1,radius:12,cutoff:.25,smoothing:.1},a6={start:1,middle:0,end:-1},l6={top:1,center:0,bottom:-1},YP=[0,0,0,255],cve=["fontSize","buffer","sdf","radius","cutoff"],uve={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:YP},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:KH},fontFamily:ZH,fontWeight:"normal",lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:YP},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:YP},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};let dve=(()=>{class n extends J5{initializeState(){this.state={styleVersion:0,fontAtlasManager:new ive}}updateState({props:t,oldProps:i,changeFlags:r}){const o=this.state.characterSet;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();const a=o!==this.state.characterSet||this._fontChanged(i,t);a&&this._updateFontAtlas(i,t),(a||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(t,i){const{fontSettings:r,fontFamily:s,fontWeight:o}=i,{fontAtlasManager:a,characterSet:l}=this.state;a.setProps(Lt(K(K({},o6),r),{characterSet:l,fontFamily:s,fontWeight:o}))}_fontChanged(t,i){if(t.fontFamily!==i.fontFamily||t.fontWeight!==i.fontWeight)return!0;if(t.fontSettings===i.fontSettings)return!1;const r=t.fontSettings||{},s=i.fontSettings||{};return cve.some(o=>r[o]!==s[o])}_updateText(){const{data:t,characterSet:i}=this.props,r=t.attributes&&t.attributes.getText;let a,{getText:s}=this.props,{startIndices:o}=t;const l="auto"===i&&new Set;if(r&&o){const{texts:c,characterCount:d}=function({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:1,l=i?i/o:0,c=r[e]||Math.ceil((n.length-l)/a),d=s&&new Set,f=new Array(e);let p=n;if(a>1||l>0){p=new n.constructor(c);for(let g=0;g<c;g++)p[g]=n[g*a+l]}for(let g=0;g<e;g++){const v=p.subarray(r[g],r[g+1]||c);f[g]=String.fromCodePoint.apply(null,v),d&&v.forEach(d.add,d)}if(d)for(const g of d)s.add(String.fromCodePoint(g));return{texts:f,characterCount:c}}(Lt(K({},ArrayBuffer.isView(r)?{value:r}:r),{length:t.length,startIndices:o,characterSet:l}));a=d,s=(f,{index:p})=>c[p]}else{const{iterable:c,objectInfo:d}=_S(t);o=[0],a=0;for(const f of c){d.index++;const p=Array.from(s(f,d)||"");l&&p.forEach(l.add,l),a+=p.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||i})}getBoundingRect(t,i){const r=this.state.fontAtlasManager.mapping,{getText:s}=this.state,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:d}=this.props,f=s(t,i)||"",{size:[p,g]}=XH(f,l,o,a,r);return[(a6["function"==typeof c?c(t,i):c]-1)*p/2,(l6["function"==typeof d?d(t,i):d]-1)*g/2,p,g]}getIconOffsets(t,i){const r=this.state.fontAtlasManager.mapping,{getText:s}=this.state,{wordBreak:o,maxWidth:a,lineHeight:l,getTextAnchor:c,getAlignmentBaseline:d}=this.props,f=s(t,i)||"",{x:p,y:g,rowWidth:_,size:[y,v]}=XH(f,l,o,a,r),C=a6["function"==typeof c?c(t,i):c],w=l6["function"==typeof d?d(t,i):d],M=p.length,k=new Array(2*M);let V=0;for(let j=0;j<M;j++)k[V++]=(C-1)*y/2+(1-C)*(y-_[j])/2+p[j],k[V++]=(w-1)*v/2+g[j];return k}renderLayers(){const{startIndices:t,numInstances:i,getText:r,fontAtlasManager:{scale:s,texture:o,mapping:a},styleVersion:l}=this.state,{data:c,_dataDiff:d,getPosition:f,getColor:p,getSize:g,getAngle:_,getPixelOffset:y,getBackgroundColor:v,getBorderColor:C,getBorderWidth:w,backgroundPadding:M,background:k,billboard:V,fontSettings:j,outlineWidth:ee,outlineColor:ce,sizeScale:oe,sizeUnits:pe,sizeMinPixels:Ee,sizeMaxPixels:ke,transitions:te,updateTriggers:ne}=this.props,Ae=this.getSubLayerClass("characters",Vye),Q=this.getSubLayerClass("background",ave);return[k&&new Q({getFillColor:v,getLineColor:C,getLineWidth:w,padding:M,getPosition:f,getSize:g,getAngle:_,getPixelOffset:y,billboard:V,sizeScale:oe/this.state.fontAtlasManager.props.fontSize,sizeUnits:pe,sizeMinPixels:Ee,sizeMaxPixels:ke,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getSize:te.getSize,getFillColor:te.getBackgroundColor,getLineColor:te.getBorderColor,getLineWidth:te.getBorderWidth,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ne.getPosition,getAngle:ne.getAngle,getSize:ne.getSize,getFillColor:ne.getBackgroundColor,getLineColor:ne.getBorderColor,getLineWidth:ne.getBorderWidth,getPixelOffset:ne.getPixelOffset,getBoundingRect:{getText:ne.getText,getTextAnchor:ne.getTextAnchor,getAlignmentBaseline:ne.getAlignmentBaseline,styleVersion:l}}}),{data:c.attributes?{length:c.length,attributes:c.attributes.background||{}}:c,_dataDiff:d,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new Ae({sdf:j.sdf,smoothing:Number.isFinite(j.smoothing)?j.smoothing:o6.smoothing,outlineWidth:ee,outlineColor:ce,iconAtlas:o,iconMapping:a,getPosition:f,getColor:p,getSize:g,getAngle:_,getPixelOffset:y,billboard:V,sizeScale:oe*s,sizeUnits:pe,sizeMinPixels:Ee*s,sizeMaxPixels:ke*s,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getColor:te.getColor,getSize:te.getSize,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ne.getText,getPosition:ne.getPosition,getAngle:ne.getAngle,getColor:ne.getColor,getSize:ne.getSize,getPixelOffset:ne.getPixelOffset,getIconOffsets:{getText:ne.getText,getTextAnchor:ne.getTextAnchor,getAlignmentBaseline:ne.getAlignmentBaseline,styleVersion:l}}}),{data:c,_dataDiff:d,startIndices:t,numInstances:i,getIconOffsets:this.getIconOffsets.bind(this),getIcon:r})]}}return n.layerName="TextLayer",n.defaultProps=uve,n})();const c6="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",hve={lightSources:{}};function XP({color:n=[0,0,0],intensity:e=1}={}){return n.map(t=>t*e/255)}const KP={name:"lights",vs:c6,fs:c6,getUniforms:function u6(n=hve){if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function({ambientLight:n,pointLights:e=[],directionalLights:t=[]}){const i={};return i["lighting_uAmbientLight.color"]=n?XP(n):[0,0,0],e.forEach((r,s)=>{i[`lighting_uPointLight[${s}].color`]=XP(r),i[`lighting_uPointLight[${s}].position`]=r.position,i[`lighting_uPointLight[${s}].attenuation`]=r.attenuation||[1,0,0]}),i.lighting_uPointLightCount=e.length,t.forEach((r,s)=>{i[`lighting_uDirectionalLight[${s}].color`]=XP(r),i[`lighting_uDirectionalLight[${s}].direction`]=r.direction}),i.lighting_uDirectionalLightCount=t.length,i}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return u6({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},pve={};const mve={name:"phong-lighting",dependencies:[KP],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=pve){if(!("material"in n))return{};const{material:e}=n;return e?function(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},ZP=Math.PI/180,tx=new Float32Array(16),f6=new Float32Array(12);function p6(n,e,t){const i=e[0]*ZP,r=e[1]*ZP,s=e[2]*ZP,o=Math.sin(s),a=Math.sin(i),l=Math.sin(r),c=Math.cos(s),d=Math.cos(i),f=Math.cos(r),p=t[0],g=t[1],_=t[2];n[0]=p*f*d,n[1]=p*l*d,n[2]=p*-a,n[3]=g*(-l*c+f*a*o),n[4]=g*(f*c+l*a*o),n[5]=g*d*o,n[6]=_*(l*o+f*a*c),n[7]=_*(-f*o+l*a*c),n[8]=_*d*c}function g6(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const m6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,l=Array.isArray(a),c=l&&16===a.length,d=Array.isArray(s),f=Array.isArray(r),p=Array.isArray(o),g=c||!l&&Boolean(a(i[0]));n.constant=g?c:f&&d&&p;const _=n.value;if(n.constant){let y;g?(tx.set(a),y=g6(tx)):(y=f6,p6(y,r,s),y.set(o,9)),n.value=new Float32Array(y)}else{let y=e*n.size;const{iterable:v,objectInfo:C}=_S(i,e,t);for(const w of v){let M;C.index++,g?(tx.set(c?a:a(w,C)),M=g6(tx)):(M=f6,p6(M,f?r:r(w,C),d?s:s(w,C)),M.set(p?o:o(w,C),9)),_[y++]=M[0],_[y++]=M[1],_[y++]=M[2],_[y++]=M[3],_[y++]=M[4],_[y++]=M[5],_[y++]=M[6],_[y++]=M[7],_[y++]=M[8],_[y++]=M[9],_[y++]=M[10],_[y++]=M[11]}}}};function _6(n,e){return e===Wn.CARTESIAN||e===Wn.METER_OFFSETS||e===Wn.DEFAULT&&!n.isGeospatial}function y6(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Nn.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function vve(n,e){if(n.attributes)return y6(n.attributes,e),n instanceof ch?n:new ch(n);if(n.positions||n.POSITION)return y6(n,e),new ch({attributes:n});throw Error("Invalid mesh")}const bve={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};let Cve=(()=>{class n extends yb{getShaders(){const t=!An(this.context.gl),i={};return iI(this.context.gl,"GLSL_DERIVATIVES")&&(i.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[JS,mve,ex],transpileToGLSL100:t,defines:i})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:m6}),this.setState({emptyTexture:new ea(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(){super.finalizeState(),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;const{viewport:i}=this.context,{sizeScale:r,coordinateSystem:s,_instanced:o}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:r,composeModelMatrix:!o||_6(i,s),flatShading:!this.state.hasNormals}).draw()}getModel(t){const i=new ym(this.context.gl,Lt(K({},this.getShaders()),{id:this.props.id,geometry:vve(t,this.props._useMeshColors),isInstanced:!0})),{texture:r}=this.props,{emptyTexture:s}=this.state;return i.setUniforms({sampler:r||s,hasTexture:Boolean(r)}),i}setTexture(t){const{emptyTexture:i,model:r}=this.state;null==r||r.setUniforms({sampler:t||i,hasTexture:Boolean(t)})}}return n.layerName="SimpleMeshLayer",n.defaultProps=bve,n})();const v6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[KP]};class Am{constructor(e={}){const{id:t}=e;this.id=t||Qo(this.constructor.name),this.display=!0,this.position=new Js,this.rotation=new Js,this.scale=new Js(1,1,1),this.matrix=new Ht,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return et(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return et(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return et(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e,t=!0){t?this.matrix.copy(e):this.matrix=e}setMatrixComponents({position:e,rotation:t,scale:i,update:r=!0}){return e&&this.setPosition(e),t&&this.setRotation(t),i&&this.setScale(i),r&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(e={}){const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){et(e),t=t||this.matrix;const i=new Ht(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class xb extends Am{constructor(e={}){e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;gt.assert(t.every(i=>i instanceof Am),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(...e){for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e,{worldMatrix:t=new Ht}={}){const i=new Ht(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof xb?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}function b6(){var n=new ta(4);return ta!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function C6(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function w6(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],d=t[3];return n[0]=i*d+o*a+r*c-s*l,n[1]=r*d+o*l+s*a-i*c,n[2]=s*d+o*c+i*l-r*a,n[3]=o*d-i*a-r*l-s*c,n}var S6=K4,Nve=function(){var n=$j(),e=Gj(1,0,0),t=Gj(0,1,0);return function(i,r,s){var o=Wj(r,s);return o<-.999999?(gS(n,e,r),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&gS(n,t,r),function(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),C6(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(gS(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();b6(),b6(),function(){var n=new ta(9);ta!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Lve=[0,0,0,1],Vve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function T6(n){if(!n._animation){const e=zve[n.componentType],t=Vve[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=t)a.push(Array.from(o.slice(l,l+t)));n._animation=a}}return n._animation}const Uve=new Ht,QP=new class extends sI{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}}(this,e),this.check()}identity(){return function(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return C6(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Rs(e)}get y(){return this[1]}set y(e){this[1]=Rs(e)}get z(){return this[2]}set z(e){this[2]=Rs(e)}get w(){return this[3]}set w(e){this[3]=Rs(e)}len(){return function(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return Nve(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return function(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return Yu(!t),w6(this,this,e),this.check()}multiplyLeft(e,t){return Yu(!t),w6(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=i*l+o*a,n[1]=r*l+s*a,n[2]=s*l-r*a,n[3]=o*l-i*a}(this,this,e),this.check()}rotateY(e){return function(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=i*l-s*a,n[1]=r*l+o*a,n[2]=s*l+i*a,n[3]=o*l-r*a}(this,this,e),this.check()}rotateZ(e){return function(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=i*l+r*a,n[1]=r*l-i*a,n[2]=s*l+o*a,n[3]=o*l-s*a}(this,this,e),this.check()}scale(e){return S6(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=Lve,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function(n,e,t,i){var p,g,_,y,v,r=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],d=t[2],f=t[3];(g=r*l+s*c+o*d+a*f)<0&&(g=-g,l=-l,c=-c,d=-d,f=-f),1-g>Gc?(p=Math.acos(g),_=Math.sin(p),y=Math.sin((1-i)*p)/_,v=Math.sin(i*p)/_):(y=1-i,v=i),n[0]=y*r+v*l,n[1]=y*s+v*c,n[2]=y*o+v*d,n[3]=y*a+v*f}(this,e,t,i),this.check()}transformVector4(e,t=e){return function(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=t[3],d=c*i+a*s-l*r,f=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;n[0]=d*c+g*-o+f*-l-p*-a,n[1]=f*c+g*-a+p*-o-d*-l,n[2]=p*c+g*-l+d*-a-f*-o,n[3]=e[3]}(t,e,this),pS(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}};class qve{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:r,target:s,path:o})=>{(function(n,{input:e,interpolation:t,output:i},r,s){const a=n%e[e.length-1],l=e.findIndex(p=>p>=a),c=Math.max(0,l-1);if(!Array.isArray(r[s]))switch(s){case"translation":r[s]=[0,0,0];break;case"rotation":r[s]=[0,0,0,1];break;case"scale":r[s]=[1,1,1];break;default:gt.warn(`Bad animation path ${s}`)()}et(r[s].length===i[c].length);const d=e[c],f=e[l];switch(t){case"STEP":!function(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(r,s,i[c]);break;case"LINEAR":f>d&&function(n,e,t,i,r){if("rotation"===e){QP.slerp({start:t,target:i,ratio:r});for(let s=0;s<QP.length;s++)n[e][s]=QP[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(r,s,i[c],i[l],(a-d)/(f-d));break;case"CUBICSPLINE":f>d&&function(n,e,{p0:t,outTangent0:i,inTangent1:r,p1:s,tDiff:o,ratio:a}){for(let l=0;l<n[e].length;l++){const c=i[l]*o,d=r[l]*o;n[e][l]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*t[l]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*c+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[l]+(Math.pow(a,3)-Math.pow(a,2))*d}}(r,s,{p0:i[3*c+1],outTangent0:i[3*c+2],inTangent1:i[3*l+0],p1:i[3*l+1],tDiff:f-d,ratio:(a-d)/(f-d)});break;default:gt.warn(`Interpolation ${t} not supported`)()}})(i,r,s,o),function(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=Uve.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class Yve{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||`Animation-${i}`,s=t.samplers.map(({input:a,interpolation:l="LINEAR",output:c})=>({input:T6(e.accessors[a]),interpolation:l,output:T6(e.accessors[c])})),o=t.channels.map(({sampler:a,target:l})=>({sampler:s[a],target:e.nodes[l.node],path:l.path}));return new qve({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class Xve extends Am{constructor(e,t={}){super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof ym?(this.model=e,this._setModelNodeProps(t)):this.model=new ym(e,t),this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(...e){return this.model.draw(...e)}setUniforms(...e){return this.model.setUniforms(...e),this}setAttributes(...e){return this.model.setAttributes(...e),this}updateModuleSettings(...e){return this.model.updateModuleSettings(...e),this}_setModelNodeProps(e){this.model.setProps(e)}}class Kve{constructor(e,{attributes:t,material:i,pbrDebug:r,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},iI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),r&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(t.NORMAL,"HAS_NORMALS"),this.defineIfPresent(t.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(t.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(r,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t,i=null){const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new ea(this.gl,K({id:e.name||e.id,parameters:K(K({},e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[t]=l,this.defineIfPresent(i,i),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(gt.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function A6(n,e){return An(n)?`#version 300 es\n${e}`:e}const ebe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},tbe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class nbe{constructor(e,t={}){this.gl=e,this.options=Object.assign({},tbe,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new Yve(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new xb({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new xb({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Ht).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new xb({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){gt.warn("getVertexCount() not found")()}createPrimitive(e,t,i){return function(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new Kve(n,e);gt.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(d=>d.buffer));const c=new Xve(n,Object.assign({id:t,drawMode:i,vertexCount:r,modules:[v6],defines:a.defines,parameters:a.parameters,vs:A6(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:A6(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},o));return c.setProps({attributes:s}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:e.name||`${i.name||i.id}-primitive-${t}`,drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),gt.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new Si(this.gl,{id:`from-${i.id}`,data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new Jo({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:ebe[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function D6(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function Da(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function O6(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error(`'baseUri' must be provided to resolve relative url ${n}`);return i.substr(0,i.lastIndexOf("/")+1)+n}function I6(n,e,t){const i=n.bufferViews[t];Da(i);const s=e[i.buffer];return Da(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}const P6={name:"Draco",id:"draco",module:"draco",version:"3.0.12",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class Dm{constructor(e,t){Jt(this,"fields",void 0),Jt(this,"metadata",void 0),function(n,e){if(!n)throw new Error("loader assertion failed.")}(Array.isArray(e)),function(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new Dm(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Dm(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof Dm){const o=e;t=o.fields,i=R6(R6(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new Dm(s,i)}}function R6(n,e){return new Map([...n||new Map,...e||new Map])}let or,k6,F6,N6,L6,B6,V6,z6;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(or||(or={}));class JP{static isNull(e){return e&&e.typeId===or.Null}static isInt(e){return e&&e.typeId===or.Int}static isFloat(e){return e&&e.typeId===or.Float}static isBinary(e){return e&&e.typeId===or.Binary}static isUtf8(e){return e&&e.typeId===or.Utf8}static isBool(e){return e&&e.typeId===or.Bool}static isDecimal(e){return e&&e.typeId===or.Decimal}static isDate(e){return e&&e.typeId===or.Date}static isTime(e){return e&&e.typeId===or.Time}static isTimestamp(e){return e&&e.typeId===or.Timestamp}static isInterval(e){return e&&e.typeId===or.Interval}static isList(e){return e&&e.typeId===or.List}static isStruct(e){return e&&e.typeId===or.Struct}static isUnion(e){return e&&e.typeId===or.Union}static isFixedSizeBinary(e){return e&&e.typeId===or.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===or.FixedSizeList}static isMap(e){return e&&e.typeId===or.Map}static isDictionary(e){return e&&e.typeId===or.Dictionary}get typeId(){return or.NONE}compareTo(e){return this===e}}Symbol,Symbol,k6=Symbol.toStringTag;class Om extends JP{constructor(e,t){super(),Jt(this,"isSigned",void 0),Jt(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return or.Int}get[k6](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class hbe extends Om{constructor(){super(!0,8)}}class fbe extends Om{constructor(){super(!0,16)}}class pbe extends Om{constructor(){super(!0,32)}}class gbe extends Om{constructor(){super(!1,8)}}class mbe extends Om{constructor(){super(!1,16)}}class _be extends Om{constructor(){super(!1,32)}}F6=Symbol.toStringTag;class U6 extends JP{constructor(e){super(),Jt(this,"precision",void 0),this.precision=e}get typeId(){return or.Float}get[F6](){return"Float"}toString(){return`Float${this.precision}`}}class ybe extends U6{constructor(){super(32)}}class vbe extends U6{constructor(){super(64)}}Symbol,Symbol,N6=Symbol.toStringTag,L6=Symbol.toStringTag,B6=Symbol.toStringTag,V6=Symbol.toStringTag,z6=Symbol.toStringTag;class bbe extends JP{constructor(e,t){super(),Jt(this,"listSize",void 0),Jt(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return or.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[z6](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}class ix{constructor(e,t,i=!1,r=new Map){Jt(this,"name",void 0),Jt(this,"type",void 0),Jt(this,"nullable",void 0),Jt(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new ix(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${this.metadata}`:""}`}}function j6(n,e,t){const i=t?H6(t.metadata):void 0,r=function(n){switch(n.constructor){case Int8Array:return new hbe;case Uint8Array:return new gbe;case Int16Array:return new fbe;case Uint16Array:return new mbe;case Int32Array:return new pbe;case Uint32Array:return new _be;case Float32Array:return new ybe;case Float64Array:return new vbe;default:throw new Error("array type not supported")}}(e.value);return new ix(n,new bbe(e.size,new ix("value",r)),!1,i)}function H6(n){const e=new Map;for(const t in n)e.set(`${t}.string`,JSON.stringify(n[t]));return e}const $6={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Sbe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Mbe{constructor(e){Jt(this,"draco",void 0),Jt(this,"decoder",void 0),Jt(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const p=`DRACO decompression failed: ${o.error_msg()}`;throw new Error(p)}const a=this._getDracoLoaderData(s,r,t),l=this._getMeshData(s,a,t),c=function(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const d=a[c],f=a[c+1],p=a[c+2];e=d<e?d:e,t=f<t?f:t,i=p<i?p:i,r=d>r?d:r,s=f>s?f:s,o=p>o?p:o}return[[e,t,i],[r,s,o]]}(l.attributes),d=function(n,e,t){const i=H6(e.metadata),r=[],s=function(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const l=j6(o,n[o],s[o]);r.push(l)}if(t){const o=j6("indices",t);r.push(o)}return new Dm(r,i)}(l.attributes,a,l.indices);return Lt(K({loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:c}},l),{schema:d})}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const l=this._getOctahedronTransform(s,t);l&&(i[s.unique_id()].octahedron_transform=l)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:l}=this._getAttributeValues(t,s);r[o]={value:a,size:l,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=Sbe[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,l=function(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let c;const d=this.draco._malloc(a);try{const f=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,f,l,a,d),c=new i(this.draco.HEAPF32.buffer,d,o).slice()}finally{this.draco._free(d)}return{value:c,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in $6)if(this.draco[o]===r)return $6[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:`CUSTOM_ATTRIBUTE_${i}`}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}var rx=Be(125);const iR={};function rR(n){return sR.apply(this,arguments)}function sR(){return(sR=mn(function*(n,e=null,t={}){return e&&(n=Ibe(n,e,t)),iR[n]=iR[n]||Pbe(n),yield iR[n]})).apply(this,arguments)}function Ibe(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:iP?t.CDN?(qc(t.CDN.startsWith("http")),`${t.CDN}/${e}@3.0.12/dist/libs/${n}`):rP?`../src/libs/${n}`:`modules/${e}/src/libs/${n}`:`modules/${e}/dist/libs/${n}`}function Pbe(n){return oR.apply(this,arguments)}function oR(){return(oR=mn(function*(n){return n.endsWith("wasm")?yield(yield fetch(n)).arrayBuffer():iP?rP?importScripts(n):Rbe(yield(yield fetch(n)).text(),n):rx.requireFromFile&&(yield rx.requireFromFile(n))})).apply(this,arguments)}function Rbe(n,e){if(!iP)return rx.requireFromString&&rx.requireFromString(n,e);if(rP)return eval.call(Lpe,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch(i){t.text=n}return document.body.appendChild(t),null}const kbe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.js",Fbe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_wasm_wrapper.js",Nbe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.wasm";let Mb;function Bbe(n){return aR.apply(this,arguments)}function aR(){return(aR=mn(function*(n){const e=n.modules||{};return Mb=e.draco3d?Mb||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):Mb||Vbe(n),yield Mb})).apply(this,arguments)}function Vbe(n){return cR.apply(this,arguments)}function cR(){return(cR=mn(function*(n){let e,t;switch(n.draco&&n.draco.decoderType){case"js":e=yield rR(kbe,"draco",n);break;case"wasm":default:[e,t]=yield Promise.all([yield rR(Fbe,"draco",n),yield rR(Nbe,"draco",n)])}return e=e||globalThis.DracoDecoderModule,yield zbe(e,t)})).apply(this,arguments)}function zbe(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(Lt(K({},t),{onModuleLoaded:r=>i({draco:r})}))})}const dR=Lt(K({},P6),{parse:function(n,e){return hR.apply(this,arguments)}});function hR(){return(hR=mn(function*(n,e){const{draco:t}=yield Bbe(e),i=new Mbe(t);try{return i.parseSync(n,null==e?void 0:e.draco)}finally{i.destroy()}})).apply(this,arguments)}function Ab(n,e){return Jf(n>=0),Jf(e>0),n+(e-1)&~(e-1)}function Hbe(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+Ab(i.byteLength,4)}const G6=["SCALAR","VEC2","VEC3","VEC4"],$be=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Gbe=new Map($be),Wbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qbe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ybe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function W6(n){return G6[n-1]||G6[0]}function q6(n){const e=Gbe.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function Y6(n,e){const t=Ybe[n.componentType],i=Wbe[n.type],s=n.count*i,o=n.count*i*qbe[n.componentType];return Da(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const Xbe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class dh{constructor(e){Jt(this,"gltf",void 0),Jt(this,"sourceBuffers",void 0),Jt(this,"byteLength",void 0),this.gltf=e||{json:K({},Xbe),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error(`glTF file error: Could not find ${e}[${t}]`);return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Da(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=Y6(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Da(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Da(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const l=this._addIndices(i);a.primitives[0].indices=l}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=zP(e),r=t||(null==i?void 0:i.mimeType),o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Da(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=Ab(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:W6(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:q6(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Hbe(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const X6="KHR_binary_glTF",Db="KHR_draco_mesh_compression",Im="KHR_lights_punctual",ox="KHR_materials_unlit",ax="KHR_techniques_webgl";function Qbe(n){const e={};for(const t in n){const i=n[t];if("indices"!==t){const r=K6(i);e[t]=r}}return e}function K6(n){const{buffer:e,size:t,count:i}=function(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:W6(t),componentType:q6(e)}}function t0e(n,e,t){return fR.apply(this,arguments)}function fR(){return(fR=mn(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new dh(n),s=[];for(const o of o0e(r))r.getObjectExtension(o,Db)&&s.push(i0e(r,o,e,t));yield Promise.all(s),r.removeExtension(Db)})).apply(this,arguments)}function n0e(n,e={}){const t=new dh(n);for(const i of t.json.meshes||[])r0e(i),t.addRequiredExtension(Db)}function i0e(n,e,t,i){return pR.apply(this,arguments)}function pR(){return(pR=mn(function*(n,e,t,i){const r=n.getObjectExtension(e,Db);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=H5(s.buffer,s.byteOffset),{parse:a}=i,l=K({},t);delete l["3d-tiles"];const c=yield a(o,dR,l,i),d=Qbe(c.attributes);for(const[f,p]of Object.entries(d))if(f in e.attributes){const _=n.getAccessor(e.attributes[f]);null!=_&&_.min&&null!=_&&_.max&&(p.min=_.min,p.max=_.max)}e.attributes=d,c.indices&&(e.indices=K6(c.indices)),s0e(e)})).apply(this,arguments)}function r0e(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(o);return{primitives:[{attributes:l,mode:t,extensions:{[Db]:{bufferView:c,attributes:l}}}]}}function s0e(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*o0e(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}function a0e(n){return gR.apply(this,arguments)}function gR(){return(gR=mn(function*(n){const e=new dh(n),{json:t}=e;e.removeExtension(ox);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,ox)})).apply(this,arguments)}function l0e(n){const e=new dh(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,ox,{}),e.addExtension(ox))}function c0e(n){return mR.apply(this,arguments)}function mR(){return(mR=mn(function*(n){const e=new dh(n),{json:t}=e,i=e.getExtension(Im);i&&(e.json.lights=i.lights,e.removeExtension(Im));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,Im);s&&(r.light=s.light),e.removeObjectExtension(r,Im)}})).apply(this,arguments)}function u0e(n){return _R.apply(this,arguments)}function _R(){return(_R=mn(function*(n){const e=new dh(n),{json:t}=e;if(t.lights){const i=e.addExtension(Im);Da(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Im,i);delete e.json.lights}})).apply(this,arguments)}function d0e(n){return yR.apply(this,arguments)}function yR(){return(yR=mn(function*(n){const e=new dh(n),{json:t}=e,i=e.getExtension(ax);if(i){const r=f0e(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,ax);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=p0e(s.technique,e)),e.removeObjectExtension(s,ax)}e.removeExtension(ax)}})).apply(this,arguments)}function h0e(n,e){return vR.apply(this,arguments)}function vR(){return(vR=mn(function*(n,e){})).apply(this,arguments)}function f0e(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}function p0e(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const Z6={KHR_draco_mesh_compression:yt,KHR_materials_unlit:L,KHR_lights_punctual:Tt,KHR_techniques_webgl:At};function g0e(n){return bR.apply(this,arguments)}function bR(){return(bR=mn(function*(n,e={},t){for(const r in Z6){var i;const s=(null==e||null===(i=e.gltf)||void 0===i?void 0:i.excludeExtensions)||{};r in s&&!s[r]||(yield Z6[r].decode(n,e,t))}})).apply(this,arguments)}const Q6={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},_0e={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class y0e{constructor(e){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${i.asset.version}`)}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function(n){const e=new dh(n),{json:t}=e;for(const i of t.images||[]){const r=e.removeObjectExtension(i,X6);r&&Object.assign(i,r)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(X6)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in Q6)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in Q6)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn(`gltf v1: json doesn't contain attribute ${t}`),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=_0e[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error(`gltf v1: failed to resolve ${t} with id ${e}`);return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const t of e.materials){t.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const i=t.values&&t.values.tex,r=e.textures.findIndex(s=>s.id===i);-1!==r&&(t.pbrMetallicRoughness.baseColorTexture={index:r})}}}function v0e(n,e={}){return(new y0e).normalize(n,e)}const b0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C0e={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ml={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},w0e={magFilter:ml.TEXTURE_MAG_FILTER,minFilter:ml.TEXTURE_MIN_FILTER,wrapS:ml.TEXTURE_WRAP_S,wrapT:ml.TEXTURE_WRAP_T},E0e={[ml.TEXTURE_MAG_FILTER]:ml.LINEAR,[ml.TEXTURE_MIN_FILTER]:ml.NEAREST_MIPMAP_LINEAR,[ml.TEXTURE_WRAP_S]:ml.REPEAT,[ml.TEXTURE_WRAP_]:ml.REPEAT};class M0e{postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Da(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn(`glTF file error: Could not find ${e}[${t}]`),i}_resolveScene(e,t){return e.id=e.id||`scene-${t}`,e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||`node-${t}`,e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||`skin-${t}`,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||`mesh-${t}`,e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i=K({},i)).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||`material-${t}`,e.normalTexture&&(e.normalTexture=K({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=K({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=K({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=K({},e.pbrMetallicRoughness);const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture=K({},i.baseColorTexture),i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture=K({},i.metallicRoughnessTexture),i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||`accessor-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function(n){return C0e[n]}(e.componentType),e.components=function(n){return b0e[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=Y6(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset,a=i.arrayBuffer.slice(o,o+s);e.value=new r(a)}return e}_resolveTexture(e,t){return e.id=e.id||`texture-${t}`,e.sampler="sampler"in e?this.getSampler(e.sampler):E0e,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||`sampler-${t}`,e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return w0e[e]}_resolveImage(e,t){e.id=e.id||`image-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){e.id=e.id||`bufferView-${t}`;const i=e.buffer;e.buffer=this.buffers[i];let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),e.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),e}_resolveCamera(e,t){return e.id=e.id||`camera-${t}`,e}}function T0e(n,e){return(new M0e).postProcess(n,e)}const J6=1735152710,Pm=!0;function wR(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),Ab(i,4)}function ER(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),Ab(i,4)}function V0e(n,e){return SR.apply(this,arguments)}function SR(){return(SR=mn(function*(n,e,t=0,i,r){var s,o,a,l;z0e(n,e,t,i),v0e(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize});const c=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield U0e(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const f=j0e(n,i,r);c.push(f)}const d=g0e(n,i,r);return c.push(d),yield Promise.all(c),null!=i&&null!==(l=i.gltf)&&void 0!==l&&l.postProcess?T0e(n,i):n})).apply(this,arguments)}function z0e(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function(n,e=0,t={}){const i=new DataView(n),{magic:r=J6}=t,s=i.getUint32(e,!1);return s===r||s===J6}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function(n){try{return JSON.parse(n)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?D6(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?D6(n,0,e):""}(n)}"`)}}(e);else if(e instanceof ArrayBuffer){const o={};t=function(n,e,t=0,i={}){const r=new DataView(e),s=function(n,e=0){return`${String.fromCharCode(n.getUint8(e+0))}${String.fromCharCode(n.getUint8(e+1))}${String.fromCharCode(n.getUint8(e+2))}${String.fromCharCode(n.getUint8(e+3))}`}(r,t+0),o=r.getUint32(t+4,Pm),a=r.getUint32(t+8,Pm);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=12,n.version){case 1:return function(n,e,t){Jf(n.header.byteLength>20);const i=e.getUint32(t+0,Pm),r=e.getUint32(t+4,Pm);return t+=8,Jf(0===r),wR(n,e,t,i),(t+=i)+ER(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function(n,e,t,i){return Jf(n.header.byteLength>20),function(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,Pm),s=e.getUint32(t+4,Pm);switch(t+=8,s){case 1313821514:wR(n,e,t,r);break;case 5130562:ER(n,e,t,r);break;case 0:i.strict||wR(n,e,t,r);break;case 1:i.strict||ER(n,e,t,r)}t+=Ab(r,4)}}(n,e,t,{}),t+n.header.byteLength}(n,r,t);default:throw new Error(`Invalid GLB version ${n.version}. Only supports v1 and v2.`)}}(o,e,t,i.glb),Da("glTF"===o.type,`Invalid GLB magic string ${o.type}`),n._glb=o,n.json=o.json}else Da(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function U0e(n,e,t){return xR.apply(this,arguments)}function xR(){return(xR=mn(function*(n,e,t){for(let s=0;s<n.json.buffers.length;++s){const o=n.json.buffers[s];if(o.uri){var i,r;const{fetch:a}=t;Da(a);const l=O6(o.uri,e),c=yield null==t||null===(i=t.fetch)||void 0===i?void 0:i.call(t,l),d=yield null==c||null===(r=c.arrayBuffer)||void 0===r?void 0:r.call(c);n.buffers[s]={arrayBuffer:d,byteOffset:0,byteLength:d.byteLength},delete o.uri}}})).apply(this,arguments)}function j0e(n,e,t){return MR.apply(this,arguments)}function MR(){return(MR=mn(function*(n,e,t){const i=n.json.images||[],r=[];for(let s=0;s<i.length;++s)r.push(H0e(n,i[s],s,e,t));return yield Promise.all(r)})).apply(this,arguments)}function H0e(n,e,t,i,r){return TR.apply(this,arguments)}function TR(){return(TR=mn(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri){const c=O6(e.uri,i);a=yield(yield s(c)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const c=I6(n.json,n.buffers,e.bufferView);a=H5(c.buffer,c.byteOffset,c.byteLength)}Da(a,"glTF image has no data");const l=yield o(a,jP,{},r);n.images[t]=l})).apply(this,arguments)}const Rm={name:"glTF",id:"gltf",module:"gltf",version:"3.0.12",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return AR.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function AR(){return(AR=mn(function*(n,e={},t){(e=K(K({},Rm.options),e)).gltf=K(K({},Rm.options.gltf),e.gltf);const{byteOffset:i=0}=e;return yield V0e({},n,i,e,t)})).apply(this,arguments)}function DR(){return(DR=mn(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield W0e(()=>e.some(t=>!t.loaded))})).apply(this,arguments)}function W0e(n){return OR.apply(this,arguments)}function OR(){return(OR=mn(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))})).apply(this,arguments)}const e8=[255,255,255,255],X0e={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:e8},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Rm]};let K0e=(()=>{class n extends yb{getShaders(){const t=[JS,ex];return"pbr"===this.props._lighting&&t.push(v6),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:e8,transition:!0},instanceModelMatrix:m6})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;i.scenegraph!==r.scenegraph?this._updateScenegraph(i):i._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,i._animations)}finalizeState(){super.finalizeState(),this._deleteScenegraph()}_updateScenegraph(t){const{gl:i}=this.context;let r=null;if(t.scenegraph instanceof Am)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const l=t.scenegraph,c=function(n,e,t){const i=new nbe(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(i,l,this._getModelOptions());r=K({gltf:l},c),function(n){return DR.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else t.scenegraph&&(Nn.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);const s={layer:this,gl:i},o=t.getScene(r,s),a=t.getAnimator(r,s);o instanceof Am?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,a,t._animations),this.setState({scenegraph:o,animator:a})):null!==o&&Nn.warn("invalid scenegraph:",o)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const i=this.getAttributeManager().getAttributes();t.traverse(r=>{this._setModelAttributes(r.model,i)})}}_applyAnimationsProp(t,i,r){if(!t||!i||!r)return;const s=i.getAnimations();Object.keys(r).sort().forEach(o=>{const a=r[o];if("*"===o)s.forEach(l=>{Object.assign(l,a)});else if(Number.isFinite(Number(o))){const l=Number(o);l>=0&&l<s.length?Object.assign(s[l],a):Nn.warn("animation ".concat(o," not found"))()}else{const l=s.find(({name:c})=>c===o);l?Object.assign(l,a):Nn.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof Am&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let i=null;return t&&(i="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:K({isInstanced:!0,transpileToGLSL100:!An(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(i=>{this._setModelAttributes(i.model,t)})}draw({moduleParameters:t=null,parameters:i={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:s}=this.context,{sizeScale:o,sizeMinPixels:a,sizeMaxPixels:l,opacity:c,coordinateSystem:d}=this.props,f=this.getNumInstances();this.state.scenegraph.traverse((p,{worldMatrix:g})=>{p.model.setInstanceCount(f),p.updateModuleSettings(t),p.draw({parameters:i,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:a,sizeMaxPixels:l,composeModelMatrix:_6(s,d),sceneModelMatrix:g,u_Camera:p.model.getUniforms().project_uCameraPosition}})})}}return n.layerName="ScenegraphLayer",n.defaultProps=X0e,n})();class Z0e extends ch{constructor(e={}){const{id:t=Qo("sphere-geometry")}=e,{indices:i,attributes:r}=function(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const o=Math.PI-0,c=2*Math.PI-0,d=(e+1)*(t+1);if("number"==typeof i){const C=i;i=(w,M,k,V,j)=>C}const f=new Float32Array(3*d),p=new Float32Array(3*d),g=new Float32Array(2*d),y=new(d>65535?Uint32Array:Uint16Array)(e*t*6);for(let C=0;C<=e;C++)for(let w=0;w<=t;w++){const M=w/t,k=C/e,V=w+C*(t+1),j=2*V,ee=3*V,ce=c*M,oe=o*k,pe=Math.sin(ce),Ee=Math.cos(ce),ke=Math.sin(oe),ne=Ee*ke,Ae=Math.cos(oe),Q=pe*ke,ze=i(ne,Ae,Q,M,k);f[ee+0]=ze*ne,f[ee+1]=ze*Ae,f[ee+2]=ze*Q,p[ee+0]=ne,p[ee+1]=Ae,p[ee+2]=Q,g[j+0]=M,g[j+1]=1-k}const v=t+1;for(let C=0;C<t;C++)for(let w=0;w<e;w++){const M=6*(C*e+w);y[M+0]=w*v+C,y[M+1]=w*v+C+1,y[M+2]=(w+1)*v+C,y[M+3]=(w+1)*v+C,y[M+4]=w*v+C+1,y[M+5]=(w+1)*v+C+1}return{indices:{size:1,value:y},attributes:{POSITION:{size:3,value:f},NORMAL:{size:3,value:p},TEXCOORD_0:{size:2,value:g}}}}(e);super(Lt(K({},e),{id:t,indices:i,attributes:K(K({},r),e.attributes)}))}}const J0e={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class t8 extends ch{constructor(e={}){const{id:t=Qo("truncated-code-geometry")}=e,{indices:i,attributes:r}=function(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:l=!1}=n,c=(a?2:0)+(l?2:0),d=(r+1)*(s+1+c),f=Math.atan2(e-t,i),p=Math.sin,g=Math.cos,_=Math.PI,y=g(f),v=p(f),C=a?-2:0,w=s+(l?2:0),M=r+1,k=new Uint16Array(r*(s+c)*6),V=J0e[o],j=new Float32Array(3*d),ee=new Float32Array(3*d),ce=new Float32Array(2*d);let oe=0,pe=0;for(let Ee=C;Ee<=w;Ee++){let ne,ke=Ee/s,te=i*ke;Ee<0?(te=0,ke=1,ne=e):Ee>s?(te=i,ke=1,ne=t):ne=e+Ee/s*(t-e),(-2===Ee||Ee===s+2)&&(ne=0,ke=0),te-=i/2;for(let Ae=0;Ae<M;Ae++){const Q=p(Ae*_*2/r),ze=g(Ae*_*2/r);j[oe+V[0]]=Q*ne,j[oe+V[1]]=te,j[oe+V[2]]=ze*ne,ee[oe+V[0]]=Ee<0||Ee>s?0:Q*y,ee[oe+V[1]]=Ee<0?-1:Ee>s?1:v,ee[oe+V[2]]=Ee<0||Ee>s?0:ze*y,ce[pe+0]=Ae/r,ce[pe+1]=ke,pe+=2,oe+=3}}for(let Ee=0;Ee<s+c;Ee++)for(let ke=0;ke<r;ke++){const te=6*(Ee*r+ke);k[te+0]=M*(Ee+0)+0+ke,k[te+1]=M*(Ee+0)+1+ke,k[te+2]=M*(Ee+1)+1+ke,k[te+3]=M*(Ee+0)+0+ke,k[te+4]=M*(Ee+1)+1+ke,k[te+5]=M*(Ee+1)+0+ke}return{indices:k,attributes:{POSITION:{size:3,value:j},NORMAL:{size:3,value:ee},TEXCOORD_0:{size:2,value:ce}}}}(e);super(Lt(K({},e),{id:t,indices:i,attributes:K(K({},r),e.attributes)}))}}class tCe extends t8{constructor(e={}){const{id:t=Qo("cone-geometry"),radius:i=1,cap:r=!0}=e;super(Lt(K({},e),{id:t,topRadius:0,topCap:Boolean(r),bottomCap:Boolean(r),bottomRadius:i}))}}class nCe extends t8{constructor(e={}){const{id:t=Qo("cylinder-geometry"),radius:i=1}=e;super(Lt(K({},e),{id:t,bottomRadius:i,topRadius:i}))}}const iCe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),rCe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),sCe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),oCe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),aCe={POSITION:{size:3,value:new Float32Array(rCe)},NORMAL:{size:3,value:new Float32Array(sCe)},TEXCOORD_0:{size:2,value:new Float32Array(oCe)}};class lCe extends ch{constructor(e={}){const{id:t=Qo("cube-geometry")}=e;super(Lt(K({},e),{id:t,indices:{size:1,value:new Uint16Array(iCe)},attributes:K(K({},aCe),e.attributes)}))}}class Jc{constructor(e=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e=new S){const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t=new S){const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t=new Jc){const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],l=i[2],c=i[3],d=i[4],f=i[5],p=i[6],g=i[7],_=i[8],y=r[0],v=r[1],C=r[2],w=r[3],M=r[4],k=r[5],V=r[6],j=r[7],ee=r[8];return s[0]=o*y+a*w+l*V,s[1]=o*v+a*M+l*j,s[2]=o*C+a*k+l*ee,s[3]=c*y+d*w+f*V,s[4]=c*v+d*M+f*j,s[5]=c*C+d*k+f*ee,s[6]=p*y+g*w+_*V,s[7]=p*v+g*M+_*j,s[8]=p*C+g*k+_*ee,t}scale(e,t=new Jc){const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t=new S){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let l=3;const c=l;let d,p;do{if(o=c-l,0===s[o+4*o])for(a=o+1;a<c;a++)if(0!==s[o+4*a]){d=4;do{p=4-d,s[p+4*o]+=s[p+4*a]}while(--d);break}if(0!==s[o+4*o])for(a=o+1;a<c;a++){const g=s[o+4*a]/s[o+4*o];d=4;do{p=4-d,s[p+4*a]=p<=o?0:s[p+4*a]-s[p+4*o]*g}while(--d)}}while(--l);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e=new Jc){const r=cCe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const l=a;let c,f;do{if(s=l-a,0===r[s+6*s])for(o=s+1;o<l;o++)if(0!==r[s+6*o]){c=6;do{f=6-c,r[f+6*s]+=r[f+6*o]}while(--c);break}if(0!==r[s+6*s])for(o=s+1;o<l;o++){const p=r[s+6*o]/r[s+6*s];c=6;do{f=6-c,r[f+6*o]=f<=s?0:r[f+6*o]-r[f+6*s]*p}while(--c)}}while(--a);s=2;do{o=s-1;do{const p=r[s+6*o]/r[s+6*s];c=6;do{f=6-c,r[f+6*o]=r[f+6*o]-r[f+6*s]*p}while(--c)}while(o--)}while(--s);s=2;do{const p=1/r[s+6*s];c=6;do{f=6-c,r[f+6*s]=r[f+6*s]*p}while(--c)}while(s--);s=2;do{o=2;do{if(f=r[3+o+6*s],isNaN(f)||f===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(s,o,f)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,l=r+r,c=t*o,d=t*a,f=t*l,p=i*a,g=i*l,_=r*l,y=s*o,v=s*a,C=s*l,w=this.elements;return w[0]=1-(p+_),w[1]=d-C,w[2]=f+v,w[3]=d+C,w[4]=1-(c+_),w[5]=g-y,w[6]=f-v,w[7]=g+y,w[8]=1-(c+p),this}transpose(e=new Jc){const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const cCe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class S{constructor(e=0,t=0,i=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=i}cross(e,t=new S){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*s-l*r,t.y=l*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new S(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new S(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Jc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e=new S){const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t=new S){const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t=new S){return t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i=new S){return i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e=new S){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=uCe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=dCe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t=1e-6){return!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e=1e-6){return!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(n8),n8.almostEquals(e,t)}clone(){return new S(this.x,this.y,this.z)}}S.ZERO=void 0,S.UNIT_X=void 0,S.UNIT_Y=void 0,S.UNIT_Z=void 0,S.ZERO=new S(0,0,0),S.UNIT_X=new S(1,0,0),S.UNIT_Y=new S(0,1,0),S.UNIT_Z=new S(0,0,1);const uCe=new S,dCe=new S,n8=new S;class xi{constructor(e={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new S,this.upperBound=new S,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,i8),c=i8),c.x>o.x&&(o.x=c.x),c.x<s.x&&(s.x=c.x),c.y>o.y&&(o.y=c.y),c.y<s.y&&(s.y=c.y),c.z>o.z&&(o.z=c.z),c.z<s.z&&(s.z=c.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new xi).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,l){const c=this.lowerBound,d=this.upperBound;e.copy(c),t.set(d.x,c.y,c.z),i.set(d.x,d.y,c.z),r.set(c.x,d.y,d.z),s.set(d.x,c.y,d.z),o.set(c.x,d.y,c.z),a.set(c.x,c.y,d.z),l.copy(d)}toLocalFrame(e,t){const i=r8;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];e.pointToLocal(g,g)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=r8;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];e.pointToWorld(g,g)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,l=(this.upperBound.x-i.x)*r,c=(this.lowerBound.y-i.y)*s,d=(this.upperBound.y-i.y)*s,f=(this.lowerBound.z-i.z)*o,p=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(c,d)),Math.min(f,p)),_=Math.min(Math.min(Math.max(a,l),Math.max(c,d)),Math.max(f,p));return!(_<0||g>_)}}const i8=new S,r8=[new S,new S,new S,new S,new S,new S,new S,new S];class Pr{constructor(e=0,t=0,i=0,r=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e=new S){this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=fCe;e.tangents(i,pCe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(Ui(e.length(),2)*Ui(t.length(),2))+e.dot(t),this.normalize()}return this}mult(e,t=new Pr){const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,l=e.y,c=e.z,d=e.w;return t.x=i*d+o*a+r*c-s*l,t.y=r*d+o*l+s*a-i*c,t.z=s*d+o*c+i*l-r*a,t.w=o*d-i*a-r*l-s*c,t}inverse(e=new Pr){const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e=new Pr){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t=new S){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z,c=this.w,d=c*i+a*s-l*r,f=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;return t.x=d*c+g*-o+f*-l-p*-a,t.y=f*c+g*-a+p*-o-d*-l,t.z=p*c+g*-l+d*-a-f*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t="YZX"){let i,r,s;const o=this.x,a=this.y,l=this.z,c=this.w;switch(t){case"YZX":const d=o*a+l*c;if(d>.499&&(i=2*Math.atan2(o,c),r=Math.PI/2,s=0),d<-.499&&(i=-2*Math.atan2(o,c),r=-Math.PI/2,s=0),void 0===i){const f=o*o,g=l*l;i=Math.atan2(2*a*c-2*o*l,1-a*a*2-2*g),r=Math.asin(2*d),s=Math.atan2(2*o*c-2*a*l,1-2*f-2*g)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r="XYZ"){const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(t/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=l*o*a+s*c*d,this.y=s*c*a-l*o*d,this.z=s*o*d+l*c*a,this.w=s*o*a-l*c*d):"YXZ"===r?(this.x=l*o*a+s*c*d,this.y=s*c*a-l*o*d,this.z=s*o*d-l*c*a,this.w=s*o*a+l*c*d):"ZXY"===r?(this.x=l*o*a-s*c*d,this.y=s*c*a+l*o*d,this.z=s*o*d+l*c*a,this.w=s*o*a-l*c*d):"ZYX"===r?(this.x=l*o*a-s*c*d,this.y=s*c*a+l*o*d,this.z=s*o*d-l*c*a,this.w=s*o*a+l*c*d):"YZX"===r?(this.x=l*o*a+s*c*d,this.y=s*c*a+l*o*d,this.z=s*o*d-l*c*a,this.w=s*o*a-l*c*d):"XZY"===r&&(this.x=l*o*a-s*c*d,this.y=s*c*a-l*o*d,this.z=s*o*d+l*c*a,this.w=s*o*a+l*c*d),this}clone(){return new Pr(this.x,this.y,this.z,this.w)}slerp(e,t,i=new Pr){const r=this.x,s=this.y,o=this.z,a=this.w;let p,g,_,y,v,l=e.x,c=e.y,d=e.z,f=e.w;return g=r*l+s*c+o*d+a*f,g<0&&(g=-g,l=-l,c=-c,d=-d,f=-f),1-g>1e-6?(p=Math.acos(g),_=Math.sin(p),y=Math.sin((1-t)*p)/_,v=Math.sin(t*p)/_):(y=1-t,v=t),i.x=y*r+v*l,i.y=y*s+v*c,i.z=y*o+v*d,i.w=y*a+v*f,i}integrate(e,t,i,r=new Pr){const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,d=this.z,f=this.w,p=.5*t;return r.x+=p*(s*f+o*d-a*c),r.y+=p*(o*f+a*l-s*d),r.z+=p*(a*f+s*c-o*l),r.w+=p*(-s*l-o*c-a*d),r}}const fCe=new S,pCe=new S,gCe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let mt=(()=>{class n{constructor(t={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,i){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,i,r,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=gCe,n})();class ei{constructor(e={}){this.position=void 0,this.quaternion=void 0,this.position=new S,this.quaternion=new Pr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return ei.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return ei.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t=new S){return this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r=new S){return i.vsub(e,r),t.conjugate(o8),o8.vmult(r,r),r}static pointToWorldFrame(e,t,i,r=new S){return t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i=new S){return e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r=new S){return t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const o8=new Pr;class np extends mt{constructor(e={}){const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:mt.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new S;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let l=0;l!==a;l++){t[o[l]].vsub(t[o[(l+1)%a]],r),r.normalize();let d=!1;for(let f=0;f!==i.length;f++)if(i[f].almostEquals(r)||i[f].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error("Vertex "+this.faces[e][r]+" not found!");const t=this.faceNormals[e]||new S;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(".faceNormals["+e+"] = Vec3("+t.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let r=0;r<this.faces[e].length;r++)console.warn(".vertices["+this.faces[e][r]+"] = Vec3("+this.vertices[this.faces[e][r]].toString()+")")}}}getFaceNormal(e,t){const i=this.faces[e];np.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new S,o=new S;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,l,c){const d=new S;let f=-1,p=-Number.MAX_VALUE;for(let _=0;_<i.faces.length;_++){d.copy(i.faceNormals[_]),s.vmult(d,d);const y=d.dot(o);y>p&&(p=y,f=_)}const g=[];for(let _=0;_<i.faces[f].length;_++){const y=i.vertices[i.faces[f][_]],v=new S;v.copy(y),s.vmult(v,v),r.vadd(v,v),g.push(v)}f>=0&&this.clipFaceAgainstHull(o,e,t,g,a,l,c)}findSeparatingAxis(e,t,i,r,s,o,a,l){const c=new S,d=new S,f=new S,p=new S,g=new S,_=new S;let y=Number.MAX_VALUE;const v=this;if(v.uniqueAxes)for(let C=0;C!==v.uniqueAxes.length;C++){i.vmult(v.uniqueAxes[C],c);const w=v.testSepAxis(c,e,t,i,r,s);if(!1===w)return!1;w<y&&(y=w,o.copy(c))}else{const C=a?a.length:v.faces.length;for(let w=0;w<C;w++){c.copy(v.faceNormals[a?a[w]:w]),i.vmult(c,c);const k=v.testSepAxis(c,e,t,i,r,s);if(!1===k)return!1;k<y&&(y=k,o.copy(c))}}if(e.uniqueAxes)for(let C=0;C!==e.uniqueAxes.length;C++){s.vmult(e.uniqueAxes[C],d);const w=v.testSepAxis(d,e,t,i,r,s);if(!1===w)return!1;w<y&&(y=w,o.copy(d))}else{const C=l?l.length:e.faces.length;for(let w=0;w<C;w++){d.copy(e.faceNormals[l?l[w]:w]),s.vmult(d,d);const k=v.testSepAxis(d,e,t,i,r,s);if(!1===k)return!1;k<y&&(y=k,o.copy(d))}}for(let C=0;C!==v.uniqueEdges.length;C++){i.vmult(v.uniqueEdges[C],p);for(let w=0;w!==e.uniqueEdges.length;w++)if(s.vmult(e.uniqueEdges[w],g),p.cross(g,_),!_.almostZero()){_.normalize();const M=v.testSepAxis(_,e,t,i,r,s);if(!1===M)return!1;M<y&&(y=M,o.copy(_))}}return r.vsub(t,f),f.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){np.project(this,e,i,r,IR),np.project(t,e,s,o,PR);const l=IR[0],c=IR[1],d=PR[0],f=PR[1];if(l<f||d<c)return!1;const p=l-f,g=d-c;return p<g?p:g}calculateLocalInertia(e,t){const i=new S,r=new S;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const l=new S,c=new S,d=new S,f=new S,p=new S,g=new S,_=new S,y=new S,v=this,w=r,M=[];let k=-1,V=Number.MAX_VALUE;for(let pe=0;pe<v.faces.length;pe++){l.copy(v.faceNormals[pe]),i.vmult(l,l);const Ee=l.dot(e);Ee<V&&(V=Ee,k=pe)}if(k<0)return;const j=v.faces[k];j.connectedFaces=[];for(let pe=0;pe<v.faces.length;pe++)for(let Ee=0;Ee<v.faces[pe].length;Ee++)-1!==j.indexOf(v.faces[pe][Ee])&&pe!==k&&-1===j.connectedFaces.indexOf(pe)&&j.connectedFaces.push(pe);const ee=j.length;for(let pe=0;pe<ee;pe++){const Ee=v.vertices[j[pe]];Ee.vsub(v.vertices[j[(pe+1)%ee]],c),d.copy(c),i.vmult(d,d),t.vadd(d,d),f.copy(this.faceNormals[k]),i.vmult(f,f),t.vadd(f,f),d.cross(f,p),p.negate(p),g.copy(Ee),i.vmult(g,g),t.vadd(g,g);const te=j.connectedFaces[pe];_.copy(this.faceNormals[te]);const ne=this.getPlaneConstantOfFace(te);y.copy(_),i.vmult(y,y);const Ae=ne-y.dot(t);for(this.clipFaceAgainstPlane(w,M,y,Ae);w.length;)w.shift();for(;M.length;)w.push(M.shift())}_.copy(this.faceNormals[k]);const ce=this.getPlaneConstantOfFace(k);y.copy(_),i.vmult(y,y);const oe=ce-y.dot(t);for(let pe=0;pe<w.length;pe++){let Ee=y.dot(w[pe])+oe;if(Ee<=s&&(console.log("clamped: depth="+Ee+" to minDist="+s),Ee=s),Ee<=o){const ke=w[pe];Ee<=1e-6&&a.push({point:ke,normal:y,depth:Ee})}}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],c=e[0];s=i.dot(l)+r;for(let d=0;d<a;d++){if(c=e[d],o=i.dot(c)+r,s<0)if(o<0){const f=new S;f.copy(c),t.push(f)}else{const f=new S;l.lerp(c,s/(s-o),f),t.push(f)}else if(o<0){const f=new S;l.lerp(c,s/(s-o),f),t.push(f),t.push(c)}l=c,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new S);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new S);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,l,c,d,f,p=new S;for(let g=0;g<s.length;g++){p.copy(s[g]),t.vmult(p,p),e.vadd(p,p);const _=p;(void 0===o||_.x<o)&&(o=_.x),(void 0===c||_.x>c)&&(c=_.x),(void 0===a||_.y<a)&&(a=_.y),(void 0===d||_.y>d)&&(d=_.y),(void 0===l||_.z<l)&&(l=_.z),(void 0===f||_.z>f)&&(f=_.z)}i.set(o,a,l),r.set(c,d,f)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e=new S){const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new S;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=r[o];const l=t[i[o][0]],c=new S;e.vsub(l,c);const d=a.dot(c),f=new S;s.vsub(l,f);const p=a.dot(f);if(d<0&&p>0||d>0&&p<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=mCe;let l=0,c=0;const d=_Ce,f=e.vertices;d.setZero(),ei.vectorToLocalFrame(i,r,t,a),ei.pointToLocalFrame(i,r,d,d);const p=d.dot(a);c=l=f[0].dot(a);for(let g=1;g<o;g++){const _=f[g].dot(a);_>l&&(l=_),_<c&&(c=_)}if(c-=p,l-=p,c>l){const g=c;c=l,l=g}s[0]=l,s[1]=c}}const IR=[],PR=[],mCe=new S,_Ce=new S;class cx extends mt{constructor(e){super({type:mt.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=S,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],l=new np({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t=new S){return cx.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)hh.set(s[o][0],s[o][1],s[o][2]),t.vmult(hh,hh),e.vadd(hh,hh),i(hh.x,hh.y,hh.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;eu[0].set(s.x,s.y,s.z),eu[1].set(-s.x,s.y,s.z),eu[2].set(-s.x,-s.y,s.z),eu[3].set(-s.x,-s.y,-s.z),eu[4].set(s.x,-s.y,-s.z),eu[5].set(s.x,s.y,-s.z),eu[6].set(-s.x,s.y,-s.z),eu[7].set(s.x,-s.y,s.z);const o=eu[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=eu[a];t.vmult(l,l),e.vadd(l,l);const c=l.x,d=l.y,f=l.z;c>r.x&&(r.x=c),d>r.y&&(r.y=d),f>r.z&&(r.z=f),c<i.x&&(i.x=c),d<i.y&&(i.y=d),f<i.z&&(i.z=f)}}}const hh=new S,eu=[new S,new S,new S,new S,new S,new S,new S,new S];class _t extends class{constructor(){this._listeners=void 0}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}{constructor(e={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=_t.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new S,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new S,this.previousPosition=new S,this.interpolatedPosition=new S,this.initPosition=new S,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new S,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new S,this.force=new S;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?_t.STATIC:_t.DYNAMIC,typeof e.type==typeof _t.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=_t.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new S,this.quaternion=new Pr,this.initQuaternion=new Pr,this.previousQuaternion=new Pr,this.interpolatedQuaternion=new Pr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new S,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new S,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new S,this.invInertia=new S,this.invInertiaWorld=new Jc,this.invMassSolve=0,this.invInertiaSolve=new S,this.invInertiaWorldSolve=new Jc,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new S(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new S(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new xi,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new S,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=_t.AWAKE,this.wakeUpAfterNarrowphase=!1,e===_t.SLEEPING&&this.dispatchEvent(_t.wakeupEvent)}sleep(){this.sleepState=_t.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=Ui(this.sleepSpeedLimit,2);t===_t.AWAKE&&i<r?(this.sleepState=_t.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(_t.sleepyEvent)):t===_t.SLEEPY&&i>r?this.wakeUp():t===_t.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(_t.sleepEvent))}}updateSolveMassProperties(){this.sleepState===_t.SLEEPING||this.type===_t.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t=new S){return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t=new S){return this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t=new S){return this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t=new S){return this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new S,s=new Pr;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),l=o.boundingSphereRadius;a+l>r&&(r=a+l)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=yCe,o=vCe,a=this.quaternion,l=this.aabb,c=bCe;for(let d=0;d!==r;d++){const f=e[d];a.vmult(t[d],s),s.vadd(this.position,s),a.mult(i[d],o),f.calculateWorldAABB(s,o,c.lowerBound,c.upperBound),0===d?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=CCe,r=wCe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t=new S){if(this.type!==_t.DYNAMIC)return;this.sleepState===_t.SLEEPING&&this.wakeUp();const i=ECe;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t=new S){if(this.type!==_t.DYNAMIC)return;const i=SCe,r=xCe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===_t.DYNAMIC&&(this.sleepState===_t.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t=new S){if(this.type!==_t.DYNAMIC)return;this.sleepState===_t.SLEEPING&&this.wakeUp();const i=t,r=MCe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=TCe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t=new S){if(this.type!==_t.DYNAMIC)return;const i=ACe,r=DCe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=OCe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),cx.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new S;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==_t.DYNAMIC&&this.type!==_t.KINEMATIC||this.sleepState===_t.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,f=this.invInertiaWorld,p=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*p.x,r.y+=a.y*g*p.y,r.z+=a.z*g*p.z;const _=f.elements,y=this.angularFactor,v=l.x*y.x,C=l.y*y.y,w=l.z*y.z;s.x+=e*(_[0]*v+_[1]*C+_[2]*w),s.y+=e*(_[3]*v+_[4]*C+_[5]*w),s.z+=e*(_[6]*v+_[7]*C+_[8]*w),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}_t.idCounter=0,_t.COLLIDE_EVENT_NAME="collide",_t.DYNAMIC=1,_t.STATIC=2,_t.KINEMATIC=4,_t.AWAKE=0,_t.SLEEPY=1,_t.SLEEPING=2,_t.wakeupEvent={type:"wakeup"},_t.sleepyEvent={type:"sleepy"},_t.sleepEvent={type:"sleep"};const yCe=new S,vCe=new Pr,bCe=new xi,CCe=new Jc,wCe=new Jc,ECe=new S,SCe=new S,xCe=new S,MCe=new S,TCe=new S,ACe=new S,DCe=new S,OCe=new S;new S,new S;class ux{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new S,this.rayToWorld=new S,this.hitNormalWorld=new S,this.hitPointWorld=new S,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let a8,l8,c8,u8,d8,h8,f8;a8=mt.types.SPHERE,l8=mt.types.PLANE,c8=mt.types.BOX,u8=mt.types.CYLINDER,d8=mt.types.CONVEXPOLYHEDRON,h8=mt.types.HEIGHTFIELD,f8=mt.types.TRIMESH;class zr{get[a8](){return this._intersectSphere}get[l8](){return this._intersectPlane}get[c8](){return this._intersectBox}get[u8](){return this._intersectConvex}get[d8](){return this._intersectConvex}get[h8](){return this._intersectHeightfield}get[f8](){return this._intersectTrimesh}constructor(e=new S,t=new S){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=e.clone(),this.to=t.clone(),this.direction=new S,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=zr.ANY,this.result=new ux,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||zr.ANY,this.result=t.result||new ux,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(p8),NR.length=0,e.broadphase.aabbQuery(e,p8,NR),this.intersectBodies(NR),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||0==(this.collisionFilterGroup&e.collisionFilterMask)||0==(e.collisionFilterGroup&this.collisionFilterMask))return;const r=LCe,s=BCe;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if((!i||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(l,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function(n,e,t){t.vsub(n,ip);const i=ip.dot(e);return e.scale(i,hx),hx.vadd(n,hx),t.distanceTo(hx)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,l=this.direction,c=new S(0,0,1);t.vmult(c,c);const d=new S;o.vsub(i,d);const f=d.dot(c);if(a.vsub(i,d),f*d.dot(c)>0||o.distanceTo(a)<f)return;const g=c.dot(l);if(Math.abs(g)<this.precision)return;const _=new S,y=new S,v=new S;o.vsub(i,_);const C=-c.dot(_)/g;l.scale(C,y),o.vadd(y,v),this.reportIntersection(c,v,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=VCe;o.from.copy(this.from),o.to.copy(this.to),ei.pointToLocalFrame(i,t,o.from,o.from),ei.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=zCe;let l,c,d,f;l=c=0,d=f=e.data.length-1;const p=new xi;o.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),f=Math.min(f,a[1]+1);for(let g=l;g<d;g++)for(let _=c;_<f;_++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,_,p),p.overlapsRay(o)){if(e.getConvexTrianglePillar(g,_,!1),ei.pointToWorldFrame(i,t,e.pillarOffset,dx),this._intersectConvex(e.pillarConvex,t,dx,r,s,g8),this.result.shouldStop)return;e.getConvexTrianglePillar(g,_,!0),ei.pointToWorldFrame(i,t,e.pillarOffset,dx),this._intersectConvex(e.pillarConvex,t,dx,r,s,g8)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=e.radius,c=Ui(a.x-o.x,2)+Ui(a.y-o.y,2)+Ui(a.z-o.z,2),d=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=Ui(o.x-i.x,2)+Ui(o.y-i.y,2)+Ui(o.z-i.z,2)-Ui(l,2),p=Ui(d,2)-4*c*f,g=UCe,_=jCe;if(!(p<0))if(0===p)o.lerp(a,p,g),g.vsub(i,_),_.normalize(),this.reportIntersection(_,g,s,r,-1);else{const y=(-d-Math.sqrt(p))/(2*c),v=(-d+Math.sqrt(p))/(2*c);if(y>=0&&y<=1&&(o.lerp(a,y,g),g.vsub(i,_),_.normalize(),this.reportIntersection(_,g,s,r,-1)),this.result.shouldStop)return;v>=0&&v<=1&&(o.lerp(a,v,g),g.vsub(i,_),_.normalize(),this.reportIntersection(_,g,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=HCe,l=m8,c=o&&o.faceList||null,d=e.faces,f=e.vertices,p=e.faceNormals,g=this.direction,_=this.from,v=_.distanceTo(this.to),C=c?c.length:d.length,w=this.result;for(let M=0;!w.shouldStop&&M<C;M++){const k=c?c[M]:M,V=d[k],j=p[k],ee=t,ce=i;l.copy(f[V[0]]),ee.vmult(l,l),l.vadd(ce,l),l.vsub(_,l),ee.vmult(j,a);const oe=g.dot(a);if(Math.abs(oe)<this.precision)continue;const pe=a.dot(l)/oe;if(!(pe<0)){g.scale(pe,na),na.vadd(_,na),oc.copy(f[V[0]]),ee.vmult(oc,oc),ce.vadd(oc,oc);for(let Ee=1;!w.shouldStop&&Ee<V.length-1;Ee++){tu.copy(f[V[Ee]]),nu.copy(f[V[Ee+1]]),ee.vmult(tu,tu),ee.vmult(nu,nu),ce.vadd(tu,tu),ce.vadd(nu,nu);const ke=na.distanceTo(_);!zr.pointInTriangle(na,oc,tu,nu)&&!zr.pointInTriangle(na,tu,oc,nu)||ke>v||this.reportIntersection(a,na,s,r,k)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=$Ce,l=KCe,c=ZCe,d=m8,f=GCe,p=WCe,g=qCe,_=XCe,y=YCe,v=e.indices,C=this.from,w=this.to,M=this.direction;c.position.copy(i),c.quaternion.copy(t),ei.vectorToLocalFrame(i,t,M,f),ei.pointToLocalFrame(i,t,C,p),ei.pointToLocalFrame(i,t,w,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,g.vsub(p,f),f.normalize();const k=p.distanceSquared(g);e.tree.rayQuery(this,c,l);for(let V=0,j=l.length;!this.result.shouldStop&&V!==j;V++){const ee=l[V];e.getNormal(ee,a),e.getVertex(v[3*ee],oc),oc.vsub(p,d);const ce=f.dot(a),oe=a.dot(d)/ce;if(oe<0)continue;f.scale(oe,na),na.vadd(p,na),e.getVertex(v[3*ee+1],tu),e.getVertex(v[3*ee+2],nu);const pe=na.distanceSquared(p);!zr.pointInTriangle(na,tu,oc,nu)&&!zr.pointInTriangle(na,oc,tu,nu)||pe>k||(ei.vectorToWorldFrame(t,a,y),ei.pointToWorldFrame(i,t,na,_),this.reportIntersection(y,_,s,r,ee))}l.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,l=o.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=void 0!==s?s:-1,this.mode){case zr.ALL:this.hasHit=!0,c.set(o,a,e,t,i,r,l),c.hasHit=!0,this.callback(c);break;case zr.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l));break;case zr.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l),c.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,ip),i.vsub(t,Ob),e.vsub(t,LR);const s=ip.dot(ip),o=ip.dot(Ob),a=ip.dot(LR),l=Ob.dot(Ob),c=Ob.dot(LR);let d,f;return(d=l*a-o*c)>=0&&(f=s*c-o*a)>=0&&d+f<s*l-o*o}}zr.CLOSEST=1,zr.ANY=2,zr.ALL=4;const p8=new xi,NR=[],Ob=new S,LR=new S,LCe=new S,BCe=new Pr,na=new S,oc=new S,tu=new S,nu=new S,g8={faceList:[0]},dx=new S,VCe=new zr,zCe=[],UCe=new S,jCe=new S,HCe=new S,m8=new S,$Ce=new S,GCe=new S,WCe=new S,qCe=new S,YCe=new S,XCe=new S;new xi;const KCe=[],ZCe=new ei,ip=new S,hx=new S;let I8,P8,R8,k8,F8,N8,L8,B8,V8,z8,U8,j8,H8,$8,G8,W8,q8,Y8,X8,K8,Z8,Q8,J8,e$,t$;new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new zr,new S,new S,new S(1,0,0),new S(0,1,0),new S(0,0,1),new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new xi,new S,new xi,new S,new S,new S,new S,new S,new S,new S,new xi,new S,new ei,new xi;const Ji={sphereSphere:mt.types.SPHERE,spherePlane:mt.types.SPHERE|mt.types.PLANE,boxBox:mt.types.BOX|mt.types.BOX,sphereBox:mt.types.SPHERE|mt.types.BOX,planeBox:mt.types.PLANE|mt.types.BOX,convexConvex:mt.types.CONVEXPOLYHEDRON,sphereConvex:mt.types.SPHERE|mt.types.CONVEXPOLYHEDRON,planeConvex:mt.types.PLANE|mt.types.CONVEXPOLYHEDRON,boxConvex:mt.types.BOX|mt.types.CONVEXPOLYHEDRON,sphereHeightfield:mt.types.SPHERE|mt.types.HEIGHTFIELD,boxHeightfield:mt.types.BOX|mt.types.HEIGHTFIELD,convexHeightfield:mt.types.CONVEXPOLYHEDRON|mt.types.HEIGHTFIELD,sphereParticle:mt.types.PARTICLE|mt.types.SPHERE,planeParticle:mt.types.PLANE|mt.types.PARTICLE,boxParticle:mt.types.BOX|mt.types.PARTICLE,convexParticle:mt.types.PARTICLE|mt.types.CONVEXPOLYHEDRON,cylinderCylinder:mt.types.CYLINDER,sphereCylinder:mt.types.SPHERE|mt.types.CYLINDER,planeCylinder:mt.types.PLANE|mt.types.CYLINDER,boxCylinder:mt.types.BOX|mt.types.CYLINDER,convexCylinder:mt.types.CONVEXPOLYHEDRON|mt.types.CYLINDER,heightfieldCylinder:mt.types.HEIGHTFIELD|mt.types.CYLINDER,particleCylinder:mt.types.PARTICLE|mt.types.CYLINDER,sphereTrimesh:mt.types.SPHERE|mt.types.TRIMESH,planeTrimesh:mt.types.PLANE|mt.types.TRIMESH};I8=Ji.sphereSphere,P8=Ji.spherePlane,R8=Ji.boxBox,k8=Ji.sphereBox,F8=Ji.planeBox,N8=Ji.convexConvex,L8=Ji.sphereConvex,B8=Ji.planeConvex,V8=Ji.boxConvex,z8=Ji.sphereHeightfield,U8=Ji.boxHeightfield,j8=Ji.convexHeightfield,H8=Ji.sphereParticle,$8=Ji.planeParticle,G8=Ji.boxParticle,W8=Ji.convexParticle,q8=Ji.cylinderCylinder,Y8=Ji.sphereCylinder,X8=Ji.planeCylinder,K8=Ji.boxCylinder,Z8=Ji.convexCylinder,Q8=Ji.heightfieldCylinder,J8=Ji.particleCylinder,e$=Ji.sphereTrimesh,t$=Ji.planeTrimesh,new S,new S,new S,new S,new S,new Pr,new Pr,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new xi,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new Pr,new S,new S,new S,new S,new S,new S,new S,new S,new xi,new zr;const ws=globalThis.performance||{};if(!ws.now){let n=Date.now();ws.timing&&ws.timing.navigationStart&&(n=ws.timing.navigationStart),ws.now=()=>Date.now()-n}var iu=Be(517);function Lm(n,e,t){e||(e=new Ht(Ht.IDENTITY));const i=new Ht(Ht.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new Ht(Ht.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new Ht(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===Lm(s,r,t))return!1;return!0}function a$(){q5([P6,Rm])}function l$(n,e){const t=e.nodes.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||Lm(r,new Ht(Ht.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function zR(n,e){return pl(this,void 0,void 0,function*(){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield US(i,Rm,{DracoLoader:dR,gltf:{decompressMeshes:!0,postProcess:!0}});return l$(n.scenegraphNode,r)})}function QSe(n,e){return pl(this,void 0,void 0,function*(){return l$(n,yield e)})}function UR(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new Z0e;break;case"cone":i=new tCe;break;case"cylinder":i=new nCe;break;case"cube":default:i=new lCe}return new Cve(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Wn.CARTESIAN,data:e,mesh:i,wireframe:!1,getTransformMatrix:r=>r.transformMatrix,getColor:r=>r.color||[255,255,255,229.5]},t))}}function c$(n,e,t){if(e&&0!==e.length)return new dve(Object.assign({id:n,pickable:!0,data:e.map(i=>Object.assign(Object.assign({},i),{position:new Ht(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color},t))}let exe=(()=>{class n extends J5{initializeState(){const{data:t}=this.props;this.setState({data:null!=t?t:[],zoomOpacity:.8,doCollisions:!1}),a$()}renderLayers(){var t,i;const r=this.state,s={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const l of r.data){const c=null!==(t=l.geometry)&&void 0!==t?t:"cube";l.scenegraph?s.scenegraph.push(l):void 0!==s[c]&&s[c].push(l)}const o={};for(const l of s.scenegraph)l.scenegraph&&l.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,l.scenegraph)&&(o[l.scenegraph]=zR({scenegraph:l.scenegraph},n.gltfCache));const a=[];for(const[l,c]of Object.entries(s))if("scenegraph"===l)for(const d of c)a.push(new K0e({id:"models-"+d["@id"],opacity:d.zoomBasedOpacity?r.zoomOpacity:void 0!==d.opacity?d.opacity:1,pickable:!d.unpickable,coordinateSystem:Wn.CARTESIAN,data:[d],scenegraph:d.scenegraphNode?QSe(d.scenegraphNode,o[d.scenegraph]):d.scenegraph,_lighting:d._lighting,getTransformMatrix:d.transformMatrix,getColor:null!==(i=d.color)&&void 0!==i?i:[0,255,0,127.5],parameters:{depthMask:!d.zoomBasedOpacity&&(void 0===d.opacity||1===d.opacity)}}));else"text"===l?(a.push(c$("text",c.filter(d=>d.unpickable),{pickable:!1})),a.push(c$("textPickable",c.filter(d=>!d.unpickable),{pickable:!0}))):"wireframe"===l?a.push(UR(l,c,{wireframe:!1,pickable:!1,geometry:l})):(a.push(UR(l,c.filter(d=>d.unpickable),{wireframe:!1,pickable:!1,geometry:l})),a.push(UR(`${l}Pickable`,c.filter(d=>!d.unpickable),{wireframe:!1,pickable:!0,geometry:l})));return r.doCollisions&&function(n){pl(this,void 0,void 0,function*(){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Ht(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),c=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new xi({lowerBound:new S(...l.map((d,f)=>Math.min(d,c[f]))),upperBound:new S(...c.map((d,f)=>Math.max(d,l[f])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield _b(o.scenegraph,Rm,{DracoLoader:dR,decompress:!0,postProcess:!0});for(const l of a.scenes)Lm(l,new Ht(o.transformMatrix),(c,d)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const f of c.mesh.primitives)if(f.attributes.POSITION&&f.attributes.POSITION.min){const p=d.transformAsPoint(f.attributes.POSITION.min,[]),g=d.transformAsPoint(f.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:c.name,entityId:o.entityId,bbox:new xi({lowerBound:new S(...p.map((_,y)=>Math.min(_,g[y]))),upperBound:new S(...g.map((_,y)=>Math.max(_,p[y])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const l of t)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i})}(r.data),a.filter(l=>!!l)}getPickingInfo(t){return t.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function u$(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),u$(t,e);return e}let nxe=(()=>{class n{constructor(t){var i,r,s,o,a;this.deckProps=t,this.bodyUILayer=new exe({}),this.nodeClickSubject=new xe,this.nodeHoverStartSubject=new xe,this.nodeHoverStopSubject=new xe,this.sceneRotationSubject=new sr([0,0]),this.nodeDragStartSubject=new xe,this.nodeDragSubject=new xe,this.nodeDragEndSubject=new xe,this.nodeClick$=this.nodeClickSubject.pipe(Vs()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Vs()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Vs()),this.sceneRotation$=this.sceneRotationSubject.pipe(Vs()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Vs()),this.nodeDrag$=this.nodeDragSubject.pipe(Vs()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Vs());const l=Object.assign(Object.assign({},t),{views:["orthographic"===t.camera?new qge({flipY:!1,near:-1e3}):new Kge({orbitAxis:"Y"})],controller:void 0===t.interactive||t.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:c=>{var d;return null!==(d=this.cursor)&&void 0!==d?d:c.isDragging?"grabbing":"grab"}});t.legacyLighting&&(l.effects=[new IP({ambientLight:new rH({color:[255,255,255],intensity:10})})]),this.deck=new QS(l),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(i=t.minRotationX)&&void 0!==i?i:-15,maxRotationX:null!==(r=t.maxRotationX)&&void 0!==r?r:15,target:null!==(s=t.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=t.rotation)&&void 0!==o?o:0,zoom:null!==(a=t.zoom)&&void 0!==a?a:9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return pl(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if((null==t?void 0:t.length)>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of t)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new Ht([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,e,t){return pl(this,void 0,void 0,function*(){a$();const i=yield zR({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"}),r={},s=[];for(const o of i.scenes)Lm(o,e=new Ht(e||Ht.IDENTITY),(a,l)=>{const c={"@id":a.name||a.id,"@type":"ProcessedNode",transformMatrix:new Ht(l),geometry:"wireframe",node:a};if(s.push({"@id":`GLTF:${c["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:c["@id"],transformMatrix:new Ht(e||Ht.IDENTITY),tooltip:a.name||a.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:a}),a.mesh&&a.mesh.primitives&&a.mesh.primitives.length>0)for(const d of a.mesh.primitives)if(d.attributes.POSITION&&d.attributes.POSITION.min){const f=l.transformAsPoint(d.attributes.POSITION.min,[]),p=l.transformAsPoint(d.attributes.POSITION.max,[]);c.bbox=new xi({lowerBound:new S(...f.map((g,_)=>Math.min(g,p[_]))),upperBound:new S(...p.map((g,_)=>Math.max(g,f[_])))})}return r[c["@id"]]=c,!0});for(const o of Object.values(r).filter(a=>!a.bbox)){for(const a of u$(o.node).map(l=>r[l]).filter(l=>l.bbox))o.bbox?o.bbox.extend(a.bbox):o.bbox=a.bbox.clone();o.bbox||delete r[o["@id"]]}for(const o of Object.values(r)){const a=o.bbox.lowerBound,d=(o.size=o.bbox.upperBound.clone().vsub(a)).clone().vmul(new S(.5,.5,.5)),f=o.center=a.clone().vadd(d);o.transformMatrix=new Ht(Ht.IDENTITY).translate(f.toArray()).scale(d.toArray())}for(const o of s)r[o["@id"]]=o;return r})})(r,s).then(o=>{console.log("results",o),console.log("data",t),(t=t.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new Ht(t.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object&&t.object["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){var r,s;t.picked&&t.object&&t.object["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:null!==(s=null===(r=null==i?void 0:i.srcEvent)||void 0===r?void 0:r.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(t){var i;if(null===(i=t.interactionState)||void 0===i?void 0:i.isZooming){const r=this.bodyUILayer.state,s=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);r.zoomOpacity!==s&&this.bodyUILayer.setState({data:r.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},t.viewState)}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){var s;(null===(s=null==t?void 0:t.object)||void 0===s?void 0:s["@id"])&&r.next({node:t.object,info:t,e:i})}}return Le([iu.ZP],n.prototype,"_onHover",null),Le([iu.ZP],n.prototype,"_onClick",null),Le([iu.ZP],n.prototype,"_onViewStateChange",null),Le([iu.ZP],n.prototype,"_onDragStart",null),Le([iu.ZP],n.prototype,"_onDrag",null),Le([iu.ZP],n.prototype,"_onDragEnd",null),n})();function ixe(n,e){return n===e}function rxe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function d$(n,e=ixe){let t=null,i=null;function r(){return rxe(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}const oxe=d$(function(){const n=qA();if(!n)return!1;const e=n.injector.get(AB,null);return!!e&&e.some(i=>(i&&i.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let jR=(()=>{class n{constructor(){this.bootstrap$=new Mf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const HR=new Ce("INITIAL_STATE_TOKEN");let axe=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const h$=new Ce("Internals.StateContextFactory"),f$=new Ce("Internals.StateFactory");function p$(n,e){return e?t=>t.pipe(p$((i,r)=>ci(n(i,r)).pipe(Me((s,o)=>e(i,s,r,o))))):t=>t.lift(new lxe(n))}class lxe{constructor(e){this.project=e}call(e,t){return t.subscribe(new cxe(e,this.project))}}class cxe extends ti{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new jr(this),i=this.destination;i.add(t);const r=so(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function vx(n=null){return e=>e.lift(new uxe(n))}class uxe{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new dxe(e,this.defaultValue))}}class dxe extends Et{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}const Oa={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,e,t)=>`State name '${n}' from ${e} already exists in ${t}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let g$=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return ED(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return ft.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return ft.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof ft||console.warn(Oa.ZONE_WARNING())}}return n.\u0275fac=function(t){return new(t||n)(I(ft),I(ll))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const m$=new Ce("ROOT_STATE_TOKEN"),_$=new Ce("FEATURE_STATE_TOKEN"),$R=new Ce("NGXS_PLUGINS"),y$=new Ce("NG_TEST_MODE"),v$=new Ce("NG_DEV_MODE"),rd="NGXS_META",b$="NGXS_OPTIONS_META",GR="NGXS_SELECTOR_META";let ap=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=g$}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class hxe{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}const C$=new Ce("NGXS_EXECUTION_STRATEGY");function lp(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const WR=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},Bm=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),qR=n=>n&&"object"==typeof n&&!Array.isArray(n),YR=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(qR(n)&&qR(t))for(const i in t)qR(t[i])?(n[i]||Object.assign(n,{[i]:{}}),YR(n[i],t[i])):Object.assign(n,{[i]:t[i]});return YR(n,...e)};function Nb(n){return n[rd]}function ZR(n){return n[GR]}function E$(n,e){const t=Bm(e.currentAppState,n.path),i=Bm(e.newAppState,n.path);return new hxe(t,i,!n.isInitialised)}function Cxe(...n){return function(n,e,t=Sxe){const i=function(n){return n.reduce((e,t)=>(e[lp(t)]=!0,e),{})}(n),r=e&&function(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function(n,e){return On(t=>{const i=lp(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function Sxe(){return Me(n=>n.action)}function bx(n){return e=>new le(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let Cx=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(I(C$))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class Txe extends xe{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let wx=(()=>{class n extends Txe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Axe=(()=>{class n extends le{constructor(t,i){super(r=>{const s=t.pipe(bx(i)).subscribe({next:o=>r.next(o),error:o=>r.error(o),complete:()=>r.complete()});r.add(s)})}}return n.\u0275fac=function(t){return new(t||n)(I(wx),I(Cx))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const S$=n=>(...e)=>n.shift()(...e,(...i)=>S$(n)(...i));let Ex=(()=>{class n extends sr{constructor(){super({})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),QR=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(I(n,12),I($R,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),JR=(()=>{class n extends xe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),x$=(()=>{class n{constructor(t,i,r,s,o,a){this._injector=t,this._actions=i,this._actionResults=r,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){const i=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return i.subscribe({error:r=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(Vo),this._errorHandler.handleError(r)}catch(s){}})}),i.pipe(bx(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?ut(this._stateStream.getValue()):Lv(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){if(!lp(t))return jg(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const r=this._stateStream.getValue();return S$([...this._pluginManager.plugins,(o,a)=>{o!==r&&this._stateStream.next(o);const l=this.getActionResultStream(a);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(r,t).pipe(jc())}getActionResultStream(t){return this._actionResults.pipe(On(i=>i.action===t&&"DISPATCHED"!==i.status),_i(1),jc())}createDispatchObservable(t){return t.pipe(p$(i=>{switch(i.status){case"SUCCESSFUL":return ut(this._stateStream.getValue());case"ERRORED":return jg(i.error);default:return Zl}})).pipe(jc())}}return n.\u0275fac=function(t){return new(t||n)(I(kt),I(wx),I(JR),I(QR),I(Ex),I(Cx))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const M$=n=>{Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(i){t.call(n,i)&&(!e||"caller"!==i&&"callee"!==i&&"arguments"!==i)&&null!==n[i]&&("object"==typeof n[i]||"function"==typeof n[i])&&!Object.isFrozen(n[i])&&M$(n[i])}),n};let T$=(()=>{class n{constructor(t,i){this.isDevMode=t,this.isTestMode=i}}return n.\u0275fac=function(t){return new(t||n)(I(v$),I(y$))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),A$=(()=>{class n{constructor(t,i){this._host=t,this._config=i}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(Oa.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(Oa.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(t){return new(t||n)(I(T$),I(ap))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),zm=(()=>{class n{constructor(t,i,r,s){this._stateStream=t,this._dispatcher=i,this._config=r,s.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:i=>{const r=M$(i);return t.setState(r)},dispatch:i=>t.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign({},r,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(I(Ex),I(x$),I(ap),I(A$))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Sx=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();function r(l){return Bm(l,t.path)}function s(l,c){const d=WR(l,t.path,c),f=t.instance;if(f.ngxsOnChanges){const p=E$(t,{currentAppState:l,newAppState:d});f.ngxsOnChanges(p)}return i.setState(d),d}function o(l,c){return s(l,c(r(l)))}return{getState:()=>r(i.getState()),patchState:l=>o(i.getState(),function(n){return e=>{if(Array.isArray(n))throw new Error(Oa.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(Oa.PATCHING_PRIMITIVE());const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(l)),setState(l){const c=i.getState();return function(l){return"function"==typeof l}(l)?o(c,l):s(c,l)},dispatch:l=>i.dispatch(l)}}}return n.\u0275fac=function(t){return new(t||n)(I(zm))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class xx{static stateNameErrorMessage(e){return Oa.STATE_NAME(e)}static checkCorrectStateName(e){if(!e)throw new Error(Oa.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}static checkStateNameIsUnique(e,t){const r=this.getValidStateMeta(e).name,s=t[r];if(s&&s!==e)throw new Error(Oa.STATE_UNIQUE(r,e.name,s.name));return r}static getValidStateMeta(e){const t=Nb(e);if(!t)throw new Error(Oa.STATE_DECORATOR());return t}}xx.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let Um=(()=>{class n{constructor(t,i,r,s,o,a,l){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=d$(()=>{const c=this;function d(p){const g=c.statePaths[p];return g?function(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}(n)}(g.split("."),c._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let g=d(p);return g||((..._)=>(g||(g=d(p)),g?g(..._):void 0))},getSelectorOptions:p=>Object.assign({},c._config.selectorOptions,p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let i={};return i=Array.isArray(t)?t.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,i}static checkStatesAreValid(t){t.forEach(xx.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){n.checkStatesAreValid(t);const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function(n){const e=t=>{const i=n.find(r=>r===t);if(!i)throw new Error(`Child state not found: ${t}. \r\nYou may have forgotten to add states to module`);return i[rd].name};return n.reduce((t,i)=>{const{name:r,children:s}=i[rd];return t[r]=(s||[]).map(e),t},{})}(i),s=function(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${r}': ${s.join(" -> ")}`);t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function(n){return n.reduce((e,t)=>(e[t[rd].name]=t,e),{})}(i),l=[];for(const c of s){const d=a[c],f=o[c],p=d[rd];this.addRuntimeInfoToMeta(p,f);const g={name:c,path:f,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:n.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(c,f)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>WR(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(On(t=>"DISPATCHED"===t.status),ui(({action:t})=>this.invokeActions(this._actions,t).pipe(Me(()=>({action:t,status:"SUCCESSFUL"})),vx({action:t,status:"CANCELED"}),Sa(i=>ut({action:t,status:"ERRORED",error:i}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,i){const r=lp(i),s=[];for(const o of this.states){const a=o.actions[r];if(a)for(const l of a){const c=this._stateContextFactory.createStateContext(o);try{let d=o.instance[l.fn](c,i);d instanceof Promise&&(d=ci(d)),d instanceof le?(d=d.pipe(vx({})),l.options.cancelUncompleted&&(d=d.pipe(Gn(t.pipe(Cxe(i)))))):d=ut({}).pipe(jc()),s.push(d)}catch(d){s.push(jg(d))}}}return s.length||s.push(ut({})),Lv(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=xx.checkStateNameIsUnique(s,r);!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==Bm(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(I(kt),I(ap),I(n,12),I(wx),I(JR),I(Sx),I(HR,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),ek=(()=>{class n{constructor(t,i,r){this.internalStateOperations=t,this.stateContextFactory=i,this.bootstrapper=r}ngxsBootstrap(t,i){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(On(()=>!!i),Di(()=>this.invokeInit(i.states)),ui(()=>this.bootstrapper.appBootstrapped$),On(r=>!!r)).subscribe(()=>this.invokeBootstrap(i.states))}invokeInit(t){for(const i of t){const r=i.instance;if(r.ngxsOnChanges){const a=E$(i,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});r.ngxsOnChanges(a)}r.ngxsOnInit&&r.ngxsOnInit(this.getStateContext(i)),i.isInitialised=!0}}invokeBootstrap(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this.getStateContext(i))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(I(zm),I(Sx),I(jR))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();let fh=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(Me(i),Sa(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?ut(void 0):jg(r)}),qo(),bx(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(_i(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(bx(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return function(n){const e=ZR(n)||Nb(n);return e&&e.makeRootSelector||(()=>n)}(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(I(Ex),I(zm),I(ap),I(Cx),I(Um),I(HR,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),Lb=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(I(fh),I(ap))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class I${static get type(){return"@@INIT"}}class P${constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}const Tx=new Mf(1);let Nxe=(()=>{class n{constructor(t,i,r,s,o=[],a){!function(){try{const n=window.ng,t=!(n.probe&&n.coreTokens)&&Co();Tx.next(t)}catch(n){Tx.next(!1)}finally{Tx.complete()}}();const l=t.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(l),t.connectActionHandlers(),a.ngxsBootstrap(new I$,l)}}return n.\u0275fac=function(t){return new(t||n)(I(Um),I(zm),I(fh),I(Lb),I(m$,8),I(ek))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})(),Lxe=(()=>{class n{constructor(t,i,r,s=[],o){const a=n.flattenStates(s),l=r.addAndReturnDefaults(a);l.states.length&&(i.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new P$(l.defaults),l))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(I(fh),I(zm),I(Um),I(_$,8),I(ek))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();class ia{static forRoot(e=[],t={}){return{ngModule:Nxe,providers:[Um,Sx,Axe,wx,jR,A$,T$,ek,x$,JR,zm,Cx,fh,Ex,Lb,QR,...e,...ia.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:Lxe,providers:[Um,QR,...e,{provide:_$,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:y$,useValue:oxe},{provide:v$,useValue:Co},{provide:C$,useClass:t.executionStrategy||g$},{provide:m$,useValue:e},{provide:ia.ROOT_OPTIONS,useValue:t},{provide:ap,useFactory:ia.ngxsConfigFactory,deps:[ia.ROOT_OPTIONS]},{provide:fv,useFactory:ia.appBootstrapListenerFactory,multi:!0,deps:[jR]},{provide:HR,useFactory:ia.getInitialState},{provide:h$,useExisting:Sx},{provide:f$,useExisting:Um}]}static ngxsConfigFactory(e){return YR(new ap,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return axe.pop()}}function ph(n){return i=>{!function(n){Tx.subscribe(e=>{e&&(n.\u0275prov||console.warn(Oa.UNDECORATED_STATE_IN_IVY(n.name)))})}(i);const r=i,s=function(n){if(!n.hasOwnProperty(rd)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,rd,{value:e})}return Nb(n)}(r),o=Object.getPrototypeOf(r),a=function(i){return Object.assign({},i[b$]||{},n)}(o);(function(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:l,name:c}=o,d="string"==typeof c?c:c&&c.getName()||null;xx.checkCorrectStateName(d),s.hasOwnProperty(rd)&&(r.actions=Object.assign({},r.actions,(s[rd]||{}).actions)),r.children=a,r.defaults=l,r.name=d})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[b$]=a}}ia.\u0275fac=function(e){return new(e||ia)},ia.\u0275mod=Fe({type:ia}),ia.\u0275inj=De({}),ia.ROOT_OPTIONS=new Ce("ROOT_OPTIONS");let R$=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(E(Nc),E(ot))},n.\u0275dir=ge({type:n}),n})(),cp=(()=>{class n extends R${}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275dir=ge({type:n,features:[vt]}),n})();const Mo=new Ce("NgValueAccessor"),Gxe={provide:Mo,useExisting:T(()=>Bb),multi:!0},qxe=new Ce("CompositionEventMode");let Bb=(()=>{class n extends R${constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=Bc()?Bc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(E(Nc),E(ot),E(qxe,8))},n.\u0275dir=ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&we("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Ft([Gxe]),vt]}),n})();function gh(n){return null==n||0===n.length}function F$(n){return null!=n&&"number"==typeof n.length}const Es=new Ce("NgValidators"),mh=new Ce("NgAsyncValidators"),Yxe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class N${static min(e){return function(n){return e=>{if(gh(e.value)||gh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(gh(e.value)||gh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return gh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return gh(n.value)||Yxe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>gh(e.value)||!F$(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>F$(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return _h;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(gh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Z$(e)}static composeAsync(e){return Q$(e)}}function _h(n){return null}function W$(n){return null!=n}function q$(n){const e=Gy(n)?ci(n):n;return vw(e),e}function Y$(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function X$(n,e){return e.map(t=>t(n))}function K$(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Z$(n){if(!n)return null;const e=n.filter(W$);return 0==e.length?null:function(t){return Y$(X$(t,e))}}function tk(n){return null!=n?Z$(K$(n)):null}function Q$(n){if(!n)return null;const e=n.filter(W$);return 0==e.length?null:function(t){return Lv(X$(t,e).map(q$)).pipe(Me(Y$))}}function nk(n){return null!=n?Q$(K$(n)):null}function J$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eG(n){return n._rawValidators}function tG(n){return n._rawAsyncValidators}function ik(n){return n?Array.isArray(n)?n:[n]:[]}function Ax(n,e){return Array.isArray(n)?n.includes(e):n===e}function nG(n,e){const t=ik(e);return ik(n).forEach(r=>{Ax(t,r)||t.push(r)}),t}function iG(n,e){return ik(e).filter(t=>!Ax(n,t))}let rG=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tk(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=nk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,i){return!!this.control&&this.control.hasError(t,i)}getError(t,i){return this.control?this.control.getError(t,i):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n}),n})(),To=(()=>{class n extends rG{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275dir=ge({type:n,features:[vt]}),n})();class ac extends rG{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let rk=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(E(ac,2))},n.\u0275dir=ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&lt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[vt]}),n})();function Vb(n,e){ak(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aG(n,e)})}(n,e),function(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aG(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ix(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Rx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Px(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ak(n,e){const t=eG(n);null!==e.validator?n.setValidators(J$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=tG(n);null!==e.asyncValidator?n.setAsyncValidators(J$(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Px(e._rawValidators,r),Px(e._rawAsyncValidators,r)}function Rx(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=eG(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=tG(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Px(e._rawValidators,i),Px(e._rawAsyncValidators,i),t}function aG(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lG(n,e){ak(n,e)}function lk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function cG(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function ck(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Bb?t=s:function(n){return Object.getPrototypeOf(n.constructor)===cp}(s)?i=s:r=s}),r||i||t||null}function kx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zb="VALID",Fx="INVALID",jm="PENDING",Ub="DISABLED";function uk(n){return(hk(n)?n.validators:n)||null}function uG(n){return Array.isArray(n)?tk(n):n||null}function dk(n,e){return(hk(e)?e.asyncValidators:n)||null}function dG(n){return Array.isArray(n)?nk(n):n||null}function hk(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class fk{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uG(this._rawValidators),this._composedAsyncValidatorFn=dG(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zb}get invalid(){return this.status===Fx}get pending(){return this.status==jm}get disabled(){return this.status===Ub}get enabled(){return this.status!==Ub}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uG(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=dG(e)}addValidators(e){this.setValidators(nG(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nG(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iG(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iG(e,this._rawAsyncValidators))}hasValidator(e){return Ax(this._rawValidators,e)}hasAsyncValidator(e){return Ax(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ub,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zb,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zb||this.status===jm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ub:zb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jm,this._hasOwnPendingAsyncValidator=!0;const t=q$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=i instanceof pk?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof aMe&&i.at(r)||null}),i}(this,e)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?Ub:this.errors?Fx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jm)?jm:this._anyControlsHaveStatus(Fx)?Fx:zb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hk(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yh extends fk{constructor(e=null,t,i){super(uk(t),dk(i,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class pk extends fk{constructor(e,t,i){super(uk(t),dk(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t instanceof yh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class aMe extends fk{constructor(e,t,i){super(uk(t),dk(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof yh?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const lMe={provide:To,useExisting:T(()=>up)},jb=(()=>Promise.resolve(null))();let up=(()=>{class n extends To{constructor(t,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Ve,this.form=new pk({},tk(t),nk(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){jb.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Vb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){jb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),kx(this._directives,t)})}addFormGroup(t){jb.then(()=>{const i=this._findContainer(t.path),r=new pk({});lG(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){jb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){jb.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,cG(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(E(Es,10),E(mh,10))},n.\u0275dir=ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&we("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ft([lMe]),vt]}),n})();const uMe={provide:ac,useExisting:T(()=>gk)},pG=(()=>Promise.resolve(null))();let gk=(()=>{class n extends ac{constructor(t,i,r,s){super(),this.control=new yh,this._registered=!1,this.update=new Ve,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ck(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),lk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pG.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;pG.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(E(To,9),E(Es,10),E(mh,10),E(Mo,10))},n.\u0275dir=ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ft([uMe]),vt,Kn]}),n})(),_G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const mk=new Ce("NgModelWithFormControlWarning"),gMe={provide:ac,useExisting:T(()=>Nx)};let Nx=(()=>{class n extends ac{constructor(t,i,r,s){super(),this._ngModelWarningConfig=s,this.update=new Ve,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=ck(0,r)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const i=t.form.previousValue;i&&Ix(i,this,!1),Vb(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}lk(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ix(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n.\u0275fac=function(t){return new(t||n)(E(Es,10),E(mh,10),E(Mo,10),E(mk,8))},n.\u0275dir=ge({type:n,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ft([gMe]),vt,Kn]}),n._ngModelWarningSentOnce=!1,n})();const mMe={provide:To,useExisting:T(()=>Hm)};let Hm=(()=>{class n extends To{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ve,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Vb(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ix(t.control||null,t,!1),kx(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,cG(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ix(i||null,t),r instanceof yh&&(Vb(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);lG(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function(n,e){return Rx(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ak(this.form,this),this._oldForm&&Rx(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(E(Es,10),E(mh,10))},n.\u0275dir=ge({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&we("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ft([mMe]),vt,Kn]}),n})(),PG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[_G]]}),n})(),wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[PG]}),n})(),Ek=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mk,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[PG]}),n})();function Hb(n){return new le(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?ci(t):pE()).subscribe(e)})}function Sk(n,e=Tf){const i=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-e.now():Math.abs(n);return r=>r.lift(new FMe(i,e))}class FMe{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new xk(e,this.delay,this.scheduler))}}class xk extends Et{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,r=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const o=Math.max(0,i[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(xk.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new NMe(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(Go.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(Go.createComplete()),this.unsubscribe()}}class NMe{constructor(e,t){this.time=e,this.notification=t}}const NG=qg({passive:!0});let LG=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Zl;const i=ju(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new xe,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,NG),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,NG)}}),s}stopMonitoring(t){const i=ju(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(I(ri),I(ft))},n.\u0275prov=ue({factory:function(){return new n(I(ri),I(ft))},token:n,providedIn:"root"}),n})(),BG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Tv]]}),n})();const JMe=new Ce("MAT_INPUT_VALUE_ACCESSOR"),e1e=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let t1e=0;const n1e=wO(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let $b=(()=>{class n extends n1e{constructor(t,i,r,s,o,a,l,c,d,f){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=f,this._uid="mat-input-"+t1e++,this.focused=!1,this.stateChanges=new xe,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>nV().has(_));const p=this._elementRef.nativeElement,g=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&d.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",_=>{const y=_.target;!y.value&&0===y.selectionStart&&0===y.selectionEnd&&(y.setSelectionRange(1,1),y.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Nt(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Nt(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&nV().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Nt(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){e1e.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(ri),E(ac,10),E(up,8),E(Hm,8),E(Rv),E(JMe,10),E(LG),E(ft),E(KE,8))},n.\u0275dir=ge({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,i){1&t&&we("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(rl("disabled",i.disabled)("required",i.required),an("id",i.id)("data-placeholder",i.placeholder)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),lt("mat-input-server",i._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[Ft([{provide:Fv,useExisting:n}]),vt,Kn]}),n})(),Gb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[Rv],imports:[[BG,Nv,Un],BG,Nv]}),n})();function ar(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return t=>Me(function(n,e){return i=>{let r=i;for(let s=0;s<e;s++){const o=null!=r?r[n[s]]:void 0;if(void 0===o)return;r=o}return r}}(n,e))(t)}const VG={leading:!0,trailing:!1};class s1e{constructor(e,t,i){this.durationSelector=e,this.leading=t,this.trailing=i}call(e,t){return t.subscribe(new o1e(e,this.durationSelector,this.leading,this.trailing))}}class o1e extends ti{constructor(e,t,i,r){super(e),this.destination=e,this.durationSelector=t,this._leading=i,this._trailing=r,this._hasValue=!1}_next(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))}send(){const{_hasValue:e,_sendValue:t}=this;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0}throttle(e){const t=this.tryDurationSelector(e);t&&this.add(this._throttled=so(t,new jr(this)))}tryDurationSelector(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}}throttlingDone(){const{_throttled:e,_trailing:t}=this;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}function zG(n,e=Tf,t=VG){return i=>i.lift(new a1e(n,e,t.leading,t.trailing))}class a1e{constructor(e,t,i,r){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=r}call(e,t){return t.subscribe(new l1e(e,this.duration,this.scheduler,this.leading,this.trailing))}}class l1e extends Et{constructor(e,t,i,r,s){super(e),this.duration=t,this.scheduler=i,this.leading=r,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(c1e,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function c1e(n){const{subscriber:e}=n;e.clearThrottle()}var UG=Be(266);const u1e={tooltipState:Ql("state",[vr("initial, void, hidden",Jn({opacity:0,transform:"scale(0)"})),vr("visible",Jn({transform:"scale(1)"})),Zs("* => visible",So("200ms cubic-bezier(0, 0, 0.2, 1)",nie([Jn({opacity:0,transform:"scale(0)",offset:0}),Jn({opacity:.5,transform:"scale(0.99)",offset:.5}),Jn({opacity:1,transform:"scale(1)",offset:1})]))),Zs("* => hidden",So("100ms cubic-bezier(0, 0, 0.2, 1)",Jn({opacity:0})))])},jG="tooltip-panel",HG=qg({passive:!0}),$G=new Ce("mat-tooltip-scroll-strategy"),p1e={provide:$G,deps:[Zo],useFactory:function(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},g1e=new Ce("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let _1e=(()=>{class n{constructor(t,i,r,s,o,a,l,c,d,f,p,g){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=f,this._defaultOptions=p,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new xe,this._handleKeydown=_=>{this._isTooltipVisible()&&27===_.keyCode&&!Wo(_)&&(_.preventDefault(),_.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=d,this._document=g,p&&(p.position&&(this.position=p.position),p.touchGestures&&(this.touchGestures=p.touchGestures)),f.change.pipe(Gn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),o.runOutsideAngular(()=>{i.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(t){var i;t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(i=this._tooltipInstance)||void 0===i||i.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=Nt(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Gn(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),t.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,HG)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const i=this._createOverlay();this._detach(),this._portal=this._portal||new rm(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=i.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Gn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return i.positionChanges.pipe(Gn(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${jG}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Gn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Gn(this._destroyed)).subscribe(()=>{var r;return null===(r=this._tooltipInstance)||void 0===r?void 0:r._handleBodyInteraction()}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset(Object.assign(Object.assign({},r.main),s.main)),this._addOffset(Object.assign(Object.assign({},r.fallback),s.fallback))])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(_i(1),Gn(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:s}=t;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${jG}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",()=>this.hide()],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,HG)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){return new(t||n)(E(Zo),E(ot),E(im),E(Qr),E(ft),E(ri),E(aV),E(dl),E(void 0),E(Yo),E(void 0),E(ct))},n.\u0275dir=ge({type:n,inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),lc=(()=>{class n extends _1e{constructor(t,i,r,s,o,a,l,c,d,f,p,g){super(t,i,r,s,o,a,l,c,d,f,p,g),this._tooltipComponent=v1e}}return n.\u0275fac=function(t){return new(t||n)(E(Zo),E(ot),E(im),E(Qr),E(ft),E(ri),E(aV),E(dl),E($G),E(Yo,8),E(g1e,8),E(ct))},n.\u0275dir=ge({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[vt]}),n})(),y1e=(()=>{class n{constructor(t){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new xe}show(t){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},t)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(t){const i=t.toState;"hidden"===i&&!this.isVisible()&&this._onHide.next(),("visible"===i||"hidden"===i)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return n.\u0275fac=function(t){return new(t||n)(E(zn))},n.\u0275dir=ge({type:n}),n})(),v1e=(()=>{class n extends y1e{constructor(t,i){super(t),this._breakpointObserver=i,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return n.\u0275fac=function(t){return new(t||n)(E(zn),E(FO))},n.\u0275cmp=$e({type:n,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){2&t&&pf("zoom","visible"===i._visibility?1:null)},features:[vt],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(t,i){if(1&t&&(F(0,"div",0),we("@state.start",function(){return i._animationStart()})("@state.done",function(s){return i._animationDone(s)}),hn(1,"async"),Re(2),N()),2&t){let r;lt("mat-tooltip-handset",null==(r=gn(1,5,i._isHandset))?null:r.matches),re("ngClass",i.tooltipClass)("@state",i._visibility),q(2),Ai(i.message)}},directives:[oE],pipes:[Uu],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[u1e.tooltipState]},changeDetection:0}),n})(),cc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[p1e],imports:[[Jne,Sn,Hv,Un],Un,Uv]}),n})();const b1e=["sliderWrapper"],_l=qg({passive:!1}),x1e={provide:Mo,useExisting:T(()=>Mk),multi:!0};class M1e{}const T1e=Nf(kf(Jg(class{constructor(n){this._elementRef=n}}),"accent"));let Mk=(()=>{class n extends T1e{constructor(t,i,r,s,o,a,l,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Ve,this.input=new Ve,this.valueChange=new Ve,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Se.EMPTY,this._pointerDown=d=>{this.disabled||this._isSliding||!Wb(d)&&0!==d.button||this._ngZone.run(()=>{this._touchId=Wb(d)?function(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(d,this._elementRef.nativeElement):void 0;const f=GG(d,this._touchId);if(f){const p=this.value;this._isSliding="pointer",this._lastPointerEvent=d,d.preventDefault(),this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(d),this._focusHostElement(),this._updateValueFromPosition(f),this._valueOnSlideStart=p,p!=this.value&&this._emitInputEvent()}})},this._pointerMove=d=>{if("pointer"===this._isSliding){const f=GG(d,this._touchId);if(f){d.preventDefault();const p=this.value;this._lastPointerEvent=d,this._updateValueFromPosition(f),p!=this.value&&this._emitInputEvent()}}},this._pointerUp=d=>{"pointer"===this._isSliding&&(!Wb(d)||"number"!=typeof this._touchId||Tk(d.changedTouches,this._touchId))&&(d.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const d=t.nativeElement;d.addEventListener("mousedown",this._pointerDown,_l),d.addEventListener("touchstart",this._pointerDown,_l)})}get invert(){return this._invert}set invert(t){this._invert=Nt(t)}get max(){return this._max}set max(t){this._max=Eo(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Eo(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Eo(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Nt(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Eo(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=Eo(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Nt(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,_l),t.removeEventListener("touchstart",this._pointerDown,_l),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||Wo(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=Wb(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,_l),i.addEventListener(o,this._pointerUp,_l),r&&i.addEventListener("touchcancel",this._pointerUp,_l);const a=this._getWindow();void 0!==a&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,_l),t.removeEventListener("mouseup",this._pointerUp,_l),t.removeEventListener("touchmove",this._pointerMove,_l),t.removeEventListener("touchend",this._pointerUp,_l),t.removeEventListener("touchcancel",this._pointerUp,_l);const i=this._getWindow();void 0!==i&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){this.value=this._clamp((this.value||0)+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){let t=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,s=Math.ceil(30/(t*this.step/(this.max-this.min)))*this.step;this._tickIntervalPercent=s/t}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(t=this.value){let i=new M1e;return i.source=this,i.value=t,i}_calculatePercentage(t){return((t||0)-this.min)/(this.max-this.min)}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(dl),E(zn),E(Yo,8),ds("tabindex"),E(ft),E(ct),E(Xo,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&ii(b1e,5),2&t){let r;It(r=Pt())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&we("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(rl("tabIndex",i.tabIndex),an("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",null==i.valueText?i.displayValue:i.valueText)("aria-orientation",i.vertical?"vertical":"horizontal"),lt("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",vertical:"vertical",displayWith:"displayWith",valueText:"valueText"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Ft([x1e]),vt],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(F(0,"div",0,1),F(2,"div",2),rt(3,"div",3),rt(4,"div",4),N(),F(5,"div",5),rt(6,"div",6),N(),F(7,"div",7),rt(8,"div",8),rt(9,"div",9),F(10,"div",10),F(11,"span",11),Re(12),N(),N(),N(),N()),2&t&&(q(3),re("ngStyle",i._getTrackBackgroundStyles()),q(1),re("ngStyle",i._getTrackFillStyles()),q(1),re("ngStyle",i._getTicksContainerStyles()),q(1),re("ngStyle",i._getTicksStyles()),q(1),re("ngStyle",i._getThumbContainerStyles()),q(5),Ai(i.displayValue))},directives:[D3],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),n})();function Wb(n){return"t"===n.type[0]}function GG(n,e){let t;return t=Wb(n)?"number"==typeof e?Tk(n.touches,e)||Tk(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function Tk(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let WG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Un],Un]}),n})();function D1e(n,e){}class Ak{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const O1e={dialogContainer:Ql("dialogContainer",[vr("void, exit",Jn({opacity:0,transform:"scale(0.7)"})),vr("enter",Jn({transform:"none"})),Zs("* => enter",So("150ms cubic-bezier(0, 0, 0.2, 1)",Jn({transform:"none",opacity:1}))),Zs("* => void, * => exit",So("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Jn({opacity:0})))])};let I1e=(()=>{class n extends iS{constructor(t,i,r,s,o,a){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._focusMonitor=a,this._animationStateChanged=new Ve,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=l=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(l)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=bE(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=bE())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=bE();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(gV),E(zn),E(ct,8),E(Ak),E(dl))},n.\u0275dir=ge({type:n,viewQuery:function(t,i){if(1&t&&ii(jf,7),2&t){let r;It(r=Pt())&&(i._portalOutlet=r.first)}},features:[vt]}),n})(),P1e=(()=>{class n extends I1e{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275cmp=$e({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&Wy("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(rl("id",i._id),an("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Sg("@dialogContainer",i._state))},features:[vt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&wt(0,D1e,0,0,"ng-template",0)},directives:[jf],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[O1e.dialogContainer]}}),n})(),R1e=0;class $m{constructor(e,t,i="mat-dialog-"+R1e++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new xe,this._afterClosed=new xe,this._beforeClosed=new xe,this._state=0,t._id=i,t._animationStateChanged.pipe(On(r=>"opened"===r.state),_i(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(On(r=>"closed"===r.state),_i(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(On(r=>27===r.keyCode&&!this.disableClose&&!Wo(r))).subscribe(r=>{r.preventDefault(),Dk(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Dk(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(On(t=>"closing"===t.state),_i(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Dk(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const Ok=new Ce("MatDialogData"),k1e=new Ce("mat-dialog-default-options"),qG=new Ce("mat-dialog-scroll-strategy"),N1e={provide:qG,deps:[Zo],useFactory:function(n){return()=>n.scrollStrategies.block()}};let L1e=(()=>{class n{constructor(t,i,r,s,o,a,l,c,d){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new xe,this._afterOpenedAtThisLevel=new xe,this._ariaHiddenElements=new Map,this.afterAllClosed=Hb(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(es(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){(i=function(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new Ak)).id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new jv({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=kt.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:Ak,useValue:i}]}),o=new rm(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(t instanceof Ys)i.attachTemplatePortal(new Uf(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new rm(t,s.viewContainerRef,a));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(Yo,null,xt.Optional))&&o.push({provide:Yo,useValue:{value:t.direction,change:ut()}}),kt.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){return new(t||n)(E(Zo),E(kt),E(void 0),E(void 0),E(sm),E(void 0),E(Eu),E(Eu),E(Ce))},n.\u0275dir=ge({type:n}),n})(),Gm=(()=>{class n extends L1e{constructor(t,i,r,s,o,a,l){super(t,i,s,a,l,o,$m,P1e,Ok)}}return n.\u0275fac=function(t){return new(t||n)(I(Zo),I(kt),I(Ug,8),I(k1e,8),I(qG),I(n,12),I(sm))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),V1e=0,YG=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+V1e++}ngOnInit(){this._dialogRef||(this._dialogRef=function(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(E($m,8),E(ot),E(Gm))},n.\u0275dir=ge({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&rl("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),XG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})();let Ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[Gm,N1e],imports:[[Hv,rS,Un],Un]}),n})();const Pk=new Ce("CdkAccordion");let j1e=0,$1e=(()=>{class n{constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Se.EMPTY,this.closed=new Ve,this.opened=new Ve,this.destroyed=new Ve,this.expandedChange=new Ve,this.id="cdk-accordion-child-"+j1e++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Nt(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Nt(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(E(Pk,12),E(zn),E(nS))},n.\u0275dir=ge({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Ft([{provide:Pk,useValue:void 0}])]}),n})(),G1e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const W1e=["body"];function q1e(n,e){}const Y1e=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],X1e=["mat-expansion-panel-header","*","mat-action-row"];function K1e(n,e){1&n&&rt(0,"span",2),2&n&&re("@indicatorRotate",nt()._getExpandedState())}const Z1e=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Q1e=["mat-panel-title","mat-panel-description","*"],Rk=new Ce("MAT_ACCORDION"),ZG="225ms cubic-bezier(0.4,0.0,0.2,1)",QG={indicatorRotate:Ql("indicatorRotate",[vr("collapsed, void",Jn({transform:"rotate(0deg)"})),vr("expanded",Jn({transform:"rotate(180deg)"})),Zs("expanded <=> collapsed, void => collapsed",So(ZG))]),bodyExpansion:Ql("bodyExpansion",[vr("collapsed, void",Jn({height:"0px",visibility:"hidden"})),vr("expanded",Jn({height:"*",visibility:"visible"})),Zs("expanded <=> collapsed, void => collapsed",So(ZG))])};let J1e=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(E(Ys))},n.\u0275dir=ge({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),eTe=0;const JG=new Ce("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Bx=(()=>{class n extends $1e{constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Ve,this.afterCollapse=new Ve,this._inputChanges=new xe,this._headerId="mat-expansion-panel-header-"+eTe++,this._bodyAnimationDone=new xe,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(qo((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Nt(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(es(null),On(()=>this.expanded&&!this._portal),_i(1)).subscribe(()=>{this._portal=new Uf(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(E(Rk,12),E(zn),E(nS),E(Qr),E(ct),E(Xo,8),E(JG,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&Fi(r,J1e,5),2&t){let s;It(s=Pt())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&ii(W1e,5),2&t){let r;It(r=Pt())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&lt("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Ft([{provide:Rk,useValue:void 0}]),vt,Kn],ngContentSelectors:X1e,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(Ar(Y1e),kn(0),F(1,"div",0,1),we("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),F(3,"div",2),kn(4,1),wt(5,q1e,0,0,"ng-template",3),N(),kn(6,2),N()),2&t&&(q(1),re("@bodyExpansion",i._getExpandedState())("id",i.id),an("aria-labelledby",i._headerId),q(4),re("cdkPortalOutlet",i._portal))},directives:[jf],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[QG.bodyExpansion]},changeDetection:0}),n})();class nTe{}const iTe=Nf(nTe);let Vx=(()=>{class n extends iTe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Se.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(On(d=>!(!d.hideToggle&&!d.togglePosition))):Zl;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=ki(t.opened,t.closed,c,t._inputChanges.pipe(On(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(On(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Wo(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(E(Bx,1),E(ot),E(dl),E(zn),E(JG,8),E(Xo,8),ds("tabindex"))},n.\u0275cmp=$e({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&we("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(an("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),pf("height",i._getHeaderHeight()),lt("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[vt],ngContentSelectors:Q1e,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(Ar(Z1e),F(0,"span",0),kn(1),kn(2,1),kn(3,2),N(),wt(4,K1e,1,1,"span",1)),2&t&&(q(4),re("ngIf",i._showToggle()))},directives:[bs],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}\n'],encapsulation:2,data:{animation:[QG.indicatorRotate]},changeDetection:0}),n})(),eW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ge({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),kk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Un,G1e,rS]]}),n})();var tW=Be(478);Object.create(Error.prototype);const aTe=["*"];var Ux=(()=>(function(n){n.LineHighlight="line-highlight",n.LineNumbers="line-numbers"}(Ux||(Ux={})),Ux))();class cTe{}const iW=new Ce("SECURITY_CONTEXT");let Fk=(()=>{class n{constructor(t,i,r,s,o){this.platform=t,this.securityContext=i,this.http=r,this.sanitizer=o,this.initialMarkedOptions={renderer:new tW.Renderer},this.options=s}get options(){return this._options}set options(t){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),t)}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}compile(t,i=!1,r=!1,s=this.options){const o=this.trimIndentation(t),a=i?this.decodeHtml(o):o,l=r?this.renderEmoji(a):a,c=tW.parse(l,s);return this.sanitizer.sanitize(this.securityContext,c)||""}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(Me(i=>this.handleExtension(t,i)))}highlight(t){if(xf(this.platform)&&"undefined"!=typeof Prism){t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}}renderKatex(t,i){if(!xf(this.platform))return t;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return t.replace(/\$([^\s][^$]*?[^\s])\$/gm,(r,s)=>katex.renderToString(s,i))}decodeHtml(t){if(!xf(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}handleExtension(t,i){const r=t?t.split("?")[0].split(".").splice(-1).join():"";return"md"!==r?"```"+r+"\n"+i+"\n```":i}renderEmoji(t){if(!xf(this.platform))return t;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}}return n.\u0275fac=function(t){return new(t||n)(I(ll),I(iW),I(nm,8),I(cTe,8),I(Xd))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),rW=(()=>{class n{constructor(t,i){this.element=t,this.markdownService=i,this.error=new Ve,this.load=new Ve,this.ready=new Ve,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(t,i=!1){let r=this.markdownService.compile(t,i,this.emoji);r=this.katex?this.markdownService.renderKatex(r,this.katexOptions):r,this.element.nativeElement.innerHTML=r,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(t=>{this.render(t),this.load.emit(t)},t=>this.error.emit(t))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Ux.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const l=this.toLispCase(o);r.item(s).setAttribute(l,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(Fk))},n.\u0275cmp=$e({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start"},outputs:{error:"error",load:"load",ready:"ready"},features:[Kn],ngContentSelectors:aTe,decls:1,vars:0,template:function(t,i){1&t&&(Ar(),kn(0))},encapsulation:2}),n})(),pTe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[Fk,t&&t.loader||[],t&&t.markedOptions||[],{provide:iW,useValue:t&&null!=t.sanitize?t.sanitize:dn.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();function sW(n,e,t){return t?sW(n,e).pipe(Me(i=>be(i)?t(...i):t(i))):new le(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o);let s;try{s=n(r)}catch(o){return void i.error(o)}if(Ke(e))return()=>e(r,s)})}function jx(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new mTe(n,t))}}class mTe{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new _Te(e,this.observables,this.project))}}class _Te extends LU{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(BU(this,t[s],void 0,s))}notifyNext(e,t,i){this.values[i]=t;const r=this.toRespond;if(r.length>0){const s=r.indexOf(i);-1!==s&&r.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class yTe{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new vTe(e,this.accumulator,this.seed,this.hasSeed))}}class vTe extends Et{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}class wTe{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new ETe(e,this.predicate))}}class ETe extends Et{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const STe=["youtubeContainer"];let lW=(()=>{class n{constructor(t,i){this._ngZone=t,this._youtubeContainer=new xe,this._destroyed=new xe,this._playerChanges=new sr(void 0),this._videoId=new sr(void 0),this._height=new sr(390),this._width=new sr(640),this._startSeconds=new sr(void 0),this._endSeconds=new sr(void 0),this._suggestedQuality=new sr(void 0),this._playerVars=new sr(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=xf(i)}get videoId(){return this._videoId.value}set videoId(t){this._videoId.next(t)}get height(){return this._height.value}set height(t){this._height.next(t||390)}get width(){return this._width.value}set width(t){this._width.next(t||640)}set startSeconds(t){this._startSeconds.next(t)}set endSeconds(t){this._endSeconds.next(t)}set suggestedQuality(t){this._suggestedQuality.next(t)}get playerVars(){return this._playerVars.value}set playerVars(t){this._playerVars.next(t)}ngOnInit(){if(!this._isBrowser)return;let t=ut(!0);if(!window.YT||!window.YT.Player){const r=new xe;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>r.next(!0))},t=r.pipe(_i(1),es(!1))}const i=function(n,e,t,i,r,s,o){const a=Ki([e,s]).pipe(jx(Ki([i,r])),Me(([l,c])=>{const[d,f]=l,[p,g]=c;return d?{videoId:d,playerVars:f,width:p,height:g}:void 0}));return Ki([n,a,ut(o)]).pipe(function(n){return wr(function(...n){let e=null;return"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&be(n[0])&&(n=n[0].slice()),t=>t.lift.call(ci([t,...n]),new zU(e))}(n),function(n){return e=>e.lift(new wTe(n))}(([e,t])=>!t),Me(([e])=>e))}(t),function(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new yTe(n,e,t))}}(OTe,void 0),qo())}(this._youtubeContainer,this._videoId,t,this._width,this._height,this._playerVars,this._ngZone).pipe(Di(r=>{this._playerChanges.next(r)}),ui(e=>e?cW(e)?ut(e):new le(t=>{let i=!1,r=!1;const s=o=>{r=!0,i||(o.target.removeEventListener("onReady",s),t.next(o.target))};return e.addEventListener("onReady",s),()=>{i=!0,r||(r=>{cW(r)||r.destroy()})(e)}}).pipe(_i(1),es(void 0)):ut(void 0)),Gn(this._destroyed),fc(new xe));i.subscribe(r=>{this._player=r,r&&this._pendingPlayerState&&this._initializePlayer(r,this._pendingPlayerState),this._pendingPlayerState=void 0}),function(n,e,t){Ki([n,e,t]).subscribe(([i,r,s])=>i&&i.setSize(r,s))}(i,this._width,this._height),function(n,e){Ki([n,e]).subscribe(([t,i])=>t&&i&&t.setPlaybackQuality(i))}(i,this._suggestedQuality),function(n,e,t,i,r,s){const o=Ki([t,i]).pipe(Me(([d,f])=>({startSeconds:d,endSeconds:f}))),a=o.pipe(Lk(n,d=>!!d&&!function(n){const e=n.getPlayerState();return e!==YT.PlayerState.UNSTARTED&&e!==YT.PlayerState.CUED}(d))),l=e.pipe(Lk(n,(d,f)=>!!d&&d.videoId!==f));ki(n.pipe(Lk(Ki([e,o]),([d,f],p)=>!(!p||d==p.videoId&&!f.startSeconds&&!f.endSeconds))),l,a).pipe(jx(Ki([n,e,o,r])),Me(([d,f])=>f),Gn(s)).subscribe(([d,f,p,g])=>{!f||!d||(d.videoId=f,d.cueVideoById(Object.assign({videoId:f,suggestedQuality:g},p)))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}createEventsBoundInZone(){return{}}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(t,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:l}=i;switch(r){case YT.PlayerState.PLAYING:t.playVideo();break;case YT.PlayerState.PAUSED:t.pauseVideo();break;case YT.PlayerState.CUED:t.stopVideo()}null!=s&&t.setPlaybackRate(s),null!=o&&t.setVolume(o),null!=a&&(a?t.mute():t.unMute()),null!=l&&t.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(t){return this._playerChanges.pipe(Or(i=>i?sW(r=>{i.addEventListener(t,r)},r=>{try{i.removeEventListener&&i.removeEventListener(t,r)}catch(s){}}):ut()),i=>new le(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),Gn(this._destroyed))}}return n.\u0275fac=function(t){return new(t||n)(E(ft),E(ll))},n.\u0275cmp=$e({type:n,selectors:[["youtube-player"]],viewQuery:function(t,i){if(1&t&&ii(STe,5),2&t){let r;It(r=Pt())&&(i.youtubeContainer=r.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(t,i){1&t&&rt(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();function OTe(n,[e,t,i]){if(n&&t&&n.playerVars!==t.playerVars)n.destroy();else{if(!t)return void(n&&n.destroy());if(n)return n}const r=i.runOutsideAngular(()=>new YT.Player(e,t));return r.videoId=t.videoId,r.playerVars=t.playerVars,r}function cW(n){return"getPlayerStatus"in n}function Lk(n,e){return wr(jx(n),On(([t,i])=>e(i,t)),Me(([t])=>t))}let RTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();function Yb(n){return!0===n}function no(n){return null==n}function Ia(n){return!no(n)}function Bk(n){return Boolean(n)}function hW(n){return no(n)?n:JSON.parse(JSON.stringify(n))}const $x=n=>{const t=n instanceof Date;if("object"!=typeof n||null===n||t)return n;Object.freeze(n);const r="function"==typeof n,s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(o=>{s.call(n,o)&&(!r||"caller"!==o&&"callee"!==o&&"arguments"!==o)&&null!==n[o]&&("object"==typeof n[o]||"function"==typeof n[o])&&!Object.isFrozen(n[o])&&$x(n[o])}),n};function fW(n){return Ia(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const mW="NGXS_DATA_META",zk="NGXS_META",_W="NGXS_ARGUMENT_REGISTRY_META";let yW=(()=>{class n{constructor(t){this.sequence$=new sr(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(I(fh,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();function Xb(n){return n[mW]}let Pa=(()=>{class n{constructor(t,i,r){n.store=t.get(fh),n.ngZone=t.get(ft),n.factory=i,n.context=r,n.computed=t.get(yW)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(t){return new(t||n)(I(kt),I(f$),I(h$))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();class Rr{constructor(){Rr.statesCachedMeta.clear()}static createStateContext(e){return Pa.context.createStateContext(e)}static ensureMappedState(e){if(no(Pa.factory)||no(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Ia(e.name)?Rr.statesCachedMeta.get(e.name):null)||Rr.ensureMeta(e)}static getRepositoryByInstance(e){var t;const r=null!==(t=Xb(Rr.getStateClassByInstance(e)))&&void 0!==t?t:null;if(no(r))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return r}static getStateClassByInstance(e){return(null!=e?e:{}).constructor}static clearMetaByInstance(e){const t=Rr.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(let s=0;s<r.length;s++){const o=null==t?void 0:t.getPayloadTypeByIndex(s);Ia(o)&&(i[o]=r[s])}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=Rr.createPayload(t,i);return new(function(n){return class{constructor(t){t&&Object.keys(t).forEach(i=>{this[i]=t[i]})}static get type(){return n}}}(e.type))(r)}static ensureMeta(e){var t;const i=Ia(e.name)?null===(t=Pa.factory.states)||void 0===t?void 0:t.find(r=>r.name===e.name):null;return Ia(i)&&Ia(e.name)&&Rr.statesCachedMeta.set(e.name,i),i}}Rr.statesCachedMeta=new Map,Rr.\u0275fac=function(e){return new(e||Rr)},Rr.\u0275prov=ue({token:Rr,factory:Rr.\u0275fac}),new Mf(1);class nAe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Ia(null==e?void 0:e.constructor)?e.constructor.name:e} to PlainObject`)}}function vW(n){var e;return null!==(e=n.NGXS_OPTIONS_META)&&void 0!==e?e:{name:""}}function bW(n){var e;const t=vW(n),i=null!==(e=t.children)&&void 0!==e?e:[],s=hW(void 0===t.defaults?{}:t.defaults);if(i.length){if(fW(s))return function(n,e){return e.reduce((t,i)=>{const r=vW(i);if(function(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=bW(i),t},null!=n?n:{})}(s,i);throw new nAe(s)}return s}function wW(n){var e;return null!==(e=n.__NGXS_COMPUTED_OPTION__)&&void 0!==e?e:null}function EW(){var n,e;return null!==(e=null===(n=null==Pa?void 0:Pa.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==e?e:0}function oAe(n){let e=!1;return zv(n)&&(e=!0),e}function Uk(n){return n[_W]}class aAe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class lAe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){var t;return null!==(t=this.payloadMap.get(e))&&void 0!==t?t:null}getArgumentNameByIndex(e){var t;return null!==(t=this.argumentMap.get(e))&&void 0!==t?t:null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(Bk(this.argumentMap.has(e))||Bk(this.payloadMap.has(e)))throw new aAe(e,t)}}function jk(n){return Co()?$x(n):n}function fAe(n){return{enumerable:!0,configurable:!0,get(){const e=Xb(n),t=Rr.ensureMappedState(e.stateMeta);return Rr.createStateContext(t)}}}function Hk(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>Co()?$x(n.getState()):n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}})}function si(){return(n,e,t)=>{!function(n,e){if(!function(n,e){var t;let i=n,r=!1;if(fW(i))for(;null!==i;){if(Yb(null==i?void 0:i.hasOwnProperty(e))){r=!!(null===(t=Object.getOwnPropertyDescriptor(i,e))||void 0===t?void 0:t.get);break}i=Object.getPrototypeOf(i)}return r}(n,null==e?void 0:e.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function(n){return no(wW(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),wW(n)}(this),o=null==s?void 0:s.get(i);if(Yb(null==o?void 0:o.isObservable))return null==o?void 0:o.value;if(no(o)||o.sequenceId!==EW()){s.delete(i);const l=i.apply(this,r);return s.set(i,{value:l,sequenceId:EW(),isObservable:oAe(l)}),l}return o.value},t}}const yAe={cancelUncompleted:!0,insideZone:!1};function en(n=yAe){return(e,t,i)=>{!function(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(e,i);const r=i.value,s=t.toString();return i.value=function(...o){const a=this;let l=null;const c=Rr.getRepositoryByInstance(a),d=c.operations;let f=d[s];const p=c.stateMeta,g=Uk(r);if(no(f)){const w=function(n){var e,t,i;return null!==(i=null===(t=null===(e=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===e?void 0:e[0])||void 0===t?void 0:t.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==i?i:[]}(r),M=function(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)Ia(null==r?void 0:r.getArgumentNameByIndex(o))?s+=null==r?void 0:r.getArgumentNameByIndex(o):Ia(null==r?void 0:r.getPayloadTypeByIndex(o))?s+=null==r?void 0:r.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:p.path,methodName:s,argumentsNames:w,argumentRegistry:g});f=d[s]={type:M,options:{cancelUncompleted:n.cancelUncompleted}},p.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}]}Rr.ensureMappedState(p).instance[f.type]=()=>{var w;return Yb(n.insideZone)?null===(w=Pa.ngZone)||void 0===w||w.run(()=>{l=r.apply(a,o)}):l=r.apply(a,o),zv(l)?ut(null).pipe(Me(()=>l)):l};const v=Rr.createAction(f,o,g),C=Pa.store.dispatch(v);return zv(l)?function(n,e){return Lv([n,e]).pipe(Me(t=>t.pop()))}(C,l):l},i}}function Ss(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function(n,e){const t=n[e];return no(Uk(t))&&Object.defineProperties(t,{[_W]:{enumerable:!0,configurable:!0,value:new lAe}}),Uk(t)})(e,t).createPayloadType(r,t,i)}}function bh(){return n=>{const e=function(n){if(function(n){return!Bk(n)}(n.hasOwnProperty(zk))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,zk,{value:e})}return function(n){var e;return null===(e=n)||void 0===e?void 0:e[zk]}(n)}(n);if(no(e.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,e){(function(n){var e;const t=null!==(e=Xb(n))&&void 0!==e?e:null;return(no(t)||(null==t?void 0:t.stateClass)!==n)&&function(n){Object.defineProperty(n,mW,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),Xb(n)}(n)).stateMeta=e}(n,e),function(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>hW(t)},context:fAe(n)})}(n,e,bW(n)),function(n){var e,t;const i=Xb(n),r=null!==(t=null===(e=null==i?void 0:i.stateMeta)||void 0===e?void 0:e.name)&&void 0!==t?t:null;if(Ia(r)){const s=`__${r}__selector`;Object.defineProperties(n.prototype,{[s]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Ia(this[s]))return this[s];if(no(Pa.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[s]=Pa.store.select(n).pipe(Me(o=>Co()?$x(o):o),jc({refCount:!0,bufferSize:1})),this[s]}}})}}(n)}}var Wx=(()=>(function(n){n.ID="id"}(Wx||(Wx={})),Wx))(),Kb=(()=>(function(n){n.ASC="asc",n.DESC="desc"}(Kb||(Kb={})),Kb))();let $k=(()=>{class n{constructor(){this.browserStorageEvents$=new xe,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){var r;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var i;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(i=this.ngxsDataDoCheck)||void 0===i||i.call(this))}markAsDirtyAfterReset(){var i;this.dirty=!0,null===(i=this.ngxsDataAfterReset)||void 0===i||i.call(this)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),CAe=(()=>{class n extends $k{get snapshot(){return jk(this.getState())}get ctx(){return Hk(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275prov=ue({token:n,factory:n.\u0275fac}),Le([si(),Xe("design:type",Object),Xe("design:paramtypes",[])],n.prototype,"snapshot",null),Le([en(),Cs(0,Ss("patchValue")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"patchState",null),Le([en(),Cs(0,Ss("stateValue")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"setState",null),Le([en(),Xe("design:type",Function),Xe("design:paramtypes",[]),Xe("design:returntype",void 0)],n.prototype,"reset",null),n})(),wAe=(()=>{class n extends $k{constructor(){super(...arguments),this.primaryKey=Wx.ID,this.comparator=null}get snapshot(){return jk(this.getState())}get ids(){return this.snapshot.ids}get entities(){return this.snapshot.entities}get entitiesArray(){const t=this.snapshot;return t.ids.map(i=>t.entities[i])}get ids$(){return this.state$.pipe(Me(t=>t.ids))}get entities$(){return this.state$.pipe(Me(t=>t.entities))}get entitiesArray$(){return this.state$.pipe(Me(t=>t.ids.map(i=>t.entities[i])))}get ctx(){return Hk(this.context)}setComparator(t){return this.comparator=t,this}dispatch(t){return this.ctx.dispatch(t)}getState(){return this.ctx.getState()}selectId(t){var i;return null===(i=t)||void 0===i?void 0:i[this.primaryKey]}selectOne(t){var i;return null!==(i=this.snapshot.entities[t])&&void 0!==i?i:null}selectAll(){const t=this.getState();return t.ids.map(i=>t.entities[i])}reset(){this.setEntitiesState(this.initialState),this.markAsDirtyAfterReset()}addOne(t){this.addEntityOne(t)}addMany(t){this.addEntitiesMany(t)}setOne(t){this.setEntityOne(t)}setMany(t){this.setEntitiesMany(t)}setAll(t){this.setEntitiesAll(t)}updateOne(t){this.updateEntitiesMany([t])}updateMany(t){this.updateEntitiesMany(t)}upsertOne(t){this.upsertEntitiesMany([t])}upsertMany(t){this.upsertEntitiesMany(t)}removeOne(t){this.removeEntitiesMany([t])}removeMany(t){this.removeEntitiesMany(t)}removeByEntity(t){const i=this.selectId(t);this.removeEntitiesMany([i])}removeByEntities(t){const i=[];for(const r of t){const s=this.selectId(r);i.push(s)}this.removeEntitiesMany(i)}removeAll(){this.setEntitiesState(this.initialState)}sort(t){this.comparator=null!=t?t:this.comparator,no(this.comparator)?console.warn("You must set the compare function before sorting."):this.setEntitiesState(this.getState())}addEntityOne(t){const i=this.getState(),r=this.selectIdValue(t);r in i.entities||this.setEntitiesState(Object.assign(Object.assign({},i),{ids:[...i.ids,r],entities:Object.assign(Object.assign({},i.entities),{[r]:t})}))}addEntitiesMany(t){const i=this.getState(),r={},s=[];for(const o of t){const a=this.selectIdValue(o);a in i.entities||a in r||(s.push(a),r[a]=o)}s.length&&this.setEntitiesState(Object.assign(Object.assign({},i),{ids:[...i.ids,...s],entities:Object.assign(Object.assign({},i.entities),r)}))}setEntitiesAll(t){const i=this.getState(),r={},s=[];for(const o of t){const a=this.selectIdValue(o);a in r||(s.push(a),r[a]=o)}this.setEntitiesState(Object.assign(Object.assign({},i),{ids:s,entities:r}))}setEntityOne(t){const i=this.getState(),r=this.selectIdValue(t);this.setEntitiesState(Object.assign(Object.assign({},i),r in i.entities?{entities:Object.assign(Object.assign({},i.entities),{[r]:t})}:{ids:[...i.ids,r],entities:Object.assign(Object.assign({},i.entities),{[r]:t})}))}setEntitiesMany(t){for(const i of t)this.setEntityOne(i)}updateEntitiesMany(t){const i=this.getState(),r=t.filter(a=>a.id in i.entities);if(0===r.length)return;const s=this.generateKeyMap(i),o=Object.assign({},i.entities);for(const a of r){const l=this.updateOrigin(o,a),c=this.selectIdValue(l);c!==a.id&&(delete s[a.id],delete o[a.id]),s[a.id]=c,o[c]=l}this.setEntitiesState(Object.assign(Object.assign({},i),{ids:i.ids.map(a=>{var l;return null!==(l=s[a])&&void 0!==l?l:a}),entities:o}))}upsertEntitiesMany(t){const i=this.getState(),r=[],s=[];for(const o of t){const a=this.selectIdValue(o);a in i.entities?r.push({id:a,changes:o}):s.push(o)}this.updateMany(r),this.addMany(s)}removeEntitiesMany(t){const i=this.getState(),r=this.generateKeyMap(i),s=Object.assign({},i.entities);for(const o of t)o in s&&(delete r[o],delete s[o]);this.setEntitiesState(Object.assign(Object.assign({},i),{ids:i.ids.filter(o=>o in r),entities:s}))}setEntitiesState(t){const i=this.sortKeysByComparator(t.ids,t.entities);this.ctx.setState(Object.assign(Object.assign({},t),{ids:i,entities:t.entities}))}sortKeysByComparator(t,i){if(no(this.comparator))return t;const r=t.slice(),s=this.comparator;return"function"==typeof s?r.sort((o,a)=>s(i[o],i[a])):this.sortByComparatorOptions(r,s,i)}sortByComparatorOptions(t,i,r){switch(null==i?void 0:i.sortByOrder){case Kb.ASC:return t.sort((s,o)=>function(n,e,t){return(null==e?void 0:e[n])>(null==t?void 0:t[n])?1:(null==e?void 0:e[n])<(null==t?void 0:t[n])?-1:0}(null==i?void 0:i.sortBy,r[s],r[o]));case Kb.DESC:return t.sort((s,o)=>function(n,e,t){return(null==e?void 0:e[n])>(null==t?void 0:t[n])?-1:(null==e?void 0:e[n])<(null==t?void 0:t[n])?1:0}(null==i?void 0:i.sortBy,r[s],r[o]));default:return Co()&&console.warn(`Invalid --\x3e { sortByOrder: "${null==i?void 0:i.sortByOrder}" } not supported!`),t}}generateKeyMap(t){return t.ids.reduce((i,r)=>(i[r]=r,i),{})}updateOrigin(t,i){return Object.assign(Object.assign({},t[i.id]),i.changes)}selectIdValue(t){const i=this.selectId(t);return no(i)&&Co()&&console.warn(`The entity passed to the 'selectId' implementation returned ${i}.`,"You should probably provide your own 'selectId' implementation.","The entity that was passed:",t,"The current `selectId` implementation: (entity: V): K => entity.id"),i}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275prov=ue({token:n,factory:n.\u0275fac}),Le([si(),Xe("design:type",Object),Xe("design:paramtypes",[])],n.prototype,"snapshot",null),Le([si(),Xe("design:type",Array),Xe("design:paramtypes",[])],n.prototype,"ids",null),Le([si(),Xe("design:type",Object),Xe("design:paramtypes",[])],n.prototype,"entities",null),Le([si(),Xe("design:type",Array),Xe("design:paramtypes",[])],n.prototype,"entitiesArray",null),Le([si(),Xe("design:type",le),Xe("design:paramtypes",[])],n.prototype,"ids$",null),Le([si(),Xe("design:type",le),Xe("design:paramtypes",[])],n.prototype,"entities$",null),Le([si(),Xe("design:type",le),Xe("design:paramtypes",[])],n.prototype,"entitiesArray$",null),Le([en(),Xe("design:type",Function),Xe("design:paramtypes",[]),Xe("design:returntype",void 0)],n.prototype,"reset",null),Le([en(),Cs(0,Ss("entity")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"addOne",null),Le([en(),Cs(0,Ss("entities")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"addMany",null),Le([en(),Cs(0,Ss("entity")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"setOne",null),Le([en(),Cs(0,Ss("entities")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"setMany",null),Le([en(),Cs(0,Ss("entities")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"setAll",null),Le([en(),Cs(0,Ss("update")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"updateOne",null),Le([en(),Cs(0,Ss("updates")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"updateMany",null),Le([en(),Cs(0,Ss("entity")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"upsertOne",null),Le([en(),Cs(0,Ss("entities")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"upsertMany",null),Le([en(),Cs(0,Ss("id")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"removeOne",null),Le([en(),Cs(0,Ss("ids")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"removeMany",null),Le([en(),Cs(0,Ss("entity")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"removeByEntity",null),Le([en(),Cs(0,Ss("entities")),Xe("design:type",Function),Xe("design:paramtypes",[Array]),Xe("design:returntype",void 0)],n.prototype,"removeByEntities",null),Le([en(),Xe("design:type",Function),Xe("design:paramtypes",[]),Xe("design:returntype",void 0)],n.prototype,"removeAll",null),Le([en(),Cs(0,Ss("comparator")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"sort",null),n})(),Wm=(()=>{class n extends $k{get snapshot(){return jk(this.getState())}get ctx(){return Hk(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275prov=ue({token:n,factory:n.\u0275fac}),Le([si(),Xe("design:type",Object),Xe("design:paramtypes",[])],n.prototype,"snapshot",null),Le([en(),Cs(0,Ss("patchValue")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"patchState",null),Le([en(),Cs(0,Ss("stateValue")),Xe("design:type",Function),Xe("design:paramtypes",[Object]),Xe("design:returntype",void 0)],n.prototype,"setState",null),Le([en(),Xe("design:type",Function),Xe("design:paramtypes",[]),Xe("design:returntype",void 0)],n.prototype,"reset",null),n})();function Gk(){return On(n=>null!=n)}const EAe={};function Wk(...n){const e=n[n.length-1];let t=n,i=EAe;return"object"==typeof e&&(i=e,t=t.slice(0,-1)),r=>r.pipe(ar(...t),qo(i.compare),jc(1))}const Qm=new Ce("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),gF=new Ce("ngx-window",{providedIn:"root",factory:()=>function(n){return xf(n)?window:null}(Tc(ll))}),kOe=new Ce("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(Tc(gF))}),mF=new Ce("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Tc(gF),Tc(kOe))});let Ns=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){(this.settings.enableTracing||Co())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o){try{const a=new Map;i&&a.set("event_category",i),r&&a.set("event_label",r),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",t,l):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(I(Qm),I(ct),I(mF))},n.\u0275prov=ue({factory:function(){return new n(I(Qm),I(ct),I(mF))},token:n,providedIn:"root"}),n})();const LOe={provide:bf,multi:!0,useFactory:function(n,e,t){return()=>pl(this,void 0,void 0,function*(){var i;if(!n.trackingCode)return void(Co()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Co()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Co()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(i=null==n?void 0:n.initCommands)&&void 0!==i?i:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const r=t.createElement("script");r.async=!0,r.src=n.uri,n.nonce&&r.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(r)})},deps:[Qm,mF,ct]};new Ce("ngx-google-analytics-routing-settings",{factory:()=>({})});let _F=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:Qm,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},LOe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[]]}),n})(),a0=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new Mf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),UOe=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new Se,this.token=r,this.subscriptions.add(t.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}}return n.\u0275fac=function(t){return new(t||n)(I(a0),I(gF),I(Qm))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const jOe=new Ce("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),Mq=[a0,UOe,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new Se;try{this.storage=localStorage}catch(r){}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){var t,i;const r=null===(i=null===(t=this.storage)||void 0===t?void 0:t.getItem)||void 0===i?void 0:i.call(t,this.key);if(null==r)return"not-set";const s=r.trim().toLowerCase();switch(s){case"given":case"rescinded":return s;default:return"not-set"}}saveConsent(t){var i,r;null===(r=null===(i=this.storage)||void 0===i?void 0:i.setItem)||void 0===r||r.call(i,this.key,t)}}return n.\u0275fac=function(t){return new(t||n)(I(a0),I(jOe))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})()];function $Oe(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let WOe=(()=>{class n{static forRoot(t){const{providers:i=[]}=_F.forRoot(t.gaToken,function(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[$Oe({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[...Mq,{provide:bf,multi:!0,useFactory:()=>()=>{},deps:Mq}],imports:[[_F]]}),n})();const qOe=["bodyCanvas"];let YOe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new Ve,this.nodeDrag=new Ve,this.nodeClick=new Ve,this.nodeHoverStart=new Ve,this.nodeHoverStop=new Ve,this.initialized=new Ve,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){var i;this._scene=t,null===(i=this.bodyUI)||void 0===i||i.setScene(t)}get rotation(){return this._rotation}set rotation(t){var i;this._rotation=t,null===(i=this.bodyUI)||void 0===i||i.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){var i;this._rotationX=t,null===(i=this.bodyUI)||void 0===i||i.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){var i;this._zoom=t,null===(i=this.bodyUI)||void 0===i||i.setZoom(t)}get target(){return this._target}set target(t){var i;this._target=t,null===(i=this.bodyUI)||void 0===i||i.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t;return pl(this,void 0,void 0,function*(){const i=this.bodyCanvas.nativeElement,r=new nxe({id:"body-ui",canvas:i,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),this.bodyUI=r,window.bodyUI=r,(null===(t=this.scene)||void 0===t?void 0:t.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))],this.initialized.emit()})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=$e({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(t,i){if(1&t&&ii(qOe,5,ot),2&t){let r;It(r=Pt())&&(i.bodyCanvas=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(t,i){1&t&&rt(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),XOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn]]}),n})();function eIe(n,e){if(1&n&&(F(0,"li",4),Re(1),hn(2,"json"),N()),2&n){const t=e.$implicit;q(1),Cw(" ",t[0],": ",gn(2,2,t[1])," ")}}function tIe(n,e){if(1&n&&(F(0,"div",1),F(1,"div"),Re(2),N(),F(3,"ul",2),wt(4,eIe,3,4,"li",3),N(),N()),2&n){const t=e.$implicit;q(2),Ai(t[0]),q(2),re("ngForOf",t[1])}}let nIe=(()=>{class n{constructor(t,i){this.clsName="ccf-store-debug",this.root={},this.subscriptions=new Se;const r=t.subscribe(s=>{this.root=s,i.markForCheck()});this.subscriptions.add(r)}get data(){return Object.entries(this.root).map(([s,o])=>[s,Object.entries(o)]).filter(([s,o])=>o.length>0)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E(fh),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-store-debug"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},decls:1,vars:1,consts:[["class","state",4,"ngFor","ngForOf"],[1,"state"],[1,"kvlist"],["class","kvpair",4,"ngFor","ngForOf"],[1,"kvpair"]],template:function(t,i){1&t&&wt(0,tIe,5,2,"div",0),2&t&&re("ngForOf",i.data)},directives:[Yl],pipes:[I3],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})(),iIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn]]}),n})();new Ce("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const lIe=["carouselContainer"],cIe=["itemlist"],uIe=["itemcontainer"];function dIe(n,e){if(1&n){const t=rr();F(0,"mat-icon",9),we("touchstart",function(){return rn(t),nt().scroll("left")})("touchend",function(){return rn(t),nt().stopScroll()})("click",function(){return rn(t),nt().shift("left")})("mousedown",function(){return rn(t),nt().scroll("left")})("mouseup",function(){return rn(t),nt().stopScroll()}),Re(1,"chevron_left"),N()}2&n&&lt("disabled",nt().onLeft)}function hIe(n,e){if(1&n&&(F(0,"div",15),Re(1),N()),2&n){const t=nt().$implicit,i=nt();q(1),Ai(i.occurenceData[t.id]||0)}}function fIe(n,e){if(1&n){const t=rr();F(0,"div",10),we("click",function(){const s=rn(t).$implicit;return nt().selectOrgan(s)}),rt(1,"mat-icon",11),F(2,"div",12),F(3,"div",13),Re(4),N(),wt(5,hIe,2,1,"div",14),N(),N()}if(2&n){const t=e.$implicit,i=nt();lt("disabled",t.disabled)("selected",i.isSelected(t)),q(1),qy("svgIcon",t.src),q(3),Ai(t.name),q(1),re("ngIf",void 0!==t.numResults)}}function pIe(n,e){if(1&n){const t=rr();F(0,"mat-icon",16),we("touchstart",function(){return rn(t),nt().scroll("right")})("touchend",function(){return rn(t),nt().stopScroll()})("click",function(){return rn(t),nt().shift("right")})("mousedown",function(){return rn(t),nt().scroll("right")})("mouseup",function(){return rn(t),nt().stopScroll()}),Re(1,"chevron_right"),N()}2&n&&lt("disabled",nt().onRight)}const l0=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_54449"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/FMA_7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/FMA_7213"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name)).filter(n=>!0!==n.disabled);let Aq=(()=>{class n{constructor(){this.clsName="ccf-organ-selector",this.multiselect=!1,this.displayErrors=!1,this.organList=l0,this.selectedOrgans=[],this.expanded=!1,this.organsChanged=new Ve,this.onLeft=!0,this.onRight=!1,this.step=72}set occurenceData(t){this._occurenceData=t}get occurenceData(){return this._occurenceData}ngAfterViewInit(){const{carouselContainer:t}=this;this.sensor=new UG.ResizeSensor(t.nativeElement,()=>{this.set()})}ngOnChanges(t){"organList"in t&&this.set()}ngOnDestroy(){this.sensor.detach()}get error(){return!(!this.displayErrors||0===this.selectedOrgans.length)}shift(t){const{itemList:i}=this;let r=parseInt(i.nativeElement.style.left,10)||0;this.onLeft&&"left"===t||this.onRight&&"right"===t||(r="right"===t?r-this.step:r+this.step,i.nativeElement.style.left=r+"px",this.setLeftRight(r))}scroll(t){this.timeoutHandler=setInterval(()=>{this.shift(t)},200)}stopScroll(){this.timeoutHandler&&(clearInterval(this.timeoutHandler),this.timeoutHandler=void 0)}selectOrgan(t){this.selectedOrgans=this.multiselect?this.selectedOrgans.includes(t)?this.selectedOrgans.filter(i=>t!==i):this.selectedOrgans.concat([t]):[t],this.organsChanged.emit(this.selectedOrgans)}isSelected(t){return!!this.selectedOrgans.includes(t)}set(){const{itemList:t,itemContainer:i,carouselContainer:r}=this,s=parseInt(t.nativeElement.style.left,10)||0;if(t.nativeElement.offsetWidth>=this.organList.length*this.step)t.nativeElement.style.left="0px",this.onLeft=!0,this.onRight=!0;else{this.setLeftRight(s);const o=this.step*Math.floor(r.nativeElement.offsetWidth/this.step)-64;i.nativeElement.style.width=`${o}px`}}setWidth(){const{itemContainer:t,carouselContainer:i}=this,r=this.step*Math.floor(i.nativeElement.offsetWidth/this.step)-64;t.nativeElement.style.width=`${r}px`}setLeftRight(t){const{itemContainer:i}=this;this.onLeft=0===t,this.onRight=t<=i.nativeElement.offsetWidth-this.organList.length*this.step}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=$e({type:n,selectors:[["ccf-organ-selector"]],viewQuery:function(t,i){if(1&t&&(ii(lIe,7),ii(cIe,7),ii(uIe,7)),2&t){let r;It(r=Pt())&&(i.carouselContainer=r.first),It(r=Pt())&&(i.itemList=r.first),It(r=Pt())&&(i.itemContainer=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{multiselect:"multiselect",displayErrors:"displayErrors",organList:"organList",selectedOrgans:"selectedOrgans",expanded:"expanded",occurenceData:"occurenceData"},outputs:{organsChanged:"organsChanged"},features:[Kn],decls:9,vars:8,consts:[["matTooltip","Select the organ your tissue block is from.",1,"container",3,"matTooltipDisabled"],["carouselContainer",""],["class","carousel-left-icon",3,"disabled","touchstart","touchend","click","mousedown","mouseup",4,"ngIf"],[1,"carousel-item-container"],["itemcontainer",""],[1,"carousel-item-list"],["itemlist",""],["class","carousel-item",3,"disabled","selected","click",4,"ngFor","ngForOf"],["class","carousel-right-icon",3,"disabled","touchstart","touchend","click","mousedown","mouseup",4,"ngIf"],[1,"carousel-left-icon",3,"touchstart","touchend","click","mousedown","mouseup"],[1,"carousel-item",3,"click"],[1,"carousel-icon",3,"svgIcon"],[1,"carousel-text-container"],[1,"carousel-text"],["class","num-results",4,"ngIf"],[1,"num-results"],[1,"carousel-right-icon",3,"touchstart","touchend","click","mousedown","mouseup"]],template:function(t,i){1&t&&(F(0,"div",0,1),wt(2,dIe,2,2,"mat-icon",2),F(3,"div",3,4),F(5,"div",5,6),wt(7,fIe,6,7,"div",7),N(),N(),wt(8,pIe,2,2,"mat-icon",8),N()),2&t&&(lt("expanded",i.expanded)("error",i.error),re("matTooltipDisabled",i.multiselect),q(2),re("ngIf",!i.expanded),q(5),re("ngForOf",i.organList),q(1),re("ngIf",!i.expanded))},directives:[lc,bs,Yl,Ps],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:space-between}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-left-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-right-icon[_ngcontent-%COMP%]{font-size:2rem;transform:scaleY(1.2);height:2rem;width:2rem;cursor:pointer}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-left-icon.disabled[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-right-icon.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-left-icon[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-right-icon[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]{overflow:hidden;height:100%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]{position:relative;left:0rem;display:flex;transition:all .2s linear;height:100%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;cursor:pointer;padding:.25rem .5rem;height:5rem;transition:.6s}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-icon[_ngcontent-%COMP%]{text-align:center;width:3.5rem;height:2rem}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-text-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:4rem;justify-content:center;text-align:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-text-container[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:.625rem;max-width:3.5rem;line-height:.8rem;min-height:1.6rem}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-text-container[_ngcontent-%COMP%]   .num-results[_ngcontent-%COMP%]{font-size:.6875rem;line-height:1.5}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item.disabled[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;height:1rem}[_nghost-%COMP%]   .error-message.hidden[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .expanded[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]{width:100%!important}[_nghost-%COMP%]   .expanded[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]{flex-wrap:wrap;overflow:auto;left:0rem!important}[_nghost-%COMP%]   .expanded[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{height:5rem}"]}),n})(),Dq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir,cc]]}),n})(),gIe=(()=>{class n{constructor(){this.clsName="ccf-opacity-slider",this.opacity=20,this.visible=!0,this.opacityChange=new Ve,this.visibilityToggle=new Ve,this.opacityReset=new Ve}ngOnInit(){this.prevOpacity=this.visible?0:20}reset(){this.prevOpacity=20}changeOpacity(t){this.opacity=parseInt(t,10),this.opacityChange.emit(this.opacity)}toggleVisibility(){const t=this.opacity;this.opacity=this.prevOpacity,this.prevOpacity=t,this.visibilityToggle.emit(),this.opacityChange.emit(this.opacity)}resetOpacity(){this.prevOpacity=0,this.opacityReset.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=$e({type:n,selectors:[["ccf-opacity-slider"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{opacity:"opacity",visible:"visible"},outputs:{opacityChange:"opacityChange",visibilityToggle:"visibilityToggle",opacityReset:"opacityReset"},decls:10,vars:17,consts:[[1,"slider-box"],[1,"slider-and-label"],[1,"slider",3,"step","min","max","value","input"],[1,"opacity-value"],[1,"icons"],["matRipple","","svgIcon","app:visibility_off",1,"visibility","icon","invisible",3,"matRippleCentered","matRippleUnbounded","click"],["matRipple","","svgIcon","app:visibility_on",1,"visibility","icon","visible",3,"matRippleCentered","matRippleUnbounded","click"],["matRipple","",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"div",1),F(2,"mat-slider",2),we("input",function(s){return i.changeOpacity(s.value)}),N(),F(3,"span",3),Re(4),N(),N(),F(5,"div",4),F(6,"mat-icon",5),we("click",function(){return i.toggleVisibility()}),N(),F(7,"mat-icon",6),we("click",function(){return i.toggleVisibility()}),N(),F(8,"mat-icon",7),we("click",function(){return i.resetOpacity()}),Re(9,"refresh"),N(),N(),N()),2&t&&(q(2),lt("disabled",!i.visible),re("step",1)("min",0)("max",100)("value",i.opacity),q(2),_s("",i.opacity,"%"),q(2),lt("hidden",i.visible),re("matRippleCentered",!0)("matRippleUnbounded",!0),q(1),lt("hidden",!i.visible),re("matRippleCentered",!0)("matRippleUnbounded",!0),q(1),re("matRippleCentered",!0)("matRippleUnbounded",!0))},directives:[Mk,Ps,Ko],styles:["[_nghost-%COMP%]{height:2.25rem;display:flex;align-items:center;justify-content:space-between;border-radius:.1875rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between;height:100%}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]{width:60%;display:flex;align-items:center;height:100%}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]     .mat-slider-wrapper{top:1.125rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .slider.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .opacity-value[_ngcontent-%COMP%]{width:1.5rem;margin-left:.5rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;cursor:pointer!important}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{margin-right:1rem;padding:.25rem;cursor:pointer;transition:.6s;border-radius:.25rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .visibility[_ngcontent-%COMP%]{transition:.6s;cursor:pointer;padding:.25rem;border-radius:.25rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .visibility.hidden[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),n})(),Oq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir,WG,Jl]]}),n})();function mIe(n,e){if(1&n&&(F(0,"div",15),rt(1,"youtube-player",16),N()),2&n){const t=nt(3);q(1),qy("videoId",t.videoID)}}function _Ie(n,e){if(1&n&&(F(0,"mat-expansion-panel",10),F(1,"mat-expansion-panel-header"),F(2,"h2",11),Re(3),N(),N(),F(4,"div",12),rt(5,"markdown",13),wt(6,mIe,2,1,"div",14),N(),N()),2&n){const t=nt(),i=t.index,r=t.$implicit;re("expanded",0===i),q(3),Ai(r.title),q(2),lt("first",0===i),re("data",r.content),q(1),re("ngIf",0===i)}}function yIe(n,e){if(1&n&&(F(0,"div",8),wt(1,_Ie,7,6,"mat-expansion-panel",9),N()),2&n){const t=e.$implicit;q(1),re("ngIf",t)}}let vIe=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){var t;null===(t=document.getElementsByClassName("modal-animated")[0])||void 0===t||t.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return n.\u0275fac=function(t){return new(t||n)(E($m),E(Ok))},n.\u0275cmp=$e({type:n,selectors:[["ccf-info-dialog"]],decls:10,vars:2,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"div",1),F(2,"div",2),F(3,"mat-icon",3),we("click",function(){return i.close()}),Re(4,"clear"),N(),N(),F(5,"div",4),F(6,"h2",5),Re(7),N(),F(8,"mat-dialog-content",6),wt(9,yIe,2,1,"div",7),N(),N(),N(),N()),2&t&&(q(7),Ai(i.infoTitle),q(2),re("ngForOf",i.documentationContents))},directives:[Ps,YG,XG,Yl,bs,Bx,Vx,rW,lW],styles:[".mat-dialog-container{padding:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:3rem;text-align:left}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;cursor:pointer}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:2.25rem;text-align:center}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:3rem;width:50%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%;max-height:17.5rem}"]}),n})(),bIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ik,Ir,kk,RTe,pTe.forRoot({})]]}),n})(),wIe=(()=>{class n{constructor(t){this.http=t,this.markdownContent=new sr([])}readMarkdown(){this.http.get("assets/docs/README.md",{responseType:"text"}).subscribe(t=>{const i=this.parseMarkdown(t);this.markdownContent.next(i)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const s of r)if(s.length){const o=s.split("\n\n");i.push({title:o[0],content:o.splice(1).join("\n\n")})}return i}}return n.\u0275fac=function(t){return new(t||n)(I(nm))},n.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EIe=(()=>{class n{constructor(t,i){this.dialog=t,this.infoButtonService=i,this.infoTitle="",this.subscriptions=new Se,this.subscriptions.add(i.markdownContent.subscribe(r=>{r.length&&this.launchInfoDialog(r)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}launchInfoDialog(t){this.dialog.open(vIe,{autoFocus:!1,panelClass:"modal-animated",width:"60rem",data:{title:this.infoTitle,content:t,videoID:this.videoID}})}onDialogButtonClick(){this.infoButtonService.readMarkdown()}}return n.\u0275fac=function(t){return new(t||n)(E(Gm),E(wIe))},n.\u0275cmp=$e({type:n,selectors:[["ccf-info-button"]],inputs:{infoTitle:"infoTitle",videoID:"videoID"},decls:3,vars:0,consts:[[1,"info-button-wrapper"],["aria-hidden","false","aria-label","Page information",1,"ccf-info-button",3,"click"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"mat-icon",1),we("click",function(){return i.onDialogButtonClick()}),Re(2," info "),N(),N())},directives:[Ps],styles:[".info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.65rem;transition:.6s}.info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.5rem;vertical-align:sub}"]}),n})(),SIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,bIe,Ir,oU]]}),n})(),xIe=(()=>{class n{constructor(t){this.el=t}onInputChange(t){const i=this.el.nativeElement.value;this.el.nativeElement.value=i.replace(/[^0-9]*/g,""),i!==this.el.nativeElement.value&&t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(E(ot))},n.\u0275dir=ge({type:n,selectors:[["input","ccfNumbersOnly",""]],hostBindings:function(t,i){1&t&&we("input",function(s){return i.onInputChange(s)})}}),n})(),MIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})(),Iq=(()=>{class n{get obj(){const t=this.findGlobalObject();return Object.defineProperties(this,{obj:{configurable:!1,writable:!1,value:t}}),t}has(t){const{obj:i}=this;return null!=i&&t in i}get(t,i){var r;const{obj:s}=this;return null!==(r=s&&s[t])&&void 0!==r?r:i}set(t,i){const{obj:r}=this;r&&(r[t]=i)}remove(t){const{obj:i}=this;i&&delete i[t]}findGlobalObject(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;try{return new Function("return this;")()}catch(t){}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wh=(()=>{let n=class extends Wm{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(Gk(),jc(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(ar(...t),qo(),jc(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(ar(...t),qo(),jc(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}};return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275prov=ue({token:n,factory:n.\u0275fac}),Le([si()],n.prototype,"config$",null),n=Le([bh(),ph({name:"globalConfig",defaults:null})],n),n})();!function(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();let OIe=(()=>{class n{constructor(t,i){t&&function(n,e){Uc(n,"mousemove").pipe(zG(1e3),Me(r=>{const{clientWidth:s,clientHeight:o}=n,{clientX:a,clientY:l}=r;return[a,l,s,o].join("_")})).subscribe(r=>e.event("webpage","mousemove",r))}(t.body,i)}}return n.\u0275fac=function(t){return new(t||n)(I(ct),I(Ns))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();function IIe(n,e){if(1&n){const t=rr();F(0,"button",1),we("click",function(){return rn(t),nt().submit(!0)}),Re(1),N()}if(2&n){const t=nt();q(1),_s(" ","not-set"===t.allowTelemetry?"I understand":"Opt in","\n")}}function PIe(n,e){if(1&n){const t=rr();F(0,"button",1),we("click",function(){return rn(t),nt().submit(!1)}),Re(1,"Opt out"),N()}}let RIe=(()=>{class n{constructor(t,i,r){this.consentService=i,this.data=r,this.clsName="ccf-tracking-popup",this.container=t.nativeElement}get allowTelemetry(){return this.consentService.consent}dismiss(){this.data.preClose()}submit(t){this.consentService.setConsent(t?"given":"rescinded"),this.dismiss()}showButton(t){const{allowTelemetry:i}=this;return"not-set"===i||("opt-in"===t?"rescinded"===i:"given"===i)}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(a0),E(NO))},n.\u0275cmp=$e({type:n,selectors:[["ccf-tracking-popup"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},decls:4,vars:2,consts:[["mat-button","","color","basic",3,"click",4,"ngIf"],["mat-button","","color","basic",3,"click"]],template:function(t,i){1&t&&(F(0,"p"),Re(1,"We log usage to improve this service."),N(),wt(2,IIe,2,1,"button",0),wt(3,PIe,2,0,"button",0)),2&t&&(q(2),re("ngIf",i.showButton("opt-in")),q(1),re("ngIf",i.showButton("opt-out")))},directives:[bs,$f],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-width:400px;color:#ffffffb3;background:#323232;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;z-index:9999}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:24px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin:1rem;min-width:6rem;background-color:#007cbe;display:flex;justify-content:center}"],changeDetection:0}),n})(),kIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Gf]]}),n})();new xe;const FIe={initialConfig:{},parse:{},rename:{}};class NIe{constructor(e,t){this.configState=e,this.storedChanges={},this.options=Object.assign(Object.assign({},FIe),t)}addChanges(e){this.storedChanges=Object.assign(Object.assign({},this.storedChanges),e)}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s=i.snapshot,o=Object.assign(Object.assign(Object.assign({},r),s),t);for(const[a,l]of Object.entries(e))this.processChange(a,l,o);i.setConfig(o)}processChange(e,t,i){var r,s;const{options:{parse:o,rename:a}}=this,l=null!==(r=a[e])&&void 0!==r?r:e,c=t.currentValue,d=null!==(s=o[e])&&void 0!==s?s:o[l];if(null==c)delete i[l];else if(d)try{i[l]=d(c)}catch(f){console.warn(`Failed to parse ${e} = ${c}`,f.message)}else i[l]=c}}let LIe=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new NIe(this.configState,this.options)}ngOnInit(){var t;this._init=setTimeout(()=>this.initialize(),null!==(t=this.options.initialDelay)&&void 0!==t?t:0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return n.\u0275fac=function(t){!function(){throw new Error("invalid")}()},n.\u0275dir=ge({type:n,features:[Kn]}),n})();const BIe={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}};var yF;const ou={production:!0,disableDbWorker:!0,dbOptions:{ccfOwlUrl:"https://hubmapconsortium.github.io/hubmap-ontology/ccf.owl",ccfContextUrl:"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld",hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:null!==(yF=localStorage.getItem("HUBMAP_TOKEN"))&&void 0!==yF?yF:""},customization:{theme:"hubmap",header:!0,homeUrl:"https://portal.hubmapconsortium.org/",logoTooltip:"Human BioMolecular Atlas Project"},skipUnsavedChangesConfirmation:!1,googleAnalyticsToken:"G-ERNVZ1Q4KE"};var VIe=Be(815);class UIe{constructor(e){this.value=e}call(e,t){return t.subscribe(new jIe(e,this.value))}}class jIe extends Et{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}class $Ie{constructor(e){this.notifier=e}call(e,t){return t.subscribe(new GIe(e,this.notifier))}}class GIe extends ti{constructor(e,t){super(e),this.hasValue=!1;const i=new jr(this);this.add(i),this.innerSubscription=i;const r=so(t,i);r!==i&&(this.add(r),this.innerSubscription=r)}_next(e){this.hasValue&&super._next(e)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}function vF(n){return"function"==typeof n}function kq(n){return void 0===n}function qIe(n,e,t){return function(r){let s=!!n;return function(n){return"function"==typeof n}(n)&&(s=n(r)),function(n,e){return vF(n)?n(e):kq(n)?e:n}(s?e:t,r)}}function YIe(n,e){return function(i){if(function(n){return null===n||kq(n)}(n)&&i)return i;if(!Array.isArray(i))return[n];const r=i.slice();let s=0;return e>0&&(s=e),r.splice(s,0,n),r}}function c0(n){return function(t){let i=null;for(const r in n){const s=n[r],o=t[r],a=vF(s)?s(o):s;a!==o&&(i||(i=Object.assign({},t)),i[r]=a)}return i||t}}let zi=class extends Wm{constructor(e){super(),this.globalConfig=e,this.user$=this.state$.pipe(ar("user")),this.registrationStarted$=this.state$.pipe(Wk("registrationStarted")),this.useCancelRegistrationCallback$=this.state$.pipe(ar("useCancelRegistrationCallback")),this.registrationCallbackSet$=this.state$.pipe(ar("registrationCallbackSet"))}get skipConfirmation$(){return this.state$.pipe(Wk("skipConfirmation"))}get globalSkipConfirmation$(){return this.globalConfig.getOption("skipUnsavedChangesConfirmation").pipe(Me(e=>null!=e?e:ou.skipUnsavedChangesConfirmation),qo())}get hasChanges$(){return this.state$.pipe(Wk("hasChanges"))}ngxsOnInit(){super.ngxsOnInit(),this.globalConfig.config$.pipe(_i(1),Di(e=>this.setState(c0({registrationCallbackSet:!!e.register,useCancelRegistrationCallback:!!e.cancelRegistration,user:qIe(!!e.user,e.user),registrationStarted:!!e.user||void 0})))).subscribe(),this.initSkipConfirmationListeners()}cancelRegistration(){const{globalConfig:{snapshot:{cancelRegistration:e}},snapshot:{useCancelRegistrationCallback:t,skipConfirmation:i}}=this;t&&(i||confirm("Changes you made may not be saved."))&&(null==e||e())}setUseCancelRegistrationCallback(e){this.ctx.patchState({useCancelRegistrationCallback:e})}setUserName(e){this.ctx.setState(c0({user:c0(e)}))}registrationStarted(){this.ctx.setState(c0({registrationStarted:!0}))}setHasChanges(){const{snapshot:{registrationStarted:e,hasChanges:t}}=this;e&&!t&&this.ctx.patchState({hasChanges:!0})}clearHasChanges(){this.ctx.patchState({hasChanges:!1})}initSkipConfirmationListeners(){const e=i=>this.patchState({skipConfirmation:i});this.globalSkipConfirmation$.pipe(On(i=>i)).subscribe(e),this.hasChanges$.pipe(jx(this.globalSkipConfirmation$),Me(([i,r])=>r||!i),qo()).subscribe(e);const t=i=>(i.preventDefault(),i.returnValue="Changes you made may not be saved.",i.returnValue);this.skipConfirmation$.subscribe(i=>{i?removeEventListener("beforeunload",t):addEventListener("beforeunload",t)})}};zi.\u0275fac=function(e){return new(e||zi)(I(wh))},zi.\u0275prov=ue({token:zi,factory:zi.\u0275fac}),Le([si()],zi.prototype,"skipConfirmation$",null),Le([si()],zi.prototype,"globalSkipConfirmation$",null),Le([si()],zi.prototype,"hasChanges$",null),Le([en()],zi.prototype,"setUseCancelRegistrationCallback",null),Le([en()],zi.prototype,"setUserName",null),Le([en()],zi.prototype,"registrationStarted",null),Le([en()],zi.prototype,"setHasChanges",null),Le([en()],zi.prototype,"clearHasChanges",null),zi=Le([bh(),ph({name:"page",defaults:{user:{firstName:"",lastName:""},registrationStarted:!1,useCancelRegistrationCallback:!1,registrationCallbackSet:!1,skipConfirmation:!0,hasChanges:!1}})],zi);let uc=class extends Wm{constructor(e,t){super(),this.globals=e,this.globalConfig=t}ngxsOnInit(){super.ngxsOnInit(),this.getSourceDB().subscribe(e=>{this.setState(e),ou.production||this.globals.set("db",e)})}getSourceDB(){return this.globalConfig.getOption("baseHref").pipe(Me(e=>(null!=e?e:"")+"assets/reference-organ-data.json"),Or(e=>ci(fetch(e)).pipe(Or(t=>t.json()),Sa(()=>Zl))))}normalizePlacement(e){const i=this.snapshot.placementPatches[null==e?void 0:e.target];if(i){const r=function(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;case"meter":default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(Qv),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(s).scale(o)}(new Ht(Ht.IDENTITY),i),s={x:e.x_translation,y:e.y_translation,z:e.z_translation},[o,a,l]=r.transformAsPoint([s.x,s.y,s.z],[]),c=Object.assign(Object.assign({},e),{target:i.target});return c.x_translation=o,c.y_translation=a,c.z_translation=l,c}return e}getReferenceOrganIri(e,t,i,r){const s=this.snapshot;"KIDNEY"!==e.toUpperCase()&&(i=""),(null==r?void 0:r.sex)&&(t=r.sex);const o=[e,t,i||(null==r?void 0:r.side)].join("|").toUpperCase(),a=Object.keys(s.organIRILookup).find(l=>l.toUpperCase().endsWith(o));return a?s.organIRILookup[a]:void 0}getOrganData(e){var t,i,r;const o=this.snapshot.organSpatialEntities[e];if(!o)return;const a=null!==(t=o.label)&&void 0!==t?t:"",l=l0.find(c=>a.endsWith(c.organ));return l?{organ:l,sex:null===(i=o.sex)||void 0===i?void 0:i.toLowerCase(),side:null===(r=o.side)||void 0===r?void 0:r.toLowerCase()}:void 0}};uc.\u0275fac=function(e){return new(e||uc)(I(Iq),I(wh))},uc.\u0275prov=ue({token:uc,factory:uc.\u0275fac}),uc=Le([bh(),ph({name:"reference",defaults:{organIRILookup:{},organSpatialEntities:{},anatomicalStructures:{},extractionSets:{},sceneNodeLookup:{},simpleSceneNodeLookup:{},placementPatches:{}}})],uc);const CF=l0;let oi=class extends Wm{constructor(e,t,i){super(),this.ga=e,this.injector=t,this.globalConfig=i,this.id$=this.state$.pipe(ar("id")),this.blockSize$=this.state$.pipe(ar("blockSize")),this.rotation$=this.state$.pipe(ar("rotation")),this.position$=this.state$.pipe(ar("position")),this.slicesConfig$=this.state$.pipe(ar("slicesConfig")),this.viewType$=this.state$.pipe(ar("viewType")),this.viewSide$=this.state$.pipe(ar("viewSide")),this.organ$=this.state$.pipe(ar("organ")),this.organIri$=this.state$.pipe(ar("organIri")),this.organDimensions$=this.state$.pipe(ar("organDimensions")),this.sex$=this.state$.pipe(ar("sex")),this.side$=this.state$.pipe(ar("side")),this.showPrevious$=this.state$.pipe(ar("showPrevious")),this.extractionSites$=this.state$.pipe(ar("extractionSites")),this.anatomicalStructures$=this.state$.pipe(ar("anatomicalStructures")),this.extractionSets$=this.state$.pipe(ar("extractionSets"))}get modelChanged$(){const e=["viewType","viewSide","showPrevious"],t=Object.keys(this.initialState).filter(i=>!e.includes(i));return this.state$.pipe(zG(0,void 0,{leading:!1,trailing:!0}),qo((i,r)=>{for(const s of t)if(i[s]!==r[s])return!1;return!0}),e=>e.lift(new UIe(void 0)))}ngxsOnInit(){super.ngxsOnInit(),this.referenceData=this.injector.get(uc),this.page=this.injector.get(zi),this.globalConfig.getOption("organ").pipe(Gk(),Or(e=>{var t,i;const r=e.name.toLowerCase(),s=e.side;let a=this.idMatches(e.ontologyId,s);return a||(a=this.nameMatches(r,s)),a?(this.ctx.patchState({organ:a,sex:null===(t=e.sex)||void 0===t?void 0:t.toLowerCase(),side:null===(i=null==a?void 0:a.side)||void 0===i?void 0:i.toLowerCase()}),this.referenceData.state$.pipe(Hg(100),_i(1),Sk(200),Di(()=>this.onOrganIriChange()))):Zl})).subscribe(),this.modelChanged$.pipe(function(n){return e=>e.lift(new $Ie(n))}(this.page.registrationStarted$.pipe(On(e=>e),Sk(5)))).subscribe(()=>this.page.setHasChanges())}idMatches(e,t){return l0.find(i=>!(!e||i.id!==e||i.side&&i.side!==t))}nameMatches(e,t){return l0.find(i=>i.side?i.organ.toLowerCase()===e&&i.side===t:i.organ.toLowerCase()===e)}setBlockSize(e){this.ctx.patchState({blockSize:e})}setRotation(e){this.ctx.patchState({rotation:e})}setPosition(e){var t;this.ga.event("placement",`${null===(t=this.snapshot.organ)||void 0===t?void 0:t.name}_placement`,`${e.x.toFixed(1)}_${e.y.toFixed(1)}_${e.z.toFixed(1)}`),this.ctx.patchState({position:e})}setSlicesConfig(e){this.ctx.patchState({slicesConfig:e})}setViewType(e){this.ctx.patchState({viewType:e})}setViewSide(e){this.ctx.patchState({viewSide:e})}get defaultPosition(){const e=this.snapshot.organDimensions;return{x:e.x+2*this.snapshot.blockSize.x,y:e.y/2,z:e.z/2}}setOrgan(e){this.ga.event("organ_select","organ",e.name),this.ctx.patchState({organ:e}),e.side&&this.ctx.patchState({side:e.side}),this.onOrganIriChange()}setSex(e){this.ctx.patchState({sex:e}),this.onOrganIriChange()}setSide(e){this.ctx.patchState({side:e}),this.onOrganIriChange()}setShowPrevious(e){this.ctx.patchState({showPrevious:e})}setExtractionSites(e){this.ctx.patchState({extractionSites:e})}setAnatomicalStructures(e){this.ctx.patchState({anatomicalStructures:e})}setExtractionSets(e){this.ctx.patchState({extractionSets:e})}toggleRegistrationBlocksVisibility(e,t){if(this.setShowPrevious(e),e){const i=t.map(r=>{var s;return Object.assign(Object.assign({},r),{opacity:Math.min(20,null!==(s=r.opacity)&&void 0!==s?s:20)})});this.setAnatomicalStructures(i)}else this.setAnatomicalStructures(t)}onOrganIriChange(){var e,t,i,r,s;const o=this.referenceData.getReferenceOrganIri((null===(e=this.snapshot.organ)||void 0===e?void 0:e.organ)||"",this.snapshot.sex,this.snapshot.side,this.snapshot.organ),a={x:100,y:100,z:100};if((null===(t=this.snapshot.organ)||void 0===t?void 0:t.sex)&&this.ctx.patchState({sex:null===(i=this.snapshot.organ)||void 0===i?void 0:i.sex}),o){const l=this.referenceData.snapshot,c={};for(const p of l.anatomicalStructures[o]||[]){const g=null!==(r=p.representation_of)&&void 0!==r?r:p["@id"];c[g]||(c[g]={id:null!==(s=p.representation_of)&&void 0!==s?s:p["@id"],name:p.label,visible:!0,opacity:20,tooltip:p.comment})}this.ctx.patchState({anatomicalStructures:Object.values(c)});const d=(l.extractionSets[o]||[]).map(p=>({name:p.label,sites:(0,VIe.sortBy)(p.extractionSites.map(g=>({id:g["@id"],name:g.label,visible:!1,opacity:0,tooltip:g.comment})),"name")}));this.ctx.patchState({extractionSets:d}),this.ctx.patchState({extractionSites:d.length>0?d[0].sites:[]});const f=l.organSpatialEntities[o];a.x=f.x_dimension,a.y=f.y_dimension,a.z=f.z_dimension}this.ctx.patchState({organIri:o,organDimensions:a}),this.ctx.patchState({position:this.defaultPosition})}};oi.\u0275fac=function(e){return new(e||oi)(I(Ns),I(kt),I(wh))},oi.\u0275prov=ue({token:oi,factory:oi.\u0275fac}),Le([si()],oi.prototype,"modelChanged$",null),Le([en()],oi.prototype,"setBlockSize",null),Le([en()],oi.prototype,"setRotation",null),Le([en()],oi.prototype,"setPosition",null),Le([en()],oi.prototype,"setSlicesConfig",null),Le([en()],oi.prototype,"setViewType",null),Le([en()],oi.prototype,"setViewSide",null),Le([si()],oi.prototype,"defaultPosition",null),Le([en()],oi.prototype,"setOrgan",null),Le([en()],oi.prototype,"setSex",null),Le([en()],oi.prototype,"setSide",null),Le([en()],oi.prototype,"setShowPrevious",null),Le([en()],oi.prototype,"setExtractionSites",null),Le([en()],oi.prototype,"setAnatomicalStructures",null),Le([en()],oi.prototype,"setExtractionSets",null),oi=Le([bh(),ph({name:"model",defaults:{id:"",label:"",organ:{src:"",name:""},organIri:"",organDimensions:{x:90,y:90,z:90},sex:"male",side:"left",blockSize:{x:10,y:10,z:10},rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},slicesConfig:{thickness:NaN,numSlices:NaN},viewType:"register",viewSide:"anterior",showPrevious:!1,extractionSites:[],anatomicalStructures:[],extractionSets:[]}})],oi);const Bq=new Ce("Default theme class");let wF=(()=>{class n{constructor(t){this.defaultTheme=this.theme=null!=t?t:""}static initialize(t){const{injector:i,location:r}=t;i.get(n).initialize(r,i)}getTheme(){return this.theme}setTheme(t){t!==this.theme&&(this.applyThemeClass(this.theme,"remove"),this.applyThemeClass(t),this.theme=t)}resetTheme(){this.setTheme(this.defaultTheme)}initialize(t,i){this.element=t,this.injector=i,this.applyThemeClass(this.getTheme())}applyThemeClass(t,i="add"){var r;const{element:s,injector:o}=this;if(!t||!s||!o)return;const a=o.get(Nc,null);if(!a)return;const l=s.nativeElement,c=null===(r=o.get(sm,null))||void 0===r?void 0:r.getContainerElement(),d="add"===i?"addClass":"removeClass";a[d](l,t),c&&a[d](c,t)}}return n.\u0275fac=function(t){return new(t||n)(I(Bq,8))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})(),KIe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-name-input",this.firstNameValidator=new yh("",[N$.required]),this.lastNameValidator=new yh("",[N$.required]),this._name={firstName:"",lastName:""},this.nameChange=new Ve}get name(){return this._name}set name(t){this._name=t,this.firstNameValidator.setValue((null==t?void 0:t.firstName)||""),this.lastNameValidator.setValue((null==t?void 0:t.lastName)||"")}updateName(t,i){const r=t.target;this.name=Object.assign(Object.assign({},this.name),{[i]:r.value}),this.ga.event("name_updated","name_input",i),this.nameChange.emit(this.name)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-name-input"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{name:"name"},outputs:{nameChange:"nameChange"},decls:8,vars:2,consts:[[1,"field"],[1,"text","label"],["matInput","","matTooltip","Add your first name.",1,"input",3,"value","input"],["matInput","","matTooltip","Add your last name.",1,"input",3,"value","input"]],template:function(t,i){1&t&&(F(0,"mat-form-field",0),F(1,"mat-label",1),Re(2,"First Name "),N(),F(3,"input",2),we("input",function(s){return i.updateName(s,"firstName")}),N(),N(),F(4,"mat-form-field",0),F(5,"mat-label",1),Re(6,"Last Name "),N(),F(7,"input",3),we("input",function(s){return i.updateName(s,"lastName")}),N(),N()),2&t&&(q(3),re("value",i.firstNameValidator.value),q(4),re("value",i.lastNameValidator.value))},directives:[em,Bf,$b,lc],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]:not(:last-child){padding-right:.75rem}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:left;width:100%}"],changeDetection:0}),n})();const ZIe=["thumbContainer"],QIe=["toggleBar"],JIe=["input"],ePe=function(n){return{enterDuration:n}},tPe=["*"],nPe=new Ce("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let iPe=0;const rPe={provide:Mo,useExisting:T(()=>Vq),multi:!0};class sPe{constructor(e,t){this.source=e,this.checked=t}}const oPe=Nf(kf(Ff(Jg(class{constructor(n){this._elementRef=n}}))));let Vq=(()=>{class n extends oPe{constructor(t,i,r,s,o,a){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++iPe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Ve,this.toggleChange=new Ve,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(t){this._required=Nt(t)}get checked(){return this._checked}set checked(t){this._checked=Nt(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new sPe(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(dl),E(zn),ds("tabindex"),E(nPe),E(Xo,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&(ii(ZIe,5),ii(QIe,5),ii(JIe,5)),2&t){let r;It(r=Pt())&&(i._thumbEl=r.first),It(r=Pt())&&(i._thumbBarEl=r.first),It(r=Pt())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,i){2&t&&(rl("id",i.id),an("tabindex",i.disabled?null:-1)("aria-label",null)("aria-labelledby",null),lt("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Ft([rPe]),vt],ngContentSelectors:tPe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Ar(),F(0,"label",0,1),F(2,"div",2,3),F(4,"input",4,5),we("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),N(),F(6,"div",6,7),rt(8,"div",8),F(9,"div",9),rt(10,"div",10),N(),N(),N(),F(11,"span",11,12),we("cdkObserveContent",function(){return i._onLabelTextChange()}),F(13,"span",13),Re(14,"\xa0"),N(),kn(15),N(),N()),2&t){const r=ms(1),s=ms(12);an("for",i.inputId),q(2),lt("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),q(2),re("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),an("name",i.name)("aria-checked",i.checked.toString())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),q(5),re("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Fg(18,ePe,i._noopAnimations?0:150))}},directives:[Ko,FD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),zq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})(),Uq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[zq,Jl,Un,yE],zq,Un]}),n})(),EF=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-labeled-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new Ve}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.ga.event("slide_toggle_toggled","slide_toggle",this.value),this.valueChange.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-labeled-slide-toggle"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],[1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(t,i){if(1&t){const r=rr();F(0,"span",0),we("click",function(){rn(r);const o=ms(3);return i.left||o.toggle(),i.updateToggle(!0)}),Re(1),N(),F(2,"mat-slide-toggle",1,2),we("change",function(o){return i.updateToggle(!o.checked)}),N(),F(4,"span",0),we("click",function(){rn(r);const o=ms(3);return i.left&&o.toggle(),i.updateToggle(!1)}),Re(5),N()}2&t&&(lt("disabled",i.disabled)("highlighted",i.left),q(1),Ai(i.labels[0]),q(1),re("disabled",i.disabled)("checked",!i.left),q(2),lt("disabled",i.disabled)("highlighted",!i.left),q(1),Ai(i.labels[1]))},directives:[Vq],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%;cursor:not-allowed}"],changeDetection:0}),n})();const cPe=function(){return["Male","Female"]},uPe=function(n){return[n]};let dPe=(()=>{class n{constructor(t,i,r){this.page=t,this.model=i,this.dialogRef=r,this.clsName="ccf-registration-content",this.sexByLabel$=this.model.sex$.pipe(Me(s=>"female"===s?"Female":"Male")),this.organList=CF,r.disableClose=!0}setSexFromLabel(t){this.currentSex=t,this.sexSelected=!0}checkNameValid(t){this.nameValid=t.firstName.length>0&&t.lastName.length>0}organSelect(t){this.currentOrgan=t,this.organSelected=!0}registerButtonClick(t){t&&t.preventDefault(),this.organSelected&&this.nameValid&&this.closeDialog()}closeDialog(){this.model.setSex("Female"===this.currentSex?"female":"male"),this.model.setOrgan(this.currentOrgan),this.dialogRef.close(!0),this.page.registrationStarted()}}return n.\u0275fac=function(t){return new(t||n)(E(zi),E(oi),E($m))},n.\u0275cmp=$e({type:n,selectors:[["ccf-registration-content"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},decls:17,vars:18,consts:[[1,"modal"],["mat-dialog-content",""],[3,"name","nameChange"],["matTooltip","Select sex to filter organs.",1,"organ-sliders"],[1,"slider-label"],[1,"toggle","gender",3,"labels","value","valueChange"],[1,"selector-label"],[1,"selector-container"],[3,"organList","selectedOrgans","expanded","organsChanged"],["organSelector",""],["mat-button","",1,"registration-button",3,"matTooltip","click"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"div",1),F(2,"ccf-name-input",2),we("nameChange",function(s){return i.page.setUserName(s),i.checkNameValid(s)}),hn(3,"async"),N(),F(4,"div",3),F(5,"div",4),Re(6,"Donor Sex:"),N(),F(7,"ccf-labeled-slide-toggle",5),we("valueChange",function(s){return i.setSexFromLabel(s)}),hn(8,"async"),N(),N(),F(9,"div",6),Re(10,"Select an organ"),N(),F(11,"div",7),F(12,"ccf-organ-selector",8,9),we("organsChanged",function(s){return i.organSelect(s[0])}),hn(14,"async"),N(),N(),N(),F(15,"button",10),we("click",function(s){return i.registerButtonClick(s)}),Re(16,"START REGISTRATION"),N(),N()),2&t&&(q(2),re("name",gn(3,9,i.page.user$)),q(5),re("labels",av(15,cPe))("value",gn(8,11,i.sexByLabel$)),q(5),re("organList",i.organList)("selectedOrgans",Fg(16,uPe,gn(14,13,i.model.organ$)))("expanded",!0),q(3),lt("disabled",!i.organSelected||!i.nameValid),re("matTooltip",i.organSelected&&i.nameValid?"":"Required: Enter first and last name, and select an organ"))},directives:[KIe,lc,EF,Aq,$f],pipes:[Uu],styles:[".modal[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;max-width:47rem}.modal[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]{display:flex;height:3rem;align-items:center}.modal[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]{font-weight:600}.modal[_ngcontent-%COMP%]   .selector-label[_ngcontent-%COMP%]{font-weight:600;height:3rem;line-height:3rem}.modal[_ngcontent-%COMP%]   .selector-container[_ngcontent-%COMP%]{margin:0 auto}.modal[_ngcontent-%COMP%]   .registration-button[_ngcontent-%COMP%]{display:block;margin:2rem auto 0;transition:.6s}.modal[_ngcontent-%COMP%]   .registration-button.disabled[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),n})(),hPe=(()=>{class n{constructor(t,i,r){this.dialog=t,this.page=i,this.model=r,this.clsName="ccf-registration-modal"}ngOnInit(){Ki([this.page.user$,this.model.organ$]).pipe(Hg(500),_i(1),Di(([t,i])=>{""!==t.firstName&&""!==t.lastName&&""!==i.src||this.openDialog()})).subscribe()}openDialog(){this.dialog.open(dPe,{autoFocus:!1})}}return n.\u0275fac=function(t){return new(t||n)(E(Gm),E(zi),E(oi))},n.\u0275cmp=$e({type:n,selectors:[["ccf-registration-modal"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();function fPe(n,e){1&n&&function(n,e,t){hf(n,e,t),ff()}(0)}function pPe(n,e){if(1&n){const t=rr();F(0,"div",4),we("click",function(){return rn(t),nt().page.cancelRegistration()}),F(1,"mat-icon",5),Re(2,"chevron_left"),N(),F(3,"span",6),Re(4,"BACK"),N(),N()}}function gPe(n,e){if(1&n&&(F(0,"a",7),rt(1,"div",8),N()),2&n){const t=nt();re("href",t.homeUrl,Jh)("matTooltip",t.logoTooltip)}}let mPe=(()=>{class n{constructor(t){this.page=t,this.clsName="ccf-header"}}return n.\u0275fac=function(t){return new(t||n)(E(zi))},n.\u0275cmp=$e({type:n,selectors:[["ccf-header"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{homeUrl:"homeUrl",logoTooltip:"logoTooltip"},decls:7,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["backButton",""],["logo",""],[1,"filler"],["rel","noreferrer noopener",1,"link","home",3,"click"],[1,"icon","backbutton"],[1,"text"],["rel","noreferrer noopener","matTooltipPosition","right",1,"link","portal",3,"href","matTooltip"],["aria-hidden","false","aria-label","Reset tool",1,"logo"]],template:function(t,i){if(1&t&&(wt(0,fPe,1,0,"ng-container",0),hn(1,"async"),wt(2,pPe,5,0,"ng-template",null,1,kw),wt(4,gPe,2,2,"ng-template",null,2,kw),rt(6,"div",3)),2&t){const r=ms(3),s=ms(5);re("ngIf",gn(1,3,i.page.useCancelRegistrationCallback$))("ngIfThen",r)("ngIfElse",s)}},directives:[bs,Ps,lc],pipes:[Uu],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-height:4rem;padding:0 1.5rem;border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{padding:.25rem 0;height:2rem;display:flex;align-items:center;font-weight:lighter;font-size:1.5rem}[_nghost-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;text-decoration:none;padding:.25rem 0}[_nghost-%COMP%]   .home[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition:color .6s}[_nghost-%COMP%]   .home[_ngcontent-%COMP%]   .backbutton[_ngcontent-%COMP%]{font-size:2.25rem;width:2.25rem;height:2.25rem}[_nghost-%COMP%]   .portal[_ngcontent-%COMP%]{height:100%;width:25rem;align-items:center;display:flex}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]{width:100%;height:50%;background-repeat:no-repeat;background-size:contain}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1;margin:0}"],changeDetection:0}),n})();const jq={isolated:!0},Hq=new Ce("Message service configuration",{providedIn:"root",factory:()=>jq});let _Pe=(()=>{class n{constructor(t,i,r){this.source=t,this.channel=i,this.messages=r}sendMessage(t){this.channel.next({id:this.nextMessageId(),source:this.source,payload:t})}getMessages(){return this.messages.pipe(On(t=>t.source!==this.source))}getMessagesFromSource(t){return this.getMessages().pipe(On(i=>i.source===t))}getMessagesFromSources(t){return this.getMessages().pipe(On(i=>t.includes(i.source)))}nextMessageId(){return n.counter++}}return n.counter=0,n})();const u0=(()=>{class n{constructor(t,i){this.config=t,this.parent=i,this.channel=new xe,this.messages=t.isolated||!i?this.channel.asObservable():ci([this.channel,i.messages.pipe(CU(()=>!this.channel.closed))]).pipe(oo())}ngOnDestroy(){this.channel.complete()}connect(t){return new _Pe(t,this.channel,this.messages)}}return n.\u0275fac=function(t){return new(t||n)(I(Hq),I(n,12))},n.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yPe=["*"];let cM=(()=>{class n{constructor(t,i){this.className="ccf-drawer-content",this.animationsEnabled=!1,this.leftMargin=0,this.rightMargin=0,this.faded=!1,this.drawers=[],this.subscriptions=new Se;const r=t.connect(this).getMessages();this.subscriptions.add(r.subscribe(s=>{this.handleMessage(s)&&i.markForCheck()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(t){switch(t.payload.type){case"drawer-containers-changed":return this.drawers=t.payload.drawers,this.updateFaded(),!0;case"drawer-initialized":return this.animationsEnabled=!0,!0;case"drawer-toggled":{const i=t.source.position,{opened:r,width:s,margin:o}=t.payload;return this.updateMargin(i,r,s,o),this.updateFaded(),!0}default:return!1}}updateMargin(t,i,r,s){const o=i?r+s:s;"start"===t?this.leftMargin=o:this.rightMargin=o}updateFaded(){const[t,i]=this.drawers;this.faded=!!((null==t?void 0:t.opened)&&(null==t?void 0:t.expanded)||(null==i?void 0:i.opened)&&(null==i?void 0:i.expanded))}}return n.\u0275fac=function(t){return new(t||n)(E(u0),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-drawer-content"]],hostVars:9,hostBindings:function(t,i){2&t&&(Sg("@fadeInOut",i.faded),Vn(i.className),pf("margin-left",i.leftMargin,"px")("margin-right",i.rightMargin,"px"),lt("cff-drawer-content-animations",i.animationsEnabled))},ngContentSelectors:yPe,decls:1,vars:0,template:function(t,i){1&t&&(Ar(),kn(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;z-index:2;overflow:auto}.cff-drawer-content-animations[_nghost-%COMP%]{transition-duration:.5s;transition-timing-function:ease-in-out;transition-property:margin-left,margin-right}"],data:{animation:[Ql("fadeInOut",[vr("false",Jn({opacity:1})),vr("true",Jn({opacity:0})),Zs("false <=> true",So("1s"))])]},changeDetection:0}),n})();const vPe=["*"],SF={params:{width:0,margin:0,margin2:0}};class bPe{constructor(){this.initialized=!1,this.deferred=new Promise(e=>{this.resolve=e})}set(){this.initialized=!0,this.resolve()}wait(){return pl(this,void 0,void 0,function*(){return this.deferred})}valueOf(){return this.initialized}}let xF=(()=>{class n{constructor(t,i,r){this.element=r,this.className="ccf-drawer",this._position="start",this._opened=!1,this._expanded=!1,this.openedChange=new Ve(!0),this.expandedChange=new Ve(!0),this.stateChange=new Ve(!0),this.openedState="closed",this.expandedState="closed",this.expandedState2="collapsed",this._measuredWidth=0,this.width=0,this._measuredMargin=0,this.margin2=0,this.initialized=new bPe,this.subscriptions=new Se,this.channel=t.connect(this),this.subscriptions.add(this.channel.getMessages().subscribe(s=>{this.handleMessage(s)&&i.markForCheck()}))}get classEnd(){return"end"===this.position}get position(){return this._position}set position(t){this._position=t||"start"}get opened(){return this._opened}set opened(t){this.toggle(Nt(t))}get expanded(){return this._expanded}set expanded(t){this.toggleExpanded(Nt(t))}get expandedStateObj(){return{value:this.expandedState2,params:{width:this.width,margin:this.measuredMargin,margin2:this.margin2}}}get measuredWidth(){if(this._measuredWidth>0)return this._measuredWidth;const t=this.element.nativeElement;if(!t)return 0;const i=t.getBoundingClientRect(),r=i.right-i.left;return 0===r?0:(this._measuredWidth=r,r)}get measuredMargin(){if(this._measuredMargin>0)return this._measuredMargin;const t=this.element.nativeElement;if(!t)return 0;const s=globalThis.getComputedStyle(t).getPropertyValue("start"===this.position?"margin-right":"margin-left"),o=Number(s.slice(0,-2));return this._measuredMargin=o,o}ngAfterViewInit(){this.initialized.set(),setTimeout(()=>this.channel.sendMessage({type:"drawer-initialized"}))}ngOnDestroy(){this.subscriptions.unsubscribe()}open(){this.toggle(!0)}close(){this.toggle(!1)}toggle(t=!this.opened){this.opened!==t&&(t?this.openedState=this.initialized.valueOf()?"open":"open-instant":(this.openedState="closed",this.expandedState="closed",this.expandedState2="collapsed",this._expanded=!1),this._opened=t,this.sendToggle())}openExpanded(){this.toggleExpanded(!0)}closeExpanded(){this.toggleExpanded(!1)}toggleExpanded(t=!this.expanded){this.expanded!==t&&(t?this.expandedState=this.initialized.valueOf()?"open":"open-instant":(this.expandedState="closed",this.expandedState2="collapsed"),this._expanded=t,this.sendToggle())}closeOpenDone(){this.openedChange.emit(this.opened)}expandCollapseDone(){this.expandedChange.emit(this.expanded)}sendToggle(){return pl(this,void 0,void 0,function*(){yield this.initialized.wait(),this.channel.sendMessage({type:"drawer-toggled",opened:this.opened,expanded:this.expanded,width:this.measuredWidth,margin:this.measuredMargin}),this.stateChange.emit()})}handleMessage(t){switch(t.payload.type){case"drawer-toggled":return this.syncExpanded(t.source),!0;default:return!1}}syncExpanded(t){(this.expanded||t.expanded)&&(this.expanded&&t.expanded?this.expandedState2=t.expandedState2="half":this.expanded?t.opened?(this.expandedState2="extended",this.width=t.measuredWidth+t.measuredMargin):(this.expandedState2="full",this.margin2=t.measuredMargin):this.opened?(t.expandedState2="extended",t.width=this.measuredWidth+this.measuredMargin):(t.expandedState2="full",t.margin2=this.measuredMargin))}}return n.\u0275fac=function(t){return new(t||n)(E(u0),E(zn),E(ot))},n.\u0275cmp=$e({type:n,selectors:[["ccf-drawer"]],hostVars:10,hostBindings:function(t,i){1&t&&Wy("@openClose.done",function(){return i.closeOpenDone()})("@expandCollapse.done",function(){return i.expandCollapseDone()}),2&t&&(Sg("@openClose",i.openedState)("@expandCollapse",i.expandedStateObj),Vn(i.className),lt("ccf-drawer-end",i.classEnd)("ccf-drawer-opened",i.opened)("ccf-drawer-expanded",i.expanded))},inputs:{position:"position",opened:"opened",expanded:"expanded"},outputs:{openedChange:"openedChange",expandedChange:"expandedChange",stateChange:"stateChange"},exportAs:["ccfDrawer"],ngContentSelectors:vPe,decls:2,vars:0,consts:[[1,"cff-drawer-inner-container"]],template:function(t,i){1&t&&(Ar(),F(0,"div",0),kn(1),N())},styles:["[_nghost-%COMP%]{display:block;position:absolute;top:0;bottom:0;z-index:2;outline:0;transform:translate(-100%)}.ccf-drawer-end[_nghost-%COMP%]{right:0;transform:translate(100%)}[_nghost-%COMP%]   .cff-drawer-inner-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin}"],data:{animation:[Ql("openClose",[vr("open, open-instant",Jn({transform:"none"})),vr("closed",Jn({})),Zs("closed => open-instant",So(0)),Zs("closed <=> open, open-instant => closed",So(".5s ease-in-out"))]),Ql("expandCollapse",[vr("collapsed",Jn({})),vr("half",Jn({width:"calc(50% - {{ margin }}px)"}),SF),vr("extended",Jn({width:"calc(100% - {{ width }}px - {{ margin }}px)"}),SF),vr("full",Jn({width:"calc(100% - {{ margin }}px - {{ margin2 }}px)"}),SF),Zs("* <=> *",So(".5s ease-in-out"))])]},changeDetection:0}),n})();function CPe(n,e){1&n&&(F(0,"ccf-drawer-content"),kn(1,2),N())}const wPe=[[["ccf-drawer"]],[["ccf-drawer-content"]],"*"],EPe=["ccf-drawer","ccf-drawer-content","*"];function $q(n){throw new Error(`Multiple drawers in position ${n}`)}let SPe=(()=>{class n{constructor(t,i){this.cdr=i,this.className="ccf-drawer-container",this.subscriptions=new Se,this.channel=t.connect(this),this.subscriptions.add(this.channel.getMessages().subscribe(r=>{this.handleMessage(r)&&i.markForCheck()}))}get content(){var t;return null!==(t=this.content1.first)&&void 0!==t?t:this.content2.first}get hasWrappedContent(){return 0!==this.content1.length}ngAfterViewInit(){this.drawers.changes.pipe(es(null)).subscribe(()=>{const t=this.validateDrawers();this.channel.sendMessage({type:"drawer-containers-changed",drawers:t}),this.cdr.markForCheck()}),this.content1.changes.pipe(es(null)).subscribe(()=>{this.channel.sendMessage({type:"content-container-changed",content:this.content}),this.cdr.markForCheck()})}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(t){return!0}validateDrawers(){const t=this.drawers.toArray(),i=t.filter(s=>"start"===s.position),r=t.filter(s=>"end"===s.position);return i.length>1&&$q("start"),r.length>1&&$q("end"),[i[0],r[0]]}}return n.\u0275fac=function(t){return new(t||n)(E(u0),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-drawer-container"]],contentQueries:function(t,i,r){if(1&t&&(Fi(r,xF,5),Fi(r,cM,5)),2&t){let s;It(s=Pt())&&(i.drawers=s),It(s=Pt())&&(i.content1=s)}},viewQuery:function(t,i){if(1&t&&ii(cM,5),2&t){let r;It(r=Pt())&&(i.content2=r)}},hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.className)},exportAs:["ccfDrawerContainer"],features:[Ft([u0])],ngContentSelectors:EPe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(Ar(wPe),kn(0),kn(1,1),wt(2,CPe,2,0,"ccf-drawer-content",0)),2&t&&(q(2),re("ngIf",!i.hasWrappedContent))},directives:[bs,cM],styles:["[_nghost-%COMP%]{display:block;position:relative;z-index:1;overflow:hidden;-webkit-overflow-scrolling:touch}"],changeDetection:0}),n})();var uM,xPe=Be(457),MPe=new Uint8Array(16);function TPe(){if(!uM&&!(uM="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uM(MPe)}const APe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,OPe=function(n){return"string"==typeof n&&APe.test(n)};for(var Ls=[],MF=0;MF<256;++MF)Ls.push((MF+256).toString(16).substr(1));const kPe=function(n,e,t){var i=(n=n||{}).random||(n.rng||TPe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){t=t||0;for(var r=0;r<16;++r)e[t+r]=i[r];return e}return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Ls[n[e+0]]+Ls[n[e+1]]+Ls[n[e+2]]+Ls[n[e+3]]+"-"+Ls[n[e+4]]+Ls[n[e+5]]+"-"+Ls[n[e+6]]+Ls[n[e+7]]+"-"+Ls[n[e+8]]+Ls[n[e+9]]+"-"+Ls[n[e+10]]+Ls[n[e+11]]+Ls[n[e+12]]+Ls[n[e+13]]+Ls[n[e+14]]+Ls[n[e+15]]).toLowerCase();if(!OPe(t))throw TypeError("Stringified UUID is invalid");return t}(i)};function Gq(n){const e=new Ht(n.transformMatrix),t=e.transformAsPoint([-1,-1,-1],[]),i=e.transformAsPoint([1,1,1],[]);return new xi({lowerBound:new S(...t.map((r,s)=>Math.min(r,i[s]))),upperBound:new S(...i.map((r,s)=>Math.max(r,t[s])))})}let is=class extends Wm{constructor(e){super(),this.injector=e,this.gizmo$=ut([{"@id":"http://purl.org/ccf/latest/ccf.owl#VHMaleOrgans_VHM_Spleen_Colic_Surface","@type":"SpatialSceneNode",scenegraph:"https://hubmapconsortium.github.io/ccf-3d-reference-object-library/Assets/body4Mesh_1338.glb",transformMatrix:new Ht(Ht.IDENTITY).scale([2,2,2]).rotateY(Qv(0)),tooltip:"Gizmo",unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!1,color:[255,255,255,255],opacity:1}])}get nodes$(){return Ki([this.placementCube$,this.referenceOrganNodes$,this.previousRegistrationNodes$,this.nodeCollisions$]).pipe(Me(([e,t,i,r])=>[...e,...i,...t,...this.snapshot.showCollisions?r:[]]))}get rotatedNodes$(){return Ki([this.rotation$,this.nodes$]).pipe(Me(([e,t])=>0===e?t:t.map(i=>Object.assign(Object.assign({},i),{transformMatrix:new Ht(Ht.IDENTITY).rotateY(Qv(e)).multiplyRight(i.transformMatrix)}))))}get referenceOrganNodes$(){return Ki([this.model.anatomicalStructures$,this.model.extractionSites$,this.model.organIri$]).pipe(Hg(400),Me(([e,t,i])=>this.createSceneNodes(i,[...e,...t])))}get referenceOrganSimpleNodes$(){return Ki([this.model.anatomicalStructures$,this.model.organIri$,this.referenceData.state$]).pipe(Me(([e,t,i])=>e.map(r=>{var s;return i.sceneNodeLookup[r.id]?[Object.assign(Object.assign({},i.simpleSceneNodeLookup[r.id]),{opacity:(null!==(s=r.opacity)&&void 0!==s?s:100)/100,color:[255,255,255,255]})]:(i.anatomicalStructures[t]||[]).filter(o=>o.representation_of===r.id).map(o=>{var a;return Object.assign(Object.assign({},i.simpleSceneNodeLookup[o["@id"]]),{opacity:(null!==(a=r.opacity)&&void 0!==a?a:100)/100,color:[255,255,255,255]})})}).reduce((r,s)=>r.concat(s),[])))}get nodeCollisions$(){return Ki([this.referenceOrganSimpleNodes$,this.placementCube$]).pipe(On(([e,t])=>t.length>0),Me(([e,t])=>{const i=Gq(t[0]);return e.filter(r=>i.overlaps(Gq(r)))}))}get previousRegistrationNodes$(){return Ki([this.model.organIri$,this.model.showPrevious$,this.registration.previousRegistrations$]).pipe(Me(([e,t,i])=>t?i.map(r=>{const s=Array.isArray(r.placement)?r.placement[0]:r.placement;if(s.target===e){const o=this.model.snapshot.organDimensions,a=[o.x,o.y,o.z].map(l=>-l/1e3/2);return{"@id":r["@id"],"@type":"SpatialSceneNode",transformMatrix:new Ht(Ht.IDENTITY).translate([s.x_translation,s.y_translation,s.z_translation].map((l,c)=>l/1e3+a[c])).rotateXYZ([s.x_rotation,s.y_rotation,s.z_rotation].map(Qv)).scale([r.x_dimension,r.y_dimension,r.z_dimension].map(l=>l/1e3/2)),color:[25,118,210,200],tooltip:r.label,unpickable:!0}}}).filter(r=>!!r):[]))}get placementCube$(){return Ki([this.model.viewType$,this.model.blockSize$,this.model.rotation$,this.model.position$,this.model.organ$]).pipe(Me(([e,t,i,r,s])=>""===s.src?[]:[this.placementCube]))}get placementCube(){const{viewType:e,blockSize:t,rotation:i,position:r,organDimensions:s}=this.model.snapshot,o=[s.x,s.y,s.z].map(a=>-a/1e3/2);return{"@id":"#DraftPlacement","@type":"SpatialSceneNode",transformMatrix:new Ht(Ht.IDENTITY).translate([r.x,r.y,r.z].map((a,l)=>a/1e3+o[l])).rotateXYZ([i.x,i.y,i.z].map(Qv)).scale([t.x,t.y,t.z].map(a=>a/1e3/2)),color:[255,255,0,200],tooltip:"Draft Placement",unpickable:"3d"===e}}get rotation$(){return this.model.viewSide$.pipe(Me(e=>{let t=0;switch(e){case"left":t=-90;break;case"right":t=90;break;case"posterior":t=180}return t}))}ngxsOnInit(){super.ngxsOnInit(),this.model=this.injector.get(oi),this.registration=this.injector.get(Cr),this.referenceData=this.injector.get(uc)}createSceneNodes(e,t){const i=this.referenceData.snapshot;return t.filter(r=>r.visible&&r.opacity&&r.opacity>0).map(r=>{var s;return i.sceneNodeLookup[r.id]?[Object.assign(Object.assign({},i.sceneNodeLookup[r.id]),{opacity:(null!==(s=r.opacity)&&void 0!==s?s:100)/100,color:[255,255,255,255]})]:(i.anatomicalStructures[e]||[]).filter(o=>o.representation_of===r.id).map(o=>{var a;return Object.assign(Object.assign({},i.sceneNodeLookup[o["@id"]]),{opacity:(null!==(a=r.opacity)&&void 0!==a?a:100)/100,color:[255,255,255,255]})})}).reduce((r,s)=>r.concat(s),[])}};is.\u0275fac=function(e){return new(e||is)(I(kt))},is.\u0275prov=ue({token:is,factory:is.\u0275fac}),Le([si()],is.prototype,"nodes$",null),Le([si()],is.prototype,"rotatedNodes$",null),Le([si()],is.prototype,"referenceOrganNodes$",null),Le([si()],is.prototype,"referenceOrganSimpleNodes$",null),Le([si()],is.prototype,"nodeCollisions$",null),Le([si()],is.prototype,"previousRegistrationNodes$",null),Le([si()],is.prototype,"placementCube$",null),Le([si()],is.prototype,"placementCube",null),Le([si()],is.prototype,"rotation$",null),is=Le([bh(),ph({name:"scene",defaults:{showCollisions:!ou.production}})],is);let Do=class extends wAe{constructor(e){super(),this.injector=e,this._latestTags=[]}get tags$(){return Ki([this.entities$,this.scene.nodeCollisions$]).pipe(Me(([e,t])=>{const i=[],r=new Set,s=new Set;Object.entries(e).forEach(([o,a])=>{"removed"===a.type?s.add(o):(r.add(o),i.push(a))});for(const o of t){const a=o.representation_of;a&&!s.has(a)&&!r.has(a)&&(r.add(a),i.push({id:a,label:o.tooltip,type:"assigned"}))}return i}))}get latestTags(){return this._latestTags}ngxsOnInit(){super.ngxsOnInit(),this.model=this.injector.get(oi),this.scene=this.injector.get(is),this.page=this.injector.get(zi),this.tags$.subscribe(e=>{this._latestTags=e}),this.entities$.subscribe(()=>this.page.setHasChanges())}addTags(e){for(const t of e)this.addTagRaw(t)}addTag(e){this.addTagRaw(e)}removeTag(e){this.snapshot.entities[e.id]?this.updateEntitiesMany([{id:e.id,changes:{type:"removed"}}]):this.addEntityOne(Object.assign(Object.assign({},e),{type:"removed"}))}searchExternal(e,t){const i=this.model.snapshot.anatomicalStructures.filter(r=>-1!==r.name.toLowerCase().indexOf(e.toLowerCase()));return[{totalCount:i.length,results:i.map(r=>({id:r.id,label:r.name,type:"added"})).slice(0,t)}]}addTagRaw(e){this.snapshot.entities[e.id]?this.updateEntitiesMany([{id:e.id,changes:{type:"added"}}]):this.addEntityOne(Object.assign(Object.assign({},e),{type:"added"}))}};Do.\u0275fac=function(e){return new(e||Do)(I(kt))},Do.\u0275prov=ue({token:Do,factory:Do.\u0275fac}),Le([si()],Do.prototype,"tags$",null),Le([en()],Do.prototype,"addTags",null),Le([en()],Do.prototype,"addTag",null),Le([en()],Do.prototype,"removeTag",null),Le([iu.ak],Do.prototype,"searchExternal",null),Do=Le([bh(),ph({name:"tags",defaults:Object.assign({},{ids:[],entities:{}})})],Do);let Cr=class extends Wm{constructor(e,t){super(),this.injector=e,this.globalConfig=t,this.displayErrors$=this.state$.pipe(ar("displayErrors"))}get metadata$(){return Ki([this.page.state$,this.model.state$,this.tags.tags$]).pipe(Me(([e,t,i])=>this.buildMetadata(e,t,i)))}get jsonld$(){return Ki([this.page.state$,this.model.state$,this.tags.tags$]).pipe(Me(([e,t,i])=>this.buildJsonLd(e,t,i)))}get valid$(){return Ki([this.page.state$,this.model.state$]).pipe(Me(()=>this.isValid))}get previousRegistrations$(){const{globalConfig:e,state$:t}=this;return Ki([t.pipe(ar("registrations")),e.getOption("fetchPreviousRegistrations").pipe(Or(s=>{var o;return null!==(o=null==s?void 0:s())&&void 0!==o?o:[[]]}),es([]))]).pipe(Me(([s,o])=>[...s,...o]))}get currentIdentifier(){return kPe()}get currentDate(){return(new Date).toISOString().split("T")[0]}ngxsOnInit(){super.ngxsOnInit(),this.page=this.injector.get(zi),this.model=this.injector.get(oi),this.tags=this.injector.get(Do),this.refData=this.injector.get(uc),this.globalConfig.config$.pipe(_i(1),Di(({useDownload:e,register:t})=>this.ctx.patchState({useRegistrationCallback:!(e||!t)}))).subscribe(),this.globalConfig.getOption("editRegistration").pipe(Gk(),Di(e=>this.editRegistration(e))).subscribe()}editRegistration(e){return pl(this,void 0,void 0,function*(){const t=this.refData.normalizePlacement(Array.isArray(e.placement)?e.placement[0]:e.placement),i=this.refData.getOrganData(t.target);this.page.setUserName({firstName:e.creator_first_name,lastName:e.creator_last_name}),i&&(this.model.setOrgan(i.organ),i.sex&&this.model.setSex(i.sex),i.side&&this.model.setSide(i.side)),this.model.setBlockSize({x:e.x_dimension,y:e.y_dimension,z:e.z_dimension}),this.model.setRotation({x:t.x_rotation,y:t.y_rotation,z:t.z_rotation}),this.model.setSlicesConfig({thickness:e.slice_thickness||NaN,numSlices:e.slice_count||NaN}),yield new Promise(s=>{setTimeout(s,1e3)}),this.model.setPosition({x:t.x_translation,y:t.y_translation,z:t.z_translation});const r=new Set(e.ccf_annotations);this.tags.addTags(this.model.snapshot.anatomicalStructures.filter(s=>r.has(s.id)).map(s=>({id:s.id,label:s.name,type:"added"}))),this.page.registrationStarted()})}setUseRegistrationCallback(e){this.ctx.patchState({useRegistrationCallback:e})}setDisplayErrors(e){this.ctx.patchState({displayErrors:e})}addRegistration(e){this.ctx.setState(c0({registrations:YIe(e)}))}isDataValid(e,t){return[e.user.firstName,e.user.lastName,t.organ.src,t.organ.name,t.organ.organ].every(r=>!!r)}get isValid(){return this.isDataValid(this.page.snapshot,this.model.snapshot)}register(e){if(!this.isValid)return;const{globalConfig:{snapshot:{register:t}},page:i,model:r,snapshot:s}=this,o=this.buildJsonLd(i.snapshot,r.snapshot,this.tags.latestTags),a=JSON.stringify(o,void 0,2);if(e||void 0===e&&s.useRegistrationCallback)null==t||t(a);else{const l=new Blob([a],{type:"application/json",endings:"native"});(0,xPe.saveAs)(l,"registration-data.json")}this.addRegistration(o),this.setDisplayErrors(!1),this.page.clearHasChanges()}buildMetadata(e,t,i){const r=[];return e.registrationCallbackSet||r.push({label:"First Name",value:e.user.firstName},{label:"Last Name",value:e.user.lastName}),r.push({label:"Reference Organ Name",value:t.organ.name},{label:"Tissue Block Dimensions (mm)",value:this.xyzTripletToString(t.blockSize)},{label:"Tissue Block Position (mm)",value:this.xyzTripletToString(t.position)},{label:"Tissue Block Rotation",value:this.xyzTripletToString(t.rotation)},{label:"Anatomical Structure Tags",value:i.map(s=>s.label).join(", ")},{label:"Time Stamp",value:this.currentDate},{label:"Alignment ID",value:this.currentIdentifier}),r}buildJsonLd(e,t,i){var r,s;return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${this.currentIdentifier}`,"@type":"SpatialEntity",label:t.label||void 0,creator:`${e.user.firstName} ${e.user.lastName}`,creator_first_name:e.user.firstName,creator_last_name:e.user.lastName,creation_date:this.currentDate,ccf_annotations:i.map(o=>o.id),slice_thickness:(null===(r=t.slicesConfig)||void 0===r?void 0:r.thickness)||void 0,slice_count:(null===(s=t.slicesConfig)||void 0===s?void 0:s.numSlices)||void 0,x_dimension:+t.blockSize.x.toFixed(3),y_dimension:+t.blockSize.y.toFixed(3),z_dimension:+t.blockSize.z.toFixed(3),dimension_units:"millimeter",placement:{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${this.currentIdentifier}_placement`,"@type":"SpatialPlacement",target:t.organIri,placement_date:this.currentDate,x_scaling:1,y_scaling:1,z_scaling:1,scaling_units:"ratio",x_rotation:+t.rotation.x.toFixed(3),y_rotation:+t.rotation.y.toFixed(3),z_rotation:+t.rotation.z.toFixed(3),rotation_order:"XYZ",rotation_units:"degree",x_translation:+t.position.x.toFixed(3),y_translation:+t.position.y.toFixed(3),z_translation:+t.position.z.toFixed(3),translation_units:"millimeter"}}}xyzTripletToString(e){return`${Math.round(e.x)}, ${Math.round(e.y)}, ${Math.round(e.z)}`}};Cr.\u0275fac=function(e){return new(e||Cr)(I(kt),I(wh))},Cr.\u0275prov=ue({token:Cr,factory:Cr.\u0275fac}),Le([si()],Cr.prototype,"metadata$",null),Le([si()],Cr.prototype,"jsonld$",null),Le([si()],Cr.prototype,"valid$",null),Le([si()],Cr.prototype,"previousRegistrations$",null),Le([si()],Cr.prototype,"currentIdentifier",null),Le([si()],Cr.prototype,"currentDate",null),Le([en()],Cr.prototype,"setUseRegistrationCallback",null),Le([en()],Cr.prototype,"setDisplayErrors",null),Le([en()],Cr.prototype,"addRegistration",null),Le([si()],Cr.prototype,"isValid",null),Cr=Le([bh(),ph({name:"registration",defaults:{useRegistrationCallback:!1,displayErrors:!1,registrations:[]}})],Cr);let Wq=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Nt(t)}get inset(){return this._inset}set inset(t){this._inset=Nt(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=$e({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){2&t&&(an("aria-orientation",i.vertical?"vertical":"horizontal"),lt("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),TF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Un],Un]}),n})();function NPe(n,e){if(1&n){const t=rr();F(0,"mat-icon",2),we("click",function(){return rn(t),nt().setAllOpacity(20)}),Re(1,"refresh"),N()}2&n&&re("matRippleCentered",!0)("matRippleUnbounded",!0)}function LPe(n,e){if(1&n){const t=rr();F(0,"div",3),we("mouseenter",function(){const s=rn(t).$implicit;return nt().mouseOver(s)})("mouseleave",function(){return rn(t),nt().mouseOut()}),rt(1,"mat-icon",4),F(2,"div",5),Re(3),N(),F(4,"div",6),F(5,"ccf-opacity-slider",7,8),we("opacityChange",function(r){return rn(t),nt().updateOpacity(r)})("opacityReset",function(){return rn(t),nt().resetItem()})("visibilityToggle",function(){const s=rn(t).$implicit;return nt().toggleVisibility(s)}),N(),N(),N()}if(2&n){const t=e.$implicit,i=nt();lt("selected",!!i.selection&&i.getId(0,i.selection)===i.getId(0,t)),q(1),lt("fade",!t.visible),q(1),lt("hidden",t.id===(null==i.selection?null:i.selection.id)),qy("title",t.name),q(1),Ai(t.name),q(1),lt("hidden",t.id!==(null==i.selection?null:i.selection.id)),q(1),re("visible",t.visible)("opacity",i.selection?null==i.selection?null:i.selection.opacity:20)}}let BPe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-visibility-menu",this.hover=new Ve,this.itemsChange=new Ve}toggleVisibility(t){t=Object.assign(Object.assign({},t),{visible:!t.visible}),this.selection&&t.id===this.selection.id&&(this.selection=Object.assign(Object.assign({},this.selection),{visible:t.visible})),this.ga.event("visibility_toggled","visibility_menu",""+t.id,+t.visible),this.updateOpacity(t.opacity)}mouseOver(t){this.selection=t===this.selection?void 0:t,this.hover.emit(t)}mouseOut(){this.selection=void 0,this.hover.emit(void 0)}updateOpacity(t){if(!this.selection)return;const i=Object.assign(Object.assign({},this.selection),{opacity:t});this.selection=i,this.items=this.items.map(r=>r.id===i.id?i:r),this.ga.event("opacity_update","visibility_menu",""+i.id,i.opacity),this.itemsChange.emit(this.items)}resetItem(){if(this.selection){const t=Object.assign(Object.assign({},this.selection),{opacity:20,visible:!0});this.selection=t,this.items=this.items.map(i=>i.id===t.id?t:i),this.ga.event("item_reset","visibility_menu",""+t.id),this.itemsChange.emit(this.items)}}setAllOpacity(t){this.items=this.items.map(i=>Object.assign(Object.assign({},i),{opacity:t,visible:!0})),this.ga.event("all_items_opacity_update","visibility_menu",void 0,t),this.itemsChange.emit(this.items)}getId(t,i){return i.id}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-visibility-menu"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{items:"items",selection:"selection"},outputs:{hover:"hover",itemsChange:"itemsChange"},decls:2,vars:3,consts:[["class","icon reset","matRipple","",3,"matRippleCentered","matRippleUnbounded","click",4,"ngIf"],["class","item-entry",3,"selected","mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["matRipple","",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"],[1,"item-entry",3,"mouseenter","mouseleave"],["svgIcon","app:opacity",1,"opacity-icon"],[1,"item-name",3,"title"],[1,"slider"],[3,"visible","opacity","opacityChange","opacityReset","visibilityToggle"],["slider",""]],template:function(t,i){1&t&&(wt(0,NPe,2,2,"mat-icon",0),wt(1,LPe,7,12,"div",1)),2&t&&(re("ngIf",i.items.length),q(1),re("ngForOf",i.items)("ngForTrackBy",i.getId))},directives:[bs,Yl,Ps,Ko,gIe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-right:0;margin-left:0;max-height:18rem;overflow-y:auto;scrollbar-width:thin}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{padding:.25rem;border-radius:.25rem}[_nghost-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s;position:absolute;top:3rem}[_nghost-%COMP%]   .reset[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]{display:flex;height:2.25rem;align-items:center;flex-shrink:0;position:relative}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity-icon[_ngcontent-%COMP%]{z-index:1;transition:.6s}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity-icon[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:.5rem;opacity:1;transition-duration:.4s;transition-timing-function:ease-in-out;transition-property:opacity;max-width:calc(100% - 2.5rem)}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .item-name.hidden[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:calc(100% - 2rem);transition-duration:.3s;transition-timing-function:ease-in-out;transition-property:opacity;left:2rem;position:absolute;opacity:1}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .slider.hidden[_ngcontent-%COMP%]{opacity:0;transition-duration:.1s;transition-timing-function:ease-in-out;transition-property:opacity}"],changeDetection:0}),n})();const VPe=["*"],qq=new Ce("MatChipRemove"),Yq=new Ce("MatChipAvatar"),Xq=new Ce("MatChipTrailingIcon");class zPe{constructor(e){this._elementRef=e}}const UPe=Nf(kf(Ff(zPe),"primary"),-1);let d0=(()=>{class n extends UPe{constructor(t,i,r,s,o,a,l,c){super(t),this._ngZone=i,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new xe,this._onBlur=new xe,this.selectionChange=new Ve,this.destroyed=new Ve,this.removed=new Ve,this._addHostClassName(),this._chipRippleTarget=a.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new kz(this,i,this._chipRippleTarget,r),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===l,this.tabIndex=null!=c&&parseInt(c)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const i=Nt(t);i!==this._selected&&(this._selected=i,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Nt(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Nt(t)}get removable(){return this._removable}set removable(t){this._removable=Nt(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",i=this._elementRef.nativeElement;i.hasAttribute(t)||i.tagName.toLowerCase()===t?i.classList.add(t):i.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(ft),E(ri),E(Fz,8),E(zn),E(ct),E(Xo,8),ds("tabindex"))},n.\u0275dir=ge({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,i,r){if(1&t&&(Fi(r,Yq,5),Fi(r,Xq,5),Fi(r,qq,5)),2&t){let s;It(s=Pt())&&(i.avatar=s.first),It(s=Pt())&&(i.trailingIcon=s.first),It(s=Pt())&&(i.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,i){1&t&&we("click",function(s){return i._handleClick(s)})("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i.focus()})("blur",function(){return i._blur()}),2&t&&(an("tabindex",i.disabled?null:i.tabIndex)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString())("aria-selected",i.ariaSelected),lt("mat-chip-selected",i.selected)("mat-chip-with-avatar",i.avatar)("mat-chip-with-trailing-icon",i.trailingIcon||i.removeIcon)("mat-chip-disabled",i.disabled)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[vt]}),n})(),Kq=(()=>{class n{constructor(t,i){this._parentChip=t,"BUTTON"===i.nativeElement.nodeName&&i.nativeElement.setAttribute("type","button")}_handleClick(t){const i=this._parentChip;i.removable&&!i.disabled&&i.remove(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)(E(d0),E(ot))},n.\u0275dir=ge({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,i){1&t&&we("click",function(s){return i._handleClick(s)})},features:[Ft([{provide:qq,useExisting:n}])]}),n})();const Zq=new Ce("mat-chips-default-options"),$Pe=wO(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let GPe=0;class WPe{constructor(e,t){this.source=e,this.value=t}}let Qq=(()=>{class n extends $Pe{constructor(t,i,r,s,o,a,l){super(a,s,o,l),this._elementRef=t,this._changeDetectorRef=i,this._dir=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new xe,this._uid="mat-chip-list-"+GPe++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(c,d)=>c===d,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new Ve,this.valueChange=new Ve,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var t,i;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Nt(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Nt(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Nt(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Nt(t),this.chips&&this.chips.forEach(i=>i.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return ki(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return ki(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return ki(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return ki(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new dV(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Gn(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Gn(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(es(null),Gn(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new pU(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const i=t.target;i&&i.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,i=!0){if(this._clearSelection(),this.chips.forEach(r=>r.deselect()),Array.isArray(t))t.forEach(r=>this._selectValue(r,i)),this._sortValues();else{const r=this._selectValue(t,i);r&&i&&this._keyManager.setActiveItem(r)}}_selectValue(t,i=!0){const r=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,t));return r&&(i?r.selectViaInteraction():r.select(),this._selectionModel.select(r)),r}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(i=>{i!==t&&i.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let i=null;i=Array.isArray(this.selected)?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.change.emit(new WPe(this,i)),this.valueChange.emit(i),this._onChange(i),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(i=>{!this._selectionModel.isSelected(i)&&i.selected&&i.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&this._keyManager.updateActiveItem(i),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const i=t.chip,r=this.chips.toArray().indexOf(t.chip);this._isValidIndex(r)&&i._hasFocus&&(this._lastDestroyedChipIndex=r)})}_originatesFromChip(t){let i=t.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-chip"))return!0;i=i.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(zn),E(Yo,8),E(up,8),E(Hm,8),E(Rv),E(ac,10))},n.\u0275cmp=$e({type:n,selectors:[["mat-chip-list"]],contentQueries:function(t,i,r){if(1&t&&Fi(r,d0,5),2&t){let s;It(s=Pt())&&(i.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,i){1&t&&we("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(s){return i._keydown(s)}),2&t&&(rl("id",i._uid),an("tabindex",i.disabled?null:i._tabIndex)("aria-describedby",i._ariaDescribedby||null)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-multiselectable",i.multiple)("role",i.role)("aria-orientation",i.ariaOrientation),lt("mat-chip-list-disabled",i.disabled)("mat-chip-list-invalid",i.errorState)("mat-chip-list-required",i.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[Ft([{provide:Fv,useExisting:n}]),vt],ngContentSelectors:VPe,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,i){1&t&&(Ar(),F(0,"div",0),kn(1),N())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})();const XPe={separatorKeyCodes:[13]};let Jq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[Rv,{provide:Zq,useValue:XPe}],imports:[[Un]]}),n})(),KPe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-visibility-toggle",this.visible=!1,this.toggleLabel="",this.disabled=!1,this.visibilityChanged=new Ve}toggleVisibility(){this.visible=!this.visible,this.ga.event("visibility_toggled","visibility_toggle",""+this.visible),this.visibilityChanged.emit(this.visible)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-visibility-toggle"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{visible:"visible",toggleLabel:"toggleLabel",disabled:"disabled"},outputs:{visibilityChanged:"visibilityChanged"},decls:8,vars:9,consts:[[1,"toggle-div"],[1,"toggle-wrapper",3,"click"],[1,"icon-background"],["svgIcon","app:visibility_off_cube",1,"icon","block"],[1,"icon","green"],[1,"toggle-label"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"mat-chip",1),we("click",function(){return i.toggleVisibility()}),F(2,"div",2),rt(3,"mat-icon",3),F(4,"mat-icon",4),Re(5,"done"),N(),N(),F(6,"div",5),Re(7),N(),N(),N()),2&t&&(q(1),lt("disabled",i.disabled),q(1),lt("disabled",i.disabled),q(1),lt("hidden",i.visible),q(1),lt("hidden",!i.visible),q(3),Ai(i.toggleLabel))},directives:[d0,Ps],styles:["[_nghost-%COMP%]{height:3rem;display:flex;align-items:center}[_nghost-%COMP%]     .mat-chip{padding:0!important}[_nghost-%COMP%]     .mat-chip.disabled{cursor:not-allowed!important}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:1.5rem}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;display:flex;padding-left:.5rem;cursor:pointer;align-items:center;position:relative;border-width:.075rem;border-style:solid;height:2.25rem;border-radius:1.5rem;transition:background-color .2s ease-in-out}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]{border-radius:1.5rem;height:2.06rem;width:2.06rem;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:.6s;position:absolute}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]   .icon.block[_ngcontent-%COMP%]{width:1.125rem}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]   .icon.hidden[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{font-weight:bold;margin-left:.5rem;padding-right:1.25rem;padding-left:.25rem}"],changeDetection:0}),n})();const ZPe=["fileInput"];let QPe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-json-file-reader",this.label="Upload",this.parsedJson=new Ve}triggerFileInput(){this.fileInput.nativeElement.click()}handleFile(t){const i=t.target;if(!i.files)return;const r=i.files[0],s=new FileReader;s.onload=()=>{const o=JSON.parse(s.result);this.ga.event("json_file_load_end","json_file_reader"),this.parsedJson.emit(o)},this.ga.event("json_file_load_start","json_file_reader"),s.readAsText(r)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-json-file-reader"]],viewQuery:function(t,i){if(1&t&&ii(ZPe,5),2&t){let r;It(r=Pt())&&(i.fileInput=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{label:"label"},outputs:{parsedJson:"parsedJson"},decls:4,vars:1,consts:[["mat-button","",1,"upload-button",3,"click"],["type","file","accept","application/JSON","name","fileInput","id","fileInput",2,"display","none",3,"change"],["fileInput",""]],template:function(t,i){1&t&&(F(0,"button",0),we("click",function(){return i.triggerFileInput()}),Re(1),N(),F(2,"input",1,2),we("change",function(s){return i.handleFile(s)}),N()),2&t&&(q(1),Ai(i.label))},directives:[$f],styles:["[_nghost-%COMP%]   .upload-button[_ngcontent-%COMP%]{width:100%;height:2.25rem;transition:.6s;cursor:pointer;font-weight:500}"]}),n})(),JPe=(()=>{class n{constructor(){this.clsName="ccf-details-label",this.details=[]}arrayToString(t){return t.join(", ")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=$e({type:n,selectors:[["ccf-details-label"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{details:"details"},decls:1,vars:1,template:function(t,i){1&t&&Re(0),2&t&&Ai(i.arrayToString(i.details))},styles:["[_nghost-%COMP%]{display:block;height:2.25rem}"],changeDetection:0}),n})();const eRe=["trigger"],tRe=["panel"];function nRe(n,e){if(1&n&&(F(0,"span",8),Re(1),N()),2&n){const t=nt();q(1),Ai(t.placeholder)}}function iRe(n,e){if(1&n&&(F(0,"span",12),Re(1),N()),2&n){const t=nt(2);q(1),Ai(t.triggerValue)}}function rRe(n,e){1&n&&kn(0,0,["*ngSwitchCase","true"])}function sRe(n,e){1&n&&(F(0,"span",9),wt(1,iRe,2,1,"span",10),wt(2,rRe,1,0,"ng-content",11),N()),2&n&&(re("ngSwitch",!!nt().customTrigger),q(2),re("ngSwitchCase",!0))}function oRe(n,e){if(1&n){const t=rr();F(0,"div",13),F(1,"div",14,15),we("@transformPanel.done",function(r){return rn(t),nt()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return rn(t),nt()._handleKeydown(r)}),kn(3,1),N(),N()}if(2&n){const t=nt();re("@transformPanelWrap",void 0),q(1),function(n,e,t){Ul(po,Fc,pg(Te(),n,e,t),!0)}("mat-select-panel ",t._getPanelTheme(),""),pf("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),re("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),an("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const aRe=[[["mat-select-trigger"]],"*"],lRe=["mat-select-trigger","*"],e9={transformPanelWrap:Ql("transformPanelWrap",[Zs("* => void",rie("@transformPanel",[iie()],{optional:!0}))]),transformPanel:Ql("transformPanel",[vr("void",Jn({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),vr("showing",Jn({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),vr("showing-multiple",Jn({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Zs("void => *",So("120ms cubic-bezier(0, 0, 0.2, 1)")),Zs("* => void",So("100ms 25ms linear",Jn({opacity:0})))])};let t9=0;const i9=new Ce("mat-select-scroll-strategy"),hRe=new Ce("MAT_SELECT_CONFIG"),fRe={provide:i9,deps:[Zo],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};class pRe{constructor(e,t){this.source=e,this.value=t}}const gRe=Ff(Nf(Jg(wO(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r}})))),r9=new Ce("MatSelectTrigger");let mRe=(()=>{class n extends gRe{constructor(t,i,r,s,o,a,l,c,d,f,p,g,_,y){var v,C,w;super(o,s,l,c,f),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=_,this._defaultOptions=y,this._panelOpen=!1,this._compareWith=(M,k)=>M===k,this._uid="mat-select-"+t9++,this._triggerAriaLabelledBy=null,this._destroy=new xe,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+t9++,this._panelDoneAnimatingStream=new xe,this._overlayPanelClass=(null===(v=this._defaultOptions)||void 0===v?void 0:v.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(w=null===(C=this._defaultOptions)||void 0===C?void 0:C.disableOptionCentering)&&void 0!==w&&w,this.ariaLabel="",this.optionSelectionChanges=Hb(()=>{const M=this.options;return M?M.changes.pipe(es(M),Or(()=>ki(...M.map(k=>k.onSelectionChange)))):this._ngZone.onStable.pipe(_i(1),Or(()=>this.optionSelectionChanges))}),this.openedChange=new Ve,this._openedStream=this.openedChange.pipe(On(M=>M),Me(()=>{})),this._closedStream=this.openedChange.pipe(On(M=>!M),Me(()=>{})),this.selectionChange=new Ve,this.valueChange=new Ve,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==y?void 0:y.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=y.typeaheadDebounceInterval),this._scrollStrategyFactory=g,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required}set required(t){this._required=Nt(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Nt(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Nt(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Eo(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new pU(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(qo(),Gn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Gn(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(es(null),Gn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby();if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this.value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&s&&!Wo(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,o=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!i.activeItem||Wo(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(_i(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectValue(i)),this._sortValues();else{const i=this._selectValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch(s){return!1}});return i&&this._selectionModel.select(i),i}_initKeyManager(){this._keyManager=new uV(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Gn(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Gn(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=ki(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Gn(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),ki(...this.options.map(i=>i._stateChanges)).pipe(Gn(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let r=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(E(zf),E(zn),E(ft),E(Rv),E(ot),E(Yo,8),E(up,8),E(Hm,8),E(KE,8),E(ac,10),ds("tabindex"),E(i9),E(EE),E(hRe,8))},n.\u0275dir=ge({type:n,viewQuery:function(t,i){if(1&t&&(ii(eRe,5),ii(tRe,5),ii(RU,5)),2&t){let r;It(r=Pt())&&(i.trigger=r.first),It(r=Pt())&&(i.panel=r.first),It(r=Pt())&&(i._overlayDir=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[vt,Kn]}),n})(),_Re=(()=>{class n extends mRe{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Gn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const i=SO(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===i?0:function(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}((t+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new pRe(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(t.left+o-(r?s:0)),l=t.right+o-i.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,i,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(t){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*i,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,i){const r=Math.round(t-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,i,r){const s=Math.round(t-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*t,256),o=i*t-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=SO(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),i=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275cmp=$e({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&(Fi(r,r9,5),Fi(r,qE,5),Fi(r,WE,5)),2&t){let s;It(s=Pt())&&(i.customTrigger=s.first),It(s=Pt())&&(i.options=s),It(s=Pt())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,i){1&t&&we("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(an("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),lt("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Ft([{provide:Fv,useExisting:n},{provide:GE,useExisting:n}]),vt],ngContentSelectors:lRe,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(Ar(aRe),F(0,"div",0,1),we("click",function(){return i.toggle()}),F(3,"div",2),wt(4,nRe,2,1,"span",3),wt(5,sRe,3,2,"span",4),N(),F(6,"div",5),rt(7,"div",6),N(),N(),wt(8,oRe,4,14,"ng-template",7),we("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=ms(1);an("aria-owns",i.panelOpen?i.id+"-panel":null),q(3),re("ngSwitch",i.empty),an("id",i._valueId),q(1),re("ngSwitchCase",!0),q(1),re("ngSwitchCase",!1),q(3),re("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[Zoe,bv,bD,RU,T3,oE],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[e9.transformPanelWrap,e9.transformPanel]},changeDetection:0}),n})(),s9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[fRe],imports:[[Sn,Hv,YE,Un],Uv,Nv,YE,Un]}),n})();function yRe(n,e){if(1&n&&(F(0,"mat-option",5),Re(1),N()),2&n){const t=e.$implicit;re("value",t),q(1),Cw(" ",t.name," (",t.sites.length,") ")}}function vRe(n,e){if(1&n){const t=rr();F(0,"mat-form-field",1),F(1,"mat-label",2),Re(2,"Landmark Set"),N(),F(3,"mat-select",3),we("selectionChange",function(r){return rn(t),nt().extractionSetChanged(r.value)}),wt(4,yRe,2,3,"mat-option",4),N(),N()}if(2&n){const t=nt();q(3),re("value",t.sets[0]),q(1),re("ngForOf",t.sets)}}let bRe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-extraction-set-dropdown",this.setChange=new Ve}extractionSetChanged(t){this.selected=t,this.ga.event("selected_extraction_set_change","extraction_set_dropdown",t.name),this.setChange.emit(t)}isMultiple(){return this.sets.length>1}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-extraction-set-dropdown"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{sets:"sets"},outputs:{setChange:"setChange"},decls:1,vars:1,consts:[["class","dropdown-form-field","appearance","fill",4,"ngIf"],["appearance","fill",1,"dropdown-form-field"],[1,"extraction-dropdown-label"],["disableOptionCentering","true","panelClass","extraction-set-panel",3,"value","selectionChange"],["class","extraction-set-options",3,"value",4,"ngFor","ngForOf"],[1,"extraction-set-options",3,"value"]],template:function(t,i){1&t&&wt(0,vRe,5,2,"mat-form-field",0),2&t&&re("ngIf",i.isMultiple())},directives:[bs,em,Bf,_Re,Yl,qE],styles:[".extraction-set-panel{box-shadow:0 0 .3rem .1rem #9e9e9e;position:absolute;top:-1rem;left:1rem;width:10.5rem}  .extraction-set-panel .extraction-set-options{height:2.5rem!important}  .extraction-set-panel .extraction-set-options:first-child{margin-top:.5rem}  .extraction-set-panel .extraction-set-options:last-child{margin-bottom:.5rem}[_nghost-%COMP%]     .mat-form-field{width:10.5rem}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper{padding-bottom:.5rem}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:0}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:.75rem}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper .mat-select-arrow-wrapper{transform:none}  .cdk-overlay-pane{min-width:0rem!important}"],changeDetection:0}),n})();function CRe(n,e){if(1&n&&(hf(0),rt(1,"ccf-details-label",19),hn(2,"async"),ff()),2&n){const t=nt();q(1),re("details",gn(2,1,t.detailsLabels$))}}function wRe(n,e){if(1&n){const t=rr();F(0,"div",9),F(1,"ccf-extraction-set-dropdown",20,21),we("setChange",function(r){return rn(t),nt().model.setExtractionSites(r.sites)}),hn(3,"async"),N(),F(4,"ccf-visibility-menu",22),we("itemsChange",function(r){return rn(t),nt().model.setExtractionSites(r)})("hover",function(r){return rn(t),nt().updateExtractionSiteTooltip(r)}),hn(5,"async"),N(),N()}if(2&n){const t=nt();q(1),re("sets",gn(3,2,t.model.extractionSets$)),q(3),re("items",gn(5,4,t.model.extractionSites$))}}function ERe(n,e){if(1&n&&(F(0,"div",23),Re(1),N()),2&n){const t=nt();q(1),_s(" ",t.extractionSiteTooltip," ")}}const SRe=function(){return["Male","Female"]};let xRe=(()=>{class n{constructor(t,i,r){this.page=t,this.model=i,this.registration=r,this.clsName="ccf-left-sidebar",this.disableSlider=!1,this.modalClosed=!1,this.sexByLabel$=this.model.sex$.pipe(Me(s=>"female"===s?"Female":"Male")),this.sideByLabel$=this.model.side$.pipe(Me(s=>"left"===s?"L":"R")),this.organSelected$=this.model.organ$.pipe(Me(s=>void 0!==s)),this.detailsLabels$=Ki([this.model.organ$,this.model.side$,this.model.sex$]).pipe(Me(([s,o,a])=>[null==s?void 0:s.name,o,a])),this.extractionSiteTooltip="",this.previousVisibilityItems=[...this.model.snapshot.anatomicalStructures],this.organList=CF}updateExtractionSiteTooltip(t){this.extractionSiteTooltip=(null==t?void 0:t.tooltip)?t.tooltip:""}setSexFromLabel(t){this.model.setSex("Female"===t?"female":"male")}setSideFromLabel(t){this.model.setSide("L"===t?"left":"right")}togglePreviousRegistrationBlocks(t){t&&(this.previousVisibilityItems=[...this.model.snapshot.anatomicalStructures]),this.model.toggleRegistrationBlocksVisibility(t,this.previousVisibilityItems)}updateRegistration(t){this.registration.editRegistration(t)}}return n.\u0275fac=function(t){return new(t||n)(E(zi),E(oi),E(Cr))},n.\u0275cmp=$e({type:n,selectors:[["ccf-left-sidebar"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{disableSlider:"disableSlider",modalClosed:"modalClosed"},decls:31,vars:22,consts:[[1,"scroll-wrapper"],[1,"container"],[4,"ngIf"],["matTooltip","Select sex to filter organs.",1,"organ-sliders"],[1,"slider-label"],[1,"toggle","gender",3,"disabled","labels","value","valueChange"],[1,"anatomical-structures-menu",3,"expanded"],[1,"expansion-header"],["matTooltip","Use opacity icons to change visibility of anatomical structures",1,"expansion-title"],[1,"expansion-content"],[3,"items","itemsChange"],[1,"extraction-menu",3,"expanded"],["matTooltip","Some organs have predefined landmarks to guide manual tissue registration--you can turn these on/off.",1,"expansion-title"],["class","expansion-content",4,"ngIf"],["toggleLabel","Previously Registered Blocks","matTooltip","If you previously registered tissue blocks, you can turn their positions on/off.",3,"visible","disabled","visibilityChanged"],[1,"space"],["class","extraction-site-tooltip mat-elevation-z8",4,"ngIf"],[1,"filler"],["label","UPLOAD PREVIOUS REGISTRATION DATA",3,"parsedJson"],[3,"details"],[3,"sets","setChange"],["dropdown",""],[3,"items","itemsChange","hover"],[1,"extraction-site-tooltip","mat-elevation-z8"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"div",1),wt(2,CRe,3,3,"ng-container",2),hn(3,"async"),F(4,"div",3),F(5,"div",4),Re(6,"Donor Sex:"),N(),F(7,"ccf-labeled-slide-toggle",5),we("valueChange",function(s){return i.setSexFromLabel(s)}),hn(8,"async"),N(),N(),rt(9,"mat-divider"),F(10,"mat-expansion-panel",6),F(11,"mat-expansion-panel-header",7),F(12,"mat-panel-title",8),Re(13,"Anatomical Structures"),N(),N(),F(14,"div",9),F(15,"ccf-visibility-menu",10),we("itemsChange",function(s){return i.model.setAnatomicalStructures(s)}),hn(16,"async"),N(),N(),N(),rt(17,"mat-divider"),F(18,"mat-expansion-panel",11),F(19,"mat-expansion-panel-header",7),F(20,"mat-panel-title",12),Re(21,"Landmarks"),N(),N(),wt(22,wRe,6,6,"div",13),hn(23,"async"),N(),rt(24,"mat-divider"),F(25,"ccf-visibility-toggle",14),we("visibilityChanged",function(s){return i.togglePreviousRegistrationBlocks(s)}),hn(26,"async"),N(),rt(27,"div",15),wt(28,ERe,2,1,"div",16),rt(29,"div",17),F(30,"ccf-json-file-reader",18),we("parsedJson",function(s){return i.updateRegistration(s)}),N(),N(),N()),2&t&&(q(2),re("ngIf",gn(3,11,i.page.registrationCallbackSet$)),q(5),re("disabled",i.disableSlider)("labels",av(21,SRe))("value",gn(8,13,i.sexByLabel$)),q(3),re("expanded",i.modalClosed),q(5),re("items",gn(16,15,i.model.anatomicalStructures$)),q(3),re("expanded",i.modalClosed),q(4),re("ngIf",gn(23,17,i.organSelected$)),q(3),re("visible",gn(26,19,i.model.showPrevious$))("disabled",i.disableSlider),q(3),re("ngIf",i.extractionSiteTooltip.length>0))},directives:[bs,lc,EF,Wq,Bx,Vx,eW,BPe,KPe,QPe,JPe,bRe],pipes:[Uu],styles:["[_nghost-%COMP%]{display:block;height:calc(100% - 3rem);margin-top:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]{overflow-y:scroll;height:100%;margin-right:.375rem;scrollbar-width:thin}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:.75rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1.5rem;margin-right:.375rem;min-height:100%}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]{height:3rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-width:3px}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .ccf-organ-selector[_ngcontent-%COMP%]{margin-top:1.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]{display:flex;height:3rem;align-items:center}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .expansion-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]     .expansion-header, [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]     .expansion-header{-webkit-user-select:none;-moz-user-select:none;padding:0;font-weight:bold;height:3rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]     .expansion-header .mat-expansion-indicator, [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]     .expansion-header .mat-expansion-indicator{display:flex;align-items:center;justify-content:center;height:24px;width:24px}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%]{margin-bottom:.75rem;text-align:center;margin-top:2.25rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%]   .expansion-placeholder[_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%]   .expansion-placeholder[_ngcontent-%COMP%]{width:100%;font-size:.9rem;font-weight:400}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-site-tooltip[_ngcontent-%COMP%]{position:absolute;top:4rem;left:27rem;width:21rem;padding:1rem;border-radius:.5rem;border:1px solid;z-index:2}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})(),MRe=(()=>{class n{constructor(t,i,r){this.drawer=t,this.cdr=r,this.className="ccf-drawer-toggle-button",this.position="start",this.opened=!1,this.subscriptions=new Se;const s=i.connect(this);this.subscriptions.add(s.getMessagesFromSource(t).subscribe(o=>{this.handleMessage(o)&&r.markForCheck()}))}get classEnd(){return"end"===this.position}get icon(){let t="arrow_right",i="arrow_left";return"end"===this.position&&([t,i]=[i,t]),this.opened?i:t}ngAfterViewInit(){setTimeout(()=>{this.position=this.drawer.position,this.cdr.markForCheck()})}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(t){return"drawer-toggled"===t.payload.type&&(this.opened=t.payload.opened,!0)}toggle(){const t=this.drawer,{opened:i,expanded:r}=t;i?r?t.closeExpanded():t.close():t.open()}}return n.\u0275fac=function(t){return new(t||n)(E(xF),E(u0),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-drawer-toggle-button"]],hostVars:4,hostBindings:function(t,i){2&t&&(Vn(i.className),lt("ccf-drawer-toggle-button-end",i.classEnd))},decls:4,vars:4,consts:[["aria-hidden","false","aria-label","Close side drawer",1,"expand-collapse-icon",3,"click"]],template:function(t,i){1&t&&(F(0,"mat-icon",0),we("click",function(){return i.toggle()}),Re(1," arrow_right\n"),N(),F(2,"mat-icon",0),we("click",function(){return i.toggle()}),Re(3," arrow_left\n"),N()),2&t&&(lt("hidden","arrow_left"===i.icon),q(2),lt("hidden","arrow_right"===i.icon))},directives:[Ps],styles:["[_nghost-%COMP%]{position:absolute;top:calc(50% - 2.0625rem);right:-1.0625rem;width:1.0625rem;height:3rem;border-radius:0 .25rem .25rem 0;cursor:pointer;transition:.25s}.ccf-drawer-toggle-button-end[_nghost-%COMP%]{right:unset;left:calc(-1rem - 1px);border-radius:.25rem 0 0 .25rem}[_nghost-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]{position:absolute;right:0rem;transition:.6s;padding-left:.15rem}[_nghost-%COMP%]   .expand-collapse-icon.hidden[_ngcontent-%COMP%]{opacity:0}.ccf-drawer-toggle-button-end[_nghost-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]{right:unset;left:-.25rem}.mat-icon[_ngcontent-%COMP%]{right:.3rem;top:.675rem;padding-top:.05rem}"],changeDetection:0}),n})();const o9={x:10,y:10,z:10};let TRe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-block-size-input",this.blockSize=o9,this.blockSizeChange=new Ve}updateBlockSizes(t,i){const r=t.target;this.blockSize=Object.assign(Object.assign({},this.blockSize),{[i]:+r.value}),this.ga.event("block_size_change","block_size_input",i,this.blockSize[i]),this.blockSizeChange.emit(this.blockSize)}refreshBlockSize(){this.blockSize=o9,this.ga.event("block_size_reset","block_size_input"),this.blockSizeChange.emit(this.blockSize)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-block-size-input"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{blockSize:"blockSize"},outputs:{blockSizeChange:"blockSizeChange"},decls:19,vars:5,consts:[["matTooltip","Set the tissue block width, height and depth (dimensions)",1,"header"],[1,"text","title"],[1,"filler"],["matRipple","",1,"icon","refresh",3,"matRippleCentered","matRippleUnbounded","click"],[1,"size-inputs"],["floatLabel","always",1,"field"],[1,"text","label"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block width.",1,"input",3,"value","input"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block height.",1,"input",3,"value","input"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block depth.",1,"input",3,"value","input"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"span",1),Re(2,"Tissue Block Dimensions (mm)"),N(),rt(3,"div",2),F(4,"mat-icon",3),we("click",function(){return i.refreshBlockSize()}),Re(5,"refresh"),N(),N(),F(6,"div",4),F(7,"mat-form-field",5),F(8,"mat-label",6),Re(9,"Width (X)"),N(),F(10,"input",7),we("input",function(s){return i.updateBlockSizes(s,"x")}),N(),N(),F(11,"mat-form-field",5),F(12,"mat-label",6),Re(13,"Height (Y)"),N(),F(14,"input",8),we("input",function(s){return i.updateBlockSizes(s,"y")}),N(),N(),F(15,"mat-form-field",5),F(16,"mat-label",6),Re(17,"Depth (Z)"),N(),F(18,"input",9),we("input",function(s){return i.updateBlockSizes(s,"z")}),N(),N(),N()),2&t&&(q(4),re("matRippleCentered",!0)("matRippleUnbounded",!0),q(6),re("value",i.blockSize.x),q(4),re("value",i.blockSize.y),q(4),re("value",i.blockSize.z))},directives:[lc,Ps,Ko,em,Bf,$b],styles:["[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:1.5rem;align-items:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:33.33%}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(:last-child){padding-right:.75rem}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();const a9={thickness:NaN,numSlices:NaN};let ARe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-slices-input",this.slicesConfig=a9,this.slicesConfigChange=new Ve}get hasThicknessValue(){return!isNaN(this.slicesConfig.thickness)}updateSlicesData(t,i){const{value:r}=t.target;this.slicesConfig=Object.assign(Object.assign({},this.slicesConfig),{[i]:""!==r?+r:NaN}),this.ga.event("slice_config_update","slice_input",i,this.slicesConfig[i]),this.slicesConfigChange.emit(this.slicesConfig)}refreshSlices(){this.slicesConfig=a9,this.ga.event("slice_config_reset","slice_input"),this.slicesConfigChange.emit(this.slicesConfig)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-slices-input"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{slicesConfig:"slicesConfig"},outputs:{slicesConfigChange:"slicesConfigChange"},decls:17,vars:6,consts:[[1,"header"],["matTooltip","\u201cAdd thickness of tissue sections and the total number of sections",1,"text","title"],[1,"filler"],["matRipple","",1,"icon","refresh",3,"matRippleCentered","matRippleUnbounded","click"],[1,"slices-inputs"],[1,"field"],[1,"text","label"],["matInput","","ccfNumbersOnly","","type","number","matTooltip","Enter thickness of tissue sections",1,"input",3,"value","input"],["matSuffix","",1,"suffix"],["matInput","","ccfNumbersOnly","","type","number","matTooltip","Enter total number of sections",1,"input",3,"value","input"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"span",1),Re(2,"Tissue Sections"),N(),rt(3,"div",2),F(4,"mat-icon",3),we("click",function(){return i.refreshSlices()}),Re(5," refresh "),N(),N(),F(6,"div",4),F(7,"mat-form-field",5),F(8,"mat-label",6),Re(9,"Thickness"),N(),F(10,"input",7),we("input",function(s){return i.updateSlicesData(s,"thickness")}),N(),F(11,"div",8),Re(12,"\u03bcm"),N(),N(),F(13,"mat-form-field",5),F(14,"mat-label",6),Re(15,"# Sections"),N(),F(16,"input",9),we("input",function(s){return i.updateSlicesData(s,"numSlices")}),N(),N(),N()),2&t&&(q(4),re("matRippleCentered",!0)("matRippleUnbounded",!0),q(6),re("value",i.slicesConfig.thickness),q(1),lt("show",i.hasThicknessValue),q(5),re("value",i.slicesConfig.numSlices))},directives:[lc,Ps,Ko,em,Bf,$b,xIe,xO],styles:["[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;height:1.5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:33.33%}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(:last-child){padding-right:.75rem}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field.mat-focused[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%], [_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .suffix.show[_ngcontent-%COMP%]{display:initial}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();const l9={x:0,y:0,z:0};let DRe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-rotation-slider",this.rotation=l9,this.rotationChange=new Ve}changeRotation(t,i){this.rotation=Object.assign(Object.assign({},this.rotation),{[i]:+t}),this.ga.event("rotation_update","rotation_slider",i,+t),this.rotationChange.emit(this.rotation)}resetRotation(){this.rotation=l9,this.ga.event("rotation_reset","rotation_slider"),this.rotationChange.emit(this.rotation)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-rotation-slider"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{rotation:"rotation"},outputs:{rotationChange:"rotationChange"},decls:27,vars:23,consts:[[1,"header"],["matTooltip","Use sliders below to rotate tissue block for registration",1,"text","title"],[1,"filler"],["matRipple","",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"],[1,"slider-box","red"],[1,"text","label"],[1,"slider-container"],[1,"slider",3,"max","min","step","thumbLabel","tickInterval","value","input"],[1,"text","value"],[1,"slider-box","green"],[1,"slider-box","blue"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"span",1),Re(2,"Tissue Block Rotation"),N(),rt(3,"div",2),F(4,"mat-icon",3),we("click",function(){return i.resetRotation()}),Re(5,"refresh"),N(),N(),F(6,"div",4),F(7,"span",5),Re(8,"X"),N(),F(9,"div",6),F(10,"mat-slider",7),we("input",function(s){return i.changeRotation(s.value,"x")}),N(),N(),F(11,"span",8),Re(12),N(),N(),F(13,"div",9),F(14,"span",5),Re(15,"Y"),N(),F(16,"div",6),F(17,"mat-slider",7),we("input",function(s){return i.changeRotation(s.value,"y")}),N(),N(),F(18,"span",8),Re(19),N(),N(),F(20,"div",10),F(21,"span",5),Re(22,"Z"),N(),F(23,"div",6),F(24,"mat-slider",7),we("input",function(s){return i.changeRotation(s.value,"z")}),N(),N(),F(25,"span",8),Re(26),N(),N()),2&t&&(q(4),re("matRippleCentered",!0)("matRippleUnbounded",!0),q(6),re("max",180)("min",-180)("step",1)("thumbLabel",!0)("tickInterval",180)("value",i.rotation.x),q(2),Ai(i.rotation.x),q(5),re("max",180)("min",-180)("step",1)("thumbLabel",!0)("tickInterval",180)("value",i.rotation.y),q(2),Ai(i.rotation.y),q(5),re("max",180)("min",-180)("step",1)("thumbLabel",!0)("tickInterval",180)("value",i.rotation.z),q(2),Ai(i.rotation.z))},directives:[lc,Ps,Ko,Mk],styles:["[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:1.5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:4rem;padding-left:.5rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:1rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:2.75rem;text-align:center}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]{width:100%;padding:1rem 2rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:not(.cdk-focused)     .mat-slider-thumb{width:1.25rem;height:1.25rem;transform:none}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-wrapper{right:.625rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-wrapper:after{margin-top:-.25rem;height:.625rem!important}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-ticks-container{margin-top:-.25rem;height:.625rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-ticks-container .mat-slider-ticks{height:.625rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();function IRe(n){const{subscriber:e,counter:t,period:i}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:i},i)}const PRe=["input"],RRe=function(n){return{enterDuration:n}},kRe=["*"],FRe=new Ce("mat-checkbox-default-options",{providedIn:"root",factory:c9});function c9(){return{color:"accent",clickAction:"check-indeterminate"}}let NRe=0;const u9=c9(),LRe={provide:Mo,useExisting:T(()=>d9),multi:!0};class BRe{}const VRe=Nf(kf(Ff(Jg(class{constructor(n){this._elementRef=n}}))));let d9=(()=>{class n extends VRe{constructor(t,i,r,s,o,a,l){super(t),this._changeDetectorRef=i,this._focusMonitor=r,this._ngZone=s,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++NRe,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Ve,this.indeterminateChange=new Ve,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||u9,this.color=this.defaultColor=this._options.color||u9.color,this.tabIndex=parseInt(o)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=Nt(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const i=Nt(t);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const i=t!=this._indeterminate;this._indeterminate=Nt(t),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let i=this._currentCheckState,r=this._elementRef.nativeElement;if(i!==t&&(this._currentAnimationClass.length>0&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){const t=new BRe;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(t){var i;const r=null===(i=this._options)||void 0===i?void 0:i.clickAction;t.stopPropagation(),this.disabled||"noop"===r?!this.disabled&&"noop"===r&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==r&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t,i){t?this._focusMonitor.focusVia(this._inputElement,t,i):this._inputElement.nativeElement.focus(i)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,i){if("NoopAnimations"===this._animationMode)return"";let r="";switch(t){case 0:if(1===i)r="unchecked-checked";else{if(3!=i)return"";r="unchecked-indeterminate"}break;case 2:r=1===i?"unchecked-checked":"unchecked-indeterminate";break;case 1:r=2===i?"checked-unchecked":"checked-indeterminate";break;case 3:r=1===i?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${r}`}_syncIndeterminate(t){const i=this._inputElement;i&&(i.nativeElement.indeterminate=t)}}return n.\u0275fac=function(t){return new(t||n)(E(ot),E(zn),E(dl),E(ft),ds("tabindex"),E(Xo,8),E(FRe,8))},n.\u0275cmp=$e({type:n,selectors:[["mat-checkbox"]],viewQuery:function(t,i){if(1&t&&(ii(PRe,5),ii(Ko,5)),2&t){let r;It(r=Pt())&&(i._inputElement=r.first),It(r=Pt())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,i){2&t&&(rl("id",i.id),an("tabindex",null),lt("mat-checkbox-indeterminate",i.indeterminate)("mat-checkbox-checked",i.checked)("mat-checkbox-disabled",i.disabled)("mat-checkbox-label-before","before"==i.labelPosition)("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Ft([LRe]),vt],ngContentSelectors:kRe,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,i){if(1&t&&(Ar(),F(0,"label",0,1),F(2,"span",2),F(3,"input",3,4),we("change",function(s){return i._onInteractionEvent(s)})("click",function(s){return i._onInputClick(s)}),N(),F(5,"span",5),rt(6,"span",6),N(),rt(7,"span",7),F(8,"span",8),qt.lFrame.currentNamespace=Hn,F(9,"svg",9),rt(10,"path",10),N(),qt.lFrame.currentNamespace=null,rt(11,"span",11),N(),N(),F(12,"span",12,13),we("cdkObserveContent",function(){return i._onLabelTextChange()}),F(14,"span",14),Re(15,"\xa0"),N(),kn(16),N(),N()),2&t){const r=ms(1),s=ms(13);an("for",i.inputId),q(2),lt("mat-checkbox-inner-container-no-side-margin",!s.textContent||!s.textContent.trim()),q(1),re("id",i.inputId)("required",i.required)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex),an("value",i.value)("name",i.name)("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-checked",i._getAriaChecked())("aria-describedby",i.ariaDescribedby),q(2),re("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Fg(19,RRe,"NoopAnimations"===i._animationMode?0:150))}},directives:[Ko,FD],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),n})(),h9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})(),jRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Jl,Un,yE,h9],Un,h9]}),n})();const HRe=["closeSearch"];function $Re(n,e){if(1&n){const t=rr();F(0,"div",12),F(1,"mat-checkbox",13),we("ngModelChange",function(r){const o=rn(t).$implicit;return nt(2).checkedResults[o.id]=r}),Re(2),N(),N()}if(2&n){const t=e.$implicit,i=nt(2);q(1),re("ngModel",i.checkedResults[t.id]),q(1),_s(" ",t.label," ")}}function GRe(n,e){if(1&n&&(F(0,"div",9),wt(1,$Re,3,2,"div",10),F(2,"div",11),Re(3),hn(4,"i18nPlural"),N(),N()),2&n){const t=nt();q(1),re("ngForOf",t.searchResults.results)("ngForTrackBy",t.tagId),q(2),_s(" ",nB(4,3,t.searchResults.totalCount,t.countMapping)," ")}}const f9=5,hM={totalCount:0,results:[]};class mp{constructor(e,t,i){this.el=e,this.ga=t,this.clsName="ccf-tag-search",this.placeholder="Add Anatomical Structures ...",this.added=new Ve,this.countMapping={"=1":"1 result",other:"# results"},this.searchControl=new yh,this.searchResults=hM,this.checkedResults={},this.resultsVisible=!1,this.destroy$=new xe,this.searchControl.valueChanges.pipe(Gn(this.destroy$),function(n,e=VG){return t=>t.lift(new s1e(n,!!e.leading,!!e.trailing))}(()=>{var r;return function(n=0,e=Tf){return(!PO(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=Tf),new le(t=>(t.add(e.schedule(IRe,n,{subscriber:t,counter:0,period:n})),t))}(null!==(r=this.searchThrottle)&&void 0!==r?r:100)},{leading:!0,trailing:!0}),Or(this.executeSearch)).subscribe(r=>{this.searchResults=r,this.checkedResults=this.getUpdatedCheckedResults(r),i.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}tagId(e,t){return t.id}hasCheckedTags(){return Object.values(this.checkedResults).some(e=>e)}addTags(){const{searchControl:e,searchResults:t,checkedResults:i}=this,r=t.results.filter(s=>i[s.id]);r.length>0&&(e.reset(),this.searchResults=hM,this.checkedResults={},this.ga.event("tags_added","tag_search",r.map(s=>s.label).join(",")),this.added.emit(r))}openResults(){this.resultsVisible||(this.resultsVisible=!0)}closeResults(e){const{closeSearch:t}=this;this.resultsVisible&&e.target instanceof Node&&(!this.el.nativeElement.contains(e.target)||t.nativeElement.contains(e.target))&&(this.resultsVisible=!1)}executeSearch(e){const{search:t,searchLimit:i=f9}=this;return e&&t?ci(t(e,i)).pipe(Sa(()=>[hM]),Me(this.truncateResults)):[hM]}truncateResults(e){const{searchLimit:t=f9}=this,i=e.results;return i.length>t?Object.assign(Object.assign({},e),{results:i.slice(0,t)}):e}getUpdatedCheckedResults(e){const t=this.checkedResults;return e.results.reduce((i,{id:r})=>{var s;return i[r]=null!==(s=t[r])&&void 0!==s&&s,i},{})}}function qRe(n,e){if(1&n&&(F(0,"div",11),F(1,"div",12),Re(2),N(),F(3,"div",13),Re(4),N(),N()),2&n){const t=e.$implicit;q(2),Ai(t.label),q(2),Ai(t.value)}}mp.\u0275fac=function(e){return new(e||mp)(E(ot),E(Ns),E(zn))},mp.\u0275cmp=$e({type:mp,selectors:[["ccf-tag-search"]],viewQuery:function(e,t){if(1&e&&ii(HRe,5,ot),2&e){let i;It(i=Pt())&&(t.closeSearch=i.first)}},hostVars:2,hostBindings:function(e,t){1&e&&we("click",function(){return t.openResults()})("focusin",function(){return t.openResults()})("click",function(r){return t.closeResults(r)},!1,ty)("focusin",function(r){return t.closeResults(r)},!1,ty),2&e&&Vn(t.clsName)},inputs:{placeholder:"placeholder",search:"search",searchLimit:"searchLimit",searchThrottle:"searchThrottle"},outputs:{added:"added"},decls:10,vars:8,consts:[[1,"spacer"],["appearance","outline",1,"overlay"],[1,"search-box"],["matInput","","type","search",3,"placeholder","formControl"],["search",""],["matSuffix","",1,"add-button",3,"disabled","click"],["closeSearch",""],[1,"icon"],["class","results",4,"ngIf"],[1,"results"],["class","item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"count"],[1,"item"],["labelPosition","after",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e){const i=rr();rt(0,"div",0),F(1,"mat-form-field",1),F(2,"div",2),rt(3,"input",3,4),F(5,"button",5,6),we("click",function(){rn(i);const s=ms(4);return t.addTags(),s.focus()}),F(7,"mat-icon",7),Re(8,"add"),N(),N(),N(),wt(9,GRe,5,6,"div",8),N()}2&e&&(q(1),lt("expanded",t.resultsVisible),q(2),re("placeholder",t.placeholder)("formControl",t.searchControl),q(2),lt("active",t.hasCheckedTags()),re("disabled",!t.hasCheckedTags()),q(4),re("ngIf",t.resultsVisible))},directives:[em,$b,Bb,rk,Nx,xO,Ps,bs,Yl,d9,gk],pipes:[O3],styles:["[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{height:3.25rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:10}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;height:3rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{border-radius:.25rem;border:none;display:flex;justify-content:center;align-items:center;cursor:pointer;height:100%}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{margin-top:.5rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.75rem;text-align:end}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0;border-radius:.5rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{padding-right:0!important}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-outline{opacity:1!important}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-outline-thick{opacity:0!important}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-infix{padding:.313rem .063rem .063rem;border:0}[_nghost-%COMP%]   .overlay.expanded[_ngcontent-%COMP%]     .mat-form-field-wrapper{box-shadow:0 0 .3rem .1rem #9e9e9e5e}"],changeDetection:0}),Le([iu.ak],mp.prototype,"executeSearch",null),Le([iu.ak],mp.prototype,"truncateResults",null);let YRe=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.clsName="ccf-review-modal",this.metaData=i.metaData,this.registrationCallbackSet=i.registrationCallbackSet}close(){var t;null===(t=document.getElementsByClassName("modal-animated")[0])||void 0===t||t.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return n.\u0275fac=function(t){return new(t||n)(E($m),E(Ok))},n.\u0275cmp=$e({type:n,selectors:[["ccf-review-modal"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},decls:14,vars:2,consts:[[1,"ccf-about","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography"],[1,"display-fields"],["class","field",4,"ngFor","ngForOf"],[1,"footer"],["mat-button","",1,"download-button",3,"click"],[1,"field"],[1,"label"],[1,"data"]],template:function(t,i){1&t&&(F(0,"div",0),F(1,"div",1),F(2,"div",2),F(3,"mat-icon",3),we("click",function(){return i.close()}),Re(4,"clear"),N(),N(),F(5,"div",4),F(6,"h2",5),Re(7,"Registration Review"),N(),F(8,"mat-dialog-content",6),F(9,"div",7),wt(10,qRe,5,2,"div",8),N(),N(),F(11,"div",9),F(12,"button",10),we("click",function(){return i.dialogRef.close(!0)}),Re(13),N(),N(),N(),N(),N()),2&t&&(q(10),re("ngForOf",i.metaData),q(3),Ai(i.registrationCallbackSet?"REGISTER":"DOWNLOAD REGISTRATION DATA"))},directives:[Ps,YG,XG,Yl,$f],styles:[".mat-dialog-container{padding:0}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:3rem;background-color:#fff}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;margin-bottom:0}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]{justify-content:space-around;display:flex}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;width:100%}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:50%;text-align:right;padding-right:1rem}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:50%;text-align:left;padding-left:1rem}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;margin-top:1rem;margin-right:1rem;cursor:pointer}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding-top:1.5rem;display:flex;justify-content:space-around}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .review-button[_ngcontent-%COMP%]{height:3rem;transition:.6s}"]}),n})(),XRe=(()=>{class n{constructor(t,i){this.dialog=t,this.ga=i,this.clsName="ccf-review-button",this.registrationCallbackSet=!0,this.metaData=[],this.displayErrors=!0,this.registrationIsValid=!1,this.registerData=new Ve,this.enterErrorMode=new Ve}ngOnChanges(){this.registrationIsValid=this.metaData.length>=3&&this.metaData.slice(0,3).every(t=>t.value)}get disabled(){return!this.registrationIsValid}registerButtonClick(t){return t&&t.preventDefault(),this.enterErrorMode.emit(),this.registrationIsValid&&(this.ga.event("review_start","review_button"),this.launchReviewModal()),!1}launchReviewModal(){this.dialog.open(YRe,{panelClass:"modal-animated",width:"60rem",data:{registrationCallbackSet:this.registrationCallbackSet,metaData:this.metaData}}).afterClosed().subscribe(i=>{i&&(this.ga.event("register","review_button"),this.registerData.emit())})}}return n.\u0275fac=function(t){return new(t||n)(E(Gm),E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-review-button"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{registrationCallbackSet:"registrationCallbackSet",metaData:"metaData",displayErrors:"displayErrors",registrationIsValid:"registrationIsValid"},outputs:{registerData:"registerData",enterErrorMode:"enterErrorMode"},features:[Kn],decls:2,vars:4,consts:[["mat-button","",1,"review-button",3,"matTooltip","click"]],template:function(t,i){1&t&&(F(0,"button",0),we("click",function(s){return i.registerButtonClick(s)}),Re(1),N()),2&t&&(lt("disabled",i.disabled),re("matTooltip",i.disabled?"Required: Select an organ and position tissue block inside organ.":"Review registration and submit/download."),q(1),_s(" ",i.registrationCallbackSet?"REVIEW AND REGISTER":"REVIEW AND DOWNLOAD","\n"))},directives:[$f,lc],styles:[".review-button[_ngcontent-%COMP%]{width:100%;height:2.25rem;transition:.6s;font-weight:500}.review-button.disabled[_ngcontent-%COMP%]{cursor:not-allowed}"]}),n})();function KRe(n,e){if(1&n){const t=rr();F(0,"mat-chip",2),we("removed",function(){const s=rn(t).$implicit;return nt().removeTag(s)}),Re(1),F(2,"mat-icon",3),Re(3,"cancel"),N(),N()}if(2&n){const t=e.$implicit;Vn(nt().tagClasses(t)),q(1),_s(" ",t.label," ")}}let ZRe=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-tag-list",this.tagRemoved=new Ve,this.tagsChange=new Ve}tagId(t,i){return i.id}tagClasses(t){return"added"===t.type?["added"]:["assigned"]}removeTag(t){this.tags=this.tags.filter(i=>i!==t),this.ga.event("tag_removed","tag_list",t.label),this.tagRemoved.emit(t),this.tagsChange.emit(this.tags)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-tag-list"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{tags:"tags"},outputs:{tagRemoved:"tagRemoved",tagsChange:"tagsChange"},decls:2,vars:2,consts:[["selectable","false"],["removable","","disableRipple","",3,"class","removed",4,"ngFor","ngForOf","ngForTrackBy"],["removable","","disableRipple","",3,"removed"],["matChipRemove","",1,"icon","remove"]],template:function(t,i){1&t&&(F(0,"mat-chip-list",0),wt(1,KRe,4,3,"mat-chip",1),N()),2&t&&(q(1),re("ngForOf",i.tags)("ngForTrackBy",i.tagId))},directives:[Qq,Yl,d0,Ps,Kq],styles:["[_nghost-%COMP%]{display:block;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]     .mat-chip-list-wrapper{margin:0}"],changeDetection:0}),n})();function QRe(n,e){if(1&n){const t=rr();F(0,"ccf-tag-list",20),we("tagRemoved",function(r){return rn(t),nt().astags.removeTag(r)}),hn(1,"async"),N()}2&n&&re("tags",gn(1,1,nt().astags.tags$))}function JRe(n,e){}const eke=function(){return[]};let tke=(()=>{class n{constructor(t,i,r,s){this.model=t,this.registration=i,this.page=r,this.astags=s,this.clsName="ccf-right-sidebar",this.modalClosed=!1}}return n.\u0275fac=function(t){return new(t||n)(E(oi),E(Cr),E(zi),E(Do))},n.\u0275cmp=$e({type:n,selectors:[["ccf-right-sidebar"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},inputs:{modalClosed:"modalClosed"},decls:34,vars:28,consts:[[1,"scroll-wrapper"],[1,"container"],[1,"info-button-container"],["videoID","gY3_-LIoKaU","infoTitle","CCF Registration User Interface"],[3,"blockSize","blockSizeChange"],[3,"slicesConfig","slicesConfigChange"],[3,"rotation","rotationChange"],[1,"tags-container",3,"expanded"],[1,"header"],["matTooltip","Review tags generated via collision detection. Add or delete tags as needed."],[3,"search","added"],["class","tag-list",3,"tags","tagRemoved",4,"ngIf","ngIfElse"],["tagListPlaceholder",""],[1,"legend"],[1,"dot","assigned"],[1,"text","assigned"],[1,"dot","added"],[1,"text","added"],[1,"filler"],[3,"registrationCallbackSet","displayErrors","registrationIsValid","metaData","registerData","enterErrorMode"],[1,"tag-list",3,"tags","tagRemoved"]],template:function(t,i){if(1&t&&(F(0,"div",0),F(1,"div",1),F(2,"div",2),rt(3,"ccf-info-button",3),N(),F(4,"ccf-block-size-input",4),we("blockSizeChange",function(s){return i.model.setBlockSize(s)}),hn(5,"async"),N(),F(6,"ccf-slices-input",5),we("slicesConfigChange",function(s){return i.model.setSlicesConfig(s)}),hn(7,"async"),N(),F(8,"ccf-rotation-slider",6),we("rotationChange",function(s){return i.model.setRotation(s)}),hn(9,"async"),N(),rt(10,"mat-divider"),F(11,"mat-expansion-panel",7),F(12,"mat-expansion-panel-header",8),F(13,"mat-panel-title",9),Re(14,"Anatomical Structure Tags"),N(),N(),F(15,"ccf-tag-search",10),we("added",function(s){return i.astags.addTags(s)}),N(),wt(16,QRe,2,3,"ccf-tag-list",11),hn(17,"async"),wt(18,JRe,0,0,"ng-template",null,12,kw),F(20,"div",13),rt(21,"span",14),F(22,"span",15),Re(23,"Assigned"),N(),rt(24,"span",16),F(25,"span",17),Re(26,"Added"),N(),N(),N(),rt(27,"mat-divider"),rt(28,"div",18),F(29,"ccf-review-button",19),we("registerData",function(){return i.registration.register()})("enterErrorMode",function(){return i.registration.setDisplayErrors(!i.registration.isValid)}),hn(30,"async"),hn(31,"async"),hn(32,"async"),hn(33,"async"),N(),N(),N()),2&t){const r=ms(19);let s,o;q(4),re("blockSize",gn(5,11,i.model.blockSize$)),q(2),re("slicesConfig",gn(7,13,i.model.slicesConfig$)),q(2),re("rotation",gn(9,15,i.model.rotation$)),q(3),re("expanded",i.modalClosed),q(4),re("search",i.astags.searchExternal),q(1),re("ngIf",null==(s=gn(17,17,i.model.organ$))?null:s.name)("ngIfElse",r),q(13),re("registrationCallbackSet",gn(30,19,i.page.registrationCallbackSet$))("displayErrors",gn(31,21,i.registration.displayErrors$))("registrationIsValid",gn(32,23,i.registration.valid$))("metaData",null!==(o=gn(33,25,i.registration.metadata$))&&void 0!==o?o:av(27,eke))}},directives:[EIe,TRe,ARe,DRe,Wq,Bx,Vx,eW,lc,mp,bs,XRe,ZRe],pipes:[Uu],styles:["[_nghost-%COMP%]{display:block;height:calc(100% - 3rem);margin-top:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]{height:100%;margin-right:.375rem;scrollbar-width:thin}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:.75rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;margin-left:1.5rem;margin-right:.375rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .info-button-container[_ngcontent-%COMP%]{height:3.75rem;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-width:3px}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 .5rem 0 0;font-weight:bold;-webkit-user-select:none;-moz-user-select:none;font-size:1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding-left:0;padding-right:0}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:3rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .icon.add[_ngcontent-%COMP%]{position:absolute;width:3.625rem;height:3.625rem;font-size:3.625rem;top:-1.9375rem;right:-1.1875rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .tag-list[_ngcontent-%COMP%]{max-height:32rem;margin-left:-1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .tag-list-placeholder[_ngcontent-%COMP%]{display:flex;height:4rem;align-items:center;justify-content:center;font-weight:400}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;width:100%;margin-top:1.5rem;align-items:center;font-size:.9rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border-radius:50%}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .dot.assigned[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .dot.added[_ngcontent-%COMP%]{margin-left:1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();function p9(n,e){return qo((t,i)=>e?e(t[n],i[n]):t[n]===i[n])}const nke=["input"],ike=function(n){return{enterDuration:n}},rke=["*"],ske=new Ce("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let g9=0;const ake={provide:Mo,useExisting:T(()=>v9),multi:!0};class m9{constructor(e,t){this.source=e,this.value=t}}const _9=new Ce("MatRadioGroup");let y9=(()=>{class n{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+g9++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Ve}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=Nt(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=Nt(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new m9(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(E(zn))},n.\u0275dir=ge({type:n,inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"}}),n})(),v9=(()=>{class n extends y9{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=$n(n)))(i||n)}}(),n.\u0275dir=ge({type:n,selectors:[["mat-radio-group"]],contentQueries:function(t,i,r){if(1&t&&Fi(r,b9,5),2&t){let s;It(s=Pt())&&(i._radios=s)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[Ft([ake,{provide:_9,useExisting:n}]),vt]}),n})();class lke{constructor(e){this._elementRef=e}}const cke=Ff(Nf(lke));let uke=(()=>{class n extends cke{constructor(t,i,r,s,o,a,l,c){super(i),this._changeDetector=r,this._focusMonitor=s,this._radioDispatcher=o,this._providerOverride=l,this._uniqueId="mat-radio-"+ ++g9,this.id=this._uniqueId,this.change=new Ve,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===a,c&&(this.tabIndex=Eo(c,0)),this._removeUniqueSelectionListener=o.listen((d,f)=>{d!==this.id&&f===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(t){const i=Nt(t);this._checked!==i&&(this._checked=i,i&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!i&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),i&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled(Nt(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=Nt(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new m9(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(E(y9),E(ot),E(zn),E(dl),E(nS),E(String),E(void 0),E(String))},n.\u0275dir=ge({type:n,viewQuery:function(t,i){if(1&t&&ii(nke,5),2&t){let r;It(r=Pt())&&(i._inputElement=r.first)}},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[vt]}),n})(),b9=(()=>{class n extends uke{constructor(t,i,r,s,o,a,l,c){super(t,i,r,s,o,a,l,c)}}return n.\u0275fac=function(t){return new(t||n)(E(_9,8),E(ot),E(zn),E(dl),E(nS),E(Xo,8),E(ske,8),ds("tabindex"))},n.\u0275cmp=$e({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,i){1&t&&we("focus",function(){return i._inputElement.nativeElement.focus()}),2&t&&(an("tabindex",null)("id",i.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),lt("mat-radio-checked",i.checked)("mat-radio-disabled",i.disabled)("_mat-animation-noopable",i._noopAnimations)("mat-primary","primary"===i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[vt],ngContentSelectors:rke,decls:13,vars:20,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,i){if(1&t&&(Ar(),F(0,"label",0,1),F(2,"span",2),rt(3,"span",3),rt(4,"span",4),F(5,"input",5,6),we("change",function(s){return i._onInputInteraction(s)})("click",function(s){return i._onInputClick(s)}),N(),F(7,"span",7),rt(8,"span",8),N(),N(),F(9,"span",9),F(10,"span",10),Re(11,"\xa0"),N(),kn(12),N(),N()),2&t){const r=ms(1);an("for",i.inputId),q(5),re("id",i.inputId)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex)("required",i.required),an("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),q(2),re("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Fg(18,ike,i._noopAnimations?0:150)),q(2),lt("mat-radio-label-before","before"==i.labelPosition)}},directives:[Ko],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),dke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Jl,Un],Un]}),n})();const hke=["label"],fke=["options"],pke=function(){return["Register","3D\xa0Preview"]};let gke=(()=>{class n{constructor(t){this.ga=t,this.clsName="ccf-stage-nav",this.side="anterior",this.view3D=!1,this.sideChange=new Ve,this.view3DChange=new Ve,this.isDropdownActive=!1,this.isDropdownHidden=!0}set useDropdownMenu(t){this.isDropdownActive=t,this.isDropdownHidden=!0}get labelEl(){return this.labelRef.nativeElement}get optionsEl(){return this.optionsRef.nativeElement}handleClick(t){const{isDropdownHidden:i,labelEl:r,optionsEl:s}=this;r.contains(t)?this.isDropdownHidden=!i:s.contains(t)||(this.isDropdownHidden=!0)}updateSide(t){this.ga.event("side_update","stage_nav",t),"3D"===t?this.updateView(!0):(this.updateView(!1),this.side=t,this.sideChange.emit(this.side))}updateView(t){this.view3D=t,this.ga.event("view_update","stage_nav",t?"3D":"Register"),this.view3DChange.emit(this.view3D)}}return n.\u0275fac=function(t){return new(t||n)(E(Ns))},n.\u0275cmp=$e({type:n,selectors:[["ccf-stage-nav"]],viewQuery:function(t,i){if(1&t&&(ii(hke,7),ii(fke,7)),2&t){let r;It(r=Pt())&&(i.labelRef=r.first),It(r=Pt())&&(i.optionsRef=r.first)}},hostVars:2,hostBindings:function(t,i){1&t&&we("click",function(s){return i.handleClick(s.target)},!1,Qp),2&t&&Vn(i.clsName)},inputs:{useDropdownMenu:"useDropdownMenu",side:"side",view3D:"view3D"},outputs:{sideChange:"sideChange",view3DChange:"view3DChange"},decls:18,vars:10,consts:[[1,"dropdown-label"],["label",""],[1,"stage-options"],["options",""],[1,"input-group",3,"value","change"],["value","left",1,"nav-input"],["value","right",1,"nav-input"],["value","anterior","checked","",1,"nav-input"],["value","posterior",1,"nav-input"],["matTooltip","Change view.",1,"view-slider",3,"labels","value","valueChange"]],template:function(t,i){1&t&&(F(0,"div",0,1),F(2,"mat-label"),Re(3,"Options"),N(),F(4,"mat-icon"),Re(5,"arrow_drop_down"),N(),N(),F(6,"div",2,3),F(8,"mat-radio-group",4),we("change",function(s){return i.updateSide(s.value)}),F(9,"mat-radio-button",5),Re(10,"Left"),N(),F(11,"mat-radio-button",6),Re(12,"Right"),N(),F(13,"mat-radio-button",7),Re(14,"Anterior"),N(),F(15,"mat-radio-button",8),Re(16,"Posterior"),N(),N(),F(17,"ccf-labeled-slide-toggle",9),we("valueChange",function(s){return i.updateView("Register"!==s)}),N(),N()),2&t&&(lt("dropdown",i.isDropdownActive),q(6),lt("dropdowncontainer",i.isDropdownActive)("hidden",i.isDropdownActive&&i.isDropdownHidden),q(2),re("value",i.side),q(9),re("labels",av(9,pke))("value",i.view3D?"3D\xa0Preview":"Register"))},directives:[Bf,Ps,v9,b9,EF,lc],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}[_nghost-%COMP%]   .dropdown-label[_ngcontent-%COMP%]{display:none;align-items:center}[_nghost-%COMP%]   .dropdown-label[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%], [_nghost-%COMP%]   .dropdown-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:1.5rem}[_nghost-%COMP%]   .dropdown-label.dropdown[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:start}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .nav-input[_ngcontent-%COMP%]{margin-right:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]   .view-slider[_ngcontent-%COMP%]{margin-left:-1rem;margin-bottom:1.5rem;white-space:nowrap}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:.25rem;width:16.5rem;position:absolute;top:3.5rem;z-index:1;transition:opacity .25s}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-top:.5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{margin-bottom:.5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:0;display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .nav-input[_ngcontent-%COMP%]{display:flex;margin:0 1.5rem 0 0;height:2.5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   .view-slider[_ngcontent-%COMP%]{display:flex;align-items:center;height:3rem;margin:0 .5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{visibility:visible;border-top:2px solid}[_nghost-%COMP%]   .stage-options.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .25s,opacity .25s}[_nghost-%COMP%]   .stage-options.hidden[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),n})();function mke(n,e){if(1&n){const t=rr();F(0,"ccf-body-ui",16),we("rotationChange",function(r){rn(t),nt();const s=ms(24);return s.rotation=r[0],s.rotationX=r[1]}),hn(1,"async"),hn(2,"async"),hn(3,"async"),N()}if(2&n){const t=nt();re("scene",gn(1,5,t.scene.nodes$))("rotation",gn(2,7,t.scene.rotation$))("bounds",gn(3,9,t.bounds$))("zoom",11.5)("interactive",!0)}}function _ke(n,e){if(1&n){const t=rr();F(0,"ccf-body-ui",17),we("nodeDrag",function(r){return rn(t),nt().handleNodeDrag(r)}),hn(1,"async"),hn(2,"async"),N()}if(2&n){const t=nt();re("scene",gn(1,4,t.scene.rotatedNodes$))("interactive",!1)("bounds",gn(2,6,t.bounds$))("zoom",11.5)}}function yke(n,e){1&n&&rt(0,"ccf-store-debug",18)}function vke(n,e){if(1&n){const t=rr();F(0,"div",19),F(1,"button",20),we("click",function(){rn(t);const r=nt();return r.debugMode=!r.debugMode}),Re(2,"State"),N(),F(3,"button",21),we("click",function(){return rn(t),nt().registration.setUseRegistrationCallback(!0)}),Re(4,"Use callback"),N(),F(5,"button",21),we("click",function(){return rn(t),nt().registration.setUseRegistrationCallback(!1)}),Re(6,"Use download"),N(),N()}}let bke=(()=>{class n{constructor(t,i,r,s,o,a){this.model=t,this.page=i,this.registration=r,this.scene=s,this.rootRef=o,this.cdr=a,this.clsName="ccf-content",this.position$=this.model.position$.pipe(Me(l=>({x:Math.floor(l.x),y:Math.floor(l.y),z:Math.floor(l.z)}))),this.is3DView$=this.model.viewType$.pipe(Me(l=>"3d"===l)),this.bounds$=this.model.organDimensions$.pipe(Me(l=>({x:Math.max(l.x,this.model.defaultPosition.x+40)/1e3,y:Math.max(l.y,this.model.defaultPosition.y+40)/1e3,z:Math.max(l.z,this.model.defaultPosition.z+40)/1e3})),p9("x"),p9("y")),this.isNarrowView=!1,this.debugMode=!1,this.showDebugButtons=!ou.production}ngOnInit(){this.sensor=new UG.ResizeSensor(this.rootRef.nativeElement,({width:t})=>{const i=t<440;this.isNarrowView!==i&&(this.isNarrowView=i,this.cdr.markForCheck())})}ngOnDestroy(){this.sensor.detach()}setViewType(t){this.model.setViewType(t?"3d":"register")}resetStage(){this.model.setPosition(this.model.defaultPosition),this.model.setViewSide("anterior"),this.model.setViewType("register")}handleNodeDrag(t){if("#DraftPlacement"===t.node["@id"]&&t.info.coordinate){const[i,r]=t.info.coordinate.map(d=>1e3*d),{position:s,viewSide:o,organDimensions:a}=this.model.snapshot,l=[a.x,a.y,a.z].map(d=>d/2);let c=s;switch(o){case"anterior":c={x:i+l[0],y:r+l[1],z:s.z};break;case"posterior":c={x:-i+l[0],y:r+l[1],z:s.z};break;case"left":c={x:s.x,y:r+l[1],z:-i+l[2]};break;case"right":c={x:s.x,y:r+l[1],z:i+l[2]}}this.model.setPosition(c)}}}return n.\u0275fac=function(t){return new(t||n)(E(oi),E(zi),E(Cr),E(is),E(ot),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-content"]],hostVars:2,hostBindings:function(t,i){2&t&&Vn(i.clsName)},decls:29,vars:34,consts:[[1,"top-bar"],[3,"useDropdownMenu","view3D","side","view3DChange","sideChange"],["matRipple","","matRippleColor","rgba(204, 204, 204, 0.25)",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"],[1,"main-content"],["class","body-ui","camera","perspective",3,"scene","rotation","bounds","zoom","interactive","rotationChange",4,"ngIf"],["class","body-ui","camera","orthographic",3,"scene","interactive","bounds","zoom","nodeDrag",4,"ngIf"],[1,"gizmo-area"],[1,"position-display"],[1,"position"],[1,"x"],[1,"y"],[1,"z"],[1,"gizmo",3,"scene","rotation","interactive","zoom"],["gizmo",""],["class","debug",4,"ngIf"],["style","position: absolute; bottom: 1rem; display: flex; flex-direction: row; justify-content: space-between; width: 7rem;",4,"ngIf"],["camera","perspective",1,"body-ui",3,"scene","rotation","bounds","zoom","interactive","rotationChange"],["camera","orthographic",1,"body-ui",3,"scene","interactive","bounds","zoom","nodeDrag"],[1,"debug"],[2,"position","absolute","bottom","1rem","display","flex","flex-direction","row","justify-content","space-between","width","7rem"],[2,"width","3rem","font-size",".7rem",3,"click"],[3,"click"]],template:function(t,i){if(1&t&&(F(0,"div",0),F(1,"ccf-stage-nav",1),we("view3DChange",function(s){return i.setViewType(s)})("sideChange",function(s){return i.model.setViewSide(s)}),hn(2,"async"),hn(3,"async"),N(),F(4,"mat-icon",2),we("click",function(){return i.resetStage()}),Re(5,"refresh"),N(),N(),F(6,"div",3),wt(7,mke,4,11,"ccf-body-ui",4),hn(8,"async"),wt(9,_ke,3,8,"ccf-body-ui",5),hn(10,"async"),F(11,"div",6),F(12,"div",7),F(13,"div",8),F(14,"div",9),Re(15),hn(16,"async"),N(),F(17,"div",10),Re(18),hn(19,"async"),N(),F(20,"div",11),Re(21),hn(22,"async"),N(),N(),N(),rt(23,"ccf-body-ui",12,13),hn(25,"async"),hn(26,"async"),N(),N(),wt(27,yke,1,0,"ccf-store-debug",14),wt(28,vke,7,0,"div",15)),2&t){let r,s,o;q(1),re("useDropdownMenu",i.isNarrowView)("view3D",gn(2,16,i.is3DView$))("side",gn(3,18,i.model.viewSide$)),q(3),re("matRippleCentered",!0)("matRippleUnbounded",!0),q(3),re("ngIf","3d"===gn(8,20,i.model.viewType$)),q(2),re("ngIf","register"===gn(10,22,i.model.viewType$)),q(6),_s("X: ",null==(r=gn(16,24,i.position$))?null:r.x,""),q(3),_s("Y: ",null==(s=gn(19,26,i.position$))?null:s.y,""),q(3),_s("Z: ",null==(o=gn(22,28,i.position$))?null:o.z,""),q(2),re("scene",gn(25,30,i.scene.gizmo$))("rotation",gn(26,32,i.scene.rotation$))("interactive",!1)("zoom",9.5),q(4),re("ngIf",i.showDebugButtons&&i.debugMode),q(1),re("ngIf",i.showDebugButtons)}},directives:[gke,Ps,Ko,bs,YOe,nIe],pipes:[Uu],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;padding:1.5rem;overflow:hidden}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;height:calc(100% - 1rem)}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .body-ui[_ngcontent-%COMP%]{flex:auto;transition:opacity 1s}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]{width:4rem;margin-top:1.5rem;margin-left:1.5rem;z-index:10}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]   .position-display[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]   .gizmo[_ngcontent-%COMP%]{height:5.5rem}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]   .gizmo[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{opacity:0;z-index:0}[_nghost-%COMP%]   .ccf-store-debug[_ngcontent-%COMP%]{color:#fff;position:absolute;top:.5rem;max-width:55rem}"],changeDetection:0}),n})();function Cke(n,e){if(1&n){const t=rr();F(0,"div",11),we("click",function(){rn(t),nt();const r=ms(15);return r.expanded=!r.expanded}),F(1,"mat-icon",12),Re(2),N(),N()}if(2&n){nt();const t=ms(15);q(2),_s(" ",t.expanded?"arrow_drop_up":"arrow_drop_down"," ")}}function wke(n,e){if(1&n){const t=rr();F(0,"div",11),we("click",function(){rn(t);const r=nt();return r.open=!r.open}),F(1,"mat-icon",13),Re(2),N(),N()}if(2&n){const t=nt();q(2),_s(" ",t.open?"arrow_drop_up":"arrow_drop_down"," ")}}const Eke=function(n){return[n]};let Ske=(()=>{class n{constructor(t,i,r,s,o,a,l,c,d){this.model=t,this.page=i,this.consentService=r,this.snackbar=s,this.theming=o,this.globalConfig=c,this.organList=CF,this.open=!0,this.registrationStarted=!1,this.disablePositionChange=!1,this.theme$=this.globalConfig.getOption("theme"),this.themeMode$=new Mf(1),this.header$=this.globalConfig.getOption("header"),this.homeUrl$=this.globalConfig.getOption("homeUrl"),this.logoTooltip$=this.globalConfig.getOption("logoTooltip"),this.subscriptions=new Se,o.initialize(a,l),this.subscriptions.add(i.registrationCallbackSet$.subscribe(f=>{this.open=!f})),this.subscriptions.add(i.registrationStarted$.subscribe(f=>{this.registrationStarted=f})),this.theme$.subscribe(f=>{this.theme=f}),this.globalConfig.getOption("homeUrl").subscribe(f=>{this.homeUrl=f}),this.globalConfig.getOption("logoTooltip").subscribe(f=>{this.logoTooltip=f}),Ki([this.theme$,this.themeMode$]).subscribe(([f,p])=>{this.theming.setTheme(`${f}-theme-${p}`),d.markForCheck()})}get isLightTheme(){return this.theming.getTheme().endsWith("light")}ngOnInit(){const t=this.snackbar.openFromComponent(RIe,{data:{preClose:()=>{t.dismiss()}},duration:"not-set"===this.consentService.consent?1/0:3e3});this.themeMode$.next("light"),this.theming.setTheme(`${this.theme}-theme-light`)}toggleScheme(){this.themeMode$.next(this.isLightTheme?"dark":"light")}handleKey(t){const i=this.model.snapshot.position;if(this.disablePositionChange||!this.registrationStarted)return;t.preventDefault();const r=t.repeat?1:.5;let s=i;switch(t.key){case"q":s=Object.assign(Object.assign({},i),{z:i.z+r});break;case"e":s=Object.assign(Object.assign({},i),{z:i.z-r});break;case"w":s=Object.assign(Object.assign({},i),{y:i.y+r});break;case"s":s=Object.assign(Object.assign({},i),{y:i.y-r});break;case"a":s=Object.assign(Object.assign({},i),{x:i.x-r});break;case"d":s=Object.assign(Object.assign({},i),{x:i.x+r})}this.model.setPosition(s)}handleClick(t){this.disablePositionChange="INPUT"===t.nodeName}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E(oi),E(zi),E(a0),E(pae),E(wF),E(ot),E(kt),E(wh),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-root"]],hostBindings:function(t,i){1&t&&we("keydown",function(s){return i.handleKey(s)},!1,Qp)("click",function(s){return i.handleClick(s.target)},!1,Qp)},decls:21,vars:35,consts:[[3,"logoTooltip","homeUrl"],["opened",""],[3,"modalClosed","disableSlider"],["position","end","opened",""],[3,"modalClosed"],[1,"selector-drawer"],[3,"organList","selectedOrgans","organsChanged"],["organSelector",""],[1,"close-button-wrapper"],["class","close-button",3,"click",4,"ngIf"],[1,"stage-content"],[1,"close-button",3,"click"],["aria-hidden","false","aria-label","Expand carousel drawer",1,"expand-collapse-icon"],["aria-hidden","false","aria-label","Close carousel drawer",1,"expand-collapse-icon"]],template:function(t,i){if(1&t&&(rt(0,"ccf-registration-modal"),rt(1,"ccf-header",0),hn(2,"async"),hn(3,"async"),hn(4,"async"),F(5,"ccf-drawer-container"),F(6,"ccf-drawer",1),rt(7,"ccf-left-sidebar",2),rt(8,"ccf-drawer-toggle-button"),N(),F(9,"ccf-drawer",3),rt(10,"ccf-right-sidebar",4),rt(11,"ccf-drawer-toggle-button"),N(),F(12,"ccf-drawer-content"),F(13,"div",5),F(14,"ccf-organ-selector",6,7),we("organsChanged",function(s){return i.model.setOrgan(s[0])}),hn(16,"async"),N(),F(17,"div",8),wt(18,Cke,3,1,"div",9),wt(19,wke,3,1,"div",9),N(),N(),rt(20,"ccf-content",10),N(),N()),2&t){const r=ms(15);q(1),lt("header-hidden",!1===gn(2,25,i.header$)),re("logoTooltip",gn(3,27,i.logoTooltip$))("homeUrl",gn(4,29,i.homeUrl$)),q(6),re("modalClosed",i.registrationStarted)("disableSlider",!(null!=r.selectedOrgans[0]&&r.selectedOrgans[0].hasSex)),q(3),re("modalClosed",i.registrationStarted),q(3),lt("closed",!i.open)("expanded",r.expanded),q(1),lt("closed",!i.open),re("organList",i.organList)("selectedOrgans",Fg(33,Eke,gn(16,31,i.model.organ$))),q(3),lt("closed",!i.open)("selector-expanded",r.expanded),q(1),re("ngIf",i.open),q(1),re("ngIf",!r.expanded),q(1),lt("expanded-stage",!i.open)("retracted-stage",r.expanded)}},directives:[hPe,mPe,SPe,xF,xRe,MRe,tke,cM,Aq,bs,bke,Ps],pipes:[Uu],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;font-size:1rem;color:#000}[_nghost-%COMP%]   .header-hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer[_ngcontent-%COMP%]{width:25.5rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]{position:relative;z-index:1}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]{top:0rem;display:flex;flex-direction:column;position:relative;height:5.688rem;transition:all .5s ease-in-out}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer.expanded[_ngcontent-%COMP%]{height:15rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   ccf-organ-selector[_ngcontent-%COMP%]{height:100%;padding-top:.5rem;transition:all .5s}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   ccf-organ-selector.closed[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   .close-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;height:0;z-index:2}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   .close-button-wrapper[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{cursor:pointer;transition:.6s}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   .close-button-wrapper[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]{width:3rem;height:1.2rem;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:#fff;border-bottom-left-radius:.2rem;border-bottom-right-radius:.2rem;transition:.6s}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   .close-button-wrapper[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]:hover{background-color:#ececec}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer.closed[_ngcontent-%COMP%]{height:3rem;top:-2.9rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .stage-content[_ngcontent-%COMP%]{border-radius:.5rem!important;height:calc(100% - 2.688rem - 3rem - 1.5rem)}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .expanded-stage[_ngcontent-%COMP%]{height:calc(100% - 1.5rem);padding-bottom:1rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .retracted-stage[_ngcontent-%COMP%]{height:calc(100% - 2.688rem - 14rem)}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-content[_ngcontent-%COMP%]{position:absolute;transition-duration:.5s;transition-timing-function:ease-in-out;transition-property:all;bottom:1.5rem;z-index:1}"],changeDetection:0}),n})();function xke(n,e){1&n&&rt(0,"ccf-root")}let Mke=(()=>{class n extends LIe{constructor(t,i){const r=BIe;super(t,i,{initialDelay:500,initialConfig:Object.assign(Object.assign(Object.assign({},ou.dbOptions),globalThis.ruiConfig),ou.customization),parse:{useDownload:r.boolean,user:r.json,organ:r.json,editRegistration:r.json,register:r.function,cancelRegistration:r.function,fetchPreviousRegistrations:r.function,skipUnsavedChangesConfirmation:r.boolean,header:r.boolean}})}}return n.\u0275fac=function(t){return new(t||n)(E(wh),E(zn))},n.\u0275cmp=$e({type:n,selectors:[["ccf-root-wc"]],inputs:{baseHref:"baseHref",useDownload:"useDownload",user:"user",organ:"organ",editRegistration:"editRegistration",register:"register",cancelRegistration:"cancelRegistration",fetchPreviousRegistrations:"fetchPreviousRegistrations",skipUnsavedChangesConfirmation:"skipUnsavedChangesConfirmation",theme:"theme",header:"header",homeUrl:"homeUrl",logoTooltip:"logoTooltip"},features:[vt],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&wt(0,xke,1,0,"ccf-root",0),2&t&&re("ngIf",i.initialized)},directives:[bs,Ske],encapsulation:2,changeDetection:0}),n})();const Tke=new Ce("Global configuration object");function Ake(n){return n.get("ruiConfig",{user:{firstName:"",lastName:""}})}let Dke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[{provide:Tke,useFactory:Ake,deps:[Iq]}]}),n})(),Oke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[{provide:fv,useValue:wF.initialize,multi:!0},wF]}),n})(),Ike=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[Rr,Pa,yW,...t]}}}return n.\u0275fac=function(t){return new(t||n)(I(Rr,2),I(Pa,2))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const fM=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class kke{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=lp(this.action),i=function(n){return fM(n.getHours(),2)+":"+fM(n.getMinutes(),2)+":"+fM(n.getSeconds(),2)+"."+fM(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class Fke{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch(i){console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch(e){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const C9=new Ce("NGXS_LOGGER_PLUGIN_OPTIONS");let Nke=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new Fke(this._options),this._store=this._store||this._injector.get(fh);const s=new kke(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(Di(o=>{s.completed(o)}),Sa(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(I(C9),I(kt))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const w9=new Ce("LOGGER_USER_OPTIONS");function Lke(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let Bke=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:$R,useClass:Nke,multi:!0},{provide:w9,useValue:t},{provide:C9,useFactory:Lke,deps:[w9]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const AF=new Ce("NGXS_STORAGE_PLUGIN_OPTION"),E9=new Ce("STORAGE_ENGINE"),DF="@@STATE",S9="NGXS_OPTIONS_META";function Vke(n){return Array.isArray(n)||(n=[n]),n.map(e=>(e.hasOwnProperty(S9)&&(e=e[S9].name),e instanceof class{constructor(e){this.name=e,(function(n){return n.hasOwnProperty(GR)||Object.defineProperty(n,GR,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),ZR(n)}(this)).makeRootSelector=i=>i.getStateGetter(this.name)}getName(){return this.name}toString(){return`StateToken[${this.name}]`}}?e.getName():e))}function zke(n){return void 0!==n&&n.key&&(n.key=Vke(n.key)),Object.assign({key:[DF],storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:e=>e,afterDeserialize:e=>e},n)}function Uke(n,e){return ED(e)?null:0===n.storage?localStorage:1===n.storage?sessionStorage:null}let jke=(()=>{class n{constructor(t,i,r){this._options=t,this._engine=i,this._platformId=r}handle(t,i,r){if(ED(this._platformId)&&null===this._engine)return r(t,i);const s=this._options.key,o=function(n){const e=lp(n);return function(t){return e===lp(t)}}(i),a=o(I$)||o(P$);let l=!1;if(a)for(const c of s){const d=c===DF;let f=this._engine.getItem(c);if("undefined"!==f&&null!=f){try{const p=this._options.deserialize(f);f=this._options.afterDeserialize(p,c)}catch(p){console.error("Error ocurred while deserializing the store value, falling back to empty object."),f={}}this._options.migrations&&this._options.migrations.forEach(p=>{p.version===Bm(f,p.versionKey||"version")&&(!p.key&&d||p.key===c)&&(f=p.migrate(f),l=!0)}),t=d?Object.assign({},t,f):WR(t,c,f)}}return r(t,i).pipe(Di(c=>{if(!a||a&&l)for(const d of s){let f=c;d!==DF&&(f=Bm(c,d));try{const p=this._options.beforeSerialize(f,d);this._engine.setItem(d,this._options.serialize(p))}catch(p){console.error("Error ocurred while serializing the store value, value not updated.")}}}))}}return n.\u0275fac=function(t){return new(t||n)(I(AF),I(E9),I(ll))},n.\u0275prov=ue({token:n,factory:n.\u0275fac}),n})();const x9=new Ce("USER_OPTIONS");let Hke=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:$R,useClass:jke,multi:!0},{provide:x9,useValue:t},{provide:AF,useFactory:zke,deps:[x9]},{provide:E9,useFactory:Uke,deps:[AF,ll]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({}),n})();const M9=[{name:"bladder",namespace:"app",url:"assets/icons/organs/ico-organs-bladder.svg"},{name:"blood",namespace:"app",url:"assets/icons/organs/ico-organs-blood.svg"},{name:"bone-marrow",namespace:"app",url:"assets/icons/organs/ico-organs-bone-marrow.svg"},{name:"brain",namespace:"app",url:"assets/icons/organs/ico-organs-brain.svg"},{name:"eye",namespace:"app",url:"assets/icons/organs/ico-organs-eye.svg"},{name:"fallopian-tube-left",namespace:"app",url:"assets/icons/organs/ico-organs-fallopian-tube-left.svg"},{name:"fallopian-tube-right",namespace:"app",url:"assets/icons/organs/ico-organs-fallopian-tube-right.svg"},{name:"heart",namespace:"app",url:"assets/icons/organs/ico-organs-heart.svg"},{name:"kidney-left",namespace:"app",url:"assets/icons/organs/ico-organs-kidney-left.svg"},{name:"kidney-right",namespace:"app",url:"assets/icons/organs/ico-organs-kidney-right.svg"},{name:"kidney",namespace:"app",url:"assets/icons/organs/ico-organs-kidney.svg"},{name:"knee",namespace:"app",url:"assets/icons/organs/ico-organs-knee.svg"},{name:"large-intestine",namespace:"app",url:"assets/icons/organs/ico-organs-large-intestine.svg"},{name:"liver",namespace:"app",url:"assets/icons/organs/ico-organs-liver.svg"},{name:"lung-left",namespace:"app",url:"assets/icons/organs/ico-organs-lung-left.svg"},{name:"lung-right",namespace:"app",url:"assets/icons/organs/ico-organs-lung-right.svg"},{name:"lung",namespace:"app",url:"assets/icons/organs/ico-organs-lung.svg"},{name:"lymph-nodes",namespace:"app",url:"assets/icons/organs/ico-organs-lymph-nodes.svg"},{name:"neuron",namespace:"app",url:"assets/icons/organs/ico-organs-neuron.svg"},{name:"ovaries",namespace:"app",url:"assets/icons/organs/ico-organs-ovaries.svg"},{name:"ovary-left",namespace:"app",url:"assets/icons/organs/ico-organs-ovary-left.svg"},{name:"ovary-right",namespace:"app",url:"assets/icons/organs/ico-organs-ovary-right.svg"},{name:"pancreas",namespace:"app",url:"assets/icons/organs/ico-organs-pancreas.svg"},{name:"pelvis-f",namespace:"app",url:"assets/icons/organs/ico-organs-pelvis-f.svg"},{name:"prostate",namespace:"app",url:"assets/icons/organs/ico-organs-prostate.svg"},{name:"skin",namespace:"app",url:"assets/icons/organs/ico-organs-skin.svg"},{name:"small-intestine",namespace:"app",url:"assets/icons/organs/ico-organs-small intestine.svg"},{name:"spleen",namespace:"app",url:"assets/icons/organs/ico-organs-spleen.svg"},{name:"stomach",namespace:"app",url:"assets/icons/organs/ico-organs-stomach.svg"},{name:"thymus",namespace:"app",url:"assets/icons/organs/ico-organs-thymus.svg"},{name:"ureter-left",namespace:"app",url:"assets/icons/organs/ico-organs-ureter-left.svg"},{name:"ureter-right",namespace:"app",url:"assets/icons/organs/ico-organs-ureter-right.svg"},{name:"uterus",namespace:"app",url:"assets/icons/organs/ico-organs-uterus.svg"},{name:"vasculature-thick",namespace:"app",url:"assets/icons/organs/ico-organs-vasculature-thick.svg"},{name:"vasculature-thin",namespace:"app",url:"assets/icons/organs/ico-organs-vasculature-thin.svg"},{name:"opacity",namespace:"app",url:"assets/icons/opacity-24px.svg"},{name:"visibility_on",namespace:"app",url:"assets/icons/visibility-on-24px.svg"},{name:"visibility_off",namespace:"app",url:"assets/icons/visibility-off-24px.svg"},{name:"visibility_off_cube",namespace:"app",url:"assets/icons/ico-cube.svg"}];let ad=class extends CAe{constructor(e,t,i){super(),this.registry=e,this.sanitizer=t,this.globalConfig=i}ngxsOnInit(){var e;M9.filter(t=>void 0!==t.html).map(t=>Object.assign(Object.assign({},t),{html:this.sanitizer.bypassSecurityTrustHtml(t.html)})).forEach(t=>this.registerIconImpl(t)),null===(e=this.registry)||void 0===e||e.addSvgIconResolver((t,i)=>{var r;const s=M9.find(a=>{var l,c;return(null!==(l=a.name)&&void 0!==l?l:"")===t&&(null!==(c=a.namespace)&&void 0!==c?c:"")===i});if(void 0===s||void 0===s.url)return null;const o=null!==(r=this.globalConfig.snapshot.baseHref)&&void 0!==r?r:"";return this.sanitizer.bypassSecurityTrustResourceUrl(o+s.url)})}registerIcon(e){return this.registerIconImpl(e)}registerIconImpl(e){if(!this.registry||!e.url&&!e.html)return!1;const t=this.registry,r=t[this.getMethodName(e)],s=this.getArguments(e);if(!r)return!1;try{return r.apply(t,s),!0}catch(o){return!1}}getMethodName({name:e,namespace:t,url:i}){const r=["addSvgIcon"];return e||r.push("Set"),i||r.push("Literal"),t&&r.push("InNamespace"),r.join("")}getArguments({name:e,namespace:t,url:i,html:r}){return[t,e,null!=i?i:r].filter(o=>!!o)}};ad.\u0275fac=function(e){return new(e||ad)(I(Vv,8),I(Xd),I(wh))},ad.\u0275prov=ue({token:ad,factory:ad.\u0275fac}),Le([en()],ad.prototype,"registerIcon",null),ad=Le([bh(),ph({name:"iconRegistry"})],ad);const $ke=[wh,ad,zi,oi,Do,uc,Cr,is];let Gke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Ike.forRoot(),ia.forRoot($ke,{developmentMode:!ou.production}),Hke.forRoot({key:["registration.registrations"]}),Bke.forRoot({disabled:ou.production})]]}),n})(),Wke=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}}return n.\u0275fac=function(t){return new(t||n)(I(n,12))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[oU,WOe.forRoot({gaToken:ou.googleAnalyticsToken,appName:"rui"}),OIe,Dke,Gke,Oke]]}),n})(),OF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Uq]]}),n})(),qke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,dke,s9,Ir,TF,OF,cc]]}),n})(),Yke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir]]}),n})(),Xke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,qke,Ir,iIe,Yke,Jl,XOe]]}),n})(),Kke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir,cc]]}),n})(),Zke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn]]}),n})(),Qke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,s9]]}),n})(),T9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Uq,Gb,wk,Ek,cc]]}),n})(),Jke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir,Jl,Oq]]}),n})(),A9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir,Jq]]}),n})(),eFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Gf]]}),n})(),tFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,kk,Ir,cc,TF,Zke,OF,T9,A9,Qke,Oq,Jke,A9,eFe]]}),n})(),nFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Gf,cc,T9,OF,Dq]]}),n})(),iFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ik,Ir,nFe]]}),n})(),rFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Gb,Ir,Jl,cc]]}),n})(),sFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ir,WG,Jl,cc]]}),n})(),oFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Gb,Ir,Jl,cc,MIe]]}),n})(),aFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Jq,Ir]]}),n})(),lFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,wk,Ek,Gf,jRe,Nv,Ir,Gb]]}),n})(),cFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,Ik,Ir,Gf]]}),n})(),uFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,cFe,Gf,cc]]}),n})(),dFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({imports:[[Sn,kk,TF,Ir,CO,cc,rFe,uFe,sFe,oFe,aFe,lFe,SIe]]}),n})(),hFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[{provide:Hq,useValue:jq}],imports:[[hE,CO,Ir]]}),n})(),fFe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function(n,e){const t=function(n,e){return e.get(sl).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new Qte(n,e.injector),r=function(n){const e={};return n.forEach(({propName:t,templateName:i})=>{e[function(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=t}),e}(t);class s extends ene{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:l})=>{if(!this.hasOwnProperty(l))return;const c=this[l];delete this[l],a.setInputValue(l,c)})}return this._ngElementStrategy}attributeChangedCallback(a,l,c,d){this.ngElementStrategy.setInputValue(r[a],c)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=function(n,e,t){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(r),t.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(Mke,{injector:this.injector});customElements.define("ccf-rui",t)}}return n.\u0275fac=function(t){return new(t||n)(I(kt))},n.\u0275mod=Fe({type:n}),n.\u0275inj=De({providers:[{provide:Bq,useValue:"hubmap-theme-light"},{provide:Wz,useValue:{appearance:"standard",floatLabel:!1,hideRequiredMarker:!0}}],imports:[[hE,CO,Wke,Ir,hFe,Kke,Xke,tFe,dFe,Dq,iFe,kIe,GU]]}),n})();ou.production&&function(){if(RB)throw new Error("Cannot enable prod mode after platform setup.");PB=!1}(),Cte().bootstrapModule(fFe).catch(n=>console.error(n))},948:pt=>{pt.exports=function(Be){return Be&&Be.__esModule?Be:{default:Be}},pt.exports.default=pt.exports,pt.exports.__esModule=!0},321:pt=>{function We(Be){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(pt.exports=We=function(L){return typeof L},pt.exports.default=pt.exports,pt.exports.__esModule=!0):(pt.exports=We=function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},pt.exports.default=pt.exports,pt.exports.__esModule=!0),We(Be)}pt.exports=We,pt.exports.default=pt.exports,pt.exports.__esModule=!0},833:pt=>{function We(Be){return Promise.resolve().then(()=>{var yt=new Error("Cannot find module '"+Be+"'");throw yt.code="MODULE_NOT_FOUND",yt})}We.keys=()=>[],We.resolve=We,We.id=833,pt.exports=We},521:()=>{},125:()=>{},307:()=>{}},pt=>{pt(pt.s=166)}]);