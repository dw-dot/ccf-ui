(()=>{"use strict";var e,d={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return d[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=d,e=[],a.O=(n,r,u,l)=>{if(!r){var c=1/0;for(t=0;t<e.length;t++){for(var[r,u,l]=e[t],i=!0,f=0;f<r.length;f++)(!1&l||c>=l)&&Object.keys(a.O).every(b=>a.O[b](r[f]))?r.splice(f--,1):(i=!1,l<c&&(c=l));if(i){e.splice(t--,1);var o=u();void 0!==o&&(n=o)}}return n}l=l||0;for(var t=e.length;t>0&&e[t-1][2]>l;t--)e[t]=e[t-1];e[t]=[r,u,l]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=u=>0===e[u];var n=(u,l)=>{var f,o,[t,c,i]=l,s=0;for(f in c)a.o(c,f)&&(a.m[f]=c[f]);if(i)var _=i(a);for(u&&u(l);s<t.length;s++)a.o(e,o=t[s])&&e[o]&&e[o][0](),e[t[s]]=0;return a.O(_)},r=self.webpackChunkccf_ui=self.webpackChunkccf_ui||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[429],{138:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const G=HTMLElement;window.HTMLElement=function(){return Reflect.construct(G,[],this.constructor)},HTMLElement.prototype=G.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,G)}()}()},142:()=>{!function(G,ne){"use strict";function he(){var e=Ge.splice(0,Ge.length);for(V=0;e.length;)e.shift().call(null,e.shift())}function ye(e,r){for(var i=0,h=e.length;i<h;i++)je(e[i],r)}function Ve(e){return function(r){L(r)&&(je(r,e),le.length&&ye(r.querySelectorAll(le),e))}}function Ie(e){var r=R.call(e,"is"),i=e.nodeName.toUpperCase(),h=Te.call(Ne,r?st+r.toUpperCase():Xe+i);return r&&-1<h&&!Ze(i,r)?-1:h}function Ze(e,r){return-1<le.indexOf(e+'[is="'+r+'"]')}function Ue(e){var r=e.currentTarget,i=e.attrChange,h=e.attrName,s=e.target,o=e[ot]||2,l=e[pt]||3;!n||s&&s!==r||!r[Ee]||"style"===h||e.prevValue===e.newValue&&(""!==e.newValue||i!==o&&i!==l)||r[Ee](h,i===o?null:e.prevValue,i===l?null:e.newValue)}function et(e){var r=Ve(e);return function(i){Ge.push(r,i.target),V&&clearTimeout(V),V=setTimeout(he,1)}}function de(e){k&&(k=!1,e.currentTarget.removeEventListener(bt,de)),le.length&&ye((e.target||A).querySelectorAll(le),e.detail===pe?pe:Le),z&&function(){for(var e,r=0,i=T.length;r<i;r++)De.contains(e=T[r])||(i--,T.splice(r--,1),je(e,pe))}()}function ve(e,r){var i=this;$.call(i,e,r),xe.call(i,{target:i})}function Ae(e,r,i){var h=r.apply(e,i),s=Ie(h);return-1<s&&ae(h,Ye[s]),i.pop()&&le.length&&function(e){for(var r,i=0,h=e.length;i<h;i++)ae(r=e[i],Ye[Ie(r)])}(h.querySelectorAll(le)),h}function Be(e,r){b(e,r),We?We.observe(e,oe):(I&&(e.setAttribute=ve,e[me]=nt(e),e[be](Et,xe)),e[be](He,Ue)),e[qe]&&n&&(e.created=!0,e[qe](),e.created=!1)}function U(e){throw new Error("A "+e+" type is already registered")}function je(e,r){var i,h,s=Ie(e);-1<s&&!B.call(e,"TEMPLATE")&&(we(e,Ye[s]),s=0,r!==Le||e[Le]?r!==pe||e[pe]||(e[Le]=!1,e[pe]=!0,h="disconnected",s=1):(e[pe]=!1,e[Le]=!0,h="connected",s=1,z&&Te.call(T,e)<0&&T.push(e)),s&&(i=e[r+ce]||e[h+ce])&&i.call(e))}function ke(){}function J(e,r,i){var h=i&&i[te]||"",s=r.prototype,o=w(s),l=r.observedAttributes||Oe,d={prototype:o};x(o,qe,{value:function(){if(f)f=!1;else if(!this[Je]){this[Je]=!0,new r(this),s[qe]&&s[qe].call(this);var p=m[v.get(r)];(!t||p.create.length>1)&&tt(this)}}}),x(o,Ee,{value:function(p){-1<Te.call(l,p)&&s[Ee]&&s[Ee].apply(this,arguments)}}),s[rt]&&x(o,vt,{value:s[rt]}),s[mt]&&x(o,kt,{value:s[mt]}),h&&(d[te]=h),e=e.toUpperCase(),m[e]={constructor:r,create:h?[h,C(e)]:[e]},v.set(r,e),A[se](e.toLowerCase(),d),ut(e),E[e].r()}function gt(e){var r=m[e.toUpperCase()];return r&&r.constructor}function yt(e){return"string"==typeof e?e:e&&e.is||""}function tt(e){for(var r,i=e[Ee],h=i?e.attributes:Oe,s=h.length;s--;)i.call(e,(r=h[s]).name||r.nodeName,null,r.value||r.nodeValue)}function ut(e){return(e=e.toUpperCase())in E||(E[e]={},E[e].p=new c(function(r){E[e].r=r})),E[e].p}function ft(){Me&&delete G.customElements,Re(G,"customElements",{configurable:!0,value:new ke}),Re(G,"CustomElementRegistry",{configurable:!0,value:ke});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),r=e.length;r--;function(i){var h=G[i];if(h){G[i]=function(s){var o,l;return s||(s=this),s[Je]||(f=!0,o=m[v.get(s.constructor)],(s=(l=t&&1===o.create.length)?Reflect.construct(h,Oe,o.constructor):A.createElement.apply(A,o.create))[Je]=!0,f=!1,l||tt(s)),s},G[i].prototype=h.prototype;try{h.prototype.constructor=G[i]}catch(s){Re(h,Je,{value:G[i]})}}}(e[r]));A.createElement=function(i,h){var s=yt(h);return s?H.call(this,i,C(s)):H.call(this,i)},ue||(X=!0,A[se](""))}var A=G.document,re=G.Object,ht=function(e){var r,i,h,s,o=/^[A-Z]+[a-z]/,d=function(_,g){(g=g.toLowerCase())in p||(p[_]=(p[_]||[]).concat(g),p[g]=p[g.toUpperCase()]=_)},p=(re.create||re)(null),y={};for(i in e)for(s in e[i])for(p[s]=h=e[i][s],r=0;r<h.length;r++)p[h[r].toLowerCase()]=p[h[r].toUpperCase()]=s;return y.get=function(_){return"string"==typeof _?p[_]||(o.test(_)?[]:""):function(_){var g,M=[];for(g in p)_.test(g)&&M.push(g);return M}(_)},y.set=function(_,g){return o.test(_)?d(_,g):d(g,_),y},y}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ne&&(ne={type:ne||"auto"});var Ge,xe,ze,nt,We,ie,we,ae,Ce,e,r,i,h,s,se="registerElement",dt=1e5*G.Math.random()>>0,me="__"+se+dt,be="addEventListener",Le="attached",ce="Callback",pe="detached",te="extends",Ee="attributeChanged"+ce,vt=Le+ce,rt="connected"+ce,mt="disconnected"+ce,qe="created"+ce,kt=pe+ce,ot="ADDITION",pt="REMOVAL",He="DOMAttrModified",bt="DOMContentLoaded",Et="DOMSubtreeModified",Xe="<",st="=",Mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,wt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ne=[],Ye=[],le="",De=A.documentElement,Te=Ne.indexOf||function(e){for(var r=this.length;r--&&this[r]!==e;);return r},it=re.prototype,Pe=it.hasOwnProperty,at=it.isPrototypeOf,Re=re.defineProperty,Oe=[],Ke=re.getOwnPropertyDescriptor,Y=re.getOwnPropertyNames,Ct=re.getPrototypeOf,$e=re.setPrototypeOf,Se=!!re.__proto__,Je="__dreCEv1",Me=G.customElements,t=!/^force/.test(ne.type)&&!!(Me&&Me.define&&Me.get&&Me.whenDefined),a=re.create||re,u=G.Map||function(){var e,r=[],i=[];return{get:function(h){return i[Te.call(r,h)]},set:function(h,s){(e=Te.call(r,h))<0?i[r.push(h)-1]=s:i[e]=s}}},c=G.Promise||function(e){function r(o){for(h=!0;i.length;)i.shift()(o)}var i=[],h=!1,s={catch:function(){return s},then:function(o){return i.push(o),h&&setTimeout(r,1),s}};return e(r),s},f=!1,m=a(null),E=a(null),v=new u,C=function(e){return e.toLowerCase()},w=re.create||function e(r){return r?(e.prototype=r,new e):this},b=$e||(Se?function(e,r){return e.__proto__=r,e}:Y&&Ke?function(){function e(r,i){for(var h,s=Y(i),o=0,l=s.length;o<l;o++)Pe.call(r,h=s[o])||Re(r,h,Ke(i,h))}return function(r,i){do{e(r,i)}while((i=Ct(i))&&!at.call(i,r));return r}}():function(e,r){for(var i in r)e[i]=r[i];return e}),N=G.MutationObserver||G.WebKitMutationObserver,S=G.HTMLAnchorElement,P=(G.HTMLElement||G.Element||G.Node).prototype,z=!at.call(P,De),x=z?function(e,r,i){return e[r]=i.value,e}:Re,L=z?function(e){return 1===e.nodeType}:function(e){return at.call(P,e)},T=z&&[],Z=P.attachShadow,W=P.cloneNode,B=P.closest||function(e){for(var r=this;r&&r.nodeName!==e;)r=r.parentNode;return r},K=P.dispatchEvent,R=P.getAttribute,Q=P.hasAttribute,F=P.removeAttribute,$=P.setAttribute,O=A.createElement,j=A.importNode,H=O,oe=N&&{attributes:!0,characterData:!0,attributeOldValue:!0},_e=N||function(e){I=!1,De.removeEventListener(He,_e)},V=0,ue=se in A&&!/^force-all/.test(ne.type),fe=!0,X=!1,I=!0,k=!0,n=!0;if(N&&((Ce=A.createElement("div")).innerHTML="<div><div></div></div>",new N(function(e,r){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var i=(Ce=Ke(P,"innerHTML"))&&Ce.set;i&&Re(P,"innerHTML",{set:function(h){for(;this.lastChild;)this.removeChild(this.lastChild);i.call(this,h)}})}r.disconnect(),Ce=null}).observe(Ce,{childList:!0,subtree:!0}),Ce.innerHTML=""),ue||($e||Se?(we=function(e,r){at.call(r,e)||Be(e,r)},ae=Be):ae=we=function(e,r){e[me]||(e[me]=re(!0),Be(e,r))},z?(I=!1,e=Ke(P,be),r=e.value,i=function(o){var l=new CustomEvent(He,{bubbles:!0});l.attrName=o,l.prevValue=R.call(this,o),l.newValue=null,l[pt]=l.attrChange=2,F.call(this,o),K.call(this,l)},h=function(o,l){var d=Q.call(this,o),p=d&&R.call(this,o),y=new CustomEvent(He,{bubbles:!0});$.call(this,o,l),y.attrName=o,y.prevValue=d?p:null,y.newValue=l,d?y.MODIFICATION=y.attrChange=1:y[ot]=y.attrChange=0,K.call(this,y)},s=function(o){var l,d=o.currentTarget,p=d[me],y=o.propertyName;p.hasOwnProperty(y)&&(p=p[y],(l=new CustomEvent(He,{bubbles:!0})).attrName=p.name,l.prevValue=p.value||null,l.newValue=p.value=d[y]||null,null==l.prevValue?l[ot]=l.attrChange=0:l.MODIFICATION=l.attrChange=1,K.call(d,l))},e.value=function(o,l,d){o===He&&this[Ee]&&this.setAttribute!==h&&(this[me]={className:{name:"class",value:this.className}},this.setAttribute=h,this.removeAttribute=i,r.call(this,"propertychange",s)),r.call(this,o,l,d)},Re(P,be,e)):N||(De[be](He,_e),De.setAttribute(me,1),De.removeAttribute(me),I&&(xe=function(e){var r,i,h,s=this;if(s===e.target){for(h in r=s[me],s[me]=i=nt(s),i){if(!(h in r))return ze(0,s,h,r[h],i[h],ot);if(i[h]!==r[h])return ze(1,s,h,r[h],i[h],"MODIFICATION")}for(h in r)if(!(h in i))return ze(2,s,h,r[h],i[h],pt)}},ze=function(e,r,i,h,s,o){var l={attrChange:e,currentTarget:r,attrName:i,prevValue:h,newValue:s};l[o]=e,Ue(l)},nt=function(e){for(var r,i,h={},s=e.attributes,o=0,l=s.length;o<l;o++)"setAttribute"!==(i=(r=s[o]).name)&&(h[i]=r.value);return h})),A[se]=function(e,r){if(i=e.toUpperCase(),fe&&(fe=!1,N?(We=function(p,y){function _(g,M){for(var D=0,q=g.length;D<q;M(g[D++]));}return new N(function(g){for(var M,D,q,ee=0,ge=g.length;ee<ge;ee++)"childList"===(M=g[ee]).type?(_(M.addedNodes,p),_(M.removedNodes,y)):(D=M.target,n&&D[Ee]&&"style"!==M.attributeName&&(q=R.call(D,M.attributeName))!==M.oldValue&&D[Ee](M.attributeName,M.oldValue,q))})}(Ve(Le),Ve(pe)),(ie=function(p){return We.observe(p,{childList:!0,subtree:!0}),p})(A),Z&&(P.attachShadow=function(){return ie(Z.apply(this,arguments))})):(Ge=[],A[be]("DOMNodeInserted",et(Le)),A[be]("DOMNodeRemoved",et(pe))),A[be](bt,de),A[be]("readystatechange",de),A.importNode=function(p,y){switch(p.nodeType){case 1:return Ae(A,j,[p,!!y]);case 11:for(var _=A.createDocumentFragment(),g=p.childNodes,M=g.length,D=0;D<M;D++)_.appendChild(A.importNode(g[D],!!y));return _;default:return W.call(p,!!y)}},P.cloneNode=function(p){return Ae(this,W,[!!p])}),X)return X=!1;if(-2<Te.call(Ne,st+i)+Te.call(Ne,Xe+i)&&U(e),!Mt.test(i)||-1<Te.call(wt,i))throw new Error("The type "+e+" is invalid");var i,h,s=function(){return l?A.createElement(d,i):A.createElement(d)},o=r||it,l=Pe.call(o,te),d=l?r[te].toUpperCase():i;return l&&-1<Te.call(Ne,Xe+d)&&U(d),h=Ne.push((l?st:Xe)+i)-1,le=le.concat(le.length?",":"",l?d+'[is="'+e.toLowerCase()+'"]':d),s.prototype=Ye[h]=Pe.call(o,"prototype")?o.prototype:w(P),le.length&&ye(A.querySelectorAll(le),Le),s},A.createElement=H=function(e,r){var i=yt(r),h=i?O.call(A,e,C(i)):O.call(A,e),s=""+e,o=Te.call(Ne,(i?st:Xe)+(i||s).toUpperCase()),l=-1<o;return i&&(h.setAttribute("is",i=i.toLowerCase()),l&&(l=Ze(s.toUpperCase(),i))),n=!A.createElement.innerHTMLHelper,l&&ae(h,Ye[o]),h}),addEventListener("beforeunload",function(){delete A.createElement,delete A.importNode,delete A[se]},!1),ke.prototype={constructor:ke,define:t?function(e,r,i){if(i)J(e,r,i);else{var h=e.toUpperCase();m[h]={constructor:r,create:[h]},v.set(r,h),Me.define(e,r)}}:J,get:t?function(e){return Me.get(e)||gt(e)}:gt,whenDefined:t?function(e){return c.race([Me.whenDefined(e),ut(e)])}:ut},!Me||/^force/.test(ne.type))ft();else if(!ne.noBuiltIn)try{!function(e,r,i){var h=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(r[te]="a",(e.prototype=w(S.prototype)).constructor=e,G.customElements.define(i,e,r),!h.test(A.createElement("a",{is:i}).outerHTML)||!h.test((new e).outerHTML))throw r}(function e(){return Reflect.construct(S,[],e)},{},"document-register-element-a"+dt)}catch(e){ft()}if(!ne.noBuiltIn)try{if(O.call(A,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){C=function(r){return{is:r.toLowerCase()}}}}(window)},277:()=>{"use strict";!function(t){const a=t.performance;function u(I){a&&a.mark&&a.mark(I)}function c(I,k){a&&a.measure&&a.measure(I,k)}u("Zone");const f=t.__Zone_symbol_prefix||"__zone_symbol__";function m(I){return f+I}const E=!0===t[m("forceDuplicateZoneCheck")];if(t.Zone){if(E||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let v=(()=>{class I{constructor(n,e){this._parent=n,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new w(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=I.current;for(;n.parent;)n=n.parent;return n}static get current(){return V.zone}static get currentTask(){return ue}static __load_patch(n,e,r=!1){if(oe.hasOwnProperty(n)){if(!r&&E)throw Error("Already loaded patch: "+n)}else if(!t["__Zone_disable_"+n]){const i="Zone:"+n;u(i),oe[n]=e(t,I,_e),c(i,i)}}get parent(){return this._parent}get name(){return this._name}get(n){const e=this.getZoneWith(n);if(e)return e._properties[n]}getZoneWith(n){let e=this;for(;e;){if(e._properties.hasOwnProperty(n))return e;e=e._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,e){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const r=this._zoneDelegate.intercept(this,n,e),i=this;return function(){return i.runGuarded(r,this,arguments,e)}}run(n,e,r,i){V={parent:V,zone:this};try{return this._zoneDelegate.invoke(this,n,e,r,i)}finally{V=V.parent}}runGuarded(n,e=null,r,i){V={parent:V,zone:this};try{try{return this._zoneDelegate.invoke(this,n,e,r,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{V=V.parent}}runTask(n,e,r){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");if(n.state===B&&(n.type===H||n.type===j))return;const i=n.state!=Q;i&&n._transitionTo(Q,R),n.runCount++;const h=ue;ue=n,V={parent:V,zone:this};try{n.type==j&&n.data&&!n.data.isPeriodic&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,n,e,r)}catch(s){if(this._zoneDelegate.handleError(this,s))throw s}}finally{n.state!==B&&n.state!==$&&(n.type==H||n.data&&n.data.isPeriodic?i&&n._transitionTo(R,Q):(n.runCount=0,this._updateTaskCount(n,-1),i&&n._transitionTo(B,Q,B))),V=V.parent,ue=h}}scheduleTask(n){if(n.zone&&n.zone!==this){let r=this;for(;r;){if(r===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);r=r.parent}}n._transitionTo(K,B);const e=[];n._zoneDelegates=e,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(r){throw n._transitionTo($,K,B),this._zoneDelegate.handleError(this,r),r}return n._zoneDelegates===e&&this._updateTaskCount(n,1),n.state==K&&n._transitionTo(R,K),n}scheduleMicroTask(n,e,r,i){return this.scheduleTask(new b(O,n,e,r,i,void 0))}scheduleMacroTask(n,e,r,i,h){return this.scheduleTask(new b(j,n,e,r,i,h))}scheduleEventTask(n,e,r,i,h){return this.scheduleTask(new b(H,n,e,r,i,h))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");n._transitionTo(F,R,Q);try{this._zoneDelegate.cancelTask(this,n)}catch(e){throw n._transitionTo($,F),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(n,-1),n._transitionTo(B,F),n.runCount=0,n}_updateTaskCount(n,e){const r=n._zoneDelegates;-1==e&&(n._zoneDelegates=null);for(let i=0;i<r.length;i++)r[i]._updateTaskCount(n.type,e)}}return I.__symbol__=m,I})();const C={name:"",onHasTask:(I,k,n,e)=>I.hasTask(n,e),onScheduleTask:(I,k,n,e)=>I.scheduleTask(n,e),onInvokeTask:(I,k,n,e,r,i)=>I.invokeTask(n,e,r,i),onCancelTask:(I,k,n,e)=>I.cancelTask(n,e)};class w{constructor(k,n,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=k,this._parentDelegate=n,this._forkZS=e&&(e&&e.onFork?e:n._forkZS),this._forkDlgt=e&&(e.onFork?n:n._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:n._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:n._interceptZS),this._interceptDlgt=e&&(e.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:n._invokeZS),this._invokeDlgt=e&&(e.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:n._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:n._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:n._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:n._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=e&&e.onHasTask;(r||n&&n._hasTaskZS)&&(this._hasTaskZS=r?e:C,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=k,e.onScheduleTask||(this._scheduleTaskZS=C,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=C,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=C,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}fork(k,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,k,n):new v(k,n)}intercept(k,n,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,k,n,e):n}invoke(k,n,e,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,k,n,e,r,i):n.apply(e,r)}handleError(k,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,k,n)}scheduleTask(k,n){let e=n;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,k,n),e||(e=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=O)throw new Error("Task is missing scheduleFn.");T(n)}return e}invokeTask(k,n,e,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,k,n,e,r):n.callback.apply(e,r)}cancelTask(k,n){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,k,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");e=n.cancelFn(n)}return e}hasTask(k,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,k,n)}catch(e){this.handleError(k,e)}}_updateTaskCount(k,n){const e=this._taskCounts,r=e[k],i=e[k]=r+n;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:k})}}class b{constructor(k,n,e,r,i,h){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=k,this.source=n,this.data=r,this.scheduleFn=i,this.cancelFn=h,!e)throw new Error("callback is not defined");this.callback=e;const s=this;this.invoke=k===H&&r&&r.useG?b.invokeTask:function(){return b.invokeTask.call(t,s,this,arguments)}}static invokeTask(k,n,e){k||(k=this),fe++;try{return k.runCount++,k.zone.runTask(k,n,e)}finally{1==fe&&Z(),fe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(B,K)}_transitionTo(k,n,e){if(this._state!==n&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${k}', expecting state '${n}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=k,k==B&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const N=m("setTimeout"),S=m("Promise"),P=m("then");let L,z=[],x=!1;function T(I){if(0===fe&&0===z.length)if(L||t[S]&&(L=t[S].resolve(0)),L){let k=L[P];k||(k=L.then),k.call(L,Z)}else t[N](Z,0);I&&z.push(I)}function Z(){if(!x){for(x=!0;z.length;){const I=z;z=[];for(let k=0;k<I.length;k++){const n=I[k];try{n.zone.runTask(n,null,null)}catch(e){_e.onUnhandledError(e)}}}_e.microtaskDrainDone(),x=!1}}const W={name:"NO ZONE"},B="notScheduled",K="scheduling",R="scheduled",Q="running",F="canceling",$="unknown",O="microTask",j="macroTask",H="eventTask",oe={},_e={symbol:m,currentZoneFrame:()=>V,onUnhandledError:X,microtaskDrainDone:X,scheduleMicroTask:T,showUncaughtError:()=>!v[m("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:X,patchMethod:()=>X,bindArguments:()=>[],patchThen:()=>X,patchMacroTask:()=>X,patchEventPrototype:()=>X,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>X,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>X,wrapWithCurrentZone:()=>X,filterProperties:()=>[],attachOriginToPatched:()=>X,_redefineProperty:()=>X,patchCallbacks:()=>X};let V={parent:null,zone:new v(null,null)},ue=null,fe=0;function X(){}c("Zone","Zone"),t.Zone=v}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const ne=Object.getOwnPropertyDescriptor,he=Object.defineProperty,ye=Object.getPrototypeOf,_t=Object.create,Ve=Array.prototype.slice,Ie="addEventListener",Ze="removeEventListener",Ue=Zone.__symbol__(Ie),et=Zone.__symbol__(Ze),de="true",ve="false",Ae=Zone.__symbol__("");function Be(t,a){return Zone.current.wrap(t,a)}function lt(t,a,u,c,f){return Zone.current.scheduleMacroTask(t,a,u,c,f)}const U=Zone.__symbol__,je="undefined"!=typeof window,ke=je?window:void 0,J=je&&ke||"object"==typeof self&&self||global,yt=[null];function tt(t,a){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=Be(t[u],a+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,re=!("nw"in J)&&void 0!==J.process&&"[object process]"==={}.toString.call(J.process),ht=!re&&!A&&!(!je||!ke.HTMLElement),Ge=void 0!==J.process&&"[object process]"==={}.toString.call(J.process)&&!A&&!(!je||!ke.HTMLElement),xe={},ze=function(t){if(!(t=t||J.event))return;let a=xe[t.type];a||(a=xe[t.type]=U("ON_PROPERTY"+t.type));const u=this||t.target||J,c=u[a];let f;if(ht&&u===ke&&"error"===t.type){const m=t;f=c&&c.call(this,m.message,m.filename,m.lineno,m.colno,m.error),!0===f&&t.preventDefault()}else f=c&&c.apply(this,arguments),null!=f&&!f&&t.preventDefault();return f};function nt(t,a,u){let c=ne(t,a);if(!c&&u&&ne(u,a)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const f=U("on"+a+"patched");if(t.hasOwnProperty(f)&&t[f])return;delete c.writable,delete c.value;const m=c.get,E=c.set,v=a.substr(2);let C=xe[v];C||(C=xe[v]=U("ON_PROPERTY"+v)),c.set=function(w){let b=this;!b&&t===J&&(b=J),b&&(b[C]&&b.removeEventListener(v,ze),E&&E.apply(b,yt),"function"==typeof w?(b[C]=w,b.addEventListener(v,ze,!1)):b[C]=null)},c.get=function(){let w=this;if(!w&&t===J&&(w=J),!w)return null;const b=w[C];if(b)return b;if(m){let N=m&&m.call(this);if(N)return c.set.call(this,N),"function"==typeof w.removeAttribute&&w.removeAttribute(a),N}return null},he(t,a,c),t[f]=!0}function We(t,a,u){if(a)for(let c=0;c<a.length;c++)nt(t,"on"+a[c],u);else{const c=[];for(const f in t)"on"==f.substr(0,2)&&c.push(f);for(let f=0;f<c.length;f++)nt(t,c[f],u)}}const ie=U("originalInstance");function we(t){const a=J[t];if(!a)return;J[U(t)]=a,J[t]=function(){const f=tt(arguments,t);switch(f.length){case 0:this[ie]=new a;break;case 1:this[ie]=new a(f[0]);break;case 2:this[ie]=new a(f[0],f[1]);break;case 3:this[ie]=new a(f[0],f[1],f[2]);break;case 4:this[ie]=new a(f[0],f[1],f[2],f[3]);break;default:throw new Error("Arg list too long.")}},se(J[t],a);const u=new a(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(f){"function"==typeof u[f]?J[t].prototype[f]=function(){return this[ie][f].apply(this[ie],arguments)}:he(J[t].prototype,f,{set:function(m){"function"==typeof m?(this[ie][f]=Be(m,t+"."+f),se(this[ie][f],m)):this[ie][f]=m},get:function(){return this[ie][f]}})}(c);for(c in a)"prototype"!==c&&a.hasOwnProperty(c)&&(J[t][c]=a[c])}function ae(t,a,u){let c=t;for(;c&&!c.hasOwnProperty(a);)c=ye(c);!c&&t[a]&&(c=t);const f=U(a);let m=null;if(c&&(!(m=c[f])||!c.hasOwnProperty(f))&&(m=c[f]=c[a],ft(c&&ne(c,a)))){const v=u(m,f,a);c[a]=function(){return v(this,arguments)},se(c[a],m)}return m}function Ce(t,a,u){let c=null;function f(m){const E=m.data;return E.args[E.cbIdx]=function(){m.invoke.apply(this,arguments)},c.apply(E.target,E.args),m}c=ae(t,a,m=>function(E,v){const C=u(E,v);return C.cbIdx>=0&&"function"==typeof v[C.cbIdx]?lt(C.name,v[C.cbIdx],C,f):m.apply(E,v)})}function se(t,a){t[U("OriginalDelegate")]=a}let dt=!1,me=!1;function Le(){if(dt)return me;dt=!0;try{const t=ke.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(me=!0)}catch(t){}return me}Zone.__load_patch("ZoneAwarePromise",(t,a,u)=>{const c=Object.getOwnPropertyDescriptor,f=Object.defineProperty,E=u.symbol,v=[],C=!0===t[E("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],w=E("Promise"),b=E("then");u.onUnhandledError=s=>{if(u.showUncaughtError()){const o=s&&s.rejection;o?console.error("Unhandled Promise rejection:",o instanceof Error?o.message:o,"; Zone:",s.zone.name,"; Task:",s.task&&s.task.source,"; Value:",o,o instanceof Error?o.stack:void 0):console.error(s)}},u.microtaskDrainDone=()=>{for(;v.length;){const s=v.shift();try{s.zone.runGuarded(()=>{throw s.throwOriginal?s.rejection:s})}catch(o){P(o)}}};const S=E("unhandledPromiseRejectionHandler");function P(s){u.onUnhandledError(s);try{const o=a[S];"function"==typeof o&&o.call(this,s)}catch(o){}}function z(s){return s&&s.then}function x(s){return s}function L(s){return n.reject(s)}const T=E("state"),Z=E("value"),W=E("finally"),B=E("parentPromiseValue"),K=E("parentPromiseState"),Q=null,F=!0,$=!1;function j(s,o){return l=>{try{V(s,o,l)}catch(d){V(s,!1,d)}}}const _e=E("currentTaskTrace");function V(s,o,l){const d=function(){let s=!1;return function(l){return function(){s||(s=!0,l.apply(null,arguments))}}}();if(s===l)throw new TypeError("Promise resolved with itself");if(s[T]===Q){let p=null;try{("object"==typeof l||"function"==typeof l)&&(p=l&&l.then)}catch(y){return d(()=>{V(s,!1,y)})(),s}if(o!==$&&l instanceof n&&l.hasOwnProperty(T)&&l.hasOwnProperty(Z)&&l[T]!==Q)fe(l),V(s,l[T],l[Z]);else if(o!==$&&"function"==typeof p)try{p.call(l,d(j(s,o)),d(j(s,!1)))}catch(y){d(()=>{V(s,!1,y)})()}else{s[T]=o;const y=s[Z];if(s[Z]=l,s[W]===W&&o===F&&(s[T]=s[K],s[Z]=s[B]),o===$&&l instanceof Error){const _=a.currentTask&&a.currentTask.data&&a.currentTask.data.__creationTrace__;_&&f(l,_e,{configurable:!0,enumerable:!1,writable:!0,value:_})}for(let _=0;_<y.length;)X(s,y[_++],y[_++],y[_++],y[_++]);if(0==y.length&&o==$){s[T]=0;let _=l;try{throw new Error("Uncaught (in promise): "+function(s){return s&&s.toString===Object.prototype.toString?(s.constructor&&s.constructor.name||"")+": "+JSON.stringify(s):s?s.toString():Object.prototype.toString.call(s)}(l)+(l&&l.stack?"\n"+l.stack:""))}catch(g){_=g}C&&(_.throwOriginal=!0),_.rejection=l,_.promise=s,_.zone=a.current,_.task=a.currentTask,v.push(_),u.scheduleMicroTask()}}}return s}const ue=E("rejectionHandledHandler");function fe(s){if(0===s[T]){try{const o=a[ue];o&&"function"==typeof o&&o.call(this,{rejection:s[Z],promise:s})}catch(o){}s[T]=$;for(let o=0;o<v.length;o++)s===v[o].promise&&v.splice(o,1)}}function X(s,o,l,d,p){fe(s);const y=s[T],_=y?"function"==typeof d?d:x:"function"==typeof p?p:L;o.scheduleMicroTask("Promise.then",()=>{try{const g=s[Z],M=!!l&&W===l[W];M&&(l[B]=g,l[K]=y);const D=o.run(_,void 0,M&&_!==L&&_!==x?[]:[g]);V(l,!0,D)}catch(g){V(l,!1,g)}},l)}const k=function(){};class n{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(o){return V(new this(null),F,o)}static reject(o){return V(new this(null),$,o)}static race(o){let l,d,p=new this((g,M)=>{l=g,d=M});function y(g){l(g)}function _(g){d(g)}for(let g of o)z(g)||(g=this.resolve(g)),g.then(y,_);return p}static all(o){return n.allWithCallback(o)}static allSettled(o){return(this&&this.prototype instanceof n?this:n).allWithCallback(o,{thenCallback:d=>({status:"fulfilled",value:d}),errorCallback:d=>({status:"rejected",reason:d})})}static allWithCallback(o,l){let d,p,y=new this((D,q)=>{d=D,p=q}),_=2,g=0;const M=[];for(let D of o){z(D)||(D=this.resolve(D));const q=g;try{D.then(ee=>{M[q]=l?l.thenCallback(ee):ee,_--,0===_&&d(M)},ee=>{l?(M[q]=l.errorCallback(ee),_--,0===_&&d(M)):p(ee)})}catch(ee){p(ee)}_++,g++}return _-=2,0===_&&d(M),y}constructor(o){const l=this;if(!(l instanceof n))throw new Error("Must be an instanceof Promise.");l[T]=Q,l[Z]=[];try{o&&o(j(l,F),j(l,$))}catch(d){V(l,!1,d)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return n}then(o,l){let d=this.constructor[Symbol.species];(!d||"function"!=typeof d)&&(d=this.constructor||n);const p=new d(k),y=a.current;return this[T]==Q?this[Z].push(y,p,o,l):X(this,y,p,o,l),p}catch(o){return this.then(null,o)}finally(o){let l=this.constructor[Symbol.species];(!l||"function"!=typeof l)&&(l=n);const d=new l(k);d[W]=W;const p=a.current;return this[T]==Q?this[Z].push(p,d,o,o):X(this,p,d,o,o),d}}n.resolve=n.resolve,n.reject=n.reject,n.race=n.race,n.all=n.all;const e=t[w]=t.Promise;t.Promise=n;const r=E("thenPatched");function i(s){const o=s.prototype,l=c(o,"then");if(l&&(!1===l.writable||!l.configurable))return;const d=o.then;o[b]=d,s.prototype.then=function(p,y){return new n((g,M)=>{d.call(this,g,M)}).then(p,y)},s[r]=!0}return u.patchThen=i,e&&(i(e),ae(t,"fetch",s=>function(s){return function(o,l){let d=s.apply(o,l);if(d instanceof n)return d;let p=d.constructor;return p[r]||i(p),d}}(s))),Promise[a.__symbol__("uncaughtPromiseErrors")]=v,n}),Zone.__load_patch("toString",t=>{const a=Function.prototype.toString,u=U("OriginalDelegate"),c=U("Promise"),f=U("Error"),m=function(){if("function"==typeof this){const w=this[u];if(w)return"function"==typeof w?a.call(w):Object.prototype.toString.call(w);if(this===Promise){const b=t[c];if(b)return a.call(b)}if(this===Error){const b=t[f];if(b)return a.call(b)}}return a.call(this)};m[u]=a,Function.prototype.toString=m;const E=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":E.call(this)}});let ce=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){ce=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){ce=!1}const pe={useG:!0},te={},Ee={},vt=new RegExp("^"+Ae+"(\\w+)(true|false)$"),rt=U("propagationStopped");function mt(t,a){const u=(a?a(t):t)+ve,c=(a?a(t):t)+de,f=Ae+u,m=Ae+c;te[t]={},te[t][ve]=f,te[t][de]=m}function qe(t,a,u){const c=u&&u.add||Ie,f=u&&u.rm||Ze,m=u&&u.listeners||"eventListeners",E=u&&u.rmAll||"removeAllListeners",v=U(c),C="."+c+":",N=function(L,T,Z){if(L.isRemoved)return;const W=L.callback;"object"==typeof W&&W.handleEvent&&(L.callback=K=>W.handleEvent(K),L.originalDelegate=W),L.invoke(L,T,[Z]);const B=L.options;B&&"object"==typeof B&&B.once&&T[f].call(T,Z.type,L.originalDelegate?L.originalDelegate:L.callback,B)},S=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][ve]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}},P=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][de]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}};function z(L,T){if(!L)return!1;let Z=!0;T&&void 0!==T.useG&&(Z=T.useG);const W=T&&T.vh;let B=!0;T&&void 0!==T.chkDup&&(B=T.chkDup);let K=!1;T&&void 0!==T.rt&&(K=T.rt);let R=L;for(;R&&!R.hasOwnProperty(c);)R=ye(R);if(!R&&L[c]&&(R=L),!R||R[v])return!1;const Q=T&&T.eventNameToString,F={},$=R[v]=R[c],O=R[U(f)]=R[f],j=R[U(m)]=R[m],H=R[U(E)]=R[E];let oe;function _e(o,l){return!ce&&"object"==typeof o&&o?!!o.capture:ce&&l?"boolean"==typeof o?{capture:o,passive:!0}:o?"object"==typeof o&&!1!==o.passive?Object.assign(Object.assign({},o),{passive:!0}):o:{passive:!0}:o}T&&T.prepend&&(oe=R[U(T.prepend)]=R[T.prepend]);const k=Z?function(o){if(!F.isExisting)return $.call(F.target,F.eventName,F.capture?P:S,F.options)}:function(o){return $.call(F.target,F.eventName,o.invoke,F.options)},n=Z?function(o){if(!o.isRemoved){const l=te[o.eventName];let d;l&&(d=l[o.capture?de:ve]);const p=d&&o.target[d];if(p)for(let y=0;y<p.length;y++)if(p[y]===o){p.splice(y,1),o.isRemoved=!0,0===p.length&&(o.allRemoved=!0,o.target[d]=null);break}}if(o.allRemoved)return O.call(o.target,o.eventName,o.capture?P:S,o.options)}:function(o){return O.call(o.target,o.eventName,o.invoke,o.options)},r=T&&T.diff?T.diff:function(o,l){const d=typeof l;return"function"===d&&o.callback===l||"object"===d&&o.originalDelegate===l},i=Zone[U("UNPATCHED_EVENTS")],h=t[U("PASSIVE_EVENTS")],s=function(o,l,d,p,y=!1,_=!1){return function(){const g=this||t;let M=arguments[0];T&&T.transferEventName&&(M=T.transferEventName(M));let D=arguments[1];if(!D)return o.apply(this,arguments);if(re&&"uncaughtException"===M)return o.apply(this,arguments);let q=!1;if("function"!=typeof D){if(!D.handleEvent)return o.apply(this,arguments);q=!0}if(W&&!W(o,D,g,arguments))return;const ee=ce&&!!h&&-1!==h.indexOf(M),ge=_e(arguments[2],ee);if(i)for(let Qe=0;Qe<i.length;Qe++)if(M===i[Qe])return ee?o.call(g,M,D,ge):o.apply(this,arguments);const Ot=!!ge&&("boolean"==typeof ge||ge.capture),Nt=!(!ge||"object"!=typeof ge)&&ge.once,Zt=Zone.current;let Ht=te[M];Ht||(mt(M,Q),Ht=te[M]);const Dt=Ht[Ot?de:ve];let Lt,ct=g[Dt],Rt=!1;if(ct){if(Rt=!0,B)for(let Qe=0;Qe<ct.length;Qe++)if(r(ct[Qe],D))return}else ct=g[Dt]=[];const St=g.constructor.name,It=Ee[St];It&&(Lt=It[M]),Lt||(Lt=St+l+(Q?Q(M):M)),F.options=ge,Nt&&(F.options.once=!1),F.target=g,F.capture=Ot,F.eventName=M,F.isExisting=Rt;const Tt=Z?pe:void 0;Tt&&(Tt.taskData=F);const Fe=Zt.scheduleEventTask(Lt,D,Tt,d,p);return F.target=null,Tt&&(Tt.taskData=null),Nt&&(ge.once=!0),!ce&&"boolean"==typeof Fe.options||(Fe.options=ge),Fe.target=g,Fe.capture=Ot,Fe.eventName=M,q&&(Fe.originalDelegate=D),_?ct.unshift(Fe):ct.push(Fe),y?g:void 0}};return R[c]=s($,C,k,n,K),oe&&(R.prependListener=s(oe,".prependListener:",function(o){return oe.call(F.target,F.eventName,o.invoke,F.options)},n,K,!0)),R[f]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=arguments[2],p=!!d&&("boolean"==typeof d||d.capture),y=arguments[1];if(!y)return O.apply(this,arguments);if(W&&!W(O,y,o,arguments))return;const _=te[l];let g;_&&(g=_[p?de:ve]);const M=g&&o[g];if(M)for(let D=0;D<M.length;D++){const q=M[D];if(r(q,y))return M.splice(D,1),q.isRemoved=!0,0===M.length&&(q.allRemoved=!0,o[g]=null,"string"==typeof l)&&(o[Ae+"ON_PROPERTY"+l]=null),q.zone.cancelTask(q),K?o:void 0}return O.apply(this,arguments)},R[m]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=[],p=kt(o,Q?Q(l):l);for(let y=0;y<p.length;y++){const _=p[y];d.push(_.originalDelegate?_.originalDelegate:_.callback)}return d},R[E]=function(){const o=this||t;let l=arguments[0];if(l){T&&T.transferEventName&&(l=T.transferEventName(l));const d=te[l];if(d){const _=o[d[ve]],g=o[d[de]];if(_){const M=_.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}if(g){const M=g.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}}}else{const d=Object.keys(o);for(let p=0;p<d.length;p++){const _=vt.exec(d[p]);let g=_&&_[1];g&&"removeListener"!==g&&this[E].call(this,g)}this[E].call(this,"removeListener")}if(K)return this},se(R[c],$),se(R[f],O),H&&se(R[E],H),j&&se(R[m],j),!0}let x=[];for(let L=0;L<a.length;L++)x[L]=z(a[L],u);return x}function kt(t,a){if(!a){const m=[];for(let E in t){const v=vt.exec(E);let C=v&&v[1];if(C&&(!a||C===a)){const w=t[E];if(w)for(let b=0;b<w.length;b++)m.push(w[b])}}return m}let u=te[a];u||(mt(a),u=te[a]);const c=t[u[ve]],f=t[u[de]];return c?f?c.concat(f):c.slice():f?f.slice():[]}function ot(t,a){const u=t.Event;u&&u.prototype&&a.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(f,m){f[rt]=!0,c&&c.apply(f,m)})}function pt(t,a,u,c,f){const m=Zone.__symbol__(c);if(a[m])return;const E=a[m]=a[c];a[c]=function(v,C,w){return C&&C.prototype&&f.forEach(function(b){const N=`${u}.${c}::`+b,S=C.prototype;if(S.hasOwnProperty(b)){const P=t.ObjectGetOwnPropertyDescriptor(S,b);P&&P.value?(P.value=t.wrapWithCurrentZone(P.value,N),t._redefineProperty(C.prototype,b,P)):S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}else S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}),E.call(a,v,C,w)},t.attachOriginToPatched(a[c],E)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],st=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],le=["load"],De=["blur","error","focus","load","resize","scroll","messageerror"],Te=["bounce","finish","start"],it=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Pe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],at=["close","error","open","message"],Re=["error","message"],Oe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function Ke(t,a,u){if(!u||0===u.length)return a;const c=u.filter(m=>m.target===t);if(!c||0===c.length)return a;const f=c[0].ignoreProperties;return a.filter(m=>-1===f.indexOf(m))}function Y(t,a,u,c){t&&We(t,Ke(t,a,u),c)}Zone.__load_patch("util",(t,a,u)=>{u.patchOnProperties=We,u.patchMethod=ae,u.bindArguments=tt,u.patchMacroTask=Ce;const c=a.__symbol__("BLACK_LISTED_EVENTS"),f=a.__symbol__("UNPATCHED_EVENTS");t[f]&&(t[c]=t[f]),t[c]&&(a[c]=a[f]=t[c]),u.patchEventPrototype=ot,u.patchEventTarget=qe,u.isIEOrEdge=Le,u.ObjectDefineProperty=he,u.ObjectGetOwnPropertyDescriptor=ne,u.ObjectCreate=_t,u.ArraySlice=Ve,u.patchClass=we,u.wrapWithCurrentZone=Be,u.filterProperties=Ke,u.attachOriginToPatched=se,u._redefineProperty=Object.defineProperty,u.patchCallbacks=pt,u.getGlobalObjects=()=>({globalSources:Ee,zoneSymbolEventNames:te,eventNames:Oe,isBrowser:ht,isMix:Ge,isNode:re,TRUE_STR:de,FALSE_STR:ve,ZONE_SYMBOL_PREFIX:Ae,ADD_EVENT_LISTENER_STR:Ie,REMOVE_EVENT_LISTENER_STR:Ze})});const $e=U("zoneTask");function Se(t,a,u,c){let f=null,m=null;u+=c;const E={};function v(w){const b=w.data;return b.args[0]=function(){return w.invoke.apply(this,arguments)},b.handleId=f.apply(t,b.args),w}function C(w){return m.call(t,w.data.handleId)}f=ae(t,a+=c,w=>function(b,N){if("function"==typeof N[0]){const S={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?N[1]||0:void 0,args:N},P=N[0];N[0]=function(){try{return P.apply(this,arguments)}finally{S.isPeriodic||("number"==typeof S.handleId?delete E[S.handleId]:S.handleId&&(S.handleId[$e]=null))}};const z=lt(a,N[0],S,v,C);if(!z)return z;const x=z.data.handleId;return"number"==typeof x?E[x]=z:x&&(x[$e]=z),x&&x.ref&&x.unref&&"function"==typeof x.ref&&"function"==typeof x.unref&&(z.ref=x.ref.bind(x),z.unref=x.unref.bind(x)),"number"==typeof x||x?x:z}return w.apply(t,N)}),m=ae(t,u,w=>function(b,N){const S=N[0];let P;"number"==typeof S?P=E[S]:(P=S&&S[$e],P||(P=S)),P&&"string"==typeof P.type?"notScheduled"!==P.state&&(P.cancelFn&&P.data.isPeriodic||0===P.runCount)&&("number"==typeof S?delete E[S]:S&&(S[$e]=null),P.zone.cancelTask(P)):w.apply(t,N)})}Zone.__load_patch("legacy",t=>{const a=t[Zone.__symbol__("legacyPatch")];a&&a()}),Zone.__load_patch("queueMicrotask",(t,a,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(f,m){a.current.scheduleMicroTask("queueMicrotask",m[0])})}),Zone.__load_patch("timers",t=>{const a="set",u="clear";Se(t,a,u,"Timeout"),Se(t,a,u,"Interval"),Se(t,a,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{Se(t,"request","cancel","AnimationFrame"),Se(t,"mozRequest","mozCancel","AnimationFrame"),Se(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,a)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ae(t,u[c],(m,E,v)=>function(C,w){return a.current.run(m,t,w,v)})}),Zone.__load_patch("EventTarget",(t,a,u)=>{(function(t,a){a.patchEventPrototype(t,a)})(t,u),function(t,a){if(Zone[a.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:f,FALSE_STR:m,ZONE_SYMBOL_PREFIX:E}=a.getGlobalObjects();for(let C=0;C<u.length;C++){const w=u[C],S=E+(w+m),P=E+(w+f);c[w]={},c[w][m]=S,c[w][f]=P}const v=t.EventTarget;v&&v.prototype&&a.patchEventTarget(t,[v&&v.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,a,u)=>{we("MutationObserver"),we("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,a,u)=>{we("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,a,u)=>{we("FileReader")}),Zone.__load_patch("on_property",(t,a,u)=>{!function(t,a){if(re&&!Ge||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=a.__Zone_ignore_on_properties;if(ht){const E=window,v=function(){try{const t=ke.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:E,ignoreProperties:["error"]}]:[];Y(E,Oe.concat(["messageerror"]),c&&c.concat(v),ye(E)),Y(Document.prototype,Oe,c),void 0!==E.SVGElement&&Y(E.SVGElement.prototype,Oe,c),Y(Element.prototype,Oe,c),Y(HTMLElement.prototype,Oe,c),Y(HTMLMediaElement.prototype,st,c),Y(HTMLFrameSetElement.prototype,Et.concat(De),c),Y(HTMLBodyElement.prototype,Et.concat(De),c),Y(HTMLFrameElement.prototype,le,c),Y(HTMLIFrameElement.prototype,le,c);const C=E.HTMLMarqueeElement;C&&Y(C.prototype,Te,c);const w=E.Worker;w&&Y(w.prototype,Re,c)}const f=a.XMLHttpRequest;f&&Y(f.prototype,it,c);const m=a.XMLHttpRequestEventTarget;m&&Y(m&&m.prototype,it,c),"undefined"!=typeof IDBIndex&&(Y(IDBIndex.prototype,Pe,c),Y(IDBRequest.prototype,Pe,c),Y(IDBOpenDBRequest.prototype,Pe,c),Y(IDBDatabase.prototype,Pe,c),Y(IDBTransaction.prototype,Pe,c),Y(IDBCursor.prototype,Pe,c)),u&&Y(WebSocket.prototype,at,c)}(u,t)}),Zone.__load_patch("customElements",(t,a,u)=>{!function(t,a){const{isBrowser:u,isMix:c}=a.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&a.patchCallbacks(a,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,a)=>{!function(w){const b=w.XMLHttpRequest;if(!b)return;const N=b.prototype;let P=N[Ue],z=N[et];if(!P){const O=w.XMLHttpRequestEventTarget;if(O){const j=O.prototype;P=j[Ue],z=j[et]}}const x="readystatechange",L="scheduled";function T(O){const j=O.data,H=j.target;H[m]=!1,H[v]=!1;const oe=H[f];P||(P=H[Ue],z=H[et]),oe&&z.call(H,x,oe);const _e=H[f]=()=>{if(H.readyState===H.DONE)if(!j.aborted&&H[m]&&O.state===L){const ue=H[a.__symbol__("loadfalse")];if(0!==H.status&&ue&&ue.length>0){const fe=O.invoke;O.invoke=function(){const X=H[a.__symbol__("loadfalse")];for(let I=0;I<X.length;I++)X[I]===O&&X.splice(I,1);!j.aborted&&O.state===L&&fe.call(O)},ue.push(O)}else O.invoke()}else!j.aborted&&!1===H[m]&&(H[v]=!0)};return P.call(H,x,_e),H[u]||(H[u]=O),F.apply(H,j.args),H[m]=!0,O}function Z(){}function W(O){const j=O.data;return j.aborted=!0,$.apply(j.target,j.args)}const B=ae(N,"open",()=>function(O,j){return O[c]=0==j[2],O[E]=j[1],B.apply(O,j)}),R=U("fetchTaskAborting"),Q=U("fetchTaskScheduling"),F=ae(N,"send",()=>function(O,j){if(!0===a.current[Q]||O[c])return F.apply(O,j);{const H={target:O,url:O[E],isPeriodic:!1,args:j,aborted:!1},oe=lt("XMLHttpRequest.send",Z,H,T,W);O&&!0===O[v]&&!H.aborted&&oe.state===L&&oe.invoke()}}),$=ae(N,"abort",()=>function(O,j){const H=function(O){return O[u]}(O);if(H&&"string"==typeof H.type){if(null==H.cancelFn||H.data&&H.data.aborted)return;H.zone.cancelTask(H)}else if(!0===a.current[R])return $.apply(O,j)})}(t);const u=U("xhrTask"),c=U("xhrSync"),f=U("xhrListener"),m=U("xhrScheduled"),E=U("xhrURL"),v=U("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,a){const u=t.constructor.name;for(let c=0;c<a.length;c++){const f=a[c],m=t[f];if(m){if(!ft(ne(t,f)))continue;t[f]=(v=>{const C=function(){return v.apply(this,tt(arguments,u+"."+f))};return se(C,v),C})(m)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,a)=>{function u(c){return function(f){kt(t,c).forEach(E=>{const v=t.PromiseRejectionEvent;if(v){const C=new v(c,{promise:f.promise,reason:f.rejection});E.invoke(C)}})}}t.PromiseRejectionEvent&&(a[U("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),a[U("rejectionHandledHandler")]=u("rejectionhandled"))})},648:(G,ne,he)=>{"use strict";he(277),he(142),he(138)}},G=>{G(G.s=648)}]);
/*! (C) Andrea Giammarchi - @WebReflection - ISC Style License */
!function(e,t){"use strict";function n(){var e=C.splice(0,C.length);for(We=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)p(e[n],t)}function o(e){return function(t){Re(t)&&(p(t,e),le.length&&r(t.querySelectorAll(le),e))}}function l(e){var t=Be.call(e,"is"),n=e.nodeName.toUpperCase(),r=ie.call(re,t?ee+t.toUpperCase():J+n);return t&&-1<r&&!a(n,t)?-1:r}function a(e,t){return-1<le.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[X]||2,a=e[$]||3;!rt||o&&o!==t||!t[B]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[B](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=o(e);return function(e){C.push(t,e.target),We&&clearTimeout(We),We=setTimeout(n,1)}}function c(e){nt&&(nt=!1,e.currentTarget.removeEventListener(W,c)),le.length&&r((e.target||g).querySelectorAll(le),e.detail===x?x:_),Ve&&function(){for(var e,t=0,n=Ue.length;t<n;t++)e=Ue[t],ae.contains(e)||(n--,Ue.splice(t--,1),p(e,x))}()}function s(e,t){var n=this;Ge.call(n,e,t),w.call(n,{target:n})}function m(e,t,n){var r=t.apply(e,n),o=l(r);return-1<o&&F(r,oe[o]),n.pop()&&le.length&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],F(t,oe[l(t)])}(r.querySelectorAll(le)),r}function f(e,t){De(e,t),N?N.observe(e,$e):(tt&&(e.setAttribute=s,e[R]=O(e),e[U](Y,w)),e[U](Q,i)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function d(e){throw new Error("A "+e+" type is already registered")}function p(e,t){var n,r,o=l(e);-1<o&&!xe.call(e,"TEMPLATE")&&(I(e,oe[o]),o=0,t!==_||e[_]?t!==x||e[x]||(e[_]=!1,e[x]=!0,r="disconnected",o=1):(e[x]=!1,e[_]=!0,r="connected",o=1,Ve&&ie.call(Ue,e)<0&&Ue.push(e)),o&&(n=e[t+k]||e[r+k])&&n.call(e))}function h(){}function T(e,t,n){var r=n&&n[q]||"",o=t.prototype,l=Ne(o),a=t.observedAttributes||fe,i={prototype:l};Pe(l,z,{value:function(){if(ye)ye=!1;else if(!this[Me]){this[Me]=!0,new t(this),o[z]&&o[z].call(this);var e=Ce[Ae.get(t)];(!ve||e.create.length>1)&&E(this)}}}),Pe(l,B,{value:function(e){-1<ie.call(a,e)&&o[B]&&o[B].apply(this,arguments)}}),o[j]&&Pe(l,Z,{value:o[j]}),o[G]&&Pe(l,K,{value:o[G]}),r&&(i[q]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),g[V](e.toLowerCase(),i),v(e),we[e].r()}function L(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function M(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[B],r=n?e.attributes:fe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function v(e){return(e=e.toUpperCase())in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function H(){Ee&&delete e.customElements,me(e,"customElements",{configurable:!0,value:new h}),me(e,"CustomElementRegistry",{configurable:!0,value:h});for(var t=y.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Me]||(ye=!0,t=Ce[Ae.get(e.constructor)],(e=(r=ve&&1===t.create.length)?Reflect.construct(n,fe,t.constructor):g.createElement.apply(g,t.create))[Me]=!0,ye=!1,r||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){!0,me(n,Me,{value:e[t]})}}}(t[n]));g.createElement=function(e,t){var n=M(t);return n?Xe.call(this,e,Oe(n)):Xe.call(this,e)},Ye||(et=!0,g[V](""))}var g=e.document,b=e.Object,y=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function(e,t){(t=t.toLowerCase())in i||(i[e]=(i[e]||[]).concat(t),i[t]=i[t.toUpperCase()]=e)},i=(b.create||b)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],i[o]=r,t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?i[e]||(l.test(e)?[]:""):function(e){var t,n=[];for(t in i)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return l.test(e)?a(e,t):a(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var C,w,A,O,N,D,I,F,S,V="registerElement",P=1e5*e.Math.random()>>0,R="__"+V+P,U="addEventListener",_="attached",k="Callback",x="detached",q="extends",B="attributeChanged"+k,Z=_+k,j="connected"+k,G="disconnected"+k,z="created"+k,K=x+k,X="ADDITION",$="REMOVAL",Q="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",J="<",ee="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],oe=[],le="",ae=g.documentElement,ie=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ue=b.prototype,ce=ue.hasOwnProperty,se=ue.isPrototypeOf,me=b.defineProperty,fe=[],de=b.getOwnPropertyDescriptor,pe=b.getOwnPropertyNames,he=b.getPrototypeOf,Te=b.setPrototypeOf,Le=!!b.__proto__,Me="__dreCEv1",Ee=e.customElements,ve=!/^force/.test(t.type)&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),He=b.create||b,ge=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ie.call(t,e)]},set:function(r,o){(e=ie.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},ye=!1,Ce=He(null),we=He(null),Ae=new ge,Oe=function(e){return e.toLowerCase()},Ne=b.create||function e(t){return t?(e.prototype=t,new e):this},De=Te||(Le?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,r=pe(t),o=0,l=r.length;o<l;o++)n=r[o],ce.call(e,n)||me(e,n,de(t,n))}return function(t,n){do{e(t,n)}while((n=he(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ie=e.MutationObserver||e.WebKitMutationObserver,Fe=e.HTMLAnchorElement,Se=(e.HTMLElement||e.Element||e.Node).prototype,Ve=!se.call(Se,ae),Pe=Ve?function(e,t,n){return e[t]=n.value,e}:me,Re=Ve?function(e){return 1===e.nodeType}:function(e){return se.call(Se,e)},Ue=Ve&&[],_e=Se.attachShadow,ke=Se.cloneNode,xe=Se.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},qe=Se.dispatchEvent,Be=Se.getAttribute,Ze=Se.hasAttribute,je=Se.removeAttribute,Ge=Se.setAttribute,ze=g.createElement,Ke=g.importNode,Xe=ze,$e=Ie&&{attributes:!0,characterData:!0,attributeOldValue:!0},Qe=Ie||function(e){tt=!1,ae.removeEventListener(Q,Qe)},We=0,Ye=V in g&&!/^force-all/.test(t.type),Je=!0,et=!1,tt=!0,nt=!0,rt=!0;if(Ie&&((S=g.createElement("div")).innerHTML="<div><div></div></div>",new Ie(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(S=de(Se,"innerHTML"))&&S.set;n&&me(Se,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),S=null}).observe(S,{childList:!0,subtree:!0}),S.innerHTML=""),Ye||(Te||Le?(I=function(e,t){se.call(t,e)||f(e,t)},F=f):F=I=function(e,t){e[R]||(e[R]=b(!0),f(e,t))},Ve?(tt=!1,function(){var e=de(Se,U),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=Be.call(this,e),t.newValue=null,t[$]=t.attrChange=2,je.call(this,e),qe.call(this,t)},r=function(e,t){var n=Ze.call(this,e),r=n&&Be.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[X]=o.attrChange=0,qe.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[R],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],(t=new CustomEvent(Q,{bubbles:!0})).attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[X]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,qe.call(n,t))};e.value=function(e,l,a){e===Q&&this[B]&&this.setAttribute!==r&&(this[R]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},me(Se,U,e)}()):Ie||(ae[U](Q,Qe),ae.setAttribute(R,1),ae.removeAttribute(R),tt&&(w=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[R],o[R]=n=O(o),n){if(!(r in t))return A(0,o,r,t[r],n[r],X);if(n[r]!==t[r])return A(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return A(2,o,r,t[r],n[r],$)}},A=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,i(a)},O=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),g[V]=function(e,t){if(n=e.toUpperCase(),Je&&(Je=!1,Ie?(N=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ie(function(r){for(var o,l,a,i=0,u=r.length;i<u;i++)"childList"===(o=r[i]).type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,rt&&l[B]&&"style"!==o.attributeName&&(a=Be.call(l,o.attributeName))!==o.oldValue&&l[B](o.attributeName,o.oldValue,a))})}(o(_),o(x)),(D=function(e){return N.observe(e,{childList:!0,subtree:!0}),e})(g),_e&&(Se.attachShadow=function(){return D(_e.apply(this,arguments))})):(C=[],g[U]("DOMNodeInserted",u(_)),g[U]("DOMNodeRemoved",u(x))),g[U](W,c),g[U]("readystatechange",c),g.importNode=function(e,t){switch(e.nodeType){case 1:return m(g,Ke,[e,!!t]);case 11:for(var n=g.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l++)n.appendChild(g.importNode(r[l],!!t));return n;default:return ke.call(e,!!t)}},Se.cloneNode=function(e){return m(this,ke,[!!e])}),et)return et=!1;if(-2<ie.call(re,ee+n)+ie.call(re,J+n)&&d(e),!te.test(n)||-1<ie.call(ne,n))throw new Error("The type "+e+" is invalid");var n,l,a=function(){return s?g.createElement(f,n):g.createElement(f)},i=t||ue,s=ce.call(i,q),f=s?t[q].toUpperCase():n;return s&&-1<ie.call(re,J+f)&&d(f),l=re.push((s?ee:J)+n)-1,le=le.concat(le.length?",":"",s?f+'[is="'+e.toLowerCase()+'"]':f),a.prototype=oe[l]=ce.call(i,"prototype")?i.prototype:Ne(Se),le.length&&r(g.querySelectorAll(le),_),a},g.createElement=Xe=function(e,t){var n=M(t),r=n?ze.call(g,e,Oe(n)):ze.call(g,e),o=""+e,l=ie.call(re,(n?ee:J)+(n||o).toUpperCase()),i=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=a(o.toUpperCase(),n))),rt=!g.createElement.innerHTMLHelper,i&&F(r,oe[l]),r}),addEventListener("beforeunload",function(){delete g.createElement,delete g.importNode,delete g[V]},!1),h.prototype={constructor:h,define:ve?function(e,t,n){if(n)T(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Ee.define(e,t)}}:T,get:ve?function(e){return Ee.get(e)||L(e)}:L,whenDefined:ve?function(e){return be.race([Ee.whenDefined(e),v(e)])}:v},!Ee||/^force/.test(t.type))H();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[q]="a",(t.prototype=Ne(Fe.prototype)).constructor=t,e.customElements.define(r,t,n),!o.test(g.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Fe,[],e)},{},"document-register-element-a"+P)}catch(e){H()}if(!t.noBuiltIn)try{if(ze.call(g,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Oe=function(e){return{is:e.toLowerCase()}}}}(window);
var QNe=Object.defineProperty,JNe=Object.defineProperties,e2e=Object.getOwnPropertyDescriptors,cY=Object.getOwnPropertySymbols,t2e=Object.prototype.hasOwnProperty,n2e=Object.prototype.propertyIsEnumerable,lr=Math.pow,uY=(ft,qe,xe)=>qe in ft?QNe(ft,qe,{enumerable:!0,configurable:!0,writable:!0,value:xe}):ft[qe]=xe,Sd=(ft,qe)=>{for(var xe in qe||(qe={}))t2e.call(qe,xe)&&uY(ft,xe,qe[xe]);if(cY)for(var xe of cY(qe))n2e.call(qe,xe)&&uY(ft,xe,qe[xe]);return ft},dY=(ft,qe)=>JNe(ft,e2e(qe));(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{517:(ft,qe)=>{"use strict";var bt=(()=>{return(gt=bt||(bt={})).typeOfFunction="function",gt.boolTrue=!0,bt;var gt})();function F(gt,It,ct){if(!ct||typeof ct.value!==bt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+It+"> is not a method!");return{configurable:bt.boolTrue,get:function(){var Jt=ct.value.bind(this);return Object.defineProperty(this,It,{value:Jt,configurable:bt.boolTrue,writable:bt.boolTrue}),Jt}}}qe.ak=F,qe.ZP=F},266:(ft,qe,xe)=>{ft.exports={ResizeSensor:xe(835),ElementQueries:xe(845)}},845:function(ft,qe,xe){"use strict";var bt,F,gt;"undefined"!=typeof window&&window,F=[xe(835)],void 0!==(gt="function"==typeof(bt=function(It){var ct=function(){var mt,zt={},gn=[];function Ne(Ie){Ie||(Ie=document.documentElement);var ue=window.getComputedStyle(Ie,null).fontSize;return parseFloat(ue)||16}function Wt(Ie,ue){var Ut=ue.split(/\d/),Lt=Ut[Ut.length-1];switch(ue=parseFloat(ue),Lt){case"px":return ue;case"em":return ue*Ne(Ie);case"rem":return ue*Ne();case"vw":return ue*document.documentElement.clientWidth/100;case"vh":return ue*document.documentElement.clientHeight/100;case"vmin":case"vmax":var $t=document.documentElement.clientWidth/100,Wn=document.documentElement.clientHeight/100;return ue*(0,Math["vmin"===Lt?"min":"max"])($t,Wn);default:return ue}}function ze(Ie,ue){this.element=Ie;var Ut,Lt,$t,Wn,Ai,G,ce,De,re=["min-width","min-height","max-width","max-height"];this.call=function(){for(Ut in $t=function(Ie){if(!Ie.getBoundingClientRect)return{width:Ie.offsetWidth,height:Ie.offsetHeight};var ue=Ie.getBoundingClientRect();return{width:Math.round(ue.width),height:Math.round(ue.height)}}(this.element),G={},zt[ue])!zt[ue].hasOwnProperty(Ut)||(Wn=Wt(this.element,(Lt=zt[ue][Ut]).value),Ai="width"===Lt.property?$t.width:$t.height,ce="","min"===Lt.mode&&Ai>=Wn&&(ce+=Lt.value),"max"===Lt.mode&&Ai<=Wn&&(ce+=Lt.value),G[De=Lt.mode+"-"+Lt.property]||(G[De]=""),ce&&-1===(" "+G[De]+" ").indexOf(" "+ce+" ")&&(G[De]+=" "+ce));for(var et in re)!re.hasOwnProperty(et)||(G[re[et]]?this.element.setAttribute(re[et],G[re[et]].substr(1)):this.element.removeAttribute(re[et]))}}function Re(Ie,ue){Ie.elementQueriesSetupInformation||(Ie.elementQueriesSetupInformation=new ze(Ie,ue)),Ie.elementQueriesSensor||(Ie.elementQueriesSensor=new It(Ie,function(){Ie.elementQueriesSetupInformation.call()}))}function mn(Ie,ue,Ut,Lt){if(void 0===zt[Ie]){zt[Ie]=[];var $t=gn.length;mt.innerHTML+="\n"+Ie+" {animation: 0.1s element-queries;}",mt.innerHTML+="\n"+Ie+" > .resize-sensor {min-width: "+$t+"px;}",gn.push(Ie)}zt[Ie].push({mode:ue,property:Ut,value:Lt})}function Xe(Ie){var ue;if(document.querySelectorAll&&(ue=Ie?Ie.querySelectorAll.bind(Ie):document.querySelectorAll.bind(document)),!ue&&"undefined"!=typeof $$&&(ue=$$),!ue&&"undefined"!=typeof jQuery&&(ue=jQuery),!ue)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return ue}function At(Ie){var ue=[],Ut=[],Lt=[],$t=0,Wn=-1,Ai=[];for(var G in Ie.children)if(Ie.children.hasOwnProperty(G)&&Ie.children[G].tagName&&"img"===Ie.children[G].tagName.toLowerCase()){ue.push(Ie.children[G]);var ce=Ie.children[G].getAttribute("min-width")||Ie.children[G].getAttribute("data-min-width"),De=Ie.children[G].getAttribute("data-src")||Ie.children[G].getAttribute("url");Lt.push(De),Ut.push({minWidth:ce}),ce?Ie.children[G].style.display="none":($t=ue.length-1,Ie.children[G].style.display="block")}function et(){var Hn,it=!1;for(Hn in ue)!ue.hasOwnProperty(Hn)||Ut[Hn].minWidth&&Ie.offsetWidth>Ut[Hn].minWidth&&(it=Hn);if(it||(it=$t),Wn!==it)if(Ai[it])ue[Wn].style.display="none",ue[it].style.display="block",Wn=it;else{var ii=new Image;ii.onload=function(){ue[it].src=Lt[it],ue[Wn].style.display="none",ue[it].style.display="block",Ai[it]=!0,Wn=it},ii.src=Lt[it]}else ue[it].src=Lt[it]}Wn=$t,Ie.resizeSensorInstance=new It(Ie,et),et()}var Bn=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,ni=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function Un(Ie){var ue,Ut,Lt,$t;for(Ie=Ie.replace(/'/g,'"');null!==(ue=Bn.exec(Ie));)for(Ut=ue[1]+ue[3],Lt=ue[2];null!==($t=ni.exec(Lt));)mn(Ut,$t[1],$t[2],$t[3])}function di(Ie){var ue="";if(Ie)if("string"==typeof Ie)(-1!==(Ie=Ie.toLowerCase()).indexOf("min-width")||-1!==Ie.indexOf("max-width"))&&Un(Ie);else for(var Ut=0,Lt=Ie.length;Ut<Lt;Ut++)1===Ie[Ut].type?(-1!==(ue=Ie[Ut].selectorText||Ie[Ut].cssText).indexOf("min-height")||-1!==ue.indexOf("max-height")||-1!==ue.indexOf("min-width")||-1!==ue.indexOf("max-width"))&&Un(ue):4===Ie[Ut].type?di(Ie[Ut].cssRules||Ie[Ut].rules):3===Ie[Ut].type&&Ie[Ut].styleSheet.hasOwnProperty("cssRules")&&di(Ie[Ut].styleSheet.cssRules)}var Bi=!1;this.init=function(){var Ie="animationstart";void 0!==document.documentElement.style.webkitAnimationName?Ie="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?Ie="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(Ie="oanimationstart"),document.body.addEventListener(Ie,function(Lt){var $t=Lt.target,Wn=$t&&window.getComputedStyle($t,null),Ai=Wn&&Wn.getPropertyValue("animation-name");if(Ai&&-1!==Ai.indexOf("element-queries")){$t.elementQueriesSensor=new It($t,function(){$t.elementQueriesSetupInformation&&$t.elementQueriesSetupInformation.call()});var De=window.getComputedStyle($t.resizeSensor,null).getPropertyValue("min-width");De=parseInt(De.replace("px","")),Re(Lt.target,gn[De])}}),Bi||((mt=document.createElement("style")).type="text/css",mt.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",mt.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(mt),Bi=!0);for(var ue=0,Ut=document.styleSheets.length;ue<Ut;ue++)try{document.styleSheets[ue].href&&0===document.styleSheets[ue].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[ue].href),di(document.styleSheets[ue].cssRules||document.styleSheets[ue].rules||document.styleSheets[ue].cssText)}catch(Lt){}!function(){for(var ue=Xe()("[data-responsive-image],[responsive-image]"),Ut=0,Lt=ue.length;Ut<Lt;Ut++)At(ue[Ut])}()},this.findElementQueriesElements=function(Ie){!function(Ie){var ue=Xe(Ie);for(var Ut in zt)if(zt.hasOwnProperty(Ut))for(var Lt=ue(Ut,Ie),$t=0,Wn=Lt.length;$t<Wn;$t++)Re(Lt[$t],Ut)}(Ie)},this.update=function(){this.init()}};ct.update=function(){ct.instance.update()},ct.detach=function(mt){mt.elementQueriesSetupInformation?(mt.elementQueriesSensor.detach(),delete mt.elementQueriesSetupInformation,delete mt.elementQueriesSensor):mt.resizeSensorInstance&&(mt.resizeSensorInstance.detach(),delete mt.resizeSensorInstance)},ct.init=function(){ct.instance||(ct.instance=new ct),ct.instance.init()};return ct.findElementQueriesElements=function(mt){ct.instance.findElementQueriesElements(mt)},ct.listen=function(){!function(mt){if(document.addEventListener)document.addEventListener("DOMContentLoaded",mt,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var zt=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(mt(),clearInterval(zt))},10);else window.onload=mt}(ct.init)},ct})?bt.apply(qe,F):bt)&&(ft.exports=gt)},835:function(ft,qe,xe){"use strict";var bt,F;"undefined"!=typeof window&&window,void 0!==(F="function"==typeof(bt=function(){if("undefined"==typeof window)return null;var gt="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),It=gt.requestAnimationFrame||gt.mozRequestAnimationFrame||gt.webkitRequestAnimationFrame||function($e){return gt.setTimeout($e,20)},ct=gt.cancelAnimationFrame||gt.mozCancelAnimationFrame||gt.webkitCancelAnimationFrame||function($e){gt.clearTimeout($e)};function Jt($e,Wt){var ze=Object.prototype.toString.call($e),Re="[object Array]"===ze||"[object NodeList]"===ze||"[object HTMLCollection]"===ze||"[object Object]"===ze||"undefined"!=typeof jQuery&&$e instanceof jQuery||"undefined"!=typeof Elements&&$e instanceof Elements,mn=0,Xe=$e.length;if(Re)for(;mn<Xe;mn++)Wt($e[mn]);else Wt($e)}function mt($e){if(!$e.getBoundingClientRect)return{width:$e.offsetWidth,height:$e.offsetHeight};var Wt=$e.getBoundingClientRect();return{width:Math.round(Wt.width),height:Math.round(Wt.height)}}function zt($e,Wt){Object.keys(Wt).forEach(function(ze){$e.style[ze]=Wt[ze]})}var gn=function($e,Wt){var ze=0;function Re(){var Ln,At,Xe=[];this.add=function(nn){Xe.push(nn)},this.call=function(nn){for(Ln=0,At=Xe.length;Ln<At;Ln++)Xe[Ln].call(this,nn)},this.remove=function(nn){var Bn=[];for(Ln=0,At=Xe.length;Ln<At;Ln++)Xe[Ln]!==nn&&Bn.push(Xe[Ln]);Xe=Bn},this.length=function(){return Xe.length}}function mn(Xe,Ln){if(Xe){if(Xe.resizedAttached)return void Xe.resizedAttached.add(Ln);Xe.resizedAttached=new Re,Xe.resizedAttached.add(Ln),Xe.resizeSensor=document.createElement("div"),Xe.resizeSensor.dir="ltr",Xe.resizeSensor.className="resize-sensor";var At={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},nn={position:"absolute",left:"0px",top:"0px",transition:"0s"};zt(Xe.resizeSensor,At);var Bn=document.createElement("div");Bn.className="resize-sensor-expand",zt(Bn,At);var ni=document.createElement("div");zt(ni,nn),Bn.appendChild(ni);var Un=document.createElement("div");Un.className="resize-sensor-shrink",zt(Un,At);var di=document.createElement("div");zt(di,nn),zt(di,{width:"200%",height:"200%"}),Un.appendChild(di),Xe.resizeSensor.appendChild(Bn),Xe.resizeSensor.appendChild(Un),Xe.appendChild(Xe.resizeSensor);var Bi=window.getComputedStyle(Xe),Ie=Bi?Bi.getPropertyValue("position"):null;"absolute"!==Ie&&"relative"!==Ie&&"fixed"!==Ie&&"sticky"!==Ie&&(Xe.style.position="relative");var ue=!1,Ut=0,Lt=mt(Xe),$t=0,Wn=0,Ai=!0;ze=0;var ce=function(){if(Ai){if(0===Xe.offsetWidth&&0===Xe.offsetHeight)return void(ze||(ze=It(function(){ze=0,ce()})));Ai=!1}var it,Hn;Hn=Xe.offsetHeight,ni.style.width=(it=Xe.offsetWidth)+10+"px",ni.style.height=Hn+10+"px",Bn.scrollLeft=it+10,Bn.scrollTop=Hn+10,Un.scrollLeft=it+10,Un.scrollTop=Hn+10};Xe.resizeSensor.resetSensor=ce;var De=function(){Ut=0,ue&&($t=Lt.width,Wn=Lt.height,Xe.resizedAttached&&Xe.resizedAttached.call(Lt))},re=function(){Lt=mt(Xe),(ue=Lt.width!==$t||Lt.height!==Wn)&&!Ut&&(Ut=It(De)),ce()},et=function(it,Hn,ii){it.attachEvent?it.attachEvent("on"+Hn,ii):it.addEventListener(Hn,ii)};et(Bn,"scroll",re),et(Un,"scroll",re),ze=It(function(){ze=0,ce()})}}Jt($e,function(Xe){mn(Xe,Wt)}),this.detach=function(Xe){ze||(ct(ze),ze=0),gn.detach($e,Xe)},this.reset=function(){$e.resizeSensor.resetSensor()}};if(gn.reset=function($e){Jt($e,function(Wt){Wt.resizeSensor.resetSensor()})},gn.detach=function($e,Wt){Jt($e,function(ze){!ze||ze.resizedAttached&&"function"==typeof Wt&&(ze.resizedAttached.remove(Wt),ze.resizedAttached.length())||ze.resizeSensor&&(ze.contains(ze.resizeSensor)&&ze.removeChild(ze.resizeSensor),delete ze.resizeSensor,delete ze.resizedAttached)})},"undefined"!=typeof MutationObserver){var Ne=new MutationObserver(function($e){for(var Wt in $e)if($e.hasOwnProperty(Wt))for(var ze=$e[Wt].addedNodes,Re=0;Re<ze.length;Re++)ze[Re].resizeSensor&&gn.reset(ze[Re])});document.addEventListener("DOMContentLoaded",function($e){Ne.observe(document.body,{childList:!0,subtree:!0})})}return gn})?bt.call(qe,xe,qe,ft):bt)&&(ft.exports=F)},457:function(ft,qe){var xe,F;void 0!==(F="function"==typeof(xe=function(){"use strict";function It(Ne,$e,Wt){var ze=new XMLHttpRequest;ze.open("GET",Ne),ze.responseType="blob",ze.onload=function(){gn(ze.response,$e,Wt)},ze.onerror=function(){console.error("could not download file")},ze.send()}function ct(Ne){var $e=new XMLHttpRequest;$e.open("HEAD",Ne,!1);try{$e.send()}catch(Wt){}return 200<=$e.status&&299>=$e.status}function Jt(Ne){try{Ne.dispatchEvent(new MouseEvent("click"))}catch(Wt){var $e=document.createEvent("MouseEvents");$e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Ne.dispatchEvent($e)}}var mt="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,zt=mt.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),gn=mt.saveAs||("object"!=typeof window||window!==mt?function(){}:"download"in HTMLAnchorElement.prototype&&!zt?function(Ne,$e,Wt){var ze=mt.URL||mt.webkitURL,Re=document.createElement("a");Re.download=$e=$e||Ne.name||"download",Re.rel="noopener","string"==typeof Ne?(Re.href=Ne,Re.origin===location.origin?Jt(Re):ct(Re.href)?It(Ne,$e,Wt):Jt(Re,Re.target="_blank")):(Re.href=ze.createObjectURL(Ne),setTimeout(function(){ze.revokeObjectURL(Re.href)},4e4),setTimeout(function(){Jt(Re)},0))}:"msSaveOrOpenBlob"in navigator?function(Ne,$e,Wt){if($e=$e||Ne.name||"download","string"!=typeof Ne)navigator.msSaveOrOpenBlob(function(Ne,$e){return void 0===$e?$e={autoBom:!1}:"object"!=typeof $e&&(console.warn("Deprecated: Expected third argument to be a object"),$e={autoBom:!$e}),$e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ne.type)?new Blob(["\ufeff",Ne],{type:Ne.type}):Ne}(Ne,Wt),$e);else if(ct(Ne))It(Ne,$e,Wt);else{var ze=document.createElement("a");ze.href=Ne,ze.target="_blank",setTimeout(function(){Jt(ze)})}}:function(Ne,$e,Wt,ze){if((ze=ze||open("","_blank"))&&(ze.document.title=ze.document.body.innerText="downloading..."),"string"==typeof Ne)return It(Ne,$e,Wt);var Re="application/octet-stream"===Ne.type,mn=/constructor/i.test(mt.HTMLElement)||mt.safari,Xe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Xe||Re&&mn||zt)&&"undefined"!=typeof FileReader){var Ln=new FileReader;Ln.onloadend=function(){var Bn=Ln.result;Bn=Xe?Bn:Bn.replace(/^data:[^;]*;/,"data:attachment/file;"),ze?ze.location.href=Bn:location=Bn,ze=null},Ln.readAsDataURL(Ne)}else{var At=mt.URL||mt.webkitURL,nn=At.createObjectURL(Ne);ze?ze.location=nn:location.href=nn,ze=null,setTimeout(function(){At.revokeObjectURL(nn)},4e4)}});mt.saveAs=gn.saveAs=gn,ft.exports=gn})?xe.apply(qe,[]):xe)&&(ft.exports=F)},524:(ft,qe,xe)=>{var bt;!function(F,gt,It,ct){"use strict";var Xe,Jt=["","webkit","Moz","MS","ms","o"],mt=gt.createElement("div"),gn=Math.round,Ne=Math.abs,$e=Date.now;function Wt(x,R,z){return setTimeout(Bn(x,z),R)}function ze(x,R,z){return!!Array.isArray(x)&&(Re(x,z[R],z),!0)}function Re(x,R,z){var se;if(x)if(x.forEach)x.forEach(R,z);else if(x.length!==ct)for(se=0;se<x.length;)R.call(z,x[se],se,x),se++;else for(se in x)x.hasOwnProperty(se)&&R.call(z,x[se],se,x)}function mn(x,R,z){var se="DEPRECATED METHOD: "+R+"\n"+z+" AT \n";return function(){var Oe=new Error("get-stack-trace"),Ue=Oe&&Oe.stack?Oe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_n=F.console&&(F.console.warn||F.console.log);return _n&&_n.call(F.console,se,Ue),x.apply(this,arguments)}}Xe="function"!=typeof Object.assign?function(R){if(R===ct||null===R)throw new TypeError("Cannot convert undefined or null to object");for(var z=Object(R),se=1;se<arguments.length;se++){var Oe=arguments[se];if(Oe!==ct&&null!==Oe)for(var Ue in Oe)Oe.hasOwnProperty(Ue)&&(z[Ue]=Oe[Ue])}return z}:Object.assign;var Ln=mn(function(R,z,se){for(var Oe=Object.keys(z),Ue=0;Ue<Oe.length;)(!se||se&&R[Oe[Ue]]===ct)&&(R[Oe[Ue]]=z[Oe[Ue]]),Ue++;return R},"extend","Use `assign`."),At=mn(function(R,z){return Ln(R,z,!0)},"merge","Use `assign`.");function nn(x,R,z){var Oe,se=R.prototype;(Oe=x.prototype=Object.create(se)).constructor=x,Oe._super=se,z&&Xe(Oe,z)}function Bn(x,R){return function(){return x.apply(R,arguments)}}function ni(x,R){return"function"==typeof x?x.apply(R&&R[0]||ct,R):x}function Un(x,R){return x===ct?R:x}function di(x,R,z){Re(Ut(R),function(se){x.addEventListener(se,z,!1)})}function Bi(x,R,z){Re(Ut(R),function(se){x.removeEventListener(se,z,!1)})}function Ie(x,R){for(;x;){if(x==R)return!0;x=x.parentNode}return!1}function ue(x,R){return x.indexOf(R)>-1}function Ut(x){return x.trim().split(/\s+/g)}function Lt(x,R,z){if(x.indexOf&&!z)return x.indexOf(R);for(var se=0;se<x.length;){if(z&&x[se][z]==R||!z&&x[se]===R)return se;se++}return-1}function $t(x){return Array.prototype.slice.call(x,0)}function Wn(x,R,z){for(var se=[],Oe=[],Ue=0;Ue<x.length;){var _n=R?x[Ue][R]:x[Ue];Lt(Oe,_n)<0&&se.push(x[Ue]),Oe[Ue]=_n,Ue++}return z&&(se=R?se.sort(function(Cr,Jr){return Cr[R]>Jr[R]}):se.sort()),se}function Ai(x,R){for(var z,se,Oe=R[0].toUpperCase()+R.slice(1),Ue=0;Ue<Jt.length;){if((se=(z=Jt[Ue])?z+Oe:R)in x)return se;Ue++}return ct}var G=1;function De(x){var R=x.ownerDocument||x;return R.defaultView||R.parentWindow||F}var et="ontouchstart"in F,it=Ai(F,"PointerEvent")!==ct,Hn=et&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ii="touch",ri="mouse",gs=["x","y"],Hr=["clientX","clientY"];function mi(x,R){var z=this;this.manager=x,this.callback=R,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(se){ni(x.options.enable,[x])&&z.handler(se)},this.init()}function Uo(x,R,z){var se=z.pointers.length,Oe=z.changedPointers.length,Ue=1&R&&se-Oe==0,_n=12&R&&se-Oe==0;z.isFirst=!!Ue,z.isFinal=!!_n,Ue&&(x.session={}),z.eventType=R,function(x,R){var z=x.session,se=R.pointers,Oe=se.length;z.firstInput||(z.firstInput=Wa(R)),Oe>1&&!z.firstMultiple?z.firstMultiple=Wa(R):1===Oe&&(z.firstMultiple=!1);var Ue=z.firstInput,_n=z.firstMultiple,gr=_n?_n.center:Ue.center,Cr=R.center=mo(se);R.timeStamp=$e(),R.deltaTime=R.timeStamp-Ue.timeStamp,R.angle=_o(gr,Cr),R.distance=ms(gr,Cr),function(x,R){var z=R.center,se=x.offsetDelta||{},Oe=x.prevDelta||{},Ue=x.prevInput||{};(1===R.eventType||4===Ue.eventType)&&(Oe=x.prevDelta={x:Ue.deltaX||0,y:Ue.deltaY||0},se=x.offsetDelta={x:z.x,y:z.y}),R.deltaX=Oe.x+(z.x-se.x),R.deltaY=Oe.y+(z.y-se.y)}(z,R),R.offsetDirection=zi(R.deltaX,R.deltaY);var Jr=qa(R.deltaTime,R.deltaX,R.deltaY);R.overallVelocityX=Jr.x,R.overallVelocityY=Jr.y,R.overallVelocity=Ne(Jr.x)>Ne(Jr.y)?Jr.x:Jr.y,R.scale=_n?function(x,R){return ms(R[0],R[1],Hr)/ms(x[0],x[1],Hr)}(_n.pointers,se):1,R.rotation=_n?function(x,R){return _o(R[1],R[0],Hr)+_o(x[1],x[0],Hr)}(_n.pointers,se):0,R.maxPointers=z.prevInput?R.pointers.length>z.prevInput.maxPointers?R.pointers.length:z.prevInput.maxPointers:R.pointers.length,function(x,R){var Oe,Ue,_n,gr,z=x.lastInterval||R,se=R.timeStamp-z.timeStamp;if(8!=R.eventType&&(se>25||z.velocity===ct)){var Cr=R.deltaX-z.deltaX,Jr=R.deltaY-z.deltaY,pn=qa(se,Cr,Jr);Ue=pn.x,_n=pn.y,Oe=Ne(pn.x)>Ne(pn.y)?pn.x:pn.y,gr=zi(Cr,Jr),x.lastInterval=R}else Oe=z.velocity,Ue=z.velocityX,_n=z.velocityY,gr=z.direction;R.velocity=Oe,R.velocityX=Ue,R.velocityY=_n,R.direction=gr}(z,R);var pn=x.element;Ie(R.srcEvent.target,pn)&&(pn=R.srcEvent.target),R.target=pn}(x,z),x.emit("hammer.input",z),x.recognize(z),x.session.prevInput=z}function Wa(x){for(var R=[],z=0;z<x.pointers.length;)R[z]={clientX:gn(x.pointers[z].clientX),clientY:gn(x.pointers[z].clientY)},z++;return{timeStamp:$e(),pointers:R,center:mo(R),deltaX:x.deltaX,deltaY:x.deltaY}}function mo(x){var R=x.length;if(1===R)return{x:gn(x[0].clientX),y:gn(x[0].clientY)};for(var z=0,se=0,Oe=0;Oe<R;)z+=x[Oe].clientX,se+=x[Oe].clientY,Oe++;return{x:gn(z/R),y:gn(se/R)}}function qa(x,R,z){return{x:R/x||0,y:z/x||0}}function zi(x,R){return x===R?1:Ne(x)>=Ne(R)?x<0?2:4:R<0?8:16}function ms(x,R,z){z||(z=gs);var se=R[z[0]]-x[z[0]],Oe=R[z[1]]-x[z[1]];return Math.sqrt(se*se+Oe*Oe)}function _o(x,R,z){return z||(z=gs),180*Math.atan2(R[z[1]]-x[z[1]],R[z[0]]-x[z[0]])/Math.PI}mi.prototype={handler:function(){},init:function(){this.evEl&&di(this.element,this.evEl,this.domHandler),this.evTarget&&di(this.target,this.evTarget,this.domHandler),this.evWin&&di(De(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Bi(this.element,this.evEl,this.domHandler),this.evTarget&&Bi(this.target,this.evTarget,this.domHandler),this.evWin&&Bi(De(this.element),this.evWin,this.domHandler)}};var vu={mousedown:1,mousemove:2,mouseup:4},yu="mousedown",bu="mousemove mouseup";function Il(){this.evEl=yu,this.evWin=bu,this.pressed=!1,mi.apply(this,arguments)}nn(Il,mi,{handler:function(R){var z=vu[R.type];1&z&&0===R.button&&(this.pressed=!0),2&z&&1!==R.which&&(z=4),this.pressed&&(4&z&&(this.pressed=!1),this.callback(this.manager,z,{pointers:[R],changedPointers:[R],pointerType:ri,srcEvent:R}))}});var Mc={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Md={2:ii,3:"pen",4:ri,5:"kinect"},wu="pointerdown",Ys="pointermove pointerup pointercancel";function Ze(){this.evEl=wu,this.evWin=Ys,mi.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}F.MSPointerEvent&&!F.PointerEvent&&(wu="MSPointerDown",Ys="MSPointerMove MSPointerUp MSPointerCancel"),nn(Ze,mi,{handler:function(R){var z=this.store,se=!1,Oe=R.type.toLowerCase().replace("ms",""),Ue=Mc[Oe],_n=Md[R.pointerType]||R.pointerType,gr=_n==ii,Cr=Lt(z,R.pointerId,"pointerId");1&Ue&&(0===R.button||gr)?Cr<0&&(z.push(R),Cr=z.length-1):12&Ue&&(se=!0),!(Cr<0)&&(z[Cr]=R,this.callback(this.manager,Ue,{pointers:z,changedPointers:[R],pointerType:_n,srcEvent:R}),se&&z.splice(Cr,1))}});var Cu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},W="touchstart",Y="touchstart touchmove touchend touchcancel";function ee(){this.evTarget=W,this.evWin=Y,this.started=!1,mi.apply(this,arguments)}function T(x,R){var z=$t(x.touches),se=$t(x.changedTouches);return 12&R&&(z=Wn(z.concat(se),"identifier",!0)),[z,se]}nn(ee,mi,{handler:function(R){var z=Cu[R.type];if(1===z&&(this.started=!0),this.started){var se=T.call(this,R,z);12&z&&se[0].length-se[1].length==0&&(this.started=!1),this.callback(this.manager,z,{pointers:se[0],changedPointers:se[1],pointerType:ii,srcEvent:R})}}});var D={touchstart:1,touchmove:2,touchend:4,touchcancel:8},V="touchstart touchmove touchend touchcancel";function J(){this.evTarget=V,this.targetIds={},mi.apply(this,arguments)}function $(x,R){var z=$t(x.touches),se=this.targetIds;if(3&R&&1===z.length)return se[z[0].identifier]=!0,[z,z];var Oe,Ue,_n=$t(x.changedTouches),gr=[],Cr=this.target;if(Ue=z.filter(function(Jr){return Ie(Jr.target,Cr)}),1===R)for(Oe=0;Oe<Ue.length;)se[Ue[Oe].identifier]=!0,Oe++;for(Oe=0;Oe<_n.length;)se[_n[Oe].identifier]&&gr.push(_n[Oe]),12&R&&delete se[_n[Oe].identifier],Oe++;return gr.length?[Wn(Ue.concat(gr),"identifier",!0),gr]:void 0}function me(){mi.apply(this,arguments);var x=Bn(this.handler,this);this.touch=new J(this.manager,x),this.mouse=new Il(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}function We(x,R){1&x?(this.primaryTouch=R.changedPointers[0].identifier,rn.call(this,R)):12&x&&rn.call(this,R)}function rn(x){var R=x.changedPointers[0];if(R.identifier===this.primaryTouch){var z={x:R.clientX,y:R.clientY};this.lastTouches.push(z);var se=this.lastTouches;setTimeout(function(){var Ue=se.indexOf(z);Ue>-1&&se.splice(Ue,1)},2500)}}function Tn(x){for(var R=x.srcEvent.clientX,z=x.srcEvent.clientY,se=0;se<this.lastTouches.length;se++){var Oe=this.lastTouches[se],Ue=Math.abs(R-Oe.x),_n=Math.abs(z-Oe.y);if(Ue<=25&&_n<=25)return!0}return!1}nn(J,mi,{handler:function(R){var z=D[R.type],se=$.call(this,R,z);!se||this.callback(this.manager,z,{pointers:se[0],changedPointers:se[1],pointerType:ii,srcEvent:R})}}),nn(me,mi,{handler:function(R,z,se){var Ue=se.pointerType==ri;if(!(Ue&&se.sourceCapabilities&&se.sourceCapabilities.firesTouchEvents)){if(se.pointerType==ii)We.call(this,z,se);else if(Ue&&Tn.call(this,se))return;this.callback(R,z,se)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Xt=Ai(mt.style,"touchAction"),St=Xt!==ct,sn="compute",Xi="manipulation",Ki="none",fn="pan-x",Ti="pan-y",Ac=function(){if(!St)return!1;var x={},R=F.CSS&&F.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(z){x[z]=!R||F.CSS.supports("touch-action",z)}),x}();function vo(x,R){this.manager=x,this.set(R)}function Ya(x){this.options=Xe({},this.defaults,x||{}),this.id=G++,this.manager=null,this.options.enable=Un(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function pe(x){return 16&x?"cancel":8&x?"end":4&x?"move":2&x?"start":""}function f_(x){return 16==x?"down":8==x?"up":2==x?"left":4==x?"right":""}function Ae(x,R){var z=R.manager;return z?z.get(x):x}function ur(){Ya.apply(this,arguments)}function xc(){ur.apply(this,arguments),this.pX=null,this.pY=null}function Mu(){ur.apply(this,arguments)}function Fh(){Ya.apply(this,arguments),this._timer=null,this._input=null}function Au(){ur.apply(this,arguments)}function va(){ur.apply(this,arguments)}function Rl(){Ya.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Xa(x,R){return(R=R||{}).recognizers=Un(R.recognizers,Xa.defaults.preset),new kl(x,R)}function kl(x,R){this.options=Xe({},Xa.defaults,R||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=function(x){return new(x.options.inputClass||(it?Ze:Hn?J:et?me:Il))(x,Uo)}(this),this.touchAction=new vo(this,this.options.touchAction),xp(this,!0),Re(this.options.recognizers,function(z){var se=this.add(new z[0](z[1]));z[2]&&se.recognizeWith(z[2]),z[3]&&se.requireFailure(z[3])},this)}function xp(x,R){var se,z=x.element;z.style&&(Re(x.options.cssProps,function(Oe,Ue){se=Ai(z.style,Ue),R?(x.oldCssProps[se]=z.style[se],z.style[se]=Oe):z.style[se]=x.oldCssProps[se]||""}),R||(x.oldCssProps={}))}vo.prototype={set:function(x){x==sn&&(x=this.compute()),St&&this.manager.element.style&&Ac[x]&&(this.manager.element.style[Xt]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return Re(this.manager.recognizers,function(R){ni(R.options.enable,[R])&&(x=x.concat(R.getTouchAction()))}),function(x){if(ue(x,Ki))return Ki;var R=ue(x,fn),z=ue(x,Ti);return R&&z?Ki:R||z?R?fn:Ti:ue(x,Xi)?Xi:"auto"}(x.join(" "))},preventDefaults:function(x){var R=x.srcEvent,z=x.offsetDirection;if(!this.manager.session.prevented){var se=this.actions,Oe=ue(se,Ki)&&!Ac[Ki],Ue=ue(se,Ti)&&!Ac[Ti],_n=ue(se,fn)&&!Ac[fn];if(Oe&&1===x.pointers.length&&x.distance<2&&x.deltaTime<250)return;return _n&&Ue||!(Oe||Ue&&6&z||_n&&24&z)?void 0:this.preventSrc(R)}R.preventDefault()},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}},Ya.prototype={defaults:{},set:function(x){return Xe(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(ze(x,"recognizeWith",this))return this;var R=this.simultaneous;return R[(x=Ae(x,this)).id]||(R[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return ze(x,"dropRecognizeWith",this)||(x=Ae(x,this),delete this.simultaneous[x.id]),this},requireFailure:function(x){if(ze(x,"requireFailure",this))return this;var R=this.requireFail;return-1===Lt(R,x=Ae(x,this))&&(R.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(ze(x,"dropRequireFailure",this))return this;x=Ae(x,this);var R=Lt(this.requireFail,x);return R>-1&&this.requireFail.splice(R,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var R=this,z=this.state;function se(Oe){R.manager.emit(Oe,x)}z<8&&se(R.options.event+pe(z)),se(R.options.event),x.additionalEvent&&se(x.additionalEvent),z>=8&&se(R.options.event+pe(z))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=32},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(33&this.requireFail[x].state))return!1;x++}return!0},recognize:function(x){var R=Xe({},x);if(!ni(this.options.enable,[this,R]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(R),30&this.state&&this.tryEmit(R)},process:function(x){},getTouchAction:function(){},reset:function(){}},nn(ur,Ya,{defaults:{pointers:1},attrTest:function(x){var R=this.options.pointers;return 0===R||x.pointers.length===R},process:function(x){var R=this.state,z=x.eventType,se=6&R,Oe=this.attrTest(x);return se&&(8&z||!Oe)?16|R:se||Oe?4&z?8|R:2&R?4|R:2:32}}),nn(xc,ur,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var x=this.options.direction,R=[];return 6&x&&R.push(Ti),24&x&&R.push(fn),R},directionTest:function(x){var R=this.options,z=!0,se=x.distance,Oe=x.direction,Ue=x.deltaX,_n=x.deltaY;return Oe&R.direction||(6&R.direction?(Oe=0===Ue?1:Ue<0?2:4,z=Ue!=this.pX,se=Math.abs(x.deltaX)):(Oe=0===_n?1:_n<0?8:16,z=_n!=this.pY,se=Math.abs(x.deltaY))),x.direction=Oe,z&&se>R.threshold&&Oe&R.direction},attrTest:function(x){return ur.prototype.attrTest.call(this,x)&&(2&this.state||!(2&this.state)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var R=f_(x.direction);R&&(x.additionalEvent=this.options.event+R),this._super.emit.call(this,x)}}),nn(Mu,ur,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ki]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||2&this.state)},emit:function(x){1!==x.scale&&(x.additionalEvent=this.options.event+(x.scale<1?"in":"out")),this._super.emit.call(this,x)}}),nn(Fh,Ya,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(x){var R=this.options,z=x.pointers.length===R.pointers,se=x.distance<R.threshold,Oe=x.deltaTime>R.time;if(this._input=x,!se||!z||12&x.eventType&&!Oe)this.reset();else if(1&x.eventType)this.reset(),this._timer=Wt(function(){this.state=8,this.tryEmit()},R.time,this);else if(4&x.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(x){8===this.state&&(x&&4&x.eventType?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=$e(),this.manager.emit(this.options.event,this._input)))}}),nn(Au,ur,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ki]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||2&this.state)}}),nn(va,ur,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return xc.prototype.getTouchAction.call(this)},attrTest:function(x){var z,R=this.options.direction;return 30&R?z=x.overallVelocity:6&R?z=x.overallVelocityX:24&R&&(z=x.overallVelocityY),this._super.attrTest.call(this,x)&&R&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&Ne(z)>this.options.velocity&&4&x.eventType},emit:function(x){var R=f_(x.offsetDirection);R&&this.manager.emit(this.options.event+R,x),this.manager.emit(this.options.event,x)}}),nn(Rl,Ya,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xi]},process:function(x){var R=this.options,z=x.pointers.length===R.pointers,se=x.distance<R.threshold,Oe=x.deltaTime<R.time;if(this.reset(),1&x.eventType&&0===this.count)return this.failTimeout();if(se&&Oe&&z){if(4!=x.eventType)return this.failTimeout();var Ue=!this.pTime||x.timeStamp-this.pTime<R.interval,_n=!this.pCenter||ms(this.pCenter,x.center)<R.posThreshold;if(this.pTime=x.timeStamp,this.pCenter=x.center,_n&&Ue?this.count+=1:this.count=1,this._input=x,0==this.count%R.taps)return this.hasRequireFailures()?(this._timer=Wt(function(){this.state=8,this.tryEmit()},R.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Wt(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Xa.VERSION="2.0.7",Xa.defaults={domEvents:!1,touchAction:sn,enable:!0,inputTarget:null,inputClass:null,preset:[[Au,{enable:!1}],[Mu,{enable:!1},["rotate"]],[va,{direction:6}],[xc,{direction:6},["swipe"]],[Rl],[Rl,{event:"doubletap",taps:2},["tap"]],[Fh]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},kl.prototype={set:function(x){return Xe(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?2:1},recognize:function(x){var R=this.session;if(!R.stopped){this.touchAction.preventDefaults(x);var z,se=this.recognizers,Oe=R.curRecognizer;(!Oe||Oe&&8&Oe.state)&&(Oe=R.curRecognizer=null);for(var Ue=0;Ue<se.length;)z=se[Ue],2===R.stopped||Oe&&z!=Oe&&!z.canRecognizeWith(Oe)?z.reset():z.recognize(x),!Oe&&14&z.state&&(Oe=R.curRecognizer=z),Ue++}},get:function(x){if(x instanceof Ya)return x;for(var R=this.recognizers,z=0;z<R.length;z++)if(R[z].options.event==x)return R[z];return null},add:function(x){if(ze(x,"add",this))return this;var R=this.get(x.options.event);return R&&this.remove(R),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(ze(x,"remove",this))return this;if(x=this.get(x)){var R=this.recognizers,z=Lt(R,x);-1!==z&&(R.splice(z,1),this.touchAction.update())}return this},on:function(x,R){if(x!==ct&&R!==ct){var z=this.handlers;return Re(Ut(x),function(se){z[se]=z[se]||[],z[se].push(R)}),this}},off:function(x,R){if(x!==ct){var z=this.handlers;return Re(Ut(x),function(se){R?z[se]&&z[se].splice(Lt(z[se],R),1):delete z[se]}),this}},emit:function(x,R){this.options.domEvents&&function(x,R){var z=gt.createEvent("Event");z.initEvent(x,!0,!0),z.gesture=R,R.target.dispatchEvent(z)}(x,R);var z=this.handlers[x]&&this.handlers[x].slice();if(z&&z.length){R.type=x,R.preventDefault=function(){R.srcEvent.preventDefault()};for(var se=0;se<z.length;)z[se](R),se++}},destroy:function(){this.element&&xp(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Xe(Xa,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:kl,Input:mi,TouchAction:vo,TouchInput:J,MouseInput:Il,PointerEventInput:Ze,TouchMouseInput:me,SingleTouchInput:ee,Recognizer:Ya,AttrRecognizer:ur,Tap:Rl,Pan:xc,Swipe:va,Pinch:Mu,Rotate:Au,Press:Fh,on:di,off:Bi,each:Re,merge:At,extend:Ln,assign:Xe,inherit:nn,bindFn:Bn,prefixed:Ai}),(void 0!==F?F:"undefined"!=typeof self?self:{}).Hammer=Xa,(bt=function(){return Xa}.call(qe,xe,qe,ft))!==ct&&(ft.exports=bt)}(window,document)},815:function(ft,qe,xe){var bt;ft=xe.nmd(ft),function(){var F,Jt="Expected a function",zt="__lodash_hash_undefined__",Ne="__lodash_placeholder__",ce=1/0,De=9007199254740991,it=4294967295,Ur=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ri="[object Arguments]",Ps="[object Array]",In="[object Boolean]",dt="[object Date]",Vi="[object Error]",ma="[object Function]",$a="[object GeneratorFunction]",ji="[object Map]",Qr="[object Number]",cr="[object Object]",go="[object Promise]",gs="[object RegExp]",Hr="[object Set]",mi="[object String]",Ec="[object Symbol]",_i="[object WeakMap]",Dl="[object ArrayBuffer]",Wa="[object DataView]",mo="[object Float32Array]",qa="[object Float64Array]",zi="[object Int8Array]",ms="[object Int16Array]",_o="[object Int32Array]",Sc="[object Uint8Array]",Ol="[object Uint8ClampedArray]",vu="[object Uint16Array]",yu="[object Uint32Array]",bu=/\b__p \+= '';/g,Il=/\b(__p \+=) '' \+/g,Mc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Md=/&(?:amp|lt|gt|quot|#39);/g,wu=/[&<>"']/g,Ys=RegExp(Md.source),Ze=RegExp(wu.source),Cu=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T=/^\w*$/,D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,J=RegExp(V.source),$=/^\s+/,he=/\s/,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,me=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /,rn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tn=/[()=,{}\[\]\/\s]/,Xt=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sn=/\w*$/,hi=/^[-+]0x[0-9a-f]+$/i,Xi=/^0b[01]+$/i,Ki=/^\[object .+?Constructor\]$/,fn=/^0o[0-7]+$/i,Ti=/^(?:0|[1-9]\d*)$/,Ac=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vo=/($^)/,Ad=/['\n\r\u2028\u2029\\]/g,Pl="\\ud800-\\udfff",Zi="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kn="\\u2700-\\u27bf",Su="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",ur="\\ufe0e\\ufe0f",xc="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Fh="["+Pl+"]",Au="["+xc+"]",va="["+Zi+"]",Rl="\\d+",Xa="["+kn+"]",Tp="["+Su+"]",xt="[^"+Pl+xc+Rl+kn+Su+Ae+"]",kl="\\ud83c[\\udffb-\\udfff]",ya="[^"+Pl+"]",Td="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",R="["+Ae+"]",z="\\u200d",se="(?:"+Tp+"|"+xt+")",Oe="(?:"+R+"|"+xt+")",Ue="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",_n="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",gr="(?:"+va+"|"+kl+")?",Cr="["+ur+"]?",BM=Cr+gr+"(?:"+z+"(?:"+[ya,Td,x].join("|")+")"+Cr+gr+")*",xd="(?:"+[Xa,Td,x].join("|")+")"+BM,Ei="(?:"+[ya+va+"?",va,Td,x,Fh].join("|")+")",Dp=RegExp("['\u2019]","g"),p_=RegExp(va,"g"),Nh=RegExp(kl+"(?="+kl+")|"+Ei+BM,"g"),M0=RegExp([R+"?"+Tp+"+"+Ue+"(?="+[Au,R,"$"].join("|")+")",Oe+"+"+_n+"(?="+[Au,R+se,"$"].join("|")+")",R+"?"+se+"+"+Ue,R+"+"+_n,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rl,xd].join("|"),"g"),VM=RegExp("["+z+Pl+Zi+ur+"]"),Fl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jM=-1,Ge={};Ge[mo]=Ge[qa]=Ge[zi]=Ge[ms]=Ge[_o]=Ge[Sc]=Ge[Ol]=Ge[vu]=Ge[yu]=!0,Ge[ri]=Ge[Ps]=Ge[Dl]=Ge[In]=Ge[Wa]=Ge[dt]=Ge[Vi]=Ge[ma]=Ge[ji]=Ge[Qr]=Ge[cr]=Ge[gs]=Ge[Hr]=Ge[mi]=Ge[_i]=!1;var xi={};xi[ri]=xi[Ps]=xi[Dl]=xi[Wa]=xi[In]=xi[dt]=xi[mo]=xi[qa]=xi[zi]=xi[ms]=xi[_o]=xi[ji]=xi[Qr]=xi[cr]=xi[gs]=xi[Hr]=xi[mi]=xi[Ec]=xi[Sc]=xi[Ol]=xi[vu]=xi[yu]=!0,xi[Vi]=xi[ma]=xi[_i]=!1;var ke={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zM=parseFloat,D0=parseInt,_e="object"==typeof global&&global&&global.Object===Object&&global,_s="object"==typeof self&&self&&self.Object===Object&&self,si=_e||_s||Function("return this")(),Nl=qe&&!qe.nodeType&&qe,ba=Nl&&ft&&!ft.nodeType&&ft,yo=ba&&ba.exports===Nl,g_=yo&&_e.process,Qi=function(){try{return ba&&ba.require&&ba.require("util").types||g_&&g_.binding&&g_.binding("util")}catch(ge){}}(),Je=Qi&&Qi.isArrayBuffer,vn=Qi&&Qi.isDate,Ri=Qi&&Qi.isMap,Ks=Qi&&Qi.isRegExp,Dc=Qi&&Qi.isSet,Dr=Qi&&Qi.isTypedArray;function Or(q,ge,oe){switch(oe.length){case 0:return q.call(ge);case 1:return q.call(ge,oe[0]);case 2:return q.call(ge,oe[0],oe[1]);case 3:return q.call(ge,oe[0],oe[1],oe[2])}return q.apply(ge,oe)}function mr(q,ge,oe,at){for(var Rt=-1,Kn=null==q?0:q.length;++Rt<Kn;){var Er=q[Rt];ge(at,Er,oe(Er),q)}return at}function vs(q,ge){for(var oe=-1,at=null==q?0:q.length;++oe<at&&!1!==ge(q[oe],oe,q););return q}function Dd(q,ge){for(var oe=null==q?0:q.length;oe--&&!1!==ge(q[oe],oe,q););return q}function dn(q,ge){for(var oe=-1,at=null==q?0:q.length;++oe<at;)if(!ge(q[oe],oe,q))return!1;return!0}function wa(q,ge){for(var oe=-1,at=null==q?0:q.length,Rt=0,Kn=[];++oe<at;){var Er=q[oe];ge(Er,oe,q)&&(Kn[Rt++]=Er)}return Kn}function Ll(q,ge){return!(null==q||!q.length)&&Ka(q,ge,0)>-1}function Bh(q,ge,oe){for(var at=-1,Rt=null==q?0:q.length;++at<Rt;)if(oe(ge,q[at]))return!0;return!1}function vi(q,ge){for(var oe=-1,at=null==q?0:q.length,Rt=Array(at);++oe<at;)Rt[oe]=ge(q[oe],oe,q);return Rt}function _r(q,ge){for(var oe=-1,at=ge.length,Rt=q.length;++oe<at;)q[Rt+oe]=ge[oe];return q}function Tu(q,ge,oe,at){var Rt=-1,Kn=null==q?0:q.length;for(at&&Kn&&(oe=q[++Rt]);++Rt<Kn;)oe=ge(oe,q[Rt],Rt,q);return oe}function Od(q,ge,oe,at){var Rt=null==q?0:q.length;for(at&&Rt&&(oe=q[--Rt]);Rt--;)oe=ge(oe,q[Rt],Rt,q);return oe}function bo(q,ge){for(var oe=-1,at=null==q?0:q.length;++oe<at;)if(ge(q[oe],oe,q))return!0;return!1}var Di=m_("length");function Vh(q,ge,oe){var at;return oe(q,function(Rt,Kn,Er){if(ge(Rt,Kn,Er))return at=Kn,!1}),at}function Id(q,ge,oe,at){for(var Rt=q.length,Kn=oe+(at?1:-1);at?Kn--:++Kn<Rt;)if(ge(q[Kn],Kn,q))return Kn;return-1}function Ka(q,ge,oe){return ge==ge?function(q,ge,oe){for(var at=oe-1,Rt=q.length;++at<Rt;)if(q[at]===ge)return at;return-1}(q,ge,oe):Id(q,Oc,oe)}function Op(q,ge,oe,at){for(var Rt=oe-1,Kn=q.length;++Rt<Kn;)if(at(q[Rt],ge))return Rt;return-1}function Oc(q){return q!=q}function es(q,ge){var oe=null==q?0:q.length;return oe?Pd(q,ge)/oe:NaN}function m_(q){return function(ge){return null==ge?F:ge[q]}}function Ho(q){return function(ge){return null==q?F:q[ge]}}function $o(q,ge,oe,at,Rt){return Rt(q,function(Kn,Er,yi){oe=at?(at=!1,Kn):ge(oe,Kn,Er,yi)}),oe}function Pd(q,ge){for(var oe,at=-1,Rt=q.length;++at<Rt;){var Kn=ge(q[at]);Kn!==F&&(oe=oe===F?Kn:oe+Kn)}return oe}function Rd(q,ge){for(var oe=-1,at=Array(q);++oe<q;)at[oe]=ge(oe);return at}function O0(q){return q&&q.slice(0,Ic(q)+1).replace($,"")}function Go(q){return function(ge){return q(ge)}}function v_(q,ge){return vi(ge,function(oe){return q[oe]})}function jh(q,ge){return q.has(ge)}function $M(q,ge){for(var oe=-1,at=q.length;++oe<at&&Ka(ge,q[oe],0)>-1;);return oe}function GM(q,ge){for(var oe=q.length;oe--&&Ka(ge,q[oe],0)>-1;);return oe}function YF(q,ge){for(var oe=q.length,at=0;oe--;)q[oe]===ge&&++at;return at}var XF=Ho({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),KF=Ho({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ZF(q){return"\\"+ke[q]}function zh(q){return VM.test(q)}function I0(q){var ge=-1,oe=Array(q.size);return q.forEach(function(at,Rt){oe[++ge]=[Rt,at]}),oe}function WM(q,ge){return function(oe){return q(ge(oe))}}function xu(q,ge){for(var oe=-1,at=q.length,Rt=0,Kn=[];++oe<at;){var Er=q[oe];(Er===ge||Er===Ne)&&(q[oe]=Ne,Kn[Rt++]=oe)}return Kn}function y_(q){var ge=-1,oe=Array(q.size);return q.forEach(function(at){oe[++ge]=at}),oe}function Uh(q){return zh(q)?function(q){for(var ge=Nh.lastIndex=0;Nh.test(q);)++ge;return ge}(q):Di(q)}function Za(q){return zh(q)?function(q){return q.match(Nh)||[]}(q):function(q){return q.split("")}(q)}function Ic(q){for(var ge=q.length;ge--&&he.test(q.charAt(ge)););return ge}var w_=Ho({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Hh=function q(ge){var d,oe=(ge=null==ge?si:Hh.defaults(si.Object(),ge,Hh.pick(si,Lh))).Array,at=ge.Date,Rt=ge.Error,Kn=ge.Function,Er=ge.Math,yi=ge.Object,C_=ge.RegExp,E_=ge.String,Ea=ge.TypeError,ki=oe.prototype,Du=yi.prototype,Ip=ge["__core-js_shared__"],Ji=Kn.prototype.toString,bi=Du.hasOwnProperty,iN=0,$h=(d=/[^.]+$/.exec(Ip&&Ip.keys&&Ip.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",Rs=Du.toString,XM=Ji.call(yi),S_=si._,kd=C_("^"+Ji.call(bi).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ys=yo?ge.Buffer:F,Bl=ge.Symbol,Fd=ge.Uint8Array,k0=ys?ys.allocUnsafe:F,Sa=WM(yi.getPrototypeOf,yi),M_=yi.create,Pp=Du.propertyIsEnumerable,Kt=ki.splice,KM=Bl?Bl.isConcatSpreadable:F,Gh=Bl?Bl.iterator:F,Ou=Bl?Bl.toStringTag:F,Rp=function(){try{var d=zc(yi,"defineProperty");return d({},"",{}),d}catch(f){}}(),F0=ge.clearTimeout!==si.clearTimeout&&ge.clearTimeout,ZM=at&&at.now!==si.Date.now&&at.now,QM=ge.setTimeout!==si.setTimeout&&ge.setTimeout,Me=Er.ceil,Pn=Er.floor,Zn=yi.getOwnPropertySymbols,Ir=ys?ys.isBuffer:F,A_=ge.isFinite,Wh=ki.join,Qa=WM(yi.keys,yi),vr=Er.max,$r=Er.min,rN=at.now,JM=ge.parseInt,qh=Er.random,kp=ki.reverse,ts=zc(ge,"DataView"),Zs=zc(ge,"Map"),Fp=zc(ge,"Promise"),Ma=zc(ge,"Set"),wo=zc(ge,"WeakMap"),Yh=zc(yi,"create"),Xh=wo&&new wo,Nd={},eA=Uu(ts),T_=Uu(Zs),x_=Uu(Fp),N0=Uu(Ma),D_=Uu(wo),Np=Bl?Bl.prototype:F,Ld=Np?Np.valueOf:F,Kh=Np?Np.toString:F;function O(d){if(nr(d)&&!Ht(d)&&!(d instanceof yn)){if(d instanceof Co)return d;if(bi.call(d,"__wrapped__"))return og(d)}return new Co(d)}var Iu=function(){function d(){}return function(f){if(!tr(f))return{};if(M_)return M_(f);d.prototype=f;var _=new d;return d.prototype=F,_}}();function Zh(){}function Co(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=F}function yn(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=it,this.__views__=[]}function Qs(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var b=d[f];this.set(b[0],b[1])}}function Vl(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var b=d[f];this.set(b[0],b[1])}}function Ja(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var b=d[f];this.set(b[0],b[1])}}function Aa(d){var f=-1,_=null==d?0:d.length;for(this.__data__=new Ja;++f<_;)this.add(d[f])}function Ta(d){var f=this.__data__=new Vl(d);this.size=f.size}function Jh(d,f){var _=Ht(d),b=!_&&ll(d),M=!_&&!b&&cl(d),P=!_&&!b&&!M&&gf(d),j=_||b||M||P,H=j?Rd(d.length,E_):[],Z=H.length;for(var ye in d)(f||bi.call(d,ye))&&(!j||!("length"==ye||M&&("offset"==ye||"parent"==ye)||P&&("buffer"==ye||"byteLength"==ye||"byteOffset"==ye)||Mo(ye,Z)))&&H.push(ye);return H}function R_(d){var f=d.length;return f?d[jl(0,f-1)]:F}function j0(d,f){return Qd(Fs(d),Pu(f,0,d.length))}function Bd(d){return Qd(Fs(d))}function k_(d,f,_){(_!==F&&!kt(d[f],_)||_===F&&!(f in d))&&tl(d,f,_)}function el(d,f,_){var b=d[f];(!bi.call(d,f)||!kt(b,_)||_===F&&!(f in d))&&tl(d,f,_)}function Vd(d,f){for(var _=d.length;_--;)if(kt(d[_][0],f))return _;return-1}function zp(d,f,_,b){return kc(d,function(M,P,j){f(b,M,_(M),j)}),b}function uA(d,f){return d&&Da(f,os(f),d)}function tl(d,f,_){"__proto__"==f&&Rp?Rp(d,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[f]=_}function F_(d,f){for(var _=-1,b=f.length,M=oe(b),P=null==d;++_<b;)M[_]=P?F:vf(d,f[_]);return M}function Pu(d,f,_){return d==d&&(_!==F&&(d=d<=_?d:_),f!==F&&(d=d>=f?d:f)),d}function bs(d,f,_,b,M,P){var j,H=1&f,Z=2&f,ye=4&f;if(_&&(j=M?_(d,b,M,P):_(d)),j!==F)return j;if(!tr(d))return d;var be=Ht(d);if(be){if(j=function(d){var f=d.length,_=new d.constructor(f);return f&&"string"==typeof d[0]&&bi.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!H)return Fs(d,j)}else{var Te=Es(d),Qe=Te==ma||Te==$a;if(cl(d))return Xp(d,H);if(Te==cr||Te==ri||Qe&&!M){if(j=Z||Qe?{}:cw(d),!H)return Z?function(d,f){return Da(d,ow(d),f)}(d,function(d,f){return d&&Da(f,Ls(f),d)}(j,d)):function(d,f){return Da(d,Z_(d),f)}(d,uA(j,d))}else{if(!xi[Te])return M?d:{};j=function(d,f,_){var b=d.constructor;switch(f){case Dl:return Bu(d);case In:case dt:return new b(+d);case Wa:return function(d,f){var _=f?Bu(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case mo:case qa:case zi:case ms:case _o:case Sc:case Ol:case vu:case yu:return W_(d,_);case ji:return new b;case Qr:case mi:return new b(d);case gs:return function(d){var f=new d.constructor(d.source,sn.exec(d));return f.lastIndex=d.lastIndex,f}(d);case Hr:return new b;case Ec:return function(d){return Ld?yi(Ld.call(d)):{}}(d)}}(d,Te,H)}}P||(P=new Ta);var Mt=P.get(d);if(Mt)return Mt;P.set(d,j),xT(d)?d.forEach(function(Zt){j.add(bs(Zt,f,_,Zt,d,P))}):ST(d)&&d.forEach(function(Zt,Cn){j.set(Cn,bs(Zt,f,_,Cn,d,P))});var wn=be?F:(ye?Z?X_:$l:Z?Ls:os)(d);return vs(wn||d,function(Zt,Cn){wn&&(Zt=d[Cn=Zt]),el(j,Cn,bs(Zt,f,_,Cn,d,P))}),j}function Up(d,f,_){var b=_.length;if(null==d)return!b;for(d=yi(d);b--;){var M=_[b],j=d[M];if(j===F&&!(M in d)||!(0,f[M])(j))return!1}return!0}function ef(d,f,_){if("function"!=typeof d)throw new Ea(Jt);return lf(function(){d.apply(F,_)},f)}function Rc(d,f,_,b){var M=-1,P=Ll,j=!0,H=d.length,Z=[],ye=f.length;if(!H)return Z;_&&(f=vi(f,Go(_))),b?(P=Bh,j=!1):f.length>=200&&(P=jh,j=!1,f=new Aa(f));e:for(;++M<H;){var be=d[M],Te=null==_?be:_(be);if(be=b||0!==be?be:0,j&&Te==Te){for(var Qe=ye;Qe--;)if(f[Qe]===Te)continue e;Z.push(be)}else P(f,Te,b)||Z.push(be)}return Z}O.templateSettings={escape:Cu,evaluate:W,interpolate:Y,variable:"",imports:{_:O}},(O.prototype=Zh.prototype).constructor=O,(Co.prototype=Iu(Zh.prototype)).constructor=Co,(yn.prototype=Iu(Zh.prototype)).constructor=yn,Qs.prototype.clear=function(){this.__data__=Yh?Yh(null):{},this.size=0},Qs.prototype.delete=function(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f},Qs.prototype.get=function(d){var f=this.__data__;if(Yh){var _=f[d];return _===zt?F:_}return bi.call(f,d)?f[d]:F},Qs.prototype.has=function(d){var f=this.__data__;return Yh?f[d]!==F:bi.call(f,d)},Qs.prototype.set=function(d,f){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=Yh&&f===F?zt:f,this},Vl.prototype.clear=function(){this.__data__=[],this.size=0},Vl.prototype.delete=function(d){var f=this.__data__,_=Vd(f,d);return!(_<0||(_==f.length-1?f.pop():Kt.call(f,_,1),--this.size,0))},Vl.prototype.get=function(d){var f=this.__data__,_=Vd(f,d);return _<0?F:f[_][1]},Vl.prototype.has=function(d){return Vd(this.__data__,d)>-1},Vl.prototype.set=function(d,f){var _=this.__data__,b=Vd(_,d);return b<0?(++this.size,_.push([d,f])):_[b][1]=f,this},Ja.prototype.clear=function(){this.size=0,this.__data__={hash:new Qs,map:new(Zs||Vl),string:new Qs}},Ja.prototype.delete=function(d){var f=Cs(this,d).delete(d);return this.size-=f?1:0,f},Ja.prototype.get=function(d){return Cs(this,d).get(d)},Ja.prototype.has=function(d){return Cs(this,d).has(d)},Ja.prototype.set=function(d,f){var _=Cs(this,d),b=_.size;return _.set(d,f),this.size+=_.size==b?0:1,this},Aa.prototype.add=Aa.prototype.push=function(d){return this.__data__.set(d,zt),this},Aa.prototype.has=function(d){return this.__data__.has(d)},Ta.prototype.clear=function(){this.__data__=new Vl,this.size=0},Ta.prototype.delete=function(d){var f=this.__data__,_=f.delete(d);return this.size=f.size,_},Ta.prototype.get=function(d){return this.__data__.get(d)},Ta.prototype.has=function(d){return this.__data__.has(d)},Ta.prototype.set=function(d,f){var _=this.__data__;if(_ instanceof Vl){var b=_.__data__;if(!Zs||b.length<199)return b.push([d,f]),this.size=++_.size,this;_=this.__data__=new Ja(b)}return _.set(d,f),this.size=_.size,this};var kc=rl(nl),L_=rl(Hp,!0);function U0(d,f){var _=!0;return kc(d,function(b,M,P){return _=!!f(b,M,P)}),_}function tf(d,f,_){for(var b=-1,M=d.length;++b<M;){var P=d[b],j=f(P);if(null!=j&&(H===F?j==j&&!ta(j):_(j,H)))var H=j,Z=P}return Z}function $0(d,f){var _=[];return kc(d,function(b,M,P){f(b,M,P)&&_.push(b)}),_}function ns(d,f,_,b,M){var P=-1,j=d.length;for(_||(_=xA),M||(M=[]);++P<j;){var H=d[P];f>0&&_(H)?f>1?ns(H,f-1,_,b,M):_r(M,H):b||(M[M.length]=H)}return M}var jd=Z0(),zd=Z0(!0);function nl(d,f){return d&&jd(d,f,os)}function Hp(d,f){return d&&zd(d,f,os)}function nf(d,f){return wa(f,function(_){return ea(d[_])})}function Wo(d,f){for(var _=0,b=(f=Bc(f,d)).length;null!=d&&_<b;)d=d[hn(f[_++])];return _&&_==b?d:F}function qn(d,f,_){var b=f(d);return Ht(d)?b:_r(b,_(d))}function is(d){return null==d?d===F?"[object Undefined]":"[object Null]":Ou&&Ou in yi(d)?function(d){var f=bi.call(d,Ou),_=d[Ou];try{d[Ou]=F;var b=!0}catch(P){}var M=Rs.call(d);return b&&(f?d[Ou]=_:delete d[Ou]),M}(d):function(d){return Rs.call(d)}(d)}function ws(d,f){return d>f}function Ud(d,f){return null!=d&&bi.call(d,f)}function Hd(d,f){return null!=d&&f in yi(d)}function Ru(d,f,_){for(var b=_?Bh:Ll,M=d[0].length,P=d.length,j=P,H=oe(P),Z=1/0,ye=[];j--;){var be=d[j];j&&f&&(be=vi(be,Go(f))),Z=$r(be.length,Z),H[j]=!_&&(f||M>=120&&be.length>=120)?new Aa(j&&be):F}be=d[0];var Te=-1,Qe=H[0];e:for(;++Te<M&&ye.length<Z;){var Mt=be[Te],qt=f?f(Mt):Mt;if(Mt=_||0!==Mt?Mt:0,!(Qe?jh(Qe,qt):b(ye,qt,_))){for(j=P;--j;){var wn=H[j];if(!(wn?jh(wn,qt):b(d[j],qt,_)))continue e}Qe&&Qe.push(qt),ye.push(Mt)}}return ye}function xa(d,f,_){var b=null==(d=tv(d,f=Bc(f,d)))?d:d[hn(Zo(f))];return null==b?F:Or(b,d,_)}function dA(d){return nr(d)&&is(d)==ri}function $p(d,f,_,b,M){return d===f||(null==d||null==f||!nr(d)&&!nr(f)?d!=d&&f!=f:function(d,f,_,b,M,P){var j=Ht(d),H=Ht(f),Z=j?Ps:Es(d),ye=H?Ps:Es(f),be=(Z=Z==ri?cr:Z)==cr,Te=(ye=ye==ri?cr:ye)==cr,Qe=Z==ye;if(Qe&&cl(d)){if(!cl(f))return!1;j=!0,be=!1}if(Qe&&!be)return P||(P=new Ta),j||gf(d)?tg(d,f,_,b,M,P):function(d,f,_,b,M,P,j){switch(_){case Wa:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case Dl:return!(d.byteLength!=f.byteLength||!P(new Fd(d),new Fd(f)));case In:case dt:case Qr:return kt(+d,+f);case Vi:return d.name==f.name&&d.message==f.message;case gs:case mi:return d==f+"";case ji:var H=I0;case Hr:if(H||(H=y_),d.size!=f.size&&!(1&b))return!1;var ye=j.get(d);if(ye)return ye==f;b|=2,j.set(d,f);var be=tg(H(d),H(f),b,M,P,j);return j.delete(d),be;case Ec:if(Ld)return Ld.call(d)==Ld.call(f)}return!1}(d,f,Z,_,b,M,P);if(!(1&_)){var Mt=be&&bi.call(d,"__wrapped__"),qt=Te&&bi.call(f,"__wrapped__");if(Mt||qt){var wn=Mt?d.value():d,Zt=qt?f.value():f;return P||(P=new Ta),M(wn,Zt,_,b,P)}}return!!Qe&&(P||(P=new Ta),function(d,f,_,b,M,P){var j=1&_,H=$l(d),Z=H.length;if(Z!=$l(f).length&&!j)return!1;for(var Te=Z;Te--;){var Qe=H[Te];if(!(j?Qe in f:bi.call(f,Qe)))return!1}var Mt=P.get(d),qt=P.get(f);if(Mt&&qt)return Mt==f&&qt==d;var wn=!0;P.set(d,f),P.set(f,d);for(var Zt=j;++Te<Z;){var Cn=d[Qe=H[Te]],Vn=f[Qe];if(b)var to=j?b(Vn,Cn,Qe,f,d,P):b(Cn,Vn,Qe,d,f,P);if(!(to===F?Cn===Vn||M(Cn,Vn,_,b,P):to)){wn=!1;break}Zt||(Zt="constructor"==Qe)}if(wn&&!Zt){var Ms=d.constructor,na=f.constructor;Ms!=na&&"constructor"in d&&"constructor"in f&&!("function"==typeof Ms&&Ms instanceof Ms&&"function"==typeof na&&na instanceof na)&&(wn=!1)}return P.delete(d),P.delete(f),wn}(d,f,_,b,M,P))}(d,f,_,b,$p,M))}function V_(d,f,_,b){var M=_.length,P=M,j=!b;if(null==d)return!P;for(d=yi(d);M--;){var H=_[M];if(j&&H[2]?H[1]!==d[H[0]]:!(H[0]in d))return!1}for(;++M<P;){var Z=(H=_[M])[0],ye=d[Z],be=H[1];if(j&&H[2]){if(ye===F&&!(Z in d))return!1}else{var Te=new Ta;if(b)var Qe=b(ye,be,Z,d,f,Te);if(!(Qe===F?$p(be,ye,3,b,Te):Qe))return!1}}return!0}function j_(d){return!(!tr(d)||function(d){return!!$h&&$h in d}(d))&&(ea(d)?kd:Ki).test(Uu(d))}function pA(d){return"function"==typeof d?d:null==d?Bs:"object"==typeof d?Ht(d)?Gd(d[0],d[1]):mA(d):Wu(d)}function G0(d){if(!rg(d))return Qa(d);var f=[];for(var _ in yi(d))bi.call(d,_)&&"constructor"!=_&&f.push(_);return f}function W0(d,f){return d<f}function gA(d,f){var _=-1,b=Js(d)?oe(d.length):[];return kc(d,function(M,P,j){b[++_]=f(M,P,j)}),b}function mA(d){var f=Xo(d);return 1==f.length&&f[0][2]?OA(f[0][0],f[0][1]):function(_){return _===d||V_(_,d,f)}}function Gd(d,f){return Ko(d)&&DA(f)?OA(hn(d),f):function(_){var b=vf(_,d);return b===F&&b===f?vg(_,d):$p(f,b,3)}}function z_(d,f,_,b,M){d!==f&&jd(f,function(P,j){if(M||(M=new Ta),tr(P))!function(d,f,_,b,M,P,j){var H=nv(d,_),Z=nv(f,_),ye=j.get(Z);if(ye)k_(d,_,ye);else{var be=P?P(H,Z,_+"",d,f,j):F,Te=be===F;if(Te){var Qe=Ht(Z),Mt=!Qe&&cl(Z),qt=!Qe&&!Mt&&gf(Z);be=Z,Qe||Mt||qt?Ht(H)?be=H:er(H)?be=Fs(H):Mt?(Te=!1,be=Xp(Z,!0)):qt?(Te=!1,be=W_(Z,!0)):be=[]:_g(Z)||ll(Z)?(be=H,ll(H)?be=tC(H):(!tr(H)||ea(H))&&(be=cw(Z))):Te=!1}Te&&(j.set(Z,be),M(be,Z,b,P,j),j.delete(Z)),k_(d,_,be)}}(d,f,j,_,z_,b,M);else{var H=b?b(nv(d,j),P,j+"",d,f,M):F;H===F&&(H=P),k_(d,j,H)}},Ls)}function ku(d,f){var _=d.length;if(_)return Mo(f+=f<0?_:0,_)?d[f]:F}function rf(d,f,_){f=f.length?vi(f,function(P){return Ht(P)?function(j){return Wo(j,1===P.length?P[0]:P)}:P}):[Bs];var b=-1;return f=vi(f,Go(Gt())),function(q,ge){var oe=q.length;for(q.sort(function(P,j){return function(d,f,_){for(var b=-1,M=d.criteria,P=f.criteria,j=M.length,H=_.length;++b<j;){var Z=Vc(M[b],P[b]);if(Z)return b>=H?Z:Z*("desc"==_[b]?-1:1)}return d.index-f.index}(P,j,_)});oe--;)q[oe]=q[oe].value;return q}(gA(d,function(P,j,H){return{criteria:vi(f,function(ye){return ye(P)}),index:++b,value:P}}))}function q0(d,f,_){for(var b=-1,M=f.length,P={};++b<M;){var j=f[b],H=Wo(d,j);_(H,j)&&Wp(P,Bc(j,d),H)}return P}function Yo(d,f,_,b){var M=b?Op:Ka,P=-1,j=f.length,H=d;for(d===f&&(f=Fs(f)),_&&(H=vi(d,Go(_)));++P<j;)for(var Z=0,ye=f[P],be=_?_(ye):ye;(Z=M(H,be,Z,b))>-1;)H!==d&&Kt.call(H,Z,1),Kt.call(d,Z,1);return d}function sf(d,f){for(var _=d?f.length:0,b=_-1;_--;){var M=f[_];if(_==b||M!==P){var P=M;Mo(M)?Kt.call(d,M,1):Fu(d,M)}}return d}function jl(d,f){return d+Pn(qh()*(f-d+1))}function Gp(d,f){var _="";if(!d||f<1||f>De)return _;do{f%2&&(_+=d),(f=Pn(f/2))&&(d+=d)}while(f);return _}function bn(d,f){return sg(IA(d,f,Bs),d+"")}function _A(d){return R_(ah(d))}function fN(d,f){var _=ah(d);return Qd(_,Pu(f,0,_.length))}function Wp(d,f,_,b){if(!tr(d))return d;for(var M=-1,P=(f=Bc(f,d)).length,j=P-1,H=d;null!=H&&++M<P;){var Z=hn(f[M]),ye=_;if("__proto__"===Z||"constructor"===Z||"prototype"===Z)return d;if(M!=j){var be=H[Z];(ye=b?b(be,Z,H):F)===F&&(ye=tr(be)?be:Mo(f[M+1])?[]:{})}el(H,Z,ye),H=H[Z]}return d}var U_=Xh?function(d,f){return Xh.set(d,f),d}:Bs,Eo=Rp?function(d,f){return Rp(d,"toString",{configurable:!0,enumerable:!1,value:$v(f),writable:!0})}:Bs;function H_(d){return Qd(ah(d))}function rs(d,f,_){var b=-1,M=d.length;f<0&&(f=-f>M?0:M+f),(_=_>M?M:_)<0&&(_+=M),M=f>_?0:_-f>>>0,f>>>=0;for(var P=oe(M);++b<M;)P[b]=d[b+f];return P}function pN(d,f){var _;return kc(d,function(b,M,P){return!(_=f(b,M,P))}),!!_}function of(d,f,_){var b=0,M=null==d?b:d.length;if("number"==typeof f&&f==f&&M<=2147483647){for(;b<M;){var P=b+M>>>1,j=d[P];null!==j&&!ta(j)&&(_?j<=f:j<f)?b=P+1:M=P}return M}return $_(d,f,Bs,_)}function $_(d,f,_,b){var M=0,P=null==d?0:d.length;if(0===P)return 0;for(var j=(f=_(f))!=f,H=null===f,Z=ta(f),ye=f===F;M<P;){var be=Pn((M+P)/2),Te=_(d[be]),Qe=Te!==F,Mt=null===Te,qt=Te==Te,wn=ta(Te);if(j)var Zt=b||qt;else Zt=ye?qt&&(b||Qe):H?qt&&Qe&&(b||!Mt):Z?qt&&Qe&&!Mt&&(b||!wn):!Mt&&!wn&&(b?Te<=f:Te<f);Zt?M=be+1:P=be}return $r(P,4294967294)}function Y0(d,f){for(var _=-1,b=d.length,M=0,P=[];++_<b;){var j=d[_],H=f?f(j):j;if(!_||!kt(H,Z)){var Z=H;P[M++]=0===j?0:j}}return P}function X0(d){return"number"==typeof d?d:ta(d)?NaN:+d}function So(d){if("string"==typeof d)return d;if(Ht(d))return vi(d,So)+"";if(ta(d))return Kh?Kh.call(d):"";var f=d+"";return"0"==f&&1/d==-ce?"-0":f}function Nc(d,f,_){var b=-1,M=Ll,P=d.length,j=!0,H=[],Z=H;if(_)j=!1,M=Bh;else if(P>=200){var ye=f?null:Y_(d);if(ye)return y_(ye);j=!1,M=jh,Z=new Aa}else Z=f?[]:H;e:for(;++b<P;){var be=d[b],Te=f?f(be):be;if(be=_||0!==be?be:0,j&&Te==Te){for(var Qe=Z.length;Qe--;)if(Z[Qe]===Te)continue e;f&&Z.push(Te),H.push(be)}else M(Z,Te,_)||(Z!==H&&Z.push(Te),H.push(be))}return H}function Fu(d,f){return null==(d=tv(d,f=Bc(f,d)))||delete d[hn(Zo(f))]}function qp(d,f,_,b){return Wp(d,f,_(Wo(d,f)),b)}function Nu(d,f,_,b){for(var M=d.length,P=b?M:-1;(b?P--:++P<M)&&f(d[P],P,d););return _?rs(d,b?0:P,b?P+1:M):rs(d,b?P+1:0,b?M:P)}function vA(d,f){var _=d;return _ instanceof yn&&(_=_.value()),Tu(f,function(b,M){return M.func.apply(M.thisArg,_r([b],M.args))},_)}function Lu(d,f,_){var b=d.length;if(b<2)return b?Nc(d[0]):[];for(var M=-1,P=oe(b);++M<b;)for(var j=d[M],H=-1;++H<b;)H!=M&&(P[M]=Rc(P[M]||j,d[H],f,_));return Nc(ns(P,1),f,_)}function Yp(d,f,_){for(var b=-1,M=d.length,P=f.length,j={};++b<M;)_(j,d[b],b<P?f[b]:F);return j}function Lc(d){return er(d)?d:[]}function G_(d){return"function"==typeof d?d:Bs}function Bc(d,f){return Ht(d)?d:Ko(d,f)?[d]:fw(ai(d))}var yA=bn;function il(d,f,_){var b=d.length;return _=_===F?b:_,!f&&_>=b?d:rs(d,f,_)}var bA=F0||function(d){return si.clearTimeout(d)};function Xp(d,f){if(f)return d.slice();var _=d.length,b=k0?k0(_):new d.constructor(_);return d.copy(b),b}function Bu(d){var f=new d.constructor(d.byteLength);return new Fd(f).set(new Fd(d)),f}function W_(d,f){var _=f?Bu(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function Vc(d,f){if(d!==f){var _=d!==F,b=null===d,M=d==d,P=ta(d),j=f!==F,H=null===f,Z=f==f,ye=ta(f);if(!H&&!ye&&!P&&d>f||P&&j&&Z&&!H&&!ye||b&&j&&Z||!_&&Z||!M)return 1;if(!b&&!P&&!ye&&d<f||ye&&_&&M&&!b&&!P||H&&_&&M||!j&&M||!Z)return-1}return 0}function qd(d,f,_,b){for(var M=-1,P=d.length,j=_.length,H=-1,Z=f.length,ye=vr(P-j,0),be=oe(Z+ye),Te=!b;++H<Z;)be[H]=f[H];for(;++M<j;)(Te||M<P)&&(be[_[M]]=d[M]);for(;ye--;)be[H++]=d[M++];return be}function K0(d,f,_,b){for(var M=-1,P=d.length,j=-1,H=_.length,Z=-1,ye=f.length,be=vr(P-H,0),Te=oe(be+ye),Qe=!b;++M<be;)Te[M]=d[M];for(var Mt=M;++Z<ye;)Te[Mt+Z]=f[Z];for(;++j<H;)(Qe||M<P)&&(Te[Mt+_[j]]=d[M++]);return Te}function Fs(d,f){var _=-1,b=d.length;for(f||(f=oe(b));++_<b;)f[_]=d[_];return f}function Da(d,f,_,b){var M=!_;_||(_={});for(var P=-1,j=f.length;++P<j;){var H=f[P],Z=b?b(_[H],d[H],H,_,d):F;Z===F&&(Z=d[H]),M?tl(_,H,Z):el(_,H,Z)}return _}function Sr(d,f){return function(_,b){var M=Ht(_)?mr:zp,P=f?f():{};return M(_,d,Gt(b,2),P)}}function zl(d){return bn(function(f,_){var b=-1,M=_.length,P=M>1?_[M-1]:F,j=M>2?_[2]:F;for(P=d.length>3&&"function"==typeof P?(M--,P):F,j&&Ss(_[0],_[1],j)&&(P=M<3?F:P,M=1),f=yi(f);++b<M;){var H=_[b];H&&d(f,H,b,P)}return f})}function rl(d,f){return function(_,b){if(null==_)return _;if(!Js(_))return d(_,b);for(var M=_.length,P=f?M:-1,j=yi(_);(f?P--:++P<M)&&!1!==b(j[P],P,j););return _}}function Z0(d){return function(f,_,b){for(var M=-1,P=yi(f),j=b(f),H=j.length;H--;){var Z=j[d?H:++M];if(!1===_(P[Z],Z,P))break}return f}}function Kp(d){return function(f){var _=zh(f=ai(f))?Za(f):F,b=_?_[0]:f.charAt(0),M=_?il(_,1).join(""):f.slice(1);return b[d]()+M}}function Ul(d){return function(f){return Tu(Uv(Fv(f).replace(Dp,"")),d,"")}}function Xd(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=Iu(d.prototype),b=d.apply(_,f);return tr(b)?b:_}}function J0(d){return function(f,_,b){var M=yi(f);if(!Js(f)){var P=Gt(_,3);f=os(f),_=function(H){return P(M[H],H,M)}}var j=d(f,_,b);return j>-1?M[P?f[j]:j]:F}}function ju(d){return sl(function(f){var _=f.length,b=_,M=Co.prototype.thru;for(d&&f.reverse();b--;){var P=f[b];if("function"!=typeof P)throw new Ea(Jt);if(M&&!j&&"wrapper"==ng(P))var j=new Co([],!0)}for(b=j?b:_;++b<_;){var H=ng(P=f[b]),Z="wrapper"==H?K_(P):F;j=Z&&ig(Z[0])&&424==Z[1]&&!Z[4].length&&1==Z[9]?j[ng(Z[0])].apply(j,Z[3]):1==P.length&&ig(P)?j[H]():j.thru(P)}return function(){var ye=arguments,be=ye[0];if(j&&1==ye.length&&Ht(be))return j.plant(be).value();for(var Te=0,Qe=_?f[Te].apply(this,ye):be;++Te<_;)Qe=f[Te].call(this,Qe);return Qe}})}function jc(d,f,_,b,M,P,j,H,Z,ye){var be=128&f,Te=1&f,Qe=2&f,Mt=24&f,qt=512&f,wn=Qe?F:Xd(d);return function Zt(){for(var Cn=arguments.length,Vn=oe(Cn),to=Cn;to--;)Vn[to]=arguments[to];if(Mt)var Ms=Zd(Zt),na=YF(Vn,Ms);if(b&&(Vn=qd(Vn,b,M,Mt)),P&&(Vn=K0(Vn,P,j,Mt)),Cn-=na,Mt&&Cn<ye){var li=xu(Vn,Ms);return nw(d,f,jc,Zt.placeholder,_,Vn,li,H,Z,ye-Cn)}var hl=Te?_:this,Gc=Qe?hl[d]:d;return Cn=Vn.length,H?Vn=PA(Vn,H):qt&&Cn>1&&Vn.reverse(),be&&Z<Cn&&(Vn.length=Z),this&&this!==si&&this instanceof Zt&&(Gc=wn||Xd(Gc)),Gc.apply(hl,Vn)}}function ew(d,f){return function(_,b){return function(d,f,_,b){return nl(d,function(M,P,j){f(b,_(M),P,j)}),b}(_,d,f(b),{})}}function q_(d,f){return function(_,b){var M;if(_===F&&b===F)return f;if(_!==F&&(M=_),b!==F){if(M===F)return b;"string"==typeof _||"string"==typeof b?(_=So(_),b=So(b)):(_=X0(_),b=X0(b)),M=d(_,b)}return M}}function Zp(d){return sl(function(f){return f=vi(f,Go(Gt())),bn(function(_){var b=this;return d(f,function(M){return Or(M,b,_)})})})}function Qp(d,f){var _=(f=f===F?" ":So(f)).length;if(_<2)return _?Gp(f,d):f;var b=Gp(f,Me(d/Uh(f)));return zh(f)?il(Za(b),0,d).join(""):b.slice(0,d)}function tw(d){return function(f,_,b){return b&&"number"!=typeof b&&Ss(f,_,b)&&(_=b=F),f=ul(f),_===F?(_=f,f=0):_=ul(_),function(d,f,_,b){for(var M=-1,P=vr(Me((f-d)/(_||1)),0),j=oe(P);P--;)j[b?P:++M]=d,d+=_;return j}(f,_,b=b===F?f<_?1:-1:ul(b),d)}}function Jp(d){return function(f,_){return"string"==typeof f&&"string"==typeof _||(f=eo(f),_=eo(_)),d(f,_)}}function nw(d,f,_,b,M,P,j,H,Z,ye){var be=8&f;f|=be?32:64,4&(f&=~(be?64:32))||(f&=-4);var wn=[d,f,M,be?P:F,be?j:F,be?F:P,be?F:j,H,Z,ye],Zt=_.apply(F,wn);return ig(d)&&hw(Zt,wn),Zt.placeholder=b,cf(Zt,d,f)}function Kd(d){var f=Er[d];return function(_,b){if(_=eo(_),(b=null==b?0:$r(ln(b),292))&&A_(_)){var M=(ai(_)+"e").split("e");return+((M=(ai(f(M[0]+"e"+(+M[1]+b)))+"e").split("e"))[0]+"e"+(+M[1]-b))}return f(_)}}var Y_=Ma&&1/y_(new Ma([,-0]))[1]==ce?function(d){return new Ma(d)}:qv;function zu(d){return function(f){var _=Es(f);return _==ji?I0(f):_==Hr?function(q){var ge=-1,oe=Array(q.size);return q.forEach(function(at){oe[++ge]=[at,at]}),oe}(f):function(q,ge){return vi(ge,function(oe){return[oe,q[oe]]})}(f,d(f))}}function Hl(d,f,_,b,M,P,j,H){var Z=2&f;if(!Z&&"function"!=typeof d)throw new Ea(Jt);var ye=b?b.length:0;if(ye||(f&=-97,b=M=F),j=j===F?j:vr(ln(j),0),H=H===F?H:ln(H),ye-=M?M.length:0,64&f){var be=b,Te=M;b=M=F}var Qe=Z?F:K_(d),Mt=[d,f,_,b,M,be,Te,P,j,H];if(Qe&&function(d,f){var _=d[1],b=f[1],M=_|b;if(!(M<131||(128==b&&8==_||128==b&&256==_&&d[7].length<=f[8]||384==b&&f[7].length<=f[8]&&8==_)))return d;1&b&&(d[2]=f[2],M|=1&_?0:4);var H=f[3];if(H){var Z=d[3];d[3]=Z?qd(Z,H,f[4]):H,d[4]=Z?xu(d[3],Ne):f[4]}(H=f[5])&&(d[5]=(Z=d[5])?K0(Z,H,f[6]):H,d[6]=Z?xu(d[5],Ne):f[6]),(H=f[7])&&(d[7]=H),128&b&&(d[8]=null==d[8]?f[8]:$r(d[8],f[8])),null==d[9]&&(d[9]=f[9]),d[0]=f[0],d[1]=M}(Mt,Qe),d=Mt[0],f=Mt[1],_=Mt[2],b=Mt[3],M=Mt[4],!(H=Mt[9]=Mt[9]===F?Z?0:d.length:vr(Mt[9]-ye,0))&&24&f&&(f&=-25),f&&1!=f)qt=8==f||16==f?function(d,f,_){var b=Xd(d);return function M(){for(var P=arguments.length,j=oe(P),H=P,Z=Zd(M);H--;)j[H]=arguments[H];var ye=P<3&&j[0]!==Z&&j[P-1]!==Z?[]:xu(j,Z);return(P-=ye.length)<_?nw(d,f,jc,M.placeholder,F,j,ye,F,F,_-P):Or(this&&this!==si&&this instanceof M?b:d,this,j)}}(d,f,H):32!=f&&33!=f||M.length?jc.apply(F,Mt):function(d,f,_,b){var M=1&f,P=Xd(d);return function j(){for(var H=-1,Z=arguments.length,ye=-1,be=b.length,Te=oe(be+Z),Qe=this&&this!==si&&this instanceof j?P:d;++ye<be;)Te[ye]=b[ye];for(;Z--;)Te[ye++]=arguments[++H];return Or(Qe,M?_:this,Te)}}(d,f,_,b);else var qt=function(d,f,_){var b=1&f,M=Xd(d);return function P(){return(this&&this!==si&&this instanceof P?M:d).apply(b?_:this,arguments)}}(d,f,_);return cf((Qe?U_:hw)(qt,Mt),d,f)}function iw(d,f,_,b){return d===F||kt(d,Du[_])&&!bi.call(b,_)?f:d}function EA(d,f,_,b,M,P){return tr(d)&&tr(f)&&(P.set(f,d),z_(d,f,F,EA,P),P.delete(f)),d}function eg(d){return _g(d)?F:d}function tg(d,f,_,b,M,P){var j=1&_,H=d.length,Z=f.length;if(H!=Z&&!(j&&Z>H))return!1;var ye=P.get(d),be=P.get(f);if(ye&&be)return ye==f&&be==d;var Te=-1,Qe=!0,Mt=2&_?new Aa:F;for(P.set(d,f),P.set(f,d);++Te<H;){var qt=d[Te],wn=f[Te];if(b)var Zt=j?b(wn,qt,Te,f,d,P):b(qt,wn,Te,d,f,P);if(Zt!==F){if(Zt)continue;Qe=!1;break}if(Mt){if(!bo(f,function(Cn,Vn){if(!jh(Mt,Vn)&&(qt===Cn||M(qt,Cn,_,b,P)))return Mt.push(Vn)})){Qe=!1;break}}else if(qt!==wn&&!M(qt,wn,_,b,P)){Qe=!1;break}}return P.delete(d),P.delete(f),Qe}function sl(d){return sg(IA(d,F,ss),d+"")}function $l(d){return qn(d,os,Z_)}function X_(d){return qn(d,Ls,ow)}var K_=Xh?function(d){return Xh.get(d)}:qv;function ng(d){for(var f=d.name+"",_=Nd[f],b=bi.call(Nd,f)?_.length:0;b--;){var M=_[b],P=M.func;if(null==P||P==d)return M.name}return f}function Zd(d){return(bi.call(O,"placeholder")?O:d).placeholder}function Gt(){var d=O.iteratee||Gu;return d=d===Gu?pA:d,arguments.length?d(arguments[0],arguments[1]):d}function Cs(d,f){var _=d.__data__;return function(d){var f=typeof d;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==d:null===d}(f)?_["string"==typeof f?"string":"hash"]:_.map}function Xo(d){for(var f=os(d),_=f.length;_--;){var b=f[_],M=d[b];f[_]=[b,M,DA(M)]}return f}function zc(d,f){var _=function(q,ge){return null==q?F:q[ge]}(d,f);return j_(_)?_:F}var Z_=Zn?function(d){return null==d?[]:(d=yi(d),wa(Zn(d),function(f){return Pp.call(d,f)}))}:$c,ow=Zn?function(d){for(var f=[];d;)_r(f,Z_(d)),d=Sa(d);return f}:$c,Es=is;function lw(d,f,_){for(var b=-1,M=(f=Bc(f,d)).length,P=!1;++b<M;){var j=hn(f[b]);if(!(P=null!=d&&_(d,j)))break;d=d[j]}return P||++b!=M?P:!!(M=null==d?0:d.length)&&Av(M)&&Mo(j,M)&&(Ht(d)||ll(d))}function cw(d){return"function"!=typeof d.constructor||rg(d)?{}:Iu(Sa(d))}function xA(d){return Ht(d)||ll(d)||!!(KM&&d&&d[KM])}function Mo(d,f){var _=typeof d;return!!(f=null==f?De:f)&&("number"==_||"symbol"!=_&&Ti.test(d))&&d>-1&&d%1==0&&d<f}function Ss(d,f,_){if(!tr(_))return!1;var b=typeof f;return!!("number"==b?Js(_)&&Mo(f,_.length):"string"==b&&f in _)&&kt(_[f],d)}function Ko(d,f){if(Ht(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!ta(d))||T.test(d)||!ee.test(d)||null!=f&&d in yi(f)}function ig(d){var f=ng(d),_=O[f];if("function"!=typeof _||!(f in yn.prototype))return!1;if(d===_)return!0;var b=K_(_);return!!b&&d===b[0]}(ts&&Es(new ts(new ArrayBuffer(1)))!=Wa||Zs&&Es(new Zs)!=ji||Fp&&Es(Fp.resolve())!=go||Ma&&Es(new Ma)!=Hr||wo&&Es(new wo)!=_i)&&(Es=function(d){var f=is(d),_=f==cr?d.constructor:F,b=_?Uu(_):"";if(b)switch(b){case eA:return Wa;case T_:return ji;case x_:return go;case N0:return Hr;case D_:return _i}return f});var dw=Ip?ea:Xv;function rg(d){var f=d&&d.constructor;return d===("function"==typeof f&&f.prototype||Du)}function DA(d){return d==d&&!tr(d)}function OA(d,f){return function(_){return null!=_&&_[d]===f&&(f!==F||d in yi(_))}}function IA(d,f,_){return f=vr(f===F?d.length-1:f,0),function(){for(var b=arguments,M=-1,P=vr(b.length-f,0),j=oe(P);++M<P;)j[M]=b[f+M];M=-1;for(var H=oe(f+1);++M<f;)H[M]=b[M];return H[f]=_(j),Or(d,this,H)}}function tv(d,f){return f.length<2?d:Wo(d,rs(f,0,-1))}function PA(d,f){for(var _=d.length,b=$r(f.length,_),M=Fs(d);b--;){var P=f[b];d[b]=Mo(P,_)?M[P]:F}return d}function nv(d,f){if(("constructor"!==f||"function"!=typeof d[f])&&"__proto__"!=f)return d[f]}var hw=iv(U_),lf=QM||function(d,f){return si.setTimeout(d,f)},sg=iv(Eo);function cf(d,f,_){var b=f+"";return sg(d,function(d,f){var _=f.length;if(!_)return d;var b=_-1;return f[b]=(_>1?"& ":"")+f[b],f=f.join(_>2?", ":" "),d.replace(fe,"{\n/* [wrapped with "+f+"] */\n")}(b,function(d,f){return vs(Ur,function(_){var b="_."+_[0];f&_[1]&&!Ll(d,b)&&d.push(b)}),d.sort()}(function(d){var f=d.match(me);return f?f[1].split(We):[]}(b),_)))}function iv(d){var f=0,_=0;return function(){var b=rN(),M=16-(b-_);if(_=b,M>0){if(++f>=800)return arguments[0]}else f=0;return d.apply(F,arguments)}}function Qd(d,f){var _=-1,b=d.length,M=b-1;for(f=f===F?b:f;++_<f;){var P=jl(_,M),j=d[P];d[P]=d[_],d[_]=j}return d.length=f,d}var f,_,fw=(f=pf(function(d){var f=[];return 46===d.charCodeAt(0)&&f.push(""),d.replace(D,function(_,b,M,P){f.push(M?P.replace(Xt,"$1"):b||_)}),f},function(b){return 500===_.size&&_.clear(),b}),_=f.cache,f);function hn(d){if("string"==typeof d||ta(d))return d;var f=d+"";return"0"==f&&1/d==-ce?"-0":f}function Uu(d){if(null!=d){try{return Ji.call(d)}catch(f){}try{return d+""}catch(f){}}return""}function og(d){if(d instanceof yn)return d.clone();var f=new Co(d.__wrapped__,d.__chain__);return f.__actions__=Fs(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}var NA=bn(function(d,f){return er(d)?Rc(d,ns(f,1,er,!0)):[]}),LA=bn(function(d,f){var _=Zo(f);return er(_)&&(_=F),er(d)?Rc(d,ns(f,1,er,!0),Gt(_,2)):[]}),BA=bn(function(d,f){var _=Zo(f);return er(_)&&(_=F),er(d)?Rc(d,ns(f,1,er,!0),F,_):[]});function sv(d,f,_){var b=null==d?0:d.length;if(!b)return-1;var M=null==_?0:ln(_);return M<0&&(M=vr(b+M,0)),Id(d,Gt(f,3),M)}function ov(d,f,_){var b=null==d?0:d.length;if(!b)return-1;var M=b-1;return _!==F&&(M=ln(_),M=_<0?vr(b+M,0):$r(M,b-1)),Id(d,Gt(f,3),M,!0)}function ss(d){return null!=d&&d.length?ns(d,1):[]}function gw(d){return d&&d.length?d[0]:F}var _w=bn(function(d){var f=vi(d,Lc);return f.length&&f[0]===d[0]?Ru(f):[]}),zA=bn(function(d){var f=Zo(d),_=vi(d,Lc);return f===Zo(_)?f=F:_.pop(),_.length&&_[0]===d[0]?Ru(_,Gt(f,2)):[]}),vw=bn(function(d){var f=Zo(d),_=vi(d,Lc);return(f="function"==typeof f?f:F)&&_.pop(),_.length&&_[0]===d[0]?Ru(_,F,f):[]});function Zo(d){var f=null==d?0:d.length;return f?d[f-1]:F}var lv=bn(cv);function cv(d,f){return d&&d.length&&f&&f.length?Yo(d,f):d}var bw=sl(function(d,f){var _=null==d?0:d.length,b=F_(d,f);return sf(d,vi(f,function(M){return Mo(M,_)?+M:M}).sort(Vc)),b});function uv(d){return null==d?d:kp.call(d)}var Ew=bn(function(d){return Nc(ns(d,1,er,!0))}),dv=bn(function(d){var f=Zo(d);return er(f)&&(f=F),Nc(ns(d,1,er,!0),Gt(f,2))}),cg=bn(function(d){var f=Zo(d);return f="function"==typeof f?f:F,Nc(ns(d,1,er,!0),F,f)});function Sw(d){if(!d||!d.length)return[];var f=0;return d=wa(d,function(_){if(er(_))return f=vr(_.length,f),!0}),Rd(f,function(_){return vi(d,m_(_))})}function eT(d,f){if(!d||!d.length)return[];var _=Sw(d);return null==f?_:vi(_,function(b){return Or(f,F,b)})}var Mw=bn(function(d,f){return er(d)?Rc(d,f):[]}),EN=bn(function(d){return Lu(wa(d,er))}),Ao=bn(function(d){var f=Zo(d);return er(f)&&(f=F),Lu(wa(d,er),Gt(f,2))}),hv=bn(function(d){var f=Zo(d);return f="function"==typeof f?f:F,Lu(wa(d,er),F,f)}),fv=bn(Sw),hf=bn(function(d){var f=d.length,_=f>1?d[f-1]:F;return _="function"==typeof _?(d.pop(),_):F,eT(d,_)});function pv(d){var f=O(d);return f.__chain__=!0,f}function eh(d,f){return f(d)}var gv=sl(function(d){var f=d.length,_=f?d[0]:0,b=this.__wrapped__,M=function(P){return F_(P,d)};return!(f>1||this.__actions__.length)&&b instanceof yn&&Mo(_)?((b=b.slice(_,+_+(f?1:0))).__actions__.push({func:eh,args:[M],thisArg:F}),new Co(b,this.__chain__).thru(function(P){return f&&!P.length&&P.push(F),P})):this.thru(M)}),iT=Sr(function(d,f,_){bi.call(d,_)?++d[_]:tl(d,_,1)}),oT=J0(sv),aT=J0(ov);function yv(d,f){return(Ht(d)?vs:kc)(d,Gt(f,3))}function ug(d,f){return(Ht(d)?Dd:L_)(d,Gt(f,3))}var cT=Sr(function(d,f,_){bi.call(d,_)?d[_].push(f):tl(d,_,[f])}),Iw=bn(function(d,f,_){var b=-1,M="function"==typeof f,P=Js(d)?oe(d.length):[];return kc(d,function(j){P[++b]=M?Or(f,j,_):xa(j,f,_)}),P}),Pw=Sr(function(d,f,_){tl(d,_,f)});function al(d,f){return(Ht(d)?vi:gA)(d,Gt(f,3))}var kw=Sr(function(d,f,_){d[_?0:1].push(f)},function(){return[[],[]]}),hg=bn(function(d,f){if(null==d)return[];var _=f.length;return _>1&&Ss(d,f[0],f[1])?f=[]:_>2&&Ss(f[0],f[1],f[2])&&(f=[f[0]]),rf(d,ns(f,1),[])}),Hu=ZM||function(){return si.Date.now()};function fg(d,f,_){return f=_?F:f,Hl(d,128,F,F,F,F,f=d&&null==f?d.length:f)}function wv(d,f){var _;if("function"!=typeof f)throw new Ea(Jt);return d=ln(d),function(){return--d>0&&(_=f.apply(this,arguments)),d<=1&&(f=F),_}}var ff=bn(function(d,f,_){var b=1;if(_.length){var M=xu(_,Zd(ff));b|=32}return Hl(d,b,f,_,M)}),nh=bn(function(d,f,_){var b=3;if(_.length){var M=xu(_,Zd(nh));b|=32}return Hl(f,b,d,_,M)});function zw(d,f,_){var b,M,P,j,H,Z,ye=0,be=!1,Te=!1,Qe=!0;if("function"!=typeof d)throw new Ea(Jt);function Mt(li){var hl=b,Gc=M;return b=M=F,ye=li,j=d.apply(Gc,hl)}function qt(li){return ye=li,H=lf(Cn,f),be?Mt(li):j}function Zt(li){var hl=li-Z;return Z===F||hl>=f||hl<0||Te&&li-ye>=P}function Cn(){var li=Hu();if(Zt(li))return Vn(li);H=lf(Cn,function(li){var vx=f-(li-Z);return Te?$r(vx,P-(li-ye)):vx}(li))}function Vn(li){return H=F,Qe&&b?Mt(li):(b=M=F,j)}function na(){var li=Hu(),hl=Zt(li);if(b=arguments,M=this,Z=li,hl){if(H===F)return qt(Z);if(Te)return bA(H),H=lf(Cn,f),Mt(Z)}return H===F&&(H=lf(Cn,f)),j}return f=eo(f)||0,tr(_)&&(be=!!_.leading,P=(Te="maxWait"in _)?vr(eo(_.maxWait)||0,f):P,Qe="trailing"in _?!!_.trailing:Qe),na.cancel=function(){H!==F&&bA(H),ye=0,b=Z=M=H=F},na.flush=function(){return H===F?j:Vn(Hu())},na}var fT=bn(function(d,f){return ef(d,1,f)}),Uw=bn(function(d,f,_){return ef(d,eo(f)||0,_)});function pf(d,f){if("function"!=typeof d||null!=f&&"function"!=typeof f)throw new Ea(Jt);var _=function(){var b=arguments,M=f?f.apply(this,b):b[0],P=_.cache;if(P.has(M))return P.get(M);var j=d.apply(this,b);return _.cache=P.set(M,j)||P,j};return _.cache=new(pf.Cache||Ja),_}function Sv(d){if("function"!=typeof d)throw new Ea(Jt);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}pf.Cache=Ja;var pT=yA(function(d,f){var _=(f=1==f.length&&Ht(f[0])?vi(f[0],Go(Gt())):vi(ns(f,1),Go(Gt()))).length;return bn(function(b){for(var M=-1,P=$r(b.length,_);++M<P;)b[M]=f[M].call(this,b[M]);return Or(d,this,b)})}),pg=bn(function(d,f){var _=xu(f,Zd(pg));return Hl(d,32,F,f,_)}),$w=bn(function(d,f){var _=xu(f,Zd($w));return Hl(d,64,F,f,_)}),gT=sl(function(d,f){return Hl(d,256,F,F,F,f)});function kt(d,f){return d===f||d!=d&&f!=f}var X=Jp(ws),qw=Jp(function(d,f){return d>=f}),ll=dA(function(){return arguments}())?dA:function(d){return nr(d)&&bi.call(d,"callee")&&!Pp.call(d,"callee")},Ht=oe.isArray,Yw=Je?Go(Je):function(d){return nr(d)&&is(d)==Dl};function Js(d){return null!=d&&Av(d.length)&&!ea(d)}function er(d){return nr(d)&&Js(d)}var cl=Ir||Xv,Xw=vn?Go(vn):function(d){return nr(d)&&is(d)==dt};function Ia(d){if(!nr(d))return!1;var f=is(d);return f==Vi||"[object DOMException]"==f||"string"==typeof d.message&&"string"==typeof d.name&&!_g(d)}function ea(d){if(!tr(d))return!1;var f=is(d);return f==ma||f==$a||"[object AsyncFunction]"==f||"[object Proxy]"==f}function mg(d){return"number"==typeof d&&d==ln(d)}function Av(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=De}function tr(d){var f=typeof d;return null!=d&&("object"==f||"function"==f)}function nr(d){return null!=d&&"object"==typeof d}var ST=Ri?Go(Ri):function(d){return nr(d)&&Es(d)==ji};function TT(d){return"number"==typeof d||nr(d)&&is(d)==Qr}function _g(d){if(!nr(d)||is(d)!=cr)return!1;var f=Sa(d);if(null===f)return!0;var _=bi.call(f,"constructor")&&f.constructor;return"function"==typeof _&&_ instanceof _&&Ji.call(_)==XM}var Jw=Ks?Go(Ks):function(d){return nr(d)&&is(d)==gs},xT=Dc?Go(Dc):function(d){return nr(d)&&Es(d)==Hr};function xv(d){return"string"==typeof d||!Ht(d)&&nr(d)&&is(d)==mi}function ta(d){return"symbol"==typeof d||nr(d)&&is(d)==Ec}var gf=Dr?Go(Dr):function(d){return nr(d)&&Av(d.length)&&!!Ge[is(d)]},Uc=Jp(W0),Dv=Jp(function(d,f){return d<=f});function eC(d){if(!d)return[];if(Js(d))return xv(d)?Za(d):Fs(d);if(Gh&&d[Gh])return function(q){for(var ge,oe=[];!(ge=q.next()).done;)oe.push(ge.value);return oe}(d[Gh]());var f=Es(d);return(f==ji?I0:f==Hr?y_:ah)(d)}function ul(d){return d?(d=eo(d))===ce||d===-ce?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function ln(d){var f=ul(d),_=f%1;return f==f?_?f-_:f:0}function Ov(d){return d?Pu(ln(d),0,it):0}function eo(d){if("number"==typeof d)return d;if(ta(d))return NaN;if(tr(d)){var f="function"==typeof d.valueOf?d.valueOf():d;d=tr(f)?f+"":f}if("string"!=typeof d)return 0===d?d:+d;d=O0(d);var _=Xi.test(d);return _||fn.test(d)?D0(d.slice(2),_?2:8):hi.test(d)?NaN:+d}function tC(d){return Da(d,Ls(d))}function ai(d){return null==d?"":So(d)}var DT=zl(function(d,f){if(rg(f)||Js(f))Da(f,os(f),d);else for(var _ in f)bi.call(f,_)&&el(d,_,f[_])}),OT=zl(function(d,f){Da(f,Ls(f),d)}),ih=zl(function(d,f,_,b){Da(f,Ls(f),d,b)}),IT=zl(function(d,f,_,b){Da(f,os(f),d,b)}),nC=sl(F_),RT=bn(function(d,f){d=yi(d);var _=-1,b=f.length,M=b>2?f[2]:F;for(M&&Ss(f[0],f[1],M)&&(b=1);++_<b;)for(var P=f[_],j=Ls(P),H=-1,Z=j.length;++H<Z;){var ye=j[H],be=d[ye];(be===F||kt(be,Du[ye])&&!bi.call(d,ye))&&(d[ye]=P[ye])}return d}),mf=bn(function(d){return d.push(F,EA),Or(lC,F,d)});function vf(d,f,_){var b=null==d?F:Wo(d,f);return b===F?_:b}function vg(d,f){return null!=d&&lw(d,f,Hd)}var yg=ew(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=Rs.call(f)),d[f]=_},$v(Bs)),FT=ew(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=Rs.call(f)),bi.call(d,f)?d[f].push(_):d[f]=[_]},Gt),sC=bn(xa);function os(d){return Js(d)?Jh(d):G0(d)}function Ls(d){return Js(d)?Jh(d,!0):function(d){if(!tr(d))return function(d){var f=[];if(null!=d)for(var _ in yi(d))f.push(_);return f}(d);var f=rg(d),_=[];for(var b in d)"constructor"==b&&(f||!bi.call(d,b))||_.push(b);return _}(d)}var aC=zl(function(d,f,_){z_(d,f,_)}),lC=zl(function(d,f,_,b){z_(d,f,_,b)}),LT=sl(function(d,f){var _={};if(null==d)return _;var b=!1;f=vi(f,function(P){return P=Bc(P,d),b||(b=P.length>1),P}),Da(d,X_(d),_),b&&(_=bs(_,7,eg));for(var M=f.length;M--;)Fu(_,f[M]);return _}),BT=sl(function(d,f){return null==d?{}:function(d,f){return q0(d,f,function(_,b){return vg(d,b)})}(d,f)});function cC(d,f){if(null==d)return{};var _=vi(X_(d),function(b){return[b]});return f=Gt(f),q0(d,_,function(b,M){return f(b,M[0])})}var VT=zu(os),dC=zu(Ls);function ah(d){return null==d?[]:v_(d,os(d))}var $T=Ul(function(d,f,_){return f=f.toLowerCase(),d+(_?kv(f):f)});function kv(d){return wg(ai(d).toLowerCase())}function Fv(d){return(d=ai(d))&&d.replace(Ac,XF).replace(p_,"")}var WT=Ul(function(d,f,_){return d+(_?"-":"")+f.toLowerCase()}),qT=Ul(function(d,f,_){return d+(_?" ":"")+f.toLowerCase()}),kN=Kp("toLowerCase"),JT=Ul(function(d,f,_){return d+(_?"_":"")+f.toLowerCase()}),Bv=Ul(function(d,f,_){return d+(_?" ":"")+wg(f)}),_C=Ul(function(d,f,_){return d+(_?" ":"")+f.toUpperCase()}),wg=Kp("toUpperCase");function Uv(d,f,_){return d=ai(d),(f=_?F:f)===F?function(q){return Fl.test(q)}(d)?function(q){return q.match(M0)||[]}(d):function(q){return q.match(rn)||[]}(d):d.match(f)||[]}var Hv=bn(function(d,f){try{return Or(d,F,f)}catch(_){return Ia(_)?_:new Rt(_)}}),vC=sl(function(d,f){return vs(f,function(_){_=hn(_),tl(d,_,ff(d[_],d))}),d});function $v(d){return function(){return d}}var NN=ju(),$u=ju(!0);function Bs(d){return d}function Gu(d){return pA("function"==typeof d?d:bs(d,1))}var Gv=bn(function(d,f){return function(_){return xa(_,d,f)}}),yC=bn(function(d,f){return function(_){return xa(d,_,f)}});function Wv(d,f,_){var b=os(f),M=nf(f,b);null==_&&(!tr(f)||!M.length&&b.length)&&(_=f,f=d,d=this,M=nf(f,os(f)));var P=!(tr(_)&&"chain"in _&&!_.chain),j=ea(d);return vs(M,function(H){var Z=f[H];d[H]=Z,j&&(d.prototype[H]=function(){var ye=this.__chain__;if(P||ye){var be=d(this.__wrapped__),Te=be.__actions__=Fs(this.__actions__);return Te.push({func:Z,args:arguments,thisArg:d}),be.__chain__=ye,be}return Z.apply(d,_r([this.value()],arguments))})}),d}function qv(){}var ox=Zp(vi),ax=Zp(dn),wC=Zp(bo);function Wu(d){return Ko(d)?m_(hn(d)):function(d){return function(f){return Wo(f,d)}}(d)}var lx=tw(),cx=tw(!0);function $c(){return[]}function Xv(){return!1}var Bt=q_(function(d,f){return d+f},0),Kv=Kd("ceil"),BN=q_(function(d,f){return d/f},1),ql=Kd("floor"),MC=q_(function(d,f){return d*f},1),AC=Kd("round"),TC=q_(function(d,f){return d-f},0);return O.after=function(d,f){if("function"!=typeof f)throw new Ea(Jt);return d=ln(d),function(){if(--d<1)return f.apply(this,arguments)}},O.ary=fg,O.assign=DT,O.assignIn=OT,O.assignInWith=ih,O.assignWith=IT,O.at=nC,O.before=wv,O.bind=ff,O.bindAll=vC,O.bindKey=nh,O.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return Ht(d)?d:[d]},O.chain=pv,O.chunk=function(d,f,_){f=(_?Ss(d,f,_):f===F)?1:vr(ln(f),0);var b=null==d?0:d.length;if(!b||f<1)return[];for(var M=0,P=0,j=oe(Me(b/f));M<b;)j[P++]=rs(d,M,M+=f);return j},O.compact=function(d){for(var f=-1,_=null==d?0:d.length,b=0,M=[];++f<_;){var P=d[f];P&&(M[b++]=P)}return M},O.concat=function(){var d=arguments.length;if(!d)return[];for(var f=oe(d-1),_=arguments[0],b=d;b--;)f[b-1]=arguments[b];return _r(Ht(_)?Fs(_):[_],ns(f,1))},O.cond=function(d){var f=null==d?0:d.length,_=Gt();return d=f?vi(d,function(b){if("function"!=typeof b[1])throw new Ea(Jt);return[_(b[0]),b[1]]}):[],bn(function(b){for(var M=-1;++M<f;){var P=d[M];if(Or(P[0],this,b))return Or(P[1],this,b)}})},O.conforms=function(d){return function(d){var f=os(d);return function(_){return Up(_,d,f)}}(bs(d,1))},O.constant=$v,O.countBy=iT,O.create=function(d,f){var _=Iu(d);return null==f?_:uA(_,f)},O.curry=function jw(d,f,_){var b=Hl(d,8,F,F,F,F,F,f=_?F:f);return b.placeholder=jw.placeholder,b},O.curryRight=function Cv(d,f,_){var b=Hl(d,16,F,F,F,F,F,f=_?F:f);return b.placeholder=Cv.placeholder,b},O.debounce=zw,O.defaults=RT,O.defaultsDeep=mf,O.defer=fT,O.delay=Uw,O.difference=NA,O.differenceBy=LA,O.differenceWith=BA,O.drop=function(d,f,_){var b=null==d?0:d.length;return b?rs(d,(f=_||f===F?1:ln(f))<0?0:f,b):[]},O.dropRight=function(d,f,_){var b=null==d?0:d.length;return b?rs(d,0,(f=b-(f=_||f===F?1:ln(f)))<0?0:f):[]},O.dropRightWhile=function(d,f){return d&&d.length?Nu(d,Gt(f,3),!0,!0):[]},O.dropWhile=function(d,f){return d&&d.length?Nu(d,Gt(f,3),!0):[]},O.fill=function(d,f,_,b){var M=null==d?0:d.length;return M?(_&&"number"!=typeof _&&Ss(d,f,_)&&(_=0,b=M),function(d,f,_,b){var M=d.length;for((_=ln(_))<0&&(_=-_>M?0:M+_),(b=b===F||b>M?M:ln(b))<0&&(b+=M),b=_>b?0:Ov(b);_<b;)d[_++]=f;return d}(d,f,_,b)):[]},O.filter=function(d,f){return(Ht(d)?wa:$0)(d,Gt(f,3))},O.flatMap=function(d,f){return ns(al(d,f),1)},O.flatMapDeep=function(d,f){return ns(al(d,f),ce)},O.flatMapDepth=function(d,f,_){return _=_===F?1:ln(_),ns(al(d,f),_)},O.flatten=ss,O.flattenDeep=function(d){return null!=d&&d.length?ns(d,ce):[]},O.flattenDepth=function(d,f){return null!=d&&d.length?ns(d,f=f===F?1:ln(f)):[]},O.flip=function(d){return Hl(d,512)},O.flow=NN,O.flowRight=$u,O.fromPairs=function(d){for(var f=-1,_=null==d?0:d.length,b={};++f<_;){var M=d[f];b[M[0]]=M[1]}return b},O.functions=function(d){return null==d?[]:nf(d,os(d))},O.functionsIn=function(d){return null==d?[]:nf(d,Ls(d))},O.groupBy=cT,O.initial=function(d){return null!=d&&d.length?rs(d,0,-1):[]},O.intersection=_w,O.intersectionBy=zA,O.intersectionWith=vw,O.invert=yg,O.invertBy=FT,O.invokeMap=Iw,O.iteratee=Gu,O.keyBy=Pw,O.keys=os,O.keysIn=Ls,O.map=al,O.mapKeys=function(d,f){var _={};return f=Gt(f,3),nl(d,function(b,M,P){tl(_,f(b,M,P),b)}),_},O.mapValues=function(d,f){var _={};return f=Gt(f,3),nl(d,function(b,M,P){tl(_,M,f(b,M,P))}),_},O.matches=function(d){return mA(bs(d,1))},O.matchesProperty=function(d,f){return Gd(d,bs(f,1))},O.memoize=pf,O.merge=aC,O.mergeWith=lC,O.method=Gv,O.methodOf=yC,O.mixin=Wv,O.negate=Sv,O.nthArg=function(d){return d=ln(d),bn(function(f){return ku(f,d)})},O.omit=LT,O.omitBy=function(d,f){return cC(d,Sv(Gt(f)))},O.once=function(d){return wv(2,d)},O.orderBy=function(d,f,_,b){return null==d?[]:(Ht(f)||(f=null==f?[]:[f]),Ht(_=b?F:_)||(_=null==_?[]:[_]),rf(d,f,_))},O.over=ox,O.overArgs=pT,O.overEvery=ax,O.overSome=wC,O.partial=pg,O.partialRight=$w,O.partition=kw,O.pick=BT,O.pickBy=cC,O.property=Wu,O.propertyOf=function(d){return function(f){return null==d?F:Wo(d,f)}},O.pull=lv,O.pullAll=cv,O.pullAllBy=function(d,f,_){return d&&d.length&&f&&f.length?Yo(d,f,Gt(_,2)):d},O.pullAllWith=function(d,f,_){return d&&d.length&&f&&f.length?Yo(d,f,F,_):d},O.pullAt=bw,O.range=lx,O.rangeRight=cx,O.rearg=gT,O.reject=function(d,f){return(Ht(d)?wa:$0)(d,Sv(Gt(f,3)))},O.remove=function(d,f){var _=[];if(!d||!d.length)return _;var b=-1,M=[],P=d.length;for(f=Gt(f,3);++b<P;){var j=d[b];f(j,b,d)&&(_.push(j),M.push(b))}return sf(d,M),_},O.rest=function(d,f){if("function"!=typeof d)throw new Ea(Jt);return bn(d,f=f===F?f:ln(f))},O.reverse=uv,O.sampleSize=function(d,f,_){return f=(_?Ss(d,f,_):f===F)?1:ln(f),(Ht(d)?j0:fN)(d,f)},O.set=function(d,f,_){return null==d?d:Wp(d,f,_)},O.setWith=function(d,f,_,b){return b="function"==typeof b?b:F,null==d?d:Wp(d,f,_,b)},O.shuffle=function(d){return(Ht(d)?Bd:H_)(d)},O.slice=function(d,f,_){var b=null==d?0:d.length;return b?(_&&"number"!=typeof _&&Ss(d,f,_)?(f=0,_=b):(f=null==f?0:ln(f),_=_===F?b:ln(_)),rs(d,f,_)):[]},O.sortBy=hg,O.sortedUniq=function(d){return d&&d.length?Y0(d):[]},O.sortedUniqBy=function(d,f){return d&&d.length?Y0(d,Gt(f,2)):[]},O.split=function(d,f,_){return _&&"number"!=typeof _&&Ss(d,f,_)&&(f=_=F),(_=_===F?it:_>>>0)?(d=ai(d))&&("string"==typeof f||null!=f&&!Jw(f))&&!(f=So(f))&&zh(d)?il(Za(d),0,_):d.split(f,_):[]},O.spread=function(d,f){if("function"!=typeof d)throw new Ea(Jt);return f=null==f?0:vr(ln(f),0),bn(function(_){var b=_[f],M=il(_,0,f);return b&&_r(M,b),Or(d,this,M)})},O.tail=function(d){var f=null==d?0:d.length;return f?rs(d,1,f):[]},O.take=function(d,f,_){return d&&d.length?rs(d,0,(f=_||f===F?1:ln(f))<0?0:f):[]},O.takeRight=function(d,f,_){var b=null==d?0:d.length;return b?rs(d,(f=b-(f=_||f===F?1:ln(f)))<0?0:f,b):[]},O.takeRightWhile=function(d,f){return d&&d.length?Nu(d,Gt(f,3),!1,!0):[]},O.takeWhile=function(d,f){return d&&d.length?Nu(d,Gt(f,3)):[]},O.tap=function(d,f){return f(d),d},O.throttle=function(d,f,_){var b=!0,M=!0;if("function"!=typeof d)throw new Ea(Jt);return tr(_)&&(b="leading"in _?!!_.leading:b,M="trailing"in _?!!_.trailing:M),zw(d,f,{leading:b,maxWait:f,trailing:M})},O.thru=eh,O.toArray=eC,O.toPairs=VT,O.toPairsIn=dC,O.toPath=function(d){return Ht(d)?vi(d,hn):ta(d)?[d]:Fs(fw(ai(d)))},O.toPlainObject=tC,O.transform=function(d,f,_){var b=Ht(d),M=b||cl(d)||gf(d);if(f=Gt(f,4),null==_){var P=d&&d.constructor;_=M?b?new P:[]:tr(d)&&ea(P)?Iu(Sa(d)):{}}return(M?vs:nl)(d,function(j,H,Z){return f(_,j,H,Z)}),_},O.unary=function(d){return fg(d,1)},O.union=Ew,O.unionBy=dv,O.unionWith=cg,O.uniq=function(d){return d&&d.length?Nc(d):[]},O.uniqBy=function(d,f){return d&&d.length?Nc(d,Gt(f,2)):[]},O.uniqWith=function(d,f){return f="function"==typeof f?f:F,d&&d.length?Nc(d,F,f):[]},O.unset=function(d,f){return null==d||Fu(d,f)},O.unzip=Sw,O.unzipWith=eT,O.update=function(d,f,_){return null==d?d:qp(d,f,G_(_))},O.updateWith=function(d,f,_,b){return b="function"==typeof b?b:F,null==d?d:qp(d,f,G_(_),b)},O.values=ah,O.valuesIn=function(d){return null==d?[]:v_(d,Ls(d))},O.without=Mw,O.words=Uv,O.wrap=function(d,f){return pg(G_(f),d)},O.xor=EN,O.xorBy=Ao,O.xorWith=hv,O.zip=fv,O.zipObject=function(d,f){return Yp(d||[],f||[],el)},O.zipObjectDeep=function(d,f){return Yp(d||[],f||[],Wp)},O.zipWith=hf,O.entries=VT,O.entriesIn=dC,O.extend=OT,O.extendWith=ih,Wv(O,O),O.add=Bt,O.attempt=Hv,O.camelCase=$T,O.capitalize=kv,O.ceil=Kv,O.clamp=function(d,f,_){return _===F&&(_=f,f=F),_!==F&&(_=(_=eo(_))==_?_:0),f!==F&&(f=(f=eo(f))==f?f:0),Pu(eo(d),f,_)},O.clone=function(d){return bs(d,4)},O.cloneDeep=function(d){return bs(d,5)},O.cloneDeepWith=function(d,f){return bs(d,5,f="function"==typeof f?f:F)},O.cloneWith=function(d,f){return bs(d,4,f="function"==typeof f?f:F)},O.conformsTo=function(d,f){return null==f||Up(d,f,os(f))},O.deburr=Fv,O.defaultTo=function(d,f){return null==d||d!=d?f:d},O.divide=BN,O.endsWith=function(d,f,_){d=ai(d),f=So(f);var b=d.length,M=_=_===F?b:Pu(ln(_),0,b);return(_-=f.length)>=0&&d.slice(_,M)==f},O.eq=kt,O.escape=function(d){return(d=ai(d))&&Ze.test(d)?d.replace(wu,KF):d},O.escapeRegExp=function(d){return(d=ai(d))&&J.test(d)?d.replace(V,"\\$&"):d},O.every=function(d,f,_){var b=Ht(d)?dn:U0;return _&&Ss(d,f,_)&&(f=F),b(d,Gt(f,3))},O.find=oT,O.findIndex=sv,O.findKey=function(d,f){return Vh(d,Gt(f,3),nl)},O.findLast=aT,O.findLastIndex=ov,O.findLastKey=function(d,f){return Vh(d,Gt(f,3),Hp)},O.floor=ql,O.forEach=yv,O.forEachRight=ug,O.forIn=function(d,f){return null==d?d:jd(d,Gt(f,3),Ls)},O.forInRight=function(d,f){return null==d?d:zd(d,Gt(f,3),Ls)},O.forOwn=function(d,f){return d&&nl(d,Gt(f,3))},O.forOwnRight=function(d,f){return d&&Hp(d,Gt(f,3))},O.get=vf,O.gt=X,O.gte=qw,O.has=function(d,f){return null!=d&&lw(d,f,Ud)},O.hasIn=vg,O.head=gw,O.identity=Bs,O.includes=function(d,f,_,b){d=Js(d)?d:ah(d),_=_&&!b?ln(_):0;var M=d.length;return _<0&&(_=vr(M+_,0)),xv(d)?_<=M&&d.indexOf(f,_)>-1:!!M&&Ka(d,f,_)>-1},O.indexOf=function(d,f,_){var b=null==d?0:d.length;if(!b)return-1;var M=null==_?0:ln(_);return M<0&&(M=vr(b+M,0)),Ka(d,f,M)},O.inRange=function(d,f,_){return f=ul(f),_===F?(_=f,f=0):_=ul(_),function(d,f,_){return d>=$r(f,_)&&d<vr(f,_)}(d=eo(d),f,_)},O.invoke=sC,O.isArguments=ll,O.isArray=Ht,O.isArrayBuffer=Yw,O.isArrayLike=Js,O.isArrayLikeObject=er,O.isBoolean=function(d){return!0===d||!1===d||nr(d)&&is(d)==In},O.isBuffer=cl,O.isDate=Xw,O.isElement=function(d){return nr(d)&&1===d.nodeType&&!_g(d)},O.isEmpty=function(d){if(null==d)return!0;if(Js(d)&&(Ht(d)||"string"==typeof d||"function"==typeof d.splice||cl(d)||gf(d)||ll(d)))return!d.length;var f=Es(d);if(f==ji||f==Hr)return!d.size;if(rg(d))return!G0(d).length;for(var _ in d)if(bi.call(d,_))return!1;return!0},O.isEqual=function(d,f){return $p(d,f)},O.isEqualWith=function(d,f,_){var b=(_="function"==typeof _?_:F)?_(d,f):F;return b===F?$p(d,f,F,_):!!b},O.isError=Ia,O.isFinite=function(d){return"number"==typeof d&&A_(d)},O.isFunction=ea,O.isInteger=mg,O.isLength=Av,O.isMap=ST,O.isMatch=function(d,f){return d===f||V_(d,f,Xo(f))},O.isMatchWith=function(d,f,_){return _="function"==typeof _?_:F,V_(d,f,Xo(f),_)},O.isNaN=function(d){return TT(d)&&d!=+d},O.isNative=function(d){if(dw(d))throw new Rt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return j_(d)},O.isNil=function(d){return null==d},O.isNull=function(d){return null===d},O.isNumber=TT,O.isObject=tr,O.isObjectLike=nr,O.isPlainObject=_g,O.isRegExp=Jw,O.isSafeInteger=function(d){return mg(d)&&d>=-De&&d<=De},O.isSet=xT,O.isString=xv,O.isSymbol=ta,O.isTypedArray=gf,O.isUndefined=function(d){return d===F},O.isWeakMap=function(d){return nr(d)&&Es(d)==_i},O.isWeakSet=function(d){return nr(d)&&"[object WeakSet]"==is(d)},O.join=function(d,f){return null==d?"":Wh.call(d,f)},O.kebabCase=WT,O.last=Zo,O.lastIndexOf=function(d,f,_){var b=null==d?0:d.length;if(!b)return-1;var M=b;return _!==F&&(M=(M=ln(_))<0?vr(b+M,0):$r(M,b-1)),f==f?function(q,ge,oe){for(var at=oe+1;at--;)if(q[at]===ge)return at;return at}(d,f,M):Id(d,Oc,M,!0)},O.lowerCase=qT,O.lowerFirst=kN,O.lt=Uc,O.lte=Dv,O.max=function(d){return d&&d.length?tf(d,Bs,ws):F},O.maxBy=function(d,f){return d&&d.length?tf(d,Gt(f,2),ws):F},O.mean=function(d){return es(d,Bs)},O.meanBy=function(d,f){return es(d,Gt(f,2))},O.min=function(d){return d&&d.length?tf(d,Bs,W0):F},O.minBy=function(d,f){return d&&d.length?tf(d,Gt(f,2),W0):F},O.stubArray=$c,O.stubFalse=Xv,O.stubObject=function(){return{}},O.stubString=function(){return""},O.stubTrue=function(){return!0},O.multiply=MC,O.nth=function(d,f){return d&&d.length?ku(d,ln(f)):F},O.noConflict=function(){return si._===this&&(si._=S_),this},O.noop=qv,O.now=Hu,O.pad=function(d,f,_){d=ai(d);var b=(f=ln(f))?Uh(d):0;if(!f||b>=f)return d;var M=(f-b)/2;return Qp(Pn(M),_)+d+Qp(Me(M),_)},O.padEnd=function(d,f,_){d=ai(d);var b=(f=ln(f))?Uh(d):0;return f&&b<f?d+Qp(f-b,_):d},O.padStart=function(d,f,_){d=ai(d);var b=(f=ln(f))?Uh(d):0;return f&&b<f?Qp(f-b,_)+d:d},O.parseInt=function(d,f,_){return _||null==f?f=0:f&&(f=+f),JM(ai(d).replace($,""),f||0)},O.random=function(d,f,_){if(_&&"boolean"!=typeof _&&Ss(d,f,_)&&(f=_=F),_===F&&("boolean"==typeof f?(_=f,f=F):"boolean"==typeof d&&(_=d,d=F)),d===F&&f===F?(d=0,f=1):(d=ul(d),f===F?(f=d,d=0):f=ul(f)),d>f){var b=d;d=f,f=b}if(_||d%1||f%1){var M=qh();return $r(d+M*(f-d+zM("1e-"+((M+"").length-1))),f)}return jl(d,f)},O.reduce=function(d,f,_){var b=Ht(d)?Tu:$o,M=arguments.length<3;return b(d,Gt(f,4),_,M,kc)},O.reduceRight=function(d,f,_){var b=Ht(d)?Od:$o,M=arguments.length<3;return b(d,Gt(f,4),_,M,L_)},O.repeat=function(d,f,_){return f=(_?Ss(d,f,_):f===F)?1:ln(f),Gp(ai(d),f)},O.replace=function(){var d=arguments,f=ai(d[0]);return d.length<3?f:f.replace(d[1],d[2])},O.result=function(d,f,_){var b=-1,M=(f=Bc(f,d)).length;for(M||(M=1,d=F);++b<M;){var P=null==d?F:d[hn(f[b])];P===F&&(b=M,P=_),d=ea(P)?P.call(d):P}return d},O.round=AC,O.runInContext=q,O.sample=function(d){return(Ht(d)?R_:_A)(d)},O.size=function(d){if(null==d)return 0;if(Js(d))return xv(d)?Uh(d):d.length;var f=Es(d);return f==ji||f==Hr?d.size:G0(d).length},O.snakeCase=JT,O.some=function(d,f,_){var b=Ht(d)?bo:pN;return _&&Ss(d,f,_)&&(f=F),b(d,Gt(f,3))},O.sortedIndex=function(d,f){return of(d,f)},O.sortedIndexBy=function(d,f,_){return $_(d,f,Gt(_,2))},O.sortedIndexOf=function(d,f){var _=null==d?0:d.length;if(_){var b=of(d,f);if(b<_&&kt(d[b],f))return b}return-1},O.sortedLastIndex=function(d,f){return of(d,f,!0)},O.sortedLastIndexBy=function(d,f,_){return $_(d,f,Gt(_,2),!0)},O.sortedLastIndexOf=function(d,f){if(null!=d&&d.length){var b=of(d,f,!0)-1;if(kt(d[b],f))return b}return-1},O.startCase=Bv,O.startsWith=function(d,f,_){return d=ai(d),_=null==_?0:Pu(ln(_),0,d.length),f=So(f),d.slice(_,_+f.length)==f},O.subtract=TC,O.sum=function(d){return d&&d.length?Pd(d,Bs):0},O.sumBy=function(d,f){return d&&d.length?Pd(d,Gt(f,2)):0},O.template=function(d,f,_){var b=O.templateSettings;_&&Ss(d,f,_)&&(f=F),d=ai(d),f=ih({},f,b,iw);var H,Z,M=ih({},f.imports,b.imports,iw),P=os(M),j=v_(M,P),ye=0,be=f.interpolate||vo,Te="__p += '",Qe=C_((f.escape||vo).source+"|"+be.source+"|"+(be===Y?St:vo).source+"|"+(f.evaluate||vo).source+"|$","g"),Mt="//# sourceURL="+(bi.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jM+"]")+"\n";d.replace(Qe,function(Zt,Cn,Vn,to,Ms,na){return Vn||(Vn=to),Te+=d.slice(ye,na).replace(Ad,ZF),Cn&&(H=!0,Te+="' +\n__e("+Cn+") +\n'"),Ms&&(Z=!0,Te+="';\n"+Ms+";\n__p += '"),Vn&&(Te+="' +\n((__t = ("+Vn+")) == null ? '' : __t) +\n'"),ye=na+Zt.length,Zt}),Te+="';\n";var qt=bi.call(f,"variable")&&f.variable;if(qt){if(Tn.test(qt))throw new Rt("Invalid `variable` option passed into `_.template`")}else Te="with (obj) {\n"+Te+"\n}\n";Te=(Z?Te.replace(bu,""):Te).replace(Il,"$1").replace(Mc,"$1;"),Te="function("+(qt||"obj")+") {\n"+(qt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Z?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Te+"return __p\n}";var wn=Hv(function(){return Kn(P,Mt+"return "+Te).apply(F,j)});if(wn.source=Te,Ia(wn))throw wn;return wn},O.times=function(d,f){if((d=ln(d))<1||d>De)return[];var _=it,b=$r(d,it);f=Gt(f),d-=it;for(var M=Rd(b,f);++_<d;)f(_);return M},O.toFinite=ul,O.toInteger=ln,O.toLength=Ov,O.toLower=function(d){return ai(d).toLowerCase()},O.toNumber=eo,O.toSafeInteger=function(d){return d?Pu(ln(d),-De,De):0===d?d:0},O.toString=ai,O.toUpper=function(d){return ai(d).toUpperCase()},O.trim=function(d,f,_){if((d=ai(d))&&(_||f===F))return O0(d);if(!d||!(f=So(f)))return d;var b=Za(d),M=Za(f);return il(b,$M(b,M),GM(b,M)+1).join("")},O.trimEnd=function(d,f,_){if((d=ai(d))&&(_||f===F))return d.slice(0,Ic(d)+1);if(!d||!(f=So(f)))return d;var b=Za(d);return il(b,0,GM(b,Za(f))+1).join("")},O.trimStart=function(d,f,_){if((d=ai(d))&&(_||f===F))return d.replace($,"");if(!d||!(f=So(f)))return d;var b=Za(d);return il(b,$M(b,Za(f))).join("")},O.truncate=function(d,f){var _=30,b="...";if(tr(f)){var M="separator"in f?f.separator:M;_="length"in f?ln(f.length):_,b="omission"in f?So(f.omission):b}var P=(d=ai(d)).length;if(zh(d)){var j=Za(d);P=j.length}if(_>=P)return d;var H=_-Uh(b);if(H<1)return b;var Z=j?il(j,0,H).join(""):d.slice(0,H);if(M===F)return Z+b;if(j&&(H+=Z.length-H),Jw(M)){if(d.slice(H).search(M)){var ye,be=Z;for(M.global||(M=C_(M.source,ai(sn.exec(M))+"g")),M.lastIndex=0;ye=M.exec(be);)var Te=ye.index;Z=Z.slice(0,Te===F?H:Te)}}else if(d.indexOf(So(M),H)!=H){var Qe=Z.lastIndexOf(M);Qe>-1&&(Z=Z.slice(0,Qe))}return Z+b},O.unescape=function(d){return(d=ai(d))&&Ys.test(d)?d.replace(Md,w_):d},O.uniqueId=function(d){var f=++iN;return ai(d)+f},O.upperCase=_C,O.upperFirst=wg,O.each=yv,O.eachRight=ug,O.first=gw,Wv(O,function(){var d={};return nl(O,function(f,_){bi.call(O.prototype,_)||(d[_]=f)}),d}(),{chain:!1}),O.VERSION="4.17.21",vs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){O[d].placeholder=O}),vs(["drop","take"],function(d,f){yn.prototype[d]=function(_){_=_===F?1:vr(ln(_),0);var b=this.__filtered__&&!f?new yn(this):this.clone();return b.__filtered__?b.__takeCount__=$r(_,b.__takeCount__):b.__views__.push({size:$r(_,it),type:d+(b.__dir__<0?"Right":"")}),b},yn.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),vs(["filter","map","takeWhile"],function(d,f){var _=f+1,b=1==_||3==_;yn.prototype[d]=function(M){var P=this.clone();return P.__iteratees__.push({iteratee:Gt(M,3),type:_}),P.__filtered__=P.__filtered__||b,P}}),vs(["head","last"],function(d,f){var _="take"+(f?"Right":"");yn.prototype[d]=function(){return this[_](1).value()[0]}}),vs(["initial","tail"],function(d,f){var _="drop"+(f?"":"Right");yn.prototype[d]=function(){return this.__filtered__?new yn(this):this[_](1)}}),yn.prototype.compact=function(){return this.filter(Bs)},yn.prototype.find=function(d){return this.filter(d).head()},yn.prototype.findLast=function(d){return this.reverse().find(d)},yn.prototype.invokeMap=bn(function(d,f){return"function"==typeof d?new yn(this):this.map(function(_){return xa(_,d,f)})}),yn.prototype.reject=function(d){return this.filter(Sv(Gt(d)))},yn.prototype.slice=function(d,f){d=ln(d);var _=this;return _.__filtered__&&(d>0||f<0)?new yn(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),f!==F&&(_=(f=ln(f))<0?_.dropRight(-f):_.take(f-d)),_)},yn.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},yn.prototype.toArray=function(){return this.take(it)},nl(yn.prototype,function(d,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),b=/^(?:head|last)$/.test(f),M=O[b?"take"+("last"==f?"Right":""):f],P=b||/^find/.test(f);!M||(O.prototype[f]=function(){var j=this.__wrapped__,H=b?[1]:arguments,Z=j instanceof yn,ye=H[0],be=Z||Ht(j),Te=function(Cn){var Vn=M.apply(O,_r([Cn],H));return b&&Qe?Vn[0]:Vn};be&&_&&"function"==typeof ye&&1!=ye.length&&(Z=be=!1);var Qe=this.__chain__,Mt=!!this.__actions__.length,qt=P&&!Qe,wn=Z&&!Mt;if(!P&&be){j=wn?j:new yn(this);var Zt=d.apply(j,H);return Zt.__actions__.push({func:eh,args:[Te],thisArg:F}),new Co(Zt,Qe)}return qt&&wn?d.apply(this,H):(Zt=this.thru(Te),qt?b?Zt.value()[0]:Zt.value():Zt)})}),vs(["pop","push","shift","sort","splice","unshift"],function(d){var f=ki[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",b=/^(?:pop|shift)$/.test(d);O.prototype[d]=function(){var M=arguments;if(b&&!this.__chain__){var P=this.value();return f.apply(Ht(P)?P:[],M)}return this[_](function(j){return f.apply(Ht(j)?j:[],M)})}}),nl(yn.prototype,function(d,f){var _=O[f];if(_){var b=_.name+"";bi.call(Nd,b)||(Nd[b]=[]),Nd[b].push({name:f,func:_})}}),Nd[jc(F,2).name]=[{name:"wrapper",func:F}],yn.prototype.clone=function(){var d=new yn(this.__wrapped__);return d.__actions__=Fs(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Fs(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Fs(this.__views__),d},yn.prototype.reverse=function(){if(this.__filtered__){var d=new yn(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},yn.prototype.value=function(){var d=this.__wrapped__.value(),f=this.__dir__,_=Ht(d),b=f<0,M=_?d.length:0,P=function(d,f,_){for(var b=-1,M=_.length;++b<M;){var P=_[b],j=P.size;switch(P.type){case"drop":d+=j;break;case"dropRight":f-=j;break;case"take":f=$r(f,d+j);break;case"takeRight":d=vr(d,f-j)}}return{start:d,end:f}}(0,M,this.__views__),j=P.start,H=P.end,Z=H-j,ye=b?H:j-1,be=this.__iteratees__,Te=be.length,Qe=0,Mt=$r(Z,this.__takeCount__);if(!_||!b&&M==Z&&Mt==Z)return vA(d,this.__actions__);var qt=[];e:for(;Z--&&Qe<Mt;){for(var wn=-1,Zt=d[ye+=f];++wn<Te;){var Cn=be[wn],to=Cn.type,Ms=(0,Cn.iteratee)(Zt);if(2==to)Zt=Ms;else if(!Ms){if(1==to)continue e;break e}}qt[Qe++]=Zt}return qt},O.prototype.at=gv,O.prototype.chain=function(){return pv(this)},O.prototype.commit=function(){return new Co(this.value(),this.__chain__)},O.prototype.next=function(){this.__values__===F&&(this.__values__=eC(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?F:this.__values__[this.__index__++]}},O.prototype.plant=function(d){for(var f,_=this;_ instanceof Zh;){var b=og(_);b.__index__=0,b.__values__=F,f?M.__wrapped__=b:f=b;var M=b;_=_.__wrapped__}return M.__wrapped__=d,f},O.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof yn){var f=d;return this.__actions__.length&&(f=new yn(this)),(f=f.reverse()).__actions__.push({func:eh,args:[uv],thisArg:F}),new Co(f,this.__chain__)}return this.thru(uv)},O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=function(){return vA(this.__wrapped__,this.__actions__)},O.prototype.first=O.prototype.head,Gh&&(O.prototype[Gh]=function(){return this}),O}();si._=Hh,(bt=function(){return Hh}.call(qe,xe,qe,ft))!==F&&(ft.exports=bt)}.call(this)},478:function(ft){ft.exports=function(){"use strict";function qe(W,Y){for(var ee=0;ee<Y.length;ee++){var T=Y[ee];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(W,T.key,T)}}function F(W,Y){(null==Y||Y>W.length)&&(Y=W.length);for(var ee=0,T=new Array(Y);ee<Y;ee++)T[ee]=W[ee];return T}function gt(W,Y){var ee="undefined"!=typeof Symbol&&W[Symbol.iterator]||W["@@iterator"];if(ee)return(ee=ee.call(W)).next.bind(ee);if(Array.isArray(W)||(ee=function(W,Y){if(W){if("string"==typeof W)return F(W,Y);var ee=Object.prototype.toString.call(W).slice(8,-1);if("Object"===ee&&W.constructor&&(ee=W.constructor.name),"Map"===ee||"Set"===ee)return Array.from(W);if("Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return F(W,Y)}}(W))||Y&&W&&"number"==typeof W.length){ee&&(W=ee);var T=0;return function(){return T>=W.length?{done:!0}:{done:!1,value:W[T++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var It={exports:{}};function ct(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}It.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:ct,changeDefaults:function(W){It.exports.defaults=W}};var mt=/[&<>"']/,zt=/[&<>"']/g,gn=/[<>"']|&(?!#?\w+;)/,Ne=/[<>"']|&(?!#?\w+;)/g,$e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wt=function(Y){return $e[Y]};var Re=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function mn(W){return W.replace(Re,function(Y,ee){return"colon"===(ee=ee.toLowerCase())?":":"#"===ee.charAt(0)?"x"===ee.charAt(1)?String.fromCharCode(parseInt(ee.substring(2),16)):String.fromCharCode(+ee.substring(1)):""})}var Xe=/(^|[^\[])\^/g;var At=/[^\w:]/g,nn=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var ni={},Un=/^[^:]+:\/*[^/]*$/,di=/^([^:]+:)[\s\S]*$/,Bi=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Ie(W,Y){ni[" "+W]||(ni[" "+W]=Un.test(W)?W+"/":$t(W,"/",!0));var ee=-1===(W=ni[" "+W]).indexOf(":");return"//"===Y.substring(0,2)?ee?Y:W.replace(di,"$1")+Y:"/"===Y.charAt(0)?ee?Y:W.replace(Bi,"$1")+Y:W+Y}function $t(W,Y,ee){var T=W.length;if(0===T)return"";for(var D=0;D<T;){var V=W.charAt(T-D-1);if(V!==Y||ee){if(V===Y||!ee)break;D++}else D++}return W.substr(0,T-D)}var ce_escape=function(W,Y){if(Y){if(mt.test(W))return W.replace(zt,Wt)}else if(gn.test(W))return W.replace(Ne,Wt);return W},ce_unescape=mn,ce_edit=function(W,Y){W=W.source||W,Y=Y||"";var ee={replace:function(D,V){return V=(V=V.source||V).replace(Xe,"$1"),W=W.replace(D,V),ee},getRegex:function(){return new RegExp(W,Y)}};return ee},ce_cleanUrl=function(W,Y,ee){if(W){var T;try{T=decodeURIComponent(mn(ee)).replace(At,"").toLowerCase()}catch(D){return null}if(0===T.indexOf("javascript:")||0===T.indexOf("vbscript:")||0===T.indexOf("data:"))return null}Y&&!nn.test(ee)&&(ee=Ie(Y,ee));try{ee=encodeURI(ee).replace(/%25/g,"%")}catch(D){return null}return ee},ce_noopTest={exec:function(){}},ce_merge=function(W){for(var ee,T,Y=1;Y<arguments.length;Y++)for(T in ee=arguments[Y])Object.prototype.hasOwnProperty.call(ee,T)&&(W[T]=ee[T]);return W},ce_checkSanitizeDeprecation=function(W){W&&W.sanitize&&!W.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},ce_repeatString=function(W,Y){if(Y<1)return"";for(var ee="";Y>1;)1&Y&&(ee+=W),Y>>=1,W+=W;return ee+W},De=It.exports.defaults,re=$t,et=function(W,Y){var T=W.replace(/\|/g,function(V,J,$){for(var he=!1,fe=J;--fe>=0&&"\\"===$[fe];)he=!he;return he?"|":" |"}).split(/ \|/),D=0;if(T.length>Y)T.splice(Y);else for(;T.length<Y;)T.push("");for(;D<T.length;D++)T[D]=T[D].trim().replace(/\\\|/g,"|");return T},it=ce_escape,Hn=function(W,Y){if(-1===W.indexOf(Y[1]))return-1;for(var ee=W.length,T=0,D=0;D<ee;D++)if("\\"===W[D])D++;else if(W[D]===Y[0])T++;else if(W[D]===Y[1]&&--T<0)return D;return-1};function ii(W,Y,ee){var T=Y.href,D=Y.title?it(Y.title):null,V=W[1].replace(/\\([\[\]])/g,"$1");return"!"!==W[0].charAt(0)?{type:"link",raw:ee,href:T,title:D,text:V}:{type:"image",raw:ee,href:T,title:D,text:it(V)}}var ri=function(){function W(ee){this.options=ee||De}var Y=W.prototype;return Y.space=function(T){var D=this.rules.block.newline.exec(T);if(D)return D[0].length>1?{type:"space",raw:D[0]}:{raw:"\n"}},Y.code=function(T){var D=this.rules.block.code.exec(T);if(D){var V=D[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:D[0],codeBlockStyle:"indented",text:this.options.pedantic?V:re(V,"\n")}}},Y.fences=function(T){var D=this.rules.block.fences.exec(T);if(D){var V=D[0],J=function(W,Y){var ee=W.match(/^(\s+)(?:```)/);if(null===ee)return Y;var T=ee[1];return Y.split("\n").map(function(D){var V=D.match(/^\s+/);return null===V?D:V[0].length>=T.length?D.slice(T.length):D}).join("\n")}(V,D[3]||"");return{type:"code",raw:V,lang:D[2]?D[2].trim():D[2],text:J}}},Y.heading=function(T){var D=this.rules.block.heading.exec(T);if(D){var V=D[2].trim();if(/#$/.test(V)){var J=re(V,"#");(this.options.pedantic||!J||/ $/.test(J))&&(V=J.trim())}return{type:"heading",raw:D[0],depth:D[1].length,text:V}}},Y.nptable=function(T){var D=this.rules.block.nptable.exec(T);if(D){var V={type:"table",header:et(D[1].replace(/^ *| *\| *$/g,"")),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:D[3]?D[3].replace(/\n$/,"").split("\n"):[],raw:D[0]};if(V.header.length===V.align.length){var $,J=V.align.length;for($=0;$<J;$++)V.align[$]=/^ *-+: *$/.test(V.align[$])?"right":/^ *:-+: *$/.test(V.align[$])?"center":/^ *:-+ *$/.test(V.align[$])?"left":null;for(J=V.cells.length,$=0;$<J;$++)V.cells[$]=et(V.cells[$],V.header.length);return V}}},Y.hr=function(T){var D=this.rules.block.hr.exec(T);if(D)return{type:"hr",raw:D[0]}},Y.blockquote=function(T){var D=this.rules.block.blockquote.exec(T);if(D){var V=D[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:D[0],text:V}}},Y.list=function(T){var D=this.rules.block.list.exec(T);if(D){var We,rn,Tn,Xt,St,sn,hi,Xi,Ki,V=D[0],J=D[2],$=J.length>1,he={type:"list",raw:V,ordered:$,start:$?+J.slice(0,-1):"",loose:!1,items:[]},fe=D[0].match(this.rules.block.item),me=!1,fn=fe.length;Tn=this.rules.block.listItemStart.exec(fe[0]);for(var Ti=0;Ti<fn;Ti++){if(V=We=fe[Ti],this.options.pedantic||(Ki=We.match(new RegExp("\\n\\s*\\n {0,"+(Tn[0].length-1)+"}\\S")))&&(St=We.length-Ki.index+fe.slice(Ti+1).join("\n").length,he.raw=he.raw.substring(0,he.raw.length-St),V=We=We.substring(0,Ki.index),fn=Ti+1),Ti!==fn-1){if(Xt=this.rules.block.listItemStart.exec(fe[Ti+1]),this.options.pedantic?Xt[1].length>Tn[1].length:Xt[1].length>=Tn[0].length||Xt[1].length>3){fe.splice(Ti,2,fe[Ti]+(!this.options.pedantic&&Xt[1].length<Tn[0].length&&!fe[Ti].match(/\n$/)?"":"\n")+fe[Ti+1]),Ti--,fn--;continue}(!this.options.pedantic||this.options.smartLists?Xt[2][Xt[2].length-1]!==J[J.length-1]:$===(1===Xt[2].length))&&(St=fe.slice(Ti+1).join("\n").length,he.raw=he.raw.substring(0,he.raw.length-St),Ti=fn-1),Tn=Xt}rn=We.length,~(We=We.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(rn-=We.length,We=We.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+rn+"}","gm"),"")),We=re(We,"\n"),Ti!==fn-1&&(V+="\n"),sn=me||/\n\n(?!\s*$)/.test(V),Ti!==fn-1&&(me="\n\n"===V.slice(-2),sn||(sn=me)),sn&&(he.loose=!0),this.options.gfm&&(Xi=void 0,(hi=/^\[[ xX]\] /.test(We))&&(Xi=" "!==We[1],We=We.replace(/^\[[ xX]\] +/,""))),he.items.push({type:"list_item",raw:V,task:hi,checked:Xi,loose:sn,text:We})}return he}},Y.html=function(T){var D=this.rules.block.html.exec(T);if(D)return{type:this.options.sanitize?"paragraph":"html",raw:D[0],pre:!this.options.sanitizer&&("pre"===D[1]||"script"===D[1]||"style"===D[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(D[0]):it(D[0]):D[0]}},Y.def=function(T){var D=this.rules.block.def.exec(T);if(D)return D[3]&&(D[3]=D[3].substring(1,D[3].length-1)),{type:"def",tag:D[1].toLowerCase().replace(/\s+/g," "),raw:D[0],href:D[2],title:D[3]}},Y.table=function(T){var D=this.rules.block.table.exec(T);if(D){var V={type:"table",header:et(D[1].replace(/^ *| *\| *$/g,"")),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:D[3]?D[3].replace(/\n$/,"").split("\n"):[]};if(V.header.length===V.align.length){V.raw=D[0];var $,J=V.align.length;for($=0;$<J;$++)V.align[$]=/^ *-+: *$/.test(V.align[$])?"right":/^ *:-+: *$/.test(V.align[$])?"center":/^ *:-+ *$/.test(V.align[$])?"left":null;for(J=V.cells.length,$=0;$<J;$++)V.cells[$]=et(V.cells[$].replace(/^ *\| *| *\| *$/g,""),V.header.length);return V}}},Y.lheading=function(T){var D=this.rules.block.lheading.exec(T);if(D)return{type:"heading",raw:D[0],depth:"="===D[2].charAt(0)?1:2,text:D[1]}},Y.paragraph=function(T){var D=this.rules.block.paragraph.exec(T);if(D)return{type:"paragraph",raw:D[0],text:"\n"===D[1].charAt(D[1].length-1)?D[1].slice(0,-1):D[1]}},Y.text=function(T){var D=this.rules.block.text.exec(T);if(D)return{type:"text",raw:D[0],text:D[0]}},Y.escape=function(T){var D=this.rules.inline.escape.exec(T);if(D)return{type:"escape",raw:D[0],text:it(D[1])}},Y.tag=function(T,D,V){var J=this.rules.inline.tag.exec(T);if(J)return!D&&/^<a /i.test(J[0])?D=!0:D&&/^<\/a>/i.test(J[0])&&(D=!1),!V&&/^<(pre|code|kbd|script)(\s|>)/i.test(J[0])?V=!0:V&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(J[0])&&(V=!1),{type:this.options.sanitize?"text":"html",raw:J[0],inLink:D,inRawBlock:V,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(J[0]):it(J[0]):J[0]}},Y.link=function(T){var D=this.rules.inline.link.exec(T);if(D){var V=D[2].trim();if(!this.options.pedantic&&/^</.test(V)){if(!/>$/.test(V))return;var J=re(V.slice(0,-1),"\\");if((V.length-J.length)%2==0)return}else{var $=Hn(D[2],"()");if($>-1){var fe=(0===D[0].indexOf("!")?5:4)+D[1].length+$;D[2]=D[2].substring(0,$),D[0]=D[0].substring(0,fe).trim(),D[3]=""}}var me=D[2],We="";if(this.options.pedantic){var rn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(me);rn&&(me=rn[1],We=rn[3])}else We=D[3]?D[3].slice(1,-1):"";return me=me.trim(),/^</.test(me)&&(me=this.options.pedantic&&!/>$/.test(V)?me.slice(1):me.slice(1,-1)),ii(D,{href:me&&me.replace(this.rules.inline._escapes,"$1"),title:We&&We.replace(this.rules.inline._escapes,"$1")},D[0])}},Y.reflink=function(T,D){var V;if((V=this.rules.inline.reflink.exec(T))||(V=this.rules.inline.nolink.exec(T))){var J=(V[2]||V[1]).replace(/\s+/g," ");if(!(J=D[J.toLowerCase()])||!J.href){var $=V[0].charAt(0);return{type:"text",raw:$,text:$}}return ii(V,J,V[0])}},Y.emStrong=function(T,D,V){void 0===V&&(V="");var J=this.rules.inline.emStrong.lDelim.exec(T);if(J&&(!J[3]||!V.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var $=J[1]||J[2]||"";if(!$||$&&(""===V||this.rules.inline.punctuation.exec(V))){var fe,me,he=J[0].length-1,We=he,rn=0,Tn="*"===J[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Tn.lastIndex=0,D=D.slice(-1*T.length+he);null!=(J=Tn.exec(D));)if(fe=J[1]||J[2]||J[3]||J[4]||J[5]||J[6]){if(me=fe.length,J[3]||J[4]){We+=me;continue}if((J[5]||J[6])&&he%3&&!((he+me)%3)){rn+=me;continue}if(!((We-=me)>0))return me=Math.min(me,me+We+rn),Math.min(he,me)%2?{type:"em",raw:T.slice(0,he+J.index+me+1),text:T.slice(1,he+J.index+me)}:{type:"strong",raw:T.slice(0,he+J.index+me+1),text:T.slice(2,he+J.index+me-1)}}}}},Y.codespan=function(T){var D=this.rules.inline.code.exec(T);if(D){var V=D[2].replace(/\n/g," "),J=/[^ ]/.test(V),$=/^ /.test(V)&&/ $/.test(V);return J&&$&&(V=V.substring(1,V.length-1)),V=it(V,!0),{type:"codespan",raw:D[0],text:V}}},Y.br=function(T){var D=this.rules.inline.br.exec(T);if(D)return{type:"br",raw:D[0]}},Y.del=function(T){var D=this.rules.inline.del.exec(T);if(D)return{type:"del",raw:D[0],text:D[2]}},Y.autolink=function(T,D){var J,$,V=this.rules.inline.autolink.exec(T);if(V)return $="@"===V[2]?"mailto:"+(J=it(this.options.mangle?D(V[1]):V[1])):J=it(V[1]),{type:"link",raw:V[0],text:J,href:$,tokens:[{type:"text",raw:J,text:J}]}},Y.url=function(T,D){var V;if(V=this.rules.inline.url.exec(T)){var J,$;if("@"===V[2])$="mailto:"+(J=it(this.options.mangle?D(V[0]):V[0]));else{var he;do{he=V[0],V[0]=this.rules.inline._backpedal.exec(V[0])[0]}while(he!==V[0]);J=it(V[0]),$="www."===V[1]?"http://"+J:J}return{type:"link",raw:V[0],text:J,href:$,tokens:[{type:"text",raw:J,text:J}]}}},Y.inlineText=function(T,D,V){var $,J=this.rules.inline.text.exec(T);if(J)return $=D?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(J[0]):it(J[0]):J[0]:it(this.options.smartypants?V(J[0]):J[0]),{type:"text",raw:J[0],text:$}},W}(),Ps=ce_noopTest,On=ce_edit,In=ce_merge,dt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Ps,table:Ps,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};dt.def=On(dt.def).replace("label",dt._label).replace("title",dt._title).getRegex(),dt.bullet=/(?:[*+-]|\d{1,9}[.)])/,dt.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,dt.item=On(dt.item,"gm").replace(/bull/g,dt.bullet).getRegex(),dt.listItemStart=On(/^( *)(bull) */).replace("bull",dt.bullet).getRegex(),dt.list=On(dt.list).replace(/bull/g,dt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+dt.def.source+")").getRegex(),dt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,dt.html=On(dt.html,"i").replace("comment",dt._comment).replace("tag",dt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),dt.paragraph=On(dt._paragraph).replace("hr",dt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dt._tag).getRegex(),dt.blockquote=On(dt.blockquote).replace("paragraph",dt.paragraph).getRegex(),dt.normal=In({},dt),dt.gfm=In({},dt.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),dt.gfm.nptable=On(dt.gfm.nptable).replace("hr",dt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dt._tag).getRegex(),dt.gfm.table=On(dt.gfm.table).replace("hr",dt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dt._tag).getRegex(),dt.pedantic=In({},dt.normal,{html:On("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",dt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ps,paragraph:On(dt.normal._paragraph).replace("hr",dt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",dt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Ye={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ps,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ps,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Ye.punctuation=On(Ye.punctuation).replace(/punctuation/g,Ye._punctuation).getRegex(),Ye.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ye.escapedEmSt=/\\\*|\\_/g,Ye._comment=On(dt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ye.emStrong.lDelim=On(Ye.emStrong.lDelim).replace(/punct/g,Ye._punctuation).getRegex(),Ye.emStrong.rDelimAst=On(Ye.emStrong.rDelimAst,"g").replace(/punct/g,Ye._punctuation).getRegex(),Ye.emStrong.rDelimUnd=On(Ye.emStrong.rDelimUnd,"g").replace(/punct/g,Ye._punctuation).getRegex(),Ye._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ye._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ye._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ye.autolink=On(Ye.autolink).replace("scheme",Ye._scheme).replace("email",Ye._email).getRegex(),Ye._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ye.tag=On(Ye.tag).replace("comment",Ye._comment).replace("attribute",Ye._attribute).getRegex(),Ye._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ye._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ye._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ye.link=On(Ye.link).replace("label",Ye._label).replace("href",Ye._href).replace("title",Ye._title).getRegex(),Ye.reflink=On(Ye.reflink).replace("label",Ye._label).getRegex(),Ye.reflinkSearch=On(Ye.reflinkSearch,"g").replace("reflink",Ye.reflink).replace("nolink",Ye.nolink).getRegex(),Ye.normal=In({},Ye),Ye.pedantic=In({},Ye.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:On(/^!?\[(label)\]\((.*?)\)/).replace("label",Ye._label).getRegex(),reflink:On(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ye._label).getRegex()}),Ye.gfm=In({},Ye.normal,{escape:On(Ye.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ye.gfm.url=On(Ye.gfm.url,"i").replace("email",Ye.gfm._extended_email).getRegex(),Ye.breaks=In({},Ye.gfm,{br:On(Ye.br).replace("{2,}","*").getRegex(),text:On(Ye.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Vi={block:dt,inline:Ye},ma=ri,$a=It.exports.defaults,ji=Vi.block,Qr=Vi.inline,Ga=ce_repeatString;function cr(W){return W.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function go(W){var ee,T,Y="",D=W.length;for(ee=0;ee<D;ee++)T=W.charCodeAt(ee),Math.random()>.5&&(T="x"+T.toString(16)),Y+="&#"+T+";";return Y}var gi=function(){function W(ee){this.tokens=[],this.tokens.links=Object.create(null),this.options=ee||$a,this.options.tokenizer=this.options.tokenizer||new ma,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var T={block:ji.normal,inline:Qr.normal};this.options.pedantic?(T.block=ji.pedantic,T.inline=Qr.pedantic):this.options.gfm&&(T.block=ji.gfm,T.inline=this.options.breaks?Qr.breaks:Qr.gfm),this.tokenizer.rules=T}W.lex=function(T,D){return new W(D).lex(T)},W.lexInline=function(T,D){return new W(D).inlineTokens(T)};var Y=W.prototype;return Y.lex=function(T){return T=T.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(T,this.tokens,!0),this.inline(this.tokens),this.tokens},Y.blockTokens=function(T,D,V){var $,he,fe,me,We,rn,J=this;for(void 0===D&&(D=[]),void 0===V&&(V=!0),this.options.pedantic&&(T=T.replace(/^ +$/gm,""));T;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Xt){return!!($=Xt.call(J,T,D))&&(T=T.substring($.raw.length),D.push($),!0)}))){if($=this.tokenizer.space(T)){T=T.substring($.raw.length),$.type&&D.push($);continue}if($=this.tokenizer.code(T)){T=T.substring($.raw.length),(me=D[D.length-1])&&"paragraph"===me.type?(me.raw+="\n"+$.raw,me.text+="\n"+$.text):D.push($);continue}if($=this.tokenizer.fences(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.heading(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.nptable(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.hr(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.blockquote(T)){T=T.substring($.raw.length),$.tokens=this.blockTokens($.text,[],V),D.push($);continue}if($=this.tokenizer.list(T)){for(T=T.substring($.raw.length),fe=$.items.length,he=0;he<fe;he++)$.items[he].tokens=this.blockTokens($.items[he].text,[],!1);D.push($);continue}if($=this.tokenizer.html(T)){T=T.substring($.raw.length),D.push($);continue}if(V&&($=this.tokenizer.def(T))){T=T.substring($.raw.length),this.tokens.links[$.tag]||(this.tokens.links[$.tag]={href:$.href,title:$.title});continue}if($=this.tokenizer.table(T)){T=T.substring($.raw.length),D.push($);continue}if($=this.tokenizer.lheading(T)){T=T.substring($.raw.length),D.push($);continue}if(We=T,this.options.extensions&&this.options.extensions.startBlock&&function(){var Xt=1/0,St=T.slice(1),sn=void 0;J.options.extensions.startBlock.forEach(function(hi){"number"==typeof(sn=hi.call(this,St))&&sn>=0&&(Xt=Math.min(Xt,sn))}),Xt<1/0&&Xt>=0&&(We=T.substring(0,Xt+1))}(),V&&($=this.tokenizer.paragraph(We))){me=D[D.length-1],rn&&"paragraph"===me.type?(me.raw+="\n"+$.raw,me.text+="\n"+$.text):D.push($),rn=We.length!==T.length,T=T.substring($.raw.length);continue}if($=this.tokenizer.text(T)){T=T.substring($.raw.length),(me=D[D.length-1])&&"text"===me.type?(me.raw+="\n"+$.raw,me.text+="\n"+$.text):D.push($);continue}if(T){var Tn="Infinite loop on byte: "+T.charCodeAt(0);if(this.options.silent){console.error(Tn);break}throw new Error(Tn)}}return D},Y.inline=function(T){var D,V,J,$,he,fe,me=T.length;for(D=0;D<me;D++)switch(fe=T[D],fe.type){case"paragraph":case"text":case"heading":fe.tokens=[],this.inlineTokens(fe.text,fe.tokens);break;case"table":for(fe.tokens={header:[],cells:[]},$=fe.header.length,V=0;V<$;V++)fe.tokens.header[V]=[],this.inlineTokens(fe.header[V],fe.tokens.header[V]);for($=fe.cells.length,V=0;V<$;V++)for(he=fe.cells[V],fe.tokens.cells[V]=[],J=0;J<he.length;J++)fe.tokens.cells[V][J]=[],this.inlineTokens(he[J],fe.tokens.cells[V][J]);break;case"blockquote":this.inline(fe.tokens);break;case"list":for($=fe.items.length,V=0;V<$;V++)this.inline(fe.items[V].tokens)}return T},Y.inlineTokens=function(T,D,V,J){var $=this;void 0===D&&(D=[]),void 0===V&&(V=!1),void 0===J&&(J=!1);var he,fe,me,rn,Tn,Xt,We=T;if(this.tokens.links){var St=Object.keys(this.tokens.links);if(St.length>0)for(;null!=(rn=this.tokenizer.rules.inline.reflinkSearch.exec(We));)St.includes(rn[0].slice(rn[0].lastIndexOf("[")+1,-1))&&(We=We.slice(0,rn.index)+"["+Ga("a",rn[0].length-2)+"]"+We.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(rn=this.tokenizer.rules.inline.blockSkip.exec(We));)We=We.slice(0,rn.index)+"["+Ga("a",rn[0].length-2)+"]"+We.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(rn=this.tokenizer.rules.inline.escapedEmSt.exec(We));)We=We.slice(0,rn.index)+"++"+We.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;T;)if(Tn||(Xt=""),Tn=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(hi){return!!(he=hi.call($,T,D))&&(T=T.substring(he.raw.length),D.push(he),!0)}))){if(he=this.tokenizer.escape(T)){T=T.substring(he.raw.length),D.push(he);continue}if(he=this.tokenizer.tag(T,V,J)){T=T.substring(he.raw.length),V=he.inLink,J=he.inRawBlock,(fe=D[D.length-1])&&"text"===he.type&&"text"===fe.type?(fe.raw+=he.raw,fe.text+=he.text):D.push(he);continue}if(he=this.tokenizer.link(T)){T=T.substring(he.raw.length),"link"===he.type&&(he.tokens=this.inlineTokens(he.text,[],!0,J)),D.push(he);continue}if(he=this.tokenizer.reflink(T,this.tokens.links)){T=T.substring(he.raw.length),fe=D[D.length-1],"link"===he.type?(he.tokens=this.inlineTokens(he.text,[],!0,J),D.push(he)):fe&&"text"===he.type&&"text"===fe.type?(fe.raw+=he.raw,fe.text+=he.text):D.push(he);continue}if(he=this.tokenizer.emStrong(T,We,Xt)){T=T.substring(he.raw.length),he.tokens=this.inlineTokens(he.text,[],V,J),D.push(he);continue}if(he=this.tokenizer.codespan(T)){T=T.substring(he.raw.length),D.push(he);continue}if(he=this.tokenizer.br(T)){T=T.substring(he.raw.length),D.push(he);continue}if(he=this.tokenizer.del(T)){T=T.substring(he.raw.length),he.tokens=this.inlineTokens(he.text,[],V,J),D.push(he);continue}if(he=this.tokenizer.autolink(T,go)){T=T.substring(he.raw.length),D.push(he);continue}if(!V&&(he=this.tokenizer.url(T,go))){T=T.substring(he.raw.length),D.push(he);continue}if(me=T,this.options.extensions&&this.options.extensions.startInline&&function(){var hi=1/0,Xi=T.slice(1),Ki=void 0;$.options.extensions.startInline.forEach(function(fn){"number"==typeof(Ki=fn.call(this,Xi))&&Ki>=0&&(hi=Math.min(hi,Ki))}),hi<1/0&&hi>=0&&(me=T.substring(0,hi+1))}(),he=this.tokenizer.inlineText(me,J,cr)){T=T.substring(he.raw.length),"_"!==he.raw.slice(-1)&&(Xt=he.raw.slice(-1)),Tn=!0,(fe=D[D.length-1])&&"text"===fe.type?(fe.raw+=he.raw,fe.text+=he.text):D.push(he);continue}if(T){var sn="Infinite loop on byte: "+T.charCodeAt(0);if(this.options.silent){console.error(sn);break}throw new Error(sn)}}return D},function(W,Y,ee){Y&&qe(W.prototype,Y),ee&&qe(W,ee)}(W,null,[{key:"rules",get:function(){return{block:ji,inline:Qr}}}]),W}(),gs=It.exports.defaults,Hr=ce_cleanUrl,mi=ce_escape,Ec=function(){function W(ee){this.options=ee||gs}var Y=W.prototype;return Y.code=function(T,D,V){var J=(D||"").match(/\S*/)[0];if(this.options.highlight){var $=this.options.highlight(T,J);null!=$&&$!==T&&(V=!0,T=$)}return T=T.replace(/\n$/,"")+"\n",J?'<pre><code class="'+this.options.langPrefix+mi(J,!0)+'">'+(V?T:mi(T,!0))+"</code></pre>\n":"<pre><code>"+(V?T:mi(T,!0))+"</code></pre>\n"},Y.blockquote=function(T){return"<blockquote>\n"+T+"</blockquote>\n"},Y.html=function(T){return T},Y.heading=function(T,D,V,J){return this.options.headerIds?"<h"+D+' id="'+this.options.headerPrefix+J.slug(V)+'">'+T+"</h"+D+">\n":"<h"+D+">"+T+"</h"+D+">\n"},Y.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},Y.list=function(T,D,V){var J=D?"ol":"ul";return"<"+J+(D&&1!==V?' start="'+V+'"':"")+">\n"+T+"</"+J+">\n"},Y.listitem=function(T){return"<li>"+T+"</li>\n"},Y.checkbox=function(T){return"<input "+(T?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Y.paragraph=function(T){return"<p>"+T+"</p>\n"},Y.table=function(T,D){return D&&(D="<tbody>"+D+"</tbody>"),"<table>\n<thead>\n"+T+"</thead>\n"+D+"</table>\n"},Y.tablerow=function(T){return"<tr>\n"+T+"</tr>\n"},Y.tablecell=function(T,D){var V=D.header?"th":"td";return(D.align?"<"+V+' align="'+D.align+'">':"<"+V+">")+T+"</"+V+">\n"},Y.strong=function(T){return"<strong>"+T+"</strong>"},Y.em=function(T){return"<em>"+T+"</em>"},Y.codespan=function(T){return"<code>"+T+"</code>"},Y.br=function(){return this.options.xhtml?"<br/>":"<br>"},Y.del=function(T){return"<del>"+T+"</del>"},Y.link=function(T,D,V){if(null===(T=Hr(this.options.sanitize,this.options.baseUrl,T)))return V;var J='<a href="'+mi(T)+'"';return D&&(J+=' title="'+D+'"'),J+">"+V+"</a>"},Y.image=function(T,D,V){if(null===(T=Hr(this.options.sanitize,this.options.baseUrl,T)))return V;var J='<img src="'+T+'" alt="'+V+'"';return D&&(J+=' title="'+D+'"'),J+(this.options.xhtml?"/>":">")},Y.text=function(T){return T},W}(),Uo=function(){function W(){}var Y=W.prototype;return Y.strong=function(T){return T},Y.em=function(T){return T},Y.codespan=function(T){return T},Y.del=function(T){return T},Y.html=function(T){return T},Y.text=function(T){return T},Y.link=function(T,D,V){return""+V},Y.image=function(T,D,V){return""+V},Y.br=function(){return""},W}(),_i=function(){function W(){this.seen={}}var Y=W.prototype;return Y.serialize=function(T){return T.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Y.getNextSafeSlug=function(T,D){var V=T,J=0;if(this.seen.hasOwnProperty(V)){J=this.seen[T];do{V=T+"-"+ ++J}while(this.seen.hasOwnProperty(V))}return D||(this.seen[T]=J,this.seen[V]=0),V},Y.slug=function(T,D){void 0===D&&(D={});var V=this.serialize(T);return this.getNextSafeSlug(V,D.dryrun)},W}(),kh=Ec,Dl=Uo,Wa=_i,mo=It.exports.defaults,qa=ce_unescape,ms=gi,_o=function(){function W(ee){this.options=ee||mo,this.options.renderer=this.options.renderer||new kh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Dl,this.slugger=new Wa}W.parse=function(T,D){return new W(D).parse(T)},W.parseInline=function(T,D){return new W(D).parseInline(T)};var Y=W.prototype;return Y.parse=function(T,D){void 0===D&&(D=!0);var J,$,he,fe,me,We,rn,Tn,Xt,St,sn,hi,Xi,Ki,fn,Ti,Ac,vo,Ad,V="",Pl=T.length;for(J=0;J<Pl;J++)if(St=T[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[St.type]&&(!1!==(Ad=this.options.extensions.renderers[St.type].call(this,St))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(St.type)))V+=Ad||"";else switch(St.type){case"space":continue;case"hr":V+=this.renderer.hr();continue;case"heading":V+=this.renderer.heading(this.parseInline(St.tokens),St.depth,qa(this.parseInline(St.tokens,this.textRenderer)),this.slugger);continue;case"code":V+=this.renderer.code(St.text,St.lang,St.escaped);continue;case"table":for(Tn="",rn="",fe=St.header.length,$=0;$<fe;$++)rn+=this.renderer.tablecell(this.parseInline(St.tokens.header[$]),{header:!0,align:St.align[$]});for(Tn+=this.renderer.tablerow(rn),Xt="",fe=St.cells.length,$=0;$<fe;$++){for(rn="",me=(We=St.tokens.cells[$]).length,he=0;he<me;he++)rn+=this.renderer.tablecell(this.parseInline(We[he]),{header:!1,align:St.align[he]});Xt+=this.renderer.tablerow(rn)}V+=this.renderer.table(Tn,Xt);continue;case"blockquote":Xt=this.parse(St.tokens),V+=this.renderer.blockquote(Xt);continue;case"list":for(sn=St.ordered,hi=St.start,Xi=St.loose,fe=St.items.length,Xt="",$=0;$<fe;$++)Ti=(fn=St.items[$]).checked,Ac=fn.task,Ki="",fn.task&&(vo=this.renderer.checkbox(Ti),Xi?fn.tokens.length>0&&"text"===fn.tokens[0].type?(fn.tokens[0].text=vo+" "+fn.tokens[0].text,fn.tokens[0].tokens&&fn.tokens[0].tokens.length>0&&"text"===fn.tokens[0].tokens[0].type&&(fn.tokens[0].tokens[0].text=vo+" "+fn.tokens[0].tokens[0].text)):fn.tokens.unshift({type:"text",text:vo}):Ki+=vo),Ki+=this.parse(fn.tokens,Xi),Xt+=this.renderer.listitem(Ki,Ac,Ti);V+=this.renderer.list(Xt,sn,hi);continue;case"html":V+=this.renderer.html(St.text);continue;case"paragraph":V+=this.renderer.paragraph(this.parseInline(St.tokens));continue;case"text":for(Xt=St.tokens?this.parseInline(St.tokens):St.text;J+1<Pl&&"text"===T[J+1].type;)Xt+="\n"+((St=T[++J]).tokens?this.parseInline(St.tokens):St.text);V+=D?this.renderer.paragraph(Xt):Xt;continue;default:var Tc='Token with "'+St.type+'" type was not found.';if(this.options.silent)return void console.error(Tc);throw new Error(Tc)}return V},Y.parseInline=function(T,D){D=D||this.renderer;var J,$,he,V="",fe=T.length;for(J=0;J<fe;J++)if($=T[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[$.type]&&(!1!==(he=this.options.extensions.renderers[$.type].call(this,$))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes($.type)))V+=he||"";else switch($.type){case"escape":V+=D.text($.text);break;case"html":V+=D.html($.text);break;case"link":V+=D.link($.href,$.title,this.parseInline($.tokens,D));break;case"image":V+=D.image($.href,$.title,$.text);break;case"strong":V+=D.strong(this.parseInline($.tokens,D));break;case"em":V+=D.em(this.parseInline($.tokens,D));break;case"codespan":V+=D.codespan($.text);break;case"br":V+=D.br();break;case"del":V+=D.del(this.parseInline($.tokens,D));break;case"text":V+=D.text($.text);break;default:var me='Token with "'+$.type+'" type was not found.';if(this.options.silent)return void console.error(me);throw new Error(me)}return V},W}(),Sc=ri,Ol=Ec,vu=Uo,yu=_i,bu=ce_merge,Il=ce_checkSanitizeDeprecation,Mc=ce_escape,Md=It.exports.getDefaults,wu=It.exports.changeDefaults,Ys=It.exports.defaults;function Ze(W,Y,ee){if(null==W)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof W)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(W)+", string expected");if("function"==typeof Y&&(ee=Y,Y=null),Y=bu({},Ze.defaults,Y||{}),Il(Y),ee){var D,T=Y.highlight;try{D=ms.lex(W,Y)}catch(he){return ee(he)}var V=function(fe){var me;if(!fe)try{Y.walkTokens&&Ze.walkTokens(D,Y.walkTokens),me=_o.parse(D,Y)}catch(We){fe=We}return Y.highlight=T,fe?ee(fe):ee(null,me)};if(!T||T.length<3||(delete Y.highlight,!D.length))return V();var J=0;return Ze.walkTokens(D,function(he){"code"===he.type&&(J++,setTimeout(function(){T(he.text,he.lang,function(fe,me){if(fe)return V(fe);null!=me&&me!==he.text&&(he.text=me,he.escaped=!0),0==--J&&V()})},0))}),void(0===J&&V())}try{var $=ms.lex(W,Y);return Y.walkTokens&&Ze.walkTokens($,Y.walkTokens),_o.parse($,Y)}catch(he){if(he.message+="\nPlease report this to https://github.com/markedjs/marked.",Y.silent)return"<p>An error occurred:</p><pre>"+Mc(he.message+"",!0)+"</pre>";throw he}}return Ze.options=Ze.setOptions=function(W){return bu(Ze.defaults,W),wu(Ze.defaults),Ze},Ze.getDefaults=Md,Ze.defaults=Ys,Ze.use=function(){for(var W=this,Y=arguments.length,ee=new Array(Y),T=0;T<Y;T++)ee[T]=arguments[T];var J,D=bu.apply(void 0,[{}].concat(ee)),V=Ze.defaults.extensions||{renderers:{},childTokens:{}};ee.forEach(function($){if($.extensions&&(J=!0,$.extensions.forEach(function(fe){if(!fe.name)throw new Error("extension name required");if(fe.renderer){var me=V.renderers?V.renderers[fe.name]:null;V.renderers[fe.name]=me?function(){for(var We=arguments.length,rn=new Array(We),Tn=0;Tn<We;Tn++)rn[Tn]=arguments[Tn];var Xt=fe.renderer.apply(this,rn);return!1===Xt&&(Xt=me.apply(this,rn)),Xt}:fe.renderer}if(fe.tokenizer){if(!fe.level||"block"!==fe.level&&"inline"!==fe.level)throw new Error("extension level must be 'block' or 'inline'");V[fe.level]?V[fe.level].unshift(fe.tokenizer):V[fe.level]=[fe.tokenizer],fe.start&&("block"===fe.level?V.startBlock?V.startBlock.push(fe.start):V.startBlock=[fe.start]:"inline"===fe.level&&(V.startInline?V.startInline.push(fe.start):V.startInline=[fe.start]))}fe.childTokens&&(V.childTokens[fe.name]=fe.childTokens)})),$.renderer&&function(){var fe=Ze.defaults.renderer||new Ol,me=function(Tn){var Xt=fe[Tn];fe[Tn]=function(){for(var St=arguments.length,sn=new Array(St),hi=0;hi<St;hi++)sn[hi]=arguments[hi];var Xi=$.renderer[Tn].apply(fe,sn);return!1===Xi&&(Xi=Xt.apply(fe,sn)),Xi}};for(var We in $.renderer)me(We);D.renderer=fe}(),$.tokenizer&&function(){var fe=Ze.defaults.tokenizer||new Sc,me=function(Tn){var Xt=fe[Tn];fe[Tn]=function(){for(var St=arguments.length,sn=new Array(St),hi=0;hi<St;hi++)sn[hi]=arguments[hi];var Xi=$.tokenizer[Tn].apply(fe,sn);return!1===Xi&&(Xi=Xt.apply(fe,sn)),Xi}};for(var We in $.tokenizer)me(We);D.tokenizer=fe}(),$.walkTokens){var he=Ze.defaults.walkTokens;D.walkTokens=function(fe){$.walkTokens.call(W,fe),he&&he(fe)}}J&&(D.extensions=V),Ze.setOptions(D)})},Ze.walkTokens=function(W,Y){for(var D,ee=function(){var J=D.value;switch(Y(J),J.type){case"table":for(var he,$=gt(J.tokens.header);!(he=$()).done;)Ze.walkTokens(he.value,Y);for(var We,me=gt(J.tokens.cells);!(We=me()).done;)for(var Xt,Tn=gt(We.value);!(Xt=Tn()).done;)Ze.walkTokens(Xt.value,Y);break;case"list":Ze.walkTokens(J.items,Y);break;default:Ze.defaults.extensions&&Ze.defaults.extensions.childTokens&&Ze.defaults.extensions.childTokens[J.type]?Ze.defaults.extensions.childTokens[J.type].forEach(function(sn){Ze.walkTokens(J[sn],Y)}):J.tokens&&Ze.walkTokens(J.tokens,Y)}},T=gt(W);!(D=T()).done;)ee()},Ze.parseInline=function(W,Y){if(null==W)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof W)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(W)+", string expected");Y=bu({},Ze.defaults,Y||{}),Il(Y);try{var ee=ms.lexInline(W,Y);return Y.walkTokens&&Ze.walkTokens(ee,Y.walkTokens),_o.parseInline(ee,Y)}catch(T){if(T.message+="\nPlease report this to https://github.com/markedjs/marked.",Y.silent)return"<p>An error occurred:</p><pre>"+Mc(T.message+"",!0)+"</pre>";throw T}},Ze.Parser=_o,Ze.parser=_o.parse,Ze.Renderer=Ol,Ze.TextRenderer=vu,Ze.Lexer=ms,Ze.lexer=ms.lex,Ze.Tokenizer=Sc,Ze.Slugger=yu,Ze.parse=Ze,Ze}()},310:(ft,qe,xe)=>{"use strict";var bt=xe(948);Object.defineProperty(qe,"__esModule",{value:!0}),qe.isMobile=function(){return void 0!==F.window.orientation},qe.default=function(mt){if(!mt&&!(0,gt.default)())return"Node";if((0,It.default)(mt))return"Electron";var zt="undefined"!=typeof navigator?navigator:{},gn=mt||zt.userAgent||"";if(gn.indexOf("Edge")>-1)return"Edge";var Ne=-1!==gn.indexOf("MSIE "),$e=-1!==gn.indexOf("Trident/");return Ne||$e?"IE":F.window.chrome?"Chrome":F.window.safari?"Safari":F.window.mozInnerScreenX?"Firefox":"Unknown"};var F=xe(151),gt=bt(xe(602)),It=bt(xe(344))},151:(ft,qe,xe)=>{"use strict";var bt=xe(948);Object.defineProperty(qe,"__esModule",{value:!0}),qe.console=qe.process=qe.document=qe.global=qe.window=qe.self=void 0;var F=bt(xe(321)),gt={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,F.default)(process))&&process};qe.self=gt.self||gt.window||gt.global,qe.window=gt.window||gt.self||gt.global,qe.global=gt.global||gt.self||gt.window,qe.document=gt.document||{},qe.process=gt.process||{};var gn=console;qe.console=gn},761:(ft,qe,xe)=>{"use strict";var F=xe(948),gt=xe(321);Object.defineProperty(qe,"CO",{enumerable:!0,get:function(){return It.global}}),Object.defineProperty(qe,"jU",{enumerable:!0,get:function(){return ct.default}}),Object.defineProperty(qe,"qs",{enumerable:!0,get:function(){return Jt.default}});var It=xe(151),ct=gn(xe(602)),Jt=gn(xe(310));F(xe(344));function zt(Ne){if("function"!=typeof WeakMap)return null;var $e=new WeakMap,Wt=new WeakMap;return(zt=function(Re){return Re?Wt:$e})(Ne)}function gn(Ne,$e){if(!$e&&Ne&&Ne.__esModule)return Ne;if(null===Ne||"object"!==gt(Ne)&&"function"!=typeof Ne)return{default:Ne};var Wt=zt($e);if(Wt&&Wt.has(Ne))return Wt.get(Ne);var ze={},Re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mn in Ne)if("default"!==mn&&Object.prototype.hasOwnProperty.call(Ne,mn)){var Xe=Re?Object.getOwnPropertyDescriptor(Ne,mn):null;Xe&&(Xe.get||Xe.set)?Object.defineProperty(ze,mn,Xe):ze[mn]=Ne[mn]}return ze.default=Ne,Wt&&Wt.set(Ne,ze),ze}},602:(ft,qe,xe)=>{"use strict";var bt=xe(948);Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=It,qe.isBrowserMainThread=function(){return It()&&"undefined"!=typeof document};var F=bt(xe(321)),gt=bt(xe(344));function It(){return!("object"===("undefined"==typeof process?"undefined":(0,F.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,gt.default)()}},344:(ft,qe,xe)=>{"use strict";var bt=xe(948);Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=function(It){if("undefined"!=typeof window&&"object"===(0,F.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,F.default)(process.versions)&&Boolean(process.versions.electron))return!0;var ct="object"===("undefined"==typeof navigator?"undefined":(0,F.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,Jt=It||ct;return!!(Jt&&Jt.indexOf("Electron")>=0)};var F=bt(xe(321))},941:ft=>{var qe=function(xe){"use strict";var gt,bt=Object.prototype,F=bt.hasOwnProperty,It="function"==typeof Symbol?Symbol:{},ct=It.iterator||"@@iterator",Jt=It.asyncIterator||"@@asyncIterator",mt=It.toStringTag||"@@toStringTag";function zt(G,ce,De){return Object.defineProperty(G,ce,{value:De,enumerable:!0,configurable:!0,writable:!0}),G[ce]}try{zt({},"")}catch(G){zt=function(ce,De,re){return ce[De]=re}}function gn(G,ce,De,re){var it=Object.create((ce&&ce.prototype instanceof Xe?ce:Xe).prototype),Hn=new $t(re||[]);return it._invoke=function(G,ce,De){var re=$e;return function(it,Hn){if(re===ze)throw new Error("Generator is already running");if(re===Re){if("throw"===it)throw Hn;return Ai()}for(De.method=it,De.arg=Hn;;){var ii=De.delegate;if(ii){var Ur=ue(ii,De);if(Ur){if(Ur===mn)continue;return Ur}}if("next"===De.method)De.sent=De._sent=De.arg;else if("throw"===De.method){if(re===$e)throw re=Re,De.arg;De.dispatchException(De.arg)}else"return"===De.method&&De.abrupt("return",De.arg);re=ze;var ri=Ne(G,ce,De);if("normal"===ri.type){if(re=De.done?Re:Wt,ri.arg===mn)continue;return{value:ri.arg,done:De.done}}"throw"===ri.type&&(re=Re,De.method="throw",De.arg=ri.arg)}}}(G,De,Hn),it}function Ne(G,ce,De){try{return{type:"normal",arg:G.call(ce,De)}}catch(re){return{type:"throw",arg:re}}}xe.wrap=gn;var $e="suspendedStart",Wt="suspendedYield",ze="executing",Re="completed",mn={};function Xe(){}function Ln(){}function At(){}var nn={};zt(nn,ct,function(){return this});var Bn=Object.getPrototypeOf,ni=Bn&&Bn(Bn(Wn([])));ni&&ni!==bt&&F.call(ni,ct)&&(nn=ni);var Un=At.prototype=Xe.prototype=Object.create(nn);function di(G){["next","throw","return"].forEach(function(ce){zt(G,ce,function(De){return this._invoke(ce,De)})})}function Bi(G,ce){function De(it,Hn,ii,Ur){var ri=Ne(G[it],G,Hn);if("throw"!==ri.type){var Ps=ri.arg,On=Ps.value;return On&&"object"==typeof On&&F.call(On,"__await")?ce.resolve(On.__await).then(function(In){De("next",In,ii,Ur)},function(In){De("throw",In,ii,Ur)}):ce.resolve(On).then(function(In){Ps.value=In,ii(Ps)},function(In){return De("throw",In,ii,Ur)})}Ur(ri.arg)}var re;this._invoke=function(it,Hn){function ii(){return new ce(function(Ur,ri){De(it,Hn,Ur,ri)})}return re=re?re.then(ii,ii):ii()}}function ue(G,ce){var De=G.iterator[ce.method];if(De===gt){if(ce.delegate=null,"throw"===ce.method){if(G.iterator.return&&(ce.method="return",ce.arg=gt,ue(G,ce),"throw"===ce.method))return mn;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return mn}var re=Ne(De,G.iterator,ce.arg);if("throw"===re.type)return ce.method="throw",ce.arg=re.arg,ce.delegate=null,mn;var et=re.arg;return et?et.done?(ce[G.resultName]=et.value,ce.next=G.nextLoc,"return"!==ce.method&&(ce.method="next",ce.arg=gt),ce.delegate=null,mn):et:(ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,mn)}function Ut(G){var ce={tryLoc:G[0]};1 in G&&(ce.catchLoc=G[1]),2 in G&&(ce.finallyLoc=G[2],ce.afterLoc=G[3]),this.tryEntries.push(ce)}function Lt(G){var ce=G.completion||{};ce.type="normal",delete ce.arg,G.completion=ce}function $t(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(Ut,this),this.reset(!0)}function Wn(G){if(G){var ce=G[ct];if(ce)return ce.call(G);if("function"==typeof G.next)return G;if(!isNaN(G.length)){var De=-1,re=function et(){for(;++De<G.length;)if(F.call(G,De))return et.value=G[De],et.done=!1,et;return et.value=gt,et.done=!0,et};return re.next=re}}return{next:Ai}}function Ai(){return{value:gt,done:!0}}return Ln.prototype=At,zt(Un,"constructor",At),zt(At,"constructor",Ln),Ln.displayName=zt(At,mt,"GeneratorFunction"),xe.isGeneratorFunction=function(G){var ce="function"==typeof G&&G.constructor;return!!ce&&(ce===Ln||"GeneratorFunction"===(ce.displayName||ce.name))},xe.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,At):(G.__proto__=At,zt(G,mt,"GeneratorFunction")),G.prototype=Object.create(Un),G},xe.awrap=function(G){return{__await:G}},di(Bi.prototype),zt(Bi.prototype,Jt,function(){return this}),xe.AsyncIterator=Bi,xe.async=function(G,ce,De,re,et){void 0===et&&(et=Promise);var it=new Bi(gn(G,ce,De,re),et);return xe.isGeneratorFunction(ce)?it:it.next().then(function(Hn){return Hn.done?Hn.value:it.next()})},di(Un),zt(Un,mt,"Generator"),zt(Un,ct,function(){return this}),zt(Un,"toString",function(){return"[object Generator]"}),xe.keys=function(G){var ce=[];for(var De in G)ce.push(De);return ce.reverse(),function re(){for(;ce.length;){var et=ce.pop();if(et in G)return re.value=et,re.done=!1,re}return re.done=!0,re}},xe.values=Wn,$t.prototype={constructor:$t,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=gt,this.done=!1,this.delegate=null,this.method="next",this.arg=gt,this.tryEntries.forEach(Lt),!G)for(var ce in this)"t"===ce.charAt(0)&&F.call(this,ce)&&!isNaN(+ce.slice(1))&&(this[ce]=gt)},stop:function(){this.done=!0;var ce=this.tryEntries[0].completion;if("throw"===ce.type)throw ce.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var ce=this;function De(Ur,ri){return it.type="throw",it.arg=G,ce.next=Ur,ri&&(ce.method="next",ce.arg=gt),!!ri}for(var re=this.tryEntries.length-1;re>=0;--re){var et=this.tryEntries[re],it=et.completion;if("root"===et.tryLoc)return De("end");if(et.tryLoc<=this.prev){var Hn=F.call(et,"catchLoc"),ii=F.call(et,"finallyLoc");if(Hn&&ii){if(this.prev<et.catchLoc)return De(et.catchLoc,!0);if(this.prev<et.finallyLoc)return De(et.finallyLoc)}else if(Hn){if(this.prev<et.catchLoc)return De(et.catchLoc,!0)}else{if(!ii)throw new Error("try statement without catch or finally");if(this.prev<et.finallyLoc)return De(et.finallyLoc)}}}},abrupt:function(G,ce){for(var De=this.tryEntries.length-1;De>=0;--De){var re=this.tryEntries[De];if(re.tryLoc<=this.prev&&F.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var et=re;break}}et&&("break"===G||"continue"===G)&&et.tryLoc<=ce&&ce<=et.finallyLoc&&(et=null);var it=et?et.completion:{};return it.type=G,it.arg=ce,et?(this.method="next",this.next=et.finallyLoc,mn):this.complete(it)},complete:function(G,ce){if("throw"===G.type)throw G.arg;return"break"===G.type||"continue"===G.type?this.next=G.arg:"return"===G.type?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):"normal"===G.type&&ce&&(this.next=ce),mn},finish:function(G){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var De=this.tryEntries[ce];if(De.finallyLoc===G)return this.complete(De.completion,De.afterLoc),Lt(De),mn}},catch:function(G){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var De=this.tryEntries[ce];if(De.tryLoc===G){var re=De.completion;if("throw"===re.type){var et=re.arg;Lt(De)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(G,ce,De){return this.delegate={iterator:Wn(G),resultName:ce,nextLoc:De},"next"===this.method&&(this.arg=gt),mn}},xe}(ft.exports);try{regeneratorRuntime=qe}catch(xe){"object"==typeof globalThis?globalThis.regeneratorRuntime=qe:Function("r","regeneratorRuntime = r")(qe)}},81:(ft,qe,xe)=>{"use strict";var bt={};xe.r(bt),xe.d(bt,{decode:()=>nCe,encode:()=>iCe});var F={};xe.r(F),xe.d(F,{decode:()=>lCe,encode:()=>cCe});var gt={};xe.r(gt),xe.d(gt,{decode:()=>dCe,encode:()=>hCe});var It={};function ct(n){return"function"==typeof n}xe.r(It),xe.d(It,{decode:()=>gCe,encode:()=>mCe});let Jt=!1;const mt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else Jt&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Jt=n},get useDeprecatedSynchronousErrorHandling(){return Jt}};function zt(n){setTimeout(()=>{throw n},0)}const gn={closed:!0,next(n){},error(n){if(mt.useDeprecatedSynchronousErrorHandling)throw n;zt(n)},complete(){}},Ne=Array.isArray||(n=>n&&"number"==typeof n.length);function $e(n){return null!==n&&"object"==typeof n}const ze=(()=>{function n(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return n.prototype=Object.create(Error.prototype),n})();class Re{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof Re)e.remove(this);else if(null!==e)for(let o=0;o<e.length;++o)e[o].remove(this);if(ct(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){t=o instanceof ze?mn(o.errors):[o]}}if(Ne(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if($e(l))try{l.unsubscribe()}catch(c){t=t||[],c instanceof ze?t=t.concat(mn(c.errors)):t.push(c)}}}if(t)throw new ze(t)}add(t){let e=t;if(!t)return Re.EMPTY;switch(typeof t){case"function":e=new Re(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof Re)){const s=e;e=new Re,e._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:i}=e;if(null===i)e._parentOrParents=this;else if(i instanceof Re){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}}}var n;function mn(n){return n.reduce((t,e)=>t.concat(e instanceof ze?e.errors:e),[])}Re.EMPTY=((n=new Re).closed=!0,n);const Xe="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class At extends Re{constructor(t,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=gn;break;case 1:if(!t){this.destination=gn;break}if("object"==typeof t){t instanceof At?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new nn(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new nn(this,t,e,i)}}[Xe](){return this}static create(t,e,i){const r=new At(t,e,i);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class nn extends At{constructor(t,e,i,r){super(),this._parentSubscriber=t;let s,o=this;ct(e)?s=e:e&&(s=e.next,i=e.error,r=e.complete,e!==gn&&(o=Object.create(e),ct(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;mt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=mt;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):zt(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;zt(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);mt.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(i){if(this.unsubscribe(),mt.useDeprecatedSynchronousErrorHandling)throw i;zt(i)}}__tryOrSetError(t,e,i){if(!mt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(r){return mt.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(zt(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const Un="function"==typeof Symbol&&Symbol.observable||"@@observable";function di(n){return n}function Bi(...n){return Ie(n)}function Ie(n){return 0===n.length?di:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let ue=(()=>{class n{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const{operator:s}=this,o=function(n,t,e){if(n){if(n instanceof At)return n;if(n[Xe])return n[Xe]()}return n||t||e?new At(n,t,e):new At(gn)}(e,i,r);if(o.add(s?s.call(o,this.source):this.source||mt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),mt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){mt.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=i),function(n){for(;n;){const{closed:t,destination:e,isStopped:i}=n;if(t||i)return!1;n=e&&e instanceof At?e:null}return!0}(e)?e.error(i):console.warn(i)}}forEach(e,i){return new(i=Ut(i))((r,s)=>{let o;o=this.subscribe(a=>{try{e(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(e){const{source:i}=this;return i&&i.subscribe(e)}[Un](){return this}pipe(...e){return 0===e.length?this:Ie(e)(this)}toPromise(e){return new(e=Ut(e))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=t=>new n(t),n})();function Ut(n){if(n||(n=mt.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const $t=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class Wn extends Re{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class Ai extends At{constructor(t){super(t),this.destination=t}}let G=(()=>{class n extends ue{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Xe](){return new Ai(this)}lift(e){const i=new ce(this,this);return i.operator=e,i}next(e){if(this.closed)throw new $t;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(e)}}error(e){if(this.closed)throw new $t;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(e);this.observers.length=0}complete(){if(this.closed)throw new $t;this.isStopped=!0;const{observers:e}=this,i=e.length,r=e.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new $t;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new $t;return this.hasError?(e.error(this.thrownError),Re.EMPTY):this.isStopped?(e.complete(),Re.EMPTY):(this.observers.push(e),new Wn(this,e))}asObservable(){const e=new ue;return e.source=this,e}}return n.create=(t,e)=>new ce(t,e),n})();class ce extends G{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):Re.EMPTY}}function De(n){return n&&"function"==typeof n.schedule}function re(n,t){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new et(n,t))}}class et{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new it(t,this.project,this.thisArg))}}class it extends At{constructor(t,e,i){super(t),this.project=e,this.count=0,this.thisArg=i||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const Hn=n=>t=>{for(let e=0,i=n.length;e<i&&!t.closed;e++)t.next(n[e]);t.complete()},ri="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ye(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Vi=n=>{if(n&&"function"==typeof n[Un])return(n=>t=>{const e=n[Un]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)})(n);if(dt(n))return Hn(n);if(Ye(n))return(n=>t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,zt),t))(n);if(n&&"function"==typeof n[ri])return(n=>t=>{const e=n[ri]();for(;;){let i;try{i=e.next()}catch(r){return t.error(r),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t})(n);{const e=`You provided ${$e(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function ji(n,t){return new ue(e=>{const i=new Re;let r=0;return i.add(t.schedule(function(){r!==n.length?(e.next(n[r++]),e.closed||i.add(this.schedule())):e.complete()})),i})}function gi(n,t){return t?function(n,t){if(null!=n){if(function(n){return n&&"function"==typeof n[Un]}(n))return function(n,t){return new ue(e=>{const i=new Re;return i.add(t.schedule(()=>{const r=n[Un]();i.add(r.subscribe({next(s){i.add(t.schedule(()=>e.next(s)))},error(s){i.add(t.schedule(()=>e.error(s)))},complete(){i.add(t.schedule(()=>e.complete()))}}))})),i})}(n,t);if(Ye(n))return function(n,t){return new ue(e=>{const i=new Re;return i.add(t.schedule(()=>n.then(r=>{i.add(t.schedule(()=>{e.next(r),i.add(t.schedule(()=>e.complete()))}))},r=>{i.add(t.schedule(()=>e.error(r)))}))),i})}(n,t);if(dt(n))return ji(n,t);if(function(n){return n&&"function"==typeof n[ri]}(n)||"string"==typeof n)return function(n,t){if(!n)throw new Error("Iterable cannot be null");return new ue(e=>{const i=new Re;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=n[ri](),i.add(t.schedule(function(){if(e.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void e.error(a)}o?e.complete():(e.next(s),this.schedule())}))})),i})}(n,t)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,t):n instanceof ue?n:new ue(Vi(n))}class gs extends At{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class mi extends At{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Uo(n,t){if(t.closed)return;if(n instanceof ue)return n.subscribe(t);let e;try{e=Vi(n)(t)}catch(i){t.error(i)}return e}function _i(n,t,e=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(_i((r,s)=>gi(n(r,s)).pipe(re((o,a)=>t(r,o,s,a))),e)):("number"==typeof t&&(e=t),i=>i.lift(new kh(n,e)))}class kh{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new Dl(t,this.project,this.concurrent))}}class Dl extends mi{constructor(t,e,i=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new gs(this),i=this.destination;i.add(e);const r=Uo(t,e);r!==e&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function mo(n=Number.POSITIVE_INFINITY){return _i(di,n)}function qa(n,t){return t?ji(n,t):new ue(Hn(n))}function zi(...n){let t=Number.POSITIVE_INFINITY,e=null,i=n[n.length-1];return De(i)?(e=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(t=n.pop())):"number"==typeof i&&(t=n.pop()),null===e&&1===n.length&&n[0]instanceof ue?n[0]:mo(t)(qa(n,e))}function ms(){return function(t){return t.lift(new _o(t))}}class _o{constructor(t){this.connectable=t}call(t,e){const{connectable:i}=this;i._refCount++;const r=new Sc(t,i),s=e.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class Sc extends At{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:i}=this,r=t._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Ol extends ue{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new Re,t.add(this.source.subscribe(new yu(this.getSubject(),this))),t.closed&&(this._connection=null,t=Re.EMPTY)),t}refCount(){return ms()(this)}}const vu=(()=>{const n=Ol.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class yu extends Ai{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Mc(n,t){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof t)return i.lift(new Md(r,t));const s=Object.create(i,vu);return s.source=i,s.subjectFactory=r,s}}class Md{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(t);return s.add(e.subscribe(r)),s}}function wu(){return new G}function Ys(){return n=>ms()(Mc(wu)(n))}function Ze(n){for(let t in n)if(n[t]===Ze)return t;throw Error("Could not find renamed property on target object.")}function Cu(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function W(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(W).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Y(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const ee=Ze({__forward_ref__:Ze});function T(n){return n.__forward_ref__=T,n.toString=function(){return W(this())},n}function D(n){return V(n)?n():n}function V(n){return"function"==typeof n&&n.hasOwnProperty(ee)&&n.__forward_ref__===T}class $ extends Error{constructor(t,e){super(function(n,t){return`${n?`NG0${n}: `:""}${t}`}(t,e)),this.code=t}}function me(n){return"string"==typeof n?n:null==n?"":String(n)}function We(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():me(n)}function St(n,t){const e=t?` in ${t}`:"";throw new $("201",`No provider for ${We(n)} found${e}`)}function Zi(n,t){null==n&&function(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function pe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ae(n){return{providers:n.providers||[],imports:n.imports||[]}}function ur(n){return xc(n,va)||xc(n,Xa)}function xc(n,t){return n.hasOwnProperty(t)?n[t]:null}function Au(n){return n&&(n.hasOwnProperty(Rl)||n.hasOwnProperty(Tp))?n[Rl]:null}const va=Ze({\u0275prov:Ze}),Rl=Ze({\u0275inj:Ze}),Xa=Ze({ngInjectableDef:Ze}),Tp=Ze({ngInjectorDef:Ze});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let kl;function ya(n){const t=kl;return kl=n,t}function Td(n,t,e){const i=ur(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&xt.Optional?null:void 0!==t?t:void St(W(n),"Injector")}function R(n){return{toString:n}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),Ue=(()=>((Ue=Ue||{})[Ue.Emulated=0]="Emulated",Ue[Ue.None=2]="None",Ue[Ue.ShadowDom=3]="ShadowDom",Ue))();const _n="undefined"!=typeof globalThis&&globalThis,gr="undefined"!=typeof window&&window,Cr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jr="undefined"!=typeof global&&global,pn=_n||Jr||gr||Cr,xd={},Ei=[],Dp=Ze({\u0275cmp:Ze}),p_=Ze({\u0275dir:Ze}),Nh=Ze({\u0275pipe:Ze}),M0=Ze({\u0275mod:Ze}),VM=Ze({\u0275loc:Ze}),Fl=Ze({\u0275fac:Ze}),Lh=Ze({__NG_ELEMENT_ID__:Ze});let jM=0;function Ge(n){return R(()=>{const e={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ei,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ue.Emulated,id:"c",styles:n.styles||Ei,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=jM++,i.inputs=D0(n.inputs,e),i.outputs=D0(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(A0):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(T0):null,i})}function A0(n){return si(n)||function(n){return n[p_]||null}(n)}function T0(n){return function(n){return n[Nh]||null}(n)}const x0={};function ke(n){return R(()=>{const t={type:n.type,bootstrap:n.bootstrap||Ei,declarations:n.declarations||Ei,imports:n.imports||Ei,exports:n.exports||Ei,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(x0[n.id]=n.type),t})}function D0(n,t){if(null==n)return xd;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=i,t&&(t[r]=s)}return e}const _e=Ge;function _s(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function si(n){return n[Dp]||null}function yo(n,t){const e=n[M0]||null;if(!e&&!0===t)throw new Error(`Type ${W(n)} does not have '\u0275mod' property.`);return e}function Ho(n){return Array.isArray(n)&&"object"==typeof n[1]}function $o(n){return Array.isArray(n)&&!0===n[1]}function __(n){return 0!=(8&n.flags)}function Pd(n){return 2==(2&n.flags)}function Rd(n){return 1==(1&n.flags)}function Ca(n){return null!==n.template}function O0(n){return 0!=(512&n[2])}function Ic(n,t){return n.hasOwnProperty(Fl)?n[Fl]:null}class w_{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function oi(){return R0}function R0(n){return n.type.prototype.ngOnChanges&&(n.setInput=YM),qM}function qM(){const n=q(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===xd)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function YM(n,t,e,i){const r=q(n)||function(n,t){return n[Hh]=t}(n,{previous:xd,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[e],l=o[a];s[a]=new w_(l&&l.currentValue,t,o===xd),n[i]=t}oi.ngInherit=!0;const Hh="__ngSimpleChanges__";function q(n){return n[Hh]||null}const Kn="http://www.w3.org/2000/svg";let yi;function ki(n){return!!n.listen}const Du={createRenderer:(n,t)=>void 0!==yi?yi:"undefined"!=typeof document?document:void 0};function Ji(n){for(;Array.isArray(n);)n=n[0];return n}function $h(n,t){return Ji(t[n])}function Rs(n,t){return Ji(t[n.index])}function S_(n,t){return n.data[t]}function kd(n,t){return n[t]}function ys(n,t){const e=t[n];return Ho(e)?e:e[0]}function Bl(n){return 4==(4&n[2])}function Fd(n){return 128==(128&n[2])}function Sa(n,t){return null==t?null:n[t]}function M_(n){n[18]=0}function Pp(n,t){n[5]+=t;let e=n,i=n[3];for(;null!==i&&(1===t&&1===e[5]||-1===t&&0===e[5]);)i[5]+=t,e=i,i=i[3]}const Kt={lFrame:Iu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function F0(){return Kt.bindingsEnabled}function Me(){return Kt.lFrame.lView}function Pn(){return Kt.lFrame.tView}function Zn(n){return Kt.lFrame.contextLView=n,n[8]}function Ir(){let n=A_();for(;null!==n&&64===n.type;)n=n.parent;return n}function A_(){return Kt.lFrame.currentTNode}function Qa(n,t){const e=Kt.lFrame;e.currentTNode=n,e.isParent=t}function vr(){return Kt.lFrame.isParent}function $r(){Kt.lFrame.isParent=!1}function qh(){return Kt.isInCheckNoChangesMode}function kp(n){Kt.isInCheckNoChangesMode=n}function ts(){const n=Kt.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Zs(){return Kt.lFrame.bindingIndex}function Ma(){return Kt.lFrame.bindingIndex++}function wo(n){const t=Kt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Nd(n,t){const e=Kt.lFrame;e.bindingIndex=e.bindingRootIndex=n,T_(t)}function T_(n){Kt.lFrame.currentDirectiveIndex=n}function x_(n){const t=Kt.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function N0(){return Kt.lFrame.currentQueryIndex}function D_(n){Kt.lFrame.currentQueryIndex=n}function Np(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function Ld(n,t,e){if(e&xt.SkipSelf){let r=t,s=n;for(;!(r=r.parent,null!==r||e&xt.Host||(r=Np(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,n=s}const i=Kt.lFrame=O();return i.currentTNode=t,i.lView=n,!0}function Kh(n){const t=O(),e=n[1];Kt.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function O(){const n=Kt.lFrame,t=null===n?null:n.child;return null===t?Iu(n):t}function Iu(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function Zh(){const n=Kt.lFrame;return Kt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Co=Zh;function yn(){const n=Zh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ks(){return Kt.lFrame.selectedIndex}function Qs(n){Kt.lFrame.selectedIndex=n}function dr(){const n=Kt.lFrame;return S_(n.tView,n.selectedIndex)}function Lp(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-e,o),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-e,l),c&&((n.viewHooks||(n.viewHooks=[])).push(e,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(e,u)}}function Bp(n,t,e){Ja(n,t,3,e)}function Vp(n,t,e,i){(3&n[2])===e&&Ja(n,t,e,i)}function O_(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function Ja(n,t,e,i){const s=null!=i?i:-1,o=t.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=i&&a>=i)break}else t[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(oA(n,e,t,l),n[18]=(4294901760&n[18])+l+2),l++}function oA(n,t,e,i){const r=e[i]<0,s=e[i+1],a=n[r?-e[i]:e[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Qh{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function jp(n,t,e){const i=ki(n);let r=0;for(;r<e.length;){const s=e[r];if("number"==typeof s){if(0!==s)break;r++;const o=e[r++],a=e[r++],l=e[r++];i?n.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=s,a=e[++r];P_(o)?i&&n.setProperty(t,o,a):i?n.setAttribute(t,o,a):t.setAttribute(o,a),r++}}return r}function V0(n){return 3===n||4===n||6===n}function P_(n){return 64===n.charCodeAt(0)}function Jh(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||R_(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function R_(n,t,e,i,r){let s=0,o=n.length;if(-1===t)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function j0(n){return-1!==n}function Bd(n){return 32767&n}function el(n,t){let e=function(n){return n>>16}(n),i=t;for(;e>0;)i=i[15],e--;return i}let Vd=!0;function zp(n){const t=Vd;return Vd=n,t}let F_=0;function bs(n,t){const e=Up(n,t);if(-1!==e)return e;const i=t[1];i.firstCreatePass&&(n.injectorIndex=t.length,N_(i.data,n),N_(t,null),N_(i.blueprint,null));const r=ef(n,t),s=n.injectorIndex;if(j0(r)){const o=Bd(r),a=el(r,t),l=a[1].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function N_(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Up(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function ef(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Rc(n,t,e){!function(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Lh)&&(i=e[Lh]),null==i&&(i=e[Lh]=F_++);const r=255&i;t.data[n+(r>>5)]|=1<<r}(n,t,e)}function L_(n,t,e){if(e&xt.Optional)return n;St(t,"NodeInjector")}function U0(n,t,e,i){if(e&xt.Optional&&void 0===i&&(i=null),0==(e&(xt.Self|xt.Host))){const r=n[9],s=ya(void 0);try{return r?r.get(t,i,e&xt.Optional):Td(t,i,e&xt.Optional)}finally{ya(s)}}return L_(i,t,e)}function tf(n,t,e,i=xt.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Lh)?n[Lh]:void 0;return"number"==typeof t?t>=0?255&t:$0:t}(e);if("function"==typeof s){if(!Ld(t,n,i))return i&xt.Host?L_(r,e,i):U0(t,e,i,r);try{const o=s(i);if(null!=o||i&xt.Optional)return o;St(e)}finally{Co()}}else if("number"==typeof s){let o=null,a=Up(n,t),l=-1,c=i&xt.Host?t[16][6]:null;for((-1===a||i&xt.SkipSelf)&&(l=-1===a?ef(n,t):t[a+8],-1!==l&&nf(i,!1)?(o=t[1],a=Bd(l),t=el(l,t)):a=-1);-1!==a;){const u=t[1];if(Hp(s,a,u.data)){const h=ns(a,t,e,o,i,c);if(h!==H0)return h}l=t[a+8],-1!==l&&nf(i,t[1].data[a+8]===c)&&Hp(s,a,t)?(o=u,a=Bd(l),t=el(l,t)):a=-1}}}return U0(t,e,i,r)}const H0={};function $0(){return new Wo(Ir(),Me())}function ns(n,t,e,i,r,s){const o=t[1],a=o.data[n+8],u=jd(a,o,e,null==i?Pd(a)&&Vd:i!=o&&0!=(3&a.type),r&xt.Host&&s===a);return null!==u?zd(t,o,u,a):H0}function jd(n,t,e,i,r){const s=n.providerIndexes,o=t.data,a=1048575&s,l=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<p;g++){const m=o[g];if(g<l&&e===m||g>=l&&m.type===e)return g}if(r){const g=o[l];if(g&&Ca(g)&&g.type===e)return l}return null}function zd(n,t,e,i){let r=n[e];const s=t.data;if(function(n){return n instanceof Qh}(r)){const o=r;o.resolving&&function(n,t){throw new $("200",`Circular dependency in DI detected for ${n}`)}(We(s[e]));const a=zp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ya(o.injectImpl):null;Ld(n,i,xt.Default);try{r=n[e]=o.factory(void 0,s,n,i),t.firstCreatePass&&e>=i.directiveStart&&function(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const o=R0(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s))}(e,s[e],t)}finally{null!==l&&ya(l),zp(a),o.resolving=!1,Co()}}return r}function Hp(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function nf(n,t){return!(n&xt.Self||n&xt.Host&&t)}class Wo{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return tf(this._tNode,this._lView,t,void 0,e)}}function qn(n){return R(()=>{const t=n.prototype.constructor,e=t[Fl]||is(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Fl]||is(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function is(n){return V(n)?()=>{const t=is(D(n));return t&&t()}:Ic(n)}function ws(n){return function(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const s=e[r];if(V0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(Ir(),n)}const Hd="__parameters__";function xa(n,t,e){return R(()=>{const i=function(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(Hd)?l[Hd]:Object.defineProperty(l,Hd,{value:[]})[Hd];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ee{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=pe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ku=Function;function qo(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)?(t===n&&(t=n.slice(0,e)),qo(i,t)):t!==n&&t.push(i)}return t}function Yo(n,t){n.forEach(e=>Array.isArray(e)?Yo(e,t):t(e))}function sf(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function jl(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Fc(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function Eo(n,t,e){let i=rs(n,t);return i>=0?n[1|i]=e:(i=~i,function(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function H_(n,t){const e=rs(n,t);if(e>=0)return n[1|e]}function rs(n,t){return function(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<e];if(t===o)return s<<e;o>t?r=s:i=s+1}return~(r<<e)}(n,t,1)}const Lu={},Yp="__NG_DI_FLAG__",Lc="ngTempTokenPath",Bc=/\n/gm,il="__source",Xp=Ze({provide:String,useValue:Ze});let Bu;function Wd(n){const t=Bu;return Bu=n,t}function wA(n,t=xt.Default){if(void 0===Bu)throw new Error("inject() must be called from an injection context");return null===Bu?Td(n,void 0,t):Bu.get(n,t&xt.Optional?null:void 0,t)}function I(n,t=xt.Default){return(kl||wA)(D(n),t)}const Vc=I;function Vu(n){const t=[];for(let e=0;e<n.length;e++){const i=D(n[e]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=xt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=K0(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(I(r,s))}else t.push(I(i))}return t}function qd(n,t){return n[Yp]=t,n.prototype[Yp]=t,n}function K0(n){return n[Yp]}function Fs(n,t,e,i){const r=n[Lc];throw t[il]&&r.unshift(t[il]),n.message=function(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=W(t);if(Array.isArray(t))r=t.map(W).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):W(a)))}r=`{${s.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(Bc,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[Lc]=null,n}const Yd=qd(xa("Inject",n=>({token:n})),-1),Sr=qd(xa("Optional"),8),rl=qd(xa("SkipSelf"),4);let Kd;function zu(n){var t;return(null===(t=function(){if(void 0===Kd&&(Kd=null,pn.trustedTypes))try{Kd=pn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Kd}())||void 0===t?void 0:t.createHTML(n))||n}class $l{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class X_ extends $l{getTypeName(){return"HTML"}}class K_ extends $l{getTypeName(){return"Style"}}class ng extends $l{getTypeName(){return"Script"}}class Zd extends $l{getTypeName(){return"URL"}}class Gt extends $l{getTypeName(){return"ResourceURL"}}function Cs(n){return n instanceof $l?n.changingThisBreaksApplicationSecurity:n}function Xo(n,t){const e=zc(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function zc(n){return n instanceof $l&&n.getTypeName()||null}class lw{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(zu(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class AA{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=zu(t),e;const i=this.inertDocument.createElement("body");return i.innerHTML=zu(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const TA=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xA=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Mo(n){return(n=String(n)).match(TA)||n.match(xA)?n:"unsafe:"+n}function Ss(n){return(n=String(n)).split(",").map(t=>Mo(t.trim())).join(", ")}function Ko(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function af(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const ig=Ko("area,br,col,hr,img,wbr"),uw=Ko("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dw=Ko("rp,rt"),Q_=af(ig,af(uw,Ko("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),af(dw,Ko("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),af(dw,uw)),J_=Ko("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ev=Ko("srcset"),tv=af(J_,ev,Ko("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ko("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PA=Ko("script,style,template");class nv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Q_.hasOwnProperty(e))return this.sanitizedSomething=!0,!PA.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!tv.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;J_[a]&&(l=Mo(l)),ev[a]&&(l=Ss(l)),this.buf.push(" ",o,'="',sg(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Q_.hasOwnProperty(e)&&!ig.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(sg(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const hw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lf=/([^\#-~ |!])/g;function sg(n){return n.replace(/&/g,"&amp;").replace(hw,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lf,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cf;function iv(n,t){let e=null;try{cf=cf||function(n){const t=new AA(n);return function(){try{return!!(new window.DOMParser).parseFromString(zu(""),"text/html")}catch(n){return!1}}()?new lw(t):t}(n);let i=t?String(t):"";e=cf.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=e.innerHTML,e=cf.getInertBodyElement(i)}while(i!==s);return zu((new nv).sanitizeChildren(Qd(e)||e))}finally{if(e){const i=Qd(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Qd(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var hn=(()=>((hn=hn||{})[hn.NONE=0]="NONE",hn[hn.HTML=1]="HTML",hn[hn.STYLE=2]="STYLE",hn[hn.SCRIPT=3]="SCRIPT",hn[hn.URL=4]="URL",hn[hn.RESOURCE_URL=5]="RESOURCE_URL",hn))();const ov="__ngContext__";function ss(n,t){n[ov]=t}function av(n){const t=function(n){return n[ov]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function ag(n){return n.ngOriginalError}function GA(n,...t){n.error(...t)}class Qo{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),i=this._findContext(t),r=function(n){return n&&n.ngErrorLogger||GA}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(t){return t?function(n){return n.ngDebugContext}(t)||this._findContext(ag(t)):null}_findOriginalError(t){let e=t&&ag(t);for(;e&&ag(e);)e=ag(e);return e||null}}const Ew=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pn))();function dv(n){return n.ownerDocument.defaultView}function cg(n){return n.ownerDocument}function ol(n){return n instanceof Function?n():n}var Ao=(()=>((Ao=Ao||{})[Ao.Important=1]="Important",Ao[Ao.DashCase=2]="DashCase",Ao))();function fv(n,t){return undefined(n,t)}function hf(n){const t=n[3];return $o(t)?t[3]:t}function eh(n){return xw(n[13])}function gv(n){return xw(n[4])}function xw(n){for(;null!==n&&!$o(n);)n=n[4];return n}function th(n,t,e,i,r){if(null!=i){let s,o=!1;$o(i)?s=i:Ho(i)&&(o=!0,i=i[0]);const a=Ji(i);0===n&&null!==e?null==r?Rw(t,e,a):al(t,e,a,r||null,!0):1===n&&null!==e?al(t,e,a,r||null,!0):2===n?function(n,t,e){const i=dg(n,t);i&&function(n,t,e,i){ki(n)?n.removeChild(t,e,i):t.removeChild(e)}(n,i,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=s&&function(n,t,e,i,r){const s=e[7];s!==Ji(e)&&th(t,n,i,s,r);for(let a=10;a<e.length;a++){const l=e[a];nh(l[1],l,n,t,i,s)}}(t,n,s,e,r)}}function _v(n,t,e){return ki(n)?n.createElement(t,e):null===e?n.createElement(t):n.createElementNS(e,t)}function Ow(n,t){const e=n[9],i=e.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,Pp(r,-1)),e.splice(i,1)}function vv(n,t){if(n.length<=10)return;const e=10+t,i=n[e];if(i){const r=i[17];null!==r&&r!==n&&Ow(r,i),t>0&&(n[e-1][4]=i[4]);const s=jl(n,10+t);!function(n,t){nh(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function yv(n,t){if(!(256&t[2])){const e=t[11];ki(e)&&e.destroyNode&&nh(n,t,e,3,null,null),function(n){let t=n[13];if(!t)return ug(n[1],n);for(;t;){let e=null;if(Ho(t))e=t[13];else{const i=t[10];i&&(e=i)}if(!e){for(;t&&!t[4]&&t!==n;)Ho(t)&&ug(t[1],t),t=t[3];null===t&&(t=n),Ho(t)&&ug(t[1],t),e=t&&t[4]}t=e}}(t)}}function ug(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof Qh)){const s=e[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,t),function(n,t){const e=n.cleanup,i=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],a="function"==typeof o?o(t):Ji(t[o]),l=i[r=e[s+2]],c=e[s+3];"boolean"==typeof c?a.removeEventListener(e[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=e[s+1]];e[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();t[7]=null}}(n,t),1===t[1].type&&ki(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&$o(t[3])){e!==t[3]&&Ow(e,t);const i=t[19];null!==i&&i.detachView(n)}}}function Iw(n,t,e){return function(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Ue.None||r===Ue.Emulated)return null}return Rs(i,e)}(n,t.parent,e)}function al(n,t,e,i,r){ki(n)?n.insertBefore(t,e,i,r):t.insertBefore(e,i,r)}function Rw(n,t,e){ki(n)?n.appendChild(t,e):t.appendChild(e)}function kw(n,t,e,i,r){null!==i?al(n,t,e,i,r):Rw(n,t,e)}function dg(n,t){return ki(n)?n.parentNode(t):t.parentNode}function Fw(n,t,e){return Lw(n,t,e)}let Lw=function(n,t,e){return 40&n.type?Rs(n,e):null};function hg(n,t,e,i){const r=Iw(n,i,t),s=t[11],a=Fw(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)kw(s,r,e[l],a,!1);else kw(s,r,e,a,!1)}function Hu(n,t){if(null!==t){const e=t.type;if(3&e)return Rs(t,n);if(4&e)return fg(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Hu(n,i);{const r=n[t.index];return $o(r)?fg(-1,r):Ji(r)}}if(32&e)return fv(t,n)()||Ji(n[t.index]);{const i=Vw(n,t);return null!==i?Array.isArray(i)?i[0]:Hu(hf(n[16]),i):Hu(n,t.next)}}return null}function Vw(n,t){return null!==t?n[16][6].projection[t.projection]:null}function fg(n,t){const e=10+n+1;if(e<t.length){const i=t[e],r=i[1].firstChild;if(null!==r)return Hu(i,r)}return t[7]}function ff(n,t,e,i,r,s,o){for(;null!=e;){const a=i[e.index],l=e.type;if(o&&0===t&&(a&&ss(Ji(a),i),e.flags|=4),64!=(64&e.flags))if(8&l)ff(n,t,e.child,i,r,s,!1),th(t,n,r,a,s);else if(32&l){const c=fv(e,i);let u;for(;u=c();)th(t,n,r,u,s);th(t,n,r,a,s)}else 16&l?Cv(n,t,i,e,r,s):th(t,n,r,a,s);e=o?e.projectionNext:e.next}}function nh(n,t,e,i,r,s){ff(e,i,n.firstChild,t,r,s,!1)}function Cv(n,t,e,i,r,s){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)th(t,n,r,l[c],s);else ff(n,t,l,o[3],r,s,!0)}function Uw(n,t,e){ki(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function Ev(n,t,e){ki(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function pf(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}e=r+1}}const Hw="ng-template";function pT(n,t,e){let i=0;for(;i<n.length;){let r=n[i++];if(e&&"class"===r){if(r=n[i],-1!==pf(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function pg(n){return 4===n.type&&n.value!==Hw}function $w(n,t,e){return t===(4!==n.type||e?n.value:Hw)}function gT(n,t,e){let i=4;const r=n.attrs||[],s=function(n){for(let t=0;t<n.length;t++)if(V0(n[t]))return t;return n.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!$w(n,l,e)||""===l&&1===t.length){if(Oa(i))return!1;o=!0}}else{const c=8&i?l:t[++a];if(8&i&&null!==n.attrs){if(!pT(n.attrs,c,e)){if(Oa(i))return!1;o=!0}continue}const h=mT(8&i?"class":l,r,pg(n),e);if(-1===h){if(Oa(i))return!1;o=!0;continue}if(""!==c){let p;p=h>s?"":r[h+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==pf(g,c,0)||2&i&&c!==p){if(Oa(i))return!1;o=!0}}}}else{if(!o&&!Oa(i)&&!Oa(l))return!1;if(o&&Oa(l))continue;o=!1,i=l|1&i}}return Oa(i)||o}function Oa(n){return 0==(1&n)}function mT(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function Gw(n,t,e=!1){for(let i=0;i<t.length;i++)if(gT(n,t[i],e))return!0;return!1}function bT(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Ww(n,t){return n?":not("+t.trim()+")":t}function wT(n){let t=n[0],e=1,i=2,r="",s=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&i){const a=n[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Oa(o)&&(t+=Ww(s,r),r=""),i=o,s=s||!Oa(i);e++}return""!==r&&(t+=Ww(s,r)),t}const kt={};function X(n){qw(Pn(),Me(),ks()+n,qh())}function qw(n,t,e,i){if(!i)if(3==(3&t[2])){const s=n.preOrderCheckHooks;null!==s&&Bp(t,s,e)}else{const s=n.preOrderHooks;null!==s&&Vp(t,s,0,e)}Qs(e)}function ll(n,t){return n<<17|t<<2}function Ht(n){return n>>17&32767}function er(n){return 2|n}function Gl(n){return(131068&n)>>2}function cl(n,t){return-131069&n|t<<2}function Mv(n){return 1|n}function nC(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],s=e[i+1];if(-1!==s){const o=n.data[s];D_(r),o.contentQueries(2,t[s],s)}}}function mf(n,t,e,i,r,s,o,a,l,c){const u=t.blueprint.slice();return u[0]=r,u[2]=140|i,M_(u),u[3]=u[15]=n,u[8]=e,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==t.type?n[16]:u,u}function rh(n,t,e,i,r){let s=n.data[t];if(null===s)s=function(n,t,e,i,r){const s=A_(),o=vr(),l=n.data[t]=function(n,t,e,i,r,s){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,t,e,i,r),Kt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=i,s.attrs=r;const o=function(){const n=Kt.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Qa(s,!0),s}function sh(n,t,e,i){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function _f(n,t,e){Kh(t);try{const i=n.viewQuery;null!==i&&zv(1,i,e);const r=n.template;null!==r&&iC(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nC(n,t),n.staticViewQueries&&zv(2,n.viewQuery,e);const s=n.components;null!==s&&function(n,t){for(let e=0;e<t.length;e++)QT(n,t[e])}(t,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[2]&=-5,yn()}}function oh(n,t,e,i){const r=t[2];if(256==(256&r))return;Kh(t);const s=qh();try{M_(t),function(n){Kt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&iC(n,t,e,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Bp(t,c,null)}else{const c=n.preOrderHooks;null!==c&&Vp(t,c,0,null),O_(t,0)}if(function(n){for(let t=eh(n);null!==t;t=gv(t)){if(!t[2])continue;const e=t[9];for(let i=0;i<e.length;i++){const r=e[i],s=r[3];0==(1024&r[2])&&Pp(s,1),r[2]|=1024}}}(t),function(n){for(let t=eh(n);null!==t;t=gv(t))for(let e=10;e<t.length;e++){const i=t[e],r=i[1];Fd(i)&&oh(r,i,r.template,i[8])}}(t),null!==n.contentQueries&&nC(n,t),!s)if(o){const c=n.contentCheckHooks;null!==c&&Bp(t,c)}else{const c=n.contentHooks;null!==c&&Vp(t,c,1),O_(t,1)}!function(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Qs(~r);else{const s=r,o=e[++i],a=e[++i];Nd(o,s),a(2,t[s])}}}finally{Qs(-1)}}(n,t);const a=n.components;null!==a&&function(n,t){for(let e=0;e<t.length;e++)ZT(n,t[e])}(t,a);const l=n.viewQuery;if(null!==l&&zv(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&Bp(t,c)}else{const c=n.viewHooks;null!==c&&Vp(t,c,2),O_(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Pp(t[3],-1))}finally{yn()}}function kT(n,t,e,i){const r=t[10],s=!qh(),o=Bl(t);try{s&&!o&&r.begin&&r.begin(),o&&_f(n,t,i),oh(n,t,e,i)}finally{s&&!o&&r.end&&r.end()}}function iC(n,t,e,i,r){const s=ks(),o=2&i;try{Qs(-1),o&&t.length>20&&qw(n,t,20,qh()),e(i,r)}finally{Qs(s)}}function rC(n,t,e){if(__(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function vf(n,t,e){!F0()||(function(n,t,e,i){const r=e.directiveStart,s=e.directiveEnd;n.firstCreatePass||bs(e,t),ss(i,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Ca(l);c&&GT(t,e,l);const u=zd(t,n,a,e);ss(u,t),null!==o&&WT(0,a-r,u,l,0,o),c&&(ys(e.index,t)[8]=u)}}(n,t,e,Rs(e,t)),128==(128&e.flags)&&function(n,t,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,a=Kt.lFrame.currentDirectiveIndex;try{Qs(o);for(let l=i;l<r;l++){const c=n.data[l],u=t[l];T_(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&fC(c,u)}}finally{Qs(-1),T_(a)}}(n,t,e))}function Pv(n,t,e=Rs){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?e(t,n):n[o];n[r++]=a}}}function vg(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=yg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function yg(n,t,e,i,r,s,o,a,l,c){const u=20+i,h=u+r,p=function(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:kt);return e}(u,h),g="function"==typeof c?c():c;return p[1]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function oC(n,t,e,i){const r=_C(t);null===e?r.push(i):(r.push(e),n.firstCreatePass&&wg(n).push(i,r.length-1))}function aC(n,t,e){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(t,r):e[i]=[t,r]}return e}function To(n,t,e,i,r,s,o,a){const l=Rs(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[i])?(vC(n,e,u,i,r),Pd(t)&&function(n,t){const e=ys(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,t.value||"",i):r,ki(s)?s.setProperty(l,i,r):P_(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Rv(n,t,e,i){let r=!1;if(F0()){const s=function(n,t,e){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];Gw(e,o.selectors,!1)&&(r||(r=[]),Rc(bs(e,t),n,o.type),Ca(o)?(pC(n,e),r.unshift(o)):r.push(o))}return r}(n,t,e),o=null===i?null:{"":-1};if(null!==s){r=!0,kv(e,n.data.length,s.length);for(let u=0;u<s.length;u++){const h=s[u];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,c=sh(n,t,s.length,null);for(let u=0;u<s.length;u++){const h=s[u];e.mergedAttrs=Jh(e.mergedAttrs,h.hostAttrs),Fv(n,e,t,c,h),$T(c,h,o),null!==h.contentQueries&&(e.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(e.flags|=128);const p=h.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function(n,t){const i=t.directiveEnd,r=n.data,s=t.attrs,o=[];let a=null,l=null;for(let c=t.directiveStart;c<i;c++){const u=r[c],h=u.inputs,p=null===s||pg(t)?null:qT(h,s);o.push(p),a=aC(h,c,a),l=aC(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=l}(n,e)}o&&function(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new $("301",`Export of name '${t[r+1]}' not found!`);i.push(t[r],s)}}}(e,i,o)}return e.mergedAttrs=Jh(e.mergedAttrs,e.attrs),r}function hC(n,t,e,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~t.index;(function(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function fC(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function pC(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function $T(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Ca(t)&&(e[""]=n)}}function kv(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Fv(n,t,e,i,r){n.data[i]=r;const s=r.factory||(r.factory=Ic(r.type)),o=new Qh(s,Ca(r),null);n.blueprint[i]=o,e[i]=o,hC(n,t,0,i,sh(n,e,r.hostVars,kt),r)}function GT(n,t,e){const i=Rs(t,n),r=vg(e),s=n[10],o=bg(n,mf(n,r,null,e.onPush?64:16,i,t,s,s.createRenderer(i,e),null,null));n[t.index]=o}function dl(n,t,e,i,r,s){const o=Rs(n,t);!function(n,t,e,i,r,s,o){if(null==s)ki(n)?n.removeAttribute(t,r,e):t.removeAttribute(r);else{const a=null==o?me(s):o(s,i||"",r);ki(n)?n.setAttribute(t,r,a,e):e?t.setAttributeNS(e,r,a):t.setAttribute(r,a)}}(t[11],o,s,n.value,e,i,r)}function WT(n,t,e,i,r,s){const o=s[t];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?i.setInput(e,h,c,u):e[u]=h}}}function qT(n,t){let e=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,n[r],t[i+1])),i+=2}else i+=2;else i+=4}return e}function gC(n,t,e,i){return new Array(n,!0,!1,t,null,0,i,e,null,null)}function ZT(n,t){const e=ys(t,n);if(Fd(e)){const i=e[1];80&e[2]?oh(i,e,i.template,e[8]):e[5]>0&&Lv(e)}}function Lv(n){for(let i=eh(n);null!==i;i=gv(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];oh(o,s,o.template,s[8])}else s[5]>0&&Lv(s)}const e=n[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=ys(e[i],n);Fd(r)&&r[5]>0&&Lv(r)}}function QT(n,t){const e=ys(t,n),i=e[1];(function(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(i,e),_f(i,e,e[8])}function bg(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function Bv(n){for(;n;){n[2]|=64;const t=hf(n);if(O0(n)&&!t)return n;n=t}return null}function jv(n,t,e){const i=t[10];i.begin&&i.begin();try{oh(n,t,n.template,e)}catch(r){throw Hv(t,r),r}finally{i.end&&i.end()}}function mC(n){!function(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],i=av(e),r=i[1];kT(r,i,r.template,e)}}(n[8])}function zv(n,t,e){D_(0),t(n,e)}const ix=(()=>Promise.resolve(null))();function _C(n){return n[7]||(n[7]=[])}function wg(n){return n.cleanup||(n.cleanup=[])}function Uv(n,t,e){return(null===n||Ca(n))&&(e=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function Hv(n,t){const e=n[9],i=e?e.get(Qo,null):null;i&&i.handleError(t)}function vC(n,t,e,i,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Wl(n,t,e){const i=$h(t,n);!function(n,t,e){ki(n)?n.setValue(t,e):t.textContent=e}(n[11],i,e)}function Cg(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=Y(r,a):2==s&&(i=Y(i,a+": "+t[++o]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}const $u=new Ee("INJECTOR",-1);class Bs{get(t,e=Lu){if(e===Lu){const i=new Error(`NullInjectorError: No provider for ${W(t)}!`);throw i.name="NullInjectorError",i}return e}}const Gu=new Ee("Set Injector scope."),yf={},sx={};let Gv;function yC(){return void 0===Gv&&(Gv=new Bs),Gv}function bC(n,t=null,e=null,i){return new qv(n,e,t||yC(),i)}class qv{constructor(t,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&Yo(e,a=>this.processProvider(a,t,e)),Yo([t],a=>this.processInjectorType(a,[],s)),this.records.set($u,Wu(void 0,this));const o=this.records.get(Gu);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:W(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Lu,i=xt.Default){this.assertNotDestroyed();const r=Wd(this),s=ya(void 0);try{if(!(i&xt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ee}(t)&&ur(t);a=l&&this.injectableDefInScope(l)?Wu(Yv(t),yf):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&xt.Self?yC():this.parent).get(t,e=i&xt.Optional&&e===Lu?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Lc]=o[Lc]||[]).unshift(W(t)),r)throw o;return Fs(o,t,"R3InjectorError",this.source)}throw o}finally{ya(s),Wd(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((i,r)=>t.push(W(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,i){if(!(t=D(t)))return!1;let r=Au(t);const s=null==r&&t.ngModule||void 0,o=void 0===s?t:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Au(s)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(o);try{Yo(r.imports,h=>{this.processInjectorType(h,e,i)&&(void 0===u&&(u=[]),u.push(h))})}finally{}if(void 0!==u)for(let h=0;h<u.length;h++){const{ngModule:p,providers:g}=u[h];Yo(g,m=>this.processProvider(m,p,g||Ei))}}this.injectorDefTypes.add(o);const l=Ic(o)||(()=>new o);this.records.set(o,Wu(l,yf));const c=r.providers;if(null!=c&&!a){const u=t;Yo(c,h=>this.processProvider(h,u,c))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,i){let r=$c(t=D(t))?t:D(t&&t.provide);const s=function(n,t,e){return CC(n)?Wu(void 0,n.useValue):Wu(wC(n),yf)}(t);if($c(t)||!0!==t.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Wu(void 0,yf,!0),o.factory=()=>Vu(o.multi),this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,s)}hydrate(t,e){return e.value===yf&&(e.value=sx,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=D(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Yv(n){const t=ur(n),e=null!==t?t.factory:Ic(n);if(null!==e)return e;if(n instanceof Ee)throw new Error(`Token ${W(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const t=n.length;if(t>0){const i=Fc(t,"?");throw new Error(`Can't resolve all parameters for ${W(n)}: (${i.join(", ")}).`)}const e=function(n){const t=n&&(n[va]||n[Xa]);if(t){const e=function(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Error("unreachable")}function wC(n,t,e){let i;if($c(n)){const r=D(n);return Ic(r)||Yv(r)}if(CC(n))i=()=>D(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Vu(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>I(D(n.useExisting));else{const r=D(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Ic(r)||Yv(r);i=()=>new r(...Vu(n.deps))}return i}function Wu(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function CC(n){return null!==n&&"object"==typeof n&&Xp in n}function $c(n){return"function"==typeof n}const EC=function(n,t,e){return function(n,t=null,e=null,i){const r=bC(n,t,e,i);return r._resolveInjectorDefTypes(),r}({name:e},t,n,e)};class Bt{static create(t,e){return Array.isArray(t)?EC(t,e,""):EC(t.providers,t.parent,t.name||"")}}function hY(n,t){Lp(av(n)[1],Ir())}function Et(n){let t=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(Ca(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(e){i.push(r);const o=n;o.inputs=yx(n.inputs),o.declaredInputs=yx(n.declaredInputs),o.outputs=yx(n.outputs);const a=r.hostBindings;a&&mY(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&pY(n,l),c&&gY(n,c),Cu(n.inputs,r.inputs),Cu(n.declaredInputs,r.declaredInputs),Cu(n.outputs,r.outputs),Ca(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Et&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Jh(r.hostAttrs,e=Jh(e,r.hostAttrs))}}(i)}function yx(n){return n===xd?{}:n===Ei?[]:n}function pY(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function gY(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,s)=>{t(i,r,s),e(i,r,s)}:t}function mY(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}Bt.THROW_IF_NOT_FOUND=Lu,Bt.NULL=new Bs,Bt.\u0275prov=pe({token:Bt,providedIn:"any",factory:()=>I($u)}),Bt.__NG_ELEMENT_ID__=-1;let xC=null;function Eg(){if(!xC){const n=pn.Symbol;if(n&&n.iterator)xC=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const i=t[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(xC=i)}}}return xC}class Yl{constructor(t){this.wrapped=t}static wrap(t){return new Yl(t)}static unwrap(t){return Yl.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Yl}}function Jv(n){return!!bx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Eg()in n)}function bx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Wc(n,t,e){return n[t]=e}function no(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function bf(n,t,e,i){const r=no(n,t,e);return no(n,t+1,i)||r}function cn(n,t,e,i){const r=Me();return no(r,Ma(),t)&&(Pn(),dl(dr(),r,n,t,e,i)),cn}function Mg(n,t,e,i){return no(n,Ma(),e)?t+me(e)+i:kt}function Pt(n,t,e,i,r,s,o,a){const l=Me(),c=Pn(),u=n+20,h=c.firstCreatePass?function(n,t,e,i,r,s,o,a,l){const c=t.consts,u=rh(t,n,4,o||null,Sa(c,a));Rv(t,e,u,Sa(c,l)),Lp(t,u);const h=u.tViews=yg(2,u,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,i,r,s,o):c.data[u];Qa(h,!1);const p=l[11].createComment("");hg(c,l,p,h),ss(p,l),bg(l,l[u]=gC(p,l,p,h)),Rd(h)&&vf(c,l,h),null!=o&&Pv(l,h,a)}function io(n){return kd(Kt.lFrame.contextLView,20+n)}function E(n,t=xt.Default){const e=Me();return null===e?I(n,t):tf(Ir(),e,D(n),t)}function le(n,t,e){const i=Me();return no(i,Ma(),t)&&To(Pn(),dr(),i,n,t,i[11],e,!1),le}function Mx(n,t,e,i,r){const o=r?"class":"style";vC(n,e,t.inputs[o],o,i)}function N(n,t,e,i){const r=Me(),s=Pn(),o=20+n,a=r[11],l=r[o]=_v(a,t,Kt.lFrame.currentNamespace),c=s.firstCreatePass?function(n,t,e,i,r,s,o){const a=t.consts,c=rh(t,n,2,r,Sa(a,s));return Rv(t,e,c,Sa(a,o)),null!==c.attrs&&Cg(c,c.attrs,!1),null!==c.mergedAttrs&&Cg(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,r,0,t,e,i):s.data[o];Qa(c,!0);const u=c.mergedAttrs;null!==u&&jp(a,l,u);const h=c.classes;null!==h&&Ev(a,l,h);const p=c.styles;null!==p&&Uw(a,l,p),64!=(64&c.flags)&&hg(s,r,l,c),0===Kt.lFrame.elementDepthCount&&ss(l,r),Kt.lFrame.elementDepthCount++,Rd(c)&&(vf(s,r,c),rC(s,c,r)),null!==i&&Pv(r,c)}function L(){let n=Ir();vr()?$r():(n=n.parent,Qa(n,!1));const t=n;Kt.lFrame.elementDepthCount--;const e=Pn();e.firstCreatePass&&(Lp(e,n),__(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(t)&&Mx(e,t,Me(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(t)&&Mx(e,t,Me(),t.stylesWithoutHost,!1)}function st(n,t,e,i){N(n,t,e,i),L()}function wf(n,t,e){const i=Me(),r=Pn(),s=n+20,o=r.firstCreatePass?function(n,t,e,i,r){const s=t.consts,o=Sa(s,i),a=rh(t,n,8,"ng-container",o);return null!==o&&Cg(a,o,!0),Rv(t,e,a,Sa(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,i,t,e):r.data[s];Qa(o,!0);const a=i[s]=i[11].createComment("");hg(r,i,a,o),ss(a,i),Rd(o)&&(vf(r,i,o),rC(r,o,i)),null!=e&&Pv(i,o)}function Cf(){let n=Ir();const t=Pn();vr()?$r():(n=n.parent,Qa(n,!1)),t.firstCreatePass&&(Lp(t,n),__(n)&&t.queries.elementEnd(n))}function Gr(){return Me()}function ty(n){return!!n&&"function"==typeof n.then}function f2(n){return!!n&&"function"==typeof n.subscribe}const IC=f2;function Ce(n,t,e,i){const r=Me(),s=Pn(),o=Ir();return p2(s,r,r[11],o,n,t,!!e,i),Ce}function ny(n,t){const e=Ir(),i=Me(),r=Pn();return p2(r,i,Uv(x_(r.data),e,i),e,n,t,!1),ny}function p2(n,t,e,i,r,s,o,a){const l=Rd(i),u=n.firstCreatePass&&wg(n),h=t[8],p=_C(t);let g=!0;if(3&i.type||a){const y=Rs(i,t),C=a?a(y):y,w=p.length,A=a?k=>a(Ji(k[i.index])):i.index;if(ki(e)){let k=null;if(!a&&l&&(k=function(n,t,e,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===i){const a=t[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,t,r,i.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,g=!1;else{s=Ax(i,t,h,s,!1);const B=e.listen(C,r,s);p.push(s,B),u&&u.push(r,A,w,w+1)}}else s=Ax(i,t,h,s,!0),C.addEventListener(r,s,o),p.push(s),u&&u.push(r,A,w,o)}else s=Ax(i,t,h,s,!1);const m=i.outputs;let v;if(g&&null!==m&&(v=m[r])){const y=v.length;if(y)for(let C=0;C<y;C+=2){const U=t[v[C]][v[C+1]].subscribe(s),K=p.length;p.push(s,U),u&&u.push(r,i.index,K,-(K+1))}}}function g2(n,t,e,i){try{return!1!==e(i)}catch(r){return Hv(n,r),!1}}function Ax(n,t,e,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?ys(n.index,t):t;0==(32&t[2])&&Bv(a);let l=g2(t,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=g2(t,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Dt(n=1){return function(n){return(Kt.lFrame.contextLView=function(n,t){for(;n>0;)t=t[15],n--;return t}(n,Kt.lFrame.contextLView))[8]}(n)}function KY(n,t){let e=null;const i=function(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===i?Gw(n,s,!0):bT(i,s))return r}else e=r}return e}function Rr(n){const t=Me()[16][6];if(!t.projection){const i=t.projection=Fc(n?n.length:1,null),r=i.slice();let s=t.child;for(;null!==s;){const o=n?KY(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function jn(n,t=0,e){const i=Me(),r=Pn(),s=rh(r,20+n,16,null,e||null);null===s.projection&&(s.projection=t),$r(),64!=(64&s.flags)&&function(n,t,e){Cv(t[11],0,t,e,Iw(n,e,t),Fw(e.parent||t[6],e,t))}(r,i,s)}function iy(n,t,e){return Tx(n,"",t,"",e),iy}function Tx(n,t,e,i,r){const s=Me(),o=Mg(s,t,e,i);return o!==kt&&To(Pn(),dr(),s,n,o,s[11],r,!1),Tx}function S2(n,t,e,i,r){const s=n[e+1],o=null===t;let a=i?Ht(s):Gl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];JY(n[a],t)&&(l=!0,n[a+1]=i?Mv(u):er(u)),a=i?Ht(u):Gl(u)}l&&(n[e+1]=i?er(s):Mv(s))}function JY(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&rs(n,t)>=0}const as={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function M2(n){return n.substring(as.key,as.keyEnd)}function A2(n,t){const e=as.textEnd;return e===t?-1:(t=as.keyEnd=function(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,as.key=t,e),kg(n,t,e))}function kg(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Ef(n,t,e){return Kl(n,t,e,!1),Ef}function ht(n,t){return Kl(n,t,null,!0),ht}function Yn(n){Zl(Eo,qc,n,!0)}function qc(n,t){for(let e=function(n){return function(n){as.key=0,as.keyEnd=0,as.value=0,as.valueEnd=0,as.textEnd=n.length}(n),A2(n,kg(n,0,as.textEnd))}(t);e>=0;e=A2(t,e))Eo(n,M2(t),!0)}function Kl(n,t,e,i){const r=Me(),s=Pn(),o=wo(2);s.firstUpdatePass&&P2(s,n,o,i),t!==kt&&no(r,o,t)&&k2(s,s.data[ks()],r,r[11],n,r[o+1]=function(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=W(Cs(n)))),n}(t,e),i,o)}function Zl(n,t,e,i){const r=Pn(),s=wo(2);r.firstUpdatePass&&P2(r,null,s,i);const o=Me();if(e!==kt&&no(o,s,e)){const a=r.data[ks()];if(N2(a,i)&&!I2(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Y(l,e||"")),Mx(r,a,o,e,i)}else!function(n,t,e,i,r,s,o,a){r===kt&&(r=Ei);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const p=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let v,m=null;u===h?(l+=2,c+=2,p!==g&&(m=h,v=g)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,v=g),null!==m&&k2(n,t,e,i,m,v,o,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(n,t,e){if(null==e||""===e)return Ei;const i=[],r=Cs(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&t(i,r);return i}(n,t,e),i,s)}}function I2(n,t){return t>=n.expandoStartIndex}function P2(n,t,e,i){const r=n.data;if(null===r[e+1]){const s=r[ks()],o=I2(n,e);N2(s,i)&&null===t&&!o&&(t=!1),t=function(n,t,e,i){const r=x_(n);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=ry(e=xx(null,n,t,e,i),t.attrs,i),s=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==r)if(e=xx(r,n,t,e,i),null===s){let l=function(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Gl(i))return n[Ht(i)]}(n,t,i);void 0!==l&&Array.isArray(l)&&(l=xx(null,n,t,l[1],i),l=ry(l,t.attrs,i),function(n,t,e,i){n[Ht(e?t.classBindings:t.styleBindings)]=i}(n,t,i,l))}else s=function(n,t,e){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=ry(i,n[s].hostAttrs,e);return ry(i,t.attrs,e)}(n,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,i),function(n,t,e,i,r,s){let o=s?t.classBindings:t.styleBindings,a=Ht(o),l=Gl(o);n[i]=e;let u,c=!1;if(Array.isArray(e)){const h=e;u=h[1],(null===u||rs(h,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const p=Ht(n[a+1]);n[i+1]=ll(p,a),0!==p&&(n[p+1]=cl(n[p+1],i)),n[a+1]=function(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=ll(a,0),0!==a&&(n[a+1]=cl(n[a+1],i)),a=i;else n[i+1]=ll(l,0),0===a?a=i:n[l+1]=cl(n[l+1],i),l=i;c&&(n[i+1]=er(n[i+1])),S2(n,u,i,!0),S2(n,u,i,!1),function(n,t,e,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof t&&rs(s,t)>=0&&(e[i+1]=Mv(e[i+1]))}(t,u,n,i,s),o=ll(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,i)}}function xx(n,t,e,i,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],i=ry(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function ry(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Eo(n,o,!!e||t[++s]))}return void 0===n?null:n}function k2(n,t,e,i,r,s,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1];PC(function(n){return 1==(1&n)}(c)?F2(l,t,e,r,Gl(c),o):void 0)||(PC(s)||function(n){return 2==(2&n)}(c)&&(s=F2(l,null,e,r,a,o)),function(n,t,e,i,r){const s=ki(n);if(t)r?s?n.addClass(e,i):e.classList.add(i):s?n.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Ao.DashCase;if(null==r)s?n.removeStyle(e,i,o):e.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Ao.Important),s?n.setStyle(e,i,r,o):e.style.setProperty(i,r,a?"important":"")}}}(i,o,$h(ks(),e),r,s))}function F2(n,t,e,i,r,s){const o=null===t;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let p=e[r+1];p===kt&&(p=h?Ei:void 0);let g=h?H_(p,i):u===i?p:void 0;if(c&&!PC(g)&&(g=H_(l,i)),PC(g)&&(a=g,o))return a;const m=n[r+1];r=o?Ht(m):Gl(m)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=H_(l,i))}return a}function PC(n){return void 0!==n}function N2(n,t){return 0!=(n.flags&(t?16:32))}function Pe(n,t=""){const e=Me(),i=Pn(),r=n+20,s=i.firstCreatePass?rh(i,r,1,t,null):i.data[r],o=e[r]=function(n,t){return ki(n)?n.createText(t):n.createTextNode(t)}(e[11],t);hg(i,e,o,s),Qa(s,!1)}function Fi(n){return Vs("",n,""),Fi}function Vs(n,t,e){const i=Me(),r=Mg(i,n,t,e);return r!==kt&&Wl(i,ks(),r),Vs}function RC(n,t,e,i,r){const s=Me(),o=function(n,t,e,i,r,s){const a=bf(n,Zs(),e,r);return wo(2),a?t+me(e)+i+me(r)+s:kt}(s,n,t,e,i,r);return o!==kt&&Wl(s,ks(),o),RC}function pl(n,t,e){const i=Me();return no(i,Ma(),t)&&To(Pn(),dr(),i,n,t,i[11],e,!0),pl}function Fg(n,t,e){const i=Me();if(no(i,Ma(),t)){const s=Pn(),o=dr();To(s,o,i,n,t,Uv(x_(s.data),o,i),e,!0)}return Fg}const Sf=void 0;var PX=["en",[["a","p"],["AM","PM"],Sf],[["AM","PM"],Sf,Sf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sf,"{1} 'at' {0}",Sf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===e?1:5}];let Ng={};function tL(n){return n in Ng||(Ng[n]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[n]),Ng[n]}var rt=(()=>((rt=rt||{})[rt.LocaleId=0]="LocaleId",rt[rt.DayPeriodsFormat=1]="DayPeriodsFormat",rt[rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",rt[rt.DaysFormat=3]="DaysFormat",rt[rt.DaysStandalone=4]="DaysStandalone",rt[rt.MonthsFormat=5]="MonthsFormat",rt[rt.MonthsStandalone=6]="MonthsStandalone",rt[rt.Eras=7]="Eras",rt[rt.FirstDayOfWeek=8]="FirstDayOfWeek",rt[rt.WeekendRange=9]="WeekendRange",rt[rt.DateFormat=10]="DateFormat",rt[rt.TimeFormat=11]="TimeFormat",rt[rt.DateTimeFormat=12]="DateTimeFormat",rt[rt.NumberSymbols=13]="NumberSymbols",rt[rt.NumberFormats=14]="NumberFormats",rt[rt.CurrencyCode=15]="CurrencyCode",rt[rt.CurrencySymbol=16]="CurrencySymbol",rt[rt.CurrencyName=17]="CurrencyName",rt[rt.Currencies=18]="Currencies",rt[rt.Directionality=19]="Directionality",rt[rt.PluralCase=20]="PluralCase",rt[rt.ExtraData=21]="ExtraData",rt))();const kC="en-US";let nL=kC;function Dx(n){Zi(n,"Expected localeId to be defined"),"string"==typeof n&&(nL=n.toLowerCase().replace(/_/g,"-"))}function Px(n,t,e,i,r){if(n=D(n),Array.isArray(n))for(let s=0;s<n.length;s++)Px(n[s],t,e,i,r);else{const s=Pn(),o=Me();let a=$c(n)?n:D(n.provide),l=wC(n);const c=Ir(),u=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if($c(n)||!n.multi){const g=new Qh(l,r,E),m=kx(a,t,r?u:u+p,h);-1===m?(Rc(bs(c,o),s,a),Rx(s,n,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(g),o.push(g)):(e[m]=g,o[m]=g)}else{const g=kx(a,t,u+p,h),m=kx(a,t,u,u+p),v=g>=0&&e[g],y=m>=0&&e[m];if(r&&!y||!r&&!v){Rc(bs(c,o),s,a);const C=function(n,t,e,i,r){const s=new Qh(n,e,E);return s.multi=[],s.index=t,s.componentProviders=0,AL(s,r,i&&!e),s}(r?DK:xK,e.length,r,i,l);!r&&y&&(e[m].providerFactory=C),Rx(s,n,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(C),o.push(C)}else Rx(s,n,g>-1?g:m,AL(e[r?m:g],l,!r&&i));!r&&i&&y&&e[m].componentProviders++}}}function Rx(n,t,e,i){const r=$c(t);if(r||function(n){return!!n.useClass}(t)){const o=(t.useClass||t).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const l=a.indexOf(e);-1===l?a.push(e,[i,o]):a[l+1].push(i,o)}else a.push(e,o)}}}function AL(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function kx(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function xK(n,t,e,i){return Fx(this.multi,[])}function DK(n,t,e,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=zd(e,e[1],this.providerFactory.index,i);s=a.slice(0,o),Fx(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Fx(r,s);return s}function Fx(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Vt(n,t=[]){return e=>{e.providersResolver=(i,r)=>function(n,t,e){const i=Pn();if(i.firstCreatePass){const r=Ca(n);Px(e,i.data,i.blueprint,r,!0),Px(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class TL{}const DL="ngComponent";class PK{resolveComponentFactory(t){throw function(n){const t=Error(`No component factory found for ${W(n)}. Did you add it to @NgModule.entryComponents?`);return t[DL]=n,t}(t)}}class gl{}function VC(...n){}function Bg(n,t){return new ot(Rs(n,t))}gl.NULL=new PK;const FK=function(){return Bg(Ir(),Me())};let ot=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=FK,n})();function OL(n){return n instanceof ot?n.nativeElement:n}class Mf{}let Yc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>LK(),n})();const LK=function(){const n=Me(),e=ys(Ir().index,n);return function(n){return n[11]}(Ho(e)?e:n)};let Lx=(()=>{class n{}return n.\u0275prov=pe({token:n,providedIn:"root",factory:()=>null}),n})();class qu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IL=new qu("12.2.5");class PL{constructor(){}supports(t){return Jv(t)}create(t){return new zK(t)}}const jK=(n,t)=>t;class zK{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||jK}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,s=null;for(;e||i;){const o=!i||e&&e.currentIndex<kL(i,r,s)?e:i,a=kL(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){const g=p<s.length?s[p]:s[p]=0,m=g+p;u<=m&&m<c&&(s[p]=g+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Jv(t))throw new Error(`Error trying to diff '${W(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),i=!0),e=e._next}else r=0,function(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Eg()]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new UK(e,i),s,r),t}_verifyReinsertion(t,e,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new RL),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RL),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class UK{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HK{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class RL{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new HK,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kL(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class FL{constructor(){}supports(t){return t instanceof Map||bx(t)}create(){return new $K}}class $K{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bx(t)))throw new Error(`Error trying to diff '${W(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new GK(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class GK{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NL(){return new Vg([new PL])}let Vg=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||NL()),deps:[[n,new rl,new Sr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'`)}}return n.\u0275prov=pe({token:n,providedIn:"root",factory:NL}),n})();function LL(){return new jg([new FL])}let jg=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||LL()),deps:[[n,new rl,new Sr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return n.\u0275prov=pe({token:n,providedIn:"root",factory:LL}),n})();function jC(n,t,e,i,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&i.push(Ji(s)),$o(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&jC(l[1],l,c,i)}const o=e.type;if(8&o)jC(n,t,e.child,i);else if(32&o){const a=fv(e,t);let l;for(;l=a();)i.push(l)}else if(16&o){const a=Vw(t,e);if(Array.isArray(a))i.push(...a);else{const l=hf(t[16]);jC(l[1],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}class cy{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return jC(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if($o(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(vv(t,i),jl(e,i))}this._attachedToViewContainer=!1}yv(this._lView[1],this._lView)}onDestroy(t){oC(this._lView[1],this._lView,null,t)}markForCheck(){Bv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){jv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,t,e){kp(!0);try{jv(n,t,e)}finally{kp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,t){nh(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class qK extends cy{constructor(t){super(t),this._view=t}detectChanges(){mC(this._view)}checkNoChanges(){!function(n){kp(!0);try{mC(n)}finally{kp(!1)}}(this._view)}get context(){return null}}const XK=function(n){return function(n,t,e){if(Pd(n)&&!e){const i=ys(n.index,t);return new cy(i,i)}return 47&n.type?new cy(t[16],t):null}(Ir(),Me(),16==(16&n))};let Qn=(()=>{class n{}return n.__NG_ELEMENT_ID__=XK,n})();const QK=[new FL],eZ=new Vg([new PL]),tZ=new jg(QK),iZ=function(){return zC(Ir(),Me())};let ro=(()=>{class n{}return n.__NG_ELEMENT_ID__=iZ,n})();const rZ=ro,sZ=class extends rZ{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t){const e=this._declarationTContainer.tViews,i=mf(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(e)),_f(e,i,t),new cy(i)}};function zC(n,t){return 4&n.type?new sZ(t,n,Bg(n,t)):null}class Xc{}const lZ=function(){return zL(Ir(),Me())};let ls=(()=>{class n{}return n.__NG_ELEMENT_ID__=lZ,n})();const uZ=ls,VL=class extends uZ{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Bg(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){const t=ef(this._hostTNode,this._hostLView);if(j0(t)){const e=el(t,this._hostLView),i=Bd(t);return new Wo(e[1].data[i+8],e)}return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=jL(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,i){const r=t.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(t,e,i,r,s){const o=i||this.parentInjector;if(!s&&null==t.ngModule&&o){const l=o.get(Xc,null);l&&(s=l)}const a=t.create(o,r,void 0,s);return this.insert(a.hostView,e),a}insert(t,e){const i=t._lView,r=i[1];if(function(n){return $o(n[3])}(i)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const h=i[3],p=new VL(h,h[6],h[3]);p.detach(p.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function(n,t,e,i){const r=10+i,s=e.length;i>0&&(e[r-1][4]=t),i<s-10?(t[4]=e[r],sf(e,10+i,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=128}(r,i,o,s);const a=fg(s,o),l=i[11],c=dg(l,o[7]);return null!==c&&function(n,t,e,i,r,s){i[0]=r,i[6]=t,nh(n,i,e,1,r,s)}(r,o[6],l,i,c,a),t.attachToViewContainerRef(),sf(Bx(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=jL(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=vv(this._lContainer,e);i&&(jl(Bx(this._lContainer),e),yv(i[1],i))}detach(t){const e=this._adjustIndex(t,-1),i=vv(this._lContainer,e);return i&&null!=jl(Bx(this._lContainer),e)?new cy(i):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function jL(n){return n[8]}function Bx(n){return n[8]||(n[8]=[])}function zL(n,t){let e;const i=t[n.index];if($o(i))e=i;else{let r;if(8&n.type)r=Ji(i);else{const s=t[11];r=s.createComment("");const o=Rs(n,t);al(s,dg(s,o),r,function(n,t){return ki(n)?n.nextSibling(t):t.nextSibling}(s,o),!1)}t[n.index]=e=gC(i,t,r,n),bg(t,e)}return new VL(e,n,t)}const $g={};class a3 extends gl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=si(t);return new c3(e,this.ngModule)}}function l3(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}const oQ=new Ee("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ew});class c3 extends TL{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function(n){return n.map(wT).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return l3(this.componentDef.inputs)}get outputs(){return l3(this.componentDef.outputs)}create(t,e,i,r){const s=(r=r||this.ngModule)?function(n,t){return{get:(e,i,r)=>{const s=n.get(e,$g,r);return s!==$g||i===$g?s:t.get(e,i,r)}}}(t,r.injector):t,o=s.get(Mf,Du),a=s.get(Lx,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function(n,t,e){if(ki(n))return n.selectRootElement(t,e===Ue.ShadowDom);let i="string"==typeof t?n.querySelector(t):t;return i.textContent="",i}(l,i,this.componentDef.encapsulation):_v(o.createRenderer(null,this.componentDef),c,function(n){const t=n.toLowerCase();return"svg"===t?Kn:"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),h=this.componentDef.onPush?576:528,p=function(n,t){return{components:[],scheduler:n||Ew,clean:ix,playerHandler:t||null,flags:0}}(),g=yg(0,null,null,1,0,null,null,null,null,null),m=mf(null,g,p,h,null,null,o,l,a,s);let v,y;Kh(m);try{const C=function(n,t,e,i,r,s){const o=e[1];e[20]=n;const l=rh(o,20,2,"#host",null),c=l.mergedAttrs=t.hostAttrs;null!==c&&(Cg(l,c,!0),null!==n&&(jp(r,n,c),null!==l.classes&&Ev(r,n,l.classes),null!==l.styles&&Uw(r,n,l.styles)));const u=i.createRenderer(n,t),h=mf(e,vg(t),null,t.onPush?64:16,e[20],l,i,u,s||null,null);return o.firstCreatePass&&(Rc(bs(l,e),o,t.type),pC(o,l),kv(l,e.length,1)),bg(e,h),e[20]=h}(u,this.componentDef,m,o,l);if(u)if(i)jp(l,u,["ng-version",IL.full]);else{const{attrs:w,classes:A}=function(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&t.push(s,n[++i]):8===r&&e.push(s);else{if(!Oa(r))break;r=s}i++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);w&&jp(l,u,w),A&&A.length>0&&Ev(l,u,A.join(" "))}if(y=S_(g,20),void 0!==e){const w=y.projection=[];for(let A=0;A<this.ngContentSelectors.length;A++){const k=e[A];w.push(null!=k?Array.from(k):null)}}v=function(n,t,e,i,r){const s=e[1],o=function(n,t,e){const i=Ir();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Fv(n,i,t,sh(n,t,1,null),e));const r=zd(t,n,i.directiveStart,i);ss(r,t);const s=Rs(i,t);return s&&ss(s,t),r}(s,e,t);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,t)),t.contentQueries){const l=Ir();t.contentQueries(1,o,l.directiveStart)}const a=Ir();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Qs(a.index),hC(e[1],a,0,a.directiveStart,a.directiveEnd,t),fC(t,o)),o}(C,this.componentDef,m,p,[hY]),_f(g,m,null)}finally{yn()}return new cQ(this.componentType,v,Bg(y,m),m,y)}}class cQ extends class{}{constructor(t,e,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new qK(r),this.componentType=t}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Gg=new Map;class hQ extends Xc{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new a3(this);const i=yo(t),r=function(n){return n[VM]||null}(t);r&&Dx(r),this._bootstrapComponents=ol(i.bootstrap),this._r3Injector=bC(t,e,[{provide:Xc,useValue:this},{provide:gl,useValue:this.componentFactoryResolver}],W(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Bt.THROW_IF_NOT_FOUND,i=xt.Default){return t===Bt||t===Xc||t===$u?this:this._r3Injector.get(t,e,i)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zx extends class{}{constructor(t){super(),this.moduleType=t,null!==yo(t)&&function(n){const t=new Set;!function e(i){const r=yo(i,!0),s=r.id;null!==s&&(function(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${W(t)} vs ${W(t.name)}`)}(s,Gg.get(s),i),Gg.set(s,i));const o=ol(r.imports);for(const a of o)t.has(a)||(t.add(a),e(a))}(n)}(t)}create(t){return new hQ(this.moduleType,t)}}function WC(n,t,e){const i=ts()+n,r=Me();return r[i]===kt?Wc(r,i,e?t.call(e):t()):function(n,t){return n[t]}(r,i)}function Wg(n,t,e,i){return h3(Me(),ts(),n,t,e,i)}function _y(n,t){const e=n[t];return e===kt?void 0:e}function h3(n,t,e,i,r,s){const o=t+e;return no(n,o,r)?Wc(n,o+1,s?i.call(s,r):i(r)):_y(n,o+1)}function En(n,t){const e=Pn();let i;const r=n+20;e.firstCreatePass?(i=function(n,t){if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];if(n===i.name)return i}throw new $("302",`The pipe '${n}' could not be found!`)}(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const s=i.factory||(i.factory=Ic(i.type)),o=ya(E);try{const a=zp(!1),l=s();return zp(a),function(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}(e,Me(),r,l),l}finally{ya(o)}}function xn(n,t,e){const i=n+20,r=Me(),s=kd(r,i);return yy(r,vy(r,i)?h3(r,ts(),t,s.transform,e,s):s.transform(e))}function _3(n,t,e,i){const r=n+20,s=Me(),o=kd(s,r);return yy(s,vy(s,r)?function(n,t,e,i,r,s,o){const a=t+e;return bf(n,a,r,s)?Wc(n,a+2,o?i.call(o,r,s):i(r,s)):_y(n,a+2)}(s,ts(),t,o.transform,e,i,o):o.transform(e,i))}function vy(n,t){return n[1].data[t].pure}function yy(n,t){return Yl.isWrapped(t)&&(t=Yl.unwrap(t),n[Zs()]=kt),t}function Qx(n){return t=>{setTimeout(n,void 0,t)}}const Le=class extends G{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){var r,s,o;let a=t,l=e||(()=>null),c=i;if(t&&"object"==typeof t){const h=t;a=null===(r=h.next)||void 0===r?void 0:r.bind(h),l=null===(s=h.error)||void 0===s?void 0:s.bind(h),c=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(l=Qx(l),a&&(a=Qx(a)),c&&(c=Qx(c)));const u=super.subscribe({next:a,error:l,complete:c});return t instanceof Re&&t.add(u),u}};function AQ(){return this._results[Eg()]()}class xf{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Eg(),i=xf.prototype;i[e]||(i[e]=AQ)}get changes(){return this._changes||(this._changes=new Le)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=qo(t);(this._changesDetected=!function(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=t[i];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Jx{constructor(t){this.queryList=t,this.matches=null}clone(){return new Jx(this.queryList)}setDirty(){this.queryList.setDirty()}}class eD{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<i;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new eD(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==C3(t,e).matches&&this.queries[e].setDirty()}}class v3{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class tD{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==e?e.push(s):e=[s])}return null!==e?new tD(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class nD{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new nD(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,e,DQ(e,s)),this.matchTNodeWithReadOption(t,e,jd(e,t,s,!1,!1))}else i===ro?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,jd(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ot||r===ls||r===ro&&4&e.type)this.addMatch(e.index,-2);else{const s=jd(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function DQ(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function IQ(n,t,e,i){return-1===e?function(n,t){return 11&n.type?Bg(n,t):4&n.type?zC(n,t):null}(t,n):-2===e?function(n,t,e){return e===ot?Bg(t,n):e===ro?zC(t,n):e===ls?zL(t,n):void 0}(n,t,i):zd(n,n[1],e,t)}function y3(n,t,e,i){const r=t[19].queries[i];if(null===r.matches){const s=n.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:IQ(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function iD(n,t,e,i){const r=n.queries.getByIndex(e),s=r.matches;if(null!==s){const o=y3(n,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let h=10;h<u.length;h++){const p=u[h];p[17]===p[3]&&iD(p[1],p,c,i)}if(null!==u[9]){const h=u[9];for(let p=0;p<h.length;p++){const g=h[p];iD(g[1],g,c,i)}}}}}return i}function Ft(n){const t=Me(),e=Pn(),i=N0();D_(i+1);const r=C3(e,i);if(n.dirty&&Bl(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?iD(e,t,i,[]):y3(e,t,r,i);n.reset(s,OL),n.notifyOnChanges()}return!0}return!1}function fi(n,t,e){const i=Pn();i.firstCreatePass&&(w3(i,new v3(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),b3(i,Me(),t)}function Ui(n,t,e,i){const r=Pn();if(r.firstCreatePass){const s=Ir();w3(r,new v3(t,e,i),s.index),function(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(r,n),2==(2&e)&&(r.staticContentQueries=!0)}b3(r,Me(),e)}function Nt(){return function(n,t){return n[19].queries[t].queryList}(Me(),N0())}function b3(n,t,e){const i=new xf(4==(4&e));oC(n,t,i,i.destroy),null===t[19]&&(t[19]=new eD),t[19].queries.push(new Jx(i))}function w3(n,t,e){null===n.queries&&(n.queries=new tD),n.queries.track(new nD(t,e))}function C3(n,t){return n.queries.getByIndex(t)}function qC(n,t){return zC(n,t)}const Yg=new Ee("Application Initializer");let Xg=(()=>{class n{constructor(e){this.appInits=e,this.resolve=VC,this.reject=VC,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(ty(s))e.push(s);else if(IC(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(I(Yg,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const wy=new Ee("AppId"),aJ={provide:wy,useFactory:function(){return`${cD()}${cD()}${cD()}`},deps:[]};function cD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const j3=new Ee("Platform Initializer"),vl=new Ee("Platform ID"),Cy=new Ee("appBootstrapListener");let KC=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const Yu=new Ee("LocaleId"),z3=new Ee("DefaultCurrencyCode");class cJ{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const uD=function(n){return new Zx(n)},uJ=uD,dJ=function(n){return Promise.resolve(uD(n))},U3=function(n){const t=uD(n),i=ol(yo(n).declarations).reduce((r,s)=>{const o=si(s);return o&&r.push(new c3(o)),r},[]);return new cJ(t,i)},hJ=U3,fJ=function(n){return Promise.resolve(U3(n))};let Df=(()=>{class n{constructor(){this.compileModuleSync=uJ,this.compileModuleAsync=dJ,this.compileModuleAndAllComponentsSync=hJ,this.compileModuleAndAllComponentsAsync=fJ}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const H3=new Ee("compilerOptions"),gJ=(()=>Promise.resolve(0))();function dD(n){"undefined"==typeof Zone?gJ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=pn.requestAnimationFrame,t=pn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(n){const t=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(pn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,fD(n),n.isCheckStableRunning=!0,hD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),fD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,s,o,a)=>{try{return $3(n),e.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&t(),G3(n)}},onInvoke:(e,i,r,s,o,a,l)=>{try{return $3(n),e.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&t(),G3(n)}},onHasTask:(e,i,r,s)=>{e.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,fD(n),hD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,i,r,s)=>(e.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,_J,VC,VC);try{return s.runTask(o,e,i)}finally{s.cancelTask(o)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const _J={};function hD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $3(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function G3(n){n._nesting--,hD(n)}class bJ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}}let pD=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pt.assertNotInAngularZone(),dD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dD(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return n.\u0275fac=function(e){return new(e||n)(I(pt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),W3=(()=>{class n{constructor(){this._applications=new Map,gD.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return gD.findTestabilityInTree(this,e,i)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class wJ{addToWindow(t){}findTestabilityInTree(t,e,i){return null}}let gD=new wJ,q3=!0,Y3=!1;function Oo(){return Y3=!0,q3}let ec;const X3=new Ee("AllowMultipleToken");function K3(n,t,e=[]){const i=`Platform: ${t}`,r=new Ee(i);return(s=[])=>{let o=_D();if(!o||o.injector.get(X3,!1))if(n)n(e.concat(s).concat({provide:r,useValue:!0}));else{const a=e.concat(s).concat({provide:r,useValue:!0},{provide:Gu,useValue:"platform"});!function(n){if(ec&&!ec.destroyed&&!ec.injector.get(X3,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=n.get(Z3);const t=n.get(j3,null);t&&t.forEach(e=>e())}(Bt.create({providers:a,name:i}))}return function(n){const t=_D();if(!t)throw new Error("No platform exists!");if(!t.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function _D(){return ec&&!ec.destroyed?ec:null}let Z3=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const a=function(n,t){let e;return e="noop"===n?new bJ:("zone.js"===n?void 0:n)||new pt({enableLongStackTrace:Oo(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:pt,useValue:a}];return a.run(()=>{const c=Bt.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),h=u.injector.get(Qo,null);if(!h)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const p=a.onError.subscribe({next:g=>{h.handleError(g)}});u.onDestroy(()=>{vD(this._modules,u),p.unsubscribe()})}),function(n,t,e){try{const i=e();return ty(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(h,a,()=>{const p=u.injector.get(Xg);return p.runInitializers(),p.donePromise.then(()=>(Dx(u.injector.get(Yu,kC)||kC),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=Q3({},i);return function(n,t,e){const i=new Zx(e);return Promise.resolve(i)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const i=e.injector.get(ch);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${W(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(I(Bt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();function Q3(n,t){return Array.isArray(t)?t.reduce(Q3,n):Object.assign(Object.assign({},n),t)}let ch=(()=>{class n{constructor(e,i,r,s,o){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new ue(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new ue(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{pt.assertNotInAngularZone(),dD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{pt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=zi(a,l.pipe(Ys()))}bootstrap(e,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=e instanceof TL?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Xc),a=r.create(Bt.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(pD,null),u=c&&a.injector.get(W3);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),vD(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;vD(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Cy,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(I(pt),I(Bt),I(Qo),I(gl),I(Xg))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();function vD(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const YJ=K3(null,"core",[{provide:vl,useValue:"unknown"},{provide:Z3,deps:[Bt]},{provide:W3,deps:[]},{provide:KC,deps:[]}]),JJ=[{provide:ch,useClass:ch,deps:[pt,Bt,Qo,gl,Xg]},{provide:oQ,deps:[pt],useFactory:function(n){let t=[];return n.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Xg,useClass:Xg,deps:[[new Sr,Yg]]},{provide:Df,useClass:Df,deps:[]},aJ,{provide:Vg,useFactory:function(){return eZ},deps:[]},{provide:jg,useFactory:function(){return tZ},deps:[]},{provide:Yu,useFactory:function(n){return Dx(n=n||"undefined"!=typeof $localize&&$localize.locale||kC),n},deps:[[new Yd(Yu),new Sr,new rl]]},{provide:z3,useValue:"USD"}];let tee=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(I(ch))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:JJ}),n})(),lE=null;function Kc(){return lE}const lt=new Ee("DocumentToken");let Pf=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({factory:ete,token:n,providedIn:"platform"}),n})();function ete(){return I(AB)}let AB=(()=>{class n extends Pf{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kc().getBaseHref(this._doc)}onPopState(e){const i=Kc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Kc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){TB()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){TB()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({factory:nte,token:n,providedIn:"platform"}),n})();function TB(){return!!window.history.pushState}function nte(){return new AB(I(lt))}function RD(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function xB(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ku(n){return n&&"?"!==n[0]?"?"+n:n}let Qg=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({factory:ite,token:n,providedIn:"root"}),n})();function ite(n){const t=I(lt).location;return new DB(I(Pf),t&&t.origin||"")}const kD=new Ee("appBaseHref");let DB=(()=>{class n extends Qg{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return RD(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Ku(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const o=this.prepareExternalUrl(r+Ku(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,s){const o=this.prepareExternalUrl(r+Ku(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(I(Pf),I(kD,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Jg=(()=>{class n{constructor(e,i){this._subject=new Le,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=xB(OB(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ku(i))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,OB(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ku(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ku(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.\u0275fac=function(e){return new(e||n)(I(Qg),I(Pf))},n.normalizeQueryParams=Ku,n.joinWithSlash=RD,n.stripTrailingSlash=xB,n.\u0275prov=pe({factory:ste,token:n,providedIn:"root"}),n})();function ste(){return new Jg(I(Qg),I(Pf))}function OB(n){return n.replace(/\/index.html$/,"")}var Wr=(()=>((Wr=Wr||{})[Wr.Zero=0]="Zero",Wr[Wr.One=1]="One",Wr[Wr.Two=2]="Two",Wr[Wr.Few=3]="Few",Wr[Wr.Many=4]="Many",Wr[Wr.Other=5]="Other",Wr))();const fte=function(n){return function(n){const t=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=tL(t);if(e)return e;const i=t.split("-")[0];if(e=tL(i),e)return e;if("en"===i)return PX;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[rt.PluralCase]};class vE{}let Ute=(()=>{class n extends vE{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(fte(i||this.locale)(e)){case Wr.Zero:return"zero";case Wr.One:return"one";case Wr.Two:return"two";case Wr.Few:return"few";case Wr.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(I(Yu))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();function VB(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let yE=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Jv(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${W(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(E(Vg),E(jg),E(ot),E(Yc))},n.\u0275dir=_e({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class $te{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rc=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=[];e.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new $te(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new jB(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new jB(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(e,i){e.context.$implicit=i.item}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(E(ls),E(ro),E(Vg))},n.\u0275dir=_e({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class jB{constructor(t,e){this.record=t,this.view=e}}let js=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Wte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){zB("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){zB("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(E(ls),E(ro))},n.\u0275dir=_e({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Wte{constructor(){this.$implicit=null,this.ngIf=null}}function zB(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${W(t)}'.`)}class HD{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Dy=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),$D=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new HD(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(E(ls),E(ro),E(Dy,9))},n.\u0275dir=_e({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),UB=(()=>{class n{constructor(e,i,r){r._addDefault(new HD(e,i))}}return n.\u0275fac=function(e){return new(e||n)(E(ls),E(ro),E(Dy,9))},n.\u0275dir=_e({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),$B=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(jg),E(Yc))},n.\u0275dir=_e({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();function sc(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${W(n)}'`)}class Xte{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Kte{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}onDestroy(t){}}const Zte=new Kte,Qte=new Xte;let Qu=(()=>{class n{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(ty(e))return Zte;if(f2(e))return Qte;throw sc(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(E(Qn,16))},n.\u0275pipe=_s({name:"async",type:n,pure:!1}),n})();const rne=/#/g;let GB=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(null==e)return"";if("object"!=typeof i||null===i)throw sc(n,i);return i[function(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}(e,Object.keys(i),this._localization,r)].replace(rne,e.toString())}}return n.\u0275fac=function(e){return new(e||n)(E(vE,16))},n.\u0275pipe=_s({name:"i18nPlural",type:n,pure:!0}),n})(),WB=(()=>{class n{transform(e){return JSON.stringify(e,null,2)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=_s({name:"json",type:n,pure:!1}),n})(),Mn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[{provide:vE,useClass:Ute}]}),n})();const YB="browser";function Rf(n){return n===YB}function qD(n){return"server"===n}class ZB{}class YD extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){lE||(lE=n)}(new YD)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Oy=Oy||document.querySelector("base"),Oy?Oy.getAttribute("href"):null);return null==e?null:function(n){bE=bE||document.createElement("a"),bE.setAttribute("href",n);const t=bE.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Oy=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return VB(document.cookie,t)}}let bE,Oy=null;const QB=new Ee("TRANSITION_ID"),wne=[{provide:Yg,useFactory:function(n,t,e){return()=>{e.get(Xg).donePromise.then(()=>{const i=Kc(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[QB,lt,Bt],multi:!0}];class XD{static init(){!function(n){gD=n}(new XD)}addToWindow(t){pn.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},pn.getAllAngularTestabilities=()=>t.getAllTestabilities(),pn.getAllAngularRootElements=()=>t.getAllRootElements(),pn.frameworkStabilizers||(pn.frameworkStabilizers=[]),pn.frameworkStabilizers.push(i=>{const r=pn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?Kc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Cne=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const Iy=new Ee("EventManagerPlugins");let CE=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(I(Iy),I(pt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class KD{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=Kc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let eV=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Py=(()=>{class n extends eV{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(tV),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(tV))}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();function tV(n){Kc().remove(n)}const ZD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},QD=/%COMP%/g;function EE(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?EE(n,r,e):(r=r.replace(QD,n),e.push(r))}return e}function rV(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let SE=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new JD(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case Ue.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Lne(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case Ue.ShadowDom:return new Bne(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=EE(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(I(CE),I(Py),I(wy))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class JD{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ZD[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=ZD[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=ZD[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Ao.DashCase|Ao.Important)?t.style.setProperty(e,i,r&Ao.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ao.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,rV(i)):this.eventManager.addEventListener(t,e,rV(i))}}class Lne extends JD{constructor(t,e,i,r){super(t),this.component=i;const s=EE(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(QD,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(QD,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Bne extends JD{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=EE(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Vne=(()=>{class n extends KD{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const aV=["alt","control","meta","shift"],Wne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lV={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yne=(()=>{class n extends KD{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kc().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(aV.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(e){let i="",r=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&lV.hasOwnProperty(t)&&(t=lV[t]))}return Wne[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),aV.forEach(s=>{s!=r&&qne[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),dh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({factory:function(){return I(tO)},token:n,providedIn:"root"}),n})(),tO=(()=>{class n extends dh{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case hn.NONE:return i;case hn.HTML:return Xo(i,"HTML")?Cs(i):iv(this._doc,String(i)).toString();case hn.STYLE:return Xo(i,"Style")?Cs(i):i;case hn.SCRIPT:if(Xo(i,"Script"))return Cs(i);throw new Error("unsafe value used in a script context");case hn.URL:return zc(i),Xo(i,"URL")?Cs(i):Mo(String(i));case hn.RESOURCE_URL:if(Xo(i,"ResourceURL"))return Cs(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(n){return new X_(n)}(e)}bypassSecurityTrustStyle(e){return function(n){return new K_(n)}(e)}bypassSecurityTrustScript(e){return function(n){return new ng(n)}(e)}bypassSecurityTrustUrl(e){return function(n){return new Zd(n)}(e)}bypassSecurityTrustResourceUrl(e){return function(n){return new Gt(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({factory:function(){return function(n){return new tO(n.get(lt))}(I($u))},token:n,providedIn:"root"}),n})();const nie=K3(YJ,"browser",[{provide:vl,useValue:YB},{provide:j3,useValue:function(){YD.makeCurrent(),XD.init()},multi:!0},{provide:lt,useFactory:function(){return function(n){yi=n}(document),document},deps:[]}]),iie=[[],{provide:Gu,useValue:"root"},{provide:Qo,useFactory:function(){return new Qo},deps:[]},{provide:Iy,useClass:Vne,multi:!0,deps:[lt,pt,vl]},{provide:Iy,useClass:Yne,multi:!0,deps:[lt]},[],{provide:SE,useClass:SE,deps:[CE,Py,wy]},{provide:Mf,useExisting:SE},{provide:eV,useExisting:Py},{provide:Py,useClass:Py,deps:[lt]},{provide:pD,useClass:pD,deps:[pt]},{provide:CE,useClass:CE,deps:[Iy,pt]},{provide:ZB,useClass:Cne,deps:[]},[]];let ME=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:wy,useValue:e.appId},{provide:QB,useExisting:wy},wne]}}}return n.\u0275fac=function(e){return new(e||n)(I(n,12))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:iie,imports:[Mn,tee]}),n})();"undefined"!=typeof window&&window;class die extends Re{constructor(t,e){super()}schedule(t,e=0){return this}}class AE extends die{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let uV=(()=>{class n{constructor(e,i=n.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,r){return new this.SchedulerAction(this,e).schedule(r,i)}}return n.now=()=>Date.now(),n})();class oc extends uV{constructor(t,e=uV.now){super(t,()=>oc.delegate&&oc.delegate!==this?oc.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return oc.delegate&&oc.delegate!==this?oc.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const pie=new class extends oc{}(class extends AE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(t,e,i):t.flush(this)}}),ac=new ue(n=>n.complete());function TE(n){return n?function(n){return new ue(t=>n.schedule(()=>t.complete()))}(n):ac}function ut(...n){let t=n[n.length-1];return De(t)?(n.pop(),ji(n,t)):qa(n)}function em(n,t){return new ue(t?e=>t.schedule(mie,0,{error:n,subscriber:e}):e=>e.error(n))}function mie({error:n,subscriber:t}){t.error(n)}class ra{constructor(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)}toObservable(){switch(this.kind){case"N":return ut(this.value);case"E":return em(this.error);case"C":return TE()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new ra("N",t):ra.undefinedValueNotification}static createError(t){return new ra("E",void 0,t)}static createComplete(){return ra.completeNotification}}ra.completeNotification=new ra("C"),ra.undefinedValueNotification=new ra("N",void 0);class xE extends At{constructor(t,e,i=0){super(t),this.scheduler=e,this.delay=i}static dispatch(t){const{notification:e,destination:i}=t;e.observe(i),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(xE.dispatch,this.delay,new vie(t,this.destination)))}_next(t){this.scheduleMessage(ra.createNext(t))}_error(t){this.scheduleMessage(ra.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(ra.createComplete()),this.unsubscribe()}}class vie{constructor(t,e){this.notification=t,this.destination=e}}class Ry extends G{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new yie(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new $t;if(this.isStopped||this.hasError?o=Re.EMPTY:(this.observers.push(t),o=new Wn(this,t)),r&&t.add(t=new xE(t,r)),e)for(let a=0;a<s&&!t.closed;a++)t.next(i[a]);else for(let a=0;a<s&&!t.closed;a++)t.next(i[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||pie).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(t-r[o].time<i);)o++;return s>e&&(o=Math.max(o,s-e)),o>0&&r.splice(0,o),r}}class yie{constructor(t,e){this.time=t,this.value=e}}function Fr(n,t){return"function"==typeof t?e=>e.pipe(Fr((i,r)=>gi(n(i,r)).pipe(re((s,o)=>t(i,s,r,o))))):e=>e.lift(new bie(n))}class bie{constructor(t){this.project=t}call(t,e){return e.subscribe(new wie(t,this.project))}}class wie extends mi{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const i=new gs(this),r=this.destination;r.add(i),this.innerSubscription=Uo(t,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const DE={schedule(n,t){const e=setTimeout(n,t);return()=>clearTimeout(e)},scheduleBeforeRender(n){if("undefined"==typeof window)return DE.schedule(n,0);if(void 0===window.requestAnimationFrame)return DE.schedule(n,16);const t=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(t)}};let iO;function Iie(n,t,e){let i=e;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&t.some((r,s)=>!("*"===r||!function(n,t){if(!iO){const e=Element.prototype;iO=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&iO.call(n,t)}(n,r)||(i=s,0))),i}class Rie{constructor(t,e){this.componentFactory=e.get(gl).resolveComponentFactory(t)}create(t){return new kie(this.componentFactory,t)}}class kie{constructor(t,e){this.componentFactory=t,this.injector=e,this.eventEmitters=new Ry(1),this.events=this.eventEmitters.pipe(Fr(i=>zi(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(pt),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=DE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(t){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,e){this.runInZone(()=>{null!==this.componentRef?function(n,t){return n===t||n!=n&&t!=t}(e,this.getInputValue(t))&&(void 0!==e||!this.unchangedInputs.has(t))||(this.recordInputChange(t,e),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=e,this.scheduleDetectChanges()):this.initialInputValues.set(t,e)})}initializeComponent(t){const e=Bt.create({providers:[],parent:this.injector}),i=function(n,t){const e=n.childNodes,i=t.map(()=>[]);let r=-1;t.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=e.length;s<o;++s){const a=e[s],l=Iie(a,t,r);-1!==l&&i[l].push(a)}return i}(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,i,t),this.viewChangeDetectorRef=this.componentRef.injector.get(Qn),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(ch).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t))}),this.initialInputValues.clear()}initializeOutputs(t){const e=this.componentFactory.outputs.map(({propName:i,templateName:r})=>t.instance[i].pipe(re(o=>({name:r,value:o}))));this.eventEmitters.next(e)}callNgOnChanges(t){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(e)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=DE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,e){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[t];if(i)return void(i.currentValue=e);const r=this.unchangedInputs.has(t),s=r?void 0:this.getInputValue(t);this.inputChanges[t]=new w_(s,e,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}}class Fie extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function jt(n){return null!=n&&"false"!=`${n}`}function Po(n,t=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function OE(n){return Array.isArray(n)?n:[n]}function Yr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ju(n){return n instanceof ot?n.nativeElement:n}const kf=new oc(AE);function tm(n,t=kf){return e=>e.lift(new Vie(n,t))}class Vie{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new jie(t,this.dueTime,this.scheduler))}}class jie extends At{constructor(t,e,i){super(t),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(zie,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function zie(n){n.debouncedNext()}let rO=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({factory:function(){return new n},token:n,providedIn:"root"}),n})(),dV=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=Ju(e);return new ue(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new G,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(I(rO))},n.\u0275prov=pe({factory:function(){return new n(I(rO))},token:n,providedIn:"root"}),n})(),sO=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new Le,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=jt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Po(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(tm(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(E(dV),E(ot),E(pt))},n.\u0275dir=_e({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),IE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[rO]}),n})();class hr extends G{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new $t;return this._value}next(t){super.next(this._value=t)}}function sa(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function fh(){}function Ni(n,t,e){return function(r){return r.lift(new Jie(n,t,e))}}class Jie{constructor(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}call(t,e){return e.subscribe(new ere(t,this.nextOrObserver,this.error,this.complete))}}class ere extends At{constructor(t,e,i,r){super(t),this._tapNext=fh,this._tapError=fh,this._tapComplete=fh,this._tapError=i||fh,this._tapComplete=r||fh,ct(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||fh,this._tapError=e.error||fh,this._tapComplete=e.complete||fh)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function $n(n,t){return function(i){return i.lift(new tre(n,t))}}class tre{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new nre(t,this.predicate,this.thisArg))}}class nre extends At{constructor(t,e,i){super(t),this.predicate=e,this.thisArg=i,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(t)}}const gV=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Mi(n){return t=>0===n?TE():t.lift(new ire(n))}class ire{constructor(t){if(this.total=t,this.total<0)throw new gV}call(t,e){return e.subscribe(new rre(t,this.total))}}class rre extends At{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))}}function uO(n){return t=>t.lift(new sre(n))}class sre{constructor(t){this.total=t}call(t,e){return e.subscribe(new ore(t,this.total))}}class ore extends At{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function Zc(n,t){return e=>e.lift(new are(n,t))}class are{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new lre(t,this.compare,this.keySelector))}}class lre extends At{constructor(t,e,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:r}=this;e=r?r(t):t}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=e,this.destination.next(t))}}function Jn(n){return t=>t.lift(new cre(n))}class cre{constructor(t){this.notifier=t}call(t,e){const i=new ure(t),r=Uo(this.notifier,new gs(i));return r&&!i.seenValue?(i.add(r),e.subscribe(i)):i}}class ure extends mi{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let dO;try{dO="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){dO=!1}let rm,pi=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Rf(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!dO)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(I(vl))},n.\u0275prov=pe({factory:function(){return new n(I(vl))},token:n,providedIn:"root"}),n})(),Ly=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const mV=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _V(){if(rm)return rm;if("object"!=typeof document||!document)return rm=new Set(mV),rm;let n=document.createElement("input");return rm=new Set(mV.filter(t=>(n.setAttribute("type",t),n.type===t))),rm}let By,Ff,hO;function sm(n){return function(){if(null==By&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>By=!0}))}finally{By=By||!1}return By}()?n:!!n.capture}function vV(){if(null==Ff){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ff=!1,Ff;if("scrollBehavior"in document.documentElement.style)Ff=!0;else{const n=Element.prototype.scrollTo;Ff=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ff}function RE(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Nf(n){return n.composedPath?n.composedPath()[0]:n.target}function kE(n,t){return(n.getAttribute(t)||"").match(/\S+/g)||[]}const bV="cdk-describedby-message-container",wV="cdk-describedby-message",FE="cdk-describedby-host";let mre=0;const Qc=new Map;let zs=null,CV=(()=>{class n{constructor(e){this._document=e}describe(e,i,r){if(!this._canBeDescribed(e,i))return;const s=fO(i,r);"string"!=typeof i?(EV(i),Qc.set(s,{messageElement:i,referenceCount:0})):Qc.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;const s=fO(i,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof i){const o=Qc.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}zs&&0===zs.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll(`[${FE}]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(FE);zs&&this._deleteMessagesContainer(),Qc.clear()}_createMessageElement(e,i){const r=this._document.createElement("div");EV(r),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),zs.appendChild(r),Qc.set(fO(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){const i=Qc.get(e),r=i&&i.messageElement;zs&&r&&zs.removeChild(r),Qc.delete(e)}_createMessagesContainer(){if(!zs){const e=this._document.getElementById(bV);e&&e.parentNode&&e.parentNode.removeChild(e),zs=this._document.createElement("div"),zs.id=bV,zs.style.visibility="hidden",zs.classList.add("cdk-visually-hidden"),this._document.body.appendChild(zs)}}_deleteMessagesContainer(){zs&&zs.parentNode&&(zs.parentNode.removeChild(zs),zs=null)}_removeCdkDescribedByReferenceIds(e){const i=kE(e,"aria-describedby").filter(r=>0!=r.indexOf(wV));e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){const r=Qc.get(i);(function(n,t,e){const i=kE(n,t);i.some(r=>r.trim()==e.trim())||(i.push(e.trim()),n.setAttribute(t,i.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(FE,""),r.referenceCount++}_removeMessageReference(e,i){const r=Qc.get(i);r.referenceCount--,function(n,t,e){const r=kE(n,t).filter(s=>s!=e.trim());r.length?n.setAttribute(t,r.join(" ")):n.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(FE)}_isElementDescribedByMessage(e,i){const r=kE(e,"aria-describedby"),s=Qc.get(i),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=e.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({factory:function(){return new n(I(lt))},token:n,providedIn:"root"}),n})();function fO(n,t){return"string"==typeof n?`${t||""}/${n}`:n}function EV(n){n.id||(n.id=`${wV}-${mre++}`)}class SV{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new G,this._typeaheadSubscription=Re.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new G,this.change=new G,t instanceof xf&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ni(e=>this._pressedLetters.push(e)),tm(t),$n(()=>this._pressedLetters.length>0),re(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||sa(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t),r=e[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof xf?this._items.toArray():this._items}}class MV extends SV{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class AV extends SV{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let TV=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(t){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===DV(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=DV(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||xV(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(I(pi))},n.\u0275prov=pe({factory:function(){return new n(I(pi))},token:n,providedIn:"root"}),n})();function xV(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function DV(n){if(!xV(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Tre{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let i=0;i<e.length;i++)e[i].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]):e[i].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Mi(1)).subscribe(t)}}let OV=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new Tre(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(I(TV),I(pt),I(lt))},n.\u0275prov=pe({factory:function(){return new n(I(TV),I(pt),I(lt))},token:n,providedIn:"root"}),n})();function IV(n){return 0===n.offsetX&&0===n.offsetY}function PV(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const RV=new Ee("cdk-input-modality-detector-options"),Pre={ignoreKeys:[18,17,224,91,16]},om=sm({passive:!0,capture:!0});let FV=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new hr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Nf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(IV(o)?"keyboard":"mouse"),this._mostRecentTarget=Nf(o))},this._onTouchstart=o=>{PV(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Nf(o))},this._options=Object.assign(Object.assign({},Pre),s),this.modalityDetected=this._modality.pipe(uO(1)),this.modalityChanged=this.modalityDetected.pipe(Zc()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,om),r.addEventListener("mousedown",this._onMousedown,om),r.addEventListener("touchstart",this._onTouchstart,om)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,om),document.removeEventListener("mousedown",this._onMousedown,om),document.removeEventListener("touchstart",this._onTouchstart,om))}}return n.\u0275fac=function(e){return new(e||n)(I(pi),I(pt),I(lt),I(RV,8))},n.\u0275prov=pe({factory:function(){return new n(I(pi),I(pt),I(lt),I(RV,8))},token:n,providedIn:"root"}),n})();const NV=new Ee("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),LV=new Ee("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let NE=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>new Promise(a=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,a(),"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].parentNode.removeChild(i[s]);return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(I(NV,8),I(pt),I(lt),I(LV,8))},n.\u0275prov=pe({factory:function(){return new n(I(NV,8),I(pt),I(lt),I(LV,8))},token:n,providedIn:"root"}),n})();const BV=new Ee("cdk-focus-monitor-default-options"),LE=sm({passive:!0,capture:!0});let wl=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new G,this._rootNodeFocusAndBlurListener=a=>{const l=Nf(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(e,i=!1){const r=Ju(e);if(!this._platform.isBrowser||1!==r.nodeType)return ut(null);const s=function(n){if(function(){if(null==hO){const n="undefined"!=typeof document?document.head:null;hO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return hO}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new G,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=Ju(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=Ju(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,i,r){r?e.classList.add(i):e.classList.remove(i)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){this._toggleClass(e,"cdk-focused",!!i),this._toggleClass(e,"cdk-touch-focused","touch"===i),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(e,"cdk-mouse-focused","mouse"===i),this._toggleClass(e,"cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=Nf(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,LE),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,LE)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Jn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,LE),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,LE),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(I(pt),I(pi),I(FV),I(lt,8),I(BV,8))},n.\u0275prov=pe({factory:function(){return new n(I(pt),I(pi),I(FV),I(lt,8),I(BV,8))},token:n,providedIn:"root"}),n})();const VV="cdk-high-contrast-black-on-white",jV="cdk-high-contrast-white-on-black",pO="cdk-high-contrast-active";let zV=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(pO),e.remove(VV),e.remove(jV),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(pO),e.add(VV)):2===i&&(e.add(pO),e.add(jV))}}}return n.\u0275fac=function(e){return new(e||n)(I(pi),I(lt))},n.\u0275prov=pe({factory:function(){return new n(I(pi),I(lt))},token:n,providedIn:"root"}),n})(),kre=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(I(zV))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Ly,IE]]}),n})();const UV=new Ee("cdk-dir-doc",{providedIn:"root",factory:function(){return Vc(lt)}});let oa=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Le,e){const r=e.documentElement?e.documentElement.dir:null,s=(e.body?e.body.dir:null)||r;this.value="ltr"===s||"rtl"===s?s:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(I(UV,8))},n.\u0275prov=pe({factory:function(){return new n(I(UV,8))},token:n,providedIn:"root"}),n})(),jy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const HV=new qu("12.2.5");class $V{}const ed="*";function lc(n,t){return{type:7,name:n,definitions:t,options:{}}}function Ro(n,t=null){return{type:4,styles:t,timings:n}}function GV(n,t=null){return{type:2,steps:n,options:t}}function ci(n){return{type:6,styles:n,offset:null}}function Ar(n,t,e){return{type:0,name:n,styles:t,options:e}}function Lre(n){return{type:5,steps:n}}function ao(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Bre(n=null){return{type:9,options:n}}function Vre(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function WV(n){Promise.resolve(null).then(n)}class am{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){WV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class qV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?WV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function YV(){return"undefined"!=typeof window&&void 0!==window.document}function mO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ph(n){switch(n.length){case 0:return new am;case 1:return n[0];default:return new qV(n)}}function XV(n,t,e,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const h=u.offset,p=h==l,g=p&&c||{};Object.keys(u).forEach(m=>{let v=m,y=u[m];if("offset"!==m)switch(v=t.normalizePropertyName(v,o),y){case"!":y=r[m];break;case ed:y=s[m];break;default:y=t.normalizeStyleValue(m,v,y,o)}g[v]=y}),p||a.push(g),c=g,l=h}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function _O(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&vO(e,"start",n)));break;case"done":n.onDone(()=>i(e&&vO(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&vO(e,"destroy",n)))}}function vO(n,t,e){const i=e.totalTime,s=yO(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),o=n._data;return null!=o&&(s._data=o),s}function yO(n,t,e,i,r="",s=0,o){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Pa(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function KV(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let bO=(n,t)=>!1,wO=(n,t)=>!1,ZV=(n,t,e)=>[];const QV=mO();(QV||"undefined"!=typeof Element)&&(bO=YV()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),wO=(()=>{if(QV||Element.prototype.matches)return(n,t)=>n.matches(t);{const n=Element.prototype,t=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return t?(e,i)=>t.apply(e,[i]):wO}})(),ZV=(n,t,e)=>{let i=[];if(e){const r=n.querySelectorAll(t);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(t);r&&i.push(r)}return i});let Lf=null,JV=!1;function CO(n){Lf||(Lf=("undefined"!=typeof document?document.body:null)||{},JV=!!Lf.style&&"WebkitAppearance"in Lf.style);let t=!0;return Lf.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Lf.style,!t&&JV&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Lf.style)),t}const EO=wO,SO=bO,MO=ZV;function ej(n){const t={};return Object.keys(n).forEach(e=>{const i=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=n[e]}),t}let tj=(()=>{class n{validateStyleProperty(e){return CO(e)}matchesElement(e,i){return EO(e,i)}containsElement(e,i){return SO(e,i)}query(e,i,r){return MO(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,o,a=[],l){return new am(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class BE{}BE.NOOP=new tj;const AO="ng-enter",VE="ng-leave",jE="ng-trigger",zE=".ng-trigger",ij="ng-animating",TO=".ng-animating";function Bf(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:xO(parseFloat(t[1]),t[2])}function xO(n,t){switch(t){case"s":return 1e3*n;default:return n}}function UE(n,t,e){return n.hasOwnProperty("duration")?n:function(n,t,e){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=xO(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=xO(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!e){let a=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&t.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:s,easing:o}}(n,t,e)}function lm(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function gh(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else lm(n,e);return e}function sj(n,t,e){return e?t+":"+e+";":""}function oj(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=sj(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=sj(0,qre(e),n.style[e]));n.setAttribute("style",t)}function Jc(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=OO(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),mO()&&oj(n))}function Vf(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=OO(e);n.style[i]=""}),mO()&&oj(n))}function zy(n){return Array.isArray(n)?1==n.length?n[0]:GV(n):n}const DO=new RegExp("{{\\s*(.+?)\\s*}}","g");function aj(n){let t=[];if("string"==typeof n){let e;for(;e=DO.exec(n);)t.push(e[1]);DO.lastIndex=0}return t}function HE(n,t,e){const i=n.toString(),r=i.replace(DO,(s,o)=>{let a=t[o];return t.hasOwnProperty(o)||(e.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return r==i?n:r}function $E(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Wre=/-+([a-z0-9])/g;function OO(n){return n.replace(Wre,(...t)=>t[1].toUpperCase())}function qre(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lj(n,t){return 0===n||0===t}function cj(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],o=[];if(i.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=e[a]}),o.length)for(var r=1;r<t.length;r++){let a=t[r];o.forEach(function(l){a[l]=IO(n,l)})}}return t}function Ra(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function IO(n,t){return window.getComputedStyle(n)[t]}function Yre(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,t,e){if(":"==n[0]){const l=function(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof l)return void t.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const r=i[1],s=i[2],o=i[3];t.push(uj(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(uj(o,r))}(i,e,t)):e.push(n),e}const WE=new Set(["true","1"]),qE=new Set(["false","0"]);function uj(n,t){const e=WE.has(n)||qE.has(n),i=WE.has(t)||qE.has(t);return(r,s)=>{let o="*"==n||n==r,a="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?WE.has(n):qE.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?WE.has(t):qE.has(t)),o&&a}}const Zre=new RegExp("s*:selfs*,?","g");function PO(n,t,e){return new Qre(n).build(t,e)}class Qre{constructor(t){this._driver=t}build(t,e){const i=new tse(e);return this._resetContextStyleTimingState(i),Ra(this,zy(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};if(i.styles.forEach(a=>{if(YE(a)){const l=a;Object.keys(l).forEach(c=>{aj(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size){const a=$E(s.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ra(this,zy(t.animation),e);return{type:1,matchers:Yre(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:jf(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ra(this,i,e)),options:jf(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=i;const a=Ra(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:jf(t.options)}}visitAnimate(t,e){const i=function(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return RO(UE(n,t).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=RO(0,0,"");return s.dynamic=!0,s.strValue=i,s}return e=e||UE(i,t),RO(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:ci({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=ci(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(o=>{"string"==typeof o?o==ed?i.push(o):e.errors.push(`The provided style string value ${o} is not allowed.`):i.push(o)}):i.push(t.styles);let r=!1,s=null;return i.forEach(o=>{if(YE(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!r)for(let c in a)if(a[c].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void e.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=e.collectedStyles[e.currentQuerySelector],c=l[a];let u=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(e.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:r}),e.options&&function(n,t,e){const i=t.params||{},r=aj(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(C=>{const w=this._makeStyleAst(C,e);let A=null!=w.offset?w.offset:function(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(YE(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(YE(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(w.styles),k=0;return null!=A&&(s++,k=w.offset=A),l=l||k<0||k>1,a=a||k<c,c=k,o.push(k),w});l&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");const h=t.steps.length;let p=0;s>0&&s<h?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(p=1/(h-1));const g=h-1,m=e.currentTime,v=e.currentAnimateTimings,y=v.duration;return u.forEach((C,w)=>{const A=p>0?w==g?1:p*w:o[w],k=A*y;e.currentTime=m+v.delay+k,v.duration=k,this._validateStyleAst(C,e),C.offset=A,i.styles.push(C)}),i}visitReference(t,e){return{type:8,animation:Ra(this,zy(t.animation),e),options:jf(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:jf(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:jf(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Zre,"")),[n=n.replace(/@\*/g,zE).replace(/@\w+/g,e=>zE+"-"+e.substr(1)).replace(/:animating/g,TO),t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Pa(e.collectedStyles,e.currentQuerySelector,{});const a=Ra(this,zy(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:jf(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:UE(t.timings,e.errors,!0);return{type:12,animation:Ra(this,zy(t.animation),e),timings:i,options:null}}}class tse{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function YE(n){return!Array.isArray(n)&&"object"==typeof n}function jf(n){return n?(n=lm(n)).params&&(n.params=function(n){return n?lm(n):null}(n.params)):n={},n}function RO(n,t,e){return{duration:n,delay:t,easing:e}}function kO(n,t,e,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class XE{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const ose=new RegExp(":enter","g"),lse=new RegExp(":leave","g");function FO(n,t,e,i,r,s={},o={},a,l,c=[]){return(new cse).buildKeyframes(n,t,e,i,r,s,o,a,l,c)}class cse{buildKeyframes(t,e,i,r,s,o,a,l,c,u=[]){c=c||new XE;const h=new NO(t,e,c,r,s,u,[]);h.options=l,h.currentTimeline.setStyles([o],null,h.errors,l),Ra(this,i,h);const p=h.timelines.filter(g=>g.containsAnimation());if(p.length&&Object.keys(a).length){const g=p[p.length-1];g.allowOnlyTimelineStyles()||g.setStyles([a],null,h.errors,l)}return p.length?p.map(g=>g.buildKeyframes()):[kO(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.consume(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const o=null!=i.duration?Bf(i.duration):null,a=null!=i.delay?Bf(i.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ra(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=KE);const o=Bf(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Ra(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Bf(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),Ra(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return UE(e.params?HE(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Bf(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=KE);let o=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const h=e.createSubContext(t.options,c);s&&h.delayNextStep(s),c===e.element&&(l=h.currentTimeline),Ra(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;Ra(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}}const KE={};class NO{constructor(t,e,i,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=KE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new ZE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Bf(i.duration)),null!=i.delay&&(r.delay=Bf(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=HE(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new NO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=KE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new use(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(ose,"."+this._enterClassName)).replace(lse,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),a}}class ZE{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ZE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||ed,this._currentKeyframe[e]=ed}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},o=function(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=ed})):gh(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=HE(o[a],s,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:ed),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=gh(a,!0);Object.keys(c).forEach(u=>{const h=c[u];"!"==h?t.add(u):h==ed&&e.add(u)}),i||(c.offset=l/this.duration),r.push(c)});const s=t.size?$E(t.values()):[],o=e.size?$E(e.values()):[];if(i){const a=r[0],l=lm(a);a.offset=0,l.offset=1,r=[a,l]}return kO(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class use extends ZE{constructor(t,e,i,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=i+e,a=e/o,l=gh(t[0],!1);l.offset=0,s.push(l);const c=gh(t[0],!1);c.offset=fj(a),s.push(c);const u=t.length-1;for(let h=1;h<=u;h++){let p=gh(t[h],!1);p.offset=fj((e+p.offset*i)/o),s.push(p)}i=o,e=0,r="",t=s}return kO(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function fj(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class LO{}class hse extends LO{normalizePropertyName(t,e){return OO(t)}normalizeStyleValue(t,e,i,r){let s="";const o=i.toString().trim();if(fse[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(`Please provide a CSS unit value for ${t}:${i}`)}return o+s}}const fse=(()=>function(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function pj(n,t,e,i,r,s,o,a,l,c,u,h,p){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:p}}const BO={};class gj{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],o=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):o}build(t,e,i,r,s,o,a,l,c,u){const h=[],p=this.ast.options&&this.ast.options.params||BO,m=this.buildStyles(i,a&&a.params||BO,h),v=l&&l.params||BO,y=this.buildStyles(r,v,h),C=new Set,w=new Map,A=new Map,k="void"===r,B={params:Object.assign(Object.assign({},p),v)},U=u?[]:FO(t,e,this.ast.animation,s,o,m,y,B,c,h);let K=0;if(U.forEach(de=>{K=Math.max(de.duration+de.delay,K)}),h.length)return pj(e,this._triggerName,i,r,k,m,y,[],[],w,A,K,h);U.forEach(de=>{const ne=de.element,Se=Pa(w,ne,{});de.preStyleProps.forEach(te=>Se[te]=!0);const ve=Pa(A,ne,{});de.postStyleProps.forEach(te=>ve[te]=!0),ne!==e&&C.add(ne)});const ae=$E(C.values());return pj(e,this._triggerName,i,r,k,m,y,U,ae,w,A,K)}}class mse{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=lm(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!=o&&(r[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=HE(l,r,e));const c=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,c,l,e),i[c]=l})}}),i}}class vse{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new mse(r.style,r.options&&r.options.params||{},i)}),mj(this.states,"true","1"),mj(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new gj(t,r,this.states))}),this.fallbackTransition=function(n,t,e){return new gj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(o=>o.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function mj(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const bse=new XE;class wse{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],r=PO(this._driver,e,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,i){const r=t.element,s=XV(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let o;const a=new Map;if(s?(o=FO(this._driver,e,s,AO,VE,{},{},i,bse,r),o.forEach(u=>{const h=Pa(a,u.element,{});u.postStyleProps.forEach(p=>h[p]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);a.forEach((u,h)=>{Object.keys(u).forEach(p=>{u[p]=this._driver.computeStyle(h,p,ed)})});const c=ph(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,{},h)}));return this._playersById[t]=c,c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,i,r){const s=yO(e,"","","");return _O(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const _j="ng-animate-queued",vj="ng-animate-disabled",yj=".ng-animate-disabled",Mse=[],bj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ase={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Cl="__ng_removed";class VO{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(i?t.value:t),i){const s=lm(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Uy="void",jO=new VO(Uy);class Tse{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,El(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${e}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${e}" is not supported!`);const s=Pa(this._elementListeners,t,[]),o={name:e,phase:i,callback:r};s.push(o);const a=Pa(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(El(t,jE),El(t,jE+"-"+e),a[e]=jO),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),o=new zO(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(El(t,jE),El(t,jE+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const c=new VO(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[e]=c,l||(l=jO),c.value!==Uy&&l.value===c.value){if(!function(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(l.params,c.params)){const v=[],y=s.matchStyles(l.value,l.params,v),C=s.matchStyles(c.value,c.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Vf(t,y),Jc(t,C)})}return}const p=Pa(this._engine.playersByElement,t,[]);p.forEach(v=>{v.namespaceId==this.id&&v.triggerName==e&&v.queued&&v.destroy()});let g=s.matchTransition(l.value,c.value,t,c.params),m=!1;if(!g){if(!r)return;g=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:g,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(El(t,_j),o.onStart(()=>{cm(t,_j)})),o.onDone(()=>{let v=this.players.indexOf(o);v>=0&&this.players.splice(v,1);const y=this._engine.playersByElement.get(t);if(y){let C=y.indexOf(o);C>=0&&y.splice(C,1)}}),this.players.push(o),p.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,zE,!0);i.forEach(r=>{if(r[Cl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const l=this.trigger(t,a,Uy,r);l&&o.push(l)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),i&&ph(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers[o].fallbackTransition,c=i[o]||jO,u=new VO(Uy),h=new zO(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Cl];(!s||s===bj)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){El(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=yO(s,i.triggerName,i.fromState.value,i.toState.value);l._data=t,_O(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class xse{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Tse(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,e)){this._namespaceList.splice(s+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=i[r[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&e.add(a)}}}return e}trigger(t,e,i,r){if(QE(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!QE(e))return;const s=e[Cl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),El(t,vj)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),cm(t,vj))}removeNode(t,e,i,r){if(QE(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r){this.collectedLeaveElements.push(e),e[Cl]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(t,e,i,r,s){return QE(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,zE,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,TO,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ph(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Cl];if(e&&e.setForRemoval){if(t[Cl]=bj,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,yj)&&this.markElementAsDisabled(t,!1),this.driver.query(t,yj,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)El(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?ph(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const i=new XE,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Q=>{u.add(Q);const Be=this.driver.query(Q,".ng-animate-queued",!0);for(let Fe=0;Fe<Be.length;Fe++)u.add(Be[Fe])});const h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=Ej(p,this.collectedEnterElements),m=new Map;let v=0;g.forEach((Q,Be)=>{const Fe=AO+v++;m.set(Be,Fe),Q.forEach(He=>El(He,Fe))});const y=[],C=new Set,w=new Set;for(let Q=0;Q<this.collectedLeaveElements.length;Q++){const Be=this.collectedLeaveElements[Q],Fe=Be[Cl];Fe&&Fe.setForRemoval&&(y.push(Be),C.add(Be),Fe.hasAnimation?this.driver.query(Be,".ng-star-inserted",!0).forEach(He=>C.add(He)):w.add(Be))}const A=new Map,k=Ej(p,Array.from(C));k.forEach((Q,Be)=>{const Fe=VE+v++;A.set(Be,Fe),Q.forEach(He=>El(He,Fe))}),t.push(()=>{g.forEach((Q,Be)=>{const Fe=m.get(Be);Q.forEach(He=>cm(He,Fe))}),k.forEach((Q,Be)=>{const Fe=A.get(Be);Q.forEach(He=>cm(He,Fe))}),y.forEach(Q=>{this.processLeaveNode(Q)})});const B=[],U=[];for(let Q=this._namespaceList.length-1;Q>=0;Q--)this._namespaceList[Q].drainQueuedTransitions(e).forEach(Fe=>{const He=Fe.player,Ct=Fe.element;if(B.push(He),this.collectedEnterElements.length){const Ci=Ct[Cl];if(Ci&&Ci.setForMove)return void He.destroy()}const Dn=!h||!this.driver.containsElement(h,Ct),nt=A.get(Ct),ar=m.get(Ct),Nn=this._buildInstruction(Fe,i,ar,nt,Dn);if(Nn.errors&&Nn.errors.length)U.push(Nn);else{if(Dn)return He.onStart(()=>Vf(Ct,Nn.fromStyles)),He.onDestroy(()=>Jc(Ct,Nn.toStyles)),void r.push(He);if(Fe.isFallbackTransition)return He.onStart(()=>Vf(Ct,Nn.fromStyles)),He.onDestroy(()=>Jc(Ct,Nn.toStyles)),void r.push(He);Nn.timelines.forEach(Ci=>Ci.stretchStartingKeyframe=!0),i.append(Ct,Nn.timelines),o.push({instruction:Nn,player:He,element:Ct}),Nn.queriedElements.forEach(Ci=>Pa(a,Ci,[]).push(He)),Nn.preStyleProps.forEach((Ci,wr)=>{const ga=Object.keys(Ci);if(ga.length){let qs=l.get(wr);qs||l.set(wr,qs=new Set),ga.forEach(Ha=>qs.add(Ha))}}),Nn.postStyleProps.forEach((Ci,wr)=>{const ga=Object.keys(Ci);let qs=c.get(wr);qs||c.set(wr,qs=new Set),ga.forEach(Ha=>qs.add(Ha))})}});if(U.length){const Q=[];U.forEach(Be=>{Q.push(`@${Be.triggerName} has failed due to:\n`),Be.errors.forEach(Fe=>Q.push(`- ${Fe}\n`))}),B.forEach(Be=>Be.destroy()),this.reportError(Q)}const K=new Map,ae=new Map;o.forEach(Q=>{const Be=Q.element;i.has(Be)&&(ae.set(Be,Be),this._beforeAnimationBuild(Q.player.namespaceId,Q.instruction,K))}),r.forEach(Q=>{const Be=Q.element;this._getPreviousPlayers(Be,!1,Q.namespaceId,Q.triggerName,null).forEach(He=>{Pa(K,Be,[]).push(He),He.destroy()})});const de=y.filter(Q=>Mj(Q,l,c)),ne=new Map;Cj(ne,this.driver,w,c,ed).forEach(Q=>{Mj(Q,l,c)&&de.push(Q)});const ve=new Map;g.forEach((Q,Be)=>{Cj(ve,this.driver,new Set(Q),l,"!")}),de.forEach(Q=>{const Be=ne.get(Q),Fe=ve.get(Q);ne.set(Q,Object.assign(Object.assign({},Be),Fe))});const te=[],ie=[],we={};o.forEach(Q=>{const{element:Be,player:Fe,instruction:He}=Q;if(i.has(Be)){if(u.has(Be))return Fe.onDestroy(()=>Jc(Be,He.toStyles)),Fe.disabled=!0,Fe.overrideTotalTime(He.totalTime),void r.push(Fe);let Ct=we;if(ae.size>1){let nt=Be;const ar=[];for(;nt=nt.parentNode;){const Nn=ae.get(nt);if(Nn){Ct=Nn;break}ar.push(nt)}ar.forEach(Nn=>ae.set(Nn,Ct))}const Dn=this._buildAnimation(Fe.namespaceId,He,K,s,ve,ne);if(Fe.setRealPlayer(Dn),Ct===we)te.push(Fe);else{const nt=this.playersByElement.get(Ct);nt&&nt.length&&(Fe.parentPlayer=ph(nt)),r.push(Fe)}}else Vf(Be,He.fromStyles),Fe.onDestroy(()=>Jc(Be,He.toStyles)),ie.push(Fe),u.has(Be)&&r.push(Fe)}),ie.forEach(Q=>{const Be=s.get(Q.element);if(Be&&Be.length){const Fe=ph(Be);Q.setRealPlayer(Fe)}}),r.forEach(Q=>{Q.parentPlayer?Q.syncPlayerEvents(Q.parentPlayer):Q.destroy()});for(let Q=0;Q<y.length;Q++){const Be=y[Q],Fe=Be[Cl];if(cm(Be,VE),Fe&&Fe.hasAnimation)continue;let He=[];if(a.size){let Dn=a.get(Be);Dn&&Dn.length&&He.push(...Dn);let nt=this.driver.query(Be,TO,!0);for(let ar=0;ar<nt.length;ar++){let Nn=a.get(nt[ar]);Nn&&Nn.length&&He.push(...Nn)}}const Ct=He.filter(Dn=>!Dn.destroyed);Ct.length?Pse(this,Be,Ct):this.processLeaveNode(Be)}return y.length=0,te.forEach(Q=>{this.players.push(Q),Q.onDone(()=>{Q.destroy();const Be=this.players.indexOf(Q);this.players.splice(Be,1)}),Q.play()}),te}elementContainsData(t,e){let i=!1;const r=e[Cl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Uy;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,i){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,h=Pa(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(g=>{const m=g.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),g.destroy(),h.push(g)})}Vf(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,h=new Set,p=e.timelines.map(m=>{const v=m.element;u.add(v);const y=v[Cl];if(y&&y.removedBeforeQueried)return new am(m.duration,m.delay);const C=v!==l,w=function(n){const t=[];return Sj(n,t),t}((i.get(v)||Mse).map(K=>K.getRealPlayer())).filter(K=>!!K.element&&K.element===v),A=s.get(v),k=o.get(v),B=XV(0,this._normalizer,0,m.keyframes,A,k),U=this._buildPlayer(m,B,w);if(m.subTimeline&&r&&h.add(v),C){const K=new zO(t,a,v);K.setRealPlayer(U),c.push(K)}return U});c.forEach(m=>{Pa(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>El(m,ij));const g=ph(p);return g.onDestroy(()=>{u.forEach(m=>cm(m,ij)),Jc(l,e.toStyles)}),h.forEach(m=>{Pa(r,m,[]).push(g)}),g}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new am(t.duration,t.delay)}}class zO{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new am,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>_O(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Pa(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function QE(n){return n&&1===n.nodeType}function wj(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function Cj(n,t,e,i,r){const s=[];e.forEach(l=>s.push(wj(l)));const o=[];i.forEach((l,c)=>{const u={};l.forEach(h=>{const p=u[h]=t.computeStyle(c,h,r);(!p||0==p.length)&&(c[Cl]=Ase,o.push(c))}),n.set(c,u)});let a=0;return e.forEach(l=>wj(l,s[a++])),o}function Ej(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}const JE="$$classes";function El(n,t){if(n.classList)n.classList.add(t);else{let e=n[JE];e||(e=n[JE]={}),e[t]=!0}}function cm(n,t){if(n.classList)n.classList.remove(t);else{let e=n[JE];e&&delete e[t]}}function Pse(n,t,e){ph(e).onDone(()=>n.processLeaveNode(t))}function Sj(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof qV?Sj(i.players,t):t.push(i)}}function Mj(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class eS{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new xse(t,e,i),this._timelineEngine=new wse(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=PO(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function(n,t,e){return new vse(n,t,e)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,o]=KV(i);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[o,a]=KV(i);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Aj(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=UO(t[0]),t.length>1&&(i=UO(t[t.length-1]))):t&&(e=UO(t)),e||i?new um(n,e,i):null}class um{constructor(t,e,i){this._element=t,this._startStyles=e,this._endStyles=i,this._state=0;let r=um.initialStylesByElement.get(t);r||um.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Jc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jc(this._element,this._initialStyles),this._endStyles&&(Jc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(um.initialStylesByElement.delete(this._element),this._startStyles&&(Vf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vf(this._element,this._endStyles),this._endStyles=null),Jc(this._element,this._initialStyles),this._state=3)}}function UO(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];Fse(r)&&(t=t||{},t[r]=n[r])}return t}function Fse(n){return"display"===n||"position"===n}um.initialStylesByElement=new WeakMap;const Tj="animation",xj="animationend";class Bse{constructor(t,e,i,r,s,o,a){this._element=t,this._name=e,this._duration=i,this._delay=r,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function(n,t){const e=$O(n,"").trim();let i=0;e.length&&(function(n,t){let e=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&e++;return e}(e)+1,t=`${e}, ${t}`),tS(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ij(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Dj(this._element,this._name,"paused")}resume(){Dj(this._element,this._name,"running")}setPosition(t){const e=Oj(this._element,this._name);this._position=t*this._duration,tS(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ij(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,t){const i=$O(n,"").split(","),r=HO(i,t);r>=0&&(i.splice(r,1),tS(n,"",i.join(",")))}(this._element,this._name))}}function Dj(n,t,e){tS(n,"PlayState",e,Oj(n,t))}function Oj(n,t){const e=$O(n,"");return e.indexOf(",")>0?HO(e.split(","),t):HO([e],t)}function HO(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function Ij(n,t,e){e?n.removeEventListener(xj,t):n.addEventListener(xj,t)}function tS(n,t,e,i){const r=Tj+t;if(null!=i){const s=n.style[r];if(s.length){const o=s.split(",");o[i]=e,e=o.join(",")}}n.style[r]=e}function $O(n,t){return n.style[Tj+t]||""}class Pj{constructor(t,e,i,r,s,o,a,l){this.element=t,this.keyframes=e,this.animationName=i,this._duration=r,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Bse(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(t[i]=e?this._finalStyles[i]:IO(this.element,i))})}this.currentSnapshot=t}}class $se extends am{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=ej(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class kj{constructor(){this._count=0}validateStyleProperty(t){return CO(t)}matchesElement(t,e){return EO(t,e)}containsElement(t,e){return SO(t,e)}query(t,e,i){return MO(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,i){i=i.map(a=>ej(a));let r=`@keyframes ${e} {\n`,s="";i.forEach(a=>{s=" ";const l=parseFloat(a.offset);r+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const u=a[c];switch(c){case"offset":return;case"easing":return void(u&&(r+=`${s}animation-timing-function: ${u};\n`));default:return void(r+=`${s}${c}: ${u};\n`)}}),r+=`${s}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,i,r,s,o=[],a){const l=o.filter(y=>y instanceof Pj),c={};lj(i,r)&&l.forEach(y=>{let C=y.currentSnapshot;Object.keys(C).forEach(w=>c[w]=C[w])});const u=function(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(t[r]=i[r])})}),t}(e=cj(t,e,c));if(0==i)return new $se(t,u);const h="gen_css_kf_"+this._count++,p=this.buildKeyframeElement(t,h,e);(function(n){var t;const e=null===(t=n.getRootNode)||void 0===t?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(p);const m=Aj(t,e),v=new Pj(t,e,h,i,r,s,u,m);return v.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(p)),v}}class Nj{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:IO(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Xse{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Lj().toString()),this._cssKeyframesDriver=new kj}validateStyleProperty(t){return CO(t)}matchesElement(t,e){return EO(t,e)}containsElement(t,e){return SO(t,e)}query(t,e,i){return MO(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,i,r,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,i,r,s,o);const u={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const h={},p=o.filter(m=>m instanceof Nj);lj(i,r)&&p.forEach(m=>{let v=m.currentSnapshot;Object.keys(v).forEach(y=>h[y]=v[y])});const g=Aj(t,e=cj(t,e=e.map(m=>gh(m,!1)),h));return new Nj(t,e,u,g)}}function Lj(){return YV()&&Element.prototype.animate||{}}let Zse=(()=>{class n extends $V{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Ue.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?GV(e):e;return Bj(this._renderer,null,i,"register",[r]),new Qse(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(I(Mf),I(lt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class Qse extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Jse(this._id,t,e||{},this._renderer)}}class Jse{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Bj(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Bj(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const Vj="@.disabled";let eoe=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{o&&o.parentNode(s)&&o.removeChild(s.parentNode,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new jj("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return i.data.animation.forEach(l),new toe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(I(Mf),I(eS),I(pt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class jj{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==Vj?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class toe extends jj{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Vj?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}let roe=(()=>{class n extends eS{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(I(lt),I(BE),I(LO))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const aa=new Ee("AnimationModuleType"),zj=[{provide:$V,useClass:Zse},{provide:LO,useFactory:function(){return new hse}},{provide:eS,useClass:roe},{provide:Mf,useFactory:function(n,t,e){return new eoe(n,t,e)},deps:[SE,eS,pt]}],Uj=[{provide:BE,useFactory:function(){return"function"==typeof Lj()?new Xse:new kj}},{provide:aa,useValue:"BrowserAnimations"},...zj],Hj=[{provide:BE,useClass:tj},{provide:aa,useValue:"NoopAnimations"},...zj];let GO=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Hj:Uj}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:Uj,imports:[ME]}),n})();function uoe(n,t){if(1&n&&st(0,"mat-pseudo-checkbox",4),2&n){const e=Dt();le("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function doe(n,t){if(1&n&&(N(0,"span",5),Pe(1),L()),2&n){const e=Dt();X(1),Vs("(",e.group.label,")")}}const hoe=["*"],$j=new qu("12.2.5"),poe=new Ee("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let $f,Xn=(()=>{class n{constructor(e,i,r){this._hasDoneGlobalChecks=!1,this._document=r,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checkIsEnabled(e){return!(!Oo()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const i=getComputedStyle(e);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&$j.full!==HV.full&&console.warn("The Angular Material version ("+$j.full+") does not match the Angular CDK version ("+HV.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(e){return new(e||n)(I(zV),I(poe,8),I(lt))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[jy],jy]}),n})();function dm(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=jt(t)}}}function zf(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Uf(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=jt(t)}}}function Hf(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Po(e):this.defaultTabIndex}}}function WO(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new G,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}try{$f="undefined"!=typeof Intl}catch(n){$f=!1}let Hy=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({factory:function(){return new n},token:n,providedIn:"root"}),n})();class Aoe{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Wj={enterDuration:225,exitDuration:150},qO=sm({passive:!0}),qj=["mousedown","touchstart"],Yj=["mouseup","mouseleave","touchend","touchcancel"];class Xj{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ju(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Wj),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=i.radius||function(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const h=new Aoe(this,u,i);return h.state=0,this._activeRipples.add(h),i.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const p=h===this._mostRecentTransientRipple;h.state=1,!i.persistent&&(!p||!this._isPointerDown)&&h.fadeOut()},c),h}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},Wj),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.parentNode.removeChild(i)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Ju(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(qj))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Yj),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=IV(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!PV(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,qO)})})}_removeTriggerEvents(){this._triggerElement&&(qj.forEach(t=>{this._triggerElement.removeEventListener(t,this,qO)}),this._pointerUpEventsRegistered&&Yj.forEach(t=>{this._triggerElement.removeEventListener(t,this,qO)}))}}const Kj=new Ee("mat-ripple-global-options");let la=(()=>{class n{constructor(e,i,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Xj(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(pt),E(pi),E(Kj,8),E(aa,8))},n.\u0275dir=_e({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&ht("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),cc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Xn,Ly],Xn]}),n})(),Ooe=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(E(aa,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&ht("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),Ioe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Xn]]}),n})();const rS=new Ee("MAT_OPTION_PARENT_COMPONENT"),Poe=dm(class{});let Roe=0,Zj=(()=>{class n extends Poe{constructor(e){var i;super(),this._labelId="mat-optgroup-label-"+Roe++,this._inert=null!==(i=null==e?void 0:e.inertGroups)&&void 0!==i&&i}}return n.\u0275fac=function(e){return new(e||n)(E(rS,8))},n.\u0275dir=_e({type:n,inputs:{label:"label"},features:[Et]}),n})();const sS=new Ee("MatOptgroup");let koe=0;class Qj{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let Foe=(()=>{class n{constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+koe++,this.onSelectionChange=new Le,this._stateChanges=new G}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=jt(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!sa(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Qj(this,e))}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Qn),E(void 0),E(Zj))},n.\u0275dir=_e({type:n,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),oS=(()=>{class n extends Foe{constructor(e,i,r,s){super(e,i,r,s)}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Qn),E(rS,8),E(sS,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,i){1&e&&Ce("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(pl("id",i.id),cn("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),ht("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[Et],ngContentSelectors:hoe,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(Rr(),Pt(0,uoe,1,2,"mat-pseudo-checkbox",0),N(1,"span",1),jn(2),L(),Pt(3,doe,2,1,"span",2),st(4,"div",3)),2&e&&(le("ngIf",i.multiple),X(3),le("ngIf",i.group&&i.group._inert),X(1),le("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[js,la,Ooe],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function YO(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}let aS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[cc,Mn,Xn,Ioe]]}),n})();function eu(n,t,e,i){return ct(e)&&(i=e,e=void 0),i?eu(n,t,e).pipe(re(r=>Ne(r)?i(...r):i(r))):new ue(r=>{ez(n,t,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,e)})}function ez(n,t,e,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(t,e,r),s=()=>o.removeEventListener(t,e,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(t,e),s=()=>o.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(t,e),s=()=>o.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)ez(n[o],t,e,i,r)}i.add(s)}function lS(...n){return mo(1)(ut(...n))}function us(...n){const t=n[n.length-1];return De(t)?(n.pop(),e=>lS(n,e,t)):e=>lS(n,e)}const joe=["underline"],zoe=["connectionContainer"],Uoe=["inputContainer"],Hoe=["label"];function $oe(n,t){1&n&&(wf(0),N(1,"div",14),st(2,"div",15),st(3,"div",16),st(4,"div",17),L(),N(5,"div",18),st(6,"div",15),st(7,"div",16),st(8,"div",17),L(),Cf())}function Goe(n,t){1&n&&(N(0,"div",19),jn(1,1),L())}function Woe(n,t){if(1&n&&(wf(0),jn(1,2),N(2,"span"),Pe(3),L(),Cf()),2&n){const e=Dt(2);X(3),Fi(e._control.placeholder)}}function qoe(n,t){1&n&&jn(0,3,["*ngSwitchCase","true"])}function Yoe(n,t){1&n&&(N(0,"span",23),Pe(1," *"),L())}function Xoe(n,t){if(1&n){const e=Gr();N(0,"label",20,21),Ce("cdkObserveContent",function(){return Zn(e),Dt().updateOutlineGap()}),Pt(2,Woe,4,1,"ng-container",12),Pt(3,qoe,1,0,"ng-content",12),Pt(4,Yoe,2,0,"span",22),L()}if(2&n){const e=Dt();ht("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),le("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),cn("for",e._control.id)("aria-owns",e._control.id),X(2),le("ngSwitchCase",!1),X(1),le("ngSwitchCase",!0),X(1),le("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Koe(n,t){1&n&&(N(0,"div",24),jn(1,4),L())}function Zoe(n,t){if(1&n&&(N(0,"div",25,26),st(2,"span",27),L()),2&n){const e=Dt();X(2),ht("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function Qoe(n,t){1&n&&(N(0,"div"),jn(1,5),L()),2&n&&le("@transitionMessages",Dt()._subscriptAnimationState)}function Joe(n,t){if(1&n&&(N(0,"div",31),Pe(1),L()),2&n){const e=Dt(2);le("id",e._hintLabelId),X(1),Fi(e.hintLabel)}}function eae(n,t){if(1&n&&(N(0,"div",28),Pt(1,Joe,2,2,"div",29),jn(2,6),st(3,"div",30),jn(4,7),L()),2&n){const e=Dt();le("@transitionMessages",e._subscriptAnimationState),X(1),le("ngIf",e.hintLabel)}}const tae=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],nae=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],tz=new Ee("MatError"),rae={transitionMessages:lc("transitionMessages",[Ar("enter",ci({opacity:1,transform:"translateY(0%)"})),ao("void => enter",[ci({opacity:0,transform:"translateY(-5px)"}),Ro("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Gy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n}),n})();const nz=new Ee("MatHint");let Gf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n,selectors:[["mat-label"]]}),n})(),oae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n,selectors:[["mat-placeholder"]]}),n})();const iz=new Ee("MatPrefix"),rz=new Ee("MatSuffix");let XO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n,selectors:[["","matSuffix",""]],features:[Vt([{provide:rz,useExisting:n}])]}),n})(),sz=0;const cae=zf(class{constructor(n){this._elementRef=n}},"primary"),az=new Ee("MAT_FORM_FIELD_DEFAULT_OPTIONS"),cS=new Ee("MatFormField");let hm=(()=>{class n extends cae{constructor(e,i,r,s,o,a,l,c){super(e),this._changeDetectorRef=i,this._dir=s,this._defaults=o,this._platform=a,this._ngZone=l,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new G,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+sz++,this._labelId="mat-form-field-label-"+sz++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==c,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=jt(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(us(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Jn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Jn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),zi(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(us(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(us(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Jn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,eu(this._label.nativeElement,"transitionend").pipe(Mi(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let i=0,r=0;const s=this._connectionContainerRef.nativeElement,o=s.querySelectorAll(".mat-form-field-outline-start"),a=s.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const l=s.getBoundingClientRect();if(0===l.width&&0===l.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const c=this._getStartEnd(l),u=e.children,h=this._getStartEnd(u[0].getBoundingClientRect());let p=0;for(let g=0;g<u.length;g++)p+=u[g].offsetWidth;i=Math.abs(h-c)-5,r=p>0?.75*p+10:0}for(let l=0;l<o.length;l++)o[l].style.width=`${i}px`;for(let l=0;l<a.length;l++)a[l].style.width=`${r}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Qn),E(ot),E(oa,8),E(az,8),E(pi),E(pt),E(aa,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(Ui(r,Gy,5),Ui(r,Gy,7),Ui(r,Gf,5),Ui(r,Gf,7),Ui(r,oae,5),Ui(r,tz,5),Ui(r,nz,5),Ui(r,iz,5),Ui(r,rz,5)),2&e){let s;Ft(s=Nt())&&(i._controlNonStatic=s.first),Ft(s=Nt())&&(i._controlStatic=s.first),Ft(s=Nt())&&(i._labelChildNonStatic=s.first),Ft(s=Nt())&&(i._labelChildStatic=s.first),Ft(s=Nt())&&(i._placeholderChild=s.first),Ft(s=Nt())&&(i._errorChildren=s),Ft(s=Nt())&&(i._hintChildren=s),Ft(s=Nt())&&(i._prefixChildren=s),Ft(s=Nt())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(fi(joe,5),fi(zoe,7),fi(Uoe,5),fi(Hoe,5)),2&e){let r;Ft(r=Nt())&&(i.underlineRef=r.first),Ft(r=Nt())&&(i._connectionContainerRef=r.first),Ft(r=Nt())&&(i._inputContainerRef=r.first),Ft(r=Nt())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&ht("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Vt([{provide:cS,useExisting:n}]),Et],ngContentSelectors:nae,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(Rr(tae),N(0,"div",0),N(1,"div",1,2),Ce("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),Pt(3,$oe,9,0,"ng-container",3),Pt(4,Goe,2,0,"div",4),N(5,"div",5,6),jn(7),N(8,"span",7),Pt(9,Xoe,5,16,"label",8),L(),L(),Pt(10,Koe,2,0,"div",9),L(),Pt(11,Zoe,3,4,"div",10),N(12,"div",11),Pt(13,Qoe,2,1,"div",12),Pt(14,eae,5,2,"div",13),L(),L()),2&e&&(X(3),le("ngIf","outline"==i.appearance),X(1),le("ngIf",i._prefixChildren.length),X(5),le("ngIf",i._hasFloatingLabel()),X(1),le("ngIf",i._suffixChildren.length),X(1),le("ngIf","outline"!=i.appearance),X(1),le("ngSwitch",i._getDisplayedMessages()),X(1),le("ngSwitchCase","error"),X(1),le("ngSwitchCase","hint"))},directives:[js,Dy,$D,sO],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[rae.transitionMessages]},changeDetection:0}),n})(),Wy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Xn,IE],Xn]}),n})();function qy(...n){if(1===n.length){const t=n[0];if(Ne(t))return uS(t,null);if($e(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return uS(e.map(i=>t[i]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return uS(n=1===n.length&&Ne(n[0])?n[0]:n,null).pipe(re(e=>t(...e)))}return uS(n,null)}function uS(n,t){return new ue(e=>{const i=n.length;if(0===i)return void e.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=gi(n[a]);let c=!1;e.add(l.subscribe({next:u=>{c||(c=!0,o++),r[a]=u},error:u=>e.error(u),complete:()=>{s++,(s===i||!c)&&(o===i&&e.next(t?t.reduce((u,h,p)=>(u[h]=r[p],u),{}):r),e.complete())}}))}})}function ka(n){return function(e){const i=new uae(n),r=e.lift(i);return i.caught=r}}class uae{constructor(t){this.selector=t}call(t,e){return e.subscribe(new dae(t,this.selector,this.caught))}}class dae extends mi{constructor(t,e,i){super(t),this.selector=e,this.caught=i}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new gs(this);this.add(i);const r=Uo(e,i);r!==i&&this.add(r)}}}class hae{constructor(t){this.callback=t}call(t,e){return e.subscribe(new fae(t,this.callback))}}class fae extends At{constructor(t,e){super(t),this.add(new Re(e))}}class cz{}class uz{}class td{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof td?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new td;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof td?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class pae{encodeKey(t){return dz(t)}encodeValue(t){return dz(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const mae=/%(\d[a-f0-9])/gi,_ae={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function dz(n){return encodeURIComponent(n).replace(mae,(t,e)=>{var i;return null!==(i=_ae[e])&&void 0!==i?i:t})}function hz(n){return`${n}`}class mh{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new pae,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new mh({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(hz(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(hz(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class vae{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function fz(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function pz(n){return"undefined"!=typeof Blob&&n instanceof Blob}function gz(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Yy{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new td),this.context||(this.context=new vae),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new mh,this.urlWithParams=e}serializeBody(){return null===this.body?null:fz(this.body)||pz(this.body)||gz(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof mh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gz(this.body)?null:pz(this.body)?this.body.type||null:fz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const i=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,u=t.params||this.params;const h=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((p,g)=>p.set(g,t.setHeaders[g]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((p,g)=>p.set(g,t.setParams[g]),u)),new Yy(i,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:s,withCredentials:a})}}var Xr=(()=>((Xr=Xr||{})[Xr.Sent=0]="Sent",Xr[Xr.UploadProgress=1]="UploadProgress",Xr[Xr.ResponseHeader=2]="ResponseHeader",Xr[Xr.DownloadProgress=3]="DownloadProgress",Xr[Xr.Response=4]="Response",Xr[Xr.User=5]="User",Xr))();class KO{constructor(t,e=200,i="OK"){this.headers=t.headers||new td,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class ZO extends KO{constructor(t={}){super(t),this.type=Xr.ResponseHeader}clone(t={}){return new ZO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class dS extends KO{constructor(t={}){super(t),this.type=Xr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new dS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class mz extends KO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function QO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let pm=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Yy)s=e;else{let l,c;l=r.headers instanceof td?r.headers:new td(r.headers),r.params&&(c=r.params instanceof mh?r.params:new mh({fromObject:r.params})),s=new Yy(e,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ut(s).pipe(function(n,t){return _i(n,t,1)}(l=>this.handler.handle(l)));if(e instanceof Yy||"events"===r.observe)return o;const a=o.pipe($n(l=>l instanceof dS));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(re(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(re(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(re(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(re(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new mh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,QO(r,i))}post(e,i,r={}){return this.request("POST",e,QO(r,i))}put(e,i,r={}){return this.request("PUT",e,QO(r,i))}}return n.\u0275fac=function(e){return new(e||n)(I(cz))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class _z{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const vz=new Ee("HTTP_INTERCEPTORS");let wae=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const Cae=/^\)\]\}',?\n/;let yz=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ue(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((g,m)=>r.setRequestHeader(g,m.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const g=e.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(e.responseType){const g=e.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=1223===r.status?204:r.status,m=r.statusText||"OK",v=new td(r.getAllResponseHeaders()),y=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new ZO({headers:v,status:g,statusText:m,url:y}),o},l=()=>{let{headers:g,status:m,statusText:v,url:y}=a(),C=null;204!==m&&(C=void 0===r.response?r.responseText:r.response),0===m&&(m=C?200:0);let w=m>=200&&m<300;if("json"===e.responseType&&"string"==typeof C){const A=C;C=C.replace(Cae,"");try{C=""!==C?JSON.parse(C):null}catch(k){C=A,w&&(w=!1,C={error:k,text:C})}}w?(i.next(new dS({body:C,headers:g,status:m,statusText:v,url:y||void 0})),i.complete()):i.error(new mz({error:C,headers:g,status:m,statusText:v,url:y||void 0}))},c=g=>{const{url:m}=a(),v=new mz({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:m||void 0});i.error(v)};let u=!1;const h=g=>{u||(i.next(a()),u=!0);let m={type:Xr.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===e.responseType&&!!r.responseText&&(m.partialText=r.responseText),i.next(m)},p=g=>{let m={type:Xr.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),i.next(m)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),e.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:Xr.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),e.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(I(ZB))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const JO=new Ee("XSRF_COOKIE_NAME"),eI=new Ee("XSRF_HEADER_NAME");class bz{}let Sae=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=VB(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(I(lt),I(vl),I(JO))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),tI=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(I(bz),I(eI))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Mae=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(vz,[]);this.chain=i.reduceRight((r,s)=>new _z(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(I(uz),I(Bt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Aae=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:tI,useClass:wae}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:JO,useValue:e.cookieName}:[],e.headerName?{provide:eI,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[tI,{provide:vz,useExisting:tI,multi:!0},{provide:bz,useClass:Sae},{provide:JO,useValue:"XSRF-TOKEN"},{provide:eI,useValue:"X-XSRF-TOKEN"}]}),n})(),wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[pm,{provide:cz,useClass:Mae},yz,{provide:uz,useExisting:yz}],imports:[[Aae.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Tae=["*"];function Cz(n){return Error(`Unable to find icon with the name "${n}"`)}function Ez(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Sz(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Wf{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let Xy=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Wf(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const o=this._sanitizer.sanitize(hn.HTML,r);if(!o)throw Sz(r);return this._addSvgIconConfig(e,i,new Wf("",o,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Wf(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(hn.HTML,i);if(!s)throw Sz(i);return this._addSvgIconSetConfig(e,new Wf("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(hn.RESOURCE_URL,e);if(!i)throw Ez(e);const r=this._cachedIconsByUrl.get(i);return r?ut(hS(r)):this._loadSvgIconFromConfig(new Wf(e,null)).pipe(Ni(s=>this._cachedIconsByUrl.set(i,s)),re(s=>hS(s)))}getNamedSvgIcon(e,i=""){const r=Mz(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(e,o):em(Cz(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ut(hS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(re(i=>hS(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?ut(r):qy(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(ka(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(hn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ut(null)})))).pipe(re(()=>{const o=this._extractIconWithNameFromAnySet(e,i);if(!o)throw Cz(e);return o}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ni(i=>e.svgText=i),re(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ut(null):this._fetchIcon(e).pipe(Ni(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString("<svg></svg>");return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString("<svg></svg>"),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:r,options:s}=e,o=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(hn.RESOURCE_URL,r);if(!a)throw Ez(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(function(n){return t=>t.lift(new hae(n))}(()=>this._inProgressUrlFetches.delete(a)),Ys());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(Mz(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return Oae(s)?new Wf(s.url,null,s.options):new Wf(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(I(pm,8),I(dh),I(lt,8),I(Qo))},n.\u0275prov=pe({factory:function(){return new n(I(pm,8),I(dh),I(lt,8),I(Qo))},token:n,providedIn:"root"}),n})();function hS(n){return n.cloneNode(!0)}function Mz(n,t){return n+":"+t}function Oae(n){return!(!n.url||!n.options)}const Iae=zf(class{constructor(n){this._elementRef=n}}),Pae=new Ee("mat-icon-location",{providedIn:"root",factory:function(){const n=Vc(lt),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),Az=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Fae=Az.map(n=>`[${n}]`).join(", "),Nae=/^url\(['"]?#(.*?)['"]?\)$/;let Us=(()=>{class n extends Iae{constructor(e,i,r,s,o){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._currentIconFetch=Re.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=jt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=e.querySelectorAll("style");for(let s=0;s<i.length;s++)i[s].textContent+=" ";const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&e.removeChild(r)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(Fae),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)Az.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(Nae):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Mi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Xy),ws("aria-hidden"),E(Pae),E(Qo))},n.\u0275cmp=Ge({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(cn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),ht("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Et],ngContentSelectors:Tae,decls:1,vars:0,template:function(e,i){1&e&&(Rr(),jn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Nr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Xn],Xn]}),n})();new class extends oc{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,r=-1,s=e.length;t=t||e.shift();do{if(i=t.execute(t.state,t.delay))break}while(++r<s&&(t=e.shift()));if(this.active=!1,i){for(;++r<s&&(t=e.shift());)t.unsubscribe();throw i}}}(class extends AE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(t,e,i);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});let jae=1;const zae=Promise.resolve(),fS={};function Tz(n){return n in fS&&(delete fS[n],!0)}const xz={setImmediate(n){const t=jae++;return fS[t]=!0,zae.then(()=>Tz(t)&&n()),t},clearImmediate(n){Tz(n)}};new class extends oc{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,r=-1,s=e.length;t=t||e.shift();do{if(i=t.execute(t.state,t.delay))break}while(++r<s&&(t=e.shift()));if(this.active=!1,i){for(;++r<s&&(t=e.shift());)t.unsubscribe();throw i}}}(class extends AE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t.scheduled||(t.scheduled=xz.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(t,e,i);0===t.actions.length&&(xz.clearImmediate(e),t.scheduled=void 0)}});function Ky(n){return!!n&&(n instanceof ue||"function"==typeof n.lift&&"function"==typeof n.subscribe)}class Wae{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new qae(t,this.durationSelector))}}class qae extends mi{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:r}=this;e=r(t)}catch(r){return this.destination.error(r)}const i=Uo(e,new gs(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function nI(n){return!Ne(n)&&n-parseFloat(n)+1>=0}function Xae(n){const{index:t,period:e,subscriber:i}=n;if(i.next(t),!i.closed){if(-1===e)return i.complete();n.index=t+1,this.schedule(n,e)}}function pS(n,t=kf){return function(n){return function(e){return e.lift(new Wae(n))}}(()=>function(n=0,t,e){let i=-1;return nI(t)?i=Number(t)<1?1:Number(t):De(t)&&(e=t),De(e)||(e=kf),new ue(r=>{const s=nI(n)?n:+n-e.now();return e.schedule(Xae,s,{index:0,period:i,subscriber:r})})}(n,t))}function nd(n,t,e){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(u){let h;s++,!r||a?(a=!1,r=new Ry(n,t,i),h=r.subscribe(this),o=u.subscribe({next(p){r.next(p)},error(p){a=!0,r.error(p)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):h=r.subscribe(this),this.add(()=>{s--,h.unsubscribe(),h=void 0,o&&!l&&e&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}class Dz{constructor(t=!1,e,i=!0){this._multiple=t,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new G,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let gS=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({factory:function(){return new n},token:n,providedIn:"root"}),n})(),gm=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new G,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ue(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(pS(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ut()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe($n(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=Ju(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>eu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(I(pt),I(pi),I(lt,8))},n.\u0275prov=pe({factory:function(){return new n(I(pt),I(pi),I(lt,8))},token:n,providedIn:"root"}),n})(),qf=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new G,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(pS(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(I(pi),I(pt),I(lt,8))},n.\u0275prov=pe({factory:function(){return new n(I(pi),I(pt),I(lt,8))},token:n,providedIn:"root"}),n})(),Zy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})(),kz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[jy,Ly,Zy],jy,Zy]}),n})();class iI{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class mm extends iI{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class Yf extends iI{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class fle extends iI{constructor(t){super(),this.element=t instanceof ot?t.nativeElement:t}}class mS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof mm?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Yf?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof fle?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ple extends mS{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Xf=(()=>{class n extends mS{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Le,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(E(gl),E(ls),E(lt))},n.\u0275dir=_e({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Et]}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();function Nz(n,t=!1){return e=>e.lift(new gle(n,t))}class gle{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new mle(t,this.predicate,this.inclusive))}}class mle extends At{constructor(t,e,i){super(t),this.predicate=e,this.inclusive=i,this.index=0}_next(t){const e=this.destination;let i;try{i=this.predicate(t,this.index++)}catch(r){return void e.error(r)}this.nextOrComplete(t,i)}nextOrComplete(t,e){const i=this.destination;Boolean(e)?i.next(t):(this.inclusive&&i.next(t),i.complete())}}const Lz=vV();class _le{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Yr(-this._previousScrollPosition.left),t.style.top=Yr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Lz&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Lz&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class vle{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Bz{enable(){}disable(){}attach(){}}function rI(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function Vz(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class yle{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();rI(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ble=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Bz,this.close=o=>new vle(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new _le(this._viewportRuler,this._document),this.reposition=o=>new yle(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(I(gm),I(qf),I(pt),I(lt))},n.\u0275prov=pe({factory:function(){return new n(I(gm),I(qf),I(pt),I(lt))},token:n,providedIn:"root"}),n})();class Qy{constructor(t){if(this.scrollStrategy=new Bz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class wle{constructor(t,e,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class Cle{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let jz=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({factory:function(){return new n(I(lt))},token:n,providedIn:"root"}),n})(),Ele=(()=>{class n extends jz{constructor(e){super(e),this._keydownListener=i=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){r[s]._keydownEvents.next(i);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(I(lt))},n.\u0275prov=pe({factory:function(){return new n(I(lt))},token:n,providedIn:"root"}),n})(),Sle=(()=>{class n extends jz{constructor(e,i){super(e),this._platform=i,this._cursorStyleIsSet=!1,this._clickListener=r=>{const s=Nf(r),o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){const l=o[a];if(!(l._outsidePointerEvents.observers.length<1)&&l.hasAttached()){if(l.overlayElement.contains(s))break;l._outsidePointerEvents.next(r)}}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(e){return new(e||n)(I(lt),I(pi))},n.\u0275prov=pe({factory:function(){return new n(I(lt),I(pi))},token:n,providedIn:"root"}),n})();const _h="undefined"!=typeof window?window:{},zz=void 0!==_h.__karma__&&!!_h.__karma__||void 0!==_h.jasmine&&!!_h.jasmine||void 0!==_h.jest&&!!_h.jest||void 0!==_h.Mocha&&!!_h.Mocha;let _m=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||zz){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].parentNode.removeChild(r[s])}const i=this._document.createElement("div");i.classList.add(e),zz?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(I(lt),I(pi))},n.\u0275prov=pe({factory:function(){return new n(I(lt),I(pi))},token:n,providedIn:"root"}),n})();class Mle{constructor(t,e,i,r,s,o,a,l,c){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new G,this._attachments=new G,this._detachments=new G,this._locationChanges=Re.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._keydownEvents=new G,this._outsidePointerEvents=new G,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Mi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Yr(this._config.width),t.height=Yr(this._config.height),t.minWidth=Yr(this._config.minWidth),t.minHeight=Yr(this._config.minHeight),t.maxWidth=Yr(this._config.maxWidth),t.maxHeight=Yr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(!t)return;let e,i=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",i),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",i)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(t,e,i){const r=t.classList;OE(e).forEach(s=>{s&&(i?r.add(s):r.remove(s))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Jn(zi(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const Uz="cdk-overlay-connected-position-bounding-box",Ale=/([A-Za-z%]+)$/;class Hz{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new G,this._resizeSubscription=Re.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Uz),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=[];let s;for(let o of this._preferredPositions){let a=this._getOriginPoint(t,o),l=this._getOverlayPoint(a,e,o),c=this._getOverlayFit(l,e,i,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,a);this._canFitWithFlexibleDimensions(c,l,i)?r.push({position:o,origin:a,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(a,o)}):(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:l,originPoint:a,position:o,overlayRect:e})}if(r.length){let o=null,a=-1;for(const l of r){const c=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);c>a&&(a=c,o=l)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Kf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Uz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let i,r;if("center"==e.originX)i=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,o=this._isRtl()?t.left:t.right;i="start"==e.originX?s:o}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:i,y:r}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=Gz(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),v=this._subtractOverflows(s.height,p,g),y=m*v;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:v===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,o=$z(this._overlayRef.getConfig().minHeight),a=$z(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=a&&a<=s;return(t.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Gz(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),c=Math.max(s.left-i.left-t.x,0);let u=0,h=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-i.left-t.x:0,h=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:h},{x:t.x+u,y:t.y+h}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Cle(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,p;if("top"===e.overlayY)o=t.y,s=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-t.y+i.top,t.y),m=this._lastBoundingBoxSize.height;s=2*g,o=t.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-m/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)p=i.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)h=t.x,u=i.right-t.x;else{const g=Math.min(i.right-t.x+i.left,t.x),m=this._lastBoundingBoxSize.width;u=2*g,h=t.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-m/2)}return{top:o,left:h,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Yr(i.height),r.top=Yr(i.top),r.bottom=Yr(i.bottom),r.width=Yr(i.width),r.left=Yr(i.left),r.right=Yr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Yr(s)),o&&(r.maxWidth=Yr(o))}this._lastBoundingBoxSize=i,Kf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Kf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Kf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Kf(i,this._getExactOverlayY(e,t,u)),Kf(i,this._getExactOverlayX(e,t,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Yr(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Yr(o.maxWidth):s&&(i.maxWidth="")),Kf(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Yr(s.y),r}_getExactOverlayX(t,e,i){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Yr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Vz(t,i),isOriginOutsideView:rI(t,i),isOverlayClipped:Vz(e,i),isOverlayOutsideView:rI(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&OE(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ot)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Kf(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function $z(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Ale);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Gz(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class Tle{constructor(t,e,i,r,s,o,a){this._preferredPositions=[],this._positionStrategy=new Hz(i,r,s,o,a).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,i,r){const s=new wle(t,e,i,r);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const Wz="cdk-global-overlay-wrapper";class xle{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Wz),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Wz),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Dle=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new xle}connectedTo(e,i,r){return new Tle(i,r,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new Hz(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(I(qf),I(lt),I(pi),I(_m))},n.\u0275prov=pe({factory:function(){return new n(I(qf),I(lt),I(pi),I(_m))},token:n,providedIn:"root"}),n})(),Ole=0,ca=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,h,p){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=p}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new Qy(e);return o.direction=o.direction||this._directionality.value,new Mle(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Ole++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ch)),new ple(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(I(ble),I(_m),I(gl),I(Dle),I(Ele),I(Bt),I(pt),I(lt),I(oa),I(Jg),I(Sle))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const Ile=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],qz=new Ee("cdk-connected-overlay-scroll-strategy");let Ple=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(E(ot))},n.\u0275dir=_e({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),Yz=(()=>{class n{constructor(e,i,r,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Re.EMPTY,this._attachSubscription=Re.EMPTY,this._detachSubscription=Re.EMPTY,this._positionSubscription=Re.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Le,this.positionChange=new Le,this.attach=new Le,this.detach=new Le,this.overlayKeydown=new Le,this.overlayOutsideClick=new Le,this._templatePortal=new Yf(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=jt(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=jt(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=jt(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=jt(e)}get push(){return this._push}set push(e){this._push=jt(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Ile);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!sa(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Qy({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(Nz(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(E(ca),E(ro),E(ls),E(qz),E(oa,8))},n.\u0275dir=_e({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[oi]}),n})();const kle={provide:qz,deps:[ca],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Jy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[ca,kle],imports:[[jy,_S,kz],kz]}),n})();const Xz=["mat-button",""],Kz=["*"],Nle=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Lle=zf(dm(Uf(class{constructor(n){this._elementRef=n}})));let Zf=(()=>{class n extends Lle{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Nle)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(wl),E(aa,8))},n.\u0275cmp=Ge({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&fi(la,5),2&e){let r;Ft(r=Nt())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(cn("disabled",i.disabled||null),ht("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Et],attrs:Xz,ngContentSelectors:Kz,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(Rr(),N(0,"span",0),jn(1),L(),st(2,"span",1),st(3,"span",2)),2&e&&(X(2),ht("mat-button-ripple-round",i.isRoundButton||i.isIconButton),le("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[la],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Qf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[cc,Xn],Xn]}),n})();class Qz extends At{notifyNext(t,e,i,r,s){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ble extends At{constructor(t,e,i){super(),this.parent=t,this.outerValue=e,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Jz(n,t,e,i,r=new Ble(n,e,i)){if(!r.closed)return t instanceof ue?t.subscribe(r):Vi(t)(r)}const eU={};function fr(...n){let t,e;return De(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&Ne(n[0])&&(n=n[0]),qa(n,e).lift(new tU(t))}class tU{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Vle(t,this.resultSelector))}}class Vle extends Qz{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(eU),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(Jz(this,t[i],void 0,i))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,i){const r=this.values,o=this.toRespond?r[i]===eU?--this.toRespond:this.toRespond:0;r[i]=e,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const nU=new Set;let vm,iU=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):zle}matchMedia(e){return this._platform.WEBKIT&&function(n){if(!nU.has(n))try{vm||(vm=document.createElement("style"),vm.setAttribute("type","text/css"),document.head.appendChild(vm)),vm.sheet&&(vm.sheet.insertRule(`@media ${n} {.fx-query-test{ }}`,0),nU.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(I(pi))},n.\u0275prov=pe({factory:function(){return new n(I(pi))},token:n,providedIn:"root"}),n})();function zle(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let sI=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new G}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return rU(OE(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=fr(rU(OE(e)).map(o=>this._registerQuery(o).observable));return s=lS(s.pipe(Mi(1)),s.pipe(uO(1),tm(0))),s.pipe(re(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new ue(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(us(i),re(({matches:o})=>({query:e,matches:o})),Jn(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(I(iU),I(pt))},n.\u0275prov=pe({factory:function(){return new n(I(iU),I(pt))},token:n,providedIn:"root"}),n})();function rU(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Ule(n,t){if(1&n){const e=Gr();N(0,"div",1),N(1,"button",2),Ce("click",function(){return Zn(e),Dt().action()}),Pe(2),L(),L()}if(2&n){const e=Dt();X(2),Fi(e.data.action)}}function Hle(n,t){}const oI=new Ee("MatSnackBarData");class vS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const $le=Math.pow(2,31)-1;class aI{constructor(t,e){this._overlayRef=e,this._afterDismissed=new G,this._afterOpened=new G,this._onAction=new G,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,$le))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Gle=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(E(aI),E(oI))},n.\u0275cmp=Ge({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(N(0,"span"),Pe(1),L(),Pt(2,Ule,3,1,"div",0)),2&e&&(X(1),Fi(i.data.message),X(1),le("ngIf",i.hasAction))},directives:[js,Zf],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),n})();const Wle={snackBarState:lc("state",[Ar("void, hidden",ci({transform:"scale(0.8)",opacity:0})),Ar("visible",ci({transform:"scale(1)",opacity:1})),ao("* => visible",Ro("150ms cubic-bezier(0, 0, 0.2, 1)")),ao("* => void, * => hidden",Ro("75ms cubic-bezier(0.4, 0.0, 1, 1)",ci({opacity:0})))])};let qle=(()=>{class n extends mS{constructor(e,i,r,s,o){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new G,this._onExit=new G,this._onEnter=new G,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:i,toState:r}=e;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Mi(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>e.classList.add(r)):e.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(E(pt),E(ot),E(Qn),E(pi),E(vS))},n.\u0275cmp=Ge({type:n,selectors:[["snack-bar-container"]],viewQuery:function(e,i){if(1&e&&fi(Xf,7),2&e){let r;Ft(r=Nt())&&(i._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,i){1&e&&ny("@state.done",function(s){return i.onAnimationEnd(s)}),2&e&&Fg("@state",i._animationState)},features:[Et],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(N(0,"div",0),Pt(1,Hle,0,0,"ng-template",1),L(),st(2,"div")),2&e&&(X(2),cn("aria-live",i._live)("role",i._role))},directives:[Xf],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Wle.snackBarState]}}),n})(),oU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Jy,_S,Mn,Qf,Xn],Xn]}),n})();const aU=new Ee("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new vS}});let Xle=(()=>{class n{constructor(e,i,r,s,o,a){this._overlay=e,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Gle,this.snackBarContainerComponent=qle,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){const s=Object.assign(Object.assign({},this._defaultConfig),r);return s.data={message:e,action:i},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const s=Bt.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:vS,useValue:i}]}),o=new mm(this.snackBarContainerComponent,i.viewContainerRef,s),a=e.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(e,i){const r=Object.assign(Object.assign(Object.assign({},new vS),this._defaultConfig),i),s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new aI(o,s);if(e instanceof ro){const l=new Yf(e,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new mm(e,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Jn(s.detachments())).subscribe(l=>{const c=s.overlayElement.classList;l.matches?c.add(this.handsetCssClass):c.remove(this.handsetCssClass)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new Qy;i.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,a=!o&&"center"!==e.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){return Bt.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:aI,useValue:i},{provide:oI,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(I(ca),I(NE),I(Bt),I(sI),I(n,12),I(aU))},n.\u0275prov=pe({factory:function(){return new n(I(ca),I(NE),I($u),I(sI),I(n,12),I(aU))},token:n,providedIn:oU}),n})();function Ve(n,t,e,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,t,e,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(t,e,s):o(t,e))||s);return r>3&&s&&Object.defineProperty(t,e,s),s}function xs(n,t){return function(e,i){t(e,i,n)}}function Ke(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}function Sl(n,t,e,i){return new(e||(e=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,t||[])).next())})}function dU(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const t="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,e=n||t;return!!(e&&e.indexOf("Electron")>=0)}function cI(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||dU()}const hU="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",bS=cI();class Jle{constructor(t,e,i="sessionStorage"){this.storage=function(n){try{const t=window[n],e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(t){return null}}(i),this.id=t,this.config={},Object.assign(this.config,e),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function uI(n,t,e,i=600){const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(e=Math.min(e,i/n.width));const s=n.width*e,o=n.height*e,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}const fU={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function pU(n){return"string"==typeof n?fU[n.toUpperCase()]||fU.WHITE:n}function wS(n,t){if(!n)throw new Error(t||"Assertion failed")}const uc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},eb=uc.window||uc.self||uc.global,gU=uc.process||{};function ym(){let n;if(bS&&eb.performance)n=eb.performance.now();else if(gU.hrtime){const t=gU.hrtime();n=1e3*t[0]+t[1]/1e6}else n=Date.now();return n}console;const bm={debug:bS&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},oce={enabled:!0,level:0};function Ml(){}const mU={},_U={once:!0};function ace(n){for(const t in n)for(const e in n[t])return e||"untitled";return"empty"}let vU=(()=>{class n{constructor({id:e}={id:""}){this.id=e,this.VERSION=hU,this._startTs=ym(),this._deltaTs=ym(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new Jle("__probe-".concat(this.id,"__"),oce),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,t=["constructor"]){const e=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(e);for(const r of i)"function"==typeof n[r]&&(t.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ym()-this._startTs).toPrecision(10))}getDelta(){return Number((ym()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}assert(e,i){wS(e,i)}warn(e){return this._getLogFunction(0,e,bm.warn,arguments,_U)}error(e){return this._getLogFunction(0,e,bm.error,arguments)}deprecated(e,i){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(e,i){return this.error("`".concat(e,"` has been removed. Use `").concat(i,"` instead"))}probe(e,i){return this._getLogFunction(e,i,bm.log,arguments,{time:!0,once:!0})}log(e,i){return this._getLogFunction(e,i,bm.debug,arguments)}info(e,i){return this._getLogFunction(e,i,console.info,arguments)}once(e,i){return this._getLogFunction(e,i,bm.debug||bm.info,arguments,_U)}table(e,i,r){return i?this._getLogFunction(e,i,console.table||Ml,r&&[r],{tag:ace(i)}):Ml}image({logLevel:e,priority:i,image:r,message:s="",scale:o=1}){return this._shouldLog(e||i)?bS?function({image:n,message:t="",scale:e=1}){if("string"==typeof n){const r=new Image;return r.onload=()=>{const s=uI(r,t,e);console.log(...s)},r.src=n,Ml}const i=n.nodeName||"";if("img"===i.toLowerCase())return console.log(...uI(n,t,e)),Ml;if("canvas"===i.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...uI(r,t,e)),r.src=n.toDataURL(),Ml}return Ml}({image:r,message:s,scale:o}):function({image:n,message:t="",scale:e=1}){let i=null;try{i=xe(307)}catch(r){}return i?()=>i(n,{fit:"box",width:"".concat(Math.round(80*e),"%")}).then(r=>console.log(r)):Ml}({image:r,message:s,scale:o}):Ml}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(e){return this._storage.config[e]}set(e,i){this._storage.updateConfiguration({[e]:i})}time(e,i){return this._getLogFunction(e,i,console.time?console.time:console.info)}timeEnd(e,i){return this._getLogFunction(e,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,i){return this._getLogFunction(e,i,console.timeStamp||Ml)}group(e,i,r={collapsed:!1}){r=bU({logLevel:e,message:i,opts:r});const{collapsed:s}=r;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,i,r={}){return this.group(e,i,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ml)}withGroup(e,i,r){this.group(e,i)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=yU(e)}_getLogFunction(e,i,r,s=[],o){if(this._shouldLog(e)){o=bU({logLevel:e,message:i,args:s,opts:o}),wS(r=r||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=ym();const a=o.tag||o.message;if(o.once){if(mU[a])return Ml;mU[a]=ym()}return i=function(n,t,e){if("string"==typeof t){const i=e.time?function(n,t=8){const e=Math.max(t-n.length,0);return"".concat(" ".repeat(e)).concat(n)}(function(n){let t;return t=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),t}(e.total)):"";t=function(n,t,e){return!bS&&"string"==typeof n&&(t&&(t=pU(t),n="\x1b[".concat(t,"m").concat(n,"\x1b[39m")),e&&(t=pU(e),n="\x1b[".concat(e+10,"m").concat(n,"\x1b[49m"))),n}(t=e.time?"".concat(n,": ").concat(i,"  ").concat(t):"".concat(n,": ").concat(t),e.color,e.background)}return t}(this.id,o.message,o),r.bind(console,i,...o.args)}return Ml}}return n.VERSION=hU,n})();function yU(n){if(!n)return 0;let t;switch(typeof n){case"number":t=n;break;case"object":t=n.logLevel||n.priority||0;break;default:return 0}return wS(Number.isFinite(t)&&t>=0),t}function bU(n){const{logLevel:t,message:e}=n;n.logLevel=yU(t);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==e;);switch(n.args=i,typeof t){case"string":case"function":void 0!==e&&i.unshift(e),n.message=t;break;case"object":Object.assign(n,t)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return wS("string"===r||"object"===r),Object.assign(n,n.opts)}const ei=new vU({id:"deck"});var ti={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ti,"IDENTITY",{get:function(){return ei.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var tu={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},wU={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function wt(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function CU(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Tt(n,t,e){return t&&CU(n.prototype,t),e&&CU(n,e),n}function Ot(n){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(n)}function Hs(n,t,e){return(Hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(r,s,o){var a=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=Ot(n)););return n}(r,s);if(a){var l=Object.getOwnPropertyDescriptor(a,s);return l.get?l.get.call(o):l.value}})(n,t,e||n)}function dI(n,t){return(dI=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i})(n,t)}function ir(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&dI(n,t)}function $i(n){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function EU(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lr(n,t){return!t||"object"!==$i(t)&&"function"!=typeof t?EU(n):t}function hI(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function SU(n,t){if(n){if("string"==typeof n)return hI(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hI(n,t)}}function Br(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var o,a,i=[],r=!0,s=!1;try{for(e=e.call(n);!(r=(o=e.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(l){s=!0,a=l}finally{try{!r&&null!=e.return&&e.return()}finally{if(s)throw a}}return i}}(n,t)||SU(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const _t=new vU({id:"luma.gl"});function ko(n,t){if(!n)throw new Error(t||"luma.gl: assertion failed.")}function CS(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function Rn(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function ES(n){return ko(CS(n),"Invalid WebGLRenderingContext"),n}function Fo(n){return ko(Rn(n),"Requires WebGL2"),n}var rr=xe(761);const tb={};const nb=function n(t){const e=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(e);this.attribs[i]=r}this.maxAttrib=0};(nb.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Jf=function(t){const e=this;this.gl=t,function(n){const t=n.getError;n.getError=function(){let i;do{i=t.apply(n),0!==i&&(tb[i]=!0)}while(0!==i);for(i in tb)if(tb[i])return delete tb[i],parseInt(i,10);return 0}}(t);const i=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(s){return s===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:i.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(s){const o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(s){const o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(s,o){switch(s){case 34962:e.currentArrayBuffer=o;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(s,o){const l=e.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(s,o,a,l,c,u){const h=e.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const p=h.attribs[s];return p.buffer=e.currentArrayBuffer,p.size=o,p.type=a,p.normalized=l,p.stride=c,p.offset=u,p.recache(),i.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{rr.CO.console&&rr.CO.console.log&&rr.CO.console.log("OESVertexArrayObject emulation library context restored"),e.reset_()},!0),this.reset_()};Jf.prototype.VERTEX_ARRAY_BINDING_OES=34229,Jf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new nb(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Jf.prototype.createVertexArrayOES=function(){const t=new nb(this);return this.vertexArrayObjects.push(t),t},Jf.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},Jf.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof nb&&t.hasBeenBound&&t.ext===this)},Jf.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void function(n,t){tb[n]=!0,void 0!==t&&function(n){rr.CO.console&&rr.CO.console.error&&rr.CO.console.error(n)}(t)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(e,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=r?r.attribs[l]:null;if((!r||c.enabled!==u.enabled)&&(c.enabled?i.enableVertexAttribArray.call(e,l):i.disableVertexAttribArray.call(e,l)),c.enabled){let h=!1;(!r||c.buffer!==u.buffer)&&(o!==c.buffer&&(i.bindBuffer.call(e,34962,c.buffer),o=c.buffer),h=!0),(h||c.cached!==u.cached)&&i.vertexAttribPointer.call(e,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(e,34962,this.currentArrayBuffer)};const MU="OES_element_index",AU="WEBGL_draw_buffers",TU="WEBGL_debug_renderer_info",Gi=n=>Rn(n)?void 0:0,Pce={3074:n=>Rn(n)?void 0:36064,35723:n=>Rn(n)?void 0:4352,35977:Gi,32937:Gi,36795:(n,t)=>{const e=Rn(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return e&&e.GPU_DISJOINT_EXT?t(e.GPU_DISJOINT_EXT):0},37445:(n,t)=>{const e=n.getExtension(TU);return t(e&&e.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,t)=>{const e=n.getExtension(TU);return t(e&&e.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,t)=>{const e=n.luma.extensions.EXT_texture_filter_anisotropic;return e?t(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Gi,35071:Gi,37447:Gi,36063:(n,t)=>{if(!Rn(n)){const e=n.getExtension(AU);return e?t(e.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Gi,35374:Gi,35377:Gi,34852:n=>{if(!Rn(n)){const t=n.getExtension(AU);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(MU)?2147483647:65535,33001:n=>n.getExtension(MU)?16777216:65535,33e3:n=>16777216,37157:Gi,35373:Gi,35657:Gi,36183:Gi,37137:Gi,34045:Gi,35978:Gi,35979:Gi,35968:Gi,35376:Gi,35375:Gi,35659:Gi,37154:Gi,35371:Gi,35658:Gi,35076:Gi,35077:Gi,35380:Gi},xU="ANGLE_instanced_arrays",DU={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{ko(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[xU]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,t){ko(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{ko(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{ko(!1)},deleteQuery:()=>{ko(!1)},beginQuery:()=>{ko(!1)},endQuery:()=>{},getQuery(n,t){return this.getQueryObject(n,t)},getQueryParameter(n,t){return this.getQueryObject(n,t)},getQueryObject:()=>{}}},fI={readBuffer:(n,t,e)=>{Rn(n)&&t(e)},getVertexAttrib:(n,t,e,i)=>{const{webgl2:r,ext:s}=function(n,t){return{webgl2:Rn(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:t(e,i)},getProgramParameter:(n,t,e,i)=>{if(!Rn(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return t(e,i)},getInternalformatParameter:(n,t,e,i,r)=>{if(!Rn(n))switch(r){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(e,i,r)},getTexParameter(n,t,e,i){switch(i){case 34046:const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(e,i)},getParameter:function(n,t,e){const i=Pce[e],r="function"==typeof i?i(n,t,e):i;return void 0!==r?r:t(e)},hint:(n,t,e,i)=>t(e,i)};function Gce(n,{extension:t,target:e,target2:i}){const r=DU[t];ko(r);const{meta:s={}}=r,{suffix:o=""}=s,a=n.getExtension(t);for(const l of Object.keys(r)){const c=`${l}${o}`;let u=null;"meta"===l||"function"==typeof n[l]||(a&&"function"==typeof a[c]?u=(...h)=>a[c](...h):"function"==typeof r[l]&&(u=r[l].bind(e))),u&&(e[l]=u,i[l]=u)}}("undefined"!=typeof global?global:window).polyfillContext=function(n){n.luma=n.luma||{};const{luma:t}=n;return t.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const t=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=t.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const e=n.getExtension;n.getExtension=function(r){return e.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Jf(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const t=n.getSupportedExtensions()||[];for(const e of t)n.luma[e]=n.getExtension(e)}(n),function(n,t){for(const e of Object.getOwnPropertyNames(t))"overrides"!==e&&Gce(n,{extension:e,target:n.luma,target2:n})}(n,DU),function(n,{target:t,target2:e}){Object.keys(fI).forEach(i=>{if("function"==typeof fI[i]){const r=n[i]?n[i].bind(n):()=>{},s=fI[i].bind(null,n,r);t[i]=s,e[i]=s}})}(n,{target:t,target2:n}),t.polyfilled=!0),n};const pI={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},vh=(n,t,e)=>t?n.enable(e):n.disable(e),OU=(n,t,e)=>n.hint(e,t),Fa=(n,t,e)=>n.pixelStorei(e,t);function ib(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const Yce={3042:vh,32773:(n,t)=>n.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,t)=>n.clearColor(...t),3107:(n,t)=>n.colorMask(...t),2884:vh,2885:(n,t)=>n.cullFace(t),2929:vh,2931:(n,t)=>n.clearDepth(t),2932:(n,t)=>n.depthFunc(t),2928:(n,t)=>n.depthRange(...t),2930:(n,t)=>n.depthMask(t),3024:vh,35723:OU,36006:(n,t)=>{const e=Rn(n)?36009:36160;return n.bindFramebuffer(e,t)},2886:(n,t)=>n.frontFace(t),33170:OU,2849:(n,t)=>n.lineWidth(t),32823:vh,32824:"polygonOffset",10752:"polygonOffset",35977:vh,32938:"sampleCoverage",32939:"sampleCoverage",3089:vh,3088:(n,t)=>n.scissor(...t),2960:vh,2961:(n,t)=>n.clearStencil(t),2968:(n,t)=>n.stencilMaskSeparate(1028,t),36005:(n,t)=>n.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,t)=>n.viewport(...t),3333:Fa,3317:Fa,37440:Fa,37441:Fa,37443:Fa,3330:Fa,3332:Fa,3331:Fa,36010:(n,t)=>n.bindFramebuffer(36008,t),3314:Fa,32878:Fa,3316:Fa,3315:Fa,32877:Fa,framebuffer:(n,t)=>n.bindFramebuffer(36160,t&&"handle"in t?t.handle:t),blend:(n,t)=>t?n.enable(3042):n.disable(3042),blendColor:(n,t)=>n.blendColor(...t),blendEquation:(n,t)=>{t=ib(t)?t:[t,t],n.blendEquationSeparate(...t)},blendFunc:(n,t)=>{t=ib(t)&&2===t.length?[...t,...t]:t,n.blendFuncSeparate(...t)},clearColor:(n,t)=>n.clearColor(...t),clearDepth:(n,t)=>n.clearDepth(t),clearStencil:(n,t)=>n.clearStencil(t),colorMask:(n,t)=>n.colorMask(...t),cull:(n,t)=>t?n.enable(2884):n.disable(2884),cullFace:(n,t)=>n.cullFace(t),depthTest:(n,t)=>t?n.enable(2929):n.disable(2929),depthFunc:(n,t)=>n.depthFunc(t),depthMask:(n,t)=>n.depthMask(t),depthRange:(n,t)=>n.depthRange(...t),dither:(n,t)=>t?n.enable(3024):n.disable(3024),derivativeHint:(n,t)=>{n.hint(35723,t)},frontFace:(n,t)=>n.frontFace(t),mipmapHint:(n,t)=>n.hint(33170,t),lineWidth:(n,t)=>n.lineWidth(t),polygonOffsetFill:(n,t)=>t?n.enable(32823):n.disable(32823),polygonOffset:(n,t)=>n.polygonOffset(...t),sampleCoverage:(n,t)=>n.sampleCoverage(...t),scissorTest:(n,t)=>t?n.enable(3089):n.disable(3089),scissor:(n,t)=>n.scissor(...t),stencilTest:(n,t)=>t?n.enable(2960):n.disable(2960),stencilMask:(n,t)=>{t=ib(t)?t:[t,t];const[e,i]=t;n.stencilMaskSeparate(1028,e),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,t)=>{t=ib(t)&&3===t.length?[...t,...t]:t;const[e,i,r,s,o,a]=t;n.stencilFuncSeparate(1028,e,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,t)=>{t=ib(t)&&3===t.length?[...t,...t]:t;const[e,i,r,s,o,a]=t;n.stencilOpSeparate(1028,e,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,t)=>n.viewport(...t)};function Tr(n,t,e){return void 0!==t[n]?t[n]:e[n]}const Xce={blendEquation:(n,t,e)=>n.blendEquationSeparate(Tr(32777,t,e),Tr(34877,t,e)),blendFunc:(n,t,e)=>n.blendFuncSeparate(Tr(32969,t,e),Tr(32968,t,e),Tr(32971,t,e),Tr(32970,t,e)),polygonOffset:(n,t,e)=>n.polygonOffset(Tr(32824,t,e),Tr(10752,t,e)),sampleCoverage:(n,t,e)=>n.sampleCoverage(Tr(32938,t,e),Tr(32939,t,e)),stencilFuncFront:(n,t,e)=>n.stencilFuncSeparate(1028,Tr(2962,t,e),Tr(2967,t,e),Tr(2963,t,e)),stencilFuncBack:(n,t,e)=>n.stencilFuncSeparate(1029,Tr(34816,t,e),Tr(36003,t,e),Tr(36004,t,e)),stencilOpFront:(n,t,e)=>n.stencilOpSeparate(1028,Tr(2964,t,e),Tr(2965,t,e),Tr(2966,t,e)),stencilOpBack:(n,t,e)=>n.stencilOpSeparate(1029,Tr(34817,t,e),Tr(34818,t,e),Tr(34819,t,e))},IU={enable:(n,t)=>n({[t]:!0}),disable:(n,t)=>n({[t]:!1}),pixelStorei:(n,t,e)=>n({[t]:e}),hint:(n,t,e)=>n({[t]:e}),bindFramebuffer:(n,t,e)=>{switch(t){case 36160:return n({36006:e,36010:e});case 36009:return n({36006:e});case 36008:return n({36010:e});default:return null}},blendColor:(n,t,e,i,r)=>n({32773:new Float32Array([t,e,i,r])}),blendEquation:(n,t)=>n({32777:t,34877:t}),blendEquationSeparate:(n,t,e)=>n({32777:t,34877:e}),blendFunc:(n,t,e)=>n({32969:t,32968:e,32971:t,32970:e}),blendFuncSeparate:(n,t,e,i,r)=>n({32969:t,32968:e,32971:i,32970:r}),clearColor:(n,t,e,i,r)=>n({3106:new Float32Array([t,e,i,r])}),clearDepth:(n,t)=>n({2931:t}),clearStencil:(n,t)=>n({2961:t}),colorMask:(n,t,e,i,r)=>n({3107:[t,e,i,r]}),cullFace:(n,t)=>n({2885:t}),depthFunc:(n,t)=>n({2932:t}),depthRange:(n,t,e)=>n({2928:new Float32Array([t,e])}),depthMask:(n,t)=>n({2930:t}),frontFace:(n,t)=>n({2886:t}),lineWidth:(n,t)=>n({2849:t}),polygonOffset:(n,t,e)=>n({32824:t,10752:e}),sampleCoverage:(n,t,e)=>n({32938:t,32939:e}),scissor:(n,t,e,i,r)=>n({3088:new Int32Array([t,e,i,r])}),stencilMask:(n,t)=>n({2968:t,36005:t}),stencilMaskSeparate:(n,t,e)=>n({[1028===t?2968:36005]:e}),stencilFunc:(n,t,e,i)=>n({2962:t,2967:e,2963:i,34816:t,36003:e,36004:i}),stencilFuncSeparate:(n,t,e,i,r)=>n({[1028===t?2962:34816]:e,[1028===t?2967:36003]:i,[1028===t?2963:36004]:r}),stencilOp:(n,t,e,i)=>n({2964:t,2965:e,2966:i,34817:t,34818:e,34819:i}),stencilOpSeparate:(n,t,e,i,r)=>n({[1028===t?2964:34817]:e,[1028===t?2965:34818]:i,[1028===t?2966:34819]:r}),viewport:(n,t,e,i,r)=>n({2978:[t,e,i,r]})},nu=(n,t)=>n.isEnabled(t),PU={3042:nu,2884:nu,2929:nu,3024:nu,32823:nu,32926:nu,32928:nu,3089:nu,2960:nu,35977:nu};function RU(n){for(const t in n)return!1;return!0}function Kce(n,t){if(n===t)return!0;const e=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(t)||ArrayBuffer.isView(t);if(e&&i&&n.length===t.length){for(let r=0;r<n.length;++r)if(n[r]!==t[r])return!1;return!0}return!1}function kU(n,t){const e=n[t].bind(n);n[t]=function(...r){const s=r[0];return s in n.state.cache||(n.state.cache[s]=e(...r)),n.state.enable?n.state.cache[s]:e(...r)},Object.defineProperty(n[t],"name",{value:`${t}-from-cache`,configurable:!1})}function Zce(n,t,e){const i=n[t].bind(n);n[t]=function(...s){const{valueChanged:o,oldValue:a}=e(n.state._updateCache,...s);return o&&i(...s),a},Object.defineProperty(n[t],"name",{value:`${t}-to-cache`,configurable:!1})}class Jce{constructor(t,{copyState:e=!1,log:i=(()=>{})}={}){this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?function(n,t){if("number"==typeof(t=t||pI)){const r=t,s=PU[r];return s?s(n,r):n.getParameter(r)}const e=Array.isArray(t)?t:Object.keys(t),i={};for(const r of e){const s=PU[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(t):Object.assign({},pI),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(t={}){this.stateStack.push({})}pop(){ko(this.stateStack.length>0),id(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(t){let i,e=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in t){ko(void 0!==s);const o=t[s],a=this.cache[s];Kce(o,a)||(e=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:e,oldValue:i}}}function FU(n,t={}){const{enable:e=!0,copyState:i}=t;if(ko(void 0!==i),!n.state){const r="undefined"!=typeof global?global:window,{polyfillContext:s}=r;s&&s(n),n.state=new Jce(n,{copyState:i}),function(n){const t=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(t(i),n.state.program=i)}}(n);for(const o in IU)Zce(n,o,IU[o]);kU(n,"getParameter"),kU(n,"isEnabled")}return n.state.enable=e,n}function NU(n){ko(n.state),n.state.pop()}function id(n,t){if(ko(CS(n),"setParameters requires a WebGL context"),RU(t))return;const e={};for(const r in t){const s=Number(r),o=Yce[r];o&&("string"==typeof o?e[o]=!0:o(n,t[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in e)Xce[r](n,t,i)}function dc(n,t,e){if(RU(t))return e(n);const{nocatch:i=!0}=t;let r;if(function(n){n.state||FU(n,{copyState:!1}),n.state.push()}(n),id(n,t),i)r=e(n),NU(n);else try{r=e(n)}finally{NU(n)}return r}function wm(n){const{luma:t}=n;if(n.canvas&&t){const{clientWidth:e}=t.canvasSizeInfo;return e?n.drawingBufferWidth/e:1}return 1}function gI(n,t,e=!0){return function(n,t,e,i,r){const s=LU(n[0],t,e);let o=BU(n[1],t,i,r),a=LU(n[0]+1,t,e);const l=a===e-1?a:a-1;let c;return a=BU(n[1]+1,t,i,r),r?(a=0===a?a:a+1,c=o,o=a):c=a===i-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}(t,wm(n),n.drawingBufferWidth,n.drawingBufferHeight,e)}function LU(n,t,e){return Math.min(Math.round(n*t),e-1)}function BU(n,t,e,i){return i?Math.max(0,e-1-Math.round(n*t)):Math.min(Math.round(n*t),e-1)}const mI=(0,rr.jU)(),sue=mI&&"undefined"!=typeof document,VU={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function jU(n={}){ko(mI,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},VU,n);const{width:t,height:e}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function({canvas:n,width:t=800,height:e=600,onError:i}){let r;return"string"==typeof n?(sue&&"complete"===document.readyState||i(`createGLContext called on canvas '${n}' before page was loaded`),r=document.getElementById(n)):n?r=n:(r=document.createElement("canvas"),r.id="lumagl-canvas",r.style.width=Number.isFinite(t)?`${t}px`:"100%",r.style.height=Number.isFinite(e)?`${e}px`:"100%",document.body.insertBefore(r,document.body.firstChild)),r}({canvas:s,width:t,height:e,onError:i});return r=function(n,t){const{onError:e}=t;let i=null;const r=l=>i=l.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=t;let a=null;return o&&(a=a||n.getContext("webgl2",t),a=a||n.getContext("experimental-webgl2",t)),s&&(a=a||n.getContext("webgl",t),a=a||n.getContext("experimental-webgl",t)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(t.onContextLost&&n.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&n.addEventListener("webglcontextrestored",t.onContextRestored,!1),a):e(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${i||"Unknown error"}`)}(o,n),r?(r=_I(r,n),function(n){const t=Rn(n)?"WebGL2":"WebGL1",e=function(n){const t=n.getParameter(7936),e=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||e,vendorMasked:t,rendererMasked:e,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);_t.info(1,`${t}${n.debug?" debug":""} context ${e?`(${e.vendor},${e.renderer})`:""}`)()}(r),r):null}function _I(n,t={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},t=Object.assign({},VU,t);const{manageState:e,debug:i}=t;return e&&FU(n,{copyState:!1,log:(...r)=>_t.log(1,...r)()}),mI&&i&&(rr.CO.makeDebugContext?(n=rr.CO.makeDebugContext(n,t),_t.level=Math.max(_t.level,1)):_t.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function zU(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const t=process.hrtime();n=1e3*t[0]+t[1]/1e6}else n=Date.now();return n}class UU{constructor(t,e){this.name=t,this.type=e,this.sampleSize=1,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=zU(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(zU()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class vI{constructor({id:t,stats:e}){this.id=t,this.stats={},this._initializeStats(e),Object.seal(this)}get(t,e="count"){return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(t=[]){t.forEach(e=>this._getOrCreate(e))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:i}=t;return this.stats[e]||(this.stats[e]=t instanceof UU?t:new UU(e,i)),this.stats[e]}}const rb="8.5.7",ep=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new vI({id:t})),this.stats.get(t)}};if(rr.CO.luma&&rr.CO.luma.VERSION!==rb)throw new Error(`luma.gl - multiple VERSIONs detected: ${rr.CO.luma.VERSION} vs 8.5.7`);function tt(n,t){if(!n)throw new Error(t||"luma.gl: assertion failed.")}function yI(n,t){if("string"!=typeof t)return t;const e=Number(t);if(!isNaN(e))return e;const i=n[t=t.replace(/^.*\./,"")];return tt(void 0!==i,`Accessing undefined constant GL.${t}`),i}function yh(n,t){t=Number(t);for(const e in n)if(n[e]===t)return`GL.${e}`;return String(t)}rr.CO.luma||((0,rr.jU)()&&_t.log(1,"luma.gl 8.5.7 - set luma.log.level=1 (or higher) to trace rendering")(),rr.CO.luma=rr.CO.luma||{VERSION:rb,version:rb,log:_t,stats:ep,globals:{modules:{},nodeIO:{}}});const bI={};function iu(n="id"){return bI[n]=bI[n]||1,`${n}-${bI[n]++}`}function HU(n){return tt("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function Cm(n){let t=!0;for(const e in n){t=!1;break}return t}function $U(n,t,e,i){const r=`See luma.gl ${e} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw _t.removed(`Calling removed method ${t}.${o}: `,r)(),new Error(o)})})}const Em="Resource subclass must define virtual methods";class rd{constructor(t,e={}){ES(t);const{id:i,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=i||iu(this.constructor.name),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:t=!1}={}){const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach(i=>i.delete()),this}bind(t=this.handle){if("function"!=typeof t)return this._bindHandle(t),this;let e;return this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e}unbind(){this.bind(null)}getParameter(t,e={}){tt(t=yI(this.gl,t));const r=(this.constructor.PARAMETERS||{})[t];if(r){const s=Rn(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension)){const a=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1;return s?l:a}}return this._getParameter(t,e)}getParameters(t={}){const{parameters:e,keys:i}=t,r=this.constructor.PARAMETERS||{},s=Rn(this.gl),o={},a=e||Object.keys(r);for(const l of a){const c=r[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const h=i?yh(this.gl,l):l;o[h]=this.getParameter(l,t),i&&"GLenum"===c.type&&(o[h]=yh(this.gl,o[h]))}}return o}setParameter(t,e){tt(t=yI(this.gl,t));const r=(this.constructor.PARAMETERS||{})[t];if(r){const s=Rn(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(e=yI(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,i){return $U(this,t,e,i)}initialize(t){}_createHandle(){throw new Error(Em)}_deleteHandle(){throw new Error(Em)}_bindHandle(t){throw new Error(Em)}_getOptsFromHandle(){throw new Error(Em)}_getParameter(t,e){throw new Error(Em)}_setParameter(t,e){throw new Error(Em)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this.constructor.name,e=ep.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get(`${t}s Created`).incrementCount(),e.get(`${t}s Active`).incrementCount()}_removeStats(){const t=this.constructor.name;ep.get("Resource Counts").get(`${t}s Active`).decrementCount()}_trackAllocatedMemory(t,e=this.constructor.name){const i=ep.get("Memory Usage");i.get("GPU Memory").addCount(t),i.get(`${e} Memory`).addCount(t),this.byteLength=t}_trackDeallocatedMemory(t=this.constructor.name){const e=ep.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get(`${t} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function wI(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function sb(n,{clamped:t=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function _ue({data:n,width:t,height:e}){const i=Math.round(t/2),r=Math.round(e/2),s=new Uint8Array(i*r*4);for(let o=0;o<r;o++)for(let a=0;a<i;a++)for(let l=0;l<4;l++)s[4*(o*i+a)+l]=n[4*(2*o*t+2*a)+l];return{data:s,width:i,height:r}}function CI(n,t,e){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=e;for(const a in i)a in t&&_t.removed(`${n}.${a}`,i[a]?`${n}.${i[a]}`:"N/A")();for(const a in r)a in t&&_t.deprecated(`${n}.${a}`,`${n}.${r[a]}`)();let o=null;for(const a in s)if(a in t){const l=s[a];_t.deprecated(`${n}.${a}`,`${n}.${l}`)(),o=o||Object.assign({},t),o[l]=t[a],delete o[a]}return o||t}const vue={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},yue={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ua{static getBytesPerElement(t){return sb(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return tt(t.size),sb(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(...t){return new ua(...[vue,...t])}constructor(...t){t.forEach(e=>this._assign(e)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ua.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ua.getBytesPerVertex(this)}_assign(t={}){return void 0!==(t=CI("Accessor",t,yue)).type&&(this.type=t.type,(5124===t.type||5125===t.type)&&(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&(this.index="boolean"==typeof t.index?t.index?1:0:t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const WU={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},bue={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:WU},wue={removedProps:WU};class Oi extends rd{constructor(t,e={}){super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(t=this.accessor){return Math.round(this.byteLength/ua.getBytesPerElement(t))}getVertexCount(t=this.accessor){return Math.round(this.byteLength/ua.getBytesPerVertex(t))}initialize(t={}){return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=CI("Buffer",t,bue),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=CI("Buffer",t,wue))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new ua(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:i=0,srcOffset:r=0}=t,s=t.byteLength||t.length;tt(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(Fo(this.gl),this.gl.bufferSubData(this.target,i,e,r,s)):this.gl.bufferSubData(o,i,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData({sourceBuffer:t,readOffset:e=0,writeOffset:i=0,size:r}){const{gl:s}=this;return Fo(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,e,i,r),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:t=null,srcByteOffset:e=0,dstOffset:i=0,length:r=0}={}){Fo(this.gl);const s=sb(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),a=i;let l,c;t?(c=t.length,l=c-a):(l=Math.min(o,r||o),c=a+l);const u=Math.min(o,l);return tt((r=r||u)<=u),t=t||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,i,r),this.gl.bindBuffer(36662,null),t}bind({target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:i=0,size:r}={}){return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,i,r):(tt(0===i),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind({target:t=this.target,index:e=this.accessor&&this.accessor.index}={}){return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t,e=0,i=t.byteLength+e){tt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=wI(t);return tt(s),this.setAccessor(new ua(this.accessor,{type:s})),this}_setByteLength(t,e=this.usage){tt(t>=0),this._trackDeallocatedMemory();let i=t;0===t&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const i=t/sb(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(t){this.accessor.type||this.setAccessor(new ua(this.accessor,{type:wI(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return _t.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return _t.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return _t.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return _t.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ua(this.accessor,t),this}}const EI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},qU={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},YU={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Sue=[9729,9728],XU=rr.CO.WebGLBuffer||function(){};class Sm extends rd{static isSupported(t,e={}){const{format:i,linearFiltering:r}=e;let s=!0;return i&&(s=s&&function(n,t){const e=EI[t];if(!e)return!1;if(void 0===e.gl1&&void 0===e.gl2)return!0;const i=Rn(n)&&e.gl2||e.gl1;return"string"==typeof i?n.getExtension(i):i}(t,i),s=s&&(!r||function(n,t){const e=EI[t];switch(e&&e.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(t,i))),s}constructor(t,e){const{id:i=iu("texture"),handle:r,target:s}=e;super(t,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(t={}){let e=t.data;if(e instanceof Promise)return e.then(w=>this.initialize(Object.assign({},t,{pixels:w,data:w}))),this;const i="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(i&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u}=t;e||(e=r);let{width:h,height:p,dataFormat:g,type:m,compressed:v=!1,mipmaps:y=!0}=t;const{depth:C=0}=t;return({width:h,height:p,compressed:v,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:v,data:e,width:h,height:p})),this.width=h,this.height=p,this.depth=C,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),y&&this._isNPOT()&&(_t.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),y=!1,this._updateForNPOT(l)),this.mipmaps=y,this.setImageData({data:e,width:h,height:p,depth:C,format:s,type:m,dataFormat:g,border:o,mipmaps:y,parameters:c,compressed:v}),y&&this.generateMipmap(),this.setParameters(l),a&&(this.data=e),i&&(this._video={video:e,parameters:l,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:i}=this._video;if(i===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize({height:t,width:e,mipmaps:i=!1}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(t={}){return this._isNPOT()?(_t.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),dc(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=t;let{data:c=null,type:u=this.type,width:h=this.width,height:p=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=t;c||(c=i),({type:u,dataFormat:g,compressed:m,width:h,height:p}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:c,width:h,height:p}));const{gl:v}=this;v.bindTexture(this.target,this.handle);let C,y=null;return({data:c,dataType:y}=this._getDataType({data:c,compressed:m})),dc(this.gl,l,()=>{switch(y){case"null":v.texImage2D(e,r,s,h,p,o,g,u,c);break;case"typed-array":v.texImage2D(e,r,s,h,p,o,g,u,c,a);break;case"buffer":C=Fo(v),C.bindBuffer(35052,c.handle||c),C.texImage2D(e,r,s,h,p,o,g,u,a),C.bindBuffer(35052,null);break;case"browser-object":Rn(v)?v.texImage2D(e,r,s,h,p,o,g,u,c):v.texImage2D(e,r,s,g,u,c);break;case"compressed":for(const[w,A]of c.entries())v.compressedTexImage2D(e,w,A.format,A.width,A.height,o,A.data);break;default:tt(!1,"Unknown image data type")}}),this._trackAllocatedMemory(c&&c.byteLength?c.byteLength:this.width*this.height*(qU[this.dataFormat]||4)*(YU[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:t=this.target,pixels:e=null,data:i=null,x:r=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:p=!1,offset:g=0,border:m=this.border,parameters:v={}}){if(({type:u,dataFormat:h,compressed:p,width:o,height:a}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:p,data:i,width:o,height:a})),tt(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=e),i&&i.data){const y=i;i=y.data,o=y.shape[0],a=y.shape[1]}i instanceof Oi&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),dc(this.gl,v,()=>{if(p)this.gl.compressedTexSubImage2D(t,l,r,s,o,a,c,i);else if(null===i)this.gl.texSubImage2D(t,l,r,s,o,a,h,u,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(t,l,r,s,o,a,h,u,i,g);else if(i instanceof XU){const y=Fo(this.gl);y.bindBuffer(35052,i),y.texSubImage2D(t,l,r,s,o,a,h,u,g),y.bindBuffer(35052,null)}else Rn(this.gl)?Fo(this.gl).texSubImage2D(t,l,r,s,o,a,h,u,i):this.gl.texSubImage2D(t,l,r,s,h,u,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(t={}){return _t.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType({data:t,compressed:e=!1}){return e?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Oi?{data:t.handle,dataType:"buffer"}:t instanceof XU?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:i}=t;let{width:r,height:s,dataFormat:o,type:a,compressed:l}=t;const c=EI[e];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:l,width:r,height:s,format:e,data:i}}_deduceImageSize(t,e,i){let r;return r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:i}:{width:e>=0?e:1,height:i>=0?i:1},tt(r,"Could not deduced texture size"),tt(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),tt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:tt(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Rn(this.gl)||!this.width||!this.height||HU(this.width)&&HU(this.height))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===Sue.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}function Mue(n,t){return tt("string"==typeof n),n=""+n,new Promise((e,i)=>{try{const r=new Image;r.onload=()=>e(r),r.onerror=()=>i(new Error(`Could not load image ${n}.`)),r.crossOrigin=t&&t.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class Na extends Sm{static isSupported(t,e){return Sm.isSupported(t,e)}constructor(t,e={}){ES(t),(e instanceof Promise||"string"==typeof e)&&(e={data:e}),"string"==typeof e.data&&(e=Object.assign({},e,{data:Mue(e.data)})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const tp="EXT_color_buffer_float",KU={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:tp,bpp:2},33327:{gl2:tp,bpp:4},34842:{gl2:tp,bpp:8},33326:{gl2:tp,bpp:4},33328:{gl2:tp,bpp:8},34836:{gl2:tp,bpp:16},35898:{gl2:tp,bpp:4}};class Mm extends rd{static isSupported(t,{format:e}={format:null}){return!e||function(n,t,e){const i=e[t];if(!i)return!1;const r=Rn(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(t,e,KU)}static getSamplesForFormat(t,{format:e}){return t.getInternalformatParameter(36161,e,32937)}constructor(t,e={}){super(t,e),this.initialize(e),Object.seal(this)}initialize({format:t,width:e=1,height:i=1,samples:r=0}){return tt(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&Rn(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,t,e,i):this.gl.renderbufferStorage(36161,t,e,i),this.format=t,this.width=e,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*KU[this.format].bpp),this}resize({width:t,height:e}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const t5="clear: bad arguments";function MI(n,{framebuffer:t=null,color:e=null,depth:i=null,stencil:r=null}={}){const s={};t&&(s.framebuffer=t);let o=0;e&&(o|=16384,!0!==e&&(s.clearColor=e)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),tt(0!==o,t5),dc(n,s,()=>{n.clear(o)})}function n5(n,t,e,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(i,r)}function An(n){return function(){var t=this,e=arguments;return new Promise(function(i,r){var s=n.apply(t,e);function o(l){n5(s,i,r,o,a,"next",l)}function a(l){n5(s,i,r,o,a,"throw",l)}o(void 0)})}}const AI=[34069,34070,34071,34072,34073,34074];let Pue=(()=>{class n extends Sm{constructor(e,i={}){ES(e),super(e,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(e={}){const{mipmaps:i=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,i&&this.generateMipmap(e),this.setParameters(r)}),this}subImage({face:e,data:i,x:r=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:e,data:i,x:r,y:s,mipmapLevel:o})}setCubeMapImageData({width:e,height:i,pixels:r,data:s,border:o=0,format:a=6408,type:l=5121}){var c=this;return An(function*(){const{gl:u}=c,h=r||s,p=yield Promise.all(AI.map(g=>{const m=h[g];return Promise.all(Array.isArray(m)?m:[m])}));c.bind(),AI.forEach((g,m)=>{p[m].length>1&&!1!==c.opts.mipmaps&&_t.warn(`${c.id} has mipmap and multiple LODs.`)(),p[m].forEach((v,y)=>{e&&i?u.texImage2D(g,y,a,e,i,o,a,l,v):u.texImage2D(g,y,a,a,l,v)})}),c.unbind()})()}setImageDataForFace(e){const{face:i,width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:u=5121}=e,{gl:h}=this,p=o||a;return this.bind(),p instanceof Promise?p.then(g=>this.setImageDataForFace(Object.assign({},e,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,c,r,s,l,c,u,p):h.texImage2D(i,0,c,c,u,p),this}}return n.FACES=AI,n})();class Rue extends Sm{static isSupported(t){return Rn(t)}constructor(t,e={}){Fo(t),super(t,e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1})),this.initialize(e),Object.seal(this)}setImageData({level:t=0,dataFormat:e=6408,width:i,height:r,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:u,parameters:h={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),dc(this.gl,h,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,t,e,i,r,s,o,a,l,u),u instanceof Oi&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,t,e,i,r,s,o,a,l,c))}),this._trackAllocatedMemory(u&&u.byteLength?u.byteLength:this.width*this.height*this.depth*(qU[this.dataFormat]||4)*(YU[this.type]||1),"Texture"),this.loaded=!0,this}}function Fue(n,t){const{gl:e,width:i,height:r,id:s}=n;return new ds(e,Object.assign({},t,{id:`framebuffer-for-${s}`,width:i,height:r,attachments:{36064:n}}))}function SS(n,t={}){const{sourceX:e=0,sourceY:i=0,sourceFormat:r=6408}=t;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=t;const{framebuffer:u,deleteFramebuffer:h}=function(n){return n instanceof ds?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Fue(n),deleteFramebuffer:!0}}(n);tt(u);const{gl:p,handle:g,attachments:m}=u;a=a||u.width,l=l||u.height,36064===s&&null===g&&(s=1028),tt(m[s]),c=c||m[s].type,o=function(n,t,e,i,r){if(n)return n;return new(sb(t=t||5121,{clamped:!1}))(i*r*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return tt(!1),0}}(e))}(o,c,r,a,l),c=c||wI(o);const v=p.bindFramebuffer(36160,g);return p.readPixels(e,i,a,l,r,c,o),p.bindFramebuffer(36160,v||null),h&&u.delete(),o}function TI(n,{sourceAttachment:t=36064,targetMaxHeight:e=Number.MAX_SAFE_INTEGER}={}){let i=SS(n,{sourceAttachment:t}),{width:r,height:s}=n;for(;s>e;)({data:i,width:r,height:s}=_ue({data:i,width:r,height:s}));!function({data:n,width:t,height:e,bytesPerPixel:i=4,temp:r}){const s=t*i;r=r||new Uint8Array(s);for(let o=0;o<e/2;++o){const a=o*s,l=(e-o-1)*s;r.set(n.subarray(a,a+s)),n.copyWithin(a,l,l+s),n.set(r,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),l=a.createImageData(r,s);return l.data.set(i),a.putImageData(l,0,0),o.toDataURL()}const i5="Multiple render targets not supported";class ds extends rd{static isSupported(t,e={}){const{colorBufferFloat:i,colorBufferHalfFloat:r}=e;let s=!0;return i&&(s=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(s=s&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new ds(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Fo(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Fo(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t,e={}){super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:t=1,height:e=1,attachments:i=null,color:r=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:c}){if(tt(t>=0&&e>=0,"Width and height need to be integers"),this.width=t,this.height=e,i)for(const u in i){const h=i[u];(Array.isArray(h)?h[0]:h).resize({width:t,height:e})}else i=this._createDefaultAttachments(r,s,o,t,e);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update({attachments:t={},readBuffer:e,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:s=!0}){this.attach(t,{clearAttachments:r,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return e&&this._setReadBuffer(e),i&&this._setDrawBuffers(i),o.bindFramebuffer(36160,a||null),this}resize(t={}){let{width:e,height:i}=t;if(null===this.handle)return tt(void 0===e&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),e!==this.width&&i!==this.height&&_t.log(2,`Resizing framebuffer ${this.id} to ${e}x${i}`)();for(const r in this.attachments)this.attachments[r].resize({width:e,height:i});return this.width=e,this.height=i,this}attach(t,{clearAttachments:e=!1,resizeAttachments:i=!0}={}){const r={};e&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,t);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){tt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=r[a];let c=l;if(c)if(c instanceof Mm)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,h=0,p=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:h,level:p})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});else this._unattach(a);i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(36053!==e)throw new Error(function(n){return(ds.STATUS||{})[n]||`Framebuffer error ${n}`}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),i=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),i}clear(t={}){const{color:e,depth:i,stencil:r,drawBuffers:s=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||i||r)&&MI(this.gl,{color:e,depth:i,stencil:r}),s.forEach((a,l)=>{!function(n,{framebuffer:t=null,buffer:e=6144,drawBuffer:i=0,value:r=[0,0,0,0]}={}){Fo(n),dc(n,{framebuffer:t},()=>{switch(e){case 6144:switch(r.constructor){case Int32Array:n.clearBufferiv(e,i,r);break;case Uint32Array:n.clearBufferuiv(e,i,r);break;case Float32Array:default:n.clearBufferfv(e,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:tt(!1,t5)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(t={}){return _t.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(t={}){return _t.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(t={}){return _t.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(t={}){return _t.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(t={}){return _t.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(t={}){return _t.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:t=[],x:e=0,y:i=0,width:r,height:s}){const o=Fo(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===e&&0===i&&void 0===r&&void 0===s?o.invalidateFramebuffer(36008,t):o.invalidateFramebuffer(36008,t,e,i,r,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,i){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=yh(this.gl,r)),r}getAttachmentParameters(t=36064,e,i=this.constructor.ATTACHMENT_PARAMETERS||[]){const r={};for(const s of i)r[e?yh(this.gl,s):s]=this.getAttachmentParameter(t,s,e);return r}getParameters(t=!0){const e=Object.keys(this.attachments),i={};for(const r of e){const s=Number(r);i[t?yh(this.gl,s):s]=this.getAttachmentParameters(s,t)}return i}show(){return"undefined"!=typeof window&&window.open(TI(this),"luma-debug-texture"),this}log(t=0,e=""){if(t>_t.level||"undefined"==typeof window)return this;e=e||`Framebuffer ${this.id}`;const i=TI(this,{targetMaxHeight:100});return _t.image({logLevel:t,message:e,image:i},e)(),this}bind({target:t=36160}={}){return this.gl.bindFramebuffer(t,this.handle),this}unbind({target:t=36160}={}){return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,i,r,s){let o=null;return t&&(o=o||{},o[36064]=new Na(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&i?(o=o||{},o[33306]=new Mm(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new Mm(this.gl,{id:`${this.id}-depth`,format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&tt(!1),o}_unattach(t){const e=this.attachments[t];!e||(e instanceof Mm?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer({attachment:t=36064,renderbuffer:e}){const{gl:i}=this;i.framebufferRenderbuffer(36160,t,36161,e.handle),this.attachments[t]=e}_attachTexture({attachment:t=36064,texture:e,layer:i,level:r}){const{gl:s}=this;switch(s.bindTexture(e.target,e.handle),e.target){case 35866:case 32879:Fo(s).framebufferTextureLayer(36160,t,e.target,r,i);break;case 34067:const a=function(n){return n<34069?n+34069:n}(i);s.framebufferTexture2D(36160,t,a,e.handle,r);break;case 3553:s.framebufferTexture2D(36160,t,3553,e.handle,r);break;default:tt(!1,"Illegal texture type")}s.bindTexture(e.target,null),this.attachments[t]=e}_setReadBuffer(t){const e=function(n){return Rn(n)?n:null}(this.gl);e?e.readBuffer(t):tt(36064===t||1029===t,i5),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,i=Fo(e);if(i)i.drawBuffers(t);else{const r=e.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(t):tt(1===t.length&&(36064===t[0]||1029===t[0]),i5)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const t in r5)void 0===n.luma.caps[t]&&(n.luma.caps[t]=o5(n,t));return n.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}ds.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const r5={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const t=new Na(n,{format:6408,type:5126,dataFormat:6408}),e=new ds(n,{id:"test-framebuffer",check:!1,attachments:{36064:t}}),i=e.getStatus();return t.delete(),e.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function xI(n,t){return s5(n,t)}function s5(n,t){return(t=Array.isArray(t)?t:[t]).every(e=>o5(n,e))}function o5(n,t){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[t]&&(n.luma.caps[t]=function(n,t){const e=r5[t];let i;tt(e,t);const r=Rn(n)&&e[1]||e[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&Boolean(n.getExtension(s))}else"string"==typeof r?i=Boolean(n.getExtension(r)):"boolean"==typeof r?i=r:tt(!1);return i}(n,t)),n.luma.caps[t]||_t.log(2,`Feature: ${t} not supported`)(),n.luma.caps[t]}function a5(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function l5(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a5(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a5(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var DI=function(){function n(t,e){wt(this,n),this.opts=e,this.source=t}return Tt(n,[{key:"getValue",value:function(){var e=this.source.getBuffer(),i=this.getAccessor();if(e)return[e,i];var r=this.source.value,s=i.size,o=r;if(r&&r.length!==s){o=new Float32Array(s);for(var a=i.elementOffset||0,l=0;l<s;++l)o[l]=r[a+l]}return o}},{key:"getAccessor",value:function(){return l5(l5({},this.source.getAccessor()),this.opts)}},{key:"value",get:function(){return this.source.value}}]),n}();const ab=new(function(){function n(t){wt(this,n),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(t)}return Tt(n,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"allocate",value:function(e,i,r){var C,s=r.size,o=void 0===s?1:s,l=r.padding,c=void 0===l?0:l,u=r.copy,h=void 0!==u&&u,p=r.initialize,g=void 0!==p&&p,m=r.maxCount,v=r.type||e&&e.constructor||Float32Array,y=i*o+c;if(ArrayBuffer.isView(e)){if(y<=e.length)return e;if(y*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new v(e.buffer,0,y)}m&&(C=m*o+c);var w=this._allocate(v,y,g,C);return e&&h?w.set(e):g||w.fill(0,0,4),this._release(e),w}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,i,r,s){var o=Math.max(Math.ceil(i*this.props.overAlloc),1);o>s&&(o=s);var a=this._pool,l=e.BYTES_PER_ELEMENT*o,c=a.findIndex(function(h){return h.byteLength>=l});if(c>=0){var u=new e(a.splice(c,1)[0],0,o);return r&&u.fill(0),u}return new e(o)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var i=this._pool,r=e.buffer,s=r.byteLength,o=i.findIndex(function(a){return a.byteLength>=s});o<0?i.push(r):(o>0||i.length<this.props.poolSize)&&i.splice(o,0,r),i.length>this.props.poolSize&&i.shift()}}}]),n}()),que=(Math,1/180*Math.PI),Li={};function Xue(n,{precision:t=Li.precision||4}={}){return n=function(n){return Math.round(n/Li.EPSILON)*Li.EPSILON}(n),`${parseFloat(n.toPrecision(t))}`}function sd(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function od(n,t,e){if(sd(n)){e=e||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let i=0;i<e.length&&i<n.length;++i)e[i]=t(n[i],i,e);return e}return t(n)}function MS(n){return function(n,t){return od(n,e=>e*que,void 0)}(n)}function np(n,t,e){return od(n,i=>Math.max(t,Math.min(e,i)))}function AS(n,t,e){return sd(n)?n.map((i,r)=>AS(i,t[r],e)):e*t+(1-e)*n}function lb(n,t,e){const i=Li.EPSILON;e&&(Li.EPSILON=e);try{if(n===t)return!0;if(sd(n)&&sd(t)){if(n.length!==t.length)return!1;for(let r=0;r<n.length;++r)if(!lb(n[r],t[r]))return!1;return!0}return n&&n.equals?n.equals(t):t&&t.equals?t.equals(n):!(!Number.isFinite(n)||!Number.isFinite(t))&&Math.abs(n-t)<=Li.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))}finally{Li.EPSILON=i}}function ad(n,t){if(!n)throw new Error(`math.gl assertion ${t}`)}Li.EPSILON=1e-12,Li.debug=!1,Li.precision=4,Li.printTypes=!1,Li.printDegrees=!1,Li.printRowMajor=!0;class OI extends(function(n){function t(){var e=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return t.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n,t}(Array)){get ELEMENTS(){return ad(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,e=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=t[i+e];return this.check()}to(t){return t===this?this:sd(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toArray(t=[],e=0){for(let i=0;i<this.ELEMENTS;++i)t[e+i]=this[i];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Li)}formatString(t){let e="";for(let i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+Xue(this[i],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!lb(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,i){void 0===i&&(i=e,e=t,t=this);for(let r=0;r<this.ELEMENTS;++r){const s=t[r];this[r]=s+i*(e[r]-s)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t[i]),e[i]);return this.check()}add(...t){for(const e of t)for(let i=0;i<this.ELEMENTS;++i)this[i]+=e[i];return this.check()}subtract(...t){for(const e of t)for(let i=0;i<this.ELEMENTS;++i)this[i]-=e[i];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t),e);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(Li.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}function Vr(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function TS(n,t,e=""){if(Li.debug&&!function(n,t){if(n.length!==t)return!1;for(let e=0;e<n.length;++e)if(!Number.isFinite(n[e]))return!1;return!0}(n,t))throw new Error(`math.gl: ${e} some fields set to invalid numbers'`);return n}const c5={};function II(n,t){c5[n]||(c5[n]=!0,console.warn(`${n} has been removed in version ${t}, see upgrade guide for more information`))}class u5 extends OI{get ELEMENTS(){return ad(!1),0}copy(t){return ad(!1),this}get x(){return this[0]}set x(t){this[0]=Vr(t)}get y(){return this[1]}set y(t){this[1]=Vr(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-t[i];e+=r*r}return Vr(e)}dot(t){let e=0;for(let i=0;i<this.ELEMENTS;++i)e+=this[i]*t[i];return Vr(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let i=0;i<this.ELEMENTS;++i)this[i]*=e[i];return this.check()}divide(...t){for(const e of t)for(let i=0;i<this.ELEMENTS;++i)this[i]/=e[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return ad(t>=0&&t<this.ELEMENTS,"index is out of range"),Vr(this[t])}setComponent(t,e){return ad(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var qi=1e-6,da="undefined"!=typeof Float32Array?Float32Array:Array;function d5(){var n=new da(3);return da!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function h5(n,t,e){var i=new da(3);return i[0]=n,i[1]=t,i[2]=e,i}function f5(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function xS(n,t,e){var i=t[0],r=t[1],s=t[2],o=e[0],a=e[1],l=e[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function p5(n,t,e){var i=t[0],r=t[1],s=t[2],o=e[3]*i+e[7]*r+e[11]*s+e[15];return n[0]=(e[0]*i+e[4]*r+e[8]*s+e[12])/(o=o||1),n[1]=(e[1]*i+e[5]*r+e[9]*s+e[13])/o,n[2]=(e[2]*i+e[6]*r+e[10]*s+e[14])/o,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});function g5(n,t,e){const i=t[0],r=t[1],s=e[3]*i+e[7]*r||1;return n[0]=(e[0]*i+e[4]*r)/s,n[1]=(e[1]*i+e[5]*r)/s,n}function m5(n,t,e){const i=t[0],r=t[1],s=t[2],o=e[3]*i+e[7]*r+e[11]*s||1;return n[0]=(e[0]*i+e[4]*r+e[8]*s)/o,n[1]=(e[1]*i+e[5]*r+e[9]*s)/o,n[2]=(e[2]*i+e[6]*r+e[10]*s)/o,n}d5();const PI=[0,0,0],_5={};class lo extends u5{static get ZERO(){return _5.ZERO=_5.ZERO||Object.freeze(new lo(0,0,0,0))}constructor(t=0,e=0,i=0){super(-0,-0,-0),1===arguments.length&&sd(t)?this.copy(t):(Li.debug&&(Vr(t),Vr(e),Vr(i)),this[0]=t,this[1]=e,this[2]=i)}set(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Li.debug&&(Vr(t.x),Vr(t.y),Vr(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Vr(t)}angle(t){return function(n,t){var e=n[0],i=n[1],r=n[2],s=t[0],o=t[1],a=t[2],u=Math.sqrt(e*e+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&f5(n,t)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,t)}cross(t){return xS(this,this,t),this.check()}rotateX({radians:t,origin:e=PI}){return function(n,t,e,i){var r=[],s=[];r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=PI}){return function(n,t,e,i){var r=[],s=[];r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=PI}){return function(n,t,e,i){var r=[],s=[];r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return p5(this,this,t),this.check()}transformAsVector(t){return m5(this,this,t),this.check()}transformByMatrix3(t){return function(n,t,e){var i=t[0],r=t[1],s=t[2];n[0]=i*e[0]+r*e[3]+s*e[6],n[1]=i*e[1]+r*e[4]+s*e[7],n[2]=i*e[2]+r*e[5]+s*e[8]}(this,this,t),this.check()}transformByMatrix2(t){return function(n,t,e){const i=t[0],r=t[1];n[0]=e[0]*i+e[2]*r,n[1]=e[1]*i+e[3]*r,n[2]=t[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(n,t,e){var i=e[0],r=e[1],s=e[2],a=t[0],l=t[1],c=t[2],u=r*c-s*l,h=s*a-i*c,p=i*l-r*a,g=r*p-s*h,m=s*u-i*p,v=i*h-r*u,y=2*e[3];h*=y,p*=y,m*=2,v*=2,n[0]=a+(u*=y)+(g*=2),n[1]=l+h+m,n[2]=c+p+v}(this,this,t),this.check()}}var ub,v5=new lo;function Am(n,t,e,i){v5.set(n,t,e);var r=v5.len();return{distance:i/r,normal:new lo(-n/r,-t/r,-e/r)}}function Cde(n){return n-Math.fround(n)}function RI(n,t){var e=t.size,i=void 0===e?1:e,r=t.startIndex,s=void 0===r?0:r,o=t.endIndex;Number.isFinite(o)||(o=n.length);var a=(o-s)/i;ub=ab.allocate(ub,a,{type:Float32Array,size:2*i});for(var l=s,c=0;l<o;){for(var u=0;u<i;u++){var h=n[l++];ub[c+u]=h,ub[c+u+i]=Cde(h)}c+=2*i}return ub.subarray(0,a*i*2)}function y5(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Tm(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?y5(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):y5(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function DS(n){return n.stride||n.size*n.bytesPerElement}function b5(n,t){t.offset&&ei.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var e=DS(n),s=("vertexOffset"in t?t.vertexOffset:n.vertexOffset||0)*e+(t.elementOffset||0)*n.bytesPerElement+(n.offset||0);return Tm(Tm({},t),{},{offset:s,stride:e})}var Sde=function(){function n(t,e){wt(this,n),this.gl=t,this.id=e.id,this.size=e.size;var i=e.logicalType||e.type,r=5130===i,s=e.defaultValue;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),e.defaultValue=s;var o=i;r?o=5126:!o&&e.isIndexed?o=t&&xI(t,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),e.logicalType=i,e.type=o;var a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.shaderAttributes={},this.doublePrecision=r,r&&!1===e.fp64&&(a=Float32Array),e.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=e,this.state={externalBuffer:null,bufferAccessor:e,allocatedValue:null,constant:!1},this._buffer=null,this.setData(e)}return Tt(n,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),ab.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,i){if(this.doublePrecision){var r={},s=this.value instanceof Float64Array,o=function(n,t){var e=b5(n,t);return{high:e,low:Tm(Tm({},e),{},{offset:e.offset+4*n.size})}}(this.getAccessor(),i||{});return r[e]=new DI(this,o.high),r["".concat(e,"64Low")]=s?new DI(this,o.low):new Float32Array(this.size),r}if(i){var a=b5(this.getAccessor(),i);return Yt({},e,new DI(this,a))}return Yt({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(e){var i=this.state;ArrayBuffer.isView(e)?e={value:e}:e instanceof Oi&&(e={buffer:e});var r=Tm(Tm({},this.settings),e);if(i.bufferAccessor=r,e.constant){var s=e.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this._normalizeConstant(s)),i.constant&&this._areValuesEqual(s,this.value))return!1;i.externalBuffer=null,i.constant=!0,this.value=s}else if(e.buffer){var a=e.buffer;i.externalBuffer=a,i.constant=!1,this.value=e.value;var l=e.value instanceof Float64Array;r.type=e.type||a.accessor.type,r.bytesPerElement=a.accessor.BYTES_PER_ELEMENT*(l?2:1),r.stride=DS(r)}else if(e.value){this._checkExternalBuffer(e);var c=e.value;i.externalBuffer=null,i.constant=!1,this.value=c,r.bytesPerElement=c.BYTES_PER_ELEMENT,r.stride=DS(r);var u=this.buffer,h=this.byteOffset;this.doublePrecision&&c instanceof Float64Array&&(c=RI(c,r));var p=c.byteLength+h+2*r.stride;u.byteLength<p&&u.reallocate(p),u.setAccessor(null),u.subData({data:c,offset:h}),r.type=e.type||u.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.value,r=e.startOffset,s=void 0===r?0:r,o=e.endOffset;this.buffer.subData({data:this.doublePrecision&&i instanceof Float64Array?RI(i,{size:this.size,startIndex:s,endIndex:o}):i.subarray(s,o),offset:s*i.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var r=e.copy,s=void 0!==r&&r,o=this.state,a=o.allocatedValue,l=ab.allocate(a,e.numInstances+1,{size:this.size,type:this.defaultType,copy:s});this.value=l;var c=this.buffer,u=this.byteOffset;return c.byteLength<l.byteLength+u&&(c.reallocate(l.byteLength+u),s&&a&&c.subData({data:a instanceof Float64Array?RI(a,this):a,offset:u})),o.allocatedValue=l,o.constant=!1,o.externalBuffer=null,o.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var i=e.value;if(!e.constant&&i){var r=this.defaultType,s=!1;if(this.doublePrecision&&(s=i.BYTES_PER_ELEMENT<4),s)throw new Error("Attribute ".concat(this.id," does not support ").concat(i.constructor.name));!(i instanceof r)&&this.settings.normalized&&!("normalized"in e)&&ei.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(function(i){return(i+128)/255*2-1});case 5122:return new Float32Array(e).map(function(i){return(i+32768)/65535*2-1});case 5121:return new Float32Array(e).map(function(i){return i/255});case 5123:return new Float32Array(e).map(function(i){return i/65535});default:return e}}},{key:"_normalizeValue",value:function(e,i,r){var s=this.settings,o=s.defaultValue,a=s.size;if(Number.isFinite(e))return i[r]=e,i;if(!e)return i[r]=o[0],i;switch(a){case 4:i[r+3]=Number.isFinite(e[3])?e[3]:o[3];case 3:i[r+2]=Number.isFinite(e[2])?e[2]:o[2];case 2:i[r+1]=Number.isFinite(e[1])?e[1]:o[1];case 1:i[r+0]=Number.isFinite(e[0])?e[0]:o[0];break;default:for(var l=a;--l>=0;)i[r+l]=Number.isFinite(e[l])?e[l]:o[l]}return i}},{key:"_areValuesEqual",value:function(e,i){if(!e||!i)return!1;for(var r=this.size,s=0;s<r;s++)if(e[s]!==i[s])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings;this._buffer=new Oi(this.gl,{id:this.id,target:e.isIndexed?34963:34962,accessor:{type:e.type}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*DS(e):0}}]),n}();function Kr(n,t){if(!n)throw new Error(t||"deck.gl: assertion failed.")}var w5=[],C5=[];function E5(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=w5,r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(C5.length=n.length,i=C5):i=w5,(t>0||Number.isFinite(e))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(t,e),r.index=t-1),{iterable:i,objectInfo:r}}function S5(n){return n&&n[Symbol.asyncIterator]}function Mde(n,t){var e=t.size,i=t.stride,r=t.offset,s=t.startIndices,o=t.nested,a=n.BYTES_PER_ELEMENT,l=i?i/a:e,c=r?r/a:0,u=Math.floor((n.length-c)/l);return function(h,p){var g=p.index,m=p.target;if(!s){for(var v=g*l+c,y=0;y<e;y++)m[y]=n[v+y];return m}var A,C=s[g],w=s[g+1]||u;if(o){A=new Array(w-C);for(var k=C;k<w;k++){var B=k*l+c;m=new Array(e);for(var U=0;U<e;U++)m[U]=n[B+U];A[k-C]=m}}else if(l===e)A=n.subarray(C*e+c,w*e+c);else{A=new n.constructor((w-C)*e);for(var K=0,ae=C;ae<w;ae++)for(var de=ae*l+c,ne=0;ne<e;ne++)A[K++]=n[de+ne]}return A}}function kI(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(n)?M5(n,t,[]):t(n)?[n]:[]}function M5(n,t,e){for(var i=-1;++i<n.length;){var r=n[i];Array.isArray(r)?M5(r,t,e):t(r)&&e.push(r)}return e}function Ade(n){for(var t=n.target,e=n.source,i=n.start,r=void 0===i?0:i,s=n.count,a=e.length,l=(void 0===s?1:s)*a,c=0,u=r;c<a;c++)t[u++]=e[c];for(;c<l;)c<l-c?(t.copyWithin(r+c,r,r+c),c*=2):(t.copyWithin(r+c,r,r+l-c),c=l);return t}var Tde=[],OS=[[0,1/0]];function xde(n,t){if(n===OS||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return n;for(var e=[],i=n.length,r=0,s=0;s<i;s++){var o=n[s];o[1]<t[0]?(e.push(o),r=s+1):o[0]>t[1]?e.push(o):t=[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}return e.splice(r,0,t),e}function FI(n){var t=n.source,e=n.target,i=n.start,r=void 0===i?0:i,s=n.end,o=n.size,a=n.getData,l=t.length,c=(s=s||e.length)-r;if(l>c)e.set(t.subarray(0,c),r);else if(e.set(t,r),a)for(var u=l;u<c;)for(var h=a(u,t),p=0;p<o;p++)e[r+u]=h[p]||0,u++}var Ode={interpolation:{duration:0,easing:function(t){return t}},spring:{stiffness:.05,damping:.5}};function A5(n,t){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",Object.assign({},Ode[n.type],t,n)):null}function T5(n,t){return t.getBuffer()?[t.getBuffer(),{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function x5(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function D5(n){n.push(n.shift())}function NI(n,t){var r=n.value,o=n.doublePrecision&&r instanceof Float64Array?2:1;return(n.settings.noAlloc?r.length:t*n.size)*o}function O5(n){var t=n.buffer,i=n.attribute,r=n.fromLength,s=n.fromStartIndices,o=n.getData,a=void 0===o?function(k){return k}:o,l=i.doublePrecision&&i.value instanceof Float64Array?2:1,c=i.size*l,u=i.byteOffset,h=i.startIndices,p=s&&h,g=NI(i,n.numInstances),m=i.state.constant;if(p||!(r>=g)){var v=m?i.value:i.getBuffer().getData({srcByteOffset:u});if(i.settings.normalized&&!m){var y=a;a=function(B,U){return i._normalizeConstant(y(B,U))}}var C=m?function(k,B){return a(v,B)}:function(k,B){return a(v.subarray(k,k+c),B)},w=t.getData({length:r}),A=new Float32Array(g);(function(n){var t=n.source,e=n.target,i=n.size,r=n.getData,s=n.sourceStartIndices,o=n.targetStartIndices;if(!Array.isArray(o))return FI({source:t,target:e,size:i,getData:r}),e;for(var a=0,l=0,c=r&&function(m,v){return r(m+l,v)},u=Math.min(s.length,o.length),h=1;h<u;h++){var p=s[h]*i,g=o[h]*i;FI({source:t.subarray(a,p),target:e,start:l,end:g,size:i,getData:c}),a=p,l=g}l<e.length&&FI({source:[],target:e,start:l,size:i,getData:c})})({source:w,target:A,sourceStartIndices:s,targetStartIndices:h,size:c,getData:C}),t.byteLength<A.byteLength+u&&t.reallocate(A.byteLength+u),t.subData({data:A,offset:u})}}function IS(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return I5(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return I5(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function I5(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var LI=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(i){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wt(this,e),r=t.call(this,i,s);var o=s.transition,a=void 0!==o&&o,l=s.noAlloc,c=void 0!==l&&l,u=s.update,h=void 0===u?null:u,p=s.accessor,g=void 0===p?null:p,m=s.transform,v=void 0===m?null:m,y=s.startIndices,C=void 0===y?null:y;return Object.assign(r.settings,{transition:a,noAlloc:c,update:h||g&&r._autoUpdater,accessor:g,transform:v}),Object.assign(r.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:OS,startIndices:C}),Object.seal(r.settings),Object.seal(r.state),r._validateAttributeUpdaters(),r}return Tt(e,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.clearChangedFlags,o=void 0!==s&&s,a=this.state.needsRedraw;return this.state.needsRedraw=a&&!o,a}},{key:"getUpdateTriggers",value:function(){var r=this.settings.accessor;return[this.id].concat("function"!=typeof r&&r||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(r){if(!r||!this.supportsTransition())return null;var s=this.settings.accessor,o=this.settings.transition;return A5(Array.isArray(s)?r[s.find(function(l){return r[l]})]:r[s],o)}},{key:"setNeedsUpdate",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,s=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||r,this.setNeedsRedraw(r),s){var o=s.startRow,a=void 0===o?0:o,l=s.endRow,c=void 0===l?1/0:l;this.state.updateRanges=xde(this.state.updateRanges,[a,c])}else this.state.updateRanges=OS}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=Tde}},{key:"setNeedsRedraw",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||r}},{key:"update",value:function(r){this.setData(r)}},{key:"allocate",value:function(r){var s=this.state,o=this.settings;return!o.noAlloc&&!!o.update&&(Kr(Number.isFinite(r)),Hs(Ot(e.prototype),"allocate",this).call(this,{numInstances:r,copy:s.updateRanges!==OS}),!0)}},{key:"updateBuffer",value:function(r){var s=r.numInstances,o=r.data,a=r.props,l=r.context;if(!this.needsUpdate())return!1;var c=this.state.updateRanges,u=this.settings,h=u.update,p=u.noAlloc,g=!0;if(h){var v,m=IS(c);try{for(m.s();!(v=m.n()).done;){var y=Br(v.value,2);h.call(l,this,{data:o,startRow:y[0],endRow:y[1],props:a,numInstances:s})}}catch(ne){m.e(ne)}finally{m.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var k,A=IS(c);try{for(A.s();!(k=A.n()).done;){var B=Br(k.value,2),U=B[0],K=B[1],ae=Number.isFinite(U)?this.getVertexOffset(U):0,de=Number.isFinite(K)?this.getVertexOffset(K):p||!Number.isFinite(s)?this.value.length:s*this.size;Hs(Ot(e.prototype),"updateSubBuffer",this).call(this,{startOffset:ae,endOffset:de})}}catch(ne){A.e(ne)}finally{A.f()}}this._checkAttributeArray()}else g=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),g}},{key:"setConstantValue",value:function(r){return void 0!==r&&"function"!=typeof r&&(this.setData({constant:!0,value:r})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(r){var s=this.state;return r?(this.clearNeedsUpdate(),s.lastExternalBuffer===r||(s.lastExternalBuffer=r,this.setNeedsRedraw(),this.setData(r)),!0):(s.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.state,a=this.settings;if(!r)return o.binaryValue=null,o.binaryAccessor=null,!1;if(a.noAlloc)return!1;if(o.binaryValue===r)return this.clearNeedsUpdate(),!0;o.binaryValue=r,this.setNeedsRedraw(),ArrayBuffer.isView(r)&&(r={value:r});var l=a.transform||s!==this.startIndices;if(l){Kr(ArrayBuffer.isView(r.value),"invalid ".concat(a.accessor));var c=r.size&&r.size!==this.size;return o.binaryAccessor=Mde(r.value,{size:r.size||this.size,stride:r.stride,offset:r.offset,startIndices:s,nested:c}),!1}return this.clearNeedsUpdate(),this.setData(r),!0}},{key:"getVertexOffset",value:function(r){var s=this.startIndices;return(s?s[r]:r)*this.size}},{key:"getShaderAttributes",value:function(){var r=this.settings.shaderAttributes||Yt({},this.id,null),s={};for(var o in r)Object.assign(s,Hs(Ot(e.prototype),"getShaderAttributes",this).call(this,o,r[o]));return s}},{key:"_autoUpdater",value:function(r,s){var o=s.data,a=s.startRow,l=s.endRow,u=s.numInstances;if(!r.constant){var h=r.settings,g=r.value,m=r.size,v=r.startIndices,y=h.accessor,C=h.transform,w=r.state.binaryAccessor||("function"==typeof y?y:s.props[y]);Kr("function"==typeof w,'accessor "'.concat(y,'" is not a function'));var ae,A=r.getVertexOffset(a),k=E5(o,a,l),U=k.objectInfo,K=IS(k.iterable);try{for(K.s();!(ae=K.n()).done;){var de=ae.value;U.index++;var ne=w(de,U);if(C&&(ne=C.call(this,ne)),v){var Se=(U.index<v.length-1?v[U.index+1]:u)-v[U.index];if(ne&&Array.isArray(ne[0])){var ie,ve=A,te=IS(ne);try{for(te.s();!(ie=te.n()).done;)r._normalizeValue(ie.value,g,ve),ve+=m}catch(Q){te.e(Q)}finally{te.f()}}else ne&&ne.length>m?g.set(ne,A):(r._normalizeValue(ne,U.target,0),Ade({target:g,source:U.target,start:A,count:Se}));A+=Se*m}else r._normalizeValue(ne,g,A),A+=m}}catch(Q){K.e(Q)}finally{K.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var r=this.settings;if(!r.noAlloc&&"function"!=typeof r.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var r=this.value,s=Math.min(4,this.size);if(r&&r.length>=s){var o=!0;switch(s){case 4:o=o&&Number.isFinite(r[3]);case 3:o=o&&Number.isFinite(r[2]);case 2:o=o&&Number.isFinite(r[1]);case 1:o=o&&Number.isFinite(r[0]);break;default:o=!1}if(!o)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(r){this.state.startIndices=r}}]),e}(Sde),BI={};function co(n){var t;ei.level>0&&BI[n]&&(t=BI[n]).call.apply(t,arguments)}function La(n,t){if(!n)throw new Error(t||"shadertools: assertion failed.")}const P5="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Nde=`#version 300 es\n${P5}`;function R5(n,t){t=Array.isArray(t)?t:[t];const e=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=e;return t.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function k5(n={}){const{version:t=100,input:e,inputType:i,output:r}=n;if(!e)return 300===t?Nde:t>300?`#version ${t}\n${P5}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,t){switch(t){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return La(!1),null}}(e,i);return t>=300?`#version ${t} ${300===t?"es":""}\nin ${i} ${e};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${s};\n}`:`varying ${i} ${e};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class F5 extends rd{static isSupported(t){return Rn(t)}constructor(t,e={}){Fo(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(t={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Cm(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(t={}){return this.bind(()=>{for(const e in t)this.setBuffer(e,t[e])}),this}setBuffer(t,e){const i=this._getVaryingIndex(t),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(e);return i<0?(this.unused[t]=r,_t.warn(()=>`${this.id} unused varying buffer ${t}`)(),this):(this.buffers[i]=e,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(t=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,i,r;return t instanceof Oi?r=t:(r=t.buffer,i=t.byteSize,e=t.byteOffset),(void 0!==e||void 0!==i)&&(e=e||0,i=i||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:i}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e,i=0,r){const s=e&&e.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,t,s,i,r):this.gl.bindBufferBase(35982,t,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class jde{constructor(t,e={}){this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(t={}){const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(t={}){const e=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=e;return{attributes:Object.assign({},i,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(t={}){this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],i=t?e[t]:null;return i?i instanceof Oi?i:i.buffer:null}getData(t={}){const{varyingName:e}=t,i=this.getBuffer(e);return i?i.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(t={}){this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&tt(Rn(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const s=this.feedbackMap[r];r in e&&(i[s]=r)}Object.assign(i,t.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=e[s],{byteLength:a,usage:l,accessor:c}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:l,accessor:c})}}return i}_setupBuffers(t={}){const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const i=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:i})}_setupTransformFeedback(t,{model:e}){const{program:i}=e;t.transformFeedback=new F5(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:e,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:e,feedbackBuffers:i})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),i=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];e[r]=t.feedbackBuffers[s],i[s]=t.sourceBuffers[r],tt(i[s]instanceof Oi)}return{sourceBuffers:e,feedbackBuffers:i}}_createNewBuffer(t,e){const i=new Oi(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function N5(n){let t=100;const e=n.match(/[^\s]+/g);if(e.length>=2&&"#version"===e[0]){const i=parseInt(e[1],10);Number.isFinite(i)&&(t=i)}return t}const db="vs",Hde={[db]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},PS="__LUMA_INJECT_DECLARATIONS__",L5=/void\s+main\s*\([^)]*\)\s*\{\n?/,B5=/}\n?[^{}]*$/,jI=[];function V5(n,t,e,i=!1){const r=t===db;for(const s in e){const o=e[s];o.sort((l,c)=>l.order-c.order),jI.length=o.length;for(let l=0,c=o.length;l<c;++l)jI[l]=o[l].injection;const a=`${jI.join("\n")}\n`;switch(s){case"vs:#decl":r&&(n=n.replace(PS,a));break;case"vs:#main-start":r&&(n=n.replace(L5,l=>l+a));break;case"vs:#main-end":r&&(n=n.replace(B5,l=>a+l));break;case"fs:#decl":r||(n=n.replace(PS,a));break;case"fs:#main-start":r||(n=n.replace(L5,l=>l+a));break;case"fs:#main-end":r||(n=n.replace(B5,l=>a+l));break;default:n=n.replace(s,l=>l+a)}}return n=n.replace(PS,""),i&&(n=n.replace(/\}\s*$/,s=>s+Hde[t])),n}function zI(n){const t={};return La(Array.isArray(n)&&n.length>1),n.forEach(e=>{for(const i in e)t[i]=t[i]?`${t[i]}\n${e[i]}`:e[i]}),t}const $de={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},RS="transform_uSize_",j5="transform_position";const Qde={10241:9728,10240:9728,10242:33071,10243:33071};class ehe{constructor(t,e={}){this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(t={}){const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(t={}){const{sourceBuffers:e,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),a=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let c=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function({sourceTextureMap:n,targetTextureVarying:t,targetTexture:e}){const i={};let r,s;t&&(({width:r,height:s}=e),i[`${RS}${t}`]=[r,s]);for(const o in n)({width:r,height:s}=n[o]),i[`${RS}${o}`]=[r,s];return i}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:c,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(t={}){this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData({packed:t=!1}={}){const{framebuffer:e}=this.bindings[this.currentIndex],i=SS(e);if(!t)return i;const r=i.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return La(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let l=0;l<i.length;l+=4)for(let c=0;c<s;c++)o[a++]=i[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(t={}){const{_targetTextureVarying:e,_swapTexture:i}=t;this._swapTexture=i,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:i}=t;if(i instanceof Na)return i;const r=e[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(t={}){const{sourceBuffers:e,_sourceTextures:i={},_targetTexture:r}=t,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:i,targetTexture:s}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Oi(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:e,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:e,targetTexture:i})}}_updateBinding(t,e){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,i),s){t.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=t;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):t.framebuffer=new ds(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const i in e)e[i].setParameters(Qde)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(n,t){tt(n instanceof Na||n instanceof Pue||n instanceof Rue);const e=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=n;return new e(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}}))}(t);return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(t={}){const{sourceTextures:e,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function({vs:n,sourceTextureMap:t,targetTextureVarying:e,targetTexture:i}){let s=Object.keys(t).length,o=null;const a={};let l=n,c={};if(s>0||e){const u=l.split("\n"),h=u.slice();if(u.forEach((p,g,m)=>{if(s>0){const v=function(n,t){const e={},i=function(n){return R5(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&t[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=function(n){const t=`transform_uSampler_${n}`,e=`${RS}${n}`;return{samplerName:t,sizeName:e,uniformDeclerations:`  uniform sampler2D ${t};\n  uniform vec2 ${e};`}}(s),h=`  ${r} ${s} = transform_getInput(${a}, ${l}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return La(!1),null}}(r)};\n`;return e[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":h},samplerTextureMap:e}}return null}(p,t);if(v){const{updatedLine:y,inject:C}=v;h[g]=y,c=zI([c,C]),Object.assign(a,v.samplerTextureMap),s--}}e&&!o&&(o=function(n,t){const e=R5(n,["varying","out"]);return e&&e.name===t?e.type:null}(p,e))}),e){tt(i);const p=`${RS}${e}`;c=zI([c,{"vs:#decl":`uniform vec2 ${p};\n`,"vs:#main-start":`     vec2 ${j5} = transform_getPos(${p});\n     gl_Position = vec4(${j5}, 0, 1.);\n`}])}l=h.join("\n")}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),c=zI([t.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:r,fs:t._fs||k5({version:N5(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[$de].concat(t.modules||[]):t.modules,uniforms:s,inject:c}}}const UI={number:{validate:(n,t)=>Number.isFinite(n)&&(!("max"in t)||n<=t.max)&&(!("min"in t)||n>=t.min)},array:{validate:(n,t)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function nhe(n){let t=z5(n);return"object"===t?n?"type"in n?Object.assign({},n,UI[n.type]):"value"in n?(t=z5(n.value),Object.assign({type:t},n,UI[t])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:t,value:n},UI[t])}function z5(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class HI{constructor({name:t,vs:e,fs:i,dependencies:r=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}){La("string"==typeof t),this.name=t,this.vs=e||u,this.fs=i||h,this.getModuleUniforms=o,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(n){const t={vs:{},fs:{}};for(const e in n){let i=n[e];const r=e.slice(0,2);"string"==typeof i&&(i={order:0,injection:i}),t[r][e]=i}return t}(c),s&&(this.uniforms=function(n){const t={};for(const e in n){const r=nhe(n[e]);t[e]=r}return t}(s))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:La(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${e}// END MODULE_${this.name}\n\n`}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach(i=>{i.regex.test(t)&&(i.deprecated?e.deprecated(i.old,i.new)():e.removed(i.old,i.new)())})}_parseDeprecationDefinitions(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}_defaultGetUniforms(t={}){const e={},i=this.uniforms;for(const r in i){const s=i[r];r in t&&!s.private?(s.validate&&La(s.validate(t[r],s),`${this.name}: invalid ${r}`),e[r]=t[r]):e[r]=s.value}return e}}function ohe(n){return function(n){const t={},e={};return $I({modules:n,level:0,moduleMap:t,moduleDepth:e}),Object.keys(e).sort((i,r)=>e[r]-e[i]).map(i=>t[i])}(H5(n))}function $I({modules:n,level:t,moduleMap:e,moduleDepth:i}){if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const r of n)e[r.name]=r,(void 0===i[r.name]||i[r.name]<t)&&(i[r.name]=t);for(const r of n)r.dependencies&&$I({modules:r.dependencies,level:t+1,moduleMap:e,moduleDepth:i})}function H5(n,t){return n.map(e=>(e instanceof HI||(La("string"!=typeof e,`Shader module use by name is deprecated. Import shader module '${e}' and use it directly.`),La(e.name,"shader module has no name"),(e=new HI(e)).dependencies=H5(e.dependencies)),e))}const GI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},ip={};function phe(n,t){return n.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":n.match(/Apple/i)||t.match(/Apple/i)?"APPLE":n.match(/AMD/i)||t.match(/AMD/i)||n.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN"}Object.keys(GI).forEach(n=>{ip[n]=n});const WI={};function $5(n,t,e={}){const i=GI[t];if(La(i,t),!function(n={}){const t="undefined"!=typeof window&&window.navigator||{},e=n.userAgent||t.userAgent||"",i=-1!==e.indexOf("MSIE "),r=-1!==e.indexOf("Trident/");return i||r}(e))return!0;if(t in WI)return WI[t];const o=`#extension GL_${i[0]} : ${e.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const l=n.getShaderParameter(a,35713);return n.deleteShader(a),WI[t]=l,l}function kS(n,t){return(t=Array.isArray(t)?t:[t]).every(e=>function(n,t){const e=GI[t];La(e,t);const i=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&e[1]||e[0],r="string"==typeof i?Boolean(n.getExtension(i)):i;return La(!1===r||!0===r),r}(n,e))}function xm(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const G5=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],vhe=[...G5,[xm("attribute"),"in $1"],[xm("varying"),"out $1"]],yhe=[...G5,[xm("varying"),"in $1"]],W5=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],bhe=[...W5,[xm("in"),"attribute $1"],[xm("out"),"varying $1"]],whe=[...W5,[xm("in"),"varying $1"]],qI="gl_FragColor",YI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Che=/void\s+main\s*\([^)]*\)\s*\{\n?/;function FS(n,t){for(const[e,i]of t)n=n.replace(e,i);return n}const Ahe=`\n\n${PS}\n\n`,q5={[db]:"vertex",fs:"fragment"};function Y5(n,{id:t,source:e,type:i,modules:r,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:u}){La("string"==typeof e,"shader source must be a string");const h=i===db,p=e.split("\n");let g=100,m="",v=e;0===p[0].indexOf("#version ")?(g=300,m=p[0],v=p.slice(1).join("\n")):m=`#version ${g}`;const y={};r.forEach(U=>{Object.assign(y,U.getDefines())}),Object.assign(y,s);let C=c?`${m}\n${function({id:n,source:t,type:e}){return n&&"string"==typeof n&&-1===t.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${q5[e]}\n\n`:""}({id:t,source:e,type:i})}\n${function({type:n}){return`\n#define SHADER_TYPE_${q5[n].toUpperCase()}\n`}({type:i})}\n${function(n){switch(function(n){const t=n.getExtension("WEBGL_debug_renderer_info"),e=n.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),i=n.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:phe(e,i),vendor:e,renderer:i,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n"}}(n)}\n${function(n,t,e){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return kS(n,ip.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),kS(n,ip.GLSL_DERIVATIVES)&&$5(n,ip.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),kS(n,ip.GLSL_FRAG_DATA)&&$5(n,ip.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),kS(n,ip.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n)}\n${function(n={}){let t=0,e="";for(const i in n){0===t&&(e+="\n// APPLICATION DEFINES\n"),t++;const r=n[i];(r||Number.isFinite(r))&&(e+=`#define ${i.toUpperCase()} ${n[i]}\n`)}return 0===t&&(e+="\n"),e}(y)}\n${h?"":"precision highp float;\n\n"}\n`:`${m}\n`;const w=function(n){const t={vs:{},fs:{}};return n.forEach(e=>{let i;"string"!=typeof e?(i=e,e=i.hook):i={},e=e.trim();const[r,s]=e.split(":"),o=e.replace(/\(.+/,"");t[r][o]=Object.assign(i,{signature:s})}),t}(o),A={},k={},B={};for(const U in a){const K="string"==typeof a[U]?{injection:a[U],order:0}:a[U],ae=U.match(/^(v|f)s:(#)?([\w-]+)$/);if(ae){const ne=ae[3];ae[2]?"decl"===ne?k[U]=[K]:B[U]=[K]:A[U]=[K]}else B[U]=[K]}for(const U of r){u&&U.checkDeprecations(v,u),C+=U.getModuleSource(i,g);const ae=U.injections[i];for(const de in ae){const ne=de.match(/^(v|f)s:#([\w-]+)$/);if(ne){const ve="decl"===ne[2]?k:B;ve[de]=ve[de]||[],ve[de].push(ae[de])}else A[de]=A[de]||[],A[de].push(ae[de])}}return C+=Ahe,C=V5(C,i,k),C+=function(n,t){let e="";for(const i in n){const r=n[i];if(e+=`void ${r.signature} {\n`,r.header&&(e+=`  ${r.header}`),t[i]){const s=t[i];s.sort((o,a)=>o.order-a.order);for(const o of s)e+=`  ${o.injection}\n`}r.footer&&(e+=`  ${r.footer}`),e+="}\n"}return e}(w[i],A),C+=v,C=V5(C,i,B),C=function(n,t,e){switch(t){case 300:return e?FS(n,vhe):function(n){const t=(n=FS(n,yhe)).match(YI);if(t){const e=t[1];n=n.replace(new RegExp(`\\b${qI}\\b`,"g"),e)}else{const e="fragmentColor";n=n.replace(Che,i=>`out vec4 ${e};\n${i}`).replace(new RegExp(`\\b${qI}\\b`,"g"),e)}return n}(n);case 100:return e?FS(n,bhe):function(n){const t=(n=FS(n,whe)).match(YI);if(t){const e=t[1];n=n.replace(YI,"").replace(new RegExp(`\\b${e}\\b`,"g"),qI)}return n}(n);default:throw new Error(`unknown GLSL version ${t}`)}}(C,l?100:g,h),C}function Dhe(n){return function(e){const i={};for(const r of n){const s=r.getUniforms(e,i);Object.assign(i,s)}return i}}const Fhe={5126:sr.bind(null,"uniform1fv",Ba,1,uo),35664:sr.bind(null,"uniform2fv",Ba,2,uo),35665:sr.bind(null,"uniform3fv",Ba,3,uo),35666:sr.bind(null,"uniform4fv",Ba,4,uo),5124:sr.bind(null,"uniform1iv",bh,1,uo),35667:sr.bind(null,"uniform2iv",bh,2,uo),35668:sr.bind(null,"uniform3iv",bh,3,uo),35669:sr.bind(null,"uniform4iv",bh,4,uo),35670:sr.bind(null,"uniform1iv",bh,1,uo),35671:sr.bind(null,"uniform2iv",bh,2,uo),35672:sr.bind(null,"uniform3iv",bh,3,uo),35673:sr.bind(null,"uniform4iv",bh,4,uo),35674:sr.bind(null,"uniformMatrix2fv",Ba,4,ld),35675:sr.bind(null,"uniformMatrix3fv",Ba,9,ld),35676:sr.bind(null,"uniformMatrix4fv",Ba,16,ld),35678:$s,35680:$s,5125:sr.bind(null,"uniform1uiv",NS,1,uo),36294:sr.bind(null,"uniform2uiv",NS,2,uo),36295:sr.bind(null,"uniform3uiv",NS,3,uo),36296:sr.bind(null,"uniform4uiv",NS,4,uo),35685:sr.bind(null,"uniformMatrix2x3fv",Ba,6,ld),35686:sr.bind(null,"uniformMatrix2x4fv",Ba,8,ld),35687:sr.bind(null,"uniformMatrix3x2fv",Ba,6,ld),35688:sr.bind(null,"uniformMatrix3x4fv",Ba,12,ld),35689:sr.bind(null,"uniformMatrix4x2fv",Ba,8,ld),35690:sr.bind(null,"uniformMatrix4x3fv",Ba,12,ld),35678:$s,35680:$s,35679:$s,35682:$s,36289:$s,36292:$s,36293:$s,36298:$s,36299:$s,36300:$s,36303:$s,36306:$s,36307:$s,36308:$s,36311:$s},Nhe={},Lhe={},Bhe={},X5=[0];function XI(n,t,e,i){1===t&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(X5[0]=n,n=X5);const r=n.length;if(r%t&&_t.warn(`Uniform size should be multiples of ${t}`,n)(),n instanceof e)return n;let s=i[r];s||(s=new e(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Ba(n,t){return XI(n,t,Float32Array,Nhe)}function bh(n,t){return XI(n,t,Int32Array,Lhe)}function NS(n,t){return XI(n,t,Uint32Array,Bhe)}function K5(n,t,e){const i=Fhe[e.type];if(!i)throw new Error(`Unknown GLSL uniform type ${e.type}`);return i().bind(null,n,t)}function Vhe(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const e=n.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function zhe(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const t=Math.min(n.length,16);for(let e=0;e<t;++e)if(!Number.isFinite(n[e]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Sm||n instanceof Mm)||n instanceof ds&&Boolean(n.texture)}function Uhe(n,t,e){if(Array.isArray(e)||ArrayBuffer.isView(e))if(n[t]){const i=n[t];for(let r=0,s=e.length;r<s;++r)i[r]=e[r]}else n[t]=e.slice();else n[t]=e}function $s(){let n=null;return(t,e,i)=>{const r=n!==i;return r&&(t.uniform1i(e,i),n=i),r}}function sr(n,t,e,i){let r=null,s=null;return(o,a,l)=>{const c=t(l,e),u=c.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{tt(s===u,"Uniform length cannot change.");for(let p=0;p<u;++p)if(c[p]!==r[p]){h=!0;break}}return h&&(i(o,n,a,c),r.set(c)),h}}function uo(n,t,e,i){n[t](e,i)}function ld(n,t,e,i){n[t](e,!1,i)}function LS(n,t="unnamed"){const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:t}function Q5(n,t){let e="";for(let i=0;i<t.length;i++){const r=t[i];if((n[i+3]||n[i+2]||n[i+1])&&(e+=`${r}\n`,n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0;e+=J5(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,l)}}return e}function J5(n,t){let e="";for(let i=0;i<t;++i)e+=" ";return`${e}${n}`}class hb extends rd{static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return tt(!1),"unknown"}}constructor(t,e){ES(t),tt("string"==typeof e.source,"Shader: GLSL source code must be a JavaScript string"),super(t,{id:LS(e.source,null)||e.id||iu(`unnamed ${hb.getTypeName(e.shaderType)}`)}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize({source:t}){const e=LS(t,null);e&&(this.id=iu(e)),this._compile(t)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return`${hb.getTypeName(this.shaderType)}:${this.id}`}getName(){return LS(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(t=this.source){if(t.startsWith("#version ")||(t=`#version 100\n${t}`),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function(n,t,e,i){const r=n.split(/\r?\n/),s={},o={},a=i||LS(t)||"(unnamed)",l=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(e)} shader ${a}`;for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const p=h.split(":"),g=p[0],m=parseInt(p[2],10);if(isNaN(m))throw new Error(`GLSL compilation error in ${l}: ${n}`);"WARNING"!==g?s[m]=h:o[m]=h}const c=function(n,t=1,e=": "){const i=n.split(/\r?\n/),r=String(i.length+t-1).length;return i.map((s,o)=>{const a=String(o+t);return J5(a,r-a.length)+e+s})}(t);return{shaderName:l,errors:Q5(s,c),warnings:Q5(o,c)}}(i,this.source,this.shaderType,this.id);throw _t.error(`GLSL compilation errors in ${r}\n${s}`)(),_t.warn(`GLSL compilation warnings in ${r}\n${o}`)(),new Error(`GLSL compilation errors in ${r}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class KI extends hb{constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ZI extends hb{constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const hs=5126,fb=5124,pb=5125,QI={[hs]:[hs,1,"float"],35664:[hs,2,"vec2"],35665:[hs,3,"vec3"],35666:[hs,4,"vec4"],[fb]:[fb,1,"int"],35667:[fb,2,"ivec2"],35668:[fb,3,"ivec3"],35669:[fb,4,"ivec4"],[pb]:[pb,1,"uint"],36294:[pb,2,"uvec2"],36295:[pb,3,"uvec3"],36296:[pb,4,"uvec4"],35670:[hs,1,"bool"],35671:[hs,2,"bvec2"],35672:[hs,3,"bvec3"],35673:[hs,4,"bvec4"],35674:[hs,8,"mat2"],35685:[hs,8,"mat2x3"],35686:[hs,8,"mat2x4"],35675:[hs,12,"mat3"],35687:[hs,12,"mat3x2"],35688:[hs,12,"mat3x4"],35676:[hs,16,"mat4"],35689:[hs,16,"mat4x2"],35690:[hs,16,"mat4x3"]};function s4(n){const t=QI[n];if(!t)return null;const[e,i]=t;return{type:e,components:i}}function o4(n,t){switch(n){case 5120:case 5121:case 5122:case 5123:n=hs}for(const e in QI){const[i,r,s]=QI[e];if(i===n&&r===t)return{glType:e,name:s}}return null}class Cfe{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,i=e.getProgramParameter(t.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=e.getActiveAttrib(t.handle,r),l=e.getAttribLocation(t.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(t){const{gl:e}=t;if(!Rn(e))return;const i=e.getProgramParameter(t.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(t,e,i,r){const{type:s,components:o}=s4(i),a={type:s,size:r*o};this._inferProperties(t,e,a);const l={location:t,name:e,accessor:new ua(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,e,i){/instance/i.test(e)&&(i.divisor=1)}_addVarying(t,e,i,r){const{type:s,components:o}=s4(i),l={location:t,name:e,accessor:new ua({type:s,size:r*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Efe=35981,Sfe=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class l4 extends rd{constructor(t,e={}){super(t,e),this.stubRemovedMethods("Program","v6.0",Sfe),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(t={}){const{hash:e,vs:i,fs:r,varyings:s,bufferMode:o=Efe}=t;return this.hash=e||"",this.vs="string"==typeof i?new KI(this.gl,{id:`${t.id}-vs`,source:i}):i,this.fs="string"==typeof r?new ZI(this.gl,{id:`${t.id}-fs`,source:r}):r,tt(this.vs instanceof KI),tt(this.fs instanceof ZI),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Fo(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Cfe(this),this.setProps(t)}delete(t={}){return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw({logPriority:t,drawMode:e=4,vertexCount:i,offset:r=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:p,framebuffer:g,parameters:m={},uniforms:v,samplers:y}){if((v||y)&&(_t.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(v||{})),_t.priority>=t){const C=g?g.id:"default",w=`mode=${yh(this.gl,e)} verts=${i} instances=${c} indexType=${yh(this.gl,l)} isInstanced=${u} isIndexed=${a} Framebuffer=${C}`;_t.log(t,w)()}return tt(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||u&&0===c||(h.bindForDraw(i,c,()=>{if(void 0!==g&&(m=Object.assign({},m,{framebuffer:g})),p){const C=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return tt(!1),0}}(e);p.begin(C)}this._bindTextures(),dc(this.gl,m,()=>{a&&u?this.gl2.drawElementsInstanced(e,i,l,r,c):a&&Rn(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(e,s,o,i,l,r):a?this.gl.drawElements(e,i,l,r):u?this.gl2.drawArraysInstanced(e,r,i,c):this.gl.drawArrays(e,r,i)}),p&&p.end()}),0))}setUniforms(t={}){_t.priority>=2&&function(n,t,e){for(const i in n){const r=n[i];if((!e||Boolean(e[i]))&&!zhe(r))throw t=t?`${t} `:"",console.error(`${t} Bad uniform ${i}`,r),new Error(`${t} Bad uniform ${i}`)}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const i=t[e],r=this._uniformSetters[e];if(r){let s=i,o=!1;if(s instanceof ds&&(s=s.texture),s instanceof Sm)if(o=this.uniforms[e]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=r;a.bind(l),s=l,this._textureUniforms[e]=a}else s=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(s)||o)&&Uhe(this.uniforms,e,i)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const i=this._textureUniforms[e];i.update(),t=t&&i.loaded}return t}_bindTextures(){for(const t in this._textureUniforms)this._textureUniforms[t].bind(this._uniformSetters[t].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),i={};for(const r of e)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new KI({handle:r});break;case 35632:i.fs=new ZI({handle:r})}return i}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const e=this._getName();this.id=iu(e)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?`${t}-program`:"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),_t.time(4,`linkProgram for ${this._getName()}`)(),t.linkProgram(this.handle),_t.timeEnd(4,`linkProgram for ${this._getName()}`)(),t.debug||_t.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${t.getProgramInfoLog(this.handle)}`);if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${t.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const i=this.gl.getActiveUniform(this.handle,e),{name:r}=Vhe(i.name);let s=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=K5(t,s,i),i.size>1)for(let o=0;o<i.size;o++)s=t.getUniformLocation(this.handle,`${r}[${o}]`),this._uniformSetters[`${r}[${o}]`]=K5(t,s,i)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class gb{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new gb(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(e=>e.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==e),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(t={}){const{vs:e="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=t,c=this._getModuleList(t.modules),u=this._getHash(e),h=this._getHash(i),p=c.map(A=>this._getHash(A.name)).sort(),g=o.map(A=>this._getHash(A)),m=Object.keys(r).sort(),v=Object.keys(s).sort(),y=[],C=[];for(const A of m)y.push(this._getHash(A)),y.push(this._getHash(r[A]));for(const A of v)C.push(this._getHash(A)),C.push(this._getHash(s[A]));const w=`${u}/${h}D${y.join("/")}M${p.join("/")}I${C.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[w]){const A=function(n,t){const{vs:e,fs:i}=t,r=ohe(t.modules||[]);return{gl:n,vs:Y5(n,Object.assign({},t,{source:e,type:db,modules:r})),fs:Y5(n,Object.assign({},t,{source:i,type:"fs",modules:r})),getUniforms:Dhe(r)}}(this.gl,{vs:e,fs:i,modules:c,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[w]=new l4(this.gl,{hash:w,vs:A.vs,fs:A.fs,varyings:o,bufferMode:a}),this._getUniforms[w]=A.getUniforms||(k=>{}),this._useCounts[w]=0}return this._useCounts[w]++,this._programCache[w]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(t=[]){const e=new Array(this._defaultModules.length+t.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;e[r++]=a,i[l]=!0}for(let s=0,o=t.length;s<o;++s){const a=t[s],l=a.name;i[l]||(e[r++]=a,i[l]=!0)}return e.length=r,e}}let VS=null;class Va extends rd{static isSupported(t,e={}){return!e.constantAttributeZero||Rn(t)||"Chrome"===function(n){if(!cI())return"Node";if(dU(n))return"Electron";const e=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(e.indexOf("Edge")>-1)return"Edge";const i=-1!==e.indexOf("MSIE "),r=-1!==e.indexOf("Trident/");return i||r?"IE":eb.chrome?"Chrome":eb.safari?"Safari":eb.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new Va(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return Va.MAX_ATTRIBUTES=Va.MAX_ATTRIBUTES||t.getParameter(34921),Va.MAX_ATTRIBUTES}static setConstant(t,e,i){switch(i.constructor){case Float32Array:Va._setConstantFloatArray(t,e,i);break;case Int32Array:Va._setConstantIntArray(t,e,i);break;case Uint32Array:Va._setConstantUintArray(t,e,i);break;default:tt(!1)}}constructor(t,e={}){super(t,Object.assign({},e,{id:e.id||e.program&&e.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Va.getMaxAttributes(this.gl)}initialize(t={}){return this.setProps(t)}setProps(t){return this}setElementBuffer(t=null,e={}){return tt(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,e,i){if(34963===e.target)return this.setElementBuffer(e,i);const{size:r,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=i,{gl:h,gl2:p}=this;return t=Number(t),this.bind(()=>{h.bindBuffer(34962,e.handle),c?(tt(Rn(h)),p.vertexAttribIPointer(t,r,s,o,a)):h.vertexAttribPointer(t,r,s,l,o,a),h.enableVertexAttribArray(t),p.vertexAttribDivisor(t,u||0)}),this}enable(t,e=!0){return!e&&0===t&&!Va.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,e){const i=this._normalizeConstantArrayValue(e),r=i.byteLength*t,s=i.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new Oi(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function(n,t){return new n(function(n){return(!VS||VS.byteLength<n)&&(VS=new ArrayBuffer(n)),VS}(n.BYTES_PER_ELEMENT*t),0,t)}(e.constructor,s);(function({target:n,source:t,start:e=0,count:i=1}){const r=t.length,s=i*r;let o=0;for(let a=e;o<r;o++)n[a++]=t[o];for(;o<s;)o<s-o?(n.copyWithin(e+o,e,e+o),o*=2):(n.copyWithin(e+o,e,e+s-o),o=s)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}static _setConstantFloatArray(t,e,i){switch(i.length){case 1:t.vertexAttrib1fv(e,i);break;case 2:t.vertexAttrib2fv(e,i);break;case 3:t.vertexAttrib3fv(e,i);break;case 4:t.vertexAttrib4fv(e,i);break;default:tt(!1)}}static _setConstantIntArray(t,e,i){switch(tt(Rn(t)),i.length){case 1:t.vertexAttribI1iv(e,i);break;case 2:t.vertexAttribI2iv(e,i);break;case 3:t.vertexAttribI3iv(e,i);break;case 4:t.vertexAttribI4iv(e,i);break;default:tt(!1)}}static _setConstantUintArray(t,e,i){switch(tt(Rn(t)),i.length){case 1:t.vertexAttribI1uiv(e,i);break;case 2:t.vertexAttribI2uiv(e,i);break;case 3:t.vertexAttribI3uiv(e,i);break;case 4:t.vertexAttribI4uiv(e,i);break;default:tt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,{location:e}){return tt(Number.isFinite(e)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(e,t);default:return this.gl.getVertexAttrib(e,t)}})}}const Ife=/^(.+)__LOCATION_([0-9]+)$/,Pfe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Rfe{constructor(t,e={}){this.id=e.id||e.program&&e.program.id,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Va(t),$U(this,"VertexArray","v6.0",Pfe),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(t={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const e in t)this._setAttribute(e,t[e]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(t=null,e={}){return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e,i={}){if(34963===e.target)return this.setElementBuffer(e,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(t,e,e.accessor,i);return r>=0&&(this.values[r]=e,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,s)),this}setConstant(t,e,i={}){const{location:r,accessor:s}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},i));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Oi(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Oi&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof Oi&&this.setBuffer(t,e)}}),this}bindForDraw(t,e,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,e),r=i()}),r}_resolveLocationAndAccessor(t,e,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,_t.once(3,()=>`unused value ${t} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const u=ua.resolve(l.accessor,this.accessors[o]||{},i,r),{size:h,type:p}=u;return tt(Number.isFinite(h)&&Number.isFinite(p)),{location:o,accessor:u}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const i=Ife.exec(t),r=i?i[1]:t,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof Oi)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Oi)this.setBuffer(t,e[0],e[1]);else if(ArrayBuffer.isView(e)||Array.isArray(e))this.setConstant(t,e);else{if(!(e.buffer instanceof Oi))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(t,e.buffer,e)}}_setConstantAttributes(t,e){const i=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(t,e){if(Va.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const i=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(t,e){Va.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const i=this.values[e],r=this.accessors[e];if(!i)return;const{divisor:s}=r,o=s>0;if(t.isInstanced=t.isInstanced||o,i instanceof Oi){const a=i;if(o){const l=a.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=a.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(t=null,e={}){return _t.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function mb(n,t={}){const{isInteger:i=!1}=t;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,t){const{maxElts:e=16,size:i=1}=t;let r="[";for(let o=0;o<n.length&&o<e;++o)o>0&&(r+=","+(o%i==0?" ":"")),r+=mb(n[o],t);return`${r}${n.length>e?"...":"]"}`}(n,t);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function c4(n,t,e,i){const{gl:r}=n;if(!t)return{[i]:"null","Format ":"N/A"};let c,u,h,s="NOT PROVIDED",o=1,a=0,l=0;if(e&&(s=e.type,o=e.size,s=String(s).replace("Array",""),c=-1!==s.indexOf("nt")),t instanceof Oi){const p=t,{data:g,changed:m}=p.getDebugData();let v;return u=m?"*":"",h=g,l=p.byteLength,a=l/g.BYTES_PER_ELEMENT/o,e?v=`${e.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${yh(r,s)})`:(c=!0,v=`${l} bytes`),{[i]:`${u}${mb(h,{size:o,isInteger:c})}`,"Format ":v}}return h=t,o=t.length,s=String(t.constructor.name).replace("Array",""),c=-1!==s.indexOf("nt"),{[i]:`${mb(h,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function Nfe(n,t){const{type:e,size:i}=t,r=o4(e,i);return r?`${n} (${r.name})`:n}function u4({header:n="Uniforms",program:t,uniforms:e,undefinedOnly:i=!1}){tt(t);const s=".*Matrix",a={},l=Object.keys(t._uniformSetters).sort();let c=0;for(const p of l)!p.match(".*_.*")&&!p.match(s)&&JI({table:a,header:n,uniforms:e,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)p.match(s)&&JI({table:a,header:n,uniforms:e,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)a[p]||JI({table:a,header:n,uniforms:e,uniformName:p,undefinedOnly:i})&&c++;let u=0;const h={};if(!i)for(const p in e){const g=e[p];a[p]||(u++,h[p]={Type:`NOT USED: ${g}`,[n]:mb(g)})}return{table:a,count:c,unusedTable:h,unusedCount:u}}function JI({table:n,header:t,uniforms:e,uniformName:i,undefinedOnly:r}){const s=e[i],o=function(n){return null!=n}(s);return!(r&&o||(n[i]={[t]:o?mb(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function d4(n){const{type:t,size:e}=n.accessor,i=o4(t,e);return i?`${i.name} ${n.name}`:n.name}const Vfe={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function zfe(n,t){const{attributeMap:e=Vfe}=t||{};return e&&e[n]||n}function Ufe(n,t){let e;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":e="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":e="vectors"}switch(e){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}tt(Number.isFinite(t.size),`attribute ${n} needs size`)}const h4=()=>{},Gfe={};class jS{constructor(t,e={}){const{id:i=iu("model")}=e;tt(CS(t)),this.id=i,this.gl=t,this.id=e.id||iu("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||gb.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=t;this.programProps={program:e,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},tt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=t;this.programProps={program:e,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return tt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return tt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,t,e){const i={};let r=t.indices;for(const s in t.attributes){const o=t.attributes[s],a=zfe(s,undefined);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const l=o.value,c=Sd({},o);delete c.value,i[a]=[new Oi(n,l),c],Ufe(s,c)}}if(r){const s=r.value||r;tt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Oi(n,{data:s,target:34963}),o]}return i}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(t={}){if(Cm(t))return this;const e={};for(const i in t){const r=t[i];e[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(t={}){return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return MI(this.program.gl,t),this}draw(t={}){this._checkProgram();const{moduleSettings:e=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=t;let c;this.setAttributes(s),this.updateModuleSettings(e),this.setUniforms(r),_t.priority>=2&&(c=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:p=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&_t.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:y}=this,{onBeforeRender:C=h4,onAfterRender:w=h4}=this.props;C(),this.program.setUniforms(this.uniforms);const A=this.program.draw(Object.assign(Gfe,t,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:p,isInstanced:v,instanceCount:y,offset:h?g:0}));return w(),_t.priority>=2&&this._logDrawCallEnd(c,l,i),A}transform(t={}){const{discard:e=!0,feedbackBuffers:i,unbindModels:r=[]}=t;let{parameters:s}=t;i&&this._setFeedbackBuffers(i),e&&(s=Object.assign({},s,{35977:e})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(t={}){return _t.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:e}=this.programProps;if(e)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;e=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}tt(e instanceof l4,"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Rfe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Oi&&e.delete()}}_setAnimationProps(t){this.animated&&tt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(t={}){if(Cm(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new F5(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),_t.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:_t.level<=2})(),t}_logDrawCallEnd(t,e,i,r){if(void 0===t)return;const s=function({vertexArray:n,header:t="Attributes"}){if(!n.configuration)return{};const e={};n.elements&&(e.ELEMENT_ARRAY_BUFFER=c4(n,n.elements,null,t));const i=n.values;for(const r in i){const s=n._getAttributeInfo(r);if(s){let o=`${r}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${r}: ${Nfe(s.name,a)}`),e[o]=c4(n,i[r],a,t)}}return e}({vertexArray:e,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=u4({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:u}=u4({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&_t.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&_t.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(n){const t={},e=`Accessors for ${n.id}`;for(const i of n.attributeInfos)i&&(t[`in ${d4(i)}`]={[e]:JSON.stringify(i.accessor)});for(const i of n.varyingInfos)i&&(t[`out ${d4(i)}`]={[e]:JSON.stringify(i.accessor)});return t}(this.vertexArray.configuration);_t.table(t,s)(),_t.table(t,o)(),_t.table(t+1,h)(),r&&r.log({logLevel:2,message:`Rendered to ${r.id}`}),_t.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class eP{static isSupported(t){return Rn(t)}constructor(t,e={}){this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:i}=this;t&&t.delete(),e&&e.delete(),i&&i.delete()}run(t={}){const{clearRenderTarget:e=!0}=t,i=this._updateDrawOptions(t);e&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of e)t=t||i.swap();tt(t,"Nothing to swap")}getBuffer(t=null){return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(t={}){const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of e){const r=i.getData(t);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(t={}){"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of e)i.update(t)}_initialize(t={}){const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new jS(e,Object.assign({},t,{fs:t.fs||k5({version:N5(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)e=r.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(n){return!(Cm(n.feedbackBuffers)&&Cm(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(e)&&(this.bufferTransform=new jde(t,e)),function(n){return!(Cm(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(e)&&(this.textureTransform=new ehe(t,e)),tt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)e=Object.assign(e,r.getDrawOptions(e));return e}}function zS(){}var Yfe={onStart:zS,onUpdate:zS,onInterrupt:zS,onEnd:zS},_b=function(){function n(t){wt(this,n),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return Tt(n,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},Yfe,e),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var e=this.timeline,i=this.settings;this._handle=e.addChannel({delay:e.getTime(),duration:i.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),n}();function f4(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Xfe(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?f4(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):f4(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function p4(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var Qfe=function(){function n(t){var e=t.gl,i=t.attribute,r=t.timeline;wt(this,n),this.gl=e,this.type="interpolation",this.transition=new _b(r),this.attribute=i,this.attributeInTransition=new LI(e,i.settings),this.currentStartIndices=i.startIndices,this.currentLength=0,this.transform=function(n,t){var e=x5(t.size);return new eP(n,{vs:Jfe,defines:{ATTRIBUTE_TYPE:e},varyings:["vCurrent"]})}(e,i);var s={byteLength:0,usage:35050};this.buffers=[new Oi(e,s),new Oi(e,s)]}return Tt(n,[{key:"start",value:function(e,i){if(e.duration<=0)this.transition.cancel();else{var s=this.buffers,o=this.attribute;D5(s);var c,a={numInstances:i,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},l=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return p4(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return p4(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(s);try{for(l.s();!(c=l.n()).done;)O5(Xfe({buffer:c.value},a))}catch(h){l.e(h)}finally{l.f()}this.currentStartIndices=o.startIndices,this.currentLength=NI(o,i),this.attributeInTransition.update({buffer:s[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:s[0],aTo:T5(0,o)},feedbackBuffers:{vCurrent:s[1]}})}}},{key:"update",value:function(){var e=this.transition.update();if(e){var i=this.transition,s=i.settings,l=(0,s.easing)(i.time/s.duration);this.transform.run({uniforms:{time:l}})}return e}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),n}(),Jfe="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function g4(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function tpe(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?g4(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):g4(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function m4(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var lpe={interpolation:Qfe,spring:function(){function n(t){var e=t.gl,i=t.attribute,r=t.timeline;wt(this,n),this.gl=e,this.type="spring",this.transition=new _b(r),this.attribute=i,this.attributeInTransition=new LI(e,Object.assign({},i.settings,{normalized:!1})),this.currentStartIndices=i.startIndices,this.currentLength=0,this.texture=function(n){return new Na(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(n,t){return new ds(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Yt({},36064,t)})}(e,this.texture),this.transform=function(n,t,e){var i=x5(t.size);return new eP(n,{framebuffer:e,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,i,this.framebuffer);var s={byteLength:0,usage:35050};this.buffers=[new Oi(e,s),new Oi(e,s),new Oi(e,s)]}return Tt(n,[{key:"start",value:function(e,i){var c,s=this.buffers,o=this.attribute,a={numInstances:i,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},l=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return m4(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m4(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(s);try{for(l.s();!(c=l.n()).done;)O5(tpe({buffer:c.value},a))}catch(h){l.e(h)}finally{l.f()}this.currentStartIndices=o.startIndices,this.currentLength=NI(o,i),this.attributeInTransition.update({buffer:s[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:T5(0,o)}})}},{key:"update",value:function(){var e=this.buffers,i=this.transform,r=this.framebuffer,s=this.transition;return!!s.update()&&(i.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),i.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.settings.stiffness,damping:s.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),D5(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),SS(r)[0]>0||s.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),n}()},cpe=function(){function n(t,e){var i=e.id,r=e.timeline;wt(this,n),this.id=i,this.gl=t,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=eP.isSupported(t)}return Tt(n,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var i=e.attributes,r=e.transitions,s=e.numInstances;for(var o in this.numInstances=s||1,i){var a=i[o],l=a.getTransitionSetting(r);!l||this._updateAttribute(o,a,l)}for(var c in this.transitions){var u=i[c];(!u||!u.getTransitionSetting(r))&&this._removeTransition(c)}}},{key:"hasAttribute",value:function(e){var i=this.transitions[e];return i&&i.inProgress}},{key:"getAttributes",value:function(){var e={};for(var i in this.transitions){var r=this.transitions[i];r.inProgress&&(e[i]=r.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var e in this.transitions)this.transitions[e].update()&&(this.needsRedraw=!0);var r=this.needsRedraw;return this.needsRedraw=!1,r}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,i,r){var s=this.transitions[e],o=!s||s.type!==r.type;if(o){if(!this.isSupported)return void ei.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();s&&this._removeTransition(e);var a=lpe[r.type];a?this.transitions[e]=new a({attribute:i,timeline:this.timeline,gl:this.gl}):(ei.error("unsupported transition type '".concat(r.type,"'"))(),o=!1)}(o||i.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}]),n}(),_4="attributeManager.invalidate",upe="attributeManager.updateStart",dpe="attributeManager.updateEnd",gpe=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.id,r=void 0===i?"attribute-manager":i,s=e.stats,o=e.timeline;wt(this,n),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=s,this.attributeTransitionManager=new cpe(t,{id:"".concat(r,"-transitions"),timeline:o}),Object.seal(this)}return Tt(n,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},i=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,i&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(e,i){this._add(e,i)}},{key:"addInstanced",value:function(e,i){this._add(e,i,{instanced:1})}},{key:"remove",value:function(e){for(var i=0;i<e.length;i++){var r=e[i];void 0!==this.attributes[r]&&(this.attributes[r].delete(),delete this.attributes[r])}}},{key:"invalidate",value:function(e,i){var r=this._invalidateTrigger(e,i);co(_4,this,e,r)}},{key:"invalidateAll",value:function(e){for(var i in this.attributes)this.attributes[i].setNeedsUpdate(i,e);co(_4,this,"all")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.data,r=e.numInstances,s=e.startIndices,o=void 0===s?null:s,a=e.transitions,l=e.props,c=void 0===l?{}:l,u=e.buffers,h=void 0===u?{}:u,p=e.context,g=void 0===p?{}:p,m=!1;for(var v in co(upe,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var y=this.attributes[v],C=y.settings.accessor;y.startIndices=o,c[v]&&ei.removed("props.".concat(v),"data.attributes.".concat(v))(),y.setExternalBuffer(h[v])||y.setBinaryValue(h[C],i.startIndices)||!h[C]&&y.setConstantValue(c[C])||y.needsUpdate()&&(m=!0,this._updateAttribute({attribute:y,numInstances:r,data:i,props:c,context:g})),this.needsRedraw|=y.needsRedraw()}m&&co(dpe,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:a})}},{key:"updateTransition",value:function(){var i=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||i,i}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},i=this.attributes,r=this.attributeTransitionManager,s=Object.assign({},r.getAttributes());for(var o in i){var a=i[o];a.needsRedraw(e)&&!r.hasAttribute(o)&&(s[o]=a)}return s}},{key:"getShaderAttributes",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=this.getAttributes());var r={};for(var s in e)i[s]||Object.assign(r,e[s].getShaderAttributes());return r}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i&&ei.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var s={};for(var o in e){var a=e[o],l=this._createAttribute(o,a,r);s[o]=l}Object.assign(this.attributes,s),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,i,r){return new LI(this.gl,Object.assign({},i,{id:e,constant:i.constant||!1,isIndexed:i.isIndexed||i.elements,size:i.elements?1:i.size,value:i.value||null,divisor:i.instanced||r.instanced?1:i.divisor}))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,i={},r=function(a){e.attributes[a].getUpdateTriggers().forEach(function(c){i[c]||(i[c]=[]),i[c].push(a)})};for(var s in this.attributes)r(s);this.updateTriggers=i}},{key:"_invalidateTrigger",value:function(e,i){var r=this.attributes,o=this.updateTriggers[e];return o&&o.forEach(function(a){var l=r[a];l&&l.setNeedsUpdate(l.id,i)}),o}},{key:"_updateAttribute",value:function(e){var i=e.attribute,r=e.numInstances;co("attribute.updateStart",i),i.allocate(r)&&co("attribute.allocate",i,r),i.updateBuffer(e)&&(this.needsRedraw=!0,co("attribute.updateEnd",i,r))}}]),n}();function y4(n,t,e,i,r){var s=t-n;return(e-t)*r+-s*i+s+t}function b4(n,t){if(Array.isArray(n)){for(var e=0,i=0;i<n.length;i++){var r=n[i]-t[i];e+=r*r}return Math.sqrt(e)}return Math.abs(n-t)}function w4(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return C4(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C4(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function C4(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function E4(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function S4(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?E4(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):E4(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var Spe={interpolation:function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"_onUpdate",value:function(){var s=this.settings,o=s.fromValue,a=s.toValue,u=(0,s.easing)(this.time/s.duration);this._value=AS(o,a,u)}},{key:"value",get:function(){return this._value}}]),e}(_b),spring:function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"_onUpdate",value:function(){var r=this.settings,s=r.fromValue,o=r.toValue,c=this._prevValue,h=this._currValue,p=void 0===h?s:h,g=function(n,t,e,i,r){if(Array.isArray(e)){for(var s=[],o=0;o<e.length;o++)s[o]=y4(n[o],t[o],e[o],i,r);return s}return y4(n,t,e,i,r)}(void 0===c?s:c,p,o,r.damping,r.stiffness),m=b4(g,o),v=b4(g,p);m<1e-5&&v<1e-5&&(g=o,this.end()),this._prevValue=p,this._currValue=g}},{key:"value",get:function(){return this._currValue}}]),e}(_b)},Mpe=function(){function n(t){wt(this,n),this.transitions=new Map,this.timeline=t}return Tt(n,[{key:"add",value:function(e,i,r,s){var o=this.transitions;if(o.has(e)){var a=o.get(e),l=a.value;i=void 0===l?a.settings.fromValue:l,this.remove(e)}if(s=A5(s)){var u=Spe[s.type];if(!u)return void ei.error("unsupported transition type '".concat(s.type,"'"))();var h=new u(this.timeline);h.start(S4(S4({},s),{},{fromValue:i,toValue:r})),o.set(e,h)}}},{key:"remove",value:function(e){var i=this.transitions;i.has(e)&&(i.get(e).cancel(),i.delete(e))}},{key:"update",value:function(){var r,e={},i=w4(this.transitions);try{for(i.s();!(r=i.n()).done;){var s=Br(r.value,2),o=s[0],a=s[1];a.update(),e[o]=a.value,a.inProgress||this.remove(o)}}catch(l){i.e(l)}finally{i.f()}return e}},{key:"clear",value:function(){var i,e=w4(this.transitions.keys());try{for(e.s();!(i=e.n()).done;)this.remove(i.value)}catch(s){e.e(s)}finally{e.f()}}},{key:"active",get:function(){return this.transitions.size>0}}]),n}(),hc={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},Ape=hc.COMPONENT;function Dpe(n,t){if(!n.transitions)return null;var e={},i=nP(n);for(var r in n.transitions){var s=i[r],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&tP(n[r],t[r],s)&&(e[r]=!0)}return e}function M4(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.newProps,e=n.oldProps,i=n.ignoreProps,r=void 0===i?{}:i,s=n.propTypes,o=void 0===s?{}:s,a=n.triggerName,l=void 0===a?"props":a;if(e===t)return null;if("object"!==$i(t)||null===t||"object"!==$i(e)||null===e)return"".concat(l," changed shallowly");for(var c=0,u=Object.keys(t);c<u.length;c++){var h=u[c];if(!(h in r)){if(!(h in e))return"".concat(l,".").concat(h," added");var p=tP(t[h],e[h],o[h]);if(p)return"".concat(l,".").concat(h," ").concat(p)}}for(var g=0,m=Object.keys(e);g<m.length;g++){var v=m[g];if(!(v in r)){if(!(v in t))return"".concat(l,".").concat(v," dropped");if(!Object.hasOwnProperty.call(t,v)){var y=tP(t[v],e[v],o[v]);if(y)return"".concat(l,".").concat(v," ").concat(y)}}}return null}function tP(n,t,e){var i=e&&e.equal;return i&&!i(n,t,e)||!i&&(i=n&&t&&n.equals)&&!i.call(n,t)?"changed deeply":i||t===n?null:"changed shallowly"}function Ppe(n,t){if(null===t)return"oldProps is null, initial diff";var e=t.extensions,i=n.extensions;if(i===e)return!1;if(i.length!==e.length)return!0;for(var r=0;r<i.length;r++)if(!i[r].equals(e[r]))return!0;return!1}function A4(n,t,e){var i=n.updateTriggers[e],r=t.updateTriggers[e];return M4({oldProps:r=null==r?{}:r,newProps:i=null==i?{}:i,triggerName:e})}function nP(n){var t=n[Ape],e=t&&t.constructor;return e?e._propTypes:{}}function Bpe(n,t){if(n===t)return!0;if(Array.isArray(n)){var e=n.length;if(!t||t.length!==e)return!1;for(var i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}return!1}function US(n){var e,t={};return function(i){for(var r in i)if(!Bpe(i[r],t[r])){e=n(i),t=i;break}return e}}function T4(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function jpe(n,t){if(!t)return n;var e=Object.assign({},n,t);if("defines"in t&&(e.defines=Object.assign({},n.defines,t.defines)),"modules"in t&&(e.modules=(n.modules||[]).concat(t.modules),t.modules.some(function(o){return"project64"===o.name}))){var i=e.modules.findIndex(function(o){return"project32"===o.name});i>=0&&e.modules.splice(i,1)}if("inject"in t)if(n.inject){var r=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?T4(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):T4(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}({},n.inject);for(var s in t.inject)r[s]=(r[s]||"")+t.inject[s];e.inject=r}else e.inject=t.inject;return e}function HS(n,t){var e=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],p=t[10],g=t[11],m=t[12],v=t[13],y=t[14],C=t[15],w=e*a-i*o,A=e*l-r*o,k=e*c-s*o,B=i*l-r*a,U=i*c-s*a,K=r*c-s*l,ae=u*v-h*m,de=u*y-p*m,ne=u*C-g*m,Se=h*y-p*v,ve=h*C-g*v,te=p*C-g*y,ie=w*te-A*ve+k*Se+B*ne-U*de+K*ae;return ie?(n[0]=(a*te-l*ve+c*Se)*(ie=1/ie),n[1]=(r*ve-i*te-s*Se)*ie,n[2]=(v*K-y*U+C*B)*ie,n[3]=(p*U-h*K-g*B)*ie,n[4]=(l*ne-o*te-c*de)*ie,n[5]=(e*te-r*ne+s*de)*ie,n[6]=(y*k-m*K-C*A)*ie,n[7]=(u*K-p*k+g*A)*ie,n[8]=(o*ve-a*ne+c*ae)*ie,n[9]=(i*ne-e*ve-s*ae)*ie,n[10]=(m*U-v*k+C*w)*ie,n[11]=(h*k-u*U-g*w)*ie,n[12]=(a*de-o*Se-l*ae)*ie,n[13]=(e*Se-i*de+r*ae)*ie,n[14]=(v*A-m*B-y*w)*ie,n[15]=(u*B-h*A+p*w)*ie,n):null}function ru(n,t,e){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=t[9],g=t[10],m=t[11],v=t[12],y=t[13],C=t[14],w=t[15],A=e[0],k=e[1],B=e[2],U=e[3];return n[0]=A*i+k*a+B*h+U*v,n[1]=A*r+k*l+B*p+U*y,n[2]=A*s+k*c+B*g+U*C,n[3]=A*o+k*u+B*m+U*w,n[4]=(A=e[4])*i+(k=e[5])*a+(B=e[6])*h+(U=e[7])*v,n[5]=A*r+k*l+B*p+U*y,n[6]=A*s+k*c+B*g+U*C,n[7]=A*o+k*u+B*m+U*w,n[8]=(A=e[8])*i+(k=e[9])*a+(B=e[10])*h+(U=e[11])*v,n[9]=A*r+k*l+B*p+U*y,n[10]=A*s+k*c+B*g+U*C,n[11]=A*o+k*u+B*m+U*w,n[12]=(A=e[12])*i+(k=e[13])*a+(B=e[14])*h+(U=e[15])*v,n[13]=A*r+k*l+B*p+U*y,n[14]=A*s+k*c+B*g+U*C,n[15]=A*o+k*u+B*m+U*w,n}function vb(n,t,e){var o,a,l,c,u,h,p,g,m,v,y,C,i=e[0],r=e[1],s=e[2];return t===n?(n[12]=t[0]*i+t[4]*r+t[8]*s+t[12],n[13]=t[1]*i+t[5]*r+t[9]*s+t[13],n[14]=t[2]*i+t[6]*r+t[10]*s+t[14],n[15]=t[3]*i+t[7]*r+t[11]*s+t[15]):(a=t[1],l=t[2],c=t[3],u=t[4],h=t[5],p=t[6],g=t[7],m=t[8],v=t[9],y=t[10],C=t[11],n[0]=o=t[0],n[1]=a,n[2]=l,n[3]=c,n[4]=u,n[5]=h,n[6]=p,n[7]=g,n[8]=m,n[9]=v,n[10]=y,n[11]=C,n[12]=o*i+u*r+m*s+t[12],n[13]=a*i+h*r+v*s+t[13],n[14]=l*i+p*r+y*s+t[14],n[15]=c*i+g*r+C*s+t[15]),n}function yb(n,t,e){var i=e[0],r=e[1],s=e[2];return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*s,n[9]=t[9]*s,n[10]=t[10]*s,n[11]=t[11]*s,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function x4(n,t,e){var i=Math.sin(e),r=Math.cos(e),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],p=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=s*r+c*i,n[5]=o*r+u*i,n[6]=a*r+h*i,n[7]=l*r+p*i,n[8]=c*r-s*i,n[9]=u*r-o*i,n[10]=h*r-a*i,n[11]=p*r-l*i,n}function D4(n,t,e){var i=Math.sin(e),r=Math.cos(e),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],p=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=s*r+c*i,n[1]=o*r+u*i,n[2]=a*r+h*i,n[3]=l*r+p*i,n[4]=c*r-s*i,n[5]=u*r-o*i,n[6]=h*r-a*i,n[7]=p*r-l*i,n}function O4(n,t,e,i,r){var o,s=1/Math.tan(t/2);return n[0]=s/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i),n}function I4(n,t){var e=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=n[6],c=n[7],u=n[8],h=n[9],p=n[10],g=n[11],m=n[12],v=n[13],y=n[14],C=n[15],w=t[0],A=t[1],k=t[2],B=t[3],U=t[4],K=t[5],ae=t[6],de=t[7],ne=t[8],Se=t[9],ve=t[10],te=t[11],ie=t[12],we=t[13],Q=t[14],Be=t[15];return Math.abs(e-w)<=qi*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(i-A)<=qi*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-k)<=qi*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(s-B)<=qi*Math.max(1,Math.abs(s),Math.abs(B))&&Math.abs(o-U)<=qi*Math.max(1,Math.abs(o),Math.abs(U))&&Math.abs(a-K)<=qi*Math.max(1,Math.abs(a),Math.abs(K))&&Math.abs(l-ae)<=qi*Math.max(1,Math.abs(l),Math.abs(ae))&&Math.abs(c-de)<=qi*Math.max(1,Math.abs(c),Math.abs(de))&&Math.abs(u-ne)<=qi*Math.max(1,Math.abs(u),Math.abs(ne))&&Math.abs(h-Se)<=qi*Math.max(1,Math.abs(h),Math.abs(Se))&&Math.abs(p-ve)<=qi*Math.max(1,Math.abs(p),Math.abs(ve))&&Math.abs(g-te)<=qi*Math.max(1,Math.abs(g),Math.abs(te))&&Math.abs(m-ie)<=qi*Math.max(1,Math.abs(m),Math.abs(ie))&&Math.abs(v-we)<=qi*Math.max(1,Math.abs(v),Math.abs(we))&&Math.abs(y-Q)<=qi*Math.max(1,Math.abs(y),Math.abs(Q))&&Math.abs(C-Be)<=qi*Math.max(1,Math.abs(C),Math.abs(Be))}function P4(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n}function $S(n,t,e){var i=t[0],r=t[1],s=t[2],o=t[3];return n[0]=e[0]*i+e[4]*r+e[8]*s+e[12]*o,n[1]=e[1]*i+e[5]*r+e[9]*s+e[13]*o,n[2]=e[2]*i+e[6]*r+e[10]*s+e[14]*o,n[3]=e[3]*i+e[7]*r+e[11]*s+e[15]*o,n}!function(){var n=new da(4);da!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var hge=[0,0,0,0],fge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],pge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gge=[0,0,0],mge=[0,0,0],_ge=US(function(n){var t=n.viewport,e=n.devicePixelRatio,i=n.coordinateSystem,s=function(n,t,e){var i=n.viewMatrixUncentered,r=n.projectionMatrix,s=n.viewMatrix,o=n.viewProjectionMatrix,a=hge,l=n.cameraPosition,c=R4(n,t,e),u=c.geospatialOrigin,h=c.shaderCoordinateOrigin;if(c.offsetMode){var g=n.projectPosition(u||h);l=[l[0]-g[0],l[1]-g[1],l[2]-g[2]],g[3]=1,a=$S([],g,o),o=ru([],r,s=i||s),o=ru([],o,fge)}return{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(t,i,n.coordinateOrigin),o=s.projectionCenter,a=s.viewProjectionMatrix,l=s.cameraPosCommon,c=s.shaderCoordinateOrigin,u=s.geospatialOrigin,h=t.getDistanceScales(),g={project_uCoordinateSystem:i,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCenter:o,project_uViewportSize:[t.width*e,t.height*e],project_uDevicePixelRatio:e,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:gge,project_uScale:t.scale,project_uViewProjectionMatrix:a,project_uCameraPosition:l};if(u){var m=t.getDistanceScales(u);switch(i){case ti.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case ti.LNGLAT:case ti.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case ti.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function R4(n,t){var r,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mge,i=e,s=!0;switch(r=t===ti.LNGLAT_OFFSETS||t===ti.METER_OFFSETS?e:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case tu.WEB_MERCATOR:(t===ti.LNGLAT||t===ti.CARTESIAN)&&(s=!1);break;case tu.WEB_MERCATOR_AUTO_OFFSET:t===ti.LNGLAT?i=r:t===ti.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=e[0],i[1]-=e[1],i[2]-=e[2]);break;case tu.IDENTITY:i=n.position.map(Math.fround);break;case tu.GLOBE:s=!1,r=null;break;default:s=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}function yge(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.viewport,e=n.devicePixelRatio,i=void 0===e?1:e,r=n.modelMatrix,s=void 0===r?null:r,o=n.coordinateSystem,a=void 0===o?ti.DEFAULT:o,l=n.coordinateOrigin,c=n.autoWrapLongitude,u=void 0!==c&&c;Kr(t),a===ti.DEFAULT&&(a=t.isGeospatial?ti.LNGLAT:ti.CARTESIAN);var g=_ge({viewport:t,devicePixelRatio:i,coordinateSystem:a,coordinateOrigin:l});return g.project_uWrapLongitude=u,g.project_uModelMatrix=s||pge,g}class wge extends OI{get ELEMENTS(){return ad(!1),0}get RANK(){return ad(!1),0}toString(){let t="[";if(Li.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let i=0;i<this.RANK;++i)t+=` ${this[i*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,i){return this[e*this.RANK+t]=Vr(i),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const i=t*this.RANK;for(let r=0;r<this.RANK;++r)e[r]=this[i+r];return e}setColumn(t,e){const i=t*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=e[r];return this}}function GS(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function k4(n,t){return n[0]=-t[0],n[1]=-t[1],n}function F4(n,t,e,i){var r=t[0],s=t[1];return n[0]=r+i*(e[0]-r),n[1]=s+i*(e[1]-s),n}function N4(n,t,e){var i=t[0],r=t[1];return n[0]=e[0]*i+e[4]*r+e[12],n[1]=e[1]*i+e[5]*r+e[13],n}!function(){var n=new da(2);da!=Float32Array&&(n[0]=0,n[1]=0)}();const L4=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Age=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Tge=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Rm={};class tn extends wge{static get IDENTITY(){return Rm.IDENTITY=Rm.IDENTITY||Object.freeze(new tn(L4)),Rm.IDENTITY}static get ZERO(){return Rm.ZERO=Rm.ZERO||Object.freeze(new tn(Age)),Rm.ZERO}get INDICES(){return Tge}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,i,r,s,o,a,l,c,u,h,p,g,m,v,y){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=h,this[11]=p,this[12]=g,this[13]=m,this[14]=v,this[15]=y,this.check()}setRowMajor(t,e,i,r,s,o,a,l,c,u,h,p,g,m,v,y){return this[0]=t,this[1]=s,this[2]=c,this[3]=g,this[4]=e,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=v,this[12]=r,this[13]=l,this[14]=p,this[15]=y,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(L4)}fromQuaternion(t){return function(n,t){var e=t[0],i=t[1],r=t[2],s=t[3],o=e+e,a=i+i,l=r+r,c=e*o,u=i*o,h=i*a,p=r*o,g=r*a,m=r*l,v=s*o,y=s*a,C=s*l;n[0]=1-h-m,n[1]=u+C,n[2]=p-y,n[3]=0,n[4]=u-C,n[5]=1-c-m,n[6]=g+v,n[7]=0,n[8]=p+y,n[9]=g-v,n[10]=1-c-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,t),this.check()}frustum({left:t,right:e,bottom:i,top:r,near:s,far:o}){return o===1/0?tn._computeInfinitePerspectiveOffCenter(this,t,e,i,r,s):function(n,t,e,i,r,s,o){var a=1/(e-t),l=1/(r-i),c=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*l,n[6]=0,n[7]=0,n[8]=(e+t)*a,n[9]=(r+i)*l,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*c,n[15]=0}(this,t,e,i,r,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(t,e,i,r,s,o){const l=2*o/(s-r),c=(i+e)/(i-e),u=(s+r)/(s-r),g=-2*o;return t[0]=2*o/(i-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=c,t[9]=u,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=g,t[15]=0,t}lookAt(t,e,i){return 1===arguments.length&&({eye:t,center:e,up:i}=t),function(n,t,e,i){var r,s,o,a,l,c,u,h,p,g,m=t[0],v=t[1],y=t[2],C=i[0],w=i[1],A=i[2],k=e[0],B=e[1],U=e[2];Math.abs(m-k)<qi&&Math.abs(v-B)<qi&&Math.abs(y-U)<qi?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=m-k,h=v-B,p=y-U,r=w*(p*=g=1/Math.hypot(u,h,p))-A*(h*=g),s=A*(u*=g)-C*p,o=C*h-w*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-p*s,l=p*r-u*o,c=u*s-h*r,(g=Math.hypot(a,l,c))?(a*=g=1/g,l*=g,c*=g):(a=0,l=0,c=0),n[0]=r,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=l,n[6]=h,n[7]=0,n[8]=o,n[9]=c,n[10]=p,n[11]=0,n[12]=-(r*m+s*v+o*y),n[13]=-(a*m+l*v+c*y),n[14]=-(u*m+h*v+p*y),n[15]=1)}(this,t,e=e||[0,0,0],i=i||[0,1,0]),this.check()}ortho({left:t,right:e,bottom:i,top:r,near:s=.1,far:o=500}){return function(n,t,e,i,r,s,o){var a=1/(t-e),l=1/(i-r),c=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(t+e)*a,n[13]=(r+i)*l,n[14]=(o+s)*c,n[15]=1}(this,t,e,i,r,s,o),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:e=1,focalDistance:i=1,near:r=.1,far:s=500}){if(t>2*Math.PI)throw Error("radians");const a=i*Math.tan(t/2),l=a*e;return(new tn).ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:s})}perspective({fovy:t,fov:e=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}={}){if((t=t||e)>2*Math.PI)throw Error("radians");return O4(this,t,i,r,s),this.check()}determinant(){return function(n){var t=n[0],e=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8],u=n[9],h=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return(t*o-e*s)*(h*y-p*v)-(t*a-i*s)*(u*y-p*m)+(t*l-r*s)*(u*v-h*m)+(e*a-i*o)*(c*y-p*g)-(e*l-r*o)*(c*v-h*g)+(i*l-r*a)*(c*m-u*g)}(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const i=this.getScale(e||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return t[0]=this[0]*r,t[1]=this[1]*s,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*s,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*s,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const i=this.getScale(e||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return t[0]=this[0]*r,t[1]=this[1]*s,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*s,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*s,t[8]=this[10]*o,t}transpose(){return function(n,t){if(n===t){var e=t[1],i=t[2],r=t[3],s=t[6],o=t[7],a=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=e,n[6]=t[9],n[7]=t[13],n[8]=i,n[9]=s,n[11]=t[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15]}(this,this),this.check()}invert(){return HS(this,this),this.check()}multiplyLeft(t){return ru(this,t,this),this.check()}multiplyRight(t){return ru(this,this,t),this.check()}rotateX(t){return x4(this,this,t),this.check()}rotateY(t){return function(n,t,e){var i=Math.sin(e),r=Math.cos(e),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],u=t[9],h=t[10],p=t[11];t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=s*r-c*i,n[1]=o*r-u*i,n[2]=a*r-h*i,n[3]=l*r-p*i,n[8]=s*i+c*r,n[9]=o*i+u*r,n[10]=a*i+h*r,n[11]=l*i+p*r}(this,this,t),this.check()}rotateZ(t){return D4(this,this,t),this.check()}rotateXYZ([t,e,i]){return this.rotateX(t).rotateY(e).rotateZ(i)}rotateAxis(t,e){return function(n,t,e,i){var l,c,u,h,p,g,m,v,y,C,w,A,k,B,U,K,ae,de,ne,Se,ve,te,ie,we,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<qi||(r*=a=1/a,s*=a,o*=a,l=Math.sin(e),c=Math.cos(e),p=t[1],g=t[2],m=t[3],y=t[5],C=t[6],w=t[7],k=t[9],B=t[10],U=t[11],ne=r*s*(u=1-c)-o*l,Se=s*s*u+c,ve=o*s*u+r*l,te=r*o*u+s*l,ie=s*o*u-r*l,we=o*o*u+c,n[0]=(h=t[0])*(K=r*r*u+c)+(v=t[4])*(ae=s*r*u+o*l)+(A=t[8])*(de=o*r*u-s*l),n[1]=p*K+y*ae+k*de,n[2]=g*K+C*ae+B*de,n[3]=m*K+w*ae+U*de,n[4]=h*ne+v*Se+A*ve,n[5]=p*ne+y*Se+k*ve,n[6]=g*ne+C*Se+B*ve,n[7]=m*ne+w*Se+U*ve,n[8]=h*te+v*ie+A*we,n[9]=p*te+y*ie+k*we,n[10]=g*te+C*ie+B*we,n[11]=m*te+w*ie+U*we,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]))}(this,this,t,e),this.check()}scale(t){return Array.isArray(t)?yb(this,this,t):yb(this,this,[t,t,t]),this.check()}translate(t){return vb(this,this,t),this.check()}transform(t,e){return 4===t.length?(TS(e=$S(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:i}=t;switch(i){case 2:e=N4(e||[-0,-0],t,this);break;case 3:e=p5(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return TS(e,t.length),e}transformAsVector(t,e){switch(t.length){case 2:e=g5(e||[-0,-0],t,this);break;case 3:e=m5(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return TS(e,t.length),e}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,i){return this.identity().translate([t,e,i])}transformPoint(t,e){return II("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}transformVector(t,e){return II("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}transformDirection(t,e){return II("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}function km(n,t){const e=$S([],t,n);return P4(e,e,1/e[3]),e}function B4(n,t){const e=n%t;return e<0?t+e:e}const iP=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function cd(n,t){if(!n)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const fc=Math.PI,V4=fc/4,pc=fc/180,rP=180/fc,sP=4003e4;function Fm([n,t]){return cd(Number.isFinite(n)),cd(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[512*(n*pc+fc)/(2*fc),512*(fc+Math.log(Math.tan(V4+t*pc*.5)))/(2*fc)]}function wh([n,t]){const e=n/512*(2*fc)-fc,i=2*(Math.atan(Math.exp(t/512*(2*fc)-fc))-V4);return[e*rP,i*rP]}function qS({latitude:n,longitude:t,highPrecision:e=!1}){cd(Number.isFinite(n)&&Number.isFinite(t));const i={},s=Math.cos(n*pc),o=512/360,a=o/s,l=512/sP/s;if(i.unitsPerMeter=[l,l,l],i.metersPerUnit=[1/l,1/l,1/l],i.unitsPerDegree=[o,a,l],i.degreesPerUnit=[1/o,1/a,1/l],e){const c=pc*Math.tan(n*pc)/s,h=512/sP*c,p=h/a*l;i.unitsPerDegree2=[0,o*c/2,h],i.unitsPerMeter2=[p,0,p]}return i}function z4(n,t){const[e,i,r]=n,[s,o,a]=t,{unitsPerMeter:l,unitsPerMeter2:c}=qS({longitude:e,latitude:i,highPrecision:!0}),u=Fm(n);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const h=wh(u),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],p]:h}function U4({height:n,pitch:t,bearing:e,altitude:i,scale:r,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return vb(o,o,[0,0,-i]),x4(o,o,-t*pc),D4(o,o,e*pc),yb(o,o,[r/=n,r,r]),s&&vb(o,o,function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}([],s)),o}function H4({width:n,height:t,fovy:e=YS(1.5),altitude:i,pitch:r=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==i&&(e=YS(i));const a=.5*e*pc,l=$4(e),c=r*pc,u=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/t,focalDistance:l,near:s,far:(Math.sin(c)*u+l)*o}}function YS(n){return 2*Math.atan(.5/n)*rP}function $4(n){return.5/Math.tan(.5*n*pc)}function oP(n,t){const[e,i,r=0]=n;return cd(Number.isFinite(e)&&Number.isFinite(i)&&Number.isFinite(r)),km(t,[e,i,r,1])}function wb(n,t,e=0){const[i,r,s]=n;if(cd(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return km(t,[i,r,s,1]);const o=km(t,[i,r,0,1]),a=km(t,[i,r,1,1]),l=o[2],c=a[2];return F4([],o,a,l===c?0:((e||0)-l)/(c-l))}function G4({width:n,height:t,bounds:e,minExtent:i=0,maxZoom:r=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[c,u]]=e;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:cd(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const h=new XS({width:n,height:t,longitude:0,latitude:0,zoom:0}),p=h.project([a,u]),g=h.project([c,l]),m=[Math.max(Math.abs(g[0]-p[0]),i),Math.max(Math.abs(g[1]-p[1]),i)],v=[n-s.left-s.right-2*Math.abs(o[0]),t-s.top-s.bottom-2*Math.abs(o[1])];cd(v[0]>0&&v[1]>0);const y=v[0]/m[0],C=v[1]/m[1],B=h.unproject([(g[0]+p[0])/2+(s.right-s.left)/2/y,(g[1]+p[1])/2+(s.bottom-s.top)/2/C]),U=Math.min(r,h.zoom+iP(Math.abs(Math.min(y,C))));return cd(Number.isFinite(U)),{longitude:B[0],latitude:B[1],zoom:U}}const W4=Math.PI/180;function q4(n,t=0){const{width:e,height:i,unproject:r}=n,s={targetZ:t},o=r([0,i],s),a=r([e,i],s);let l,c;return(n.fovy?.5*n.fovy*W4:Math.atan(.5/n.altitude))>(90-n.pitch)*W4-.01?(l=Y4(n,0,t),c=Y4(n,e,t)):(l=r([0,0],s),c=r([e,0],s)),[o,a,c,l]}function Y4(n,t,e){const{pixelUnprojectionMatrix:i}=n,r=km(i,[t,0,1,1]),s=km(i,[t,n.height,1,1]),c=wh(F4([],r,s,(e*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return c[2]=e,c}class XS{constructor({width:t,height:e,latitude:i=0,longitude:r=0,zoom:s=0,pitch:o=0,bearing:a=0,altitude:l=null,fovy:c=null,position:u=null,nearZMultiplier:h=.02,farZMultiplier:p=1.01}={width:1,height:1}){t=t||1,e=e||1,null===c&&null===l?c=YS(l=1.5):null===c?c=YS(l):null===l&&(l=$4(c));const g=function(n){return Math.pow(2,n)}(s);l=Math.max(.75,l);const m=qS({longitude:r,latitude:i}),v=Fm([r,i]);v[2]=0,u&&function(n,t,e){n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2]}(v,v,function(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}([],u,m.unitsPerMeter)),this.projectionMatrix=function({width:n,height:t,pitch:e,altitude:i,fovy:r,nearZMultiplier:s,farZMultiplier:o}){const{fov:a,aspect:l,near:c,far:u}=H4({width:n,height:t,altitude:i,fovy:r,pitch:e,nearZMultiplier:s,farZMultiplier:o});return O4([],a,l,c,u)}({width:t,height:e,pitch:o,fovy:c,nearZMultiplier:h,farZMultiplier:p}),this.viewMatrix=U4({height:e,scale:g,center:v,pitch:o,bearing:a,altitude:l}),this.width=t,this.height=e,this.scale=g,this.latitude=i,this.longitude=r,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=l,this.fovy=c,this.center=v,this.meterOffset=u||[0,0,0],this.distanceScales=m,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:t,height:e,projectionMatrix:i,viewMatrix:r}=this,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ru(s,s,i),ru(s,s,r),this.viewProjectionMatrix=s;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];yb(o,o,[t/2,-e/2,1]),vb(o,o,[1,-1,0]),ru(o,o,s);const a=HS([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}equals(t){return t instanceof XS&&t.width===this.width&&t.height===this.height&&I4(t.projectionMatrix,this.projectionMatrix)&&I4(t.viewMatrix,this.viewMatrix)}project(t,{topLeft:e=!0}={}){const r=oP(this.projectPosition(t),this.pixelProjectionMatrix),[s,o]=r,a=e?o:this.height-o;return 2===t.length?[s,a]:[s,a,r[2]]}unproject(t,{topLeft:e=!0,targetZ:i}={}){const[r,s,o]=t,c=wb([r,e?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,h,p]=this.unprojectPosition(c);return Number.isFinite(o)?[u,h,p]:Number.isFinite(i)?[u,h,i]:[u,h]}projectPosition(t){const[e,i]=Fm(t);return[e,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,i]=wh(t);return[e,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return Fm(t)}unprojectFlat(t){return wh(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){const i=wb(e,this.pixelUnprojectionMatrix),s=GS([],Fm(t),k4([],i));return wh(GS([],this.center,s))}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}fitBounds(t,e={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=G4(Object.assign({width:i,height:r,bounds:t},e));return new XS({width:i,height:r,longitude:s,latitude:o,zoom:a})}getBounds(t){const e=this.getBoundingRegion(t),i=Math.min(...e.map(a=>a[0])),r=Math.max(...e.map(a=>a[0]));return[[i,Math.min(...e.map(a=>a[1]))],[r,Math.max(...e.map(a=>a[1]))]]}getBoundingRegion(t={}){return q4(this,t.z||0)}}var Fge=Math.PI/180,Nge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],aP=[0,0,0],Bge={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},rp=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n);var e=t.id,i=void 0===e?null:e,r=t.x,s=void 0===r?0:r,o=t.y,a=void 0===o?0:o,l=t.width,c=void 0===l?1:l,u=t.height,h=void 0===u?1:u;this.id=i||this.constructor.displayName||"viewport",this.x=s,this.y=a,this.width=c||1,this.height=h||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Tt(n,[{key:"equals",value:function(e){return e instanceof n&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&lb(e.projectionMatrix,this.projectionMatrix)&&lb(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,s=void 0===r||r,o=this.projectPosition(e),a=oP(o,this.pixelProjectionMatrix),l=Br(a,2),c=l[0],u=l[1],h=s?u:this.height-u;return 2===e.length?[c,h]:[c,h,a[2]]}},{key:"unproject",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,s=void 0===r||r,o=i.targetZ,a=Br(e,3),l=a[0],c=a[1],u=a[2],h=s?c:this.height-c,p=o&&o*this.distanceScales.unitsPerMeter[2],g=wb([l,h,u],this.pixelUnprojectionMatrix,p),m=this.unprojectPosition(g),v=Br(m,3),y=v[0],C=v[1],w=v[2];return Number.isFinite(u)?[y,C,w]:Number.isFinite(o)?[y,C,o]:[y,C]}},{key:"projectPosition",value:function(e){var r=Br(this.projectFlat(e),2);return[r[0],r[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var r=Br(this.unprojectFlat(e),2);return[r[0],r[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return this.isGeospatial?Fm(e):e}},{key:"unprojectFlat",value:function(e){return this.isGeospatial?wh(e):e}},{key:"getBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={targetZ:e.z||0},r=this.unproject([0,0],i),s=this.unproject([this.width,0],i),o=this.unproject([0,this.height],i),a=this.unproject([this.width,this.height],i);return[Math.min(r[0],s[0],o[0],a[0]),Math.min(r[1],s[1],o[1],a[1]),Math.max(r[0],s[0],o[0],a[0]),Math.max(r[1],s[1],o[1],a[1])]}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?qS({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(e){var i=e.x,r=e.y,s=e.width,a=e.height;return i<this.x+this.width&&this.x<i+(void 0===s?1:s)&&r<this.y+this.height&&this.y<r+(void 0===a?1:a)}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){var t={};return t.left=Am(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),t.right=Am(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),t.bottom=Am(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),t.top=Am(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),t.near=Am(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),t.far=Am(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),t}(this.viewProjectionMatrix)),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(e){var r=e.fovyRadians,s=e.aspect,o=e.focalDistance,a=e.near,l=e.far;return e.orthographic?(new tn).orthographic({fovy:r,aspect:s,focalDistance:o,near:a,far:l}):(new tn).perspective({fovy:r,aspect:s,near:a,far:l})}},{key:"_initViewMatrix",value:function(e){var i=e.viewMatrix,r=void 0===i?Nge:i,s=e.longitude,o=void 0===s?null:s,a=e.latitude,l=void 0===a?null:a,c=e.zoom,u=void 0===c?null:c,h=e.position,p=void 0===h?null:h,g=e.modelMatrix,m=void 0===g?null:g,v=e.focalDistance,y=void 0===v?1:v,C=e.distanceScales,w=void 0===C?null:C;this.isGeospatial=Number.isFinite(l)&&Number.isFinite(o),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){cd(Number.isFinite(n));const t=Math.cos(n*pc);return function(n){return iP(n)}(sP*t)-9}({latitude:l})+Math.log2(y):0);var A=Math.pow(2,this.zoom);this.scale=A,this.distanceScales=this.isGeospatial?qS({latitude:l,longitude:o}):w||Bge,this.focalDistance=y,this.distanceScales.metersPerUnit=new lo(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new lo(this.distanceScales.unitsPerMeter),this.position=aP,this.meterOffset=aP,p&&(this.position=p,this.modelMatrix=m,this.meterOffset=m?m.transformVector(p):p),this.isGeospatial?(this.longitude=o,this.latitude=l,this.center=this._getCenterInWorld({longitude:o,latitude:l})):this.center=p?this.projectPosition(p):[0,0,0],this.viewMatrixUncentered=r,this.viewMatrix=(new tn).multiplyRight(this.viewMatrixUncentered).translate(new lo(this.center||aP).negate())}},{key:"_getCenterInWorld",value:function(e){var s=this.meterOffset,o=this.distanceScales,a=new lo(this.projectPosition([e.longitude,e.latitude,0]));if(s){var l=new lo(s).scale(o.unitsPerMeter);a.add(l)}return a}},{key:"_initProjectionMatrix",value:function(e){var i=e.projectionMatrix,s=e.orthographic,l=e.fovy,u=e.near,p=e.far,m=e.focalDistance;this.projectionMatrix=(void 0===i?null:i)||this._createProjectionMatrix({orthographic:void 0!==s&&s,fovyRadians:e.fovyRadians||(void 0===l?75:l)*Fge,aspect:this.width/this.height,focalDistance:void 0===m?1:m,near:void 0===u?.1:u,far:void 0===p?1e3:p})}},{key:"_initPixelMatrices",value:function(){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ru(e,e,this.projectionMatrix),ru(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=HS([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];yb(i,i,[this.width/2,-this.height/2,1]),vb(i,i,[1,-1,0]),ru(r,i,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=i,this.pixelUnprojectionMatrix=HS([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ei.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?tu.WEB_MERCATOR:tu.WEB_MERCATOR_AUTO_OFFSET:tu.IDENTITY}}]),n}();function J4(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function eH(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?J4(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):J4(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}rp.displayName="Viewport";var Nm,lP=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,e);var s=r.latitude,o=void 0===s?0:s,a=r.longitude,l=void 0===a?0:a,c=r.zoom,u=void 0===c?11:c,h=r.pitch,p=void 0===h?0:h,g=r.bearing,m=void 0===g?0:g,v=r.nearZMultiplier,y=void 0===v?.1:v,C=r.farZMultiplier,w=void 0===C?1.01:C,A=r.orthographic,k=void 0!==A&&A,B=r.repeat,U=void 0!==B&&B,K=r.worldOffset,ae=void 0===K?0:K,de=r.width,ne=r.height,Se=r.altitude,ve=void 0===Se?1.5:Se,te=Math.pow(2,u),ie=H4({width:de=de||1,height:ne=ne||1,pitch:p,altitude:ve=Math.max(.75,ve),nearZMultiplier:y,farZMultiplier:w}),we=ie.fov,Q=ie.aspect,Be=ie.focalDistance,Fe=ie.near,He=ie.far,Ct=U4({height:ne,pitch:p,bearing:m,scale:te,altitude:ve});if(ae){var Dn=(new tn).translate([512*ae,0,0]);Ct=Dn.multiplyLeft(Ct)}var nt=Object.assign({},r,{width:de,height:ne,viewMatrix:Ct,longitude:l,latitude:o,zoom:u,orthographic:k,fovyRadians:we,aspect:Q,focalDistance:k?Be:1,near:Fe,far:He});return(i=t.call(this,nt)).latitude=o,i.longitude=l,i.zoom=u,i.pitch=p,i.bearing=m,i.altitude=ve,i.orthographic=k,i._subViewports=U?[]:null,Object.freeze(EU(i)),i}return Tt(e,[{key:"addMetersToLngLat",value:function(r,s){return z4(r,s)}},{key:"getMapCenterByLngLatPosition",value:function(r){var s=r.lngLat,a=wb(r.pos,this.pixelUnprojectionMatrix),c=GS([],this.projectFlat(s),k4([],a)),u=GS([],this.center,c);return this.unprojectFlat(u)}},{key:"getBounds",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=q4(this,r.z||0);return[Math.min(s[0][0],s[1][0],s[2][0],s[3][0]),Math.min(s[0][1],s[1][1],s[2][1],s[3][1]),Math.max(s[0][0],s[1][0],s[2][0],s[3][0]),Math.max(s[0][1],s[1][1],s[2][1],s[3][1])]}},{key:"fitBounds",value:function(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.width,a=this.height,l=G4(Object.assign({width:o,height:a,bounds:r},s)),c=l.longitude,u=l.latitude,h=l.zoom;return new e({width:o,height:a,longitude:c,latitude:u,zoom:h})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var r=this.getBounds(),s=Math.floor((r[0]+180)/360),o=Math.ceil((r[2]-180)/360),a=s;a<=o;a++){var l=a?new e(eH(eH({},this),{},{worldOffset:a})):this;this._subViewports.push(l)}return this._subViewports}}]),e}(rp);function cP(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.projectPosition(n);if(e&&t instanceof lP){var r=Br(n,3),s=r[0],o=r[1],a=r[2],l=void 0===a?0:a,c=t.getDistanceScales([s,o]);i[2]=l*c.unitsPerMeter[2]}return i}function tH(n,t){var e=t.viewport,i=t.modelMatrix,r=t.coordinateSystem,s=t.coordinateOrigin,o=t.offsetMode,a=Br(n,3),l=a[0],c=a[1],u=a[2],h=void 0===u?0:u;if(i){var g=Br($S([],[l,c,h,1],i),3);l=g[0],c=g[1],h=g[2]}switch(r){case ti.LNGLAT:return cP([l,c,h],e,o);case ti.LNGLAT_OFFSETS:return cP([l+s[0],c+s[1],h+(s[2]||0)],e,o);case ti.METER_OFFSETS:return cP(z4(s,[l,c,h]),e,o);case ti.CARTESIAN:default:return e.isGeospatial?[l+s[0],c+s[1],h+s[2]]:e.projectPosition([l,c,h])}}function nH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Cb(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?nH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):nH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}lP.displayName="WebMercatorViewport";var Hge=(Yt(Nm={},10241,9987),Yt(Nm,10240,9729),Yt(Nm,10242,33071),Yt(Nm,10243,33071),Nm),uP={},Wge={boolean:{validate:function(t,e){return!0},equal:function(t,e,i){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate:function(t,e){return e.optional&&!t||Sb(t)&&(3===t.length||4===t.length)},equal:function(t,e,i){return dP(t,e)}},accessor:{validate:function(t,e){var i=KS(t);return"function"===i||i===KS(e.value)},equal:function(t,e,i){return"function"==typeof e||dP(t,e)}},array:{validate:function(t,e){return e.optional&&!t||Sb(t)},equal:function(t,e,i){return i.compare?dP(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||"function"==typeof t},equal:function(t,e,i){return!i.compare||t===e}},data:{transform:function(t,e,i){var s=(i?i.props:{}).dataTransform;return s&&t?s(t):t}},image:{transform:function(t,e,i){return function(n,t){var e=n.context&&n.context.gl;if(!e||!t)return null;if(t instanceof Na)return t;t.constructor&&"Object"!==t.constructor.name&&(t={data:t});var i=null;t.compressed&&(i=Yt({},10241,t.data.length>1?9985:9729));var r=new Na(e,Cb(Cb({},t),{},{parameters:Cb(Cb(Cb({},Hge),i),n.props.textureParameters)}));return uP[r.id]=!0,r}(i,t)},release:function(t){!function(n){!n||!(n instanceof Na)||uP[n.id]&&(n.delete(),delete uP[n.id])}(t)}}};function dP(n,t){if(n===t)return!0;if(!Sb(n)||!Sb(t))return!1;var e=n.length;if(e!==t.length)return!1;for(var i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function Yge(n,t){switch(KS(t)){case"object":return Eb(n,t);case"array":return Eb(n,{type:"array",value:t,compare:!1});case"boolean":return Eb(n,{type:"boolean",value:t});case"number":return Eb(n,{type:"number",value:t});case"function":return Eb(n,{type:"function",value:t,compare:!0});default:return{name:n,type:"unknown",value:t}}}function Eb(n,t){return"type"in t?Object.assign({name:n},Wge[t.type],t):"value"in t?Object.assign({name:n,type:KS(t.value)},t):{name:n,type:"object",value:t}}function Sb(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function KS(n){return Sb(n)?"array":null===n?"null":$i(n)}function iH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var hP=hc.COMPONENT,ZS=hc.ASYNC_ORIGINAL,Mb=hc.ASYNC_RESOLVED,QS=hc.ASYNC_DEFAULTS;function Zge(){var n=this,t=rH(n.constructor),e=Object.create(t);e[hP]=n,e[ZS]={},e[Mb]={};for(var i=0;i<arguments.length;++i){var r=arguments[i];for(var s in r)e[s]=r[s]}return Object.freeze(e),e}function rH(n){return JS(n,"_mergedDefaultProps")||(function(n){if(n.prototype){var e=Object.getPrototypeOf(n),i=rH(e),s=function(n){for(var t={},e={},i={},r=0,s=Object.entries(n);r<s.length;r++){var o=Br(s[r],2),a=o[0],l=o[1];if(l&&l.deprecatedFor)i[a]=Array.isArray(l.deprecatedFor)?l.deprecatedFor:[l.deprecatedFor];else{var c=Yge(a,l);t[a]=c,e[a]=c.value}}return{propTypes:t,defaultProps:e,deprecatedProps:i}}(JS(n,"defaultProps")||{}),o=function(n,t,e){var i=Object.create(null);Object.assign(i,t,n);var r=function(n){var t=JS(n,"layerName")||JS(n,"componentName");return t||ei.once(0,"".concat(n.name,".componentName not specified"))(),t||n.name}(e);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a=Object.assign({},e._propTypes,s.propTypes);!function(n,t){var e={},i={};for(var r in t){var s=t[r],o=s.name;s.async&&(e[o]=s.value,i[o]=nme(o))}n[QS]=e,n[ZS]={},Object.defineProperties(n,i)}(o,a);var l=Object.assign({},e._deprecatedProps,s.deprecatedProps);(function(n,t){var e=function(s){Object.defineProperty(n,s,{enumerable:!1,set:function(a){var u,l="".concat(this.id,": ").concat(s),c=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return iH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return iH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(t[s]);try{for(c.s();!(u=c.n()).done;){var h=u.value;sH(this,h)||(this[h]=a)}}catch(p){c.e(p)}finally{c.f()}ei.deprecated(l,t[s].join("/"))()}})};for(var i in t)e(i)})(o,l),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=l}}(n),n._mergedDefaultProps)}function nme(n){return{enumerable:!0,set:function(e){"string"==typeof e||e instanceof Promise||S5(e)?this[ZS][n]=e:this[Mb][n]=e},get:function(){if(this[Mb]){if(n in this[Mb])return this[Mb][n]||this[QS][n];if(n in this[ZS]){var i=this[hP]&&this[hP].internalState;if(i&&i.hasAsyncProp(n))return i.getAsyncProp(n)||this[QS][n]}}return this[QS][n]}}}function sH(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function JS(n,t){return sH(n,t)&&n[t]}var rme=xe(774),je=xe.n(rme);function fP(n){var t;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(t=n[Symbol.asyncIterator]),null==t&&Symbol.iterator&&(t=n[Symbol.iterator])),null==t&&(t=n["@@asyncIterator"]),null==t&&(t=n["@@iterator"]),null==t)throw new TypeError("Object is not async iterable");return t.call(n)}var sme=hc.ASYNC_ORIGINAL,ome=hc.ASYNC_RESOLVED,ame=hc.ASYNC_DEFAULTS,lme=Object.freeze({}),oH=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;wt(this,n),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=lme,this.oldAsyncProps=null}return Tt(n,[{key:"finalize",value:function(){for(var e in this.asyncProps){var i=this.asyncProps[e];i.type&&i.type.release&&i.type.release(i.resolvedValue,i.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var i=this.asyncProps[e];return i&&i.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){if(e){var i=this.asyncProps[e];return Boolean(i&&i.pendingLoadCount>0&&i.pendingLoadCount!==i.resolvedLoadCount)}for(var r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}},{key:"reloadAsyncProp",value:function(e,i){this._watchPromise(e,Promise.resolve(i))}},{key:"setAsyncProps",value:function(e){var i=e[ome]||{},r=e[sme]||e,s=e[ame]||{};for(var o in i){var a=i[o];this._createAsyncPropData(o,s[o]),this._updateAsyncProp(o,a),i[o]=this.getAsyncProp(o)}for(var l in r){var c=r[l];this._createAsyncPropData(l,s[l]),this._updateAsyncProp(l,c)}}},{key:"_updateAsyncProp",value:function(e,i){if(this._didAsyncInputValueChange(e,i)){if("string"==typeof i){var r=this.layer&&this.layer.props.fetch;r&&(i=r(i,{propName:e,layer:this.layer}))}if(i instanceof Promise)return void this._watchPromise(e,i);if(S5(i))return void this._resolveAsyncIterable(e,i);this._setPropValue(e,i)}}},{key:"_didAsyncInputValueChange",value:function(e,i){var r=this.asyncProps[e];return i!==r.resolvedValue&&i!==r.lastValue&&(r.lastValue=i,!0)}},{key:"_setPropValue",value:function(e,i){var r=this.asyncProps[e];i=this._postProcessValue(r,i),r.resolvedValue=i,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,i,r){var s=this.asyncProps[e];s&&r>=s.resolvedLoadCount&&void 0!==i&&(this.freezeAsyncOldProps(),s.resolvedValue=i,s.resolvedLoadCount=r,this.onAsyncPropUpdated(e,i))}},{key:"_watchPromise",value:function(e,i){var r=this,s=this.asyncProps[e];s.pendingLoadCount++;var o=s.pendingLoadCount;i.then(function(a){a=r._postProcessValue(s,a),r._setAsyncPropValue(e,a,o);var l=r.layer&&r.layer.props.onDataLoad;"data"===e&&l&&l(a,{propName:e,layer:r.layer})}).catch(function(a){return ei.error(a)()})}},{key:"_resolveAsyncIterable",value:(t=An(je().mark(function i(r,s){var o,a,l,c,u,h,p,g,m,v,y,w,A;return je().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:"data"!==r&&this._setPropValue(r,s),(o=this.asyncProps[r]).pendingLoadCount++,a=o.pendingLoadCount,l=[],c=0,u=!0,h=!1,B.prev=8,g=fP(s);case 10:return B.next=12,g.next();case 12:return u=(m=B.sent).done,B.next=16,m.value;case 16:if(v=B.sent,u){B.next=27;break}y=v,l=(w=(this.component?this.component.props:{}).dataTransform)?w(y,l):l.concat(y),Object.defineProperty(l,"__diff",{enumerable:!1,value:[{startRow:c,endRow:l.length}]}),c=l.length,this._setAsyncPropValue(r,l,a);case 24:u=!0,B.next=10;break;case 27:B.next=33;break;case 29:B.prev=29,B.t0=B.catch(8),h=!0,p=B.t0;case 33:if(B.prev=33,B.prev=34,u||null==g.return){B.next=38;break}return B.next=38,g.return();case 38:if(B.prev=38,!h){B.next=41;break}throw p;case 41:return B.finish(38);case 42:return B.finish(33);case 43:(A=this.layer&&this.layer.props.onDataLoad)&&A(l,{propName:r,layer:this.layer});case 45:case"end":return B.stop()}},i,this,[[8,29,33,43],[34,,38,42]])})),function(i,r){return t.apply(this,arguments)})},{key:"_postProcessValue",value:function(e,i){var r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(i,r,this.component):i}},{key:"_createAsyncPropData",value:function(e,i){if(!this.asyncProps[e]){var s=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:s&&s[e],lastValue:null,resolvedValue:i,pendingLoadCount:0,resolvedLoadCount:0}}}}]),n;var t}(),aH=hc.ASYNC_ORIGINAL,lH=hc.ASYNC_RESOLVED,cme=hc.ASYNC_DEFAULTS,dme=0,pP=function(){function n(){wt(this,n),this.props=Zge.apply(this,arguments),this.id=this.props.id,this.count=dme++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Tt(n,[{key:"clone",value:function(e){var i=this.props,r={};for(var s in i[cme])s in i[lH]?r[s]=i[lH][s]:s in i[aH]&&(r[s]=i[aH][s]);return new this.constructor(Object.assign({},i,r,e))}},{key:"_initState",value:function(){this.internalState=new oH({})}},{key:"stats",get:function(){return this.internalState.stats}}]),n}();pP.componentName="Component",pP.defaultProps={};var pme=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(i){var r,s=i.attributeManager,o=i.layer;return wt(this,e),(r=t.call(this,o)).attributeManager=s,r.model=null,r.needsRedraw=!0,r.subLayers=null,r.usesPickingColorCache=!1,r}return Tt(e,[{key:"layer",get:function(){return this.component},set:function(r){this.component=r}}]),e}(oH),gc=function(t){return"function"==typeof t},Ch=function(t){return null!==t&&"object"===$i(t)},uH=function(t){return Ch(t)&&t.constructor==={}.constructor},gme=function(t){return t&&"function"==typeof t[Symbol.iterator]},mme=function(t){return t&&"function"==typeof t[Symbol.asyncIterator]},Ab=function(t){return"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json},Lm=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},dH=function(t){return function(t){return"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||Ch(t)&&gc(t.tee)&&gc(t.cancel)&&gc(t.getReader)}(t)||function(t){return Ch(t)&&gc(t.read)&&gc(t.pipe)&&function(t){return"boolean"==typeof t}(t.readable)}(t)};function No(n,t){if(!n)throw new Error(t||"loader assertion failed.")}function hH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function e1(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?hH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):hH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function gP(n){if(!n)return!1;Array.isArray(n)&&(n=n[0]);var t=n.parseTextSync||n.parseSync||n.parse||n.parseStream||n.parseInBatches,e=n.options&&n.options[n.id];return t||e&&e.workerUrl}function mP(n){var t;return No(n,"null loader"),No(gP(n),"invalid loader"),Array.isArray(n)&&(t=n[1],n=e1(e1({},n=n[0]),{},{options:e1(e1({},n.options),t)})),n.extension&&(n.extensions=n.extensions||n.extension,delete n.extension),Array.isArray(n.extensions)||(n.extensions=[n.extensions]),No(n.extensions&&n.extensions.length>0&&n.extensions[0]),(n.parseTextSync||n.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}var su={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Tb=su.global||su.self||su.window,xb="object"!==("undefined"==typeof process?"undefined":$i(process))||"[object process]"!==String(process)||process.browser,_P="function"==typeof importScripts,fH="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),Cme=fH&&parseFloat(fH[1])||0,yP={};function Eme(n){for(var t in yP)n.startsWith(t)&&(n=n.replace(t,yP[t]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat("").concat(n)),n}var Sme=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Mme=/^([-\w.]+\/[-\w.+]+)/;function pH(n){if("string"!=typeof n)return"";var t=n.match(Sme);return t?t[1]:""}var Tme=/\?.*/;function t1(n){if(Ab(n)){var t=function(n){if("string"!=typeof n)return"";var t=n.match(Mme);return t?t[1]:n}(n.headers.get("content-type")),e=pH(n.url);return{url:bP(n.url||""),type:t||e||null}}return Lm(n)?{url:bP(n.name||""),type:n.type||""}:"string"==typeof n?{url:bP(n),type:pH(n)}:{url:"",type:""}}function xme(n){return Ab(n)?n.headers["content-length"]||-1:Lm(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function bP(n){return n.replace(Tme,"")}function gH(n){return wP.apply(this,arguments)}function wP(){return(wP=An(je().mark(function n(t){var e,i,r,s,o,a,l;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!Ab(t)){u.next=2;break}return u.abrupt("return",t);case 2:return e={},(i=xme(t))>=0&&(e["content-length"]=String(i)),r=t1(t),s=r.url,(o=r.type)&&(e["content-type"]=o),u.next=9,Ime(t);case 9:return(a=u.sent)&&(e["x-first-bytes"]=a),"string"==typeof t&&(t=(new TextEncoder).encode(t)),l=new Response(t,{headers:e}),Object.defineProperty(l,"url",{value:s}),u.abrupt("return",l);case 15:case"end":return u.stop()}},n)}))).apply(this,arguments)}function Dme(n){return CP.apply(this,arguments)}function CP(){return(CP=An(je().mark(function n(t){return je().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.ok){r.next=5;break}return r.next=3,Ome(t);case 3:throw new Error(r.sent);case 5:case"end":return r.stop()}},n)}))).apply(this,arguments)}function Ome(n){return EP.apply(this,arguments)}function EP(){return(EP=An(je().mark(function n(t){var e,i,r;return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),o.prev=1,i=t.headers.get("Content-Type"),r=t.statusText,!i.includes("application/json")){o.next=11;break}return o.t0=r,o.t1=" ",o.next=9,t.text();case 9:o.t2=o.sent,r=o.t0+=o.t1.concat.call(o.t1,o.t2);case 11:e=(e+=r).length>60?"".concat(e.slice(60),"..."):e,o.next=17;break;case 15:o.prev=15,o.t3=o.catch(1);case 17:return o.abrupt("return",e);case 18:case"end":return o.stop()}},n,null,[[1,15]])}))).apply(this,arguments)}function Ime(n){return SP.apply(this,arguments)}function SP(){return(SP=An(je().mark(function n(t){var e,i,r,s;return je().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=5,"string"!=typeof t){a.next=3;break}return a.abrupt("return","data:,".concat(t.slice(0,e)));case 3:if(!(t instanceof Blob)){a.next=8;break}return i=t.slice(0,5),a.next=7,new Promise(function(l){var c=new FileReader;c.onload=function(u){return l(u.target&&u.target.result)},c.readAsDataURL(i)});case 7:return a.abrupt("return",a.sent);case 8:if(!(t instanceof ArrayBuffer)){a.next=12;break}return r=t.slice(0,e),s=Pme(r),a.abrupt("return","data:base64,".concat(s));case 12:return a.abrupt("return",null);case 13:case"end":return a.stop()}},n)}))).apply(this,arguments)}function Pme(n){for(var t="",e=new Uint8Array(n),i=0;i<e.byteLength;i++)t+=String.fromCharCode(e[i]);return btoa(t)}function Rme(n){return MP.apply(this,arguments)}function MP(){return(MP=An(je().mark(function n(t){var e;return je().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),s.prev=1,!t.headers.get("Content-Type").includes("application/json")){s.next=10;break}return s.t0=e,s.next=7,t.text();case 7:e=s.t0+=s.sent,s.next=11;break;case 10:e+=t.statusText;case 11:s.next=16;break;case 13:return s.prev=13,s.t1=s.catch(1),s.abrupt("return",e);case 16:return s.abrupt("return",e);case 17:case"end":return s.stop()}},n,null,[[1,13]])}))).apply(this,arguments)}function mH(n){return AP.apply(this,arguments)}function AP(){return(AP=An(je().mark(function n(t){var e,i,r=arguments;return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=r.length>1&&void 0!==r[1]?r[1]:{},"string"==typeof t){o.next=5;break}return o.next=4,gH(t);case 4:return o.abrupt("return",o.sent);case 5:return t=Eme(t),o.next=8,fetch(t,e);case 8:if((i=o.sent).ok||!e.throws){o.next=15;break}return o.t0=Error,o.next=13,Rme(i);case 13:throw o.t1=o.sent,new o.t0(o.t1);case 15:return o.abrupt("return",i);case 16:case"end":return o.stop()}},n)}))).apply(this,arguments)}var kme=function(){function n(){wt(this,n)}return Tt(n,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),n}();function _H(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return vH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function vH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function yH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function n1(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?yH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):yH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var bH={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function n(){wt(this,n),this.console=console}return Tt(n,[{key:"log",value:function(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=this.console.log).bind.apply(e,[this.console].concat(r))}},{key:"info",value:function(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=this.console.info).bind.apply(e,[this.console].concat(r))}},{key:"warn",value:function(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=this.console.warn).bind.apply(e,[this.console].concat(r))}},{key:"error",value:function(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=this.console.error).bind.apply(e,[this.console].concat(r))}}]),n}()),metadata:!1,transforms:[],reuseWorkers:!0},Lme={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},TP=function(){Tb.loaders=Tb.loaders||{};var t=Tb.loaders;return t._state=t._state||{},t._state},xP=function(){var t=TP();return t.globalOptions=t.globalOptions||n1({},bH),t.globalOptions};function Bme(n,t,e,i){return e=e||[],function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;CH(n,null,e,bH,Lme,t);var r,i=_H(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;CH(n&&n[s.id]||{},s.id,e,s.options&&s.options[s.id]||{},s.defaultOptions&&s.defaultOptions[s.id]||{},t)}}catch(c){i.e(c)}finally{i.f()}}(n,e=Array.isArray(e)?e:[e]),function(n,t,e){var r=n1({},n.options||{});return null===r.log&&(r.log=new kme),SH(r,xP()),SH(r,t),function(n,t){t&&!n.baseUri&&(n.baseUri=t)}(r,e),r}(t,n,i)}function wH(n,t){var e=xP(),i=n.fetch||e.fetch;return"function"==typeof i?i:Ch(i)?function(r){return mH(r,i)}:t&&t.fetch?t.fetch:function(r){return mH(r,n)}}function CH(n,t,e,i,r,s){var o=t||"Top level",a=t?"".concat(t,"."):"";for(var l in n){var c=!t&&Ch(n[l]);if(!(l in i))if(l in r)e.warn("".concat(o," loader option '").concat(a).concat(l,"' deprecated, use '").concat(r[l],"'"));else if(!c){var u=jme(l,s);e.warn("".concat(o," loader option '").concat(a).concat(l,"' not recognized. ").concat(u))}}}function jme(n,t){var s,e=n.toLowerCase(),i="",r=_H(t);try{for(r.s();!(s=r.n()).done;){var o=s.value;for(var a in o.options){if(n===a)return"Did you mean '".concat(o.id,".").concat(a,"'?");var l=a.toLowerCase();(e.startsWith(l)||l.startsWith(e))&&(i=i||"Did you mean '".concat(o.id,".").concat(a,"'?"))}}}catch(u){r.e(u)}finally{r.f()}return i}function SH(n,t){for(var e in t)e in t&&(n[e]=uH(t[e])&&uH(n[e])?n1(n1({},n[e]),t[e]):t[e])}function Hme(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.3.13";No(n,"no loader provided");var e=n.version;!t||!e||(t=MH(t),e=MH(e))}function MH(n){var t=n.split(".").map(Number);return{major:t[0],minor:t[1]}}var AH=xe(540);function $me(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return TH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return TH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function TH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function i1(n){if(AH.toArrayBuffer&&(n=AH.toArrayBuffer(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return n.buffer;if("string"==typeof n){var t=n;return(new TextEncoder).encode(t).buffer}return n&&"object"===$i(n)&&n._toArrayBuffer?n._toArrayBuffer():No(!1)}function qme(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var l,i=t.map(function(u){return u instanceof ArrayBuffer?new Uint8Array(u):u}),r=i.reduce(function(u,h){return u+h.byteLength},0),s=new Uint8Array(r),o=0,a=$me(i);try{for(a.s();!(l=a.n()).done;){var c=l.value;s.set(c,o),o+=c.byteLength}}catch(u){a.e(u)}finally{a.f()}return s.buffer}function Xme(n){return OP.apply(this,arguments)}function OP(){return(OP=An(je().mark(function n(t){var e,i,r,s,o,a,l,c,u;return je().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=[],i=[],r=!0,s=!1,p.prev=4,a=fP(t);case 6:return p.next=8,a.next();case 8:return r=(l=p.sent).done,p.next=12,l.value;case 12:if(c=p.sent,r){p.next=19;break}"string"==typeof(u=c)?i.push(u):e.push(u);case 16:r=!0,p.next=6;break;case 19:p.next=25;break;case 21:p.prev=21,p.t0=p.catch(4),s=!0,o=p.t0;case 25:if(p.prev=25,p.prev=26,r||null==a.return){p.next=30;break}return p.next=30,a.return();case 30:if(p.prev=30,!s){p.next=33;break}throw o;case 33:return p.finish(30);case 34:return p.finish(25);case 35:if(!(i.length>0)){p.next=38;break}return No(0===e.length),p.abrupt("return",i.join(""));case 38:return p.abrupt("return",qme.apply(void 0,e));case 39:case"end":return p.stop()}},n,null,[[4,21,25,35],[26,,30,34]])}))).apply(this,arguments)}var Kme=je().mark(xH);function xH(n){var e,i,r,s,o,a,l=arguments;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:i=void 0===(e=(l.length>1&&void 0!==l[1]?l[1]:{}).chunkSize)?262144:e,r=0,s=new TextEncoder;case 4:if(!(r<n.length)){u.next=12;break}return o=Math.min(n.length-r,i),a=n.slice(r,r+o),r+=o,u.next=10,s.encode(a);case 10:u.next=4;break;case 12:case"end":return u.stop()}},Kme)}var Zme=je().mark(DH);function DH(n){var e,i,r,s,o,a,c=arguments;return je().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:i=void 0===(e=(c.length>1&&void 0!==c[1]?c[1]:{}).chunkSize)?262144:e,r=0;case 3:if(!(r<n.byteLength)){h.next=14;break}return s=Math.min(n.byteLength-r,i),o=new ArrayBuffer(s),a=new Uint8Array(n,r,s),new Uint8Array(o).set(a),r+=s,h.next=12,o;case 12:h.next=3;break;case 14:case"end":return h.stop()}},Zme)}function OH(n){this.wrapped=n}function sp(n){return new OH(n)}function Db(n){var t,e;function r(o,a){try{var l=n[o](a),c=l.value,u=c instanceof OH;Promise.resolve(u?c.wrapped:c).then(function(h){u?r("return"===o?"return":"next",h):s(l.done?"return":"normal",h)},function(h){r("throw",h)})}catch(h){s("throw",h)}}function s(o,a){switch(o){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):e=null}this._invoke=function(o,a){return new Promise(function(l,c){var u={key:o,arg:a,resolve:l,reject:c,next:null};e?e=e.next=u:(t=e=u,r(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function r1(n){return function(){return new Db(n.apply(this,arguments))}}Db.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Db.prototype.next=function(n){return this._invoke("next",n)},Db.prototype.throw=function(n){return this._invoke("throw",n)},Db.prototype.return=function(n){return this._invoke("return",n)};var Qme=1048576;function Jme(n){return IP.apply(this,arguments)}function IP(){return(IP=r1(je().mark(function n(t){var i,r,s,o,a=arguments;return je().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:i=(a.length>1&&void 0!==a[1]?a[1]:{}).chunkSize||Qme,r=0;case 3:if(!(r<t.size)){c.next=13;break}return s=r+i,c.next=7,sp(IH(t,r,s));case 7:return o=c.sent,r=s,c.next=11,o;case 11:c.next=3;break;case 13:case"end":return c.stop()}},n)}))).apply(this,arguments)}function IH(n,t,e){return PP.apply(this,arguments)}function PP(){return(PP=An(je().mark(function n(t,e,i){return je().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,new Promise(function(o,a){var l=t.slice(e,i),c=new FileReader;c.onload=function(u){return o(u.target&&u.target.result)},c.onerror=function(u){return a(u)},c.readAsArrayBuffer(l)});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},n)}))).apply(this,arguments)}function PH(n){if(xb||Cme>=10){if("function"==typeof n[Symbol.asyncIterator])return function(n){return RP.apply(this,arguments)}(n);if("function"==typeof n.getIterator)return n.getIterator()}return xb?function(n){return kP.apply(this,arguments)}(n):function(n){return FP.apply(this,arguments)}(n)}function RP(){return(RP=r1(je().mark(function n(t){var e,i,r,s,o,a,l;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=!0,i=!1,u.prev=2,s=fP(t);case 4:return u.next=6,sp(s.next());case 6:return e=(o=u.sent).done,u.next=10,sp(o.value);case 10:if(a=u.sent,e){u.next=18;break}return l=a,u.next=15,i1(l);case 15:e=!0,u.next=4;break;case 18:u.next=24;break;case 20:u.prev=20,u.t0=u.catch(2),i=!0,r=u.t0;case 24:if(u.prev=24,u.prev=25,e||null==s.return){u.next=29;break}return u.next=29,sp(s.return());case 29:if(u.prev=29,!i){u.next=32;break}throw r;case 32:return u.finish(29);case 33:return u.finish(24);case 34:case"end":return u.stop()}},n,null,[[2,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function kP(){return(kP=r1(je().mark(function n(t){var e,i,s;return je().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=t.getReader(),a.prev=1;case 2:return a.next=5,sp(e.read());case 5:if(s=(i=a.sent).value,!i.done){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,i1(s);case 12:a.next=2;break;case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(1),e.releaseLock();case 19:case"end":return a.stop()}},n,null,[[1,16]])}))).apply(this,arguments)}function FP(){return(FP=r1(je().mark(function n(t){var e;return je().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,sp(t);case 2:t=r.sent;case 3:if(null===(e=t.read())){r.next=9;break}return r.next=8,i1(e);case 8:return r.abrupt("continue",3);case 9:if(!t._readableState.ended){r.next=11;break}return r.abrupt("return");case 11:return r.next=13,sp(i_e(t));case 13:r.next=3;break;case 15:case"end":return r.stop()}},n)}))).apply(this,arguments)}function i_e(n){return NP.apply(this,arguments)}function NP(){return(NP=An(je().mark(function n(t){return je().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(r){t.once("readable",r)}));case 1:case"end":return i.stop()}},n)}))).apply(this,arguments)}function r_e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof n?xH(n,t):n instanceof ArrayBuffer?DH(n,t):Lm(n)?Jme(n,t):dH(n)?PH(n):Ab(n)?PH(n.body):No(!1)}var LP="Cannot convert supplied data type";function s_e(n,t){if(t.text&&"string"==typeof n)return n;if(n instanceof ArrayBuffer){var e=n;return t.text&&!t.binary?new TextDecoder("utf8").decode(e):e}if(ArrayBuffer.isView(n)||function(t){return t&&"object"===$i(t)&&t.isBuffer}(n)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(n);var s=n.buffer,o=n.byteLength||n.length;return(0!==n.byteOffset||o!==s.byteLength)&&(s=s.slice(n.byteOffset,n.byteOffset+o)),s}throw new Error(LP)}function o_e(n,t){return BP.apply(this,arguments)}function BP(){return(BP=An(je().mark(function n(t,e){var i,r;return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!i){o.next=3;break}return o.abrupt("return",s_e(t,e));case 3:if(!Lm(t)){o.next=7;break}return o.next=6,gH(t);case 6:t=o.sent;case 7:if(!Ab(t)){o.next=21;break}return r=t,o.next=11,Dme(r);case 11:if(!e.binary){o.next=17;break}return o.next=14,r.arrayBuffer();case 14:o.t0=o.sent,o.next=20;break;case 17:return o.next=19,r.text();case 19:o.t0=o.sent;case 20:return o.abrupt("return",o.t0);case 21:if(dH(t)&&(t=r_e(t)),!gme(t)&&!mme(t)){o.next=24;break}return o.abrupt("return",Xme(t));case 24:throw new Error(LP);case 25:case"end":return o.stop()}},n)}))).apply(this,arguments)}function mc(n){return function(n){if(Array.isArray(n))return hI(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||SU(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function d_e(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?RH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):RH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function h_e(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e||(n=d_e({fetch:wH(t||{},n)},n),Array.isArray(n.loaders)||(n.loaders=null),n)}function f_e(n,t){if(!t&&n&&!Array.isArray(n))return n;var e;if(n&&(e=Array.isArray(n)?n:[n]),t&&t.loaders){var i=Array.isArray(t.loaders)?t.loaders:[t.loaders];e=e?[].concat(mc(e),mc(i)):i}return e&&e.length?e:null}var kH=new Map;function zP(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2?arguments[2]:void 0,i=e||new Set;if(n)if(FH(n))i.add(n);else if(FH(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&t&&"object"===$i(n))for(var r in n)zP(n[r],t,i);return void 0===e?Array.from(i):[]}function FH(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}var m_e=0;function __e(n){(0,n.resolve)(n.data)}var v_e=function(){function n(t){var e=t.source,i=t.name,r=void 0===i?"web-worker-".concat(m_e++):i,s=t.onMessage;wt(this,n);var o=function(n){if(No("string"==typeof n,"worker source"),n.startsWith("url(")&&n.endsWith(")")){var e=n.match(/^url\((.*)\)$/)[1];if(e&&!e.startsWith("http"))return e;n=function(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n}")}(e)}var i=kH.get(n);if(!i){var r=new Blob([n],{type:"application/javascript"});i=URL.createObjectURL(r),kH.set(n,i)}return i}(e);this.worker=new Worker(o,{name:r}),this.name=r,this.onMessage=s||__e}return Tt(n,[{key:"process",value:(t=An(je().mark(function i(r){var s=this;return je().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(l,c){s.worker.onmessage=function(h){s.onMessage({worker:s.worker,data:h.data,resolve:l,reject:c})},s.worker.onerror=function(h){var p="".concat(s.name,": WorkerThread.process() failed");h.message&&(p+=" ".concat(h.message," ").concat(h.filename,":").concat(h.lineno,":").concat(h.colno));var g=new Error(p);console.error(h),c(g)};var u=zP(r);s.worker.postMessage(r,u)}));case 1:case"end":return a.stop()}},i)})),function(i){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),n;var t}(),y_e=function(){function n(t){var e=t.source,i=t.name,r=void 0===i?"unnamed":i,s=t.maxConcurrency,o=void 0===s?1:s,a=t.onMessage,l=t.onDebug,c=void 0===l?function(){}:l,u=t.reuseWorkers,h=void 0===u||u;wt(this,n),this.source=e,this.name=r,this.maxConcurrency=o,this.onMessage=a,this.onDebug=c,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=h}return Tt(n,[{key:"destroy",value:function(){this.idleQueue.forEach(function(e){return e.destroy()}),this.isDestroyed=!0}},{key:"process",value:function(e,i){var r=this;return new Promise(function(s,o){r.jobQueue.push({data:e,jobName:i,resolve:s,reject:o}),r._startQueuedJob()})}},{key:"_startQueuedJob",value:(t=An(je().mark(function i(){var r,s;return je().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.jobQueue.length){a.next=2;break}return a.abrupt("return");case 2:if(r=this._getAvailableWorker()){a.next=5;break}return a.abrupt("return");case 5:return s=this.jobQueue.shift(),this.onDebug({message:"processing",worker:r.name,job:s.jobName,backlog:this.jobQueue.length}),a.prev=7,a.t0=s,a.next=11,r.process(s.data);case 11:a.t1=a.sent,a.t0.resolve.call(a.t0,a.t1),a.next=18;break;case 15:a.prev=15,a.t2=a.catch(7),s.reject(a.t2);case 18:return a.prev=18,this._onWorkerDone(r),a.finish(18);case 21:case"end":return a.stop()}},i,this,[[7,15,18,21]])})),function(){return t.apply(this,arguments)})},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.reuseWorkers?this.idleQueue.push(e):(e.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new v_e({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),n;var t}(),NH=function(){function n(t){var e=t.maxConcurrency,i=void 0===e?5:e,r=t.onMessage,s=void 0===r?null:r,o=t.onDebug,a=void 0===o?function(){}:o,l=t.reuseWorkers,c=void 0===l||l;wt(this,n),this.maxConcurrency=i,this.onMessage=s,this.onDebug=a,this.workerPools=new Map,this.reuseWorkers=c}return Tt(n,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),Tt(n,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug),"reuseWorkers"in e&&(this.reuseWorkers=e.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach(function(e){return e.destroy()})}},{key:"process",value:(t=An(je().mark(function i(r,s,o){var a;return je().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=this._getWorkerPool(r,s),c.abrupt("return",a.process(o));case 2:case"end":return c.stop()}},i,this)})),function(i,r,s){return t.apply(this,arguments)})},{key:"_getWorkerPool",value:function(e,i){var r=this.workerPools.get(i);return r||(r=new y_e({source:e,name:i,onMessage:w_e.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(i,r)),r}}]),n;var t}();function w_e(n,t){var i=t.data,r=t.resolve,s=t.reject;if(n)n({worker:t.worker,data:i,resolve:r,reject:s});else switch(i.type){case"done":r(i.result);break;case"error":s(i.message)}}var UP="2.3.13";function C_e(n,t,e,i){if(!NH.isSupported())return!1;var r=e&&e[n.id];return!!("local"===e.worker&&r&&r.localWorkerUrl||e.worker&&r&&r.workerUrl)&&(!n.useWorker||n.useWorker(e))}function E_e(n,t,e,i){var o=e&&e[n.id]||{},l="url(".concat("local"===(e||{}).worker?o.localWorkerUrl:o.workerUrl,")"),c=n.name,u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return n.maxConcurrency&&(t.maxConcurrency=n.maxConcurrency),n.onDebug&&(t.onDebug=n.onDebug),"reuseWorkers"in n&&(t.reuseWorkers=n.reuseWorkers),s1||(s1=new NH({onMessage:M_e})),s1.setProps(t),s1}(e);e=JSON.parse(JSON.stringify(e));var h=n.version!==UP?"(core version ".concat(UP,")"):"";return u.process(l,"".concat(c,"-worker@").concat(n.version).concat(h),{arraybuffer:i1(t),options:e,source:"loaders.gl@".concat(UP),type:"parse"})}var s1=null;function M_e(n){return HP.apply(this,arguments)}function HP(){return(HP=An(je().mark(function n(t){var e,i,r,s,o;return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=t.worker,r=t.resolve,s=t.reject,l.t0=(i=t.data).type,l.next="done"===l.t0?4:"parse"===l.t0?6:"error"===l.t0?17:19;break;case 4:return r(i.result),l.abrupt("break",19);case 6:return l.prev=6,l.next=9,o1(i.arraybuffer,i.options,i.url);case 9:e.postMessage({type:"parse-done",id:i.id,result:o=l.sent},zP(o)),l.next=16;break;case 13:l.prev=13,l.t1=l.catch(6),e.postMessage({type:"parse-error",id:i.id,message:l.t1.message});case 16:return l.abrupt("break",19);case 17:return s(i.message),l.abrupt("break",19);case 19:case"end":return l.stop()}},n,null,[[6,13]])}))).apply(this,arguments)}function LH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var BH=function(){var t=TP();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function VH(n){var i,t=BH(),e=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return LH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return LH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(n=Array.isArray(n)?n:[n]);try{var r=function(){var a=mP(i.value);t.find(function(l){return a===l})||t.unshift(a)};for(e.s();!(i=e.n()).done;)r()}catch(s){e.e(s)}finally{e.f()}}function x_e(){return BH()}function jH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function zH(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?jH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):jH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Ob(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return UH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return UH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function UH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var O_e=/\.([^.]+)$/;function I_e(n){return $P.apply(this,arguments)}function $P(){return($P=An(je().mark(function n(t){var e,i,r,s,o=arguments;return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(r=o.length>3&&void 0!==o[3]?o[3]:{},!(s=HH(t,e=o.length>1&&void 0!==o[1]?o[1]:[],zH(zH({},i=o.length>2&&void 0!==o[2]?o[2]:{}),{},{nothrow:!0}),r))){l.next=6;break}return l.abrupt("return",s);case 6:if(!Lm(t)){l.next=11;break}return l.next=9,IH(t,0,10);case 9:s=HH(t=l.sent,e,i,r);case 11:if(s||i.nothrow){l.next=13;break}throw new Error($H(t));case 13:return l.abrupt("return",s);case 14:case"end":return l.stop()}},n)}))).apply(this,arguments)}function HH(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&!Array.isArray(t))return mP(t);P_e(t=[].concat(mc(t||[]),mc(x_e())));var r=t1(n),s=r.url,o=r.type,a=R_e(t,s||i.url);if(!(a=(a=a||F_e(t,o))||N_e(t,n))&&!e.nothrow)throw new Error($H(n));return a}function $H(n){var t=t1(n),e=t.url,i=t.type,r="No valid loader found";return n&&(r+=' data: "'.concat(function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof n?n.slice(0,t):ArrayBuffer.isView(n)?GP(n.buffer,n.byteOffset,t):n instanceof ArrayBuffer?GP(n,0,t):""}(n),'", contentType: "').concat(i,'"')),e&&(r+=" url: ".concat(e)),r}function P_e(n){var e,t=Ob(n);try{for(t.s();!(e=t.n()).done;)mP(e.value)}catch(r){t.e(r)}finally{t.f()}}function R_e(n,t){var e=t&&t.match(O_e),i=e&&e[1];return i&&function(n,t){t=t.toLowerCase();var i,e=Ob(n);try{for(e.s();!(i=e.n()).done;){var o,r=i.value,s=Ob(r.extensions);try{for(s.s();!(o=s.n()).done;)if(o.value.toLowerCase()===t)return r}catch(l){s.e(l)}finally{s.f()}}}catch(l){e.e(l)}finally{e.f()}return null}(n,i)}function F_e(n,t){var i,e=Ob(n);try{for(e.s();!(i=e.n()).done;){var r=i.value;if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r}}catch(s){e.e(s)}finally{e.f()}return null}function N_e(n,t){if(!t)return null;var i,e=Ob(n);try{for(e.s();!(i=e.n()).done;){var r=i.value;if("string"==typeof t){if(L_e(t,r))return r}else if(ArrayBuffer.isView(t)){if(GH(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&GH(t,0,r))return r}}catch(o){e.e(o)}finally{e.f()}return null}function L_e(n,t){return t.testText&&t.testText(n)}function GH(n,t,e){return(Array.isArray(e.tests)?e.tests:[e.tests]).some(function(r){return function(n,t,e,i){if(i instanceof ArrayBuffer)return function(n,t,e){if(n.byteLength<(e=e||n.byteLength)||t.byteLength<e)return!1;for(var i=new Uint8Array(n),r=new Uint8Array(t),s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch($i(i)){case"function":return i(n,e);case"string":return i===GP(n,t,i.length);default:return!1}}(n,t,e,r)})}function GP(n,t,e){if(n.byteLength<t+e)return"";for(var i=new DataView(n),r="",s=0;s<e;s++)r+=String.fromCharCode(i.getUint8(t+s));return r}function o1(n,t,e,i){return WP.apply(this,arguments)}function WP(){return(WP=An(je().mark(function n(t,e,i,r){var s,o,a,l;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return No(!r||"string"!=typeof r,"parse no longer accepts final url"),e&&!Array.isArray(e)&&!gP(e)&&(r=i,i=e,e=null),u.next=4,t;case 4:return i=i||{},s=t1(t=u.sent),o=s.url,a=f_e(e,r),u.next=10,I_e(t,a,i);case 10:if(l=u.sent){u.next=13;break}return u.abrupt("return",null);case 13:return i=Bme(i,l,a,o),r=h_e({url:o,parse:o1,loaders:a},i,r),u.next=17,j_e(l,t,i,r);case 17:return u.abrupt("return",u.sent);case 18:case"end":return u.stop()}},n)}))).apply(this,arguments)}function j_e(n,t,e,i){return qP.apply(this,arguments)}function qP(){return(qP=An(je().mark(function n(t,e,i,r){return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Hme(t),o.next=3,o_e(e,t);case 3:if(e=o.sent,!t.parseTextSync||"string"!=typeof e){o.next=7;break}return i.dataType="text",o.abrupt("return",t.parseTextSync(e,i,r,t));case 7:if(!C_e(t,0,i)){o.next=11;break}return o.next=10,E_e(t,e,i);case 10:return o.abrupt("return",o.sent);case 11:if(!t.parseText||"string"!=typeof e){o.next=15;break}return o.next=14,t.parseText(e,i,r,t);case 14:return o.abrupt("return",o.sent);case 15:if(!t.parse){o.next=19;break}return o.next=18,t.parse(e,i,r,t);case 18:return o.abrupt("return",o.sent);case 19:return No(!t.parseSync),o.abrupt("return",No(!1));case 21:case"end":return o.stop()}},n)}))).apply(this,arguments)}function a1(n,t,e){return YP.apply(this,arguments)}function YP(){return(YP=An(je().mark(function n(t,e,i){var r,s;return je().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!Array.isArray(e)&&!gP(e)&&(i=e,e=null),r=wH(i||{}),s=t,"string"!=typeof t){a.next=9;break}return a.next=6,r(t);case 6:s=a.sent,a.next=10;break;case 9:t=null;case 10:if(!Lm(t)){a.next=15;break}return a.next=13,r(t);case 13:s=a.sent,t=null;case 15:return a.next=17,o1(s,e,i);case 17:return a.abrupt("return",a.sent);case 18:case"end":return a.stop()}},n)}))).apply(this,arguments)}function ou(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return WH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return WH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function WH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var qH=Math.pow(2,24)-1,X_e=Object.freeze([]),K_e=US(function(n){return n.oldViewport.equals(n.viewport)}),au=new Uint8ClampedArray(0),Z_e={data:{type:"data",value:X_e,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(t){return t&&t.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(t,e){var i=e.propName,r=e.layer,s=r.context.resourceManager,o=r.getLoadOptions(),a=r.props.loaders,l=s.contains(t);return!l&&!o&&(s.add({resourceId:t,data:a1(t,a),persistent:!1}),l=!0),l?s.subscribe({resourceId:t,onChange:function(u){return r.internalState.reloadAsyncProp(i,u)},consumerId:r.id,requestId:i}):a1(t,a,o)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ti.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Bm=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"toString",value:function(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(r){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,r),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=r)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(r)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(r){var s=this.context.viewport,l=Br(oP(tH(r,{viewport:s,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),s.pixelProjectionMatrix),3),c=l[0],u=l[1];return 2===r.length?[c,u]:[c,u,l[2]]}},{key:"unproject",value:function(r){return this.context.viewport.unproject(r)}},{key:"projectPosition",value:function(r){return function(n,t){var e=function(n){var t=Object.assign({},n),e=n.coordinateSystem,r=n.coordinateOrigin,o=n.fromCoordinateOrigin;return e===ti.DEFAULT&&(e=n.viewport.isGeospatial?ti.LNGLAT:ti.CARTESIAN),void 0===n.fromCoordinateSystem&&(t.fromCoordinateSystem=e),void 0===o&&(t.fromCoordinateOrigin=r),t.coordinateSystem=e,t}(t),i=e.viewport,o=e.modelMatrix,a=e.fromCoordinateSystem,l=e.fromCoordinateOrigin,c=R4(i,e.coordinateSystem,e.coordinateOrigin),u=c.geospatialOrigin,h=c.shaderCoordinateOrigin,p=c.offsetMode,g=tH(n,{viewport:i,modelMatrix:o,coordinateSystem:a,coordinateOrigin:l,offsetMode:p});return p&&function(n,t,e){n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2]}(g,g,i.projectPosition(u||h)),g}(r,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var r=this.props.coordinateSystem;return r===ti.DEFAULT||r===ti.LNGLAT||r===ti.CARTESIAN}},{key:"onHover",value:function(r,s){return!!this.props.onHover&&this.props.onHover(r,s)}},{key:"onClick",value:function(r,s){return!!this.props.onClick&&this.props.onClick(r,s)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(r){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return s[0]=r+1&255,s[1]=r+1>>8&255,s[2]=r+1>>8>>8&255,s}},{key:"decodePickingColor",value:function(r){Kr(r instanceof Uint8Array);var s=Br(r,3);return s[0]+256*s[1]+65536*s[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(r){var o,s=ou(this.props.extensions);try{for(s.s();!(o=s.n()).done;){var a=o.value;r=jpe(r,a.getShaders.call(this,a))}}catch(l){s.e(l)}finally{s.f()}return r}},{key:"shouldUpdateState",value:function(r){return r.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(r){var s=r.oldProps,o=r.props,l=r.changeFlags,c=this.getAttributeManager();if(l.dataChanged&&c){var u=l.dataChanged;if(Array.isArray(u)){var p,h=ou(u);try{for(h.s();!(p=h.n()).done;)c.invalidateAll(p.value)}catch(k){h.e(k)}finally{h.f()}}else c.invalidateAll()}var v=o.highlightedObjectIndex>=0||o.pickable;if((s.highlightedObjectIndex>=0||s.pickable)!==v&&c){var y=c.attributes,A=y.pickingColors||y.instancePickingColors;A&&(v&&A.constant&&(A.constant=!1,c.invalidate(A.id)),!A.value&&!v&&(A.constant=!0,A.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var s,r=ou(this.getModels());try{for(r.s();!(s=r.n()).done;)s.value.delete()}catch(l){r.e(l)}finally{r.f()}var a=this.getAttributeManager();a&&a.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(r){var o,s=ou(this.getModels());try{for(s.s();!(o=s.n()).done;)o.value.draw(r)}catch(l){s.e(l)}finally{s.f()}}},{key:"getPickingInfo",value:function(r){var s=r.info,a=s.index;return a>=0&&Array.isArray(this.props.data)&&(s.object=this.props.data[a]),s}},{key:"activateViewport",value:function(r){var s=this.internalState.viewport;this.internalState.viewport=r,(!s||!K_e({oldViewport:s,viewport:r}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",o=this.getAttributeManager();!o||("all"===r?o.invalidateAll():o.invalidate(r))}},{key:"updateAttributes",value:function(r){var o,s=ou(this.getModels());try{for(s.s();!(o=s.n()).done;)this._setModelAttributes(o.value,r)}catch(l){s.e(l)}finally{s.f()}}},{key:"_updateAttributes",value:function(r){var s=this.getAttributeManager();if(s){var o=this.getNumInstances(r),a=this.getStartIndices(r);s.update({data:r.data,numInstances:o,startIndices:a,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this,ignoreUnknownAttributes:!0});var l=s.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(l)}}},{key:"_updateAttributeTransition",value:function(){var r=this.getAttributeManager();r&&r.updateTransition()}},{key:"_updateUniformTransition",value:function(){var r=this.internalState.uniformTransitions;if(r.active){var s=r.update(),o=Object.create(this.props);for(var a in s)Object.defineProperty(o,a,{value:s[a]});return o}return this.props}},{key:"calculateInstancePickingColors",value:function(r,s){var o=s.numInstances;if(!r.constant){var a=au.length/3;if(this.internalState.usesPickingColorCache=!0,a<o){o>qH&&ei.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();for(var l=(au=ab.allocate(au,o,{size:3,copy:!0,maxCount:Math.max(o,qH)})).length/3,c=[],u=a;u<l;u++)this.encodePickingColor(u,c),au[3*u+0]=c[0],au[3*u+1]=c[1],au[3*u+2]=c[2]}r.value=au.subarray(0,3*o)}}},{key:"_setModelAttributes",value:function(r,s){var l=this.getAttributeManager().getShaderAttributes(s,r.userData.excludeAttributes||{});r.setAttributes(l)}},{key:"disablePickingIndex",value:function(r){this._disablePickingIndex(r)}},{key:"_disablePickingIndex",value:function(r){var s=this.getAttributeManager().attributes,l=s.pickingColors||s.instancePickingColors,c=l.getVertexOffset(r),u=l.getVertexOffset(r+1);l.buffer.subData({data:new Uint8Array(u-c),offset:c})}},{key:"restorePickingColors",value:function(){var r=this.getAttributeManager().attributes,a=r.pickingColors||r.instancePickingColors;this.internalState.usesPickingColorCache&&a.value.buffer!==au.buffer&&(a.value=au.subarray(0,a.value.length)),a.updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(r){return void 0!==(r=r||this.props).numInstances?r.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"===$i(n)}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"===$i(n)&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(r.data)}},{key:"getStartIndices",value:function(r){return void 0!==(r=r||this.props).startIndices?r.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){co("layer.initialize",this),this._initState(),this.initializeState(this.context);var s,r=ou(this.props.extensions);try{for(r.s();!(s=r.n()).done;){var o=s.value;o.initializeState.call(this,this.context,o)}}catch(a){r.e(a)}finally{r.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var r=this.needsUpdate();co("layer.update",this,r),r&&this._updateState()}},{key:"_updateState",value:function(){var r=this.props,s=this.context.viewport,o=this._updateUniformTransition();this.internalState.propsInTransition=o,this.context.viewport=this.internalState.viewport||s,this.props=o;try{var a=this._getUpdateParams(),l=this.getModels();if(this.context.gl)this.updateState(a);else try{this.updateState(a)}catch(g){}var u,c=ou(this.props.extensions);try{for(c.s();!(u=c.n()).done;){var h=u.value;h.updateState.call(this,a,h)}}catch(g){c.e(g)}finally{c.f()}var p=this.getModels()[0]!==l[0];this._updateModules(a,p),this.isComposite?this._renderLayers(a):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=s,this.props=r,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}},{key:"_finalize",value:function(){co("layer.finalize",this),Kr(this.internalState&&this.state),this.finalizeState(this.context);var s,r=ou(this.props.extensions);try{for(r.s();!(s=r.n()).done;){var o=s.value;o.finalizeState.call(this,o)}}catch(a){r.e(a)}finally{r.f()}}},{key:"drawLayer",value:function(r){var s=this,o=r.moduleParameters,a=void 0===o?null:o,l=r.uniforms,c=void 0===l?{}:l,u=r.parameters,h=void 0===u?{}:u;this._updateAttributeTransition();var p=this.props;this.props=this.internalState.propsInTransition||p,c.opacity=Math.pow(this.props.opacity,1/2.2);try{a&&this.setModuleParameters(a);var m=this.props.getPolygonOffset,v=m&&m(c)||[0,0];id(this.context.gl,{polygonOffset:v}),dc(this.context.gl,h,function(){var w,y={moduleParameters:a,uniforms:c,parameters:h,context:s.context},C=ou(s.props.extensions);try{for(C.s();!(w=C.n()).done;){var A=w.value;A.draw.call(s,y,A)}}catch(k){C.e(k)}finally{C.f()}s.draw(y)})}finally{this.props=p}}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(r){var s=this.internalState.changeFlags;for(var o in r)if(r[o]){var a=!1;switch(o){case"dataChanged":Array.isArray(s[o])&&(s[o]=Array.isArray(r[o])?s[o].concat(r[o]):r[o],a=!0);default:s[o]||(s[o]=r[o],a=!0)}a&&co("layer.changeFlag",this,o,r)}var l=s.dataChanged||s.updateTriggersChanged||s.propsChanged||s.extensionsChanged;s.propsOrDataChanged=l,s.somethingChanged=l||r.viewportChanged||r.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(r,s){var o=function(n,t){var e=M4({newProps:n,oldProps:t,propTypes:nP(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(n,t){if(null===t)return"oldProps is null, initial diff";var e=null,i=n.dataComparator,r=n._dataDiff;return i?i(n.data,t.data)||(e="Data comparator detected a change"):n.data!==t.data&&(e="A new data container was supplied"),e&&r&&(e=r(n.data,t.data)||e),e}(n,t),r=!1;return i||(r=function(n,t){if(null===t)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&A4(n,t,"all"))return{all:!0};var i={},r=!1;for(var s in n.updateTriggers)"all"!==s&&A4(n,t,s)&&(i[s]=!0,r=i);return r}(n,t)),{dataChanged:i,propsChanged:e,updateTriggersChanged:r,extensionsChanged:Ppe(n,t),transitionsChanged:Dpe(n,t)}}(r,s);if(o.updateTriggersChanged)for(var a in o.updateTriggersChanged)o.updateTriggersChanged[a]&&this.invalidateAttribute(a);if(o.transitionsChanged)for(var l in o.transitionsChanged)this.internalState.uniformTransitions.add(l,s[l],r[l],r.transitions[l]);return this.setChangeFlags(o)}},{key:"validateProps",value:function(){!function(n){var t=nP(n);for(var e in t){var i=t[e],r=i.validate;if(r&&!r(n[e],i))throw new Error("Invalid prop ".concat(e,": ").concat(n[e]))}}(this.props)}},{key:"setModuleParameters",value:function(r){var o,s=ou(this.getModels());try{for(s.s();!(o=s.n()).done;)o.value.updateModuleSettings(r)}catch(l){s.e(l)}finally{s.f()}}},{key:"_updateModules",value:function(r,s){var o=r.props,a=r.oldProps,l=o.autoHighlight,c=o.highlightedObjectIndex,u=o.highlightColor;if(s||a.autoHighlight!==l||a.highlightedObjectIndex!==c||a.highlightColor!==u){var h={};l||(h.pickingSelectedColor=null),Array.isArray(u)&&(h.pickingHighlightColor=u),Number.isInteger(c)&&(h.pickingSelectedColor=c>=0?this.encodePickingColor(c):null),this.setModuleParameters(h)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(r){if(!this.internalState)return!1;var s=!1;s=s||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!r.clearRedrawFlags;var o=this.getAttributeManager(),a=o&&o.getNeedsRedraw(r);return s||a}},{key:"_getAttributeManager",value:function(){return new gpe(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){Kr(!this.internalState&&!this.state),Kr(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var r=this._getAttributeManager();r&&r.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new pme({attributeManager:r,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return ei.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),r}}),this.internalState.layer=this,this.internalState.uniformTransitions=new Mpe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(r){co("layer.matched",this,this===r);var s=r.state,o=r.internalState;Kr(s&&o),this!==r&&(this.internalState=o,this.internalState.layer=this,this.state=s,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]),e}(pP);function YH(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return XH(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return XH(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function XH(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}Bm.layerName="Layer",Bm.defaultProps=Z_e;var KH=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(r){Hs(Ot(e.prototype),"setState",this).call(this,r),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(r){var s=r.info,o=s.object;return o&&o.__source&&o.__source.parent&&o.__source.parent.id===this.id?Object.assign(s,{object:o.__source.object,index:o.__source.index}):s}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(r,s){var o=this.props._subLayerProps;return s&&s.length||o&&o[r]}},{key:"getSubLayerClass",value:function(r,s){var o=this.props._subLayerProps;return o&&o[r]&&o[r].type||s}},{key:"getSubLayerRow",value:function(r,s,o){return r.__source={parent:this,object:s,index:o},r}},{key:"getSubLayerAccessor",value:function(r){if("function"==typeof r){var s={data:this.props.data,target:[]};return function(o,a){return o&&o.__source?(s.index=o.__source.index,r(o.__source.object,s)):r(o,a)}}return r}},{key:"getSubLayerProps",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.props,o=s.opacity,a=s.pickable,l=s.visible,c=s.parameters,u=s.getPolygonOffset,h=s.highlightedObjectIndex,p=s.autoHighlight,g=s.highlightColor,m=s.coordinateSystem,v=s.coordinateOrigin,y=s.wrapLongitude,C=s.positionFormat,w=s.modelMatrix,A=s.extensions,k=s._subLayerProps,B={opacity:o,pickable:a,visible:l,parameters:c,getPolygonOffset:u,highlightedObjectIndex:h,autoHighlight:p,highlightColor:g,coordinateSystem:m,coordinateOrigin:v,wrapLongitude:y,positionFormat:C,modelMatrix:w,extensions:A},U=k&&k[r.id],K=U&&U.updateTriggers,ae=r.id||"sublayer";if(U){var de=this.constructor._propTypes;for(var ne in U){var Se=de[ne];Se&&"accessor"===Se.type&&(U[ne]=this.getSubLayerAccessor(U[ne]))}}Object.assign(B,r,U,{id:"".concat(this.props.id,"-").concat(ae),updateTriggers:Object.assign({all:this.props.updateTriggers.all},r.updateTriggers,K)});var te,ve=YH(A);try{for(ve.s();!(te=ve.n()).done;){var ie=te.value,we=ie.getSubLayerProps.call(this,ie);we&&Object.assign(B,we,{updateTriggers:Object.assign(B.updateTriggers,we.updateTriggers)})}}catch(Q){ve.e(Q)}finally{ve.f()}return B}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var r=this.internalState.subLayers,s=!r||this.needsUpdate();s&&(r=kI(r=this.renderLayers(),Boolean),this.internalState.subLayers=r),co("compositeLayer.renderLayers",this,s,r);var a,o=YH(r);try{for(o.s();!(a=o.n()).done;)a.value.parent=this}catch(c){o.e(c)}finally{o.f()}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Hs(Ot(e.prototype),"isLoaded",this)&&this.getSubLayers().every(function(r){return r.isLoaded})}}]),e}(Bm);KH.layerName="CompositeLayer";var nve=/([0-9]+\.?[0-9]*)(%|px)/;function l1(n){switch($i(n)){case"number":return{position:n,relative:!1};case"string":var t=n.match(nve);if(t&&t.length>=3){var e="%"===t[2],i=parseFloat(t[1]);return{position:e?i/100:i,relative:e}}default:throw new Error("Could not parse position string ".concat(n))}}function c1(n,t){return n.relative?Math.round(n.position*t):n.position}function Ib(n,t){if(n===t)return!0;if(!n||!t)return!1;for(var e in n){var i=n[e],r=t[e];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&Ib(i,r)))return!1}return!0}function ZH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function XP(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ZH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ZH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var KP=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n);var e=t.id,i=void 0===e?null:e,r=t.x,s=void 0===r?0:r,o=t.y,a=void 0===o?0:o,l=t.width,c=void 0===l?"100%":l,u=t.height,h=void 0===u?"100%":u,p=t.projectionMatrix,g=void 0===p?null:p,m=t.fovy,v=void 0===m?50:m,y=t.near,C=void 0===y?.1:y,w=t.far,A=void 0===w?1e3:w,k=t.modelMatrix,B=void 0===k?null:k,U=t.viewportInstance,K=void 0===U?null:U,ae=t.type,de=void 0===ae?rp:ae;Kr(!K||K instanceof rp),this.viewportInstance=K,this.id=i||this.constructor.displayName||"view",this.type=de,this.props=Object.assign({},t,{id:this.id,projectionMatrix:g,fovy:v,near:C,far:A,modelMatrix:B}),this._parseDimensions({x:s,y:a,width:c,height:h}),this.equals=this.equals.bind(this),Object.seal(this)}return Tt(n,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Ib(this.props,e.props))}},{key:"makeViewport",value:function(e){var i=e.width,r=e.height,s=e.viewState;if(this.viewportInstance)return this.viewportInstance;s=this.filterViewState(s);var o=this.getDimensions({width:i,height:r});return this._getViewport(s,o)}},{key:"getViewStateId",value:function(){switch($i(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===$i(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var i=Object.assign({},e);for(var r in this.props.viewState)"id"!==r&&(i[r]=this.props.viewState[r]);return i}return e}},{key:"getDimensions",value:function(e){var i=e.width,r=e.height;return{x:c1(this._x,i),y:c1(this._y,r),width:c1(this._width,i),height:c1(this._height,r)}}},{key:"_getControllerProps",value:function(e){var i=this.props.controller;return i?!0===i?e:("function"==typeof i&&(i={type:i}),Object.assign({},e,i)):null}},{key:"_getViewport",value:function(e,i){return new(0,this.type)(XP(XP(XP({},e),this.props),i))}},{key:"_parseDimensions",value:function(e){var r=e.y,s=e.width,o=e.height;this._x=l1(e.x),this._y=l1(r),this._width=l1(s),this._height=l1(o)}}]),n}(),Pb=function(){},QH={transitionEasing:function(t){return t},transitionInterruption:1,onTransitionStart:Pb,onTransitionInterrupt:Pb,onTransitionEnd:Pb},ive=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wt(this,n),this.ControllerState=t,this.props=Object.assign({},QH,e),this.propsInTransition=null,this.transition=new _b(e.timeline),this.onViewStateChange=e.onViewStateChange||Pb,this.onStateChange=e.onStateChange||Pb,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Tt(n,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var i=!1,r=this.props;if(e=Object.assign({},QH,e),this.props=e,this._shouldIgnoreViewportChange(r,e))return i;if(this._isTransitionEnabled(e)){var s=this.transition.settings,l=Object.assign({},r,2===s.interruption?s.endProps:this.propsInTransition||r);this._triggerTransition(l,e),i=!0}else this.transition.cancel();return i}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){var i=e.transitionDuration;return(i>0||"auto"===i)&&Boolean(e.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,i){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(i):!this._isTransitionEnabled(i)||i.transitionInterpolator.arePropsEqual(e,i)}},{key:"_triggerTransition",value:function(e,i){var r=new this.ControllerState(e),s=new this.ControllerState(i).shortestPathFrom(r),o=i.transitionInterpolator,a=o.getDuration?o.getDuration(e,i):i.transitionDuration;if(0!==a){var l=i.transitionInterpolator.initializeProps(e,s);this.propsInTransition={},this.duration=a,this.transition.start({duration:a,easing:i.transitionEasing,interpolator:i.transitionInterpolator,interruption:i.transitionInterruption,startProps:l.start,endProps:l.end,onStart:i.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(i.onTransitionInterrupt),onEnd:this._onTransitionEnd(i.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(e){var i=this;return function(r){i.propsInTransition=null,i.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(r)}}},{key:"_onTransitionUpdate",value:function(e){var r=e.settings,s=r.interpolator,o=r.startProps,a=r.endProps,u=(0,r.easing)(e.time/r.duration),h=s.interpolateProps(o,a,u);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,h)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}]),n}();function JH(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function ha(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?JH(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):JH(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var Eh={transitionDuration:0},u1=function(t){return 1-(1-t)*(1-t)},jm_WHEEL=["wheel"],jm_PAN=["panstart","panmove","panend"],jm_PINCH=["pinchstart","pinchmove","pinchend"],jm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],jm_DOUBLE_TAP=["doubletap"],jm_KEYBOARD=["keydown"],ZP=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wt(this,n),Kr(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new ive(t,ha(ha({},e),{},{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(e)}return Tt(n,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){this.controllerState=new(0,this.ControllerState)(ha(ha({makeViewport:this.makeViewport},this.controllerStateProps),this._state));var r=this._eventStartBlocked;switch(e.type){case"panstart":return!r&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!r&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!r&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var i=this.controllerStateProps,o=e.offsetCenter;return[o.x-i.x,o.y-i.y]}},{key:"isPointInBounds",value:function(e,i){var r=this.controllerStateProps;if(i&&i.handled)return!1;var a=e[0]>=0&&e[0]<=r.width&&e[1]>=0&&e[1]<=r.height;return a&&i&&i.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(e){var i=e.srcEvent;return Boolean(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"blockEvents",value:function(e){var i=this,r=setTimeout(function(){i._eventStartBlocked===r&&(i._eventStartBlocked=null)},e);this._eventStartBlocked=r}},{key:"setProps",value:function(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);var i=e.inertia;!0===i&&(i=300),this.inertia=i;var r=e.scrollZoom,s=void 0===r||r,o=e.dragPan,a=void 0===o||o,l=e.dragRotate,c=void 0===l||l,u=e.doubleClickZoom,h=void 0===u||u,p=e.touchZoom,g=void 0===p||p,m=e.touchRotate,v=void 0!==m&&m,y=e.keyboard,C=void 0===y||y,w=Boolean(this.onViewStateChange);this.toggleEvents(jm_WHEEL,w&&s),this.toggleEvents(jm_PAN,w&&(a||c)),this.toggleEvents(jm_PINCH,w&&(g||v)),this.toggleEvents(jm_TRIPLE_PAN,w&&v),this.toggleEvents(jm_DOUBLE_TAP,w&&h),this.toggleEvents(jm_KEYBOARD,w&&C),this.scrollZoom=s,this.dragPan=a,this.dragRotate=c,this.doubleClickZoom=h,this.touchZoom=g,this.touchRotate=v,this.keyboard=C}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,i){var r=this;this.eventManager&&e.forEach(function(s){r._events[s]!==i&&(r._events[s]=i,i?r.eventManager.on(s,r.handleEvent):r.eventManager.off(s,r.handleEvent))})}},{key:"updateViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Object.assign({},e.getViewportProps(),i),o=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(r),o){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:a})}}},{key:"_onTransition",value:function(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}},{key:"_setInteractionState",value:function(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(e){var i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;var r=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(r=!r);var s=this.controllerState[r?"panStart":"rotateStart"]({pos:i});return this._panMove=r,this.updateViewport(s,Eh,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}},{key:"_onPanEnd",value:function(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var i=this.getCenter(e),r=this.controllerState.pan({pos:i});return this.updateViewport(r,Eh,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(e){var i=this.inertia;if(this.dragPan&&i&&e.velocity){var r=this.getCenter(e),o=this.controllerState.pan({pos:[r[0]+e.velocityX*i/2,r[1]+e.velocityY*i/2]}).panEnd();this.updateViewport(o,ha(ha({},this._getTransitionProps()),{},{transitionDuration:i,transitionEasing:u1}),{isDragging:!1,isPanning:!0})}else{var a=this.controllerState.panEnd();this.updateViewport(a,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var i=this.getCenter(e),r=this.controllerState.rotate({pos:i});return this.updateViewport(r,Eh,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(e){var i=this.inertia;if(this.dragRotate&&i&&e.velocity){var r=this.getCenter(e),o=this.controllerState.rotate({pos:[r[0]+e.velocityX*i/2,r[1]+e.velocityY*i/2]}).rotateEnd();this.updateViewport(o,ha(ha({},this._getTransitionProps()),{},{transitionDuration:i,transitionEasing:u1}),{isDragging:!1,isRotating:!0})}else{var a=this.controllerState.rotateEnd();this.updateViewport(a,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;var r=this.scrollZoom,s=r.speed,a=r.smooth,l=void 0!==a&&a,c=e.delta,u=2/(1+Math.exp(-Math.abs(c*(void 0===s?.01:s))));c<0&&0!==u&&(u=1/u);var h=this.controllerState.zoom({pos:i,scale:u});return this.updateViewport(h,ha(ha({},this._getTransitionProps({around:i})),{},{transitionDuration:l?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(e){var i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;var r=this.controllerState.rotateStart({pos:i});return this.updateViewport(r,Eh,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(e){if(!this.touchRotate||!this.isDragging())return!1;var i=this.getCenter(e);i[0]-=e.deltaX;var r=this.controllerState.rotate({pos:i});return this.updateViewport(r,Eh,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(e){if(!this.isDragging())return!1;var i=this.inertia;if(this.touchRotate&&i&&e.velocityY){var r=this.getCenter(e),s=[r[0],r[1]+=e.velocityY*i/2],o=this.controllerState.rotate({pos:s});this.updateViewport(o,ha(ha({},this._getTransitionProps()),{},{transitionDuration:i,transitionEasing:u1}),{isDragging:!1,isRotating:!0}),this.blockEvents(i)}else{var a=this.controllerState.rotateEnd();this.updateViewport(a,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(e){var i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;var r=this.controllerState.zoomStart({pos:i}).rotateStart({pos:i});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(r,Eh,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;var i=this.controllerState;if(this.touchZoom){var r=e.scale,s=this.getCenter(e);i=i.zoom({pos:s,scale:r})}return this.touchRotate&&(i=i.rotate({deltaAngleX:this._startPinchRotation-e.rotation})),this.updateViewport(i,Eh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}},{key:"_onPinchEnd",value:function(e){if(!this.isDragging())return!1;var i=this.inertia,r=this._lastPinchEvent;if(this.touchZoom&&i&&r&&e.scale!==r.scale){var s=this.getCenter(e),o=this.controllerState.rotateEnd(),a=Math.log2(e.scale),l=(a-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),c=Math.pow(2,a+l*i/2);o=o.zoom({pos:s,scale:c}).zoomEnd(),this.updateViewport(o,ha(ha({},this._getTransitionProps({around:s})),{},{transitionDuration:i,transitionEasing:u1}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(i)}else{var u=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(u,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;var r=this.isFunctionKeyPressed(e),s=this.controllerState.zoom({pos:i,scale:r?.5:2});return this.updateViewport(s,this._getTransitionProps({around:i}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var u,i=this.isFunctionKeyPressed(e),r=this.keyboard,s=r.zoomSpeed,o=r.moveSpeed,a=r.rotateSpeedX,l=r.rotateSpeedY,c=this.controllerState,h={};switch(e.srcEvent.code){case"Minus":u=i?c.zoomOut(s).zoomOut(s):c.zoomOut(s),h.isZooming=!0;break;case"Equal":u=i?c.zoomIn(s).zoomIn(s):c.zoomIn(s),h.isZooming=!0;break;case"ArrowLeft":i?(u=c.rotateLeft(a),h.isRotating=!0):(u=c.moveLeft(o),h.isPanning=!0);break;case"ArrowRight":i?(u=c.rotateRight(a),h.isRotating=!0):(u=c.moveRight(o),h.isPanning=!0);break;case"ArrowUp":i?(u=c.rotateUp(l),h.isRotating=!0):(u=c.moveUp(o),h.isPanning=!0);break;case"ArrowDown":i?(u=c.rotateDown(l),h.isRotating=!0):(u=c.moveDown(o),h.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),h),!0}},{key:"_getTransitionProps",value:function(){return Eh}},{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}}]),n}();class sve extends u5{constructor(t=0,e=0){super(2),sd(t)&&1===arguments.length?this.copy(t):(Li.debug&&(Vr(t),Vr(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return Li.debug&&(Vr(t.x),Vr(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return N4(this,this,t),this.check()}transformAsVector(t){return g5(this,this,t),this.check()}transformByMatrix3(t){return function(n,t,e){var i=t[0],r=t[1];n[0]=e[0]*i+e[3]*r+e[6],n[1]=e[1]*i+e[4]*r+e[7]}(this,this,t),this.check()}transformByMatrix2x3(t){return function(n,t,e){var i=t[0],r=t[1];n[0]=e[0]*i+e[2]*r+e[4],n[1]=e[1]*i+e[3]*r+e[5]}(this,this,t),this.check()}transformByMatrix2(t){return function(n,t,e){var i=t[0],r=t[1];n[0]=e[0]*i+e[2]*r,n[1]=e[1]*i+e[3]*r}(this,this,t),this.check()}}var e8=function(){function n(t){wt(this,n),Kr(Number.isFinite(t.width),"`width` must be supplied"),Kr(Number.isFinite(t.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(t)}return Tt(n,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),n}();function t8(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return n8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function n8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var ave=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var e=t,i=e.compare,r=e.extract,s=e.required;this._propsToCompare=i,this._propsToExtract=r,this._requiredProps=s}return Tt(n,[{key:"arePropsEqual",value:function(e,i){var s,r=t8(this._propsToCompare||Object.keys(i));try{for(r.s();!(s=r.n()).done;){var o=s.value;if(!(o in e)||!(o in i)||!lb(e[o],i[o]))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"initializeProps",value:function(e,i){var r;if(this._propsToExtract){var l,s={},o={},a=t8(this._propsToExtract);try{for(a.s();!(l=a.n()).done;){var c=l.value;s[c]=e[c],o[c]=i[c]}}catch(u){a.e(u)}finally{a.f()}r={start:s,end:o}}else r={start:e,end:i};return this._checkRequiredProps(r.start),this._checkRequiredProps(r.end),r}},{key:"interpolateProps",value:function(e,i,r){return i}},{key:"getDuration",value:function(e,i){return i.transitionDuration}},{key:"_checkRequiredProps",value:function(e){!this._requiredProps||this._requiredProps.forEach(function(i){var r=e[i];Kr(Number.isFinite(r)||Array.isArray(r),"".concat(i," is required for transition"))})}}]),n}();function i8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function r8(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):i8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function s8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var o8=["longitude","latitude","zoom","bearing","pitch"],hve=["longitude","latitude","zoom"],d1=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,e);var s=Array.isArray(r)?r:r.transitionProps;return(i=t.call(this,s||{compare:o8,extract:o8,required:hve})).opts=r,i}return Tt(e,[{key:"initializeProps",value:function(r,s){var o=Hs(Ot(e.prototype),"initializeProps",this).call(this,r,s),a=this.opts,l=a.makeViewport,c=a.around;if(l&&c){var u=l(r),h=l(s),p=u.unproject(c);o.start.around=c,Object.assign(o.end,{around:h.project(p),aroundLngLat:p,width:s.width,height:s.height})}return o}},{key:"interpolateProps",value:function(r,s,o){var c,a={},l=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return s8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(this._propsToExtract);try{for(l.s();!(c=l.n()).done;){var u=c.value;a[u]=AS(r[u]||0,s[u]||0,o)}}catch(y){l.e(y)}finally{l.f()}if(s.aroundLngLat){var g=Br(this.opts.makeViewport(r8(r8({},s),a)).getMapCenterByLngLatPosition({lngLat:s.aroundLngLat,pos:AS(r.around,s.around,o)}),2),v=g[1];a.longitude=g[0],a.latitude=v}return a}}]),e}(ave);function a8(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}var ud={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},pve={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new d1(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:1},l8=function(t){return Math.pow(2,t)},c8=function(n){ir(e,n);var t=a8(e);function e(i){var r,s=i.makeViewport,o=i.width,a=i.height,l=i.orbitAxis,c=void 0===l?ud.orbitAxis:l,u=i.rotationX,h=void 0===u?ud.rotationX:u,p=i.rotationOrbit,g=void 0===p?ud.rotationOrbit:p,m=i.target,v=void 0===m?ud.target:m,y=i.zoom,C=void 0===y?ud.zoom:y,w=i.minRotationX,A=void 0===w?ud.minRotationX:w,k=i.maxRotationX,B=void 0===k?ud.maxRotationX:k,U=i.minZoom,K=void 0===U?ud.minZoom:U,ae=i.maxZoom,de=void 0===ae?ud.maxZoom:ae,ne=i.startPanPosition,Se=i.startTarget,ve=i.startRotatePos,te=i.startRotationX,ie=i.startRotationOrbit,we=i.startZoomPosition,Q=i.startZoom;return wt(this,e),(r=t.call(this,{width:o,height:a,orbitAxis:c,rotationX:h,rotationOrbit:g,target:v,zoom:C,minRotationX:A,maxRotationX:B,minZoom:K,maxZoom:de}))._state={startPanPosition:ne,startTarget:Se,startRotatePos:ve,startRotationX:te,startRotationOrbit:ie,startZoomPosition:we,startZoom:Q},r.makeViewport=s,r}return Tt(e,[{key:"panStart",value:function(r){return this._getUpdatedState({startPanPosition:r.pos,startTarget:this._viewportProps.target})}},{key:"pan",value:function(r){var a=this._state,l=a.startPanPosition,c=a.startTarget,u=new sve(r.pos).subtract(l);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:c,pixelOffset:u})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(r){return this._getUpdatedState({startRotatePos:r.pos,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(r){var C,s=r.pos,o=r.deltaAngleX,a=void 0===o?0:o,l=r.deltaAngleY,c=void 0===l?0:l,u=this._state,h=u.startRotatePos,p=u.startRotationX,g=u.startRotationOrbit,m=this._viewportProps,v=m.width,y=m.height;if(!h||!Number.isFinite(p)||!Number.isFinite(g))return this;if(s){var w=(s[0]-h[0])/v;(p<-90||p>90)&&(w*=-1),C={rotationX:p+(s[1]-h[1])/y*180,rotationOrbit:g+180*w}}else C={rotationX:p+c,rotationOrbit:g+a};return this._getUpdatedState(C)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(r){var s=r.getViewportProps(),o=Object.assign({},this._viewportProps),a=o.rotationOrbit;return Math.abs(a-s.rotationOrbit)>180&&(o.rotationOrbit=a<0?a+360:a-360),o}},{key:"zoomStart",value:function(r){return this._getUpdatedState({startZoomPosition:r.pos,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(r){var s=r.pos,o=r.startPos,a=r.scale,l=this._viewportProps,c=l.zoom,u=l.width,h=l.height,p=l.target,g=this._state,m=g.startZoom,v=g.startZoomPosition,y=g.startTarget;Number.isFinite(m)||(m=c,y=p,v=o||s);var C=this._calculateNewZoom({scale:a,startZoom:m}),w=l8(m),A=l8(C);return this._getUpdatedState({zoom:C,target:this._calculateNewTarget({startTarget:y,zoom:C,pixelOffset:[(u/2-v[0])*(A/w-1),(h/2-v[1])*(A/w-1)]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:r})})}},{key:"zoomOut",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/r})})}},{key:"moveLeft",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[-r,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"moveRight",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[r,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"moveUp",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[0,-r];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"moveDown",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[0,r];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"rotateLeft",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-r})}},{key:"rotateRight",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+r})}},{key:"rotateUp",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-r})}},{key:"rotateDown",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+r})}},{key:"_calculateNewZoom",value:function(r){var s=r.scale,o=r.startZoom,a=this._viewportProps,l=a.maxZoom,c=a.minZoom;return Number.isFinite(o)||(o=this._viewportProps.zoom),np(o+Math.log2(s),c,l)}},{key:"_calculateNewTarget",value:function(r){var s=r.startTarget,o=r.zoom,a=r.pixelOffset,l=Object.assign({},this._viewportProps);Number.isFinite(o)&&(l.zoom=o),s&&(l.target=s);var c=this.makeViewport(l),u=c.project(l.target);return c.unproject([u[0]-a[0],u[1]-a[1],u[2]])}},{key:"_getUpdatedState",value:function(r){return new e(Object.assign({},this._viewportProps,this._state,r))}},{key:"_applyConstraints",value:function(r){var l=r.maxRotationX,c=r.minRotationX,u=r.rotationOrbit;return r.zoom=np(r.zoom,r.minZoom,r.maxZoom),r.rotationX=np(r.rotationX,c,l),(u<-180||u>180)&&(r.rotationOrbit=function(n,t){var e=n%360;return e<0?360+e:e}(u+180)-180),r}}]),e}(e8),gve=function(n){ir(e,n);var t=a8(e);function e(i){return wt(this,e),t.call(this,c8,i)}return Tt(e,[{key:"_getTransitionProps",value:function(){return pve}}]),e}(ZP);var vve={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new d1(["target","zoom"]),transitionInterruption:1},yve=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(i){return wt(this,e),i.dragMode=i.dragMode||"pan",t.call(this,c8,i)}return Tt(e,[{key:"_onPanRotate",value:function(r){return!1}},{key:"_getTransitionProps",value:function(){return vve}}]),e}(ZP);function u8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function d8(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?u8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):u8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function h8(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}var wve=(new tn).lookAt({eye:[0,0,1]});function Cve(n){var t=n.width,e=n.height,i=n.near,r=n.far;return t=t||1,e=e||1,(new tn).ortho({left:-t/2,right:t/2,bottom:-e/2,top:e/2,near:i,far:r})}var Eve=function(n){ir(e,n);var t=h8(e);function e(i){wt(this,e);var r=i.width,s=i.height,o=i.near,a=void 0===o?.1:o,l=i.far,c=void 0===l?1e3:l,u=i.zoom,h=void 0===u?0:u,p=i.target,g=void 0===p?[0,0,0]:p,m=i.flipY,v=void 0===m||m,y=Math.pow(2,h);return t.call(this,d8(d8({},i),{},{longitude:null,position:g,viewMatrix:wve.clone().scale([y,y*(v?-1:1),y]),projectionMatrix:Cve({width:r,height:s,near:a,far:c}),zoom:h}))}return e}(rp),f8=function(n){ir(e,n);var t=h8(e);function e(i){return wt(this,e),t.call(this,Object.assign({},i,{type:Eve}))}return Tt(e,[{key:"controller",get:function(){return this._getControllerProps({type:yve})}}]),e}(KP);function p8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function g8(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?p8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):p8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function m8(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}f8.displayName="OrthographicView";var h1=Math.PI/180;function Mve(n){var t=n.height,i=n.orbitAxis,r=n.rotationX,s=n.rotationOrbit,o=n.zoom,a=.5/Math.tan(n.fovy*h1/2),l="Z"===i?[0,0,1]:[0,1,0],c="Z"===i?[0,-a,0]:[0,0,a],u=(new tn).lookAt({eye:c,up:l});u.rotateX(r*h1),"Z"===i?u.rotateZ(s*h1):u.rotateY(s*h1);var h=Math.pow(2,o)/(t||1);return u.scale(h),u}var Ave=function(n){ir(e,n);var t=m8(e);function e(i){wt(this,e);var r=i.height,s=i.fovy,o=void 0===s?50:s,a=i.orbitAxis,l=void 0===a?"Z":a,c=i.target,u=void 0===c?[0,0,0]:c,h=i.rotationX,p=void 0===h?0:h,g=i.rotationOrbit,m=void 0===g?0:g,v=i.zoom,y=void 0===v?0:v;return t.call(this,g8(g8({},i),{},{longitude:null,viewMatrix:Mve({height:r,fovy:o,orbitAxis:l,rotationX:p,rotationOrbit:m,zoom:y}),fovy:o,position:u,zoom:y}))}return e}(rp),_8=function(n){ir(e,n);var t=m8(e);function e(i){return wt(this,e),t.call(this,Object.assign({},i,{type:Ave}))}return Tt(e,[{key:"controller",get:function(){return this._getControllerProps({type:gve})}}]),e}(KP);_8.displayName="OrbitView";var Tve=[255,255,255],Dve=0,v8=function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n);var e=t.color,i=void 0===e?Tve:e,r=t.intensity,s=void 0===r?1:r;this.id=t.id||"ambient-".concat(Dve++),this.color=i,this.intensity=s,this.type="ambient"},Ove=[255,255,255],Pve=[0,0,-1],Rve=0,y8=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n);var e=t.color,i=void 0===e?Ove:e,r=t.intensity,s=void 0===r?1:r,o=t.direction,a=void 0===o?Pve:o,l=t._shadow,c=void 0!==l&&l;this.id=t.id||"directional-".concat(Rve++),this.color=i,this.intensity=s,this.type="directional",this.direction=new lo(a).normalize().toArray(),this.shadow=c}return Tt(n,[{key:"getProjectedLight",value:function(){return this}}]),n}(),b8=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n);var e=t.id,i=void 0===e?"effect":e;this.id=i,this.props={},Object.assign(this.props,t)}return Tt(n,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),n}();function QP(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return w8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return w8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function w8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var JP=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"render",value:function(r){return id(this.gl,{framebuffer:r.target}),this._drawLayers(r)}},{key:"_drawLayers",value:function(r){var s=r.viewports,o=r.views,a=r.onViewportActive,l=r.clearCanvas,u=this.gl;(void 0===l||l)&&function(n){id(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(u);var g,h=[],p=QP(s);try{for(p.s();!(g=p.n()).done;){var m=g.value,v=m.viewport||m,y=o&&o[v.id];a(v);var C=this._getDrawLayerParams(v,r);r.view=y;var k,A=QP(v.subViewports||[v]);try{for(A.s();!(k=A.n()).done;){r.viewport=k.value;var U=this._drawLayersInViewport(u,r,C);h.push(U)}}catch(K){A.e(K)}finally{A.f()}}}catch(K){p.e(K)}finally{p.f()}return h}},{key:"_getDrawLayerParams",value:function(r,s){for(var o=s.layers,a=s.pass,l=void 0===a?"unknown":a,c=s.layerFilter,u=s.effects,h=s.moduleParameters,p=[],g=C8(),m=0;m<o.length;m++){var v=o[m],y=this._shouldDrawLayer(v,r,l,c),w={shouldDrawLayer:y,layerRenderIndex:g(v,y)};y&&(w.moduleParameters=this._getModuleParameters(v,u,l,h),w.layerParameters=this.getLayerParameters(v,m)),p[m]=w}return p}},{key:"_drawLayersInViewport",value:function(r,s,o){var a=s.layers,l=s.onError,c=s.viewport,u=s.view,h=function(n,t){var i=n.canvas?n.canvas.clientHeight||n.canvas.height:100,r=t.viewport,s=wm(n);return[r.x*s,(i-r.y-r.height)*s,r.width*s,r.height*s]}(r,{viewport:c});if(u&&u.props.clear){var p=!0===u.props.clear?{color:!0,depth:!0}:u.props.clear;dc(r,{scissorTest:!0,scissor:h},function(){return MI(r,p)})}var g={totalCount:a.length,visibleCount:0,compositeCount:0,pickableCount:0};id(r,{viewport:h});for(var m=0;m<a.length;m++){var v=a[m],y=o[m],C=y.shouldDrawLayer,w=y.layerRenderIndex,A=y.moduleParameters,k=y.layerParameters;if(C&&v.props.pickable&&g.pickableCount++,v.isComposite)g.compositeCount++;else if(C){g.visibleCount++,A.viewport=c;try{v.drawLayer({moduleParameters:A,uniforms:{layerIndex:w},parameters:k})}catch(B){l?l(B,v):ei.error("error during drawing of ".concat(v),B)()}}}return g}},{key:"shouldDrawLayer",value:function(r){return!0}},{key:"getModuleParameters",value:function(r,s){return null}},{key:"getLayerParameters",value:function(r,s){return r.props.parameters}},{key:"_shouldDrawLayer",value:function(r,s,o,a){var l=this.shouldDrawLayer(r)&&r.props.visible;return l&&a&&(l=a({layer:r,viewport:s,isPicking:o.startsWith("picking"),renderPass:o})),l&&r.activateViewport(s),l}},{key:"_getModuleParameters",value:function(r,s,o,a){var l=Object.assign(Object.create(r.props),{autoWrapLongitude:r.wrapLongitude,viewport:r.context.viewport,mousePosition:r.context.mousePosition,pickingActive:0,devicePixelRatio:wm(this.gl)});if(s){var u,c=QP(s);try{for(c.s();!(u=c.n()).done;)Object.assign(l,u.value.getModuleParameters(r))}catch(p){c.e(p)}finally{c.f()}}return Object.assign(l,this.getModuleParameters(r,s),a)}}]),e}(function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wt(this,n);var i=e.id,r=void 0===i?"pass":i;this.id=r,this.gl=t,this.props={},Object.assign(this.props,e)}return Tt(n,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),n}());function C8(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e={},i=function r(s,o){var u,a=s.props._offset,l=s.id,c=s.parent&&s.parent.id;if(c&&!(c in t)&&r(s.parent,!1),c in e){var h=e[c]=e[c]||C8(t[c],t);u=h(s,o),e[l]=h}else Number.isFinite(a)?(u=a+(t[c]||0),e[l]=null):u=n;return o&&u>=n&&(n=u+1),t[l]=u,u};return i}function E8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function S8(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?E8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):E8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var Uve=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(i,r){var s,o,a;return wt(this,e),(a=t.call(this,i,r)).shadowMap=new Na(i,{width:1,height:1,parameters:(s={},Yt(s,10241,9729),Yt(s,10240,9729),Yt(s,10242,33071),Yt(s,10243,33071),s)}),a.depthBuffer=new Mm(i,{format:33189,width:1,height:1}),a.fbo=new ds(i,{id:"shadowmap",width:1,height:1,attachments:(o={},Yt(o,36064,a.shadowMap),Yt(o,36096,a.depthBuffer),o)}),a}return Tt(e,[{key:"render",value:function(r){var s=this,o=this.fbo;dc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},function(){var a=r.viewports[0],l=wm(s.gl),c=a.width*l,u=a.height*l;(c!==o.width||u!==o.height)&&o.resize({width:c,height:u}),Hs(Ot(e.prototype),"render",s).call(s,S8(S8({},r),{},{target:o,pass:"shadow"}))})}},{key:"shouldDrawLayer",value:function(r){return!1!==r.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),e}(JP);var $ve=Object.keys(ti).map(function(n){return"const int COORDINATE_SYSTEM_".concat(n," = ").concat(ti[n],";")}).join(""),Gve=Object.keys(tu).map(function(n){return"const int PROJECTION_MODE_".concat(n," = ").concat(tu[n],";")}).join("");const Wve="".concat($ve,"\n").concat(Gve,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");var qve={};const eR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:Wve,getUniforms:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qve;return n.viewport?yge(n):{}}};function M8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var Jve=US(function(n){var e=n.center;return new tn(n.viewport.viewProjectionMatrix).invert().transform(e)}),eye=US(function(n){var l,t=n.viewport,e=n.shadowMatrices,i=[],r=t.pixelUnprojectionMatrix,s=t.isGeospatial?void 0:1,o=[[0,0,s],[t.width,0,s],[0,t.height,s],[t.width,t.height,s],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(function(u){return function(n,t){var e=Br(n,3),s=e[2],o=wb([e[0],e[1],s],t);return Number.isFinite(s)?o:[o[0],o[1],0]}(u,r)}),a=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return M8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return M8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(e);try{var c=function(){var h=l.value,p=h.clone().translate(new lo(t.center).negate()),g=o.map(function(v){return p.transform(v)}),m=(new tn).ortho({left:Math.min.apply(Math,mc(g.map(function(v){return v[0]}))),right:Math.max.apply(Math,mc(g.map(function(v){return v[0]}))),bottom:Math.min.apply(Math,mc(g.map(function(v){return v[1]}))),top:Math.max.apply(Math,mc(g.map(function(v){return v[1]}))),near:Math.min.apply(Math,mc(g.map(function(v){return-v[2]}))),far:Math.max.apply(Math,mc(g.map(function(v){return-v[2]})))});i.push(m.multiplyRight(h))};for(a.s();!(l=a.n()).done;)c()}catch(u){a.e(u)}finally{a.f()}return i}),tye=[0,0,0,1],nye=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function oye(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||tye,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},i=Jve({viewport:n.viewport,center:t.project_uCenter}),r=[],s=eye({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice(),o=0;o<n.shadowMatrices.length;o++){var a=s[o],l=a.clone().translate(new lo(n.viewport.center).negate());t.project_uCoordinateSystem===ti.LNGLAT&&t.project_uProjectionMode===tu.WEB_MERCATOR?(s[o]=l,r[o]=i):(s[o]=a.clone().multiplyRight(nye),r[o]=l.transform(i))}for(var c=0;c<s.length;c++)e["shadow_uViewProjectionMatrices[".concat(c,"]")]=s[c],e["shadow_uProjectCenters[".concat(c,"]")]=r[c],e["shadow_uShadowMap".concat(c)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[c]:n.dummyShadowMap;return e}const tR={name:"shadow",dependencies:[eR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){var i={},r=t.shadowEnabled,s=void 0===r||r;return Object.assign(i,s&&t.shadowMatrices&&t.shadowMatrices.length>0?oye(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),i}return{}}};function A8(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return T8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return T8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function T8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var uye={color:[255,255,255],intensity:1},x8=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],dye=[0,0,0,200/255],nR=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(i){var r;for(var s in wt(this,e),(r=t.call(this,i)).ambientLight=null,r.directionalLights=[],r.pointLights=[],r.shadowColor=dye,r.shadowPasses=[],r.shadowMaps=[],r.dummyShadowMap=null,r.shadow=!1,r.programManager=null,i){var o=i[s];switch(o.type){case"ambient":r.ambientLight=o;break;case"directional":r.directionalLights.push(o);break;case"point":r.pointLights.push(o)}}return r._applyDefaultLights(),r.shadow=r.directionalLights.some(function(a){return a.shadow}),r}return Tt(e,[{key:"preRender",value:function(r,s){var o=s.layers,a=s.layerFilter,l=s.viewports,c=s.onViewportActive,u=s.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(r),this.programManager||(this.programManager=gb.getDefaultProgramManager(r),tR&&this.programManager.addDefaultModule(tR)),this.dummyShadowMap||(this.dummyShadowMap=new Na(r,{width:1,height:1}));for(var h=0;h<this.shadowPasses.length;h++)this.shadowPasses[h].render({layers:o,layerFilter:a,viewports:l,onViewportActive:c,views:u,moduleParameters:{shadowLightId:h,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}},{key:"getModuleParameters",value:function(r){var s=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return s.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(function(o){return o.getProjectedLight({layer:r})}),pointLights:this.pointLights.map(function(o){return o.getProjectedLight({layer:r})})},s}},{key:"cleanup",value:function(){var s,r=A8(this.shadowPasses);try{for(r.s();!(s=r.n()).done;)s.value.delete()}catch(a){r.e(a)}finally{r.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(tR),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var o,r=[],s=A8(this.directionalLights);try{for(s.s();!(o=s.n()).done;){var a=o.value,l=(new tn).lookAt({eye:new lo(a.direction).negate()});r.push(l)}}catch(c){s.e(c)}finally{s.f()}return r}},{key:"_createShadowPasses",value:function(r){for(var s=0;s<this.directionalLights.length;s++){var o=new Uve(r);this.shadowPasses[s]=o,this.shadowMaps[s]=o.shadowMap}}},{key:"_applyDefaultLights",value:function(){!this.ambientLight&&0===this.pointLights.length&&0===this.directionalLights.length&&(this.ambientLight=new v8(uye),this.directionalLights.push(new y8(x8[0]),new y8(x8[1])))}}]),e}(b8);let hye=1,fye=1;class D8{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=t,o=hye++,a={time:0,delay:e,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(t){this.channels.delete(t);for(const[e,i]of this.animations)i.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const r of e)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const i=fye++;return this.animations.set(i,{animation:t,channel:e}),t.setTime(this.getTime(e)),i}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const i=e-t.delay;i>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}function O8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var mye=function(){function n(t,e,i){wt(this,n),this.id=t,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(e)}return Tt(n,[{key:"subscribe",value:function(e){this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var e=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(function(){return e.getData()})}},{key:"setData",value:function(e,i){var r=this;if(e!==this._data||i){this._data=e;var s=++this._loadCount,o=e;"string"==typeof e&&(o=a1(e)),o instanceof Promise?(this.isLoaded=!1,this._loader=o.then(function(u){r._loadCount===s&&(r.isLoaded=!0,r._error=null,r._content=u)}).catch(function(u){r._loadCount===s&&(r.isLoaded=!0,r._error=u||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);var l,a=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return O8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(this._subscribers);try{for(a.s();!(l=a.n()).done;)l.value.onChange(this.getData())}catch(u){a.e(u)}finally{a.f()}}}}]),n}(),_ye=function(){function n(t){var e=t.gl,i=t.protocol;wt(this,n),this.protocol=i||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return Tt(n,[{key:"contains",value:function(e){return!!e.startsWith(this.protocol)||e in this._resources}},{key:"add",value:function(e){var i=e.resourceId,r=e.data,s=e.forceUpdate,a=e.persistent,l=void 0===a||a,c=this._resources[i];c?c.setData(r,void 0!==s&&s):(c=new mye(i,r,this._context),this._resources[i]=c),c.persistent=l}},{key:"remove",value:function(e){var i=this._resources[e];i&&(i.delete(),delete this._resources[e])}},{key:"unsubscribe",value:function(e){var i=e.consumerId,r=this._consumers[i];if(r){for(var s in r){var o=r[s];o.resource&&o.resource.unsubscribe(o)}delete this._consumers[i],this.prune()}}},{key:"subscribe",value:function(e){var i=e.resourceId,r=e.onChange,s=e.consumerId,o=e.requestId,a=void 0===o?"default":o,l=this._resources,c=this.protocol;i.startsWith(c)&&(l[i=i.replace(c,"")]||this.add({resourceId:i,data:null,persistent:!1}));var u=l[i];if(this._track(s,a,u,r),u)return u.getData()}},{key:"prune",value:function(){var e=this;this._pruneRequest||(this._pruneRequest=setTimeout(function(){return e._prune()},0))}},{key:"finalize",value:function(){for(var e in this._resources)this._resources[e].delete()}},{key:"_track",value:function(e,i,r,s){var o=this._consumers,a=o[e]=o[e]||{},l=a[i]||{};l.resource&&(l.resource.unsubscribe(l),l.resource=null,this.prune()),r&&(a[i]=l,l.onChange=s,l.resource=r,r.subscribe(l))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var e=0,i=Object.keys(this._resources);e<i.length;e++){var r=i[e],s=this._resources[r];!s.persistent&&!s.inUse()&&(s.delete(),delete this._resources[r])}}}]),n}();function I8(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return P8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return P8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function P8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var Cye=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},eR],Eye=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Sye(n){var i,t=gb.getDefaultProgramManager(n),e=I8(Cye);try{for(e.s();!(i=e.n()).done;)t.addDefaultModule(i.value)}catch(l){e.e(l)}finally{e.f()}var o,s=I8(Eye);try{for(s.s();!(o=s.n()).done;)t.addShaderHook(o.value)}catch(l){s.e(l)}finally{s.f()}return t}function Rb(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return R8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function R8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var Aye="layerManager.setLayers",xye=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),f1=function(t){return t instanceof Bm?"".concat(t):t?"invalid":"null"},Dye=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.deck,r=e.stats,s=e.viewport,o=e.timeline;wt(this,n),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new _ye({gl:t,protocol:"deck://"}),this.context=Object.assign({},xye,{layerManager:this,gl:t,deck:i,programManager:t&&Sye(t),stats:r||new vI({id:"deck.gl"}),viewport:s||new rp({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new D8,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Tt(n,[{key:"finalize",value:function(){this.resourceManager.finalize();var i,e=Rb(this.layers);try{for(e.s();!(i=e.n()).done;)this._finalizeLayer(i.value)}catch(s){e.e(s)}finally{e.f()}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},i=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var s,r=Rb(this.layers);try{for(r.s();!(s=r.n()).done;){var o=s.value,a=o.getNeedsRedraw(e);i=i||a}}catch(l){r.e(l)}finally{r.f()}return i}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.layerIds,r=void 0===i?null:i;return r?this.layers.filter(function(s){return r.find(function(o){return 0===s.id.indexOf(o)})}):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers),"onError"in e&&(this._onError=e.onError)}},{key:"setLayers",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i||e!==this.lastRenderedLayers;if(co(Aye,this,r,e),!r)return this;this.lastRenderedLayers=e;var o,s=Rb(e=kI(e,Boolean));try{for(s.s();!(o=s.n()).done;){var a=o.value;a.context=this.context}}catch(l){s.e(l)}finally{s.f()}return this._updateLayers(this.layers,e),this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this.lastRenderedLayers,!0))}},{key:"activateViewport",value:function(e){return co("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}},{key:"_handleError",value:function(e,i,r){this._onError?this._onError(i,r):ei.error("error during ".concat(e," of ").concat(f1(r)),i)()}},{key:"_updateLayers",value:function(e,i){var o,r={},s=Rb(e);try{for(s.s();!(o=s.n()).done;){var a=o.value;r[a.id]?ei.warn("Multiple old layers with same id ".concat(f1(a)))():r[a.id]=a}}catch(g){s.e(g)}finally{s.f()}var l=[];this._updateSublayersRecursively(i,r,l),this._finalizeOldLayers(r);for(var c=!1,u=0,h=l;u<h.length;u++)if(h[u].hasUniformTransition()){c=!0;break}this._needsUpdate=c,this.layers=l}},{key:"_updateSublayersRecursively",value:function(e,i,r){var o,s=Rb(e);try{for(s.s();!(o=s.n()).done;){var a=o.value;a.context=this.context;var l=i[a.id];null===l&&ei.warn("Multiple new layers with same id ".concat(f1(a)))(),i[a.id]=null;var c=null;try{this._debug&&l!==a&&a.validateProps(),l?(this._transferLayerState(l,a),this._updateLayer(a)):this._initializeLayer(a),r.push(a),c=a.isComposite&&a.getSubLayers()}catch(u){this._handleError("matching",u,a)}c&&this._updateSublayersRecursively(c,i,r)}}catch(u){s.e(u)}finally{s.f()}}},{key:"_finalizeOldLayers",value:function(e){for(var i in e){var r=e[i];r&&this._finalizeLayer(r)}}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle="Initialized"}catch(i){this._handleError("initialization",i,e)}}},{key:"_transferLayerState",value:function(e,i){i._transferState(e),i.lifecycle="Matched. State transferred from previous layer",i!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}},{key:"_updateLayer",value:function(e){try{e._update()}catch(i){this._handleError("update",i,e)}}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(f1(e)),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(i){this._handleError("finalization",i,e)}}}]),n}();function k8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function kb(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?k8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):k8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var Oye=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,n),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}return Tt(n,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},i=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),i}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var i=this.controllers[e];i&&i.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter(function(i){return i.containsPixel(e)}):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach(function(i){e[i.id]=i}),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find(function(i){return i.id===e}):e}},{key:"getViewState",value:function(e){var i=this.getView(e),r=i&&this.viewState[i.getViewStateId()]||this.viewState;return i?i.filterViewState(r):r}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,i){for(var r=this.getViewports(),s={x:e[0],y:e[1]},o=r.length-1;o>=0;--o){var a=r[o];if(a.containsPixel(s)){var l=e.slice();return l[0]-=a.x,l[1]-=a.y,a.unproject(l,i)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,i){Kr(Number.isFinite(e)&&Number.isFinite(i)),(e!==this.width||i!==this.height)&&(this.width=e,this.height=i,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=kI(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!Ib(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ei.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,i){i.viewId=e,this._eventCallbacks.onViewStateChange(i)}},{key:"_createController",value:function(e,i){return new(0,i.type)(kb({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,i.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(a){return e._getViewport(a,{width:a.width,height:a.height})}},i))}},{key:"_updateController",value:function(e,i,r,s){var o=e.controller;return o?(o=kb(kb(kb(kb({},i),e.props),o),{},{id:e.id,x:r.x,y:r.y,width:r.width,height:r.height}),s?s.setProps(o):s=this._createController(e,o),s):null}},{key:"_rebuildViewports",value:function(){var e=this.width,i=this.height,r=this.views,s=this.controllers;this._viewports=[],this.controllers={};for(var o=r.length;o--;){var a=r[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:i,viewState:l});this.controllers[a.id]=this._updateController(a,l,c,s[a.id]),this._viewports.unshift(c)}for(var u in s)s[u]&&!this.controllers[u]&&s[u].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach(function(i){i.id&&(e._viewportMap[i.id]=e._viewportMap[i.id]||i)})}},{key:"_diffViews",value:function(e,i){return e.length!==i.length||e.some(function(r,s){return!e[s].equals(i[s])})}}]),n}();function F8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function _c(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?F8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):F8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function N8(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}var B8={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new d1,transitionInterruption:1},Rye=function(n){ir(e,n);var t=N8(e);function e(){var i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.makeViewport,o=r.width,a=r.height,l=r.latitude,c=r.longitude,u=r.zoom,h=r.bearing,p=void 0===h?0:h,g=r.pitch,m=void 0===g?0:g,v=r.altitude,y=void 0===v?1.5:v,C=r.maxZoom,w=void 0===C?20:C,A=r.minZoom,k=void 0===A?0:A,B=r.maxPitch,U=void 0===B?60:B,K=r.minPitch,ae=void 0===K?0:K,de=r.startPanLngLat,ne=r.startZoomLngLat,Se=r.startRotatePos,ve=r.startBearing,te=r.startPitch,ie=r.startZoom;return wt(this,e),Kr(Number.isFinite(c),"`longitude` must be supplied"),Kr(Number.isFinite(l),"`latitude` must be supplied"),Kr(Number.isFinite(u),"`zoom` must be supplied"),(i=t.call(this,{width:o,height:a,latitude:l,longitude:c,zoom:u,bearing:p,pitch:m,altitude:y,maxZoom:w,minZoom:k,maxPitch:U,minPitch:ae}))._state={startPanLngLat:de,startZoomLngLat:ne,startRotatePos:Se,startBearing:ve,startPitch:te,startZoom:ie},i.makeViewport=s,i}return Tt(e,[{key:"panStart",value:function(r){return this._getUpdatedState({startPanLngLat:this._unproject(r.pos)})}},{key:"pan",value:function(r){var s=r.pos,a=this._state.startPanLngLat||this._unproject(r.startPos);if(!a)return this;var c=Br(this._calculateNewLngLat({startPanLngLat:a,pos:s}),2);return this._getUpdatedState({longitude:c[0],latitude:c[1]})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(r){return this._getUpdatedState({startRotatePos:r.pos,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(r){var m,s=r.pos,o=r.deltaAngleX,a=void 0===o?0:o,l=r.deltaAngleY,c=void 0===l?0:l,u=this._state,h=u.startRotatePos,p=u.startBearing,g=u.startPitch;return h&&Number.isFinite(p)&&Number.isFinite(g)?(m=s?this._calculateNewPitchAndBearing(_c(_c({},this._getRotationParams(s,h)),{},{startBearing:p,startPitch:g})):{bearing:p+a,pitch:g+c},this._getUpdatedState(m)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(r){return this._getUpdatedState({startZoomLngLat:this._unproject(r.pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(r){var s=r.pos,o=r.startPos,a=r.scale,l=this._state,c=l.startZoom,u=l.startZoomLngLat;Number.isFinite(c)||(c=this._viewportProps.zoom,u=this._unproject(o)||this._unproject(s));var h=this._calculateNewZoom({scale:a,startZoom:c}),m=Br(this.makeViewport(_c(_c({},this._viewportProps),{},{zoom:h})).getMapCenterByLngLatPosition({lngLat:u,pos:s}),2);return this._getUpdatedState({zoom:h,longitude:m[0],latitude:m[1]})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(r)}},{key:"zoomOut",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/r)}},{key:"moveLeft",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([r,0])}},{key:"moveRight",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-r,0])}},{key:"moveUp",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,r])}},{key:"moveDown",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-r])}},{key:"rotateLeft",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-r})}},{key:"rotateRight",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+r})}},{key:"rotateUp",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+r})}},{key:"rotateDown",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-r})}},{key:"shortestPathFrom",value:function(r){var s=r.getViewportProps(),o=Object.assign({},this._viewportProps),a=o.bearing,l=o.longitude;return Math.abs(a-s.bearing)>180&&(o.bearing=a<0?a+360:a-360),Math.abs(l-s.longitude)>180&&(o.longitude=l<0?l+360:l-360),o}},{key:"_zoomFromCenter",value:function(r){var s=this._viewportProps;return this.zoom({pos:[s.width/2,s.height/2],scale:r})}},{key:"_panFromCenter",value:function(r){var s=this._viewportProps,o=s.width,a=s.height;return this.pan({startPos:[o/2,a/2],pos:[o/2+r[0],a/2+r[1]]})}},{key:"_getUpdatedState",value:function(r){return new this.constructor(_c(_c(_c({makeViewport:this.makeViewport},this._viewportProps),this._state),r))}},{key:"_applyConstraints",value:function(r){return r.zoom=np(r.zoom,r.minZoom,r.maxZoom),r.pitch=np(r.pitch,r.minPitch,r.maxPitch),Object.assign(r,function({width:n,height:t,longitude:e,latitude:i,zoom:r,pitch:s=0,bearing:o=0}){(e<-180||e>180)&&(e=B4(e+180,360)-180),(o<-180||o>180)&&(o=B4(o+180,360)-180);const a=iP(t/512);if(r<=a)r=a,i=0;else{const l=t/2/Math.pow(2,r),c=wh([0,l])[1];if(i<c)i=c;else{const u=wh([0,512-l])[1];i>u&&(i=u)}}return{width:n,height:t,longitude:e,latitude:i,zoom:r,pitch:s,bearing:o}}(r)),r}},{key:"_unproject",value:function(r){var s=this.makeViewport(this._viewportProps);return r&&s.unproject(r)}},{key:"_calculateNewLngLat",value:function(r){var s=r.startPanLngLat,o=r.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:s,pos:o})}},{key:"_calculateNewZoom",value:function(r){var a=this._viewportProps,l=a.maxZoom,c=a.minZoom;return np(r.startZoom+Math.log2(r.scale),c,l)}},{key:"_calculateNewPitchAndBearing",value:function(r){var s=r.deltaScaleX,o=r.deltaScaleY,a=r.startBearing,l=r.startPitch;o=np(o,-1,1);var c=this._viewportProps,g=l;return o>0?g=l+o*(c.maxPitch-l):o<0&&(g=l-o*(c.minPitch-l)),{pitch:g,bearing:a+180*s}}},{key:"_getRotationParams",value:function(r,s){var a=r[1]-s[1],l=r[1],c=s[1],u=this._viewportProps,p=u.height,g=(r[0]-s[0])/u.width,m=0;return a>0?Math.abs(p-c)>5&&(m=a/(c-p)*1.2):a<0&&c>5&&(m=1-l/c),{deltaScaleX:g,deltaScaleY:m=Math.min(1,Math.max(-1,m))}}}]),e}(e8),kye=function(n){ir(e,n);var t=N8(e);function e(i){return wt(this,e),i.dragMode=i.dragMode||"pan",t.call(this,Rye,i)}return Tt(e,[{key:"_getTransitionProps",value:function(r){return r?_c(_c({},B8),{},{transitionInterpolator:new d1(_c(_c({},r),{},{makeViewport:this.controllerState.makeViewport}))}):B8}}]),e}(ZP);var V8=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(i){return wt(this,e),t.call(this,Object.assign({},i,{type:lP}))}return Tt(e,[{key:"controller",get:function(){return this._getControllerProps({type:kye})}}]),e}(KP);function j8(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return z8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return z8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function z8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}V8.displayName="MapView";var Bye=new nR,Vye=function(){function n(){wt(this,n),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Tt(n,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length!==this.effects.length||!Ib(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},i=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),i}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var i,e=j8(this.effects);try{for(e.s();!(i=e.n()).done;)i.value.cleanup()}catch(l){e.e(l)}finally{e.f()}var o,s=j8(this._internalEffects);try{for(s.s();!(o=s.n()).done;)o.value.cleanup()}catch(l){s.e(l)}finally{s.f()}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some(function(e){return e instanceof nR})||this._internalEffects.push(Bye)}}]),n}();var Uye=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return e}(JP);function U8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function p1(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?U8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):U8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var H8={blendFunc:[1,0,32771,0],blendEquation:32774},$8=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"render",value:function(r){r.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(r)):(this.useAlpha=!1,Hs(Ot(e.prototype),"render",this).call(this,r))}},{key:"_drawPickingBuffer",value:function(r){var s=this,o=r.layers,a=r.layerFilter,l=r.views,c=r.viewports,u=r.onViewportActive,h=r.pickingFBO,p=r.deviceRect,g=p.x,m=p.y,v=p.width,y=p.height,C=r.pass,w=void 0===C?"picking":C,A=r.redrawReason,k=r.pickZ,B=this.gl;return this.pickZ=k,dc(B,p1(p1({scissorTest:!0,scissor:[g,m,v,y],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},H8),{},{blend:!k}),function(){Hs(Ot(e.prototype),"render",s).call(s,{target:h,layers:o,layerFilter:a,views:l,viewports:c,onViewportActive:u,pass:w,redrawReason:A})})}},{key:"shouldDrawLayer",value:function(r){return r.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(r,s){var o=this.pickZ?{blend:!1}:p1(p1({},H8),{},{blend:!0,blendColor:[0,0,0,this.useAlpha?(s+1)/255:1]});return Object.assign({},r.props.parameters,o)}}]),e}(JP);function g1(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return G8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return G8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function G8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function W8(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function q8(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?W8(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):W8(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var qye=function(){function n(t){wt(this,n),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Uye(t),this.pickLayersPass=new $8(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Tt(n,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in e&&(this._onError=e.onError)}},{key:"renderLayers",value:function(e){var i=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.onError=this._onError,e.effects=e.effects||[],e.target=e.target||ds.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);var r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,s=i.render(q8(q8({},e),{},{target:r}));this._postRender(e.effects,e),this.renderCount++,co("deckRenderer.renderLayers",this,s,e)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},i=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),i}},{key:"finalize",value:function(){var r,e=this.renderBuffers,i=g1(e);try{for(i.s();!(r=i.n()).done;)r.value.delete()}catch(o){i.e(o)}finally{i.f()}e.length=0}},{key:"_preRender",value:function(e,i){var o,r=null,s=g1(e);try{for(s.s();!(o=s.n()).done;){var a=o.value;a.preRender(this.gl,i),a.postRender&&(r=a)}}catch(l){s.e(l)}finally{s.f()}r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;0===e.length&&e.push(new ds(this.gl),new ds(this.gl));var r,i=g1(e);try{for(i.s();!(r=i.n()).done;)r.value.resize()}catch(o){i.e(o)}finally{i.f()}}},{key:"_postRender",value:function(e,i){var a,r=this.renderBuffers,s={inputBuffer:r[0],swapBuffer:r[1],target:null},o=g1(e);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(l.postRender){if(l===this.lastPostProcessEffect){s.target=i.target,l.postRender(this.gl,s);break}var c=l.postRender(this.gl,s);s.inputBuffer=c,s.swapBuffer=c===r[0]?r[1]:r[0]}}}catch(u){o.e(u)}finally{o.f()}}}]),n}(),Yye={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Xye(n){var t=n.pickedColors,e=n.layers,i=n.deviceX,r=n.deviceY,s=n.deviceRadius,o=n.deviceRect;if(t){for(var a=o.x,l=o.y,c=o.width,u=o.height,h=s*s,p=-1,g=0,m=0;m<u;m++){var v=m+l-r,y=v*v;if(y>h)g+=4*c;else for(var C=0;C<c;C++){if(t[g+3]-1>=0){var A=C+a-i,k=A*A+y;k<=h&&(h=k,p=g)}g+=4}}if(p>=0){var B=t[p+3]-1,U=t.slice(p,p+4),K=e[B];if(K){var ae=K.decodePickingColor(U),de=Math.floor(p/4/c);return{pickedColor:U,pickedLayer:K,pickedObjectIndex:ae,pickedX:a+(p/4-de*c),pickedY:l+de}}ei.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Yye}function Y8(n){var t=n.pickInfo,e=n.mode,r=n.layerFilter,s=n.pixelRatio,o=n.x,a=n.y,l=n.z,c=t&&t.pickedLayer,h=function(n,t,e){for(var i=n.length-1;i>=0;i--){var r=n[i];if(r.containsPixel(t)&&(!e||e(r)))return r}return n[0]}(n.viewports,{x:o,y:a},r&&c&&function(g){return r({layer:c,viewport:g,isPicking:!0,renderPass:"picking:".concat(e)})}),p=h&&h.unproject([o-h.x,a-h.y],{targetZ:l});return{color:null,layer:null,viewport:h,index:-1,picked:!1,x:o,y:a,pixel:[o,a],coordinate:p,devicePixel:t&&[t.pickedX,t.pickedY],pixelRatio:s}}function Zye(n){var t=n.pickInfo,e=n.lastPickedInfo,i=n.mode,s=t.pickedColor,o=t.pickedLayer,a=t.pickedObjectIndex,l=o?[o]:[];if("hover"===i){var u=e.layerId,h=o&&o.props.id;if(h!==u||a!==e.index){if(h!==u){var p=n.layers.find(function(v){return v.props.id===u});p&&l.unshift(p)}e.layerId=h,e.index=a,e.info=null}}var g=Y8(n),m=new Map;return m.set(null,g),l.forEach(function(v){var y=Object.assign({},g);if(v===o&&(y.color=s,y.index=a,y.picked=!0),y=X8({layer:v,info:y,mode:i}),v===o&&"hover"===i&&(e.info=y),y&&m.set(y.layer.id,y),"hover"===i&&v.props.autoHighlight){var C={pickingSelectedColor:o===v?s:null},w=v.props.highlightColor;o===v&&"function"==typeof w&&(C.pickingHighlightColor=w(y)),v.setModuleParameters(C),v.setNeedsRedraw()}}),m}function X8(n){for(var t=n.layer,e=n.info,i=n.mode;t&&e;){var r=e.layer||t;e.layer=t,e=t.getPickingInfo({info:e,mode:i,sourceLayer:r}),t=t.parent}return e}function Jye(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return K8(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return K8(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function K8(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var tbe=function(){function n(t){wt(this,n),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new $8(t),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Tt(n,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"onError"in e&&(this._onError=e.onError),"_pickable"in e&&(this._pickable=e._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var i=e.x,r=e.y,s=e.layers,o=e.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,l=a&&a.layer&&a.layer.id,c=a&&a.viewport&&a.viewport.id,u=l?s.find(function(m){return m.id===l}):null,h=c&&o.find(function(m){return m.id===c})||o[0],p=h&&h.unproject([i-h.x,r-h.y]),g={x:i,y:r,viewport:h,coordinate:p,layer:u};return u?Object.assign({},a,g):Object.assign(g,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new ds(e),ds.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new ds(e),this.depthFBO.attach(Yt({},36064,new Na(e,{format:Rn(e)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(e){if(!1===this._pickable)return null;var i=e.filter(function(r){return r.isPickable()&&!r.isComposite});return i.length>255?(ei.warn("Too many pickable layers, only picking the first 255")(),i.slice(0,255)):i.length?i:null}},{key:"_pickClosestObject",value:function(e){var i=e.layers,r=e.views,s=e.viewports,o=e.x,a=e.y,l=e.radius,c=void 0===l?0:l,u=e.depth,h=void 0===u?1:u,p=e.mode,g=void 0===p?"query":p,m=e.unproject3D,v=e.onViewportActive;if(!(i=this._getPickable(i)))return{result:[],emptyInfo:Y8({viewports:s,x:o,y:a})};this._resizeBuffer();for(var ae,y=wm(this.gl),C=gI(this.gl,[o,a],!0),w=[C.x+Math.floor(C.width/2),C.y+Math.floor(C.height/2)],A=Math.round(c*y),k=this.pickingFBO,K=this._getPickingRect({deviceX:w[0],deviceY:w[1],deviceRadius:A,deviceWidth:k.width,deviceHeight:k.height}),de=[],ne={},Se=0;Se<h;Se++){var te=Xye({pickedColors:K&&this._drawAndSample({layers:i,views:r,viewports:s,onViewportActive:v,deviceRect:K,pass:"picking:".concat(g),redrawReason:g}),layers:i,deviceX:w[0],deviceY:w[1],deviceRadius:A,deviceRect:K}),ie=void 0;if(te.pickedLayer&&m&&this.depthFBO&&(ie=this._drawAndSample({layers:[te.pickedLayer],views:r,viewports:s,onViewportActive:v,deviceRect:{x:te.pickedX,y:te.pickedY,width:1,height:1},pass:"picking:".concat(g),redrawReason:"pick-z",pickZ:!0})[0]*s[0].distanceScales.metersPerUnit[2]+s[0].position[2]),te.pickedColor&&Se+1<h){var Q=te.pickedColor[3]-1;ne[Q]=!0,i[Q].disablePickingIndex(te.pickedObjectIndex)}var Fe,Be=Jye((ae=Zye({pickInfo:te,lastPickedInfo:this.lastPickedInfo,mode:g,layers:i,layerFilter:this.layerFilter,viewports:s,x:o,y:a,z:ie,pixelRatio:y})).values());try{for(Be.s();!(Fe=Be.n()).done;){var He=Fe.value;He.layer&&de.push(He)}}catch(Dn){Be.e(Dn)}finally{Be.f()}if(!te.pickedColor)break}for(var Ct in ne)i[Ct].restorePickingColors();return{result:de,emptyInfo:ae&&ae.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var i=e.layers,r=e.views,s=e.viewports,o=e.x,a=e.y,l=e.width,c=void 0===l?1:l,u=e.height,h=void 0===u?1:u,p=e.mode,g=void 0===p?"query":p,m=e.maxObjects,v=void 0===m?null:m,y=e.onViewportActive;if(!(i=this._getPickable(i)))return[];this._resizeBuffer();for(var C=wm(this.gl),w=gI(this.gl,[o,a],!0),A=w.x,k=w.y+w.height,B=gI(this.gl,[o+c,a+h],!0),K=B.y,ne=function(n){var t=n.pickedColors,e=n.layers,i=new Map;if(t)for(var r=0;r<t.length;r+=4){var s=t[r+3]-1;if(s>=0){var o=t.slice(r,r+4),a=o.join(",");if(!i.has(a)){var l=e[s];l?i.set(a,{pickedColor:o,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(o)}):ei.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(i.values())}({pickedColors:this._drawAndSample({layers:i,views:r,viewports:s,onViewportActive:y,deviceRect:{x:A,y:K,width:B.x+B.width-A,height:k-K},pass:"picking:".concat(g),redrawReason:g}),layers:i}),Se=new Map,ve=Number.isFinite(v),te=0;te<ne.length&&!(ve&&Se.size>=v);te++){var ie=ne[te],we={color:ie.pickedColor,layer:null,index:ie.pickedObjectIndex,picked:!0,x:o,y:a,width:c,height:h,pixelRatio:C};we=X8({layer:ie.pickedLayer,info:we,mode:g}),Se.has(we.object)||Se.set(we.object,we)}return Array.from(Se.values())}},{key:"_drawAndSample",value:function(e){var i=e.layers,r=e.views,s=e.viewports,o=e.onViewportActive,a=e.deviceRect,l=e.pass,c=e.redrawReason,u=e.pickZ;if(Kr(a.width>0&&a.height>0),i.length<1)return null;var h=u?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:i,layerFilter:this.layerFilter,onError:this._onError,views:r,viewports:s,onViewportActive:o,pickingFBO:h,deviceRect:a,pass:l,redrawReason:c,pickZ:u});var p=a.x,g=a.y,m=a.width,v=a.height,y=new(u?Float32Array:Uint8Array)(m*v*4);return SS(h,{sourceX:p,sourceY:g,sourceWidth:m,sourceHeight:v,target:y}),y}},{key:"_getPickingRect",value:function(e){var i=e.deviceX,r=e.deviceY,s=e.deviceRadius,o=e.deviceWidth,a=e.deviceHeight,l=Math.max(0,i-s),c=Math.max(0,r-s),u=Math.min(o,i+s+1)-l,h=Math.min(a,r+s+1)-c;return u<=0||h<=0?null:{x:l,y:c,width:u,height:h}}}]),n}(),nbe={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},ibe=function(){function n(t){wt(this,n);var e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,nbe),e.appendChild(this.el))}return Tt(n,[{key:"setTooltip",value:function(e,i,r){var s=this.el;if("string"==typeof e)s.innerText=e;else{if(!e)return void(s.style.display="none");"text"in e&&(s.innerText=e.text),"html"in e&&(s.innerHTML=e.html),"className"in e&&(s.className=e.className),Object.assign(s.style,e.style)}s.style.display="block",s.style.transform="translate(".concat(i,"px, ").concat(r,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),n}();function iR(n,t){if(!n)throw new Error(t)}var lu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Z8=lu.global||lu.self||lu.window,rbe="object"!==("undefined"==typeof process?"undefined":$i(process))||"[object process]"!==String(process)||process.browser,Q8="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),m1=(Q8&&parseFloat(Q8[1]),"undefined"!=typeof Image),rR="undefined"!=typeof ImageBitmap,obe=Boolean(Z8._parseImageNode),_1=!!rbe||obe;function J8(n){var t=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"===$i(n)&&n.data&&n.width&&n.height?"data":null}(n);if(!t)throw new Error("Not an image");return t}function cbe(n){switch(J8(n)){case"data":return n;case"image":case"imagebitmap":var t=document.createElement("canvas"),e=t.getContext("2d");if(e)return t.width=n.width,t.height=n.height,e.drawImage(n,0,0),e.getImageData(0,0,n.width,n.height);default:return iR(!1)}}var ube=/^data:image\/svg\+xml/,dbe=/\.svg((\?|#).*)?$/;function sR(n){return n&&(ube.test(n)||dbe.test(n))}function hbe(n,t){if(sR(t)){var i=(new TextDecoder).decode(n);return"data:image/svg+xml;base64,".concat(btoa(i))}return t6(n,t)}function t6(n,t){if(sR(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function n6(n,t,e){return oR.apply(this,arguments)}function oR(){return(oR=An(je().mark(function n(t,e,i){var r,s,o;return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=hbe(t,i),s=self.URL||self.webkitURL,o="string"!=typeof r&&s.createObjectURL(r),l.prev=3,l.next=6,fbe(o||r,e);case 6:return l.abrupt("return",l.sent);case 7:return l.prev=7,o&&s.revokeObjectURL(o),l.finish(7);case 10:case"end":return l.stop()}},n,null,[[3,,7,10]])}))).apply(this,arguments)}function fbe(n,t){return aR.apply(this,arguments)}function aR(){return(aR=An(je().mark(function n(t,e){var i;return je().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((i=new Image).src=t,!(e.image&&e.image.decode&&i.decode)){s.next=6;break}return s.next=5,i.decode();case 5:return s.abrupt("return",i);case 6:return s.next=8,new Promise(function(o,a){try{i.onload=function(){return o(i)},i.onerror=function(l){return a(new Error("Could not load image ".concat(t,": ").concat(l)))}}catch(l){a(l)}});case 8:return s.abrupt("return",s.sent);case 9:case"end":return s.stop()}},n)}))).apply(this,arguments)}var pbe={},i6=!0;function gbe(n,t,e){return lR.apply(this,arguments)}function lR(){return(lR=An(je().mark(function n(t,e,i){var r,o;return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!sR(i)){l.next=7;break}return l.next=3,n6(t,e,i);case 3:r=l.sent,l.next=8;break;case 7:r=t6(t,i);case 8:return o=e&&e.imagebitmap,l.next=11,mbe(r,o);case 11:return l.abrupt("return",l.sent);case 12:case"end":return l.stop()}},n)}))).apply(this,arguments)}function mbe(n){return cR.apply(this,arguments)}function cR(){return(cR=An(je().mark(function n(t){var e,i=arguments;return je().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((_be(e=i.length>1&&void 0!==i[1]?i[1]:null)||!i6)&&(e=null),!e){s.next=13;break}return s.prev=3,s.next=6,createImageBitmap(t,e);case 6:return s.abrupt("return",s.sent);case 9:s.prev=9,s.t0=s.catch(3),console.warn(s.t0),i6=!1;case 13:return s.next=15,createImageBitmap(t);case 15:return s.abrupt("return",s.sent);case 16:case"end":return s.stop()}},n,null,[[3,9]])}))).apply(this,arguments)}function _be(n){for(var t in n||pbe)return!1;return!0}var cu=!1,Fb=!0;function uR(n){var t=Nb(n);return function(n){var t=Nb(n);return t.byteLength>=24&&2303741511===t.getUint32(0,cu)?{mimeType:"image/png",width:t.getUint32(16,cu),height:t.getUint32(20,cu)}:null}(t)||function(n){var t=Nb(n);if(!(t.byteLength>=3&&65496===t.getUint16(0,cu)&&255===t.getUint8(2)))return null;for(var i=function(){for(var n=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}(),r=i.tableMarkers,s=i.sofMarkers,o=2;o+9<t.byteLength;){var a=t.getUint16(o,cu);if(s.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,cu),width:t.getUint16(o+7,cu)};if(!r.has(a))return null;o+=2,o+=t.getUint16(o,cu)}return null}(t)||function(n){var t=Nb(n);return t.byteLength>=10&&1195984440===t.getUint32(0,cu)?{mimeType:"image/gif",width:t.getUint16(6,Fb),height:t.getUint16(8,Fb)}:null}(t)||function(n){var t=Nb(n);return t.byteLength>=14&&16973===t.getUint16(0,cu)&&t.getUint32(2,Fb)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Fb),height:t.getUint32(22,Fb)}:null}(t)}function Nb(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function Ebe(n,t){var i=(uR(n)||{}).mimeType,r=Z8._parseImageNode;return iR(r),r(n,i,t)}function dR(){return(dR=An(je().mark(function n(t,e,i){var s,a,l,c;return je().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:a=(i||{}).url,l=Mbe(s=((e=e||{}).image||{}).type||"auto"),h.t0=l,h.next="imagebitmap"===h.t0?8:"image"===h.t0?12:"data"===h.t0?16:20;break;case 8:return h.next=10,gbe(t,e,a);case 10:return c=h.sent,h.abrupt("break",21);case 12:return h.next=14,n6(t,e,a);case 14:return c=h.sent,h.abrupt("break",21);case 16:return h.next=18,Ebe(t,e);case 18:return c=h.sent,h.abrupt("break",21);case 20:iR(!1);case 21:return"data"===s&&(c=cbe(c)),h.abrupt("return",c);case 23:case"end":return h.stop()}},n)}))).apply(this,arguments)}function Mbe(n){switch(n){case"auto":case"data":return function(){if(rR)return"imagebitmap";if(m1)return"image";if(_1)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return rR||m1||_1;case"imagebitmap":return rR;case"image":return m1;case"data":return _1;case"html":return m1;case"ndarray":return _1;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}const r6={id:"image",name:"Images",version:"2.3.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,t,e){return dR.apply(this,arguments)},tests:[function(n){return Boolean(uR(new DataView(n)))}],options:{image:{type:"auto",decode:!0}}},Ibe={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){var t=n[0],e=n[n.length-1];return"{"===t&&"}"===e||"["===t&&"]"===e},parseTextSync:JSON.parse};var v1="8.4.9",y1=rr.CO.deck&&rr.CO.deck.VERSION;if(y1&&y1!==v1)throw new Error("deck.gl - multiple versions detected: ".concat(y1," vs ").concat(v1));y1||(rr.CO.deck=Object.assign(rr.CO.deck||{},{VERSION:v1,version:v1,log:ei,_registerLoggers:function(n){BI=n}}),VH([Ibe,[r6,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Pbe=rr.CO.deck;class b1 extends rd{static isSupported(t,e=[]){const i=Rn(t),r=s5(t,"TIMER_QUERY");let s=i||r;for(const o of e)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:tt(!1)}return s}constructor(t,e={}){super(t,e),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:t=!1}={}){return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(t=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return b1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const s6=(0,rr.jU)()&&"undefined"!=typeof document;let Ube=0;class Hbe{constructor(t={}){const{onCreateContext:e=(y=>jU(y)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:g=!0,stats:m=ep.get("animation-loop-"+Ube++)}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(_t.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:g,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return tt("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(t={}){if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=b1.isSupported(this.gl,["timers"])?new b1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}toDataURL(){var t=this;return An(function*(){return t.setNeedsRedraw("toDataURL"),yield t.waitForRender(),t.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...t){return this.props.onCreateContext(...t)}onInitialize(...t){return this.props.onInitialize(...t)}onRender(...t){return this.props.onRender(...t)}onFinalize(...t){return this.props.onFinalize(...t)}getHTMLControlValue(t,e=1){const i=document.getElementById(t);return i?Number(i.value):e}setViewParameters(){return _t.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=s6?new Promise((t,e)=>{s6&&"complete"===document.readyState?t(document):window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(t)}_renderFrame(...t){this.display?this.display._renderFrame(...t):this.onRender(...t)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:i}=this._getSizeAndAspect();(t!==this.animationProps.width||e!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?_I(this.props.gl,t):this.onCreateContext(t),!CS(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){id(n,pI)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const i=this.props.onAddHTML(e);i&&(e.innerHTML=i)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:t>0&&e>0&&(i=t/e),{width:t,height:e,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,t={}){if(n.canvas)return void function(n,t,e){let i="width"in e?e.width:n.canvas.clientWidth,r="height"in e?e.height:n.canvas.clientHeight;(!i||!r)&&(_t.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==t){let o=t;const a=Math.floor(i*o),l=Math.floor(r*o);n.canvas.width=a,n.canvas.height=l,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==l)&&(_t.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:t})}}(n,function(n){const t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?t:1}(t.useDevicePixels),t);const e=n.getExtension("STACKGL_resize_drawingbuffer");e&&"width"in t&&"height"in t&&e.resize(t.width,t.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ds(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var $be=xe(524),w1=xe.n($be);const Gbe={mousedown:1,mousemove:2,mouseup:4};(function(n){const t=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function(n,t){for(let e=0;e<n.length;e++)if(n[e].pointerId===i.pointerId)return!0;return!1}(r)||r.push(i)),t.call(this,i)}})(w1().PointerEventInput),function(n){n.prototype.handler=function(e){let i=Gbe[e.type];1&i&&e.button>=0&&(this.pressed=!0),2&i&&0===e.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}(w1().MouseInput);const Xbe=w1().Manager,uu=w1(),Kbe=uu?[[uu.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[uu.Rotate,{enable:!1}],[uu.Pinch,{enable:!1}],[uu.Swipe,{enable:!1}],[uu.Pan,{threshold:0,enable:!1}],[uu.Press,{enable:!1}],[uu.Tap,{event:"doubletap",taps:2,enable:!1}],[uu.Tap,{event:"anytap",enable:!1}],[uu.Tap,{enable:!1}]]:null,l6={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Zbe={doubletap:["tap"]},Qbe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},fR={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Jbe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},c6={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},e0e="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",zm="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let u6=!1;try{const n={get passive(){return u6=!0,!0}};zm.addEventListener("test",n,n),zm.removeEventListener("test",n,n)}catch(n){}const t0e=-1!==e0e.indexOf("firefox"),{WHEEL_EVENTS:n0e}=fR,h6=4.000244140625;class s0e{constructor(t,e,i={}){this.element=t,this.callback=e,this.options=Object.assign({enable:!0},i),this.events=n0e.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>t.addEventListener(r,this.handleEvent,!!u6&&{passive:!1}))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){"wheel"===t&&(this.options.enable=e)}handleEvent(t){if(!this.options.enable)return;let e=t.deltaY;zm.WheelEvent&&(t0e&&t.deltaMode===zm.WheelEvent.DOM_DELTA_PIXEL&&(e/=zm.devicePixelRatio),t.deltaMode===zm.WheelEvent.DOM_DELTA_LINE&&(e*=40));const i={x:t.clientX,y:t.clientY};0!==e&&e%h6==0&&(e=Math.floor(e/h6)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,i)}_onWheel(t,e,i){this.callback({type:"wheel",center:i,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}const{MOUSE_EVENTS:o0e}=fR,f6="pointermove",p6="pointerover",g6="pointerout",m6="pointerleave";class a0e{constructor(t,e,i={}){this.element=t,this.callback=e,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=o0e.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>t.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===f6&&(this.enableMoveEvent=e),t===p6&&(this.enableOverEvent=e),t===g6&&(this.enableOutEvent=e),t===m6&&(this.enableLeaveEvent=e)}handleEvent(t){this.handleOverEvent(t),this.handleOutEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this.callback({type:p6,srcEvent:t,pointerType:"mouse",target:t.target})}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this.callback({type:g6,srcEvent:t,pointerType:"mouse",target:t.target})}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:m6,srcEvent:t,pointerType:"mouse",target:t.target})}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:f6,srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:l0e}=fR,_6="keydown";class c0e{constructor(t,e,i={}){this.element=t,this.callback=e,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=l0e.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=i.tabIndex||0,t.style.outline="none",this.events.forEach(r=>t.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===_6&&(this.enableDownEvent=e),"keyup"===t&&(this.enableUpEvent=e)}handleEvent(t){const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:_6,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:"keyup",srcEvent:t,key:t.key,target:t.target}))}}const y6="contextmenu";class u0e{constructor(t,e,i={}){this.element=t,this.callback=e,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===y6&&(this.options.enable=e)}handleEvent(t){!this.options.enable||this.callback({type:y6,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const d0e={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},b6={srcElement:"root",priority:0};class E0e{constructor(t){this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(t,e,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;i&&("object"!=typeof i||i.addEventListener)&&(i={srcElement:i}),i=i?Object.assign({},b6,i):b6;let l=a.get(i.srcElement);l||(l=[],a.set(i.srcElement,l));const c={type:t,handler:e,srcElement:i.srcElement,priority:i.priority};r&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===t&&o.handler===e){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}handleEvent(t){if(this.isEmpty())return;const e=this._normalizeEvent(t);let i=t.srcEvent.target;for(;i&&i!==e.rootElement;){if(this._emit(e,i),e.handled)return;i=i.parentNode}this._emit(e,"root")}_emit(t,e){const i=this.handlersByElement.get(e);if(i){let r=!1;const s=()=>{t.handled=!0},o=()=>{t.handled=!0,r=!0},a=[];for(let l=0;l<i.length;l++){const{type:c,handler:u,once:h}=i[l];if(u(Object.assign({},t,{type:c,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(i[l]),r)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(t){const e=this.eventManager.element;return Object.assign({},t,function(n){const t=d0e[n.srcEvent.type];if(!t)return null;const{buttons:e,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===t||2===t&&!Number.isFinite(e)?(s=1===r,o=2===r,a=3===r):2===t?(s=Boolean(1&e),o=Boolean(4&e),a=Boolean(2&e)):1===t&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}(t),function(n,t){const{srcEvent:e}=n;if(!n.center&&!Number.isFinite(e.clientX))return null;const i=n.center||{x:e.clientX,y:e.clientY},r=t.getBoundingClientRect();return{center:i,offsetCenter:{x:(i.x-r.left-t.clientLeft)/(r.width/t.offsetWidth||1),y:(i.y-r.top-t.clientTop)/(r.height/t.offsetHeight||1)}}}(t,e),{handled:!1,rootElement:e})}}const S0e={events:null,recognizers:null,recognizerOptions:{},Manager:Xbe,touchAction:"none",tabIndex:0};class M0e{constructor(t=null,e={}){this.options=Object.assign({},S0e,e),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);const{events:i}=e;i&&this.on(i)}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this;this.manager=new(0,e.Manager)(t,{touchAction:e.touchAction,recognizers:e.recognizers||Kbe}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(l6).forEach(r=>{const s=this.manager.get(r);s&&l6[r].forEach(o=>{s.recognizeWith(o)})});for(const r in e.recognizerOptions){const s=this.manager.get(r);if(s){const o=e.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new s0e(t,this._onOtherEvent,{enable:!1}),this.moveInput=new a0e(t,this._onOtherEvent,{enable:!1}),this.keyInput=new c0e(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new u0e(t,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,i){this._addEventHandler(t,e,i,!1)}once(t,e,i){this._addEventHandler(t,e,i,!0)}watch(t,e,i){this._addEventHandler(t,e,i,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:i}=this;if(!i)return;const r=i.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const s=Zbe[t];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);e?(a.requireFailure(t),r.dropRequireFailure(o)):a.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,i,r,s){if("string"!=typeof t){i=e;for(const u in t)this._addEventHandler(u,t[u],i,r,s);return}const{manager:o,events:a}=this,l=c6[t]||t;let c=a.get(l);c||(c=new E0e(this),a.set(l,c),c.recognizerName=Jbe[l]||l,o&&o.on(l,c.handleEvent)),c.add(t,e,i,r,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(const o in t)this._removeEventHandler(o,t[o]);return}const{events:i}=this,s=i.get(c6[t]||t);if(s&&(s.remove(t,e),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of i.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(t){const{srcEvent:e}=t,i=Qbe[e.type];i&&this.manager.emit(i,t)}_onOtherEvent(t){this.manager.emit(t.type,t)}}function w6(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function C6(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?w6(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):w6(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function E6(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return S6(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return S6(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function S6(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function ap(){}var M6={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:ap,onResize:ap,onViewStateChange:ap,onInteractionStateChange:ap,onBeforeRender:ap,onAfterRender:ap,onLoad:ap,onError:null,_onMetrics:null,getCursor:function(t){return t.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},E1=function(){function n(t){wt(this,n),t=Object.assign({},M6,t),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractionStateChange=this._onInteractionStateChange.bind(this),t.viewState&&t.initialViewState&&ei.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,rr.qs)()&&ei.warn("IE 11 support will be deprecated in v8.0")(),t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new vI({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&ab.setProps(t._typedArrayManagerProps),this.animationLoop.start()}return Tt(n,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ei.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ei.removed("onLayerClick","onClick")(),e.initialViewState&&!Ib(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);var i=Object.create(this.props);Object.assign(i,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(i),this.layerManager&&(this.viewManager.setProps(i),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(i),this.effectManager.setProps(i),this.deckRenderer.setProps(i),this.deckPicker.setProps(i)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var i=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var r=this.viewManager.needsRedraw(e),s=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return i||r||s||o||a}},{key:"redraw",value:function(e){if(this.layerManager){var i=e||this.needsRedraw({clearRedrawFlags:!0});!i||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(i):this._drawLayers(i))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var i=this._pick("pickObject","pickObject Time",e).result;return i.length?i[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_addResources",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:i})}},{key:"_removeResources",value:function(e){var r,i=E6(e);try{for(i.s();!(r=i.n()).done;)this.layerManager.resourceManager.remove(r.value)}catch(o){i.e(o)}finally{i.f()}}},{key:"_pick",value:function(e,i,r){var s=this.stats;s.get("Pick Count").incrementCount(),s.get(i).timeStart();var o=this.deckPicker[e](Object.assign({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport},r));return s.get(i).timeEnd(),o}},{key:"_createCanvas",value:function(e){var i=e.canvas;"string"==typeof i&&Kr(i=document.getElementById(i)),i||(i=document.createElement("canvas"),(e.parent||document.body).appendChild(i));var o=e.style;return i.id=e.id,Object.assign(i.style,o),i}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var i=e.width,r=e.height;(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.width=i),(r||0===r)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.position="absolute",this.canvas.style.height=r)}}},{key:"_updateCanvasSize",value:function(){this._checkForCanvasSizeChange()&&(this.viewManager.setProps({width:this.width,height:this.height}),this.props.onResize({width:this.width,height:this.height}))}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var i=e.clientWidth||e.width,r=e.clientHeight||e.height;return(i!==this.width||r!==this.height)&&(this.width=i,this.height=r,!0)}},{key:"_createAnimationLoop",value:function(e){var i=this,a=e.glOptions,l=e.debug;return new Hbe({width:e.width,height:e.height,useDevicePixels:e.useDevicePixels,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,autoResizeViewport:!1,gl:e.gl,onCreateContext:function(p){return jU(Object.assign({},a,p,{canvas:i.canvas,debug:l}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender,onError:e.onError})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var e=this.props.views||[new V8({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}},{key:"_onPointerMove",value:function(e){var i=this._pickRequest;if("pointerleave"===e.type)i.x=-1,i.y=-1,i.radius=0;else{if(e.leftButton||e.rightButton)return;var r=e.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=e,i.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.event){var i=this._pick("pickObject","pickObject Time",e),r=i.result,s=i.emptyInfo;this.interactiveState.isHovering=r.length>0;var c,o=s,a=!1,l=E6(r);try{for(l.s();!(c=l.n()).done;){var u=c.value;o=u,a=u.layer.onHover(u,e.event)}}catch(p){l.e(p)}finally{l.f()}if(!a&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip){var h=this.props.getTooltip(o);this.tooltip.setTooltip(h,o.x,o.y)}e.event=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,_I(e,{enable:!0,copyState:!0})),this.tooltip=new ibe(this.canvas),id(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var i=new D8;for(var r in i.play(),this.animationLoop.attachTimeline(i),this.eventManager=new M0e(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),wU)this.eventManager.on(r,this._onEvent);this.viewManager=new Oye({timeline:i,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractionStateChange:this._onInteractionStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var s=this.viewManager.getViewports()[0];this.layerManager=new Dye(e,{deck:this,stats:this.stats,viewport:s,timeline:i}),this.effectManager=new Vye,this.deckRenderer=new qye(e),this.deckPicker=new tbe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,i){var r=this.layerManager.context.gl;id(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},i)),this.props.onAfterRender({gl:r})}},{key:"_onRendererInitialized",value:function(e){this._setGLContext(e.gl)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ei.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var i=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=C6(C6({},this.viewState),{},Yt({},e.viewId,i)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}},{key:"_onEvent",value:function(e){var i=wU[e.type],r=e.offsetCenter;if(i&&r){var s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),a=o.layer,l=a&&(a[i.handler]||a.props[i.handler]),c=this.props[i.handler],u=!1;l&&(u=l.call(a,o,e)),!u&&c&&c(o,e)}}},{key:"_onPointerDown",value:function(e){var i=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:i.x,y:i.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var i=this.animationLoop.stats;e.get("GPU Time").addTime(i.get("GPU Time").lastTiming),e.get("CPU Time").addTime(i.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,i=this.stats;e.fps=i.get("frameRate").getHz(),e.setPropsTime=i.get("setProps Time").time,e.updateAttributesTime=i.get("Update Attributes").time,e.framesRedrawn=i.get("Redraw Count").count,e.pickTime=i.get("pickObject Time").time+i.get("pickMultipleObjects Time").time+i.get("pickObjects Time").time,e.pickCount=i.get("Pick Count").count,e.gpuTime=i.get("GPU Time").time,e.cpuTime=i.get("CPU Time").time,e.gpuTimePerFrame=i.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=i.get("CPU Time").getAverageTime();var r=ep.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}]),n}();E1.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(b8)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},E1.defaultProps=M6,E1.VERSION=Pbe.VERSION;const A6={name:"project32",dependencies:[eR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},T6="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",O0e={lightSources:{}};function mR({color:n=[0,0,0],intensity:t=1}={}){return n.map(e=>e*t/255)}const _R={name:"lights",vs:T6,fs:T6,getUniforms:function x6(n=O0e){if("lightSources"in n){const{ambientLight:t,pointLights:e,directionalLights:i}=n.lightSources||{};return t||e&&e.length>0||i&&i.length>0?Object.assign({},function({ambientLight:n,pointLights:t=[],directionalLights:e=[]}){const i={};return i["lighting_uAmbientLight.color"]=n?mR(n):[0,0,0],t.forEach((r,s)=>{i[`lighting_uPointLight[${s}].color`]=mR(r),i[`lighting_uPointLight[${s}].position`]=r.position,i[`lighting_uPointLight[${s}].attenuation`]=r.attenuation||[1,0,0]}),i.lighting_uPointLightCount=t.length,e.forEach((r,s)=>{i[`lighting_uDirectionalLight[${s}].color`]=mR(r),i[`lighting_uDirectionalLight[${s}].direction`]=r.direction}),i.lighting_uDirectionalLightCount=e.length,i}({ambientLight:t,pointLights:e,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const t={pointLights:[],directionalLights:[]};for(const e of n.lights||[])switch(e.type){case"ambient":t.ambientLight=e;break;case"directional":t.directionalLights.push(e);break;case"point":t.pointLights.push(e)}return x6({lightSources:t})}return{}},defines:{MAX_LIGHTS:3}},P0e={};const k0e={name:"phong-lighting",dependencies:[_R],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=P0e){if(!("material"in n))return{};const{material:t}=n;return t?function(n){const{ambient:t=.35,diffuse:e=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:t,lighting_uDiffuse:e,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(t):{lighting_uEnabled:!1}}},N0e={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},I6=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=N0e){const t={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const e=n.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=e}else t.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const e=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(e[3])||(e[3]=1),t.picking_uHighlightColor=e}return void 0!==n.pickingActive&&(t.picking_uActive=Boolean(n.pickingActive),t.picking_uAttribute=Boolean(n.pickingAttribute)),t}}),P6={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class S1{static get DRAW_MODE(){return P6}constructor(t={}){const{id:e=iu("geometry"),drawMode:i=P6.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?Sd({indices:this.indices},this.attributes):this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const i in t){let r=t[i];r=ArrayBuffer.isView(r)?{value:r}:r,tt(ArrayBuffer.isView(r.value),`${this._print(i)}: must be typed array or object with value as typed array`),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(tt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let i=1/0;for(const r in t){const s=t[r],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(i=Math.min(i,o.length/a))}return tt(Number.isFinite(i)),i}}function R6(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var vR=Math.PI/180,M1=new Float32Array(16),k6=new Float32Array(12);function F6(n,t,e){var i=t[0]*vR,r=t[1]*vR,s=t[2]*vR,o=Math.sin(s),a=Math.sin(i),l=Math.sin(r),c=Math.cos(s),u=Math.cos(i),h=Math.cos(r),p=e[0],g=e[1],m=e[2];n[0]=p*h*u,n[1]=p*l*u,n[2]=p*-a,n[3]=g*(-l*c+h*a*o),n[4]=g*(h*c+l*a*o),n[5]=g*u*o,n[6]=m*(l*o+h*a*c),n[7]=m*(-h*o+l*a*c),n[8]=m*u*c}function N6(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}var L6={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(t,e){var i=e.startRow,r=e.endRow,s=this.props,o=s.data,a=s.getOrientation,l=s.getScale,c=s.getTranslation,u=s.getTransformMatrix,h=Array.isArray(u),p=h&&16===u.length,g=Array.isArray(l),m=Array.isArray(a),v=Array.isArray(c),y=p||!h&&Boolean(u(o[0]));t.constant=y?p:m&&g&&v;var C=t.value;if(t.constant){var w;y?(M1.set(u),w=N6(M1)):(F6(w=k6,a,l),w.set(c,9)),t.value=new Float32Array(w)}else{var ne,B=i*t.size,U=E5(o,i,r),ae=U.objectInfo,de=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return R6(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R6(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(U.iterable);try{for(de.s();!(ne=de.n()).done;){var Se=ne.value;ae.index++;var ve=void 0;y?(M1.set(p?u:u(Se,ae)),ve=N6(M1)):(F6(ve=k6,m?a:a(Se,ae),g?l:l(Se,ae)),ve.set(v?c:c(Se,ae),9)),C[B++]=ve[0],C[B++]=ve[1],C[B++]=ve[2],C[B++]=ve[3],C[B++]=ve[4],C[B++]=ve[5],C[B++]=ve[6],C[B++]=ve[7],C[B++]=ve[8],C[B++]=ve[9],C[B++]=ve[10],C[B++]=ve[11]}}catch(we){de.e(we)}finally{de.f()}}}};function B6(n,t){return t===ti.CARTESIAN||t===ti.METER_OFFSETS||t===ti.DEFAULT&&!n.isGeospatial}function V6(n,t){(n.COLOR_0||n.colors)&&t||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),ei.assert(n.positions||n.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function $0e(n,t){if(n.attributes)return V6(n.attributes,t),n instanceof S1?n:new S1(n);if(n.positions||n.POSITION)return V6(n,t),new S1({attributes:n});throw Error("Invalid mesh")}var yR=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"getShaders",value:function(){var r=!Rn(this.context.gl),s={};return xI(this.context.gl,"GLSL_DERIVATIVES")&&(s.DERIVATIVES_AVAILABLE=1),Hs(Ot(e.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[A6,k0e,I6],transpileToGLSL100:r,defines:s})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:L6}),this.setState({emptyTexture:new Na(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(r){var s=r.props,o=r.oldProps,a=r.changeFlags;if(Hs(Ot(e.prototype),"updateState",this).call(this,{props:s,oldProps:o,changeFlags:a}),s.mesh!==o.mesh||a.extensionsChanged){if(this.state.model&&this.state.model.delete(),s.mesh){this.setState({model:this.getModel(s.mesh)});var l=s.mesh.attributes||s.mesh;this.setState({hasNormals:Boolean(l.NORMAL||l.normals)})}this.getAttributeManager().invalidateAll()}s.texture!==o.texture&&this.setTexture(s.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){Hs(Ot(e.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete()}},{key:"draw",value:function(r){if(this.state.model){var a=this.props;this.state.model.draw({uniforms:Object.assign({},r.uniforms,{sizeScale:a.sizeScale,composeModelMatrix:!a._instanced||B6(this.context.viewport,a.coordinateSystem),flatShading:!this.state.hasNormals})})}}},{key:"getModel",value:function(r){var s=new jS(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:$0e(r,this.props._useMeshColors),isInstanced:!0})),o=this.props.texture;return s.setUniforms({sampler:o||this.state.emptyTexture,hasTexture:Boolean(o)}),s}},{key:"setTexture",value:function(r){var o=this.state,l=o.model;l&&l.setUniforms({sampler:r||o.emptyTexture,hasTexture:Boolean(r)})}}]),e}(Bm);yR.layerName="SimpleMeshLayer",yR.defaultProps={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};const j6={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[_R]};class Um{constructor(t={}){const{id:e}=t;this.id=e||iu(this.constructor.name),this.display=!0,this.position=new lo,this.rotation=new lo,this.scale=new lo(1,1,1),this.matrix=new tn,this.userData={},this.props={},this._setScenegraphNodeProps(t)}delete(){}setProps(t){return this._setScenegraphNodeProps(t),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(t){return tt(3===t.length,"setPosition requires vector argument"),this.position=t,this}setRotation(t){return tt(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}setScale(t){return tt(3===t.length,"setScale requires vector argument"),this.scale=t,this}setMatrix(t,e=!0){e?this.matrix.copy(t):this.matrix=t}setMatrixComponents({position:t,rotation:e,scale:i,update:r=!0}){return t&&this.setPosition(t),e&&this.setRotation(e),i&&this.setScale(i),r&&this.updateMatrix(),this}updateMatrix(){const t=this.position,e=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(i),this}update(t={}){const{position:e,rotation:i,scale:r}=t;return e&&this.setPosition(e),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(t,e){tt(t),e=e||this.matrix;const i=new tn(t).multiplyRight(e),r=i.invert(),s=r.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}class Lb extends Um{constructor(t={}){t=Array.isArray(t)?{children:t}:t;const{children:e=[]}=t;_t.assert(e.every(i=>i instanceof Um),"every child must an instance of ScenegraphNode"),super(t),this.children=e}add(...t){for(const e of t)Array.isArray(e)?this.add(...e):this.children.push(e);return this}remove(t){const e=this.children,i=e.indexOf(t);return i>-1&&e.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(t=>t.delete()),this.removeAll(),super.delete()}traverse(t,{worldMatrix:e=new tn}={}){const i=new tn(e).multiplyRight(this.matrix);for(const r of this.children)r instanceof Lb?r.traverse(t,{worldMatrix:i}):t(r,{worldMatrix:i})}}function z6(){var n=new da(4);return da!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function U6(n,t,e){e*=.5;var i=Math.sin(e);return n[0]=i*t[0],n[1]=i*t[1],n[2]=i*t[2],n[3]=Math.cos(e),n}function H6(n,t,e){var i=t[0],r=t[1],s=t[2],o=t[3],a=e[0],l=e[1],c=e[2],u=e[3];return n[0]=i*u+o*a+r*c-s*l,n[1]=r*u+o*l+s*a-i*c,n[2]=s*u+o*c+i*l-r*a,n[3]=o*u-i*a-r*l-s*c,n}var G6=P4,awe=function(){var n=d5(),t=h5(1,0,0),e=h5(0,1,0);return function(i,r,s){var o=f5(r,s);return o<-.999999?(xS(n,t,r),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&xS(n,e,r),function(n,t){var e=t[0],i=t[1],r=t[2],s=e*e+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s}(n,n),U6(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(xS(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function(n,t){var e=t[0],i=t[1],r=t[2],s=t[3],o=e*e+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=e*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();z6(),z6(),function(){var n=new da(9);da!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const lwe=[0,0,0,1],uwe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dwe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Y6(n){if(!n._animation){const t=dwe[n.componentType],e=uwe[n.type],i=e*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new t(r,s+(n.byteOffset||0),i);if(1===e)n._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=e)a.push(Array.from(o.slice(l,l+e)));n._animation=a}}return n._animation}const hwe=new tn,bR=new class extends OI{constructor(t=0,e=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,i,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,i,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this.check()}fromMatrix3(t){return function(n,t){var i,e=t[0]+t[4]+t[8];if(e>0)i=Math.sqrt(e+1),n[3]=.5*i,n[0]=(t[5]-t[7])*(i=.5/i),n[1]=(t[6]-t[2])*i,n[2]=(t[1]-t[3])*i;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(t[3*r+r]-t[3*s+s]-t[3*o+o]+1),n[r]=.5*i,n[3]=(t[3*s+o]-t[3*o+s])*(i=.5/i),n[s]=(t[3*s+r]+t[3*r+s])*i,n[o]=(t[3*o+r]+t[3*r+o])*i}}(this,t),this.check()}identity(){return function(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(t,e){return U6(this,t,e),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=Vr(t)}get y(){return this[1]}set y(t){this[1]=Vr(t)}get z(){return this[2]}set z(t){this[2]=Vr(t)}get w(){return this[3]}set w(t){this[3]=Vr(t)}len(){return function(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function(n){var t=n[0],e=n[1],i=n[2],r=n[3];return t*t+e*e+i*i+r*r}(this)}dot(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}(this,t)}rotationTo(t,e){return awe(this,t,e),this.check()}add(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return function(n,t,e){n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3]}(this,this,t),this.check()}calculateW(){return function(n,t){var e=t[0],i=t[1],r=t[2];n[0]=e,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-e*e-i*i-r*r))}(this,this),this.check()}conjugate(){return function(n,t){n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3]}(this,this),this.check()}invert(){return function(n,t){var e=t[0],i=t[1],r=t[2],s=t[3],o=e*e+i*i+r*r+s*s,a=o?1/o:0;n[0]=-e*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(t,e,i){return function(n,t,e,i){var r=t[0],s=t[1],o=t[2],a=t[3];n[0]=r+i*(e[0]-r),n[1]=s+i*(e[1]-s),n[2]=o+i*(e[2]-o),n[3]=a+i*(e[3]-a)}(this,t,e,i),this.check()}multiplyRight(t,e){return ad(!e),H6(this,this,t),this.check()}multiplyLeft(t,e){return ad(!e),H6(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(n,t,e){e*=.5;var i=t[0],r=t[1],s=t[2],o=t[3],a=Math.sin(e),l=Math.cos(e);n[0]=i*l+o*a,n[1]=r*l+s*a,n[2]=s*l-r*a,n[3]=o*l-i*a}(this,this,t),this.check()}rotateY(t){return function(n,t,e){e*=.5;var i=t[0],r=t[1],s=t[2],o=t[3],a=Math.sin(e),l=Math.cos(e);n[0]=i*l-s*a,n[1]=r*l+o*a,n[2]=s*l+i*a,n[3]=o*l-r*a}(this,this,t),this.check()}rotateZ(t){return function(n,t,e){e*=.5;var i=t[0],r=t[1],s=t[2],o=t[3],a=Math.sin(e),l=Math.cos(e);n[0]=i*l+r*a,n[1]=r*l-i*a,n[2]=s*l+o*a,n[3]=o*l-s*a}(this,this,t),this.check()}scale(t){return G6(this,this,t),this.check()}slerp(t,e,i){switch(arguments.length){case 1:({start:t=lwe,target:e,ratio:i}=arguments[0]);break;case 2:[e,i]=arguments,t=this}return function(n,t,e,i){var p,g,m,v,y,r=t[0],s=t[1],o=t[2],a=t[3],l=e[0],c=e[1],u=e[2],h=e[3];(g=r*l+s*c+o*u+a*h)<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>qi?(p=Math.acos(g),m=Math.sin(p),v=Math.sin((1-i)*p)/m,y=Math.sin(i*p)/m):(v=1-i,y=i),n[0]=v*r+y*l,n[1]=v*s+y*c,n[2]=v*o+y*u,n[3]=v*a+y*h}(this,t,e,i),this.check()}transformVector4(t,e=t){return function(n,t,e){var i=t[0],r=t[1],s=t[2],o=e[0],a=e[1],l=e[2],c=e[3],u=c*i+a*s-l*r,h=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;n[0]=u*c+g*-o+h*-l-p*-a,n[1]=h*c+g*-a+p*-o-u*-l,n[2]=p*c+g*-l+u*-a-h*-o,n[3]=t[3]}(e,t,this),TS(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t,e){return this.multiplyLeft(t,e)}multiply(t,e){return this.multiplyRight(t,e)}};class vwe{constructor(t){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,t)}animate(t){if(!this.playing)return;const i=(t/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:r,target:s,path:o})=>{(function(n,{input:t,interpolation:e,output:i},r,s){const a=n%t[t.length-1],l=t.findIndex(p=>p>=a),c=Math.max(0,l-1);if(!Array.isArray(r[s]))switch(s){case"translation":r[s]=[0,0,0];break;case"rotation":r[s]=[0,0,0,1];break;case"scale":r[s]=[1,1,1];break;default:_t.warn(`Bad animation path ${s}`)()}tt(r[s].length===i[c].length);const u=t[c],h=t[l];switch(e){case"STEP":!function(n,t,e){for(let i=0;i<e.length;i++)n[t][i]=e[i]}(r,s,i[c]);break;case"LINEAR":h>u&&function(n,t,e,i,r){if("rotation"===t){bR.slerp({start:e,target:i,ratio:r});for(let s=0;s<bR.length;s++)n[t][s]=bR[s]}else for(let s=0;s<e.length;s++)n[t][s]=r*i[s]+(1-r)*e[s]}(r,s,i[c],i[l],(a-u)/(h-u));break;case"CUBICSPLINE":h>u&&function(n,t,{p0:e,outTangent0:i,inTangent1:r,p1:s,tDiff:o,ratio:a}){for(let l=0;l<n[t].length;l++){const c=i[l]*o,u=r[l]*o;n[t][l]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*e[l]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*c+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[l]+(Math.pow(a,3)-Math.pow(a,2))*u}}(r,s,{p0:i[3*c+1],outTangent0:i[3*c+2],inTangent1:i[3*l+0],p1:i[3*l+1],tDiff:h-u,ratio:(a-u)/(h-u)});break;default:_t.warn(`Interpolation ${e} not supported`)()}})(i,r,s,o),function(n,t){if(t.matrix.identity(),n.translation&&t.matrix.translate(n.translation),n.rotation){const e=hwe.fromQuaternion(n.rotation);t.matrix.multiplyRight(e)}n.scale&&t.matrix.scale(n.scale)}(s,s._node)})}}class ywe{constructor(t){this.animations=t.animations.map((e,i)=>{const r=e.name||`Animation-${i}`,s=e.samplers.map(({input:a,interpolation:l="LINEAR",output:c})=>({input:Y6(t.accessors[a]),interpolation:l,output:Y6(t.accessors[c])})),o=e.channels.map(({sampler:a,target:l})=>({sampler:s[a],target:t.nodes[l.node],path:l.path}));return new vwe({name:r,channels:o})})}animate(t){this.setTime(t)}setTime(t){this.animations.forEach(e=>e.animate(t))}getAnimations(){return this.animations}}class bwe extends Um{constructor(t,e={}){super(e),this.onBeforeRender=null,this.AfterRender=null,t instanceof jS?(this.model=t,this._setModelNodeProps(e)):this.model=new jS(t,e),this.managedResources=e.managedResources||[]}setProps(t){return super.setProps(t),this._setModelNodeProps(t),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(t=>t.delete()),this.managedResources=[]}draw(...t){return this.model.draw(...t)}setUniforms(...t){return this.model.setUniforms(...t),this}setAttributes(...t){return this.model.setAttributes(...t),this}updateModuleSettings(...t){return this.model.updateModuleSettings(...t),this}_setModelNodeProps(t){this.model.setProps(t)}}class wwe{constructor(t,{attributes:e,material:i,pbrDebug:r,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=t,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},xI(t,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),r&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(e.NORMAL,"HAS_NORMALS"),this.defineIfPresent(e.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(e.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(r,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(t,e){t&&(this.defines[e]=1)}parseTexture(t,e,i=null){const s=t.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new Na(this.gl,Sd({id:t.name||t.id,parameters:Sd(Sd({},t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[e]=l,this.defineIfPresent(i,i),this.generatedTextures.push(l)}parsePbrMetallicRoughness(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:e=1,roughnessFactor:i=1}=t;this.uniforms.u_MetallicRoughnessValues=[e,i]}parseMaterial(t){if(this.uniforms.pbr_uUnlit=Boolean(t.unlit),t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:e=1}=t.normalTexture;this.uniforms.u_NormalScale=e}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:e=1}=t.occlusionTexture;this.uniforms.u_OcclusionStrength=e}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),"MASK"===t.alphaMode){const{alphaCutoff:e=.5}=t;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=e}else"BLEND"===t.alphaMode&&(_t.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function X6(n,t){return Rn(n)?`#version 300 es\n${t}`:t}const Mwe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Awe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class Twe{constructor(t,e={}){this.gl=t,this.options=Object.assign({},Awe,e)}instantiate(t){return this.gltf=t,(t.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new ywe(this.gltf):null}createScene(t){const i=(t.nodes||[]).map(s=>this.createNode(s));return new Lb({id:t.name||t.id,children:i})}createNode(t){if(!t._node){const i=(t.children||[]).map(s=>this.createNode(s));t.mesh&&i.push(this.createMesh(t.mesh));const r=new Lb({id:t.name||t.id,children:i});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){const s=(new tn).fromQuaternion(t.rotation);r.matrix.multiplyRight(s)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}createMesh(t){if(!t._mesh){const i=(t.primitives||[]).map((s,o)=>this.createPrimitive(s,o,t)),r=new Lb({id:t.name||t.id,children:i});t._mesh=r}return t._mesh}getVertexCount(t){_t.warn("getVertexCount() not found")()}createPrimitive(t,e,i){return function(n,t){const{id:e,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=t,a=new wwe(n,t);_t.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(u=>u.buffer));const c=new bwe(n,Object.assign({id:e,drawMode:i,vertexCount:r,modules:[j6],defines:a.defines,parameters:a.parameters,vs:X6(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:X6(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},o));return c.setProps({attributes:s}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:t.name||`${i.name||i.id}-primitive-${e}`,drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options))}createAttributes(t,e){const i={};return Object.keys(t).forEach(r=>{i[r]=this.createAccessor(t[r],this.createBuffer(t[r],this.gl.ARRAY_BUFFER))}),e&&(i.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),_t.info(4,"glTF Attributes",{attributes:t,indices:e,generated:i})(),i}createBuffer(t,e){t.bufferView||(t.bufferView={});const{bufferView:i}=t;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[e]||(i.lumaBuffers[e]=new Oi(this.gl,{id:`from-${i.id}`,data:i.data||t.value,target:e})),i.lumaBuffers[e]}createAccessor(t,e){return new ua({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:Mwe[t.type]})}createSampler(t){return t}needsPOT(){return!1}}function K6(n,t,e){if(n.byteLength<=t+e)return"";for(var i=new DataView(n),r="",s=0;s<e;s++)r+=String.fromCharCode(i.getUint8(t+s));return r}function Bb(n){return n+3&-4}function Z6(n,t,e){return function(n,t,e){var i=void 0!==e?new Uint8Array(n).subarray(t,t+e):new Uint8Array(n).subarray(t);return new Uint8Array(i).buffer}(n,t,e)}function Iwe(n,t,e){var i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength),t.set(i,e),e+Bb(i.byteLength)}function Lo(n,t){if(!n)throw new Error(t||"assert failed: gltf")}function Q6(n,t){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;var i=t.baseUri||t.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function J6(n,t,e){var i=n.bufferViews[e];Lo(i);var s=t[i.buffer];return Lo(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}var Vb,T1=xe(207),wR={};function CR(n){return ER.apply(this,arguments)}function ER(){return(ER=An(je().mark(function n(t){var e,i,r=arguments;return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=r.length>2&&void 0!==r[2]?r[2]:{},(e=r.length>1&&void 0!==r[1]?r[1]:null)&&(t=Rwe(t,e,i)),wR[t]=wR[t]||kwe(t),o.next=6,wR[t];case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}},n)}))).apply(this,arguments)}function Rwe(n,t,e){var i=e.modules||{};return i[n]?i[n]:xb?e.CDN?(No(e.CDN.startsWith("http")),"".concat(e.CDN,"/").concat(t,"@").concat("2.3.13","/dist/libs/").concat(n)):_P?"../src/libs/".concat(n):"modules/".concat(t,"/src/libs/").concat(n):"modules/".concat(t,"/dist/libs/").concat(n)}function kwe(n){return SR.apply(this,arguments)}function SR(){return(SR=An(je().mark(function n(t){var e,i;return je().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.endsWith("wasm")){o.next=7;break}return o.next=3,fetch(t);case 3:return e=o.sent,o.next=6,e.arrayBuffer();case 6:return o.abrupt("return",o.sent);case 7:if(xb){o.next=9;break}return o.abrupt("return",T1.requireFromFile&&T1.requireFromFile(t));case 9:if(!_P){o.next=11;break}return o.abrupt("return",importScripts(t));case 11:return o.next=13,fetch(t);case 13:return i=o.sent,o.next=16,i.text();case 16:return o.abrupt("return",Fwe(o.sent,t));case 18:case"end":return o.stop()}},n)}))).apply(this,arguments)}function Fwe(n,t){if(!xb)return T1.requireFromString&&T1.requireFromString(n,t);if(_P)return eval.call(Tb,n),null;var e=document.createElement("script");e.id=t;try{e.appendChild(document.createTextNode(n))}catch(i){e.text=n}return document.body.appendChild(e),null}function e$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function t$(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):e$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Nwe(n){return MR.apply(this,arguments)}function MR(){return(MR=An(je().mark(function n(t){var e;return je().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return Vb=(e=t.modules||{}).draco3d?Vb||new Promise(function(s){var o=e.draco3d.createDecoderModule({onModuleLoaded:function(){s({draco:o})}})}):Vb||Lwe(t),r.next=4,Vb;case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},n)}))).apply(this,arguments)}function Lwe(n){return TR.apply(this,arguments)}function TR(){return(TR=An(je().mark(function n(t){var e,i,s;return je().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=t.draco&&t.draco.decoderType,a.next="js"===a.t0?3:7;break;case 3:return a.next=5,CR("draco_decoder.js","draco",t);case 5:return e=a.sent,a.abrupt("break",21);case 7:return a.t1=Promise,a.next=10,CR("draco_wasm_wrapper.js","draco",t);case 10:return a.t2=a.sent,a.next=13,CR("draco_decoder.wasm","draco",t);case 13:return a.t3=a.sent,a.t4=[a.t2,a.t3],a.next=17,a.t1.all.call(a.t1,a.t4);case 17:s=Br(a.sent,2),e=s[0],i=s[1];case 21:return e=e||Tb.DracoDecoderModule,a.next=24,Bwe(e,i);case 24:return a.abrupt("return",a.sent);case 25:case"end":return a.stop()}},n)}))).apply(this,arguments)}function Bwe(n,t){var e={};return t&&(e.wasmBinary=t),new Promise(function(i){n(t$(t$({},e),{},{onModuleLoaded:function(s){return i({draco:s})}}))})}function jwe(n){if(!n||!n.POSITION)return null;var t=1/0,e=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=n.POSITION.value,l=a&&a.length;if(!l)return null;for(var c=0;c<l;c+=3){var u=a[c],h=a[c+1],p=a[c+2];t=u<t?u:t,e=h<e?h:e,i=p<i?p:i,r=u>r?u:r,s=h>s?h:s,o=p>o?p:o}return[[t,e,i],[r,s,o]]}var i$={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},r$={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},zwe=function(){function n(t){wt(this,n),this.draco=t,this.drawMode="TRIANGLE",this.metadataQuerier={}}return Tt(n,[{key:"destroy",value:function(){}},{key:"destroyGeometry",value:function(e){e&&this.draco.destroy(e.dracoGeometry)}},{key:"parseSync",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.metadataQuerier=new this.draco.MetadataQuerier;var r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength);var a,l,c,s=new this.draco.Decoder,o={};try{var u=s.GetEncodedGeometryType(r);switch(u){case this.draco.TRIANGULAR_MESH:l=new this.draco.Mesh,a=s.DecodeBufferToMesh(r,l),c={type:0,faceCount:l.num_faces(),attributeCount:l.num_attributes(),vertexCount:l.num_points()};break;case this.draco.POINT_CLOUD:l=new this.draco.PointCloud,a=s.DecodeBufferToPointCloud(r,l),c={type:1,attributeCount:l.num_attributes(),vertexCount:l.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!a.ok()||!l.ptr){var h="DRACO decompression failed: ".concat(a.error_msg());throw l&&this.draco.destroy(l),new Error(h)}o.loaderData={header:c},this._extractDRACOGeometry(s,l,u,o,i);var p=this._getGeometryMetadata(s,l);o.header={vertexCount:c.vertexCount,boundingBox:jwe(o.attributes),metadata:p}}finally{this.draco.destroy(s),this.draco.destroy(r),this.draco.destroy(l),this.draco.destroy(this.metadataQuerier)}return o}},{key:"_extractDRACOGeometry",value:function(e,i,r,s,o){var a=this._getAttributes(e,i,o);if(!a.POSITION)throw new Error("DRACO decompressor: No position attribute found.");return r===this.draco.TRIANGULAR_MESH?(a.indices="TRIANGLE_STRIP"===this.drawMode?this._getMeshStripIndices(e,i):this._getMeshFaceIndices(e,i),s.mode="TRIANGLE_STRIP"===this.drawMode?5:4):s.mode=0,a.indices&&(s.indices={value:a.indices,size:1},delete a.indices),s.attributes=a,s}},{key:"getPositionAttributeMetadata",value:function(e){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var i=new this.draco.AttributeQuantizationTransform;if(i.InitFromAttribute(e)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=i.range(),this.metadata.attributes.position.numQuantizationBits=i.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var r=0;r<3;++r)this.metadata.attributes.position.minValues[r]=i.min_value(r)}this.draco.destroy(i)}},{key:"_getAttributes",value:function(e,i,r){for(var s={},o=i.num_points(),a=0;a<i.num_attributes();a++){var l=e.GetAttribute(i,a),c=this._getAttributeMetadata(e,i,a),u={uniqueId:l.unique_id(),attributeType:l.attribute_type(),dataType:r$[l.data_type()],size:l.size(),numComponents:l.num_components(),byteOffset:l.byte_offset(),byteStride:l.byte_stride(),normalized:l.normalized(),metadata:c},h=this._deduceAttributeName(u,r),g=this._getAttributeTypedArray(e,i,l,h).typedArray;s[h]={value:g,size:g.length/o,metadata:c}}return s}},{key:"_getMeshFaceIndices",value:function(e,i){for(var r=i.num_faces(),o=new Uint32Array(3*r),a=new this.draco.DracoInt32Array,l=0;l<r;++l){e.GetFaceFromMesh(i,l,a);var c=3*l;o[c]=a.GetValue(0),o[c+1]=a.GetValue(1),o[c+2]=a.GetValue(2)}return this.draco.destroy(a),o}},{key:"_getMeshStripIndices",value:function(e,i){var r=new this.draco.DracoInt32Array;e.GetTriangleStripsFromMesh(i,r);for(var s=new Uint32Array(r.size()),o=0;o<r.size();++o)s[o]=r.GetValue(o);return this.draco.destroy(r),s}},{key:"_getAttributeTypedArray",value:function(e,i,r,s){if(0===r.ptr){var o="DRACO decode bad attribute ".concat(s);throw new Error(o)}var h,p,a=r$[r.data_type()],l=r.num_components(),u=i.num_points()*l;switch(a){case Float32Array:h=new this.draco.DracoFloat32Array,e.GetAttributeFloatForAllPoints(i,r,h),p=new Float32Array(u);break;case Int8Array:h=new this.draco.DracoInt8Array,e.GetAttributeInt8ForAllPoints(i,r,h),p=new Int8Array(u);break;case Int16Array:h=new this.draco.DracoInt16Array,e.GetAttributeInt16ForAllPoints(i,r,h),p=new Int16Array(u);break;case Int32Array:h=new this.draco.DracoInt32Array,e.GetAttributeInt32ForAllPoints(i,r,h),p=new Int32Array(u);break;case Uint8Array:h=new this.draco.DracoUInt8Array,e.GetAttributeUInt8ForAllPoints(i,r,h),p=new Uint8Array(u);break;case Uint16Array:h=new this.draco.DracoUInt16Array,e.GetAttributeUInt16ForAllPoints(i,r,h),p=new Uint16Array(u);break;case Uint32Array:h=new this.draco.DracoUInt32Array,e.GetAttributeUInt32ForAllPoints(i,r,h),p=new Uint32Array(u);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var m=0;m<u;m++)p[m]=h.GetValue(m);return this.draco.destroy(h),{typedArray:p,components:l}}},{key:"_deduceAttributeName",value:function(e,i){var r=i.extraAttributes,s=void 0===r?{}:r;if(s&&"object"===$i(s))for(var o=0,a=Object.entries(s);o<a.length;o++){var l=Br(a[o],2);if(l[1]===e.uniqueId)return l[0]}for(var h in i$)if(e.attributeType===this.draco[h])return i$[h];if(e.metadata){var g=i.attributeNameEntry||"name";if(e.metadata[g])return e.metadata[g].string}return"CUSTOM_ATTRIBUTE_".concat(e.uniqueId)}},{key:"_getGeometryMetadata",value:function(e,i){var r=e.GetMetadata(i);return this._queryDracoMetadata(r)}},{key:"_getAttributeMetadata",value:function(e,i,r){var s=e.GetAttributeMetadata(i,r);return this._queryDracoMetadata(s)}},{key:"_queryDracoMetadata",value:function(e){if(!e||!e.ptr)return{};for(var i={},r=this.metadataQuerier.NumEntries(e),s=0;s<r;s++){var o=this.metadataQuerier.GetEntryName(e,s);i[o]={int:this.metadataQuerier.GetIntEntry(e,o),string:this.metadataQuerier.GetStringEntry(e,o),double:this.metadataQuerier.GetDoubleEntry(e,o),intArray:this.metadataQuerier.GetIntEntryArray(e,o)}}return i}},{key:"decode",value:function(e,i){return this.parseSync(e,i)}}]),n}();function s$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function DR(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?s$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):s$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var a$={id:"draco",name:"Draco",version:"2.3.13",extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"===("undefined"==typeof WebAssembly?"undefined":$i(WebAssembly))?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@".concat("2.3.13","/dist/draco-loader.worker.js"),localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js",extraAttributes:{}}}},OR=DR(DR({},a$),{},{parse:function(n,t,e,i){return IR.apply(this,arguments)}});function IR(){return(IR=An(je().mark(function n(t,e,i,r){var a;return je().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Nwe(e);case 2:return a=new zwe(c.sent.draco),c.prev=5,c.abrupt("return",a.parseSync(t,DR({extraAttributes:e.draco&&e.draco.extraAttributes||null},e.parseOptions||{})));case 7:return c.prev=7,a.destroy(),c.finish(7);case 10:case"end":return c.stop()}},n,null,[[5,,7,10]])}))).apply(this,arguments)}var l$=["SCALAR","VEC2","VEC3","VEC4"],$we=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]),Gwe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Wwe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},qwe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function c$(n){return l$[n-1]||l$[0]}function u$(n){var t=$we.get(n.constructor);if(!t)throw new Error("Illegal typed array");return t}function d$(n,t){var e=qwe[n.componentType],i=Gwe[n.type],s=n.count*i,o=n.count*i*Wwe[n.componentType];return Lo(o>=0&&o<=t.byteLength),{ArrayType:e,length:s,byteLength:o}}var Sh=function(){function n(t){if(wt(this,n),t instanceof n)return t;t||(t={json:{asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},buffers:[]}),this.byteLength=0,this.gltf=t,Lo(this.gltf.json)}return Tt(n,[{key:"getApplicationData",value:function(e){return this.json[e]}},{key:"getExtraData",value:function(e){return(this.json.extras||{})[e]}},{key:"getExtension",value:function(e){return this.getUsedExtensions().find(function(s){return s===e})?(this.json.extensions||{})[e]||!0:null}},{key:"getRequiredExtension",value:function(e){return this.getRequiredExtensions().find(function(r){return r===e})?this.getExtension(e):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(e,i){return(e.extensions||{})[i]}},{key:"getScene",value:function(e){return this.getObject("scenes",e)}},{key:"getNode",value:function(e){return this.getObject("nodes",e)}},{key:"getSkin",value:function(e){return this.getObject("skins",e)}},{key:"getMesh",value:function(e){return this.getObject("meshes",e)}},{key:"getMaterial",value:function(e){return this.getObject("materials",e)}},{key:"getAccessor",value:function(e){return this.getObject("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this.getObject("textures",e)}},{key:"getSampler",value:function(e){return this.getObject("samplers",e)}},{key:"getImage",value:function(e){return this.getObject("images",e)}},{key:"getBufferView",value:function(e){return this.getObject("bufferViews",e)}},{key:"getBuffer",value:function(e){return this.getObject("buffers",e)}},{key:"getObject",value:function(e,i){if("object"===$i(i))return i;var r=this.json[e]&&this.json[e][i];if(!r)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(i,"]"));return r}},{key:"getTypedArrayForBufferView",value:function(e){e=this.getBufferView(e);var r=this.gltf.buffers[e.buffer];return Lo(r),new Uint8Array(r.arrayBuffer,(e.byteOffset||0)+r.byteOffset,e.byteLength)}},{key:"getTypedArrayForAccessor",value:function(e){e=this.getAccessor(e);var i=this.getBufferView(e.bufferView),s=this.getBuffer(i.buffer).data,o=d$(e,i);return new(0,o.ArrayType)(s,i.byteOffset+e.byteOffset,o.length)}},{key:"getTypedArrayForImageData",value:function(e){e=this.getAccessor(e);var i=this.getBufferView(e.bufferView),r=this.getBuffer(i.buffer);return new Uint8Array(r.data,i.byteOffset||0,i.byteLength)}},{key:"addApplicationData",value:function(e,i){return this.json[e]=i,this}},{key:"addExtraData",value:function(e,i){return this.json.extras=this.json.extras||{},this.json.extras[e]=i,this}},{key:"addObjectExtension",value:function(e,i,r){return Lo(r),e.extensions=e.extensions||{},e.extensions[i]=r,this.registerUsedExtension(i),this}},{key:"setObjectExtension",value:function(e,i,r){(e.extensions||{})[i]=r}},{key:"removeObjectExtension",value:function(e,i){var r=e.extensions||{},s=r[i];return delete r[i],s}},{key:"addExtension",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lo(i),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=i,this.registerUsedExtension(e),i}},{key:"addRequiredExtension",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Lo(i),this.addExtension(e,i),this.registerRequiredExtension(e),i}},{key:"registerUsedExtension",value:function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(i){return i===e})||this.json.extensionsUsed.push(e)}},{key:"registerRequiredExtension",value:function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(i){return i===e})||this.json.extensionsRequired.push(e)}},{key:"removeExtension",value:function(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}},{key:"addMesh",value:function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,s=this._addAttributes(e),o={primitives:[{attributes:s,indices:i,mode:r}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}},{key:"addPointCloud",value:function(e){var r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}},{key:"addImage",value:function(e,i){i=i||function(n){var t=uR(n);return t?t.mimeType:null}(e);var s={bufferView:this.addBufferView(e),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}},{key:"addBufferView",value:function(e){var i=e.byteLength;Lo(Number.isFinite(i)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var r={buffer:0,byteOffset:this.byteLength,byteLength:i};return this.byteLength+=Bb(i),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,i){var r={bufferView:e,type:c$(i.size),componentType:i.componentType,count:i.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},r=this.addBufferView(e),s={size:i.size,componentType:u$(e),count:Math.round(e.length/i.size)};return this.addAccessor(r,Object.assign(s,i))}},{key:"createBinaryChunk",value:function(){if(!this.arrayBuffer){for(var e=this.byteLength,i=new ArrayBuffer(e),r=new Uint8Array(i),s=0,o=0;o<this.sourceBuffers.length;o++)s=Iwe(this.sourceBuffers[o],r,s);this.json.buffers[0].byteLength=e,this.arrayBuffer=i,this.sourceBuffers=[]}}},{key:"_removeStringFromArray",value:function(e,i){for(var r=!0;r;){var s=e.indexOf(i);s>-1?e.splice(s,1):r=!1}}},{key:"json",get:function(){return this.gltf.json}}]),n}(),h$="KHR_binary_glTF",zb="KHR_draco_mesh_compression",Hm="KHR_lights_punctual",x1="KHR_materials_unlit",D1="KHR_techniques_webgl";function f$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function p$(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?f$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):f$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Kwe(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e={};for(var i in n){var r=n[i];if("indices"!==i){var s=g$(r,t[i]||{});e[i]=s}}return e}function g$(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=Zwe(n),i=e.buffer,r=e.size,s=e.count,o=p$(p$({},t),{},{value:i,size:r,bufferView:null,byteOffset:0,count:s,type:c$(r),componentType:u$(i)});return o}function Zwe(n){var t=n,e=1,i=0;return n&&n.value&&(t=n.value,e=n.size||1),t&&(ArrayBuffer.isView(t)||(t=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?Array.isArray(n)?new t(n):!e||n instanceof t?n:new t(n):null}(t,Float32Array)),i=t.length/e),{buffer:t,size:e,count:i}}function m$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function Jwe(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):m$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var eCe=je().mark(v$);function O1(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return _$(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _$(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function _$(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function nCe(n,t,e){return PR.apply(this,arguments)}function PR(){return(PR=An(je().mark(function n(t,e,i){var r,s,o,a,l;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e.gltf.decompressMeshes){u.next=2;break}return u.abrupt("return");case 2:r=new Sh(t),s=[],o=O1(v$(r));try{for(o.s();!(a=o.n()).done;)r.getObjectExtension(l=a.value,zb)&&s.push(rCe(l,r,e,i))}catch(h){o.e(h)}finally{o.f()}return u.next=8,Promise.all(s);case 8:r.removeExtension(zb);case 9:case"end":return u.stop()}},n)}))).apply(this,arguments)}function iCe(n){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=new Sh(n),i=O1(e.json.meshes||[]);try{for(i.s();!(r=i.n()).done;){var s=r.value;sCe(s,t),e.addRequiredExtension(zb)}}catch(o){i.e(o)}finally{i.f()}}function rCe(n,t,e,i){return RR.apply(this,arguments)}function RR(){return(RR=An(je().mark(function n(t,e,i,r){var s,o,a,l,c,u,h,p,g,m;return je().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return s=e.getObjectExtension(t,zb),o=e.getTypedArrayForBufferView(s.bufferView),a=Z6(o.buffer,o.byteOffset),l=r.parse,delete(c=Jwe({},i))["3d-tiles"],w.next=8,l(a,OR,c,r);case 8:for(u=w.sent,h={},p=0,g=[].concat(mc(Object.entries(t.attributes)),[["indices",t.indices]]);p<g.length;p++)m=Br(g[p],2),h[m[0]]=e.getAccessor(m[1]);t.attributes=Kwe(u.attributes,h),u.indices&&(t.indices=g$(u.indices,h.indices||{})),oCe(t);case 14:case"end":return w.stop()}},n)}))).apply(this,arguments)}function sCe(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter||!i.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var s=i.DracoWriter.encodeSync({attributes:n}),o=r.parseSync,a=o({attributes:n}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(s),u={primitives:[{attributes:l,mode:e,extensions:Yt({},zb,{bufferView:c,attributes:l})}]};return u}function oCe(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("Empty glTF primitive detected: Draco decompression failure?")}function v$(n){var t,e,r,s,o;return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=O1(n.json.meshes||[]),l.prev=1,t.s();case 3:if((e=t.n()).done){l.next=24;break}r=O1(e.value.primitives),l.prev=6,r.s();case 8:if((s=r.n()).done){l.next=14;break}return o=s.value,l.next=12,o;case 12:l.next=8;break;case 14:l.next=19;break;case 16:l.prev=16,l.t0=l.catch(6),r.e(l.t0);case 19:return l.prev=19,r.f(),l.finish(19);case 22:l.next=3;break;case 24:l.next=29;break;case 26:l.prev=26,l.t1=l.catch(1),t.e(l.t1);case 29:return l.prev=29,t.f(),l.finish(29);case 32:case"end":return l.stop()}},eCe,null,[[1,26,29,32],[6,16,19,22]])}function y$(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return b$(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return b$(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function b$(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function lCe(n,t){var e=new Sh(n),i=e.json,r=e.getExtension(Hm);r&&(e.json.lights=r.lights,e.removeExtension(Hm));var o,s=y$(i.nodes||[]);try{for(s.s();!(o=s.n()).done;){var a=o.value,l=e.getObjectExtension(a,Hm);l&&(a.light=l.light),e.removeObjectExtension(a,Hm)}}catch(c){s.e(c)}finally{s.f()}}function cCe(n,t){var e=new Sh(n),i=e.json;if(i.lights){var r=e.addExtension(Hm);Lo(!r.lights),r.lights=i.lights,delete i.lights}if(e.json.lights){var o,s=y$(e.json.lights);try{for(s.s();!(o=s.n()).done;){var a=o.value;e.addObjectExtension(a.node,Hm,a)}}catch(c){s.e(c)}finally{s.f()}delete e.json.lights}}function w$(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return C$(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C$(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function C$(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function dCe(n,t){var e=new Sh(n),i=e.json;e.removeExtension(x1);var s,r=w$(i.materials||[]);try{for(r.s();!(s=r.n()).done;){var o=s.value;o.extensions&&o.extensions.KHR_materials_unlit&&(o.unlit=!0),e.removeObjectExtension(o,x1)}}catch(l){r.e(l)}finally{r.f()}}function hCe(n,t){var e=new Sh(n);if(e.materials){var s,r=w$(e.json.materials);try{for(r.s();!(s=r.n()).done;){var o=s.value;o.unlit&&(delete o.unlit,e.addObjectExtension(o,x1,{}),e.addExtension(x1))}}catch(a){r.e(a)}finally{r.f()}}}function E$(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function gCe(n,t){var e=new Sh(n),i=e.json,r=e.getExtension(D1);if(r){var a,s=function(n,t){var e=n.programs,i=void 0===e?[]:e,r=n.shaders,s=void 0===r?[]:r,o=n.techniques,a=void 0===o?[]:o,l=new TextDecoder;return s.forEach(function(c){if(!Number.isFinite(c.bufferView))throw new Error("KHR_techniques_webgl: no shader code");c.code=l.decode(t.getTypedArrayForBufferView(c.bufferView))}),i.forEach(function(c){c.fragmentShader=s[c.fragmentShader],c.vertexShader=s[c.vertexShader]}),a.forEach(function(c){c.program=i[c.program]}),a}(r,e),o=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return E$(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return E$(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(i.materials||[]);try{for(o.s();!(a=o.n()).done;){var l=a.value,c=e.getObjectExtension(l,D1);c&&(l.technique=Object.assign({},c,s[c.technique]),l.technique.values=vCe(l.technique,e)),e.removeObjectExtension(l,D1)}}catch(u){o.e(u)}finally{o.f()}e.removeExtension(D1)}}function mCe(n,t){}function vCe(n,t){var e=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(function(i){n.uniforms[i].value&&!(i in e)&&(e[i]=n.uniforms[i].value)}),Object.keys(e).forEach(function(i){"object"===$i(e[i])&&void 0!==e[i].index&&(e[i].texture=t.getTexture(e[i].index))}),e}var S$={KHR_draco_mesh_compression:bt,KHR_lights_punctual:F,KHR_materials_unlit:gt,KHR_techniques_webgl:It};function yCe(n){return kR.apply(this,arguments)}function kR(){return(kR=An(je().mark(function n(t){var e,i,r,s,a,l=arguments;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:i=l.length>2?l[2]:void 0,(e=l.length>1&&void 0!==l[1]?l[1]:{}).gltf=e.gltf||{},u.t0=je().keys(S$);case 4:if((u.t1=u.t0()).done){u.next=14;break}if((r=u.t1.value)in(s=e.gltf.excludeExtensions||{})&&!s[r]){u.next=12;break}return a=S$[r],u.next=12,a.decode(t,e,i);case 12:u.next=4;break;case 14:case"end":return u.stop()}},n)}))).apply(this,arguments)}var M$=1735152710,$m=!0;function MCe(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(n.getUint8(t+0))).concat(String.fromCharCode(n.getUint8(t+1))).concat(String.fromCharCode(n.getUint8(t+2))).concat(String.fromCharCode(n.getUint8(t+3)))}function xCe(n,t,e,i){No(n.header.byteLength>20);var r=t.getUint32(e+0,$m),s=t.getUint32(e+4,$m);return e+=8,No(0===s),NR(n,t,e,r),(e+=r)+LR(n,t,e,n.header.byteLength)}function DCe(n,t,e,i){return No(n.header.byteLength>20),function(n,t,e,i){for(;e+8<=n.header.byteLength;){var r=t.getUint32(e+0,$m),s=t.getUint32(e+4,$m);switch(e+=8,s){case 1313821514:NR(n,t,e,r);break;case 5130562:LR(n,t,e,r);break;case 0:i.glb.strict||NR(n,t,e,r);break;case 1:i.glb.strict||LR(n,t,e,r)}e+=Bb(r)}}(n,t,e,i),e+n.header.byteLength}function NR(n,t,e,i,r){var s=new Uint8Array(t.buffer,e,i),a=new TextDecoder("utf8").decode(s);return n.json=JSON.parse(a),Bb(i)}function LR(n,t,e,i,r){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:e,byteLength:i,arrayBuffer:t.buffer}),Bb(i)}function A$(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function lp(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return T$(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return T$(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}function T$(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}var Gm,x$={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},FCe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},NCe=function(){function n(t){wt(this,n),this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}return Tt(n,[{key:"normalize",value:function(e,i){this.json=e.json;var r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(r.asset.version))}if(!i.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),function(n,t){var s,e=new Sh(n),i=e.json,r=function(n,t){var e;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return A$(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A$(n,t)}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&null!=e.return&&e.return()}finally{if(o)throw a}}}}(i.images||[]);try{for(r.s();!(s=r.n()).done;){var o=s.value,a=e.removeObjectExtension(o,h$);a&&Object.assign(o,a)}}catch(l){r.e(l)}finally{r.f()}i.buffers&&i.buffers[0]&&delete i.buffers[0].uri,e.removeExtension(h$)}(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r)}},{key:"_addAsset",value:function(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(e){for(var i in x$)this._convertTopLevelObjectToArray(e,i)}},{key:"_convertTopLevelObjectToArray",value:function(e,i){var r=e[i];if(r&&!Array.isArray(r))for(var s in e[i]=[],r){var o=r[s];o.id=o.id||s;var a=e[i].length;e[i].push(o),this.idToIndexMap[i][s]=a}}},{key:"_convertObjectIdsToArrayIndices",value:function(e){for(var i in x$)this._convertIdsToIndices(e,i);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));var s,r=lp(e.textures);try{for(r.s();!(s=r.n()).done;)this._convertTextureIds(s.value)}catch(y){r.e(y)}finally{r.f()}var l,a=lp(e.meshes);try{for(a.s();!(l=a.n()).done;)this._convertMeshIds(l.value)}catch(y){a.e(y)}finally{a.f()}var h,u=lp(e.nodes);try{for(u.s();!(h=u.n()).done;)this._convertNodeIds(h.value)}catch(y){u.e(y)}finally{u.f()}var m,g=lp(e.scenes);try{for(g.s();!(m=g.n()).done;)this._convertSceneIds(m.value)}catch(y){g.e(y)}finally{g.f()}}},{key:"_convertTextureIds",value:function(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}},{key:"_convertMeshIds",value:function(e){var r,i=lp(e.primitives);try{for(i.s();!(r=i.n()).done;){var s=r.value,o=s.attributes,a=s.indices,l=s.material;for(var c in o)o[c]=this._convertIdToIndex(o[c],"accessor");a&&(s.indices=this._convertIdToIndex(a,"accessor")),l&&(s.material=this._convertIdToIndex(l,"material"))}}catch(u){i.e(u)}finally{i.f()}}},{key:"_convertNodeIds",value:function(e){var i=this;e.children&&(e.children=e.children.map(function(r){return i._convertIdToIndex(r,"node")}))}},{key:"_convertSceneIds",value:function(e){var i=this;e.nodes&&(e.nodes=e.nodes.map(function(r){return i._convertIdToIndex(r,"node")}))}},{key:"_convertIdsToIndices",value:function(e,i){var s,r=lp(e[i]);try{for(r.s();!(s=r.n()).done;){var o=s.value;for(var a in o){var c=this._convertIdToIndex(o[a],a);o[a]=c}}}catch(u){r.e(u)}finally{r.f()}}},{key:"_convertIdToIndex",value:function(e,i){var r=FCe[i];if(r in this.idToIndexMap){var s=this.idToIndexMap[r][e];if(!Number.isFinite(s))throw new Error("gltf v1: failed to resolve ".concat(i," with id ").concat(e));return s}return e}},{key:"_updateObjects",value:function(e){var r,i=lp(this.json.buffers);try{for(i.s();!(r=i.n()).done;)delete r.value.type}catch(o){i.e(o)}finally{i.f()}}}]),n}();function LCe(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new NCe).normalize(n,t)}function D$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function cp(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?D$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):D$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var BCe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VCe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Al={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},jCe={magFilter:Al.TEXTURE_MAG_FILTER,minFilter:Al.TEXTURE_MIN_FILTER,wrapS:Al.TEXTURE_WRAP_S,wrapT:Al.TEXTURE_WRAP_T},zCe=(Yt(Gm={},Al.TEXTURE_MAG_FILTER,Al.LINEAR),Yt(Gm,Al.TEXTURE_MIN_FILTER,Al.NEAREST_MIPMAP_LINEAR),Yt(Gm,Al.TEXTURE_WRAP_S,Al.REPEAT),Yt(Gm,Al.TEXTURE_WRAP_,Al.REPEAT),Gm),$Ce=function(){function n(){wt(this,n)}return Tt(n,[{key:"postProcess",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.json,s=e.buffers,o=void 0===s?[]:s,a=e.images,l=void 0===a?[]:a,c=e.baseUri,u=void 0===c?"":c;return Lo(r),this.baseUri=u,this.json=r,this.buffers=o,this.images=l,this._resolveTree(this.json,i),this.json}},{key:"_resolveTree",value:function(e){var i=this;e.bufferViews&&(e.bufferViews=e.bufferViews.map(function(s,o){return i._resolveBufferView(s,o)})),e.images&&(e.images=e.images.map(function(s,o){return i._resolveImage(s,o)})),e.samplers&&(e.samplers=e.samplers.map(function(s,o){return i._resolveSampler(s,o)})),e.textures&&(e.textures=e.textures.map(function(s,o){return i._resolveTexture(s,o)})),e.accessors&&(e.accessors=e.accessors.map(function(s,o){return i._resolveAccessor(s,o)})),e.materials&&(e.materials=e.materials.map(function(s,o){return i._resolveMaterial(s,o)})),e.meshes&&(e.meshes=e.meshes.map(function(s,o){return i._resolveMesh(s,o)})),e.nodes&&(e.nodes=e.nodes.map(function(s,o){return i._resolveNode(s,o)})),e.skins&&(e.skins=e.skins.map(function(s,o){return i._resolveSkin(s,o)})),e.scenes&&(e.scenes=e.scenes.map(function(s,o){return i._resolveScene(s,o)})),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}},{key:"getScene",value:function(e){return this._get("scenes",e)}},{key:"getNode",value:function(e){return this._get("nodes",e)}},{key:"getSkin",value:function(e){return this._get("skins",e)}},{key:"getMesh",value:function(e){return this._get("meshes",e)}},{key:"getMaterial",value:function(e){return this._get("materials",e)}},{key:"getAccessor",value:function(e){return this._get("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this._get("textures",e)}},{key:"getSampler",value:function(e){return this._get("samplers",e)}},{key:"getImage",value:function(e){return this._get("images",e)}},{key:"getBufferView",value:function(e){return this._get("bufferViews",e)}},{key:"getBuffer",value:function(e){return this._get("buffers",e)}},{key:"_get",value:function(e,i){if("object"===$i(i))return i;var r=this.json[e]&&this.json[e][i];return r||console.warn("glTF file error: Could not find ".concat(e,"[").concat(i,"]")),r}},{key:"_resolveScene",value:function(e,i){var r=this;return e.id=e.id||"scene-".concat(i),e.nodes=(e.nodes||[]).map(function(s){return r.getNode(s)}),e}},{key:"_resolveNode",value:function(e,i){var r=this;return e.id=e.id||"node-".concat(i),e.children&&(e.children=e.children.map(function(s){return r.getNode(s)})),void 0!==e.mesh&&(e.mesh=this.getMesh(e.mesh)),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}},{key:"_resolveSkin",value:function(e,i){return e.id=e.id||"skin-".concat(i),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}},{key:"_resolveMesh",value:function(e,i){var r=this;return e.id=e.id||"mesh-".concat(i),e.primitives&&(e.primitives=e.primitives.map(function(s){var o=(s=cp({},s)).attributes;for(var a in s.attributes={},o)s.attributes[a]=r.getAccessor(o[a]);return void 0!==s.indices&&(s.indices=r.getAccessor(s.indices)),void 0!==s.material&&(s.material=r.getMaterial(s.material)),s})),e}},{key:"_resolveMaterial",value:function(e,i){if(e.id=e.id||"material-".concat(i),e.normalTexture&&(e.normalTexture=cp({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=cp({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=cp({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.pbrMetallicRoughness){e.pbrMetallicRoughness=cp({},e.pbrMetallicRoughness);var r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=cp({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=cp({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e}},{key:"_resolveAccessor",value:function(e,i){if(e.id=e.id||"accessor-".concat(i),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function(n){return VCe[n]}(e.componentType),e.components=function(n){return BCe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var r=e.bufferView.buffer,s=d$(e,e.bufferView);e.value=new(0,s.ArrayType)(r.arrayBuffer,(e.bufferView.byteOffset||0)+(e.byteOffset||0)+r.byteOffset,s.length)}return e}},{key:"_resolveTexture",value:function(e,i){return e.id=e.id||"texture-".concat(i),e.sampler="sampler"in e?this.getSampler(e.sampler):zCe,e.source=this.getImage(e.source),e}},{key:"_resolveSampler",value:function(e,i){for(var r in e.id=e.id||"sampler-".concat(i),e.parameters={},e){var s=this._enumSamplerParameter(r);void 0!==s&&(e.parameters[s]=e[r])}return e}},{key:"_enumSamplerParameter",value:function(e){return jCe[e]}},{key:"_resolveImage",value:function(e,i){e.id=e.id||"image-".concat(i),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));var r=this.images[i];return r&&(e.image=r),e}},{key:"_resolveBufferView",value:function(e,i){e.id=e.id||"bufferView-".concat(i);var r=e.buffer;e.buffer=this.buffers[r];var o=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),e.data=new Uint8Array(this.buffers[r].arrayBuffer,o,e.byteLength),e}},{key:"_resolveCamera",value:function(e,i){return e.id=e.id||"camera-".concat(i),e}}]),n}();function GCe(n,t){return(new $Ce).postProcess(n,t)}function WCe(n,t){return BR.apply(this,arguments)}function BR(){return(BR=An(je().mark(function n(t,e){var r,s,o,a,l,c=arguments;return je().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=c.length>4?c[4]:void 0,qCe(t,e,c.length>2&&void 0!==c[2]?c[2]:0,r=c.length>3?c[3]:void 0),LCe(t,{normalize:r.gltf.normalize}),o=[],!r.gltf.loadBuffers||!t.json.buffers){h.next=9;break}return h.next=9,YCe(t,r,s);case 9:return r.gltf.loadImages&&(a=XCe(t,r,s),o.push(a)),l=yCe(t,r,s),o.push(l),h.next=14,Promise.all(o);case 14:return h.abrupt("return",r.gltf.postProcess?GCe(t,r):t);case 15:case"end":return h.stop()}},n)}))).apply(this,arguments)}function qCe(n,t,e,i){if(i.uri&&(n.baseUri=i.uri),t instanceof ArrayBuffer&&!function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new DataView(n),r=e.magic,s=void 0===r?M$:r,o=i.getUint32(t,!1);return o===s||o===M$}(t,e,i)&&(t=(new TextDecoder).decode(t)),"string"==typeof t)n.json=function(n){try{return JSON.parse(n)}catch(t){throw new Error('Failed to parse JSON from data starting with "'.concat(function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof n?n.slice(0,t):ArrayBuffer.isView(n)?K6(n.buffer,n.byteOffset,t):n instanceof ArrayBuffer?K6(n,0,t):""}(n),'"'))}}(t);else if(t instanceof ArrayBuffer){var s={};e=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new DataView(t);n.type=MCe(r,e+0),n.version=r.getUint32(e+4,$m);var s=r.getUint32(e+8,$m);switch(n.header={byteOffset:e,byteLength:s},n.json={},n.binChunks=[],e+=12,n.version){case 1:return xCe(n,r,e);case 2:return DCe(n,r,e,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(s,t,e,i),Lo("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),n._glb=s,n.json=s.json}else Lo(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){var a=n._glb.binChunks;n.buffers[0]={arrayBuffer:a[0].arrayBuffer,byteOffset:a[0].byteOffset,byteLength:a[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function YCe(n,t,e){return VR.apply(this,arguments)}function VR(){return(VR=An(je().mark(function n(t,e,i){var r,s,o,a,l,c;return je().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:r=0;case 1:if(!(r<t.json.buffers.length)){h.next=18;break}if(!(s=t.json.buffers[r]).uri){h.next=15;break}return Lo(o=i.fetch),a=Q6(s.uri,e),h.next=9,o(a);case 9:return l=h.sent,h.next=12,l.arrayBuffer();case 12:t.buffers[r]={arrayBuffer:c=h.sent,byteOffset:0,byteLength:c.byteLength},delete s.uri;case 15:++r,h.next=1;break;case 18:case"end":return h.stop()}},n)}))).apply(this,arguments)}function XCe(n,t,e){return jR.apply(this,arguments)}function jR(){return(jR=An(je().mark(function n(t,e,i){var r,s,o;return je().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:for(r=t.json.images||[],s=[],o=0;o<r.length;++o)s.push(KCe(t,r[o],o,e,i));return l.next=5,Promise.all(s);case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},n)}))).apply(this,arguments)}function KCe(n,t,e,i,r){return zR.apply(this,arguments)}function zR(){return(zR=An(je().mark(function n(t,e,i,r,s){var o,a,l,c,u,h;return je().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=s.fetch,a=s.parse,!e.uri){m.next=9;break}return c=Q6(e.uri,r),m.next=5,o(c);case 5:return u=m.sent,m.next=8,u.arrayBuffer();case 8:l=m.sent;case 9:return Number.isFinite(e.bufferView)&&(h=J6(t.json,t.buffers,e.bufferView),l=Z6(h.buffer,h.byteOffset,h.byteLength)),Lo(l,"glTF image has no data"),m.next=13,a(l,r6,{},s);case 13:t.images[i]=m.sent;case 15:case"end":return m.stop()}},n)}))).apply(this,arguments)}function O$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function P1(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?O$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):O$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var UR={id:"gltf",name:"glTF",version:"2.3.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return HR.apply(this,arguments)},options:{gltf:{normalize:!1,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},baseUri:"",log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};const R1=UR;function HR(){return(HR=An(je().mark(function n(t){var e,i,s,o,a,l=arguments;return je().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return e=l.length>1&&void 0!==l[1]?l[1]:{},i=l.length>2?l[2]:void 0,(e=P1(P1({},UR.options),e)).gltf=P1(P1({},UR.options.gltf),e.gltf),JCe(e),o=void 0===(s=e.byteOffset)?0:s,a={},u.next=9,WCe(a,t,o,e,i);case 9:return u.abrupt("return",u.sent);case 10:case"end":return u.stop()}},n)}))).apply(this,arguments)}function JCe(n){"fetchImages"in n&&(n.gltf.loadImages=n.fetchImages),"createImages"in n&&(n.gltf.loadImages=n.createImages),"fetchLinkedResources"in n&&(n.gltf.fetchBuffers=n.fetchLinkedResources),"decompress"in n&&(n.gltf.decompressMeshes=n.decompress),"decompress"in n.gltf&&(n.gltf.decompressMeshes=n.gltf.decompress),"postProcess"in n&&(n.gltf.postProcess=n.postProcess)}function $R(){return($R=An(je().mark(function n(t){var e;return je().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=[],t.scenes.forEach(function(s){s.traverse(function(o){Object.values(o.model.getUniforms()).forEach(function(a){!1===a.loaded&&e.push(a)})})}),r.next=4,tEe(function(){return e.some(function(s){return!s.loaded})});case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},n)}))).apply(this,arguments)}function tEe(n){return GR.apply(this,arguments)}function GR(){return(GR=An(je().mark(function n(t){return je().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!t()){i.next=5;break}return i.next=3,new Promise(function(r){return requestAnimationFrame(r)});case 3:i.next=0;break;case 5:case"end":return i.stop()}},n)}))).apply(this,arguments)}function I$(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function rEe(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?I$(Object(e),!0).forEach(function(i){Yt(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):I$(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var P$=[255,255,255,255],aEe={scenegraph:{type:"object",value:null,async:!0},getScene:function(t){return t&&t.scenes?"object"===$i(t.scene)?t.scene:t.scenes[t.scene||0]:t},getAnimator:function(t){return t&&t.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:P$},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[R1]},WR=function(n){ir(e,n);var t=function(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var r,i=Ot(n);if(t){var s=Ot(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Lr(this,r)}}(e);function e(){return wt(this,e),t.apply(this,arguments)}return Tt(e,[{key:"getShaders",value:function(){var r=[A6,I6];return"pbr"===this.props._lighting&&r.push(j6),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:r}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:P$,transition:!0},instanceModelMatrix:L6})}},{key:"updateState",value:function(r){Hs(Ot(e.prototype),"updateState",this).call(this,r);var s=r.props,o=r.oldProps;s.scenegraph!==o.scenegraph?this._updateScenegraph(s):s._animations!==o._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,s._animations)}},{key:"finalizeState",value:function(){Hs(Ot(e.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(r){var s=this,o=this.context.gl,a=null;if(r.scenegraph instanceof Um)a={scenes:[r.scenegraph]};else if(r.scenegraph&&!r.scenegraph.gltf){var l=r.scenegraph,c=function(n,t,e){const i=new Twe(n,e);return{scenes:i.instantiate(t),animator:i.createAnimator()}}(o,l,this._getModelOptions());a=Object.assign({gltf:l},c),function(n){return $R.apply(this,arguments)}(c).then(function(){return s.setNeedsRedraw()})}else r.scenegraph&&(ei.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),a=r.scenegraph);var u={layer:this,gl:o},h=r.getScene(a,u),p=r.getAnimator(a,u);h instanceof Um?(this._deleteScenegraph(),this._applyAllAttributes(h),this._applyAnimationsProp(h,p,r._animations),this.setState({scenegraph:h,animator:p})):null!==h&&ei.warn("invalid scenegraph:",h)()}},{key:"_applyAllAttributes",value:function(r){var s=this;if(this.state.attributesAvailable){var o=this.getAttributeManager().getAttributes();r.traverse(function(a){s._setModelAttributes(a.model,o)})}}},{key:"_applyAnimationsProp",value:function(r,s,o){if(r&&s&&o){var a=s.getAnimations();Object.keys(o).sort().forEach(function(l){var c=o[l];if("*"===l)a.forEach(function(p){Object.assign(p,c)});else if(Number.isFinite(Number(l))){var u=Number(l);u>=0&&u<a.length?Object.assign(a[u],c):ei.warn("animation ".concat(l," not found"))()}else{var h=a.find(function(p){return p.name===l});h?Object.assign(h,c):ei.warn("animation ".concat(l," not found"))()}})}}},{key:"_deleteScenegraph",value:function(){var r=this.state.scenegraph;r instanceof Um&&r.delete()}},{key:"_getModelOptions",value:function(){var r=this.props._imageBasedLightingEnvironment,s=null;return r&&(s="function"==typeof r?r({gl:this.context.gl,layer:this}):r),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:s,modelOptions:rEe({isInstanced:!0,transpileToGLSL100:!Rn(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(r){var s=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(function(o){s._setModelAttributes(o.model,r)})}},{key:"draw",value:function(r){var s=r.moduleParameters,o=void 0===s?null:s,a=r.parameters,l=void 0===a?{}:a;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(r.context.timeline.getTime()),this.setNeedsRedraw());var u=this.context.viewport,h=this.props,p=h.sizeScale,g=h.sizeMinPixels,m=h.sizeMaxPixels,v=h.opacity,y=h.coordinateSystem,C=this.getNumInstances();this.state.scenegraph.traverse(function(w,A){var k=A.worldMatrix;w.model.setInstanceCount(C),w.updateModuleSettings(o),w.draw({parameters:l,uniforms:{sizeScale:p,opacity:v,sizeMinPixels:g,sizeMaxPixels:m,composeModelMatrix:B6(u,y),sceneModelMatrix:k,u_Camera:w.model.getUniforms().project_uCameraPosition}})})}}}]),e}(Bm);WR.layerName="ScenegraphLayer",WR.defaultProps=aEe;const lEe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),cEe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),uEe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),dEe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),hEe={POSITION:{size:3,value:new Float32Array(cEe)},NORMAL:{size:3,value:new Float32Array(uEe)},TEXCOORD_0:{size:2,value:new Float32Array(dEe)}};class fEe extends S1{constructor(t={}){const{id:e=iu("cube-geometry")}=t;super(dY(Sd({},t),{id:e,indices:{size:1,value:new Uint16Array(lEe)},attributes:Sd(Sd({},hEe),t.attributes)}))}}class du{constructor(t=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=t}identity(){const t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1}setZero(){const t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0}setTrace(t){const e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z}getTrace(t=new S){const e=this.elements;return t.x=e[0],t.y=e[4],t.z=e[8],t}vmult(t,e=new S){const i=this.elements,r=t.x,s=t.y,o=t.z;return e.x=i[0]*r+i[1]*s+i[2]*o,e.y=i[3]*r+i[4]*s+i[5]*o,e.z=i[6]*r+i[7]*s+i[8]*o,e}smult(t){for(let e=0;e<this.elements.length;e++)this.elements[e]*=t}mmult(t,e=new du){const i=this.elements,r=t.elements,s=e.elements,o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],h=i[5],p=i[6],g=i[7],m=i[8],v=r[0],y=r[1],C=r[2],w=r[3],A=r[4],k=r[5],B=r[6],U=r[7],K=r[8];return s[0]=o*v+a*w+l*B,s[1]=o*y+a*A+l*U,s[2]=o*C+a*k+l*K,s[3]=c*v+u*w+h*B,s[4]=c*y+u*A+h*U,s[5]=c*C+u*k+h*K,s[6]=p*v+g*w+m*B,s[7]=p*y+g*A+m*U,s[8]=p*C+g*k+m*K,e}scale(t,e=new du){const i=this.elements,r=e.elements;for(let s=0;3!==s;s++)r[3*s+0]=t.x*i[3*s+0],r[3*s+1]=t.y*i[3*s+1],r[3*s+2]=t.z*i[3*s+2];return e}solve(t,e=new S){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=t.x,s[7]=t.y,s[11]=t.z;let l=3;const c=l;let u,p;do{if(o=c-l,0===s[o+4*o])for(a=o+1;a<c;a++)if(0!==s[o+4*a]){u=4;do{p=4-u,s[p+4*o]+=s[p+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<c;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{p=4-u,s[p+4*a]=p<=o?0:s[p+4*a]-s[p+4*o]*g}while(--u)}}while(--l);if(e.z=s[11]/s[10],e.y=(s[7]-s[6]*e.z)/s[5],e.x=(s[3]-s[2]*e.z-s[1]*e.y)/s[0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw"Could not solve equation! Got x=["+e.toString()+"], b=["+t.toString()+"], A=["+this.toString()+"]";return e}e(t,e,i){if(void 0===i)return this.elements[e+3*t];this.elements[e+3*t]=i}copy(t){for(let e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this}toString(){let t="";for(let i=0;i<9;i++)t+=this.elements[i]+",";return t}reverse(t=new du){const r=pEe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const l=a;let c,h;do{if(s=l-a,0===r[s+6*s])for(o=s+1;o<l;o++)if(0!==r[s+6*o]){c=6;do{h=6-c,r[h+6*s]+=r[h+6*o]}while(--c);break}if(0!==r[s+6*s])for(o=s+1;o<l;o++){const p=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*p}while(--c)}}while(--a);s=2;do{o=s-1;do{const p=r[s+6*o]/r[s+6*s];c=6;do{h=6-c,r[h+6*o]=r[h+6*o]-r[h+6*s]*p}while(--c)}while(o--)}while(--s);s=2;do{const p=1/r[s+6*s];c=6;do{h=6-c,r[h+6*s]=r[h+6*s]*p}while(--c)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw"Could not reverse! A=["+this.toString()+"]";t.e(s,o,h)}while(o--)}while(s--);return t}setRotationFromQuaternion(t){const e=t.x,i=t.y,r=t.z,s=t.w,o=e+e,a=i+i,l=r+r,c=e*o,u=e*a,h=e*l,p=i*a,g=i*l,m=r*l,v=s*o,y=s*a,C=s*l,w=this.elements;return w[0]=1-(p+m),w[1]=u-C,w[2]=h+y,w[3]=u+C,w[4]=1-(c+m),w[5]=g-v,w[6]=h-y,w[7]=g+v,w[8]=1-(c+p),this}transpose(t=new du){const e=this.elements,i=t.elements;let r;return i[0]=e[0],i[4]=e[4],i[8]=e[8],r=e[1],i[1]=e[3],i[3]=r,r=e[2],i[2]=e[6],i[6]=r,r=e[5],i[5]=e[7],i[7]=r,t}}const pEe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class S{constructor(t=0,e=0,i=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=e,this.z=i}cross(t,e=new S){const i=t.x,r=t.y,s=t.z,o=this.x,a=this.y,l=this.z;return e.x=a*s-l*r,e.y=l*i-o*s,e.z=o*r-a*i,e}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(t,e){if(!e)return new S(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z}vsub(t,e){if(!e)return new S(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z}crossmat(){return new du([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const t=this.x,e=this.y,i=this.z,r=Math.sqrt(t*t+e*e+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(t=new S){const e=this.x,i=this.y,r=this.z;let s=Math.sqrt(e*e+i*i+r*r);return s>0?(s=1/s,t.x=e*s,t.y=i*s,t.z=r*s):(t.x=1,t.y=0,t.z=0),t}length(){const t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)}lengthSquared(){return this.dot(this)}distanceTo(t){const e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z;return Math.sqrt((s-e)*(s-e)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(t){const e=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z;return(s-e)*(s-e)+(o-i)*(o-i)+(a-r)*(a-r)}scale(t,e=new S){const r=this.y,s=this.z;return e.x=t*this.x,e.y=t*r,e.z=t*s,e}vmul(t,e=new S){return e.x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e}addScaledVector(t,e,i=new S){return i.x=this.x+t*e.x,i.y=this.y+t*e.y,i.z=this.z+t*e.z,i}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(t=new S){return t.x=-this.x,t.y=-this.y,t.z=-this.z,t}tangents(t,e){const i=this.length();if(i>0){const r=gEe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=mEe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,t)):(o.set(0,1,0),r.cross(o,t)),r.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}lerp(t,e,i){const r=this.x,s=this.y,o=this.z;i.x=r+(t.x-r)*e,i.y=s+(t.y-s)*e,i.z=o+(t.z-o)*e}almostEquals(t,e=1e-6){return!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)}almostZero(t=1e-6){return!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)}isAntiparallelTo(t,e){return this.negate(R$),R$.almostEquals(t,e)}clone(){return new S(this.x,this.y,this.z)}}S.ZERO=void 0,S.UNIT_X=void 0,S.UNIT_Y=void 0,S.UNIT_Z=void 0,S.ZERO=new S(0,0,0),S.UNIT_X=new S(1,0,0),S.UNIT_Y=new S(0,1,0),S.UNIT_Z=new S(0,0,1);const gEe=new S,mEe=new S,R$=new S;class Ii{constructor(t={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new S,this.upperBound=new S,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}setFromPoints(t,e,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(t[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<t.length;l++){let c=t[l];a&&(a.vmult(c,k$),c=k$),c.x>o.x&&(o.x=c.x),c.x<s.x&&(s.x=c.x),c.y>o.y&&(o.y=c.y),c.y<s.y&&(s.y=c.y),c.z>o.z&&(o.z=c.z),c.z<s.z&&(s.z=c.z)}return e&&(e.vadd(s,s),e.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this}clone(){return(new Ii).copy(this)}extend(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)}overlaps(t){const e=this.lowerBound,i=this.upperBound,r=t.lowerBound,s=t.upperBound;return(r.x<=i.x&&i.x<=s.x||e.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||e.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||e.z<=s.z&&s.z<=i.z)}volume(){const t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)}contains(t){const e=this.lowerBound,i=this.upperBound,r=t.lowerBound,s=t.upperBound;return e.x<=r.x&&i.x>=s.x&&e.y<=r.y&&i.y>=s.y&&e.z<=r.z&&i.z>=s.z}getCorners(t,e,i,r,s,o,a,l){const c=this.lowerBound,u=this.upperBound;t.copy(c),e.set(u.x,c.y,c.z),i.set(u.x,u.y,c.z),r.set(c.x,u.y,u.z),s.set(u.x,c.y,u.z),o.set(c.x,u.y,c.z),a.set(c.x,c.y,u.z),l.copy(u)}toLocalFrame(t,e){const i=F$;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];t.pointToLocal(g,g)}return e.setFromPoints(i)}toWorldFrame(t,e){const i=F$;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];t.pointToWorld(g,g)}return e.setFromPoints(i)}overlapsRay(t){const{direction:e,from:i}=t,r=1/e.x,s=1/e.y,o=1/e.z,a=(this.lowerBound.x-i.x)*r,l=(this.upperBound.x-i.x)*r,c=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,p=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(c,u)),Math.min(h,p)),m=Math.min(Math.min(Math.max(a,l),Math.max(c,u)),Math.max(h,p));return!(m<0||g>m)}}const k$=new S,F$=[new S,new S,new S,new S,new S,new S,new S,new S];class jr{constructor(t=0,e=0,i=0,r=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=t,this.y=e,this.z=i,this.w=r}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(t,e){const i=Math.sin(.5*e);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(.5*e),this}toAxisAngle(t=new S){this.normalize();const e=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/i,t.y=this.y/i,t.z=this.z/i),[t,e]}setFromVectors(t,e){if(t.isAntiparallelTo(e)){const i=vEe;t.tangents(i,yEe),this.setFromAxisAngle(i,Math.PI)}else{const i=t.cross(e);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(lr(t.length(),2)*lr(e.length(),2))+t.dot(e),this.normalize()}return this}mult(t,e=new jr){const i=this.x,r=this.y,s=this.z,o=this.w,a=t.x,l=t.y,c=t.z,u=t.w;return e.x=i*u+o*a+r*c-s*l,e.y=r*u+o*l+s*a-i*c,e.z=s*u+o*c+i*l-r*a,e.w=o*u-i*a-r*l-s*c,e}inverse(t=new jr){const e=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(t);const o=1/(e*e+i*i+r*r+s*s);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}conjugate(t=new jr){return t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}normalizeFast(){const t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}vmult(t,e=new S){const i=t.x,r=t.y,s=t.z,o=this.x,a=this.y,l=this.z,c=this.w,u=c*i+a*s-l*r,h=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;return e.x=u*c+g*-o+h*-l-p*-a,e.y=h*c+g*-a+p*-o-u*-l,e.z=p*c+g*-l+u*-a-h*-o,e}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}toEuler(t,e="YZX"){let i,r,s;const o=this.x,a=this.y,l=this.z,c=this.w;switch(e){case"YZX":const u=o*a+l*c;if(u>.499&&(i=2*Math.atan2(o,c),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,c),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=l*l;i=Math.atan2(2*a*c-2*o*l,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*c-2*a*l,1-2*h-2*g)}break;default:throw new Error("Euler order "+e+" not supported yet.")}t.y=i,t.z=r,t.x=s}setFromEuler(t,e,i,r="XYZ"){const s=Math.cos(t/2),o=Math.cos(e/2),a=Math.cos(i/2),l=Math.sin(t/2),c=Math.sin(e/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"YXZ"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"ZXY"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a-l*c*u):"ZYX"===r?(this.x=l*o*a-s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a+l*c*u):"YZX"===r?(this.x=l*o*a+s*c*u,this.y=s*c*a+l*o*u,this.z=s*o*u-l*c*a,this.w=s*o*a-l*c*u):"XZY"===r&&(this.x=l*o*a-s*c*u,this.y=s*c*a-l*o*u,this.z=s*o*u+l*c*a,this.w=s*o*a+l*c*u),this}clone(){return new jr(this.x,this.y,this.z,this.w)}slerp(t,e,i=new jr){const r=this.x,s=this.y,o=this.z,a=this.w;let p,g,m,v,y,l=t.x,c=t.y,u=t.z,h=t.w;return g=r*l+s*c+o*u+a*h,g<0&&(g=-g,l=-l,c=-c,u=-u,h=-h),1-g>1e-6?(p=Math.acos(g),m=Math.sin(p),v=Math.sin((1-e)*p)/m,y=Math.sin(e*p)/m):(v=1-e,y=e),i.x=v*r+y*l,i.y=v*s+y*c,i.z=v*o+y*u,i.w=v*a+y*h,i}integrate(t,e,i,r=new jr){const s=t.x*i.x,o=t.y*i.y,a=t.z*i.z,l=this.x,c=this.y,u=this.z,h=this.w,p=.5*e;return r.x+=p*(s*h+o*u-a*c),r.y+=p*(o*h+a*l-s*u),r.z+=p*(a*h+s*c-o*l),r.w+=p*(-s*l-o*c-a*u),r}}const vEe=new S,yEe=new S,bEe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let vt=(()=>{class n{constructor(e={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=!e.collisionResponse||e.collisionResponse,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(e,i){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(e,i,r,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=bEe,n})();class ui{constructor(t={}){this.position=void 0,this.quaternion=void 0,this.position=new S,this.quaternion=new jr,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}pointToLocal(t,e){return ui.pointToLocalFrame(this.position,this.quaternion,t,e)}pointToWorld(t,e){return ui.pointToWorldFrame(this.position,this.quaternion,t,e)}vectorToWorldFrame(t,e=new S){return this.quaternion.vmult(t,e),e}static pointToLocalFrame(t,e,i,r=new S){return i.vsub(t,r),e.conjugate(L$),L$.vmult(r,r),r}static pointToWorldFrame(t,e,i,r=new S){return e.vmult(i,r),r.vadd(t,r),r}static vectorToWorldFrame(t,e,i=new S){return t.vmult(e,i),i}static vectorToLocalFrame(t,e,i,r=new S){return e.w*=-1,e.vmult(i,r),e.w*=-1,r}}const L$=new jr;class up extends vt{constructor(t={}){const{vertices:e=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=t;super({type:vt.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=e,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const t=this.faces,e=this.vertices,i=this.uniqueEdges;i.length=0;const r=new S;for(let s=0;s!==t.length;s++){const o=t[s],a=o.length;for(let l=0;l!==a;l++){e[o[l]].vsub(e[o[(l+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let t=0;t<this.faces.length;t++){for(let r=0;r<this.faces[t].length;r++)if(!this.vertices[this.faces[t][r]])throw new Error("Vertex "+this.faces[t][r]+" not found!");const e=this.faceNormals[t]||new S;if(this.getFaceNormal(t,e),e.negate(e),this.faceNormals[t]=e,e.dot(this.vertices[this.faces[t][0]])<0){console.error(".faceNormals["+t+"] = Vec3("+e.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let r=0;r<this.faces[t].length;r++)console.warn(".vertices["+this.faces[t][r]+"] = Vec3("+this.vertices[this.faces[t][r]].toString()+")")}}}getFaceNormal(t,e){const i=this.faces[t];up.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],e)}static computeNormal(t,e,i,r){const s=new S,o=new S;e.vsub(t,o),i.vsub(e,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(t,e,i,r,s,o,a,l,c){const u=new S;let h=-1,p=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const v=u.dot(o);v>p&&(p=v,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const v=i.vertices[i.faces[h][m]],y=new S;y.copy(v),s.vmult(y,y),r.vadd(y,y),g.push(y)}h>=0&&this.clipFaceAgainstHull(o,t,e,g,a,l,c)}findSeparatingAxis(t,e,i,r,s,o,a,l){const c=new S,u=new S,h=new S,p=new S,g=new S,m=new S;let v=Number.MAX_VALUE;const y=this;if(y.uniqueAxes)for(let C=0;C!==y.uniqueAxes.length;C++){i.vmult(y.uniqueAxes[C],c);const w=y.testSepAxis(c,t,e,i,r,s);if(!1===w)return!1;w<v&&(v=w,o.copy(c))}else{const C=a?a.length:y.faces.length;for(let w=0;w<C;w++){c.copy(y.faceNormals[a?a[w]:w]),i.vmult(c,c);const k=y.testSepAxis(c,t,e,i,r,s);if(!1===k)return!1;k<v&&(v=k,o.copy(c))}}if(t.uniqueAxes)for(let C=0;C!==t.uniqueAxes.length;C++){s.vmult(t.uniqueAxes[C],u);const w=y.testSepAxis(u,t,e,i,r,s);if(!1===w)return!1;w<v&&(v=w,o.copy(u))}else{const C=l?l.length:t.faces.length;for(let w=0;w<C;w++){u.copy(t.faceNormals[l?l[w]:w]),s.vmult(u,u);const k=y.testSepAxis(u,t,e,i,r,s);if(!1===k)return!1;k<v&&(v=k,o.copy(u))}}for(let C=0;C!==y.uniqueEdges.length;C++){i.vmult(y.uniqueEdges[C],p);for(let w=0;w!==t.uniqueEdges.length;w++)if(s.vmult(t.uniqueEdges[w],g),p.cross(g,m),!m.almostZero()){m.normalize();const A=y.testSepAxis(m,t,e,i,r,s);if(!1===A)return!1;A<v&&(v=A,o.copy(m))}}return r.vsub(e,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(t,e,i,r,s,o){up.project(this,t,i,r,qR),up.project(e,t,s,o,YR);const l=qR[0],c=qR[1],u=YR[0],h=YR[1];if(l<h||u<c)return!1;const p=l-h,g=u-c;return p<g?p:g}calculateLocalInertia(t,e){const i=new S,r=new S;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;e.x=1/12*t*(2*o*2*o+2*a*2*a),e.y=1/12*t*(2*s*2*s+2*a*2*a),e.z=1/12*t*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(t){return-this.faceNormals[t].dot(this.vertices[this.faces[t][0]])}clipFaceAgainstHull(t,e,i,r,s,o,a){const l=new S,c=new S,u=new S,h=new S,p=new S,g=new S,m=new S,v=new S,y=this,w=r,A=[];let k=-1,B=Number.MAX_VALUE;for(let ne=0;ne<y.faces.length;ne++){l.copy(y.faceNormals[ne]),i.vmult(l,l);const Se=l.dot(t);Se<B&&(B=Se,k=ne)}if(k<0)return;const U=y.faces[k];U.connectedFaces=[];for(let ne=0;ne<y.faces.length;ne++)for(let Se=0;Se<y.faces[ne].length;Se++)-1!==U.indexOf(y.faces[ne][Se])&&ne!==k&&-1===U.connectedFaces.indexOf(ne)&&U.connectedFaces.push(ne);const K=U.length;for(let ne=0;ne<K;ne++){const Se=y.vertices[U[ne]];Se.vsub(y.vertices[U[(ne+1)%K]],c),u.copy(c),i.vmult(u,u),e.vadd(u,u),h.copy(this.faceNormals[k]),i.vmult(h,h),e.vadd(h,h),u.cross(h,p),p.negate(p),g.copy(Se),i.vmult(g,g),e.vadd(g,g);const te=U.connectedFaces[ne];m.copy(this.faceNormals[te]);const ie=this.getPlaneConstantOfFace(te);v.copy(m),i.vmult(v,v);const we=ie-v.dot(e);for(this.clipFaceAgainstPlane(w,A,v,we);w.length;)w.shift();for(;A.length;)w.push(A.shift())}m.copy(this.faceNormals[k]);const ae=this.getPlaneConstantOfFace(k);v.copy(m),i.vmult(v,v);const de=ae-v.dot(e);for(let ne=0;ne<w.length;ne++){let Se=v.dot(w[ne])+de;if(Se<=s&&(console.log("clamped: depth="+Se+" to minDist="+s),Se=s),Se<=o){const ve=w[ne];Se<=1e-6&&a.push({point:ve,normal:v,depth:Se})}}}clipFaceAgainstPlane(t,e,i,r){let s,o;const a=t.length;if(a<2)return e;let l=t[t.length-1],c=t[0];s=i.dot(l)+r;for(let u=0;u<a;u++){if(c=t[u],o=i.dot(c)+r,s<0)if(o<0){const h=new S;h.copy(c),e.push(h)}else{const h=new S;l.lerp(c,s/(s-o),h),e.push(h)}else if(o<0){const h=new S;l.lerp(c,s/(s-o),h),e.push(h),e.push(c)}l=c,s=o}return e}computeWorldVertices(t,e){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new S);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)e.vmult(i[s],r[s]),t.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(t,e){const i=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<t.x?t.x=s.x:s.x>e.x&&(e.x=s.x),s.y<t.y?t.y=s.y:s.y>e.y&&(e.y=s.y),s.z<t.z?t.z=s.z:s.z>e.z&&(e.z=s.z)}}computeWorldFaceNormals(t){const e=this.faceNormals.length;for(;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new S);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==e;s++)t.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let t=0;const e=this.vertices;for(let i=0;i!==e.length;i++){const r=e[i].lengthSquared();r>t&&(t=r)}this.boundingSphereRadius=Math.sqrt(t)}calculateWorldAABB(t,e,i,r){const s=this.vertices;let o,a,l,c,u,h,p=new S;for(let g=0;g<s.length;g++){p.copy(s[g]),e.vmult(p,p),t.vadd(p,p);const m=p;(void 0===o||m.x<o)&&(o=m.x),(void 0===c||m.x>c)&&(c=m.x),(void 0===a||m.y<a)&&(a=m.y),(void 0===u||m.y>u)&&(u=m.y),(void 0===l||m.z<l)&&(l=m.z),(void 0===h||m.z>h)&&(h=m.z)}i.set(o,a,l),r.set(c,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(t=new S){const e=this.vertices;for(let i=0;i<e.length;i++)t.vadd(e[i],t);return t.scale(1/e.length,t),t}transformAllPoints(t,e){const i=this.vertices.length,r=this.vertices;if(e){for(let s=0;s<i;s++){const o=r[s];e.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];e.vmult(o,o)}}if(t)for(let s=0;s<i;s++){const o=r[s];o.vadd(t,o)}}pointIsInside(t){const e=this.vertices,i=this.faces,r=this.faceNormals,s=new S;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=r[o];const l=e[i[o][0]],c=new S;t.vsub(l,c);const u=a.dot(c),h=new S;s.vsub(l,h);const p=a.dot(h);if(u<0&&p>0||u>0&&p<0)return!1}return-1}static project(t,e,i,r,s){const o=t.vertices.length,a=wEe;let l=0,c=0;const u=CEe,h=t.vertices;u.setZero(),ui.vectorToLocalFrame(i,r,e,a),ui.pointToLocalFrame(i,r,u,u);const p=u.dot(a);c=l=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>l&&(l=m),m<c&&(c=m)}if(c-=p,l-=p,c>l){const g=c;c=l,l=g}s[0]=l,s[1]=c}}const qR=[],YR=[],wEe=new S,CEe=new S;class k1 extends vt{constructor(t){super({type:vt.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const t=this.halfExtents.x,e=this.halfExtents.y,i=this.halfExtents.z,r=S,s=[new r(-t,-e,-i),new r(t,-e,-i),new r(t,e,-i),new r(-t,e,-i),new r(-t,-e,i),new r(t,-e,i),new r(t,e,i),new r(-t,e,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],l=new up({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(t,e=new S){return k1.calculateInertia(this.halfExtents,t,e),e}static calculateInertia(t,e,i){const r=t;i.x=1/12*e*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*e*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*e*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(t,e){const i=t,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==e)for(let s=0;s!==i.length;s++)e.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(t,e,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)Mh.set(s[o][0],s[o][1],s[o][2]),e.vmult(Mh,Mh),t.vadd(Mh,Mh),i(Mh.x,Mh.y,Mh.z)}calculateWorldAABB(t,e,i,r){const s=this.halfExtents;hu[0].set(s.x,s.y,s.z),hu[1].set(-s.x,s.y,s.z),hu[2].set(-s.x,-s.y,s.z),hu[3].set(-s.x,-s.y,-s.z),hu[4].set(s.x,-s.y,-s.z),hu[5].set(s.x,s.y,-s.z),hu[6].set(-s.x,s.y,-s.z),hu[7].set(s.x,-s.y,s.z);const o=hu[0];e.vmult(o,o),t.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=hu[a];e.vmult(l,l),t.vadd(l,l);const c=l.x,u=l.y,h=l.z;c>r.x&&(r.x=c),u>r.y&&(r.y=u),h>r.z&&(r.z=h),c<i.x&&(i.x=c),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const Mh=new S,hu=[new S,new S,new S,new S,new S,new S,new S,new S];class yt extends class{constructor(){this._listeners=void 0}addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[t]&&(i[t]=[]),i[t].includes(e)||i[t].push(e),this}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[t]||!i[t].includes(e))}hasAnyEventListener(t){return void 0!==this._listeners&&void 0!==this._listeners[t]}removeEventListener(t,e){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[t])return this;const r=i[t].indexOf(e);return-1!==r&&i[t].splice(r,1),this}dispatchEvent(t){if(void 0===this._listeners)return this;const i=this._listeners[t.type];if(void 0!==i){t.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,t)}return this}}{constructor(t={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=yt.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new S,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof t.collisionResponse||t.collisionResponse,this.position=new S,this.previousPosition=new S,this.interpolatedPosition=new S,this.initPosition=new S,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new S,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new S,this.force=new S;const e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?yt.STATIC:yt.DYNAMIC,typeof t.type==typeof yt.STATIC&&(this.type=t.type),this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.sleepState=yt.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new S,this.quaternion=new jr,this.initQuaternion=new jr,this.previousQuaternion=new jr,this.interpolatedQuaternion=new jr,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new S,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new S,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new S,this.invInertia=new S,this.invInertiaWorld=new du,this.invMassSolve=0,this.invInertiaSolve=new S,this.invInertiaWorldSolve=new du,this.fixedRotation=void 0!==t.fixedRotation&&t.fixedRotation,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:.01,this.linearFactor=new S(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new S(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new Ii,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new S,this.isTrigger=Boolean(t.isTrigger),t.shape&&this.addShape(t.shape),this.updateMassProperties()}wakeUp(){const t=this.sleepState;this.sleepState=yt.AWAKE,this.wakeUpAfterNarrowphase=!1,t===yt.SLEEPING&&this.dispatchEvent(yt.wakeupEvent)}sleep(){this.sleepState=yt.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(t){if(this.allowSleep){const e=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=lr(this.sleepSpeedLimit,2);e===yt.AWAKE&&i<r?(this.sleepState=yt.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(yt.sleepyEvent)):e===yt.SLEEPY&&i>r?this.wakeUp():e===yt.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(yt.sleepEvent))}}updateSolveMassProperties(){this.sleepState===yt.SLEEPING||this.type===yt.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(t,e=new S){return t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e}vectorToLocalFrame(t,e=new S){return this.quaternion.conjugate().vmult(t,e),e}pointToWorldFrame(t,e=new S){return this.quaternion.vmult(t,e),e.vadd(this.position,e),e}vectorToWorldFrame(t,e=new S){return this.quaternion.vmult(t,e),e}addShape(t,e,i){const r=new S,s=new jr;return e&&r.copy(e),i&&s.copy(i),this.shapes.push(t),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this}removeShape(t){const e=this.shapes.indexOf(t);return-1===e?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeOrientations.splice(e,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=null,this)}updateBoundingRadius(){const t=this.shapes,e=this.shapeOffsets,i=t.length;let r=0;for(let s=0;s!==i;s++){const o=t[s];o.updateBoundingSphereRadius();const a=e[s].length(),l=o.boundingSphereRadius;a+l>r&&(r=a+l)}this.boundingRadius=r}updateAABB(){const t=this.shapes,e=this.shapeOffsets,i=this.shapeOrientations,r=t.length,s=EEe,o=SEe,a=this.quaternion,l=this.aabb,c=MEe;for(let u=0;u!==r;u++){const h=t[u];a.vmult(e[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,c.lowerBound,c.upperBound),0===u?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(t){const e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){const i=AEe,r=TEe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(e,i),i.mmult(r,this.invInertiaWorld)}}applyForce(t,e=new S){if(this.type!==yt.DYNAMIC)return;this.sleepState===yt.SLEEPING&&this.wakeUp();const i=xEe;e.cross(t,i),this.force.vadd(t,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(t,e=new S){if(this.type!==yt.DYNAMIC)return;const i=DEe,r=OEe;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,r),this.applyForce(i,r)}applyTorque(t){this.type===yt.DYNAMIC&&(this.sleepState===yt.SLEEPING&&this.wakeUp(),this.torque.vadd(t,this.torque))}applyImpulse(t,e=new S){if(this.type!==yt.DYNAMIC)return;this.sleepState===yt.SLEEPING&&this.wakeUp();const i=e,r=IEe;r.copy(t),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=PEe;i.cross(t,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(t,e=new S){if(this.type!==yt.DYNAMIC)return;const i=REe,r=kEe;this.vectorToWorldFrame(t,i),this.vectorToWorldFrame(e,r),this.applyImpulse(i,r)}updateMassProperties(){const t=FEe;this.invMass=this.mass>0?1/this.mass:0;const e=this.inertia,i=this.fixedRotation;this.updateAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),k1.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!i?1/e.x:0,e.y>0&&!i?1/e.y:0,e.z>0&&!i?1/e.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(t,e){const i=new S;return t.vsub(this.position,i),this.angularVelocity.cross(i,e),this.velocity.vadd(e,e),e}integrate(t,e,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==yt.DYNAMIC&&this.type!==yt.KINEMATIC||this.sleepState===yt.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,g=this.invMass*t;r.x+=a.x*g*p.x,r.y+=a.y*g*p.y,r.z+=a.z*g*p.z;const m=h.elements,v=this.angularFactor,y=l.x*v.x,C=l.y*v.y,w=l.z*v.z;s.x+=t*(m[0]*y+m[1]*C+m[2]*w),s.y+=t*(m[3]*y+m[4]*C+m[5]*w),s.z+=t*(m[6]*y+m[7]*C+m[8]*w),o.x+=r.x*t,o.y+=r.y*t,o.z+=r.z*t,c.integrate(this.angularVelocity,t,this.angularFactor,c),e&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}yt.idCounter=0,yt.COLLIDE_EVENT_NAME="collide",yt.DYNAMIC=1,yt.STATIC=2,yt.KINEMATIC=4,yt.AWAKE=0,yt.SLEEPY=1,yt.SLEEPING=2,yt.wakeupEvent={type:"wakeup"},yt.sleepyEvent={type:"sleepy"},yt.sleepEvent={type:"sleep"};const EEe=new S,SEe=new jr,MEe=new Ii,AEe=new du,TEe=new du,xEe=new S,DEe=new S,OEe=new S,IEe=new S,PEe=new S,REe=new S,kEe=new S,FEe=new S;new S,new S;class F1{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new S,this.rayToWorld=new S,this.hitNormalWorld=new S,this.hitPointWorld=new S,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,i,r,s,o,a){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let B$,V$,j$,z$,U$,H$,G$;B$=vt.types.SPHERE,V$=vt.types.PLANE,j$=vt.types.BOX,z$=vt.types.CYLINDER,U$=vt.types.CONVEXPOLYHEDRON,H$=vt.types.HEIGHTFIELD,G$=vt.types.TRIMESH;class Zr{get[B$](){return this._intersectSphere}get[V$](){return this._intersectPlane}get[j$](){return this._intersectBox}get[z$](){return this._intersectConvex}get[U$](){return this._intersectConvex}get[H$](){return this._intersectHeightfield}get[G$](){return this._intersectTrimesh}constructor(t=new S,e=new S){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=t.clone(),this.to=e.clone(),this.direction=new S,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Zr.ANY,this.result=new F1,this.hasHit=!1,this.callback=i=>{}}intersectWorld(t,e){return this.mode=e.mode||Zr.ANY,this.result=e.result||new F1,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(W$),QR.length=0,t.broadphase.aabbQuery(t,W$,QR),this.intersectBodies(QR),this.hasHit}intersectBody(t,e){e&&(this.result=e,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!t.collisionResponse||0==(this.collisionFilterGroup&t.collisionFilterMask)||0==(t.collisionFilterGroup&this.collisionFilterMask))return;const r=UEe,s=HEe;for(let o=0,a=t.shapes.length;o<a;o++){const l=t.shapes[o];if((!i||l.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],s),t.quaternion.vmult(t.shapeOffsets[o],r),r.vadd(t.position,r),this.intersectShape(l,s,r,t),this.result.shouldStop))break}}intersectBodies(t,e){e&&(this.result=e,this.updateDirection());for(let i=0,r=t.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(t[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(t,e,i,r){if(function(n,t,e){e.vsub(n,dp);const i=dp.dot(t);return t.scale(i,L1),L1.vadd(n,L1),e.distanceTo(L1)}(this.from,this.direction,i)>t.boundingSphereRadius)return;const a=this[t.type];a&&a.call(this,t,e,i,r,t)}_intersectBox(t,e,i,r,s){return this._intersectConvex(t.convexPolyhedronRepresentation,e,i,r,s)}_intersectPlane(t,e,i,r,s){const o=this.from,a=this.to,l=this.direction,c=new S(0,0,1);e.vmult(c,c);const u=new S;o.vsub(i,u);const h=u.dot(c);if(a.vsub(i,u),h*u.dot(c)>0||o.distanceTo(a)<h)return;const g=c.dot(l);if(Math.abs(g)<this.precision)return;const m=new S,v=new S,y=new S;o.vsub(i,m);const C=-c.dot(m)/g;l.scale(C,v),o.vadd(v,y),this.reportIntersection(c,y,s,r,-1)}getAABB(t){const{lowerBound:e,upperBound:i}=t,r=this.to,s=this.from;e.x=Math.min(r.x,s.x),e.y=Math.min(r.y,s.y),e.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(t,e,i,r,s){const o=$Ee;o.from.copy(this.from),o.to.copy(this.to),ui.pointToLocalFrame(i,e,o.from,o.from),ui.pointToLocalFrame(i,e,o.to,o.to),o.updateDirection();const a=GEe;let l,c,u,h;l=c=0,u=h=t.data.length-1;const p=new Ii;o.getAABB(p),t.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),t.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=l;g<u;g++)for(let m=c;m<h;m++){if(this.result.shouldStop)return;if(t.getAabbAtIndex(g,m,p),p.overlapsRay(o)){if(t.getConvexTrianglePillar(g,m,!1),ui.pointToWorldFrame(i,e,t.pillarOffset,N1),this._intersectConvex(t.pillarConvex,e,N1,r,s,q$),this.result.shouldStop)return;t.getConvexTrianglePillar(g,m,!0),ui.pointToWorldFrame(i,e,t.pillarOffset,N1),this._intersectConvex(t.pillarConvex,e,N1,r,s,q$)}}}_intersectSphere(t,e,i,r,s){const o=this.from,a=this.to,l=t.radius,c=lr(a.x-o.x,2)+lr(a.y-o.y,2)+lr(a.z-o.z,2),u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=lr(o.x-i.x,2)+lr(o.y-i.y,2)+lr(o.z-i.z,2)-lr(l,2),p=lr(u,2)-4*c*h,g=WEe,m=qEe;if(!(p<0))if(0===p)o.lerp(a,p,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const v=(-u-Math.sqrt(p))/(2*c),y=(-u+Math.sqrt(p))/(2*c);if(v>=0&&v<=1&&(o.lerp(a,v,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;y>=0&&y<=1&&(o.lerp(a,y,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(t,e,i,r,s,o){const a=YEe,l=Y$,c=o&&o.faceList||null,u=t.faces,h=t.vertices,p=t.faceNormals,g=this.direction,m=this.from,y=m.distanceTo(this.to),C=c?c.length:u.length,w=this.result;for(let A=0;!w.shouldStop&&A<C;A++){const k=c?c[A]:A,B=u[k],U=p[k],K=e,ae=i;l.copy(h[B[0]]),K.vmult(l,l),l.vadd(ae,l),l.vsub(m,l),K.vmult(U,a);const de=g.dot(a);if(Math.abs(de)<this.precision)continue;const ne=a.dot(l)/de;if(!(ne<0)){g.scale(ne,fa),fa.vadd(m,fa),vc.copy(h[B[0]]),K.vmult(vc,vc),ae.vadd(vc,vc);for(let Se=1;!w.shouldStop&&Se<B.length-1;Se++){fu.copy(h[B[Se]]),pu.copy(h[B[Se+1]]),K.vmult(fu,fu),K.vmult(pu,pu),ae.vadd(fu,fu),ae.vadd(pu,pu);const ve=fa.distanceTo(m);!Zr.pointInTriangle(fa,vc,fu,pu)&&!Zr.pointInTriangle(fa,fu,vc,pu)||ve>y||this.reportIntersection(a,fa,s,r,k)}}}}_intersectTrimesh(t,e,i,r,s,o){const a=XEe,l=tSe,c=nSe,u=Y$,h=KEe,p=ZEe,g=QEe,m=eSe,v=JEe,y=t.indices,C=this.from,w=this.to,A=this.direction;c.position.copy(i),c.quaternion.copy(e),ui.vectorToLocalFrame(i,e,A,h),ui.pointToLocalFrame(i,e,C,p),ui.pointToLocalFrame(i,e,w,g),g.x*=t.scale.x,g.y*=t.scale.y,g.z*=t.scale.z,p.x*=t.scale.x,p.y*=t.scale.y,p.z*=t.scale.z,g.vsub(p,h),h.normalize();const k=p.distanceSquared(g);t.tree.rayQuery(this,c,l);for(let B=0,U=l.length;!this.result.shouldStop&&B!==U;B++){const K=l[B];t.getNormal(K,a),t.getVertex(y[3*K],vc),vc.vsub(p,u);const ae=h.dot(a),de=a.dot(u)/ae;if(de<0)continue;h.scale(de,fa),fa.vadd(p,fa),t.getVertex(y[3*K+1],fu),t.getVertex(y[3*K+2],pu);const ne=fa.distanceSquared(p);!Zr.pointInTriangle(fa,fu,vc,pu)&&!Zr.pointInTriangle(fa,vc,fu,pu)||ne>k||(ui.vectorToWorldFrame(e,a,v),ui.pointToWorldFrame(i,e,fa,m),this.reportIntersection(v,m,s,r,K))}l.length=0}reportIntersection(t,e,i,r,s){const o=this.from,a=this.to,l=o.distanceTo(e),c=this.result;if(!(this.skipBackfaces&&t.dot(this.direction)>0))switch(c.hitFaceIndex=void 0!==s?s:-1,this.mode){case Zr.ALL:this.hasHit=!0,c.set(o,a,t,e,i,r,l),c.hasHit=!0,this.callback(c);break;case Zr.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,t,e,i,r,l));break;case Zr.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,t,e,i,r,l),c.shouldStop=!0}}static pointInTriangle(t,e,i,r){r.vsub(e,dp),i.vsub(e,Ub),t.vsub(e,JR);const s=dp.dot(dp),o=dp.dot(Ub),a=dp.dot(JR),l=Ub.dot(Ub),c=Ub.dot(JR);let u,h;return(u=l*a-o*c)>=0&&(h=s*c-o*a)>=0&&u+h<s*l-o*o}}Zr.CLOSEST=1,Zr.ANY=2,Zr.ALL=4;const W$=new Ii,QR=[],Ub=new S,JR=new S,UEe=new S,HEe=new jr,fa=new S,vc=new S,fu=new S,pu=new S,q$={faceList:[0]},N1=new S,$Ee=new Zr,GEe=[],WEe=new S,qEe=new S,YEe=new S,Y$=new S,XEe=new S,KEe=new S,ZEe=new S,QEe=new S,JEe=new S,eSe=new S;new Ii;const tSe=[],nSe=new ui,dp=new S,L1=new S;let cG,uG,dG,hG,fG,pG,gG,mG,_G,vG,yG,bG,wG,CG,EG,SG,MG,AG,TG,xG,DG,OG,IG,PG,RG;new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new Zr,new S,new S,new S(1,0,0),new S(0,1,0),new S(0,0,1),new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new Ii,new S,new Ii,new S,new S,new S,new S,new S,new S,new S,new Ii,new S,new ui,new Ii;const or={sphereSphere:vt.types.SPHERE,spherePlane:vt.types.SPHERE|vt.types.PLANE,boxBox:vt.types.BOX|vt.types.BOX,sphereBox:vt.types.SPHERE|vt.types.BOX,planeBox:vt.types.PLANE|vt.types.BOX,convexConvex:vt.types.CONVEXPOLYHEDRON,sphereConvex:vt.types.SPHERE|vt.types.CONVEXPOLYHEDRON,planeConvex:vt.types.PLANE|vt.types.CONVEXPOLYHEDRON,boxConvex:vt.types.BOX|vt.types.CONVEXPOLYHEDRON,sphereHeightfield:vt.types.SPHERE|vt.types.HEIGHTFIELD,boxHeightfield:vt.types.BOX|vt.types.HEIGHTFIELD,convexHeightfield:vt.types.CONVEXPOLYHEDRON|vt.types.HEIGHTFIELD,sphereParticle:vt.types.PARTICLE|vt.types.SPHERE,planeParticle:vt.types.PLANE|vt.types.PARTICLE,boxParticle:vt.types.BOX|vt.types.PARTICLE,convexParticle:vt.types.PARTICLE|vt.types.CONVEXPOLYHEDRON,cylinderCylinder:vt.types.CYLINDER,sphereCylinder:vt.types.SPHERE|vt.types.CYLINDER,planeCylinder:vt.types.PLANE|vt.types.CYLINDER,boxCylinder:vt.types.BOX|vt.types.CYLINDER,convexCylinder:vt.types.CONVEXPOLYHEDRON|vt.types.CYLINDER,heightfieldCylinder:vt.types.HEIGHTFIELD|vt.types.CYLINDER,particleCylinder:vt.types.PARTICLE|vt.types.CYLINDER,sphereTrimesh:vt.types.SPHERE|vt.types.TRIMESH,planeTrimesh:vt.types.PLANE|vt.types.TRIMESH};cG=or.sphereSphere,uG=or.spherePlane,dG=or.boxBox,hG=or.sphereBox,fG=or.planeBox,pG=or.convexConvex,gG=or.sphereConvex,mG=or.planeConvex,_G=or.boxConvex,vG=or.sphereHeightfield,yG=or.boxHeightfield,bG=or.convexHeightfield,wG=or.sphereParticle,CG=or.planeParticle,EG=or.boxParticle,SG=or.convexParticle,MG=or.cylinderCylinder,AG=or.sphereCylinder,TG=or.planeCylinder,xG=or.boxCylinder,DG=or.convexCylinder,OG=or.heightfieldCylinder,IG=or.particleCylinder,PG=or.sphereTrimesh,RG=or.planeTrimesh,new S,new S,new S,new S,new S,new jr,new jr,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new Ii,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new S,new jr,new S,new S,new S,new S,new S,new S,new S,new S,new Ii,new Zr;const Ds=globalThis.performance||{};if(!Ds.now){let n=Date.now();Ds.timing&&Ds.timing.navigationStart&&(n=Ds.timing.navigationStart),Ds.now=()=>Date.now()-n}var gu=xe(517);function Xm(n,t,e){t||(t=new tn(tn.IDENTITY));const i=new tn(tn.IDENTITY);if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new tn(tn.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new tn(t).multiplyRight(i);if(!1===e(n,r,t))return!1;for(const s of n.nodes||n.children||[])if(!1===Xm(s,r,e))return!1;return!0}function VG(){VH([a$,R1])}function jG(n,t){const e=t.nodes.find(i=>i.name===n);if(e){let i=!1;for(const r of t.scenes)i||Xm(r,new tn(tn.IDENTITY),(s,o)=>s!==e||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return t.scene={id:n,name:n,nodes:[e]},t.scenes=[t.scene],{scene:t.scene,scenes:t.scenes}}return t}function nk(n,t){return Sl(this,void 0,void 0,function*(){const e=n.scenegraph;let i;i=t?t[e]||(t[e]=fetch(e).then(s=>s.blob())):fetch(e);const r=yield o1(i,R1,{DracoLoader:OR,gltf:{decompressMeshes:!0,postProcess:!0}});return jG(n.scenegraphNode,r)})}function iAe(n,t){return Sl(this,void 0,void 0,function*(){return jG(n,yield t)})}function ik(n,t,e){if(t&&0!==t.length)return new yR(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:ti.CARTESIAN,data:t,mesh:new fEe,wireframe:!1,getTransformMatrix:i=>i.transformMatrix,getColor:i=>i.color||[255,255,255,229.5]},e))}let sAe=(()=>{class n extends KH{initializeState(){const{data:e}=this.props;this.setState({data:null!=e?e:[],zoomOpacity:.8,doCollisions:!1}),VG()}renderLayers(){const e=this.state,i=e.data.filter(l=>!l.scenegraph&&!l.wireframe&&l.unpickable),r=e.data.filter(l=>!l.scenegraph&&!l.wireframe&&!l.unpickable),s=e.data.filter(l=>!l.scenegraph&&l.wireframe),o=e.data.filter(l=>!!l.scenegraph);e.doCollisions&&function(n){Sl(this,void 0,void 0,function*(){console.log("Starting Collisioning");const t=n.filter(o=>!o.scenegraph&&!o.wireframe).map(o=>{const a=new tn(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),c=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new Ii({lowerBound:new S(...l.map((u,h)=>Math.min(u,c[h]))),upperBound:new S(...c.map((u,h)=>Math.max(u,l[h])))})}}),e=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield a1(o.scenegraph,R1,{DracoLoader:OR,decompress:!0,postProcess:!0});for(const l of a.scenes)Xm(l,new tn(o.transformMatrix),(c,u)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);e.push({"@id":o["@id"],name:c.name,entityId:o.entityId,bbox:new Ii({lowerBound:new S(...p.map((m,v)=>Math.min(m,g[v]))),upperBound:new S(...g.map((m,v)=>Math.max(m,p[v])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of t){const a=[];for(const l of e)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:t,targetBoxes:e,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i})}(e.data);const a={};for(const l of o)l.scenegraph&&l.scenegraphNode&&!Object.prototype.hasOwnProperty.call(a,l.scenegraph)&&(a[l.scenegraph]=nk({scenegraph:l.scenegraph},n.gltfCache));return[ik("cubes",i,{wireframe:!1,pickable:!1}),ik("pickableCubes",r,{wireframe:!1,pickable:!0}),ik("wireframes",s,{wireframe:!0,pickable:!1}),...o.map(l=>{var c;return new WR({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?e.zoomOpacity:void 0!==l.opacity?l.opacity:1,pickable:!l.unpickable,coordinateSystem:ti.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?iAe(l.scenegraphNode,a[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:null!==(c=l.color)&&void 0!==c?c:[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}})})].filter(l=>!!l)}getPickingInfo(e){return e.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function zG(n,t=[]){for(const e of n.nodes||n.children||[])t.push(e.name),zG(e,t);return t}let aAe=(()=>{class n{constructor(e){var i,r,s,o,a;this.deckProps=e,this.bodyUILayer=new sAe({}),this.nodeClickSubject=new G,this.nodeHoverStartSubject=new G,this.nodeHoverStopSubject=new G,this.sceneRotationSubject=new hr([0,0]),this.nodeDragStartSubject=new G,this.nodeDragSubject=new G,this.nodeDragEndSubject=new G,this.nodeClick$=this.nodeClickSubject.pipe(Ys()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Ys()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Ys()),this.sceneRotation$=this.sceneRotationSubject.pipe(Ys()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Ys()),this.nodeDrag$=this.nodeDragSubject.pipe(Ys()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Ys());const l=Object.assign(Object.assign({},e),{views:["orthographic"===e.camera?new f8({flipY:!1,near:-1e3}):new _8({})],controller:void 0===e.interactive||e.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:c=>{var u;return null!==(u=this.cursor)&&void 0!==u?u:c.isDragging?"grabbing":"grab"}});e.legacyLighting&&(l.effects=[new nR({ambientLight:new v8({color:[255,255,255],intensity:10})})]),this.deck=new E1(l),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(i=e.minRotationX)&&void 0!==i?i:-15,maxRotationX:null!==(r=e.maxRotationX)&&void 0!==r?r:15,target:null!==(s=e.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=e.rotation)&&void 0!==o?o:0,zoom:null!==(a=e.zoom)&&void 0!==a?a:9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){return Sl(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(e=>{setTimeout(e,200)})})}finalize(){this.deck.finalize()}setScene(e){if((null==e?void 0:e.length)>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of e)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,i):this.bodyUILayer.setState({data:e,zoomOpacity:i})}}debugSceneNodeProcessing(e,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new tn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,t,e){return Sl(this,void 0,void 0,function*(){VG();const i=yield nk({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"}),r={},s=[];for(const o of i.scenes)Xm(o,t=new tn(t||tn.IDENTITY),(a,l)=>{const c={"@id":a.name||a.id,"@type":"ProcessedNode",transformMatrix:new tn(l),wireframe:!0,node:a};if(s.push({"@id":`GLTF:${c["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:c["@id"],transformMatrix:new tn(t||tn.IDENTITY),tooltip:a.name||a.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:a}),a.mesh&&a.mesh.primitives&&a.mesh.primitives.length>0)for(const u of a.mesh.primitives)if(u.attributes.POSITION&&u.attributes.POSITION.min){const h=l.transformAsPoint(u.attributes.POSITION.min,[]),p=l.transformAsPoint(u.attributes.POSITION.max,[]);c.bbox=new Ii({lowerBound:new S(...h.map((g,m)=>Math.min(g,p[m]))),upperBound:new S(...p.map((g,m)=>Math.max(g,h[m])))})}return r[c["@id"]]=c,!0});for(const o of Object.values(r).filter(a=>!a.bbox)){for(const a of zG(o.node).map(l=>r[l]).filter(l=>l.bbox))o.bbox?o.bbox.extend(a.bbox):o.bbox=a.bbox.clone();o.bbox||delete r[o["@id"]]}for(const o of Object.values(r)){const a=o.bbox.lowerBound,u=(o.size=o.bbox.upperBound.clone().vsub(a)).clone().vmul(new S(.5,.5,.5)),h=o.center=a.clone().vadd(u);o.transformMatrix=(new tn).translate(h.toArray()).scale(u.toArray())}for(const o of s)r[o["@id"]]=o;return r})})(r,s).then(o=>{console.log("results",o),console.log("data",e),(e=e.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:i})})}zoomTo(e){const i=new tn(e.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(e){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:e})})}setRotationX(e){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:e})})}setZoom(e){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:e})})}setTarget(e){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:e})})}setInteractive(e){this.deck.setProps({controller:e})}_onHover(e){const{lastHovered:i}=this;this.cursor=e.picked?"pointer":void 0,e.picked&&e.object&&e.object["@id"]?i!==e.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=e.object,this.nodeHoverStartSubject.next(e.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(e,i){var r,s;e.picked&&e.object&&e.object["@id"]&&this.nodeClickSubject.next({node:e.object,ctrlClick:null!==(s=null===(r=null==i?void 0:i.srcEvent)||void 0===r?void 0:r.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(e){var i;if(null===(i=e.interactionState)||void 0===i?void 0:i.isZooming){const r=this.bodyUILayer.state,s=Math.min(Math.max(1-(e.viewState.zoom-8.9)/2,.05),1);r.zoomOpacity!==s&&this.bodyUILayer.setState({data:r.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},e.viewState)}),this.sceneRotationSubject.next([e.viewState.rotationOrbit,e.viewState.rotationX])}_onDragStart(e,i){this._dragEvent(e,i,this.nodeDragStartSubject)}_onDrag(e,i){this._dragEvent(e,i,this.nodeDragSubject)}_onDragEnd(e,i){this._dragEvent(e,i,this.nodeDragEndSubject)}_dragEvent(e,i,r){var s;(null===(s=null==e?void 0:e.object)||void 0===s?void 0:s["@id"])&&r.next({node:e.object,info:e,e:i})}}return Ve([gu.ZP],n.prototype,"_onHover",null),Ve([gu.ZP],n.prototype,"_onClick",null),Ve([gu.ZP],n.prototype,"_onViewStateChange",null),Ve([gu.ZP],n.prototype,"_onDragStart",null),Ve([gu.ZP],n.prototype,"_onDrag",null),Ve([gu.ZP],n.prototype,"_onDragEnd",null),n})();function lAe(n,t){return n===t}function cAe(n,t,e){if(null===t||null===e||t.length!==e.length)return!1;const i=t.length;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function UG(n,t=lAe){let e=null,i=null;function r(){return cAe(t,e,arguments)||(i=n.apply(null,arguments)),e=arguments,i}return r.reset=function(){e=null,i=null},r}const dAe=UG(function(){const n=_D();if(!n)return!1;const t=n.injector.get(H3,null);return!!t&&t.some(i=>(i&&i.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let rk=(()=>{class n{constructor(){this.bootstrap$=new Ry(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const sk=new Ee("INITIAL_STATE_TOKEN");let hAe=(()=>{class n{static set(e){this.value=e}static pop(){const e=this.value;return this.value={},e}}return n.value={},n})();const HG=new Ee("Internals.StateContextFactory"),$G=new Ee("Internals.StateFactory");function GG(n,t){return t?e=>e.pipe(GG((i,r)=>gi(n(i,r)).pipe(re((s,o)=>t(i,s,r,o))))):e=>e.lift(new fAe(n))}class fAe{constructor(t){this.project=t}call(t,e){return e.subscribe(new pAe(t,this.project))}}class pAe extends mi{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new gs(this),i=this.destination;i.add(e);const r=Uo(t,e);r!==e&&i.add(r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function $1(n=null){return t=>t.lift(new gAe(n))}class gAe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new mAe(t,this.defaultValue))}}class mAe extends At{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}const ja={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,t,e)=>`State name '${n}' from ${t} already exists in ${e}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let WG=(()=>{class n{constructor(e,i){this._ngZone=e,this._platformId=i,this.verifyZoneIsNotNooped(this._ngZone)}enter(e){return qD(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return pt.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return pt.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}verifyZoneIsNotNooped(e){e instanceof pt||console.warn(ja.ZONE_WARNING())}}return n.\u0275fac=function(e){return new(e||n)(I(pt),I(vl))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const qG=new Ee("ROOT_STATE_TOKEN"),YG=new Ee("FEATURE_STATE_TOKEN"),ok=new Ee("NGXS_PLUGINS"),XG=new Ee("NG_TEST_MODE"),KG=new Ee("NG_DEV_MODE"),_d="NGXS_META",ZG="NGXS_OPTIONS_META",ak="NGXS_SELECTOR_META";let gp=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=WG}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class _Ae{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}}const QG=new Ee("NGXS_EXECUTION_STRATEGY");function mp(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const lk=(n,t,e)=>{n=Object.assign({},n);const i=t.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?e:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},Km=(n,t)=>t.split(".").reduce((e,i)=>e&&e[i],n),ck=n=>n&&"object"==typeof n&&!Array.isArray(n),uk=(n,...t)=>{if(!t.length)return n;const e=t.shift();if(ck(n)&&ck(e))for(const i in e)ck(e[i])?(n[i]||Object.assign(n,{[i]:{}}),uk(n[i],e[i])):Object.assign(n,{[i]:e[i]});return uk(n,...t)};function Yb(n){return n[_d]}function fk(n){return n[ak]}function eW(n,t){const e=Km(t.currentAppState,n.path),i=Km(t.newAppState,n.path);return new _Ae(e,i,!n.isInitialised)}function AAe(...n){return function(n,t,e=DAe){const i=function(n){return n.reduce((t,e)=>(t[mp(e)]=!0,t),{})}(n),r=t&&function(n){return n.reduce((t,e)=>(t[e]=!0,t),{})}(t);return function(s){return s.pipe(function(n,t){return $n(e=>{const i=mp(e.action);return n[i]&&(!t||t[e.status])})}(i,r),e())}}(n,["DISPATCHED"])}function DAe(){return re(n=>n.action)}function G1(n){return t=>new ue(e=>t.subscribe({next(i){n.leave(()=>e.next(i))},error(i){n.leave(()=>e.error(i))},complete(){n.leave(()=>e.complete())}}))}let W1=(()=>{class n{constructor(e){this._executionStrategy=e}enter(e){return this._executionStrategy.enter(e)}leave(e){return this._executionStrategy.leave(e)}}return n.\u0275fac=function(e){return new(e||n)(I(QG))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class PAe extends G{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(t){if(this._busyPushingNext)this._itemQueue.unshift(t);else{for(this._busyPushingNext=!0,super.next(t);this._itemQueue.length>0;){const e=this._itemQueue.pop();super.next(e)}this._busyPushingNext=!1}}}let q1=(()=>{class n extends PAe{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),RAe=(()=>{class n extends ue{constructor(e,i){super(r=>{const s=e.pipe(G1(i)).subscribe({next:o=>r.next(o),error:o=>r.error(o),complete:()=>r.complete()});r.add(s)})}}return n.\u0275fac=function(e){return new(e||n)(I(q1),I(W1))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const tW=n=>(...t)=>n.shift()(...t,(...i)=>tW(n)(...i));let Y1=(()=>{class n extends hr{constructor(){super({})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),pk=(()=>{class n{constructor(e,i){this._parentManager=e,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const e=this.getPluginHandlers();this.rootPlugins.push(...e)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(e){return new(e||n)(I(n,12),I(ok,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),gk=(()=>{class n extends G{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),nW=(()=>{class n{constructor(e,i,r,s,o,a){this._injector=e,this._actions=i,this._actionResults=r,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(e){const i=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(e));return i.subscribe({error:r=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(Qo),this._errorHandler.handleError(r)}catch(s){}})}),i.pipe(G1(this._ngxsExecutionStrategy))}dispatchByEvents(e){return Array.isArray(e)?0===e.length?ut(this._stateStream.getValue()):qy(e.map(i=>this.dispatchSingle(i))):this.dispatchSingle(e)}dispatchSingle(e){if(!mp(e))return em(new Error(`This action doesn't have a type property: ${e.constructor.name}`));const r=this._stateStream.getValue();return tW([...this._pluginManager.plugins,(o,a)=>{o!==r&&this._stateStream.next(o);const l=this.getActionResultStream(a);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(r,e).pipe(nd())}getActionResultStream(e){return this._actionResults.pipe($n(i=>i.action===e&&"DISPATCHED"!==i.status),Mi(1),nd())}createDispatchObservable(e){return e.pipe(GG(i=>{switch(i.status){case"SUCCESSFUL":return ut(this._stateStream.getValue());case"ERRORED":return em(i.error);default:return ac}})).pipe(nd())}}return n.\u0275fac=function(e){return new(e||n)(I(Bt),I(q1),I(gk),I(pk),I(Y1),I(W1))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const iW=n=>{Object.freeze(n);const t="function"==typeof n,e=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(i){e.call(n,i)&&(!t||"caller"!==i&&"callee"!==i&&"arguments"!==i)&&null!==n[i]&&("object"==typeof n[i]||"function"==typeof n[i])&&!Object.isFrozen(n[i])&&iW(n[i])}),n};let rW=(()=>{class n{constructor(e,i){this.isDevMode=e,this.isTestMode=i}}return n.\u0275fac=function(e){return new(e||n)(I(KG),I(XG))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),sW=(()=>{class n{constructor(e,i){this._host=e,this._config=i}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(ja.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(ja.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(e){return new(e||n)(I(rW),I(gp))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Qm=(()=>{class n{constructor(e,i,r,s){this._stateStream=e,this._dispatcher=i,this._config=r,s.verifyDevMode()}getRootStateOperations(){const e={getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(e):e}ensureStateAndActionsAreImmutable(e){return{getState:()=>e.getState(),setState:i=>{const r=iW(i);return e.setState(r)},dispatch:i=>e.dispatch(i)}}setStateToTheCurrentWithNew(e){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign({},r,e.defaults))}}return n.\u0275fac=function(e){return new(e||n)(I(Y1),I(nW),I(gp),I(sW))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),X1=(()=>{class n{constructor(e){this._internalStateOperations=e}createStateContext(e){const i=this._internalStateOperations.getRootStateOperations();function r(l){return Km(l,e.path)}function s(l,c){const u=lk(l,e.path,c),h=e.instance;if(h.ngxsOnChanges){const p=eW(e,{currentAppState:l,newAppState:u});h.ngxsOnChanges(p)}return i.setState(u),u}function o(l,c){return s(l,c(r(l)))}return{getState:()=>r(i.getState()),patchState:l=>o(i.getState(),function(n){return t=>{if(Array.isArray(n))throw new Error(ja.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(ja.PATCHING_PRIMITIVE());const e=Object.assign({},t);for(const i in n)e[i]=n[i];return e}}(l)),setState(l){const c=i.getState();return function(l){return"function"==typeof l}(l)?o(c,l):s(c,l)},dispatch:l=>i.dispatch(l)}}}return n.\u0275fac=function(e){return new(e||n)(I(Qm))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class K1{static stateNameErrorMessage(t){return ja.STATE_NAME(t)}static checkCorrectStateName(t){if(!t)throw new Error(ja.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(t))throw new Error(this.stateNameErrorMessage(t))}static checkStateNameIsUnique(t,e){const r=this.getValidStateMeta(t).name,s=e[r];if(s&&s!==t)throw new Error(ja.STATE_UNIQUE(r,t.name,s.name));return r}static getValidStateMeta(t){const e=Yb(t);if(!e)throw new Error(ja.STATE_DECORATOR());return e}}K1.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let Jm=(()=>{class n{constructor(e,i,r,s,o,a,l){this._injector=e,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=UG(()=>{const c=this;function u(p){const g=c.statePaths[p];return g?function(n,t){return t&&t.compatibility&&t.compatibility.strictContentSecurityPolicy?function(n){const t=n.slice();return e=>t.reduce((i,r)=>i&&i[r],e)}(n):function(n){const t=n;let e="store."+t[0],i=0;const r=t.length;let s=e;for(;++i<r;)s=s+" && "+(e=e+"."+t[i]);return new Function("store","return "+s+";")}(n)}(g.split("."),c._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let g=u(p);return g||((...m)=>(g||(g=u(p)),g?g(...m):void 0))},getSelectorOptions:p=>Object.assign({},c._config.selectorOptions,p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(e){let i={};return i=Array.isArray(e)?e.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(e)?Object.assign({},e):void 0===e?{}:e,i}static checkStatesAreValid(e){e.forEach(K1.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(e){n.checkStatesAreValid(e);const{newStates:i}=this.addToStatesMap(e);if(!i.length)return[];const r=function(n){const t=e=>{const i=n.find(r=>r===e);if(!i)throw new Error(`Child state not found: ${e}. \r\nYou may have forgotten to add states to module`);return i[_d].name};return n.reduce((e,i)=>{const{name:r,children:s}=i[_d];return e[r]=(s||[]).map(t),e},{})}(i),s=function(n){const t=[],e={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),e[r]=!0,n[r].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${r}': ${s.join(" -> ")}`);e[o]||i(o,s.slice(0))}),t.indexOf(r)<0&&t.push(r)};return Object.keys(n).forEach(r=>i(r)),t.reverse()}(r),o=function(n,t={}){const e=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=e(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=e(n,i);t[i]=r?`${r}.${i}`:i}return t}(r),a=function(n){return n.reduce((t,e)=>(t[e[_d].name]=e,t),{})}(i),l=[];for(const c of s){const u=a[c],h=o[c],p=u[_d];this.addRuntimeInfoToMeta(p,h);const g={name:c,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(u),defaults:n.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(c,h)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(e){const r=this.add(e||[]);return{defaults:r.reduce((o,a)=>lk(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe($n(e=>"DISPATCHED"===e.status),_i(({action:e})=>this.invokeActions(this._actions,e).pipe(re(()=>({action:e,status:"SUCCESSFUL"})),$1({action:e,status:"CANCELED"}),ka(i=>ut({action:e,status:"ERRORED",error:i}))))).subscribe(e=>this._actionResults.next(e)))}invokeActions(e,i){const r=mp(i),s=[];for(const o of this.states){const a=o.actions[r];if(a)for(const l of a){const c=this._stateContextFactory.createStateContext(o);try{let u=o.instance[l.fn](c,i);u instanceof Promise&&(u=gi(u)),u instanceof ue?(u=u.pipe($1({})),l.options.cancelUncompleted&&(u=u.pipe(Jn(e.pipe(AAe(i)))))):u=ut({}).pipe(nd()),s.push(u)}catch(u){s.push(em(u))}}}return s.length||s.push(ut({})),qy(s)}addToStatesMap(e){const i=[],r=this.statesByName;for(const s of e){const o=K1.checkStateNameIsUnique(s,r);!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(e,i){this.statePaths[e.name]=i,e.path=i}hasBeenMountedAndBootstrapped(e,i){const r=void 0!==Km(this._initialState,i);return this.statesByName[e]&&r}}return n.\u0275fac=function(e){return new(e||n)(I(Bt),I(gp),I(n,12),I(q1),I(gk),I(X1),I(sk,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),mk=(()=>{class n{constructor(e,i,r){this.internalStateOperations=e,this.stateContextFactory=i,this.bootstrapper=r}ngxsBootstrap(e,i){this.internalStateOperations.getRootStateOperations().dispatch(e).pipe($n(()=>!!i),Ni(()=>this.invokeInit(i.states)),_i(()=>this.bootstrapper.appBootstrapped$),$n(r=>!!r)).subscribe(()=>this.invokeBootstrap(i.states))}invokeInit(e){for(const i of e){const r=i.instance;if(r.ngxsOnChanges){const a=eW(i,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});r.ngxsOnChanges(a)}r.ngxsOnInit&&r.ngxsOnInit(this.getStateContext(i)),i.isInitialised=!0}}invokeBootstrap(e){for(const i of e){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this.getStateContext(i))}}getStateContext(e){return this.stateContextFactory.createStateContext(e)}}return n.\u0275fac=function(e){return new(e||n)(I(Qm),I(X1),I(rk))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();let Ah=(()=>{class n{constructor(e,i,r,s,o,a){this._stateStream=e,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(e){return this._internalStateOperations.getRootStateOperations().dispatch(e)}select(e){const i=this.getStoreBoundSelectorFn(e);return this._stateStream.pipe(re(i),ka(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?ut(void 0):em(r)}),Zc(),G1(this._internalExecutionStrategy))}selectOnce(e){return this.select(e).pipe(Mi(1))}selectSnapshot(e){return this.getStoreBoundSelectorFn(e)(this._stateStream.getValue())}subscribe(e){return this._stateStream.pipe(G1(this._internalExecutionStrategy)).subscribe(e)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(e){return this._internalStateOperations.getRootStateOperations().setState(e)}getStoreBoundSelectorFn(e){return function(n){const t=fk(n)||Yb(n);return t&&t.makeRootSelector||(()=>n)}(e)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(e){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,e):e;this._stateStream.next(o)}}}return n.\u0275fac=function(e){return new(e||n)(I(Y1),I(Qm),I(gp),I(W1),I(Jm),I(sk,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Xb=(()=>{class n{constructor(e,i){n.store=e,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(e){return new(e||n)(I(Ah),I(gp))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class lW{static get type(){return"@@INIT"}}class cW{constructor(t){this.addedStates=t}static get type(){return"@@UPDATE_STATE"}}const Q1=new Ry(1);let zAe=(()=>{class n{constructor(e,i,r,s,o=[],a){!function(){try{const n=window.ng,e=!(n.probe&&n.coreTokens)&&Oo();Q1.next(e)}catch(n){Q1.next(!1)}finally{Q1.complete()}}();const l=e.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(l),e.connectActionHandlers(),a.ngxsBootstrap(new lW,l)}}return n.\u0275fac=function(e){return new(e||n)(I(Jm),I(Qm),I(Ah),I(Xb),I(qG,8),I(mk))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})(),UAe=(()=>{class n{constructor(e,i,r,s=[],o){const a=n.flattenStates(s),l=r.addAndReturnDefaults(a);l.states.length&&(i.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new cW(l.defaults),l))}static flattenStates(e=[]){return e.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(e){return new(e||n)(I(Ah),I(Qm),I(Jm),I(YG,8),I(mk))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();class pa{static forRoot(t=[],e={}){return{ngModule:zAe,providers:[Jm,X1,RAe,q1,rk,sW,rW,mk,nW,gk,Qm,W1,Ah,Y1,Xb,pk,...t,...pa.ngxsTokenProviders(t,e)]}}static forFeature(t=[]){return{ngModule:UAe,providers:[Jm,pk,...t,{provide:YG,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,e){return[{provide:XG,useValue:dAe},{provide:KG,useValue:Oo},{provide:QG,useClass:e.executionStrategy||WG},{provide:qG,useValue:t},{provide:pa.ROOT_OPTIONS,useValue:e},{provide:gp,useFactory:pa.ngxsConfigFactory,deps:[pa.ROOT_OPTIONS]},{provide:Cy,useFactory:pa.appBootstrapListenerFactory,multi:!0,deps:[rk]},{provide:sk,useFactory:pa.getInitialState},{provide:HG,useExisting:X1},{provide:$G,useExisting:Jm}]}static ngxsConfigFactory(t){return uk(new gp,t)}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}static getInitialState(){return hAe.pop()}}function vd(n){return i=>{!function(n){Q1.subscribe(t=>{t&&(n.\u0275prov||console.warn(ja.UNDECORATED_STATE_IN_IVY(n.name)))})}(i);const r=i,s=function(n){if(!n.hasOwnProperty(_d)){const t={name:null,actions:{},defaults:{},path:null,makeRootSelector:e=>e.getStateGetter(t.name),children:[]};Object.defineProperty(n,_d,{value:t})}return Yb(n)}(r),o=Object.getPrototypeOf(r),a=function(i){return Object.assign({},i[ZG]||{},n)}(o);(function(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:l,name:c}=o,u="string"==typeof c?c:c&&c.getName()||null;K1.checkCorrectStateName(u),s.hasOwnProperty(_d)&&(r.actions=Object.assign({},r.actions,(s[_d]||{}).actions)),r.children=a,r.defaults=l,r.name=u})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[ZG]=a}}pa.\u0275fac=function(t){return new(t||pa)},pa.\u0275mod=ke({type:pa}),pa.\u0275inj=Ae({}),pa.ROOT_OPTIONS=new Ee("ROOT_OPTIONS");let uW=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(E(Yc),E(ot))},n.\u0275dir=_e({type:n}),n})(),_p=(()=>{class n extends uW{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275dir=_e({type:n,features:[Et]}),n})();const Bo=new Ee("NgValueAccessor"),KAe={provide:Bo,useExisting:T(()=>Kb),multi:!0},QAe=new Ee("CompositionEventMode");let Kb=(()=>{class n extends uW{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=Kc()?Kc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(E(Yc),E(ot),E(QAe,8))},n.\u0275dir=_e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&Ce("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Vt([KAe]),Et]}),n})();function Th(n){return null==n||0===n.length}function hW(n){return null!=n&&"number"==typeof n.length}const Os=new Ee("NgValidators"),xh=new Ee("NgAsyncValidators"),JAe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fW{static min(t){return function(n){return t=>{if(Th(t.value)||Th(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function(n){return t=>{if(Th(t.value)||Th(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function(n){return Th(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function(n){return Th(n.value)||JAe.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function(n){return t=>Th(t.value)||!hW(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function(n){return t=>hW(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function(n){if(!n)return Dh;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Th(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return TW(t)}static composeAsync(t){return xW(t)}}function Dh(n){return null}function CW(n){return null!=n}function EW(n){const t=ty(n)?gi(n):n;return IC(t),t}function SW(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function MW(n,t){return t.map(e=>e(n))}function AW(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function TW(n){if(!n)return null;const t=n.filter(CW);return 0==t.length?null:function(e){return SW(MW(e,t))}}function _k(n){return null!=n?TW(AW(n)):null}function xW(n){if(!n)return null;const t=n.filter(CW);return 0==t.length?null:function(e){return qy(MW(e,t).map(EW)).pipe(re(SW))}}function vk(n){return null!=n?xW(AW(n)):null}function DW(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function OW(n){return n._rawValidators}function IW(n){return n._rawAsyncValidators}function yk(n){return n?Array.isArray(n)?n:[n]:[]}function J1(n,t){return Array.isArray(n)?n.includes(t):n===t}function PW(n,t){const e=yk(t);return yk(n).forEach(r=>{J1(e,r)||e.push(r)}),e}function RW(n,t){return yk(t).filter(e=>!J1(n,e))}let kW=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_k(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,i){return!!this.control&&this.control.hasError(e,i)}getError(e,i){return this.control?this.control.getError(e,i):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n}),n})(),Vo=(()=>{class n extends kW{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275dir=_e({type:n,features:[Et]}),n})();class yc extends kW{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let bk=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(E(yc,2))},n.\u0275dir=_e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&ht("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Et]}),n})();function Zb(n,t){Ek(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&LW(n,t)})}(n,t),function(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&LW(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function nM(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),rM(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function iM(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ek(n,t){const e=OW(n);null!==t.validator?n.setValidators(DW(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=IW(n);null!==t.asyncValidator?n.setAsyncValidators(DW(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();iM(t._rawValidators,r),iM(t._rawAsyncValidators,r)}function rM(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=OW(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=IW(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return iM(t._rawValidators,i),iM(t._rawAsyncValidators,i),e}function LW(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BW(n,t){Ek(n,t)}function Sk(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function VW(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Mk(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Kb?e=s:function(n){return Object.getPrototypeOf(n.constructor)===_p}(s)?i=s:r=s}),r||i||e||null}function sM(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Qb="VALID",oM="INVALID",e_="PENDING",Jb="DISABLED";function Ak(n){return(xk(n)?n.validators:n)||null}function jW(n){return Array.isArray(n)?_k(n):n||null}function Tk(n,t){return(xk(t)?t.asyncValidators:n)||null}function zW(n){return Array.isArray(n)?vk(n):n||null}function xk(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Dk{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=jW(this._rawValidators),this._composedAsyncValidatorFn=zW(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Qb}get invalid(){return this.status===oM}get pending(){return this.status==e_}get disabled(){return this.status===Jb}get enabled(){return this.status!==Jb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=jW(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=zW(t)}addValidators(t){this.setValidators(PW(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(PW(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(RW(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(RW(t,this._rawAsyncValidators))}hasValidator(t){return J1(this._rawValidators,t)}hasAsyncValidator(t){return J1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=e_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Jb,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Qb,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qb||this.status===e_)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jb:Qb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=e_,this._hasOwnPendingAsyncValidator=!0;const e=EW(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=i instanceof Ok?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof hTe&&i.at(r)||null}),i}(this,t)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?Jb:this.errors?oM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(e_)?e_:this._anyControlsHaveStatus(oM)?oM:Qb}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){xk(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Oh extends Dk{constructor(t=null,e,i){super(Ak(e),Tk(i,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){sM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){sM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ok extends Dk{constructor(t,e,i){super(Ak(e),Tk(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e instanceof Oh?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class hTe extends Dk{constructor(t,e,i){super(Ak(e),Tk(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Oh?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,i)=>{if(void 0===t[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const fTe={provide:Vo,useExisting:T(()=>vp)},e0=(()=>Promise.resolve(null))();let vp=(()=>{class n extends Vo{constructor(e,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Le,this.form=new Ok({},_k(e),vk(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){e0.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Zb(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){e0.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),sM(this._directives,e)})}addFormGroup(e){e0.then(()=>{const i=this._findContainer(e.path),r=new Ok({});BW(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){e0.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){e0.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,VW(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(E(Os,10),E(xh,10))},n.\u0275dir=_e({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&Ce("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vt([fTe]),Et]}),n})();const gTe={provide:yc,useExisting:T(()=>Ik)},$W=(()=>Promise.resolve(null))();let Ik=(()=>{class n extends yc{constructor(e,i,r,s){super(),this.control=new Oh,this._registered=!1,this.update=new Le,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Mk(0,s)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Sk(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){$W.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;$W.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(E(Vo,9),E(Os,10),E(xh,10),E(Bo,10))},n.\u0275dir=_e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vt([gTe]),Et,oi]}),n})(),qW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const Pk=new Ee("NgModelWithFormControlWarning"),bTe={provide:yc,useExisting:T(()=>aM)};let aM=(()=>{class n extends yc{constructor(e,i,r,s){super(),this._ngModelWarningConfig=s,this.update=new Le,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=Mk(0,r)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const i=e.form.previousValue;i&&nM(i,this,!1),Zb(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Sk(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&nM(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return n.\u0275fac=function(e){return new(e||n)(E(Os,10),E(xh,10),E(Bo,10),E(Pk,8))},n.\u0275dir=_e({type:n,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Vt([bTe]),Et,oi]}),n._ngModelWarningSentOnce=!1,n})();const wTe={provide:Vo,useExisting:T(()=>t_)};let t_=(()=>{class n extends Vo{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Le,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Zb(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){nM(e.control||null,e,!1),sM(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,VW(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(nM(i||null,e),r instanceof Oh&&(Zb(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);BW(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function(n,t){return rM(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ek(this.form,this),this._oldForm&&rM(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(E(Os,10),E(xh,10))},n.\u0275dir=_e({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&Ce("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vt([wTe]),Et,oi]}),n})(),lq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[qW]]}),n})(),Bk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[lq]}),n})(),Vk=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Pk,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[lq]}),n})();function t0(n){return new ue(t=>{let e;try{e=n()}catch(r){return void t.error(r)}return(e?gi(e):TE()).subscribe(t)})}class jTe{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new jk(t,this.delay,this.scheduler))}}class jk extends At{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,r=t.scheduler,s=t.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const o=Math.max(0,i[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(jk.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new zTe(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(ra.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(ra.createComplete()),this.unsubscribe()}}class zTe{constructor(t,e){this.time=t,this.notification=e}}const fq=sm({passive:!0});let pq=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ac;const i=Ju(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new G,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,fq),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,fq)}}),s}stopMonitoring(e){const i=Ju(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(I(pi),I(pt))},n.\u0275prov=pe({factory:function(){return new n(I(pi),I(pt))},token:n,providedIn:"root"}),n})(),gq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Ly]]}),n})();const rxe=new Ee("MAT_INPUT_VALUE_ACCESSOR"),sxe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let oxe=0;const axe=WO(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let n0=(()=>{class n extends axe{constructor(e,i,r,s,o,a,l,c,u,h){super(a,s,o,r),this._elementRef=e,this._platform=i,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+oxe++,this.focused=!1,this.stateChanges=new G,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m=>_V().has(m));const p=this._elementRef.nativeElement,g=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",m=>{const v=m.target;!v.value&&0===v.selectionStart&&0===v.selectionEnd&&(v.setSelectionRange(1,1),v.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=jt(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=jt(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&_V().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=jt(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,i;const r=(null===(i=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===i?void 0:i.call(e))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){sxe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(pi),E(yc,10),E(vp,8),E(t_,8),E(Hy),E(rxe,10),E(pq),E(pt),E(cS,8))},n.\u0275dir=_e({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(e,i){1&e&&Ce("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(pl("disabled",i.disabled)("required",i.required),cn("id",i.id)("data-placeholder",i.placeholder)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),ht("mat-input-server",i._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[Vt([{provide:Gy,useExisting:n}]),Et,oi]}),n})(),r0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[Hy],imports:[[gq,Wy,Xn],gq,Wy]}),n})();function pr(...n){const t=n.length;if(0===t)throw new Error("list of properties cannot be empty.");return e=>re(function(n,t){return i=>{let r=i;for(let s=0;s<t;s++){const o=null!=r?r[n[s]]:void 0;if(void 0===o)return;r=o}return r}}(n,t))(e)}const mq={leading:!0,trailing:!1};class uxe{constructor(t,e,i){this.durationSelector=t,this.leading=e,this.trailing=i}call(t,e){return e.subscribe(new dxe(t,this.durationSelector,this.leading,this.trailing))}}class dxe extends mi{constructor(t,e,i,r){super(t),this.destination=t,this.durationSelector=e,this._leading=i,this._trailing=r,this._hasValue=!1}_next(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}send(){const{_hasValue:t,_sendValue:e}=this;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0}throttle(t){const e=this.tryDurationSelector(t);e&&this.add(this._throttled=Uo(e,new gs(this)))}tryDurationSelector(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}}throttlingDone(){const{_throttled:t,_trailing:e}=this;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}class fxe{constructor(t,e,i,r){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=r}call(t,e){return e.subscribe(new pxe(t,this.duration,this.scheduler,this.leading,this.trailing))}}class pxe extends At{constructor(t,e,i,r,s){super(t),this.duration=e,this.scheduler=i,this.leading=r,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(gxe,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function gxe(n){const{subscriber:t}=n;t.clearThrottle()}var _q=xe(266);const mxe={tooltipState:lc("state",[Ar("initial, void, hidden",ci({opacity:0,transform:"scale(0)"})),Ar("visible",ci({transform:"scale(1)"})),ao("* => visible",Ro("200ms cubic-bezier(0, 0, 0.2, 1)",Lre([ci({opacity:0,transform:"scale(0)",offset:0}),ci({opacity:.5,transform:"scale(0.99)",offset:.5}),ci({opacity:1,transform:"scale(1)",offset:1})]))),ao("* => hidden",Ro("100ms cubic-bezier(0, 0, 0.2, 1)",ci({opacity:0})))])},vq="tooltip-panel",yq=sm({passive:!0}),bq=new Ee("mat-tooltip-scroll-strategy"),bxe={provide:bq,deps:[ca],useFactory:function(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},wxe=new Ee("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Exe=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u,h,p,g){this._overlay=e,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=h,this._defaultOptions=p,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new G,this._handleKeydown=m=>{this._isTooltipVisible()&&27===m.keyCode&&!sa(m)&&(m.preventDefault(),m.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=u,this._document=g,p&&(p.position&&(this.position=p.position),p.touchGestures&&(this.touchGestures=p.touchGestures)),h.change.pipe(Jn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),o.runOutsideAngular(()=>{i.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){var i;e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(i=this._tooltipInstance)||void 0===i||i.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=jt(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Jn(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach(([i,r])=>{e.removeEventListener(i,r,yq)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const i=this._createOverlay();this._detach(),this._portal=this._portal||new mm(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=i.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Jn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return i.positionChanges.pipe(Jn(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${vq}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Jn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Jn(this._destroyed)).subscribe(()=>{var r;return null===(r=this._tooltipInstance)||void 0===r?void 0:r._handleBodyInteraction()}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const i=e.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset(Object.assign(Object.assign({},r.main),s.main)),this._addOffset(Object.assign(Object.assign({},r.fallback),s.fallback))])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&e||"right"==i&&!e?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&e||"right"==i&&!e?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Mi(1),Jn(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){const{overlayY:i,originX:r,originY:s}=e;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${vq}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",()=>this.hide()],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,yq)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const i=this._elementRef.nativeElement,r=i.style;("on"===e||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(e){return new(e||n)(E(ca),E(ot),E(gm),E(ls),E(pt),E(pi),E(CV),E(wl),E(void 0),E(oa),E(void 0),E(lt))},n.\u0275dir=_e({type:n,inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),bc=(()=>{class n extends Exe{constructor(e,i,r,s,o,a,l,c,u,h,p,g){super(e,i,r,s,o,a,l,c,u,h,p,g),this._tooltipComponent=Mxe}}return n.\u0275fac=function(e){return new(e||n)(E(ca),E(ot),E(gm),E(ls),E(pt),E(pi),E(CV),E(wl),E(bq),E(oa,8),E(wxe,8),E(lt))},n.\u0275dir=_e({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[Et]}),n})(),Sxe=(()=>{class n{constructor(e){this._changeDetectorRef=e,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new G}show(e){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},e)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const i=e.toState;"hidden"===i&&!this.isVisible()&&this._onHide.next(),("visible"===i||"hidden"===i)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return n.\u0275fac=function(e){return new(e||n)(E(Qn))},n.\u0275dir=_e({type:n}),n})(),Mxe=(()=>{class n extends Sxe{constructor(e,i){super(e),this._breakpointObserver=i,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return n.\u0275fac=function(e){return new(e||n)(E(Qn),E(sI))},n.\u0275cmp=Ge({type:n,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,i){2&e&&Ef("zoom","visible"===i._visibility?1:null)},features:[Et],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,i){if(1&e&&(N(0,"div",0),Ce("@state.start",function(){return i._animationStart()})("@state.done",function(s){return i._animationDone(s)}),En(1,"async"),Pe(2),L()),2&e){let r;ht("mat-tooltip-handset",null==(r=xn(1,5,i._isHandset))?null:r.matches),le("ngClass",i.tooltipClass)("@state",i._visibility),X(2),Fi(i.message)}},directives:[yE],pipes:[Qu],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[mxe.tooltipState]},changeDetection:0}),n})(),wc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[bxe],imports:[[kre,Mn,Jy,Xn],Xn,Zy]}),n})();const Axe=["sliderWrapper"],Tl=sm({passive:!1}),Ixe={provide:Bo,useExisting:T(()=>zk),multi:!0};class Pxe{}const Rxe=Hf(zf(dm(class{constructor(n){this._elementRef=n}}),"accent"));let zk=(()=>{class n extends Rxe{constructor(e,i,r,s,o,a,l,c){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=c,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Le,this.input=new Le,this.valueChange=new Le,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Re.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!s0(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=s0(u)?function(n,t){for(let e=0;e<n.touches.length;e++){const i=n.touches[e].target;if(t===i||t.contains(i))return n.touches[e].identifier}}(u,this._elementRef.nativeElement):void 0;const h=wq(u,this._touchId);if(h){const p=this.value;this._isSliding="pointer",this._lastPointerEvent=u,u.preventDefault(),this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(h),this._valueOnSlideStart=p,p!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const h=wq(u,this._touchId);if(h){u.preventDefault();const p=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(h),p!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!s0(u)||"number"!=typeof this._touchId||Uk(u.changedTouches,this._touchId))&&(u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=e.nativeElement;u.addEventListener("mousedown",this._pointerDown,Tl),u.addEventListener("touchstart",this._pointerDown,Tl)})}get invert(){return this._invert}set invert(e){this._invert=jt(e)}get max(){return this._max}set max(e){this._max=Po(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(e){this._min=Po(e,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(e){this._step=Po(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(e){this._thumbLabel=jt(e)}get tickInterval(){return this._tickInterval}set tickInterval(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?Po(e,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(e){if(e!==this._value){let i=Po(e,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(e){this._vertical=jt(e)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(e){this._focusHostElement(e)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const e=this.percent,r=this.vertical?`1, ${e}, 1`:`${e}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===e?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let e=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${e}%`:`${e}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${e/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let c;c=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${c}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const e=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?e:!e)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const e=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?e:!e}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{this._isActive=!!e&&"keyboard"!==e,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mousedown",this._pointerDown,Tl),e.removeEventListener("touchstart",this._pointerDown,Tl),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(e){if(this.disabled||sa(e)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(e.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",e.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(e){const i=this._document,r=s0(e),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,Tl),i.addEventListener(o,this._pointerUp,Tl),r&&i.addEventListener("touchcancel",this._pointerUp,Tl);const a=this._getWindow();void 0!==a&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const e=this._document;e.removeEventListener("mousemove",this._pointerMove,Tl),e.removeEventListener("mouseup",this._pointerUp,Tl),e.removeEventListener("touchmove",this._pointerMove,Tl),e.removeEventListener("touchend",this._pointerUp,Tl),e.removeEventListener("touchcancel",this._pointerUp,Tl);const i=this._getWindow();void 0!==i&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(e){this.value=this._clamp((this.value||0)+this.step*e,this.min,this.max)}_updateValueFromPosition(e){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){let e=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,s=Math.ceil(30/(e*this.step/(this.max-this.min)))*this.step;this._tickIntervalPercent=s/e}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(e=this.value){let i=new Pxe;return i.source=this,i.value=e,i}_calculatePercentage(e){return((e||0)-this.min)/(this.max-this.min)}_calculateValue(e){return this.min+e*(this.max-this.min)}_clamp(e,i=0,r=1){return Math.max(i,Math.min(e,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(e){this._elementRef.nativeElement.focus(e)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(e){this.value=e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(wl),E(Qn),E(oa,8),ws("tabindex"),E(pt),E(lt),E(aa,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-slider"]],viewQuery:function(e,i){if(1&e&&fi(Axe,5),2&e){let r;Ft(r=Nt())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(e,i){1&e&&Ce("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&e&&(pl("tabIndex",i.tabIndex),cn("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",null==i.valueText?i.displayValue:i.valueText)("aria-orientation",i.vertical?"vertical":"horizontal"),ht("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",vertical:"vertical",displayWith:"displayWith",valueText:"valueText"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Vt([Ixe]),Et],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(e,i){1&e&&(N(0,"div",0,1),N(2,"div",2),st(3,"div",3),st(4,"div",4),L(),N(5,"div",5),st(6,"div",6),L(),N(7,"div",7),st(8,"div",8),st(9,"div",9),N(10,"div",10),N(11,"span",11),Pe(12),L(),L(),L(),L()),2&e&&(X(3),le("ngStyle",i._getTrackBackgroundStyles()),X(1),le("ngStyle",i._getTrackFillStyles()),X(1),le("ngStyle",i._getTicksContainerStyles()),X(1),le("ngStyle",i._getTicksStyles()),X(1),le("ngStyle",i._getThumbContainerStyles()),X(5),Fi(i.displayValue))},directives:[$B],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),n})();function s0(n){return"t"===n.type[0]}function wq(n,t){let e;return e=s0(n)?"number"==typeof t?Uk(n.touches,t)||Uk(n.changedTouches,t):n.touches[0]||n.changedTouches[0]:n,e?{x:e.clientX,y:e.clientY}:void 0}function Uk(n,t){for(let e=0;e<n.length;e++)if(n[e].identifier===t)return n[e]}let Cq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Xn],Xn]}),n})();function Fxe(n,t){}class Hk{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Nxe={dialogContainer:lc("dialogContainer",[Ar("void, exit",ci({opacity:0,transform:"scale(0.7)"})),Ar("enter",ci({transform:"none"})),ao("* => enter",Ro("150ms cubic-bezier(0, 0, 0.2, 1)",ci({transform:"none",opacity:1}))),ao("* => void, * => exit",Ro("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ci({opacity:0})))])};let Lxe=(()=>{class n extends mS{constructor(e,i,r,s,o,a){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=o,this._focusMonitor=a,this._animationStateChanged=new Le,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=l=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(l)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=RE(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=RE())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=RE();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(OV),E(Qn),E(lt,8),E(Hk),E(wl))},n.\u0275dir=_e({type:n,viewQuery:function(e,i){if(1&e&&fi(Xf,7),2&e){let r;Ft(r=Nt())&&(i._portalOutlet=r.first)}},features:[Et]}),n})(),Bxe=(()=>{class n extends Lxe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275cmp=Ge({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&ny("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(pl("id",i._id),cn("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Fg("@dialogContainer",i._state))},features:[Et],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&Pt(0,Fxe,0,0,"ng-template",0)},directives:[Xf],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Nxe.dialogContainer]}}),n})(),Vxe=0;class n_{constructor(t,e,i="mat-dialog-"+Vxe++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new G,this._afterClosed=new G,this._beforeClosed=new G,this._state=0,e._id=i,e._animationStateChanged.pipe($n(r=>"opened"===r.state),Mi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe($n(r=>"closed"===r.state),Mi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe($n(r=>27===r.keyCode&&!this.disableClose&&!sa(r))).subscribe(r=>{r.preventDefault(),$k(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():$k(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe($n(e=>"closing"===e.state),Mi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function $k(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const Gk=new Ee("MatDialogData"),jxe=new Ee("mat-dialog-default-options"),Eq=new Ee("mat-dialog-scroll-strategy"),Uxe={provide:Eq,deps:[ca],useFactory:function(n){return()=>n.scrollStrategies.block()}};let Hxe=(()=>{class n{constructor(e,i,r,s,o,a,l,c,u){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new G,this._afterOpenedAtThisLevel=new G,this._ariaHiddenElements=new Map,this.afterAllClosed=t0(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(us(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){(i=function(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new Hk)).id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),o=this._attachDialogContent(e,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new Qy({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const s=Bt.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:Hk,useValue:i}]}),o=new mm(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return e.attach(o).instance}_attachDialogContent(e,i,r,s){const o=new this._dialogRefConstructor(r,i,s.id);if(e instanceof ro)i.attachTemplatePortal(new Yf(e,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,i),l=i.attachComponentPortal(new mm(e,s.viewContainerRef,a));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(e,i,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!s||!s.get(oa,null,xt.Optional))&&o.push({provide:oa,useValue:{value:e.direction,change:ut()}}),Bt.create({parent:s||this._injector,providers:o})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){return new(e||n)(E(ca),E(Bt),E(void 0),E(void 0),E(_m),E(void 0),E(ku),E(ku),E(Ee))},n.\u0275dir=_e({type:n}),n})(),i_=(()=>{class n extends Hxe{constructor(e,i,r,s,o,a,l){super(e,i,s,a,l,o,n_,Bxe,Gk)}}return n.\u0275fac=function(e){return new(e||n)(I(ca),I(Bt),I(Jg,8),I(jxe,8),I(Eq),I(n,12),I(_m))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),Gxe=0,Sq=(()=>{class n{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+Gxe++}ngOnInit(){this._dialogRef||(this._dialogRef=function(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(e){return new(e||n)(E(n_,8),E(ot),E(i_))},n.\u0275dir=_e({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,i){2&e&&pl("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),Mq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})();let Wk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[i_,Uxe],imports:[[Jy,_S,Xn],Xn]}),n})();const qk=new Ee("CdkAccordion");let Yxe=0,Kxe=(()=>{class n{constructor(e,i,r){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Re.EMPTY,this.closed=new Le,this.opened=new Le,this.destroyed=new Le,this.expandedChange=new Le,this.id="cdk-accordion-child-"+Yxe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=jt(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=jt(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(E(qk,12),E(Qn),E(gS))},n.\u0275dir=_e({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Vt([{provide:qk,useValue:void 0}])]}),n})(),Zxe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const Qxe=["body"];function Jxe(n,t){}const eDe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],tDe=["mat-expansion-panel-header","*","mat-action-row"];function nDe(n,t){1&n&&st(0,"span",2),2&n&&le("@indicatorRotate",Dt()._getExpandedState())}const iDe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],rDe=["mat-panel-title","mat-panel-description","*"],Yk=new Ee("MAT_ACCORDION"),Tq="225ms cubic-bezier(0.4,0.0,0.2,1)",xq={indicatorRotate:lc("indicatorRotate",[Ar("collapsed, void",ci({transform:"rotate(0deg)"})),Ar("expanded",ci({transform:"rotate(180deg)"})),ao("expanded <=> collapsed, void => collapsed",Ro(Tq))]),bodyExpansion:lc("bodyExpansion",[Ar("collapsed, void",ci({height:"0px",visibility:"hidden"})),Ar("expanded",ci({height:"*",visibility:"visible"})),ao("expanded <=> collapsed, void => collapsed",Ro(Tq))])};let sDe=(()=>{class n{constructor(e){this._template=e}}return n.\u0275fac=function(e){return new(e||n)(E(ro))},n.\u0275dir=_e({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),oDe=0;const Dq=new Ee("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let cM=(()=>{class n extends Kxe{constructor(e,i,r,s,o,a,l){super(e,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Le,this.afterCollapse=new Le,this._inputChanges=new G,this._headerId="mat-expansion-panel-header-"+oDe++,this._bodyAnimationDone=new G,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(Zc((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=jt(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(us(null),$n(()=>this.expanded&&!this._portal),Mi(1)).subscribe(()=>{this._portal=new Yf(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(E(Yk,12),E(Qn),E(gS),E(ls),E(lt),E(aa,8),E(Dq,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,r){if(1&e&&Ui(r,sDe,5),2&e){let s;Ft(s=Nt())&&(i._lazyContent=s.first)}},viewQuery:function(e,i){if(1&e&&fi(Qxe,5),2&e){let r;Ft(r=Nt())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&ht("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Vt([{provide:Yk,useValue:void 0}]),Et,oi],ngContentSelectors:tDe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(Rr(eDe),jn(0),N(1,"div",0,1),Ce("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),N(3,"div",2),jn(4,1),Pt(5,Jxe,0,0,"ng-template",3),L(),jn(6,2),L()),2&e&&(X(1),le("@bodyExpansion",i._getExpandedState())("id",i.id),cn("aria-labelledby",i._headerId),X(4),le("cdkPortalOutlet",i._portal))},directives:[Xf],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[xq.bodyExpansion]},changeDetection:0}),n})();class lDe{}const cDe=Hf(lDe);let uM=(()=>{class n extends cDe{constructor(e,i,r,s,o,a,l){super(),this.panel=e,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Re.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe($n(u=>!(!u.hideToggle&&!u.togglePosition))):ac;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=zi(e.opened,e.closed,c,e._inputChanges.pipe($n(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe($n(()=>e._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:sa(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(E(cM,1),E(ot),E(wl),E(Qn),E(Dq,8),E(aa,8),ws("tabindex"))},n.\u0275cmp=Ge({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&Ce("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&e&&(cn("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Ef("height",i._getHeaderHeight()),ht("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Et],ngContentSelectors:rDe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(Rr(iDe),N(0,"span",0),jn(1),jn(2,1),jn(3,2),L(),Pt(4,nDe,1,1,"span",1)),2&e&&(X(4),le("ngIf",i._showToggle()))},directives:[js],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}\n'],encapsulation:2,data:{animation:[xq.indicatorRotate]},changeDetection:0}),n})(),Oq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=_e({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),Xk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Xn,Zxe,_S]]}),n})();var Iq=xe(478);Object.create(Error.prototype);const fDe=["*"];var hM=(()=>(function(n){n.LineHighlight="line-highlight",n.LineNumbers="line-numbers"}(hM||(hM={})),hM))();class gDe{}const Rq=new Ee("SECURITY_CONTEXT");let Kk=(()=>{class n{constructor(e,i,r,s,o){this.platform=e,this.securityContext=i,this.http=r,this.sanitizer=o,this.initialMarkedOptions={renderer:new Iq.Renderer},this.options=s}get options(){return this._options}set options(e){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),e)}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}compile(e,i=!1,r=!1,s=this.options){const o=this.trimIndentation(e),a=i?this.decodeHtml(o):o,l=r?this.renderEmoji(a):a,c=Iq.parse(l,s);return this.sanitizer.sanitize(this.securityContext,c)||""}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe(re(i=>this.handleExtension(e,i)))}highlight(e){if(Rf(this.platform)&&"undefined"!=typeof Prism){e||(e=document);const i=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(e)}}renderKatex(e,i){if(!Rf(this.platform))return e;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return e.replace(/\$([^\s][^$]*?[^\s])\$/gm,(r,s)=>katex.renderToString(s,i))}decodeHtml(e){if(!Rf(this.platform))return e;const i=document.createElement("textarea");return i.innerHTML=e,i.value}handleExtension(e,i){const r=e?e.split("?")[0].split(".").splice(-1).join():"";return"md"!==r?"```"+r+"\n"+i+"\n```":i}renderEmoji(e){if(!Rf(this.platform))return e;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}trimIndentation(e){if(!e)return"";let i;return e.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}}return n.\u0275fac=function(e){return new(e||n)(I(vl),I(Rq),I(pm,8),I(gDe,8),I(dh))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),kq=(()=>{class n{constructor(e,i){this.element=e,this.markdownService=i,this.error=new Le,this.load=new Le,this.ready=new Le,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(e,i=!1){let r=this.markdownService.compile(e,i,this.emoji);r=this.katex?this.markdownService.renderKatex(r,this.katexOptions):r,this.element.nativeElement.innerHTML=r,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(e){return null!=e&&"false"!=`${String(e)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(e=>{this.render(e),this.load.emit(e)},e=>this.error.emit(e))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,hM.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,i){const r=e.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(e,i){const r=e.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const l=this.toLispCase(o);r.item(s).setAttribute(l,a.toString())}})}toLispCase(e){const i=e.match(/([A-Z])/g);if(!i)return e;let r=e.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Kk))},n.\u0275cmp=Ge({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start"},outputs:{error:"error",load:"load",ready:"ready"},features:[oi],ngContentSelectors:fDe,decls:1,vars:0,template:function(e,i){1&e&&(Rr(),jn(0))},encapsulation:2}),n})(),bDe=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[Kk,e&&e.loader||[],e&&e.markedOptions||[],{provide:Rq,useValue:e&&null!=e.sanitize?e.sanitize:hn.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();function Fq(n,t,e){return e?Fq(n,t).pipe(re(i=>Ne(i)?e(...i):e(i))):new ue(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o);let s;try{s=n(r)}catch(o){return void i.error(o)}if(ct(t))return()=>t(r,s)})}function Zk(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new CDe(n,e))}}class CDe{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new EDe(t,this.observables,this.project))}}class EDe extends Qz{constructor(t,e,i){super(t),this.observables=e,this.project=i,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(Jz(this,e[s],void 0,s))}notifyNext(t,e,i){this.values[i]=e;const r=this.toRespond;if(r.length>0){const s=r.indexOf(i);-1!==s&&r.splice(s,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class SDe{constructor(t,e,i=!1){this.accumulator=t,this.seed=e,this.hasSeed=i}call(t,e){return e.subscribe(new MDe(t,this.accumulator,this.seed,this.hasSeed))}}class MDe extends At{constructor(t,e,i,r){super(t),this.accumulator=e,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let i;try{i=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}class xDe{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new DDe(t,this.predicate))}}class DDe extends At{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}const ODe=["youtubeContainer"];let Bq=(()=>{class n{constructor(e,i){this._ngZone=e,this._youtubeContainer=new G,this._destroyed=new G,this._playerChanges=new hr(void 0),this._videoId=new hr(void 0),this._height=new hr(390),this._width=new hr(640),this._startSeconds=new hr(void 0),this._endSeconds=new hr(void 0),this._suggestedQuality=new hr(void 0),this._playerVars=new hr(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=Rf(i)}get videoId(){return this._videoId.value}set videoId(e){this._videoId.next(e)}get height(){return this._height.value}set height(e){this._height.next(e||390)}get width(){return this._width.value}set width(e){this._width.next(e||640)}set startSeconds(e){this._startSeconds.next(e)}set endSeconds(e){this._endSeconds.next(e)}set suggestedQuality(e){this._suggestedQuality.next(e)}get playerVars(){return this._playerVars.value}set playerVars(e){this._playerVars.next(e)}ngOnInit(){if(!this._isBrowser)return;let e=ut(!0);if(!window.YT||!window.YT.Player){const r=new G;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>r.next(!0))},e=r.pipe(Mi(1),us(!1))}const i=function(n,t,e,i,r,s,o){const a=fr([t,s]).pipe(Zk(fr([i,r])),re(([l,c])=>{const[u,h]=l,[p,g]=c;return u?{videoId:u,playerVars:h,width:p,height:g}:void 0}));return fr([n,a,ut(o)]).pipe(function(n){return Bi(function(...n){let t=null;return"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&Ne(n[0])&&(n=n[0].slice()),e=>e.lift.call(gi([e,...n]),new tU(t))}(n),function(n){return t=>t.lift(new xDe(n))}(([t,e])=>!e),re(([t])=>t))}(e),function(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(r){return r.lift(new SDe(n,t,e))}}(NDe,void 0),Zc())}(this._youtubeContainer,this._videoId,e,this._width,this._height,this._playerVars,this._ngZone).pipe(Ni(r=>{this._playerChanges.next(r)}),_i(t=>t?Vq(t)?ut(t):new ue(e=>{let i=!1,r=!1;const s=o=>{r=!0,i||(o.target.removeEventListener("onReady",s),e.next(o.target))};return t.addEventListener("onReady",s),()=>{i=!0,r||(r=>{Vq(r)||r.destroy()})(t)}}).pipe(Mi(1),us(void 0)):ut(void 0)),Jn(this._destroyed),Mc(new G));i.subscribe(r=>{this._player=r,r&&this._pendingPlayerState&&this._initializePlayer(r,this._pendingPlayerState),this._pendingPlayerState=void 0}),function(n,t,e){fr([n,t,e]).subscribe(([i,r,s])=>i&&i.setSize(r,s))}(i,this._width,this._height),function(n,t){fr([n,t]).subscribe(([e,i])=>e&&i&&e.setPlaybackQuality(i))}(i,this._suggestedQuality),function(n,t,e,i,r,s){const o=fr([e,i]).pipe(re(([u,h])=>({startSeconds:u,endSeconds:h}))),a=o.pipe(Jk(n,u=>!!u&&!function(n){const t=n.getPlayerState();return t!==YT.PlayerState.UNSTARTED&&t!==YT.PlayerState.CUED}(u))),l=t.pipe(Jk(n,(u,h)=>!!u&&u.videoId!==h));zi(n.pipe(Jk(fr([t,o]),([u,h],p)=>!(!p||u==p.videoId&&!h.startSeconds&&!h.endSeconds))),l,a).pipe(Zk(fr([n,t,o,r])),re(([u,h])=>h),Jn(s)).subscribe(([u,h,p,g])=>{!h||!u||(u.videoId=h,u.cueVideoById(Object.assign({videoId:h,suggestedQuality:g},p)))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}createEventsBoundInZone(){return{}}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(e,i){this._player?this._player.seekTo(e,i):this._getPendingState().seek={seconds:e,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(e){this._player?this._player.setVolume(e):this._getPendingState().volume=e}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(e){if(this._player)return this._player.setPlaybackRate(e);this._getPendingState().playbackRate=e}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(e,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:l}=i;switch(r){case YT.PlayerState.PLAYING:e.playVideo();break;case YT.PlayerState.PAUSED:e.pauseVideo();break;case YT.PlayerState.CUED:e.stopVideo()}null!=s&&e.setPlaybackRate(s),null!=o&&e.setVolume(o),null!=a&&(a?e.mute():e.unMute()),null!=l&&e.seekTo(l.seconds,l.allowSeekAhead)}_getLazyEmitter(e){return this._playerChanges.pipe(Fr(i=>i?Fq(r=>{i.addEventListener(e,r)},r=>{try{i.removeEventListener&&i.removeEventListener(e,r)}catch(s){}}):ut()),i=>new ue(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),Jn(this._destroyed))}}return n.\u0275fac=function(e){return new(e||n)(E(pt),E(vl))},n.\u0275cmp=Ge({type:n,selectors:[["youtube-player"]],viewQuery:function(e,i){if(1&e&&fi(ODe,5),2&e){let r;Ft(r=Nt())&&(i.youtubeContainer=r.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(e,i){1&e&&st(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();function NDe(n,[t,e,i]){if(n&&e&&n.playerVars!==e.playerVars)n.destroy();else{if(!e)return void(n&&n.destroy());if(n)return n}const r=i.runOutsideAngular(()=>new YT.Player(t,e));return r.videoId=e.videoId,r.playerVars=e.playerVars,r}function Vq(n){return"getPlayerStatus"in n}function Jk(n,t){return Bi(Zk(n),$n(([e,i])=>t(i,e)),re(([e])=>e))}let VDe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();function a0(n){return!0===n}function ho(n){return null==n}function za(n){return!ho(n)}function eF(n){return Boolean(n)}function Uq(n){return ho(n)?n:JSON.parse(JSON.stringify(n))}const pM=n=>{const e=n instanceof Date;if("object"!=typeof n||null===n||e)return n;Object.freeze(n);const r="function"==typeof n,s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(o=>{s.call(n,o)&&(!r||"caller"!==o&&"callee"!==o&&"arguments"!==o)&&null!==n[o]&&("object"==typeof n[o]||"function"==typeof n[o])&&!Object.isFrozen(n[o])&&pM(n[o])}),n};function Hq(n){return za(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const Wq="NGXS_DATA_META",nF="NGXS_META",qq="NGXS_ARGUMENT_REGISTRY_META";let Yq=(()=>{class n{constructor(e){this.sequence$=new hr(0),this.subscription=null,e&&(this.subscription=e.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var e;this.sequence$.next(0),null===(e=this.subscription)||void 0===e||e.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(e){return new(e||n)(I(Ah,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();function l0(n){return n[Wq]}let Ua=(()=>{class n{constructor(e,i,r){n.store=e.get(Ah),n.ngZone=e.get(pt),n.factory=i,n.context=r,n.computed=e.get(Yq)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(e){return new(e||n)(I(Bt),I($G),I(HG))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();class zr{constructor(){zr.statesCachedMeta.clear()}static createStateContext(t){return Ua.context.createStateContext(t)}static ensureMappedState(t){if(ho(Ua.factory)||ho(t))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(za(t.name)?zr.statesCachedMeta.get(t.name):null)||zr.ensureMeta(t)}static getRepositoryByInstance(t){var e;const r=null!==(e=l0(zr.getStateClassByInstance(t)))&&void 0!==e?e:null;if(ho(r))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return r}static getStateClassByInstance(t){return(null!=t?t:{}).constructor}static clearMetaByInstance(t){const e=zr.getRepositoryByInstance(t);e.stateMeta.actions={},e.operations={}}static createPayload(t,e){const i={},r=Array.from(t);for(let s=0;s<r.length;s++){const o=null==e?void 0:e.getPayloadTypeByIndex(s);za(o)&&(i[o]=r[s])}return Object.keys(i).length>0?i:null}static createAction(t,e,i){const r=zr.createPayload(e,i);return new(function(n){return class{constructor(e){e&&Object.keys(e).forEach(i=>{this[i]=e[i]})}static get type(){return n}}}(t.type))(r)}static ensureMeta(t){var e;const i=za(t.name)?null===(e=Ua.factory.states)||void 0===e?void 0:e.find(r=>r.name===t.name):null;return za(i)&&za(t.name)&&zr.statesCachedMeta.set(t.name,i),i}}zr.statesCachedMeta=new Map,zr.\u0275fac=function(t){return new(t||zr)},zr.\u0275prov=pe({token:zr,factory:zr.\u0275fac}),new Ry(1);class lOe extends Error{constructor(t){super(`Child states can only be added to an object. Cannot convert ${za(null==t?void 0:t.constructor)?t.constructor.name:t} to PlainObject`)}}function Xq(n){var t;return null!==(t=n.NGXS_OPTIONS_META)&&void 0!==t?t:{name:""}}function Kq(n){var t;const e=Xq(n),i=null!==(t=e.children)&&void 0!==t?t:[],s=Uq(void 0===e.defaults?{}:e.defaults);if(i.length){if(Hq(s))return function(n,t){return t.reduce((e,i)=>{const r=Xq(i);if(function(n){const t="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(t)}(r.name))throw new Error("State name not provided in class");return e[r.name.toString()]=Kq(i),e},null!=n?n:{})}(s,i);throw new lOe(s)}return s}function Qq(n){var t;return null!==(t=n.__NGXS_COMPUTED_OPTION__)&&void 0!==t?t:null}function Jq(){var n,t;return null!==(t=null===(n=null==Ua?void 0:Ua.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==t?t:0}function hOe(n){let t=!1;return Ky(n)&&(t=!0),t}function iF(n){return n[qq]}class fOe extends Error{constructor(t,e){super(`An argument with the name '${t}' already exists in the method '${e}'`)}}class pOe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(t){var e;return null!==(e=this.payloadMap.get(t))&&void 0!==e?e:null}getArgumentNameByIndex(t){var e;return null!==(e=this.argumentMap.get(t))&&void 0!==e?e:null}createPayloadType(t,e,i){this.checkDuplicateName(t,e),this.payloadMap.set(i,t),this.payloadMap.set(t,t)}createArgumentName(t,e,i){this.checkDuplicateName(t,e),this.argumentMap.set(i,t),this.argumentMap.set(t,t)}checkDuplicateName(t,e){if(eF(this.argumentMap.has(t))||eF(this.payloadMap.has(t)))throw new fOe(t,e)}}function rF(n){return Oo()?pM(n):n}function yOe(n){return{enumerable:!0,configurable:!0,get(){const t=l0(n),e=zr.ensureMappedState(t.stateMeta);return zr.createStateContext(e)}}}function sF(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>Oo()?pM(n.getState()):n.getState(),setState(t){n.setState(t)},patchState(t){n.patchState(t)}})}function Pi(){return(n,t,e)=>{!function(n,t){if(!function(n,t){var e;let i=n,r=!1;if(Hq(i))for(;null!==i;){if(a0(null==i?void 0:i.hasOwnProperty(t))){r=!!(null===(e=Object.getOwnPropertyDescriptor(i,t))||void 0===e?void 0:e.get);break}i=Object.getPrototypeOf(i)}return r}(n,null==t?void 0:t.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${t.toString()}() { \n\t .. \n}`)}(n,t);const i=e.get;return e.get=function(...r){const s=function(n){return ho(Qq(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),Qq(n)}(this),o=null==s?void 0:s.get(i);if(a0(null==o?void 0:o.isObservable))return null==o?void 0:o.value;if(ho(o)||o.sequenceId!==Jq()){s.delete(i);const l=i.apply(this,r);return s.set(i,{value:l,sequenceId:Jq(),isObservable:hOe(l)}),l}return o.value},e}}const SOe={cancelUncompleted:!0,insideZone:!1};function an(n=SOe){return(t,e,i)=>{!function(n,t){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===t)throw new Error("@DataAction() can only decorate a method implementation")}(t,i);const r=i.value,s=e.toString();return i.value=function(...o){const a=this;let l=null;const c=zr.getRepositoryByInstance(a),u=c.operations;let h=u[s];const p=c.stateMeta,g=iF(r);if(ho(h)){const w=function(n){var t,e,i;return null!==(i=null===(e=null===(t=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===t?void 0:t[0])||void 0===e?void 0:e.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==i?i:[]}(r),A=function(n){const{statePath:t,argumentsNames:e,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<e.length;o++)za(null==r?void 0:r.getArgumentNameByIndex(o))?s+=null==r?void 0:r.getArgumentNameByIndex(o):za(null==r?void 0:r.getPayloadTypeByIndex(o))?s+=null==r?void 0:r.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==e.length-1&&(s+=", ");return`@${t.replace(/\./g,"/")}.${i}(${s})`}({statePath:p.path,methodName:s,argumentsNames:w,argumentRegistry:g});h=u[s]={type:A,options:{cancelUncompleted:n.cancelUncompleted}},p.actions[h.type]=[{type:h.type,options:h.options,fn:h.type}]}zr.ensureMappedState(p).instance[h.type]=()=>{var w;return a0(n.insideZone)?null===(w=Ua.ngZone)||void 0===w||w.run(()=>{l=r.apply(a,o)}):l=r.apply(a,o),Ky(l)?ut(null).pipe(re(()=>l)):l};const y=zr.createAction(h,o,g),C=Ua.store.dispatch(y);return Ky(l)?function(n,t){return qy([n,t]).pipe(re(e=>e.pop()))}(C,l):l},i}}function Is(n){return(t,e,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function(n,t){const e=n[t];return ho(iF(e))&&Object.defineProperties(e,{[qq]:{enumerable:!0,configurable:!0,value:new pOe}}),iF(e)})(t,e).createPayloadType(r,e,i)}}function yd(){return n=>{const t=function(n){if(function(n){return!eF(n)}(n.hasOwnProperty(nF))){const t={name:null,actions:{},defaults:{},path:null,makeRootSelector:e=>e.getStateGetter(t.name),children:[]};Object.defineProperty(n,nF,{value:t})}return function(n){var t;return null===(t=n)||void 0===t?void 0:t[nF]}(n)}(n);if(ho(t.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,t){(function(n){var t;const e=null!==(t=l0(n))&&void 0!==t?t:null;return(ho(e)||(null==e?void 0:e.stateClass)!==n)&&function(n){Object.defineProperty(n,Wq,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),l0(n)}(n)).stateMeta=t}(n,t),function(n,t,e){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:t.name},initialState:{enumerable:!0,configurable:!0,get:()=>Uq(e)},context:yOe(n)})}(n,t,Kq(n)),function(n){var t,e;const i=l0(n),r=null!==(e=null===(t=null==i?void 0:i.stateMeta)||void 0===t?void 0:t.name)&&void 0!==e?e:null;if(za(r)){const s=`__${r}__selector`;Object.defineProperties(n.prototype,{[s]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(za(this[s]))return this[s];if(ho(Ua.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[s]=Ua.store.select(n).pipe(re(o=>Oo()?pM(o):o),nd({refCount:!0,bufferSize:1})),this[s]}}})}}(n)}}var mM=(()=>(function(n){n.ID="id"}(mM||(mM={})),mM))(),c0=(()=>(function(n){n.ASC="asc",n.DESC="desc"}(c0||(c0={})),c0))();let oF=(()=>{class n{constructor(){this.browserStorageEvents$=new G,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(e){this._dirty=e}ngxsOnChanges(e){var r;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var i;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(i=this.ngxsDataDoCheck)||void 0===i||i.call(this))}markAsDirtyAfterReset(){var i;this.dirty=!0,null===(i=this.ngxsDataAfterReset)||void 0===i||i.call(this)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),TOe=(()=>{class n extends oF{get snapshot(){return rF(this.getState())}get ctx(){return sF(this.context)}getState(){return this.ctx.getState()}dispatch(e){return this.ctx.dispatch(e)}patchState(e){this.ctx.patchState(e)}setState(e){this.ctx.setState(e)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),Ve([Pi(),Ke("design:type",Object),Ke("design:paramtypes",[])],n.prototype,"snapshot",null),Ve([an(),xs(0,Is("patchValue")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"patchState",null),Ve([an(),xs(0,Is("stateValue")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"setState",null),Ve([an(),Ke("design:type",Function),Ke("design:paramtypes",[]),Ke("design:returntype",void 0)],n.prototype,"reset",null),n})(),xOe=(()=>{class n extends oF{constructor(){super(...arguments),this.primaryKey=mM.ID,this.comparator=null}get snapshot(){return rF(this.getState())}get ids(){return this.snapshot.ids}get entities(){return this.snapshot.entities}get entitiesArray(){const e=this.snapshot;return e.ids.map(i=>e.entities[i])}get ids$(){return this.state$.pipe(re(e=>e.ids))}get entities$(){return this.state$.pipe(re(e=>e.entities))}get entitiesArray$(){return this.state$.pipe(re(e=>e.ids.map(i=>e.entities[i])))}get ctx(){return sF(this.context)}setComparator(e){return this.comparator=e,this}dispatch(e){return this.ctx.dispatch(e)}getState(){return this.ctx.getState()}selectId(e){var i;return null===(i=e)||void 0===i?void 0:i[this.primaryKey]}selectOne(e){var i;return null!==(i=this.snapshot.entities[e])&&void 0!==i?i:null}selectAll(){const e=this.getState();return e.ids.map(i=>e.entities[i])}reset(){this.setEntitiesState(this.initialState),this.markAsDirtyAfterReset()}addOne(e){this.addEntityOne(e)}addMany(e){this.addEntitiesMany(e)}setOne(e){this.setEntityOne(e)}setMany(e){this.setEntitiesMany(e)}setAll(e){this.setEntitiesAll(e)}updateOne(e){this.updateEntitiesMany([e])}updateMany(e){this.updateEntitiesMany(e)}upsertOne(e){this.upsertEntitiesMany([e])}upsertMany(e){this.upsertEntitiesMany(e)}removeOne(e){this.removeEntitiesMany([e])}removeMany(e){this.removeEntitiesMany(e)}removeByEntity(e){const i=this.selectId(e);this.removeEntitiesMany([i])}removeByEntities(e){const i=[];for(const r of e){const s=this.selectId(r);i.push(s)}this.removeEntitiesMany(i)}removeAll(){this.setEntitiesState(this.initialState)}sort(e){this.comparator=null!=e?e:this.comparator,ho(this.comparator)?console.warn("You must set the compare function before sorting."):this.setEntitiesState(this.getState())}addEntityOne(e){const i=this.getState(),r=this.selectIdValue(e);r in i.entities||this.setEntitiesState(Object.assign(Object.assign({},i),{ids:[...i.ids,r],entities:Object.assign(Object.assign({},i.entities),{[r]:e})}))}addEntitiesMany(e){const i=this.getState(),r={},s=[];for(const o of e){const a=this.selectIdValue(o);a in i.entities||a in r||(s.push(a),r[a]=o)}s.length&&this.setEntitiesState(Object.assign(Object.assign({},i),{ids:[...i.ids,...s],entities:Object.assign(Object.assign({},i.entities),r)}))}setEntitiesAll(e){const i=this.getState(),r={},s=[];for(const o of e){const a=this.selectIdValue(o);a in r||(s.push(a),r[a]=o)}this.setEntitiesState(Object.assign(Object.assign({},i),{ids:s,entities:r}))}setEntityOne(e){const i=this.getState(),r=this.selectIdValue(e);this.setEntitiesState(Object.assign(Object.assign({},i),r in i.entities?{entities:Object.assign(Object.assign({},i.entities),{[r]:e})}:{ids:[...i.ids,r],entities:Object.assign(Object.assign({},i.entities),{[r]:e})}))}setEntitiesMany(e){for(const i of e)this.setEntityOne(i)}updateEntitiesMany(e){const i=this.getState(),r=e.filter(a=>a.id in i.entities);if(0===r.length)return;const s=this.generateKeyMap(i),o=Object.assign({},i.entities);for(const a of r){const l=this.updateOrigin(o,a),c=this.selectIdValue(l);c!==a.id&&(delete s[a.id],delete o[a.id]),s[a.id]=c,o[c]=l}this.setEntitiesState(Object.assign(Object.assign({},i),{ids:i.ids.map(a=>{var l;return null!==(l=s[a])&&void 0!==l?l:a}),entities:o}))}upsertEntitiesMany(e){const i=this.getState(),r=[],s=[];for(const o of e){const a=this.selectIdValue(o);a in i.entities?r.push({id:a,changes:o}):s.push(o)}this.updateMany(r),this.addMany(s)}removeEntitiesMany(e){const i=this.getState(),r=this.generateKeyMap(i),s=Object.assign({},i.entities);for(const o of e)o in s&&(delete r[o],delete s[o]);this.setEntitiesState(Object.assign(Object.assign({},i),{ids:i.ids.filter(o=>o in r),entities:s}))}setEntitiesState(e){const i=this.sortKeysByComparator(e.ids,e.entities);this.ctx.setState(Object.assign(Object.assign({},e),{ids:i,entities:e.entities}))}sortKeysByComparator(e,i){if(ho(this.comparator))return e;const r=e.slice(),s=this.comparator;return"function"==typeof s?r.sort((o,a)=>s(i[o],i[a])):this.sortByComparatorOptions(r,s,i)}sortByComparatorOptions(e,i,r){switch(null==i?void 0:i.sortByOrder){case c0.ASC:return e.sort((s,o)=>function(n,t,e){return(null==t?void 0:t[n])>(null==e?void 0:e[n])?1:(null==t?void 0:t[n])<(null==e?void 0:e[n])?-1:0}(null==i?void 0:i.sortBy,r[s],r[o]));case c0.DESC:return e.sort((s,o)=>function(n,t,e){return(null==t?void 0:t[n])>(null==e?void 0:e[n])?-1:(null==t?void 0:t[n])<(null==e?void 0:e[n])?1:0}(null==i?void 0:i.sortBy,r[s],r[o]));default:return Oo()&&console.warn(`Invalid --\x3e { sortByOrder: "${null==i?void 0:i.sortByOrder}" } not supported!`),e}}generateKeyMap(e){return e.ids.reduce((i,r)=>(i[r]=r,i),{})}updateOrigin(e,i){return Object.assign(Object.assign({},e[i.id]),i.changes)}selectIdValue(e){const i=this.selectId(e);return ho(i)&&Oo()&&console.warn(`The entity passed to the 'selectId' implementation returned ${i}.`,"You should probably provide your own 'selectId' implementation.","The entity that was passed:",e,"The current `selectId` implementation: (entity: V): K => entity.id"),i}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),Ve([Pi(),Ke("design:type",Object),Ke("design:paramtypes",[])],n.prototype,"snapshot",null),Ve([Pi(),Ke("design:type",Array),Ke("design:paramtypes",[])],n.prototype,"ids",null),Ve([Pi(),Ke("design:type",Object),Ke("design:paramtypes",[])],n.prototype,"entities",null),Ve([Pi(),Ke("design:type",Array),Ke("design:paramtypes",[])],n.prototype,"entitiesArray",null),Ve([Pi(),Ke("design:type",ue),Ke("design:paramtypes",[])],n.prototype,"ids$",null),Ve([Pi(),Ke("design:type",ue),Ke("design:paramtypes",[])],n.prototype,"entities$",null),Ve([Pi(),Ke("design:type",ue),Ke("design:paramtypes",[])],n.prototype,"entitiesArray$",null),Ve([an(),Ke("design:type",Function),Ke("design:paramtypes",[]),Ke("design:returntype",void 0)],n.prototype,"reset",null),Ve([an(),xs(0,Is("entity")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"addOne",null),Ve([an(),xs(0,Is("entities")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"addMany",null),Ve([an(),xs(0,Is("entity")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"setOne",null),Ve([an(),xs(0,Is("entities")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"setMany",null),Ve([an(),xs(0,Is("entities")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"setAll",null),Ve([an(),xs(0,Is("update")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"updateOne",null),Ve([an(),xs(0,Is("updates")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"updateMany",null),Ve([an(),xs(0,Is("entity")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"upsertOne",null),Ve([an(),xs(0,Is("entities")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"upsertMany",null),Ve([an(),xs(0,Is("id")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"removeOne",null),Ve([an(),xs(0,Is("ids")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"removeMany",null),Ve([an(),xs(0,Is("entity")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"removeByEntity",null),Ve([an(),xs(0,Is("entities")),Ke("design:type",Function),Ke("design:paramtypes",[Array]),Ke("design:returntype",void 0)],n.prototype,"removeByEntities",null),Ve([an(),Ke("design:type",Function),Ke("design:paramtypes",[]),Ke("design:returntype",void 0)],n.prototype,"removeAll",null),Ve([an(),xs(0,Is("comparator")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"sort",null),n})(),bp=(()=>{class n extends oF{get snapshot(){return rF(this.getState())}get ctx(){return sF(this.context)}getState(){return this.ctx.getState()}dispatch(e){return this.ctx.dispatch(e)}patchState(e){this.ctx.patchState(e)}setState(e){this.ctx.setState(e)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),Ve([Pi(),Ke("design:type",Object),Ke("design:paramtypes",[])],n.prototype,"snapshot",null),Ve([an(),xs(0,Is("patchValue")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"patchState",null),Ve([an(),xs(0,Is("stateValue")),Ke("design:type",Function),Ke("design:paramtypes",[Object]),Ke("design:returntype",void 0)],n.prototype,"setState",null),Ve([an(),Ke("design:type",Function),Ke("design:paramtypes",[]),Ke("design:returntype",void 0)],n.prototype,"reset",null),n})();function aF(){return $n(n=>null!=n)}const y0=new Ee("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),e7=new Ee("ngx-window",{providedIn:"root",factory:()=>function(n){return Rf(n)?window:null}(Vc(vl))}),jPe=new Ee("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(Vc(e7))}),OF=new Ee("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,t){return n?n.gtag=n.gtag||function(){t.push(arguments)}:null}(Vc(e7),Vc(jPe))});let fo=(()=>{class n{constructor(e,i,r){this.settings=e,this._document=i,this._gtag=r}get document(){return this._document}throw(e){(this.settings.enableTracing||Oo())&&console&&console.error&&console.error(e)}toKeyValue(e){return e.size>0?Array.from(e).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...e){try{this._gtag(...e.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(e,i,r,s,o){try{const a=new Map;i&&a.set("event_category",i),r&&a.set("event_label",r),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",e,l):this.gtag("event",e)}catch(a){this.throw(a)}}pageView(e,i,r,s){try{const o=new Map([["page_path",e]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(e,i,r,s,o){try{const a=new Map([["screen_name",e],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...e){try{this._gtag("set",...e)}catch(i){this.throw(i)}}exception(e,i){try{const r=new Map;e&&r.set("description",e),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(e){return new(e||n)(I(y0),I(lt),I(OF))},n.\u0275prov=pe({factory:function(){return new n(I(y0),I(lt),I(OF))},token:n,providedIn:"root"}),n})();const HPe={provide:Yg,multi:!0,useFactory:function(n,t,e){return()=>Sl(this,void 0,void 0,function*(){var i;if(!n.trackingCode)return void(Oo()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!t)return void(Oo()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));e||Oo()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(i=null==n?void 0:n.initCommands)&&void 0!==i?i:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)t(o.command,...o.values);const r=e.createElement("script");r.async=!0,r.src=n.uri,n.nonce&&r.setAttribute("nonce",n.nonce),e.getElementsByTagName("head")[0].appendChild(r)})},deps:[y0,OF,lt]};new Ee("ngx-google-analytics-routing-settings",{factory:()=>({})});let i7=(()=>{class n{static forRoot(e,i=[],r,s,o){return{ngModule:n,providers:[{provide:y0,useValue:{trackingCode:e,initCommands:i,uri:r,enableTracing:s,nonce:o}},HPe]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[]]}),n})();const qPe=["bodyCanvas"];let YPe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new Le,this.nodeDrag=new Le,this.nodeClick=new Le,this.nodeHoverStart=new Le,this.nodeHoverStop=new Le,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(e){var i;this._scene=e,null===(i=this.bodyUI)||void 0===i||i.setScene(e)}get rotation(){return this._rotation}set rotation(e){var i;this._rotation=e,null===(i=this.bodyUI)||void 0===i||i.setRotation(e)}get rotationX(){return this._rotationX}set rotationX(e){var i;this._rotationX=e,null===(i=this.bodyUI)||void 0===i||i.setRotationX(e)}get zoom(){return this._zoom}set zoom(e){var i;this._zoom=e,null===(i=this.bodyUI)||void 0===i||i.setZoom(e)}get target(){return this._target}set target(e){var i;this._target=e,null===(i=this.bodyUI)||void 0===i||i.setTarget(e)}get bounds(){return this._bounds}set bounds(e){this._bounds=e,this.zoomToBounds(e)}get camera(){return this._camera}set camera(e){this._camera=e}get interactive(){return this._interactive}set interactive(e){this._interactive=e,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(e,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/e.x),Math.log2((s-i.y)/o/e.y));this.zoom=a}}setupBodyUI(){var e;return Sl(this,void 0,void 0,function*(){const i=this.bodyCanvas.nativeElement,r=new aAe({id:"body-ui",canvas:i,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),this.bodyUI=r,window.bodyUI=r,(null===(e=this.scene)||void 0===e?void 0:e.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))]})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ge({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(e,i){if(1&e&&fi(qPe,5,ot),2&e){let r;Ft(r=Nt())&&(i.bodyCanvas=r.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(e,i){1&e&&st(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),XPe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn]]}),n})();function eRe(n,t){if(1&n&&(N(0,"li",4),Pe(1),En(2,"json"),L()),2&n){const e=t.$implicit;X(1),RC(" ",e[0],": ",xn(2,2,e[1])," ")}}function tRe(n,t){if(1&n&&(N(0,"div",1),N(1,"div"),Pe(2),L(),N(3,"ul",2),Pt(4,eRe,3,4,"li",3),L(),L()),2&n){const e=t.$implicit;X(2),Fi(e[0]),X(2),le("ngForOf",e[1])}}let nRe=(()=>{class n{constructor(e,i){this.clsName="ccf-store-debug",this.root={},this.subscriptions=new Re;const r=e.subscribe(s=>{this.root=s,i.markForCheck()});this.subscriptions.add(r)}get data(){return Object.entries(this.root).map(([s,o])=>[s,Object.entries(o)]).filter(([s,o])=>o.length>0)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(E(Ah),E(Qn))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-store-debug"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:1,vars:1,consts:[["class","state",4,"ngFor","ngForOf"],[1,"state"],[1,"kvlist"],["class","kvpair",4,"ngFor","ngForOf"],[1,"kvpair"]],template:function(e,i){1&e&&Pt(0,tRe,5,2,"div",0),2&e&&le("ngForOf",i.data)},directives:[rc],pipes:[WB],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})(),iRe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn]]}),n})();new Ee("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const lRe=["carouselContainer"],cRe=["itemlist"],uRe=["itemcontainer"];function dRe(n,t){if(1&n&&(N(0,"div",14),Pe(1),L()),2&n){const e=Dt().$implicit,i=Dt();X(1),Fi(i.occurenceData[e.id]||0)}}function hRe(n,t){if(1&n){const e=Gr();N(0,"div",9),Ce("click",function(){const s=Zn(e).$implicit;return Dt().selectOrgan(s)}),st(1,"mat-icon",10),N(2,"div",11),N(3,"div",12),Pe(4),L(),Pt(5,dRe,2,1,"div",13),L(),L()}if(2&n){const e=t.$implicit,i=Dt();ht("disabled",e.disabled)("selected",i.isSelected(e)),X(1),iy("svgIcon",e.src),X(3),Fi(e.name),X(1),le("ngIf",void 0!==e.numResults)}}const b0=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:large_intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:brain",organ:"Brain",name:"Allen Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lymph_nodes",organ:"Lymph Node",name:"Lymph Node, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph_nodes",organ:"Lymph Node",name:"Lymph Node, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:bone_marrow",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:vasculature",organ:"Vasculature",name:"Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].filter(n=>!0!==n.disabled);let s7=(()=>{class n{constructor(){this.clsName="ccf-organ-selector",this.multiselect=!1,this.displayErrors=!1,this.organList=b0,this.selectedOrgans=[],this.organsChanged=new Le,this.onLeft=!0,this.onRight=!1,this.step=72}set occurenceData(e){this._occurenceData=e}get occurenceData(){return this._occurenceData}ngAfterViewInit(){const{carouselContainer:e}=this;this.sensor=new _q.ResizeSensor(e.nativeElement,()=>{this.set()})}ngOnChanges(e){"organList"in e&&this.set()}ngOnDestroy(){this.sensor.detach()}get error(){return!(!this.displayErrors||0===this.selectedOrgans.length)}shift(e){const{itemList:i}=this;let r=parseInt(i.nativeElement.style.left,10)||0;this.onLeft&&"left"===e||this.onRight&&"right"===e||(r="right"===e?r-this.step:r+this.step,i.nativeElement.style.left=r+"px",this.setLeftRight(r))}scroll(e){this.timeoutHandler=setInterval(()=>{this.shift(e)},200)}stopScroll(){this.timeoutHandler&&(clearInterval(this.timeoutHandler),this.timeoutHandler=void 0)}selectOrgan(e){this.selectedOrgans=this.multiselect?this.selectedOrgans.includes(e)?this.selectedOrgans.filter(i=>e!==i):this.selectedOrgans.concat([e]):[e],this.organsChanged.emit(this.selectedOrgans)}isSelected(e){return!!this.selectedOrgans.includes(e)}set(){const{itemList:e,itemContainer:i,carouselContainer:r}=this,s=parseInt(e.nativeElement.style.left,10)||0;if(e.nativeElement.offsetWidth>=this.organList.length*this.step)e.nativeElement.style.left="0px",this.onLeft=!0,this.onRight=!0;else{this.setLeftRight(s);const o=this.step*Math.floor(r.nativeElement.offsetWidth/this.step)-64;i.nativeElement.style.width=`${o}px`}}setWidth(){const{itemContainer:e,carouselContainer:i}=this,r=this.step*Math.floor(i.nativeElement.offsetWidth/this.step)-64;e.nativeElement.style.width=`${r}px`}setLeftRight(e){const{itemContainer:i}=this;this.onLeft=0===e,this.onRight=e<=i.nativeElement.offsetWidth-this.organList.length*this.step}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ge({type:n,selectors:[["ccf-organ-selector"]],viewQuery:function(e,i){if(1&e&&(fi(lRe,7),fi(cRe,7),fi(uRe,7)),2&e){let r;Ft(r=Nt())&&(i.carouselContainer=r.first),Ft(r=Nt())&&(i.itemList=r.first),Ft(r=Nt())&&(i.itemContainer=r.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{multiselect:"multiselect",displayErrors:"displayErrors",organList:"organList",selectedOrgans:"selectedOrgans",occurenceData:"occurenceData"},outputs:{organsChanged:"organsChanged"},features:[oi],decls:11,vars:8,consts:[["matTooltip","Select the organ your tissue block is from.",1,"container",3,"matTooltipDisabled"],["carouselContainer",""],[1,"carousel-left-icon",3,"touchstart","touchend","click","mousedown","mouseup"],[1,"carousel-item-container"],["itemcontainer",""],[1,"carousel-item-list"],["itemlist",""],["class","carousel-item",3,"disabled","selected","click",4,"ngFor","ngForOf"],[1,"carousel-right-icon",3,"touchstart","touchend","click","mousedown","mouseup"],[1,"carousel-item",3,"click"],[1,"carousel-icon",3,"svgIcon"],[1,"carousel-text-container"],[1,"carousel-text"],["class","num-results",4,"ngIf"],[1,"num-results"]],template:function(e,i){1&e&&(N(0,"div",0,1),N(2,"mat-icon",2),Ce("touchstart",function(){return i.scroll("left")})("touchend",function(){return i.stopScroll()})("click",function(){return i.shift("left")})("mousedown",function(){return i.scroll("left")})("mouseup",function(){return i.stopScroll()}),Pe(3,"chevron_left"),L(),N(4,"div",3,4),N(6,"div",5,6),Pt(8,hRe,6,7,"div",7),L(),L(),N(9,"mat-icon",8),Ce("touchstart",function(){return i.scroll("right")})("touchend",function(){return i.stopScroll()})("click",function(){return i.shift("right")})("mousedown",function(){return i.scroll("right")})("mouseup",function(){return i.stopScroll()}),Pe(10,"chevron_right"),L(),L()),2&e&&(ht("error",i.error),le("matTooltipDisabled",i.multiselect),X(2),ht("disabled",i.onLeft),X(6),le("ngForOf",i.organList),X(1),ht("disabled",i.onRight))},directives:[bc,Us,rc,js],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:space-between}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-left-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-right-icon[_ngcontent-%COMP%]{font-size:2rem;transform:scaleY(1.2);height:2rem;width:2rem;cursor:pointer}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-left-icon.disabled[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-right-icon.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-left-icon[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-right-icon[_ngcontent-%COMP%]{text-align:left}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]{overflow:hidden;height:100%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]{position:relative;left:0rem;display:flex;transition:all .2s linear;height:100%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;cursor:pointer;padding:.25rem .5rem;height:100%;transition:.6s}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-icon[_ngcontent-%COMP%]{text-align:center;width:3.5rem;height:2rem}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-text-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:4rem;justify-content:center;text-align:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-text-container[_ngcontent-%COMP%]   .carousel-text[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:.625rem;max-width:3.5rem;line-height:.8rem;min-height:1.6rem}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   .carousel-text-container[_ngcontent-%COMP%]   .num-results[_ngcontent-%COMP%]{font-size:.6875rem;line-height:1.5}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .carousel-item-container[_ngcontent-%COMP%]   .carousel-item-list[_ngcontent-%COMP%]   .carousel-item.disabled[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;height:1rem}[_nghost-%COMP%]   .error-message.hidden[_ngcontent-%COMP%]{opacity:0}"]}),n})(),o7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr,wc]]}),n})(),fRe=(()=>{class n{constructor(){this.clsName="ccf-opacity-slider",this.opacity=20,this.visible=!0,this.opacityChange=new Le,this.visibilityToggle=new Le,this.opacityReset=new Le}ngOnInit(){this.prevOpacity=this.visible?0:20}reset(){this.prevOpacity=20}changeOpacity(e){this.opacity=parseInt(e,10),this.opacityChange.emit(this.opacity)}toggleVisibility(){const e=this.opacity;this.opacity=this.prevOpacity,this.prevOpacity=e,this.visibilityToggle.emit(),this.opacityChange.emit(this.opacity)}resetOpacity(){this.prevOpacity=0,this.opacityReset.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ge({type:n,selectors:[["ccf-opacity-slider"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{opacity:"opacity",visible:"visible"},outputs:{opacityChange:"opacityChange",visibilityToggle:"visibilityToggle",opacityReset:"opacityReset"},decls:10,vars:17,consts:[[1,"slider-box"],[1,"slider-and-label"],[1,"slider",3,"step","min","max","value","input"],[1,"opacity-value"],[1,"icons"],["matRipple","","svgIcon","app:visibility_off",1,"visibility","icon","invisible",3,"matRippleCentered","matRippleUnbounded","click"],["matRipple","","svgIcon","app:visibility_on",1,"visibility","icon","visible",3,"matRippleCentered","matRippleUnbounded","click"],["matRipple","",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),N(2,"mat-slider",2),Ce("input",function(s){return i.changeOpacity(s.value)}),L(),N(3,"span",3),Pe(4),L(),L(),N(5,"div",4),N(6,"mat-icon",5),Ce("click",function(){return i.toggleVisibility()}),L(),N(7,"mat-icon",6),Ce("click",function(){return i.toggleVisibility()}),L(),N(8,"mat-icon",7),Ce("click",function(){return i.resetOpacity()}),Pe(9,"refresh"),L(),L(),L()),2&e&&(X(2),ht("disabled",!i.visible),le("step",1)("min",0)("max",100)("value",i.opacity),X(2),Vs("",i.opacity,"%"),X(2),ht("hidden",i.visible),le("matRippleCentered",!0)("matRippleUnbounded",!0),X(1),ht("hidden",!i.visible),le("matRippleCentered",!0)("matRippleUnbounded",!0),X(1),le("matRippleCentered",!0)("matRippleUnbounded",!0))},directives:[zk,Us,la],styles:["[_nghost-%COMP%]{height:2.25rem;display:flex;align-items:center;justify-content:space-between;border-radius:.1875rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]{width:60%;display:flex;align-items:center}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .slider.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-and-label[_ngcontent-%COMP%]   .opacity-value[_ngcontent-%COMP%]{width:1.5rem;margin-left:.5rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;cursor:pointer!important}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{margin-right:1rem;padding:.25rem;cursor:pointer;transition:.6s;border-radius:.25rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .visibility[_ngcontent-%COMP%]{transition:.6s;cursor:pointer;padding:.25rem;border-radius:.25rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .visibility.hidden[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),n})(),a7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr,Cq,cc]]}),n})();function pRe(n,t){if(1&n&&(N(0,"div",15),st(1,"youtube-player",16),L()),2&n){const e=Dt(3);X(1),iy("videoId",e.videoID)}}function gRe(n,t){if(1&n&&(N(0,"mat-expansion-panel",10),N(1,"mat-expansion-panel-header"),N(2,"h2",11),Pe(3),L(),L(),N(4,"div",12),st(5,"markdown",13),Pt(6,pRe,2,1,"div",14),L(),L()),2&n){const e=Dt(),i=e.index,r=e.$implicit;le("expanded",0===i),X(3),Fi(r.title),X(2),ht("first",0===i),le("data",r.content),X(1),le("ngIf",0===i)}}function mRe(n,t){if(1&n&&(N(0,"div",8),Pt(1,gRe,7,6,"mat-expansion-panel",9),L()),2&n){const e=t.$implicit;X(1),le("ngIf",e)}}let _Re=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.body.appendChild(e)}close(){var e;null===(e=document.getElementsByClassName("modal-animated")[0])||void 0===e||e.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return n.\u0275fac=function(e){return new(e||n)(E(n_),E(Gk))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-info-dialog"]],decls:10,vars:2,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),N(2,"div",2),N(3,"mat-icon",3),Ce("click",function(){return i.close()}),Pe(4,"clear"),L(),L(),N(5,"div",4),N(6,"h2",5),Pe(7),L(),N(8,"mat-dialog-content",6),Pt(9,mRe,2,1,"div",7),L(),L(),L(),L()),2&e&&(X(7),Fi(i.infoTitle),X(2),le("ngForOf",i.documentationContents))},directives:[Us,Sq,Mq,rc,js,cM,uM,kq,Bq],styles:[".mat-dialog-container{padding:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:3rem;text-align:left}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;cursor:pointer}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:2.25rem;text-align:center}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:3rem;width:50%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.rui-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%;max-height:17.5rem}"]}),n})(),vRe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Wk,Nr,Xk,VDe,bDe.forRoot({})]]}),n})(),bRe=(()=>{class n{constructor(e){this.http=e,this.markdownContent=new hr([])}readMarkdown(){this.http.get("assets/docs/README.md",{responseType:"text"}).subscribe(e=>{const i=this.parseMarkdown(e);this.markdownContent.next(i)})}parseMarkdown(e){const i=[],r=e.split("# ");for(const s of r)if(s.length){const o=s.split("\n\n");i.push({title:o[0],content:o.splice(1).join("\n\n")})}return i}}return n.\u0275fac=function(e){return new(e||n)(I(pm))},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wRe=(()=>{class n{constructor(e,i){this.dialog=e,this.infoButtonService=i,this.infoTitle="",this.subscriptions=new Re,this.subscriptions.add(i.markdownContent.subscribe(r=>{r.length&&this.launchInfoDialog(r)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}launchInfoDialog(e){this.dialog.open(_Re,{autoFocus:!1,panelClass:"modal-animated",width:"60rem",data:{title:this.infoTitle,content:e,videoID:this.videoID}})}onDialogButtonClick(){this.infoButtonService.readMarkdown()}}return n.\u0275fac=function(e){return new(e||n)(E(i_),E(bRe))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-info-button"]],inputs:{infoTitle:"infoTitle",videoID:"videoID"},decls:3,vars:0,consts:[[1,"info-button-wrapper"],["aria-hidden","false","aria-label","Page information",1,"ccf-info-button",3,"click"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"mat-icon",1),Ce("click",function(){return i.onDialogButtonClick()}),Pe(2," info "),L(),L())},directives:[Us],styles:[".info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.65rem;transition:.6s}.info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.5rem;vertical-align:sub}"]}),n})(),CRe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,vRe,Nr,wz]]}),n})(),ERe=(()=>{class n{constructor(e){this.el=e}onInputChange(e){const i=this.el.nativeElement.value;this.el.nativeElement.value=i.replace(/[^0-9]*/g,""),i!==this.el.nativeElement.value&&e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(E(ot))},n.\u0275dir=_e({type:n,selectors:[["input","ccfNumbersOnly",""]],hostBindings:function(e,i){1&e&&Ce("input",function(s){return i.onInputChange(s)})}}),n})(),SRe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})(),l7=(()=>{class n{get obj(){const e=this.findGlobalObject();return Object.defineProperties(this,{obj:{configurable:!1,writable:!1,value:e}}),e}has(e){const{obj:i}=this;return null!=i&&e in i}get(e,i){var r;const{obj:s}=this;return null!==(r=s&&s[e])&&void 0!==r?r:i}set(e,i){const{obj:r}=this;r&&(r[e]=i)}remove(e){const{obj:i}=this;i&&delete i[e]}findGlobalObject(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;try{return new Function("return this;")()}catch(e){}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rh=(()=>{let n=class extends bp{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(aF(),nd(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe(pr(...e),Zc(),nd(1))}getOption(...e){const i=this.getPathKey(e);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(pr(...e),Zc(),nd(1));return this.optionCache.set(i,r),r}getPathKey(e){return`${e.length}:${e.join(".")}`}};return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),Ve([Pi()],n.prototype,"config$",null),n=Ve([yd(),vd({name:"globalConfig",defaults:null})],n),n})();const c7="ALLOW_TELEMETRY",u7=d7();function d7(){const n=localStorage.getItem(c7);return null===n?void 0:"true"===n.toLowerCase()}let IF=(()=>{let n=class extends bp{setAllowTelemetry(e){const i=d7();localStorage.setItem(c7,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==i||!1===e)&&location.reload()}};return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275prov=pe({token:n,factory:n.\u0275fac}),Ve([an()],n.prototype,"setAllowTelemetry",null),n=Ve([yd(),vd({name:"tracking",defaults:{allowTelemetry:u7}})],n),n})();let ARe=(()=>{class n{constructor(e,i){e&&function(n,t){eu(n,"mousemove").pipe(function(n,t=kf,e=mq){return i=>i.lift(new fxe(n,t,e.leading,e.trailing))}(1e3),re(r=>{const{clientWidth:s,clientHeight:o}=n,{clientX:a,clientY:l}=r;return[a,l,s,o].join("_")})).subscribe(r=>t.event("webpage","mousemove",r))}(e.body,i)}}return n.\u0275fac=function(e){return new(e||n)(I(lt),I(fo))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();function TRe(n,t){if(1&n){const e=Gr();N(0,"button",1),Ce("click",function(){return Zn(e),Dt().submit(!0)}),Pe(1),L()}if(2&n){const e=Dt();X(1),Vs(" ",void 0===e.allowTelemetry?"I understand":"Opt in","\n")}}function xRe(n,t){if(1&n){const e=Gr();N(0,"button",1),Ce("click",function(){return Zn(e),Dt().submit(!1)}),Pe(1,"Opt out"),L()}}let DRe=(()=>{class n{constructor(e,i,r){this.tracking=i,this.data=r,this.clsName="ccf-tracking-popup",this.container=e.nativeElement}get allowTelemetry(){return this.tracking.snapshot.allowTelemetry}dismiss(){this.data.preClose()}submit(e){this.tracking.setAllowTelemetry(e),this.dismiss()}showButton(e){const{allowTelemetry:i}=this;return void 0===i||("opt-in"===e?!i:i)}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(IF),E(oI))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-tracking-popup"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:4,vars:2,consts:[["mat-button","","color","basic",3,"click",4,"ngIf"],["mat-button","","color","basic",3,"click"]],template:function(e,i){1&e&&(N(0,"p"),Pe(1,"We log usage to improve this service."),L(),Pt(2,TRe,2,1,"button",0),Pt(3,xRe,2,0,"button",0)),2&e&&(X(2),le("ngIf",i.showButton("opt-in")),X(1),le("ngIf",i.showButton("opt-out")))},directives:[js,Zf],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-width:400px;color:#ffffffb3;background:#323232;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;z-index:9999}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:24px}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin:1rem;min-width:6rem;background-color:#007cbe;display:flex;justify-content:center}"],changeDetection:0}),n})(),ORe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Qf]]}),n})();var IRe=xe(815);const Mp_googleAnalyticsToken=(localStorage.getItem("HUBMAP_TOKEN"),"G-ERNVZ1Q4KE");let Cc=class extends bp{constructor(t,e){super(),this.globals=t,this.globalConfig=e}ngxsOnInit(){super.ngxsOnInit(),this.getSourceDB().subscribe(t=>{this.setState(t)})}getSourceDB(){return this.globalConfig.getOption("baseHref").pipe(re(t=>(null!=t?t:"")+"assets/reference-organ-data.json"),Fr(t=>gi(fetch(t)).pipe(Fr(e=>e.json()),ka(()=>ac))))}getReferenceOrganIri(t,e,i){const r=this.snapshot;"KIDNEY"!==t.toUpperCase()&&"LYMPH NODE"!==t.toUpperCase()&&(i=""),"LARGE INTESTINE"===t.toUpperCase()&&(t="Colon");const s=[t,e,i].join("|").toUpperCase(),o=Object.keys(r.organIRILookup).find(a=>a.toUpperCase().endsWith(s));return o?r.organIRILookup[o]:void 0}getOrganData(t){var e,i,r;const o=this.snapshot.organSpatialEntities[t];if(!o)return;const a=null!==(e=o.label)&&void 0!==e?e:"",l=b0.find(c=>a.endsWith(c.organ));return l?{organ:l,sex:null===(i=o.sex)||void 0===i?void 0:i.toLowerCase(),side:null===(r=o.side)||void 0===r?void 0:r.toLowerCase()}:void 0}};Cc.\u0275fac=function(t){return new(t||Cc)(I(l7),I(Rh))},Cc.\u0275prov=pe({token:Cc,factory:Cc.\u0275fac}),Cc=Ve([yd(),vd({name:"reference",defaults:{organIRILookup:{},organSpatialEntities:{},anatomicalStructures:{},extractionSets:{},sceneNodeLookup:{},simpleSceneNodeLookup:{}}})],Cc);const RF=b0;let wi=class extends bp{constructor(t,e){super(),this.injector=t,this.globalConfig=e,this.id$=this.state$.pipe(pr("id")),this.blockSize$=this.state$.pipe(pr("blockSize")),this.rotation$=this.state$.pipe(pr("rotation")),this.position$=this.state$.pipe(pr("position")),this.slicesConfig$=this.state$.pipe(pr("slicesConfig")),this.viewType$=this.state$.pipe(pr("viewType")),this.viewSide$=this.state$.pipe(pr("viewSide")),this.organ$=this.state$.pipe(pr("organ")),this.organIri$=this.state$.pipe(pr("organIri")),this.organDimensions$=this.state$.pipe(pr("organDimensions")),this.sex$=this.state$.pipe(pr("sex")),this.side$=this.state$.pipe(pr("side")),this.showPrevious$=this.state$.pipe(pr("showPrevious")),this.extractionSites$=this.state$.pipe(pr("extractionSites")),this.anatomicalStructures$=this.state$.pipe(pr("anatomicalStructures")),this.extractionSets$=this.state$.pipe(pr("extractionSets"))}ngxsOnInit(){super.ngxsOnInit(),this.referenceData=this.injector.get(Cc),this.globalConfig.getOption("organ").pipe(aF(),Fr(t=>{var e,i;const r=t.name.toLowerCase(),s=t.side;let a=this.idMatches(t.ontologyId,s);return a||(a=this.nameMatches(r,s)),a?(this.ctx.patchState({organ:a,sex:null===(e=t.sex)||void 0===e?void 0:e.toLowerCase(),side:null===(i=null==a?void 0:a.side)||void 0===i?void 0:i.toLowerCase()}),this.referenceData.state$.pipe(tm(100),Mi(1),function(n,t=kf){const i=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-t.now():Math.abs(n);return r=>r.lift(new jTe(i,t))}(200),Ni(()=>this.onOrganIriChange()))):ac})).subscribe()}idMatches(t,e){return b0.find(i=>!(!t||i.id!==t||i.side&&i.side!==e))}nameMatches(t,e){return b0.find(i=>i.side?i.organ.toLowerCase()===t&&i.side===e:i.organ.toLowerCase()===t)}setBlockSize(t){this.ctx.patchState({blockSize:t})}setRotation(t){this.ctx.patchState({rotation:t})}setPosition(t){this.ctx.patchState({position:t})}setSlicesConfig(t){this.ctx.patchState({slicesConfig:t})}setViewType(t){this.ctx.patchState({viewType:t})}setViewSide(t){this.ctx.patchState({viewSide:t})}get defaultPosition(){const t=this.snapshot.organDimensions;return{x:t.x+2*this.snapshot.blockSize.x,y:t.y/2,z:t.z/2}}setOrgan(t){this.ctx.patchState({organ:t}),t.side&&this.ctx.patchState({side:t.side}),this.onOrganIriChange()}setSex(t){this.ctx.patchState({sex:t}),this.onOrganIriChange()}setSide(t){this.ctx.patchState({side:t}),this.onOrganIriChange()}setShowPrevious(t){this.ctx.patchState({showPrevious:t})}setExtractionSites(t){this.ctx.patchState({extractionSites:t})}setAnatomicalStructures(t){this.ctx.patchState({anatomicalStructures:t})}setExtractionSets(t){this.ctx.patchState({extractionSets:t})}toggleRegistrationBlocksVisibility(t,e){if(this.setShowPrevious(t),t){const i=e.map(r=>{var s;return Object.assign(Object.assign({},r),{opacity:Math.min(20,null!==(s=r.opacity)&&void 0!==s?s:20)})});this.setAnatomicalStructures(i)}else this.setAnatomicalStructures(e)}onOrganIriChange(){var t,e,i;const r=this.referenceData.getReferenceOrganIri((null===(t=this.snapshot.organ)||void 0===t?void 0:t.organ)||"",this.snapshot.sex,this.snapshot.side),s={x:100,y:100,z:100};if(r){const o=this.referenceData.snapshot,a={};for(const u of o.anatomicalStructures[r]||[]){const h=null!==(e=u.representation_of)&&void 0!==e?e:u["@id"];a[h]||(a[h]={id:null!==(i=u.representation_of)&&void 0!==i?i:u["@id"],name:u.label,visible:!0,opacity:20,tooltip:u.comment})}this.ctx.patchState({anatomicalStructures:Object.values(a)});const l=(o.extractionSets[r]||[]).map(u=>({name:u.label,sites:(0,IRe.sortBy)(u.extractionSites.map(h=>({id:h["@id"],name:h.label,visible:!1,opacity:0,tooltip:h.comment})),"name")}));this.ctx.patchState({extractionSets:l}),this.ctx.patchState({extractionSites:l.length>0?l[0].sites:[]});const c=o.organSpatialEntities[r];s.x=c.x_dimension,s.y=c.y_dimension,s.z=c.z_dimension}this.ctx.patchState({organIri:r,organDimensions:s}),this.ctx.patchState({position:this.defaultPosition})}};function kF(n){return"function"==typeof n}function h7(n){return void 0===n}function RRe(n,t,e){return function(r){let s=!!n;return function(n){return"function"==typeof n}(n)&&(s=n(r)),function(n,t){return kF(n)?n(t):h7(n)?t:n}(s?t:e,r)}}function kRe(n,t){return function(i){if(function(n){return null===n||h7(n)}(n)&&i)return i;if(!Array.isArray(i))return[n];const r=i.slice();let s=0;return t>0&&(s=t),r.splice(s,0,n),r}}function w0(n){return function(e){let i=null;for(const r in n){const s=n[r],o=e[r],a=kF(s)?s(o):s;a!==o&&(i||(i=Object.assign({},e)),i[r]=a)}return i||e}}wi.\u0275fac=function(t){return new(t||wi)(I(Bt),I(Rh))},wi.\u0275prov=pe({token:wi,factory:wi.\u0275fac}),Ve([an()],wi.prototype,"setBlockSize",null),Ve([an()],wi.prototype,"setRotation",null),Ve([an()],wi.prototype,"setPosition",null),Ve([an()],wi.prototype,"setSlicesConfig",null),Ve([an()],wi.prototype,"setViewType",null),Ve([an()],wi.prototype,"setViewSide",null),Ve([Pi()],wi.prototype,"defaultPosition",null),Ve([an()],wi.prototype,"setOrgan",null),Ve([an()],wi.prototype,"setSex",null),Ve([an()],wi.prototype,"setSide",null),Ve([an()],wi.prototype,"setShowPrevious",null),Ve([an()],wi.prototype,"setExtractionSites",null),Ve([an()],wi.prototype,"setAnatomicalStructures",null),Ve([an()],wi.prototype,"setExtractionSets",null),wi=Ve([yd(),vd({name:"model",defaults:{id:"",label:"",organ:{src:"",name:""},organIri:"",organDimensions:{x:90,y:90,z:90},sex:"male",side:"left",blockSize:{x:10,y:10,z:10},rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},slicesConfig:{thickness:NaN,numSlices:NaN},viewType:"register",viewSide:"anterior",showPrevious:!1,extractionSites:[],anatomicalStructures:[],extractionSets:[]}})],wi);let fs=class extends bp{constructor(t){super(),this.globalConfig=t,this.user$=this.state$.pipe(pr("user")),this.registrationStarted$=this.state$.pipe(pr("registrationStarted")),this.useCancelRegistrationCallback$=this.state$.pipe(pr("useCancelRegistrationCallback")),this.registrationCallbackSet$=this.state$.pipe(pr("registrationCallbackSet"))}ngxsOnInit(){super.ngxsOnInit(),this.globalConfig.config$.pipe(Mi(1),Ni(t=>this.setState(w0({registrationCallbackSet:!!t.register,useCancelRegistrationCallback:!!t.cancelRegistration,user:RRe(!!t.user,t.user)})))).subscribe()}cancelRegistration(){const{globalConfig:{snapshot:{cancelRegistration:t}},snapshot:e}=this;e.useCancelRegistrationCallback&&(null==t||t())}setUseCancelRegistrationCallback(t){this.ctx.patchState({useCancelRegistrationCallback:t})}setUserName(t){this.ctx.setState(w0({user:w0(t)}))}registrationStarted(){this.ctx.setState(w0({registrationStarted:!0}))}};fs.\u0275fac=function(t){return new(t||fs)(I(Rh))},fs.\u0275prov=pe({token:fs,factory:fs.\u0275fac}),Ve([an()],fs.prototype,"setUseCancelRegistrationCallback",null),Ve([an()],fs.prototype,"setUserName",null),Ve([an()],fs.prototype,"registrationStarted",null),fs=Ve([yd(),vd({name:"page",defaults:{user:{firstName:"",lastName:""},registrationStarted:!1,useCancelRegistrationCallback:!1,registrationCallbackSet:!1}})],fs);const m7=new Ee("Default theme class");let NF=(()=>{class n{constructor(e){this.defaultTheme=this.theme=null!=e?e:""}static initialize(e){const{injector:i,location:r}=e;i.get(n).initialize(r,i)}getTheme(){return this.theme}setTheme(e){e!==this.theme&&(this.applyThemeClass(this.theme,"remove"),this.applyThemeClass(e),this.theme=e)}resetTheme(){this.setTheme(this.defaultTheme)}initialize(e,i){this.element=e,this.injector=i,this.applyThemeClass(this.getTheme())}applyThemeClass(e,i="add"){var r;const{element:s,injector:o}=this;if(!e||!s||!o)return;const a=o.get(Yc,null);if(!a)return;const l=s.nativeElement,c=null===(r=o.get(_m,null))||void 0===r?void 0:r.getContainerElement(),u="add"===i?"addClass":"removeClass";a[u](l,e),c&&a[u](c,e)}}return n.\u0275fac=function(e){return new(e||n)(I(m7,8))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})(),FRe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-name-input",this.firstNameValidator=new Oh("",[fW.required]),this.lastNameValidator=new Oh("",[fW.required]),this._name={firstName:"",lastName:""},this.nameChange=new Le}get name(){return this._name}set name(e){this._name=e,this.firstNameValidator.setValue((null==e?void 0:e.firstName)||""),this.lastNameValidator.setValue((null==e?void 0:e.lastName)||"")}updateName(e,i){const r=e.target;this.name=Object.assign(Object.assign({},this.name),{[i]:r.value}),this.ga.event("name_updated","name_input",i),this.nameChange.emit(this.name)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-name-input"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{name:"name"},outputs:{nameChange:"nameChange"},decls:8,vars:2,consts:[[1,"field"],[1,"text","label"],["matInput","","matTooltip","Add your first name.",1,"input",3,"value","input"],["matInput","","matTooltip","Add your last name.",1,"input",3,"value","input"]],template:function(e,i){1&e&&(N(0,"mat-form-field",0),N(1,"mat-label",1),Pe(2,"First Name "),L(),N(3,"input",2),Ce("input",function(s){return i.updateName(s,"firstName")}),L(),L(),N(4,"mat-form-field",0),N(5,"mat-label",1),Pe(6,"Last Name "),L(),N(7,"input",3),Ce("input",function(s){return i.updateName(s,"lastName")}),L(),L()),2&e&&(X(3),le("value",i.firstNameValidator.value),X(4),le("value",i.lastNameValidator.value))},directives:[hm,Gf,n0,bc],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]:not(:last-child){padding-right:.75rem}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:left;width:100%}"],changeDetection:0}),n})();const NRe=["thumbContainer"],LRe=["toggleBar"],BRe=["input"],VRe=function(n){return{enterDuration:n}},jRe=["*"],zRe=new Ee("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let URe=0;const HRe={provide:Bo,useExisting:T(()=>_7),multi:!0};class $Re{constructor(t,e){this.source=t,this.checked=e}}const GRe=Hf(zf(Uf(dm(class{constructor(n){this._elementRef=n}}))));let _7=(()=>{class n extends GRe{constructor(e,i,r,s,o,a){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++URe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Le,this.toggleChange=new Le,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(e){this._required=jt(e)}get checked(){return this._checked}set checked(e){this._checked=jt(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._inputElement.nativeElement.focus():e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new $Re(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(wl),E(Qn),ws("tabindex"),E(zRe),E(aa,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&(fi(NRe,5),fi(LRe,5),fi(BRe,5)),2&e){let r;Ft(r=Nt())&&(i._thumbEl=r.first),Ft(r=Nt())&&(i._thumbBarEl=r.first),Ft(r=Nt())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,i){2&e&&(pl("id",i.id),cn("tabindex",i.disabled?null:-1)("aria-label",null)("aria-labelledby",null),ht("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Vt([HRe]),Et],ngContentSelectors:jRe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,i){if(1&e&&(Rr(),N(0,"label",0,1),N(2,"div",2,3),N(4,"input",4,5),Ce("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),L(),N(6,"div",6,7),st(8,"div",8),N(9,"div",9),st(10,"div",10),L(),L(),L(),N(11,"span",11,12),Ce("cdkObserveContent",function(){return i._onLabelTextChange()}),N(13,"span",13),Pe(14,"\xa0"),L(),jn(15),L(),L()),2&e){const r=io(1),s=io(12);cn("for",i.inputId),X(2),ht("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),X(2),le("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),cn("name",i.name)("aria-checked",i.checked.toString())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),X(5),le("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Wg(18,VRe,i._noopAnimations?0:150))}},directives:[la,sO],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),v7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})(),y7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[v7,cc,Xn,IE],v7,Xn]}),n})(),LF=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-labeled-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new Le}get left(){const{value:e,labels:i}=this;return e!==i[1]}updateToggle(e){this.value=e?this.labels[0]:this.labels[1],this.ga.event("slide_toggle_toggled","slide_toggle",this.value),this.valueChange.emit(this.value)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-labeled-slide-toggle"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],[1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(e,i){if(1&e){const r=Gr();N(0,"span",0),Ce("click",function(){Zn(r);const o=io(3);return i.left||o.toggle(),i.updateToggle(!0)}),Pe(1),L(),N(2,"mat-slide-toggle",1,2),Ce("change",function(o){return i.updateToggle(!o.checked)}),L(),N(4,"span",0),Ce("click",function(){Zn(r);const o=io(3);return i.left&&o.toggle(),i.updateToggle(!1)}),Pe(5),L()}2&e&&(ht("disabled",i.disabled)("highlighted",i.left),X(1),Fi(i.labels[0]),X(1),le("disabled",i.disabled)("checked",!i.left),X(2),ht("disabled",i.disabled)("highlighted",!i.left),X(1),Fi(i.labels[1]))},directives:[_7],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%;cursor:not-allowed}"],changeDetection:0}),n})();const YRe=function(){return["Male","Female"]},XRe=function(n){return[n]};let KRe=(()=>{class n{constructor(e,i,r){this.page=e,this.model=i,this.dialogRef=r,this.clsName="ccf-registration-content",this.sexByLabel$=this.model.sex$.pipe(re(s=>"female"===s?"Female":"Male")),this.organList=RF,r.disableClose=!0}setSexFromLabel(e){this.currentSex=e,this.sexSelected=!0}checkNameValid(e){this.nameValid=e.firstName.length>0&&e.lastName.length>0}organSelect(e){this.currentOrgan=e,this.organSelected=!0}registerButtonClick(e){e&&e.preventDefault(),this.organSelected&&this.nameValid&&this.closeDialog()}closeDialog(){this.model.setSex("Female"===this.currentSex?"female":"male"),this.model.setOrgan(this.currentOrgan),this.dialogRef.close(!0),this.page.registrationStarted()}}return n.\u0275fac=function(e){return new(e||n)(E(fs),E(wi),E(n_))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-registration-content"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:17,vars:17,consts:[[1,"modal"],["mat-dialog-content",""],[3,"name","nameChange"],["matTooltip","Select sex to filter organs.",1,"organ-sliders"],[1,"slider-label"],[1,"toggle","gender",3,"labels","value","valueChange"],[1,"selector-label"],[1,"selector-container"],[3,"organList","selectedOrgans","organsChanged"],["organSelector",""],["mat-button","",1,"registration-button",3,"matTooltip","click"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),N(2,"ccf-name-input",2),Ce("nameChange",function(s){return i.page.setUserName(s),i.checkNameValid(s)}),En(3,"async"),L(),N(4,"div",3),N(5,"div",4),Pe(6,"Donor Sex:"),L(),N(7,"ccf-labeled-slide-toggle",5),Ce("valueChange",function(s){return i.setSexFromLabel(s)}),En(8,"async"),L(),L(),N(9,"div",6),Pe(10,"Select an organ"),L(),N(11,"div",7),N(12,"ccf-organ-selector",8,9),Ce("organsChanged",function(s){return i.organSelect(s[0])}),En(14,"async"),L(),L(),L(),N(15,"button",10),Ce("click",function(s){return i.registerButtonClick(s)}),Pe(16,"START REGISTRATION"),L(),L()),2&e&&(X(2),le("name",xn(3,8,i.page.user$)),X(5),le("labels",WC(14,YRe))("value",xn(8,10,i.sexByLabel$)),X(5),le("organList",i.organList)("selectedOrgans",Wg(15,XRe,xn(14,12,i.model.organ$))),X(3),ht("disabled",!i.organSelected||!i.nameValid),le("matTooltip",i.organSelected&&i.nameValid?"":"Required: Enter first and last name, and select an organ"))},directives:[FRe,bc,LF,s7,Zf],pipes:[Qu],styles:[".modal[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;width:35rem;height:22rem}.modal[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]{display:flex;height:3rem;align-items:center}.modal[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]{font-weight:600}.modal[_ngcontent-%COMP%]   .selector-label[_ngcontent-%COMP%]{font-weight:600;height:3rem;line-height:3rem}.modal[_ngcontent-%COMP%]   .selector-container[_ngcontent-%COMP%]{height:4rem;width:31rem;margin:0 auto}.modal[_ngcontent-%COMP%]   .registration-button[_ngcontent-%COMP%]{display:block;margin:2rem auto 0}"],changeDetection:0}),n})(),ZRe=(()=>{class n{constructor(e,i,r){this.dialog=e,this.page=i,this.model=r,this.clsName="ccf-registration-modal"}ngOnInit(){fr([this.page.user$,this.model.organ$]).pipe(tm(500),Mi(1),Ni(([e,i])=>{""!==e.firstName&&""!==e.lastName&&""!==i.src||this.openDialog()})).subscribe()}openDialog(){this.dialog.open(KRe,{autoFocus:!1})}}return n.\u0275fac=function(e){return new(e||n)(E(i_),E(fs),E(wi))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-registration-modal"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();function QRe(n,t){1&n&&function(n,t,e){wf(n,t,e),Cf()}(0)}function JRe(n,t){if(1&n){const e=Gr();N(0,"div",4),Ce("click",function(){return Zn(e),Dt().page.cancelRegistration()}),N(1,"mat-icon",5),Pe(2,"chevron_left"),L(),N(3,"span",6),Pe(4,"BACK"),L(),L()}}function eke(n,t){1&n&&(N(0,"a",7),st(1,"mat-icon",8),L())}let tke=(()=>{class n{constructor(e){this.page=e,this.clsName="ccf-header"}}return n.\u0275fac=function(e){return new(e||n)(E(fs))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-header"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:7,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["backButton",""],["logo",""],[1,"filler"],["rel","noreferrer noopener",1,"link","home",3,"click"],[1,"icon","backbutton"],[1,"text"],["href","https://ingest.hubmapconsortium.org/","rel","noreferrer noopener","matTooltip","Human BioMolecular Atlas Project","matTooltipPosition","right",1,"link","hubmap"],["svgIcon","app:logo",1,"icon","logo"]],template:function(e,i){if(1&e&&(Pt(0,QRe,1,0,"ng-container",0),En(1,"async"),Pt(2,JRe,5,0,"ng-template",null,1,qC),Pt(4,eke,2,0,"ng-template",null,2,qC),st(6,"div",3)),2&e){const r=io(3),s=io(5);le("ngIf",xn(1,3,i.page.useCancelRegistrationCallback$))("ngIfThen",r)("ngIfElse",s)}},directives:[js,Us,bc],pipes:[Qu],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-height:4rem;padding:0 1.5rem;border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{padding:.25rem 0;height:2rem;display:flex;align-items:center;font-weight:lighter;font-size:1.5rem}[_nghost-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;text-decoration:none;padding:.25rem 0}[_nghost-%COMP%]   .home[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition:color .6s}[_nghost-%COMP%]   .home[_ngcontent-%COMP%]   .backbutton[_ngcontent-%COMP%]{font-size:2.25rem;width:2.25rem;height:2.25rem}[_nghost-%COMP%]   .hubmap[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100%;margin-right:1rem}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1;margin:0}"],changeDetection:0}),n})();const b7={isolated:!0},w7=new Ee("Message service configuration",{providedIn:"root",factory:()=>b7});let nke=(()=>{class n{constructor(e,i,r){this.source=e,this.channel=i,this.messages=r}sendMessage(e){this.channel.next({id:this.nextMessageId(),source:this.source,payload:e})}getMessages(){return this.messages.pipe($n(e=>e.source!==this.source))}getMessagesFromSource(e){return this.getMessages().pipe($n(i=>i.source===e))}getMessagesFromSources(e){return this.getMessages().pipe($n(i=>e.includes(i.source)))}nextMessageId(){return n.counter++}}return n.counter=0,n})();const C0=(()=>{class n{constructor(e,i){this.config=e,this.parent=i,this.channel=new G,this.messages=e.isolated||!i?this.channel.asObservable():gi([this.channel,i.messages.pipe(Nz(()=>!this.channel.closed))]).pipe(mo())}ngOnDestroy(){this.channel.complete()}connect(e){return new nke(e,this.channel,this.messages)}}return n.\u0275fac=function(e){return new(e||n)(I(w7),I(n,12))},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ike=["*"];let RM=(()=>{class n{constructor(e,i){this.className="ccf-drawer-content",this.animationsEnabled=!1,this.leftMargin=0,this.rightMargin=0,this.faded=!1,this.drawers=[],this.subscriptions=new Re;const r=e.connect(this).getMessages();this.subscriptions.add(r.subscribe(s=>{this.handleMessage(s)&&i.markForCheck()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){switch(e.payload.type){case"drawer-containers-changed":return this.drawers=e.payload.drawers,this.updateFaded(),!0;case"drawer-initialized":return this.animationsEnabled=!0,!0;case"drawer-toggled":{const i=e.source.position,{opened:r,width:s,margin:o}=e.payload;return this.updateMargin(i,r,s,o),this.updateFaded(),!0}default:return!1}}updateMargin(e,i,r,s){const o=i?r+s:s;"start"===e?this.leftMargin=o:this.rightMargin=o}updateFaded(){const[e,i]=this.drawers;this.faded=!!((null==e?void 0:e.opened)&&(null==e?void 0:e.expanded)||(null==i?void 0:i.opened)&&(null==i?void 0:i.expanded))}}return n.\u0275fac=function(e){return new(e||n)(E(C0),E(Qn))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-drawer-content"]],hostVars:9,hostBindings:function(e,i){2&e&&(Fg("@fadeInOut",i.faded),Yn(i.className),Ef("margin-left",i.leftMargin,"px")("margin-right",i.rightMargin,"px"),ht("cff-drawer-content-animations",i.animationsEnabled))},ngContentSelectors:ike,decls:1,vars:0,template:function(e,i){1&e&&(Rr(),jn(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;z-index:2;overflow:auto}.cff-drawer-content-animations[_nghost-%COMP%]{transition-duration:.5s;transition-timing-function:ease-in-out;transition-property:margin-left,margin-right}"],data:{animation:[lc("fadeInOut",[Ar("false",ci({opacity:1})),Ar("true",ci({opacity:0})),ao("false <=> true",Ro("1s"))])]},changeDetection:0}),n})();const rke=["*"],BF={params:{width:0,margin:0,margin2:0}};class ske{constructor(){this.initialized=!1,this.deferred=new Promise(t=>{this.resolve=t})}set(){this.initialized=!0,this.resolve()}wait(){return Sl(this,void 0,void 0,function*(){return this.deferred})}valueOf(){return this.initialized}}let VF=(()=>{class n{constructor(e,i,r){this.element=r,this.className="ccf-drawer",this._position="start",this._opened=!1,this._expanded=!1,this.openedChange=new Le(!0),this.expandedChange=new Le(!0),this.stateChange=new Le(!0),this.openedState="closed",this.expandedState="closed",this.expandedState2="collapsed",this._measuredWidth=0,this.width=0,this._measuredMargin=0,this.margin2=0,this.initialized=new ske,this.subscriptions=new Re,this.channel=e.connect(this),this.subscriptions.add(this.channel.getMessages().subscribe(s=>{this.handleMessage(s)&&i.markForCheck()}))}get classEnd(){return"end"===this.position}get position(){return this._position}set position(e){this._position=e||"start"}get opened(){return this._opened}set opened(e){this.toggle(jt(e))}get expanded(){return this._expanded}set expanded(e){this.toggleExpanded(jt(e))}get expandedStateObj(){return{value:this.expandedState2,params:{width:this.width,margin:this.measuredMargin,margin2:this.margin2}}}get measuredWidth(){if(this._measuredWidth>0)return this._measuredWidth;const e=this.element.nativeElement;if(!e)return 0;const i=e.getBoundingClientRect(),r=i.right-i.left;return 0===r?0:(this._measuredWidth=r,r)}get measuredMargin(){if(this._measuredMargin>0)return this._measuredMargin;const e=this.element.nativeElement;if(!e)return 0;const s=globalThis.getComputedStyle(e).getPropertyValue("start"===this.position?"margin-right":"margin-left"),o=Number(s.slice(0,-2));return this._measuredMargin=o,o}ngAfterViewInit(){this.initialized.set(),setTimeout(()=>this.channel.sendMessage({type:"drawer-initialized"}))}ngOnDestroy(){this.subscriptions.unsubscribe()}open(){this.toggle(!0)}close(){this.toggle(!1)}toggle(e=!this.opened){this.opened!==e&&(e?this.openedState=this.initialized.valueOf()?"open":"open-instant":(this.openedState="closed",this.expandedState="closed",this.expandedState2="collapsed",this._expanded=!1),this._opened=e,this.sendToggle())}openExpanded(){this.toggleExpanded(!0)}closeExpanded(){this.toggleExpanded(!1)}toggleExpanded(e=!this.expanded){this.expanded!==e&&(e?this.expandedState=this.initialized.valueOf()?"open":"open-instant":(this.expandedState="closed",this.expandedState2="collapsed"),this._expanded=e,this.sendToggle())}closeOpenDone(){this.openedChange.emit(this.opened)}expandCollapseDone(){this.expandedChange.emit(this.expanded)}sendToggle(){return Sl(this,void 0,void 0,function*(){yield this.initialized.wait(),this.channel.sendMessage({type:"drawer-toggled",opened:this.opened,expanded:this.expanded,width:this.measuredWidth,margin:this.measuredMargin}),this.stateChange.emit()})}handleMessage(e){switch(e.payload.type){case"drawer-toggled":return this.syncExpanded(e.source),!0;default:return!1}}syncExpanded(e){(this.expanded||e.expanded)&&(this.expanded&&e.expanded?this.expandedState2=e.expandedState2="half":this.expanded?e.opened?(this.expandedState2="extended",this.width=e.measuredWidth+e.measuredMargin):(this.expandedState2="full",this.margin2=e.measuredMargin):this.opened?(e.expandedState2="extended",e.width=this.measuredWidth+this.measuredMargin):(e.expandedState2="full",e.margin2=this.measuredMargin))}}return n.\u0275fac=function(e){return new(e||n)(E(C0),E(Qn),E(ot))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-drawer"]],hostVars:10,hostBindings:function(e,i){1&e&&ny("@openClose.done",function(){return i.closeOpenDone()})("@expandCollapse.done",function(){return i.expandCollapseDone()}),2&e&&(Fg("@openClose",i.openedState)("@expandCollapse",i.expandedStateObj),Yn(i.className),ht("ccf-drawer-end",i.classEnd)("ccf-drawer-opened",i.opened)("ccf-drawer-expanded",i.expanded))},inputs:{position:"position",opened:"opened",expanded:"expanded"},outputs:{openedChange:"openedChange",expandedChange:"expandedChange",stateChange:"stateChange"},exportAs:["ccfDrawer"],ngContentSelectors:rke,decls:2,vars:0,consts:[[1,"cff-drawer-inner-container"]],template:function(e,i){1&e&&(Rr(),N(0,"div",0),jn(1),L())},styles:["[_nghost-%COMP%]{display:block;position:absolute;top:0;bottom:0;z-index:2;outline:0;transform:translate(-100%)}.ccf-drawer-end[_nghost-%COMP%]{right:0;transform:translate(100%)}[_nghost-%COMP%]   .cff-drawer-inner-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin}"],data:{animation:[lc("openClose",[Ar("open, open-instant",ci({transform:"none"})),Ar("closed",ci({})),ao("closed => open-instant",Ro(0)),ao("closed <=> open, open-instant => closed",Ro(".5s ease-in-out"))]),lc("expandCollapse",[Ar("collapsed",ci({})),Ar("half",ci({width:"calc(50% - {{ margin }}px)"}),BF),Ar("extended",ci({width:"calc(100% - {{ width }}px - {{ margin }}px)"}),BF),Ar("full",ci({width:"calc(100% - {{ margin }}px - {{ margin2 }}px)"}),BF),ao("* <=> *",Ro(".5s ease-in-out"))])]},changeDetection:0}),n})();function oke(n,t){1&n&&(N(0,"ccf-drawer-content"),jn(1,2),L())}const ake=[[["ccf-drawer"]],[["ccf-drawer-content"]],"*"],lke=["ccf-drawer","ccf-drawer-content","*"];function C7(n){throw new Error(`Multiple drawers in position ${n}`)}let cke=(()=>{class n{constructor(e,i){this.cdr=i,this.className="ccf-drawer-container",this.subscriptions=new Re,this.channel=e.connect(this),this.subscriptions.add(this.channel.getMessages().subscribe(r=>{this.handleMessage(r)&&i.markForCheck()}))}get content(){var e;return null!==(e=this.content1.first)&&void 0!==e?e:this.content2.first}get hasWrappedContent(){return 0!==this.content1.length}ngAfterViewInit(){this.drawers.changes.pipe(us(null)).subscribe(()=>{const e=this.validateDrawers();this.channel.sendMessage({type:"drawer-containers-changed",drawers:e}),this.cdr.markForCheck()}),this.content1.changes.pipe(us(null)).subscribe(()=>{this.channel.sendMessage({type:"content-container-changed",content:this.content}),this.cdr.markForCheck()})}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){return!0}validateDrawers(){const e=this.drawers.toArray(),i=e.filter(s=>"start"===s.position),r=e.filter(s=>"end"===s.position);return i.length>1&&C7("start"),r.length>1&&C7("end"),[i[0],r[0]]}}return n.\u0275fac=function(e){return new(e||n)(E(C0),E(Qn))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-drawer-container"]],contentQueries:function(e,i,r){if(1&e&&(Ui(r,VF,5),Ui(r,RM,5)),2&e){let s;Ft(s=Nt())&&(i.drawers=s),Ft(s=Nt())&&(i.content1=s)}},viewQuery:function(e,i){if(1&e&&fi(RM,5),2&e){let r;Ft(r=Nt())&&(i.content2=r)}},hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.className)},exportAs:["ccfDrawerContainer"],features:[Vt([C0])],ngContentSelectors:lke,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(e,i){1&e&&(Rr(ake),jn(0),jn(1,1),Pt(2,oke,2,0,"ccf-drawer-content",0)),2&e&&(X(2),le("ngIf",!i.hasWrappedContent))},directives:[js,RM],styles:["[_nghost-%COMP%]{display:block;position:relative;z-index:1;overflow:hidden;-webkit-overflow-scrolling:touch}"],changeDetection:0}),n})();var kM,uke=xe(457),dke=new Uint8Array(16);function hke(){if(!kM&&!(kM="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kM(dke)}const fke=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gke=function(n){return"string"==typeof n&&fke.test(n)};for(var Ws=[],jF=0;jF<256;++jF)Ws.push((jF+256).toString(16).substr(1));const yke=function(n,t,e){var i=(n=n||{}).random||(n.rng||hke)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){e=e||0;for(var r=0;r<16;++r)t[e+r]=i[r];return t}return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Ws[n[t+0]]+Ws[n[t+1]]+Ws[n[t+2]]+Ws[n[t+3]]+"-"+Ws[n[t+4]]+Ws[n[t+5]]+"-"+Ws[n[t+6]]+Ws[n[t+7]]+"-"+Ws[n[t+8]]+Ws[n[t+9]]+"-"+Ws[n[t+10]]+Ws[n[t+11]]+Ws[n[t+12]]+Ws[n[t+13]]+Ws[n[t+14]]+Ws[n[t+15]]).toLowerCase();if(!gke(e))throw TypeError("Stringified UUID is invalid");return e}(i)};function E7(n){const t=new tn(n.transformMatrix),e=t.transformAsPoint([-1,-1,-1],[]),i=t.transformAsPoint([1,1,1],[]);return new Ii({lowerBound:new S(...e.map((r,s)=>Math.min(r,i[s]))),upperBound:new S(...i.map((r,s)=>Math.max(r,e[s])))})}let ps=class extends bp{constructor(t){super(),this.injector=t,this.gizmo$=ut([{"@id":"http://purl.org/ccf/latest/ccf.owl#VHMaleOrgans_VHM_Spleen_Colic_Surface","@type":"SpatialSceneNode",scenegraph:"https://hubmapconsortium.github.io/ccf-3d-reference-object-library/Assets/body4Mesh_1338.glb",transformMatrix:new tn(tn.IDENTITY).scale([2,2,2]).rotateY(MS(0)),tooltip:"Gizmo",unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!1,color:[255,255,255,255],opacity:1}])}get nodes$(){return fr([this.placementCube$,this.referenceOrganNodes$,this.previousRegistrationNodes$,this.nodeCollisions$]).pipe(re(([t,e,i,r])=>[...t,...i,...e,...this.snapshot.showCollisions?r:[]]))}get rotatedNodes$(){return fr([this.rotation$,this.nodes$]).pipe(re(([t,e])=>0===t?e:e.map(i=>Object.assign(Object.assign({},i),{transformMatrix:new tn(tn.IDENTITY).rotateY(MS(t)).multiplyRight(i.transformMatrix)}))))}get referenceOrganNodes$(){return fr([this.model.anatomicalStructures$,this.model.extractionSites$,this.model.organIri$]).pipe(tm(400),re(([t,e,i])=>this.createSceneNodes(i,[...t,...e])))}get referenceOrganSimpleNodes$(){return fr([this.model.anatomicalStructures$,this.model.organIri$,this.referenceData.state$]).pipe(re(([t,e,i])=>t.map(r=>{var s;return i.sceneNodeLookup[r.id]?[Object.assign(Object.assign({},i.simpleSceneNodeLookup[r.id]),{opacity:(null!==(s=r.opacity)&&void 0!==s?s:100)/100,color:[255,255,255,255]})]:(i.anatomicalStructures[e]||[]).filter(o=>o.representation_of===r.id).map(o=>{var a;return Object.assign(Object.assign({},i.simpleSceneNodeLookup[o["@id"]]),{opacity:(null!==(a=r.opacity)&&void 0!==a?a:100)/100,color:[255,255,255,255]})})}).reduce((r,s)=>r.concat(s),[])))}get nodeCollisions$(){return fr([this.referenceOrganSimpleNodes$,this.placementCube$]).pipe($n(([t,e])=>e.length>0),re(([t,e])=>{const i=E7(e[0]);return t.filter(r=>i.overlaps(E7(r)))}))}get previousRegistrationNodes$(){return fr([this.model.organIri$,this.model.showPrevious$,this.registration.previousRegistrations$]).pipe(re(([t,e,i])=>e?i.map(r=>{const s=Array.isArray(r.placement)?r.placement[0]:r.placement;if(s.target===t){const o=this.model.snapshot.organDimensions,a=[o.x,o.y,o.z].map(l=>-l/1e3/2);return{"@id":r["@id"],"@type":"SpatialSceneNode",transformMatrix:new tn(tn.IDENTITY).translate([s.x_translation,s.y_translation,s.z_translation].map((l,c)=>l/1e3+a[c])).rotateXYZ([s.x_rotation,s.y_rotation,s.z_rotation].map(MS)).scale([r.x_dimension,r.y_dimension,r.z_dimension].map(l=>l/1e3/2)),color:[25,118,210,200],tooltip:r.label,unpickable:!0}}}).filter(r=>!!r):[]))}get placementCube$(){return fr([this.model.viewType$,this.model.blockSize$,this.model.rotation$,this.model.position$,this.model.organ$]).pipe(re(([t,e,i,r,s])=>""===s.src?[]:[this.placementCube]))}get placementCube(){const{viewType:t,blockSize:e,rotation:i,position:r,organDimensions:s}=this.model.snapshot,o=[s.x,s.y,s.z].map(a=>-a/1e3/2);return{"@id":"#DraftPlacement","@type":"SpatialSceneNode",transformMatrix:new tn(tn.IDENTITY).translate([r.x,r.y,r.z].map((a,l)=>a/1e3+o[l])).rotateXYZ([i.x,i.y,i.z].map(MS)).scale([e.x,e.y,e.z].map(a=>a/1e3/2)),color:[255,255,0,200],tooltip:"Draft Placement",unpickable:"3d"===t}}get rotation$(){return this.model.viewSide$.pipe(re(t=>{let e=0;switch(t){case"left":e=-90;break;case"right":e=90;break;case"posterior":e=180}return e}))}ngxsOnInit(){super.ngxsOnInit(),this.model=this.injector.get(wi),this.registration=this.injector.get(xr),this.referenceData=this.injector.get(Cc)}createSceneNodes(t,e){const i=this.referenceData.snapshot;return e.filter(r=>r.visible&&r.opacity&&r.opacity>0).map(r=>{var s;return i.sceneNodeLookup[r.id]?[Object.assign(Object.assign({},i.sceneNodeLookup[r.id]),{opacity:(null!==(s=r.opacity)&&void 0!==s?s:100)/100,color:[255,255,255,255]})]:(i.anatomicalStructures[t]||[]).filter(o=>o.representation_of===r.id).map(o=>{var a;return Object.assign(Object.assign({},i.sceneNodeLookup[o["@id"]]),{opacity:(null!==(a=r.opacity)&&void 0!==a?a:100)/100,color:[255,255,255,255]})})}).reduce((r,s)=>r.concat(s),[])}};ps.\u0275fac=function(t){return new(t||ps)(I(Bt))},ps.\u0275prov=pe({token:ps,factory:ps.\u0275fac}),Ve([Pi()],ps.prototype,"nodes$",null),Ve([Pi()],ps.prototype,"rotatedNodes$",null),Ve([Pi()],ps.prototype,"referenceOrganNodes$",null),Ve([Pi()],ps.prototype,"referenceOrganSimpleNodes$",null),Ve([Pi()],ps.prototype,"nodeCollisions$",null),Ve([Pi()],ps.prototype,"previousRegistrationNodes$",null),Ve([Pi()],ps.prototype,"placementCube$",null),Ve([Pi()],ps.prototype,"placementCube",null),Ve([Pi()],ps.prototype,"rotation$",null),ps=Ve([yd(),vd({name:"scene",defaults:{showCollisions:!1}})],ps);let zo=class extends xOe{constructor(t){super(),this.injector=t,this._latestTags=[]}get tags$(){return fr([this.entities$,this.scene.nodeCollisions$]).pipe(re(([t,e])=>{const i=[],r=new Set,s=new Set;Object.entries(t).forEach(([o,a])=>{"removed"===a.type?s.add(o):(r.add(o),i.push(a))});for(const o of e){const a=o.representation_of;a&&!s.has(a)&&!r.has(a)&&(r.add(a),i.push({id:a,label:o.tooltip,type:"assigned"}))}return i}))}get latestTags(){return this._latestTags}ngxsOnInit(){super.ngxsOnInit(),this.model=this.injector.get(wi),this.scene=this.injector.get(ps),this.tags$.subscribe(t=>{this._latestTags=t})}addTags(t){for(const e of t)this.addTagRaw(e)}addTag(t){this.addTagRaw(t)}removeTag(t){this.snapshot.entities[t.id]?this.updateEntitiesMany([{id:t.id,changes:{type:"removed"}}]):this.addEntityOne(Object.assign(Object.assign({},t),{type:"removed"}))}searchExternal(t,e){const i=this.model.snapshot.anatomicalStructures.filter(r=>-1!==r.name.toLowerCase().indexOf(t.toLowerCase()));return[{totalCount:i.length,results:i.map(r=>({id:r.id,label:r.name,type:"added"})).slice(0,e)}]}addTagRaw(t){this.snapshot.entities[t.id]?this.updateEntitiesMany([{id:t.id,changes:{type:"added"}}]):this.addEntityOne(Object.assign(Object.assign({},t),{type:"added"}))}};zo.\u0275fac=function(t){return new(t||zo)(I(Bt))},zo.\u0275prov=pe({token:zo,factory:zo.\u0275fac}),Ve([Pi()],zo.prototype,"tags$",null),Ve([an()],zo.prototype,"addTags",null),Ve([an()],zo.prototype,"addTag",null),Ve([an()],zo.prototype,"removeTag",null),Ve([gu.ak],zo.prototype,"searchExternal",null),zo=Ve([yd(),vd({name:"tags",defaults:Object.assign({},{ids:[],entities:{}})})],zo);let xr=class extends bp{constructor(t,e){super(),this.injector=t,this.globalConfig=e,this.displayErrors$=this.state$.pipe(pr("displayErrors"))}get metadata$(){return fr([this.page.state$,this.model.state$]).pipe(re(([t,e])=>this.buildMetadata(t,e,this.tags.latestTags)))}get jsonld$(){return fr([this.page.state$,this.model.state$]).pipe(re(([t,e])=>this.buildJsonLd(t,e,this.tags.latestTags)))}get valid$(){return fr([this.page.state$,this.model.state$]).pipe(re(()=>this.isValid))}get previousRegistrations$(){const{globalConfig:t,state$:e}=this;return fr([e.pipe(pr("registrations")),t.getOption("fetchPreviousRegistrations").pipe(Fr(s=>{var o;return null!==(o=null==s?void 0:s())&&void 0!==o?o:[[]]}),us([]))]).pipe(re(([s,o])=>[...s,...o]))}get currentIdentifier(){return yke()}get currentDate(){return(new Date).toISOString().split("T")[0]}ngxsOnInit(){super.ngxsOnInit(),this.page=this.injector.get(fs),this.model=this.injector.get(wi),this.tags=this.injector.get(zo),this.refData=this.injector.get(Cc),this.globalConfig.config$.pipe(Mi(1),Ni(({useDownload:t,register:e})=>this.ctx.patchState({useRegistrationCallback:!(t||!e)}))).subscribe(),this.globalConfig.getOption("editRegistration").pipe(aF(),Ni(t=>this.editRegistration(t))).subscribe()}editRegistration(t){return Sl(this,void 0,void 0,function*(){const e=Array.isArray(t.placement)?t.placement[0]:t.placement,i=this.refData.getOrganData(e.target);this.page.setUserName({firstName:t.creator_first_name,lastName:t.creator_last_name}),i&&(this.model.setOrgan(i.organ),i.sex&&this.model.setSex(i.sex),i.side&&this.model.setSide(i.side)),this.model.setBlockSize({x:t.x_dimension,y:t.y_dimension,z:t.z_dimension}),this.model.setRotation({x:e.x_rotation,y:e.y_rotation,z:e.z_rotation}),this.model.setSlicesConfig({thickness:t.slice_thickness||NaN,numSlices:t.slice_count||NaN}),yield new Promise(s=>{setTimeout(s,1e3)}),this.model.setPosition({x:e.x_translation,y:e.y_translation,z:e.z_translation});const r=new Set(t.ccf_annotations);this.tags.addTags(this.model.snapshot.anatomicalStructures.filter(s=>r.has(s.id)).map(s=>({id:s.id,label:s.name,type:"added"})))})}setUseRegistrationCallback(t){this.ctx.patchState({useRegistrationCallback:t})}setDisplayErrors(t){this.ctx.patchState({displayErrors:t})}addRegistration(t){this.ctx.setState(w0({registrations:kRe(t)}))}isDataValid(t,e){return[t.user.firstName,t.user.lastName,e.organ.src,e.organ.name,e.organ.organ].every(r=>!!r)}get isValid(){return this.isDataValid(this.page.snapshot,this.model.snapshot)}register(t){if(!this.isValid)return;const{globalConfig:{snapshot:{register:e}},page:i,model:r,snapshot:s}=this,o=this.buildJsonLd(i.snapshot,r.snapshot,this.tags.latestTags),a=JSON.stringify(o,void 0,2);if(t||void 0===t&&s.useRegistrationCallback)null==e||e(a);else{const l=new Blob([a],{type:"application/json",endings:"native"});(0,uke.saveAs)(l,"registration-data.json")}this.addRegistration(o),this.setDisplayErrors(!1)}buildMetadata(t,e,i){const r=[];return t.registrationCallbackSet||r.push({label:"First Name",value:t.user.firstName},{label:"Last Name",value:t.user.lastName}),r.push({label:"Reference Organ Name",value:e.organ.name},{label:"Tissue Block Dimensions (mm)",value:this.xyzTripletToString(e.blockSize)},{label:"Tissue Block Position (mm)",value:this.xyzTripletToString(e.position)},{label:"Tissue Block Rotation",value:this.xyzTripletToString(e.rotation)},{label:"Anatomical Structure Tags",value:i.map(s=>s.label).join(", ")},{label:"Time Stamp",value:this.currentDate},{label:"Alignment ID",value:this.currentIdentifier}),r}buildJsonLd(t,e,i){var r,s;return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${this.currentIdentifier}`,"@type":"SpatialEntity",label:e.label||void 0,creator:`${t.user.firstName} ${t.user.lastName}`,creator_first_name:t.user.firstName,creator_last_name:t.user.lastName,creation_date:this.currentDate,ccf_annotations:i.map(o=>o.id),slice_thickness:(null===(r=e.slicesConfig)||void 0===r?void 0:r.thickness)||void 0,slice_count:(null===(s=e.slicesConfig)||void 0===s?void 0:s.numSlices)||void 0,x_dimension:+e.blockSize.x.toFixed(3),y_dimension:+e.blockSize.y.toFixed(3),z_dimension:+e.blockSize.z.toFixed(3),dimension_units:"millimeter",placement:{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${this.currentIdentifier}_placement`,"@type":"SpatialPlacement",target:e.organIri,placement_date:this.currentDate,x_scaling:1,y_scaling:1,z_scaling:1,scaling_units:"ratio",x_rotation:+e.rotation.x.toFixed(3),y_rotation:+e.rotation.y.toFixed(3),z_rotation:+e.rotation.z.toFixed(3),rotation_order:"XYZ",rotation_units:"degree",x_translation:+e.position.x.toFixed(3),y_translation:+e.position.y.toFixed(3),z_translation:+e.position.z.toFixed(3),translation_units:"millimeter"}}}xyzTripletToString(t){return`${Math.round(t.x)}, ${Math.round(t.y)}, ${Math.round(t.z)}`}};xr.\u0275fac=function(t){return new(t||xr)(I(Bt),I(Rh))},xr.\u0275prov=pe({token:xr,factory:xr.\u0275fac}),Ve([Pi()],xr.prototype,"metadata$",null),Ve([Pi()],xr.prototype,"jsonld$",null),Ve([Pi()],xr.prototype,"valid$",null),Ve([Pi()],xr.prototype,"previousRegistrations$",null),Ve([Pi()],xr.prototype,"currentIdentifier",null),Ve([Pi()],xr.prototype,"currentDate",null),Ve([an()],xr.prototype,"setUseRegistrationCallback",null),Ve([an()],xr.prototype,"setDisplayErrors",null),Ve([an()],xr.prototype,"addRegistration",null),Ve([Pi()],xr.prototype,"isValid",null),xr=Ve([yd(),vd({name:"registration",defaults:{useRegistrationCallback:!1,displayErrors:!1,registrations:[]}})],xr);let S7=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=jt(e)}get inset(){return this._inset}set inset(e){this._inset=jt(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ge({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,i){2&e&&(cn("aria-orientation",i.vertical?"vertical":"horizontal"),ht("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),zF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Xn],Xn]}),n})();function wke(n,t){if(1&n){const e=Gr();N(0,"mat-icon",2),Ce("click",function(){return Zn(e),Dt().setAllOpacity(20)}),Pe(1,"refresh"),L()}2&n&&le("matRippleCentered",!0)("matRippleUnbounded",!0)}function Cke(n,t){if(1&n){const e=Gr();N(0,"div",3),Ce("mouseleave",function(){return Zn(e),Dt().mouseOut()}),N(1,"mat-icon",4),Ce("mouseenter",function(){const s=Zn(e).$implicit;return Dt().mouseOver(s)}),L(),N(2,"div",5),Pe(3),L(),N(4,"div",6),N(5,"ccf-opacity-slider",7,8),Ce("opacityChange",function(r){return Zn(e),Dt().updateOpacity(r)})("opacityReset",function(){return Zn(e),Dt().resetItem()})("visibilityToggle",function(){const s=Zn(e).$implicit;return Dt().toggleVisibility(s)}),L(),L(),L()}if(2&n){const e=t.$implicit,i=Dt();ht("selected",!!i.selection&&i.getId(0,i.selection)===i.getId(0,e)),X(1),ht("fade",!e.visible),X(1),ht("hidden",e.id===(null==i.selection?null:i.selection.id)),iy("title",e.name),X(1),Fi(e.name),X(1),ht("hidden",e.id!==(null==i.selection?null:i.selection.id)),X(1),le("visible",e.visible)("opacity",i.selection?null==i.selection?null:i.selection.opacity:20)}}let Eke=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-visibility-menu",this.hover=new Le,this.itemsChange=new Le}toggleVisibility(e){e=Object.assign(Object.assign({},e),{visible:!e.visible}),this.selection&&e.id===this.selection.id&&(this.selection=Object.assign(Object.assign({},this.selection),{visible:e.visible})),this.ga.event("visibility_toggled","visibility_menu",""+e.id,+e.visible),this.updateOpacity(e.opacity)}mouseOver(e){this.selection=e===this.selection?void 0:e,this.hover.emit(e)}mouseOut(){this.selection=void 0,this.hover.emit(void 0)}updateOpacity(e){if(!this.selection)return;const i=Object.assign(Object.assign({},this.selection),{opacity:e});this.selection=i,this.items=this.items.map(r=>r.id===i.id?i:r),this.ga.event("opacity_update","visibility_menu",""+i.id,i.opacity),this.itemsChange.emit(this.items)}resetItem(){if(this.selection){const e=Object.assign(Object.assign({},this.selection),{opacity:20,visible:!0});this.selection=e,this.items=this.items.map(i=>i.id===e.id?e:i),this.ga.event("item_reset","visibility_menu",""+e.id),this.itemsChange.emit(this.items)}}setAllOpacity(e){this.items=this.items.map(i=>Object.assign(Object.assign({},i),{opacity:e,visible:!0})),this.ga.event("all_items_opacity_update","visibility_menu",void 0,e),this.itemsChange.emit(this.items)}getId(e,i){return i.id}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-visibility-menu"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{items:"items",selection:"selection"},outputs:{hover:"hover",itemsChange:"itemsChange"},decls:2,vars:3,consts:[["class","icon reset","matRipple","",3,"matRippleCentered","matRippleUnbounded","click",4,"ngIf"],["class","item-entry",3,"selected","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],["matRipple","",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"],[1,"item-entry",3,"mouseleave"],["svgIcon","app:opacity",1,"opacity-icon",3,"mouseenter"],[1,"item-name",3,"title"],[1,"slider"],[3,"visible","opacity","opacityChange","opacityReset","visibilityToggle"],["slider",""]],template:function(e,i){1&e&&(Pt(0,wke,2,2,"mat-icon",0),Pt(1,Cke,7,12,"div",1)),2&e&&(le("ngIf",i.items.length),X(1),le("ngForOf",i.items)("ngForTrackBy",i.getId))},directives:[js,rc,Us,la,fRe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-right:0;margin-left:0;max-height:18rem;overflow-y:auto;scrollbar-width:thin}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{padding:.25rem;border-radius:.25rem}[_nghost-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s;position:absolute;top:3rem}[_nghost-%COMP%]   .reset[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]{display:flex;height:2.25rem;align-items:center;flex-shrink:0;position:relative}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity-icon[_ngcontent-%COMP%]{z-index:1;transition:.6s}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity-icon[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:.5rem;opacity:1;transition-duration:.4s;transition-timing-function:ease-in-out;transition-property:opacity;max-width:calc(100% - 2.5rem)}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .item-name.hidden[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:calc(100% - 2rem);transition-duration:.3s;transition-timing-function:ease-in-out;transition-property:opacity;left:2rem;position:absolute;opacity:1}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .slider.hidden[_ngcontent-%COMP%]{opacity:0;transition-duration:.1s;transition-timing-function:ease-in-out;transition-property:opacity}"],changeDetection:0}),n})();const Ske=["*"],M7=new Ee("MatChipRemove"),A7=new Ee("MatChipAvatar"),T7=new Ee("MatChipTrailingIcon");class Mke{constructor(t){this._elementRef=t}}const Ake=Hf(zf(Uf(Mke),"primary"),-1);let E0=(()=>{class n extends Ake{constructor(e,i,r,s,o,a,l,c){super(e),this._ngZone=i,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new G,this._onBlur=new G,this.selectionChange=new Le,this.destroyed=new Le,this.removed=new Le,this._addHostClassName(),this._chipRippleTarget=a.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new Xj(this,i,this._chipRippleTarget,r),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===l,this.tabIndex=null!=c&&parseInt(c)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const i=jt(e);i!==this._selected&&(this._selected=i,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=jt(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=jt(e)}get removable(){return this._removable}set removable(e){this._removable=jt(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",i=this._elementRef.nativeElement;i.hasAttribute(e)||i.tagName.toLowerCase()===e?i.classList.add(e):i.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled?e.preventDefault():e.stopPropagation()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case 46:case 8:this.remove(),e.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe(Mi(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(pt),E(pi),E(Kj,8),E(Qn),E(lt),E(aa,8),ws("tabindex"))},n.\u0275dir=_e({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,i,r){if(1&e&&(Ui(r,A7,5),Ui(r,T7,5),Ui(r,M7,5)),2&e){let s;Ft(s=Nt())&&(i.avatar=s.first),Ft(s=Nt())&&(i.trailingIcon=s.first),Ft(s=Nt())&&(i.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,i){1&e&&Ce("click",function(s){return i._handleClick(s)})("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i.focus()})("blur",function(){return i._blur()}),2&e&&(cn("tabindex",i.disabled?null:i.tabIndex)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString())("aria-selected",i.ariaSelected),ht("mat-chip-selected",i.selected)("mat-chip-with-avatar",i.avatar)("mat-chip-with-trailing-icon",i.trailingIcon||i.removeIcon)("mat-chip-disabled",i.disabled)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[Et]}),n})(),x7=(()=>{class n{constructor(e,i){this._parentChip=e,"BUTTON"===i.nativeElement.nodeName&&i.nativeElement.setAttribute("type","button")}_handleClick(e){const i=this._parentChip;i.removable&&!i.disabled&&i.remove(),e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(E(E0),E(ot))},n.\u0275dir=_e({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,i){1&e&&Ce("click",function(s){return i._handleClick(s)})},features:[Vt([{provide:M7,useExisting:n}])]}),n})();const D7=new Ee("mat-chips-default-options"),Dke=WO(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let Oke=0;class Ike{constructor(t,e){this.source=t,this.value=e}}let O7=(()=>{class n extends Dke{constructor(e,i,r,s,o,a,l){super(a,s,o,l),this._elementRef=e,this._changeDetectorRef=i,this._dir=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new G,this._uid="mat-chip-list-"+Oke++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(c,u)=>c===u,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new Le,this.valueChange=new Le,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var e,i;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(e){this._multiple=jt(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(e){this._required=jt(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=jt(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=jt(e),this.chips&&this.chips.forEach(i=>i.chipListSelectable=this._selectable)}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return zi(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return zi(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return zi(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return zi(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new AV(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Jn(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe(Jn(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(us(null),Jn(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new Dz(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const i=e.target;i&&i.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,i=!0){if(this._clearSelection(),this.chips.forEach(r=>r.deselect()),Array.isArray(e))e.forEach(r=>this._selectValue(r,i)),this._sortValues();else{const r=this._selectValue(e,i);r&&i&&this._keyManager.setActiveItem(r)}}_selectValue(e,i=!0){const r=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,e));return r&&(i?r.selectViaInteraction():r.select(),this._selectionModel.select(r)),r}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(i=>{i!==e&&i.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let i=null;i=Array.isArray(this.selected)?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.change.emit(new Ike(this,i)),this.valueChange.emit(i),this._onChange(i),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(i=>{!this._selectionModel.isSelected(i)&&i.selected&&i.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let i=this.chips.toArray().indexOf(e.chip);this._isValidIndex(i)&&this._keyManager.updateActiveItem(i),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const i=e.chip,r=this.chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&i._hasFocus&&(this._lastDestroyedChipIndex=r)})}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-chip"))return!0;i=i.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple})}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Qn),E(oa,8),E(vp,8),E(t_,8),E(Hy),E(yc,10))},n.\u0275cmp=Ge({type:n,selectors:[["mat-chip-list"]],contentQueries:function(e,i,r){if(1&e&&Ui(r,E0,5),2&e){let s;Ft(s=Nt())&&(i.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,i){1&e&&Ce("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(s){return i._keydown(s)}),2&e&&(pl("id",i._uid),cn("tabindex",i.disabled?null:i._tabIndex)("aria-describedby",i._ariaDescribedby||null)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-multiselectable",i.multiple)("role",i.role)("aria-orientation",i.ariaOrientation),ht("mat-chip-list-disabled",i.disabled)("mat-chip-list-invalid",i.errorState)("mat-chip-list-required",i.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[Vt([{provide:Gy,useExisting:n}]),Et],ngContentSelectors:Ske,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,i){1&e&&(Rr(),N(0,"div",0),jn(1),L())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})();const kke={separatorKeyCodes:[13]};let I7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[Hy,{provide:D7,useValue:kke}],imports:[[Xn]]}),n})(),Fke=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-visibility-toggle",this.visible=!1,this.toggleLabel="",this.disabled=!1,this.visibilityChanged=new Le}toggleVisibility(){this.visible=!this.visible,this.ga.event("visibility_toggled","visibility_toggle",""+this.visible),this.visibilityChanged.emit(this.visible)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-visibility-toggle"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{visible:"visible",toggleLabel:"toggleLabel",disabled:"disabled"},outputs:{visibilityChanged:"visibilityChanged"},decls:8,vars:9,consts:[[1,"toggle-div"],[1,"toggle-wrapper",3,"click"],[1,"icon-background"],["svgIcon","app:visibility_off_cube",1,"icon","block"],[1,"icon","green"],[1,"toggle-label"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"mat-chip",1),Ce("click",function(){return i.toggleVisibility()}),N(2,"div",2),st(3,"mat-icon",3),N(4,"mat-icon",4),Pe(5,"done"),L(),L(),N(6,"div",5),Pe(7),L(),L(),L()),2&e&&(X(1),ht("disabled",i.disabled),X(1),ht("disabled",i.disabled),X(1),ht("hidden",i.visible),X(1),ht("hidden",!i.visible),X(3),Fi(i.toggleLabel))},directives:[E0,Us],styles:["[_nghost-%COMP%]{height:3rem;display:flex;align-items:center}[_nghost-%COMP%]     .mat-chip{padding:0!important}[_nghost-%COMP%]     .mat-chip.disabled{cursor:not-allowed!important}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:1.5rem}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;display:flex;padding-left:.5rem;cursor:pointer;align-items:center;position:relative;border-width:.075rem;border-style:solid;height:2.25rem;border-radius:1.5rem;transition:background-color .2s ease-in-out}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]{border-radius:1.5rem;height:2.06rem;width:2.06rem;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:.6s;position:absolute}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]   .icon.block[_ngcontent-%COMP%]{width:1.125rem}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .icon-background[_ngcontent-%COMP%]   .icon.hidden[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .toggle-div[_ngcontent-%COMP%]   .toggle-wrapper[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{font-weight:bold;margin-left:.5rem;padding-right:1.25rem;padding-left:.25rem}"],changeDetection:0}),n})();const Nke=["fileInput"];let Lke=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-json-file-reader",this.label="Upload",this.parsedJson=new Le}triggerFileInput(){this.fileInput.nativeElement.click()}handleFile(e){const i=e.target;if(!i.files)return;const r=i.files[0],s=new FileReader;s.onload=()=>{const o=JSON.parse(s.result);this.ga.event("json_file_load_end","json_file_reader"),this.parsedJson.emit(o)},this.ga.event("json_file_load_start","json_file_reader"),s.readAsText(r)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-json-file-reader"]],viewQuery:function(e,i){if(1&e&&fi(Nke,5),2&e){let r;Ft(r=Nt())&&(i.fileInput=r.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{label:"label"},outputs:{parsedJson:"parsedJson"},decls:4,vars:1,consts:[["mat-button","",1,"upload-button",3,"click"],["type","file","accept","application/JSON","name","fileInput","id","fileInput",2,"display","none",3,"change"],["fileInput",""]],template:function(e,i){1&e&&(N(0,"button",0),Ce("click",function(){return i.triggerFileInput()}),Pe(1),L(),N(2,"input",1,2),Ce("change",function(s){return i.handleFile(s)}),L()),2&e&&(X(1),Fi(i.label))},directives:[Zf],styles:["[_nghost-%COMP%]   .upload-button[_ngcontent-%COMP%]{width:100%;height:2.25rem;transition:.6s;cursor:pointer;font-weight:500}"]}),n})(),Bke=(()=>{class n{constructor(){this.clsName="ccf-details-label",this.details=[]}arrayToString(e){return e.join(", ")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Ge({type:n,selectors:[["ccf-details-label"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{details:"details"},decls:1,vars:1,template:function(e,i){1&e&&Pe(0),2&e&&Fi(i.arrayToString(i.details))},styles:["[_nghost-%COMP%]{display:block;height:2.25rem}"],changeDetection:0}),n})();const Vke=["trigger"],jke=["panel"];function zke(n,t){if(1&n&&(N(0,"span",8),Pe(1),L()),2&n){const e=Dt();X(1),Fi(e.placeholder)}}function Uke(n,t){if(1&n&&(N(0,"span",12),Pe(1),L()),2&n){const e=Dt(2);X(1),Fi(e.triggerValue)}}function Hke(n,t){1&n&&jn(0,0,["*ngSwitchCase","true"])}function $ke(n,t){1&n&&(N(0,"span",9),Pt(1,Uke,2,1,"span",10),Pt(2,Hke,1,0,"ng-content",11),L()),2&n&&(le("ngSwitch",!!Dt().customTrigger),X(2),le("ngSwitchCase",!0))}function Gke(n,t){if(1&n){const e=Gr();N(0,"div",13),N(1,"div",14,15),Ce("@transformPanel.done",function(r){return Zn(e),Dt()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return Zn(e),Dt()._handleKeydown(r)}),jn(3,1),L(),L()}if(2&n){const e=Dt();le("@transformPanelWrap",void 0),X(1),function(n,t,e){Zl(Eo,qc,Mg(Me(),n,t,e),!0)}("mat-select-panel ",e._getPanelTheme(),""),Ef("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),le("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),cn("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Wke=[[["mat-select-trigger"]],"*"],qke=["mat-select-trigger","*"],P7={transformPanelWrap:lc("transformPanelWrap",[ao("* => void",Vre("@transformPanel",[Bre()],{optional:!0}))]),transformPanel:lc("transformPanel",[Ar("void",ci({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Ar("showing",ci({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Ar("showing-multiple",ci({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),ao("void => *",Ro("120ms cubic-bezier(0, 0, 0.2, 1)")),ao("* => void",Ro("100ms 25ms linear",ci({opacity:0})))])};let R7=0;const F7=new Ee("mat-select-scroll-strategy"),Zke=new Ee("MAT_SELECT_CONFIG"),Qke={provide:F7,deps:[ca],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};class Jke{constructor(t,e){this.source=t,this.value=e}}const eFe=Uf(Hf(dm(WO(class{constructor(n,t,e,i,r){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=r}})))),N7=new Ee("MatSelectTrigger");let tFe=(()=>{class n extends eFe{constructor(e,i,r,s,o,a,l,c,u,h,p,g,m,v){var y,C,w;super(o,s,l,c,h),this._viewportRuler=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._parentFormField=u,this._liveAnnouncer=m,this._defaultOptions=v,this._panelOpen=!1,this._compareWith=(A,k)=>A===k,this._uid="mat-select-"+R7++,this._triggerAriaLabelledBy=null,this._destroy=new G,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+R7++,this._panelDoneAnimatingStream=new G,this._overlayPanelClass=(null===(y=this._defaultOptions)||void 0===y?void 0:y.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(w=null===(C=this._defaultOptions)||void 0===C?void 0:C.disableOptionCentering)&&void 0!==w&&w,this.ariaLabel="",this.optionSelectionChanges=t0(()=>{const A=this.options;return A?A.changes.pipe(us(A),Fr(()=>zi(...A.map(k=>k.onSelectionChange)))):this._ngZone.onStable.pipe(Mi(1),Fr(()=>this.optionSelectionChanges))}),this.openedChange=new Le,this._openedStream=this.openedChange.pipe($n(A=>A),re(()=>{})),this._closedStream=this.openedChange.pipe($n(A=>!A),re(()=>{})),this.selectionChange=new Le,this.valueChange=new Le,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==v?void 0:v.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=v.typeaheadDebounceInterval),this._scrollStrategyFactory=g,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=jt(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=jt(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=jt(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Po(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Dz(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Zc(),Jn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Jn(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(us(null),Jn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&s&&!sa(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,r=e.keyCode,s=40===r||38===r,o=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==r&&32!==r||!i.activeItem||sa(e))if(!o&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Mi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectValue(i)),this._sortValues();else{const i=this._selectValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch(s){return!1}});return i&&this._selectionModel.select(i),i}_initKeyManager(){this._keyManager=new MV(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Jn(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Jn(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=zi(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Jn(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),zi(...this.options.map(i=>i._stateChanges)).pipe(Jn(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,i){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const i=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const i=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let r=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(E(qf),E(Qn),E(pt),E(Hy),E(ot),E(oa,8),E(vp,8),E(t_,8),E(cS,8),E(yc,10),ws("tabindex"),E(F7),E(NE),E(Zke,8))},n.\u0275dir=_e({type:n,viewQuery:function(e,i){if(1&e&&(fi(Vke,5),fi(jke,5),fi(Yz,5)),2&e){let r;Ft(r=Nt())&&(i.trigger=r.first),Ft(r=Nt())&&(i.panel=r.first),Ft(r=Nt())&&(i._overlayDir=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Et,oi]}),n})(),nFe=(()=>{class n extends tFe{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Jn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Mi(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const i=YO(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===i?0:function(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}((e+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new Jke(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(e.left+o-(r?s:0)),l=e.right+o-i.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,i,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?e*s:this._scrollTop===r?(e-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(e){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*i,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,i){const r=Math.round(e-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,i,r){const s=Math.round(e-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*e,256),o=i*e-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=YO(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const e=this._getItemHeight(),i=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275cmp=Ge({type:n,selectors:[["mat-select"]],contentQueries:function(e,i,r){if(1&e&&(Ui(r,N7,5),Ui(r,oS,5),Ui(r,sS,5)),2&e){let s;Ft(s=Nt())&&(i.customTrigger=s.first),Ft(s=Nt())&&(i.options=s),Ft(s=Nt())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,i){1&e&&Ce("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&e&&(cn("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),ht("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Vt([{provide:Gy,useExisting:n},{provide:rS,useExisting:n}]),Et],ngContentSelectors:qke,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,i){if(1&e&&(Rr(Wke),N(0,"div",0,1),Ce("click",function(){return i.toggle()}),N(3,"div",2),Pt(4,zke,2,1,"span",3),Pt(5,$ke,3,2,"span",4),L(),N(6,"div",5),st(7,"div",6),L(),L(),Pt(8,Gke,4,14,"ng-template",7),Ce("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&e){const r=io(1);cn("aria-owns",i.panelOpen?i.id+"-panel":null),X(3),le("ngSwitch",i.empty),cn("id",i._valueId),X(1),le("ngSwitchCase",!0),X(1),le("ngSwitchCase",!1),X(3),le("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[Ple,Dy,$D,Yz,UB,yE],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[P7.transformPanelWrap,P7.transformPanel]},changeDetection:0}),n})(),L7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[Qke],imports:[[Mn,Jy,aS,Xn],Zy,Wy,aS,Xn]}),n})();function iFe(n,t){if(1&n&&(N(0,"mat-option",5),Pe(1),L()),2&n){const e=t.$implicit;le("value",e),X(1),RC(" ",e.name," (",e.sites.length,") ")}}function rFe(n,t){if(1&n){const e=Gr();N(0,"mat-form-field",1),N(1,"mat-label",2),Pe(2,"Extraction Set"),L(),N(3,"mat-select",3),Ce("selectionChange",function(r){return Zn(e),Dt().extractionSetChanged(r.value)}),Pt(4,iFe,2,3,"mat-option",4),L(),L()}if(2&n){const e=Dt();X(3),le("value",e.sets[0]),X(1),le("ngForOf",e.sets)}}let sFe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-extraction-set-dropdown",this.setChange=new Le}extractionSetChanged(e){this.selected=e,this.ga.event("selected_extraction_set_change","extraction_set_dropdown",e.name),this.setChange.emit(e)}isMultiple(){return this.sets.length>1}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-extraction-set-dropdown"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{sets:"sets"},outputs:{setChange:"setChange"},decls:1,vars:1,consts:[["class","dropdown-form-field","appearance","fill",4,"ngIf"],["appearance","fill",1,"dropdown-form-field"],[1,"extraction-dropdown-label"],["disableOptionCentering","true","panelClass","extraction-set-panel",3,"value","selectionChange"],["class","extraction-set-options",3,"value",4,"ngFor","ngForOf"],[1,"extraction-set-options",3,"value"]],template:function(e,i){1&e&&Pt(0,rFe,5,2,"mat-form-field",0),2&e&&le("ngIf",i.isMultiple())},directives:[js,hm,Gf,nFe,rc,oS],styles:[".extraction-set-panel{box-shadow:0 0 .3rem .1rem #9e9e9e;position:absolute;top:-1rem;left:1rem;width:10.5rem}  .extraction-set-panel .extraction-set-options{height:2.5rem!important}  .extraction-set-panel .extraction-set-options:first-child{margin-top:.5rem}  .extraction-set-panel .extraction-set-options:last-child{margin-bottom:.5rem}[_nghost-%COMP%]     .mat-form-field{width:10.5rem}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper{padding-bottom:.5rem}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper .mat-form-field-flex{padding:0}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:.75rem}[_nghost-%COMP%]     .mat-form-field .mat-form-field-wrapper .mat-select-arrow-wrapper{transform:none}  .cdk-overlay-pane{min-width:0rem!important}"],changeDetection:0}),n})();function oFe(n,t){if(1&n&&(wf(0),st(1,"ccf-details-label",19),En(2,"async"),Cf()),2&n){const e=Dt();X(1),le("details",xn(2,1,e.detailsLabels$))}}function aFe(n,t){if(1&n){const e=Gr();N(0,"div",9),N(1,"ccf-extraction-set-dropdown",20,21),Ce("setChange",function(r){return Zn(e),Dt().model.setExtractionSites(r.sites)}),En(3,"async"),L(),N(4,"ccf-visibility-menu",22),Ce("itemsChange",function(r){return Zn(e),Dt().model.setExtractionSites(r)})("hover",function(r){return Zn(e),Dt().updateExtractionSiteTooltip(r)}),En(5,"async"),L(),L()}if(2&n){const e=Dt();X(1),le("sets",xn(3,2,e.model.extractionSets$)),X(3),le("items",xn(5,4,e.model.extractionSites$))}}function lFe(n,t){if(1&n&&(N(0,"div",23),Pe(1),L()),2&n){const e=Dt();X(1),Vs(" ",e.extractionSiteTooltip," ")}}const cFe=function(){return["Male","Female"]};let uFe=(()=>{class n{constructor(e,i,r){this.page=e,this.model=i,this.registration=r,this.clsName="ccf-left-sidebar",this.disableSlider=!1,this.modalClosed=!1,this.sexByLabel$=this.model.sex$.pipe(re(s=>"female"===s?"Female":"Male")),this.sideByLabel$=this.model.side$.pipe(re(s=>"left"===s?"L":"R")),this.organSelected$=this.model.organ$.pipe(re(s=>void 0!==s)),this.detailsLabels$=fr([this.model.organ$,this.model.side$,this.model.sex$]).pipe(re(([s,o,a])=>[null==s?void 0:s.name,o,a])),this.extractionSiteTooltip="",this.previousVisibilityItems=[...this.model.snapshot.anatomicalStructures],this.organList=RF}updateExtractionSiteTooltip(e){this.extractionSiteTooltip=(null==e?void 0:e.tooltip)?e.tooltip:""}setSexFromLabel(e){this.model.setSex("Female"===e?"female":"male")}setSideFromLabel(e){this.model.setSide("L"===e?"left":"right")}togglePreviousRegistrationBlocks(e){e&&(this.previousVisibilityItems=[...this.model.snapshot.anatomicalStructures]),this.model.toggleRegistrationBlocksVisibility(e,this.previousVisibilityItems)}updateRegistration(e){this.registration.editRegistration(e)}}return n.\u0275fac=function(e){return new(e||n)(E(fs),E(wi),E(xr))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-left-sidebar"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{disableSlider:"disableSlider",modalClosed:"modalClosed"},decls:31,vars:22,consts:[[1,"scroll-wrapper"],[1,"container"],[4,"ngIf"],["matTooltip","Select sex to filter organs.",1,"organ-sliders"],[1,"slider-label"],[1,"toggle","gender",3,"disabled","labels","value","valueChange"],[1,"anatomical-structures-menu",3,"expanded"],[1,"expansion-header"],["matTooltip","Use opacity icons to change visibility of anatomical structures",1,"expansion-title"],[1,"expansion-content"],[3,"items","itemsChange"],[1,"extraction-menu",3,"expanded"],["matTooltip","Some organs have predefined extraction sites--you can turn these on/off.",1,"expansion-title"],["class","expansion-content",4,"ngIf"],["toggleLabel","Previously Registered Blocks","matTooltip","If you previously registered tissue blocks, you can turn their positions on/off.",3,"visible","disabled","visibilityChanged"],[1,"space"],["class","extraction-site-tooltip mat-elevation-z8",4,"ngIf"],[1,"filler"],["label","UPLOAD PREVIOUS REGISTRATION DATA",3,"parsedJson"],[3,"details"],[3,"sets","setChange"],["dropdown",""],[3,"items","itemsChange","hover"],[1,"extraction-site-tooltip","mat-elevation-z8"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),Pt(2,oFe,3,3,"ng-container",2),En(3,"async"),N(4,"div",3),N(5,"div",4),Pe(6,"Donor Sex:"),L(),N(7,"ccf-labeled-slide-toggle",5),Ce("valueChange",function(s){return i.setSexFromLabel(s)}),En(8,"async"),L(),L(),st(9,"mat-divider"),N(10,"mat-expansion-panel",6),N(11,"mat-expansion-panel-header",7),N(12,"mat-panel-title",8),Pe(13,"Anatomical Structures"),L(),L(),N(14,"div",9),N(15,"ccf-visibility-menu",10),Ce("itemsChange",function(s){return i.model.setAnatomicalStructures(s)}),En(16,"async"),L(),L(),L(),st(17,"mat-divider"),N(18,"mat-expansion-panel",11),N(19,"mat-expansion-panel-header",7),N(20,"mat-panel-title",12),Pe(21,"Common Extraction Sites"),L(),L(),Pt(22,aFe,6,6,"div",13),En(23,"async"),L(),st(24,"mat-divider"),N(25,"ccf-visibility-toggle",14),Ce("visibilityChanged",function(s){return i.togglePreviousRegistrationBlocks(s)}),En(26,"async"),L(),st(27,"div",15),Pt(28,lFe,2,1,"div",16),st(29,"div",17),N(30,"ccf-json-file-reader",18),Ce("parsedJson",function(s){return i.updateRegistration(s)}),L(),L(),L()),2&e&&(X(2),le("ngIf",xn(3,11,i.page.registrationCallbackSet$)),X(5),le("disabled",i.disableSlider)("labels",WC(21,cFe))("value",xn(8,13,i.sexByLabel$)),X(3),le("expanded",i.modalClosed),X(5),le("items",xn(16,15,i.model.anatomicalStructures$)),X(3),le("expanded",i.modalClosed),X(4),le("ngIf",xn(23,17,i.organSelected$)),X(3),le("visible",xn(26,19,i.model.showPrevious$))("disabled",i.disableSlider),X(3),le("ngIf",i.extractionSiteTooltip.length>0))},directives:[js,bc,LF,S7,cM,uM,Oq,Eke,Fke,Lke,Bke,sFe],pipes:[Qu],styles:["[_nghost-%COMP%]{display:block;height:calc(100% - 3rem);margin-top:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]{overflow-y:scroll;height:100%;margin-right:.375rem;scrollbar-width:thin}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:.75rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1.5rem;margin-right:.375rem;min-height:100%}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]{height:3rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-width:3px}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .ccf-organ-selector[_ngcontent-%COMP%]{margin-top:1.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]{display:flex;height:3rem;align-items:center}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .organ-sliders[_ngcontent-%COMP%]   .slider-label[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .expansion-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]     .expansion-header, [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]     .expansion-header{-webkit-user-select:none;-moz-user-select:none;padding:0;font-weight:bold;height:3rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]     .expansion-header .mat-expansion-indicator, [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]     .expansion-header .mat-expansion-indicator{display:flex;align-items:center;justify-content:center;height:24px;width:24px}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%]{margin-bottom:.75rem;text-align:center;margin-top:2.25rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%]   .expansion-placeholder[_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .anatomical-structures-menu[_ngcontent-%COMP%]   .expansion-content[_ngcontent-%COMP%]   .expansion-placeholder[_ngcontent-%COMP%]{width:100%;font-size:.9rem;font-weight:400}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .extraction-site-tooltip[_ngcontent-%COMP%]{position:absolute;top:4rem;left:27rem;width:21rem;padding:1rem;border-radius:.5rem;border:1px solid;z-index:2}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})(),dFe=(()=>{class n{constructor(e,i,r){this.drawer=e,this.cdr=r,this.className="ccf-drawer-toggle-button",this.position="start",this.opened=!1,this.subscriptions=new Re;const s=i.connect(this);this.subscriptions.add(s.getMessagesFromSource(e).subscribe(o=>{this.handleMessage(o)&&r.markForCheck()}))}get classEnd(){return"end"===this.position}get icon(){let e="arrow_right",i="arrow_left";return"end"===this.position&&([e,i]=[i,e]),this.opened?i:e}ngAfterViewInit(){setTimeout(()=>{this.position=this.drawer.position,this.cdr.markForCheck()})}ngOnDestroy(){this.subscriptions.unsubscribe()}handleMessage(e){return"drawer-toggled"===e.payload.type&&(this.opened=e.payload.opened,!0)}toggle(){const e=this.drawer,{opened:i,expanded:r}=e;i?r?e.closeExpanded():e.close():e.open()}}return n.\u0275fac=function(e){return new(e||n)(E(VF),E(C0),E(Qn))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-drawer-toggle-button"]],hostVars:4,hostBindings:function(e,i){2&e&&(Yn(i.className),ht("ccf-drawer-toggle-button-end",i.classEnd))},decls:4,vars:4,consts:[["aria-hidden","false","aria-label","Close side drawer",1,"expand-collapse-icon",3,"click"]],template:function(e,i){1&e&&(N(0,"mat-icon",0),Ce("click",function(){return i.toggle()}),Pe(1," arrow_right\n"),L(),N(2,"mat-icon",0),Ce("click",function(){return i.toggle()}),Pe(3," arrow_left\n"),L()),2&e&&(ht("hidden","arrow_left"===i.icon),X(2),ht("hidden","arrow_right"===i.icon))},directives:[Us],styles:["[_nghost-%COMP%]{position:absolute;top:calc(50% - 2.0625rem);right:-1.0625rem;width:1.0625rem;height:3rem;border-radius:0 .25rem .25rem 0;cursor:pointer;transition:.25s}.ccf-drawer-toggle-button-end[_nghost-%COMP%]{right:unset;left:calc(-1rem - 1px);border-radius:.25rem 0 0 .25rem}[_nghost-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]{position:absolute;right:0rem;transition:.6s;padding-left:.15rem}[_nghost-%COMP%]   .expand-collapse-icon.hidden[_ngcontent-%COMP%]{opacity:0}.ccf-drawer-toggle-button-end[_nghost-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]{right:unset;left:-.25rem}.mat-icon[_ngcontent-%COMP%]{right:.3rem;top:.675rem;padding-top:.05rem}"],changeDetection:0}),n})();const B7={x:10,y:10,z:10};let hFe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-block-size-input",this.blockSize=B7,this.blockSizeChange=new Le}updateBlockSizes(e,i){const r=e.target;this.blockSize=Object.assign(Object.assign({},this.blockSize),{[i]:+r.value}),this.ga.event("block_size_change","block_size_input",i,this.blockSize[i]),this.blockSizeChange.emit(this.blockSize)}refreshBlockSize(){this.blockSize=B7,this.ga.event("block_size_reset","block_size_input"),this.blockSizeChange.emit(this.blockSize)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-block-size-input"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{blockSize:"blockSize"},outputs:{blockSizeChange:"blockSizeChange"},decls:19,vars:5,consts:[["matTooltip","Set the tissue block width, height and depth (dimensions)",1,"header"],[1,"text","title"],[1,"filler"],["matRipple","",1,"icon","refresh",3,"matRippleCentered","matRippleUnbounded","click"],[1,"size-inputs"],["floatLabel","always",1,"field"],[1,"text","label"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block width.",1,"input",3,"value","input"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block height.",1,"input",3,"value","input"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block depth.",1,"input",3,"value","input"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"span",1),Pe(2,"Tissue Block Dimensions (mm)"),L(),st(3,"div",2),N(4,"mat-icon",3),Ce("click",function(){return i.refreshBlockSize()}),Pe(5,"refresh"),L(),L(),N(6,"div",4),N(7,"mat-form-field",5),N(8,"mat-label",6),Pe(9,"Width (X)"),L(),N(10,"input",7),Ce("input",function(s){return i.updateBlockSizes(s,"x")}),L(),L(),N(11,"mat-form-field",5),N(12,"mat-label",6),Pe(13,"Height (Y)"),L(),N(14,"input",8),Ce("input",function(s){return i.updateBlockSizes(s,"y")}),L(),L(),N(15,"mat-form-field",5),N(16,"mat-label",6),Pe(17,"Depth (Z)"),L(),N(18,"input",9),Ce("input",function(s){return i.updateBlockSizes(s,"z")}),L(),L(),L()),2&e&&(X(4),le("matRippleCentered",!0)("matRippleUnbounded",!0),X(6),le("value",i.blockSize.x),X(4),le("value",i.blockSize.y),X(4),le("value",i.blockSize.z))},directives:[bc,Us,la,hm,Gf,n0],styles:["[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:1.5rem;align-items:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:33.33%}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(:last-child){padding-right:.75rem}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();const V7={thickness:NaN,numSlices:NaN};let fFe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-slices-input",this.slicesConfig=V7,this.slicesConfigChange=new Le}get hasThicknessValue(){return!isNaN(this.slicesConfig.thickness)}updateSlicesData(e,i){const{value:r}=e.target;this.slicesConfig=Object.assign(Object.assign({},this.slicesConfig),{[i]:""!==r?+r:NaN}),this.ga.event("slice_config_update","slice_input",i,this.slicesConfig[i]),this.slicesConfigChange.emit(this.slicesConfig)}refreshSlices(){this.slicesConfig=V7,this.ga.event("slice_config_reset","slice_input"),this.slicesConfigChange.emit(this.slicesConfig)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-slices-input"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{slicesConfig:"slicesConfig"},outputs:{slicesConfigChange:"slicesConfigChange"},decls:17,vars:6,consts:[[1,"header"],["matTooltip","\u201cAdd thickness of tissue slices and the total number of slices",1,"text","title"],[1,"filler"],["matRipple","",1,"icon","refresh",3,"matRippleCentered","matRippleUnbounded","click"],[1,"slices-inputs"],[1,"field"],[1,"text","label"],["matInput","","ccfNumbersOnly","","type","number","matTooltip","Enter thickness of tissue slices",1,"input",3,"value","input"],["matSuffix","",1,"suffix"],["matInput","","ccfNumbersOnly","","type","number","matTooltip","Enter total number of slices",1,"input",3,"value","input"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"span",1),Pe(2,"Tissue Slices"),L(),st(3,"div",2),N(4,"mat-icon",3),Ce("click",function(){return i.refreshSlices()}),Pe(5," refresh "),L(),L(),N(6,"div",4),N(7,"mat-form-field",5),N(8,"mat-label",6),Pe(9,"Thickness"),L(),N(10,"input",7),Ce("input",function(s){return i.updateSlicesData(s,"thickness")}),L(),N(11,"div",8),Pe(12,"\u03bcm"),L(),L(),N(13,"mat-form-field",5),N(14,"mat-label",6),Pe(15,"# Slices"),L(),N(16,"input",9),Ce("input",function(s){return i.updateSlicesData(s,"numSlices")}),L(),L(),L()),2&e&&(X(4),le("matRippleCentered",!0)("matRippleUnbounded",!0),X(6),le("value",i.slicesConfig.thickness),X(1),ht("show",i.hasThicknessValue),X(5),le("value",i.slicesConfig.numSlices))},directives:[bc,Us,la,hm,Gf,n0,ERe,XO],styles:["[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;height:1.5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:33.33%}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(:last-child){padding-right:.75rem}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field.mat-focused[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%], [_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .suffix.show[_ngcontent-%COMP%]{display:initial}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();const j7={x:0,y:0,z:0};let pFe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-rotation-slider",this.rotation=j7,this.rotationChange=new Le}changeRotation(e,i){this.rotation=Object.assign(Object.assign({},this.rotation),{[i]:+e}),this.ga.event("rotation_update","rotation_slider",i,+e),this.rotationChange.emit(this.rotation)}resetRotation(){this.rotation=j7,this.ga.event("rotation_reset","rotation_slider"),this.rotationChange.emit(this.rotation)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-rotation-slider"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{rotation:"rotation"},outputs:{rotationChange:"rotationChange"},decls:27,vars:23,consts:[[1,"header"],["matTooltip","Use sliders below to rotate tissue block for registration",1,"text","title"],[1,"filler"],["matRipple","",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"],[1,"slider-box","red"],[1,"text","label"],[1,"slider-container"],[1,"slider",3,"max","min","step","thumbLabel","tickInterval","value","input"],[1,"text","value"],[1,"slider-box","green"],[1,"slider-box","blue"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"span",1),Pe(2,"Tissue Block Rotation"),L(),st(3,"div",2),N(4,"mat-icon",3),Ce("click",function(){return i.resetRotation()}),Pe(5,"refresh"),L(),L(),N(6,"div",4),N(7,"span",5),Pe(8,"X"),L(),N(9,"div",6),N(10,"mat-slider",7),Ce("input",function(s){return i.changeRotation(s.value,"x")}),L(),L(),N(11,"span",8),Pe(12),L(),L(),N(13,"div",9),N(14,"span",5),Pe(15,"Y"),L(),N(16,"div",6),N(17,"mat-slider",7),Ce("input",function(s){return i.changeRotation(s.value,"y")}),L(),L(),N(18,"span",8),Pe(19),L(),L(),N(20,"div",10),N(21,"span",5),Pe(22,"Z"),L(),N(23,"div",6),N(24,"mat-slider",7),Ce("input",function(s){return i.changeRotation(s.value,"z")}),L(),L(),N(25,"span",8),Pe(26),L(),L()),2&e&&(X(4),le("matRippleCentered",!0)("matRippleUnbounded",!0),X(6),le("max",180)("min",-180)("step",1)("thumbLabel",!0)("tickInterval",180)("value",i.rotation.x),X(2),Fi(i.rotation.x),X(5),le("max",180)("min",-180)("step",1)("thumbLabel",!0)("tickInterval",180)("value",i.rotation.y),X(2),Fi(i.rotation.y),X(5),le("max",180)("min",-180)("step",1)("thumbLabel",!0)("tickInterval",180)("value",i.rotation.z),X(2),Fi(i.rotation.z))},directives:[bc,Us,la,zk],styles:["[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:1.5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]:hover{border-radius:2px}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:4rem;padding-left:.5rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:1rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:2.75rem;text-align:center}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]{width:100%;padding:1rem 2rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:not(.cdk-focused)     .mat-slider-thumb{width:1.25rem;height:1.25rem;transform:none}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-wrapper{right:.625rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-wrapper:after{margin-top:-.25rem;height:.625rem!important}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-ticks-container{margin-top:-.25rem;height:.625rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]     .mat-slider-horizontal .mat-slider-ticks-container .mat-slider-ticks{height:.625rem}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();function mFe(n){const{subscriber:t,counter:e,period:i}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:i},i)}const _Fe=["input"],vFe=function(n){return{enterDuration:n}},yFe=["*"],bFe=new Ee("mat-checkbox-default-options",{providedIn:"root",factory:z7});function z7(){return{color:"accent",clickAction:"check-indeterminate"}}let wFe=0;const U7=z7(),CFe={provide:Bo,useExisting:T(()=>H7),multi:!0};class EFe{}const SFe=Hf(zf(Uf(dm(class{constructor(n){this._elementRef=n}}))));let H7=(()=>{class n extends SFe{constructor(e,i,r,s,o,a,l){super(e),this._changeDetectorRef=i,this._focusMonitor=r,this._ngZone=s,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++wFe,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Le,this.indeterminateChange=new Le,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||U7,this.color=this.defaultColor=this._options.color||U7.color,this.tabIndex=parseInt(o)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=jt(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const i=jt(e);i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const i=e!=this._indeterminate;this._indeterminate=jt(e),i&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let i=this._currentCheckState,r=this._elementRef.nativeElement;if(i!==e&&(this._currentAnimationClass.length>0&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){const e=new EFe;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(e){var i;const r=null===(i=this._options)||void 0===i?void 0:i.clickAction;e.stopPropagation(),this.disabled||"noop"===r?!this.disabled&&"noop"===r&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==r&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,i){e?this._focusMonitor.focusVia(this._inputElement,e,i):this._inputElement.nativeElement.focus(i)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,i){if("NoopAnimations"===this._animationMode)return"";let r="";switch(e){case 0:if(1===i)r="unchecked-checked";else{if(3!=i)return"";r="unchecked-indeterminate"}break;case 2:r=1===i?"unchecked-checked":"unchecked-indeterminate";break;case 1:r=2===i?"checked-unchecked":"checked-indeterminate";break;case 3:r=1===i?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${r}`}_syncIndeterminate(e){const i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}}return n.\u0275fac=function(e){return new(e||n)(E(ot),E(Qn),E(wl),E(pt),ws("tabindex"),E(aa,8),E(bFe,8))},n.\u0275cmp=Ge({type:n,selectors:[["mat-checkbox"]],viewQuery:function(e,i){if(1&e&&(fi(_Fe,5),fi(la,5)),2&e){let r;Ft(r=Nt())&&(i._inputElement=r.first),Ft(r=Nt())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(e,i){2&e&&(pl("id",i.id),cn("tabindex",null),ht("mat-checkbox-indeterminate",i.indeterminate)("mat-checkbox-checked",i.checked)("mat-checkbox-disabled",i.disabled)("mat-checkbox-label-before","before"==i.labelPosition)("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Vt([CFe]),Et],ngContentSelectors:yFe,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,i){if(1&e&&(Rr(),N(0,"label",0,1),N(2,"span",2),N(3,"input",3,4),Ce("change",function(s){return i._onInteractionEvent(s)})("click",function(s){return i._onInputClick(s)}),L(),N(5,"span",5),st(6,"span",6),L(),st(7,"span",7),N(8,"span",8),Kt.lFrame.currentNamespace=Kn,N(9,"svg",9),st(10,"path",10),L(),Kt.lFrame.currentNamespace=null,st(11,"span",11),L(),L(),N(12,"span",12,13),Ce("cdkObserveContent",function(){return i._onLabelTextChange()}),N(14,"span",14),Pe(15,"\xa0"),L(),jn(16),L(),L()),2&e){const r=io(1),s=io(13);cn("for",i.inputId),X(2),ht("mat-checkbox-inner-container-no-side-margin",!s.textContent||!s.textContent.trim()),X(1),le("id",i.inputId)("required",i.required)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex),cn("value",i.value)("name",i.name)("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-checked",i._getAriaChecked())("aria-describedby",i.ariaDescribedby),X(2),le("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Wg(19,vFe,"NoopAnimations"===i._animationMode?0:150))}},directives:[la,sO],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),n})(),$7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})(),TFe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[cc,Xn,IE,$7],Xn,$7]}),n})();const xFe=["closeSearch"];function DFe(n,t){if(1&n){const e=Gr();N(0,"div",12),N(1,"mat-checkbox",13),Ce("ngModelChange",function(r){const o=Zn(e).$implicit;return Dt(2).checkedResults[o.id]=r}),Pe(2),L(),L()}if(2&n){const e=t.$implicit,i=Dt(2);X(1),le("ngModel",i.checkedResults[e.id]),X(1),Vs(" ",e.label," ")}}function OFe(n,t){if(1&n&&(N(0,"div",9),Pt(1,DFe,3,2,"div",10),N(2,"div",11),Pe(3),En(4,"i18nPlural"),L(),L()),2&n){const e=Dt();X(1),le("ngForOf",e.searchResults.results)("ngForTrackBy",e.tagId),X(2),Vs(" ",_3(4,3,e.searchResults.totalCount,e.countMapping)," ")}}const G7=5,NM={totalCount:0,results:[]};class Ap{constructor(t,e,i){this.el=t,this.ga=e,this.clsName="ccf-tag-search",this.placeholder="Add Anatomical Structures ...",this.added=new Le,this.countMapping={"=1":"1 result",other:"# results"},this.searchControl=new Oh,this.searchResults=NM,this.checkedResults={},this.resultsVisible=!1,this.destroy$=new G,this.searchControl.valueChanges.pipe(Jn(this.destroy$),function(n,t=mq){return e=>e.lift(new uxe(n,!!t.leading,!!t.trailing))}(()=>{var r;return function(n=0,t=kf){return(!nI(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=kf),new ue(e=>(e.add(t.schedule(mFe,n,{subscriber:e,counter:0,period:n})),e))}(null!==(r=this.searchThrottle)&&void 0!==r?r:100)},{leading:!0,trailing:!0}),Fr(this.executeSearch)).subscribe(r=>{this.searchResults=r,this.checkedResults=this.getUpdatedCheckedResults(r),i.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}tagId(t,e){return e.id}hasCheckedTags(){return Object.values(this.checkedResults).some(t=>t)}addTags(){const{searchControl:t,searchResults:e,checkedResults:i}=this,r=e.results.filter(s=>i[s.id]);r.length>0&&(t.reset(),this.searchResults=NM,this.checkedResults={},this.ga.event("tags_added","tag_search",r.map(s=>s.label).join(",")),this.added.emit(r))}openResults(){this.resultsVisible||(this.resultsVisible=!0)}closeResults(t){const{closeSearch:e}=this;this.resultsVisible&&t.target instanceof Node&&(!this.el.nativeElement.contains(t.target)||e.nativeElement.contains(t.target))&&(this.resultsVisible=!1)}executeSearch(t){const{search:e,searchLimit:i=G7}=this;return t&&e?gi(e(t,i)).pipe(ka(()=>[NM]),re(this.truncateResults)):[NM]}truncateResults(t){const{searchLimit:e=G7}=this,i=t.results;return i.length>e?Object.assign(Object.assign({},t),{results:i.slice(0,e)}):t}getUpdatedCheckedResults(t){const e=this.checkedResults;return t.results.reduce((i,{id:r})=>{var s;return i[r]=null!==(s=e[r])&&void 0!==s&&s,i},{})}}function PFe(n,t){if(1&n&&(N(0,"div",11),N(1,"div",12),Pe(2),L(),N(3,"div",13),Pe(4),L(),L()),2&n){const e=t.$implicit;X(2),Fi(e.label),X(2),Fi(e.value)}}Ap.\u0275fac=function(t){return new(t||Ap)(E(ot),E(fo),E(Qn))},Ap.\u0275cmp=Ge({type:Ap,selectors:[["ccf-tag-search"]],viewQuery:function(t,e){if(1&t&&fi(xFe,5,ot),2&t){let i;Ft(i=Nt())&&(e.closeSearch=i.first)}},hostVars:2,hostBindings:function(t,e){1&t&&Ce("click",function(){return e.openResults()})("focusin",function(){return e.openResults()})("click",function(r){return e.closeResults(r)},!1,dv)("focusin",function(r){return e.closeResults(r)},!1,dv),2&t&&Yn(e.clsName)},inputs:{placeholder:"placeholder",search:"search",searchLimit:"searchLimit",searchThrottle:"searchThrottle"},outputs:{added:"added"},decls:10,vars:8,consts:[[1,"spacer"],["appearance","outline",1,"overlay"],[1,"search-box"],["matInput","","type","search",3,"placeholder","formControl"],["search",""],["matSuffix","",1,"add-button",3,"disabled","click"],["closeSearch",""],[1,"icon"],["class","results",4,"ngIf"],[1,"results"],["class","item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"count"],[1,"item"],["labelPosition","after",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const i=Gr();st(0,"div",0),N(1,"mat-form-field",1),N(2,"div",2),st(3,"input",3,4),N(5,"button",5,6),Ce("click",function(){Zn(i);const s=io(4);return e.addTags(),s.focus()}),N(7,"mat-icon",7),Pe(8,"add"),L(),L(),L(),Pt(9,OFe,5,6,"div",8),L()}2&t&&(X(1),ht("expanded",e.resultsVisible),X(2),le("placeholder",e.placeholder)("formControl",e.searchControl),X(2),ht("active",e.hasCheckedTags()),le("disabled",!e.hasCheckedTags()),X(4),le("ngIf",e.resultsVisible))},directives:[hm,n0,Kb,bk,aM,XO,Us,js,rc,H7,Ik],pipes:[GB],styles:["[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{height:3.25rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:10}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;height:3rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{border-radius:.25rem;border:none;display:flex;justify-content:center;align-items:center;cursor:pointer;height:100%}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{margin-top:.5rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.75rem;text-align:end}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0;border-radius:.5rem}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-wrapper .mat-form-field-flex{padding-right:0!important}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-outline{opacity:1!important}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-outline-thick{opacity:0!important}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]     .mat-form-field-infix{padding:.313rem .063rem .063rem;border:0}[_nghost-%COMP%]   .overlay.expanded[_ngcontent-%COMP%]     .mat-form-field-wrapper{box-shadow:0 0 .3rem .1rem #9e9e9e5e}"],changeDetection:0}),Ve([gu.ak],Ap.prototype,"executeSearch",null),Ve([gu.ak],Ap.prototype,"truncateResults",null);let RFe=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i,this.clsName="ccf-review-modal",this.metaData=i.metaData,this.registrationCallbackSet=i.registrationCallbackSet}close(){var e;null===(e=document.getElementsByClassName("modal-animated")[0])||void 0===e||e.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}}return n.\u0275fac=function(e){return new(e||n)(E(n_),E(Gk))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-review-modal"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:14,vars:2,consts:[[1,"ccf-about","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography"],[1,"display-fields"],["class","field",4,"ngFor","ngForOf"],[1,"footer"],["mat-button","",1,"download-button",3,"click"],[1,"field"],[1,"label"],[1,"data"]],template:function(e,i){1&e&&(N(0,"div",0),N(1,"div",1),N(2,"div",2),N(3,"mat-icon",3),Ce("click",function(){return i.close()}),Pe(4,"clear"),L(),L(),N(5,"div",4),N(6,"h2",5),Pe(7,"Registration Review"),L(),N(8,"mat-dialog-content",6),N(9,"div",7),Pt(10,PFe,5,2,"div",8),L(),L(),N(11,"div",9),N(12,"button",10),Ce("click",function(){return i.dialogRef.close(!0)}),Pe(13),L(),L(),L(),L(),L()),2&e&&(X(10),le("ngForOf",i.metaData),X(3),Fi(i.registrationCallbackSet?"REGISTER":"DOWNLOAD REGISTRATION DATA"))},directives:[Us,Sq,Mq,rc,Zf],styles:[".mat-dialog-container{padding:0}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:3rem;background-color:#fff}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;margin-bottom:0}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]{justify-content:space-around;display:flex}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;width:100%}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:50%;text-align:right;padding-right:1rem}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .display-fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{width:50%;text-align:left;padding-left:1rem}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;margin-top:1rem;margin-right:1rem;cursor:pointer}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding-top:1.5rem;display:flex;justify-content:space-around}[_nghost-%COMP%]   .ccf-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .review-button[_ngcontent-%COMP%]{height:3rem}"]}),n})(),kFe=(()=>{class n{constructor(e,i){this.dialog=e,this.ga=i,this.clsName="ccf-review-button",this.registrationCallbackSet=!0,this.metaData=[],this.displayErrors=!0,this.registrationIsValid=!1,this.registerData=new Le,this.enterErrorMode=new Le}ngOnChanges(){this.registrationIsValid=Boolean(this.metaData[0].value&&this.metaData[1].value&&this.metaData[2].value)}get disabled(){return!this.registrationIsValid}registerButtonClick(e){return e&&e.preventDefault(),this.enterErrorMode.emit(),this.registrationIsValid&&(this.ga.event("review_start","review_button"),this.launchReviewModal()),!1}launchReviewModal(){this.dialog.open(RFe,{panelClass:"modal-animated",width:"60rem",data:{registrationCallbackSet:this.registrationCallbackSet,metaData:this.metaData}}).afterClosed().subscribe(i=>{i&&(this.ga.event("register","review_button"),this.registerData.emit())})}}return n.\u0275fac=function(e){return new(e||n)(E(i_),E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-review-button"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{registrationCallbackSet:"registrationCallbackSet",metaData:"metaData",displayErrors:"displayErrors",registrationIsValid:"registrationIsValid"},outputs:{registerData:"registerData",enterErrorMode:"enterErrorMode"},features:[oi],decls:2,vars:4,consts:[["mat-button","",1,"review-button",3,"matTooltip","click"]],template:function(e,i){1&e&&(N(0,"button",0),Ce("click",function(s){return i.registerButtonClick(s)}),Pe(1),L()),2&e&&(ht("disabled",i.disabled),le("matTooltip",i.disabled?"Required: Select an organ and position tissue block inside organ.":"Review registration and submit/download."),X(1),Vs(" ",i.registrationCallbackSet?"REVIEW AND REGISTER":"REVIEW AND DOWNLOAD","\n"))},directives:[Zf,bc],styles:[".review-button[_ngcontent-%COMP%]{width:100%;height:2.25rem;transition:.6s;font-weight:500}.review-button.disabled[_ngcontent-%COMP%]{cursor:not-allowed}"]}),n})();function FFe(n,t){if(1&n){const e=Gr();N(0,"mat-chip",2),Ce("removed",function(){const s=Zn(e).$implicit;return Dt().removeTag(s)}),Pe(1),N(2,"mat-icon",3),Pe(3,"cancel"),L(),L()}if(2&n){const e=t.$implicit;Yn(Dt().tagClasses(e)),X(1),Vs(" ",e.label," ")}}let NFe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-tag-list",this.tagRemoved=new Le,this.tagsChange=new Le}tagId(e,i){return i.id}tagClasses(e){return"added"===e.type?["added"]:["assigned"]}removeTag(e){this.tags=this.tags.filter(i=>i!==e),this.ga.event("tag_removed","tag_list",e.label),this.tagRemoved.emit(e),this.tagsChange.emit(this.tags)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-tag-list"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{tags:"tags"},outputs:{tagRemoved:"tagRemoved",tagsChange:"tagsChange"},decls:2,vars:2,consts:[["selectable","false"],["removable","","disableRipple","",3,"class","removed",4,"ngFor","ngForOf","ngForTrackBy"],["removable","","disableRipple","",3,"removed"],["matChipRemove","",1,"icon","remove"]],template:function(e,i){1&e&&(N(0,"mat-chip-list",0),Pt(1,FFe,4,3,"mat-chip",1),L()),2&e&&(X(1),le("ngForOf",i.tags)("ngForTrackBy",i.tagId))},directives:[O7,rc,E0,Us,x7],styles:["[_nghost-%COMP%]{display:block;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]     .mat-chip-list-wrapper{margin:0}"],changeDetection:0}),n})();function LFe(n,t){if(1&n){const e=Gr();N(0,"ccf-tag-list",20),Ce("tagRemoved",function(r){return Zn(e),Dt().astags.removeTag(r)}),En(1,"async"),L()}2&n&&le("tags",xn(1,1,Dt().astags.tags$))}function BFe(n,t){}let VFe=(()=>{class n{constructor(e,i,r,s){this.model=e,this.registration=i,this.page=r,this.astags=s,this.clsName="ccf-right-sidebar",this.modalClosed=!1}}return n.\u0275fac=function(e){return new(e||n)(E(wi),E(xr),E(fs),E(zo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-right-sidebar"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},inputs:{modalClosed:"modalClosed"},decls:34,vars:27,consts:[[1,"scroll-wrapper"],[1,"container"],[1,"info-button-container"],["videoID","ftmAn_XhafY","infoTitle","HuBMAP CCF Registration User Interface"],[3,"blockSize","blockSizeChange"],[3,"slicesConfig","slicesConfigChange"],[3,"rotation","rotationChange"],[1,"tags-container",3,"expanded"],[1,"header"],["matTooltip","Review tags generated via collision detection. Add or delete tags as needed."],[3,"search","added"],["class","tag-list",3,"tags","tagRemoved",4,"ngIf","ngIfElse"],["tagListPlaceholder",""],[1,"legend"],[1,"dot","assigned"],[1,"text","assigned"],[1,"dot","added"],[1,"text","added"],[1,"filler"],[3,"registrationCallbackSet","displayErrors","registrationIsValid","metaData","registerData","enterErrorMode"],[1,"tag-list",3,"tags","tagRemoved"]],template:function(e,i){if(1&e&&(N(0,"div",0),N(1,"div",1),N(2,"div",2),st(3,"ccf-info-button",3),L(),N(4,"ccf-block-size-input",4),Ce("blockSizeChange",function(s){return i.model.setBlockSize(s)}),En(5,"async"),L(),N(6,"ccf-slices-input",5),Ce("slicesConfigChange",function(s){return i.model.setSlicesConfig(s)}),En(7,"async"),L(),N(8,"ccf-rotation-slider",6),Ce("rotationChange",function(s){return i.model.setRotation(s)}),En(9,"async"),L(),st(10,"mat-divider"),N(11,"mat-expansion-panel",7),N(12,"mat-expansion-panel-header",8),N(13,"mat-panel-title",9),Pe(14,"Anatomical Structure Tags"),L(),L(),N(15,"ccf-tag-search",10),Ce("added",function(s){return i.astags.addTags(s)}),L(),Pt(16,LFe,2,3,"ccf-tag-list",11),En(17,"async"),Pt(18,BFe,0,0,"ng-template",null,12,qC),N(20,"div",13),st(21,"span",14),N(22,"span",15),Pe(23,"Assigned"),L(),st(24,"span",16),N(25,"span",17),Pe(26,"Added"),L(),L(),L(),st(27,"mat-divider"),st(28,"div",18),N(29,"ccf-review-button",19),Ce("registerData",function(){return i.registration.register()})("enterErrorMode",function(){return i.registration.setDisplayErrors(!i.registration.isValid)}),En(30,"async"),En(31,"async"),En(32,"async"),En(33,"async"),L(),L(),L()),2&e){const r=io(19);let s;X(4),le("blockSize",xn(5,11,i.model.blockSize$)),X(2),le("slicesConfig",xn(7,13,i.model.slicesConfig$)),X(2),le("rotation",xn(9,15,i.model.rotation$)),X(3),le("expanded",i.modalClosed),X(4),le("search",i.astags.searchExternal),X(1),le("ngIf",null==(s=xn(17,17,i.model.organ$))?null:s.name)("ngIfElse",r),X(13),le("registrationCallbackSet",xn(30,19,i.page.registrationCallbackSet$))("displayErrors",xn(31,21,i.registration.displayErrors$))("registrationIsValid",xn(32,23,i.registration.valid$))("metaData",xn(33,25,i.registration.metadata$))}},directives:[wRe,hFe,fFe,pFe,S7,cM,uM,Oq,bc,Ap,js,kFe,NFe],pipes:[Qu],styles:["[_nghost-%COMP%]{display:block;height:calc(100% - 3rem);margin-top:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]{height:100%;margin-right:.375rem;scrollbar-width:thin}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:.75rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;margin-left:1.5rem;margin-right:.375rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .info-button-container[_ngcontent-%COMP%]{height:3.75rem;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-width:3px}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 .5rem 0 0;font-weight:bold;-webkit-user-select:none;-moz-user-select:none;font-size:1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]{overflow:visible}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding-left:0;padding-right:0}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:3rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .icon.add[_ngcontent-%COMP%]{position:absolute;width:3.625rem;height:3.625rem;font-size:3.625rem;top:-1.9375rem;right:-1.1875rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .tag-list[_ngcontent-%COMP%]{max-height:7.5rem;margin-left:-1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .tag-list-placeholder[_ngcontent-%COMP%]{display:flex;height:4rem;align-items:center;justify-content:center;font-weight:400}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;width:100%;margin-top:1.5rem;align-items:center;font-size:.9rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border-radius:50%}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .dot.assigned[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .dot.added[_ngcontent-%COMP%]{margin-left:1rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .tags-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .scroll-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();function W7(n,t){return Zc((e,i)=>t?t(e[n],i[n]):e[n]===i[n])}const jFe=["input"],zFe=function(n){return{enterDuration:n}},UFe=["*"],HFe=new Ee("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let q7=0;const GFe={provide:Bo,useExisting:T(()=>Z7),multi:!0};class Y7{constructor(t,e){this.source=t,this.value=e}}const X7=new Ee("MatRadioGroup");let K7=(()=>{class n{constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+q7++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Le}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=jt(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=jt(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Y7(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(E(Qn))},n.\u0275dir=_e({type:n,inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"}}),n})(),Z7=(()=>{class n extends K7{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=qn(n)))(i||n)}}(),n.\u0275dir=_e({type:n,selectors:[["mat-radio-group"]],contentQueries:function(e,i,r){if(1&e&&Ui(r,Q7,5),2&e){let s;Ft(s=Nt())&&(i._radios=s)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[Vt([GFe,{provide:X7,useExisting:n}]),Et]}),n})();class WFe{constructor(t){this._elementRef=t}}const qFe=Uf(Hf(WFe));let YFe=(()=>{class n extends qFe{constructor(e,i,r,s,o,a,l,c){super(i),this._changeDetector=r,this._focusMonitor=s,this._radioDispatcher=o,this._providerOverride=l,this._uniqueId="mat-radio-"+ ++q7,this.id=this._uniqueId,this.change=new Le,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=e,this._noopAnimations="NoopAnimations"===a,c&&(this.tabIndex=Po(c,0)),this._removeUniqueSelectionListener=o.listen((u,h)=>{u!==this.id&&h===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const i=jt(e);this._checked!==i&&(this._checked=i,i&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!i&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),i&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(jt(e))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=jt(e)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return`${this.id||this._uniqueId}-input`}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Y7(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){const i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(E(K7),E(ot),E(Qn),E(wl),E(gS),E(String),E(void 0),E(String))},n.\u0275dir=_e({type:n,viewQuery:function(e,i){if(1&e&&fi(jFe,5),2&e){let r;Ft(r=Nt())&&(i._inputElement=r.first)}},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[Et]}),n})(),Q7=(()=>{class n extends YFe{constructor(e,i,r,s,o,a,l,c){super(e,i,r,s,o,a,l,c)}}return n.\u0275fac=function(e){return new(e||n)(E(X7,8),E(ot),E(Qn),E(wl),E(gS),E(aa,8),E(HFe,8),ws("tabindex"))},n.\u0275cmp=Ge({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(e,i){1&e&&Ce("focus",function(){return i._inputElement.nativeElement.focus()}),2&e&&(cn("tabindex",null)("id",i.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),ht("mat-radio-checked",i.checked)("mat-radio-disabled",i.disabled)("_mat-animation-noopable",i._noopAnimations)("mat-primary","primary"===i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[Et],ngContentSelectors:UFe,decls:13,vars:20,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(e,i){if(1&e&&(Rr(),N(0,"label",0,1),N(2,"span",2),st(3,"span",3),st(4,"span",4),N(5,"input",5,6),Ce("change",function(s){return i._onInputInteraction(s)})("click",function(s){return i._onInputClick(s)}),L(),N(7,"span",7),st(8,"span",8),L(),L(),N(9,"span",9),N(10,"span",10),Pe(11,"\xa0"),L(),jn(12),L(),L()),2&e){const r=io(1);cn("for",i.inputId),X(5),le("id",i.inputId)("checked",i.checked)("disabled",i.disabled)("tabIndex",i.tabIndex)("required",i.required),cn("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),X(2),le("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Wg(18,zFe,i._noopAnimations?0:150)),X(2),ht("mat-radio-label-before","before"==i.labelPosition)}},directives:[la],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),XFe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[cc,Xn],Xn]}),n})();const KFe=["label"],ZFe=["options"],QFe=function(){return["Register","3D\xa0Preview"]};let JFe=(()=>{class n{constructor(e){this.ga=e,this.clsName="ccf-stage-nav",this.side="anterior",this.view3D=!1,this.sideChange=new Le,this.view3DChange=new Le,this.isDropdownActive=!1,this.isDropdownHidden=!0}set useDropdownMenu(e){this.isDropdownActive=e,this.isDropdownHidden=!0}get labelEl(){return this.labelRef.nativeElement}get optionsEl(){return this.optionsRef.nativeElement}handleClick(e){const{isDropdownHidden:i,labelEl:r,optionsEl:s}=this;r.contains(e)?this.isDropdownHidden=!i:s.contains(e)||(this.isDropdownHidden=!0)}updateSide(e){this.ga.event("side_update","stage_nav",e),"3D"===e?this.updateView(!0):(this.updateView(!1),this.side=e,this.sideChange.emit(this.side))}updateView(e){this.view3D=e,this.ga.event("view_update","stage_nav",e?"3D":"Register"),this.view3DChange.emit(this.view3D)}}return n.\u0275fac=function(e){return new(e||n)(E(fo))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-stage-nav"]],viewQuery:function(e,i){if(1&e&&(fi(KFe,7),fi(ZFe,7)),2&e){let r;Ft(r=Nt())&&(i.labelRef=r.first),Ft(r=Nt())&&(i.optionsRef=r.first)}},hostVars:2,hostBindings:function(e,i){1&e&&Ce("click",function(s){return i.handleClick(s.target)},!1,cg),2&e&&Yn(i.clsName)},inputs:{useDropdownMenu:"useDropdownMenu",side:"side",view3D:"view3D"},outputs:{sideChange:"sideChange",view3DChange:"view3DChange"},decls:18,vars:10,consts:[[1,"dropdown-label"],["label",""],[1,"stage-options"],["options",""],[1,"input-group",3,"value","change"],["value","left",1,"nav-input"],["value","right",1,"nav-input"],["value","anterior","checked","",1,"nav-input"],["value","posterior",1,"nav-input"],["matTooltip","Change view.",1,"view-slider",3,"labels","value","valueChange"]],template:function(e,i){1&e&&(N(0,"div",0,1),N(2,"mat-label"),Pe(3,"Options"),L(),N(4,"mat-icon"),Pe(5,"arrow_drop_down"),L(),L(),N(6,"div",2,3),N(8,"mat-radio-group",4),Ce("change",function(s){return i.updateSide(s.value)}),N(9,"mat-radio-button",5),Pe(10,"Left"),L(),N(11,"mat-radio-button",6),Pe(12,"Right"),L(),N(13,"mat-radio-button",7),Pe(14,"Anterior"),L(),N(15,"mat-radio-button",8),Pe(16,"Posterior"),L(),L(),N(17,"ccf-labeled-slide-toggle",9),Ce("valueChange",function(s){return i.updateView("Register"!==s)}),L(),L()),2&e&&(ht("dropdown",i.isDropdownActive),X(6),ht("dropdowncontainer",i.isDropdownActive)("hidden",i.isDropdownActive&&i.isDropdownHidden),X(2),le("value",i.side),X(9),le("labels",WC(9,QFe))("value",i.view3D?"3D\xa0Preview":"Register"))},directives:[Gf,Us,Z7,Q7,LF,bc],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}[_nghost-%COMP%]   .dropdown-label[_ngcontent-%COMP%]{display:none;align-items:center}[_nghost-%COMP%]   .dropdown-label[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%], [_nghost-%COMP%]   .dropdown-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{line-height:1.5rem}[_nghost-%COMP%]   .dropdown-label.dropdown[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:start}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .nav-input[_ngcontent-%COMP%]{margin-right:1.5rem;margin-bottom:1.5rem}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]   .view-slider[_ngcontent-%COMP%]{margin-left:-1rem;margin-bottom:1.5rem;white-space:nowrap}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:.25rem;width:16.5rem;position:absolute;top:3.5rem;z-index:1;transition:opacity .25s}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-top:.5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{margin-bottom:.5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:0;display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .nav-input[_ngcontent-%COMP%]{display:flex;margin:0 1.5rem 0 0;height:2.5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   .view-slider[_ngcontent-%COMP%]{display:flex;align-items:center;height:3rem;margin:0 .5rem}[_nghost-%COMP%]   .stage-options.dropdowncontainer[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{visibility:visible;border-top:2px solid}[_nghost-%COMP%]   .stage-options.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .25s,opacity .25s}[_nghost-%COMP%]   .stage-options.hidden[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),n})();function eNe(n,t){if(1&n){const e=Gr();N(0,"ccf-body-ui",16),Ce("rotationChange",function(r){Zn(e),Dt();const s=io(24);return s.rotation=r[0],s.rotationX=r[1]}),En(1,"async"),En(2,"async"),En(3,"async"),L()}if(2&n){const e=Dt();le("scene",xn(1,5,e.scene.nodes$))("rotation",xn(2,7,e.scene.rotation$))("bounds",xn(3,9,e.bounds$))("zoom",11.5)("interactive",!0)}}function tNe(n,t){if(1&n){const e=Gr();N(0,"ccf-body-ui",17),Ce("nodeDrag",function(r){return Zn(e),Dt().handleNodeDrag(r)}),En(1,"async"),En(2,"async"),L()}if(2&n){const e=Dt();le("scene",xn(1,4,e.scene.rotatedNodes$))("interactive",!1)("bounds",xn(2,6,e.bounds$))("zoom",11.5)}}function nNe(n,t){1&n&&st(0,"ccf-store-debug",18)}function iNe(n,t){if(1&n){const e=Gr();N(0,"div",19),N(1,"button",20),Ce("click",function(){Zn(e);const r=Dt();return r.debugMode=!r.debugMode}),Pe(2,"State"),L(),N(3,"button",21),Ce("click",function(){return Zn(e),Dt().registration.setUseRegistrationCallback(!0)}),Pe(4,"Use callback"),L(),N(5,"button",21),Ce("click",function(){return Zn(e),Dt().registration.setUseRegistrationCallback(!1)}),Pe(6,"Use download"),L(),L()}}let rNe=(()=>{class n{constructor(e,i,r,s,o,a){this.model=e,this.page=i,this.registration=r,this.scene=s,this.rootRef=o,this.cdr=a,this.clsName="ccf-content",this.position$=this.model.position$.pipe(re(l=>({x:Math.floor(l.x),y:Math.floor(l.y),z:Math.floor(l.z)}))),this.is3DView$=this.model.viewType$.pipe(re(l=>"3d"===l)),this.bounds$=this.model.organDimensions$.pipe(re(l=>({x:Math.max(l.x,this.model.defaultPosition.x+40)/1e3,y:Math.max(l.y,this.model.defaultPosition.y+40)/1e3,z:Math.max(l.z,this.model.defaultPosition.z+40)/1e3})),W7("x"),W7("y")),this.isNarrowView=!1,this.debugMode=!1,this.showDebugButtons=!1}ngOnInit(){this.sensor=new _q.ResizeSensor(this.rootRef.nativeElement,({width:e})=>{const i=e<440;this.isNarrowView!==i&&(this.isNarrowView=i,this.cdr.markForCheck())})}ngOnDestroy(){this.sensor.detach()}setViewType(e){this.model.setViewType(e?"3d":"register")}resetStage(){this.model.setPosition(this.model.defaultPosition),this.model.setViewSide("anterior"),this.model.setViewType("register")}handleNodeDrag(e){if("#DraftPlacement"===e.node["@id"]&&e.info.coordinate){const[i,r]=e.info.coordinate.map(u=>1e3*u),{position:s,viewSide:o,organDimensions:a}=this.model.snapshot,l=[a.x,a.y,a.z].map(u=>u/2);let c=s;switch(o){case"anterior":c={x:i+l[0],y:r+l[1],z:s.z};break;case"posterior":c={x:-i+l[0],y:r+l[1],z:s.z};break;case"left":c={x:s.x,y:r+l[1],z:-i+l[2]};break;case"right":c={x:s.x,y:r+l[1],z:i+l[2]}}this.model.setPosition(c)}}}return n.\u0275fac=function(e){return new(e||n)(E(wi),E(fs),E(xr),E(ps),E(ot),E(Qn))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-content"]],hostVars:2,hostBindings:function(e,i){2&e&&Yn(i.clsName)},decls:29,vars:34,consts:[[1,"top-bar"],[3,"useDropdownMenu","view3D","side","view3DChange","sideChange"],["matRipple","","matRippleColor","rgba(204, 204, 204, 0.25)",1,"icon","reset",3,"matRippleCentered","matRippleUnbounded","click"],[1,"main-content"],["class","body-ui","camera","perspective",3,"scene","rotation","bounds","zoom","interactive","rotationChange",4,"ngIf"],["class","body-ui","camera","orthographic",3,"scene","interactive","bounds","zoom","nodeDrag",4,"ngIf"],[1,"gizmo-area"],[1,"position-display"],[1,"position"],[1,"x"],[1,"y"],[1,"z"],[1,"gizmo",3,"scene","rotation","interactive","zoom"],["gizmo",""],["class","debug",4,"ngIf"],["style","position: absolute; bottom: 1rem; display: flex; flex-direction: row; justify-content: space-between; width: 7rem;",4,"ngIf"],["camera","perspective",1,"body-ui",3,"scene","rotation","bounds","zoom","interactive","rotationChange"],["camera","orthographic",1,"body-ui",3,"scene","interactive","bounds","zoom","nodeDrag"],[1,"debug"],[2,"position","absolute","bottom","1rem","display","flex","flex-direction","row","justify-content","space-between","width","7rem"],[2,"width","3rem","font-size",".7rem",3,"click"],[3,"click"]],template:function(e,i){if(1&e&&(N(0,"div",0),N(1,"ccf-stage-nav",1),Ce("view3DChange",function(s){return i.setViewType(s)})("sideChange",function(s){return i.model.setViewSide(s)}),En(2,"async"),En(3,"async"),L(),N(4,"mat-icon",2),Ce("click",function(){return i.resetStage()}),Pe(5,"refresh"),L(),L(),N(6,"div",3),Pt(7,eNe,4,11,"ccf-body-ui",4),En(8,"async"),Pt(9,tNe,3,8,"ccf-body-ui",5),En(10,"async"),N(11,"div",6),N(12,"div",7),N(13,"div",8),N(14,"div",9),Pe(15),En(16,"async"),L(),N(17,"div",10),Pe(18),En(19,"async"),L(),N(20,"div",11),Pe(21),En(22,"async"),L(),L(),L(),st(23,"ccf-body-ui",12,13),En(25,"async"),En(26,"async"),L(),L(),Pt(27,nNe,1,0,"ccf-store-debug",14),Pt(28,iNe,7,0,"div",15)),2&e){let r,s,o;X(1),le("useDropdownMenu",i.isNarrowView)("view3D",xn(2,16,i.is3DView$))("side",xn(3,18,i.model.viewSide$)),X(3),le("matRippleCentered",!0)("matRippleUnbounded",!0),X(3),le("ngIf","3d"===xn(8,20,i.model.viewType$)),X(2),le("ngIf","register"===xn(10,22,i.model.viewType$)),X(6),Vs("X: ",null==(r=xn(16,24,i.position$))?null:r.x,""),X(3),Vs("Y: ",null==(s=xn(19,26,i.position$))?null:s.y,""),X(3),Vs("Z: ",null==(o=xn(22,28,i.position$))?null:o.z,""),X(2),le("scene",xn(25,30,i.scene.gizmo$))("rotation",xn(26,32,i.scene.rotation$))("interactive",!1)("zoom",9.5),X(4),le("ngIf",i.showDebugButtons&&i.debugMode),X(1),le("ngIf",i.showDebugButtons)}},directives:[JFe,Us,la,js,YPe,nRe],pipes:[Qu],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;padding:1.5rem;overflow:hidden}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;height:calc(100% - 1rem)}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .body-ui[_ngcontent-%COMP%]{flex:auto;transition:opacity 1s}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]{width:4rem;margin-top:1.5rem;margin-left:1.5rem;z-index:10}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]   .position-display[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]   .gizmo[_ngcontent-%COMP%]{height:5.5rem}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .gizmo-area[_ngcontent-%COMP%]   .gizmo[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{opacity:0;z-index:0}[_nghost-%COMP%]   .ccf-store-debug[_ngcontent-%COMP%]{color:#fff;position:absolute;top:.5rem;max-width:55rem}"],changeDetection:0}),n})();const sNe=function(n){return[n]};let oNe=(()=>{class n{constructor(e,i,r,s,o,a,l,c){this.model=e,this.page=i,this.tracking=r,this.snackbar=s,this.theming=o,this.globalConfig=c,this.organList=RF,this.open=!0,this.registrationStarted=!1,this.disablePositionChange=!1,this.subscriptions=new Re,o.initialize(a,l),this.subscriptions.add(i.registrationCallbackSet$.subscribe(u=>{this.open=!u})),this.subscriptions.add(i.registrationStarted$.subscribe(u=>{this.registrationStarted=u}))}ngOnInit(){const e=this.snackbar.openFromComponent(DRe,{data:{preClose:()=>{e.dismiss()}},duration:void 0===this.tracking.snapshot.allowTelemetry?1/0:3e3})}handleKey(e){const i=this.model.snapshot.position;if(this.disablePositionChange||!this.registrationStarted)return;let r=i;switch(e.key){case"q":r=Object.assign(Object.assign({},i),{z:i.z+.5});break;case"e":r=Object.assign(Object.assign({},i),{z:i.z-.5});break;case"w":r=Object.assign(Object.assign({},i),{y:i.y+.5});break;case"s":r=Object.assign(Object.assign({},i),{y:i.y-.5});break;case"a":r=Object.assign(Object.assign({},i),{x:i.x-.5});break;case"d":r=Object.assign(Object.assign({},i),{x:i.x+.5})}this.model.setPosition(r)}handleClick(e){this.disablePositionChange="INPUT"===e.nodeName}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(E(wi),E(fs),E(IF),E(Xle),E(NF),E(ot),E(Bt),E(Rh))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-root"]],hostBindings:function(e,i){1&e&&Ce("keydown",function(s){return i.handleKey(s)},!1,cg)("click",function(s){return i.handleClick(s.target)},!1,cg)},decls:18,vars:16,consts:[["opened",""],[3,"modalClosed","disableSlider"],["position","end","opened",""],[3,"modalClosed"],[1,"selector-drawer"],[3,"organList","selectedOrgans","organsChanged"],["organSelector",""],[1,"expand-collapse-icon"],["aria-hidden","false","aria-label","Close carousel drawer",3,"click"],[1,"stage-content"]],template:function(e,i){if(1&e&&(st(0,"ccf-registration-modal"),st(1,"ccf-header"),N(2,"ccf-drawer-container"),N(3,"ccf-drawer",0),st(4,"ccf-left-sidebar",1),st(5,"ccf-drawer-toggle-button"),L(),N(6,"ccf-drawer",2),st(7,"ccf-right-sidebar",3),st(8,"ccf-drawer-toggle-button"),L(),N(9,"ccf-drawer-content"),N(10,"div",4),N(11,"ccf-organ-selector",5,6),Ce("organsChanged",function(s){return i.model.setOrgan(s[0])}),En(13,"async"),L(),N(14,"div",7),N(15,"mat-icon",8),Ce("click",function(){return i.open=!i.open}),Pe(16),L(),L(),L(),st(17,"ccf-content",9),L(),L()),2&e){const r=io(12);X(4),le("modalClosed",i.registrationStarted)("disableSlider",!(null!=r.selectedOrgans[0]&&r.selectedOrgans[0].hasSex)),X(3),le("modalClosed",i.registrationStarted),X(3),ht("closed",!i.open),X(1),ht("closed",!i.open),le("organList",i.organList)("selectedOrgans",Wg(14,sNe,xn(13,12,i.model.organ$))),X(5),Vs(" ",i.open?"arrow_drop_up":"arrow_drop_down"," "),X(1),ht("expanded-stage",!i.open)}},directives:[ZRe,tke,cke,VF,uFe,dFe,VFe,RM,s7,Us,rNe],pipes:[Qu],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;font-size:1rem;color:#000}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer[_ngcontent-%COMP%]{width:25.5rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]{position:relative;z-index:1}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   ccf-organ-selector[_ngcontent-%COMP%]{height:100%;padding-top:.5rem;transition:all .5s}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   ccf-organ-selector.closed[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]{top:0rem;display:flex;flex-direction:column;position:relative;justify-content:center;height:5.688rem;transition:all .5s ease-in-out}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]{width:3rem;height:1.2rem;position:absolute;bottom:0;right:calc(50% - 1.5rem);margin-bottom:-1.2rem;z-index:99;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:#fff;border-bottom-left-radius:.2rem;border-bottom-right-radius:.2rem;transition:.6s}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer[_ngcontent-%COMP%]   .expand-collapse-icon[_ngcontent-%COMP%]:hover{background-color:#ececec}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .selector-drawer.closed[_ngcontent-%COMP%]{height:3rem;top:-2.9rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .stage-content[_ngcontent-%COMP%]{border-radius:.5rem!important;height:calc(100% - 2.688rem - 3rem - 1.5rem)}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-drawer-content[_ngcontent-%COMP%]   .expanded-stage[_ngcontent-%COMP%]{height:calc(100% - 1.5rem);padding-bottom:1rem}[_nghost-%COMP%]   ccf-drawer-container[_ngcontent-%COMP%]   ccf-content[_ngcontent-%COMP%]{position:absolute;transition-duration:.5s;transition-timing-function:ease-in-out;transition-property:all;bottom:1.5rem;z-index:1}"],changeDetection:0}),n})();function aNe(n,t){1&n&&st(0,"ccf-root")}function UF(n,t){if("string"!=typeof t)return t;try{return JSON.parse(t)}catch(e){return void console.error(`Failed to parse RUI.${n} as JSON. Error: `,e)}}function HF(n,t){if("string"!=typeof t)return t;console.error(`RUI.${n} must be a function`)}const J7={baseHref:function(n,t){return t},useDownload:function(n,t){return"false"!==String(t)},user:UF,organ:UF,editRegistration:UF,register:HF,cancelRegistration:HF,fetchPreviousRegistrations:HF};let uNe=(()=>{class n{constructor(e,i){this.globalConfig=e,this.cdr=i,this.initialized=!1,this.changes={}}ngOnChanges(e){this.initialized?this.applyConfigChanges(e,this.globalConfig.snapshot):this.changes=Object.assign(Object.assign({},this.changes),e)}ngOnInit(){setTimeout(this.initialize.bind(this),500)}initialize(){const e=globalThis,i="ruiConfig";this.applyConfigChanges(this.changes,"object"==typeof e[i]&&null!==e[i]?e[i]:{}),this.changes={},this.initialized=!0,this.cdr.markForCheck()}applyConfigChanges(e,i){const r=Object.assign({},i);for(const[s,{currentValue:o}]of Object.entries(e))if(s in J7)if(null==o)delete r[s];else{const a=J7[s](s,o);void 0!==a&&(r[s]=a)}this.globalConfig.setConfig(r)}}return n.\u0275fac=function(e){return new(e||n)(E(Rh),E(Qn))},n.\u0275cmp=Ge({type:n,selectors:[["ccf-root-wc"]],inputs:{baseHref:"baseHref",useDownload:"useDownload",user:"user",organ:"organ",editRegistration:"editRegistration",register:"register",cancelRegistration:"cancelRegistration",fetchPreviousRegistrations:"fetchPreviousRegistrations"},features:[oi],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,i){1&e&&Pt(0,aNe,1,0,"ccf-root",0),2&e&&le("ngIf",i.initialized)},directives:[js,oNe],encapsulation:2,changeDetection:0}),n})();const dNe=new Ee("Global configuration object");function hNe(n){return n.get("ruiConfig",{user:{firstName:"",lastName:""}})}let fNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[{provide:dNe,useFactory:hNe,deps:[l7]}]}),n})(),pNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[{provide:Cy,useValue:NF.initialize,multi:!0},NF]}),n})(),gNe=(()=>{class n{constructor(e,i){this.accessor=e,this.injector=i}static forRoot(e=[]){return{ngModule:n,providers:[zr,Ua,Yq,...e]}}}return n.\u0275fac=function(e){return new(e||n)(I(zr,2),I(Ua,2))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const LM=(n,t)=>((n,t)=>new Array(t+1).join("0"))(0,t-n.toString().length)+n;class vNe{constructor(t,e,i){this.action=t,this.store=e,this.logWriter=i}dispatched(t){const e=mp(this.action),i=function(n){return LM(n.getHours(),2)+":"+LM(n.getMinutes(),2)+":"+LM(n.getSeconds(),2)+"."+LM(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${e} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",t)}completed(t){this.logWriter.logGreen("next state",t),this.logWriter.endGroup()}errored(t){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",t),this.logWriter.endGroup()}_hasPayload(t){return this._getNonEmptyProperties(t).length>0}_getNonEmptyProperties(t){return Object.keys(t).map(r=>t[r]).filter(r=>void 0!==r)}}class yNe{constructor(t){this.options=t,this.options=this.options||{},this.logger=t.logger||console}startGroup(t){const e=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{e.call(this.logger,t)}catch(i){console.log(t)}}endGroup(){try{this.logger.groupEnd()}catch(t){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(t,e){this.log(t,"color: #9E9E9E; font-weight: bold",e)}logGreen(t,e){this.log(t,"color: #4CAF50; font-weight: bold",e)}logRedish(t,e){this.log(t,"color: #FD8182; font-weight: bold",e)}log(t,e,i){this.isIE()?this.logger.log(t,i):this.logger.log("%c "+t,e,i)}isIE(){const t="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let e=!1;const i=t.indexOf("MSIE "),r=t.indexOf("Trident/");return(i>-1||r>-1)&&(e=!0),e}}const eY=new Ee("NGXS_LOGGER_PLUGIN_OPTIONS");let bNe=(()=>{class n{constructor(e,i){this._options=e,this._injector=i}handle(e,i,r){if(this._options.disabled||!this._options.filter(i,e))return r(e,i);this._logWriter=this._logWriter||new yNe(this._options),this._store=this._store||this._injector.get(Ah);const s=new vNe(i,this._store,this._logWriter);return s.dispatched(e),r(e,i).pipe(Ni(o=>{s.completed(o)}),ka(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(e){return new(e||n)(I(eY),I(Bt))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const tY=new Ee("LOGGER_USER_OPTIONS");function wNe(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let CNe=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:ok,useClass:bNe,multi:!0},{provide:tY,useValue:e},{provide:eY,useFactory:wNe,deps:[tY]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const $F=new Ee("NGXS_STORAGE_PLUGIN_OPTION"),nY=new Ee("STORAGE_ENGINE"),GF="@@STATE",iY="NGXS_OPTIONS_META";function ENe(n){return Array.isArray(n)||(n=[n]),n.map(t=>(t.hasOwnProperty(iY)&&(t=t[iY].name),t instanceof class{constructor(t){this.name=t,(function(n){return n.hasOwnProperty(ak)||Object.defineProperty(n,ak,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),fk(n)}(this)).makeRootSelector=i=>i.getStateGetter(this.name)}getName(){return this.name}toString(){return`StateToken[${this.name}]`}}?t.getName():t))}function SNe(n){return void 0!==n&&n.key&&(n.key=ENe(n.key)),Object.assign({key:[GF],storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:t=>t,afterDeserialize:t=>t},n)}function MNe(n,t){return qD(t)?null:0===n.storage?localStorage:1===n.storage?sessionStorage:null}let ANe=(()=>{class n{constructor(e,i,r){this._options=e,this._engine=i,this._platformId=r}handle(e,i,r){if(qD(this._platformId)&&null===this._engine)return r(e,i);const s=this._options.key,o=function(n){const t=mp(n);return function(e){return t===mp(e)}}(i),a=o(lW)||o(cW);let l=!1;if(a)for(const c of s){const u=c===GF;let h=this._engine.getItem(c);if("undefined"!==h&&null!=h){try{const p=this._options.deserialize(h);h=this._options.afterDeserialize(p,c)}catch(p){console.error("Error ocurred while deserializing the store value, falling back to empty object."),h={}}this._options.migrations&&this._options.migrations.forEach(p=>{p.version===Km(h,p.versionKey||"version")&&(!p.key&&u||p.key===c)&&(h=p.migrate(h),l=!0)}),e=u?Object.assign({},e,h):lk(e,c,h)}}return r(e,i).pipe(Ni(c=>{if(!a||a&&l)for(const u of s){let h=c;u!==GF&&(h=Km(c,u));try{const p=this._options.beforeSerialize(h,u);this._engine.setItem(u,this._options.serialize(p))}catch(p){console.error("Error ocurred while serializing the store value, value not updated.")}}}))}}return n.\u0275fac=function(e){return new(e||n)(I($F),I(nY),I(vl))},n.\u0275prov=pe({token:n,factory:n.\u0275fac}),n})();const rY=new Ee("USER_OPTIONS");let TNe=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:ok,useClass:ANe,multi:!0},{provide:rY,useValue:e},{provide:$F,useFactory:SNe,deps:[rY]},{provide:nY,useFactory:MNe,deps:[$F,vl]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({}),n})();const sY=[{name:"logo",namespace:"app",url:"assets/icons/logo-rui.svg"},{name:"bladder",namespace:"app",url:"assets/icons/organs/ico-organs_bladder.svg"},{name:"bone_marrow",namespace:"app",url:"assets/icons/organs/ico-organs-bone-marrow.svg"},{name:"brain",namespace:"app",url:"assets/icons/organs/ico-organs_brain.svg"},{name:"heart",namespace:"app",url:"assets/icons/organs/ico-organs_heart.svg"},{name:"kidney-left",namespace:"app",url:"assets/icons/organs/ico-organs-kidney-left.svg"},{name:"kidney",namespace:"app",url:"assets/icons/organs/ico-organs_kidney.svg"},{name:"kidney-right",namespace:"app",url:"assets/icons/organs/ico-organs-kidney-right.svg"},{name:"large_intestine",namespace:"app",url:"assets/icons/organs/ico-organs-large-intestine.svg"},{name:"liver",namespace:"app",url:"assets/icons/organs/ico-organs_liver.svg"},{name:"lung-left",namespace:"app",url:"assets/icons/organs/ico-organs-lung-left.svg"},{name:"lung",namespace:"app",url:"assets/icons/organs/ico-organs_lung.svg"},{name:"lung-right",namespace:"app",url:"assets/icons/organs/ico-organs-lung-right.svg"},{name:"lymph_nodes",namespace:"app",url:"assets/icons/organs/ico-organs-lymph-nodes.svg"},{name:"ovary-left",namespace:"app",url:"assets/icons/organs/ico-organs-ovaries.svg"},{name:"ovary-right",namespace:"app",url:"assets/icons/organs/ico-organs-ovaries.svg"},{name:"skin",namespace:"app",url:"assets/icons/organs/ico-organs-skin.svg"},{name:"small_intestine",namespace:"app",url:"assets/icons/organs/ico-organs_small intestine.svg"},{name:"spleen",namespace:"app",url:"assets/icons/organs/ico-organs_spleen.svg"},{name:"stomach",namespace:"app",url:"assets/icons/organs/ico-organs-stomach.svg"},{name:"thymus",namespace:"app",url:"assets/icons/organs/ico-organs-thymus.svg"},{name:"vasculature",namespace:"app",url:"assets/icons/organs/ico-organs-vasculature-thick.svg"},{name:"opacity",namespace:"app",url:"assets/icons/opacity-24px.svg"},{name:"visibility_on",namespace:"app",url:"assets/icons/visibility-on-24px.svg"},{name:"visibility_off",namespace:"app",url:"assets/icons/visibility-off-24px.svg"},{name:"visibility_off_cube",namespace:"app",url:"assets/icons/ico-cube.svg"}];let Cd=class extends TOe{constructor(t,e,i){super(),this.registry=t,this.sanitizer=e,this.globalConfig=i}ngxsOnInit(){var t;sY.filter(e=>void 0!==e.html).map(e=>Object.assign(Object.assign({},e),{html:this.sanitizer.bypassSecurityTrustHtml(e.html)})).forEach(e=>this.registerIconImpl(e)),null===(t=this.registry)||void 0===t||t.addSvgIconResolver((e,i)=>{var r;const s=sY.find(a=>{var l,c;return(null!==(l=a.name)&&void 0!==l?l:"")===e&&(null!==(c=a.namespace)&&void 0!==c?c:"")===i});if(void 0===s||void 0===s.url)return null;const o=null!==(r=this.globalConfig.snapshot.baseHref)&&void 0!==r?r:"";return this.sanitizer.bypassSecurityTrustResourceUrl(o+s.url)})}registerIcon(t){return this.registerIconImpl(t)}registerIconImpl(t){if(!this.registry||!t.url&&!t.html)return!1;const e=this.registry,r=e[this.getMethodName(t)],s=this.getArguments(t);if(!r)return!1;try{return r.apply(e,s),!0}catch(o){return!1}}getMethodName({name:t,namespace:e,url:i}){const r=["addSvgIcon"];return t||r.push("Set"),i||r.push("Literal"),e&&r.push("InNamespace"),r.join("")}getArguments({name:t,namespace:e,url:i,html:r}){return[e,t,null!=i?i:r].filter(o=>!!o)}};Cd.\u0275fac=function(t){return new(t||Cd)(I(Xy,8),I(dh),I(Rh))},Cd.\u0275prov=pe({token:Cd,factory:Cd.\u0275fac}),Ve([an()],Cd.prototype,"registerIcon",null),Cd=Ve([yd(),vd({name:"iconRegistry"})],Cd);const xNe=[Rh,Cd,fs,wi,zo,Cc,xr,ps,IF];let DNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[gNe.forRoot(),pa.forRoot(xNe,{developmentMode:!1}),TNe.forRoot({key:["registration.registrations"]}),CNe.forRoot({disabled:true})]]}),n})(),ONe=(()=>{class n{constructor(e){if(e)throw new Error("The core module should only be imported once in the root module")}}return n.\u0275fac=function(e){return new(e||n)(I(n,12))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[wz,i7.forRoot(!1===u7?"":Mp_googleAnalyticsToken,[{command:"set",values:[{app:"rui"}]}]),ARe,fNe,DNe,pNe]]}),n})(),WF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,y7]]}),n})(),INe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,XFe,L7,Nr,zF,WF,wc]]}),n})(),PNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr]]}),n})(),RNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,INe,Nr,iRe,PNe,cc,XPe]]}),n})(),kNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr,wc]]}),n})(),FNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn]]}),n})(),NNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,L7]]}),n})(),oY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,y7,r0,Bk,Vk,wc]]}),n})(),LNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr,cc,a7]]}),n})(),aY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr,I7]]}),n})(),BNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Qf]]}),n})(),VNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Xk,Nr,wc,zF,FNe,WF,oY,aY,NNe,a7,LNe,aY,BNe]]}),n})(),jNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Qf,wc,oY,WF,o7]]}),n})(),zNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Wk,Nr,jNe]]}),n})(),UNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,r0,Nr,cc,wc]]}),n})(),HNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Nr,Cq,cc,wc]]}),n})(),$Ne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,r0,Nr,cc,wc,SRe]]}),n})(),GNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,I7,Nr]]}),n})(),WNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Bk,Vk,Qf,TFe,Wy,Nr,r0]]}),n})(),qNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Wk,Nr,Qf]]}),n})(),YNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,qNe,Qf,wc]]}),n})(),XNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({imports:[[Mn,Xk,zF,Nr,GO,wc,UNe,YNe,HNe,$Ne,GNe,WNe,CRe]]}),n})(),KNe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[{provide:w7,useValue:b7}],imports:[[ME,GO,Nr]]}),n})(),ZNe=(()=>{class n{constructor(e){this.injector=e}ngDoBootstrap(){const e=function(n,t){const e=function(n,t){return t.get(gl).resolveComponentFactory(n).inputs}(n,t.injector),i=t.strategyFactory||new Rie(n,t.injector),r=function(n){const t={};return n.forEach(({propName:e,templateName:i})=>{t[function(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}(i)]=e}),t}(e);class s extends Fie{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||t.injector);e.forEach(({propName:l})=>{if(!this.hasOwnProperty(l))return;const c=this[l];delete this[l],a.setInputValue(l,c)})}return this._ngElementStrategy}attributeChangedCallback(a,l,c,u){this.ngElementStrategy.setInputValue(r[a],c)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=function(n,t,e){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(t,!1,!1,e),s}return new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:e})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(r),e.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(uNe,{injector:this.injector});customElements.define("ccf-rui",e)}}return n.\u0275fac=function(e){return new(e||n)(I(Bt))},n.\u0275mod=ke({type:n}),n.\u0275inj=Ae({providers:[{provide:m7,useValue:"light-theme"},{provide:az,useValue:{appearance:"standard",floatLabel:!1,hideRequiredMarker:!0}}],imports:[[ME,GO,ONe,Nr,KNe,kNe,RNe,VNe,XNe,o7,zNe,ORe,oU]]}),n})();(function(){if(Y3)throw new Error("Cannot enable prod mode after platform setup.");q3=!1})(),nie().bootstrapModule(ZNe).catch(n=>console.error(n))},948:ft=>{ft.exports=function(xe){return xe&&xe.__esModule?xe:{default:xe}},ft.exports.default=ft.exports,ft.exports.__esModule=!0},321:ft=>{function qe(xe){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(ft.exports=qe=function(F){return typeof F},ft.exports.default=ft.exports,ft.exports.__esModule=!0):(ft.exports=qe=function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},ft.exports.default=ft.exports,ft.exports.__esModule=!0),qe(xe)}ft.exports=qe,ft.exports.default=ft.exports,ft.exports.__esModule=!0},774:(ft,qe,xe)=>{ft.exports=xe(941)},833:ft=>{function qe(xe){return Promise.resolve().then(()=>{var bt=new Error("Cannot find module '"+xe+"'");throw bt.code="MODULE_NOT_FOUND",bt})}qe.keys=()=>[],qe.resolve=qe,qe.id=833,ft.exports=qe},540:()=>{},207:()=>{},307:()=>{}},ft=>{ft(ft.s=81)}]);