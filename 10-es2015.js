var _g=Object.defineProperty,yg=Object.defineProperties,mg=Object.getOwnPropertyDescriptors,bs=Object.getOwnPropertySymbols,xl=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable,El=(e,t,n)=>t in e?_g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lr=(e,t)=>{for(var n in t||(t={}))xl.call(t,n)&&El(e,n,t[n]);if(bs)for(var n of bs(t))Sl.call(t,n)&&El(e,n,t[n]);return e},Hi=(e,t)=>yg(e,mg(t)),Nl=(e,t)=>{var n={};for(var r in e)xl.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&bs)for(var r of bs(e))t.indexOf(r)<0&&Sl.call(e,r)&&(n[r]=e[r]);return n};!function(){var e={71440:function(e,t,n){var r=n(91052).default;e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){var r,i;r=this,i=function(e,t,n,r,i){"use strict";function o(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})}function a(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function s(e){var t=e.length,n=0;return new i.Readable({objectMode:!0,read:function(){this.push(n<t?e[n++]:null)}})}e.addJsonLdToStore=function(e,n){return o(this,void 0,void 0,function(){var r,i,o;return a(this,function(a){switch(a.label){case 0:return"string"!=typeof e?[3,4]:[4,fetch(e,{redirect:"follow"})];case 1:return(i=a.sent()).ok?[4,i.json()]:[3,3];case 2:r=a.sent(),a.label=3;case 3:return[3,5];case 4:r=e,a.label=5;case 5:return r?[4,t.toRDF(r)]:[3,7];case 6:o=a.sent(),n.import(s(o)),a.label=7;case 7:return[2,n]}})})},e.addN3ToStore=function(e,t){return o(this,void 0,void 0,function(){var r,i,o;return a(this,function(a){switch(a.label){case 0:return"string"==typeof e&&(null==e?void 0:e.startsWith("http"))?[4,fetch(e,{redirect:"follow"})]:[3,4];case 1:return(i=a.sent()).ok?[4,i.text()]:[3,3];case 2:r=a.sent(),a.label=3;case 3:return[3,5];case 4:r=e,a.label=5;case 5:return r&&(o=new n.Parser({format:"n3"}).parse(r),t.import(s(o))),[2,t]}})})},e.addRdfXmlToStore=function(e,t){return o(this,void 0,void 0,function(){var i,o,s,u;return a(this,function(a){switch(a.label){case 0:return"string"==typeof e&&(null==e?void 0:e.startsWith("http"))?[4,fetch(e,{redirect:"follow"})]:[3,4];case 1:return(o=a.sent()).ok?[4,o.text()]:[3,3];case 2:i=a.sent(),a.label=3;case 3:return[3,5];case 4:i=e,a.label=5;case 5:return i?(s=new r.RdfXmlParser({dataFactory:n.DataFactory,strict:!0}),u=new Promise(function(e){s.once("end",function(){return e(t)})}),t.import(s),s.write(i),s.end(),[2,u]):[2,t]}})})},e.arrayToStream=s,e.deserializeN3Store=function(e,t){var r=JSON.parse(e),i=new n.Store;return Object.assign(i,r,{_factory:null!=t?t:n.DataFactory}),i},e.serializeN3Store=function(e){var t=Object.assign({},e);return delete t._factory,JSON.stringify(t)},e.streamToArray=function(e){return new Promise(function(t,n){var r=[];e.on("data",function(e){r.push(e)}).once("end",function(){t(r)}).once("error",function(e){n(e)})})},Object.keys(n).forEach(function(t){"default"!==t&&!e.hasOwnProperty(t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("jsonld"),e("n3"),e("rdfxml-streaming-parser"),e("readable-stream")):i((r="undefined"!=typeof globalThis?globalThis:r||self).tripleStoreUtils={},r.jsonld,r.n3,r.rdfxmlStreamingParser,r.readablestream)},{jsonld:26,n3:43,"rdfxml-streaming-parser":64,"readable-stream":81}],2:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[1];return 3*(t[0]+n)/4-n},n.toByteArray=function(e){var t,n,r=c(e),a=r[0],s=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(d(e,s,s+a>u?u:s+a));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,n){for(var r=[],i=t;i<n;i+=3)r.push(l((e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2])));return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],3:[function(e,t,n){},{}],4:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:6}],5:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":4}],6:[function(e,t,n){(function(t){(function(){"use strict";var t=e("base64-js"),r=e("ieee754");n.Buffer=a,n.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=a.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|d(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||G(e.length)?o(0):l(e):"Buffer"===e.type&&Array.isArray(e.data)?l(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|d(e))}function l(e){for(var t=e.length<0?0:0|d(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(e).length;default:if(i)return r?-1:P(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){d=!1;break}if(d)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(G(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return F(P(t,e.length-n),e,n,r)}function v(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return v(e,t,n,r)}function w(e,t,n,r){return F(C(t),e,n,r)}function x(e,t,n,r){return F(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,n,r){return t.fromByteArray(0===n&&r===e.length?e:e.slice(n,r))}function j(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}n.kMaxLength=i,!(a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(B(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},a.prototype.toLocaleString=a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?j(this,0,e):h.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),d=0;d<u;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=D(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,i,o){return t=+t,n>>>=0,o||R(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function L(e,t,n,i,o){return t=+t,n>>>=0,o||R(e,0,n,8),r.write(e,t,n,i,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=a.prototype,r},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),r.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),r.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),r.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),r.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||k(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||k(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);k(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);k(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var M=/[^+/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function P(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function C(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":2,buffer:6,ieee754:9}],7:[function(e,t,n){"use strict";t.exports=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((t,n,r)=>t+(0===r?"":",")+e(void 0===n||"symbol"==typeof n?null:n),"")+"]":"{"+Object.keys(t).sort().reduce((n,r,i)=>void 0===t[r]||"symbol"==typeof t[r]?n:n+(0===n.length?"":",")+e(r)+":"+e(t[r]),"")+"}"}},{}],8:[function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):y(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},{}],9:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*g}},{}],10:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,t,n){"use strict";const{isArray:i,isObject:o,isString:a}=e("./types"),{asArray:s}=e("./util"),{prependBase:u}=e("./url"),c=e("./JsonLdError"),l=e("./ResolvedContext");function d(e){throw new c("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function f({context:e,base:t}){if(!e)return;const n=e["@context"];if(a(n))e["@context"]=u(t,n);else if(i(n))for(let r=0;r<n.length;++r){const e=n[r];a(e)?n[r]=u(t,e):o(e)&&f({context:{"@context":e},base:t})}else if(o(n))for(const r in n)f({context:n[r],base:t})}t.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}resolve({activeCtx:e,context:t,documentLoader:n,base:u,cycles:c=new Set}){var f=this;return r(function*(){t&&o(t)&&t["@context"]&&(t=t["@context"]),t=s(t);const r=[];for(const s of t){if(a(s)){let t=f._get(s);t||(t=yield f._resolveRemoteContext({activeCtx:e,url:s,documentLoader:n,base:u,cycles:c})),i(t)?r.push(...t):r.push(t);continue}if(null===s){r.push(new l({document:null}));continue}o(s)||d(t);const h=JSON.stringify(s);let p=f._get(h);p||(p=new l({document:s}),f._cacheResolvedContext({key:h,resolved:p,tag:"static"})),r.push(p)}return r})()}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(n,t)}return t}_resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:i,cycles:o}){var a=this;return r(function*(){t=u(i,t);const{context:r,remoteDoc:s}=yield a._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:o});f({context:r,base:i=s.documentUrl||t});const c=yield a.resolve({activeCtx:e,context:r,documentLoader:n,base:i,cycles:o});return a._cacheResolvedContext({key:t,resolved:c,tag:s.tag}),c})()}_fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:s}){return r(function*(){if(s.size>10)throw new c("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(s.has(t))throw new c("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let r,u;s.add(t);try{u=yield n(t),r=u.document||null,a(r)&&(r=JSON.parse(r))}catch(l){throw new c("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:l})}if(!o(r))throw new c("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return r="@context"in r?{"@context":r["@context"]}:{"@context":{}},u.contextUrl&&(i(r["@context"])||(r["@context"]=[r["@context"]]),r["@context"].push(u.contextUrl)),{context:r,remoteDoc:u}})()}}},{"./JsonLdError":12,"./ResolvedContext":16,"./types":30,"./url":31,"./util":32}],12:[function(e,t,n){"use strict";t.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},{}],13:[function(e,t,n){"use strict";t.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},{}],14:[function(e,t,n){"use strict";t.exports=e("rdf-canonize").NQuads},{"rdf-canonize":46}],15:[function(e,t,n){"use strict";t.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}add(e){var t=this;return r(function*(){let n=t._requests[e];if(n)return Promise.resolve(n);n=t._requests[e]=t._loader(e);try{return yield n}finally{delete t._requests[e]}})()}}},{}],16:[function(e,t,n){"use strict";const r=e("lru-cache");t.exports=class{constructor({document:e}){this.document=e,this.cache=new r({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},{"lru-cache":33}],17:[function(e,t,n){"use strict";const i=e("./JsonLdError"),{isArray:o,isObject:a,isString:s,isUndefined:u}=e("./types"),{isList:c,isValue:l,isGraph:d,isSimpleGraph:f,isSubjectReference:h}=e("./graphTypes"),{expandIri:p,getContextValue:g,isKeyword:y,process:m,processingMode:b}=e("./context"),{removeBase:v,prependBase:_}=e("./url"),{addValue:w,asArray:x,compareShortestLeast:S}=e("./util"),j={};function N(e,t,n){if("@nest"!==p(e,t,{vocab:!0},n))throw new i("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}t.exports=j,j.compact=function(){var e=r(function*({activeCtx:e,activeProperty:t=null,element:n,options:r={},compactionMap:p=(()=>{})}){if(o(n)){let i=[];for(let o=0;o<n.length;++o){let a=yield j.compact({activeCtx:e,activeProperty:t,element:n[o],options:r,compactionMap:p});null===a&&(a=yield p({unmappedValue:n[o],activeCtx:e,activeProperty:t,parent:n,index:o,options:r}),void 0===a)||i.push(a)}return r.compactArrays&&1===i.length&&0===(g(e,t,"@container")||[]).length&&(i=i[0]),i}const v=g(e,t,"@context");if(u(v)||(e=yield m({activeCtx:e,localCtx:v,propagate:!0,overrideProtected:!0,options:r})),a(n)){if(r.link&&"@id"in n&&r.link.hasOwnProperty(n["@id"])){const e=r.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(l(n)||h(n)){const i=j.compactValue({activeCtx:e,activeProperty:t,value:n,options:r});return r.link&&h(n)&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:i})),i}if(c(n)&&(g(e,t,"@container")||[]).includes("@list"))return j.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:r,compactionMap:p});const v="@reverse"===t,_={},S=e;!l(n)&&!h(n)&&(e=e.revertToPreviousContext());const E=g(S,t,"@context");u(E)||(e=yield m({activeCtx:e,localCtx:E,propagate:!0,overrideProtected:!0,options:r})),r.link&&"@id"in n&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:_}));let T=n["@type"]||[];T.length>1&&(T=Array.from(T).sort());const I=e;for(const t of T){const n=j.compactIri({activeCtx:I,iri:t,relativeTo:{vocab:!0}}),i=g(S,n,"@context");u(i)||(e=yield m({activeCtx:e,localCtx:i,options:r,propagate:!1}))}const A=Object.keys(n).sort();for(const u of A){const h=n[u];if("@id"!==u)if("@type"!==u)if("@reverse"!==u)if("@preserve"!==u)if("@index"!==u)if("@graph"!==u&&"@list"!==u&&"@included"!==u&&y(u)){const t=j.compactIri({activeCtx:e,iri:u,relativeTo:{vocab:!0}});w(_,t,h)}else{if(!o(h))throw new i("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===h.length){const t=j.compactIri({activeCtx:e,iri:u,value:h,relativeTo:{vocab:!0},reverse:v}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let i=_;n&&(N(e,n,r),a(_[n])||(_[n]={}),i=_[n]),w(i,t,h,{propertyIsArray:!0})}for(const t of h){const n=j.compactIri({activeCtx:e,iri:u,value:t,relativeTo:{vocab:!0},reverse:v}),i=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let h=_;i&&(N(e,i,r),a(_[i])||(_[i]={}),h=_[i]);const y=g(e,n,"@container")||[],m=d(t),b=c(t);let S;b?S=t["@list"]:m&&(S=t["@graph"]);let E=yield j.compact({activeCtx:e,activeProperty:n,element:b||m?S:t,options:r,compactionMap:p});if(b){if(o(E)||(E=[E]),y.includes("@list")){w(h,n,E,{valueIsArray:!0,allowDuplicate:!0});continue}E={[j.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:E},"@index"in t&&(E[j.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(m)if(y.includes("@graph")&&(y.includes("@id")||y.includes("@index")&&f(t))){let i;h.hasOwnProperty(n)?i=h[n]:h[n]=i={};const o=(y.includes("@id")?t["@id"]:t["@index"])||j.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});w(i,o,E,{propertyIsArray:!r.compactArrays||y.includes("@set")})}else y.includes("@graph")&&f(t)?(o(E)&&E.length>1&&(E={"@included":E}),w(h,n,E,{propertyIsArray:!r.compactArrays||y.includes("@set")})):(o(E)&&1===E.length&&r.compactArrays&&(E=E[0]),E={[j.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:E},"@id"in t&&(E[j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(E[j.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),w(h,n,E,{propertyIsArray:!r.compactArrays||y.includes("@set")}));else if(y.includes("@language")||y.includes("@index")||y.includes("@id")||y.includes("@type")){let i,o;if(h.hasOwnProperty(n)?i=h[n]:h[n]=i={},y.includes("@language"))l(E)&&(E=E["@value"]),o=t["@language"];else if(y.includes("@index")){const r=g(e,n,"@index")||"@index",i=j.compactIri({activeCtx:e,iri:r,relativeTo:{vocab:!0}});if("@index"===r)o=t["@index"],delete E[i];else{let e;if([o,...e]=x(E[r]||[]),s(o))switch(e.length){case 0:delete E[r];break;case 1:E[r]=e[0];break;default:E[r]=e}else o=null}}else if(y.includes("@id")){const t=j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=E[t],delete E[t]}else if(y.includes("@type")){const i=j.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let a;switch([o,...a]=x(E[i]||[]),a.length){case 0:delete E[i];break;case 1:E[i]=a[0];break;default:E[i]=a}1===Object.keys(E).length&&"@id"in t&&(E=yield j.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:r,compactionMap:p}))}o||(o=j.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),w(i,o,E,{propertyIsArray:y.includes("@set")})}else{const e=!r.compactArrays||y.includes("@set")||y.includes("@list")||o(E)&&0===E.length||"@list"===u||"@graph"===u;w(h,n,E,{propertyIsArray:e})}}}else{if((g(e,t,"@container")||[]).includes("@index"))continue;const n=j.compactIri({activeCtx:e,iri:u,relativeTo:{vocab:!0}});w(_,n,h)}else{const n=yield j.compact({activeCtx:e,activeProperty:t,element:h,options:r,compactionMap:p});o(n)&&0===n.length||w(_,u,n)}else{const t=yield j.compact({activeCtx:e,activeProperty:"@reverse",element:h,options:r,compactionMap:p});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const i=t[n],o=(g(e,n,"@container")||[]).includes("@set")||!r.compactArrays;w(_,n,i,{propertyIsArray:o}),delete t[n]}if(Object.keys(t).length>0){const n=j.compactIri({activeCtx:e,iri:u,relativeTo:{vocab:!0}});w(_,n,t)}}else{let t=x(h).map(e=>j.compactIri({activeCtx:S,iri:e,relativeTo:{vocab:!0}}));1===t.length&&(t=t[0]);const n=j.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),r=(g(e,n,"@container")||[]).includes("@set")&&b(e,1.1)||o(t)&&0===h.length;w(_,n,t,{propertyIsArray:r})}else{let t=x(h).map(t=>j.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:r.base}));1===t.length&&(t=t[0]),_[j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t}}return _}return n});return function(t){return e.apply(this,arguments)}}(),j.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:r={vocab:!1},reverse:o=!1,base:s=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const u=e.getInverse();if(y(t)&&t in u&&"@none"in u[t]&&"@type"in u[t]["@none"]&&"@none"in u[t]["@none"]["@type"])return u[t]["@none"]["@type"]["@none"];if(r.vocab&&t in u){const r=e["@language"]||"@none",i=[];a(n)&&"@index"in n&&!("@graph"in n)&&i.push("@index","@index@set"),a(n)&&"@preserve"in n&&(n=n["@preserve"][0]),d(n)?("@index"in n&&i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&i.push("@graph@id","@graph@id@set"),i.push("@graph","@graph@set","@set"),"@index"in n||i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||i.push("@graph@id","@graph@id@set")):a(n)&&!l(n)&&i.push("@id","@id@set","@type","@set@type");let s="@language",u="@null";if(o)s="@type",u="@reverse",i.push("@set");else if(c(n)){"@index"in n||i.push("@list");const e=n["@list"];if(0===e.length)s="@any",u="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const i=e[r];let o="@none",a="@none";if(l(i)?"@direction"in i?o=`${(i["@language"]||"").toLowerCase()}_${i["@direction"]}`:"@language"in i?o=i["@language"].toLowerCase():"@type"in i?a=i["@type"]:o="@null":a="@id",null===t?t=o:o!==t&&l(i)&&(t="@none"),null===n?n=a:a!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(s="@type",u=n):u=t}}else{if(l(n))if("@language"in n&&!("@index"in n)){i.push("@language","@language@set"),u=n["@language"];const e=n["@direction"];e&&(u=`${u}_${e}`)}else"@direction"in n&&!("@index"in n)?u=`_${n["@direction"]}`:"@type"in n&&(s="@type",u=n["@type"]);else s="@type",u="@id";i.push("@set")}i.push("@none"),a(n)&&!("@index"in n)&&i.push("@index","@index@set"),l(n)&&1===Object.keys(n).length&&i.push("@language","@language@set");const f=function(e,t,n,r,i,o){null===o&&(o="@null");const s=[];if(("@id"===o||"@reverse"===o)&&a(n)&&"@id"in n){"@reverse"===o&&s.push("@reverse");const t=j.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(o);const e=s.find(e=>e.includes("_"));e&&s.push(e.replace(/^[^_]+_/,"_"))}s.push("@none");const u=e.inverse[t];for(const a of r){if(!(a in u))continue;const e=u[a][i];for(const t of s)if(t in e)return e[t]}return null}(e,t,n,i,s,u);if(null!==f)return f}if(r.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!e.mappings.has(r))return r}}let f=null;const h=[];let p=e.fastCurieMap;const g=t.length-1;for(let i=0;i<g&&t[i]in p;++i)p=p[t[i]],""in p&&h.push(p[""][0]);for(let i=h.length-1;i>=0;--i){const r=h[i],o=r.terms;for(const i of o){const o=i+":"+t.substr(r.iri.length);e.mappings.get(i)._prefix&&(!e.mappings.has(o)||null===n&&e.mappings.get(o)["@id"]===t)&&(null===f||S(o,f)<0)&&(f=o)}}if(null!==f)return f;for(const[a,c]of e.mappings)if(c&&c._prefix&&t.startsWith(a+":"))throw new i(`Absolute IRI "${t}" confused with prefix "${a}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return r.vocab?t:"@base"in e?e["@base"]?v(_(s,e["@base"]),t):t:v(s,t)},j.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(l(n)){const r=g(e,t,"@type"),i=g(e,t,"@language"),o=g(e,t,"@direction"),a=g(e,t,"@container")||[],u="@index"in n&&!a.includes("@index");if(!u&&"@none"!==r&&(n["@type"]===r||"@language"in n&&n["@language"]===i&&"@direction"in n&&n["@direction"]===o||"@language"in n&&n["@language"]===i||"@direction"in n&&n["@direction"]===o))return n["@value"];const c=Object.keys(n).length,l=1===c||2===c&&"@index"in n&&!u,d="@language"in e,f=s(n["@value"]),h=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(l&&"@none"!==r&&(!d||!f||h))return n["@value"];const p={};return u&&(p[j.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?p[j.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=j.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(p[j.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(p[j.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),p[j.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],p}const i=p(e,t,{vocab:!0},r),o=g(e,t,"@type"),a=j.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===o},base:r.base});return"@id"===o||"@vocab"===o||"@graph"===i?a:{[j.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:a}}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],18:[function(e,t,n){"use strict";const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#";t.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:r,RDF_LIST:r+"List",RDF_FIRST:r+"first",RDF_REST:r+"rest",RDF_NIL:r+"nil",RDF_TYPE:r+"type",RDF_PLAIN_LITERAL:r+"PlainLiteral",RDF_XML_LITERAL:r+"XMLLiteral",RDF_JSON_LITERAL:r+"JSON",RDF_OBJECT:r+"object",RDF_LANGSTRING:r+"langString",XSD:i,XSD_BOOLEAN:i+"boolean",XSD_DOUBLE:i+"double",XSD_INTEGER:i+"integer",XSD_STRING:i+"string"}},{}],19:[function(e,t,n){"use strict";const i=e("./util"),o=e("./JsonLdError"),{isArray:a,isObject:s,isString:u,isUndefined:c}=e("./types"),{isAbsolute:l,isRelative:d,prependBase:f}=e("./url"),{asArray:h,compareShortestLeast:p}=e("./util"),g=new Map,y=/^@[a-zA-Z]+$/,m={};function b(e,t,n,r,i,o){if(null===t||!u(t)||m.isKeyword(t))return t;if(t.match(y))return null;if(r&&r.hasOwnProperty(t)&&!0!==i.get(t)&&m.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:i,options:o}),(n=n||{}).vocab){const n=e.mappings.get(t);if(null===n)return null;if(s(n)&&"@id"in n)return n["@id"]}const a=t.indexOf(":");if(a>0){const n=t.substr(0,a),s=t.substr(a+1);if("_"===n||0===s.indexOf("//"))return t;r&&r.hasOwnProperty(n)&&m.createTermDefinition({activeCtx:e,localCtx:r,term:n,defined:i,options:o});const u=e.mappings.get(n);if(u&&u._prefix)return u["@id"]+s;if(l(t))return t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;if(n.base&&"@base"in e){if(e["@base"])return f(f(o.base,e["@base"]),t)}else if(n.base)return f(o.base,t);return t}function v(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!v(e[n],t[n]))return!1;return!0}const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const o in e){let n=e[o],r=t[o];if("@container"===o&&Array.isArray(n)&&Array.isArray(r)&&(n=n.slice().sort(),r=r.slice().sort()),!v(n,r))return!1}return!0}t.exports=m,m.process=function(){var e=r(function*({activeCtx:e,localCtx:t,options:n,propagate:r=!0,overrideProtected:c=!1,cycles:p=new Set}){if(s(t)&&"@context"in t&&a(t["@context"])&&(t=t["@context"]),0===h(t).length)return e;const g=yield n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});s(g[0].document)&&"boolean"==typeof g[0].document["@propagate"]&&(r=g[0].document["@propagate"]);let y=e;!r&&!y.previousContext&&(y=y.clone(),y.previousContext=e);for(const a of g){let{document:r}=a;if(e=y,null===r){if(!c&&0!==Object.keys(e.protected).length){const r=n&&n.protectedMode||"error";if("error"===r)throw new o("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===r){console.warn("WARNING: invalid context nullification");const t=a.getProcessed(e);if(t){y=e=t;continue}const r=e;y=e=m.getInitialContext(n).clone();for(const[n,o]of Object.entries(r.protected))o&&(e.mappings[n]=i.clone(r.mappings[n]));e.protected=i.clone(r.protected),a.setProcessed(r,y);continue}throw new o("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:r})}y=e=m.getInitialContext(n).clone();continue}const h=a.getProcessed(e);if(h){y=e=h;continue}if(s(r)&&"@context"in r&&(r=r["@context"]),!s(r))throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:r});y=y.clone();const g=new Map;if("@version"in r){if(1.1!==r["@version"])throw new o("Unsupported JSON-LD version: "+r["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:r});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new o("@version: "+r["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:r});y.processingMode="json-ld-1.1",y["@version"]=r["@version"],g.set("@version",!0)}if(y.processingMode=y.processingMode||e.processingMode,"@base"in r){let e=r["@base"];if(null!==e&&!l(e)){if(!d(e))throw new o('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:r});e=f(y["@base"],e)}y["@base"]=e,g.set("@base",!0)}if("@vocab"in r){const e=r["@vocab"];if(null===e)delete y["@vocab"];else{if(!u(e))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:r});if(!l(e)&&m.processingMode(y,1))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:r});y["@vocab"]=b(y,e,{vocab:!0,base:!0},void 0,void 0,n)}g.set("@vocab",!0)}if("@language"in r){const e=r["@language"];if(null===e)delete y["@language"];else{if(!u(e))throw new o('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:r});y["@language"]=e.toLowerCase()}g.set("@language",!0)}if("@direction"in r){const t=r["@direction"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:r});if(null===t)delete y["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new o('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:r});y["@direction"]=t}g.set("@direction",!0)}if("@propagate"in r){const n=r["@propagate"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:r});if("boolean"!=typeof n)throw new o("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});g.set("@propagate",!0)}if("@import"in r){const i=r["@import"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:r});if(!u(i))throw new o("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const a=yield n.contextResolver.resolve({activeCtx:e,context:i,documentLoader:n.documentLoader,base:n.base});if(1!==a.length)throw new o("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const s=a[0].getProcessed(e);if(s)r=s;else{const n=a[0].document;if("@import"in n)throw new o("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)r.hasOwnProperty(e)||(r[e]=n[e]);a[0].setProcessed(e,r)}g.set("@import",!0)}g.set("@protected",r["@protected"]||!1);for(const e in r)if(m.createTermDefinition({activeCtx:y,localCtx:r,term:e,defined:g,options:n,overrideProtected:c}),s(r[e])&&"@context"in r[e]){const t=r[e]["@context"];let i=!0;if(u(t)){const e=f(n.base,t);p.has(e)?i=!1:p.add(e)}if(i)try{yield m.process({activeCtx:y.clone(),localCtx:r[e]["@context"],overrideProtected:!0,options:n,cycles:p})}catch(v){throw new o("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:r[e]["@context"],term:e})}}a.setProcessed(e,y)}return y});return function(t){return e.apply(this,arguments)}}(),m.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:i,overrideProtected:c=!1})=>{if(r.has(n)){if(r.get(n))return;throw new o("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let d;if(r.set(n,!1),t.hasOwnProperty(n)&&(d=t[n]),"@type"===n&&s(d)&&"@set"===(d["@container"]||"@set")&&m.processingMode(e,1.1)){const e=["@container","@id","@protected"],r=Object.keys(d);if(0===r.length||r.some(t=>!e.includes(t)))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(m.isKeyword(n))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(y))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});if(""===n)throw new o("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const f=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let h=!1;if((u(d)||null===d)&&(h=!0,d={"@id":d}),!s(d))throw new o("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const p={};e.mappings.set(n,p),p.reverse=!1;const g=["@container","@id","@language","@reverse","@type"];m.processingMode(e,1.1)&&g.push("@context","@direction","@index","@nest","@prefix","@protected");for(const a in d)if(!g.includes(a))throw new o("Invalid JSON-LD syntax; a term definition must not contain "+a,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const _=n.indexOf(":");if(p._termHasColon=_>0,"@reverse"in d){if("@id"in d)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in d)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const a=d["@reverse"];if(!u(a))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!m.isKeyword(a)&&a.match(y))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:a}),void(f?e.mappings.set(n,f):e.mappings.delete(n));const s=b(e,a,{vocab:!0,base:!1},t,r,i);if(!l(s))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});p["@id"]=s,p.reverse=!0}else if("@id"in d){let a=d["@id"];if(a&&!u(a))throw new o("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===a)p["@id"]=null;else{if(!m.isKeyword(a)&&a.match(y))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:a}),void(f?e.mappings.set(n,f):e.mappings.delete(n));if(a!==n){if(a=b(e,a,{vocab:!0,base:!1},t,r,i),!l(a)&&!m.isKeyword(a))throw new o("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)&&b(e,n,{vocab:!0,base:!1},t,new Map(r).set(n,!0),i)!==a)throw new o("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});p["@id"]=a,p._prefix=h&&!p._termHasColon&&a.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in p))if(p._termHasColon){const o=n.substr(0,_);if(t.hasOwnProperty(o)&&m.createTermDefinition({activeCtx:e,localCtx:t,term:o,defined:r,options:i}),e.mappings.has(o)){const t=n.substr(_+1);p["@id"]=e.mappings.get(o)["@id"]+t}else p["@id"]=n}else if("@type"===n)p["@id"]=n;else{if(!("@vocab"in e))throw new o("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});p["@id"]=e["@vocab"]+n}if((!0===d["@protected"]||!0===r.get("@protected")&&!1!==d["@protected"])&&(e.protected[n]=!0,p.protected=!0),r.set(n,!0),"@type"in d){let n=d["@type"];if(!u(n))throw new o("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(m.processingMode(e,1))throw new o(`Invalid JSON-LD syntax; an @context @type value must not be "${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=b(e,n,{vocab:!0,base:!1},t,r,i),!l(n))throw new o("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new o("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}p["@type"]=n}if("@container"in d){const n=u(d["@container"])?[d["@container"]]:d["@container"]||[],r=["@list","@set","@index","@language"];let i=!0;const s=n.includes("@set");if(m.processingMode(e,1.1)){if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new o("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new o("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else i&=n.length<=(s?2:1);if(n.includes("@type")&&(p["@type"]=p["@type"]||"@id",!["@id","@vocab"].includes(p["@type"])))throw new o("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else i&=!a(d["@container"]),i&=n.length<=1;if(i&=n.every(e=>r.includes(e)),i&=!(s&&n.includes("@list")),!i)throw new o("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(p.reverse&&!n.every(e=>["@index","@set"].includes(e)))throw new o("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});p["@container"]=n}if("@index"in d){if(!("@container"in d)||!p["@container"].includes("@index"))throw new o(`Invalid JSON-LD syntax; @index without @index in @container: "${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!u(d["@index"])||0===d["@index"].indexOf("@"))throw new o(`Invalid JSON-LD syntax; @index must expand to an IRI: "${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});p["@index"]=d["@index"]}if("@context"in d&&(p["@context"]=d["@context"]),"@language"in d&&!("@type"in d)){let e=d["@language"];if(null!==e&&!u(e))throw new o("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),p["@language"]=e}if("@prefix"in d){if(n.match(/:|\//))throw new o("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(m.isKeyword(p["@id"]))throw new o("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof d["@prefix"])throw new o("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});p._prefix=!0===d["@prefix"]}if("@direction"in d){const e=d["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new o('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});p["@direction"]=e}if("@nest"in d){const e=d["@nest"];if(!u(e)||"@nest"!==e&&0===e.indexOf("@"))throw new o("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});p["@nest"]=e}const w=p["@id"];if("@context"===w||"@preserve"===w)throw new o("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(f&&f.protected&&!c&&(e.protected[n]=!0,p.protected=!0,!v(f,p))){const e=i&&i.protectedMode||"error";if("error"===e)throw new o(`Invalid JSON-LD syntax; tried to redefine "${n}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:n});throw new o("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:n,protectedMode:e})}},m.expandIri=(e,t,n,r)=>b(e,t,n,void 0,void 0,r),m.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=g.get(t);if(n)return n;const r={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},r={},i=(e["@language"]||"@none").toLowerCase(),s=e["@direction"],u=e.mappings,c=[...u.keys()].sort(p);for(const o of c){const e=u.get(o);if(null===e)continue;let c=e["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===e["@id"])continue;const l=h(e["@id"]);for(const u of l){let l=t[u];const d=m.isKeyword(u);if(l)!d&&!e._termHasColon&&r[u].push(o);else if(t[u]=l={},!d&&!e._termHasColon){r[u]=[o];const e={iri:u,terms:r[u]};u[0]in n?n[u[0]].push(e):n[u[0]]=[e]}if(l[c]||(l[c]={"@language":{},"@type":{},"@any":{}}),l=l[c],a(o,l["@any"],"@none"),e.reverse)a(o,l["@type"],"@reverse");else if("@none"===e["@type"])a(o,l["@any"],"@none"),a(o,l["@language"],"@none"),a(o,l["@type"],"@none");else if("@type"in e)a(o,l["@type"],e["@type"]);else if("@language"in e&&"@direction"in e){const t=e["@language"],n=e["@direction"];a(o,l["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?`_${n}`:"@null")}else"@language"in e?a(o,l["@language"],(e["@language"]||"@null").toLowerCase()):"@direction"in e?a(o,l["@language"],e["@direction"]?`_${e["@direction"]}`:"@none"):s?(a(o,l["@language"],`_${s}`),a(o,l["@language"],"@none"),a(o,l["@type"],"@none")):(a(o,l["@language"],i),a(o,l["@language"],"@none"),a(o,l["@type"],"@none"))}}for(const a in n)o(n,a,1);return t},clone:function(){const e={};return e.mappings=i.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=i.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===g.size&&g.clear(),g.set(t,r),r;function o(e,t,n){const r=e[t],i=e[t]={};let a,s;for(const o of r)a=o.iri,s=n>=a.length?"":a[n],s in i?i[s].push(o):i[s]=[o];for(const u in i)""!==u&&o(i,u,n+1)}function a(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}},m.getContextValue=(e,t,n)=>{if(null===t)return"@context"===n?void 0:null;if(e.mappings.has(t)){const r=e.mappings.get(t);if(c(n))return r;if(r.hasOwnProperty(n))return r[n]}return"@language"===n&&n in e||"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},m.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,m.isKeyword=e=>{if(!u(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":12,"./types":30,"./url":31,"./util":32}],20:[function(e,t,n){"use strict";const{parseLinkHeader:i,buildHeaders:o}=e("../util"),{LINK_HEADER_CONTEXT:a}=e("../constants"),s=e("../JsonLdError"),u=e("../RequestQueue"),{prependBase:c}=e("../url"),l=/(^|(\r\n))link:/i;function d(e,t,n){const r=new(e=e||XMLHttpRequest);return new Promise((e,i)=>{r.onload=()=>e(r),r.onerror=e=>i(e),r.open("GET",t,!0);for(const t in n)r.setRequestHeader(t,n[t]);r.send()})}t.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{return t=o(t),(new u).wrapLoader(f);function f(e){return h.apply(this,arguments)}function h(){return(h=r(function*(r){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))throw new s('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r});if(e&&0!==r.indexOf("https"))throw new s('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r});let o;try{o=yield d(n,r,t)}catch(y){throw new s("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:y})}if(o.status>=400)throw new s("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:o.status});let u={contextUrl:null,documentUrl:r,document:o.response},h=null;const p=o.getResponseHeader("Content-Type");let g;if(l.test(o.getAllResponseHeaders())&&(g=o.getResponseHeader("Link")),g&&"application/ld+json"!==p){const e=i(g),t=e[a];if(Array.isArray(t))throw new s("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r});t&&(u.contextUrl=t.target),h=e.alternate,h&&"application/ld+json"==h.type&&!(p||"").match(/^application\/(\w*\+)?json$/)&&(u=yield f(c(r,h.target)))}return u})).apply(this,arguments)}}},{"../JsonLdError":12,"../RequestQueue":15,"../constants":18,"../url":31,"../util":32}],21:[function(e,t,n){"use strict";const i=e("./JsonLdError"),{isArray:o,isObject:a,isEmptyObject:s,isString:u,isUndefined:c}=e("./types"),{isList:l,isValue:d,isGraph:f,isSubject:h}=e("./graphTypes"),{expandIri:p,getContextValue:g,isKeyword:y,process:m,processingMode:b}=e("./context"),{isAbsolute:v}=e("./url"),{addValue:_,asArray:w,getValues:x,validateTypeValue:S}=e("./util"),j={};t.exports=j;const N=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function E(e){return T.apply(this,arguments)}function T(){return(T=r(function*({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:f,options:x={},insideList:T,typeKey:I,typeScopedContext:R,expansionMap:O}){const L=Object.keys(r).sort(),M=[];let D;const P=r[I]&&"@json"===p(e,o(r[I])?r[I][0]:r[I],{vocab:!0},x);for(const E of L){let I,L=r[E];if("@context"===E)continue;let C=p(e,E,{vocab:!0},x);if((null===C||!v(C)&&!y(C))&&(C=O({unmappedProperty:E,activeCtx:e,activeProperty:t,parent:r,options:x,insideList:T,value:L,expandedParent:f}),void 0===C))continue;if(y(C)){if("@reverse"===n)throw new i("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:L});if(C in f&&"@included"!==C&&"@type"!==C)throw new i("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:C})}if("@id"===C){if(!u(L)){if(!x.isFrame)throw new i('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:L});if(a(L)){if(!s(L))throw new i('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:L})}else{if(!o(L))throw new i('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:L});if(!L.every(e=>u(e)))throw new i('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:L})}}_(f,"@id",w(L).map(t=>u(t)?p(e,t,{base:!0},x):t),{propertyIsArray:x.isFrame});continue}if("@type"===C){a(L)&&(L=Object.fromEntries(Object.entries(L).map(([e,t])=>[p(R,e,{vocab:!0}),w(t).map(e=>p(R,e,{base:!0,vocab:!0}))]))),S(L,x.isFrame),_(f,"@type",w(L).map(e=>u(e)?p(R,e,{base:!0,vocab:!0},x):e),{propertyIsArray:x.isFrame});continue}if("@included"===C&&b(e,1.1)){const n=w(yield j.expand({activeCtx:e,activeProperty:t,element:L,options:x,expansionMap:O}));if(!n.every(e=>h(e)))throw new i("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:L});_(f,"@included",n,{propertyIsArray:!0});continue}if("@graph"===C&&!a(L)&&!o(L))throw new i('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:L});if("@value"===C){D=L,P&&b(e,1.1)?f["@value"]=L:_(f,"@value",L,{propertyIsArray:x.isFrame});continue}if("@language"===C){if(null===L)continue;if(!u(L)&&!x.isFrame)throw new i('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:L});L=w(L).map(e=>u(e)?e.toLowerCase():e);for(const e of L)u(e)&&!e.match(N)&&console.warn(`@language must be valid BCP47: ${e}`);_(f,"@language",L,{propertyIsArray:x.isFrame});continue}if("@direction"===C){if(!u(L)&&!x.isFrame)throw new i('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:L});L=w(L);for(const e of L)if(u(e)&&"ltr"!==e&&"rtl"!==e)throw new i('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:L});_(f,"@direction",L,{propertyIsArray:x.isFrame});continue}if("@index"===C){if(!u(L))throw new i('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:L});_(f,"@index",L);continue}if("@reverse"===C){if(!a(L))throw new i('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:L});if(I=yield j.expand({activeCtx:e,activeProperty:"@reverse",element:L,options:x,expansionMap:O}),"@reverse"in I)for(const e in I["@reverse"])_(f,e,I["@reverse"][e],{propertyIsArray:!0});let t=f["@reverse"]||null;for(const e in I){if("@reverse"===e)continue;null===t&&(t=f["@reverse"]={}),_(t,e,[],{propertyIsArray:!0});const n=I[e];for(let r=0;r<n.length;++r){const o=n[r];if(d(o)||l(o))throw new i('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:I});_(t,e,o,{propertyIsArray:!0})}}continue}if("@nest"===C){M.push(E);continue}let F=e;const B=g(e,E,"@context");c(B)||(F=yield m({activeCtx:e,localCtx:B,propagate:!0,overrideProtected:!0,options:x}));const G=g(F,E,"@container")||[];if(G.includes("@language")&&a(L))I=A(F,L,g(F,E,"@direction"),x);else if(G.includes("@index")&&a(L)){const t=G.includes("@graph"),n=g(F,E,"@index")||"@index",r="@index"!==n&&p(e,n,{vocab:!0},x);I=yield k({activeCtx:F,options:x,activeProperty:E,value:L,expansionMap:O,asGraph:t,indexKey:n,propertyIndex:r})}else if(G.includes("@id")&&a(L)){const e=G.includes("@graph");I=yield k({activeCtx:F,options:x,activeProperty:E,value:L,expansionMap:O,asGraph:e,indexKey:"@id"})}else if(G.includes("@type")&&a(L))I=yield k({activeCtx:F.revertToPreviousContext(),options:x,activeProperty:E,value:L,expansionMap:O,asGraph:!1,indexKey:"@type"});else{const r="@list"===C;if(r||"@set"===C){let e=t;r&&"@graph"===n&&(e=null),I=yield j.expand({activeCtx:F,activeProperty:e,element:L,options:x,insideList:r,expansionMap:O})}else I="@json"===g(e,E,"@type")?{"@type":"@json","@value":L}:yield j.expand({activeCtx:F,activeProperty:E,element:L,options:x,insideList:!1,expansionMap:O})}if(null!==I||"@value"===C||(I=O({unmappedValue:L,expandedProperty:C,activeCtx:F,activeProperty:t,parent:r,options:x,insideList:T,key:E,expandedParent:f}),void 0!==I)){if("@list"!==C&&!l(I)&&G.includes("@list")&&(I={"@list":w(I)}),G.includes("@graph")&&!G.some(e=>"@id"===e||"@index"===e)&&(I=w(I).map(e=>({"@graph":w(e)}))),F.mappings.has(E)&&F.mappings.get(E).reverse){const e=f["@reverse"]=f["@reverse"]||{};I=w(I);for(let t=0;t<I.length;++t){const n=I[t];if(d(n)||l(n))throw new i('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:I});_(e,C,n,{propertyIsArray:!0})}continue}_(f,C,I,{propertyIsArray:!0})}}if("@value"in f&&("@json"!==f["@type"]||!b(e,1.1))&&(a(D)||o(D))&&!x.isFrame)throw new i('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:D});for(const s of M){const u=o(r[s])?r[s]:[r[s]];for(const r of u){if(!a(r)||Object.keys(r).some(t=>"@value"===p(e,t,{vocab:!0},x)))throw new i("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:r});yield E({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:f,options:x,insideList:T,typeScopedContext:R,typeKey:I,expansionMap:O})}}})).apply(this,arguments)}function I({activeCtx:e,activeProperty:t,value:n,options:r}){if(null==n)return null;const i=p(e,t,{vocab:!0},r);if("@id"===i)return p(e,n,{base:!0},r);if("@type"===i)return p(e,n,{vocab:!0,base:!0},r);const o=g(e,t,"@type");if(("@id"===o||"@graph"===i)&&u(n))return{"@id":p(e,n,{base:!0},r)};if("@vocab"===o&&u(n))return{"@id":p(e,n,{vocab:!0,base:!0},r)};if(y(i))return n;const a={};if(o&&!["@id","@vocab","@none"].includes(o))a["@type"]=o;else if(u(n)){const n=g(e,t,"@language");null!==n&&(a["@language"]=n);const r=g(e,t,"@direction");null!==r&&(a["@direction"]=r)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),a["@value"]=n,a}function A(e,t,n,r){const a=[],s=Object.keys(t).sort();for(const c of s){const s=p(e,c,{vocab:!0},r);let l=t[c];o(l)||(l=[l]);for(const e of l){if(null===e)continue;if(!u(e))throw new i("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const r={"@value":e};"@none"!==s&&(r["@language"]=c.toLowerCase()),n&&(r["@direction"]=n),a.push(r)}}return a}function k(e){return R.apply(this,arguments)}function R(){return(R=r(function*({activeCtx:e,options:t,activeProperty:n,value:r,expansionMap:a,asGraph:s,indexKey:u,propertyIndex:l}){const h=[],y=Object.keys(r).sort(),b="@type"===u;for(let v of y){if(b){const n=g(e,v,"@context");c(n)||(e=yield m({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let y,w=r[v];o(w)||(w=[w]),w=yield j.expand({activeCtx:e,activeProperty:n,element:w,options:t,insideList:!1,insideIndex:!0,expansionMap:a}),y=l?"@none"===v?"@none":I({activeCtx:e,activeProperty:u,value:v,options:t}):p(e,v,{vocab:!0},t),"@id"===u?v=p(e,v,{base:!0},t):b&&(v=y);for(let e of w){if(s&&!f(e)&&(e={"@graph":[e]}),"@type"===u)"@none"===y||(e["@type"]=e["@type"]?[v].concat(e["@type"]):[v]);else{if(d(e)&&!["@language","@type","@index"].includes(u))throw new i(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${u}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});l?"@none"!==y&&_(e,l,y,{propertyIsArray:!0,prependValue:!0}):"@none"!==y&&!(u in e)&&(e[u]=v)}h.push(e)}}return h})).apply(this,arguments)}j.expand=function(){var e=r(function*({activeCtx:e,activeProperty:t=null,element:n,options:r={},insideList:l=!1,insideIndex:d=!1,typeScopedContext:f=null,expansionMap:h=(()=>{})}){if(null==n)return null;if("@default"===t&&(r=Object.assign({},r,{isFrame:!1})),!o(n)&&!a(n)){if(!l&&(null===t||"@graph"===p(e,t,{vocab:!0},r))){const i=yield h({unmappedValue:n,activeCtx:e,activeProperty:t,options:r,insideList:l});return void 0===i?null:i}return I({activeCtx:e,activeProperty:t,value:n,options:r})}if(o(n)){let i=[];const a=g(e,t,"@container")||[];l=l||a.includes("@list");for(let s=0;s<n.length;++s){let a=yield j.expand({activeCtx:e,activeProperty:t,element:n[s],options:r,expansionMap:h,insideIndex:d,typeScopedContext:f});l&&o(a)&&(a={"@list":a}),(null!==a||(a=yield h({unmappedValue:n[s],activeCtx:e,activeProperty:t,parent:n,index:s,options:r,expandedParent:i,insideList:l}),void 0!==a))&&(o(a)?i=i.concat(a):i.push(a))}return i}const y=p(e,t,{vocab:!0},r),_=g(e,t,"@context");f=f||(e.previousContext?e:null);let S=Object.keys(n).sort(),N=!d;if(N&&f&&S.length<=2&&!S.includes("@context"))for(const i of S){const t=p(f,i,{vocab:!0},r);if("@value"===t){N=!1,e=f;break}if("@id"===t&&1===S.length){N=!1;break}}N&&(e=e.revertToPreviousContext()),c(_)||(e=yield m({activeCtx:e,localCtx:_,propagate:!0,overrideProtected:!0,options:r})),"@context"in n&&(e=yield m({activeCtx:e,localCtx:n["@context"],options:r})),f=e;let T=null;for(const i of S)if("@type"===p(e,i,{vocab:!0},r)){T=T||i;const t=n[i],o=Array.isArray(t)?t.length>1?t.slice().sort():t:[t];for(const n of o){const t=g(f,n,"@context");c(t)||(e=yield m({activeCtx:e,localCtx:t,options:r,propagate:!1}))}}let A={};yield E({activeCtx:e,activeProperty:t,expandedActiveProperty:y,element:n,expandedParent:A,options:r,insideList:l,typeKey:T,typeScopedContext:f,expansionMap:h}),S=Object.keys(A);let k=S.length;if("@value"in A){if("@type"in A&&("@language"in A||"@direction"in A))throw new i('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:A});let o=k-1;if("@type"in A&&(o-=1),"@index"in A&&(o-=1),"@language"in A&&(o-=1),"@direction"in A&&(o-=1),0!==o)throw new i('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:A});const a=null===A["@value"]?[]:w(A["@value"]),c=x(A,"@type");if(!b(e,1.1)||!c.includes("@json")||1!==c.length)if(0===a.length){const i=yield h({unmappedValue:A,activeCtx:e,activeProperty:t,element:n,options:r,insideList:l});A=void 0!==i?i:null}else{if(!a.every(e=>u(e)||s(e))&&"@language"in A)throw new i("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:A});if(!c.every(e=>v(e)&&!(u(e)&&0===e.indexOf("_:"))||s(e)))throw new i('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:A})}}else if("@type"in A&&!o(A["@type"]))A["@type"]=[A["@type"]];else if("@set"in A||"@list"in A){if(k>1&&(2!==k||!("@index"in A)))throw new i('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:A});"@set"in A&&(A=A["@set"],S=Object.keys(A),k=S.length)}else if(1===k&&"@language"in A){const i=yield h(A,{unmappedValue:A,activeCtx:e,activeProperty:t,element:n,options:r,insideList:l});A=void 0!==i?i:null}if(a(A)&&!r.keepFreeFloatingNodes&&!l&&(null===t||"@graph"===y)&&(0===k||"@value"in A||"@list"in A||1===k&&"@id"in A)){const i=yield h({unmappedValue:A,activeCtx:e,activeProperty:t,element:n,options:r,insideList:l});A=void 0!==i?i:null}return A});return function(t){return e.apply(this,arguments)}}()},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],22:[function(e,t,n){"use strict";const{isSubjectReference:r}=e("./graphTypes"),{createMergedNodeMap:i}=e("./nodeMap"),o={};t.exports=o,o.flatten=e=>{const t=i(e),n=[],o=Object.keys(t).sort();for(let i=0;i<o.length;++i){const e=t[o[i]];r(e)||n.push(e)}return n}},{"./graphTypes":25,"./nodeMap":27}],23:[function(e,t,n){"use strict";const{isKeyword:r}=e("./context"),i=e("./graphTypes"),o=e("./types"),a=e("./util"),s=e("./url"),u=e("./JsonLdError"),{createNodeMap:c,mergeNodeMapGraphs:l}=e("./nodeMap"),d={};function f(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function h(e,t,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function p(e,t,n){const r="@"+n;let i=r in e?e[r][0]:t[n];if("embed"===n)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new u("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function g(e){if(!o.isArray(e)||1!==e.length||!o.isObject(e[0]))throw new u("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of a.asArray(e[0]["@id"]))if(!o.isObject(t)&&!s.isAbsolute(t)||o.isString(t)&&0===t.indexOf("_:"))throw new u("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of a.asArray(e[0]["@type"]))if(!o.isObject(t)&&!s.isAbsolute(t)||o.isString(t)&&0===t.indexOf("_:"))throw new u("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function y(e,t,n,s){let u=!0,c=!1;for(const l in n){let d=!1;const f=a.getValues(t,l),h=0===a.getValues(n,l).length;if("@id"===l){if(o.isEmptyObject(n["@id"][0]||{})?d=!0:n["@id"].length>=0&&(d=n["@id"].includes(f[0])),!s.requireAll)return d}else if("@type"===l){if(u=!1,h){if(f.length>0)return!1;d=!0}else if(1===n["@type"].length&&o.isEmptyObject(n["@type"][0]))d=f.length>0;else for(const e of n["@type"])d=!(!o.isObject(e)||!("@default"in e))||d||f.some(t=>t===e);if(!s.requireAll)return d}else{if(r(l))continue;{const t=a.getValues(n,l)[0];let r=!1;if(t&&(g([t]),r="@default"in t),u=!1,0===f.length&&r)continue;if(f.length>0&&h)return!1;if(void 0===t){if(f.length>0)return!1;d=!0}else if(i.isList(t)){const n=t["@list"][0];if(i.isList(f[0])){const t=f[0]["@list"];i.isValue(n)?d=t.some(e=>w(n,e)):(i.isSubject(n)||i.isSubjectReference(n))&&(d=t.some(t=>_(e,n,t,s)))}}else d=i.isValue(t)?f.some(e=>w(t,e)):i.isSubjectReference(t)?f.some(n=>_(e,t,n,s)):!!o.isObject(t)&&f.length>0}}if(!d&&s.requireAll)return!1;c=c||d}return u||c}function m(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],i=r.parent,s=r.property,u={"@id":t};if(o.isArray(i)){for(let e=0;e<i.length;++e)if(a.compareValues(i[e],u)){i[e]=u;break}}else{const e=o.isArray(i[s]);a.removeValue(i,s,u,{propertyIsArray:e}),a.addValue(i,s,u,{propertyIsArray:e})}const c=e=>{const t=Object.keys(n);for(const r of t)r in n&&o.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],c(r))};c(t)}function b(e,t){if(o.isArray(e))return e.map(e=>b(e,t));if(o.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(i.isValue(e))return e;if(i.isList(e))return e["@list"]=b(e["@list"],t),e;if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)"@id"===n&&t.bnodesToClear.includes(e[n])?delete e["@id"]:e[n]=b(e[n],t)}return e}function v(e,t,n){o.isObject(e)?a.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function _(e,t,n,r){if(!("@id"in n))return!1;const i=e.subjects[n["@id"]];return i&&y(e,i,t,r)}function w(e,t){const n=t["@value"],r=t["@type"],i=t["@language"],a=e["@value"]?o.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?o.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],u=e["@language"]?o.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===s.length&&0===u.length||!(!a.includes(n)&&!o.isEmptyObject(a[0])||!(!r&&0===s.length||s.includes(r)||r&&o.isEmptyObject(s[0]))||!(!i&&0===u.length||u.includes(i)||i&&o.isEmptyObject(u[0])))}t.exports=d,d.frameMergedOrDefault=(e,t,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new a.IdentifierIssuer("_:b");c(e,r.graphMap,"@default",i),n.merged&&(r.graphMap["@merged"]=l(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const o=[];return d.frame(r,Object.keys(r.subjects).sort(),t,o),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(e=>1===r.bnodeMap[e].length)),n.link={},b(o,n)},d.frame=(e,t,n,s,c=null)=>{g(n);const l=e.options,b={embed:p(n=n[0],l,"embed"),explicit:p(n,l,"explicit"),requireAll:p(n,l,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const _=e.link[e.graph],x=function(e,t,n,r){const i={};for(const o of t){const t=e.graphMap[e.graph][o];y(e,t,n,r)&&(i[o]=t)}return i}(e,t,n,b),S=Object.keys(x).sort();for(const g of S){const y=x[g];if(null===c?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===b.embed&&g in _){v(s,c,_[g]);continue}const S={"@id":g};if(0===g.indexOf("_:")&&a.addValue(e.bnodeMap,g,S,{propertyIsArray:!0}),_[g]=S,("@first"===b.embed||"@last"===b.embed)&&e.is11)throw new u("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(g)){if(e.embedded&&("@never"===b.embed||h(y,e.graph,e.subjectStack))){v(s,c,S);continue}if(e.embedded&&("@first"==b.embed||"@once"==b.embed)&&e.uniqueEmbeds[e.graph].hasOwnProperty(g)){v(s,c,S);continue}if("@last"===b.embed&&g in e.uniqueEmbeds[e.graph]&&m(e,g),e.uniqueEmbeds[e.graph][g]={parent:s,property:c},e.subjectStack.push({subject:y,graph:e.graph}),g in e.graphMap){let t=!1,r=null;"@graph"in n?(r=n["@graph"][0],t=!("@merged"===g||"@default"===g),o.isObject(r)||(r={})):(t="@merged"!==e.graph,r={}),t&&d.frame(Hi(lr({},e),{graph:g,embedded:!1}),Object.keys(e.graphMap[g]).sort(),[r],S,"@graph")}"@included"in n&&d.frame(Hi(lr({},e),{embedded:!1}),t,n["@included"],S,"@included");for(const t of Object.keys(y).sort())if(r(t)){if(S[t]=a.clone(y[t]),"@type"===t)for(const t of y["@type"])0===t.indexOf("_:")&&a.addValue(e.bnodeMap,t,S,{propertyIsArray:!0})}else if(!b.explicit||t in n)for(const r of y[t]){const o=t in n?n[t]:f(b);if(i.isList(r)){const o=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:f(b),s={"@list":[]};v(S,t,s);const u=r["@list"];for(const t of u)i.isSubjectReference(t)?d.frame(Hi(lr({},e),{embedded:!0}),[t["@id"]],o,s,"@list"):v(s,"@list",a.clone(t))}else i.isSubjectReference(r)?d.frame(Hi(lr({},e),{embedded:!0}),[r["@id"]],o,S,t):w(o[0],r)&&v(S,t,a.clone(r))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!o.isObject(n[e][0])||!("@default"in n[e][0]))continue}else if(r(e))continue;const t=n[e][0]||{};if(!p(t,l,"omitDefault")&&!(e in S)){let n="@null";"@default"in t&&(n=a.clone(t["@default"])),o.isArray(n)||(n=[n]),S[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const r=n["@reverse"][t];for(const n of Object.keys(e.subjects))a.getValues(e.subjects[n],t).some(e=>e["@id"]===g)&&(S["@reverse"]=S["@reverse"]||{},a.addValue(S["@reverse"],t,[],{propertyIsArray:!0}),d.frame(Hi(lr({},e),{embedded:!0}),[n],r,S["@reverse"][t],c))}v(s,c,S),e.subjectStack.pop()}}},d.cleanupNull=(e,t)=>{if(o.isArray(e))return e.map(e=>d.cleanupNull(e,t)).filter(e=>e);if("@null"===e)return null;if(o.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=d.cleanupNull(e[n],t)}return e}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32}],24:[function(e,t,n){"use strict";const i=e("./JsonLdError"),o=e("./graphTypes"),a=e("./types"),s=e("./util"),{RDF_LIST:u,RDF_FIRST:c,RDF_REST:l,RDF_NIL:d,RDF_TYPE:f,RDF_JSON_LITERAL:h,XSD_BOOLEAN:p,XSD_DOUBLE:g,XSD_INTEGER:y,XSD_STRING:m}=e("./constants"),b=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,v={};function _(e,t,n){if(e.termType.endsWith("Node"))return{"@id":e.value};const r={"@value":e.value};if(e.language)r["@language"]=e.language;else{let s=e.datatype.value;if(s||(s=m),s===h){s="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(o){throw new i("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:o})}}if(t){if(s===p)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(a.isNumeric(r["@value"]))if(s===y){const e=parseInt(r["@value"],10);e.toFixed(0)===r["@value"]&&(r["@value"]=e)}else s===g&&(r["@value"]=parseFloat(r["@value"]));[p,y,g,m].includes(s)||(r["@type"]=s)}else if("i18n-datatype"===n&&s.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=s.split(/[#_]/);e.length>0&&(r["@language"]=e,e.match(b)||console.warn(`@language must be valid BCP47: ${e}`)),r["@direction"]=t}else s!==m&&(r["@type"]=s)}return r}t.exports=v,v.fromRDF=function(){var e=r(function*(e,{useRdfType:t=!1,useNativeTypes:n=!1,rdfDirection:r=null}){const i={},h={"@default":i},p={};for(const o of e){const e="DefaultGraph"===o.graph.termType?"@default":o.graph.value;e in h||(h[e]={}),"@default"!==e&&!(e in i)&&(i[e]={"@id":e});const a=h[e],u=o.subject.value,c=o.predicate.value,l=o.object;u in a||(a[u]={"@id":u});const g=a[u],y=l.termType.endsWith("Node");if(y&&!(l.value in a)&&(a[l.value]={"@id":l.value}),c===f&&!t&&y){s.addValue(g,"@type",l.value,{propertyIsArray:!0});continue}const m=_(l,n,r);if(s.addValue(g,c,m,{propertyIsArray:!0}),y)if(l.value===d){const e=a[l.value];"usages"in e||(e.usages=[]),e.usages.push({node:g,property:c,value:m})}else p[l.value]=!(l.value in p)&&{node:g,property:c,value:m}}for(const s in h){const e=h[s];if(!(d in e))continue;const t=e[d];if(t.usages){for(let n of t.usages){let t=n.node,r=n.property,i=n.value;const s=[],d=[];let f=Object.keys(t).length;for(;r===l&&a.isObject(p[t["@id"]])&&a.isArray(t[c])&&1===t[c].length&&a.isArray(t[l])&&1===t[l].length&&(3===f||4===f&&a.isArray(t["@type"])&&1===t["@type"].length&&t["@type"][0]===u)&&(s.push(t[c][0]),d.push(t["@id"]),n=p[t["@id"]],t=n.node,r=n.property,i=n.value,f=Object.keys(t).length,o.isBlankNode(t)););delete i["@id"],i["@list"]=s.reverse();for(const n of d)delete e[n]}delete t.usages}}const g=[],y=Object.keys(i).sort();for(const a of y){const e=i[a];if(a in h){const t=e["@graph"]=[],n=h[a],r=Object.keys(n).sort();for(const e of r){const r=n[e];o.isSubjectReference(r)||t.push(r)}}o.isSubjectReference(e)||g.push(e)}return g});return function(t,n){return e.apply(this,arguments)}}()},{"./JsonLdError":12,"./constants":18,"./graphTypes":25,"./types":30,"./util":32}],25:[function(e,t,n){"use strict";const r=e("./types"),i={};t.exports=i,i.isSubject=e=>!(!r.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e)),i.isSubjectReference=e=>r.isObject(e)&&1===Object.keys(e).length&&"@id"in e,i.isValue=e=>r.isObject(e)&&"@value"in e,i.isList=e=>r.isObject(e)&&"@list"in e,i.isGraph=e=>r.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter(e=>"@id"!==e&&"@index"!==e).length,i.isSimpleGraph=e=>i.isGraph(e)&&!("@id"in e),i.isBlankNode=e=>!!r.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))},{"./types":30}],26:[function(e,t,n){const i=e("rdf-canonize"),o=e("./platform"),a=e("./util"),s=e("./ContextResolver"),u=a.IdentifierIssuer,c=e("./JsonLdError"),l=e("lru-cache"),d=e("./NQuads"),{expand:f}=e("./expand"),{flatten:h}=e("./flatten"),{fromRDF:p}=e("./fromRdf"),{toRDF:g}=e("./toRdf"),{frameMergedOrDefault:y,cleanupNull:m}=e("./frame"),{isArray:b,isObject:v,isString:_}=e("./types"),{isSubjectReference:w}=e("./graphTypes"),{expandIri:x,getInitialContext:S,process:j,processingMode:N}=e("./context"),{compact:E,compactIri:T}=e("./compact"),{createNodeMap:I,createMergedNodeMap:A,mergeNodeMaps:k}=e("./nodeMap"),R=function(t){const n={},R=new l({max:100});function O(e,n){var r=n,{documentLoader:i=t.documentLoader}=r,o=Nl(r,["documentLoader"]);return Object.assign({},{documentLoader:i},o,e)}return t.compact=function(){var e=r(function*(e,n,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new c("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===e)return null;let i;(r=O(r,{base:_(e)?e:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new u("_:b"),contextResolver:new s({sharedCache:R})})).link&&(r.skipExpansion=!0),r.compactToRelative||delete r.base,i=r.skipExpansion?e:yield t.expand(e,r);const o=yield t.processContext(S(r),n,r);let l=yield E({activeCtx:o,element:i,options:r,compactionMap:r.compactionMap});r.compactArrays&&!r.graph&&b(l)?1===l.length?l=l[0]:0===l.length&&(l={}):r.graph&&v(l)&&(l=[l]),v(n)&&"@context"in n&&(n=n["@context"]),n=a.clone(n),b(n)||(n=[n]);const d=n;n=[];for(let t=0;t<d.length;++t)(!v(d[t])||Object.keys(d[t]).length>0)&&n.push(d[t]);const f=n.length>0;if(1===n.length&&(n=n[0]),b(l)){const e=T({activeCtx:o,iri:"@graph",relativeTo:{vocab:!0}}),t=l;l={},f&&(l["@context"]=n),l[e]=t}else if(v(l)&&f){const e=l;l={"@context":n};for(const t in e)l[t]=e[t]}return l});return function(t,n,r){return e.apply(this,arguments)}}(),t.expand=function(){var e=r(function*(e,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(n=O(n,{keepFreeFloatingNodes:!1,contextResolver:new s({sharedCache:R})})).expansionMap&&(n.expansionMap=void 0);const r={},i=[];if("expandContext"in n){const e=a.clone(n.expandContext);r.expandContext=v(e)&&"@context"in e?e:{"@context":e},i.push(r.expandContext)}let o;if(_(e)){const a=yield t.get(e,n);o=a.documentUrl,r.input=a.document,a.contextUrl&&(r.remoteContext={"@context":a.contextUrl},i.push(r.remoteContext))}else r.input=a.clone(e);"base"in n||(n.base=o||"");let u=S(n);for(const t of i)u=yield j({activeCtx:u,localCtx:t,options:n});let c=yield f({activeCtx:u,element:r.input,options:n,expansionMap:n.expansionMap});return v(c)&&"@graph"in c&&1===Object.keys(c).length?c=c["@graph"]:null===c&&(c=[]),b(c)||(c=[c]),c});return function(t,n){return e.apply(this,arguments)}}(),t.flatten=function(){var e=r(function*(e,n,r){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,r=O(r,{base:_(e)?e:"",contextResolver:new s({sharedCache:R})});const i=yield t.expand(e,r),o=h(i);return null===n?o:(r.graph=!0,r.skipExpansion=!0,yield t.compact(o,n,r))});return function(t,n,r){return e.apply(this,arguments)}}(),t.frame=function(){var e=r(function*(e,n,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(r=O(r,{base:_(e)?e:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new s({sharedCache:R})}),_(n)){const e=yield t.get(n,r);if(n=e.document,e.contextUrl){let t=n["@context"];t?b(t)?t.push(e.contextUrl):t=[t,e.contextUrl]:t=e.contextUrl,n["@context"]=t}}const i=n&&n["@context"]||{},o=yield t.processContext(S(r),i,r);r.hasOwnProperty("omitGraph")||(r.omitGraph=N(o,1.1)),r.hasOwnProperty("pruneBlankNodeIdentifiers")||(r.pruneBlankNodeIdentifiers=N(o,1.1));const a=yield t.expand(e,r),u=lr({},r);u.isFrame=!0,u.keepFreeFloatingNodes=!0;const c=yield t.expand(n,u),l=Object.keys(n).map(e=>x(o,e,{vocab:!0}));u.merged=!l.includes("@graph"),u.is11=N(o,1.1);const d=y(a,c,u);u.graph=!r.omitGraph,u.skipExpansion=!0,u.link={},u.framing=!0;let f=yield t.compact(d,i,u);return u.link={},f=m(f,u),f});return function(t,n,r){return e.apply(this,arguments)}}(),t.link=function(){var e=r(function*(e,n,r){const i={};return n&&(i["@context"]=n),i["@embed"]="@link",t.frame(e,i,r)});return function(t,n,r){return e.apply(this,arguments)}}(),t.normalize=t.canonize=function(){var e=r(function*(e,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=O(n,{base:_(e)?e:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new s({sharedCache:R})}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new c("Unknown canonicalization input format.","jsonld.CanonizeError");const t=d.parse(e);return i.canonize(t,n)}const r=lr({},n);delete r.format,r.produceGeneralizedRdf=!1;const o=yield t.toRDF(e,r);return i.canonize(o,n)});return function(t,n){return e.apply(this,arguments)}}(),t.fromRDF=function(){var e=r(function*(e,t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");t=O(t,{format:_(e)?"application/n-quads":void 0});const{format:r}=t;let{rdfParser:i}=t;if(r){if(i=i||n[r],!i)throw new c("Unknown input format.","jsonld.UnknownFormat",{format:r})}else i=()=>e;const o=yield i(e);return p(o,t)});return function(t,n){return e.apply(this,arguments)}}(),t.toRDF=function(){var e=r(function*(e,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let r;r=(n=O(n,{base:_(e)?e:"",skipExpansion:!1,contextResolver:new s({sharedCache:R})})).skipExpansion?e:yield t.expand(e,n);const i=g(r,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return d.serialize(i);throw new c("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return i});return function(t,n){return e.apply(this,arguments)}}(),t.createNodeMap=function(){var e=r(function*(e,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=O(n,{base:_(e)?e:"",contextResolver:new s({sharedCache:R})});const r=yield t.expand(e,n);return A(r,n)});return function(t,n){return e.apply(this,arguments)}}(),t.merge=function(){var e=r(function*(e,n,r){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!b(e))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,r=O(r,{contextResolver:new s({sharedCache:R})});const i=yield Promise.all(e.map(e=>{const n=lr({},r);return t.expand(e,n)}));let o=!0;"mergeNodes"in r&&(o=r.mergeNodes);const c=r.issuer||new u("_:b"),l={"@default":{}};for(let t=0;t<i.length;++t){const e=a.relabelBlankNodes(i[t],{issuer:new u("_:b"+t+"-")}),n=o||0===t?l:{"@default":{}};if(I(e,n,"@default",c),n!==l)for(const t in n){const e=n[t];if(!(t in l)){l[t]=e;continue}const r=l[t];for(const t in e)t in r||(r[t]=e[t])}}const d=k(l),f=[],h=Object.keys(d).sort();for(let t=0;t<h.length;++t){const e=d[h[t]];w(e)||f.push(e)}return null===n?f:(r.graph=!0,r.skipExpansion=!0,yield t.compact(f,n,r))});return function(t,n,r){return e.apply(this,arguments)}}(),Object.defineProperty(t,"documentLoader",{get:()=>t._documentLoader,set:e=>t._documentLoader=e}),t.documentLoader=function(){var e=r(function*(e){throw new c("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})});return function(t){return e.apply(this,arguments)}}(),t.get=function(){var e=r(function*(e,n){let r;r="function"==typeof n.documentLoader?n.documentLoader:t.documentLoader;const i=yield r(e);try{if(!i.document)throw new c("No remote document found at the given URL.","jsonld.NullRemoteDocument");_(i.document)&&(i.document=JSON.parse(i.document))}catch(o){throw new c("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:o,remoteDoc:i})}return i});return function(t,n){return e.apply(this,arguments)}}(),t.processContext=function(){var e=r(function*(e,t,n){return n=O(n,{base:"",contextResolver:new s({sharedCache:R})}),null===t?S(n):(t=a.clone(t),v(t)&&"@context"in t||(t={"@context":t}),j({activeCtx:e,localCtx:t,options:n}))});return function(t,n,r){return e.apply(this,arguments)}}(),t.getContextValue=e("./context").getContextValue,t.documentLoaders={},t.useDocumentLoader=function(e){if(!(e in t.documentLoaders))throw new c('Unknown document loader type: "'+e+'"',"jsonld.UnknownDocumentLoader",{type:e});t.documentLoader=t.documentLoaders[e].apply(t,Array.prototype.slice.call(arguments,1))},t.registerRDFParser=function(e,t){n[e]=t},t.unregisterRDFParser=function(e){delete n[e]},t.registerRDFParser("application/n-quads",d.parse),t.registerRDFParser("application/nquads",d.parse),t.url=e("./url"),t.util=a,Object.assign(t,a),t.promises=t,t.RequestQueue=e("./RequestQueue"),t.JsonLdProcessor=e("./JsonLdProcessor")(t),o.setupGlobals(t),o.setupDocumentLoaders(t),t},O=function(){return R(function(){return O()})};R(O),t.exports=O},{"./ContextResolver":11,"./JsonLdError":12,"./JsonLdProcessor":13,"./NQuads":14,"./RequestQueue":15,"./compact":17,"./context":19,"./expand":21,"./flatten":22,"./frame":23,"./fromRdf":24,"./graphTypes":25,"./nodeMap":27,"./platform":28,"./toRdf":29,"./types":30,"./url":31,"./util":32,"lru-cache":33,"rdf-canonize":46}],27:[function(e,t,n){"use strict";const{isKeyword:r}=e("./context"),i=e("./graphTypes"),o=e("./types"),a=e("./util"),s=e("./JsonLdError"),u={};t.exports=u,u.createMergedNodeMap=(e,t)=>{const n=(t=t||{}).issuer||new a.IdentifierIssuer("_:b"),r={"@default":{}};return u.createNodeMap(e,r,"@default",n),u.mergeNodeMaps(r)},u.createNodeMap=(e,t,n,c,l,d)=>{if(o.isArray(e)){for(const r of e)u.createNodeMap(r,t,n,c,void 0,d);return}if(!o.isObject(e))return void(d&&d.push(e));if(i.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=c.getId(t))}return void(d&&d.push(e))}if(d&&i.isList(e)){const r=[];return u.createNodeMap(e["@list"],t,n,c,l,r),void d.push({"@list":r})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&c.getId(e)}o.isUndefined(l)&&(l=i.isBlankNode(e)?c.getId(e["@id"]):e["@id"]),d&&d.push({"@id":l});const f=t[n],h=f[l]=f[l]||{};h["@id"]=l;const p=Object.keys(e).sort();for(let o of p){if("@id"===o)continue;if("@reverse"===o){const r={"@id":l},o=e["@reverse"];for(const e in o){const s=o[e];for(const o of s){let s=o["@id"];i.isBlankNode(o)&&(s=c.getId(s)),u.createNodeMap(o,t,n,c,s),a.addValue(f[s],e,r,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===o){l in t||(t[l]={}),u.createNodeMap(e[o],t,l,c);continue}if("@included"===o){u.createNodeMap(e[o],t,n,c);continue}if("@type"!==o&&r(o)){if("@index"===o&&o in h&&(e[o]!==h[o]||e[o]["@id"]!==h[o]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[o]=e[o];continue}const d=e[o];if(0===o.indexOf("_:")&&(o=c.getId(o)),0!==d.length)for(let e of d)if("@type"===o&&(e=0===e.indexOf("_:")?c.getId(e):e),i.isSubject(e)||i.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const r=i.isBlankNode(e)?c.getId(e["@id"]):e["@id"];a.addValue(h,o,{"@id":r},{propertyIsArray:!0,allowDuplicate:!1}),u.createNodeMap(e,t,n,c,r)}else if(i.isValue(e))a.addValue(h,o,e,{propertyIsArray:!0,allowDuplicate:!1});else if(i.isList(e)){const r=[];u.createNodeMap(e["@list"],t,n,c,l,r),e={"@list":r},a.addValue(h,o,e,{propertyIsArray:!0,allowDuplicate:!1})}else u.createNodeMap(e,t,n,c,l),a.addValue(h,o,e,{propertyIsArray:!0,allowDuplicate:!1});else a.addValue(h,o,[],{propertyIsArray:!0})}},u.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const i of Object.keys(e[n]).sort()){const o=e[n][i];i in t||(t[i]={"@id":i});const s=t[i];for(const e of Object.keys(o).sort())if(r(e)&&"@type"!==e)s[e]=a.clone(o[e]);else for(const t of o[e])a.addValue(s,e,a.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},u.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const r of n){if("@default"===r)continue;const n=e[r];let o=t[r];o?"@graph"in o||(o["@graph"]=[]):t[r]=o={"@id":r,"@graph":[]};const a=o["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];i.isSubjectReference(t)||a.push(t)}}return t}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./util":32}],28:[function(e,t,n){"use strict";const r=e("./documentLoaders/xhr"),i={};t.exports=i,i.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=r,e.useDocumentLoader("xhr"))},i.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}},{"./documentLoaders/xhr":20}],29:[function(e,t,n){"use strict";const{createNodeMap:r}=e("./nodeMap"),{isKeyword:i}=e("./context"),o=e("./graphTypes"),a=e("canonicalize"),s=e("./types"),u=e("./util"),{RDF_FIRST:c,RDF_REST:l,RDF_NIL:d,RDF_TYPE:f,RDF_JSON_LITERAL:h,RDF_LANGSTRING:p,XSD_BOOLEAN:g,XSD_DOUBLE:y,XSD_INTEGER:m,XSD_STRING:b}=e("./constants"),{isAbsolute:v}=e("./url"),_={};function w(e,t,n,r,o){const a=Object.keys(t).sort();for(const s of a){const a=t[s],u=Object.keys(a).sort();for(let t of u){const u=a[t];if("@type"===t)t=f;else if(i(t))continue;for(const i of u){const a={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!v(s))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!v(t)||"BlankNode"===u.termType&&!o.produceGeneralizedRdf)continue;const c=x(i,r,e,n,o.rdfDirection);c&&e.push({subject:a,predicate:u,object:c,graph:n})}}}}function x(e,t,n,r,i){const u={};if(o.isValue(e)){u.termType="Literal",u.value=void 0,u.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;"@json"===n?(u.value=a(t),u.datatype.value=h):s.isBoolean(t)?(u.value=t.toString(),u.datatype.value=n||g):s.isDouble(t)||n===y?(s.isDouble(t)||(t=parseFloat(t)),u.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),u.datatype.value=n||y):s.isNumber(t)?(u.value=t.toFixed(0),u.datatype.value=n||m):"i18n-datatype"===i&&"@direction"in e?(u.datatype.value="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`,u.value=t):"@language"in e?(u.value=t,u.datatype.value=n||p,u.language=e["@language"]):(u.value=t,u.datatype.value=n||b)}else if(o.isList(e)){const o=function(e,t,n,r,i){const o={termType:"NamedNode",value:c},a={termType:"NamedNode",value:l},s={termType:"NamedNode",value:d},u=e.pop(),f=u?{termType:"BlankNode",value:t.getId()}:s;let h=f;for(const c of e){const e=x(c,t,n,r,i),s={termType:"BlankNode",value:t.getId()};n.push({subject:h,predicate:o,object:e,graph:r}),n.push({subject:h,predicate:a,object:s,graph:r}),h=s}if(u){const e=x(u,t,n,r,i);n.push({subject:h,predicate:o,object:e,graph:r}),n.push({subject:h,predicate:a,object:s,graph:r})}return f}(e["@list"],t,n,r,i);u.termType=o.termType,u.value=o.value}else{const t=s.isObject(e)?e["@id"]:e;u.termType=t.startsWith("_:")?"BlankNode":"NamedNode",u.value=t}return"NamedNode"!==u.termType||v(u.value)?u:null}t.exports=_,_.toRDF=(e,t)=>{const n=new u.IdentifierIssuer("_:b"),i={"@default":{}};r(e,i,"@default",n);const o=[],a=Object.keys(i).sort();for(const r of a){let e;if("@default"===r)e={termType:"DefaultGraph",value:""};else{if(!v(r))continue;e=r.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},e.value=r}w(o,i[r],e,n,t)}return o}},{"./constants":18,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32,canonicalize:7}],30:[function(e,t,n){"use strict";const r={};t.exports=r,r.isArray=Array.isArray,r.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),r.isDouble=e=>r.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),r.isEmptyObject=e=>r.isObject(e)&&0===Object.keys(e).length,r.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),r.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),r.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),r.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),r.isUndefined=e=>void 0===e},{}],31:[function(e,t,n){"use strict";const r=e("./types"),i={};t.exports=i,i.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},i.parse=(e,t)=>{const n={},r=i.parsers[t||"full"],o=r.regex.exec(e);let a=r.keys.length;for(;a--;)n[r.keys[a]]=void 0===o[a]?null:o[a];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=i.removeDotSegments(n.path),n},i.prependBase=(e,t)=>{if(null===e||i.isAbsolute(t))return t;(!e||r.isString(e))&&(e=i.parse(e||""));const n=i.parse(t),o={protocol:e.protocol||""};if(null!==n.authority)o.authority=n.authority,o.path=n.path,o.query=n.query;else if(o.authority=e.authority,""===n.path)o.path=e.path,o.query=null!==n.query?n.query:e.query;else{if(0===n.path.indexOf("/"))o.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,o.path=t}o.query=n.query}""!==n.path&&(o.path=i.removeDotSegments(o.path));let a=o.protocol;return null!==o.authority&&(a+="//"+o.authority),a+=o.path,null!==o.query&&(a+="?"+o.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a},i.removeBase=(e,t)=>{if(null===e)return t;(!e||r.isString(e))&&(e=i.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const o=i.parse(t.substr(n.length)),a=e.normalizedPath.split("/"),s=o.normalizedPath.split("/"),u=o.fragment||o.query?0:1;for(;a.length>0&&s.length>u&&a[0]===s[0];)a.shift(),s.shift();let c="";if(a.length>0){a.pop();for(let e=0;e<a.length;++e)c+="../"}return c+=s.join("/"),null!==o.query&&(c+="?"+o.query),null!==o.fragment&&(c+="#"+o.fragment),""===c&&(c="./"),c},i.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];for(;t.length>0;){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const o=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;i.isAbsolute=e=>r.isString(e)&&o.test(e),i.isRelative=e=>r.isString(e)},{"./types":30}],32:[function(e,t,n){"use strict";const r=e("./graphTypes"),i=e("./types"),o=e("rdf-canonize").IdentifierIssuer,a=e("./JsonLdError"),s=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,u=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l={accept:"application/ld+json, application/json"},d={};function f(e,t){if(i.isArray(t))for(let n=0;n<t.length;++n)t[n]=f(e,t[n]);else if(r.isList(t))t["@list"]=f(e,t["@list"]);else if(i.isObject(t)){r.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const n=Object.keys(t).sort();for(let r=0;r<n.length;++r){const i=n[r];"@id"!==i&&(t[i]=f(e,t[i]))}}return t}t.exports=d,d.IdentifierIssuer=o,d.clone=function(e){if(e&&"object"==typeof e){let t;if(i.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=d.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,r]of e)t.set(n,d.clone(r))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(d.clone(n))}else if(i.isObject(e)){t={};for(const n in e)t[n]=d.clone(e[n])}else t=e.toString();return t}return e},d.asArray=function(e){return Array.isArray(e)?e:[e]},d.buildHeaders=(e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+l.accept+'" is supported.');return Object.assign({Accept:l.accept},e)},d.parseLinkHeader=e=>{const t={},n=e.match(s);for(let r=0;r<n.length;++r){let e=n[r].match(u);if(!e)continue;const i={target:e[1]},o=e[2];for(;e=c.exec(o);)i[e[1]]=void 0===e[2]?e[3]:e[2];const a=i.rel||"";Array.isArray(t[a])?t[a].push(i):t[a]=t.hasOwnProperty(a)?[t[a],i]:i}return t},d.validateTypeValue=(e,t)=>{if(!(i.isString(e)||i.isArray(e)&&e.every(e=>i.isString(e)))){if(t&&i.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&d.asArray(e["@default"]).every(e=>i.isString(e)))return}throw new a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},d.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!i.isArray(n)||n.length>0}return!1},d.hasValue=(e,t,n)=>{if(d.hasProperty(e,t)){let o=e[t];const a=r.isList(o);if(i.isArray(o)||a){a&&(o=o["@list"]);for(let e=0;e<o.length;++e)if(d.compareValues(n,o[e]))return!0}else if(!i.isArray(n))return d.compareValues(n,o)}return!1},d.addValue=(e,t,n,r)=>{if("propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(i.isArray(n)){0===n.length&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let i=0;i<n.length;++i)d.addValue(e,t,n[i],r)}else if(e.hasOwnProperty(t)){const o=!r.allowDuplicate&&d.hasValue(e,t,n);!i.isArray(e[t])&&(!o||r.propertyIsArray)&&(e[t]=[e[t]]),o||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n},d.getValues=(e,t)=>[].concat(e[t]||[]),d.removeProperty=(e,t)=>{delete e[t]},d.removeValue=(e,t,n,r)=>{"propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1);const i=d.getValues(e,t).filter(e=>!d.compareValues(e,n));0===i.length?d.removeProperty(e,t):e[t]=1!==i.length||r.propertyIsArray?i:i[0]},d.relabelBlankNodes=(e,t)=>f((t=t||{}).issuer||new o("_:b"),e),d.compareValues=(e,t)=>!!(e===t||r.isValue(e)&&r.isValue(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"])||!!(i.isObject(e)&&"@id"in e&&i.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"],d.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},{"./JsonLdError":12,"./graphTypes":25,"./types":30,"rdf-canonize":46}],33:[function(e,t,n){"use strict";const r=e("yallist"),i=Symbol("max"),o=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),f=Symbol("cache"),h=Symbol("updateAgeOnGet"),p=()=>1;const g=(e,t,n)=>{const r=e[f].get(t);if(r){const t=r.value;if(y(e,t)){if(b(e,r),!e[s])return}else n&&(e[h]&&(r.value.now=Date.now()),e[d].unshiftNode(r));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[u]&&n>e[u]},m=e=>{if(e[o]>e[i])for(let t=e[d].tail;e[o]>e[i]&&null!==t;){const n=t.prev;b(e,t),t=n}},b=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[o]-=n.length,e[f].delete(n.key),e[d].removeNode(t)}};class v{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const _=(e,t,n,r)=>{let i=n.value;y(e,i)&&(b(e,n),e[s]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};t.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||p;if(this[a]="function"!=typeof t?p:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,m(this)}get max(){return this[i]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,m(this)}get maxAge(){return this[u]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[a]&&(this[a]=e,this[o]=0,this[d].forEach(e=>{e.length=this[a](e.value,e.key),this[o]+=e.length})),m(this)}get lengthCalculator(){return this[a]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;null!==n;){const r=n.prev;_(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[d].head;null!==n;){const r=n.next;_(this,e,n,t),n=r}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach(e=>this[c](e.key,e.value)),this[f]=new Map,this[d]=new r,this[o]=0}dump(){return this[d].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,n){if((n=n||this[u])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,s=this[a](t,e);if(this[f].has(e)){if(s>this[i])return b(this,this[f].get(e)),!1;const a=this[f].get(e).value;return this[c]&&(this[l]||this[c](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[o]+=s-a.length,a.length=s,this.get(e),m(this),!0}const h=new v(e,t,s,r,n);return h.length>this[i]?(this[c]&&this[c](e,t),!1):(this[o]+=h.length,this[d].unshift(h),this[f].set(e,this[d].head),m(this),!0)}has(e){if(!this[f].has(e))return!1;const t=this[f].get(e).value;return!y(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[f].forEach((e,t)=>g(this,t,!1))}}},{yallist:92}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#",o="http://www.w3.org/2000/10/swap/";n.default={xsd:{decimal:`${i}decimal`,boolean:`${i}boolean`,double:`${i}double`,integer:`${i}integer`,string:`${i}string`},rdf:{type:`${r}type`,nil:`${r}nil`,first:`${r}first`,rest:`${r}rest`,langString:`${r}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${o}reify#forSome`,forAll:`${o}reify#forAll`},log:{implies:`${o}log#implies`}}},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.termFromId=function e(t,n){if(n=n||f,!t)return n.defaultGraph();switch(t[0]){case"?":return n.variable(t.substr(1));case"_":return n.blankNode(t.substr(2));case'"':if(n===f)return new g(t);if('"'===t[t.length-1])return n.literal(t.substr(1,t.length-2));const r=t.lastIndexOf('"',t.length-1);return n.literal(t.substr(1,r-1),"@"===t[r+1]?t.substr(r+2):n.namedNode(t.substr(r+3)));case"<":const i=d.exec(t);return n.quad(e(w(i[1]),n),e(w(i[2]),n),e(w(i[3]),n),i[4]&&e(w(i[4]),n));default:return n.namedNode(t)}},n.termToId=function e(t){if("string"==typeof t)return t;if(t instanceof h&&"Quad"!==t.termType)return t.id;if(!t)return u.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==s.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${_(e(t.subject))} ${_(e(t.predicate))} ${_(e(t.object))}${(0,o.isDefaultGraph)(t.graph)?"":` ${e(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}},n.escapeQuotes=_,n.unescapeQuotes=w,n.Triple=n.Quad=n.DefaultGraph=n.Variable=n.BlankNode=n.Literal=n.NamedNode=n.Term=n.default=void 0;var r,i=(r=e("./IRIs"))&&r.__esModule?r:{default:r},o=e("./N3Util");const{rdf:a,xsd:s}=i.default;let u,c=0;const l=/^"(.*".*)(?="[^"]*$)/,d=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,f={namedNode:function(e){return new p(e)},blankNode:function(e){return new y(e||"n3-"+c++)},variable:function(e){return new m(e)},literal:function(e,t){if("string"==typeof t)return new g(`"${e}"@${t.toLowerCase()}`);let n=t?t.value:"";return""===n&&("boolean"==typeof e?n=s.boolean:"number"==typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?s.integer:s.double:(n=s.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),new g(""===n||n===s.string?`"${e}"`:`"${e}"^^${n}`)},defaultGraph:function(){return u},quad:x,triple:x};n.default=f;class h{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof h?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}toJSON(){return{termType:this.termType,value:this.value}}}n.Term=h;class p extends h{get termType(){return"NamedNode"}}n.NamedNode=p;class g extends h{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new p(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return"^"===n?e.substr(t+2):"@"!==n?s.string:a.langString}equals(e){return e instanceof g?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}n.Literal=g;class y extends h{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}n.BlankNode=y;class m extends h{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}n.Variable=m;class b extends h{constructor(){return super(""),u||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}n.DefaultGraph=b,u=new b;class v extends h{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||u}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function _(e){return e.replace(l,(e,t)=>`"${t.replace(/"/g,'""')}`)}function w(e){return e.replace(l,(e,t)=>`"${t.replace(/""/g,'"')}`)}function x(e,t,n,r){return new v(e,t,n,r)}n.Triple=n.Quad=v},{"./IRIs":34,"./N3Util":41}],36:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("./IRIs")),i=o(e("queue-microtask"));function o(e){return e&&e.__esModule?e:{default:e}}const{xsd:a}=r.default,s=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,u={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},c=/[\x00-\x20<>\\"\{\}\|\^\`]/,l={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},d=/$0^/;n.default=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const e in this)!(e in l)&&this[e]instanceof RegExp&&(this[e]=d)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input;const r=this._comments;for(;;){let o,s;for(;o=this._newline.exec(n);)r&&(s=this._comment.exec(o[0]))&&e(null,{line:this._line,type:"comment",value:s[1],prefix:""}),n=n.substr(o[0].length,n.length),this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return t&&(r&&(s=this._comment.exec(n))&&e(null,{line:this._line,type:"comment",value:s[1],prefix:""}),e(n=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=n;const u=this._line,l=n[0];let d="",f="",h="",p=null,g=0,y=!1;switch(l){case"^":if(n.length<3)break;if("^"!==n[1]){this._n3Mode&&(g=1,d="^");break}if(this._previousMarker="^^",n=n.substr(2),"<"!==n[0]){y=!0;break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),null===f||c.test(f))return i(this);d="IRI"}else n.length>1&&"<"===n[1]?(d="<<",g=2):this._n3Mode&&n.length>1&&"="===n[1]&&(d="inverse",g=2,f=">");break;case">":n.length>1&&">"===n[1]&&(d=">>",g=2);break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if(({value:f,matchLength:g}=this._parseLiteral(n)),null===f)return i(this);(null!==p||0!==g)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if(({value:f,matchLength:g}=this._parseLiteral(n)),null===f)return i(this);(null!==p||0!==g)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":"literal"===this._previousMarker&&(p=this._langcode.exec(n))?(d="langcode",f=p[1]):(p=this._keyword.exec(n))&&(d=p[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){d=".",g=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||t&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h="string"==typeof p[1]?a.double:"string"==typeof p[2]?a.decimal:a.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?d=p[0].toUpperCase():y=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=a.boolean):y=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):y=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",">"!==n[1]?(g=1,f="="):(g=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(g=1,d=l);break;default:y=!0}if(y&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(p=this._prefix.exec(n))?((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2])):(d="prefix",f=p[1]||"")),"^^"===this._previousMarker)switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?i(this):this._input=n;const m={line:u,type:d,value:f,prefix:h};e(null,m),this.previousToken=m,this._previousMarker=d,n=n.substr(g||p[0].length,n.length)}function i(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(s,(e,n,r,i)=>{if("string"==typeof n)return String.fromCharCode(Number.parseInt(n,16));if("string"==typeof r){let e=Number.parseInt(r,16);return e<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return i in u?u[i]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let t=0;for(;"\\"===e[r-t-1];)t++;if(t%2==0){const t=e.substring(n,r),i=t.split(/\r\n|\r|\n/).length-1,o=r+n;if(1===n&&0!==i||3===n&&this._lineMode)break;return this._line+=i,{value:this._unescape(t),matchLength:o}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const e=[];let t;if(this._tokenizeToEnd((n,r)=>n?t=n:e.push(r),!0),t)throw t;return e}(0,i.default)(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=t.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}}).call(this)}).call(this,e("buffer").Buffer)},{"./IRIs":34,buffer:6,"queue-microtask":45}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("./N3Lexer")),i=a(e("./N3DataFactory")),o=a(e("./IRIs"));function a(e){return e&&e.__esModule?e:{default:e}}let s=0;class u{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&l(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),i=/trig/.test(t),o=/triple/.test(t),a=/quad/.test(t),s=this._n3Mode=/n3/.test(t),u=o||a;(this._supportsNamedGraphs=!(n||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||o||s),this._supportsRDFStar=""===t||/star|\*$/.test(t),u&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new r.default({lineMode:u,n3:s}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){s=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,n,r,i){const o=this._n3Mode;this._contextStack.push({subject:n,predicate:r,object:i,graph:t,type:e,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const e=this._contextStack.pop(),t=this._n3Mode;this._subject=e.subject,this._predicate=e.predicate,this._object=e.object,this._graph=e.graph,t&&(this._inversePredicate=e.inverse,this._prefixes._=e.blankPrefix,this._quantified=e.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);n=this._namedNode(t);break;case"type":case"prefixed":const r=this._prefixes[e.prefix];if(void 0===r)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(r+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext(),null===this._object?t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._blankNode()),null===i?null===a.predicate?a.subject=n:a.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(void 0===n)return;t=this._literal(this._literalValue,n),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===n.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const e=this._predicate,t=this._object;i?this._emit(t,e,r,n):this._emit(r,e,t,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){const e=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,e,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._blankNode();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let n,r;if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=c}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,i=-1,o=0,a="/";for(;r<t;){switch(a){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<t&&"/"!==e[i];)r=i;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":n+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return n+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(n+=e.substring(o,r-2),(o=n.lastIndexOf("/"))>=i&&(n=n.substr(0,o)),"/"!==a)return`${n}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return n+e.substring(o)}parse(e,t,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${s++}_`,this._prefixCallback=n||c,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const t=[];let n;if(this._callback=(e,r)=>{e?n=e:r&&t.push(r)},this._lexer.tokenize(e).every(e=>this._readCallback=this._readCallback(e)),n)throw n;return t}this._callback=t,this._lexer.tokenize(e,(e,t)=>{null!==e?(this._callback(e),this._callback=c):this._readCallback&&(this._readCallback=this._readCallback(t))})}}function c(){}function l(e,t){const n=t.namedNode;e._namedNode=n,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=n(o.default.rdf.first),e.RDF_REST=n(o.default.rdf.rest),e.RDF_NIL=n(o.default.rdf.nil),e.N3_FORALL=n(o.default.r.forAll),e.N3_FORSOME=n(o.default.r.forSome),e.ABBREVIATIONS={a:n(o.default.rdf.type),"=":n(o.default.owl.sameAs),">":n(o.default.log.implies)},e.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}n.default=u,l(u.prototype,i.default)},{"./IRIs":34,"./N3DataFactory":35,"./N3Lexer":36}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("./N3DataFactory")),o=e("readable-stream"),a=(r=e("./IRIs"))&&r.__esModule?r:{default:r};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}class u{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!t&&e&&!e[0]&&(t=e,e=null),this._factory=(t=t||{}).factory||i.default,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let n,r;for(const i in t)for(const o in n=t[i].subjects)for(const t in r=n[o])e+=Object.keys(r[t]).length;return this._size=e}_addToIndex(e,t,n,r){const i=e[t]||(e[t]={}),o=i[n]||(i[n]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,t,n,r){const i=e[t],o=i[n];delete o[r];for(const a in o)return;delete i[n];for(const a in i)return;delete e[t]}_findInIndex(e,t,n,r,o,a,s,u,c,l){let d,f,h;const p=!t+!n+!r>1?Object.keys(this._ids):this._entities;t&&((d=e,e={})[t]=d[t]);for(const g in e){const t=p[g];if(f=e[g]){n&&((d=f,f={})[n]=d[n]);for(const e in f){const n=p[e];if(h=f[e]){const e=r?r in h?[r]:[]:Object.keys(h);for(let r=0;r<e.length;r++){const d={subject:null,predicate:null,object:null};d[o]=(0,i.termFromId)(t,this._factory),d[a]=(0,i.termFromId)(n,this._factory),d[s]=(0,i.termFromId)(p[e[r]],this._factory);const f=this._factory.quad(d.subject,d.predicate,d.object,(0,i.termFromId)(u,this._factory));if(l)l.push(f);else if(c(f))return!0}}}}}return l}_loop(e,t){for(const n in e)t(n)}_loopByKey0(e,t,n){let r,i;if(r=e[t])for(i in r)n(i)}_loopByKey1(e,t,n){let r,i;for(r in e)i=e[r],i[t]&&n(r)}_loopBy2Keys(e,t,n,r){let i,o,a;if((i=e[t])&&(o=i[n]))for(a in o)r(a)}_countInIndex(e,t,n,r){let i,o,a,s=0;t&&((i=e,e={})[t]=i[t]);for(const u in e)if(o=e[u]){n&&((i=o,o={})[n]=i[n]);for(const e in o)(a=o[e])&&(r?r in a&&s++:s+=Object.keys(a).length)}return s}_getGraphs(e){if(!c(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return n=>{n in t||(t[n]=!0,e((0,i.termFromId)(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),e=(0,i.termToId)(e),t=(0,i.termToId)(t),n=(0,i.termToId)(n),r=(0,i.termToId)(r);let o=this._graphs[r];o||(o=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const a=this._ids,s=this._entities;e=a[e]||(a[s[++this._id]=e]=this._id),t=a[t]||(a[s[++this._id]=t]=this._id),n=a[n]||(a[s[++this._id]=n]=this._id);const u=this._addToIndex(o.subjects,e,t,n);return this._addToIndex(o.predicates,t,n,e),this._addToIndex(o.objects,n,e,t),this._size=null,u}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e){return 0!==this.getQuads(e.subject,e.predicate,e.object,e.graph).length}import(e){return e.on("data",e=>{this.addQuad(e)}),e}removeQuad(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),e=(0,i.termToId)(e),t=(0,i.termToId)(t),n=(0,i.termToId)(n),r=(0,i.termToId)(r);const o=this._ids,a=this._graphs;let s,u,c;if(!((e=o[e])&&(t=o[t])&&(n=o[n])&&(s=a[r])&&(u=s.subjects[e])&&(c=u[t])&&n in c))return!1;for(e in this._removeFromIndex(s.subjects,e,t,n),this._removeFromIndex(s.predicates,t,n,e),this._removeFromIndex(s.objects,n,e,t),null!==this._size&&this._size--,s.subjects)return!0;return delete a[r],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",e=>{this.removeQuad(e)}),e}removeMatches(e,t,n,r){const i=new o.Readable({objectMode:!0});return i._read=()=>{for(const o of this.getQuads(e,t,n,r))i.push(o);i.push(null)},this.remove(i)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,n,r){e=e&&(0,i.termToId)(e),t=t&&(0,i.termToId)(t),n=n&&(0,i.termToId)(n),r=r&&(0,i.termToId)(r);const o=[],a=this._getGraphs(r),s=this._ids;let u,l,d,f;if(c(e)&&!(l=s[e])||c(t)&&!(d=s[t])||c(n)&&!(f=s[n]))return o;for(const i in a)(u=a[i])&&(l?f?this._findInIndex(u.objects,f,l,d,"object","subject","predicate",i,null,o):this._findInIndex(u.subjects,l,d,null,"subject","predicate","object",i,null,o):d?this._findInIndex(u.predicates,d,f,null,"predicate","object","subject",i,null,o):f?this._findInIndex(u.objects,f,null,null,"object","subject","predicate",i,null,o):this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",i,null,o));return o}match(e,t,n,r){return new l(this,e,t,n,r)}countQuads(e,t,n,r){e=e&&(0,i.termToId)(e),t=t&&(0,i.termToId)(t),n=n&&(0,i.termToId)(n),r=r&&(0,i.termToId)(r);const o=this._getGraphs(r),a=this._ids;let s,u,l,d,f=0;if(c(e)&&!(u=a[e])||c(t)&&!(l=a[t])||c(n)&&!(d=a[n]))return 0;for(const i in o)(s=o[i])&&(f+=e?n?this._countInIndex(s.objects,d,u,l):this._countInIndex(s.subjects,u,l,d):t?this._countInIndex(s.predicates,l,d,u):this._countInIndex(s.objects,d,u,l));return f}forEach(e,t,n,r,i){this.some(t=>(e(t),!1),t,n,r,i)}every(e,t,n,r,i){let o=!1;const a=!this.some(t=>(o=!0,!e(t)),t,n,r,i);return o&&a}some(e,t,n,r,o){t=t&&(0,i.termToId)(t),n=n&&(0,i.termToId)(n),r=r&&(0,i.termToId)(r),o=o&&(0,i.termToId)(o);const a=this._getGraphs(o),s=this._ids;let u,l,d,f;if(c(t)&&!(l=s[t])||c(n)&&!(d=s[n])||c(r)&&!(f=s[r]))return!1;for(const i in a)if(u=a[i])if(l){if(f){if(this._findInIndex(u.objects,f,l,d,"object","subject","predicate",i,e,null))return!0}else if(this._findInIndex(u.subjects,l,d,null,"subject","predicate","object",i,e,null))return!0}else if(d){if(this._findInIndex(u.predicates,d,f,null,"predicate","object","subject",i,e,null))return!0}else if(f){if(this._findInIndex(u.objects,f,null,null,"object","subject","predicate",i,e,null))return!0}else if(this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",i,e,null))return!0;return!1}getSubjects(e,t,n){const r=[];return this.forSubjects(e=>{r.push(e)},e,t,n),r}forSubjects(e,t,n,r){t=t&&(0,i.termToId)(t),n=n&&(0,i.termToId)(n),r=r&&(0,i.termToId)(r);const o=this._ids,a=this._getGraphs(r);let s,u,l;if(e=this._uniqueEntities(e),!(c(t)&&!(u=o[t])||c(n)&&!(l=o[n])))for(r in a)(s=a[r])&&(u?l?this._loopBy2Keys(s.predicates,u,l,e):this._loopByKey1(s.subjects,u,e):l?this._loopByKey0(s.objects,l,e):this._loop(s.subjects,e))}getPredicates(e,t,n){const r=[];return this.forPredicates(e=>{r.push(e)},e,t,n),r}forPredicates(e,t,n,r){t=t&&(0,i.termToId)(t),n=n&&(0,i.termToId)(n),r=r&&(0,i.termToId)(r);const o=this._ids,a=this._getGraphs(r);let s,u,l;if(e=this._uniqueEntities(e),!(c(t)&&!(u=o[t])||c(n)&&!(l=o[n])))for(r in a)(s=a[r])&&(u?l?this._loopBy2Keys(s.objects,l,u,e):this._loopByKey0(s.subjects,u,e):l?this._loopByKey1(s.predicates,l,e):this._loop(s.predicates,e))}getObjects(e,t,n){const r=[];return this.forObjects(e=>{r.push(e)},e,t,n),r}forObjects(e,t,n,r){t=t&&(0,i.termToId)(t),n=n&&(0,i.termToId)(n),r=r&&(0,i.termToId)(r);const o=this._ids,a=this._getGraphs(r);let s,u,l;if(e=this._uniqueEntities(e),!(c(t)&&!(u=o[t])||c(n)&&!(l=o[n])))for(r in a)(s=a[r])&&(u?l?this._loopBy2Keys(s.subjects,u,l,e):this._loopByKey1(s.objects,u,e):l?this._loopByKey0(s.predicates,l,e):this._loop(s.objects,e))}getGraphs(e,t,n){const r=[];return this.forGraphs(e=>{r.push(e)},e,t,n),r}forGraphs(e,t,n,r){for(const i in this._graphs)this.some(t=>(e(t.graph),!0),t,n,r,i)}createBlankNode(e){let t,n;if(e)for(t=e=`_:${e}`,n=1;this._ids[t];)t=e+n++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const n={},r=t?()=>!0:(e,t)=>{throw new Error(`${e.value} ${t}`)},i=this.getQuads(null,a.default.rdf.rest,a.default.rdf.nil,null),o=e?[...i]:[];return i.forEach(t=>{const i=[];let s,u,c=!1;const l=t.graph;let d=t.subject;for(;d&&!c;){const e=this.getQuads(null,null,d,null),t=this.getQuads(d,null,null,null);let n,f=null,h=null,p=null;for(let i=0;i<t.length&&!c;i++)n=t[i],n.graph.equals(l)?s?c=r(d,"has non-list arcs out"):n.predicate.value===a.default.rdf.first?f?c=r(d,"has multiple rdf:first arcs"):o.push(f=n):n.predicate.value===a.default.rdf.rest?h?c=r(d,"has multiple rdf:rest arcs"):o.push(h=n):e.length?c=r(d,"can't be subject and object"):(s=n,u="subject"):c=r(d,"not confined to single graph");for(let i=0;i<e.length&&!c;++i)n=e[i],s?c=r(d,"can't have coreferences"):n.predicate.value===a.default.rdf.rest?p?c=r(d,"has incoming rdf:rest arcs"):p=n:(s=n,u="object");f?i.unshift(f.object):c=r(d,"has no list head"),d=p&&p.subject}c?e=!1:s&&(n[s[u].value]=i)}),e&&this.removeQuads(o),n}*[Symbol.iterator](){yield*this.getQuads()}}function c(e){return"string"==typeof e||e instanceof String}n.default=u;class l extends o.Readable{constructor(e,t,n,r,i){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:n,object:r,graph:i})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:n,predicate:r,subject:i}=this,o=e.getQuads(i,r,n,t);this._filtered=new u(o,{factory:e._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this.filtered.getQuads())this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,n,r){return new l(this.filtered,e,t,n,r)}*[Symbol.iterator](){yield*this.filtered.getQuads()}}},{"./IRIs":34,"./N3DataFactory":35,"readable-stream":81}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./N3Parser"))&&r.__esModule?r:{default:r},o=e("readable-stream");n.default=class extends o.Transform{constructor(e){let t,n;super({decodeStrings:!0}),this._readableState.objectMode=!0,new i.default(e).parse({on:(e,r)=>{switch(e){case"data":t=r;break;case"end":n=r}}},(e,t)=>{e&&this.emit("error",e)||t&&this.push(t)},(e,t)=>{this.emit("prefix",e,t)}),this._transform=(e,n,r)=>{t(e),r()},this._flush=e=>{n(),e()}}import(e){return e.on("data",e=>{this.write(e)}),e.on("end",()=>{this.end()}),e.on("error",e=>{this.emit("error",e)}),this}}},{"./N3Parser":37,"readable-stream":81}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=e("readable-stream"),o=(r=e("./N3Writer"))&&r.__esModule?r:{default:r};n.default=class extends i.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const t=this._writer=new o.default({write:(e,t,n)=>{this.push(e),n&&n()},end:e=>{this.push(null),e&&e()}},e);this._transform=(e,n,r)=>{t.addQuad(e,r)},this._flush=e=>{t.end(e)}}import(e){return e.on("data",e=>{this.write(e)}),e.on("end",()=>{this.end()}),e.on("error",e=>{this.emit("error",e)}),e.on("prefix",(e,t)=>{this._writer.addPrefix(e,t)}),this}}},{"./N3Writer":42,"readable-stream":81}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isNamedNode=function(e){return!!e&&"NamedNode"===e.termType},n.isBlankNode=function(e){return!!e&&"BlankNode"===e.termType},n.isLiteral=function(e){return!!e&&"Literal"===e.termType},n.isVariable=function(e){return!!e&&"Variable"===e.termType},n.isDefaultGraph=o,n.inDefaultGraph=function(e){return o(e.graph)},n.prefix=function(e,t){return a({"":e},t)("")},n.prefixes=a;var r,i=(r=e("./N3DataFactory"))&&r.__esModule?r:{default:r};function o(e){return!!e&&"DefaultGraph"===e.termType}function a(e,t){const n=Object.create(null);for(const i in e)r(i,e[i]);function r(e,r){if("string"==typeof r){const i=Object.create(null);n[e]=e=>i[e]||(i[e]=t.namedNode(r+e))}else if(!(e in n))throw new Error(`Unknown prefix: ${e}`);return n[e]}return t=t||i.default,r}},{"./N3DataFactory":35}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("./IRIs"))&&r.__esModule?r:{default:r},o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("./N3DataFactory")),a=e("./N3Util");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const u=o.default.defaultGraph(),{rdf:c,xsd:l}=i.default,d=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,f=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,h={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class p extends o.Term{equals(){return!1}}function g(e){let t=h[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}n.default=class{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),this._lists=(t=t||{}).lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,n,r){e+=t,r&&r()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=u,this._baseIRI=t.baseIRI,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}get _inDefaultGraph(){return u.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,r,i){try{r.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(u.equals(r)?"":`${this._encodeIriOrBlank(r)} {\n`)),this._graph=r,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,i):this._write(`;\n    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,t,n,r,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,r),i)}quadToString(e,t,n,r){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${r&&r.value?` ${this._encodeIriOrBlank(r)} .\n`:" .\n"}`}quadsToString(e){return e.map(e=>this.quadToString(e.subject,e.predicate,e.object,e.graph)).join("")}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIRI&&t.startsWith(this._baseIRI)&&(t=t.substr(this._baseIRI.length)),d.test(t)&&(t=t.replace(f,g));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(d.test(t)&&(t=t.replace(f,g)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===l.string)return`"${t}"`}else switch(e.datatype.value){case l.string:return`"${t}"`;case l.boolean:if("true"===t||"false"===t)return t;break;case l.integer:if(/^[+-]?\d+$/.test(t))return t;break;case l.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case l.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===c.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:r}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${(0,a.isDefaultGraph)(r)?"":` ${this._encodeIriOrBlank(r)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,r,i){void 0===n?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof r?this._writeQuad(e,t,n,u,r):this._writeQuad(e,t,n,r||u,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const r={};r[e]=t,this.addPrefixes(r,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let r in e){let t=e[r];"string"!=typeof t&&(t=t.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[t]=r+=":",this._write(`@prefix ${r} <${t}>.\n`)}if(n){let e="",t="";for(const n in this._prefixIRIs)e+=e?`|${n}`:n,t+=(t?"|":"")+this._prefixIRIs[n];e=e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${e})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?"\n":"",t)}blank(e,t){let n,r,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return new p("[]");case 1:if(n=i[0],!(n.object instanceof p))return new p(`[ ${this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)} ]`);default:let t="[";for(let o=0;o<r;o++)n=i[o],n.predicate.equals(e)?t+=`, ${this._encodeObject(n.object)}`:(t+=`${(o?";\n  ":"\n  ")+this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)}`,e=n.predicate);return new p(`${t}\n]`)}}list(e){const t=e&&e.length||0,n=new Array(t);for(let r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return new p(`(${n.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,r)=>{t=null,e(n,r)});if(this._endStream)try{return this._outputStream.end(t)}catch(n){}t&&t()}}},{"./IRIs":34,"./N3DataFactory":35,"./N3Util":41}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Lexer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"Parser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"Writer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"Store",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"StreamParser",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"StreamWriter",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"DataFactory",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"Term",{enumerable:!0,get:function(){return l.Term}}),Object.defineProperty(n,"NamedNode",{enumerable:!0,get:function(){return l.NamedNode}}),Object.defineProperty(n,"Literal",{enumerable:!0,get:function(){return l.Literal}}),Object.defineProperty(n,"BlankNode",{enumerable:!0,get:function(){return l.BlankNode}}),Object.defineProperty(n,"Variable",{enumerable:!0,get:function(){return l.Variable}}),Object.defineProperty(n,"DefaultGraph",{enumerable:!0,get:function(){return l.DefaultGraph}}),Object.defineProperty(n,"Quad",{enumerable:!0,get:function(){return l.Quad}}),Object.defineProperty(n,"Triple",{enumerable:!0,get:function(){return l.Triple}}),Object.defineProperty(n,"termFromId",{enumerable:!0,get:function(){return l.termFromId}}),Object.defineProperty(n,"termToId",{enumerable:!0,get:function(){return l.termToId}}),n.Util=void 0;var r=h(e("./N3Lexer")),i=h(e("./N3Parser")),o=h(e("./N3Writer")),a=h(e("./N3Store")),s=h(e("./N3StreamParser")),u=h(e("./N3StreamWriter")),c=f(e("./N3Util"));n.Util=c;var l=f(e("./N3DataFactory"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}},{"./N3DataFactory":35,"./N3Lexer":36,"./N3Parser":37,"./N3Store":38,"./N3StreamParser":39,"./N3StreamWriter":40,"./N3Util":41,"./N3Writer":42}],44:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,l=[],d=!1,f=-1;function h(){!d||!c||(d=!1,c.length?l=c.concat(l):f=-1,l.length&&p())}function p(){if(!d){var e=u(h);d=!0;for(var t=l.length;t;){for(c=l,l=[];++f<t;)c&&c[f].run();f=-1,t=l.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(n){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1===l.length&&!d&&u(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],45:[function(e,t,n){(function(e){(function(){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:e):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){t.exports=e("./lib")},{"./lib":55}],47:[function(e,t,n){"use strict";t.exports=class e{constructor(e,t=new Map,n=0){this.prefix=e,this._existing=t,this.counter=n}clone(){const{prefix:t,_existing:n,counter:r}=this;return new e(t,new Map(n),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const n=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,n),n}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}},{}],48:[function(e,t,n){"use strict";e("setimmediate");const i=self.crypto||self.msCrypto;t.exports=class{constructor(e){if(!i||!i.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupport algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}digest(){var e=this;return r(function*(){const t=(new TextEncoder).encode(e._content),n=new Uint8Array(yield i.subtle.digest(e.algorithm,t));let r="";for(let e=0;e<n.length;++e)r+=n[e].toString(16).padStart(2,"0");return r})()}}},{setimmediate:86}],49:[function(e,t,n){"use strict";const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",i="http://www.w3.org/2001/XMLSchema#string",o="NamedNode",a="BlankNode",s="Literal",u="DefaultGraph",c={};function l(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&(e.object.termType!==s||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value)}(()=>{const e="[ \\t]*";c.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,c.empty=new RegExp("^"+e+"$"),c.quad=new RegExp("^"+e+'(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))'+e+"$")})(),t.exports=class e{static parse(e){const t=[],n={},d=e.split(c.eoln);let h=0;for(const p of d){if(h++,c.empty.test(p))continue;const e=p.match(c.quad);if(null===e)throw new Error("N-Quads parse error on line "+h+".");const d={subject:null,predicate:null,object:null,graph:null};if(d.subject=void 0!==e[1]?{termType:o,value:e[1]}:{termType:a,value:e[2]},d.predicate={termType:o,value:e[3]},void 0!==e[4]?d.object={termType:o,value:e[4]}:void 0!==e[5]?d.object={termType:a,value:e[5]}:(d.object={termType:s,value:void 0,datatype:{termType:o}},void 0!==e[7]?d.object.datatype.value=e[7]:void 0!==e[8]?(d.object.datatype.value=r,d.object.language=e[8]):d.object.datatype.value=i,d.object.value=e[6].replace(f,function(e,t,n,r){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(r)throw new Error("Unsupported U escape")})),d.graph=void 0!==e[9]?{termType:o,value:e[9]}:void 0!==e[10]?{termType:a,value:e[10]}:{termType:u,value:""},d.graph.value in n){let e=!0;const r=n[d.graph.value];for(const t of r)if(l(t,d)){e=!1;break}e&&(r.push(d),t.push(d))}else n[d.graph.value]=[d],t.push(d)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuad(e){const t=e.subject,n=e.object,s=e.graph;let u="";return u+=t.termType===o?`<${t.value}>`:`${t.value}`,u+=` <${e.predicate.value}> `,n.termType===o?u+=`<${n.value}>`:n.termType===a?u+=n.value:(u+=`"${c=n.value,c.replace(d,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,n.datatype.value===r?n.language&&(u+=`@${n.language}`):n.datatype.value!==i&&(u+=`^^<${n.datatype.value}>`)),s.termType===o?u+=` <${s.value}>`:s.termType===a&&(u+=` ${s.value}`),u+=" .\n",u;var c}static legacyDatasetToQuads(e){const t=[],n={"blank node":a,IRI:o,literal:s};for(const c in e)e[c].forEach(e=>{const l={};for(const t in e){const a=e[t],u={termType:n[a.type],value:a.value};u.termType===s&&(u.datatype={termType:o},"datatype"in a&&(u.datatype.value=a.datatype),"language"in a?("datatype"in a||(u.datatype.value=r),u.language=a.language):"datatype"in a||(u.datatype.value=i)),l[t]=u}l.graph="@default"===c?{termType:u,value:""}:{termType:c.startsWith("_:")?a:o,value:c},t.push(l)});return t}};const d=/["\\\n\r]/g;const f=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],50:[function(e,t,n){"use strict";t.exports=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,n=e.slice();let r=null,i=0;const o=e.length;for(let a=0;a<o;++a){const n=e[a],s=t.get(n);(null===r||n>r)&&(s&&a>0&&n>e[a-1]||!s&&a<o-1&&n>e[a+1])&&(r=n,i=a)}if(null===r)this.done=!0;else{const n=t.get(r)?i-1:i+1;e[i]=e[n],e[n]=r;for(const i of e)i>r&&t.set(i,!t.get(i))}return n}}},{}],51:[function(e,t,n){(function(n){(function(){"use strict";const i=e("./IdentifierIssuer"),o=e("./MessageDigest"),a=e("./Permuter"),s=e("./NQuads");function u(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}t.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new i("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){var t=this;return r(function*(){t.quads=e;for(const i of e)t._addBlankNodeQuadInfo({quad:i,component:i.subject}),t._addBlankNodeQuadInfo({quad:i,component:i.object}),t._addBlankNodeQuadInfo({quad:i,component:i.graph});const n=new Map,r=[...t.blankNodeInfo.keys()];let o=0;for(const e of r)++o%100==0&&(yield t._yield()),yield t._hashAndTrackBlankNode({id:e,hashToBlankNodes:n});const a=[...n.keys()].sort(),c=[];for(const e of a){const r=n.get(e);r.length>1?c.push(r):t.canonicalIssuer.getId(r[0])}for(const e of c){const n=[];for(const r of e){if(t.canonicalIssuer.hasId(r))continue;const e=new i("_:b");e.getId(r);const o=yield t.hashNDegreeQuads(r,e);n.push(o)}n.sort(u);for(const e of n){const n=e.issuer.getOldIds();for(const e of n)t.canonicalIssuer.getId(e)}}const l=[];for(const e of t.quads){const n=lr({},e);n.subject=t._useCanonicalId({component:n.subject}),n.object=t._useCanonicalId({component:n.object}),n.graph=t._useCanonicalId({component:n.graph}),l.push(s.serializeQuad(n))}return l.sort(),l.join("")})()}hashFirstDegreeQuads(e){var t=this;return r(function*(){const n=[],r=t.blankNodeInfo.get(e),i=r.quads;for(const o of i){const r={subject:null,predicate:o.predicate,object:null,graph:null};r.subject=t.modifyFirstDegreeComponent(e,o.subject,"subject"),r.object=t.modifyFirstDegreeComponent(e,o.object,"object"),r.graph=t.modifyFirstDegreeComponent(e,o.graph,"graph"),n.push(s.serializeQuad(r))}n.sort();const a=new o(t.hashAlgorithm);for(const e of n)a.update(e);return r.hash=yield a.digest(),r.hash})()}hashRelatedBlankNode(e,t,n,i){var a=this;return r(function*(){let r;r=a.canonicalIssuer.hasId(e)?a.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):a.blankNodeInfo.get(e).hash;const s=new o(a.hashAlgorithm);return s.update(i),"g"!==i&&s.update(a.getRelatedPredicate(t)),s.update(r),s.digest()})()}hashNDegreeQuads(e,t){var n=this;return r(function*(){const r=new o(n.hashAlgorithm),i=yield n.createHashToRelated(e,t),s=[...i.keys()].sort();for(const e of s){r.update(e);let o,s="";const u=new a(i.get(e));let c=0;for(;u.hasNext();){const e=u.next();++c%3==0&&(yield n._yield());let r=t.clone(),i="";const a=[];let l=!1;for(const t of e)if(n.canonicalIssuer.hasId(t)?i+=n.canonicalIssuer.getId(t):(r.hasId(t)||a.push(t),i+=r.getId(t)),0!==s.length&&i>s){l=!0;break}if(!l){for(const e of a){const t=yield n.hashNDegreeQuads(e,r);if(i+=r.getId(e),i+=`<${t.hash}>`,r=t.issuer,0!==s.length&&i>s){l=!0;break}}l||(0===s.length||i<s)&&(s=i,o=r)}}r.update(s),t=o}return{hash:yield r.digest(),issuer:t}})()}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){var n=this;return r(function*(){const r=new Map,i=n.blankNodeInfo.get(e).quads;let o=0;for(const a of i)++o%100==0&&(yield n._yield()),yield Promise.all([n._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:e,issuer:t,hashToRelated:r}),n._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:e,issuer:t,hashToRelated:r}),n._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:e,issuer:t,hashToRelated:r})]);return r})()}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){var n=this;return r(function*(){const r=yield n.hashFirstDegreeQuads(e),i=t.get(r);i?i.push(e):t.set(r,[e])})()}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:i,issuer:o,hashToRelated:a}){var s=this;return r(function*(){if("BlankNode"!==t.termType||t.value===i)return;const r=t.value,u=yield s.hashRelatedBlankNode(r,e,o,n),c=a.get(u);c?c.push(r):a.set(u,[r])})()}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}_yield(){return r(function*(){return new Promise(e=>n(e))})()}}}).call(this)}).call(this,e("timers").setImmediate)},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50,timers:89}],52:[function(e,t,n){"use strict";const r=e("./IdentifierIssuer"),i=e("./MessageDigest"),o=e("./Permuter"),a=e("./NQuads");function s(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}t.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){this.quads=e;for(const r of e)this._addBlankNodeQuadInfo({quad:r,component:r.subject}),this._addBlankNodeQuadInfo({quad:r,component:r.object}),this._addBlankNodeQuadInfo({quad:r,component:r.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];for(const r of n)this._hashAndTrackBlankNode({id:r,hashToBlankNodes:t});const i=[...t.keys()].sort(),o=[];for(const r of i){const e=t.get(r);e.length>1?o.push(e):this.canonicalIssuer.getId(e[0])}for(const a of o){const e=[];for(const t of a){if(this.canonicalIssuer.hasId(t))continue;const n=new r("_:b");n.getId(t);const i=this.hashNDegreeQuads(t,n);e.push(i)}e.sort(s);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const u=[];for(const r of this.quads){const e=lr({},r);e.subject=this._useCanonicalId({component:e.subject}),e.object=this._useCanonicalId({component:e.object}),e.graph=this._useCanonicalId({component:e.graph}),u.push(a.serializeQuad(e))}return u.sort(),u.join("")}hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const i of r){const n={subject:null,predicate:i.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,i.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,i.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,i.graph,"graph"),t.push(a.serializeQuad(n))}t.sort();const o=new i(this.hashAlgorithm);for(const i of t)o.update(i);return n.hash=o.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){let o;o=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const a=new i(this.hashAlgorithm);return a.update(r),"g"!==r&&a.update(this.getRelatedPredicate(t)),a.update(o),a.digest()}hashNDegreeQuads(e,t){const n=new i(this.hashAlgorithm),r=this.createHashToRelated(e,t),a=[...r.keys()].sort();for(const i of a){n.update(i);let e,a="";const s=new o(r.get(i));for(;s.hasNext();){const n=s.next();let r=t.clone(),i="";const o=[];let u=!1;for(const e of n)if(this.canonicalIssuer.hasId(e)?i+=this.canonicalIssuer.getId(e):(r.hasId(e)||o.push(e),i+=r.getId(e)),0!==a.length&&i>a){u=!0;break}if(!u){for(const e of o){const t=this.hashNDegreeQuads(e,r);if(i+=r.getId(e),i+=`<${t.hash}>`,r=t.issuer,0!==a.length&&i>a){u=!0;break}}u||(0===a.length||i<a)&&(a=i,e=r)}}n.update(a),t=e}return{hash:n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r)this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:n});return n}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:o}){if("BlankNode"!==t.termType||t.value===r)return;const a=t.value,s=this.hashRelatedBlankNode(a,e,i,n),u=o.get(s);u?u.push(a):o.set(s,[a])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}}},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50}],53:[function(e,t,n){"use strict";const i=e("./URDNA2015");t.exports=class extends i{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){var n=this;return r(function*(){const r=new Map,i=n.blankNodeInfo.get(e).quads;let o=0;for(const a of i){let i,s;if("BlankNode"===a.subject.termType&&a.subject.value!==e)s=a.subject.value,i="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)continue;s=a.object.value,i="r"}++o%100==0&&(yield n._yield());const u=yield n.hashRelatedBlankNode(s,a,t,i),c=r.get(u);c?c.push(s):r.set(u,[s])}return r})()}}},{"./URDNA2015":51}],54:[function(e,t,n){"use strict";const r=e("./URDNA2015Sync");t.exports=class extends r{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r){let r,o;if("BlankNode"===i.subject.termType&&i.subject.value!==e)o=i.subject.value,r="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;o=i.object.value,r="r"}const a=this.hashRelatedBlankNode(o,i,t,r),s=n.get(a);s?s.push(o):n.set(a,[o])}return n}}},{"./URDNA2015Sync":52}],55:[function(e,t,n){"use strict";const i=e("./URDNA2015"),o=e("./URGNA2012"),a=e("./URDNA2015Sync"),s=e("./URGNA2012Sync");let u;try{u=e("rdf-canonize-native")}catch(l){}const c={};t.exports=c,c.NQuads=e("./NQuads"),c.IdentifierIssuer=e("./IdentifierIssuer"),c._rdfCanonizeNative=function(e){return e&&(u=e),u},c.canonize=function(){var e=r(function*(e,t){if(Array.isArray(e)||(e=c.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!u)throw new Error("rdf-canonize-native not available");return new Promise((n,r)=>u.canonize(e,t,(e,t)=>e?r(e):n(t)))}if("URDNA2015"===t.algorithm)return new i(t).main(e);if("URGNA2012"===t.algorithm)return new o(t).main(e);throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(t,n){return e.apply(this,arguments)}}(),c._canonizeSync=function(e,t){if(Array.isArray(e)||(e=c.NQuads.legacyDatasetToQuads(e)),t.useNative){if(u)return u.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new a(t).main(e);if("URGNA2012"===t.algorithm)return new s(t).main(e);throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":47,"./NQuads":49,"./URDNA2015":51,"./URDNA2015Sync":52,"./URGNA2012":53,"./URGNA2012Sync":54,"rdf-canonize-native":3}],56:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./lib/BlankNode"),n),i(e("./lib/DataFactory"),n),i(e("./lib/DefaultGraph"),n),i(e("./lib/Literal"),n),i(e("./lib/NamedNode"),n),i(e("./lib/Quad"),n),i(e("./lib/Variable"),n)},{"./lib/BlankNode":57,"./lib/DataFactory":58,"./lib/DefaultGraph":59,"./lib/Literal":60,"./lib/NamedNode":61,"./lib/Quad":62,"./lib/Variable":63}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BlankNode=void 0;n.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},{}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DataFactory=void 0;const r=e("./BlankNode"),i=e("./DefaultGraph"),o=e("./Literal"),a=e("./NamedNode"),s=e("./Quad"),u=e("./Variable");let c=0;n.DataFactory=class{constructor(e){this.blankNodeCounter=0,this.blankNodePrefix=(e=e||{}).blankNodePrefix||`df_${c++}_`}namedNode(e){return new a.NamedNode(e)}blankNode(e){return new r.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new o.Literal(e,t)}variable(e){return new u.Variable(e)}defaultGraph(){return i.DefaultGraph.INSTANCE}quad(e,t,n,r){return new s.Quad(e,t,n,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(o.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},{"./BlankNode":57,"./DefaultGraph":59,"./Literal":60,"./NamedNode":61,"./Quad":62,"./Variable":63}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultGraph=void 0;class r{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}n.DefaultGraph=r,r.INSTANCE=new r},{}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Literal=void 0;const r=e("./NamedNode");class i{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=i.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=i.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}n.Literal=i,i.RDF_LANGUAGE_STRING=new r.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.XSD_STRING=new r.NamedNode("http://www.w3.org/2001/XMLSchema#string")},{"./NamedNode":61}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NamedNode=void 0;n.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}},{}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Quad=void 0;n.Quad=class{constructor(e,t,n,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=n,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}},{}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Variable=void 0;n.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}},{}],64:[function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./lib/RdfXmlParser"),n)},{"./lib/RdfXmlParser":66}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParseError=void 0;class r extends Error{constructor(e,t){const n=e.saxStream._parser;super(e.trackPosition?`Line ${n.line+1} column ${n.column+1}: ${t}`:t)}}n.ParseError=r},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParseType=n.RdfXmlParser=void 0;const r=e("relative-to-absolute-iri"),i=e("sax"),o=e("stream"),a=e("./ParseError"),s=e("rdf-data-factory");class u extends o.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},e&&(Object.assign(this,e),this.options=e),this.dataFactory||(this.dataFactory=new s.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=i.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(e,t){const n={};let r=!1;for(const o in e.attributes)o.startsWith("xmlns")&&(5===o.length?(r=!0,n[""]=e.attributes[o]):":"===o.charAt(5)&&(r=!0,n[o.substr(6)]=e.attributes[o]));const i=t&&t.ns?t.ns:[u.DEFAULT_NS];return r?i.concat([n]):i}static expandPrefixedTerm(e,t,n){const r=e.indexOf(":");let i,o;r>=0?(i=e.substr(0,r),o=e.substr(r+1)):(i="",o=e);let s=null,u=null;for(let a=t.length-1;a>=0;a--){const e=t[a][i];if(e){s=e;break}u||(u=t[a][""])}if(!s){if(i&&"xmlns"!==i)throw new a.ParseError(n,`The prefix '${i}' in term '${e}' was not bound.`);s=u||""}return{prefix:i,local:o,uri:s}}static isValidIri(e){return u.IRI_REGEX.test(e)}import(e){const t=new o.PassThrough({readableObjectMode:!0});e.on("error",e=>n.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));const n=t.pipe(new u(this.options));return n}_transform(e,t,n){try{this.saxStream.write(e,t)}catch(r){return n(r)}n()}newParseError(e){return new a.ParseError(this,e)}valueToUri(e,t){return this.uriToNamedNode(r.resolve(e,t.baseIRI))}uriToNamedNode(e){if(!u.isValidIri(e))throw this.newParseError(`Invalid URI: ${e}`);return this.dataFactory.namedNode(e)}validateNcname(e){if(!u.NCNAME_MATCHER.test(e))throw this.newParseError(`Not a valid NCName: ${e}`)}attachSaxListeners(){this.saxStream.on("error",e=>this.emit("error",e)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(e){const t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let n=c.RESOURCE;if(t&&(t.hadChildren=!0,n=t.childrenParseType),t&&t.childrenStringTags){const n=e.name;let r="";for(const t in e.attributes)r+=` ${t}="${e.attributes[t]}"`;t.childrenStringTags.push(`<${n}${r}>`);const i={childrenStringTags:t.childrenStringTags};return i.childrenStringEmitClosingTag=`</${n}>`,void this.activeTagStack.push(i)}const r={};t?(r.language=t.language,r.baseIRI=t.baseIRI):r.baseIRI=this.baseIRI,this.activeTagStack.push(r),r.ns=u.parseNamespace(e,t),n===c.RESOURCE?this.onTagResource(e,r,t,!t):this.onTagProperty(e,r,t)}onTagResource(e,t,n,i){const o=u.expandPrefixedTerm(e.name,t.ns,this);t.childrenParseType=c.PROPERTY;let a=!0;if(o.uri===u.RDF){if(!i&&u.FORBIDDEN_NODE_ELEMENTS.indexOf(o.local)>=0)throw this.newParseError(`Illegal node element name: ${o.local}`);switch(o.local){case"RDF":t.childrenParseType=c.RESOURCE;case"Description":a=!1}}const s=[],l=[];let d=null,f=!1,h=!1,p=null;for(const c in e.attributes){const i=e.attributes[c],o=u.expandPrefixedTerm(c,t.ns,this);if(n&&o.uri===u.RDF)switch(o.local){case"about":if(d)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${i} and ${d} where found.`);d=i;continue;case"ID":if(d)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${i} and ${d} where found.`);this.validateNcname(i),d="#"+i,f=!0;continue;case"nodeID":if(d)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${i} and ${d} where found.`);this.validateNcname(i),d=i,h=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":p=i;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(o.uri===u.XML){if("lang"===o.local){t.language=""===i?null:i.toLowerCase();continue}if("base"===o.local){t.baseIRI=r.resolve(i,t.baseIRI);continue}}"xml"!==o.prefix&&o.uri&&(s.push(this.uriToNamedNode(o.uri+o.local)),l.push(i))}if(null!==d&&(t.subject=h?this.dataFactory.blankNode(d):this.valueToUri(d,t),f&&this.claimNodeId(t.subject)),t.subject||(t.subject=this.dataFactory.blankNode()),a){const e=this.uriToNamedNode(o.uri+o.local);this.emitTriple(t.subject,this.dataFactory.namedNode(u.RDF+"type"),e,n?n.reifiedStatementId:null)}if(n){if(n.predicate)if(n.childrenCollectionSubject){const e=this.dataFactory.blankNode();this.emitTriple(n.childrenCollectionSubject,n.childrenCollectionPredicate,e,n.reifiedStatementId),this.emitTriple(e,this.dataFactory.namedNode(u.RDF+"first"),t.subject,t.reifiedStatementId),n.childrenCollectionSubject=e,n.childrenCollectionPredicate=this.dataFactory.namedNode(u.RDF+"rest")}else{this.emitTriple(n.subject,n.predicate,t.subject,n.reifiedStatementId);for(let e=0;e<n.predicateSubPredicates.length;e++)this.emitTriple(t.subject,n.predicateSubPredicates[e],n.predicateSubObjects[e],null);n.predicateSubPredicates=[],n.predicateSubObjects=[],n.predicateEmitted=!0}for(let e=0;e<s.length;e++){const r=this.dataFactory.literal(l[e],t.datatype||t.language);this.emitTriple(t.subject,s[e],r,n.reifiedStatementId)}p&&this.emitTriple(t.subject,this.dataFactory.namedNode(u.RDF+"type"),this.uriToNamedNode(p),null)}}onTagProperty(e,t,n){const r=u.expandPrefixedTerm(e.name,t.ns,this);if(t.childrenParseType=c.RESOURCE,t.subject=n.subject,r.uri===u.RDF&&"li"===r.local?(n.listItemCounter||(n.listItemCounter=1),t.predicate=this.uriToNamedNode(r.uri+"_"+n.listItemCounter++)):t.predicate=this.uriToNamedNode(r.uri+r.local),r.uri===u.RDF&&u.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(r.local)>=0)throw this.newParseError(`Illegal property element name: ${r.local}`);t.predicateSubPredicates=[],t.predicateSubObjects=[];let i=!1,o=!1,a=null,s=!0;const l=[],d=[];for(const f in e.attributes){const n=e.attributes[f],r=u.expandPrefixedTerm(f,t.ns,this);if(r.uri===u.RDF)switch(r.local){case"resource":if(a)throw this.newParseError(`Found both rdf:resource (${n}) and rdf:nodeID (${a}).`);if(i)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${n})`);t.hadChildren=!0,a=n,s=!1;continue;case"datatype":if(o)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${n}).`);if(i)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${n})`);t.datatype=this.valueToUri(n,t);continue;case"nodeID":if(o)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${n}).`);if(t.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${n}).`);if(i)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${n})`);this.validateNcname(n),t.hadChildren=!0,a=n,s=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(o)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(t.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${t.datatype.value})`);if(a)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${a})`);if("Resource"===n){i=!0,t.childrenParseType=c.PROPERTY;const e=this.dataFactory.blankNode();this.emitTriple(t.subject,t.predicate,e,t.reifiedStatementId),t.subject=e,t.predicate=null}else"Collection"===n?(i=!0,t.hadChildren=!0,t.childrenCollectionSubject=t.subject,t.childrenCollectionPredicate=t.predicate,s=!1):"Literal"===n&&(i=!0,t.childrenTagsToString=!0,t.childrenStringTags=[]);continue;case"ID":this.validateNcname(n),t.reifiedStatementId=this.valueToUri("#"+n,t),this.claimNodeId(t.reifiedStatementId);continue}else if(r.uri===u.XML&&"lang"===r.local){t.language=""===n?null:n.toLowerCase();continue}if("xml"!==r.prefix&&"xmlns"!==r.prefix&&r.uri){if(i||t.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${n}`);t.hadChildren=!0,o=!0,l.push(this.uriToNamedNode(r.uri+r.local)),d.push(this.dataFactory.literal(n,t.datatype||t.language))}}if(null!==a){const e=t.subject;t.subject=s?this.dataFactory.blankNode(a):this.valueToUri(a,t),this.emitTriple(e,t.predicate,t.subject,t.reifiedStatementId);for(let n=0;n<l.length;n++)this.emitTriple(t.subject,l[n],d[n],null);t.predicateEmitted=!0}else s&&(t.predicateSubPredicates=l,t.predicateSubObjects=d,t.predicateEmitted=!1)}emitTriple(e,t,n,r){this.push(this.dataFactory.quad(e,t,n,this.defaultGraph)),r&&(this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(u.RDF+"type"),this.dataFactory.namedNode(u.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(u.RDF+"subject"),e,this.defaultGraph)),this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(u.RDF+"predicate"),t,this.defaultGraph)),this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(u.RDF+"object"),n,this.defaultGraph)))}claimNodeId(e){if(!this.allowDuplicateRdfIds){if(this.nodeIds[e.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${e.value}'.`);this.nodeIds[e.value]=!0}}onText(e){const t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;t&&(t.childrenStringTags?t.childrenStringTags.push(e):t.predicate&&(t.text=e))}onCloseTag(){const e=this.activeTagStack.pop();if(e.childrenStringEmitClosingTag&&e.childrenStringTags.push(e.childrenStringEmitClosingTag),e.childrenTagsToString&&(e.datatype=this.dataFactory.namedNode(u.RDF+"XMLLiteral"),e.text=e.childrenStringTags.join(""),e.hadChildren=!1),e.childrenCollectionSubject)this.emitTriple(e.childrenCollectionSubject,e.childrenCollectionPredicate,this.dataFactory.namedNode(u.RDF+"nil"),e.reifiedStatementId);else if(e.predicate)if(e.hadChildren||e.childrenParseType===c.PROPERTY){if(!e.predicateEmitted){const t=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,t,e.reifiedStatementId);for(let n=0;n<e.predicateSubPredicates.length;n++)this.emitTriple(t,e.predicateSubPredicates[n],e.predicateSubObjects[n],null)}}else this.emitTriple(e.subject,e.predicate,this.dataFactory.literal(e.text||"",e.datatype||e.language),e.reifiedStatementId)}onDoctype(e){e.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(e,t,n)=>(this.saxStream._parser.ENTITIES[t]=n,""))}}var c,l;n.RdfXmlParser=u,u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,u.MIME_TYPE="application/rdf+xml",u.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.XML="http://www.w3.org/XML/1998/namespace",u.XMLNS="http://www.w3.org/2000/xmlns/",u.DEFAULT_NS={xml:u.XML},u.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],u.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],u.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(l=c=n.ParseType||(n.ParseType={}))[l.RESOURCE=0]="RESOURCE",l[l.PROPERTY=1]="PROPERTY"},{"./ParseError":65,"rdf-data-factory":56,"relative-to-absolute-iri":82,sax:85,stream:87}],67:[function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){function n(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(n,e),n}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i;if("string"==typeof t&&function(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))i="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var a=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(a," ").concat(r," ").concat(o(t,"type"))}return i+". Received type ".concat(typeof n)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],68:[function(e,t,n){(function(n){(function(){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":70,"./_stream_writable":72,_process:44,inherits:10}],69:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":71,inherits:10}],70:[function(e,t,n){(function(n,r){(function(){"use strict";var i;t.exports=N,N.ReadableState=j,e("events");var o=function(e,t){return e.listeners(t).length},a=e("./internal/streams/stream"),s=e("buffer").Buffer,u=r.Uint8Array||function(){};var c,l=e("util");c=l&&l.debuglog?l.debuglog("stream"):function(){};var d,f,h,p=e("./internal/streams/buffer_list"),g=e("./internal/streams/destroy"),y=e("./internal/streams/state").getHighWaterMark,m=e("../errors").codes,b=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,w=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(N,a);var x=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function j(t,n,r){i=i||e("./_stream_duplex"),"boolean"!=typeof r&&(r=n instanceof i),this.objectMode=!!(t=t||{}).objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function N(t){if(i=i||e("./_stream_duplex"),!(this instanceof N))return new N(t);this._readableState=new j(t,this,this instanceof i),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function E(e,t,n,r,i){c("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(c("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?k(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}}(e,a);else if(i||(o=function(e,t){var n;return!function(e){return s.isBuffer(e)||e instanceof u}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(n=new b("chunk",["string","Buffer","Uint8Array"],t)),n}(a,t)),o)x(e,o);else if(a.objectMode||t&&t.length>0)if("string"!=typeof t&&!a.objectMode&&Object.getPrototypeOf(t)!==s.prototype&&(t=function(e){return s.from(e)}(t)),r)a.endEmitted?x(e,new w):T(e,a,t,!0);else if(a.ended)x(e,new v);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?T(e,a,t,!1):O(e,a)):T(e,a,t,!1)}else r||(a.reading=!1,O(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),O(e,t)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}}),N.prototype.destroy=g.destroy,N.prototype._undestroy=g.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},N.prototype.unshift=function(e){return E(this,e,null,!0,!1)},N.prototype.isPaused=function(){return!1===this._readableState.flowing},N.prototype.setEncoding=function(t){d||(d=e("string_decoder/").StringDecoder);var n=new d(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,C(e)}function O(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){c("readable nexttick read 0"),e.read(0)}function P(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}N.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):k(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},N.prototype._read=function(e){x(this,new _("_read()"))},N.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===n.stdout||e===n.stderr?y:u;function s(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",f),d=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l())}function u(){c("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,C(e))}}(r);e.on("drain",l);var d=!1;function f(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==U(i.pipes,e))&&!d&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(t){c("onerror",t),y(),e.removeListener("error",h),0===o(e,"error")&&x(e,t)}function p(){e.removeListener("finish",g),y()}function g(){c("onfinish"),e.removeListener("close",p),y()}function y(){c("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",p),e.once("finish",g),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e},N.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},N.prototype.addListener=N.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?k(this):i.reading||n.nextTick(D,this)),r},N.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(M,this),r},N.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(M,this),t},N.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}(this,e)),e.paused=!1,this},N.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},N.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||!(n.objectMode||i&&i.length)||t.push(i)||(r=!0,e.pause())}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(N.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),N._fromList=F,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(N.from=function(t,n){return void 0===h&&(h=e("./internal/streams/from")),h(N,t,n)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/async_iterator":73,"./internal/streams/buffer_list":74,"./internal/streams/destroy":75,"./internal/streams/from":77,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,events:8,inherits:10,"string_decoder/":88,util:3}],71:[function(e,t,n){"use strict";t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(t,n){f(e,t,n)})}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":67,"./_stream_duplex":68,inherits:10}],72:[function(e,t,n){(function(n,r){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;t.exports=N,N.WritableState=j;var a={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),u=e("buffer").Buffer,c=r.Uint8Array||function(){};var l,d=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,p=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,y=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,x=d.errorOrDestroy;function S(){}function j(t,r,a){o=o||e("./_stream_duplex"),"boolean"!=typeof a&&(a=r instanceof o),this.objectMode=!!(t=t||{}).objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(O,e,t),e._writableState.errorEmitted=!0,x(e,i)):(o(i),e._writableState.errorEmitted=!0,x(e,i),O(e,t))}(e,r,i,t,o);else{var a=k(r)||e.destroyed;!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&A(e,r),i?n.nextTick(I,e,r,a,o):I(e,r,a,o)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function N(t){var n=this instanceof(o=o||e("./_stream_duplex"));if(!n&&!l.call(N,this))return new N(t);this._writableState=new j(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function E(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return!e.objectMode&&!1!==e.decodeStrings&&"string"==typeof t&&(t=u.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,s,r,i,o);return c}function T(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function I(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=new Array(t.bufferedRequestCount),o=t.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)r[a]=n,n.isBuf||(s=!1),n=n.next,a+=1;r.allBuffers=s,T(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk;if(T(e,t,!1,t.objectMode?1:u.length,u,n.encoding,n.callback),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final(function(n){t.pendingcb--,n&&x(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)})}function O(e,t){var r=k(t);if(r&&(function(e,t){!t.prefinished&&!t.finalCalled&&("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(N,s),j.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(j.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===N&&e&&e._writableState instanceof j}})):l=function(e){return e instanceof this},N.prototype.pipe=function(){x(this,new m)},N.prototype.write=function(e,t,r){var i=this._writableState,o=!1,a=!i.objectMode&&function(e){return u.isBuffer(e)||e instanceof c}(e);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=S),i.ending?function(e,t){var r=new _;x(e,r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,i){var o;return null===r?o=new v:"string"!=typeof r&&!t.objectMode&&(o=new p("chunk",["string","Buffer"],r)),!o||(x(e,o),n.nextTick(i,o),!1)}(this,i,e,r))&&(i.pendingcb++,o=E(this,i,a,e,t,r)),o},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&A(this,e))},N.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(e,t,n){n(new g("_write()"))},N.prototype._writev=null,N.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}}),N.prototype.destroy=d.destroy,N.prototype._undestroy=d.undestroy,N.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/destroy":75,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,inherits:10,"util-deprecate":90}],73:[function(e,t,n){(function(n){(function(){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var n=e[f].read();null!==n&&(e[l]=null,e[a]=null,e[s]=null,t(h(n,!1)))}}function g(e){n.nextTick(p,e)}var y=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(t,r){n.nextTick(function(){e[u]?r(e[u]):t(h(void 0,!0))})});var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then(function(){t[c]?n(h(void 0,!0)):t[d](n,r)},r)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(h(o,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var e=this;return new Promise(function(t,n){e[f].destroy(null,function(e){e?n(e):t(h(void 0,!0))})})}),r),y);t.exports=function(e){var t,n=Object.create(m,(i(t={},f,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[f].read();r?(n[l]=null,n[a]=null,n[s]=null,e(h(r,!1))):(n[a]=e,n[s]=t)},writable:!0}),t));return n[l]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[l]=null,n[a]=null,n[s]=null,t(e)),void(n[u]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[s]=null,r(h(void 0,!0))),n[c]=!0}),e.on("readable",g.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":76,_process:44}],74:[function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("buffer").Buffer,s=e("util").inspect,u=s&&s.custom||"inspect";function c(e,t,n){a.prototype.copy.call(e,t,n)}t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)c(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(r+=o===i.length?i:i.slice(0,e),0==(e-=o)){o===i.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:6,util:3}],75:[function(e,t,n){(function(e){(function(){"use strict";function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var a=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(r,a),o(t)):e.nextTick(r,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:44}],76:[function(e,t,n){"use strict";var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){a=!1,d=!0,s||o.call(t)},h=function(e){o.call(t,e)},p=function(){var e;return a&&!d?((!t._readableState||!t._readableState.ended)&&(e=new r),o.call(t,e)):s&&!c?((!t._writableState||!t._writableState.ended)&&(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",f),t.on("finish",l),!1!==n.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}},{"../../../errors":67}],77:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],78:[function(e,t,n){"use strict";var r;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",function(){s=!0}),void 0===r&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},function(e){if(e)return o(e);s=!0,o()});var u=!1;return function(e){if(!s&&!u){if(u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t))return t.abort();if("function"==typeof t.destroy)return t.destroy();o(e||new a("pipe"))}}}function c(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():s}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var i,a=t.map(function(e,n){var o=n<t.length-1;return u(e,o,n>0,function(e){i||(i=e),e&&a.forEach(c),!o&&(a.forEach(c),r(i))})});return t.reduce(l)}},{"../../../errors":67,"./end-of-stream":76}],79:[function(e,t,n){"use strict";var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},{"../../../errors":67}],80:[function(e,t,n){t.exports=e("events").EventEmitter},{events:8}],81:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":68,"./lib/_stream_passthrough.js":69,"./lib/_stream_readable.js":70,"./lib/_stream_transform.js":71,"./lib/_stream_writable.js":72,"./lib/internal/streams/end-of-stream.js":76,"./lib/internal/streams/pipeline.js":78}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./lib/Resolve"))},{"./lib/Resolve":83}],83:[function(e,t,n){"use strict";function r(e){const t=[];let n=0;for(;n<e.length;)switch(e[n]){case"/":if("."===e[n+1])if("."===e[n+2]){if(!o(e[n+3])){t.push([]),n++;break}t.pop(),e[n+3]||t.push([]),n+=3}else{if(!o(e[n+2])){t.push([]),n++;break}e[n+2]||t.push([]),n+=2}else t.push([]),n++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(n)),n=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[n]),n++}return"/"+t.map(e=>e.join("")).join("/")}function i(e,t){let n=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(n=t+3):"/"===e[0]&&"/"===e[1]&&(n=2);const i=e.indexOf("/",n);return i<0?e:e.substr(0,i)+r(e.substr(i))}function o(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(n,"__esModule",{value:!0}),n.resolve=function(e,t){const n=(t=t||"").indexOf("#");if(n>0&&(t=t.substr(0,n)),!e.length){if(t.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);return t}if(e.startsWith("?")){const n=t.indexOf("?");return n>0&&(t=t.substr(0,n)),t+e}if(e.startsWith("#"))return t+e;if(!t.length){const t=e.indexOf(":");if(t<0)throw new Error(`Found invalid relative IRI '${e}' for a missing baseIRI`);return i(e,t)}const o=e.indexOf(":");if(o>=0)return i(e,o);const a=t.indexOf(":");if(a<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const s=t.substr(0,a+1);if(0===e.indexOf("//"))return s+i(e,o);let u;if(t.indexOf("//",a)===a+1){if(u=t.indexOf("/",a+3),u<0)return t.length>a+3?t+"/"+i(e,o):s+i(e,o)}else if(u=t.indexOf("/",a+1),u<0)return s+i(e,o);if(0===e.indexOf("/"))return t.substr(0,u)+r(e);let c=t.substr(u);const l=c.lastIndexOf("/");return l>=0&&l<c.length-1&&(c=c.substr(0,l+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=r(e=c+e),t.substr(0,u)+e},n.removeDotSegments=r,n.removeDotSegmentsOfPath=i},{}],84:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:6}],85:[function(e,t,n){(function(t){(function(){!function(n){n.parser=function(e,t){return new o(e,t)},n.SAXParser=o,n.SAXStream=s,n.createStream=function(e,t){return new s(e,t)},n.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,t){if(!(this instanceof o))return new o(e,t);var r=this;(function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""})(r),r.q=r.c="",r.bufferCheckPosition=n.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=S.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=Object.create(r.strictEntities?n.XML_ENTITIES:n.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(l)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),N(r,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){k(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return A(t,"Cannot write after close. Assign an onready handler.");if(null===e)return k(t);"object"==typeof e&&(e=e.toString());for(var r=0,o="";o=B(e,r++),t.c=o,o;)switch(t.trackPosition&&(t.position++,"\n"===o?(t.line++,t.column=0):t.column++),t.state){case S.BEGIN:if(t.state=S.BEGIN_WHITESPACE,"\ufeff"===o)continue;F(t,o);continue;case S.BEGIN_WHITESPACE:F(t,o);continue;case S.TEXT:if(t.sawRoot&&!t.closedRoot){for(var a=r-1;o&&"<"!==o&&"&"!==o;)(o=B(e,r++))&&t.trackPosition&&(t.position++,"\n"===o?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(a,r-1)}"<"!==o||t.sawRoot&&t.closedRoot&&!t.strict?(!g(o)&&(!t.sawRoot||t.closedRoot)&&R(t,"Text data outside of root node."),"&"===o?t.state=S.TEXT_ENTITY:t.textNode+=o):(t.state=S.OPEN_WAKA,t.startTagPosition=t.position);continue;case S.SCRIPT:"<"===o?t.state=S.SCRIPT_ENDING:t.script+=o;continue;case S.SCRIPT_ENDING:"/"===o?t.state=S.CLOSE_TAG:(t.script+="<"+o,t.state=S.SCRIPT);continue;case S.OPEN_WAKA:"!"===o?(t.state=S.SGML_DECL,t.sgmlDecl=""):g(o)||(b(d,o)?(t.state=S.OPEN_TAG,t.tagName=o):"/"===o?(t.state=S.CLOSE_TAG,t.tagName=""):"?"===o?(t.state=S.PROC_INST,t.procInstName=t.procInstBody=""):(R(t,"Unencoded <"),t.startTagPosition+1<t.position&&(o=new Array(t.position-t.startTagPosition).join(" ")+o),t.textNode+="<"+o,t.state=S.TEXT));continue;case S.SGML_DECL:"[CDATA["===(t.sgmlDecl+o).toUpperCase()?(E(t,"onopencdata"),t.state=S.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+o==="--"?(t.state=S.COMMENT,t.comment="",t.sgmlDecl=""):"DOCTYPE"===(t.sgmlDecl+o).toUpperCase()?(t.state=S.DOCTYPE,(t.doctype||t.sawRoot)&&R(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===o?(E(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=S.TEXT):(y(o)&&(t.state=S.SGML_DECL_QUOTED),t.sgmlDecl+=o);continue;case S.SGML_DECL_QUOTED:o===t.q&&(t.state=S.SGML_DECL,t.q=""),t.sgmlDecl+=o;continue;case S.DOCTYPE:">"===o?(t.state=S.TEXT,E(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=o,"["===o?t.state=S.DOCTYPE_DTD:y(o)&&(t.state=S.DOCTYPE_QUOTED,t.q=o));continue;case S.DOCTYPE_QUOTED:t.doctype+=o,o===t.q&&(t.q="",t.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:t.doctype+=o,"]"===o?t.state=S.DOCTYPE:y(o)&&(t.state=S.DOCTYPE_DTD_QUOTED,t.q=o);continue;case S.DOCTYPE_DTD_QUOTED:t.doctype+=o,o===t.q&&(t.state=S.DOCTYPE_DTD,t.q="");continue;case S.COMMENT:"-"===o?t.state=S.COMMENT_ENDING:t.comment+=o;continue;case S.COMMENT_ENDING:"-"===o?(t.state=S.COMMENT_ENDED,t.comment=I(t.opt,t.comment),t.comment&&E(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+o,t.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==o?(R(t,"Malformed comment"),t.comment+="--"+o,t.state=S.COMMENT):t.state=S.TEXT;continue;case S.CDATA:"]"===o?t.state=S.CDATA_ENDING:t.cdata+=o;continue;case S.CDATA_ENDING:"]"===o?t.state=S.CDATA_ENDING_2:(t.cdata+="]"+o,t.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===o?(t.cdata&&E(t,"oncdata",t.cdata),E(t,"onclosecdata"),t.cdata="",t.state=S.TEXT):"]"===o?t.cdata+="]":(t.cdata+="]]"+o,t.state=S.CDATA);continue;case S.PROC_INST:"?"===o?t.state=S.PROC_INST_ENDING:g(o)?t.state=S.PROC_INST_BODY:t.procInstName+=o;continue;case S.PROC_INST_BODY:if(!t.procInstBody&&g(o))continue;"?"===o?t.state=S.PROC_INST_ENDING:t.procInstBody+=o;continue;case S.PROC_INST_ENDING:">"===o?(E(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=S.TEXT):(t.procInstBody+="?"+o,t.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:b(f,o)?t.tagName+=o:(O(t),">"===o?D(t):"/"===o?t.state=S.OPEN_TAG_SLASH:(g(o)||R(t,"Invalid character in tag name"),t.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===o?(D(t,!0),P(t)):(R(t,"Forward-slash in opening tag not followed by >"),t.state=S.ATTRIB);continue;case S.ATTRIB:if(g(o))continue;">"===o?D(t):"/"===o?t.state=S.OPEN_TAG_SLASH:b(d,o)?(t.attribName=o,t.attribValue="",t.state=S.ATTRIB_NAME):R(t,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===o?t.state=S.ATTRIB_VALUE:">"===o?(R(t,"Attribute without value"),t.attribValue=t.attribName,M(t),D(t)):g(o)?t.state=S.ATTRIB_NAME_SAW_WHITE:b(f,o)?t.attribName+=o:R(t,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===o)t.state=S.ATTRIB_VALUE;else{if(g(o))continue;R(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",E(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===o?D(t):b(d,o)?(t.attribName=o,t.state=S.ATTRIB_NAME):(R(t,"Invalid attribute name"),t.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(g(o))continue;y(o)?(t.q=o,t.state=S.ATTRIB_VALUE_QUOTED):(R(t,"Unquoted attribute value"),t.state=S.ATTRIB_VALUE_UNQUOTED,t.attribValue=o);continue;case S.ATTRIB_VALUE_QUOTED:if(o!==t.q){"&"===o?t.state=S.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=o;continue}M(t),t.q="",t.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:g(o)?t.state=S.ATTRIB:">"===o?D(t):"/"===o?t.state=S.OPEN_TAG_SLASH:b(d,o)?(R(t,"No whitespace between attributes"),t.attribName=o,t.attribValue="",t.state=S.ATTRIB_NAME):R(t,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!m(o)){"&"===o?t.state=S.ATTRIB_VALUE_ENTITY_U:t.attribValue+=o;continue}M(t),">"===o?D(t):t.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(t.tagName)">"===o?P(t):b(f,o)?t.tagName+=o:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=S.SCRIPT):(g(o)||R(t,"Invalid tagname in closing tag"),t.state=S.CLOSE_TAG_SAW_WHITE);else{if(g(o))continue;v(d,o)?t.script?(t.script+="</"+o,t.state=S.SCRIPT):R(t,"Invalid tagname in closing tag."):t.tagName=o}continue;case S.CLOSE_TAG_SAW_WHITE:if(g(o))continue;">"===o?P(t):R(t,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var s,u;switch(t.state){case S.TEXT_ENTITY:s=S.TEXT,u="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:s=S.ATTRIB_VALUE_QUOTED,u="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:s=S.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===o?(t[u]+=C(t),t.entity="",t.state=s):b(t.entity.length?p:h,o)?t.entity+=o:(R(t,"Invalid character in entity name"),t[u]+="&"+t.entity+o,t.entity="",t.state=s);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,o=0,a=i.length;o<a;o++){var s=e[i[o]].length;if(s>t)switch(i[o]){case"textNode":T(e);break;case"cdata":E(e,"oncdata",e.cdata),e.cdata="";break;case"script":E(e,"onscript",e.script),e.script="";break;default:A(e,"Max buffer length exceeded: "+i[o])}r=Math.max(r,s)}e.bufferCheckPosition=n.MAX_BUFFER_LENGTH-r+e.position}(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(e){T(e),""!==e.cdata&&(E(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(E(e,"onscript",e.script),e.script="")}(this)}};try{r=e("stream").Stream}catch(_){r=function(){}}var a=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function s(e,t){if(!(this instanceof s))return new s(e,t);r.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,a.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}(s.prototype=Object.create(r.prototype,{constructor:{value:s}})).write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return!n._parser["on"+e]&&-1!==a.indexOf(e)&&(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var u="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",l={xml:u,xmlns:c},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function y(e){return'"'===e||"'"===e}function m(e){return">"===e||g(e)}function b(e,t){return e.test(t)}function v(e,t){return!b(e,t)}var _,w,x,S=0;for(var j in n.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r}),n.STATE)n.STATE[n.STATE[j]]=j;function N(e,t,n){e[t]&&e[t](n)}function E(e,t,n){e.textNode&&T(e),N(e,t,n)}function T(e){e.textNode=I(e.opt,e.textNode),e.textNode&&N(e,"ontext",e.textNode),e.textNode=""}function I(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function A(e,t){return T(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,N(e,"onerror",t),e}function k(e){return e.sawRoot&&!e.closedRoot&&R(e,"Unclosed root tag"),e.state!==S.BEGIN&&e.state!==S.BEGIN_WHITESPACE&&e.state!==S.TEXT&&A(e,"Unexpected end"),T(e),e.c="",e.closed=!0,N(e,"onend"),o.call(e,e.strict,e.opt),e}function R(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&A(e,t)}function O(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,E(e,"onopentagstart",n)}function L(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function M(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=L(e.attribName,!0),n=t.local;if("xmlns"===t.prefix)if("xml"===n&&e.attribValue!==u)R(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==c)R(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var r=e.tag,i=e.tags[e.tags.length-1]||e;r.ns===i.ns&&(r.ns=Object.create(i.ns)),r.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,E(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function D(e,t){if(e.opt.xmlns){var n=e.tag,r=L(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(R(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix),n.ns&&(e.tags[e.tags.length-1]||e).ns!==n.ns&&Object.keys(n.ns).forEach(function(t){E(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var i=0,o=e.attribList.length;i<o;i++){var a=e.attribList[i],s=a[0],u=a[1],c=L(s,!0),l=c.prefix,d=""===l?"":n.ns[l]||"",f={name:s,value:u,prefix:l,local:c.local,uri:d};l&&"xmlns"!==l&&!d&&(R(e,"Unbound namespace prefix: "+JSON.stringify(l)),f.uri=l),e.tag.attributes[s]=f,E(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),E(e,"onopentag",e.tag),t||(e.state=e.noscript||"script"!==e.tagName.toLowerCase()?S.TEXT:S.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function P(e){if(!e.tagName)return R(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=S.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=S.SCRIPT);E(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)R(e,"Unexpected close tag");if(t<0)return R(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=S.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,E(e,"onclosetag",e.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];e.opt.xmlns&&o.ns!==(e.tags[e.tags.length-1]||e).ns&&Object.keys(o.ns).forEach(function(t){E(e,"onclosenamespace",{prefix:t,uri:o.ns[t]})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=S.TEXT}function C(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(R(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function F(e,t){"<"===t?(e.state=S.OPEN_WAKA,e.startTagPosition=e.position):g(t)||(R(e,"Non-whitespace before first tag."),e.textNode=t,e.state=S.TEXT)}function B(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}S=n.STATE,String.fromCodePoint||(_=String.fromCharCode,w=Math.floor,x=function(){var e=16384,t=[],n=-1,r=arguments.length;if(!r)return"";for(var i="";++n<r;){var o=Number(arguments[n]);if(!isFinite(o)||o<0||o>1114111||w(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?t.push(o):t.push(55296+((o-=65536)>>10),o%1024+56320),(n+1===r||t.length>e)&&(i+=_.apply(null,t),t.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:x,configurable:!0,writable:!0}):String.fromCodePoint=x)}(void 0===n?this.sax={}:n)}).call(this)}).call(this,e("buffer").Buffer)},{buffer:6,stream:87,string_decoder:5}],86:[function(e,t,n){(function(e,t){(function(){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(c="setImmediate$"+Math.random()+"$",l=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(c)&&f(+e.data.slice(c.length))},t.addEventListener?t.addEventListener("message",l,!1):t.attachEvent("onmessage",l),r=function(e){t.postMessage(c+e,"*")}):t.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){f(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){f(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(f,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return o[i]={callback:e,args:t},r(i),i++},u.clearImmediate=d}var c,l;function d(e){delete o[e]}function f(e){if(a)setTimeout(f,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],87:[function(e,t,n){t.exports=i;var r=e("events").EventEmitter;function i(){r.call(this)}e("inherits")(i,r),i.Readable=e("readable-stream/lib/_stream_readable.js"),i.Writable=e("readable-stream/lib/_stream_writable.js"),i.Duplex=e("readable-stream/lib/_stream_duplex.js"),i.Transform=e("readable-stream/lib/_stream_transform.js"),i.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),i.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),i.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),!e._isStdio&&(!t||!1!==t.end)&&(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},{events:8,inherits:10,"readable-stream/lib/_stream_duplex.js":68,"readable-stream/lib/_stream_passthrough.js":69,"readable-stream/lib/_stream_readable.js":70,"readable-stream/lib/_stream_transform.js":71,"readable-stream/lib/_stream_writable.js":72,"readable-stream/lib/internal/streams/end-of-stream.js":76,"readable-stream/lib/internal/streams/pipeline.js":78}],88:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{dup:5,"safe-buffer":84}],89:[function(e,t,n){(function(t,r){(function(){var i=e("process/browser.js").nextTick,o=Function.prototype.apply,a=Array.prototype.slice,s={},u=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=u++,r=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,i(function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":44,timers:89}],90:[function(e,t,n){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(e,t,n){"use strict";t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},{}],92:[function(e,t,n){"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new s(n,null,t,e):new s(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function o(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,r){if(!(this instanceof s))return new s(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;var a=[];for(r=0;o&&r<t;r++)a.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),r=0;r<n.length;r++)o=i(this,o,n[r]);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{e("./iterator.js")(r)}catch(u){}},{"./iterator.js":91}]},{},[1])(1)},10322:function(e){e.exports=function(e,t){var n=t.length;if(0!==n){var r=e.length;e.length+=n;for(var i=0;i<n;i++)e[r+i]=t[i]}}},7445:function(e,t,n){var r=n(93910),i=n(29369),o=n(10322);function a(e,t,n){if(!r(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if((t=""+t)==(n=""+n))return[t];var i=e.inboundNeighbors.bind(e),o=e.outboundNeighbors.bind(e),a={},s={};a[t]=null,s[n]=null;var u,c,l,d,f,h,p,g,y=[t],m=[n],b=!1;e:for(;y.length&&m.length;)if(y.length<=m.length){for(u=y,y=[],f=0,p=u.length;f<p;f++)for(h=0,g=(l=o(c=u[f])).length;h<g;h++)if((d=l[h])in a||(y.push(d),a[d]=c),d in s){b=!0;break e}}else for(u=m,m=[],f=0,p=u.length;f<p;f++)for(c=u[f],l=i(c),h=0,g=l.length;h<g;h++)if(d=l[h],d in s||(m.push(d),s[d]=c),d in a){b=!0;break e}if(!b)return null;for(var v=[];d;)v.unshift(d),d=a[d];for(d=s[v[v.length-1]];d;)v.push(d),d=s[d];return v.length?v:null}function s(e,t){if(!r(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');var n,i,o,a,s,u,c={},l={};for(c[t=""+t]=!0,l[t]=[t];Object.keys(c).length;)for(o in n=c,c={},n)for(s=0,u=(i=e.outboundNeighbors(o)).length;s<u;s++)l[a=i[s]]||(l[a]=l[o].concat(a),c[a]=!0);return l}function u(e,t,n){if(!r(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,a={},s=0;a[n]=0;for(var u,c,l,d=[n];0!==d.length;){var f=[];for(u=0,c=d.length;u<c;u++)!i.has(l=d[u])&&(i.add(l),o(f,t[e](l)),a[l]=s);s++,d=f}return a}var c=u.bind(null,"outboundNeighbors"),l=u.bind(null,"neighbors");function d(e,t,n){return arguments.length<3?s(e,t):a(e,t,n)}d.bidirectional=a,d.singleSource=s,d.singleSourceLength=c,d.undirectedSingleSourceLength=l,d.brandes=function(e,t){t=""+t;var n,r,o,a,s,u,c,l,d,f=[],h={},p={},g=e.nodes();for(u=0,l=g.length;u<l;u++)h[a=g[u]]=[],p[a]=0;var y={};p[t]=1,y[t]=0;for(var m=i.of(t);m.size;)for(a=m.dequeue(),f.push(a),n=y[a],r=p[a],c=0,d=(o=e.outboundNeighbors(a)).length;c<d;c++)(s=o[c])in y||(m.enqueue(s),y[s]=n+1),y[s]===n+1&&(p[s]+=r,h[s].push(a));return[f,h,p]},e.exports=d},93910:function(e){e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},70698:function(e){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($e){return!1}}function o(e,t,n){return(o=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,n(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),r(i,e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++)if(arguments[t])for(var r in arguments[t])e[r]=arguments[t][r];return e};function c(e,t,n,r){var i=e._nodes.get(t),o=null;return i?o="mixed"===r?i.out&&i.out[n]||i.undirected&&i.undirected[n]:"directed"===r?i.out&&i.out[n]:i.undirected&&i.undirected[n]:o}function l(t){return null!==t&&"object"===e(t)&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode}function d(t){return"object"===e(t)&&null!==t&&t.constructor===Object}function f(e){var t;for(t in e)return!1;return!0}function h(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function p(e,t,n){var r={enumerable:!0,configurable:!0};"function"==typeof n?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(e,t,r)}function g(e){return!(!d(e)||e.attributes&&!Array.isArray(e.attributes))}"function"==typeof Object.assign&&(u=Object.assign);var y,m={exports:{}},b="object"==typeof Reflect?Reflect:null,v=b&&"function"==typeof b.apply?b.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};y=b&&"function"==typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var _=Number.isNaN||function(e){return e!=e};function w(){w.init.call(this)}m.exports=w,m.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var a;R(e,t,o,{once:!0}),"error"!==t&&("function"==typeof(a=e).on&&R(a,"error",i,{once:!0}))})},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var x=10;function S(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function j(e){return void 0===e._maxListeners?w.defaultMaxListeners:e._maxListeners}function N(e,t,n,r){var i,o,a;if(S(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=j(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=E.bind(r);return i.listener=n,r.wrapFn=i,i}function I(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):k(i,i.length)}function A(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function k(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function R(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}function O(e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:e}),this.done=!1}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(e){if("number"!=typeof e||e<0||_(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");x=e}}),w.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||_(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},w.prototype.getMaxListeners=function(){return j(this)},w.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)v(s,this,t);else{var u=s.length,c=k(s,u);for(n=0;n<u;++n)v(c[n],this,t)}return!0},w.prototype.on=w.prototype.addListener=function(e,t){return N(this,e,t,!1)},w.prototype.prependListener=function(e,t){return N(this,e,t,!0)},w.prototype.once=function(e,t){return S(t),this.on(e,T(this,e,t)),this},w.prototype.prependOnceListener=function(e,t){return S(t),this.prependListener(e,T(this,e,t)),this},w.prototype.off=w.prototype.removeListener=function(e,t){var n,r,i,o,a;if(S(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},w.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},w.prototype.listeners=function(e){return I(this,e,!0)},w.prototype.rawListeners=function(e){return I(this,e,!1)},w.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):A.call(e,t)},w.prototype.listenerCount=A,w.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]},O.prototype.next=function(){if(this.done)return{done:!0};var e=this._next();return e.done&&(this.done=!0),e},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=function(){return this}),O.of=function(){var e=arguments,t=e.length,n=0;return new O(function(){return n>=t?{done:!0}:{done:!1,value:e[n++]}})},O.empty=function(){var e=new O(null);return e.done=!0,e},O.is=function(e){return e instanceof O||"object"==typeof e&&null!==e&&"function"==typeof e.next};var L=O,M=function(e,t){for(var n,r=arguments.length>1?t:1/0,i=r!==1/0?new Array(r):[],o=0;;){if(o===r)return i;if((n=e.next()).done)return o!==t?i.slice(0,o):i;i[o++]=n.value}},D=function(e){function n(t,n){var r;return(r=e.call(this)||this).name="GraphError",r.message=t||"",r.data=n||{},r}return t(n,e),n}(a(Error)),P=function(e){function n(t,r){var i;return(i=e.call(this,t,r)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return t(n,e),n}(D),C=function(e){function n(t,r){var i;return(i=e.call(this,t,r)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return t(n,e),n}(D),F=function(e){function n(t,r){var i;return(i=e.call(this,t,r)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return t(n,e),n}(D);function B(e,t){this.key=e,this.attributes=t,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function G(e,t){this.key=e,this.attributes=t,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function U(e,t){this.key=e,this.attributes=t,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function V(e,t,n,r,i,o){this.key=t,this.attributes=o,this.undirected=e,this.source=r,this.target=i,this.generatedKey=n}function $(e,t,n,r,i,o,a){var s,u,c="out",l="in";if(t&&(c=l="undirected"),e.multi){if(void 0===(u=(s=o[c])[i])&&(u=new Set,s[i]=u),u.add(n),r===i&&t)return;void 0===(s=a[l])[r]&&(s[r]=u)}else{if(o[c][i]=n,r===i&&t)return;a[l][r]=n}}function z(e,t,n){var r=e.multi,i=n.source,o=n.target,a=i.key,s=o.key,u=i[t?"undirected":"out"],c=t?"undirected":"in";if(s in u)if(r){var l=u[s];1===l.size?(delete u[s],delete o[c][a]):l.delete(n)}else delete u[s];r||delete o[c][a]}G.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},U.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var q=[{name:function(e){return"get".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=c(this,o,a,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else if(!(i=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if("mixed"!==n&&i.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return i.attributes[r]}}},{name:function(e){return"get".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+e,o=""+arguments[1];if(!(r=c(this,i,o,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(!(r=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if("mixed"!==n&&r.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return r.attributes}}},{name:function(e){return"has".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=c(this,o,a,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else if(!(i=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if("mixed"!==n&&i.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return i.attributes.hasOwnProperty(r)}}},{name:function(e){return"set".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+e,s=""+r;if(r=arguments[2],i=arguments[3],!(o=c(this,a,s,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else if(!(o=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if("mixed"!==n&&o.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return o.attributes[r]=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:function(e){return"update".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r,i){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+e,s=""+r;if(r=arguments[2],i=arguments[3],!(o=c(this,a,s,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else if(!(o=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if("function"!=typeof i)throw new P("Graph.".concat(t,": updater should be a function."));if("mixed"!==n&&o.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return o.attributes[r]=i(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:function(e){return"remove".concat(e,"Attribute")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=c(this,o,a,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else if(!(i=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if("mixed"!==n&&i.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return delete i.attributes[r],this.emit("edgeAttributesUpdated",{key:i.key,type:"remove",attributes:i.attributes,name:r}),this}}},{name:function(e){return"replace".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=c(this,o,a,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else if(!(i=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if(!d(r))throw new P("Graph.".concat(t,": provided attributes are not a plain object."));if("mixed"!==n&&i.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return i.attributes=r,this.emit("edgeAttributesUpdated",{key:i.key,type:"replace",attributes:i.attributes}),this}}},{name:function(e){return"merge".concat(e,"Attributes")},attacher:function(e,t,n){e.prototype[t]=function(e,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new F("Graph.".concat(t,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new F("Graph.".concat(t,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+e,a=""+r;if(r=arguments[2],!(i=c(this,o,a,n)))throw new C("Graph.".concat(t,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else if(!(i=this._edges.get(e=""+e)))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" edge in the graph.'));if(!d(r))throw new P("Graph.".concat(t,": provided attributes are not a plain object."));if("mixed"!==n&&i.undirected!==("undirected"===n))throw new C("Graph.".concat(t,': could not find the "').concat(e,'" ').concat(n," edge in the graph."));return u(i.attributes,r),this.emit("edgeAttributesUpdated",{key:i.key,type:"merge",attributes:i.attributes,data:r}),this}}}],H=L,K=function(){var e,t=arguments,n=-1;return new H(function r(){if(!e){if(++n>=t.length)return{done:!0};e=t[n]}var i=e.next();return i.done?(e=null,r()):i})},W=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function J(e,t){for(var n in t)e.push(t[n].key)}function Q(e,t){for(var n in t)t[n].forEach(function(t){return e.push(t.key)})}function X(e,t,n){for(var r in e)if(r!==n){var i=e[r];t(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected,i.generatedKey)}}function Y(e,t,n){for(var r in e)r!==n&&e[r].forEach(function(e){return t(e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes,e.undirected,e.generatedKey)})}function Z(e,t,n){for(var r in e)if(r!==n){var i=e[r];if(t(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected,i.generatedKey))return!0}return!1}function ee(e,t,n){var r,i,o,a,s;for(var u in e)if(u!==n)for(r=e[u].values();!0!==(i=r.next()).done;)if(a=(o=i.value).source,t(o.key,o.attributes,a.key,(s=o.target).key,a.attributes,s.attributes,o.undirected,o.generatedKey))return!0;return!1}function te(e,t){var n=Object.keys(e),r=n.length,i=null,o=0;return new L(function a(){var s;if(i){var u=i.next();if(u.done)return i=null,o++,a();s=u.value}else{if(o>=r)return{done:!0};var c=n[o];if(c===t)return o++,a();if((s=e[c])instanceof Set)return i=s.values(),a();o++}return{done:!1,value:[s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes]}})}function ne(e,t,n){var r=t[n];r&&e.push(r.key)}function re(e,t,n){var r=t[n];r&&r.forEach(function(t){return e.push(t.key)})}function ie(e,t,n){var r=e[t];if(r){var i=r.source,o=r.target;n(r.key,r.attributes,i.key,o.key,i.attributes,o.attributes,r.undirected,r.generatedKey)}}function oe(e,t,n){var r=e[t];r&&r.forEach(function(e){return n(e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes,e.undirected,e.generatedKey)})}function ae(e,t,n){var r=e[t];if(r){var i=r.source,o=r.target;return n(r.key,r.attributes,i.key,o.key,i.attributes,o.attributes,r.undirected,r.generatedKey)}}function se(e,t,n){var r=e[t];if(r){for(var i,o,a=r.values();!0!==(i=a.next()).done;)if(n((o=i.value).key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected,o.generatedKey))return!0;return!1}}function ue(e,t){var n=e[t];if(n instanceof Set){var r=n.values();return new L(function(){var e=r.next();if(e.done)return e;var t=e.value;return{done:!1,value:[t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes]}})}return L.of([n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes])}function ce(e,t){if(0===e.size)return[];if("mixed"===t||t===e.type)return"function"==typeof Array.from?Array.from(e._edges.keys()):M(e._edges.keys(),e._edges.size);for(var n,r,i=new Array("undirected"===t?e.undirectedSize:e.directedSize),o="undirected"===t,a=e._edges.values(),s=0;!0!==(n=a.next()).done;)(r=n.value).undirected===o&&(i[s++]=r.key);return i}function le(e,t,n){if(0!==e.size)for(var r,i,o="mixed"!==t&&t!==e.type,a="undirected"===t,s=e._edges.values();!0!==(r=s.next()).done;)if(i=r.value,!o||i.undirected===a){var u=i.source,c=i.target;n(i.key,i.attributes,u.key,c.key,u.attributes,c.attributes,i.undirected,i.generatedKey)}}function de(e,t,n){if(0!==e.size)for(var r,i,o="mixed"!==t&&t!==e.type,a="undirected"===t,s=e._edges.values();!0!==(r=s.next()).done;)if(i=r.value,!o||i.undirected===a){var u=i.source,c=i.target;if(n(i.key,i.attributes,u.key,c.key,u.attributes,c.attributes,i.undirected,i.generatedKey))break}}function fe(e,t){if(0===e.size)return L.empty();var n="mixed"!==t&&t!==e.type,r="undirected"===t,i=e._edges.values();return new L(function(){for(var e,t;;){if((e=i.next()).done)return e;if(t=e.value,!n||t.undirected===r)break}return{value:[t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes],done:!1}})}function he(e,t,n,r){var i=[],o=e?Q:J;return"undirected"!==t&&("out"!==n&&o(i,r.in),"in"!==n&&o(i,r.out),!n&&r.directedSelfLoops>0&&i.splice(i.lastIndexOf(r.key),1)),"directed"!==t&&o(i,r.undirected),i}function pe(e,t,n,r,i){var o=e?Y:X;"undirected"!==t&&("out"!==n&&o(r.in,i),"in"!==n&&o(r.out,i,n?null:r.key)),"directed"!==t&&o(r.undirected,i)}function ge(e,t,n,r,i){var o=e?ee:Z;"undirected"!==t&&("out"!==n&&o(r.in,i)||"in"!==n&&o(r.out,i,n?null:r.key))||"directed"===t||o(r.undirected,i)}function ye(e,t,n){var r=L.empty();return"undirected"!==e&&("out"!==t&&void 0!==n.in&&(r=K(r,te(n.in))),"in"!==t&&void 0!==n.out&&(r=K(r,te(n.out,t?null:n.key)))),"directed"!==e&&void 0!==n.undirected&&(r=K(r,te(n.undirected))),r}function me(e,t,n,r,i){var o=t?re:ne,a=[];return"undirected"!==e&&(void 0!==r.in&&"out"!==n&&o(a,r.in,i),void 0!==r.out&&"in"!==n&&o(a,r.out,i),!n&&r.directedSelfLoops>0&&a.splice(a.lastIndexOf(r.key),1)),"directed"!==e&&void 0!==r.undirected&&o(a,r.undirected,i),a}function be(e,t,n,r,i,o){var a=t?oe:ie;"undirected"!==e&&(void 0!==r.in&&"out"!==n&&a(r.in,i,o),r.key!==i&&void 0!==r.out&&"in"!==n&&a(r.out,i,o)),"directed"!==e&&void 0!==r.undirected&&a(r.undirected,i,o)}function ve(e,t,n,r,i,o){var a=t?se:ae;"undirected"!==e&&(void 0!==r.in&&"out"!==n&&a(r.in,i,o)||r.key!==i&&void 0!==r.out&&"in"!==n&&a(r.out,i,o,n?null:r.key))||"directed"===e||void 0===r.undirected||a(r.undirected,i,o)}function _e(e,t,n,r){var i=L.empty();return"undirected"!==e&&(void 0!==n.in&&"out"!==t&&r in n.in&&(i=K(i,ue(n.in,r))),void 0!==n.out&&"in"!==t&&r in n.out&&(i=K(i,ue(n.out,r)))),"directed"!==e&&void 0!==n.undirected&&r in n.undirected&&(i=K(i,ue(n.undirected,r))),i}var we=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function xe(e,t){if(void 0!==t)for(var n in t)e.add(n)}function Se(e,t,n){if("mixed"!==e){if("undirected"===e)return Object.keys(n.undirected);if("string"==typeof t)return Object.keys(n[t])}var r=new Set;return"undirected"!==e&&("out"!==t&&xe(r,n.in),"in"!==t&&xe(r,n.out)),"directed"!==e&&xe(r,n.undirected),M(r.values(),r.size)}function je(e,t,n){for(var r in t){var i=t[r];i instanceof Set&&(i=i.values().next().value);var o=i.source,a=o===e?i.target:o;n(a.key,a.attributes)}}function Ne(e,t,n,r){for(var i in n){var o=n[i];o instanceof Set&&(o=o.values().next().value);var a=o.source,s=a===t?o.target:a;e.has(s.key)||(e.add(s.key),r(s.key,s.attributes))}}function Ee(e,t,n){for(var r in t){var i=t[r];i instanceof Set&&(i=i.values().next().value);var o=i.source,a=o===e?i.target:o;if(n(a.key,a.attributes))return!0}return!1}function Te(e,t,n,r){for(var i in n){var o=n[i];o instanceof Set&&(o=o.values().next().value);var a=o.source,s=a===t?o.target:a;if(!e.has(s.key)&&(e.add(s.key),r(s.key,s.attributes)))return!0}return!1}function Ie(e,t){var n=Object.keys(t),r=n.length,i=0;return new L(function(){if(i>=r)return{done:!0};var o=t[n[i++]];o instanceof Set&&(o=o.values().next().value);var a=o.source,s=a===e?o.target:a;return{done:!1,value:[s.key,s.attributes]}})}function Ae(e,t,n){var r=Object.keys(n),i=r.length,o=0;return new L(function a(){if(o>=i)return{done:!0};var s=n[r[o++]];s instanceof Set&&(s=s.values().next().value);var u=s.source,c=u===t?s.target:u;return e.has(c.key)?a():(e.add(c.key),{done:!1,value:[c.key,c.attributes]})})}function ke(e,t,n,r,i){var o=e._nodes.get(r);if("undirected"!==t){if("out"!==n&&void 0!==o.in)for(var a in o.in)if(a===i)return!0;if("in"!==n&&void 0!==o.out)for(var s in o.out)if(s===i)return!0}if("directed"!==t&&void 0!==o.undirected)for(var u in o.undirected)if(u===i)return!0;return!1}function Re(e,t,n){for(var r,i,o,a,s,u,c,l=t._nodes.values(),d=t.type;!0!==(r=l.next()).done;){if(i=r.value,"undirected"!==d)for(o in a=i.out)if(u=(s=a[o]).target,c=n(i.key,u.key,i.attributes,u.attributes,s.key,s.attributes,s.undirected,s.generatedKey),e&&c)return;if("directed"!==d)for(o in a=i.undirected)if((u=(s=a[o]).target).key!==o&&(u=s.source),c=n(i.key,u.key,i.attributes,u.attributes,s.key,s.attributes,s.undirected,s.generatedKey),e&&c)return}}function Oe(e,t,n){for(var r,i,o,a,s,u,c,l,d,f=t._nodes.values(),h=t.type;!0!==(r=f.next()).done;){if(i=r.value,"undirected"!==h)for(o in u=i.out)for(a=u[o].values();!0!==(s=a.next()).done;)if(l=(c=s.value).target,d=n(i.key,l.key,i.attributes,l.attributes,c.key,c.attributes,c.undirected,c.generatedKey),e&&d)return;if("directed"!==h)for(o in u=i.undirected)for(a=u[o].values();!0!==(s=a.next()).done;)if((l=(c=s.value).target).key!==o&&(l=c.source),d=n(i.key,l.key,i.attributes,l.attributes,c.key,c.attributes,c.undirected,c.generatedKey),e&&d)return}}function Le(e,t){var n={key:e};return f(t.attributes)||(n.attributes=u({},t.attributes)),n}function Me(e,t){var n={source:t.source.key,target:t.target.key};return t.generatedKey||(n.key=e),f(t.attributes)||(n.attributes=u({},t.attributes)),t.undirected&&(n.undirected=!0),n}function De(e){return d(e)?"key"in e?!("attributes"in e)||d(e.attributes)&&null!==e.attributes?null:"invalid-attributes":"no-key":"not-object"}function Pe(e){return d(e)?"source"in e?"target"in e?!("attributes"in e)||d(e.attributes)&&null!==e.attributes?"undirected"in e&&"boolean"!=typeof e.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}var Ce=new Set(["directed","undirected","mixed"]),Fe=new Set(["domain","_events","_eventsCount","_maxListeners"]),Be={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Ge(e,t,n){var r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function Ue(e,t,n,r,i,o,a,s){if(!r&&"undirected"===e.type)throw new F("Graph.".concat(t,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(r&&"directed"===e.type)throw new F("Graph.".concat(t,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s&&!d(s))throw new P("Graph.".concat(t,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(o=""+o,a=""+a,s=s||{},!e.allowSelfLoops&&o===a)throw new F("Graph.".concat(t,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var u=e._nodes.get(o),c=e._nodes.get(a);if(!u)throw new C("Graph.".concat(t,': source node "').concat(o,'" not found.'));if(!c)throw new C("Graph.".concat(t,': target node "').concat(a,'" not found.'));var l={key:null,undirected:r,source:o,target:a,attributes:s};if(n&&(i=e._edgeKeyGenerator(l)),e._edges.has(i=""+i))throw new F("Graph.".concat(t,': the "').concat(i,'" edge already exists in the graph.'));if(!e.multi&&(r?void 0!==u.undirected[a]:void 0!==u.out[a]))throw new F("Graph.".concat(t,': an edge linking "').concat(o,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var f=new V(r,i,n,u,c,s);return e._edges.set(i,f),o===a?r?(u.undirectedSelfLoops++,e._undirectedSelfLoopCount++):(u.directedSelfLoops++,e._directedSelfLoopCount++):r?(u.undirectedDegree++,c.undirectedDegree++):(u.outDegree++,c.inDegree++),$(e,r,f,o,a,u,c),r?e._undirectedSize++:e._directedSize++,l.key=i,e.emit("edgeAdded",l),i}function Ve(e,t,n,r,i,o,a,s,c){if(!r&&"undirected"===e.type)throw new F("Graph.".concat(t,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(r&&"directed"===e.type)throw new F("Graph.".concat(t,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s)if(c){if("function"!=typeof s)throw new P("Graph.".concat(t,': invalid updater function. Expecting a function but got "').concat(s,'"'))}else if(!d(s))throw new P("Graph.".concat(t,': invalid attributes. Expecting an object but got "').concat(s,'"'));var l;if(o=""+o,a=""+a,c&&(l=s,s=void 0),!e.allowSelfLoops&&o===a)throw new F("Graph.".concat(t,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var f,h,p=e._nodes.get(o),g=e._nodes.get(a);if(!n&&(f=e._edges.get(i))){if(f.source.key!==o||f.target.key!==a||r&&(f.source.key!==a||f.target.key!==o))throw new F("Graph.".concat(t,': inconsistency detected when attempting to merge the "').concat(i,'" edge with "').concat(o,'" source & "').concat(a,'" target vs. ("').concat(f.source.key,'", "').concat(f.target.key,'").'));h=f}if(h||e.multi||!p||(h=r?p.undirected[a]:p.out[a]),h)return(c?l:s)?(c?(h.attributes=l(h.attributes),e.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})):(u(h.attributes,s),e.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:s})),h.key):h.key;s=s||{},c&&l&&(s=l(s));var y={key:null,undirected:r,source:o,target:a,attributes:s};if(n&&(i=e._edgeKeyGenerator(y)),e._edges.has(i=""+i))throw new F("Graph.".concat(t,': the "').concat(i,'" edge already exists in the graph.'));return p||(p=Ge(e,o,{}),o===a&&(g=p)),g||(g=Ge(e,a,{})),f=new V(r,i,n,p,g,s),e._edges.set(i,f),o===a?r?(p.undirectedSelfLoops++,e._undirectedSelfLoopCount++):(p.directedSelfLoops++,e._directedSelfLoopCount++):r?(p.undirectedDegree++,g.undirectedDegree++):(p.outDegree++,g.inDegree++),$(e,r,f,o,a,p,g),r?e._undirectedSize++:e._directedSize++,y.key=i,e.emit("edgeAdded",y),i}var $e,ze=function(e){function n(t){var n;if(n=e.call(this)||this,(t=u({},Be,t)).edgeKeyGenerator&&"function"!=typeof t.edgeKeyGenerator)throw new P("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(t.edgeKeyGenerator,'".'));if("boolean"!=typeof t.multi)throw new P("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(t.multi,'".'));if(!Ce.has(t.type))throw new P('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(t.type,'".'));if("boolean"!=typeof t.allowSelfLoops)throw new P("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(t.allowSelfLoops,'".'));var r,i="mixed"===t.type?B:"directed"===t.type?G:U;return h(s(n),"NodeDataClass",i),h(s(n),"_attributes",{}),h(s(n),"_nodes",new Map),h(s(n),"_edges",new Map),h(s(n),"_directedSize",0),h(s(n),"_undirectedSize",0),h(s(n),"_directedSelfLoopCount",0),h(s(n),"_undirectedSelfLoopCount",0),h(s(n),"_edgeKeyGenerator",t.edgeKeyGenerator||(r=0,function(){return r++})),h(s(n),"_options",t),Fe.forEach(function(e){return h(s(n),e,n[e])}),p(s(n),"order",function(){return n._nodes.size}),p(s(n),"size",function(){return n._edges.size}),p(s(n),"directedSize",function(){return n._directedSize}),p(s(n),"undirectedSize",function(){return n._undirectedSize}),p(s(n),"selfLoopCount",function(){return n._directedSelfLoopCount+n._undirectedSelfLoopCount}),p(s(n),"directedSelfLoopCount",function(){return n._directedSelfLoopCount}),p(s(n),"undirectedSelfLoopCount",function(){return n._undirectedSelfLoopCount}),p(s(n),"multi",n._options.multi),p(s(n),"type",n._options.type),p(s(n),"allowSelfLoops",n._options.allowSelfLoops),p(s(n),"implementation",function(){return"graphology"}),n}t(n,e);var r=n.prototype;return r.hasNode=function(e){return this._nodes.has(""+e)},r.hasDirectedEdge=function(e,t){if("undirected"===this.type)return!1;if(1===arguments.length){var n=this._edges.get(""+e);return!!n&&!n.undirected}if(2===arguments.length){t=""+t;var r=this._nodes.get(e=""+e);if(!r)return!1;var i=r.out[t];return!(!i||this.multi&&!i.size)}throw new P("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.hasUndirectedEdge=function(e,t){if("directed"===this.type)return!1;if(1===arguments.length){var n=this._edges.get(""+e);return!!n&&n.undirected}if(2===arguments.length){t=""+t;var r=this._nodes.get(e=""+e);if(!r)return!1;var i=r.undirected[t];return!(!i||this.multi&&!i.size)}throw new P("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.hasEdge=function(e,t){if(1===arguments.length)return this._edges.has(""+e);if(2===arguments.length){t=""+t;var n=this._nodes.get(e=""+e);if(!n)return!1;var r=void 0!==n.out&&n.out[t];return r||(r=void 0!==n.undirected&&n.undirected[t]),!(!r||this.multi&&!r.size)}throw new P("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.directedEdge=function(e,t){if("undirected"!==this.type){if(e=""+e,t=""+t,this.multi)throw new F("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(e);if(!n)throw new C('Graph.directedEdge: could not find the "'.concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C('Graph.directedEdge: could not find the "'.concat(t,'" target node in the graph.'));var r=n.out&&n.out[t]||void 0;return r?r.key:void 0}},r.undirectedEdge=function(e,t){if("directed"!==this.type){if(e=""+e,t=""+t,this.multi)throw new F("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(e);if(!n)throw new C('Graph.undirectedEdge: could not find the "'.concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C('Graph.undirectedEdge: could not find the "'.concat(t,'" target node in the graph.'));var r=n.undirected&&n.undirected[t]||void 0;return r?r.key:void 0}},r.edge=function(e,t){if(this.multi)throw new F("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t;var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.edge: could not find the "'.concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C('Graph.edge: could not find the "'.concat(t,'" target node in the graph.'));var r=n.out&&n.out[t]||n.undirected&&n.undirected[t]||void 0;if(r)return r.key},r.inDegree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof t)throw new P('Graph.inDegree: Expecting a boolean but got "'.concat(t,'" for the second parameter (allowing self-loops to be counted).'));var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.inDegree: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:n.inDegree+(t?n.directedSelfLoops:0)},r.outDegree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof t)throw new P('Graph.outDegree: Expecting a boolean but got "'.concat(t,'" for the second parameter (allowing self-loops to be counted).'));var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.outDegree: could not find the "'.concat(e,'" node in the graph.'));return"undirected"===this.type?0:n.outDegree+(t?n.directedSelfLoops:0)},r.directedDegree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof t)throw new P('Graph.directedDegree: Expecting a boolean but got "'.concat(t,'" for the second parameter (allowing self-loops to be counted).'));var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.directedDegree: could not find the "'.concat(e,'" node in the graph.'));if("undirected"===this.type)return 0;var r=t?n.directedSelfLoops:0;return n.inDegree+r+(n.outDegree+r)},r.undirectedDegree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof t)throw new P('Graph.undirectedDegree: Expecting a boolean but got "'.concat(t,'" for the second parameter (allowing self-loops to be counted).'));var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.undirectedDegree: could not find the "'.concat(e,'" node in the graph.'));return"directed"===this.type?0:n.undirectedDegree+2*(t?n.undirectedSelfLoops:0)},r.degree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof t)throw new P('Graph.degree: Expecting a boolean but got "'.concat(t,'" for the second parameter (allowing self-loops to be counted).'));var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.degree: could not find the "'.concat(e,'" node in the graph.'));var r=0,i=0;return"directed"!==this.type&&(t&&(i=n.undirectedSelfLoops),r+=n.undirectedDegree+2*i),"undirected"!==this.type&&(t&&(i=n.directedSelfLoops),r+=n.inDegree+n.outDegree+2*i),r},r.source=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.source: could not find the "'.concat(e,'" edge in the graph.'));return t.source.key},r.target=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.target: could not find the "'.concat(e,'" edge in the graph.'));return t.target.key},r.extremities=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.extremities: could not find the "'.concat(e,'" edge in the graph.'));return[t.source.key,t.target.key]},r.opposite=function(e,t){e=""+e;var n=this._edges.get(t=""+t);if(!n)throw new C('Graph.opposite: could not find the "'.concat(t,'" edge in the graph.'));var r=n.source.key,i=n.target.key;if(e!==r&&e!==i)throw new C('Graph.opposite: the "'.concat(e,'" node is not attached to the "').concat(t,'" edge (').concat(r,", ").concat(i,")."));return e===r?i:r},r.hasExtremity=function(e,t){t=""+t;var n=this._edges.get(e=""+e);if(!n)throw new C('Graph.hasExtremity: could not find the "'.concat(e,'" edge in the graph.'));return n.source.key===t||n.target.key===t},r.isUndirected=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.isUndirected: could not find the "'.concat(e,'" edge in the graph.'));return t.undirected},r.isDirected=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.isDirected: could not find the "'.concat(e,'" edge in the graph.'));return!t.undirected},r.isSelfLoop=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.isSelfLoop: could not find the "'.concat(e,'" edge in the graph.'));return t.source===t.target},r.hasGeneratedKey=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.hasGeneratedKey: could not find the "'.concat(e,'" edge in the graph.'));return t.generatedKey},r.addNode=function(e,t){return function(e,t,n){if(n&&!d(n))throw new P('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(n=n||{},e._nodes.has(t=""+t))throw new F('Graph.addNode: the "'.concat(t,'" node already exist in the graph.'));var r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}(this,e,t).key},r.mergeNode=function(e,t){if(t&&!d(t))throw new P('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(t,'"'));t=t||{};var n=this._nodes.get(e=""+e);return n?(t&&(u(n.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:n.attributes,data:t})),e):(n=new this.NodeDataClass(e,t),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:t}),e)},r.updateNode=function(e,t){if(t&&"function"!=typeof t)throw new P('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(t,'"'));var n=this._nodes.get(e=""+e);if(n)return t&&(n.attributes=t(n.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:n.attributes})),e;var r=t?t({}):{};return n=new this.NodeDataClass(e,r),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:r}),e},r.dropNode=function(e){var t=this,n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.dropNode: could not find the "'.concat(e,'" node in the graph.'));this.forEachEdge(e,function(e){t.dropEdge(e)}),this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})},r.dropEdge=function(e){var t;if(arguments.length>1){var n=""+arguments[0],r=""+arguments[1];if(!(t=c(this,n,r,this.type)))throw new C('Graph.dropEdge: could not find the "'.concat(n,'" -> "').concat(r,'" edge in the graph.'))}else if(!(t=this._edges.get(e=""+e)))throw new C('Graph.dropEdge: could not find the "'.concat(e,'" edge in the graph.'));this._edges.delete(t.key);var i=t.source,o=t.target,a=t.attributes,s=t.undirected;return i===o?s?(i.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(i.directedSelfLoops--,this._directedSelfLoopCount--):s?(i.undirectedDegree--,o.undirectedDegree--):(i.outDegree--,o.inDegree--),z(this,s,t),s?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:e,attributes:a,source:i.key,target:o.key,undirected:s}),this},r.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},r.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},r.getAttribute=function(e){return this._attributes[e]},r.getAttributes=function(){return this._attributes},r.hasAttribute=function(e){return this._attributes.hasOwnProperty(e)},r.setAttribute=function(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this},r.updateAttribute=function(e,t){if("function"!=typeof t)throw new P("Graph.updateAttribute: updater should be a function.");return this._attributes[e]=t(this._attributes[e]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this},r.removeAttribute=function(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this},r.replaceAttributes=function(e){if(!d(e))throw new P("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},r.mergeAttributes=function(e){if(!d(e))throw new P("Graph.mergeAttributes: provided attributes are not a plain object.");return u(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this},r.getNodeAttribute=function(e,t){var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.getNodeAttribute: could not find the "'.concat(e,'" node in the graph.'));return n.attributes[t]},r.getNodeAttributes=function(e){var t=this._nodes.get(e=""+e);if(!t)throw new C('Graph.getNodeAttributes: could not find the "'.concat(e,'" node in the graph.'));return t.attributes},r.hasNodeAttribute=function(e,t){var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.hasNodeAttribute: could not find the "'.concat(e,'" node in the graph.'));return n.attributes.hasOwnProperty(t)},r.setNodeAttribute=function(e,t,n){var r=this._nodes.get(e=""+e);if(!r)throw new C('Graph.setNodeAttribute: could not find the "'.concat(e,'" node in the graph.'));if(arguments.length<3)throw new P("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return r.attributes[t]=n,this.emit("nodeAttributesUpdated",{key:e,type:"set",attributes:r.attributes,name:t}),this},r.updateNodeAttribute=function(e,t,n){var r=this._nodes.get(e=""+e);if(!r)throw new C('Graph.updateNodeAttribute: could not find the "'.concat(e,'" node in the graph.'));if(arguments.length<3)throw new P("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof n)throw new P("Graph.updateAttribute: updater should be a function.");var i=r.attributes,o=n(i[t]);return i[t]=o,this.emit("nodeAttributesUpdated",{key:e,type:"set",attributes:r.attributes,name:t}),this},r.removeNodeAttribute=function(e,t){var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.hasNodeAttribute: could not find the "'.concat(e,'" node in the graph.'));return delete n.attributes[t],this.emit("nodeAttributesUpdated",{key:e,type:"remove",attributes:n.attributes,name:t}),this},r.replaceNodeAttributes=function(e,t){var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.replaceNodeAttributes: could not find the "'.concat(e,'" node in the graph.'));if(!d(t))throw new P("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return n.attributes=t,this.emit("nodeAttributesUpdated",{key:e,type:"replace",attributes:n.attributes}),this},r.mergeNodeAttributes=function(e,t){var n=this._nodes.get(e=""+e);if(!n)throw new C('Graph.mergeNodeAttributes: could not find the "'.concat(e,'" node in the graph.'));if(!d(t))throw new P("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return u(n.attributes,t),this.emit("nodeAttributesUpdated",{key:e,type:"merge",attributes:n.attributes,data:t}),this},r.updateEachNodeAttributes=function(e,t){if("function"!=typeof e)throw new P("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!g(t))throw new P("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,r,i=this._nodes.values();!0!==(n=i.next()).done;)(r=n.value).attributes=e(r.key,r.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})},r.updateEachEdgeAttributes=function(e,t){if("function"!=typeof e)throw new P("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!g(t))throw new P("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,r,i=this._edges.values();!0!==(n=i.next()).done;)(r=n.value).attributes=e(r.key,r.attributes);this.emit("eachEdgeAttributesUpdated",{hints:t||null})},r.forEach=function(e){if("function"!=typeof e)throw new P("Graph.forEach: expecting a callback.");this.multi?Oe(!1,this,e):Re(!1,this,e)},r.forEachUntil=function(e){if("function"!=typeof e)throw new P("Graph.forEach: expecting a callback.");this.multi?Oe(!0,this,e):Re(!0,this,e)},r.adjacency=function(){return this.multi?(h=(u=this)._nodes.values(),p=u.type,g="outer",y=null,new L(function e(){var t;if("outer"===g)return!0===(t=h.next()).done?t:(c=t.value,g="directed",e());if("directed"===g)return"undirected"===p?(g="undirected",e()):(d=c.out,l=Object.keys(c.out),f=0,g="inner-directed",e());if("undirected"===g){if("directed"===p)return g="outer",e();d=c.undirected,l=Object.keys(c.undirected),f=0,g="inner-undirected"}if(!y&&f>=l.length)return g="inner-undirected"===g?"outer":"undirected",e();if(!y){var n=l[f++];return y=d[n].values(),e()}if((t=y.next()).done)return y=null,e();var r=t.value,i=r.target;return"inner-undirected"===g&&i.key===c.key&&(i=r.source),{done:!1,value:[c.key,i.key,c.attributes,i.attributes,r.key,r.attributes]}})):(o=(e=this)._nodes.values(),a=e.type,s="outer",new L(function e(){var u;if("outer"===s)return!0===(u=o.next()).done?u:(t=u.value,s="directed",e());if("directed"===s)return"undirected"===a?(s="undirected",e()):(r=t.out,n=Object.keys(t.out),i=0,s="inner-directed",e());if("undirected"===s){if("directed"===a)return s="outer",e();r=t.undirected,n=Object.keys(t.undirected),i=0,s="inner-undirected"}if(i>=n.length)return s="inner-undirected"===s?"outer":"undirected",e();var c=n[i++],l=r[c],d=l.target;return"inner-undirected"===s&&d.key===t.key&&(d=l.source),{done:!1,value:[t.key,d.key,t.attributes,d.attributes,l.key,l.attributes]}}));var e,t,n,r,i,o,a,s,u,c,l,d,f,h,p,g,y},r.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):M(this._nodes.keys(),this._nodes.size)},r.forEachNode=function(e){if("function"!=typeof e)throw new P("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(t,n){e(n,t.attributes)})},r.forEachNodeUntil=function(e){if("function"!=typeof e)throw new P("Graph.forEachNode: expecting a callback.");for(var t,n,r=this._nodes.values();!0!==(t=r.next())&&!e((n=t.value).key,n.attributes););},r.nodeEntries=function(){var e=this._nodes.values();return new L(function(){var t=e.next();if(t.done)return t;var n=t.value;return{value:[n.key,n.attributes],done:!1}})},r.exportNode=function(e){var t=this._nodes.get(e=""+e);if(!t)throw new C('Graph.exportNode: could not find the "'.concat(e,'" node in the graph.'));return Le(e,t)},r.exportEdge=function(e){var t=this._edges.get(e=""+e);if(!t)throw new C('Graph.exportEdge: could not find the "'.concat(e,'" edge in the graph.'));return Me(e,t)},r.export=function(){var e=new Array(this._nodes.size),t=0;this._nodes.forEach(function(n,r){e[t++]=Le(r,n)});var n=new Array(this._edges.size);return t=0,this._edges.forEach(function(e,r){n[t++]=Me(r,e)}),{attributes:this.getAttributes(),nodes:e,edges:n,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},r.importNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=De(e);if(n){if("not-object"===n)throw new P('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===n)throw new P("Graph.importNode: no key provided.");if("invalid-attributes"===n)throw new P("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var r=e.key,i=e.attributes,o=void 0===i?{}:i;return t?this.mergeNode(r,o):this.addNode(r,o),this},r.importEdge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Pe(e);if(n){if("not-object"===n)throw new P('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===n)throw new P("Graph.importEdge: missing souce.");if("no-target"===n)throw new P("Graph.importEdge: missing target.");if("invalid-attributes"===n)throw new P("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===n)throw new P("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var r=e.source,i=e.target,o=e.attributes,a=void 0===o?{}:o,s=e.undirected,u=void 0!==s&&s;return"key"in e?(t?u?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:u?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,e.key,r,i,a):(t?u?this.mergeUndirectedEdge:this.mergeDirectedEdge:u?this.addUndirectedEdge:this.addDirectedEdge).call(this,r,i,a),this},r.import=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l(e))return this.import(e.export(),i),this;if(!d(e))throw new P("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!d(e.attributes))throw new P("Graph.import: invalid attributes. Expecting a plain object.");i?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}if(e.nodes){if(r=e.nodes,!Array.isArray(r))throw new P("Graph.import: invalid nodes. Expecting an array.");for(t=0,n=r.length;t<n;t++)this.importNode(r[t],i)}if(e.edges){if(r=e.edges,!Array.isArray(r))throw new P("Graph.import: invalid edges. Expecting an array.");for(t=0,n=r.length;t<n;t++)this.importEdge(r[t],i)}return this},r.nullCopy=function(e){return new n(u({},this._options,e))},r.emptyCopy=function(e){var t=this.nullCopy(e);return this._nodes.forEach(function(e,n){var r=u({},e.attributes);e=new t.NodeDataClass(n,r),t._nodes.set(n,e)}),t},r.copy=function(){var e=new n(this._options);return e.import(this),e},r.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(e){return e.upgradeToMixed()}),this._options.type="mixed",p(this,"type",this._options.type),h(this,"NodeDataClass",B)),this},r.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,p(this,"multi",!0),(e=this)._nodes.forEach(function(t,n){if(t.out)for(var r in t.out){var i=new Set;i.add(t.out[r]),t.out[r]=i,e._nodes.get(r).in[n]=i}if(t.undirected)for(var o in t.undirected)if(!(o>n)){var a=new Set;a.add(t.undirected[o]),t.undirected[o]=a,e._nodes.get(o).undirected[n]=a}})),this;var e},r.clearIndex=function(){return this._nodes.forEach(function(e){void 0!==e.in&&(e.in={},e.out={}),void 0!==e.undirected&&(e.undirected={})}),this},r.toJSON=function(){return this.export()},r.toString=function(){return"[object Graph]"},r.inspect=function(){var e=this,t={};this._nodes.forEach(function(e,n){t[n]=e.attributes});var n={},r={};this._edges.forEach(function(t,i){var o=t.undirected?"--":"->",a="",s="(".concat(t.source.key,")").concat(o,"(").concat(t.target.key,")");t.generatedKey?e.multi&&(void 0===r[s]?r[s]=0:r[s]++,a+="".concat(r[s],". ")):a+="[".concat(i,"]: "),n[a+=s]=t.attributes});var i={};for(var o in this)this.hasOwnProperty(o)&&!Fe.has(o)&&"function"!=typeof this[o]&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=t,i.edges=n,h(i,"constructor",this.constructor),i},n}(m.exports.EventEmitter);"undefined"!=typeof Symbol&&(ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=ze.prototype.inspect),[{name:function(e){return"".concat(e,"Edge")},generateKey:!0},{name:function(e){return"".concat(e,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(e){return"".concat(e,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(e){return"".concat(e,"EdgeWithKey")}},{name:function(e){return"".concat(e,"DirectedEdgeWithKey")},type:"directed"},{name:function(e){return"".concat(e,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(e){["add","merge","update"].forEach(function(t){var n=e.name(t),r="add"===t?Ue:Ve;ze.prototype[n]=e.generateKey?function(i,o,a){return r(this,n,!0,"undirected"===(e.type||this.type),null,i,o,a,"update"===t)}:function(i,o,a,s){return r(this,n,!1,"undirected"===(e.type||this.type),i,o,a,s,"update"===t)}})}),"undefined"!=typeof Symbol&&(ze.prototype[Symbol.iterator]=ze.prototype.adjacency),$e=ze,q.forEach(function(e){var t=e.name,n=e.attacher;n($e,t("Edge"),"mixed"),n($e,t("DirectedEdge"),"directed"),n($e,t("UndirectedEdge"),"undirected")}),function(e){W.forEach(function(t){var n,r,i,o;i=(n=t).type,o=n.direction,e.prototype[r=n.name]=function(e,t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];if(!arguments.length)return ce(this,i);if(1===arguments.length){var n=this._nodes.get(e=""+e);if(void 0===n)throw new C("Graph.".concat(r,': could not find the "').concat(e,'" node in the graph.'));return he(this.multi,"mixed"===i?this.type:i,o,n)}if(2===arguments.length){t=""+t;var a=this._nodes.get(e=""+e);if(!a)throw new C("Graph.".concat(r,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C("Graph.".concat(r,':  could not find the "').concat(t,'" target node in the graph.'));return me(i,this.multi,o,a,t)}throw new P("Graph.".concat(r,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(e,t){var n=t.name,r=t.type,i=t.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(e,t,n){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return le(this,r,n=e);if(2===arguments.length){n=t;var a=this._nodes.get(e=""+e);if(void 0===a)throw new C("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));return pe(this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){t=""+t;var s=this._nodes.get(e=""+e);if(!s)throw new C("Graph.".concat(o,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C("Graph.".concat(o,':  could not find the "').concat(t,'" target node in the graph.'));return be(r,this.multi,i,s,t,n)}throw new P("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1)+"Until";e.prototype[o]=function(e,t,n){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return de(this,r,n=e);if(2===arguments.length){n=t;var a=this._nodes.get(e=""+e);if(void 0===a)throw new C("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));return ge(this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){t=""+t;var s=this._nodes.get(e=""+e);if(!s)throw new C("Graph.".concat(o,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C("Graph.".concat(o,':  could not find the "').concat(t,'" target node in the graph.'));return ve(r,this.multi,i,s,t,n)}throw new P("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(e,t),function(e,t){var n=t.type,r=t.direction,i=t.name.slice(0,-1)+"Entries";e.prototype[i]=function(e,t){if("mixed"!==n&&"mixed"!==this.type&&n!==this.type)return L.empty();if(!arguments.length)return fe(this,n);if(1===arguments.length){var o=this._nodes.get(e=""+e);if(!o)throw new C("Graph.".concat(i,': could not find the "').concat(e,'" node in the graph.'));return ye(n,r,o)}if(2===arguments.length){t=""+t;var a=this._nodes.get(e=""+e);if(!a)throw new C("Graph.".concat(i,':  could not find the "').concat(e,'" source node in the graph.'));if(!this._nodes.has(t))throw new C("Graph.".concat(i,':  could not find the "').concat(t,'" target node in the graph.'));return _e(n,r,a,t)}throw new P("Graph.".concat(i,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(e,t)})}(ze),function(e){we.forEach(function(t){var n,r,i,o;i=(n=t).type,o=n.direction,e.prototype[r=n.name]=function(e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];if(2===arguments.length){var t=""+arguments[0],n=""+arguments[1];if(!this._nodes.has(t))throw new C("Graph.".concat(r,': could not find the "').concat(t,'" node in the graph.'));if(!this._nodes.has(n))throw new C("Graph.".concat(r,': could not find the "').concat(n,'" node in the graph.'));return ke(this,i,o,t,n)}if(1===arguments.length){var a=this._nodes.get(e=""+e);if(void 0===a)throw new C("Graph.".concat(r,': could not find the "').concat(e,'" node in the graph.'));return Se("mixed"===i?this.type:i,o,a)}throw new P("Graph.".concat(r,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function(e,t){var n=t.name,r=t.type,i=t.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(e,t){if("mixed"===r||"mixed"===this.type||r===this.type){var n=this._nodes.get(e=""+e);if(void 0===n)throw new C("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));!function(e,t,n,r){if("mixed"!==e){if("undirected"===e)return je(n,n.undirected,r);if("string"==typeof t)return je(n,n[t],r)}var i=new Set;"undirected"!==e&&("out"!==t&&Ne(i,n,n.in,r),"in"!==t&&Ne(i,n,n.out,r)),"directed"!==e&&Ne(i,n,n.undirected,r)}("mixed"===r?this.type:r,i,n,t)}}}(e,t),function(e,t){var n=t.name,r=t.type,i=t.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1)+"Until";e.prototype[o]=function(e,t){if("mixed"===r||"mixed"===this.type||r===this.type){var n=this._nodes.get(e=""+e);if(void 0===n)throw new C("Graph.".concat(o,': could not find the "').concat(e,'" node in the graph.'));!function(e,t,n,r){if("mixed"!==e){if("undirected"===e)return Ee(n,n.undirected,r);if("string"==typeof t)return Ee(n,n[t],r)}var i=new Set;"undirected"!==e&&("out"!==t&&Te(i,n,n.in,r)||"in"!==t&&Te(i,n,n.out,r))||"directed"===e||Te(i,n,n.undirected,r)}("mixed"===r?this.type:r,i,n,t)}}}(e,t),function(e,t){var n=t.type,r=t.direction,i=t.name.slice(0,-1)+"Entries";e.prototype[i]=function(e){if("mixed"!==n&&"mixed"!==this.type&&n!==this.type)return L.empty();var t=this._nodes.get(e=""+e);if(void 0===t)throw new C("Graph.".concat(i,': could not find the "').concat(e,'" node in the graph.'));return function(e,t,n){if("mixed"!==e){if("undirected"===e)return Ie(n,n.undirected);if("string"==typeof t)return Ie(n,n[t])}var r=L.empty(),i=new Set;return"undirected"!==e&&("out"!==t&&(r=K(r,Ae(i,n,n.in))),"in"!==t&&(r=K(r,Ae(i,n,n.out)))),"directed"!==e&&(r=K(r,Ae(i,n,n.undirected))),r}("mixed"===n?this.type:n,r,t)}}(e,t)})}(ze);var qe=function(e){function n(t){var n=u({type:"directed"},t);if("multi"in n&&!1!==n.multi)throw new P("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==n.type)throw new P('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(ze),He=function(e){function n(t){var n=u({type:"undirected"},t);if("multi"in n&&!1!==n.multi)throw new P("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==n.type)throw new P('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(ze),Ke=function(e){function n(t){var n=u({multi:!0},t);if("multi"in n&&!0!==n.multi)throw new P("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return e.call(this,n)||this}return t(n,e),n}(ze),We=function(e){function n(t){var n=u({type:"directed",multi:!0},t);if("multi"in n&&!0!==n.multi)throw new P("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==n.type)throw new P('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(ze),Je=function(e){function n(t){var n=u({type:"undirected",multi:!0},t);if("multi"in n&&!0!==n.multi)throw new P("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==n.type)throw new P('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return e.call(this,n)||this}return t(n,e),n}(ze);function Qe(e){e.from=function(t,n){var r=u({},t.options,n),i=new e(r);return i.import(t),i}}return Qe(ze),Qe(qe),Qe(He),Qe(Ke),Qe(We),Qe(Je),ze.Graph=ze,ze.DirectedGraph=qe,ze.UndirectedGraph=He,ze.MultiGraph=Ke,ze.MultiDirectedGraph=We,ze.MultiUndirectedGraph=Je,ze.InvalidArgumentsGraphError=P,ze.NotFoundGraphError=C,ze.UsageGraphError=F,ze}()},23815:function(e,t,n){var r;e=n.nmd(e),(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,c=128,l=1/0,d=9007199254740991,f=NaN,h=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",y="[object Array]",m="[object Boolean]",b="[object Date]",v="[object Error]",_="[object Function]",w="[object GeneratorFunction]",x="[object Map]",S="[object Number]",j="[object Object]",N="[object Promise]",E="[object RegExp]",T="[object Set]",I="[object String]",A="[object Symbol]",k="[object WeakMap]",R="[object ArrayBuffer]",O="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",D="[object Int8Array]",P="[object Int16Array]",C="[object Int32Array]",F="[object Uint8Array]",B="[object Uint8ClampedArray]",G="[object Uint16Array]",U="[object Uint32Array]",V=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,K=RegExp(q.source),W=RegExp(H.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",je="a-z\\xdf-\\xf6\\xf8-\\xff",Ne="A-Z\\xc0-\\xd6\\xd8-\\xde",Ee="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="["+we+"]",Ae="["+Te+"]",ke="["+xe+"]",Re="\\d+",Oe="["+Se+"]",Le="["+je+"]",Me="[^"+we+Te+Re+Se+je+Ne+"]",De="\\ud83c[\\udffb-\\udfff]",Pe="[^"+we+"]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Ne+"]",Ge="(?:"+Le+"|"+Me+")",Ue="(?:"+Be+"|"+Me+")",Ve="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$e="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ze="(?:"+ke+"|"+De+")?",qe="["+Ee+"]?",He=qe+ze+"(?:\\u200d(?:"+[Pe,Ce,Fe].join("|")+")"+qe+ze+")*",Ke="(?:"+[Oe,Ce,Fe].join("|")+")"+He,We="(?:"+[Pe+ke+"?",ke,Ce,Fe,Ie].join("|")+")",Je=RegExp("['\u2019]","g"),Qe=RegExp(ke,"g"),Xe=RegExp(De+"(?="+De+")|"+We+He,"g"),Ye=RegExp([Be+"?"+Le+"+"+Ve+"(?="+[Ae,Be,"$"].join("|")+")",Ue+"+"+$e+"(?="+[Ae,Be+Ge,"$"].join("|")+")",Be+"?"+Ge+"+"+Ve,Be+"+"+$e,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Ke].join("|"),"g"),Ze=RegExp("[\\u200d"+we+xe+Ee+"]"),et=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,rt={};rt[L]=rt[M]=rt[D]=rt[P]=rt[C]=rt[F]=rt[B]=rt[G]=rt[U]=!0,rt[g]=rt[y]=rt[R]=rt[m]=rt[O]=rt[b]=rt[v]=rt[_]=rt[x]=rt[S]=rt[j]=rt[E]=rt[T]=rt[I]=rt[k]=!1;var it={};it[g]=it[y]=it[R]=it[O]=it[m]=it[b]=it[L]=it[M]=it[D]=it[P]=it[C]=it[x]=it[S]=it[j]=it[E]=it[T]=it[I]=it[A]=it[F]=it[B]=it[G]=it[U]=!0,it[v]=it[_]=it[k]=!1;var ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,st=parseInt,ut="object"==typeof global&&global&&global.Object===Object&&global,ct="object"==typeof self&&self&&self.Object===Object&&self,lt=ut||ct||Function("return this")(),dt=t&&!t.nodeType&&t,ft=dt&&e&&!e.nodeType&&e,ht=ft&&ft.exports===dt,pt=ht&&ut.process,gt=function(){try{return ft&&ft.require&&ft.require("util").types||pt&&pt.binding&&pt.binding("util")}catch(e){}}(),yt=gt&&gt.isArrayBuffer,mt=gt&&gt.isDate,bt=gt&&gt.isMap,vt=gt&&gt.isRegExp,_t=gt&&gt.isSet,wt=gt&&gt.isTypedArray;function xt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function It(e,t){return!(null==e||!e.length)&&Ft(e,t,0)>-1}function At(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function kt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Rt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ot(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Lt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Dt=Vt("length");function Pt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ct(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ft(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ct(e,Gt,n)}function Bt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Gt(e){return e!=e}function Ut(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:f}function Vt(e){return function(t){return null==t?i:t[e]}}function $t(e){return function(t){return null==e?i:e[t]}}function zt(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function qt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Ht(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return e&&e.slice(0,dn(e)+1).replace(re,"")}function Wt(e){return function(t){return e(t)}}function Jt(e,t){return kt(t,function(t){return e[t]})}function Qt(e,t){return e.has(t)}function Xt(e,t){for(var n=-1,r=e.length;++n<r&&Ft(t,e[n],0)>-1;);return n}function Yt(e,t){for(var n=e.length;n--&&Ft(t,e[n],0)>-1;);return n}function Zt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var en=$t({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),tn=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(e){return"\\"+ot[e]}function rn(e){return Ze.test(e)}function on(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function an(e,t){return function(n){return e(t(n))}}function sn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];(a===t||a===s)&&(e[n]=s,o[i++]=n)}return o}function un(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function cn(e){return rn(e)?function(e){for(var t=Xe.lastIndex=0;Xe.test(e);)++t;return t}(e):Dt(e)}function ln(e){return rn(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var fn=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){var n,r=(t=null==t?lt:hn.defaults(lt.Object(),t,hn.pick(lt,tt))).Array,ie=t.Date,we=t.Error,xe=t.Function,Se=t.Math,je=t.Object,Ne=t.RegExp,Ee=t.String,Te=t.TypeError,Ie=r.prototype,Ae=je.prototype,ke=t["__core-js_shared__"],Re=xe.prototype.toString,Oe=Ae.hasOwnProperty,Le=0,Me=(n=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",De=Ae.toString,Pe=Re.call(je),Ce=lt._,Fe=Ne("^"+Re.call(Oe).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=ht?t.Buffer:i,Ge=t.Symbol,Ue=t.Uint8Array,Ve=Be?Be.allocUnsafe:i,$e=an(je.getPrototypeOf,je),ze=je.create,qe=Ae.propertyIsEnumerable,He=Ie.splice,Ke=Ge?Ge.isConcatSpreadable:i,We=Ge?Ge.iterator:i,Xe=Ge?Ge.toStringTag:i,Ze=function(){try{var e=so(je,"defineProperty");return e({},"",{}),e}catch(Lo){}}(),ot=t.clearTimeout!==lt.clearTimeout&&t.clearTimeout,ut=ie&&ie.now!==lt.Date.now&&ie.now,ct=t.setTimeout!==lt.setTimeout&&t.setTimeout,dt=Se.ceil,ft=Se.floor,pt=je.getOwnPropertySymbols,gt=Be?Be.isBuffer:i,Dt=t.isFinite,$t=Ie.join,pn=an(je.keys,je),gn=Se.max,yn=Se.min,mn=ie.now,bn=t.parseInt,vn=Se.random,_n=Ie.reverse,wn=so(t,"DataView"),xn=so(t,"Map"),Sn=so(t,"Promise"),jn=so(t,"Set"),Nn=so(t,"WeakMap"),En=so(je,"create"),Tn=Nn&&new Nn,In={},An=Co(wn),kn=Co(xn),Rn=Co(Sn),On=Co(jn),Ln=Co(Nn),Mn=Ge?Ge.prototype:i,Dn=Mn?Mn.valueOf:i,Pn=Mn?Mn.toString:i;function Cn(e){if(es(e)&&!$a(e)&&!(e instanceof Un)){if(e instanceof Gn)return e;if(Oe.call(e,"__wrapped__"))return Fo(e)}return new Gn(e)}var Fn=function(){function e(){}return function(t){if(!Za(t))return{};if(ze)return ze(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Bn(){}function Gn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new zn;++t<n;)this.add(e[t])}function Hn(e){var t=this.__data__=new $n(e);this.size=t.size}function Kn(e,t){var n=$a(e),r=!n&&Va(e),i=!n&&!r&&Ka(e),o=!n&&!r&&!i&&us(e),a=n||r||i||o,s=a?Ht(e.length,Ee):[],u=s.length;for(var c in e)(t||Oe.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||go(c,u)))&&s.push(c);return s}function Wn(e){var t=e.length;return t?e[zr(0,t-1)]:i}function Jn(e,t){return Oo(Ni(e),ir(t,0,e.length))}function Qn(e){return Oo(Ni(e))}function Xn(e,t,n){(n!==i&&!Ba(e[t],n)||n===i&&!(t in e))&&nr(e,t,n)}function Yn(e,t,n){var r=e[t];(!Oe.call(e,t)||!Ba(r,n)||n===i&&!(t in e))&&nr(e,t,n)}function Zn(e,t){for(var n=e.length;n--;)if(Ba(e[n][0],t))return n;return-1}function er(e,t,n,r){return cr(e,function(e,i,o){t(r,e,n(e),o)}),r}function tr(e,t){return e&&Ei(t,ks(t),e)}function nr(e,t,n){"__proto__"==t&&Ze?Ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function rr(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:Ns(e,t[n]);return a}function ir(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function or(e,t,n,r,o,a){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!Za(e))return e;var d=$a(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return Ni(e,s)}else{var f=lo(e),h=f==_||f==w;if(Ka(e))return vi(e,u);if(f==j||f==g||h&&!o){if(s=c||h?{}:ho(e),!u)return c?function(e,t){return Ei(e,co(e),t)}(e,function(e,t){return e&&Ei(t,Rs(t),e)}(s,e)):function(e,t){return Ei(e,uo(e),t)}(e,tr(s,e))}else{if(!it[f])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case R:return _i(e);case m:case b:return new r(+e);case O:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case M:case D:case P:case C:case F:case B:case G:case U:return wi(e,n);case x:return new r;case S:case I:return new r(e);case E:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new r;case A:return function(e){return Dn?je(Dn.call(e)):{}}(e)}}(e,f,u)}}a||(a=new Hn);var p=a.get(e);if(p)return p;a.set(e,s),os(e)?e.forEach(function(r){s.add(or(r,t,n,r,e,a))}):ts(e)&&e.forEach(function(r,i){s.set(i,or(r,t,n,i,e,a))});var y=d?i:(l?c?eo:Zi:c?Rs:ks)(e);return jt(y||e,function(r,i){y&&(r=e[i=r]),Yn(s,i,or(r,t,n,i,e,a))}),s}function ar(e,t,n){var r=n.length;if(null==e)return!r;for(e=je(e);r--;){var o=n[r],a=e[o];if(a===i&&!(o in e)||!(0,t[o])(a))return!1}return!0}function sr(e,t,n){if("function"!=typeof e)throw new Te(o);return Io(function(){e.apply(i,n)},t)}function ur(e,t,n,r){var i=-1,o=It,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=kt(t,Wt(n))),r?(o=At,a=!1):t.length>=200&&(o=Qt,a=!1,t=new qn(t));e:for(;++i<s;){var l=e[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;u.push(l)}else o(t,d,r)||u.push(l)}return u}Cn.templateSettings={escape:J,evaluate:Q,interpolate:X,variable:"",imports:{_:Cn}},(Cn.prototype=Bn.prototype).constructor=Cn,(Gn.prototype=Fn(Bn.prototype)).constructor=Gn,(Un.prototype=Fn(Bn.prototype)).constructor=Un,Vn.prototype.clear=function(){this.__data__=En?En(null):{},this.size=0},Vn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vn.prototype.get=function(e){var t=this.__data__;if(En){var n=t[e];return n===a?i:n}return Oe.call(t,e)?t[e]:i},Vn.prototype.has=function(e){var t=this.__data__;return En?t[e]!==i:Oe.call(t,e)},Vn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=En&&t===i?a:t,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=Zn(t,e);return!(n<0||(n==t.length-1?t.pop():He.call(t,n,1),--this.size,0))},$n.prototype.get=function(e){var t=this.__data__,n=Zn(t,e);return n<0?i:t[n][1]},$n.prototype.has=function(e){return Zn(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,r=Zn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(xn||$n),string:new Vn}},zn.prototype.delete=function(e){var t=oo(this,e).delete(e);return this.size-=t?1:0,t},zn.prototype.get=function(e){return oo(this,e).get(e)},zn.prototype.has=function(e){return oo(this,e).has(e)},zn.prototype.set=function(e,t){var n=oo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(e){return this.__data__.set(e,a),this},qn.prototype.has=function(e){return this.__data__.has(e)},Hn.prototype.clear=function(){this.__data__=new $n,this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Hn.prototype.get=function(e){return this.__data__.get(e)},Hn.prototype.has=function(e){return this.__data__.has(e)},Hn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var r=n.__data__;if(!xn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zn(r)}return n.set(e,t),this.size=n.size,this};var cr=Ai(mr),lr=Ai(br,!0);function dr(e,t){var n=!0;return cr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function fr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(u===i?s==s&&!ss(s):n(s,u)))var u=s,c=a}return c}function hr(e,t){var n=[];return cr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function pr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=po),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?pr(s,t-1,n,r,i):Rt(i,s):r||(i[i.length]=s)}return i}var gr=ki(),yr=ki(!0);function mr(e,t){return e&&gr(e,t,ks)}function br(e,t){return e&&yr(e,t,ks)}function vr(e,t){return Tt(t,function(t){return Qa(e[t])})}function _r(e,t){for(var n=0,r=(t=gi(t,e)).length;null!=e&&n<r;)e=e[Po(t[n++])];return n&&n==r?e:i}function wr(e,t,n){var r=t(e);return $a(e)?r:Rt(r,n(e))}function xr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Xe&&Xe in je(e)?function(e){var t=Oe.call(e,Xe),n=e[Xe];try{e[Xe]=i;var r=!0}catch(a){}var o=De.call(e);return r&&(t?e[Xe]=n:delete e[Xe]),o}(e):function(e){return De.call(e)}(e)}function Sr(e,t){return e>t}function jr(e,t){return null!=e&&Oe.call(e,t)}function Nr(e,t){return null!=e&&t in je(e)}function Er(e,t,n){for(var o=n?At:It,a=e[0].length,s=e.length,u=s,c=r(s),l=1/0,d=[];u--;){var f=e[u];u&&t&&(f=kt(f,Wt(t))),l=yn(f.length,l),c[u]=!n&&(t||a>=120&&f.length>=120)?new qn(u&&f):i}f=e[0];var h=-1,p=c[0];e:for(;++h<a&&d.length<l;){var g=f[h],y=t?t(g):g;if(g=n||0!==g?g:0,!(p?Qt(p,y):o(d,y,n))){for(u=s;--u;){var m=c[u];if(!(m?Qt(m,y):o(e[u],y,n)))continue e}p&&p.push(y),d.push(g)}}return d}function Tr(e,t,n){var r=null==(e=jo(e,t=gi(t,e)))?e:e[Po(Jo(t))];return null==r?i:xt(r,e,n)}function Ir(e){return es(e)&&xr(e)==g}function Ar(e,t,n,r,o){return e===t||(null==e||null==t||!es(e)&&!es(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=$a(e),u=$a(t),c=s?y:lo(e),l=u?y:lo(t),d=(c=c==g?j:c)==j,f=(l=l==g?j:l)==j,h=c==l;if(h&&Ka(e)){if(!Ka(t))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new Hn),s||us(e)?Xi(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new Ue(e),new Ue(t)));case m:case b:case S:return Ba(+e,+t);case v:return e.name==t.name&&e.message==t.message;case E:case I:return e==t+"";case x:var s=on;case T:if(s||(s=un),e.size!=t.size&&!(1&r))return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=Xi(s(e),s(t),r,i,o,a);return a.delete(e),c;case A:if(Dn)return Dn.call(e)==Dn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(1&n)){var p=d&&Oe.call(e,"__wrapped__"),_=f&&Oe.call(t,"__wrapped__");if(p||_){var w=p?e.value():e,N=_?t.value():t;return a||(a=new Hn),o(w,N,n,r,a)}}return!!h&&(a||(a=new Hn),function(e,t,n,r,o,a){var s=1&n,u=Zi(e),c=u.length;if(c!=Zi(t).length&&!s)return!1;for(var l=c;l--;){var d=u[l];if(!(s?d in t:Oe.call(t,d)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var p=!0;a.set(e,t),a.set(t,e);for(var g=s;++l<c;){var y=e[d=u[l]],m=t[d];if(r)var b=s?r(m,y,d,t,e,a):r(y,m,d,e,t,a);if(!(b===i?y===m||o(y,m,n,r,a):b)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,o,a))}(e,t,n,r,Ar,o))}function kr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=je(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=n[o])[0],l=e[c],d=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var f=new Hn;if(r)var h=r(l,d,c,e,t,f);if(!(h===i?Ar(d,l,3,r,f):h))return!1}}return!0}function Rr(e){return!(!Za(e)||function(e){return!!Me&&Me in e}(e))&&(Qa(e)?Fe:ge).test(Co(e))}function Or(e){return"function"==typeof e?e:null==e?nu:"object"==typeof e?$a(e)?Cr(e[0],e[1]):Pr(e):du(e)}function Lr(e){if(!_o(e))return pn(e);var t=[];for(var n in je(e))Oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Mr(e,t){return e<t}function Dr(e,t){var n=-1,i=qa(e)?r(e.length):[];return cr(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Pr(e){var t=ao(e);return 1==t.length&&t[0][2]?xo(t[0][0],t[0][1]):function(n){return n===e||kr(n,e,t)}}function Cr(e,t){return mo(e)&&wo(t)?xo(Po(e),t):function(n){var r=Ns(n,e);return r===i&&r===t?Es(n,e):Ar(t,r,3)}}function Fr(e,t,n,r,o){e!==t&&gr(t,function(a,s){if(o||(o=new Hn),Za(a))!function(e,t,n,r,o,a,s){var u=Eo(e,n),c=Eo(t,n),l=s.get(c);if(l)Xn(e,n,l);else{var d=a?a(u,c,n+"",e,t,s):i,f=d===i;if(f){var h=$a(c),p=!h&&Ka(c),g=!h&&!p&&us(c);d=c,h||p||g?$a(u)?d=u:Ha(u)?d=Ni(u):p?(f=!1,d=vi(c,!0)):g?(f=!1,d=wi(c,!0)):d=[]:rs(c)||Va(c)?(d=u,Va(u)?d=ys(u):(!Za(u)||Qa(u))&&(d=ho(c))):f=!1}f&&(s.set(c,d),o(d,c,r,a,s),s.delete(c)),Xn(e,n,d)}}(e,t,s,n,Fr,r,o);else{var u=r?r(Eo(e,s),a,s+"",e,t,o):i;u===i&&(u=a),Xn(e,s,u)}},Rs)}function Br(e,t){var n=e.length;if(n)return go(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?kt(t,function(e){return $a(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e}):[nu];var r=-1;return t=kt(t,Wt(io())),function(e,t){var r=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=xi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)});r--;)e[r]=e[r].value;return e}(Dr(e,function(e,n,i){return{criteria:kt(t,function(t){return t(e)}),index:++r,value:e}}))}function Ur(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=_r(e,a);n(s,a)&&Jr(o,gi(a,e),s)}return o}function Vr(e,t,n,r){var i=r?Bt:Ft,o=-1,a=t.length,s=e;for(e===t&&(t=Ni(t)),n&&(s=kt(e,Wt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&He.call(s,u,1),He.call(e,u,1);return e}function $r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;go(i)?He.call(e,i,1):si(e,i)}}return e}function zr(e,t){return e+ft(vn()*(t-e+1))}function qr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Hr(e,t){return Ao(So(e,t,nu),e+"")}function Kr(e){return Wn(Bs(e))}function Wr(e,t){var n=Bs(e);return Oo(n,ir(t,0,n.length))}function Jr(e,t,n,r){if(!Za(e))return e;for(var o=-1,a=(t=gi(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var c=Po(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var d=u[c];(l=r?r(d,c,u):i)===i&&(l=Za(d)?d:go(t[o+1])?[]:{})}Yn(u,c,l),u=u[c]}return e}var Qr=Tn?function(e,t){return Tn.set(e,t),e}:nu,Xr=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:Zs(t),writable:!0})}:nu;function Yr(e){return Oo(Bs(e))}function Zr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ei(e,t){var n;return cr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ti(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ss(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ni(e,t,nu,n)}function ni(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,c=ss(t),l=t===i;o<a;){var d=ft((o+a)/2),f=n(e[d]),h=f!==i,p=null===f,g=f==f,y=ss(f);if(s)var m=r||g;else m=l?g&&(r||h):u?g&&h&&(r||!p):c?g&&h&&!p&&(r||!y):!p&&!y&&(r?f<=t:f<t);m?o=d+1:a=d}return yn(a,4294967294)}function ri(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ba(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ii(e){return"number"==typeof e?e:ss(e)?f:+e}function oi(e){if("string"==typeof e)return e;if($a(e))return kt(e,oi)+"";if(ss(e))return Pn?Pn.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}function ai(e,t,n){var r=-1,i=It,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=At;else if(o>=200){var c=t?null:qi(e);if(c)return un(c);a=!1,i=Qt,u=new qn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),s.push(l)}else i(u,d,n)||(u!==s&&u.push(d),s.push(l))}return s}function si(e,t){return null==(e=jo(e,t=gi(t,e)))||delete e[Po(Jo(t))]}function ui(e,t,n,r){return Jr(e,t,n(_r(e,t)),r)}function ci(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Zr(e,r?0:o,r?o+1:i):Zr(e,r?o+1:0,r?i:o)}function li(e,t){var n=e;return n instanceof Un&&(n=n.value()),Ot(t,function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))},n)}function di(e,t,n){var i=e.length;if(i<2)return i?ai(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=ur(a[o]||s,e[u],t,n));return ai(pr(a,1),t,n)}function fi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;)n(s,e[r],r<a?t[r]:i);return s}function hi(e){return Ha(e)?e:[]}function pi(e){return"function"==typeof e?e:nu}function gi(e,t){return $a(e)?e:mo(e,t)?[e]:Do(ms(e))}var yi=Hr;function mi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:Zr(e,t,n)}var bi=ot||function(e){return lt.clearTimeout(e)};function vi(e,t){if(t)return e.slice();var n=e.length,r=Ve?Ve(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function wi(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function xi(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=ss(e),s=t!==i,u=null===t,c=t==t,l=ss(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Si(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,c=t.length,l=gn(a-s,0),d=r(c+l),f=!i;++u<c;)d[u]=t[u];for(;++o<s;)(f||o<a)&&(d[n[o]]=e[o]);for(;l--;)d[u++]=e[o++];return d}function ji(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,c=-1,l=t.length,d=gn(a-u,0),f=r(d+l),h=!i;++o<d;)f[o]=e[o];for(var p=o;++c<l;)f[p+c]=t[c];for(;++s<u;)(h||o<a)&&(f[p+n[s]]=e[o++]);return f}function Ni(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ei(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),o?nr(n,u,c):Yn(n,u,c)}return n}function Ti(e,t){return function(n,r){var i=$a(n)?St:er,o=t?t():{};return i(n,e,io(r,2),o)}}function Ii(e){return Hr(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&yo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=je(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}function Ai(e,t){return function(n,r){if(null==n)return n;if(!qa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=je(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ki(e){return function(t,n,r){for(var i=-1,o=je(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Ri(e){return function(t){var n=rn(t=ms(t))?ln(t):i,r=n?n[0]:t.charAt(0),o=n?mi(n,1).join(""):t.slice(1);return r[e]()+o}}function Oi(e){return function(t){return Ot(Qs(Vs(t).replace(Je,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Fn(e.prototype),r=e.apply(n,t);return Za(r)?r:n}}function Mi(e){return function(t,n,r){var o=je(t);if(!qa(t)){var a=io(n,3);t=ks(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Di(e){return Yi(function(t){var n=t.length,r=n,a=Gn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Te(o);if(a&&!u&&"wrapper"==no(s))var u=new Gn([],!0)}for(r=u?r:n;++r<n;){var c=no(s=t[r]),l="wrapper"==c?to(s):i;u=l&&bo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[no(l[0])].apply(u,l[3]):1==s.length&&bo(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&$a(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Pi(e,t,n,o,a,s,u,l,d,f){var h=t&c,p=1&t,g=2&t,y=24&t,m=512&t,b=g?i:Li(e);return function i(){for(var c=arguments.length,v=r(c),_=c;_--;)v[_]=arguments[_];if(y)var w=ro(i),x=Zt(v,w);if(o&&(v=Si(v,o,a,y)),s&&(v=ji(v,s,u,y)),c-=x,y&&c<f){var S=sn(v,w);return $i(e,t,Pi,i.placeholder,n,v,S,l,d,f-c)}var j=p?n:this,N=g?j[e]:e;return c=v.length,l?v=No(v,l):m&&c>1&&v.reverse(),h&&d<c&&(v.length=d),this&&this!==lt&&this instanceof i&&(N=b||Li(N)),N.apply(j,v)}}function Ci(e,t){return function(n,r){return function(e,t,n,r){return mr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function Fi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=oi(n),r=oi(r)):(n=ii(n),r=ii(r)),o=e(n,r)}return o}}function Bi(e){return Yi(function(t){return t=kt(t,Wt(io())),Hr(function(n){var r=this;return e(t,function(e){return xt(e,r,n)})})})}function Gi(e,t){var n=(t=t===i?" ":oi(t)).length;if(n<2)return n?qr(t,e):t;var r=qr(t,dt(e/cn(t)));return rn(t)?mi(ln(r),0,e).join(""):r.slice(0,e)}function Ui(e){return function(t,n,o){return o&&"number"!=typeof o&&yo(t,n,o)&&(n=o=i),t=fs(t),n===i?(n=t,t=0):n=fs(n),function(e,t,n,i){for(var o=-1,a=gn(dt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:fs(o),e)}}function Vi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function $i(e,t,n,r,o,a,s,c,l,d){var f=8&t;t|=f?u:64,4&(t&=~(f?64:u))||(t&=-4);var h=[e,t,o,f?a:i,f?s:i,f?i:a,f?i:s,c,l,d],p=n.apply(i,h);return bo(e)&&To(p,h),p.placeholder=r,ko(p,e,t)}function zi(e){var t=Se[e];return function(e,n){if(e=gs(e),(n=null==n?0:yn(hs(n),292))&&Dt(e)){var r=(ms(e)+"e").split("e");return+((r=(ms(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var qi=jn&&1/un(new jn([,-0]))[1]==l?function(e){return new jn(e)}:su;function Hi(e){return function(t){var n=lo(t);return n==x?on(t):n==T?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return kt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ki(e,t,n,a,l,d,f,h){var p=2&t;if(!p&&"function"!=typeof e)throw new Te(o);var g=a?a.length:0;if(g||(t&=-97,a=l=i),f=f===i?f:gn(hs(f),0),h=h===i?h:hs(h),g-=l?l.length:0,64&t){var y=a,m=l;a=l=i}var b=p?i:to(e),v=[e,t,n,a,l,y,m,d,f,h];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r;if(!(i<131||(r==c&&8==n||r==c&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n)))return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var o=t[3];if(o){var a=e[3];e[3]=a?Si(a,o,t[4]):o,e[4]=a?sn(e[3],s):t[4]}(o=t[5])&&(e[5]=(a=e[5])?ji(a,o,t[6]):o,e[6]=a?sn(e[5],s):t[6]),(o=t[7])&&(e[7]=o),r&c&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(v,b),e=v[0],t=v[1],n=v[2],a=v[3],l=v[4],!(h=v[9]=v[9]===i?p?0:e.length:gn(v[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||16==t?function(e,t,n){var o=Li(e);return function a(){for(var s=arguments.length,u=r(s),c=s,l=ro(a);c--;)u[c]=arguments[c];var d=s<3&&u[0]!==l&&u[s-1]!==l?[]:sn(u,l);return(s-=d.length)<n?$i(e,t,Pi,a.placeholder,i,u,d,i,i,n-s):xt(this&&this!==lt&&this instanceof a?o:e,this,u)}}(e,t,h):t!=u&&33!=t||l.length?Pi.apply(i,v):function(e,t,n,i){var o=1&t,a=Li(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,d=r(l+u),f=this&&this!==lt&&this instanceof t?a:e;++c<l;)d[c]=i[c];for(;u--;)d[c++]=arguments[++s];return xt(f,o?n:this,d)}}(e,t,n,a);else var _=function(e,t,n){var r=1&t,i=Li(e);return function t(){return(this&&this!==lt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ko((b?Qr:To)(_,v),e,t)}function Wi(e,t,n,r){return e===i||Ba(e,Ae[n])&&!Oe.call(r,n)?t:e}function Ji(e,t,n,r,o,a){return Za(e)&&Za(t)&&(a.set(t,e),Fr(e,t,i,Ji,a),a.delete(t)),e}function Qi(e){return rs(e)?i:e}function Xi(e,t,n,r,o,a){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),d=a.get(t);if(l&&d)return l==t&&d==e;var f=-1,h=!0,p=2&n?new qn:i;for(a.set(e,t),a.set(t,e);++f<u;){var g=e[f],y=t[f];if(r)var m=s?r(y,g,f,t,e,a):r(g,y,f,e,t,a);if(m!==i){if(m)continue;h=!1;break}if(p){if(!Mt(t,function(e,t){if(!Qt(p,t)&&(g===e||o(g,e,n,r,a)))return p.push(t)})){h=!1;break}}else if(g!==y&&!o(g,y,n,r,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Yi(e){return Ao(So(e,i,zo),e+"")}function Zi(e){return wr(e,ks,uo)}function eo(e){return wr(e,Rs,co)}var to=Tn?function(e){return Tn.get(e)}:su;function no(e){for(var t=e.name+"",n=In[t],r=Oe.call(In,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function ro(e){return(Oe.call(Cn,"placeholder")?Cn:e).placeholder}function io(){var e=Cn.iteratee||ru;return e=e===ru?Or:e,arguments.length?e(arguments[0],arguments[1]):e}function oo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ao(e){for(var t=ks(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,wo(i)]}return t}function so(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Rr(n)?n:i}var uo=pt?function(e){return null==e?[]:(e=je(e),Tt(pt(e),function(t){return qe.call(e,t)}))}:pu,co=pt?function(e){for(var t=[];e;)Rt(t,uo(e)),e=$e(e);return t}:pu,lo=xr;function fo(e,t,n){for(var r=-1,i=(t=gi(t,e)).length,o=!1;++r<i;){var a=Po(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ya(i)&&go(a,i)&&($a(e)||Va(e))}function ho(e){return"function"!=typeof e.constructor||_o(e)?{}:Fn($e(e))}function po(e){return $a(e)||Va(e)||!!(Ke&&e&&e[Ke])}function go(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&me.test(e))&&e>-1&&e%1==0&&e<t}function yo(e,t,n){if(!Za(n))return!1;var r=typeof t;return!!("number"==r?qa(n)&&go(t,n.length):"string"==r&&t in n)&&Ba(n[t],e)}function mo(e,t){if($a(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ss(e))||Z.test(e)||!Y.test(e)||null!=t&&e in je(t)}function bo(e){var t=no(e),n=Cn[t];if("function"!=typeof n||!(t in Un.prototype))return!1;if(e===n)return!0;var r=to(n);return!!r&&e===r[0]}(wn&&lo(new wn(new ArrayBuffer(1)))!=O||xn&&lo(new xn)!=x||Sn&&lo(Sn.resolve())!=N||jn&&lo(new jn)!=T||Nn&&lo(new Nn)!=k)&&(lo=function(e){var t=xr(e),n=t==j?e.constructor:i,r=n?Co(n):"";if(r)switch(r){case An:return O;case kn:return x;case Rn:return N;case On:return T;case Ln:return k}return t});var vo=ke?Qa:gu;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function wo(e){return e==e&&!Za(e)}function xo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in je(n))}}function So(e,t,n){return t=gn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=gn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),xt(e,this,u)}}function jo(e,t){return t.length<2?e:_r(e,Zr(t,0,-1))}function No(e,t){for(var n=e.length,r=yn(t.length,n),o=Ni(e);r--;){var a=t[r];e[r]=go(a,n)?o[a]:i}return e}function Eo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var To=Ro(Qr),Io=ct||function(e,t){return lt.setTimeout(e,t)},Ao=Ro(Xr);function ko(e,t,n){var r=t+"";return Ao(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return jt(p,function(n){var r="_."+n[0];t&n[1]&&!It(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(se):[]}(r),n)))}function Ro(e){var t=0,n=0;return function(){var r=mn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Oo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=zr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Lo,Mo,Do=(Lo=La(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,function(e,n,r,i){t.push(r?i.replace(le,"$1"):n||e)}),t},function(e){return 500===Mo.size&&Mo.clear(),e}),Mo=Lo.cache,Lo);function Po(e){if("string"==typeof e||ss(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function Co(e){if(null!=e){try{return Re.call(e)}catch(Lo){}try{return e+""}catch(Lo){}}return""}function Fo(e){if(e instanceof Un)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=Ni(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=Hr(function(e,t){return Ha(e)?ur(e,pr(t,1,Ha,!0)):[]}),Go=Hr(function(e,t){var n=Jo(t);return Ha(n)&&(n=i),Ha(e)?ur(e,pr(t,1,Ha,!0),io(n,2)):[]}),Uo=Hr(function(e,t){var n=Jo(t);return Ha(n)&&(n=i),Ha(e)?ur(e,pr(t,1,Ha,!0),i,n):[]});function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:hs(n);return i<0&&(i=gn(r+i,0)),Ct(e,io(t,3),i)}function $o(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=hs(n),o=n<0?gn(r+o,0):yn(o,r-1)),Ct(e,io(t,3),o,!0)}function zo(e){return null!=e&&e.length?pr(e,1):[]}function qo(e){return e&&e.length?e[0]:i}var Ho=Hr(function(e){var t=kt(e,hi);return t.length&&t[0]===e[0]?Er(t):[]}),Ko=Hr(function(e){var t=Jo(e),n=kt(e,hi);return t===Jo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Er(n,io(t,2)):[]}),Wo=Hr(function(e){var t=Jo(e),n=kt(e,hi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Er(n,i,t):[]});function Jo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Qo=Hr(Xo);function Xo(e,t){return e&&e.length&&t&&t.length?Vr(e,t):e}var Yo=Yi(function(e,t){var n=null==e?0:e.length,r=rr(e,t);return $r(e,kt(t,function(e){return go(e,n)?+e:e}).sort(xi)),r});function Zo(e){return null==e?e:_n.call(e)}var ea=Hr(function(e){return ai(pr(e,1,Ha,!0))}),ta=Hr(function(e){var t=Jo(e);return Ha(t)&&(t=i),ai(pr(e,1,Ha,!0),io(t,2))}),na=Hr(function(e){var t=Jo(e);return t="function"==typeof t?t:i,ai(pr(e,1,Ha,!0),i,t)});function ra(e){if(!e||!e.length)return[];var t=0;return e=Tt(e,function(e){if(Ha(e))return t=gn(e.length,t),!0}),Ht(t,function(t){return kt(e,Vt(t))})}function ia(e,t){if(!e||!e.length)return[];var n=ra(e);return null==t?n:kt(n,function(e){return xt(t,i,e)})}var oa=Hr(function(e,t){return Ha(e)?ur(e,t):[]}),aa=Hr(function(e){return di(Tt(e,Ha))}),sa=Hr(function(e){var t=Jo(e);return Ha(t)&&(t=i),di(Tt(e,Ha),io(t,2))}),ua=Hr(function(e){var t=Jo(e);return t="function"==typeof t?t:i,di(Tt(e,Ha),i,t)}),ca=Hr(ra),la=Hr(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ia(e,n)});function da(e){var t=Cn(e);return t.__chain__=!0,t}function fa(e,t){return t(e)}var ha=Yi(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return rr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Un&&go(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fa,args:[o],thisArg:i}),new Gn(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)}),pa=Ti(function(e,t,n){Oe.call(e,n)?++e[n]:nr(e,n,1)}),ga=Mi(Vo),ya=Mi($o);function ma(e,t){return($a(e)?jt:cr)(e,io(t,3))}function ba(e,t){return($a(e)?Nt:lr)(e,io(t,3))}var va=Ti(function(e,t,n){Oe.call(e,n)?e[n].push(t):nr(e,n,[t])}),_a=Hr(function(e,t,n){var i=-1,o="function"==typeof t,a=qa(e)?r(e.length):[];return cr(e,function(e){a[++i]=o?xt(t,e,n):Tr(e,t,n)}),a}),wa=Ti(function(e,t,n){nr(e,n,t)});function xa(e,t){return($a(e)?kt:Dr)(e,io(t,3))}var Sa=Ti(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ja=Hr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&yo(e,t[0],t[1])?t=[]:n>2&&yo(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,pr(t,1),[])}),Na=ut||function(){return lt.Date.now()};function Ea(e,t,n){return t=n?i:t,Ki(e,c,i,i,i,i,t=e&&null==t?e.length:t)}function Ta(e,t){var n;if("function"!=typeof t)throw new Te(o);return e=hs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ia=Hr(function(e,t,n){var r=1;if(n.length){var i=sn(n,ro(Ia));r|=u}return Ki(e,r,t,n,i)}),Aa=Hr(function(e,t,n){var r=3;if(n.length){var i=sn(n,ro(Aa));r|=u}return Ki(t,r,e,n,i)});function ka(e,t,n){var r,a,s,u,c,l,d=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new Te(o);function g(t){var n=r,o=a;return r=a=i,d=t,u=e.apply(o,n)}function y(e){return d=e,c=Io(b,t),f?g(e):u}function m(e){var n=e-l;return l===i||n>=t||n<0||h&&e-d>=s}function b(){var e=Na();if(m(e))return v(e);c=Io(b,function(e){var n=t-(e-l);return h?yn(n,s-(e-d)):n}(e))}function v(e){return c=i,p&&r?g(e):(r=a=i,u)}function _(){var e=Na(),n=m(e);if(r=arguments,a=this,l=e,n){if(c===i)return y(l);if(h)return bi(c),c=Io(b,t),g(l)}return c===i&&(c=Io(b,t)),u}return t=gs(t)||0,Za(n)&&(f=!!n.leading,s=(h="maxWait"in n)?gn(gs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&bi(c),d=0,r=l=a=c=i},_.flush=function(){return c===i?u:v(Na())},_}var Ra=Hr(function(e,t){return sr(e,1,t)}),Oa=Hr(function(e,t,n){return sr(e,gs(t)||0,n)});function La(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(La.Cache||zn),n}function Ma(e){if("function"!=typeof e)throw new Te(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}La.Cache=zn;var Da=yi(function(e,t){var n=(t=1==t.length&&$a(t[0])?kt(t[0],Wt(io())):kt(pr(t,1),Wt(io()))).length;return Hr(function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return xt(e,this,r)})}),Pa=Hr(function(e,t){var n=sn(t,ro(Pa));return Ki(e,u,i,t,n)}),Ca=Hr(function(e,t){var n=sn(t,ro(Ca));return Ki(e,64,i,t,n)}),Fa=Yi(function(e,t){return Ki(e,256,i,i,i,t)});function Ba(e,t){return e===t||e!=e&&t!=t}var Ga=Vi(Sr),Ua=Vi(function(e,t){return e>=t}),Va=Ir(function(){return arguments}())?Ir:function(e){return es(e)&&Oe.call(e,"callee")&&!qe.call(e,"callee")},$a=r.isArray,za=yt?Wt(yt):function(e){return es(e)&&xr(e)==R};function qa(e){return null!=e&&Ya(e.length)&&!Qa(e)}function Ha(e){return es(e)&&qa(e)}var Ka=gt||gu,Wa=mt?Wt(mt):function(e){return es(e)&&xr(e)==b};function Ja(e){if(!es(e))return!1;var t=xr(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!rs(e)}function Qa(e){if(!Za(e))return!1;var t=xr(e);return t==_||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xa(e){return"number"==typeof e&&e==hs(e)}function Ya(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function Za(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function es(e){return null!=e&&"object"==typeof e}var ts=bt?Wt(bt):function(e){return es(e)&&lo(e)==x};function ns(e){return"number"==typeof e||es(e)&&xr(e)==S}function rs(e){if(!es(e)||xr(e)!=j)return!1;var t=$e(e);if(null===t)return!0;var n=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Pe}var is=vt?Wt(vt):function(e){return es(e)&&xr(e)==E},os=_t?Wt(_t):function(e){return es(e)&&lo(e)==T};function as(e){return"string"==typeof e||!$a(e)&&es(e)&&xr(e)==I}function ss(e){return"symbol"==typeof e||es(e)&&xr(e)==A}var us=wt?Wt(wt):function(e){return es(e)&&Ya(e.length)&&!!rt[xr(e)]},cs=Vi(Mr),ls=Vi(function(e,t){return e<=t});function ds(e){if(!e)return[];if(qa(e))return as(e)?ln(e):Ni(e);if(We&&e[We])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[We]());var t=lo(e);return(t==x?on:t==T?un:Bs)(e)}function fs(e){return e?(e=gs(e))===l||e===-l?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function hs(e){var t=fs(e),n=t%1;return t==t?n?t-n:t:0}function ps(e){return e?ir(hs(e),0,h):0}function gs(e){if("number"==typeof e)return e;if(ss(e))return f;if(Za(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Za(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=pe.test(e);return n||ye.test(e)?st(e.slice(2),n?2:8):he.test(e)?f:+e}function ys(e){return Ei(e,Rs(e))}function ms(e){return null==e?"":oi(e)}var bs=Ii(function(e,t){if(_o(t)||qa(t))Ei(t,ks(t),e);else for(var n in t)Oe.call(t,n)&&Yn(e,n,t[n])}),vs=Ii(function(e,t){Ei(t,Rs(t),e)}),_s=Ii(function(e,t,n,r){Ei(t,Rs(t),e,r)}),ws=Ii(function(e,t,n,r){Ei(t,ks(t),e,r)}),xs=Yi(rr),Ss=Hr(function(e,t){e=je(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&yo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Rs(a),u=-1,c=s.length;++u<c;){var l=s[u],d=e[l];(d===i||Ba(d,Ae[l])&&!Oe.call(e,l))&&(e[l]=a[l])}return e}),js=Hr(function(e){return e.push(i,Ji),xt(Ls,i,e)});function Ns(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function Es(e,t){return null!=e&&fo(e,t,Nr)}var Ts=Ci(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=n},Zs(nu)),Is=Ci(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),Oe.call(e,t)?e[t].push(n):e[t]=[n]},io),As=Hr(Tr);function ks(e){return qa(e)?Kn(e):Lr(e)}function Rs(e){return qa(e)?Kn(e,!0):function(e){if(!Za(e))return function(e){var t=[];if(null!=e)for(var n in je(e))t.push(n);return t}(e);var t=_o(e),n=[];for(var r in e)"constructor"==r&&(t||!Oe.call(e,r))||n.push(r);return n}(e)}var Os=Ii(function(e,t,n){Fr(e,t,n)}),Ls=Ii(function(e,t,n,r){Fr(e,t,n,r)}),Ms=Yi(function(e,t){var n={};if(null==e)return n;var r=!1;t=kt(t,function(t){return t=gi(t,e),r||(r=t.length>1),t}),Ei(e,eo(e),n),r&&(n=or(n,7,Qi));for(var i=t.length;i--;)si(n,t[i]);return n}),Ds=Yi(function(e,t){return null==e?{}:function(e,t){return Ur(e,t,function(t,n){return Es(e,n)})}(e,t)});function Ps(e,t){if(null==e)return{};var n=kt(eo(e),function(e){return[e]});return t=io(t),Ur(e,n,function(e,n){return t(e,n[0])})}var Cs=Hi(ks),Fs=Hi(Rs);function Bs(e){return null==e?[]:Jt(e,ks(e))}var Gs=Oi(function(e,t,n){return t=t.toLowerCase(),e+(n?Us(t):t)});function Us(e){return Js(ms(e).toLowerCase())}function Vs(e){return(e=ms(e))&&e.replace(be,en).replace(Qe,"")}var $s=Oi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),zs=Oi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),qs=Ri("toLowerCase"),Hs=Oi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ks=Oi(function(e,t,n){return e+(n?" ":"")+Js(t)}),Ws=Oi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Js=Ri("toUpperCase");function Qs(e,t,n){return e=ms(e),(t=n?i:t)===i?function(e){return et.test(e)}(e)?function(e){return e.match(Ye)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Xs=Hr(function(e,t){try{return xt(e,i,t)}catch(Mo){return Ja(Mo)?Mo:new we(Mo)}}),Ys=Yi(function(e,t){return jt(t,function(t){t=Po(t),nr(e,t,Ia(e[t],e))}),e});function Zs(e){return function(){return e}}var eu=Di(),tu=Di(!0);function nu(e){return e}function ru(e){return Or("function"==typeof e?e:or(e,1))}var iu=Hr(function(e,t){return function(n){return Tr(n,e,t)}}),ou=Hr(function(e,t){return function(n){return Tr(e,n,t)}});function au(e,t,n){var r=ks(t),i=vr(t,r);null==n&&(!Za(t)||!i.length&&r.length)&&(n=t,t=e,e=this,i=vr(t,ks(t)));var o=!(Za(n)&&"chain"in n&&!n.chain),a=Qa(e);return jt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ni(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})}),e}function su(){}var uu=Bi(kt),cu=Bi(Et),lu=Bi(Mt);function du(e){return mo(e)?Vt(Po(e)):function(e){return function(t){return _r(t,e)}}(e)}var fu=Ui(),hu=Ui(!0);function pu(){return[]}function gu(){return!1}var yu=Fi(function(e,t){return e+t},0),mu=zi("ceil"),bu=Fi(function(e,t){return e/t},1),vu=zi("floor"),_u=Fi(function(e,t){return e*t},1),wu=zi("round"),xu=Fi(function(e,t){return e-t},0);return Cn.after=function(e,t){if("function"!=typeof t)throw new Te(o);return e=hs(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=Ea,Cn.assign=bs,Cn.assignIn=vs,Cn.assignInWith=_s,Cn.assignWith=ws,Cn.at=xs,Cn.before=Ta,Cn.bind=Ia,Cn.bindAll=Ys,Cn.bindKey=Aa,Cn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return $a(e)?e:[e]},Cn.chain=da,Cn.chunk=function(e,t,n){t=(n?yo(e,t,n):t===i)?1:gn(hs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,u=r(dt(o/t));a<o;)u[s++]=Zr(e,a,a+=t);return u},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Rt($a(n)?Ni(n):[n],pr(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,n=io();return e=t?kt(e,function(e){if("function"!=typeof e[1])throw new Te(o);return[n(e[0]),e[1]]}):[],Hr(function(n){for(var r=-1;++r<t;){var i=e[r];if(xt(i[0],this,n))return xt(i[1],this,n)}})},Cn.conforms=function(e){return function(e){var t=ks(e);return function(n){return ar(n,e,t)}}(or(e,1))},Cn.constant=Zs,Cn.countBy=pa,Cn.create=function(e,t){var n=Fn(e);return null==t?n:tr(n,t)},Cn.curry=function e(t,n,r){var o=Ki(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Cn.curryRight=function e(t,n,r){var o=Ki(t,16,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Cn.debounce=ka,Cn.defaults=Ss,Cn.defaultsDeep=js,Cn.defer=Ra,Cn.delay=Oa,Cn.difference=Bo,Cn.differenceBy=Go,Cn.differenceWith=Uo,Cn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Zr(e,(t=n||t===i?1:hs(t))<0?0:t,r):[]},Cn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Zr(e,0,(t=r-(t=n||t===i?1:hs(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?ci(e,io(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?ci(e,io(t,3),!0):[]},Cn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&yo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=hs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:hs(r))<0&&(r+=o),r=n>r?0:ps(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Cn.filter=function(e,t){return($a(e)?Tt:hr)(e,io(t,3))},Cn.flatMap=function(e,t){return pr(xa(e,t),1)},Cn.flatMapDeep=function(e,t){return pr(xa(e,t),l)},Cn.flatMapDepth=function(e,t,n){return n=n===i?1:hs(n),pr(xa(e,t),n)},Cn.flatten=zo,Cn.flattenDeep=function(e){return null!=e&&e.length?pr(e,l):[]},Cn.flattenDepth=function(e,t){return null!=e&&e.length?pr(e,t=t===i?1:hs(t)):[]},Cn.flip=function(e){return Ki(e,512)},Cn.flow=eu,Cn.flowRight=tu,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Cn.functions=function(e){return null==e?[]:vr(e,ks(e))},Cn.functionsIn=function(e){return null==e?[]:vr(e,Rs(e))},Cn.groupBy=va,Cn.initial=function(e){return null!=e&&e.length?Zr(e,0,-1):[]},Cn.intersection=Ho,Cn.intersectionBy=Ko,Cn.intersectionWith=Wo,Cn.invert=Ts,Cn.invertBy=Is,Cn.invokeMap=_a,Cn.iteratee=ru,Cn.keyBy=wa,Cn.keys=ks,Cn.keysIn=Rs,Cn.map=xa,Cn.mapKeys=function(e,t){var n={};return t=io(t,3),mr(e,function(e,r,i){nr(n,t(e,r,i),e)}),n},Cn.mapValues=function(e,t){var n={};return t=io(t,3),mr(e,function(e,r,i){nr(n,r,t(e,r,i))}),n},Cn.matches=function(e){return Pr(or(e,1))},Cn.matchesProperty=function(e,t){return Cr(e,or(t,1))},Cn.memoize=La,Cn.merge=Os,Cn.mergeWith=Ls,Cn.method=iu,Cn.methodOf=ou,Cn.mixin=au,Cn.negate=Ma,Cn.nthArg=function(e){return e=hs(e),Hr(function(t){return Br(t,e)})},Cn.omit=Ms,Cn.omitBy=function(e,t){return Ps(e,Ma(io(t)))},Cn.once=function(e){return Ta(2,e)},Cn.orderBy=function(e,t,n,r){return null==e?[]:($a(t)||(t=null==t?[]:[t]),$a(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Cn.over=uu,Cn.overArgs=Da,Cn.overEvery=cu,Cn.overSome=lu,Cn.partial=Pa,Cn.partialRight=Ca,Cn.partition=Sa,Cn.pick=Ds,Cn.pickBy=Ps,Cn.property=du,Cn.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},Cn.pull=Qo,Cn.pullAll=Xo,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Vr(e,t,io(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Vr(e,t,i,n):e},Cn.pullAt=Yo,Cn.range=fu,Cn.rangeRight=hu,Cn.rearg=Fa,Cn.reject=function(e,t){return($a(e)?Tt:hr)(e,Ma(io(t,3)))},Cn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=io(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return $r(e,i),n},Cn.rest=function(e,t){if("function"!=typeof e)throw new Te(o);return Hr(e,t=t===i?t:hs(t))},Cn.reverse=Zo,Cn.sampleSize=function(e,t,n){return t=(n?yo(e,t,n):t===i)?1:hs(t),($a(e)?Jn:Wr)(e,t)},Cn.set=function(e,t,n){return null==e?e:Jr(e,t,n)},Cn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Jr(e,t,n,r)},Cn.shuffle=function(e){return($a(e)?Qn:Yr)(e)},Cn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&yo(e,t,n)?(t=0,n=r):(t=null==t?0:hs(t),n=n===i?r:hs(n)),Zr(e,t,n)):[]},Cn.sortBy=ja,Cn.sortedUniq=function(e){return e&&e.length?ri(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?ri(e,io(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&yo(e,t,n)&&(t=n=i),(n=n===i?h:n>>>0)?(e=ms(e))&&("string"==typeof t||null!=t&&!is(t))&&!(t=oi(t))&&rn(e)?mi(ln(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new Te(o);return t=null==t?0:gn(hs(t),0),Hr(function(n){var r=n[t],i=mi(n,0,t);return r&&Rt(i,r),xt(e,this,i)})},Cn.tail=function(e){var t=null==e?0:e.length;return t?Zr(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Zr(e,0,(t=n||t===i?1:hs(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Zr(e,(t=r-(t=n||t===i?1:hs(t)))<0?0:t,r):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?ci(e,io(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?ci(e,io(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Te(o);return Za(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ka(e,t,{leading:r,maxWait:t,trailing:i})},Cn.thru=fa,Cn.toArray=ds,Cn.toPairs=Cs,Cn.toPairsIn=Fs,Cn.toPath=function(e){return $a(e)?kt(e,Po):ss(e)?[e]:Ni(Do(ms(e)))},Cn.toPlainObject=ys,Cn.transform=function(e,t,n){var r=$a(e),i=r||Ka(e)||us(e);if(t=io(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Za(e)&&Qa(o)?Fn($e(e)):{}}return(i?jt:mr)(e,function(e,r,i){return t(n,e,r,i)}),n},Cn.unary=function(e){return Ea(e,1)},Cn.union=ea,Cn.unionBy=ta,Cn.unionWith=na,Cn.uniq=function(e){return e&&e.length?ai(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?ai(e,io(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ai(e,i,t):[]},Cn.unset=function(e,t){return null==e||si(e,t)},Cn.unzip=ra,Cn.unzipWith=ia,Cn.update=function(e,t,n){return null==e?e:ui(e,t,pi(n))},Cn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ui(e,t,pi(n),r)},Cn.values=Bs,Cn.valuesIn=function(e){return null==e?[]:Jt(e,Rs(e))},Cn.without=oa,Cn.words=Qs,Cn.wrap=function(e,t){return Pa(pi(t),e)},Cn.xor=aa,Cn.xorBy=sa,Cn.xorWith=ua,Cn.zip=ca,Cn.zipObject=function(e,t){return fi(e||[],t||[],Yn)},Cn.zipObjectDeep=function(e,t){return fi(e||[],t||[],Jr)},Cn.zipWith=la,Cn.entries=Cs,Cn.entriesIn=Fs,Cn.extend=vs,Cn.extendWith=_s,au(Cn,Cn),Cn.add=yu,Cn.attempt=Xs,Cn.camelCase=Gs,Cn.capitalize=Us,Cn.ceil=mu,Cn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))==n?n:0),t!==i&&(t=(t=gs(t))==t?t:0),ir(gs(e),t,n)},Cn.clone=function(e){return or(e,4)},Cn.cloneDeep=function(e){return or(e,5)},Cn.cloneDeepWith=function(e,t){return or(e,5,t="function"==typeof t?t:i)},Cn.cloneWith=function(e,t){return or(e,4,t="function"==typeof t?t:i)},Cn.conformsTo=function(e,t){return null==t||ar(e,t,ks(t))},Cn.deburr=Vs,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=bu,Cn.endsWith=function(e,t,n){e=ms(e),t=oi(t);var r=e.length,o=n=n===i?r:ir(hs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Cn.eq=Ba,Cn.escape=function(e){return(e=ms(e))&&W.test(e)?e.replace(H,tn):e},Cn.escapeRegExp=function(e){return(e=ms(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Cn.every=function(e,t,n){var r=$a(e)?Et:dr;return n&&yo(e,t,n)&&(t=i),r(e,io(t,3))},Cn.find=ga,Cn.findIndex=Vo,Cn.findKey=function(e,t){return Pt(e,io(t,3),mr)},Cn.findLast=ya,Cn.findLastIndex=$o,Cn.findLastKey=function(e,t){return Pt(e,io(t,3),br)},Cn.floor=vu,Cn.forEach=ma,Cn.forEachRight=ba,Cn.forIn=function(e,t){return null==e?e:gr(e,io(t,3),Rs)},Cn.forInRight=function(e,t){return null==e?e:yr(e,io(t,3),Rs)},Cn.forOwn=function(e,t){return e&&mr(e,io(t,3))},Cn.forOwnRight=function(e,t){return e&&br(e,io(t,3))},Cn.get=Ns,Cn.gt=Ga,Cn.gte=Ua,Cn.has=function(e,t){return null!=e&&fo(e,t,jr)},Cn.hasIn=Es,Cn.head=qo,Cn.identity=nu,Cn.includes=function(e,t,n,r){e=qa(e)?e:Bs(e),n=n&&!r?hs(n):0;var i=e.length;return n<0&&(n=gn(i+n,0)),as(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ft(e,t,n)>-1},Cn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:hs(n);return i<0&&(i=gn(r+i,0)),Ft(e,t,i)},Cn.inRange=function(e,t,n){return t=fs(t),n===i?(n=t,t=0):n=fs(n),function(e,t,n){return e>=yn(t,n)&&e<gn(t,n)}(e=gs(e),t,n)},Cn.invoke=As,Cn.isArguments=Va,Cn.isArray=$a,Cn.isArrayBuffer=za,Cn.isArrayLike=qa,Cn.isArrayLikeObject=Ha,Cn.isBoolean=function(e){return!0===e||!1===e||es(e)&&xr(e)==m},Cn.isBuffer=Ka,Cn.isDate=Wa,Cn.isElement=function(e){return es(e)&&1===e.nodeType&&!rs(e)},Cn.isEmpty=function(e){if(null==e)return!0;if(qa(e)&&($a(e)||"string"==typeof e||"function"==typeof e.splice||Ka(e)||us(e)||Va(e)))return!e.length;var t=lo(e);if(t==x||t==T)return!e.size;if(_o(e))return!Lr(e).length;for(var n in e)if(Oe.call(e,n))return!1;return!0},Cn.isEqual=function(e,t){return Ar(e,t)},Cn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Ar(e,t,i,n):!!r},Cn.isError=Ja,Cn.isFinite=function(e){return"number"==typeof e&&Dt(e)},Cn.isFunction=Qa,Cn.isInteger=Xa,Cn.isLength=Ya,Cn.isMap=ts,Cn.isMatch=function(e,t){return e===t||kr(e,t,ao(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,kr(e,t,ao(t),n)},Cn.isNaN=function(e){return ns(e)&&e!=+e},Cn.isNative=function(e){if(vo(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=ns,Cn.isObject=Za,Cn.isObjectLike=es,Cn.isPlainObject=rs,Cn.isRegExp=is,Cn.isSafeInteger=function(e){return Xa(e)&&e>=-d&&e<=d},Cn.isSet=os,Cn.isString=as,Cn.isSymbol=ss,Cn.isTypedArray=us,Cn.isUndefined=function(e){return e===i},Cn.isWeakMap=function(e){return es(e)&&lo(e)==k},Cn.isWeakSet=function(e){return es(e)&&"[object WeakSet]"==xr(e)},Cn.join=function(e,t){return null==e?"":$t.call(e,t)},Cn.kebabCase=$s,Cn.last=Jo,Cn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=hs(n))<0?gn(r+o,0):yn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Ct(e,Gt,o,!0)},Cn.lowerCase=zs,Cn.lowerFirst=qs,Cn.lt=cs,Cn.lte=ls,Cn.max=function(e){return e&&e.length?fr(e,nu,Sr):i},Cn.maxBy=function(e,t){return e&&e.length?fr(e,io(t,2),Sr):i},Cn.mean=function(e){return Ut(e,nu)},Cn.meanBy=function(e,t){return Ut(e,io(t,2))},Cn.min=function(e){return e&&e.length?fr(e,nu,Mr):i},Cn.minBy=function(e,t){return e&&e.length?fr(e,io(t,2),Mr):i},Cn.stubArray=pu,Cn.stubFalse=gu,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=_u,Cn.nth=function(e,t){return e&&e.length?Br(e,hs(t)):i},Cn.noConflict=function(){return lt._===this&&(lt._=Ce),this},Cn.noop=su,Cn.now=Na,Cn.pad=function(e,t,n){e=ms(e);var r=(t=hs(t))?cn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(ft(i),n)+e+Gi(dt(i),n)},Cn.padEnd=function(e,t,n){e=ms(e);var r=(t=hs(t))?cn(e):0;return t&&r<t?e+Gi(t-r,n):e},Cn.padStart=function(e,t,n){e=ms(e);var r=(t=hs(t))?cn(e):0;return t&&r<t?Gi(t-r,n)+e:e},Cn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(ms(e).replace(re,""),t||0)},Cn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&yo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fs(e),t===i?(t=e,e=0):t=fs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=vn();return yn(e+o*(t-e+at("1e-"+((o+"").length-1))),t)}return zr(e,t)},Cn.reduce=function(e,t,n){var r=$a(e)?Ot:zt,i=arguments.length<3;return r(e,io(t,4),n,i,cr)},Cn.reduceRight=function(e,t,n){var r=$a(e)?Lt:zt,i=arguments.length<3;return r(e,io(t,4),n,i,lr)},Cn.repeat=function(e,t,n){return t=(n?yo(e,t,n):t===i)?1:hs(t),qr(ms(e),t)},Cn.replace=function(){var e=arguments,t=ms(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var r=-1,o=(t=gi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Po(t[r])];a===i&&(r=o,a=n),e=Qa(a)?a.call(e):a}return e},Cn.round=wu,Cn.runInContext=e,Cn.sample=function(e){return($a(e)?Wn:Kr)(e)},Cn.size=function(e){if(null==e)return 0;if(qa(e))return as(e)?cn(e):e.length;var t=lo(e);return t==x||t==T?e.size:Lr(e).length},Cn.snakeCase=Hs,Cn.some=function(e,t,n){var r=$a(e)?Mt:ei;return n&&yo(e,t,n)&&(t=i),r(e,io(t,3))},Cn.sortedIndex=function(e,t){return ti(e,t)},Cn.sortedIndexBy=function(e,t,n){return ni(e,t,io(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ti(e,t);if(r<n&&Ba(e[r],t))return r}return-1},Cn.sortedLastIndex=function(e,t){return ti(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return ni(e,t,io(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ti(e,t,!0)-1;if(Ba(e[n],t))return n}return-1},Cn.startCase=Ks,Cn.startsWith=function(e,t,n){return e=ms(e),n=null==n?0:ir(hs(n),0,e.length),t=oi(t),e.slice(n,n+t.length)==t},Cn.subtract=xu,Cn.sum=function(e){return e&&e.length?qt(e,nu):0},Cn.sumBy=function(e,t){return e&&e.length?qt(e,io(t,2)):0},Cn.template=function(e,t,n){var r=Cn.templateSettings;n&&yo(e,t,n)&&(t=i),e=ms(e),t=_s({},t,r,Wi);var o,a,s=_s({},t.imports,r.imports,Wi),u=ks(s),c=Jt(s,u),l=0,d=t.interpolate||ve,f="__p += '",h=Ne((t.escape||ve).source+"|"+d.source+"|"+(d===X?de:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),p="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(h,function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(l,u).replace(_e,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),f+="';\n";var g=Oe.call(t,"variable")&&t.variable;if(g){if(ce.test(g))throw new we("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(V,""):f).replace($,"$1").replace(z,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y=Xs(function(){return xe(u,p+"return "+f).apply(i,c)});if(y.source=f,Ja(y))throw y;return y},Cn.times=function(e,t){if((e=hs(e))<1||e>d)return[];var n=h,r=yn(e,h);t=io(t),e-=h;for(var i=Ht(r,t);++n<e;)t(n);return i},Cn.toFinite=fs,Cn.toInteger=hs,Cn.toLength=ps,Cn.toLower=function(e){return ms(e).toLowerCase()},Cn.toNumber=gs,Cn.toSafeInteger=function(e){return e?ir(hs(e),-d,d):0===e?e:0},Cn.toString=ms,Cn.toUpper=function(e){return ms(e).toUpperCase()},Cn.trim=function(e,t,n){if((e=ms(e))&&(n||t===i))return Kt(e);if(!e||!(t=oi(t)))return e;var r=ln(e),o=ln(t);return mi(r,Xt(r,o),Yt(r,o)+1).join("")},Cn.trimEnd=function(e,t,n){if((e=ms(e))&&(n||t===i))return e.slice(0,dn(e)+1);if(!e||!(t=oi(t)))return e;var r=ln(e);return mi(r,0,Yt(r,ln(t))+1).join("")},Cn.trimStart=function(e,t,n){if((e=ms(e))&&(n||t===i))return e.replace(re,"");if(!e||!(t=oi(t)))return e;var r=ln(e);return mi(r,Xt(r,ln(t))).join("")},Cn.truncate=function(e,t){var n=30,r="...";if(Za(t)){var o="separator"in t?t.separator:o;n="length"in t?hs(t.length):n,r="omission"in t?oi(t.omission):r}var a=(e=ms(e)).length;if(rn(e)){var s=ln(e);a=s.length}if(n>=a)return e;var u=n-cn(r);if(u<1)return r;var c=s?mi(s,0,u).join(""):e.slice(0,u);if(o===i)return c+r;if(s&&(u+=c.length-u),is(o)){if(e.slice(u).search(o)){var l,d=c;for(o.global||(o=Ne(o.source,ms(fe.exec(o))+"g")),o.lastIndex=0;l=o.exec(d);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(e.indexOf(oi(o),u)!=u){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+r},Cn.unescape=function(e){return(e=ms(e))&&K.test(e)?e.replace(q,fn):e},Cn.uniqueId=function(e){var t=++Le;return ms(e)+t},Cn.upperCase=Ws,Cn.upperFirst=Js,Cn.each=ma,Cn.eachRight=ba,Cn.first=qo,au(Cn,function(){var e={};return mr(Cn,function(t,n){Oe.call(Cn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Cn.VERSION="4.17.21",jt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Cn[e].placeholder=Cn}),jt(["drop","take"],function(e,t){Un.prototype[e]=function(n){n=n===i?1:gn(hs(n),0);var r=this.__filtered__&&!t?new Un(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,h),type:e+(r.__dir__<0?"Right":"")}),r},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),jt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:io(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),jt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}}),jt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}}),Un.prototype.compact=function(){return this.filter(nu)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=Hr(function(e,t){return"function"==typeof e?new Un(this):this.map(function(n){return Tr(n,e,t)})}),Un.prototype.reject=function(e){return this.filter(Ma(io(e)))},Un.prototype.slice=function(e,t){e=hs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Un(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=hs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(h)},mr(Un.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Cn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);!o||(Cn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Un,c=s[0],l=u||$a(t),d=function(e){var t=o.apply(Cn,Rt([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,g=u&&!h;if(!a&&l){t=g?t:new Un(this);var y=e.apply(t,s);return y.__actions__.push({func:fa,args:[d],thisArg:i}),new Gn(y,f)}return p&&g?e.apply(this,s):(y=this.thru(d),p?r?y.value()[0]:y.value():y)})}),jt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply($a(i)?i:[],e)}return this[n](function(n){return t.apply($a(n)?n:[],e)})}}),mr(Un.prototype,function(e,t){var n=Cn[t];if(n){var r=n.name+"";Oe.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}}),In[Pi(i,2).name]=[{name:"wrapper",func:i}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=Ni(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ni(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ni(this.__views__),e},Un.prototype.reverse=function(){if(this.__filtered__){var e=new Un(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=$a(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=gn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,h=yn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return li(e,this.__actions__);var p=[];e:for(;u--&&f<h;){for(var g=-1,y=e[c+=t];++g<d;){var m=l[g],b=m.type,v=(0,m.iteratee)(y);if(2==b)y=v;else if(!v){if(1==b)continue e;break e}}p[f++]=y}return p},Cn.prototype.at=ha,Cn.prototype.chain=function(){return da(this)},Cn.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},Cn.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var r=Fo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var t=e;return this.__actions__.length&&(t=new Un(this)),(t=t.reverse()).__actions__.push({func:fa,args:[Zo],thisArg:i}),new Gn(t,this.__chain__)}return this.thru(Zo)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return li(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,We&&(Cn.prototype[We]=function(){return this}),Cn}();lt._=hn,(r=(function(){return hn}).call(t,n,t,e))!==i&&(e.exports=r)}).call(this)},29369:function(e,t,n){var r=n(56284),i=n(67830);function o(){this.clear()}o.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},o.prototype.enqueue=function(e){return this.items.push(e),++this.size},o.prototype.dequeue=function(){if(this.size){var e=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,e}},o.prototype.peek=function(){if(this.size)return this.items[this.offset]},o.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)e.call(t,this.items[n],r,this)},o.prototype.toArray=function(){return this.items.slice(this.offset)},o.prototype.values=function(){var e=this.items,t=this.offset;return new r(function(){if(t>=e.length)return{done:!0};var n=e[t];return t++,{value:n,done:!1}})},o.prototype.entries=function(){var e=this.items,t=this.offset,n=0;return new r(function(){if(t>=e.length)return{done:!0};var r=e[t];return t++,{value:[n++,r],done:!1}})},"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.toString=function(){return this.toArray().join(",")},o.prototype.toJSON=function(){return this.toArray()},o.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:o,enumerable:!1}),e},"undefined"!=typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(e){var t=new o;return i(e,function(e){t.enqueue(e)}),t},o.of=function(){return o.from(arguments)},e.exports=o},67830:function(e){var t="undefined"!=typeof ArrayBuffer,n="undefined"!=typeof Symbol;function r(e,r){var i,o,a,s,u;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof r)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||t&&ArrayBuffer.isView(e)||"string"==typeof e||"[object Arguments]"===e.toString())for(a=0,s=e.length;a<s;a++)r(e[a],a);else if("function"!=typeof e.forEach)if(n&&Symbol.iterator in e&&"function"!=typeof e.next&&(e=e[Symbol.iterator]()),"function"!=typeof e.next)for(o in e)e.hasOwnProperty(o)&&r(e[o],o);else for(i=e,a=0;!0!==(u=i.next()).done;)r(u.value,a),a++;else e.forEach(r)}r.forEachWithNullKeys=function(e,r){var i,o,a,s,u;if(!e)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if("function"!=typeof r)throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(e)||t&&ArrayBuffer.isView(e)||"string"==typeof e||"[object Arguments]"===e.toString())for(a=0,s=e.length;a<s;a++)r(e[a],null);else if(e instanceof Set)e.forEach(function(e){r(e,null)});else if("function"!=typeof e.forEach)if(n&&Symbol.iterator in e&&"function"!=typeof e.next&&(e=e[Symbol.iterator]()),"function"!=typeof e.next)for(o in e)e.hasOwnProperty(o)&&r(e[o],o);else for(i=e,a=0;!0!==(u=i.next()).done;)r(u.value,null),a++;else e.forEach(r)},e.exports=r},56284:function(e){function t(e){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:e}),this.done=!1}t.prototype.next=function(){if(this.done)return{done:!0};var e=this._next();return e.done&&(this.done=!0),e},"undefined"!=typeof Symbol&&(t.prototype[Symbol.iterator]=function(){return this}),t.of=function(){var e=arguments,n=e.length,r=0;return new t(function(){return r>=n?{done:!0}:{done:!1,value:e[r++]}})},t.empty=function(){var e=new t(null);return e.done=!0,e},t.is=function(e){return e instanceof t||"object"==typeof e&&null!==e&&"function"==typeof e.next},e.exports=t},86991:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(14180),t),i(n(75103),t),i(n(48965),t),i(n(32595),t),i(n(82417),t),i(n(92451),t),i(n(17735),t)},14180:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0,t.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},75103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;const r=n(14180),i=n(48965),o=n(32595),a=n(82417),s=n(92451),u=n(17735);let c=0;t.DataFactory=class{constructor(e){this.blankNodeCounter=0,this.blankNodePrefix=(e=e||{}).blankNodePrefix||`df_${c++}_`}namedNode(e){return new a.NamedNode(e)}blankNode(e){return new r.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new o.Literal(e,t)}variable(e){return new u.Variable(e)}defaultGraph(){return i.DefaultGraph.INSTANCE}quad(e,t,n,r){return new s.Quad(e,t,n,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(o.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},48965:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}t.DefaultGraph=n,n.INSTANCE=new n},32595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;const r=n(82417);class i{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=i.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=i.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}t.Literal=i,i.RDF_LANGUAGE_STRING=new r.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.XSD_STRING=new r.NamedNode("http://www.w3.org/2001/XMLSchema#string")},82417:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0,t.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}},92451:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0,t.Quad=class{constructor(e,t,n,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=n,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}},17735:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0,t.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}},31609:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedJavaScriptPrimitives=t.getSupportedRdfDatatypes=t.getTermRaw=t.toRdf=t.fromRdf=void 0;const o=n(86991),a=n(9938),s=n(66060);i(n(9938),t),i(n(88871),t),i(n(66060),t);const u=new o.DataFactory,c=new s.Translator;function l(e,t){return c.fromRdf(e,t)}c.registerHandler(new a.TypeHandlerString,a.TypeHandlerString.TYPES.map(e=>u.namedNode(e)),["string"]),c.registerHandler(new a.TypeHandlerBoolean,[a.TypeHandlerBoolean.TYPE].map(e=>u.namedNode(e)),["boolean"]),c.registerHandler(new a.TypeHandlerNumberDouble,a.TypeHandlerNumberDouble.TYPES.map(e=>u.namedNode(e)),["number"]),c.registerHandler(new a.TypeHandlerNumberInteger,a.TypeHandlerNumberInteger.TYPES.map(e=>u.namedNode(e)),["number"]),c.registerHandler(new a.TypeHandlerDate,a.TypeHandlerDate.TYPES.map(e=>u.namedNode(e)),["object"]),t.fromRdf=l,t.toRdf=function(e,t){return t&&"namedNode"in t&&(t={dataFactory:t}),(t=t||{})&&!t.dataFactory&&(t.dataFactory=u),c.toRdf(e,t)},t.getTermRaw=function(e,t){return"Literal"===e.termType?l(e,t):e.value},t.getSupportedRdfDatatypes=function(){return c.getSupportedRdfDatatypes()},t.getSupportedJavaScriptPrimitives=function(){return c.getSupportedJavaScriptPrimitives()}},88871:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},66060:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translator=void 0,t.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(e){throw new Error(`Invalid RDF ${e.datatype.value} value: '${e.value}'`)}registerHandler(e,t,n){for(const r of t)this.supportedRdfDatatypes.push(r),this.fromRdfHandlers[r.value]=e;for(const r of n){let t=this.toRdfHandlers[r];t||(this.toRdfHandlers[r]=t=[]),t.push(e)}}fromRdf(e,t){const n=this.fromRdfHandlers[e.datatype.value];return n?n.fromRdf(e,t):e.value}toRdf(e,t){const n=this.toRdfHandlers[typeof e];if(n)for(const r of n){const n=r.toRdf(e,t);if(n)return n}throw new Error(`Invalid JavaScript value: '${e}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},80727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHandlerBoolean=void 0;const r=n(66060);class i{fromRdf(e,t){switch(e.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return t&&r.Translator.incorrectRdfDataType(e),!1}toRdf(e,{datatype:t,dataFactory:n}){return n.literal(e?"true":"false",t||n.namedNode(i.TYPE))}}t.TypeHandlerBoolean=i,i.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},52525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHandlerDate=void 0;const r=n(66060);class i{fromRdf(e,t){switch(t&&!e.value.match(i.VALIDATORS[e.datatype.value.substr(33,e.datatype.value.length)])&&r.Translator.incorrectRdfDataType(e),e.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(e.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const t=e.value.split("-");return new Date(0,parseInt(t[0],10)-1,parseInt(t[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(e.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(e.value+"-01");default:return new Date(e.value)}}toRdf(e,{datatype:t,dataFactory:n}){if(t=t||n.namedNode(i.TYPES[0]),!(e instanceof Date))return null;const r=e;let o;switch(t.value){case"http://www.w3.org/2001/XMLSchema#gDay":o=String(r.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":o=r.getUTCMonth()+1+"-"+r.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":o=String(r.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":o=r.getUTCFullYear()+"-"+(r.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":o=r.toISOString().replace(/T.*$/,"");break;default:o=r.toISOString()}return n.literal(o,t)}}t.TypeHandlerDate=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],i.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},38554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHandlerNumberDouble=void 0;const r=n(66060);class i{fromRdf(e,t){const n=parseFloat(e.value);return t&&isNaN(n)&&r.Translator.incorrectRdfDataType(e),n}toRdf(e,{datatype:t,dataFactory:n}){return t=t||n.namedNode(i.TYPES[0]),isNaN(e)?n.literal("NaN",t):isFinite(e)?e%1==0?null:n.literal(e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t):n.literal(e>0?"INF":"-INF",t)}}t.TypeHandlerNumberDouble=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},37750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHandlerNumberInteger=void 0;const r=n(66060);class i{fromRdf(e,t){const n=parseInt(e.value,10);return t&&(isNaN(n)||e.value.indexOf(".")>=0)&&r.Translator.incorrectRdfDataType(e),n}toRdf(e,{datatype:t,dataFactory:n}){return n.literal(String(e),t||n.namedNode(e<=i.MAX_INT&&e>=i.MIN_INT?i.TYPES[0]:i.TYPES[1]))}}t.TypeHandlerNumberInteger=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],i.MAX_INT=2147483647,i.MIN_INT=-2147483648},14608:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHandlerString=void 0;class n{fromRdf(e){return e.value}toRdf(e,{datatype:t,dataFactory:n}){return n.literal(e,t)}}t.TypeHandlerString=n,n.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},9938:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(80727),t),i(n(52525),t),i(n(38554),t),i(n(37750),t),i(n(14608),t)},91052:function(e){function t(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,u,"next",e)}function u(e){t(a,i,o,s,u,"throw",e)}s(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";function e(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})}function t(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}let r;function i(){return r||(r=function(e,n){const r=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise(t=>{const n=()=>indexedDB.databases().finally(t);e=setInterval(n,100),n()}).finally(()=>clearInterval(e))}().then(()=>{const e=indexedDB.open("keyval-store");return e.onupgradeneeded=()=>e.result.createObjectStore(n),t(e)});return(e,t)=>r.then(r=>t(r.transaction(n,e).objectStore(n)))}(0,"keyval")),r}function o(e,n=i()){return n("readonly",n=>t(n.get(e)))}var a=n(71440);Math;const s=1/180*Math.PI,u={};function c(e,{precision:t=u.precision||4}={}){return e=function(e){return Math.round(e/u.EPSILON)*u.EPSILON}(e),`${parseFloat(e.toPrecision(t))}`}function l(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function d(e){return function(e,t){return function(e,t,n){if(l(e)){n=n||function(e){return e.clone?e.clone():new Array(e.length)}(e);for(let r=0;r<n.length&&r<e.length;++r)n[r]=t(e[r],r,n);return n}return t(e)}(e,e=>e*s,void 0)}(e)}function f(e,t,n){const r=u.EPSILON;n&&(u.EPSILON=n);try{if(e===t)return!0;if(l(e)&&l(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!f(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{u.EPSILON=r}}function h(e,t,n=""){if(u.debug&&!function(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return e}u.EPSILON=1e-12,u.debug=!1,u.precision=4,u.printTypes=!1,u.printDegrees=!1,u.printRowMajor=!0;const p={};function g(e,t){p[e]||(p[e]=!0,console.warn(`${e} has been removed in version ${t}, see upgrade guide for more information`))}function y(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}class m extends(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array)){get ELEMENTS(){return y(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}to(e){return e===this?this:l(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(u)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+c(this[n],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!f(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){void 0===n&&(n=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]+=t[e];return this.check()}subtract(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]-=t[e];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(u.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}class b extends m{get ELEMENTS(){return y(!1),0}get RANK(){return y(!1),0}toString(){let e="[";if(u.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=function(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${e}`);return e}(n),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[n+r];return t}setColumn(e,t){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}var v=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array;function w(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],f=t[9],h=t[10],p=t[11],g=t[12],y=t[13],m=t[14],b=t[15],v=n[0],_=n[1],w=n[2],x=n[3];return e[0]=v*r+_*s+w*d+x*g,e[1]=v*i+_*u+w*f+x*y,e[2]=v*o+_*c+w*h+x*m,e[3]=v*a+_*l+w*p+x*b,e[4]=(v=n[4])*r+(_=n[5])*s+(w=n[6])*d+(x=n[7])*g,e[5]=v*i+_*u+w*f+x*y,e[6]=v*o+_*c+w*h+x*m,e[7]=v*a+_*l+w*p+x*b,e[8]=(v=n[8])*r+(_=n[9])*s+(w=n[10])*d+(x=n[11])*g,e[9]=v*i+_*u+w*f+x*y,e[10]=v*o+_*c+w*h+x*m,e[11]=v*a+_*l+w*p+x*b,e[12]=(v=n[12])*r+(_=n[13])*s+(w=n[14])*d+(x=n[15])*g,e[13]=v*i+_*u+w*f+x*y,e[14]=v*o+_*c+w*h+x*m,e[15]=v*a+_*l+w*p+x*b,e}function x(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}Math,Math,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),function(){var e=new _(2);_!=Float32Array&&(e[0]=0,e[1]=0)}(),function(){var e=new _(3);_!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0)}(),function(){var e=new _(4);_!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();const S=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),j=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),N=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),E={};class T extends b{static get IDENTITY(){return E.IDENTITY=E.IDENTITY||Object.freeze(new T(S)),E.IDENTITY}static get ZERO(){return E.ZERO=E.ZERO||Object.freeze(new T(j)),E.ZERO}get INDICES(){return N}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,r,i,o,a,s,u,c,l,d,f,h,p,g){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=d,this[12]=f,this[13]=h,this[14]=p,this[15]=g,this.check()}setRowMajor(e,t,n,r,i,o,a,s,u,c,l,d,f,h,p,g){return this[0]=e,this[1]=i,this[2]=u,this[3]=f,this[4]=t,this[5]=o,this[6]=c,this[7]=h,this[8]=n,this[9]=a,this[10]=l,this[11]=p,this[12]=r,this[13]=s,this[14]=d,this[15]=g,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(S)}fromQuaternion(e){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,d=r*s,f=i*a,h=i*s,p=i*u,g=o*a,y=o*s,m=o*u;e[0]=1-d-p,e[1]=l+m,e[2]=f-y,e[3]=0,e[4]=l-m,e[5]=1-c-p,e[6]=h+g,e[7]=0,e[8]=f+y,e[9]=h-g,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:n,top:r,near:i,far:o}){return o===1/0?T._computeInfinitePerspectiveOffCenter(this,e,t,n,r,i):function(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),c=1/(o-a);e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0}(this,e,t,n,r,i,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,n,r,i,o){const a=2*o/(i-r),s=(n+t)/(n-t),u=(i+r)/(i-r),c=-2*o;return e[0]=2*o/(n-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=s,e[9]=u,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=c,e[15]=0,e}lookAt(e,t,n){return 1===arguments.length&&({eye:e,center:t,up:n}=e),function(e,t,n,r){var i,o,a,s,u,c,l,d,f,h,p=t[0],g=t[1],y=t[2],m=r[0],b=r[1],_=r[2],w=n[0],x=n[1],S=n[2];Math.abs(p-w)<v&&Math.abs(g-x)<v&&Math.abs(y-S)<v?function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(e):(l=p-w,d=g-x,f=y-S,i=b*(f*=h=1/Math.hypot(l,d,f))-_*(d*=h),o=_*(l*=h)-m*f,a=m*d-b*l,(h=Math.hypot(i,o,a))?(i*=h=1/h,o*=h,a*=h):(i=0,o=0,a=0),s=d*a-f*o,u=f*i-l*a,c=l*o-d*i,(h=Math.hypot(s,u,c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=l,e[3]=0,e[4]=o,e[5]=u,e[6]=d,e[7]=0,e[8]=a,e[9]=c,e[10]=f,e[11]=0,e[12]=-(i*p+o*g+a*y),e[13]=-(s*p+u*g+c*y),e[14]=-(l*p+d*g+f*y),e[15]=1)}(this,e,t=t||[0,0,0],n=n||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:n,top:r,near:i=.1,far:o=500}){return function(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1}(this,e,t,n,r,i,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:n=1,near:r=.1,far:i=500}){if(e>2*Math.PI)throw Error("radians");const o=n*Math.tan(e/2),a=o*t;return(new T).ortho({left:-a,right:a,bottom:-o,top:o,near:r,far:i})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return function(e,t,n,r,i){var o,a=1/Math.tan(t/2);e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r)}(this,e,n,r,i),this.check()}determinant(){return function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],d=e[10],f=e[11],h=e[12],p=e[13],g=e[14],y=e[15];return(t*a-n*o)*(d*y-f*g)-(t*s-r*o)*(l*y-f*p)+(t*u-i*o)*(l*g-d*p)+(n*s-r*a)*(c*y-f*h)-(n*u-i*a)*(c*g-d*h)+(r*u-i*s)*(c*p-l*h)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*o,e}transpose(){return function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]}(this,this),this.check()}invert(){return function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],d=t[9],f=t[10],h=t[11],p=t[12],g=t[13],y=t[14],m=t[15],b=n*s-r*a,v=n*u-i*a,_=n*c-o*a,w=r*u-i*s,x=r*c-o*s,S=i*c-o*u,j=l*g-d*p,N=l*y-f*p,E=l*m-h*p,T=d*y-f*g,I=d*m-h*g,A=f*m-h*y,k=b*A-v*I+_*T+w*E-x*N+S*j;k&&(e[0]=(s*A-u*I+c*T)*(k=1/k),e[1]=(i*I-r*A-o*T)*k,e[2]=(g*S-y*x+m*w)*k,e[3]=(f*x-d*S-h*w)*k,e[4]=(u*E-a*A-c*N)*k,e[5]=(n*A-i*E+o*N)*k,e[6]=(y*_-p*S-m*v)*k,e[7]=(l*S-f*_+h*v)*k,e[8]=(a*I-s*E+c*j)*k,e[9]=(r*E-n*I-o*j)*k,e[10]=(p*x-g*_+m*b)*k,e[11]=(d*_-l*x-h*b)*k,e[12]=(s*N-a*T-u*j)*k,e[13]=(n*T-r*N+i*j)*k,e[14]=(g*v-p*w-y*b)*k,e[15]=(l*w-d*v+f*b)*k)}(this,this),this.check()}multiplyLeft(e){return w(this,e,this),this.check()}multiplyRight(e){return w(this,this,e),this.check()}rotateX(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],d=t[10],f=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+d*r,e[7]=u*i+f*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=d*i-s*r,e[11]=f*i-u*r}(this,this,e),this.check()}rotateY(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],d=t[10],f=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-l*r,e[2]=s*i-d*r,e[3]=u*i-f*r,e[8]=o*r+c*i,e[9]=a*r+l*i,e[10]=s*r+d*i,e[11]=u*r+f*i}(this,this,e),this.check()}rotateZ(e){return function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],d=t[6],f=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+d*r,e[3]=u*i+f*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=d*i-s*r,e[7]=f*i-u*r}(this,this,e),this.check()}rotateXYZ([e,t,n]){return this.rotateX(e).rotateY(t).rotateZ(n)}rotateAxis(e,t){return function(e,t,n,r){var i,o,a,s,u,c,l,d,f,h,p,g,y,m,b,_,w,x,S,j,N,E,T,I,A=r[0],k=r[1],R=r[2],O=Math.hypot(A,k,R);O<v||(A*=O=1/O,k*=O,R*=O,i=Math.sin(n),o=Math.cos(n),u=t[1],c=t[2],l=t[3],f=t[5],h=t[6],p=t[7],y=t[9],m=t[10],b=t[11],S=A*k*(a=1-o)-R*i,j=k*k*a+o,N=R*k*a+A*i,E=A*R*a+k*i,T=k*R*a-A*i,I=R*R*a+o,e[0]=(s=t[0])*(_=A*A*a+o)+(d=t[4])*(w=k*A*a+R*i)+(g=t[8])*(x=R*A*a-k*i),e[1]=u*_+f*w+y*x,e[2]=c*_+h*w+m*x,e[3]=l*_+p*w+b*x,e[4]=s*S+d*j+g*N,e[5]=u*S+f*j+y*N,e[6]=c*S+h*j+m*N,e[7]=l*S+p*j+b*N,e[8]=s*E+d*T+g*I,e[9]=u*E+f*T+y*I,e[10]=c*E+h*T+m*I,e[11]=l*E+p*T+b*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?x(this,this,e):x(this,this,[e,e,e]),this.check()}translate(e){return function(e,t,n){var r,i,o,a,s,u,c,l,d,f,h,p,g=n[0],y=n[1],m=n[2];t===e?(e[12]=t[0]*g+t[4]*y+t[8]*m+t[12],e[13]=t[1]*g+t[5]*y+t[9]*m+t[13],e[14]=t[2]*g+t[6]*y+t[10]*m+t[14],e[15]=t[3]*g+t[7]*y+t[11]*m+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],d=t[8],f=t[9],h=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=d,e[9]=f,e[10]=h,e[11]=p,e[12]=r*g+s*y+d*m+t[12],e[13]=i*g+u*y+f*m+t[13],e[14]=o*g+c*y+h*m+t[14],e[15]=a*g+l*y+p*m+t[15])}(this,this,e),this.check()}transform(e,t){return 4===e.length?(h(t=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;switch(n){case 2:t=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}(t||[-0,-0],e,this);break;case 3:t=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return h(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(e,t,n){const r=t[0],i=t[1],o=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/o,e[1]=(n[1]*r+n[5]*i)/o,e}(t||[-0,-0],e,this);break;case 3:t=function(e,t,n){const r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o||1;return e[0]=(n[0]*r+n[4]*i+n[8]*o)/a,e[1]=(n[1]*r+n[5]*i+n[9]*o)/a,e[2]=(n[2]*r+n[6]*i+n[10]*o)/a,e}(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return h(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}transformPoint(e,t){return g("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return g("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return g("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}var I=n(70698),A=n(7445),k=n.n(A),R=n(23815),O=n(31609);const L=a.Util.prefixes({ccf:"http://purl.org/ccf/latest/ccf.owl#",entity:"http://purl.org/ccf/latest/ccf-entity.owl#",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/"},a.DataFactory),M={x:L("rdf"),type:L("rdf")("type")},D={x:L("rdfs"),label:L("rdfs")("label"),comment:L("rdfs")("comment"),isDefinedBy:L("rdfs")("isDefinedBy"),seeAlso:L("rdfs")("seeAlso")},P={x:L("entity"),id:L("entity")("id"),label:D.label,description:D.comment,link:D.seeAlso,sex:L("entity")("sex"),age:L("entity")("age"),bmi:L("entity")("bmi"),Male:a.DataFactory.literal("Male"),Female:a.DataFactory.literal("Female"),consortiumName:L("entity")("consortium_name"),providerName:L("entity")("provider_name"),providerUUID:L("entity")("provider_uuid"),donor:L("entity")("has_donor"),sections:L("entity")("has_tissue_section"),datasets:L("entity")("has_dataset"),sampleType:L("entity")("sample_type"),TissueBlock:a.DataFactory.literal("Tissue Block"),TissueSection:a.DataFactory.literal("Tissue Section"),NonStandard:a.DataFactory.literal("Non-standard"),sectionCount:L("entity")("section_count"),sectionSize:L("entity")("section_size"),sectionUnits:L("entity")("section_units"),sectionNumber:L("entity")("section_number"),spatialEntity:L("entity")("has_spatial_entity"),ontologyTerms:L("entity")("has_ontology_term"),technology:L("entity")("technology"),thumbnail:L("entity")("has_thumbnail")},C=L("ccf"),F={x:C,ontologyNode:{label:C("ccf_preferred_label"),parent:C("ccf_part_of"),children:C("ccf_part_of"),rui_rank:C("ccf_rui_rank"),synonymLabels:a.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},spatial:{Female:C("VHFemale"),Male:C("VHMale"),BothSexes:C("VHBothSexes"),FemaleOrgans:C("VHFemaleOrgans"),MaleOrgans:C("VHMaleOrgans")},SpatialObjectReference:C("SpatialObjectReference"),SpatialEntity:C("SpatialEntity"),SpatialPlacement:C("SpatialPlacement"),spatialObjectReference:{file:C("has_object_file"),file_format:C("has_object_file_format"),file_subpath:C("has_object_file_subpath")},extractionSet:{label:D.label,rui_rank:C("ccf_rui_rank")},spatialEntity:{label:D.label,comment:D.comment,creator:L("dc")("creator"),creator_first_name:C("creator_first_name"),creator_last_name:C("creator_last_name"),creator_orcid:C("creator_orcid"),creation_date:C("creation_date"),updated_date:C("updated_date"),ccf_annotations:C("ccf_annotation"),representation_of:C("ccf_representation_of"),reference_organ:C("anatomical_structure_of"),extraction_set_for:C("extraction_set_for"),extraction_set:C("extraction_site_for"),sex:C("has_sex"),side:C("has_side"),rui_rank:C("ccf_rui_rank"),slice_thickness:C("ccf_slice_thickness"),slice_count:C("ccf_slice_count"),x_dimension:C("has_x_dimension"),y_dimension:C("has_y_dimension"),z_dimension:C("has_z_dimension"),dimension_units:C("has_dimension_units"),object:C("has_object_reference")},spatialPlacement:{source:C("has_placement_source"),target:C("has_placement_target"),placement_date:C("has_placement_date"),x_scaling:C("has_x_scaling"),y_scaling:C("has_y_scaling"),z_scaling:C("has_z_scaling"),scaling_units:C("has_scaling_units"),x_rotation:C("has_x_rotation"),y_rotation:C("has_y_rotation"),z_rotation:C("has_z_rotation"),w_rotation:C("has_theta_rotation"),rotation_order:C("has_rotation_order"),rotation_units:C("has_rotation_units"),x_translation:C("has_x_translation"),y_translation:C("has_y_translation"),z_translation:C("has_z_translation"),translation_units:C("has_translation_units")}},B={x:L("uberon")},G=(L("lmha"),{bladder:B.x("0001255"),body:B.x("0013702"),brain:B.x("0000955"),colon:B.x("0001155"),heart:B.x("0000948"),kidney:B.x("0002113"),large_intestine:B.x("0000059"),left_kidney:B.x("0004538"),left_lung:B.x("0002168"),left_ureter:B.x("0001223"),liver:B.x("0002107"),lung:B.x("0002048"),respiratory_system:B.x("0001004"),lymph_node:B.x("0000029"),pelvis:B.x("0001270"),rectum:B.x("0001052"),right_kidney:B.x("0004539"),right_lung:B.x("0002167"),right_ureter:B.x("0001222"),skin:B.x("0002097"),small_intestine:B.x("0002108"),spleen:B.x("0002106"),thymus:B.x("0002370"),ureter:B.x("0000056"),vasculature:B.x("0002049")});function U(e){const t={};return Object.entries(e).forEach(([e,n])=>{t[n.id]=e}),t}const V={spatialObjectReference:U(F.spatialObjectReference),spatialEntity:U(F.spatialEntity),spatialPlacement:U(F.spatialPlacement)};function $(e,t,n,r){const i={"@id":t,"@type":n};return e.some(e=>{const t=r[e.predicate.id];if(t){const n="Literal"===e.object.termType?(0,O.fromRdf)(e.object):e.object.id;(0,R.set)(i,t,n)}return!1},a.DataFactory.namedNode(t),null,null,null),i}const z=(0,R.memoize)(function(e,t){return $(e,t,"SpatialObjectReference",V.spatialObjectReference)},(e,t)=>t),q=(0,R.memoize)(function(e,t){const n=$(e,t,"ExtractionSet",V.spatialEntity);return n.extractionSites=(0,R.sortBy)(e.getSubjects(F.spatialEntity.extraction_set,t,null).map(t=>J(e,t.id)),["rui_rank"]),n},(e,t)=>t),H=(0,R.memoize)(function(e,t){return(0,R.sortBy)(e.getSubjects(F.spatialEntity.extraction_set_for,t,null).map(t=>q(e,t.id)),["rui_rank"])},(e,t)=>t),K=(0,R.memoize)(function(e,t){return(0,R.sortBy)(e.getSubjects(F.spatialEntity.reference_organ,t,null).map(t=>J(e,t.id)).filter(e=>e["@id"]!==t),["rui_rank"])},(e,t)=>t),W=(0,R.memoize)(function(e){const t=[];return e.forEach(n=>{n.subject.id===n.object.id&&t.push(J(e,n.subject.id))},null,F.spatialEntity.reference_organ,null,null),(0,R.sortBy)(t,["rui_rank"])}),J=(0,R.memoize)(function(e,t){const n=$(e,t,"SpatialEntity",V.spatialEntity);return n.object&&(n.object=z(e,n.object)),n.ccf_annotations&&(n.ccf_annotations=e.getObjects(t,F.spatialEntity.ccf_annotations,null).map(e=>e.id)),e.forSubjects(e=>n.entityId=e.id,P.spatialEntity,t,null),n},(e,t)=>t),Q=(0,R.memoize)(function(e,t){const n=$(e,t,"SpatialPlacement",V.spatialPlacement);return n.source&&(n.source=J(e,n.source)),n.target&&(n.target=J(e,n.target)),n},(e,t)=>t),X=(0,R.memoize)(function(e,t){const n=e.getObjects(a.DataFactory.namedNode(t),P.spatialEntity,null);if(n.length>0)return J(e,n[0].id)},(e,t)=>t);function Y(e,t){const n=t;let r;switch(n.translation_units){case"centimeter":r=.01;break;case"millimeter":r=.001;break;case"meter":default:r=1}const i=[n.x_translation,n.y_translation,n.z_translation].map(e=>e*r),o=[n.x_rotation,n.y_rotation,n.z_rotation].map(d),a=[n.x_scaling,n.y_scaling,n.z_scaling];return e.translate(i).rotateXYZ(o).scale(a)}class Z{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new I.DirectedGraph;const e=this.db.store;e.forSubjects(e=>{this.addNode(e.id,"SpatialObjectReference")},M.type,F.SpatialObjectReference,null),e.forSubjects(e=>{this.addNode(e.id,"SpatialEntity")},M.type,F.SpatialEntity,null);const t={};e.some(e=>(t[e.subject.id]=e.object.id,!1),null,F.spatialPlacement.source,null,null),e.some(e=>{const n=t[e.subject.id];return n&&this.addEdge(e.subject.id,n,e.object.id,"SpatialPlacement"),!1},null,F.spatialPlacement.target,null,null)}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,n,r){this.graph.mergeDirectedEdge(t,n,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new T(T.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const n=this.db.store,r=new T(T.IDENTITY),i=k()(this.graph,e,t);if(i&&i.length>0){i.reverse();let e="";for(const t of i){if(e){const i=this.graph.getEdgeAttribute(t,e,"id");Y(r,Q(n,i))}e=t}return r}}}class ee{constructor(e){this.db=e}getSpatialEntity(e){return J(this.db.store,e)}getExtractionSets(e){return H(this.db.store,e)}getExtractionSet(e){return q(this.db.store,e)}getAnatomicalStructures(e){return K(this.db.store,e)}getReferenceOrgans(){return W(this.db.store)}getReferenceBody(e){let t;switch(null==e?void 0:e.sex){case"Male":t=F.spatial.Male.id;break;case"Female":t=F.spatial.Female.id;break;case"Both":default:t=F.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(null==e?void 0:e.sex){case"Male":t=t.filter(e=>"Male"===e.sex);break;case"Female":t=t.filter(e=>"Female"===e.sex)}return(null==e?void 0:e.debug)&&(t=t.map(e=>[[e],this.getAnatomicalStructures(e["@id"])]).reduce((e,[t,n])=>e.concat(n.length>0?n:t),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e);let n=[...this.getReferenceOrganSets(e).map(e=>{const n="http://purl.obolibrary.org/obo/UBERON_0002097"===e.representation_of;return this.getSceneNode(e,t,{color:[255,255,255,255],opacity:n?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!n})})];return(null==e?void 0:e.debug)&&(n=n.concat([this.getSceneNode(this.getSpatialEntity(F.x("VHRightKidney").id),t,{color:[0,0,255,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(F.x("VHLeftKidney").id),t,{color:[255,0,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(F.x("VHSpleenCC1").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(F.x("VHSpleenCC2").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(F.x("VHSpleenCC3").id),t,{color:[0,255,0,127.5],wireframe:!0})])),n.filter(e=>void 0!==e)}getReferenceOrganScene(e,t){var n;const r=this.getReferenceOrgans().filter(n=>n.representation_of===e&&n.sex===(null==t?void 0:t.sex));if(r.length>0){const e=r[0],i=this.getSceneNode(e,e,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===e.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),o=(null!==(n=this.db.getSpatialEntities(t))&&void 0!==n?n:[]).map(t=>this.getSceneNode(t,e,{color:[255,255,255,229.5]}));return[i].concat(o).filter(e=>void 0!==e)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(e=>this.getSceneNode(e,t,{color:[255,255,255,229.5]})).filter(e=>void 0!==e)}getSceneNode(e,t,n={}){var r,i,o,a;const s=null===(i=null===(r=null==e?void 0:e.object)||void 0===r?void 0:r.file_format)||void 0===i?void 0:i.startsWith("model/gltf");let u=this.db.graph.getTransformationMatrix(s&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(u){if(s)u=new T(T.IDENTITY).rotateX(d(90)).multiplyLeft(u);else{let t;switch(e.dimension_units){case"centimeter":t=.01;break;case"millimeter":t=.001;break;case"meter":default:t=1}const n=[e.x_dimension,e.y_dimension,e.z_dimension].map(e=>e*t/2);u.scale(n)}return Object.assign({"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:s?null===(o=e.object)||void 0===o?void 0:o.file:void 0,scenegraphNode:s?null===(a=e.object)||void 0===a?void 0:a.file_subpath:void 0,transformMatrix:u,tooltip:e.label},n)}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const te="https://entity.api.hubmapconsortium.org/entities/",ne=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),re={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},ie={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford"},oe=function(){const e={};return Object.entries(G).forEach(([t,n])=>e[t]=n.id),e}(),ae={BL:[oe.body,oe.bladder],RK:[oe.body,oe.kidney,oe.right_kidney],LK:[oe.body,oe.kidney,oe.left_kidney],HT:[oe.body,oe.heart],LI:[oe.body,oe.large_intestine,oe.colon],SI:[oe.body,oe.small_instestine],LL:[oe.body,oe.respiratory_system,oe.lung,oe.left_lung],RL:[oe.body,oe.respiratory_system,oe.lung,oe.right_lung],LY:[oe.body,oe.lymph_node],SP:[oe.body,oe.spleen],TH:[oe.body,oe.thymus],UR:[oe.body,oe.ureter],LV:[oe.body,oe.liver],OT:[oe.body]},se={"@base":"http://purl.org/ccf/latest/ccf-entity.owl#","@vocab":"http://purl.org/ccf/latest/ccf-entity.owl#",ccf:"http://purl.org/ccf/latest/ccf.owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",label:"rdfs:label",description:"rdfs:comment",link:{"@id":"rdfs:seeAlso","@type":"@id"},samples:{"@reverse":"has_donor"},sections:{"@id":"has_tissue_section","@type":"@id"},datasets:{"@id":"has_dataset","@type":"@id"},rui_location:{"@id":"has_spatial_entity","@type":"@id"},ontologyTerms:{"@id":"has_ontology_term","@type":"@id"},thumbnail:{"@id":"has_thumbnail"}};class ue{constructor(e,t="",n="",r){var i,o;if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const a=this.data.descendants||[],s=(this.data.ancestors||[]).find(e=>"Donor"===e.entity_type);this.donor=this.getDonor(s,n);const u=this.getRuiLocation(e,this.donor);u?this.rui_location=u:this.bad=!0;const c=new Date(e.last_modified_timestamp).toLocaleDateString(),l=ie[e.group_uuid]||e.group_name,d=e.created_by_user_displayname;this["@id"]=te+e.uuid,this.label=`Registered ${c}, ${d}, ${l}`,this.link=`${n}browse/sample/${e.uuid}`;const f={},h=[];this.sections=h;const p=[];this.datasets=p;for(const v of a.filter(e=>"Sample"===e.entity_type)){const t=this.getSection(v,e,n);f[v.submission_id]=t,h.push(t),t.section_number=null!==(i=t.section_number)&&void 0!==i?i:h.length}for(const v of a)if("Dataset"===v.entity_type){const e=this.getDataset(v,t,n,r),i=(0,R.get)(v,["ingest_metadata","metadata","tissue_id"]);f[i]?null===(o=f[i].datasets)||void 0===o||o.push(e):p.push(e)}const g=null!=u?u:{},y=`${g.x_dimension} x ${g.y_dimension} x ${g.z_dimension} ${g.dimension_units}`;this.section_count=g.slice_count||h.length;const m=parseFloat((g.slice_thickness||(g.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=m;const b=g.dimension_units||"millimeter";this.section_units=b,this.description=`${y}, ${m} ${b}, ${e.specimen_type}, ${this.section_count} Sections`,h.forEach((e,t)=>{e.description=`${g.x_dimension} x ${g.y_dimension} x ${m} ${b}, ${m} ${b}, ${e.description}`,e.section_number=t+1})}getSection(e,t,n){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":te+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${ie[e.group_uuid]||e.group_name}`,description:`${t.specimen_type}`,link:`${n}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",n="",r){var i;const o=new Date(e.last_modified_timestamp).toLocaleDateString(),a=ie[e.group_uuid]||e.group_name,s=e.created_by_user_displayname,u=[...e.data_types,(0,R.get)(e,["ingest_metadata","metadata","assay_type"],"")],c=u.join("|").toLowerCase();let l,d="assets/icons/ico-unknown.svg";return-1!==c.indexOf("10x")?(l="10x",d="assets/icons/ico-bulk-10x.svg"):-1!==c.indexOf("af")?(l="AF",d="assets/icons/ico-spatial-af.svg"):-1!==c.indexOf("codex")?(l="CODEX",d="assets/icons/ico-spatial-codex.svg"):-1!==c.indexOf("imc")?(l="IMC",d="assets/icons/ico-spatial-imc.svg"):-1!==c.indexOf("lc")&&-1===c.indexOf("af")?(l="LC",d="assets/icons/ico-bulk-lc.svg"):l=-1!==c.indexOf("maldi")?"MALDI":-1!==c.indexOf("pas")?"PAS":"OTHER",d=null!==(i=this.getDatasetThumbnail(e,t,r))&&void 0!==i?i:d,{"@id":te+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${s}, ${a}`,description:`Data/Assay Types: ${u.join(", ")}`,link:`${n}browse/dataset/${e.uuid}`,technology:l,thumbnail:d}}getDatasetThumbnail(e,t,n){if(e.thumbnail_file){const r=e.thumbnail_file;return`${t}/${r.file_uuid}/${r.filename}`+(n?`?token=${n}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=(0,R.get)(e,"metadata.files",[]).filter(e=>/\.(ome\.tif|ome\.tiff)$/.test(e.rel_path)).filter(e=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(e.rel_path)).filter(e=>ne.has(e.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${t}/${e.uuid}/${r.rel_path}`+(n?`?token=${n}`:""));if(r.length>0){const e=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(ne.has(e))return`assets/thumbnails/TMC-Vanderbilt/DR1/${e}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const t=re[e.hubmap_id];if(t)return`assets/thumbnails/TMC-Florida/${t}`}}getDonor(e,t){const n=(e.description||"").toLowerCase();let r;n.includes("female")?r="Female":n.includes("male")&&(r="Male");const i=n.match(/age ([0-9]+)/);let o,a;i&&(o=(0,R.toNumber)(i[1]));for(const l of(0,R.get)(e,"metadata.organ_donor_data",[]))"Feminine gender"===l.preferred_term||"Female"===l.preferred_term?r="Female":"Masculine gender"===l.preferred_term||"Male"===l.preferred_term?r="Male":"Current chronological age"===l.preferred_term||"Age"===l.preferred_term?o=(0,R.toNumber)(l.data_value):"Body mass index"===l.preferred_term&&(a=(0,R.toNumber)(l.data_value));let s="";r&&o&&(s+=`${r}, Age ${o}`,a&&(s+=`, BMI ${a.toFixed(1)}`));const u=new Date(e.last_modified_timestamp).toLocaleDateString(),c=ie[e.group_uuid]||e.group_name;return{"@id":te+e.uuid,"@type":"Donor",label:s,description:`Entered ${u}, ${e.created_by_user_displayname}, ${c}`,link:`${t}browse/donor/${e.uuid}`,age:o,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:c,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){var n;const r=(e.ancestors||[]).find(e=>"Sample"===e.entity_type&&"organ"===e.specimen_type),i=ae[null==r?void 0:r.organ]||[oe.body];let o,a=e.rui_location;if(a&&("string"==typeof a&&(a=JSON.parse(a)),a.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):a["@id"]&&(o=a)),o){o.ccf_annotations=i.concat(o.ccf_annotations||[]);const e=null!==(n=(0,R.get)(o,["placement","target"]))&&void 0!==n?n:"";e.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")&&(0,R.set)(o,["placement","target"],e.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")),("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===e||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===e)&&(0,R.set)(o,["placement","target"],"Male"===t.sex?e.replace("#VH","#VHM")+"_Patch":e.replace("#VH","#VHF")+"_Patch")}return o}getTissueBlock(){return(0,R.omit)(Object.assign({},this),["data","bad","donor"])}toJsonLd(){return Object.assign(Object.assign({},this.donor),{samples:[this.getTissueBlock()]})}}function ce(t,n,r,i,o="",a=""){return e(this,void 0,void 0,function*(){let e;if("static"===n)e=yield fetch(t).then(e=>e.ok?e.json():void 0).catch(()=>{});else if("search-api"===n){const n={"Content-type":"application/json"};i&&i.length>0&&(n.Authorization=`Bearer ${i}`),e=yield fetch(t,{method:"POST",headers:n,body:JSON.stringify({version:!0,size:1e4,_source:{excludes:["donor","immediate_ancestors","immediate_descendants","origin_sample","portal_metadata_upload_files","image_file_metadata","ancestor_ids","descendant_ids"]},stored_fields:["*"],script_fields:{},docvalue_fields:[],query:null!=r?r:{exists:{field:"rui_location"}}})}).then(e=>e.ok?e.json():void 0).catch(()=>{})}if(e)return function(e,t="",n="",r,i=!1){const o={},a=(0,R.get)(e,"hits.hits",[]).map(e=>(0,R.get)(e,"_source",{})).map(e=>new ue(e,t,n,r).toJsonLd());for(const u of a){const e=u["@id"];o[e]?o[e].samples.push(u.samples[0]):o[e]=u}const s=Object.values(o);return i&&(function(e){let t=[],n=0;for(const r of e.filter(e=>e.samples.length>1)){const e=r.samples;for(let r=0;r<e.length;r++){const i=e[r]["@id"];t=t.concat(e[r].datasets);for(const n of e[r].sections)t=t.concat(n.datasets);for(let t=r+1;t<e.length;t++)e[t].sections.find(e=>e["@id"]===i)&&(e[r].deleteMe=!0,n++)}r.samples=e.filter(e=>!0!==e.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(s),console.log(s.map(e=>Object.assign({"@context":se},e)))),{"@context":se,"@graph":s}}(e,o,a,i);console.warn(`Unable to load ${t} as HuBMAP Data`)})}function le(e,t,n){var r;const i=new Map,o=new Set;e.some(e=>{var n;return t.has(e.subject.id)&&(o.add(e.object.id),i.has(e.object.id)?null===(n=i.get(e.object.id))||void 0===n||n.push(e.subject.id):i.set(e.object.id,[e.subject.id])),!1},null,P.donor,null,null);const a=n(o),s=new Set;for(const u of a)for(const e of null!==(r=i.get(u))&&void 0!==r?r:[])s.add(e);return s}function de(e,t){return n=>e.has(n.id)?t.add(n.id):void 0}const fe={[F.ontologyNode.label.id]:"label",[F.ontologyNode.parent.id]:"parent",[F.ontologyNode.synonymLabels.id]:"synonymLabels"};function he(e,t){const n=a.DataFactory.namedNode(t),r={"@id":t,"@type":"OntologyTreeNode",id:t,parent:"",children:[],synonymLabels:[],label:""};return e.some(e=>{const t=fe[e.predicate.id];if(t){const n="Literal"===e.object.termType?(0,O.fromRdf)(e.object):e.object.id;"synonymLabels"===t?r.synonymLabels.push(n):(0,R.set)(r,t,n)}return!1},n,null,null,null),r.children=e.getSubjects(F.ontologyNode.children,n,null).map(e=>e.id),r}const pe={[P.label.id]:"label",[P.description.id]:"description",[P.link.id]:"link"},ge=Object.assign(Object.assign({},pe),{[P.providerName.id]:"providerName"}),ye=Object.assign(Object.assign({},pe),{[P.technology.id]:"technology",[P.thumbnail.id]:"thumbnail"}),me=Object.assign(Object.assign({},pe),{[P.sampleType.id]:"sampleType",[P.sectionNumber.id]:"sectionNumber",[P.datasets.id]:"datasets"}),be=Object.assign(Object.assign({},pe),{[P.sampleType.id]:"sampleType",[P.sectionCount.id]:"sectionCount",[P.sectionSize.id]:"sectionSize",[P.sectionUnits.id]:"sectionUnits",[P.donor.id]:"donor",[P.spatialEntity.id]:"spatialEntityId",[P.sections.id]:"sections",[P.datasets.id]:"datasets"}),ve=(0,R.memoize)(function(e,t){const n={"@id":t,"@type":"Donor"};return e.some(e=>{const t=ge[e.predicate.id];if(t){const r="Literal"===e.object.termType?(0,O.fromRdf)(e.object):e.object.id;(0,R.set)(n,t,r)}return!1},a.DataFactory.namedNode(t),null,null,null),n},(e,t)=>t);function _e(e,t){const n={"@id":t,"@type":"Dataset"};return e.some(e=>{const t=ye[e.predicate.id];if(t){const r="Literal"===e.object.termType?(0,O.fromRdf)(e.object):e.object.id;(0,R.set)(n,t,r)}return!1},a.DataFactory.namedNode(t),null,null,null),n}const we=(0,R.memoize)(function(e,t){const n={"@id":t,"@type":"Sample",sections:[],datasets:[]};return e.some(t=>{const r=be[t.predicate.id];if(r){const i="Literal"===t.object.termType?(0,O.fromRdf)(t.object):t.object.id;if("sections"===r){const t=function(e,t){const n={"@id":t,"@type":"Sample",datasets:[]};return e.some(t=>{const r=me[t.predicate.id];if(r){const i="Literal"===t.object.termType?(0,O.fromRdf)(t.object):t.object.id;if("datasets"===r){const t=_e(e,i);n[r].push(t)}else(0,R.set)(n,r,i)}return!1},a.DataFactory.namedNode(t),null,null,null),n}(e,i);n[r].push(t)}else if("datasets"===r){const t=_e(e,i);n[r].push(t)}else"donor"===r?n[r]=ve(e,i):(0,R.set)(n,r,i)}return!1},a.DataFactory.namedNode(t),null,null,null),n},(e,t)=>t),xe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"},Se=Symbol("Comlink.proxy"),je=Symbol("Comlink.endpoint"),Ne=Symbol("Comlink.releaseProxy"),Ee=Symbol("Comlink.thrown"),Te=e=>"object"==typeof e&&null!==e||"function"==typeof e,Ie=new Map([["proxy",{canHandle:e=>Te(e)&&e[Se],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Ae(e,t),[n,[n]]},deserialize:e=>(e.start(),function(e,t){return Oe(e,[],void 0)}(e))}],["throw",{canHandle:e=>Te(e)&&Ee in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}}]]);function Ae(e,t=self){t.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:i,type:o,path:a}=Object.assign({path:[]},r.data),s=(r.data.argumentList||[]).map(Ce);let u;try{const t=a.slice(0,-1).reduce((e,t)=>e[t],e),n=a.reduce((e,t)=>e[t],e);switch(o){case"GET":u=n;break;case"SET":t[a.slice(-1)[0]]=Ce(r.data.value),u=!0;break;case"APPLY":u=n.apply(t,s);break;case"CONSTRUCT":u=function(e){return Object.assign(e,{[Se]:!0})}(new n(...s));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;Ae(e,n),u=function(e,t){return De.set(e,t),e}(t,[t])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Ee]:0}}Promise.resolve(u).catch(e=>({value:e,[Ee]:0})).then(e=>{const[r,a]=Pe(e);t.postMessage(Object.assign(Object.assign({},r),{id:i}),a),"RELEASE"===o&&(t.removeEventListener("message",n),ke(t))})}),t.start&&t.start()}function ke(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function Re(e){if(e)throw new Error("Proxy has been released and is not useable")}function Oe(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(n,o){if(Re(r),o===Ne)return()=>Fe(e,{type:"RELEASE",path:t.map(e=>e.toString())}).then(()=>{ke(e),r=!0});if("then"===o){if(0===t.length)return{then:()=>i};const n=Fe(e,{type:"GET",path:t.map(e=>e.toString())}).then(Ce);return n.then.bind(n)}return Oe(e,[...t,o])},set(n,i,o){Re(r);const[a,s]=Pe(o);return Fe(e,{type:"SET",path:[...t,i].map(e=>e.toString()),value:a},s).then(Ce)},apply(n,i,o){Re(r);const a=t[t.length-1];if(a===je)return Fe(e,{type:"ENDPOINT"}).then(Ce);if("bind"===a)return Oe(e,t.slice(0,-1));const[s,u]=Me(o);return Fe(e,{type:"APPLY",path:t.map(e=>e.toString()),argumentList:s},u).then(Ce)},construct(n,i){Re(r);const[o,a]=Me(i);return Fe(e,{type:"CONSTRUCT",path:t.map(e=>e.toString()),argumentList:o},a).then(Ce)}});return i}function Le(e){return Array.prototype.concat.apply([],e)}function Me(e){const t=e.map(Pe);return[t.map(e=>e[0]),Le(t.map(e=>e[1]))]}const De=new WeakMap;function Pe(e){for(const[t,n]of Ie)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},De.get(e)||[]]}function Ce(e){switch(e.type){case"HANDLER":return Ie.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Fe(e,t,n){return new Promise(r=>{const i=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",function t(n){!n.data||!n.data.id||n.data.id!==i||(e.removeEventListener("message",t),r(n.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}Ae(new class{constructor(e=xe){this.options=e,this.store=new a.Store(void 0,{factory:a.DataFactory}),this.graph=new Z(this),this.scene=new ee(this)}connect(t,n=!1){return e(this,void 0,void 0,function*(){return t&&(this.options=t),this.initializing||(this.initializing=n?this.cachedConnect():this.doConnect()),yield this.initializing,this.store.size>0})}cachedConnect(){return e(this,void 0,void 0,function*(){const e=(new Date).getTime(),n="ccf-database.last_modified",r="ccf-database",a=yield o(n).catch(()=>{});let s;a&&e-new Date(+a).getTime()>36e5?yield function(e,n=i()){return n("readwrite",n=>(e.forEach(e=>n.delete(e)),t(n.transaction)))}([r,n]).catch(()=>{}):s=yield o(r).catch(()=>{}),s?yield this.deserialize(s):(yield this.doConnect(),function(e,n=i()){return n("readwrite",n=>(e.forEach(e=>n.put(e[1],e[0])),t(n.transaction)))}([[r,this.serialize()],[n,""+e]]).catch(()=>{}))})}doConnect(){var t,n;return e(this,void 0,void 0,function*(){const e=[],r=null!==(n=null===(t=this.options.dataSources)||void 0===t?void 0:t.concat())&&void 0!==n?n:[],i=this.options.ccfOwlUrl;if(i.endsWith(".n3store.json")){const e=yield fetch(i).then(e=>e.text()).catch(()=>console.log("Couldn't locate serialized store."));e&&(this.store=(0,a.deserializeN3Store)(e,a.DataFactory))}else(null==i?void 0:i.length)>0&&r.push(i);this.options.hubmapDataUrl&&(this.options.hubmapDataUrl.endsWith("jsonld")?r.push(this.options.hubmapDataUrl):e.push(ce(this.options.hubmapDataUrl,this.options.hubmapDataService,this.options.hubmapQuery,this.options.hubmapToken,this.options.hubmapAssetsUrl,this.options.hubmapPortalUrl).then(e=>{if(e)return this.addDataSources([e])}))),e.push(this.addDataSources(r)),yield Promise.all(e),yield this.synchronize()})}addDataSources(t,n){return e(this,void 0,void 0,function*(){const r=null!=n?n:this.store;return yield Promise.all(t.map(t=>e(this,void 0,void 0,function*(){"string"==typeof t?t.endsWith("jsonld")?yield(0,a.addJsonLdToStore)(t,r):t.endsWith("n3")?yield(0,a.addN3ToStore)(t,r):(t.endsWith("rdf")||t.endsWith("owl")||t.endsWith("xml"))&&(yield(0,a.addRdfXmlToStore)(t,r)):yield(0,a.addJsonLdToStore)(t,r)}))),this})}synchronize(){return e(this,void 0,void 0,function*(){return yield new Promise(e=>{setTimeout(e,500)}),this.graph.createGraph(),this})}serialize(){return(0,a.serializeN3Store)(this.store)}deserialize(t){return e(this,void 0,void 0,function*(){this.store=(0,a.deserializeN3Store)(t,a.DataFactory),this.graph=new Z(this),this.scene=new ee(this),yield new Promise(e=>{setTimeout(e,10)})})}getIds(e={}){return function(e,t){var n,r,i,o,s;let u=function(e){const t=new Set;return e.forSubjects(e=>t.add(e.id),P.spatialEntity,null,null),t}(e);if(u.size>0&&(u=function(e,t,n=!0){const r=new Set;if(e.forSubjects(de(t,r),P.spatialEntity,null,null),!n){const e=new Set;return t.forEach(t=>r.has(t)?void 0:e.add(t)),e}return r}(e,u)),u.size>0&&("Male"===t.sex||"Female"===t.sex)){const n=t.sex;u=le(e,u,t=>function(e,t,n){const r=new Set;return e.forSubjects(de(t,r),P.sex,P[n],null),r}(e,t,n))}if(u.size>0&&(null===(n=t.tmc)||void 0===n?void 0:n.length)>0&&(u=le(e,u,n=>function(e,t,n){const r=new Set;for(const i of n){const n=a.DataFactory.literal(i);e.forSubjects(de(t,r),P.providerName,n,null)}return r}(e,n,t.tmc))),u.size>0&&(null===(r=t.technologies)||void 0===r?void 0:r.length)>0&&(u=function(e,t,n){var r;const i=new Map,o=new Set,a=new Set;e.some(e=>(t.has(e.subject.id)&&a.add(e.object.id),!1),null,P.sections,null,null),e.some(e=>{var n;return(t.has(e.subject.id)||a.has(e.subject.id))&&(o.add(e.object.id),i.has(e.object.id)?null===(n=i.get(e.object.id))||void 0===n||n.push(e.subject.id):i.set(e.object.id,[e.subject.id])),!1},null,P.datasets,null,null);const s=n(o),u=new Set;for(const c of s)for(const e of null!==(r=i.get(c))&&void 0!==r?r:[])u.add(e);return u}(e,u,n=>function(e,t,n){const r=new Set;for(const i of n){const n=a.DataFactory.literal(i);e.forSubjects(de(t,r),P.technology,n,null)}return r}(e,n,t.technologies))),u.size>0&&(null===(i=t.ontologyTerms)||void 0===i?void 0:i.length)>0&&(u=function(e,t,n){var r;const i=new Map,o=new Set;e.some(e=>{var n;return t.has(e.subject.id)&&(o.add(e.object.id),i.has(e.object.id)?null===(n=i.get(e.object.id))||void 0===n||n.push(e.subject.id):i.set(e.object.id,[e.subject.id])),!1},null,P.spatialEntity,null,null);const a=n(o),s=new Set;for(const u of a)for(const e of null!==(r=i.get(u))&&void 0!==r?r:[])s.add(e);return s}(e,u,n=>function(e,t,n){const r=new Set;for(const i of n){const n=a.DataFactory.namedNode(i);e.forSubjects(de(t,r),F.spatialEntity.ccf_annotations,n,null)}return r}(e,n,t.ontologyTerms))),u.size>0&&2===(null===(o=t.ageRange)||void 0===o?void 0:o.length)&&(0,R.isFinite)(t.ageRange[0])&&(0,R.isFinite)(t.ageRange[1])){const n=Math.max(...t.ageRange),r=Math.min(...t.ageRange);1===r&&110===n||(u=le(e,u,t=>function(e,t,n,r){const i=new Set;return e.some(e=>{if(t.has(e.subject.id)){const t=(0,O.fromRdf)(e.object);t>=n&&t<=r&&i.add(e.subject.id)}return!1},null,P.age,null,null),i}(e,t,r,n)))}if(u.size>0&&2===(null===(s=t.bmiRange)||void 0===s?void 0:s.length)&&(0,R.isFinite)(t.bmiRange[0])&&(0,R.isFinite)(t.bmiRange[1])){const n=Math.max(...t.bmiRange),r=Math.min(...t.bmiRange);13===r&&83===n||(u=le(e,u,t=>function(e,t,n,r){const i=new Set;return e.some(e=>{if(t.has(e.subject.id)){const t=(0,O.fromRdf)(e.object);t>=n&&t<=r&&i.add(e.subject.id)}return!1},null,P.bmi,null,null),i}(e,t,r,n)))}return u}(this.store,e)}get(e){return this.store.getQuads(a.DataFactory.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(e=>this.get(e))}getSpatialEntities(e){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(e=>X(this.store,e))}getTissueBlockResults(t){return e(this,void 0,void 0,function*(){return t=Object.assign(Object.assign({},t),{hasSpatialEntity:!0}),[...this.getIds(t)].map(e=>we(this.store,e))})}getAggregateResults(t){return e(this,void 0,void 0,function*(){return function(e,t){const n=new Set;t.some(t=>(e.has(t.subject.id)&&n.add(t.object.id),!1),null,P.donor,null,null);const r=new Set;t.some(e=>(n.has(e.subject.id)&&r.add(e.object.id),!1),null,P.providerUUID,null,null);const i=new Set;t.forSubjects(t=>{e.has(t.id)&&i.add(t.id)},P.spatialEntity,null,null);const o=new Set;t.some(e=>(i.has(e.subject.id)&&o.add(e.object.id),!1),null,P.sections,null,null);const a=new Set;return t.some(e=>{const t=e.subject;return(i.has(t.id)||o.has(t.id))&&a.add(e.object.id),!1},null,P.datasets,null,null),Object.entries({"Tissue Data Providers":r.size,Donors:n.size,"Tissue Blocks":i.size,"Tissue Sections":o.size,"Tissue Datasets":a.size}).map(([e,t])=>({label:e,count:t}))}(this.getIds(t),this.store)})}getOntologyTermOccurences(t){return e(this,void 0,void 0,function*(){return function(e,t){const n=new Map;t.some(t=>(e.has(t.subject.id)&&(n.has(t.object.id)?n.get(t.object.id).push(t.subject.id):n.set(t.object.id,[t.subject.id])),!1),null,P.spatialEntity,null,null);const r={};return t.some(e=>{var t,i;if(n.has(e.subject.id)){const o=null!==(i=null===(t=n.get(e.subject.id))||void 0===t?void 0:t.length)&&void 0!==i?i:0;r[e.object.id]=o+(r[e.object.id]||0)}return!1},null,F.spatialEntity.ccf_annotations,null,null),r}(this.getIds(t),this.store)})}getOntologyTreeModel(){return e(this,void 0,void 0,function*(){return function(e){const t={root:G.body.id,nodes:{}},n=new Set;e.some(e=>(n.add(e.subject.id),n.add(e.predicate.id),!1),null,F.ontologyNode.parent,null,null);for(const r of n)t.nodes[r]=he(e,r);return t}(this.store)})}getReferenceOrgans(){return e(this,void 0,void 0,function*(){return this.scene.getReferenceOrgans()})}getScene(t){return e(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getScene(t)})}getReferenceOrganScene(t,n){return e(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getReferenceOrganScene(t,n)})}})}()}();