(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{svzG:function(n,t,l){"use strict";l.r(t);var e,u=l("8Y7J"),a=function(){},o=l("pMnS"),i=l("Nb0/"),r=l("10Sg"),c=l("QQfA"),s=l("iInd"),b=l("SVse"),p=l("A7pE"),d=l("w2OH"),g=l("LvDl"),f=l("mrSG"),h=l("e1JD"),O=l("LRne"),y=l("itXk"),m=l("HDdC"),v=l("wO+i"),C=l("lJxs"),M=l("eIep"),P=l("w1tV"),_=l("AytR"),S=l("HLSH"),x=(e=function(){function n(n,t){this.localDatabase=n,this.store=t,this.countObservableMap=new WeakMap,this.pathToImages=_.a.ccfAssetUrl+"/body"}return n.prototype.getBodySourcePath=function(){var n=this;return this.searchState.pipe(Object(v.a)("gender"),Object(C.a)((function(n){return void 0!==n?n:"both"})),Object(C.a)((function(t){return t&&n.pathToImages+"/"+t+"/"})))},n.prototype.getMetadata=function(n){var t=this;return this.patientFilterBuilder.pipe(Object(C.a)((function(t){return t.addIncludes("anatomicalLocations",n)})),Object(C.a)((function(n){return n.toFilter()})),Object(M.a)((function(n){return t.localDatabase.getPatients(n)})),Object(C.a)((function(n){return Object(g.map)(n,"metadata")})))},n.prototype.getBodyOverlays=function(){var n=this;return Object(O.a)(["kidney","heart"].map((function(t){return{id:t,path:n.pathToImages+"/overlays/"+t+"/"+t+".svg"}})))},n.prototype.getCounts=function(n){if(this.countObservableMap.has(n))return this.countObservableMap.get(n);var t=this.createCountsObservable(n.id);return this.countObservableMap.set(n,t),t},n.prototype.createCountsObservable=function(n){var t=this.getCountsFor("getPatients",S.a.patientFilterBuilder,"anatomicalLocations[0]",n),l=this.getCountsFor("getTissueSamples",S.a.tissueSampleFilterBuilder,"patient.anatomicalLocations[0]",n),e=this.getCountsFor("getTissueSlices",S.a.tissueSliceFilterBuilder,"sample.patient.anatomicalLocations[0]",n),u=this.getCountsFor("getTissueImages",S.a.tissueImageFilterBuilder,"slice.sample.patient.anatomicalLocations[0]",n);return Object(y.a)([t,l,e,u]).pipe(Object(C.a)((function(n){return{patientsCount:n[0],tissueSamplesCount:n[1],tissueSlicesCount:n[2],tissueImagesCount:n[3],cells:0}})),Object(P.a)())},n.prototype.getCountsFor=function(n,t,l,e){var u=this.localDatabase,a=this.store,o=u[n].bind(u);return a.select(t).pipe(Object(C.a)((function(n){return n.addMatches(l,e)})),Object(C.a)((function(n){return n.toFilter()})),Object(M.a)(o),Object(C.a)((function(n){return n.length})))},n}(),f.__decorate([Object(h.e)(S.a),f.__metadata("design:type",m.a)],e.prototype,"searchState",void 0),f.__decorate([Object(h.e)(S.a.patientFilterBuilder),f.__metadata("design:type",m.a)],e.prototype,"patientFilterBuilder",void 0),e),D=l("gZgn"),w=function(){function n(n,t){this.bodyService=n,this.navigator=t}return n.prototype.ngOnInit=function(){this.bodyImagePath$=this.bodyService.getBodySourcePath(),this.bodyOverlays$=this.bodyService.getBodyOverlays()},n.prototype.ngOnDestroy=function(){this.metadataSubscription&&this.metadataSubscription.unsubscribe()},n.prototype.organHover=function(n){var t=this;this.hoverOrganName=n,this.metadataSubscription=this.bodyService.getMetadata(n).subscribe((function(n){t.metadata=n}))},n.prototype.clearOrganHover=function(){this.metadata=void 0,this.hoverOrganName=void 0,this.metadataSubscription.unsubscribe()},n.prototype.capitalize=function(n){return Object(g.capitalize)(n)},n.prototype.pluralizeSuffix=function(n,t){return t+(1!==n?"s":"")},n.prototype.pluralize=function(n,t){return n+" "+this.pluralizeSuffix(n,t)},n}(),I=u.rb({encapsulation:0,styles:[[".ccf-ui-body.wrapper[_ngcontent-%COMP%]{height:100%}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;height:100%}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .body-details-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;text-align:center}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .body-details-container[_ngcontent-%COMP%]   .organ[_ngcontent-%COMP%]{left:70%}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .body-details-container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{width:76%;height:100%}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .body-details-container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{cursor:pointer}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .body-details-container[_ngcontent-%COMP%]   .organ-metadata[_ngcontent-%COMP%]{width:24%}.ccf-ui-body.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .body-details-container[_ngcontent-%COMP%]   .organ-metadata[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center}"]],data:{}});function F(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,13,":svg:g",[["ccf-callout",""],["class","callout"],["forcePosition","left"]],null,null,null,i.b,i.a)),u.sb(1,4898816,null,0,r.a,[u.l,c.c],{boundary:[0,"boundary"],centroid:[1,"centroid"],forcePosition:[2,"forcePosition"]},null),(n()(),u.tb(2,0,null,0,11,":xhtml:div",[],null,null,null,null,null)),(n()(),u.Mb(3,null,[" "," "])),(n()(),u.tb(4,0,null,null,1,":xhtml:strong",[],null,null,null,null,null)),(n()(),u.Mb(5,null,["",""])),(n()(),u.tb(6,0,null,null,0,":xhtml:br",[],null,null,null,null,null)),(n()(),u.Mb(7,null,[" "," "])),(n()(),u.tb(8,0,null,null,0,":xhtml:br",[],null,null,null,null,null)),(n()(),u.Mb(9,null,[" ",""])),(n()(),u.tb(10,0,null,null,0,":xhtml:br",[],null,null,null,null,null)),(n()(),u.Mb(11,null,[" ",""])),(n()(),u.tb(12,0,null,null,0,":xhtml:br",[],null,null,null,null,null)),(n()(),u.Mb(13,null,[" "," "]))],(function(n,t){n(t,1,0,u.Fb(t.parent.parent,4),u.Fb(t.parent,1),"left")}),(function(n,t){var l=t.component;n(t,3,0,t.context.ngIf.patientsCount),n(t,5,0,l.pluralizeSuffix(t.context.ngIf.patientsCount,"Patient")),n(t,7,0,l.pluralize(t.context.ngIf.tissueSamplesCount,"Tissue sample")),n(t,9,0,l.pluralize(t.context.ngIf.tissueSlicesCount,"Tissue slice")),n(t,11,0,l.pluralize(t.context.ngIf.tissueImagesCount,"Tissue image")),n(t,13,0,l.pluralize(t.context.ngIf.cells,"Cell"))}))}function j(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),u.tb(1,0,[["overlayElem",1]],null,1,":svg:use",[["class","overlay"]],[[1,"href",0]],[[null,"mouseenter"],[null,"mouseleave"],[null,"click"]],(function(n,t,l){var e=!0,a=n.component;return"click"===t&&(e=!1!==u.Fb(n,2).onClick()&&e),"mouseenter"===t&&(e=!1!==a.organHover(n.context.$implicit.id)&&e),"mouseleave"===t&&(e=!1!==a.clearOrganHover()&&e),e}),null,null)),u.sb(2,16384,null,0,s.p,[s.o,s.a,[8,null],u.D,u.l],{routerLink:[0,"routerLink"]},null),(n()(),u.ib(16777216,null,null,2,null,F)),u.sb(4,16384,null,0,b.l,[u.O,u.L],{ngIf:[0,"ngIf"]},null),u.Hb(131072,b.b,[u.i]),(n()(),u.ib(0,null,null,0))],(function(n,t){var l=t.component;n(t,2,0,l.navigator.createOrganPath(t.context.$implicit.id)),n(t,4,0,u.Nb(t,4,0,u.Fb(t,5).transform(l.bodyService.getCounts(t.context.$implicit))))}),(function(n,t){n(t,1,0,u.xb(1,"",t.context.$implicit.path,"#overlay"))}))}function k(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,8,"div",[["class","organ-metadata"]],null,null,null,null,null)),(n()(),u.tb(1,0,null,null,7,"div",[["class","body"]],null,null,null,null,null)),(n()(),u.tb(2,0,null,null,4,"div",[["class","header"]],null,null,null,null,null)),(n()(),u.tb(3,0,null,null,1,"div",[["class","heading"]],null,null,null,null,null)),(n()(),u.Mb(-1,null,["ORGAN:"])),(n()(),u.tb(5,0,null,null,1,"div",[["class","organ"]],null,null,null,null,null)),(n()(),u.Mb(6,null,["",""])),(n()(),u.tb(7,0,null,null,1,"ccf-metadata",[],null,null,null,p.b,p.a)),u.sb(8,49152,null,0,d.a,[],{metadata:[0,"metadata"]},null)],(function(n,t){n(t,8,0,t.component.metadata)}),(function(n,t){var l=t.component;n(t,6,0,l.capitalize(l.hoverOrganName))}))}function z(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,10,"div",[["class","ccf-ui-body wrapper"]],null,null,null,null,null)),(n()(),u.tb(1,0,null,null,9,"div",[["class","container"]],null,null,null,null,null)),(n()(),u.tb(2,0,null,null,8,"div",[["class","body-details-container"]],null,null,null,null,null)),(n()(),u.tb(3,0,null,null,5,":svg:svg",[["class","body"],["viewBox","0 0 500 1000"]],null,null,null,null,null)),(n()(),u.tb(4,0,[["image",1]],null,1,":svg:use",[],[[1,"href",0]],null,null,null,null)),u.Hb(131072,b.b,[u.i]),(n()(),u.ib(16777216,null,null,2,null,j)),u.sb(7,278528,null,0,b.k,[u.O,u.L,u.r],{ngForOf:[0,"ngForOf"]},null),u.Hb(131072,b.b,[u.i]),(n()(),u.ib(16777216,null,null,1,null,k)),u.sb(10,16384,null,0,b.l,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(n,t){var l=t.component;n(t,7,0,u.Nb(t,7,0,u.Fb(t,8).transform(l.bodyOverlays$))),n(t,10,0,l.metadata)}),(function(n,t){var l=t.component;n(t,4,0,u.xb(1,"",u.Nb(t,4,0,u.Fb(t,5).transform(l.bodyImagePath$)),"body.svg#body"))}))}var B=u.pb("ccf-body",w,(function(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,1,"ccf-body",[],null,null,null,z,I)),u.sb(1,245760,null,0,w,[x,D.a],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),L=l("IP0z"),H=l("e5of"),N=function(){},T=l("zMNK"),$=l("/HVE"),A=l("hOhj"),J=l("1mvM"),R=l("R7m8");l.d(t,"BodyModuleNgFactory",(function(){return E}));var E=u.qb(a,[],(function(n){return u.Cb([u.Db(512,u.k,u.bb,[[8,[o.a,B]],[3,u.k],u.w]),u.Db(4608,b.n,b.m,[u.t,[2,b.D]]),u.Db(4608,c.c,c.c,[c.i,c.e,u.k,c.h,c.f,u.q,u.y,b.d,L.b,[2,b.h]]),u.Db(5120,c.j,c.k,[c.c]),u.Db(4608,x,x,[H.a,h.i]),u.Db(1073742336,b.c,b.c,[]),u.Db(1073742336,s.s,s.s,[[2,s.y],[2,s.o]]),u.Db(1073742336,N,N,[]),u.Db(1073742336,L.a,L.a,[]),u.Db(1073742336,T.g,T.g,[]),u.Db(1073742336,$.b,$.b,[]),u.Db(1073742336,A.c,A.c,[]),u.Db(1073742336,c.g,c.g,[]),u.Db(1073742336,J.a,J.a,[]),u.Db(1073742336,R.a,R.a,[]),u.Db(1073742336,a,a,[]),u.Db(1024,s.l,(function(){return[[{path:"",pathMatch:"full",component:w},{path:"**",redirectTo:""}]]}),[])])}))}}]);