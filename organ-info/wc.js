(()=>{"use strict";var e,d={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return d[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=d,e=[],a.O=(n,r,u,l)=>{if(!r){var c=1/0;for(t=0;t<e.length;t++){for(var[r,u,l]=e[t],i=!0,f=0;f<r.length;f++)(!1&l||c>=l)&&Object.keys(a.O).every(b=>a.O[b](r[f]))?r.splice(f--,1):(i=!1,l<c&&(c=l));if(i){e.splice(t--,1);var o=u();void 0!==o&&(n=o)}}return n}l=l||0;for(var t=e.length;t>0&&e[t-1][2]>l;t--)e[t]=e[t-1];e[t]=[r,u,l]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=u=>0===e[u];var n=(u,l)=>{var f,o,[t,c,i]=l,s=0;for(f in c)a.o(c,f)&&(a.m[f]=c[f]);if(i)var _=i(a);for(u&&u(l);s<t.length;s++)a.o(e,o=t[s])&&e[o]&&e[o][0](),e[t[s]]=0;return a.O(_)},r=self.webpackChunkccf_ui=self.webpackChunkccf_ui||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[429],{138:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const G=HTMLElement;window.HTMLElement=function(){return Reflect.construct(G,[],this.constructor)},HTMLElement.prototype=G.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,G)}()}()},142:()=>{!function(G,ne){"use strict";function he(){var e=Ge.splice(0,Ge.length);for(V=0;e.length;)e.shift().call(null,e.shift())}function ye(e,r){for(var i=0,h=e.length;i<h;i++)je(e[i],r)}function Ve(e){return function(r){L(r)&&(je(r,e),le.length&&ye(r.querySelectorAll(le),e))}}function Ie(e){var r=R.call(e,"is"),i=e.nodeName.toUpperCase(),h=Te.call(Ne,r?st+r.toUpperCase():Xe+i);return r&&-1<h&&!Ze(i,r)?-1:h}function Ze(e,r){return-1<le.indexOf(e+'[is="'+r+'"]')}function Ue(e){var r=e.currentTarget,i=e.attrChange,h=e.attrName,s=e.target,o=e[ot]||2,l=e[pt]||3;!n||s&&s!==r||!r[Ee]||"style"===h||e.prevValue===e.newValue&&(""!==e.newValue||i!==o&&i!==l)||r[Ee](h,i===o?null:e.prevValue,i===l?null:e.newValue)}function et(e){var r=Ve(e);return function(i){Ge.push(r,i.target),V&&clearTimeout(V),V=setTimeout(he,1)}}function de(e){k&&(k=!1,e.currentTarget.removeEventListener(bt,de)),le.length&&ye((e.target||A).querySelectorAll(le),e.detail===pe?pe:Le),z&&function(){for(var e,r=0,i=T.length;r<i;r++)De.contains(e=T[r])||(i--,T.splice(r--,1),je(e,pe))}()}function ve(e,r){var i=this;$.call(i,e,r),xe.call(i,{target:i})}function Ae(e,r,i){var h=r.apply(e,i),s=Ie(h);return-1<s&&ae(h,Ye[s]),i.pop()&&le.length&&function(e){for(var r,i=0,h=e.length;i<h;i++)ae(r=e[i],Ye[Ie(r)])}(h.querySelectorAll(le)),h}function Be(e,r){b(e,r),We?We.observe(e,oe):(I&&(e.setAttribute=ve,e[me]=nt(e),e[be](Et,xe)),e[be](He,Ue)),e[qe]&&n&&(e.created=!0,e[qe](),e.created=!1)}function U(e){throw new Error("A "+e+" type is already registered")}function je(e,r){var i,h,s=Ie(e);-1<s&&!B.call(e,"TEMPLATE")&&(we(e,Ye[s]),s=0,r!==Le||e[Le]?r!==pe||e[pe]||(e[Le]=!1,e[pe]=!0,h="disconnected",s=1):(e[pe]=!1,e[Le]=!0,h="connected",s=1,z&&Te.call(T,e)<0&&T.push(e)),s&&(i=e[r+ce]||e[h+ce])&&i.call(e))}function ke(){}function J(e,r,i){var h=i&&i[te]||"",s=r.prototype,o=w(s),l=r.observedAttributes||Oe,d={prototype:o};x(o,qe,{value:function(){if(f)f=!1;else if(!this[Je]){this[Je]=!0,new r(this),s[qe]&&s[qe].call(this);var p=m[v.get(r)];(!t||p.create.length>1)&&tt(this)}}}),x(o,Ee,{value:function(p){-1<Te.call(l,p)&&s[Ee]&&s[Ee].apply(this,arguments)}}),s[rt]&&x(o,vt,{value:s[rt]}),s[mt]&&x(o,kt,{value:s[mt]}),h&&(d[te]=h),e=e.toUpperCase(),m[e]={constructor:r,create:h?[h,C(e)]:[e]},v.set(r,e),A[se](e.toLowerCase(),d),ut(e),E[e].r()}function gt(e){var r=m[e.toUpperCase()];return r&&r.constructor}function yt(e){return"string"==typeof e?e:e&&e.is||""}function tt(e){for(var r,i=e[Ee],h=i?e.attributes:Oe,s=h.length;s--;)i.call(e,(r=h[s]).name||r.nodeName,null,r.value||r.nodeValue)}function ut(e){return(e=e.toUpperCase())in E||(E[e]={},E[e].p=new c(function(r){E[e].r=r})),E[e].p}function ft(){Me&&delete G.customElements,Re(G,"customElements",{configurable:!0,value:new ke}),Re(G,"CustomElementRegistry",{configurable:!0,value:ke});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),r=e.length;r--;function(i){var h=G[i];if(h){G[i]=function(s){var o,l;return s||(s=this),s[Je]||(f=!0,o=m[v.get(s.constructor)],(s=(l=t&&1===o.create.length)?Reflect.construct(h,Oe,o.constructor):A.createElement.apply(A,o.create))[Je]=!0,f=!1,l||tt(s)),s},G[i].prototype=h.prototype;try{h.prototype.constructor=G[i]}catch(s){Re(h,Je,{value:G[i]})}}}(e[r]));A.createElement=function(i,h){var s=yt(h);return s?H.call(this,i,C(s)):H.call(this,i)},ue||(X=!0,A[se](""))}var A=G.document,re=G.Object,ht=function(e){var r,i,h,s,o=/^[A-Z]+[a-z]/,d=function(_,g){(g=g.toLowerCase())in p||(p[_]=(p[_]||[]).concat(g),p[g]=p[g.toUpperCase()]=_)},p=(re.create||re)(null),y={};for(i in e)for(s in e[i])for(p[s]=h=e[i][s],r=0;r<h.length;r++)p[h[r].toLowerCase()]=p[h[r].toUpperCase()]=s;return y.get=function(_){return"string"==typeof _?p[_]||(o.test(_)?[]:""):function(_){var g,M=[];for(g in p)_.test(g)&&M.push(g);return M}(_)},y.set=function(_,g){return o.test(_)?d(_,g):d(g,_),y},y}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ne&&(ne={type:ne||"auto"});var Ge,xe,ze,nt,We,ie,we,ae,Ce,e,r,i,h,s,se="registerElement",dt=1e5*G.Math.random()>>0,me="__"+se+dt,be="addEventListener",Le="attached",ce="Callback",pe="detached",te="extends",Ee="attributeChanged"+ce,vt=Le+ce,rt="connected"+ce,mt="disconnected"+ce,qe="created"+ce,kt=pe+ce,ot="ADDITION",pt="REMOVAL",He="DOMAttrModified",bt="DOMContentLoaded",Et="DOMSubtreeModified",Xe="<",st="=",Mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,wt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ne=[],Ye=[],le="",De=A.documentElement,Te=Ne.indexOf||function(e){for(var r=this.length;r--&&this[r]!==e;);return r},it=re.prototype,Pe=it.hasOwnProperty,at=it.isPrototypeOf,Re=re.defineProperty,Oe=[],Ke=re.getOwnPropertyDescriptor,Y=re.getOwnPropertyNames,Ct=re.getPrototypeOf,$e=re.setPrototypeOf,Se=!!re.__proto__,Je="__dreCEv1",Me=G.customElements,t=!/^force/.test(ne.type)&&!!(Me&&Me.define&&Me.get&&Me.whenDefined),a=re.create||re,u=G.Map||function(){var e,r=[],i=[];return{get:function(h){return i[Te.call(r,h)]},set:function(h,s){(e=Te.call(r,h))<0?i[r.push(h)-1]=s:i[e]=s}}},c=G.Promise||function(e){function r(o){for(h=!0;i.length;)i.shift()(o)}var i=[],h=!1,s={catch:function(){return s},then:function(o){return i.push(o),h&&setTimeout(r,1),s}};return e(r),s},f=!1,m=a(null),E=a(null),v=new u,C=function(e){return e.toLowerCase()},w=re.create||function e(r){return r?(e.prototype=r,new e):this},b=$e||(Se?function(e,r){return e.__proto__=r,e}:Y&&Ke?function(){function e(r,i){for(var h,s=Y(i),o=0,l=s.length;o<l;o++)Pe.call(r,h=s[o])||Re(r,h,Ke(i,h))}return function(r,i){do{e(r,i)}while((i=Ct(i))&&!at.call(i,r));return r}}():function(e,r){for(var i in r)e[i]=r[i];return e}),N=G.MutationObserver||G.WebKitMutationObserver,S=G.HTMLAnchorElement,P=(G.HTMLElement||G.Element||G.Node).prototype,z=!at.call(P,De),x=z?function(e,r,i){return e[r]=i.value,e}:Re,L=z?function(e){return 1===e.nodeType}:function(e){return at.call(P,e)},T=z&&[],Z=P.attachShadow,W=P.cloneNode,B=P.closest||function(e){for(var r=this;r&&r.nodeName!==e;)r=r.parentNode;return r},K=P.dispatchEvent,R=P.getAttribute,Q=P.hasAttribute,F=P.removeAttribute,$=P.setAttribute,O=A.createElement,j=A.importNode,H=O,oe=N&&{attributes:!0,characterData:!0,attributeOldValue:!0},_e=N||function(e){I=!1,De.removeEventListener(He,_e)},V=0,ue=se in A&&!/^force-all/.test(ne.type),fe=!0,X=!1,I=!0,k=!0,n=!0;if(N&&((Ce=A.createElement("div")).innerHTML="<div><div></div></div>",new N(function(e,r){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var i=(Ce=Ke(P,"innerHTML"))&&Ce.set;i&&Re(P,"innerHTML",{set:function(h){for(;this.lastChild;)this.removeChild(this.lastChild);i.call(this,h)}})}r.disconnect(),Ce=null}).observe(Ce,{childList:!0,subtree:!0}),Ce.innerHTML=""),ue||($e||Se?(we=function(e,r){at.call(r,e)||Be(e,r)},ae=Be):ae=we=function(e,r){e[me]||(e[me]=re(!0),Be(e,r))},z?(I=!1,e=Ke(P,be),r=e.value,i=function(o){var l=new CustomEvent(He,{bubbles:!0});l.attrName=o,l.prevValue=R.call(this,o),l.newValue=null,l[pt]=l.attrChange=2,F.call(this,o),K.call(this,l)},h=function(o,l){var d=Q.call(this,o),p=d&&R.call(this,o),y=new CustomEvent(He,{bubbles:!0});$.call(this,o,l),y.attrName=o,y.prevValue=d?p:null,y.newValue=l,d?y.MODIFICATION=y.attrChange=1:y[ot]=y.attrChange=0,K.call(this,y)},s=function(o){var l,d=o.currentTarget,p=d[me],y=o.propertyName;p.hasOwnProperty(y)&&(p=p[y],(l=new CustomEvent(He,{bubbles:!0})).attrName=p.name,l.prevValue=p.value||null,l.newValue=p.value=d[y]||null,null==l.prevValue?l[ot]=l.attrChange=0:l.MODIFICATION=l.attrChange=1,K.call(d,l))},e.value=function(o,l,d){o===He&&this[Ee]&&this.setAttribute!==h&&(this[me]={className:{name:"class",value:this.className}},this.setAttribute=h,this.removeAttribute=i,r.call(this,"propertychange",s)),r.call(this,o,l,d)},Re(P,be,e)):N||(De[be](He,_e),De.setAttribute(me,1),De.removeAttribute(me),I&&(xe=function(e){var r,i,h,s=this;if(s===e.target){for(h in r=s[me],s[me]=i=nt(s),i){if(!(h in r))return ze(0,s,h,r[h],i[h],ot);if(i[h]!==r[h])return ze(1,s,h,r[h],i[h],"MODIFICATION")}for(h in r)if(!(h in i))return ze(2,s,h,r[h],i[h],pt)}},ze=function(e,r,i,h,s,o){var l={attrChange:e,currentTarget:r,attrName:i,prevValue:h,newValue:s};l[o]=e,Ue(l)},nt=function(e){for(var r,i,h={},s=e.attributes,o=0,l=s.length;o<l;o++)"setAttribute"!==(i=(r=s[o]).name)&&(h[i]=r.value);return h})),A[se]=function(e,r){if(i=e.toUpperCase(),fe&&(fe=!1,N?(We=function(p,y){function _(g,M){for(var D=0,q=g.length;D<q;M(g[D++]));}return new N(function(g){for(var M,D,q,ee=0,ge=g.length;ee<ge;ee++)"childList"===(M=g[ee]).type?(_(M.addedNodes,p),_(M.removedNodes,y)):(D=M.target,n&&D[Ee]&&"style"!==M.attributeName&&(q=R.call(D,M.attributeName))!==M.oldValue&&D[Ee](M.attributeName,M.oldValue,q))})}(Ve(Le),Ve(pe)),(ie=function(p){return We.observe(p,{childList:!0,subtree:!0}),p})(A),Z&&(P.attachShadow=function(){return ie(Z.apply(this,arguments))})):(Ge=[],A[be]("DOMNodeInserted",et(Le)),A[be]("DOMNodeRemoved",et(pe))),A[be](bt,de),A[be]("readystatechange",de),A.importNode=function(p,y){switch(p.nodeType){case 1:return Ae(A,j,[p,!!y]);case 11:for(var _=A.createDocumentFragment(),g=p.childNodes,M=g.length,D=0;D<M;D++)_.appendChild(A.importNode(g[D],!!y));return _;default:return W.call(p,!!y)}},P.cloneNode=function(p){return Ae(this,W,[!!p])}),X)return X=!1;if(-2<Te.call(Ne,st+i)+Te.call(Ne,Xe+i)&&U(e),!Mt.test(i)||-1<Te.call(wt,i))throw new Error("The type "+e+" is invalid");var i,h,s=function(){return l?A.createElement(d,i):A.createElement(d)},o=r||it,l=Pe.call(o,te),d=l?r[te].toUpperCase():i;return l&&-1<Te.call(Ne,Xe+d)&&U(d),h=Ne.push((l?st:Xe)+i)-1,le=le.concat(le.length?",":"",l?d+'[is="'+e.toLowerCase()+'"]':d),s.prototype=Ye[h]=Pe.call(o,"prototype")?o.prototype:w(P),le.length&&ye(A.querySelectorAll(le),Le),s},A.createElement=H=function(e,r){var i=yt(r),h=i?O.call(A,e,C(i)):O.call(A,e),s=""+e,o=Te.call(Ne,(i?st:Xe)+(i||s).toUpperCase()),l=-1<o;return i&&(h.setAttribute("is",i=i.toLowerCase()),l&&(l=Ze(s.toUpperCase(),i))),n=!A.createElement.innerHTMLHelper,l&&ae(h,Ye[o]),h}),addEventListener("beforeunload",function(){delete A.createElement,delete A.importNode,delete A[se]},!1),ke.prototype={constructor:ke,define:t?function(e,r,i){if(i)J(e,r,i);else{var h=e.toUpperCase();m[h]={constructor:r,create:[h]},v.set(r,h),Me.define(e,r)}}:J,get:t?function(e){return Me.get(e)||gt(e)}:gt,whenDefined:t?function(e){return c.race([Me.whenDefined(e),ut(e)])}:ut},!Me||/^force/.test(ne.type))ft();else if(!ne.noBuiltIn)try{!function(e,r,i){var h=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(r[te]="a",(e.prototype=w(S.prototype)).constructor=e,G.customElements.define(i,e,r),!h.test(A.createElement("a",{is:i}).outerHTML)||!h.test((new e).outerHTML))throw r}(function e(){return Reflect.construct(S,[],e)},{},"document-register-element-a"+dt)}catch(e){ft()}if(!ne.noBuiltIn)try{if(O.call(A,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){C=function(r){return{is:r.toLowerCase()}}}}(window)},277:()=>{"use strict";!function(t){const a=t.performance;function u(I){a&&a.mark&&a.mark(I)}function c(I,k){a&&a.measure&&a.measure(I,k)}u("Zone");const f=t.__Zone_symbol_prefix||"__zone_symbol__";function m(I){return f+I}const E=!0===t[m("forceDuplicateZoneCheck")];if(t.Zone){if(E||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let v=(()=>{class I{constructor(n,e){this._parent=n,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new w(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=I.current;for(;n.parent;)n=n.parent;return n}static get current(){return V.zone}static get currentTask(){return ue}static __load_patch(n,e,r=!1){if(oe.hasOwnProperty(n)){if(!r&&E)throw Error("Already loaded patch: "+n)}else if(!t["__Zone_disable_"+n]){const i="Zone:"+n;u(i),oe[n]=e(t,I,_e),c(i,i)}}get parent(){return this._parent}get name(){return this._name}get(n){const e=this.getZoneWith(n);if(e)return e._properties[n]}getZoneWith(n){let e=this;for(;e;){if(e._properties.hasOwnProperty(n))return e;e=e._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,e){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const r=this._zoneDelegate.intercept(this,n,e),i=this;return function(){return i.runGuarded(r,this,arguments,e)}}run(n,e,r,i){V={parent:V,zone:this};try{return this._zoneDelegate.invoke(this,n,e,r,i)}finally{V=V.parent}}runGuarded(n,e=null,r,i){V={parent:V,zone:this};try{try{return this._zoneDelegate.invoke(this,n,e,r,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{V=V.parent}}runTask(n,e,r){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");if(n.state===B&&(n.type===H||n.type===j))return;const i=n.state!=Q;i&&n._transitionTo(Q,R),n.runCount++;const h=ue;ue=n,V={parent:V,zone:this};try{n.type==j&&n.data&&!n.data.isPeriodic&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,n,e,r)}catch(s){if(this._zoneDelegate.handleError(this,s))throw s}}finally{n.state!==B&&n.state!==$&&(n.type==H||n.data&&n.data.isPeriodic?i&&n._transitionTo(R,Q):(n.runCount=0,this._updateTaskCount(n,-1),i&&n._transitionTo(B,Q,B))),V=V.parent,ue=h}}scheduleTask(n){if(n.zone&&n.zone!==this){let r=this;for(;r;){if(r===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);r=r.parent}}n._transitionTo(K,B);const e=[];n._zoneDelegates=e,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(r){throw n._transitionTo($,K,B),this._zoneDelegate.handleError(this,r),r}return n._zoneDelegates===e&&this._updateTaskCount(n,1),n.state==K&&n._transitionTo(R,K),n}scheduleMicroTask(n,e,r,i){return this.scheduleTask(new b(O,n,e,r,i,void 0))}scheduleMacroTask(n,e,r,i,h){return this.scheduleTask(new b(j,n,e,r,i,h))}scheduleEventTask(n,e,r,i,h){return this.scheduleTask(new b(H,n,e,r,i,h))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");n._transitionTo(F,R,Q);try{this._zoneDelegate.cancelTask(this,n)}catch(e){throw n._transitionTo($,F),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(n,-1),n._transitionTo(B,F),n.runCount=0,n}_updateTaskCount(n,e){const r=n._zoneDelegates;-1==e&&(n._zoneDelegates=null);for(let i=0;i<r.length;i++)r[i]._updateTaskCount(n.type,e)}}return I.__symbol__=m,I})();const C={name:"",onHasTask:(I,k,n,e)=>I.hasTask(n,e),onScheduleTask:(I,k,n,e)=>I.scheduleTask(n,e),onInvokeTask:(I,k,n,e,r,i)=>I.invokeTask(n,e,r,i),onCancelTask:(I,k,n,e)=>I.cancelTask(n,e)};class w{constructor(k,n,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=k,this._parentDelegate=n,this._forkZS=e&&(e&&e.onFork?e:n._forkZS),this._forkDlgt=e&&(e.onFork?n:n._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:n._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:n._interceptZS),this._interceptDlgt=e&&(e.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:n._invokeZS),this._invokeDlgt=e&&(e.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:n._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:n._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:n._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:n._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=e&&e.onHasTask;(r||n&&n._hasTaskZS)&&(this._hasTaskZS=r?e:C,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=k,e.onScheduleTask||(this._scheduleTaskZS=C,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=C,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=C,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}fork(k,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,k,n):new v(k,n)}intercept(k,n,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,k,n,e):n}invoke(k,n,e,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,k,n,e,r,i):n.apply(e,r)}handleError(k,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,k,n)}scheduleTask(k,n){let e=n;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,k,n),e||(e=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=O)throw new Error("Task is missing scheduleFn.");T(n)}return e}invokeTask(k,n,e,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,k,n,e,r):n.callback.apply(e,r)}cancelTask(k,n){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,k,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");e=n.cancelFn(n)}return e}hasTask(k,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,k,n)}catch(e){this.handleError(k,e)}}_updateTaskCount(k,n){const e=this._taskCounts,r=e[k],i=e[k]=r+n;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:k})}}class b{constructor(k,n,e,r,i,h){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=k,this.source=n,this.data=r,this.scheduleFn=i,this.cancelFn=h,!e)throw new Error("callback is not defined");this.callback=e;const s=this;this.invoke=k===H&&r&&r.useG?b.invokeTask:function(){return b.invokeTask.call(t,s,this,arguments)}}static invokeTask(k,n,e){k||(k=this),fe++;try{return k.runCount++,k.zone.runTask(k,n,e)}finally{1==fe&&Z(),fe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(B,K)}_transitionTo(k,n,e){if(this._state!==n&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${k}', expecting state '${n}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=k,k==B&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const N=m("setTimeout"),S=m("Promise"),P=m("then");let L,z=[],x=!1;function T(I){if(0===fe&&0===z.length)if(L||t[S]&&(L=t[S].resolve(0)),L){let k=L[P];k||(k=L.then),k.call(L,Z)}else t[N](Z,0);I&&z.push(I)}function Z(){if(!x){for(x=!0;z.length;){const I=z;z=[];for(let k=0;k<I.length;k++){const n=I[k];try{n.zone.runTask(n,null,null)}catch(e){_e.onUnhandledError(e)}}}_e.microtaskDrainDone(),x=!1}}const W={name:"NO ZONE"},B="notScheduled",K="scheduling",R="scheduled",Q="running",F="canceling",$="unknown",O="microTask",j="macroTask",H="eventTask",oe={},_e={symbol:m,currentZoneFrame:()=>V,onUnhandledError:X,microtaskDrainDone:X,scheduleMicroTask:T,showUncaughtError:()=>!v[m("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:X,patchMethod:()=>X,bindArguments:()=>[],patchThen:()=>X,patchMacroTask:()=>X,patchEventPrototype:()=>X,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>X,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>X,wrapWithCurrentZone:()=>X,filterProperties:()=>[],attachOriginToPatched:()=>X,_redefineProperty:()=>X,patchCallbacks:()=>X};let V={parent:null,zone:new v(null,null)},ue=null,fe=0;function X(){}c("Zone","Zone"),t.Zone=v}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const ne=Object.getOwnPropertyDescriptor,he=Object.defineProperty,ye=Object.getPrototypeOf,_t=Object.create,Ve=Array.prototype.slice,Ie="addEventListener",Ze="removeEventListener",Ue=Zone.__symbol__(Ie),et=Zone.__symbol__(Ze),de="true",ve="false",Ae=Zone.__symbol__("");function Be(t,a){return Zone.current.wrap(t,a)}function lt(t,a,u,c,f){return Zone.current.scheduleMacroTask(t,a,u,c,f)}const U=Zone.__symbol__,je="undefined"!=typeof window,ke=je?window:void 0,J=je&&ke||"object"==typeof self&&self||global,yt=[null];function tt(t,a){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=Be(t[u],a+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,re=!("nw"in J)&&void 0!==J.process&&"[object process]"==={}.toString.call(J.process),ht=!re&&!A&&!(!je||!ke.HTMLElement),Ge=void 0!==J.process&&"[object process]"==={}.toString.call(J.process)&&!A&&!(!je||!ke.HTMLElement),xe={},ze=function(t){if(!(t=t||J.event))return;let a=xe[t.type];a||(a=xe[t.type]=U("ON_PROPERTY"+t.type));const u=this||t.target||J,c=u[a];let f;if(ht&&u===ke&&"error"===t.type){const m=t;f=c&&c.call(this,m.message,m.filename,m.lineno,m.colno,m.error),!0===f&&t.preventDefault()}else f=c&&c.apply(this,arguments),null!=f&&!f&&t.preventDefault();return f};function nt(t,a,u){let c=ne(t,a);if(!c&&u&&ne(u,a)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const f=U("on"+a+"patched");if(t.hasOwnProperty(f)&&t[f])return;delete c.writable,delete c.value;const m=c.get,E=c.set,v=a.substr(2);let C=xe[v];C||(C=xe[v]=U("ON_PROPERTY"+v)),c.set=function(w){let b=this;!b&&t===J&&(b=J),b&&(b[C]&&b.removeEventListener(v,ze),E&&E.apply(b,yt),"function"==typeof w?(b[C]=w,b.addEventListener(v,ze,!1)):b[C]=null)},c.get=function(){let w=this;if(!w&&t===J&&(w=J),!w)return null;const b=w[C];if(b)return b;if(m){let N=m&&m.call(this);if(N)return c.set.call(this,N),"function"==typeof w.removeAttribute&&w.removeAttribute(a),N}return null},he(t,a,c),t[f]=!0}function We(t,a,u){if(a)for(let c=0;c<a.length;c++)nt(t,"on"+a[c],u);else{const c=[];for(const f in t)"on"==f.substr(0,2)&&c.push(f);for(let f=0;f<c.length;f++)nt(t,c[f],u)}}const ie=U("originalInstance");function we(t){const a=J[t];if(!a)return;J[U(t)]=a,J[t]=function(){const f=tt(arguments,t);switch(f.length){case 0:this[ie]=new a;break;case 1:this[ie]=new a(f[0]);break;case 2:this[ie]=new a(f[0],f[1]);break;case 3:this[ie]=new a(f[0],f[1],f[2]);break;case 4:this[ie]=new a(f[0],f[1],f[2],f[3]);break;default:throw new Error("Arg list too long.")}},se(J[t],a);const u=new a(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(f){"function"==typeof u[f]?J[t].prototype[f]=function(){return this[ie][f].apply(this[ie],arguments)}:he(J[t].prototype,f,{set:function(m){"function"==typeof m?(this[ie][f]=Be(m,t+"."+f),se(this[ie][f],m)):this[ie][f]=m},get:function(){return this[ie][f]}})}(c);for(c in a)"prototype"!==c&&a.hasOwnProperty(c)&&(J[t][c]=a[c])}function ae(t,a,u){let c=t;for(;c&&!c.hasOwnProperty(a);)c=ye(c);!c&&t[a]&&(c=t);const f=U(a);let m=null;if(c&&(!(m=c[f])||!c.hasOwnProperty(f))&&(m=c[f]=c[a],ft(c&&ne(c,a)))){const v=u(m,f,a);c[a]=function(){return v(this,arguments)},se(c[a],m)}return m}function Ce(t,a,u){let c=null;function f(m){const E=m.data;return E.args[E.cbIdx]=function(){m.invoke.apply(this,arguments)},c.apply(E.target,E.args),m}c=ae(t,a,m=>function(E,v){const C=u(E,v);return C.cbIdx>=0&&"function"==typeof v[C.cbIdx]?lt(C.name,v[C.cbIdx],C,f):m.apply(E,v)})}function se(t,a){t[U("OriginalDelegate")]=a}let dt=!1,me=!1;function Le(){if(dt)return me;dt=!0;try{const t=ke.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(me=!0)}catch(t){}return me}Zone.__load_patch("ZoneAwarePromise",(t,a,u)=>{const c=Object.getOwnPropertyDescriptor,f=Object.defineProperty,E=u.symbol,v=[],C=!0===t[E("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],w=E("Promise"),b=E("then");u.onUnhandledError=s=>{if(u.showUncaughtError()){const o=s&&s.rejection;o?console.error("Unhandled Promise rejection:",o instanceof Error?o.message:o,"; Zone:",s.zone.name,"; Task:",s.task&&s.task.source,"; Value:",o,o instanceof Error?o.stack:void 0):console.error(s)}},u.microtaskDrainDone=()=>{for(;v.length;){const s=v.shift();try{s.zone.runGuarded(()=>{throw s.throwOriginal?s.rejection:s})}catch(o){P(o)}}};const S=E("unhandledPromiseRejectionHandler");function P(s){u.onUnhandledError(s);try{const o=a[S];"function"==typeof o&&o.call(this,s)}catch(o){}}function z(s){return s&&s.then}function x(s){return s}function L(s){return n.reject(s)}const T=E("state"),Z=E("value"),W=E("finally"),B=E("parentPromiseValue"),K=E("parentPromiseState"),Q=null,F=!0,$=!1;function j(s,o){return l=>{try{V(s,o,l)}catch(d){V(s,!1,d)}}}const _e=E("currentTaskTrace");function V(s,o,l){const d=function(){let s=!1;return function(l){return function(){s||(s=!0,l.apply(null,arguments))}}}();if(s===l)throw new TypeError("Promise resolved with itself");if(s[T]===Q){let p=null;try{("object"==typeof l||"function"==typeof l)&&(p=l&&l.then)}catch(y){return d(()=>{V(s,!1,y)})(),s}if(o!==$&&l instanceof n&&l.hasOwnProperty(T)&&l.hasOwnProperty(Z)&&l[T]!==Q)fe(l),V(s,l[T],l[Z]);else if(o!==$&&"function"==typeof p)try{p.call(l,d(j(s,o)),d(j(s,!1)))}catch(y){d(()=>{V(s,!1,y)})()}else{s[T]=o;const y=s[Z];if(s[Z]=l,s[W]===W&&o===F&&(s[T]=s[K],s[Z]=s[B]),o===$&&l instanceof Error){const _=a.currentTask&&a.currentTask.data&&a.currentTask.data.__creationTrace__;_&&f(l,_e,{configurable:!0,enumerable:!1,writable:!0,value:_})}for(let _=0;_<y.length;)X(s,y[_++],y[_++],y[_++],y[_++]);if(0==y.length&&o==$){s[T]=0;let _=l;try{throw new Error("Uncaught (in promise): "+function(s){return s&&s.toString===Object.prototype.toString?(s.constructor&&s.constructor.name||"")+": "+JSON.stringify(s):s?s.toString():Object.prototype.toString.call(s)}(l)+(l&&l.stack?"\n"+l.stack:""))}catch(g){_=g}C&&(_.throwOriginal=!0),_.rejection=l,_.promise=s,_.zone=a.current,_.task=a.currentTask,v.push(_),u.scheduleMicroTask()}}}return s}const ue=E("rejectionHandledHandler");function fe(s){if(0===s[T]){try{const o=a[ue];o&&"function"==typeof o&&o.call(this,{rejection:s[Z],promise:s})}catch(o){}s[T]=$;for(let o=0;o<v.length;o++)s===v[o].promise&&v.splice(o,1)}}function X(s,o,l,d,p){fe(s);const y=s[T],_=y?"function"==typeof d?d:x:"function"==typeof p?p:L;o.scheduleMicroTask("Promise.then",()=>{try{const g=s[Z],M=!!l&&W===l[W];M&&(l[B]=g,l[K]=y);const D=o.run(_,void 0,M&&_!==L&&_!==x?[]:[g]);V(l,!0,D)}catch(g){V(l,!1,g)}},l)}const k=function(){};class n{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(o){return V(new this(null),F,o)}static reject(o){return V(new this(null),$,o)}static race(o){let l,d,p=new this((g,M)=>{l=g,d=M});function y(g){l(g)}function _(g){d(g)}for(let g of o)z(g)||(g=this.resolve(g)),g.then(y,_);return p}static all(o){return n.allWithCallback(o)}static allSettled(o){return(this&&this.prototype instanceof n?this:n).allWithCallback(o,{thenCallback:d=>({status:"fulfilled",value:d}),errorCallback:d=>({status:"rejected",reason:d})})}static allWithCallback(o,l){let d,p,y=new this((D,q)=>{d=D,p=q}),_=2,g=0;const M=[];for(let D of o){z(D)||(D=this.resolve(D));const q=g;try{D.then(ee=>{M[q]=l?l.thenCallback(ee):ee,_--,0===_&&d(M)},ee=>{l?(M[q]=l.errorCallback(ee),_--,0===_&&d(M)):p(ee)})}catch(ee){p(ee)}_++,g++}return _-=2,0===_&&d(M),y}constructor(o){const l=this;if(!(l instanceof n))throw new Error("Must be an instanceof Promise.");l[T]=Q,l[Z]=[];try{o&&o(j(l,F),j(l,$))}catch(d){V(l,!1,d)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return n}then(o,l){let d=this.constructor[Symbol.species];(!d||"function"!=typeof d)&&(d=this.constructor||n);const p=new d(k),y=a.current;return this[T]==Q?this[Z].push(y,p,o,l):X(this,y,p,o,l),p}catch(o){return this.then(null,o)}finally(o){let l=this.constructor[Symbol.species];(!l||"function"!=typeof l)&&(l=n);const d=new l(k);d[W]=W;const p=a.current;return this[T]==Q?this[Z].push(p,d,o,o):X(this,p,d,o,o),d}}n.resolve=n.resolve,n.reject=n.reject,n.race=n.race,n.all=n.all;const e=t[w]=t.Promise;t.Promise=n;const r=E("thenPatched");function i(s){const o=s.prototype,l=c(o,"then");if(l&&(!1===l.writable||!l.configurable))return;const d=o.then;o[b]=d,s.prototype.then=function(p,y){return new n((g,M)=>{d.call(this,g,M)}).then(p,y)},s[r]=!0}return u.patchThen=i,e&&(i(e),ae(t,"fetch",s=>function(s){return function(o,l){let d=s.apply(o,l);if(d instanceof n)return d;let p=d.constructor;return p[r]||i(p),d}}(s))),Promise[a.__symbol__("uncaughtPromiseErrors")]=v,n}),Zone.__load_patch("toString",t=>{const a=Function.prototype.toString,u=U("OriginalDelegate"),c=U("Promise"),f=U("Error"),m=function(){if("function"==typeof this){const w=this[u];if(w)return"function"==typeof w?a.call(w):Object.prototype.toString.call(w);if(this===Promise){const b=t[c];if(b)return a.call(b)}if(this===Error){const b=t[f];if(b)return a.call(b)}}return a.call(this)};m[u]=a,Function.prototype.toString=m;const E=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":E.call(this)}});let ce=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){ce=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){ce=!1}const pe={useG:!0},te={},Ee={},vt=new RegExp("^"+Ae+"(\\w+)(true|false)$"),rt=U("propagationStopped");function mt(t,a){const u=(a?a(t):t)+ve,c=(a?a(t):t)+de,f=Ae+u,m=Ae+c;te[t]={},te[t][ve]=f,te[t][de]=m}function qe(t,a,u){const c=u&&u.add||Ie,f=u&&u.rm||Ze,m=u&&u.listeners||"eventListeners",E=u&&u.rmAll||"removeAllListeners",v=U(c),C="."+c+":",N=function(L,T,Z){if(L.isRemoved)return;const W=L.callback;"object"==typeof W&&W.handleEvent&&(L.callback=K=>W.handleEvent(K),L.originalDelegate=W),L.invoke(L,T,[Z]);const B=L.options;B&&"object"==typeof B&&B.once&&T[f].call(T,Z.type,L.originalDelegate?L.originalDelegate:L.callback,B)},S=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][ve]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}},P=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][de]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}};function z(L,T){if(!L)return!1;let Z=!0;T&&void 0!==T.useG&&(Z=T.useG);const W=T&&T.vh;let B=!0;T&&void 0!==T.chkDup&&(B=T.chkDup);let K=!1;T&&void 0!==T.rt&&(K=T.rt);let R=L;for(;R&&!R.hasOwnProperty(c);)R=ye(R);if(!R&&L[c]&&(R=L),!R||R[v])return!1;const Q=T&&T.eventNameToString,F={},$=R[v]=R[c],O=R[U(f)]=R[f],j=R[U(m)]=R[m],H=R[U(E)]=R[E];let oe;function _e(o,l){return!ce&&"object"==typeof o&&o?!!o.capture:ce&&l?"boolean"==typeof o?{capture:o,passive:!0}:o?"object"==typeof o&&!1!==o.passive?Object.assign(Object.assign({},o),{passive:!0}):o:{passive:!0}:o}T&&T.prepend&&(oe=R[U(T.prepend)]=R[T.prepend]);const k=Z?function(o){if(!F.isExisting)return $.call(F.target,F.eventName,F.capture?P:S,F.options)}:function(o){return $.call(F.target,F.eventName,o.invoke,F.options)},n=Z?function(o){if(!o.isRemoved){const l=te[o.eventName];let d;l&&(d=l[o.capture?de:ve]);const p=d&&o.target[d];if(p)for(let y=0;y<p.length;y++)if(p[y]===o){p.splice(y,1),o.isRemoved=!0,0===p.length&&(o.allRemoved=!0,o.target[d]=null);break}}if(o.allRemoved)return O.call(o.target,o.eventName,o.capture?P:S,o.options)}:function(o){return O.call(o.target,o.eventName,o.invoke,o.options)},r=T&&T.diff?T.diff:function(o,l){const d=typeof l;return"function"===d&&o.callback===l||"object"===d&&o.originalDelegate===l},i=Zone[U("UNPATCHED_EVENTS")],h=t[U("PASSIVE_EVENTS")],s=function(o,l,d,p,y=!1,_=!1){return function(){const g=this||t;let M=arguments[0];T&&T.transferEventName&&(M=T.transferEventName(M));let D=arguments[1];if(!D)return o.apply(this,arguments);if(re&&"uncaughtException"===M)return o.apply(this,arguments);let q=!1;if("function"!=typeof D){if(!D.handleEvent)return o.apply(this,arguments);q=!0}if(W&&!W(o,D,g,arguments))return;const ee=ce&&!!h&&-1!==h.indexOf(M),ge=_e(arguments[2],ee);if(i)for(let Qe=0;Qe<i.length;Qe++)if(M===i[Qe])return ee?o.call(g,M,D,ge):o.apply(this,arguments);const Ot=!!ge&&("boolean"==typeof ge||ge.capture),Nt=!(!ge||"object"!=typeof ge)&&ge.once,Zt=Zone.current;let Ht=te[M];Ht||(mt(M,Q),Ht=te[M]);const Dt=Ht[Ot?de:ve];let Lt,ct=g[Dt],Rt=!1;if(ct){if(Rt=!0,B)for(let Qe=0;Qe<ct.length;Qe++)if(r(ct[Qe],D))return}else ct=g[Dt]=[];const St=g.constructor.name,It=Ee[St];It&&(Lt=It[M]),Lt||(Lt=St+l+(Q?Q(M):M)),F.options=ge,Nt&&(F.options.once=!1),F.target=g,F.capture=Ot,F.eventName=M,F.isExisting=Rt;const Tt=Z?pe:void 0;Tt&&(Tt.taskData=F);const Fe=Zt.scheduleEventTask(Lt,D,Tt,d,p);return F.target=null,Tt&&(Tt.taskData=null),Nt&&(ge.once=!0),!ce&&"boolean"==typeof Fe.options||(Fe.options=ge),Fe.target=g,Fe.capture=Ot,Fe.eventName=M,q&&(Fe.originalDelegate=D),_?ct.unshift(Fe):ct.push(Fe),y?g:void 0}};return R[c]=s($,C,k,n,K),oe&&(R.prependListener=s(oe,".prependListener:",function(o){return oe.call(F.target,F.eventName,o.invoke,F.options)},n,K,!0)),R[f]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=arguments[2],p=!!d&&("boolean"==typeof d||d.capture),y=arguments[1];if(!y)return O.apply(this,arguments);if(W&&!W(O,y,o,arguments))return;const _=te[l];let g;_&&(g=_[p?de:ve]);const M=g&&o[g];if(M)for(let D=0;D<M.length;D++){const q=M[D];if(r(q,y))return M.splice(D,1),q.isRemoved=!0,0===M.length&&(q.allRemoved=!0,o[g]=null,"string"==typeof l)&&(o[Ae+"ON_PROPERTY"+l]=null),q.zone.cancelTask(q),K?o:void 0}return O.apply(this,arguments)},R[m]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=[],p=kt(o,Q?Q(l):l);for(let y=0;y<p.length;y++){const _=p[y];d.push(_.originalDelegate?_.originalDelegate:_.callback)}return d},R[E]=function(){const o=this||t;let l=arguments[0];if(l){T&&T.transferEventName&&(l=T.transferEventName(l));const d=te[l];if(d){const _=o[d[ve]],g=o[d[de]];if(_){const M=_.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}if(g){const M=g.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}}}else{const d=Object.keys(o);for(let p=0;p<d.length;p++){const _=vt.exec(d[p]);let g=_&&_[1];g&&"removeListener"!==g&&this[E].call(this,g)}this[E].call(this,"removeListener")}if(K)return this},se(R[c],$),se(R[f],O),H&&se(R[E],H),j&&se(R[m],j),!0}let x=[];for(let L=0;L<a.length;L++)x[L]=z(a[L],u);return x}function kt(t,a){if(!a){const m=[];for(let E in t){const v=vt.exec(E);let C=v&&v[1];if(C&&(!a||C===a)){const w=t[E];if(w)for(let b=0;b<w.length;b++)m.push(w[b])}}return m}let u=te[a];u||(mt(a),u=te[a]);const c=t[u[ve]],f=t[u[de]];return c?f?c.concat(f):c.slice():f?f.slice():[]}function ot(t,a){const u=t.Event;u&&u.prototype&&a.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(f,m){f[rt]=!0,c&&c.apply(f,m)})}function pt(t,a,u,c,f){const m=Zone.__symbol__(c);if(a[m])return;const E=a[m]=a[c];a[c]=function(v,C,w){return C&&C.prototype&&f.forEach(function(b){const N=`${u}.${c}::`+b,S=C.prototype;if(S.hasOwnProperty(b)){const P=t.ObjectGetOwnPropertyDescriptor(S,b);P&&P.value?(P.value=t.wrapWithCurrentZone(P.value,N),t._redefineProperty(C.prototype,b,P)):S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}else S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}),E.call(a,v,C,w)},t.attachOriginToPatched(a[c],E)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],st=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],le=["load"],De=["blur","error","focus","load","resize","scroll","messageerror"],Te=["bounce","finish","start"],it=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Pe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],at=["close","error","open","message"],Re=["error","message"],Oe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function Ke(t,a,u){if(!u||0===u.length)return a;const c=u.filter(m=>m.target===t);if(!c||0===c.length)return a;const f=c[0].ignoreProperties;return a.filter(m=>-1===f.indexOf(m))}function Y(t,a,u,c){t&&We(t,Ke(t,a,u),c)}Zone.__load_patch("util",(t,a,u)=>{u.patchOnProperties=We,u.patchMethod=ae,u.bindArguments=tt,u.patchMacroTask=Ce;const c=a.__symbol__("BLACK_LISTED_EVENTS"),f=a.__symbol__("UNPATCHED_EVENTS");t[f]&&(t[c]=t[f]),t[c]&&(a[c]=a[f]=t[c]),u.patchEventPrototype=ot,u.patchEventTarget=qe,u.isIEOrEdge=Le,u.ObjectDefineProperty=he,u.ObjectGetOwnPropertyDescriptor=ne,u.ObjectCreate=_t,u.ArraySlice=Ve,u.patchClass=we,u.wrapWithCurrentZone=Be,u.filterProperties=Ke,u.attachOriginToPatched=se,u._redefineProperty=Object.defineProperty,u.patchCallbacks=pt,u.getGlobalObjects=()=>({globalSources:Ee,zoneSymbolEventNames:te,eventNames:Oe,isBrowser:ht,isMix:Ge,isNode:re,TRUE_STR:de,FALSE_STR:ve,ZONE_SYMBOL_PREFIX:Ae,ADD_EVENT_LISTENER_STR:Ie,REMOVE_EVENT_LISTENER_STR:Ze})});const $e=U("zoneTask");function Se(t,a,u,c){let f=null,m=null;u+=c;const E={};function v(w){const b=w.data;return b.args[0]=function(){return w.invoke.apply(this,arguments)},b.handleId=f.apply(t,b.args),w}function C(w){return m.call(t,w.data.handleId)}f=ae(t,a+=c,w=>function(b,N){if("function"==typeof N[0]){const S={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?N[1]||0:void 0,args:N},P=N[0];N[0]=function(){try{return P.apply(this,arguments)}finally{S.isPeriodic||("number"==typeof S.handleId?delete E[S.handleId]:S.handleId&&(S.handleId[$e]=null))}};const z=lt(a,N[0],S,v,C);if(!z)return z;const x=z.data.handleId;return"number"==typeof x?E[x]=z:x&&(x[$e]=z),x&&x.ref&&x.unref&&"function"==typeof x.ref&&"function"==typeof x.unref&&(z.ref=x.ref.bind(x),z.unref=x.unref.bind(x)),"number"==typeof x||x?x:z}return w.apply(t,N)}),m=ae(t,u,w=>function(b,N){const S=N[0];let P;"number"==typeof S?P=E[S]:(P=S&&S[$e],P||(P=S)),P&&"string"==typeof P.type?"notScheduled"!==P.state&&(P.cancelFn&&P.data.isPeriodic||0===P.runCount)&&("number"==typeof S?delete E[S]:S&&(S[$e]=null),P.zone.cancelTask(P)):w.apply(t,N)})}Zone.__load_patch("legacy",t=>{const a=t[Zone.__symbol__("legacyPatch")];a&&a()}),Zone.__load_patch("queueMicrotask",(t,a,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(f,m){a.current.scheduleMicroTask("queueMicrotask",m[0])})}),Zone.__load_patch("timers",t=>{const a="set",u="clear";Se(t,a,u,"Timeout"),Se(t,a,u,"Interval"),Se(t,a,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{Se(t,"request","cancel","AnimationFrame"),Se(t,"mozRequest","mozCancel","AnimationFrame"),Se(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,a)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ae(t,u[c],(m,E,v)=>function(C,w){return a.current.run(m,t,w,v)})}),Zone.__load_patch("EventTarget",(t,a,u)=>{(function(t,a){a.patchEventPrototype(t,a)})(t,u),function(t,a){if(Zone[a.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:f,FALSE_STR:m,ZONE_SYMBOL_PREFIX:E}=a.getGlobalObjects();for(let C=0;C<u.length;C++){const w=u[C],S=E+(w+m),P=E+(w+f);c[w]={},c[w][m]=S,c[w][f]=P}const v=t.EventTarget;v&&v.prototype&&a.patchEventTarget(t,[v&&v.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,a,u)=>{we("MutationObserver"),we("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,a,u)=>{we("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,a,u)=>{we("FileReader")}),Zone.__load_patch("on_property",(t,a,u)=>{!function(t,a){if(re&&!Ge||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=a.__Zone_ignore_on_properties;if(ht){const E=window,v=function(){try{const t=ke.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:E,ignoreProperties:["error"]}]:[];Y(E,Oe.concat(["messageerror"]),c&&c.concat(v),ye(E)),Y(Document.prototype,Oe,c),void 0!==E.SVGElement&&Y(E.SVGElement.prototype,Oe,c),Y(Element.prototype,Oe,c),Y(HTMLElement.prototype,Oe,c),Y(HTMLMediaElement.prototype,st,c),Y(HTMLFrameSetElement.prototype,Et.concat(De),c),Y(HTMLBodyElement.prototype,Et.concat(De),c),Y(HTMLFrameElement.prototype,le,c),Y(HTMLIFrameElement.prototype,le,c);const C=E.HTMLMarqueeElement;C&&Y(C.prototype,Te,c);const w=E.Worker;w&&Y(w.prototype,Re,c)}const f=a.XMLHttpRequest;f&&Y(f.prototype,it,c);const m=a.XMLHttpRequestEventTarget;m&&Y(m&&m.prototype,it,c),"undefined"!=typeof IDBIndex&&(Y(IDBIndex.prototype,Pe,c),Y(IDBRequest.prototype,Pe,c),Y(IDBOpenDBRequest.prototype,Pe,c),Y(IDBDatabase.prototype,Pe,c),Y(IDBTransaction.prototype,Pe,c),Y(IDBCursor.prototype,Pe,c)),u&&Y(WebSocket.prototype,at,c)}(u,t)}),Zone.__load_patch("customElements",(t,a,u)=>{!function(t,a){const{isBrowser:u,isMix:c}=a.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&a.patchCallbacks(a,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,a)=>{!function(w){const b=w.XMLHttpRequest;if(!b)return;const N=b.prototype;let P=N[Ue],z=N[et];if(!P){const O=w.XMLHttpRequestEventTarget;if(O){const j=O.prototype;P=j[Ue],z=j[et]}}const x="readystatechange",L="scheduled";function T(O){const j=O.data,H=j.target;H[m]=!1,H[v]=!1;const oe=H[f];P||(P=H[Ue],z=H[et]),oe&&z.call(H,x,oe);const _e=H[f]=()=>{if(H.readyState===H.DONE)if(!j.aborted&&H[m]&&O.state===L){const ue=H[a.__symbol__("loadfalse")];if(0!==H.status&&ue&&ue.length>0){const fe=O.invoke;O.invoke=function(){const X=H[a.__symbol__("loadfalse")];for(let I=0;I<X.length;I++)X[I]===O&&X.splice(I,1);!j.aborted&&O.state===L&&fe.call(O)},ue.push(O)}else O.invoke()}else!j.aborted&&!1===H[m]&&(H[v]=!0)};return P.call(H,x,_e),H[u]||(H[u]=O),F.apply(H,j.args),H[m]=!0,O}function Z(){}function W(O){const j=O.data;return j.aborted=!0,$.apply(j.target,j.args)}const B=ae(N,"open",()=>function(O,j){return O[c]=0==j[2],O[E]=j[1],B.apply(O,j)}),R=U("fetchTaskAborting"),Q=U("fetchTaskScheduling"),F=ae(N,"send",()=>function(O,j){if(!0===a.current[Q]||O[c])return F.apply(O,j);{const H={target:O,url:O[E],isPeriodic:!1,args:j,aborted:!1},oe=lt("XMLHttpRequest.send",Z,H,T,W);O&&!0===O[v]&&!H.aborted&&oe.state===L&&oe.invoke()}}),$=ae(N,"abort",()=>function(O,j){const H=function(O){return O[u]}(O);if(H&&"string"==typeof H.type){if(null==H.cancelFn||H.data&&H.data.aborted)return;H.zone.cancelTask(H)}else if(!0===a.current[R])return $.apply(O,j)})}(t);const u=U("xhrTask"),c=U("xhrSync"),f=U("xhrListener"),m=U("xhrScheduled"),E=U("xhrURL"),v=U("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,a){const u=t.constructor.name;for(let c=0;c<a.length;c++){const f=a[c],m=t[f];if(m){if(!ft(ne(t,f)))continue;t[f]=(v=>{const C=function(){return v.apply(this,tt(arguments,u+"."+f))};return se(C,v),C})(m)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,a)=>{function u(c){return function(f){kt(t,c).forEach(E=>{const v=t.PromiseRejectionEvent;if(v){const C=new v(c,{promise:f.promise,reason:f.rejection});E.invoke(C)}})}}t.PromiseRejectionEvent&&(a[U("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),a[U("rejectionHandledHandler")]=u("rejectionhandled"))})},454:(G,ne,he)=>{"use strict";he(277),he(142),he(138)}},G=>{G(G.s=454)}]);
/*! (C) Andrea Giammarchi - @WebReflection - ISC Style License */
!function(e,t){"use strict";function n(){var e=C.splice(0,C.length);for(We=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)p(e[n],t)}function o(e){return function(t){Re(t)&&(p(t,e),le.length&&r(t.querySelectorAll(le),e))}}function l(e){var t=Be.call(e,"is"),n=e.nodeName.toUpperCase(),r=ie.call(re,t?ee+t.toUpperCase():J+n);return t&&-1<r&&!a(n,t)?-1:r}function a(e,t){return-1<le.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[X]||2,a=e[$]||3;!rt||o&&o!==t||!t[B]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[B](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=o(e);return function(e){C.push(t,e.target),We&&clearTimeout(We),We=setTimeout(n,1)}}function c(e){nt&&(nt=!1,e.currentTarget.removeEventListener(W,c)),le.length&&r((e.target||g).querySelectorAll(le),e.detail===x?x:_),Ve&&function(){for(var e,t=0,n=Ue.length;t<n;t++)e=Ue[t],ae.contains(e)||(n--,Ue.splice(t--,1),p(e,x))}()}function s(e,t){var n=this;Ge.call(n,e,t),w.call(n,{target:n})}function m(e,t,n){var r=t.apply(e,n),o=l(r);return-1<o&&F(r,oe[o]),n.pop()&&le.length&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],F(t,oe[l(t)])}(r.querySelectorAll(le)),r}function f(e,t){De(e,t),N?N.observe(e,$e):(tt&&(e.setAttribute=s,e[R]=O(e),e[U](Y,w)),e[U](Q,i)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function d(e){throw new Error("A "+e+" type is already registered")}function p(e,t){var n,r,o=l(e);-1<o&&!xe.call(e,"TEMPLATE")&&(I(e,oe[o]),o=0,t!==_||e[_]?t!==x||e[x]||(e[_]=!1,e[x]=!0,r="disconnected",o=1):(e[x]=!1,e[_]=!0,r="connected",o=1,Ve&&ie.call(Ue,e)<0&&Ue.push(e)),o&&(n=e[t+k]||e[r+k])&&n.call(e))}function h(){}function T(e,t,n){var r=n&&n[q]||"",o=t.prototype,l=Ne(o),a=t.observedAttributes||fe,i={prototype:l};Pe(l,z,{value:function(){if(ye)ye=!1;else if(!this[Me]){this[Me]=!0,new t(this),o[z]&&o[z].call(this);var e=Ce[Ae.get(t)];(!ve||e.create.length>1)&&E(this)}}}),Pe(l,B,{value:function(e){-1<ie.call(a,e)&&o[B]&&o[B].apply(this,arguments)}}),o[j]&&Pe(l,Z,{value:o[j]}),o[G]&&Pe(l,K,{value:o[G]}),r&&(i[q]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),g[V](e.toLowerCase(),i),v(e),we[e].r()}function L(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function M(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[B],r=n?e.attributes:fe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function v(e){return(e=e.toUpperCase())in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function H(){Ee&&delete e.customElements,me(e,"customElements",{configurable:!0,value:new h}),me(e,"CustomElementRegistry",{configurable:!0,value:h});for(var t=y.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Me]||(ye=!0,t=Ce[Ae.get(e.constructor)],(e=(r=ve&&1===t.create.length)?Reflect.construct(n,fe,t.constructor):g.createElement.apply(g,t.create))[Me]=!0,ye=!1,r||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){!0,me(n,Me,{value:e[t]})}}}(t[n]));g.createElement=function(e,t){var n=M(t);return n?Xe.call(this,e,Oe(n)):Xe.call(this,e)},Ye||(et=!0,g[V](""))}var g=e.document,b=e.Object,y=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function(e,t){(t=t.toLowerCase())in i||(i[e]=(i[e]||[]).concat(t),i[t]=i[t.toUpperCase()]=e)},i=(b.create||b)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],i[o]=r,t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?i[e]||(l.test(e)?[]:""):function(e){var t,n=[];for(t in i)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return l.test(e)?a(e,t):a(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var C,w,A,O,N,D,I,F,S,V="registerElement",P=1e5*e.Math.random()>>0,R="__"+V+P,U="addEventListener",_="attached",k="Callback",x="detached",q="extends",B="attributeChanged"+k,Z=_+k,j="connected"+k,G="disconnected"+k,z="created"+k,K=x+k,X="ADDITION",$="REMOVAL",Q="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",J="<",ee="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],oe=[],le="",ae=g.documentElement,ie=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ue=b.prototype,ce=ue.hasOwnProperty,se=ue.isPrototypeOf,me=b.defineProperty,fe=[],de=b.getOwnPropertyDescriptor,pe=b.getOwnPropertyNames,he=b.getPrototypeOf,Te=b.setPrototypeOf,Le=!!b.__proto__,Me="__dreCEv1",Ee=e.customElements,ve=!/^force/.test(t.type)&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),He=b.create||b,ge=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ie.call(t,e)]},set:function(r,o){(e=ie.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},ye=!1,Ce=He(null),we=He(null),Ae=new ge,Oe=function(e){return e.toLowerCase()},Ne=b.create||function e(t){return t?(e.prototype=t,new e):this},De=Te||(Le?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,r=pe(t),o=0,l=r.length;o<l;o++)n=r[o],ce.call(e,n)||me(e,n,de(t,n))}return function(t,n){do{e(t,n)}while((n=he(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ie=e.MutationObserver||e.WebKitMutationObserver,Fe=e.HTMLAnchorElement,Se=(e.HTMLElement||e.Element||e.Node).prototype,Ve=!se.call(Se,ae),Pe=Ve?function(e,t,n){return e[t]=n.value,e}:me,Re=Ve?function(e){return 1===e.nodeType}:function(e){return se.call(Se,e)},Ue=Ve&&[],_e=Se.attachShadow,ke=Se.cloneNode,xe=Se.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},qe=Se.dispatchEvent,Be=Se.getAttribute,Ze=Se.hasAttribute,je=Se.removeAttribute,Ge=Se.setAttribute,ze=g.createElement,Ke=g.importNode,Xe=ze,$e=Ie&&{attributes:!0,characterData:!0,attributeOldValue:!0},Qe=Ie||function(e){tt=!1,ae.removeEventListener(Q,Qe)},We=0,Ye=V in g&&!/^force-all/.test(t.type),Je=!0,et=!1,tt=!0,nt=!0,rt=!0;if(Ie&&((S=g.createElement("div")).innerHTML="<div><div></div></div>",new Ie(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(S=de(Se,"innerHTML"))&&S.set;n&&me(Se,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),S=null}).observe(S,{childList:!0,subtree:!0}),S.innerHTML=""),Ye||(Te||Le?(I=function(e,t){se.call(t,e)||f(e,t)},F=f):F=I=function(e,t){e[R]||(e[R]=b(!0),f(e,t))},Ve?(tt=!1,function(){var e=de(Se,U),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=Be.call(this,e),t.newValue=null,t[$]=t.attrChange=2,je.call(this,e),qe.call(this,t)},r=function(e,t){var n=Ze.call(this,e),r=n&&Be.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[X]=o.attrChange=0,qe.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[R],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],(t=new CustomEvent(Q,{bubbles:!0})).attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[X]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,qe.call(n,t))};e.value=function(e,l,a){e===Q&&this[B]&&this.setAttribute!==r&&(this[R]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},me(Se,U,e)}()):Ie||(ae[U](Q,Qe),ae.setAttribute(R,1),ae.removeAttribute(R),tt&&(w=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[R],o[R]=n=O(o),n){if(!(r in t))return A(0,o,r,t[r],n[r],X);if(n[r]!==t[r])return A(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return A(2,o,r,t[r],n[r],$)}},A=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,i(a)},O=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),g[V]=function(e,t){if(n=e.toUpperCase(),Je&&(Je=!1,Ie?(N=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ie(function(r){for(var o,l,a,i=0,u=r.length;i<u;i++)"childList"===(o=r[i]).type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,rt&&l[B]&&"style"!==o.attributeName&&(a=Be.call(l,o.attributeName))!==o.oldValue&&l[B](o.attributeName,o.oldValue,a))})}(o(_),o(x)),(D=function(e){return N.observe(e,{childList:!0,subtree:!0}),e})(g),_e&&(Se.attachShadow=function(){return D(_e.apply(this,arguments))})):(C=[],g[U]("DOMNodeInserted",u(_)),g[U]("DOMNodeRemoved",u(x))),g[U](W,c),g[U]("readystatechange",c),g.importNode=function(e,t){switch(e.nodeType){case 1:return m(g,Ke,[e,!!t]);case 11:for(var n=g.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l++)n.appendChild(g.importNode(r[l],!!t));return n;default:return ke.call(e,!!t)}},Se.cloneNode=function(e){return m(this,ke,[!!e])}),et)return et=!1;if(-2<ie.call(re,ee+n)+ie.call(re,J+n)&&d(e),!te.test(n)||-1<ie.call(ne,n))throw new Error("The type "+e+" is invalid");var n,l,a=function(){return s?g.createElement(f,n):g.createElement(f)},i=t||ue,s=ce.call(i,q),f=s?t[q].toUpperCase():n;return s&&-1<ie.call(re,J+f)&&d(f),l=re.push((s?ee:J)+n)-1,le=le.concat(le.length?",":"",s?f+'[is="'+e.toLowerCase()+'"]':f),a.prototype=oe[l]=ce.call(i,"prototype")?i.prototype:Ne(Se),le.length&&r(g.querySelectorAll(le),_),a},g.createElement=Xe=function(e,t){var n=M(t),r=n?ze.call(g,e,Oe(n)):ze.call(g,e),o=""+e,l=ie.call(re,(n?ee:J)+(n||o).toUpperCase()),i=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=a(o.toUpperCase(),n))),rt=!g.createElement.innerHTMLHelper,i&&F(r,oe[l]),r}),addEventListener("beforeunload",function(){delete g.createElement,delete g.importNode,delete g[V]},!1),h.prototype={constructor:h,define:ve?function(e,t,n){if(n)T(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Ee.define(e,t)}}:T,get:ve?function(e){return Ee.get(e)||L(e)}:L,whenDefined:ve?function(e){return be.race([Ee.whenDefined(e),v(e)])}:v},!Ee||/^force/.test(t.type))H();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[q]="a",(t.prototype=Ne(Fe.prototype)).constructor=t,e.customElements.define(r,t,n),!o.test(g.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Fe,[],e)},{},"document-register-element-a"+P)}catch(e){H()}if(!t.noBuiltIn)try{if(ze.call(g,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Oe=function(e){return{is:e.toLowerCase()}}}}(window);
var DOe=Object.defineProperty,MOe=Object.defineProperties,IOe=Object.getOwnPropertyDescriptors,Sx=Object.getOwnPropertySymbols,NW=Object.prototype.hasOwnProperty,PW=Object.prototype.propertyIsEnumerable,mr=Math.pow,FW=(jt,it,tt)=>it in jt?DOe(jt,it,{enumerable:!0,configurable:!0,writable:!0,value:tt}):jt[it]=tt,ht=(jt,it)=>{for(var tt in it||(it={}))NW.call(it,tt)&&FW(jt,tt,it[tt]);if(Sx)for(var tt of Sx(it))PW.call(it,tt)&&FW(jt,tt,it[tt]);return jt},zn=(jt,it)=>MOe(jt,IOe(it)),LW=(jt,it)=>{var tt={};for(var gt in jt)NW.call(jt,gt)&&it.indexOf(gt)<0&&(tt[gt]=jt[gt]);if(null!=jt&&Sx)for(var gt of Sx(jt))it.indexOf(gt)<0&&PW.call(jt,gt)&&(tt[gt]=jt[gt]);return tt};(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{440:(jt,it,tt)=>{var gt=tt(52).default;jt.exports=function Y(Ae,fe,q){function V(W,w){if(!fe[W]){if(!Ae[W]){if(L)return L(W,!0);var R=new Error("Cannot find module '"+W+"'");throw R.code="MODULE_NOT_FOUND",R}var T=fe[W]={exports:{}};Ae[W][0].call(T.exports,function(v){return V(Ae[W][1][v]||v)},T,T.exports,Y,Ae,fe,q)}return fe[W].exports}for(var L=void 0,re=0;re<q.length;re++)V(q[re]);return V}({1:[function(Y,Ae,fe){var q,V;q=this,V=function(q,V,L,re,W){"use strict";function D(Ee,Re,ze,qe){return new(ze||(ze=Promise))(function(G,X){function be(Et){try{Pe(qe.next(Et))}catch(pt){X(pt)}}function ce(Et){try{Pe(qe.throw(Et))}catch(pt){X(pt)}}function Pe(Et){Et.done?G(Et.value):function(G){return G instanceof ze?G:new ze(function(X){X(G)})}(Et.value).then(be,ce)}Pe((qe=qe.apply(Ee,Re||[])).next())})}function j(Ee,Re){var qe,je,G,X,ze={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return X={next:be(0),throw:be(1),return:be(2)},"function"==typeof Symbol&&(X[Symbol.iterator]=function(){return this}),X;function be(Pe){return function(Et){return function(Pe){if(qe)throw new TypeError("Generator is already executing.");for(;ze;)try{if(qe=1,je&&(G=2&Pe[0]?je.return:Pe[0]?je.throw||((G=je.return)&&G.call(je),0):je.next)&&!(G=G.call(je,Pe[1])).done)return G;switch(je=0,G&&(Pe=[2&Pe[0],G.value]),Pe[0]){case 0:case 1:G=Pe;break;case 4:return ze.label++,{value:Pe[1],done:!1};case 5:ze.label++,je=Pe[1],Pe=[0];continue;case 7:Pe=ze.ops.pop(),ze.trys.pop();continue;default:if(!(G=(G=ze.trys).length>0&&G[G.length-1])&&(6===Pe[0]||2===Pe[0])){ze=0;continue}if(3===Pe[0]&&(!G||Pe[1]>G[0]&&Pe[1]<G[3])){ze.label=Pe[1];break}if(6===Pe[0]&&ze.label<G[1]){ze.label=G[1],G=Pe;break}if(G&&ze.label<G[2]){ze.label=G[2],ze.ops.push(Pe);break}G[2]&&ze.ops.pop(),ze.trys.pop();continue}Pe=Re.call(Ee,ze)}catch(Et){Pe=[6,Et],je=0}finally{qe=G=0}if(5&Pe[0])throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}([Pe,Et])}}}function nt(Ee){var Re=Ee.length,ze=0;return new W.Readable({objectMode:!0,read:function(){this.push(ze<Re?Ee[ze++]:null)}})}q.addJsonLdToStore=function(Ee,Re){return D(this,void 0,void 0,function(){var ze,qe,je;return j(this,function(G){switch(G.label){case 0:return"string"!=typeof Ee?[3,4]:[4,fetch(Ee,{redirect:"follow"})];case 1:return(qe=G.sent()).ok?[4,qe.json()]:[3,3];case 2:ze=G.sent(),G.label=3;case 3:return[3,5];case 4:ze=Ee,G.label=5;case 5:return ze?[4,V.toRDF(ze)]:[3,7];case 6:je=G.sent(),Re.import(nt(je)),G.label=7;case 7:return[2,Re]}})})},q.addN3ToStore=function(Ee,Re){return D(this,void 0,void 0,function(){var ze,qe,je;return j(this,function(G){switch(G.label){case 0:return"string"==typeof Ee&&(null==Ee?void 0:Ee.startsWith("http"))?[4,fetch(Ee,{redirect:"follow"})]:[3,4];case 1:return(qe=G.sent()).ok?[4,qe.text()]:[3,3];case 2:ze=G.sent(),G.label=3;case 3:return[3,5];case 4:ze=Ee,G.label=5;case 5:return ze&&(je=new L.Parser({format:"n3"}).parse(ze),Re.import(nt(je))),[2,Re]}})})},q.addRdfXmlToStore=function(Ee,Re){return D(this,void 0,void 0,function(){var ze,qe,je,G;return j(this,function(X){switch(X.label){case 0:return"string"==typeof Ee&&(null==Ee?void 0:Ee.startsWith("http"))?[4,fetch(Ee,{redirect:"follow"})]:[3,4];case 1:return(qe=X.sent()).ok?[4,qe.text()]:[3,3];case 2:ze=X.sent(),X.label=3;case 3:return[3,5];case 4:ze=Ee,X.label=5;case 5:return ze?(je=new re.RdfXmlParser({dataFactory:L.DataFactory,strict:!0}),G=new Promise(function(be){je.once("end",function(){return be(Re)})}),Re.import(je),je.write(ze),je.end(),[2,G]):[2,Re]}})})},q.arrayToStream=nt,q.deserializeN3Store=function(Ee,Re){var ze=JSON.parse(Ee),qe=new L.Store;return Object.assign(qe,ze,{_factory:null!=Re?Re:L.DataFactory}),qe},q.serializeN3Store=function(Ee){var Re=Object.assign({},Ee);return delete Re._factory,JSON.stringify(Re)},q.streamToArray=function(Ee){return new Promise(function(Re,ze){var qe=[];Ee.on("data",function(je){qe.push(je)}).once("end",function(){Re(qe)}).once("error",function(je){ze(je)})})},Object.keys(L).forEach(function(Ee){"default"!==Ee&&!q.hasOwnProperty(Ee)&&Object.defineProperty(q,Ee,{enumerable:!0,get:function(){return L[Ee]}})}),Object.defineProperty(q,"__esModule",{value:!0})},"object"==typeof fe&&void 0!==Ae?V(fe,Y("jsonld"),Y("n3"),Y("rdfxml-streaming-parser"),Y("readable-stream")):V((q="undefined"!=typeof globalThis?globalThis:q||self).tripleStoreUtils={},q.jsonld,q.n3,q.rdfxmlStreamingParser,q.readablestream)},{jsonld:26,n3:43,"rdfxml-streaming-parser":64,"readable-stream":81}],2:[function(Y,Ae,fe){"use strict";fe.byteLength=function(j){var I=x(j),K=I[1];return 3*(I[0]+K)/4-K},fe.toByteArray=function(j){var I,U,$=x(j),K=$[0],M=$[1],F=new L(function(j,I,$){return 3*(I+$)/4-$}(0,K,M)),Q=0,S=M>0?K-4:K;for(U=0;U<S;U+=4)I=V[j.charCodeAt(U)]<<18|V[j.charCodeAt(U+1)]<<12|V[j.charCodeAt(U+2)]<<6|V[j.charCodeAt(U+3)],F[Q++]=I>>16&255,F[Q++]=I>>8&255,F[Q++]=255&I;return 2===M&&(I=V[j.charCodeAt(U)]<<2|V[j.charCodeAt(U+1)]>>4,F[Q++]=255&I),1===M&&(I=V[j.charCodeAt(U)]<<10|V[j.charCodeAt(U+1)]<<4|V[j.charCodeAt(U+2)]>>2,F[Q++]=I>>8&255,F[Q++]=255&I),F},fe.fromByteArray=function(j){for(var I,$=j.length,K=$%3,M=[],F=16383,Q=0,S=$-K;Q<S;Q+=F)M.push(E(j,Q,Q+F>S?S:Q+F));return 1===K?M.push(q[(I=j[$-1])>>2]+q[I<<4&63]+"=="):2===K&&M.push(q[(I=(j[$-2]<<8)+j[$-1])>>10]+q[I>>4&63]+q[I<<2&63]+"="),M.join("")};for(var q=[],V=[],L="undefined"!=typeof Uint8Array?Uint8Array:Array,re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=0,w=re.length;W<w;++W)q[W]=re[W],V[re.charCodeAt(W)]=W;function x(j){var I=j.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var $=j.indexOf("=");return-1===$&&($=I),[$,$===I?0:4-$%4]}function y(j){return q[j>>18&63]+q[j>>12&63]+q[j>>6&63]+q[63&j]}function E(j,I,$){for(var M=[],F=I;F<$;F+=3)M.push(y((j[F]<<16&16711680)+(j[F+1]<<8&65280)+(255&j[F+2])));return M.join("")}V["-".charCodeAt(0)]=62,V["_".charCodeAt(0)]=63},{}],3:[function(Y,Ae,fe){},{}],4:[function(Y,Ae,fe){var q=Y("buffer"),V=q.Buffer;function L(W,w){for(var x in W)w[x]=W[x]}function re(W,w,x){return V(W,w,x)}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?Ae.exports=q:(L(q,fe),fe.Buffer=re),L(V,re),re.from=function(W,w,x){if("number"==typeof W)throw new TypeError("Argument must not be a number");return V(W,w,x)},re.alloc=function(W,w,x){if("number"!=typeof W)throw new TypeError("Argument must be a number");var R=V(W);return void 0!==w?"string"==typeof x?R.fill(w,x):R.fill(w):R.fill(0),R},re.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return V(W)},re.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return q.SlowBuffer(W)}},{buffer:6}],5:[function(Y,Ae,fe){"use strict";var q=Y("safe-buffer").Buffer,V=q.isEncoding||function(M){switch((M=""+M)&&M.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function W(M){var F;switch(this.encoding=function(M){var F=function(M){if(!M)return"utf8";for(var F;;)switch(M){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return M;default:if(F)return;M=(""+M).toLowerCase(),F=!0}}(M);if("string"!=typeof F&&(q.isEncoding===V||!V(M)))throw new Error("Unknown encoding: "+M);return F||M}(M),this.encoding){case"utf16le":this.text=E,this.end=D,F=4;break;case"utf8":this.fillLast=T,F=4;break;case"base64":this.text=j,this.end=I,F=3;break;default:return this.write=$,void(this.end=K)}this.lastNeed=0,this.lastTotal=0,this.lastChar=q.allocUnsafe(F)}function w(M){return M<=127?0:M>>5==6?2:M>>4==14?3:M>>3==30?4:M>>6==2?-1:-2}function T(M){var F=this.lastTotal-this.lastNeed,Q=function(M,F,Q){if(128!=(192&F[0]))return M.lastNeed=0,"\ufffd";if(M.lastNeed>1&&F.length>1){if(128!=(192&F[1]))return M.lastNeed=1,"\ufffd";if(M.lastNeed>2&&F.length>2&&128!=(192&F[2]))return M.lastNeed=2,"\ufffd"}}(this,M);return void 0!==Q?Q:this.lastNeed<=M.length?(M.copy(this.lastChar,F,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(M.copy(this.lastChar,F,0,M.length),void(this.lastNeed-=M.length))}function E(M,F){if((M.length-F)%2==0){var Q=M.toString("utf16le",F);if(Q){var S=Q.charCodeAt(Q.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1],Q.slice(0,-1)}return Q}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=M[M.length-1],M.toString("utf16le",F,M.length-1)}function D(M){var F=M&&M.length?this.write(M):"";return this.lastNeed?F+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):F}function j(M,F){var Q=(M.length-F)%3;return 0===Q?M.toString("base64",F):(this.lastNeed=3-Q,this.lastTotal=3,1===Q?this.lastChar[0]=M[M.length-1]:(this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1]),M.toString("base64",F,M.length-Q))}function I(M){var F=M&&M.length?this.write(M):"";return this.lastNeed?F+this.lastChar.toString("base64",0,3-this.lastNeed):F}function $(M){return M.toString(this.encoding)}function K(M){return M&&M.length?this.write(M):""}fe.StringDecoder=W,W.prototype.write=function(M){if(0===M.length)return"";var F,Q;if(this.lastNeed){if(void 0===(F=this.fillLast(M)))return"";Q=this.lastNeed,this.lastNeed=0}else Q=0;return Q<M.length?F?F+this.text(M,Q):this.text(M,Q):F||""},W.prototype.end=function(M){var F=M&&M.length?this.write(M):"";return this.lastNeed?F+"\ufffd":F},W.prototype.text=function(M,F){var Q=function(M,F,Q){var S=F.length-1;if(S<Q)return 0;var U=w(F[S]);return U>=0?(U>0&&(M.lastNeed=U-1),U):--S<Q||-2===U?0:(U=w(F[S]))>=0?(U>0&&(M.lastNeed=U-2),U):--S<Q||-2===U?0:(U=w(F[S]))>=0?(U>0&&(2===U?U=0:M.lastNeed=U-3),U):0}(this,M,F);if(!this.lastNeed)return M.toString("utf8",F);this.lastTotal=Q;var S=M.length-(Q-this.lastNeed);return M.copy(this.lastChar,0,S),M.toString("utf8",F,S)},W.prototype.fillLast=function(M){if(this.lastNeed<=M.length)return M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,M.length),this.lastNeed-=M.length}},{"safe-buffer":4}],6:[function(Y,Ae,fe){(function(q){(function(){"use strict";var V=Y("base64-js"),L=Y("ieee754");fe.Buffer=x,fe.SlowBuffer=function(B){return+B!=B&&(B=0),x.alloc(+B)},fe.INSPECT_MAX_BYTES=50;var re=2147483647;function w(B){if(B>re)throw new RangeError('The value "'+B+'" is invalid for option "size"');var O=new Uint8Array(B);return O.__proto__=x.prototype,O}function x(B,O,k){if("number"==typeof B){if("string"==typeof O)throw new TypeError('The "string" argument must be of type string. Received type number');return y(B)}return R(B,O,k)}function R(B,O,k){if("string"==typeof B)return function(B,O){if(("string"!=typeof O||""===O)&&(O="utf8"),!x.isEncoding(O))throw new TypeError("Unknown encoding: "+O);var k=0|M(B,O),Ne=w(k),Xe=Ne.write(B,O);return Xe!==k&&(Ne=Ne.slice(0,Xe)),Ne}(B,O);if(ArrayBuffer.isView(B))return D(B);if(null==B)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(pt(B,ArrayBuffer)||B&&pt(B.buffer,ArrayBuffer))return function(B,O,k){if(O<0||B.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<O+(k||0))throw new RangeError('"length" is outside of buffer bounds');var Ne;return(Ne=void 0===O&&void 0===k?new Uint8Array(B):void 0===k?new Uint8Array(B,O):new Uint8Array(B,O,k)).__proto__=x.prototype,Ne}(B,O,k);if("number"==typeof B)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ne=B.valueOf&&B.valueOf();if(null!=Ne&&Ne!==B)return x.from(Ne,O,k);var Xe=function(B){if(x.isBuffer(B)){var O=0|$(B.length),k=w(O);return 0===k.length||B.copy(k,0,0,O),k}return void 0!==B.length?"number"!=typeof B.length||ge(B.length)?w(0):D(B):"Buffer"===B.type&&Array.isArray(B.data)?D(B.data):void 0}(B);if(Xe)return Xe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof B[Symbol.toPrimitive])return x.from(B[Symbol.toPrimitive]("string"),O,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}function T(B){if("number"!=typeof B)throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function y(B){return T(B),w(B<0?0:0|$(B))}function D(B){for(var O=B.length<0?0:0|$(B.length),k=w(O),Ne=0;Ne<O;Ne+=1)k[Ne]=255&B[Ne];return k}function $(B){if(B>=re)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+re.toString(16)+" bytes");return 0|B}function M(B,O){if(x.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||pt(B,ArrayBuffer))return B.byteLength;if("string"!=typeof B)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);var k=B.length,Ne=arguments.length>2&&!0===arguments[2];if(!Ne&&0===k)return 0;for(var Xe=!1;;)switch(O){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return X(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*k;case"hex":return k>>>1;case"base64":return Pe(B).length;default:if(Xe)return Ne?-1:X(B).length;O=(""+O).toLowerCase(),Xe=!0}}function F(B,O,k){var Ne=!1;if((void 0===O||O<0)&&(O=0),O>this.length||((void 0===k||k>this.length)&&(k=this.length),k<=0)||(k>>>=0)<=(O>>>=0))return"";for(B||(B="utf8");;)switch(B){case"hex":return Je(this,O,k);case"utf8":case"utf-8":return ye(this,O,k);case"ascii":return nt(this,O,k);case"latin1":case"binary":return Ze(this,O,k);case"base64":return te(this,O,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ke(this,O,k);default:if(Ne)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),Ne=!0}}function Q(B,O,k){var Ne=B[O];B[O]=B[k],B[k]=Ne}function S(B,O,k,Ne,Xe){if(0===B.length)return-1;if("string"==typeof k?(Ne=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),ge(k=+k)&&(k=Xe?0:B.length-1),k<0&&(k=B.length+k),k>=B.length){if(Xe)return-1;k=B.length-1}else if(k<0){if(!Xe)return-1;k=0}if("string"==typeof O&&(O=x.from(O,Ne)),x.isBuffer(O))return 0===O.length?-1:U(B,O,k,Ne,Xe);if("number"==typeof O)return O&=255,"function"==typeof Uint8Array.prototype.indexOf?Xe?Uint8Array.prototype.indexOf.call(B,O,k):Uint8Array.prototype.lastIndexOf.call(B,O,k):U(B,[O],k,Ne,Xe);throw new TypeError("val must be string, number or Buffer")}function U(B,O,k,Ne,Xe){var Hn,yt=1,It=B.length,Tn=O.length;if(void 0!==Ne&&("ucs2"===(Ne=String(Ne).toLowerCase())||"ucs-2"===Ne||"utf16le"===Ne||"utf-16le"===Ne)){if(B.length<2||O.length<2)return-1;yt=2,It/=2,Tn/=2,k/=2}function Rn(Ns,cs){return 1===yt?Ns[cs]:Ns.readUInt16BE(cs*yt)}if(Xe){var bi=-1;for(Hn=k;Hn<It;Hn++)if(Rn(B,Hn)===Rn(O,-1===bi?0:Hn-bi)){if(-1===bi&&(bi=Hn),Hn-bi+1===Tn)return bi*yt}else-1!==bi&&(Hn-=Hn-bi),bi=-1}else for(k+Tn>It&&(k=It-Tn),Hn=k;Hn>=0;Hn--){for(var di=!0,Ur=0;Ur<Tn;Ur++)if(Rn(B,Hn+Ur)!==Rn(O,Ur)){di=!1;break}if(di)return Hn}return-1}function ie(B,O,k,Ne){k=Number(k)||0;var Xe=B.length-k;Ne?(Ne=Number(Ne))>Xe&&(Ne=Xe):Ne=Xe;var yt=O.length;Ne>yt/2&&(Ne=yt/2);for(var It=0;It<Ne;++It){var Tn=parseInt(O.substr(2*It,2),16);if(ge(Tn))return It;B[k+It]=Tn}return It}function ue(B,O,k,Ne){return Et(X(O,B.length-k),B,k,Ne)}function ee(B,O,k,Ne){return Et(function(B){for(var O=[],k=0;k<B.length;++k)O.push(255&B.charCodeAt(k));return O}(O),B,k,Ne)}function se(B,O,k,Ne){return ee(B,O,k,Ne)}function Te(B,O,k,Ne){return Et(Pe(O),B,k,Ne)}function me(B,O,k,Ne){return Et(function(B,O){for(var k,Ne,yt=[],It=0;It<B.length&&!((O-=2)<0);++It)Ne=(k=B.charCodeAt(It))>>8,yt.push(k%256),yt.push(Ne);return yt}(O,B.length-k),B,k,Ne)}function te(B,O,k){return V.fromByteArray(0===O&&k===B.length?B:B.slice(O,k))}function ye(B,O,k){k=Math.min(B.length,k);for(var Ne=[],Xe=O;Xe<k;){var Rn,Hn,bi,di,yt=B[Xe],It=null,Tn=yt>239?4:yt>223?3:yt>191?2:1;if(Xe+Tn<=k)switch(Tn){case 1:yt<128&&(It=yt);break;case 2:128==(192&(Rn=B[Xe+1]))&&(di=(31&yt)<<6|63&Rn)>127&&(It=di);break;case 3:Hn=B[Xe+2],128==(192&(Rn=B[Xe+1]))&&128==(192&Hn)&&(di=(15&yt)<<12|(63&Rn)<<6|63&Hn)>2047&&(di<55296||di>57343)&&(It=di);break;case 4:Hn=B[Xe+2],bi=B[Xe+3],128==(192&(Rn=B[Xe+1]))&&128==(192&Hn)&&128==(192&bi)&&(di=(15&yt)<<18|(63&Rn)<<12|(63&Hn)<<6|63&bi)>65535&&di<1114112&&(It=di)}null===It?(It=65533,Tn=1):It>65535&&(Ne.push((It-=65536)>>>10&1023|55296),It=56320|1023&It),Ne.push(It),Xe+=Tn}return function(B){var O=B.length;if(O<=4096)return String.fromCharCode.apply(String,B);for(var k="",Ne=0;Ne<O;)k+=String.fromCharCode.apply(String,B.slice(Ne,Ne+=4096));return k}(Ne)}fe.kMaxLength=re,!(x.TYPED_ARRAY_SUPPORT=function(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===B.foo()}catch(O){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&x[Symbol.species]===x&&Object.defineProperty(x,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),x.poolSize=8192,x.from=function(B,O,k){return R(B,O,k)},x.prototype.__proto__=Uint8Array.prototype,x.__proto__=Uint8Array,x.alloc=function(B,O,k){return function(B,O,k){return T(B),B<=0?w(B):void 0!==O?"string"==typeof k?w(B).fill(O,k):w(B).fill(O):w(B)}(B,O,k)},x.allocUnsafe=function(B){return y(B)},x.allocUnsafeSlow=function(B){return y(B)},x.isBuffer=function(O){return null!=O&&!0===O._isBuffer&&O!==x.prototype},x.compare=function(O,k){if(pt(O,Uint8Array)&&(O=x.from(O,O.offset,O.byteLength)),pt(k,Uint8Array)&&(k=x.from(k,k.offset,k.byteLength)),!x.isBuffer(O)||!x.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===k)return 0;for(var Ne=O.length,Xe=k.length,yt=0,It=Math.min(Ne,Xe);yt<It;++yt)if(O[yt]!==k[yt]){Ne=O[yt],Xe=k[yt];break}return Ne<Xe?-1:Xe<Ne?1:0},x.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(O,k){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(0===O.length)return x.alloc(0);var Ne;if(void 0===k)for(k=0,Ne=0;Ne<O.length;++Ne)k+=O[Ne].length;var Xe=x.allocUnsafe(k),yt=0;for(Ne=0;Ne<O.length;++Ne){var It=O[Ne];if(pt(It,Uint8Array)&&(It=x.from(It)),!x.isBuffer(It))throw new TypeError('"list" argument must be an Array of Buffers');It.copy(Xe,yt),yt+=It.length}return Xe},x.byteLength=M,x.prototype._isBuffer=!0,x.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<O;k+=2)Q(this,k,k+1);return this},x.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<O;k+=4)Q(this,k,k+3),Q(this,k+1,k+2);return this},x.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<O;k+=8)Q(this,k,k+7),Q(this,k+1,k+6),Q(this,k+2,k+5),Q(this,k+3,k+4);return this},x.prototype.toLocaleString=x.prototype.toString=function(){var O=this.length;return 0===O?"":0===arguments.length?ye(this,0,O):F.apply(this,arguments)},x.prototype.equals=function(O){if(!x.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||0===x.compare(this,O)},x.prototype.inspect=function(){var O="",k=fe.INSPECT_MAX_BYTES;return O=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(O+=" ... "),"<Buffer "+O+">"},x.prototype.compare=function(O,k,Ne,Xe,yt){if(pt(O,Uint8Array)&&(O=x.from(O,O.offset,O.byteLength)),!x.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(void 0===k&&(k=0),void 0===Ne&&(Ne=O?O.length:0),void 0===Xe&&(Xe=0),void 0===yt&&(yt=this.length),k<0||Ne>O.length||Xe<0||yt>this.length)throw new RangeError("out of range index");if(Xe>=yt&&k>=Ne)return 0;if(Xe>=yt)return-1;if(k>=Ne)return 1;if(this===O)return 0;for(var It=(yt>>>=0)-(Xe>>>=0),Tn=(Ne>>>=0)-(k>>>=0),Rn=Math.min(It,Tn),Hn=this.slice(Xe,yt),bi=O.slice(k,Ne),di=0;di<Rn;++di)if(Hn[di]!==bi[di]){It=Hn[di],Tn=bi[di];break}return It<Tn?-1:Tn<It?1:0},x.prototype.includes=function(O,k,Ne){return-1!==this.indexOf(O,k,Ne)},x.prototype.indexOf=function(O,k,Ne){return S(this,O,k,Ne,!0)},x.prototype.lastIndexOf=function(O,k,Ne){return S(this,O,k,Ne,!1)},x.prototype.write=function(O,k,Ne,Xe){if(void 0===k)Xe="utf8",Ne=this.length,k=0;else if(void 0===Ne&&"string"==typeof k)Xe=k,Ne=this.length,k=0;else{if(!isFinite(k))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");k>>>=0,isFinite(Ne)?(Ne>>>=0,void 0===Xe&&(Xe="utf8")):(Xe=Ne,Ne=void 0)}var yt=this.length-k;if((void 0===Ne||Ne>yt)&&(Ne=yt),O.length>0&&(Ne<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var It=!1;;)switch(Xe){case"hex":return ie(this,O,k,Ne);case"utf8":case"utf-8":return ue(this,O,k,Ne);case"ascii":return ee(this,O,k,Ne);case"latin1":case"binary":return se(this,O,k,Ne);case"base64":return Te(this,O,k,Ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,O,k,Ne);default:if(It)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),It=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function nt(B,O,k){var Ne="";k=Math.min(B.length,k);for(var Xe=O;Xe<k;++Xe)Ne+=String.fromCharCode(127&B[Xe]);return Ne}function Ze(B,O,k){var Ne="";k=Math.min(B.length,k);for(var Xe=O;Xe<k;++Xe)Ne+=String.fromCharCode(B[Xe]);return Ne}function Je(B,O,k){var Ne=B.length;(!O||O<0)&&(O=0),(!k||k<0||k>Ne)&&(k=Ne);for(var Xe="",yt=O;yt<k;++yt)Xe+=G(B[yt]);return Xe}function Ke(B,O,k){for(var Ne=B.slice(O,k),Xe="",yt=0;yt<Ne.length;yt+=2)Xe+=String.fromCharCode(Ne[yt]+256*Ne[yt+1]);return Xe}function Ve(B,O,k){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(B+O>k)throw new RangeError("Trying to access beyond buffer length")}function ke(B,O,k,Ne,Xe,yt){if(!x.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>Xe||O<yt)throw new RangeError('"value" argument is out of bounds');if(k+Ne>B.length)throw new RangeError("Index out of range")}function Ee(B,O,k,Ne,Xe,yt){if(k+Ne>B.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function Re(B,O,k,Ne,Xe){return O=+O,k>>>=0,Xe||Ee(B,0,k,4),L.write(B,O,k,Ne,23,4),k+4}function ze(B,O,k,Ne,Xe){return O=+O,k>>>=0,Xe||Ee(B,0,k,8),L.write(B,O,k,Ne,52,8),k+8}x.prototype.slice=function(O,k){var Ne=this.length;(O=~~O)<0?(O+=Ne)<0&&(O=0):O>Ne&&(O=Ne),(k=void 0===k?Ne:~~k)<0?(k+=Ne)<0&&(k=0):k>Ne&&(k=Ne),k<O&&(k=O);var Xe=this.subarray(O,k);return Xe.__proto__=x.prototype,Xe},x.prototype.readUIntLE=function(O,k,Ne){O>>>=0,k>>>=0,Ne||Ve(O,k,this.length);for(var Xe=this[O],yt=1,It=0;++It<k&&(yt*=256);)Xe+=this[O+It]*yt;return Xe},x.prototype.readUIntBE=function(O,k,Ne){O>>>=0,k>>>=0,Ne||Ve(O,k,this.length);for(var Xe=this[O+--k],yt=1;k>0&&(yt*=256);)Xe+=this[O+--k]*yt;return Xe},x.prototype.readUInt8=function(O,k){return O>>>=0,k||Ve(O,1,this.length),this[O]},x.prototype.readUInt16LE=function(O,k){return O>>>=0,k||Ve(O,2,this.length),this[O]|this[O+1]<<8},x.prototype.readUInt16BE=function(O,k){return O>>>=0,k||Ve(O,2,this.length),this[O]<<8|this[O+1]},x.prototype.readUInt32LE=function(O,k){return O>>>=0,k||Ve(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},x.prototype.readUInt32BE=function(O,k){return O>>>=0,k||Ve(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},x.prototype.readIntLE=function(O,k,Ne){O>>>=0,k>>>=0,Ne||Ve(O,k,this.length);for(var Xe=this[O],yt=1,It=0;++It<k&&(yt*=256);)Xe+=this[O+It]*yt;return Xe>=(yt*=128)&&(Xe-=Math.pow(2,8*k)),Xe},x.prototype.readIntBE=function(O,k,Ne){O>>>=0,k>>>=0,Ne||Ve(O,k,this.length);for(var Xe=k,yt=1,It=this[O+--Xe];Xe>0&&(yt*=256);)It+=this[O+--Xe]*yt;return It>=(yt*=128)&&(It-=Math.pow(2,8*k)),It},x.prototype.readInt8=function(O,k){return O>>>=0,k||Ve(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},x.prototype.readInt16LE=function(O,k){O>>>=0,k||Ve(O,2,this.length);var Ne=this[O]|this[O+1]<<8;return 32768&Ne?4294901760|Ne:Ne},x.prototype.readInt16BE=function(O,k){O>>>=0,k||Ve(O,2,this.length);var Ne=this[O+1]|this[O]<<8;return 32768&Ne?4294901760|Ne:Ne},x.prototype.readInt32LE=function(O,k){return O>>>=0,k||Ve(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},x.prototype.readInt32BE=function(O,k){return O>>>=0,k||Ve(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},x.prototype.readFloatLE=function(O,k){return O>>>=0,k||Ve(O,4,this.length),L.read(this,O,!0,23,4)},x.prototype.readFloatBE=function(O,k){return O>>>=0,k||Ve(O,4,this.length),L.read(this,O,!1,23,4)},x.prototype.readDoubleLE=function(O,k){return O>>>=0,k||Ve(O,8,this.length),L.read(this,O,!0,52,8)},x.prototype.readDoubleBE=function(O,k){return O>>>=0,k||Ve(O,8,this.length),L.read(this,O,!1,52,8)},x.prototype.writeUIntLE=function(O,k,Ne,Xe){O=+O,k>>>=0,Ne>>>=0,Xe||ke(this,O,k,Ne,Math.pow(2,8*Ne)-1,0);var It=1,Tn=0;for(this[k]=255&O;++Tn<Ne&&(It*=256);)this[k+Tn]=O/It&255;return k+Ne},x.prototype.writeUIntBE=function(O,k,Ne,Xe){O=+O,k>>>=0,Ne>>>=0,Xe||ke(this,O,k,Ne,Math.pow(2,8*Ne)-1,0);var It=Ne-1,Tn=1;for(this[k+It]=255&O;--It>=0&&(Tn*=256);)this[k+It]=O/Tn&255;return k+Ne},x.prototype.writeUInt8=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,1,255,0),this[k]=255&O,k+1},x.prototype.writeUInt16LE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,2,65535,0),this[k]=255&O,this[k+1]=O>>>8,k+2},x.prototype.writeUInt16BE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,2,65535,0),this[k]=O>>>8,this[k+1]=255&O,k+2},x.prototype.writeUInt32LE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,4,4294967295,0),this[k+3]=O>>>24,this[k+2]=O>>>16,this[k+1]=O>>>8,this[k]=255&O,k+4},x.prototype.writeUInt32BE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,4,4294967295,0),this[k]=O>>>24,this[k+1]=O>>>16,this[k+2]=O>>>8,this[k+3]=255&O,k+4},x.prototype.writeIntLE=function(O,k,Ne,Xe){if(O=+O,k>>>=0,!Xe){var yt=Math.pow(2,8*Ne-1);ke(this,O,k,Ne,yt-1,-yt)}var It=0,Tn=1,Rn=0;for(this[k]=255&O;++It<Ne&&(Tn*=256);)O<0&&0===Rn&&0!==this[k+It-1]&&(Rn=1),this[k+It]=(O/Tn>>0)-Rn&255;return k+Ne},x.prototype.writeIntBE=function(O,k,Ne,Xe){if(O=+O,k>>>=0,!Xe){var yt=Math.pow(2,8*Ne-1);ke(this,O,k,Ne,yt-1,-yt)}var It=Ne-1,Tn=1,Rn=0;for(this[k+It]=255&O;--It>=0&&(Tn*=256);)O<0&&0===Rn&&0!==this[k+It+1]&&(Rn=1),this[k+It]=(O/Tn>>0)-Rn&255;return k+Ne},x.prototype.writeInt8=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,1,127,-128),O<0&&(O=255+O+1),this[k]=255&O,k+1},x.prototype.writeInt16LE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,2,32767,-32768),this[k]=255&O,this[k+1]=O>>>8,k+2},x.prototype.writeInt16BE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,2,32767,-32768),this[k]=O>>>8,this[k+1]=255&O,k+2},x.prototype.writeInt32LE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,4,2147483647,-2147483648),this[k]=255&O,this[k+1]=O>>>8,this[k+2]=O>>>16,this[k+3]=O>>>24,k+4},x.prototype.writeInt32BE=function(O,k,Ne){return O=+O,k>>>=0,Ne||ke(this,O,k,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[k]=O>>>24,this[k+1]=O>>>16,this[k+2]=O>>>8,this[k+3]=255&O,k+4},x.prototype.writeFloatLE=function(O,k,Ne){return Re(this,O,k,!0,Ne)},x.prototype.writeFloatBE=function(O,k,Ne){return Re(this,O,k,!1,Ne)},x.prototype.writeDoubleLE=function(O,k,Ne){return ze(this,O,k,!0,Ne)},x.prototype.writeDoubleBE=function(O,k,Ne){return ze(this,O,k,!1,Ne)},x.prototype.copy=function(O,k,Ne,Xe){if(!x.isBuffer(O))throw new TypeError("argument should be a Buffer");if(Ne||(Ne=0),!Xe&&0!==Xe&&(Xe=this.length),k>=O.length&&(k=O.length),k||(k=0),Xe>0&&Xe<Ne&&(Xe=Ne),Xe===Ne||0===O.length||0===this.length)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(Ne<0||Ne>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),O.length-k<Xe-Ne&&(Xe=O.length-k+Ne);var yt=Xe-Ne;if(this===O&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(k,Ne,Xe);else if(this===O&&Ne<k&&k<Xe)for(var It=yt-1;It>=0;--It)O[It+k]=this[It+Ne];else Uint8Array.prototype.set.call(O,this.subarray(Ne,Xe),k);return yt},x.prototype.fill=function(O,k,Ne,Xe){if("string"==typeof O){if("string"==typeof k?(Xe=k,k=0,Ne=this.length):"string"==typeof Ne&&(Xe=Ne,Ne=this.length),void 0!==Xe&&"string"!=typeof Xe)throw new TypeError("encoding must be a string");if("string"==typeof Xe&&!x.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(1===O.length){var yt=O.charCodeAt(0);("utf8"===Xe&&yt<128||"latin1"===Xe)&&(O=yt)}}else"number"==typeof O&&(O&=255);if(k<0||this.length<k||this.length<Ne)throw new RangeError("Out of range index");if(Ne<=k)return this;var It;if(k>>>=0,Ne=void 0===Ne?this.length:Ne>>>0,O||(O=0),"number"==typeof O)for(It=k;It<Ne;++It)this[It]=O;else{var Tn=x.isBuffer(O)?O:x.from(O,Xe),Rn=Tn.length;if(0===Rn)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(It=0;It<Ne-k;++It)this[It+k]=Tn[It%Rn]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function G(B){return B<16?"0"+B.toString(16):B.toString(16)}function X(B,O){O=O||1/0;for(var k,Ne=B.length,Xe=null,yt=[],It=0;It<Ne;++It){if((k=B.charCodeAt(It))>55295&&k<57344){if(!Xe){if(k>56319){(O-=3)>-1&&yt.push(239,191,189);continue}if(It+1===Ne){(O-=3)>-1&&yt.push(239,191,189);continue}Xe=k;continue}if(k<56320){(O-=3)>-1&&yt.push(239,191,189),Xe=k;continue}k=65536+(Xe-55296<<10|k-56320)}else Xe&&(O-=3)>-1&&yt.push(239,191,189);if(Xe=null,k<128){if((O-=1)<0)break;yt.push(k)}else if(k<2048){if((O-=2)<0)break;yt.push(k>>6|192,63&k|128)}else if(k<65536){if((O-=3)<0)break;yt.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(k<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;yt.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return yt}function Pe(B){return V.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(qe,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(B))}function Et(B,O,k,Ne){for(var Xe=0;Xe<Ne&&!(Xe+k>=O.length||Xe>=B.length);++Xe)O[Xe+k]=B[Xe];return Xe}function pt(B,O){return B instanceof O||null!=B&&null!=B.constructor&&null!=B.constructor.name&&B.constructor.name===O.name}function ge(B){return B!=B}}).call(this)}).call(this,Y("buffer").Buffer)},{"base64-js":2,buffer:6,ieee754:9}],7:[function(Y,Ae,fe){"use strict";Ae.exports=function q(V){return null===V||"object"!=typeof V||null!=V.toJSON?JSON.stringify(V):Array.isArray(V)?"["+V.reduce((L,re,W)=>L+(0===W?"":",")+q(void 0===re||"symbol"==typeof re?null:re),"")+"]":"{"+Object.keys(V).sort().reduce((L,re,W)=>void 0===V[re]||"symbol"==typeof V[re]?L:L+(0===L.length?"":",")+q(re)+":"+q(V[re]),"")+"}"}},{}],8:[function(Y,Ae,fe){"use strict";var L,q="object"==typeof Reflect?Reflect:null,V=q&&"function"==typeof q.apply?q.apply:function(U,ie,ue){return Function.prototype.apply.call(U,ie,ue)};L=q&&"function"==typeof q.ownKeys?q.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var W=Number.isNaN||function(U){return U!=U};function w(){w.init.call(this)}Ae.exports=w,Ae.exports.once=function(S,U){return new Promise(function(ie,ue){function ee(Te){S.removeListener(U,se),ue(Te)}function se(){"function"==typeof S.removeListener&&S.removeListener("error",ee),ie([].slice.call(arguments))}Q(S,U,se,{once:!0}),"error"!==U&&function(S,U,ie){"function"==typeof S.on&&Q(S,"error",U,ie)}(S,ee,{once:!0})})},w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var x=10;function R(S){if("function"!=typeof S)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function T(S){return void 0===S._maxListeners?w.defaultMaxListeners:S._maxListeners}function v(S,U,ie,ue){var ee,se,Te;if(R(ie),void 0===(se=S._events)?(se=S._events=Object.create(null),S._eventsCount=0):(void 0!==se.newListener&&(S.emit("newListener",U,ie.listener?ie.listener:ie),se=S._events),Te=se[U]),void 0===Te)Te=se[U]=ie,++S._eventsCount;else if("function"==typeof Te?Te=se[U]=ue?[ie,Te]:[Te,ie]:ue?Te.unshift(ie):Te.push(ie),(ee=T(S))>0&&Te.length>ee&&!Te.warned){Te.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+Te.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=S,me.type=U,me.count=Te.length,function(S){console&&console.warn&&console.warn(S)}(me)}return S}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(S,U,ie){var ue={fired:!1,wrapFn:void 0,target:S,type:U,listener:ie},ee=y.bind(ue);return ee.listener=ie,ue.wrapFn=ee,ee}function D(S,U,ie){var ue=S._events;if(void 0===ue)return[];var ee=ue[U];return void 0===ee?[]:"function"==typeof ee?ie?[ee.listener||ee]:[ee]:ie?function(S){for(var U=new Array(S.length),ie=0;ie<U.length;++ie)U[ie]=S[ie].listener||S[ie];return U}(ee):I(ee,ee.length)}function j(S){var U=this._events;if(void 0!==U){var ie=U[S];if("function"==typeof ie)return 1;if(void 0!==ie)return ie.length}return 0}function I(S,U){for(var ie=new Array(U),ue=0;ue<U;++ue)ie[ue]=S[ue];return ie}function Q(S,U,ie,ue){if("function"==typeof S.on)ue.once?S.once(U,ie):S.on(U,ie);else{if("function"!=typeof S.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(U,function ee(se){ue.once&&S.removeEventListener(U,ee),ie(se)})}}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(S){if("number"!=typeof S||S<0||W(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");x=S}}),w.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||W(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},w.prototype.getMaxListeners=function(){return T(this)},w.prototype.emit=function(U){for(var ie=[],ue=1;ue<arguments.length;ue++)ie.push(arguments[ue]);var ee="error"===U,se=this._events;if(void 0!==se)ee=ee&&void 0===se.error;else if(!ee)return!1;if(ee){var Te;if(ie.length>0&&(Te=ie[0]),Te instanceof Error)throw Te;var me=new Error("Unhandled error."+(Te?" ("+Te.message+")":""));throw me.context=Te,me}var te=se[U];if(void 0===te)return!1;if("function"==typeof te)V(te,this,ie);else{var ye=te.length,Oe=I(te,ye);for(ue=0;ue<ye;++ue)V(Oe[ue],this,ie)}return!0},w.prototype.on=w.prototype.addListener=function(U,ie){return v(this,U,ie,!1)},w.prototype.prependListener=function(U,ie){return v(this,U,ie,!0)},w.prototype.once=function(U,ie){return R(ie),this.on(U,E(this,U,ie)),this},w.prototype.prependOnceListener=function(U,ie){return R(ie),this.prependListener(U,E(this,U,ie)),this},w.prototype.off=w.prototype.removeListener=function(U,ie){var ue,ee,se,Te,me;if(R(ie),void 0===(ee=this._events))return this;if(void 0===(ue=ee[U]))return this;if(ue===ie||ue.listener===ie)0==--this._eventsCount?this._events=Object.create(null):(delete ee[U],ee.removeListener&&this.emit("removeListener",U,ue.listener||ie));else if("function"!=typeof ue){for(se=-1,Te=ue.length-1;Te>=0;Te--)if(ue[Te]===ie||ue[Te].listener===ie){me=ue[Te].listener,se=Te;break}if(se<0)return this;0===se?ue.shift():function(S,U){for(;U+1<S.length;U++)S[U]=S[U+1];S.pop()}(ue,se),1===ue.length&&(ee[U]=ue[0]),void 0!==ee.removeListener&&this.emit("removeListener",U,me||ie)}return this},w.prototype.removeAllListeners=function(U){var ie,ue,ee;if(void 0===(ue=this._events))return this;if(void 0===ue.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ue[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete ue[U]),this;if(0===arguments.length){var Te,se=Object.keys(ue);for(ee=0;ee<se.length;++ee)"removeListener"!==(Te=se[ee])&&this.removeAllListeners(Te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ie=ue[U]))this.removeListener(U,ie);else if(void 0!==ie)for(ee=ie.length-1;ee>=0;ee--)this.removeListener(U,ie[ee]);return this},w.prototype.listeners=function(U){return D(this,U,!0)},w.prototype.rawListeners=function(U){return D(this,U,!1)},w.listenerCount=function(S,U){return"function"==typeof S.listenerCount?S.listenerCount(U):j.call(S,U)},w.prototype.listenerCount=j,w.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]}},{}],9:[function(Y,Ae,fe){fe.read=function(q,V,L,re,W){var w,x,R=8*W-re-1,T=(1<<R)-1,v=T>>1,y=-7,E=L?W-1:0,D=L?-1:1,j=q[V+E];for(E+=D,w=j&(1<<-y)-1,j>>=-y,y+=R;y>0;w=256*w+q[V+E],E+=D,y-=8);for(x=w&(1<<-y)-1,w>>=-y,y+=re;y>0;x=256*x+q[V+E],E+=D,y-=8);if(0===w)w=1-v;else{if(w===T)return x?NaN:1/0*(j?-1:1);x+=Math.pow(2,re),w-=v}return(j?-1:1)*x*Math.pow(2,w-re)},fe.write=function(q,V,L,re,W,w){var x,R,T,v=8*w-W-1,y=(1<<v)-1,E=y>>1,D=23===W?Math.pow(2,-24)-Math.pow(2,-77):0,j=re?0:w-1,I=re?1:-1,$=V<0||0===V&&1/V<0?1:0;for(V=Math.abs(V),isNaN(V)||V===1/0?(R=isNaN(V)?1:0,x=y):(x=Math.floor(Math.log(V)/Math.LN2),V*(T=Math.pow(2,-x))<1&&(x--,T*=2),(V+=x+E>=1?D/T:D*Math.pow(2,1-E))*T>=2&&(x++,T/=2),x+E>=y?(R=0,x=y):x+E>=1?(R=(V*T-1)*Math.pow(2,W),x+=E):(R=V*Math.pow(2,E-1)*Math.pow(2,W),x=0));W>=8;q[L+j]=255&R,j+=I,R/=256,W-=8);for(x=x<<W|R,v+=W;v>0;q[L+j]=255&x,j+=I,x/=256,v-=8);q[L+j-I]|=128*$}},{}],10:[function(Y,Ae,fe){Ae.exports="function"==typeof Object.create?function(V,L){L&&(V.super_=L,V.prototype=Object.create(L.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}))}:function(V,L){if(L){V.super_=L;var re=function(){};re.prototype=L.prototype,V.prototype=new re,V.prototype.constructor=V}}},{}],11:[function(Y,Ae,fe){"use strict";const{isArray:q,isObject:V,isString:L}=Y("./types"),{asArray:re}=Y("./util"),{prependBase:W}=Y("./url"),w=Y("./JsonLdError"),x=Y("./ResolvedContext");function T(y){throw new w("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:y})}function v({context:y,base:E}){if(!y)return;const D=y["@context"];if(L(D))y["@context"]=W(E,D);else if(q(D))for(let j=0;j<D.length;++j){const I=D[j];L(I)?D[j]=W(E,I):V(I)&&v({context:{"@context":I},base:E})}else if(V(D))for(const j in D)v({context:D[j],base:E})}Ae.exports=class{constructor({sharedCache:E}){this.perOpCache=new Map,this.sharedCache=E}resolve({activeCtx:E,context:D,documentLoader:j,base:I,cycles:$=new Set}){var K=this;return gt(function*(){D&&V(D)&&D["@context"]&&(D=D["@context"]),D=re(D);const M=[];for(const F of D){if(L(F)){let U=K._get(F);U||(U=yield K._resolveRemoteContext({activeCtx:E,url:F,documentLoader:j,base:I,cycles:$})),q(U)?M.push(...U):M.push(U);continue}if(null===F){M.push(new x({document:null}));continue}V(F)||T(D);const Q=JSON.stringify(F);let S=K._get(Q);S||(S=new x({document:F}),K._cacheResolvedContext({key:Q,resolved:S,tag:"static"})),M.push(S)}return M})()}_get(E){let D=this.perOpCache.get(E);if(!D){const j=this.sharedCache.get(E);j&&(D=j.get("static"),D&&this.perOpCache.set(E,D))}return D}_cacheResolvedContext({key:E,resolved:D,tag:j}){if(this.perOpCache.set(E,D),void 0!==j){let I=this.sharedCache.get(E);I||(I=new Map,this.sharedCache.set(E,I)),I.set(j,D)}return D}_resolveRemoteContext({activeCtx:E,url:D,documentLoader:j,base:I,cycles:$}){var K=this;return gt(function*(){D=W(I,D);const{context:M,remoteDoc:F}=yield K._fetchContext({activeCtx:E,url:D,documentLoader:j,cycles:$});v({context:M,base:I=F.documentUrl||D});const Q=yield K.resolve({activeCtx:E,context:M,documentLoader:j,base:I,cycles:$});return K._cacheResolvedContext({key:D,resolved:Q,tag:F.tag}),Q})()}_fetchContext({activeCtx:E,url:D,documentLoader:j,cycles:I}){return gt(function*(){if(I.size>10)throw new w("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===E.processingMode?"loading remote context failed":"context overflow",max:10});if(I.has(D))throw new w("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===E.processingMode?"recursive context inclusion":"context overflow",url:D});let $,K;I.add(D);try{K=yield j(D),$=K.document||null,L($)&&($=JSON.parse($))}catch(M){throw new w("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:D,cause:M})}if(!V($))throw new w("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:D});return $="@context"in $?{"@context":$["@context"]}:{"@context":{}},K.contextUrl&&(q($["@context"])||($["@context"]=[$["@context"]]),$["@context"].push(K.contextUrl)),{context:$,remoteDoc:K}})()}}},{"./JsonLdError":12,"./ResolvedContext":16,"./types":30,"./url":31,"./util":32}],12:[function(Y,Ae,fe){"use strict";Ae.exports=class extends Error{constructor(V="An unspecified JSON-LD error occurred.",L="jsonld.Error",re={}){super(V),this.name=L,this.message=V,this.details=re}}},{}],13:[function(Y,Ae,fe){"use strict";Ae.exports=q=>{class V{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(V,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(V.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:V}),V.compact=function(L,re){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(L,re)},V.expand=function(L){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(L)},V.flatten=function(L){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(L)},V}},{}],14:[function(Y,Ae,fe){"use strict";Ae.exports=Y("rdf-canonize").NQuads},{"rdf-canonize":46}],15:[function(Y,Ae,fe){"use strict";Ae.exports=class{constructor(){this._requests={}}wrapLoader(V){const L=this;return L._loader=V,function(){return L.add.apply(L,arguments)}}add(V){var L=this;return gt(function*(){let re=L._requests[V];if(re)return Promise.resolve(re);re=L._requests[V]=L._loader(V);try{return yield re}finally{delete L._requests[V]}})()}}},{}],16:[function(Y,Ae,fe){"use strict";const q=Y("lru-cache");Ae.exports=class{constructor({document:re}){this.document=re,this.cache=new q({max:10})}getProcessed(re){return this.cache.get(re)}setProcessed(re,W){this.cache.set(re,W)}}},{"lru-cache":33}],17:[function(Y,Ae,fe){"use strict";const q=Y("./JsonLdError"),{isArray:V,isObject:L,isString:re,isUndefined:W}=Y("./types"),{isList:w,isValue:x,isGraph:R,isSimpleGraph:T,isSubjectReference:v}=Y("./graphTypes"),{expandIri:y,getContextValue:E,isKeyword:D,process:j,processingMode:I}=Y("./context"),{removeBase:$,prependBase:K}=Y("./url"),{addValue:M,asArray:F,compareShortestLeast:Q}=Y("./util"),S={};function ie(ue,ee,se){if("@nest"!==y(ue,ee,{vocab:!0},se))throw new q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ae.exports=S,S.compact=function(){var ue=gt(function*({activeCtx:ee,activeProperty:se=null,element:Te,options:me={},compactionMap:te=(()=>{})}){if(V(Te)){let Oe=[];for(let Ue=0;Ue<Te.length;++Ue){let nt=yield S.compact({activeCtx:ee,activeProperty:se,element:Te[Ue],options:me,compactionMap:te});null===nt&&(nt=yield te({unmappedValue:Te[Ue],activeCtx:ee,activeProperty:se,parent:Te,index:Ue,options:me}),void 0===nt)||Oe.push(nt)}return me.compactArrays&&1===Oe.length&&0===(E(ee,se,"@container")||[]).length&&(Oe=Oe[0]),Oe}const ye=E(ee,se,"@context");if(W(ye)||(ee=yield j({activeCtx:ee,localCtx:ye,propagate:!0,overrideProtected:!0,options:me})),L(Te)){if(me.link&&"@id"in Te&&me.link.hasOwnProperty(Te["@id"])){const ke=me.link[Te["@id"]];for(let Ee=0;Ee<ke.length;++Ee)if(ke[Ee].expanded===Te)return ke[Ee].compacted}if(x(Te)||v(Te)){const ke=S.compactValue({activeCtx:ee,activeProperty:se,value:Te,options:me});return me.link&&v(Te)&&(me.link.hasOwnProperty(Te["@id"])||(me.link[Te["@id"]]=[]),me.link[Te["@id"]].push({expanded:Te,compacted:ke})),ke}if(w(Te)&&(E(ee,se,"@container")||[]).includes("@list"))return S.compact({activeCtx:ee,activeProperty:se,element:Te["@list"],options:me,compactionMap:te});const Oe="@reverse"===se,Ue={},nt=ee;!x(Te)&&!v(Te)&&(ee=ee.revertToPreviousContext());const Ze=E(nt,se,"@context");W(Ze)||(ee=yield j({activeCtx:ee,localCtx:Ze,propagate:!0,overrideProtected:!0,options:me})),me.link&&"@id"in Te&&(me.link.hasOwnProperty(Te["@id"])||(me.link[Te["@id"]]=[]),me.link[Te["@id"]].push({expanded:Te,compacted:Ue}));let Je=Te["@type"]||[];Je.length>1&&(Je=Array.from(Je).sort());const Ke=ee;for(const ke of Je){const Ee=S.compactIri({activeCtx:Ke,iri:ke,relativeTo:{vocab:!0}}),Re=E(nt,Ee,"@context");W(Re)||(ee=yield j({activeCtx:ee,localCtx:Re,options:me,propagate:!1}))}const Ve=Object.keys(Te).sort();for(const ke of Ve){const Ee=Te[ke];if("@id"!==ke)if("@type"!==ke)if("@reverse"!==ke)if("@preserve"!==ke)if("@index"!==ke)if("@graph"!==ke&&"@list"!==ke&&"@included"!==ke&&D(ke)){const Re=S.compactIri({activeCtx:ee,iri:ke,relativeTo:{vocab:!0}});M(Ue,Re,Ee)}else{if(!V(Ee))throw new q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Ee.length){const Re=S.compactIri({activeCtx:ee,iri:ke,value:Ee,relativeTo:{vocab:!0},reverse:Oe}),ze=ee.mappings.has(Re)?ee.mappings.get(Re)["@nest"]:null;let qe=Ue;ze&&(ie(ee,ze,me),L(Ue[ze])||(Ue[ze]={}),qe=Ue[ze]),M(qe,Re,Ee,{propertyIsArray:!0})}for(const Re of Ee){const ze=S.compactIri({activeCtx:ee,iri:ke,value:Re,relativeTo:{vocab:!0},reverse:Oe}),qe=ee.mappings.has(ze)?ee.mappings.get(ze)["@nest"]:null;let je=Ue;qe&&(ie(ee,qe,me),L(Ue[qe])||(Ue[qe]={}),je=Ue[qe]);const G=E(ee,ze,"@container")||[],X=R(Re),be=w(Re);let ce;be?ce=Re["@list"]:X&&(ce=Re["@graph"]);let Pe=yield S.compact({activeCtx:ee,activeProperty:ze,element:be||X?ce:Re,options:me,compactionMap:te});if(be){if(V(Pe)||(Pe=[Pe]),G.includes("@list")){M(je,ze,Pe,{valueIsArray:!0,allowDuplicate:!0});continue}Pe={[S.compactIri({activeCtx:ee,iri:"@list",relativeTo:{vocab:!0}})]:Pe},"@index"in Re&&(Pe[S.compactIri({activeCtx:ee,iri:"@index",relativeTo:{vocab:!0}})]=Re["@index"])}if(X)if(G.includes("@graph")&&(G.includes("@id")||G.includes("@index")&&T(Re))){let Et;je.hasOwnProperty(ze)?Et=je[ze]:je[ze]=Et={};const pt=(G.includes("@id")?Re["@id"]:Re["@index"])||S.compactIri({activeCtx:ee,iri:"@none",relativeTo:{vocab:!0}});M(Et,pt,Pe,{propertyIsArray:!me.compactArrays||G.includes("@set")})}else G.includes("@graph")&&T(Re)?(V(Pe)&&Pe.length>1&&(Pe={"@included":Pe}),M(je,ze,Pe,{propertyIsArray:!me.compactArrays||G.includes("@set")})):(V(Pe)&&1===Pe.length&&me.compactArrays&&(Pe=Pe[0]),Pe={[S.compactIri({activeCtx:ee,iri:"@graph",relativeTo:{vocab:!0}})]:Pe},"@id"in Re&&(Pe[S.compactIri({activeCtx:ee,iri:"@id",relativeTo:{vocab:!0}})]=Re["@id"]),"@index"in Re&&(Pe[S.compactIri({activeCtx:ee,iri:"@index",relativeTo:{vocab:!0}})]=Re["@index"]),M(je,ze,Pe,{propertyIsArray:!me.compactArrays||G.includes("@set")}));else if(G.includes("@language")||G.includes("@index")||G.includes("@id")||G.includes("@type")){let Et,pt;if(je.hasOwnProperty(ze)?Et=je[ze]:je[ze]=Et={},G.includes("@language"))x(Pe)&&(Pe=Pe["@value"]),pt=Re["@language"];else if(G.includes("@index")){const ge=E(ee,ze,"@index")||"@index",B=S.compactIri({activeCtx:ee,iri:ge,relativeTo:{vocab:!0}});if("@index"===ge)pt=Re["@index"],delete Pe[B];else{let O;if([pt,...O]=F(Pe[ge]||[]),re(pt))switch(O.length){case 0:delete Pe[ge];break;case 1:Pe[ge]=O[0];break;default:Pe[ge]=O}else pt=null}}else if(G.includes("@id")){const ge=S.compactIri({activeCtx:ee,iri:"@id",relativeTo:{vocab:!0}});pt=Pe[ge],delete Pe[ge]}else if(G.includes("@type")){const ge=S.compactIri({activeCtx:ee,iri:"@type",relativeTo:{vocab:!0}});let B;switch([pt,...B]=F(Pe[ge]||[]),B.length){case 0:delete Pe[ge];break;case 1:Pe[ge]=B[0];break;default:Pe[ge]=B}1===Object.keys(Pe).length&&"@id"in Re&&(Pe=yield S.compact({activeCtx:ee,activeProperty:ze,element:{"@id":Re["@id"]},options:me,compactionMap:te}))}pt||(pt=S.compactIri({activeCtx:ee,iri:"@none",relativeTo:{vocab:!0}})),M(Et,pt,Pe,{propertyIsArray:G.includes("@set")})}else{const Et=!me.compactArrays||G.includes("@set")||G.includes("@list")||V(Pe)&&0===Pe.length||"@list"===ke||"@graph"===ke;M(je,ze,Pe,{propertyIsArray:Et})}}}else{if((E(ee,se,"@container")||[]).includes("@index"))continue;const ze=S.compactIri({activeCtx:ee,iri:ke,relativeTo:{vocab:!0}});M(Ue,ze,Ee)}else{const Re=yield S.compact({activeCtx:ee,activeProperty:se,element:Ee,options:me,compactionMap:te});V(Re)&&0===Re.length||M(Ue,ke,Re)}else{const Re=yield S.compact({activeCtx:ee,activeProperty:"@reverse",element:Ee,options:me,compactionMap:te});for(const ze in Re)if(ee.mappings.has(ze)&&ee.mappings.get(ze).reverse){const qe=Re[ze],G=(E(ee,ze,"@container")||[]).includes("@set")||!me.compactArrays;M(Ue,ze,qe,{propertyIsArray:G}),delete Re[ze]}if(Object.keys(Re).length>0){const ze=S.compactIri({activeCtx:ee,iri:ke,relativeTo:{vocab:!0}});M(Ue,ze,Re)}}else{let Re=F(Ee).map(X=>S.compactIri({activeCtx:nt,iri:X,relativeTo:{vocab:!0}}));1===Re.length&&(Re=Re[0]);const ze=S.compactIri({activeCtx:ee,iri:"@type",relativeTo:{vocab:!0}}),G=(E(ee,ze,"@container")||[]).includes("@set")&&I(ee,1.1)||V(Re)&&0===Ee.length;M(Ue,ze,Re,{propertyIsArray:G})}else{let Re=F(Ee).map(qe=>S.compactIri({activeCtx:ee,iri:qe,relativeTo:{vocab:!1},base:me.base}));1===Re.length&&(Re=Re[0]),Ue[S.compactIri({activeCtx:ee,iri:"@id",relativeTo:{vocab:!0}})]=Re}}return Ue}return Te});return function(ee){return ue.apply(this,arguments)}}(),S.compactIri=({activeCtx:ue,iri:ee,value:se=null,relativeTo:Te={vocab:!1},reverse:me=!1,base:te=null})=>{if(null===ee)return ee;ue.isPropertyTermScoped&&ue.previousContext&&(ue=ue.previousContext);const ye=ue.getInverse();if(D(ee)&&ee in ye&&"@none"in ye[ee]&&"@type"in ye[ee]["@none"]&&"@none"in ye[ee]["@none"]["@type"])return ye[ee]["@none"]["@type"]["@none"];if(Te.vocab&&ee in ye){const Je=ue["@language"]||"@none",Ke=[];L(se)&&"@index"in se&&!("@graph"in se)&&Ke.push("@index","@index@set"),L(se)&&"@preserve"in se&&(se=se["@preserve"][0]),R(se)?("@index"in se&&Ke.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in se&&Ke.push("@graph@id","@graph@id@set"),Ke.push("@graph","@graph@set","@set"),"@index"in se||Ke.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in se||Ke.push("@graph@id","@graph@id@set")):L(se)&&!x(se)&&Ke.push("@id","@id@set","@type","@set@type");let Ve="@language",ke="@null";if(me)Ve="@type",ke="@reverse",Ke.push("@set");else if(w(se)){"@index"in se||Ke.push("@list");const Re=se["@list"];if(0===Re.length)Ve="@any",ke="@none";else{let ze=0===Re.length?Je:null,qe=null;for(let je=0;je<Re.length;++je){const G=Re[je];let X="@none",be="@none";if(x(G)?"@direction"in G?X=`${(G["@language"]||"").toLowerCase()}_${G["@direction"]}`:"@language"in G?X=G["@language"].toLowerCase():"@type"in G?be=G["@type"]:X="@null":be="@id",null===ze?ze=X:X!==ze&&x(G)&&(ze="@none"),null===qe?qe=be:be!==qe&&(qe="@none"),"@none"===ze&&"@none"===qe)break}ze=ze||"@none",qe=qe||"@none","@none"!==qe?(Ve="@type",ke=qe):ke=ze}}else{if(x(se))if("@language"in se&&!("@index"in se)){Ke.push("@language","@language@set"),ke=se["@language"];const Re=se["@direction"];Re&&(ke=`${ke}_${Re}`)}else"@direction"in se&&!("@index"in se)?ke=`_${se["@direction"]}`:"@type"in se&&(Ve="@type",ke=se["@type"]);else Ve="@type",ke="@id";Ke.push("@set")}Ke.push("@none"),L(se)&&!("@index"in se)&&Ke.push("@index","@index@set"),x(se)&&1===Object.keys(se).length&&Ke.push("@language","@language@set");const Ee=function(ue,ee,se,Te,me,te){null===te&&(te="@null");const ye=[];if(("@id"===te||"@reverse"===te)&&L(se)&&"@id"in se){"@reverse"===te&&ye.push("@reverse");const Ue=S.compactIri({activeCtx:ue,iri:se["@id"],relativeTo:{vocab:!0}});ue.mappings.has(Ue)&&ue.mappings.get(Ue)&&ue.mappings.get(Ue)["@id"]===se["@id"]?ye.push.apply(ye,["@vocab","@id"]):ye.push.apply(ye,["@id","@vocab"])}else{ye.push(te);const Ue=ye.find(nt=>nt.includes("_"));Ue&&ye.push(Ue.replace(/^[^_]+_/,"_"))}ye.push("@none");const Oe=ue.inverse[ee];for(const Ue of Te){if(!(Ue in Oe))continue;const nt=Oe[Ue][me];for(const Ze of ye)if(Ze in nt)return nt[Ze]}return null}(ue,ee,se,Ke,Ve,ke);if(null!==Ee)return Ee}if(Te.vocab&&"@vocab"in ue){const Je=ue["@vocab"];if(0===ee.indexOf(Je)&&ee!==Je){const Ke=ee.substr(Je.length);if(!ue.mappings.has(Ke))return Ke}}let Oe=null;const Ue=[];let nt=ue.fastCurieMap;const Ze=ee.length-1;for(let Je=0;Je<Ze&&ee[Je]in nt;++Je)nt=nt[ee[Je]],""in nt&&Ue.push(nt[""][0]);for(let Je=Ue.length-1;Je>=0;--Je){const Ke=Ue[Je],Ve=Ke.terms;for(const ke of Ve){const Ee=ke+":"+ee.substr(Ke.iri.length);ue.mappings.get(ke)._prefix&&(!ue.mappings.has(Ee)||null===se&&ue.mappings.get(Ee)["@id"]===ee)&&(null===Oe||Q(Ee,Oe)<0)&&(Oe=Ee)}}if(null!==Oe)return Oe;for(const[Je,Ke]of ue.mappings)if(Ke&&Ke._prefix&&ee.startsWith(Je+":"))throw new q(`Absolute IRI "${ee}" confused with prefix "${Je}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:ue});return Te.vocab?ee:"@base"in ue?ue["@base"]?$(K(te,ue["@base"]),ee):ee:$(te,ee)},S.compactValue=({activeCtx:ue,activeProperty:ee,value:se,options:Te})=>{if(x(se)){const Oe=E(ue,ee,"@type"),Ue=E(ue,ee,"@language"),nt=E(ue,ee,"@direction"),Ze=E(ue,ee,"@container")||[],Je="@index"in se&&!Ze.includes("@index");if(!Je&&"@none"!==Oe&&(se["@type"]===Oe||"@language"in se&&se["@language"]===Ue&&"@direction"in se&&se["@direction"]===nt||"@language"in se&&se["@language"]===Ue||"@direction"in se&&se["@direction"]===nt))return se["@value"];const Ke=Object.keys(se).length,Ve=1===Ke||2===Ke&&"@index"in se&&!Je,ke="@language"in ue,Ee=re(se["@value"]),Re=ue.mappings.has(ee)&&null===ue.mappings.get(ee)["@language"];if(Ve&&"@none"!==Oe&&(!ke||!Ee||Re))return se["@value"];const ze={};return Je&&(ze[S.compactIri({activeCtx:ue,iri:"@index",relativeTo:{vocab:!0}})]=se["@index"]),"@type"in se?ze[S.compactIri({activeCtx:ue,iri:"@type",relativeTo:{vocab:!0}})]=S.compactIri({activeCtx:ue,iri:se["@type"],relativeTo:{vocab:!0}}):"@language"in se&&(ze[S.compactIri({activeCtx:ue,iri:"@language",relativeTo:{vocab:!0}})]=se["@language"]),"@direction"in se&&(ze[S.compactIri({activeCtx:ue,iri:"@direction",relativeTo:{vocab:!0}})]=se["@direction"]),ze[S.compactIri({activeCtx:ue,iri:"@value",relativeTo:{vocab:!0}})]=se["@value"],ze}const me=y(ue,ee,{vocab:!0},Te),te=E(ue,ee,"@type"),ye=S.compactIri({activeCtx:ue,iri:se["@id"],relativeTo:{vocab:"@vocab"===te},base:Te.base});return"@id"===te||"@vocab"===te||"@graph"===me?ye:{[S.compactIri({activeCtx:ue,iri:"@id",relativeTo:{vocab:!0}})]:ye}}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],18:[function(Y,Ae,fe){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",V="http://www.w3.org/2001/XMLSchema#";Ae.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:V,XSD_BOOLEAN:V+"boolean",XSD_DOUBLE:V+"double",XSD_INTEGER:V+"integer",XSD_STRING:V+"string"}},{}],19:[function(Y,Ae,fe){"use strict";const q=Y("./util"),V=Y("./JsonLdError"),{isArray:L,isObject:re,isString:W,isUndefined:w}=Y("./types"),{isAbsolute:x,isRelative:R,prependBase:T}=Y("./url"),{asArray:v,compareShortestLeast:y}=Y("./util"),E=new Map,j=/^@[a-zA-Z]+$/,I={};function $(M,F,Q,S,U,ie){if(null===F||!W(F)||I.isKeyword(F))return F;if(F.match(j))return null;if(S&&S.hasOwnProperty(F)&&!0!==U.get(F)&&I.createTermDefinition({activeCtx:M,localCtx:S,term:F,defined:U,options:ie}),(Q=Q||{}).vocab){const ee=M.mappings.get(F);if(null===ee)return null;if(re(ee)&&"@id"in ee)return ee["@id"]}const ue=F.indexOf(":");if(ue>0){const ee=F.substr(0,ue),se=F.substr(ue+1);if("_"===ee||0===se.indexOf("//"))return F;S&&S.hasOwnProperty(ee)&&I.createTermDefinition({activeCtx:M,localCtx:S,term:ee,defined:U,options:ie});const Te=M.mappings.get(ee);if(Te&&Te._prefix)return Te["@id"]+se;if(x(F))return F}if(Q.vocab&&"@vocab"in M)return M["@vocab"]+F;if(Q.base&&"@base"in M){if(M["@base"])return T(T(ie.base,M["@base"]),F)}else if(Q.base)return T(ie.base,F);return F}function K(M,F){if(!M||"object"!=typeof M||!F||"object"!=typeof F)return M===F;const Q=Array.isArray(M);if(Q!==Array.isArray(F))return!1;if(Q){if(M.length!==F.length)return!1;for(let ie=0;ie<M.length;++ie)if(!K(M[ie],F[ie]))return!1;return!0}const S=Object.keys(M),U=Object.keys(F);if(S.length!==U.length)return!1;for(const ie in M){let ue=M[ie],ee=F[ie];if("@container"===ie&&Array.isArray(ue)&&Array.isArray(ee)&&(ue=ue.slice().sort(),ee=ee.slice().sort()),!K(ue,ee))return!1}return!0}Ae.exports=I,I.process=function(){var M=gt(function*({activeCtx:F,localCtx:Q,options:S,propagate:U=!0,overrideProtected:ie=!1,cycles:ue=new Set}){if(re(Q)&&"@context"in Q&&L(Q["@context"])&&(Q=Q["@context"]),0===v(Q).length)return F;const se=yield S.contextResolver.resolve({activeCtx:F,context:Q,documentLoader:S.documentLoader,base:S.base});re(se[0].document)&&"boolean"==typeof se[0].document["@propagate"]&&(U=se[0].document["@propagate"]);let Te=F;!U&&!Te.previousContext&&(Te=Te.clone(),Te.previousContext=F);for(const me of se){let{document:te}=me;if(F=Te,null===te){if(!ie&&0!==Object.keys(F.protected).length){const Ue=S&&S.protectedMode||"error";if("error"===Ue)throw new V("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===Ue){console.warn("WARNING: invalid context nullification");const nt=me.getProcessed(F);if(nt){Te=F=nt;continue}const Ze=F;Te=F=I.getInitialContext(S).clone();for(const[Je,Ke]of Object.entries(Ze.protected))Ke&&(F.mappings[Je]=q.clone(Ze.mappings[Je]));F.protected=q.clone(Ze.protected),me.setProcessed(Ze,Te);continue}throw new V("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:Q,protectedMode:Ue})}Te=F=I.getInitialContext(S).clone();continue}const ye=me.getProcessed(F);if(ye){Te=F=ye;continue}if(re(te)&&"@context"in te&&(te=te["@context"]),!re(te))throw new V("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:te});Te=Te.clone();const Oe=new Map;if("@version"in te){if(1.1!==te["@version"])throw new V("Unsupported JSON-LD version: "+te["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:te});if(F.processingMode&&"json-ld-1.0"===F.processingMode)throw new V("@version: "+te["@version"]+" not compatible with "+F.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:te});Te.processingMode="json-ld-1.1",Te["@version"]=te["@version"],Oe.set("@version",!0)}if(Te.processingMode=Te.processingMode||F.processingMode,"@base"in te){let Ue=te["@base"];if(null!==Ue&&!x(Ue)){if(!R(Ue))throw new V('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:te});Ue=T(Te["@base"],Ue)}Te["@base"]=Ue,Oe.set("@base",!0)}if("@vocab"in te){const Ue=te["@vocab"];if(null===Ue)delete Te["@vocab"];else{if(!W(Ue))throw new V('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:te});if(!x(Ue)&&I.processingMode(Te,1))throw new V('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:te});Te["@vocab"]=$(Te,Ue,{vocab:!0,base:!0},void 0,void 0,S)}Oe.set("@vocab",!0)}if("@language"in te){const Ue=te["@language"];if(null===Ue)delete Te["@language"];else{if(!W(Ue))throw new V('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:te});Te["@language"]=Ue.toLowerCase()}Oe.set("@language",!0)}if("@direction"in te){const Ue=te["@direction"];if("json-ld-1.0"===F.processingMode)throw new V("Invalid JSON-LD syntax; @direction not compatible with "+F.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:te});if(null===Ue)delete Te["@direction"];else{if("ltr"!==Ue&&"rtl"!==Ue)throw new V('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:te});Te["@direction"]=Ue}Oe.set("@direction",!0)}if("@propagate"in te){const Ue=te["@propagate"];if("json-ld-1.0"===F.processingMode)throw new V("Invalid JSON-LD syntax; @propagate not compatible with "+F.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:te});if("boolean"!=typeof Ue)throw new V("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:Q});Oe.set("@propagate",!0)}if("@import"in te){const Ue=te["@import"];if("json-ld-1.0"===F.processingMode)throw new V("Invalid JSON-LD syntax; @import not compatible with "+F.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:te});if(!W(Ue))throw new V("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:Q});const nt=yield S.contextResolver.resolve({activeCtx:F,context:Ue,documentLoader:S.documentLoader,base:S.base});if(1!==nt.length)throw new V("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:Q});const Ze=nt[0].getProcessed(F);if(Ze)te=Ze;else{const Je=nt[0].document;if("@import"in Je)throw new V("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:Q});for(const Ke in Je)te.hasOwnProperty(Ke)||(te[Ke]=Je[Ke]);nt[0].setProcessed(F,te)}Oe.set("@import",!0)}Oe.set("@protected",te["@protected"]||!1);for(const Ue in te)if(I.createTermDefinition({activeCtx:Te,localCtx:te,term:Ue,defined:Oe,options:S,overrideProtected:ie}),re(te[Ue])&&"@context"in te[Ue]){const nt=te[Ue]["@context"];let Ze=!0;if(W(nt)){const Je=T(S.base,nt);ue.has(Je)?Ze=!1:ue.add(Je)}if(Ze)try{yield I.process({activeCtx:Te.clone(),localCtx:te[Ue]["@context"],overrideProtected:!0,options:S,cycles:ue})}catch(Je){throw new V("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:te[Ue]["@context"],term:Ue})}}me.setProcessed(F,Te)}return Te});return function(F){return M.apply(this,arguments)}}(),I.createTermDefinition=({activeCtx:M,localCtx:F,term:Q,defined:S,options:U,overrideProtected:ie=!1})=>{if(S.has(Q)){if(S.get(Q))return;throw new V("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:F,term:Q})}let ue;if(S.set(Q,!1),F.hasOwnProperty(Q)&&(ue=F[Q]),"@type"===Q&&re(ue)&&"@set"===(ue["@container"]||"@set")&&I.processingMode(M,1.1)){const Oe=["@container","@id","@protected"],Ue=Object.keys(ue);if(0===Ue.length||Ue.some(nt=>!Oe.includes(nt)))throw new V("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:F,term:Q})}else{if(I.isKeyword(Q))throw new V("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:F,term:Q});if(Q.match(j))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:Q});if(""===Q)throw new V("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:F})}const ee=M.mappings.get(Q);M.mappings.has(Q)&&M.mappings.delete(Q);let se=!1;if((W(ue)||null===ue)&&(se=!0,ue={"@id":ue}),!re(ue))throw new V("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:F});const Te={};M.mappings.set(Q,Te),Te.reverse=!1;const me=["@container","@id","@language","@reverse","@type"];I.processingMode(M,1.1)&&me.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Oe in ue)if(!me.includes(Oe))throw new V("Invalid JSON-LD syntax; a term definition must not contain "+Oe,"jsonld.SyntaxError",{code:"invalid term definition",context:F});const te=Q.indexOf(":");if(Te._termHasColon=te>0,"@reverse"in ue){if("@id"in ue)throw new V("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:F});if("@nest"in ue)throw new V("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:F});const Oe=ue["@reverse"];if(!W(Oe))throw new V("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:F});if(!I.isKeyword(Oe)&&Oe.match(j))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:Oe}),void(ee?M.mappings.set(Q,ee):M.mappings.delete(Q));const Ue=$(M,Oe,{vocab:!0,base:!1},F,S,U);if(!x(Ue))throw new V("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:F});Te["@id"]=Ue,Te.reverse=!0}else if("@id"in ue){let Oe=ue["@id"];if(Oe&&!W(Oe))throw new V("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:F});if(null===Oe)Te["@id"]=null;else{if(!I.isKeyword(Oe)&&Oe.match(j))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:Oe}),void(ee?M.mappings.set(Q,ee):M.mappings.delete(Q));if(Oe!==Q){if(Oe=$(M,Oe,{vocab:!0,base:!1},F,S,U),!x(Oe)&&!I.isKeyword(Oe))throw new V("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:F});if(Q.match(/(?::[^:])|\//)&&$(M,Q,{vocab:!0,base:!1},F,new Map(S).set(Q,!0),U)!==Oe)throw new V("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:F});Te["@id"]=Oe,Te._prefix=se&&!Te._termHasColon&&Oe.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Te))if(Te._termHasColon){const Oe=Q.substr(0,te);if(F.hasOwnProperty(Oe)&&I.createTermDefinition({activeCtx:M,localCtx:F,term:Oe,defined:S,options:U}),M.mappings.has(Oe)){const Ue=Q.substr(te+1);Te["@id"]=M.mappings.get(Oe)["@id"]+Ue}else Te["@id"]=Q}else if("@type"===Q)Te["@id"]=Q;else{if(!("@vocab"in M))throw new V("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:F,term:Q});Te["@id"]=M["@vocab"]+Q}if((!0===ue["@protected"]||!0===S.get("@protected")&&!1!==ue["@protected"])&&(M.protected[Q]=!0,Te.protected=!0),S.set(Q,!0),"@type"in ue){let Oe=ue["@type"];if(!W(Oe))throw new V("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:F});if("@json"===Oe||"@none"===Oe){if(I.processingMode(M,1))throw new V(`Invalid JSON-LD syntax; an @context @type value must not be "${Oe}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:F})}else if("@id"!==Oe&&"@vocab"!==Oe){if(Oe=$(M,Oe,{vocab:!0,base:!1},F,S,U),!x(Oe))throw new V("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:F});if(0===Oe.indexOf("_:"))throw new V("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:F})}Te["@type"]=Oe}if("@container"in ue){const Oe=W(ue["@container"])?[ue["@container"]]:ue["@container"]||[],Ue=["@list","@set","@index","@language"];let nt=!0;const Ze=Oe.includes("@set");if(I.processingMode(M,1.1)){if(Ue.push("@graph","@id","@type"),Oe.includes("@list")){if(1!==Oe.length)throw new V("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:F})}else if(Oe.includes("@graph")){if(Oe.some(Je=>"@graph"!==Je&&"@id"!==Je&&"@index"!==Je&&"@set"!==Je))throw new V("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:F})}else nt&=Oe.length<=(Ze?2:1);if(Oe.includes("@type")&&(Te["@type"]=Te["@type"]||"@id",!["@id","@vocab"].includes(Te["@type"])))throw new V("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:F})}else nt&=!L(ue["@container"]),nt&=Oe.length<=1;if(nt&=Oe.every(Je=>Ue.includes(Je)),nt&=!(Ze&&Oe.includes("@list")),!nt)throw new V("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ue.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:F});if(Te.reverse&&!Oe.every(Je=>["@index","@set"].includes(Je)))throw new V("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:F});Te["@container"]=Oe}if("@index"in ue){if(!("@container"in ue)||!Te["@container"].includes("@index"))throw new V(`Invalid JSON-LD syntax; @index without @index in @container: "${ue["@index"]}" on term "${Q}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:F});if(!W(ue["@index"])||0===ue["@index"].indexOf("@"))throw new V(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ue["@index"]}" on term "${Q}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:F});Te["@index"]=ue["@index"]}if("@context"in ue&&(Te["@context"]=ue["@context"]),"@language"in ue&&!("@type"in ue)){let Oe=ue["@language"];if(null!==Oe&&!W(Oe))throw new V("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:F});null!==Oe&&(Oe=Oe.toLowerCase()),Te["@language"]=Oe}if("@prefix"in ue){if(Q.match(/:|\//))throw new V("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:F});if(I.isKeyword(Te["@id"]))throw new V("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:F});if("boolean"!=typeof ue["@prefix"])throw new V("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:F});Te._prefix=!0===ue["@prefix"]}if("@direction"in ue){const Oe=ue["@direction"];if(null!==Oe&&"ltr"!==Oe&&"rtl"!==Oe)throw new V('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:F});Te["@direction"]=Oe}if("@nest"in ue){const Oe=ue["@nest"];if(!W(Oe)||"@nest"!==Oe&&0===Oe.indexOf("@"))throw new V("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:F});Te["@nest"]=Oe}const ye=Te["@id"];if("@context"===ye||"@preserve"===ye)throw new V("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:F});if(ee&&ee.protected&&!ie&&(M.protected[Q]=!0,Te.protected=!0,!K(ee,Te))){const Oe=U&&U.protectedMode||"error";if("error"===Oe)throw new V(`Invalid JSON-LD syntax; tried to redefine "${Q}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:F,term:Q});if("warn"===Oe)return void console.warn("WARNING: protected term redefinition",{term:Q});throw new V("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:F,term:Q,protectedMode:Oe})}},I.expandIri=(M,F,Q,S)=>$(M,F,Q,void 0,void 0,S),I.getInitialContext=M=>{const F=JSON.stringify({processingMode:M.processingMode}),Q=E.get(F);if(Q)return Q;const S={processingMode:M.processingMode,mappings:new Map,inverse:null,getInverse:function(){const Te=this;if(Te.inverse)return Te.inverse;const me=Te.inverse={},te=Te.fastCurieMap={},ye={},Oe=(Te["@language"]||"@none").toLowerCase(),Ue=Te["@direction"],nt=Te.mappings,Ze=[...nt.keys()].sort(y);for(const Je of Ze){const Ke=nt.get(Je);if(null===Ke)continue;let Ve=Ke["@container"]||"@none";if(Ve=[].concat(Ve).sort().join(""),null===Ke["@id"])continue;const ke=v(Ke["@id"]);for(const Ee of ke){let Re=me[Ee];const ze=I.isKeyword(Ee);if(Re)!ze&&!Ke._termHasColon&&ye[Ee].push(Je);else if(me[Ee]=Re={},!ze&&!Ke._termHasColon){ye[Ee]=[Je];const qe={iri:Ee,terms:ye[Ee]};Ee[0]in te?te[Ee[0]].push(qe):te[Ee[0]]=[qe]}if(Re[Ve]||(Re[Ve]={"@language":{},"@type":{},"@any":{}}),Re=Re[Ve],ue(Je,Re["@any"],"@none"),Ke.reverse)ue(Je,Re["@type"],"@reverse");else if("@none"===Ke["@type"])ue(Je,Re["@any"],"@none"),ue(Je,Re["@language"],"@none"),ue(Je,Re["@type"],"@none");else if("@type"in Ke)ue(Je,Re["@type"],Ke["@type"]);else if("@language"in Ke&&"@direction"in Ke){const qe=Ke["@language"],je=Ke["@direction"];ue(Je,Re["@language"],qe&&je?`${qe}_${je}`.toLowerCase():qe?qe.toLowerCase():je?`_${je}`:"@null")}else"@language"in Ke?ue(Je,Re["@language"],(Ke["@language"]||"@null").toLowerCase()):"@direction"in Ke?ue(Je,Re["@language"],Ke["@direction"]?`_${Ke["@direction"]}`:"@none"):Ue?(ue(Je,Re["@language"],`_${Ue}`),ue(Je,Re["@language"],"@none"),ue(Je,Re["@type"],"@none")):(ue(Je,Re["@language"],Oe),ue(Je,Re["@language"],"@none"),ue(Je,Re["@type"],"@none"))}}for(const Je in te)ie(te,Je,1);return me},clone:function(){const Te={};return Te.mappings=q.clone(this.mappings),Te.clone=this.clone,Te.inverse=null,Te.getInverse=this.getInverse,Te.protected=q.clone(this.protected),this.previousContext&&(Te.previousContext=this.previousContext.clone()),Te.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Te["@base"]=this["@base"]),"@language"in this&&(Te["@language"]=this["@language"]),"@vocab"in this&&(Te["@vocab"]=this["@vocab"]),Te},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===E.size&&E.clear(),E.set(F,S),S;function ie(Te,me,te){const ye=Te[me],Oe=Te[me]={};let Ue,nt;for(const Ze of ye)Ue=Ze.iri,nt=te>=Ue.length?"":Ue[te],nt in Oe?Oe[nt].push(Ze):Oe[nt]=[Ze];for(const Ze in Oe)""!==Ze&&ie(Oe,Ze,te+1)}function ue(Te,me,te){me.hasOwnProperty(te)||(me[te]=Te)}},I.getContextValue=(M,F,Q)=>{if(null===F)return"@context"===Q?void 0:null;if(M.mappings.has(F)){const S=M.mappings.get(F);if(w(Q))return S;if(S.hasOwnProperty(Q))return S[Q]}return"@language"===Q&&Q in M||"@direction"===Q&&Q in M?M[Q]:"@context"!==Q?null:void 0},I.processingMode=(M,F)=>F.toString()>="1.1"?!M.processingMode||M.processingMode>="json-ld-"+F.toString():"json-ld-1.0"===M.processingMode,I.isKeyword=M=>{if(!W(M)||"@"!==M[0])return!1;switch(M){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":12,"./types":30,"./url":31,"./util":32}],20:[function(Y,Ae,fe){"use strict";const{parseLinkHeader:q,buildHeaders:V}=Y("../util"),{LINK_HEADER_CONTEXT:L}=Y("../constants"),re=Y("../JsonLdError"),W=Y("../RequestQueue"),{prependBase:w}=Y("../url"),x=/(^|(\r\n))link:/i;function R(T,v,y){const E=new(T=T||XMLHttpRequest);return new Promise((D,j)=>{E.onload=()=>D(E),E.onerror=I=>j(I),E.open("GET",v,!0);for(const I in y)E.setRequestHeader(I,y[I]);E.send()})}Ae.exports=({secure:T,headers:v={},xhr:y}={headers:{}})=>{return v=V(v),(new W).wrapLoader(D);function D(I){return j.apply(this,arguments)}function j(){return(j=gt(function*(I){if(0!==I.indexOf("http:")&&0!==I.indexOf("https:"))throw new re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:I});if(T&&0!==I.indexOf("https"))throw new re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:I});let $;try{$=yield R(y,I,v)}catch(S){throw new re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:I,cause:S})}if($.status>=400)throw new re("URL could not be dereferenced: "+$.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:I,httpStatusCode:$.status});let K={contextUrl:null,documentUrl:I,document:$.response},M=null;const F=$.getResponseHeader("Content-Type");let Q;if(x.test($.getAllResponseHeaders())&&(Q=$.getResponseHeader("Link")),Q&&"application/ld+json"!==F){const S=q(Q),U=S[L];if(Array.isArray(U))throw new re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:I});U&&(K.contextUrl=U.target),M=S.alternate,M&&"application/ld+json"==M.type&&!(F||"").match(/^application\/(\w*\+)?json$/)&&(K=yield D(w(I,M.target)))}return K})).apply(this,arguments)}}},{"../JsonLdError":12,"../RequestQueue":15,"../constants":18,"../url":31,"../util":32}],21:[function(Y,Ae,fe){"use strict";const q=Y("./JsonLdError"),{isArray:V,isObject:L,isEmptyObject:re,isString:W,isUndefined:w}=Y("./types"),{isList:x,isValue:R,isGraph:T,isSubject:v}=Y("./graphTypes"),{expandIri:y,getContextValue:E,isKeyword:D,process:j,processingMode:I}=Y("./context"),{isAbsolute:$}=Y("./url"),{addValue:K,asArray:M,getValues:F,validateTypeValue:Q}=Y("./util"),S={};Ae.exports=S;const U=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function ie(te){return ue.apply(this,arguments)}function ue(){return(ue=gt(function*({activeCtx:te,activeProperty:ye,expandedActiveProperty:Oe,element:Ue,expandedParent:nt,options:Ze={},insideList:Je,typeKey:Ke,typeScopedContext:Ve,expansionMap:ke}){const Ee=Object.keys(Ue).sort(),Re=[];let ze;const qe=Ue[Ke]&&"@json"===y(te,V(Ue[Ke])?Ue[Ke][0]:Ue[Ke],{vocab:!0},Ze);for(const je of Ee){let X,G=Ue[je];if("@context"===je)continue;let be=y(te,je,{vocab:!0},Ze);if((null===be||!$(be)&&!D(be))&&(be=ke({unmappedProperty:je,activeCtx:te,activeProperty:ye,parent:Ue,options:Ze,insideList:Je,value:G,expandedParent:nt}),void 0===be))continue;if(D(be)){if("@reverse"===Oe)throw new q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:G});if(be in nt&&"@included"!==be&&"@type"!==be)throw new q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:be})}if("@id"===be){if(!W(G)){if(!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:G});if(L(G)){if(!re(G))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:G})}else{if(!V(G))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:G});if(!G.every(pt=>W(pt)))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:G})}}K(nt,"@id",M(G).map(pt=>W(pt)?y(te,pt,{base:!0},Ze):pt),{propertyIsArray:Ze.isFrame});continue}if("@type"===be){L(G)&&(G=Object.fromEntries(Object.entries(G).map(([pt,ge])=>[y(Ve,pt,{vocab:!0}),M(ge).map(B=>y(Ve,B,{base:!0,vocab:!0}))]))),Q(G,Ze.isFrame),K(nt,"@type",M(G).map(pt=>W(pt)?y(Ve,pt,{base:!0,vocab:!0},Ze):pt),{propertyIsArray:Ze.isFrame});continue}if("@included"===be&&I(te,1.1)){const pt=M(yield S.expand({activeCtx:te,activeProperty:ye,element:G,options:Ze,expansionMap:ke}));if(!pt.every(ge=>v(ge)))throw new q("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:G});K(nt,"@included",pt,{propertyIsArray:!0});continue}if("@graph"===be&&!L(G)&&!V(G))throw new q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:G});if("@value"===be){ze=G,qe&&I(te,1.1)?nt["@value"]=G:K(nt,"@value",G,{propertyIsArray:Ze.isFrame});continue}if("@language"===be){if(null===G)continue;if(!W(G)&&!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:G});G=M(G).map(pt=>W(pt)?pt.toLowerCase():pt);for(const pt of G)W(pt)&&!pt.match(U)&&console.warn(`@language must be valid BCP47: ${pt}`);K(nt,"@language",G,{propertyIsArray:Ze.isFrame});continue}if("@direction"===be){if(!W(G)&&!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:G});G=M(G);for(const pt of G)if(W(pt)&&"ltr"!==pt&&"rtl"!==pt)throw new q('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:G});K(nt,"@direction",G,{propertyIsArray:Ze.isFrame});continue}if("@index"===be){if(!W(G))throw new q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:G});K(nt,"@index",G);continue}if("@reverse"===be){if(!L(G))throw new q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:G});if(X=yield S.expand({activeCtx:te,activeProperty:"@reverse",element:G,options:Ze,expansionMap:ke}),"@reverse"in X)for(const ge in X["@reverse"])K(nt,ge,X["@reverse"][ge],{propertyIsArray:!0});let pt=nt["@reverse"]||null;for(const ge in X){if("@reverse"===ge)continue;null===pt&&(pt=nt["@reverse"]={}),K(pt,ge,[],{propertyIsArray:!0});const B=X[ge];for(let O=0;O<B.length;++O){const k=B[O];if(R(k)||x(k))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});K(pt,ge,k,{propertyIsArray:!0})}}continue}if("@nest"===be){Re.push(je);continue}let ce=te;const Pe=E(te,je,"@context");w(Pe)||(ce=yield j({activeCtx:te,localCtx:Pe,propagate:!0,overrideProtected:!0,options:Ze}));const Et=E(ce,je,"@container")||[];if(Et.includes("@language")&&L(G))X=se(ce,G,E(ce,je,"@direction"),Ze);else if(Et.includes("@index")&&L(G)){const pt=Et.includes("@graph"),ge=E(ce,je,"@index")||"@index",B="@index"!==ge&&y(te,ge,{vocab:!0},Ze);X=yield Te({activeCtx:ce,options:Ze,activeProperty:je,value:G,expansionMap:ke,asGraph:pt,indexKey:ge,propertyIndex:B})}else if(Et.includes("@id")&&L(G)){const pt=Et.includes("@graph");X=yield Te({activeCtx:ce,options:Ze,activeProperty:je,value:G,expansionMap:ke,asGraph:pt,indexKey:"@id"})}else if(Et.includes("@type")&&L(G))X=yield Te({activeCtx:ce.revertToPreviousContext(),options:Ze,activeProperty:je,value:G,expansionMap:ke,asGraph:!1,indexKey:"@type"});else{const pt="@list"===be;if(pt||"@set"===be){let ge=ye;pt&&"@graph"===Oe&&(ge=null),X=yield S.expand({activeCtx:ce,activeProperty:ge,element:G,options:Ze,insideList:pt,expansionMap:ke})}else X="@json"===E(te,je,"@type")?{"@type":"@json","@value":G}:yield S.expand({activeCtx:ce,activeProperty:je,element:G,options:Ze,insideList:!1,expansionMap:ke})}if(null!==X||"@value"===be||(X=ke({unmappedValue:G,expandedProperty:be,activeCtx:ce,activeProperty:ye,parent:Ue,options:Ze,insideList:Je,key:je,expandedParent:nt}),void 0!==X)){if("@list"!==be&&!x(X)&&Et.includes("@list")&&(X={"@list":M(X)}),Et.includes("@graph")&&!Et.some(pt=>"@id"===pt||"@index"===pt)&&(X=M(X).map(pt=>({"@graph":M(pt)}))),ce.mappings.has(je)&&ce.mappings.get(je).reverse){const pt=nt["@reverse"]=nt["@reverse"]||{};X=M(X);for(let ge=0;ge<X.length;++ge){const B=X[ge];if(R(B)||x(B))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});K(pt,be,B,{propertyIsArray:!0})}continue}K(nt,be,X,{propertyIsArray:!0})}}if("@value"in nt&&("@json"!==nt["@type"]||!I(te,1.1))&&(L(ze)||V(ze))&&!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ze});for(const je of Re){const G=V(Ue[je])?Ue[je]:[Ue[je]];for(const X of G){if(!L(X)||Object.keys(X).some(be=>"@value"===y(te,be,{vocab:!0},Ze)))throw new q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:X});yield ie({activeCtx:te,activeProperty:ye,expandedActiveProperty:Oe,element:X,expandedParent:nt,options:Ze,insideList:Je,typeScopedContext:Ve,typeKey:Ke,expansionMap:ke})}}})).apply(this,arguments)}function ee({activeCtx:te,activeProperty:ye,value:Oe,options:Ue}){if(null==Oe)return null;const nt=y(te,ye,{vocab:!0},Ue);if("@id"===nt)return y(te,Oe,{base:!0},Ue);if("@type"===nt)return y(te,Oe,{vocab:!0,base:!0},Ue);const Ze=E(te,ye,"@type");if(("@id"===Ze||"@graph"===nt)&&W(Oe))return{"@id":y(te,Oe,{base:!0},Ue)};if("@vocab"===Ze&&W(Oe))return{"@id":y(te,Oe,{vocab:!0,base:!0},Ue)};if(D(nt))return Oe;const Je={};if(Ze&&!["@id","@vocab","@none"].includes(Ze))Je["@type"]=Ze;else if(W(Oe)){const Ke=E(te,ye,"@language");null!==Ke&&(Je["@language"]=Ke);const Ve=E(te,ye,"@direction");null!==Ve&&(Je["@direction"]=Ve)}return["boolean","number","string"].includes(typeof Oe)||(Oe=Oe.toString()),Je["@value"]=Oe,Je}function se(te,ye,Oe,Ue){const nt=[],Ze=Object.keys(ye).sort();for(const Je of Ze){const Ke=y(te,Je,{vocab:!0},Ue);let Ve=ye[Je];V(Ve)||(Ve=[Ve]);for(const ke of Ve){if(null===ke)continue;if(!W(ke))throw new q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ye});const Ee={"@value":ke};"@none"!==Ke&&(Ee["@language"]=Je.toLowerCase()),Oe&&(Ee["@direction"]=Oe),nt.push(Ee)}}return nt}function Te(te){return me.apply(this,arguments)}function me(){return(me=gt(function*({activeCtx:te,options:ye,activeProperty:Oe,value:Ue,expansionMap:nt,asGraph:Ze,indexKey:Je,propertyIndex:Ke}){const Ve=[],ke=Object.keys(Ue).sort(),Ee="@type"===Je;for(let Re of ke){if(Ee){const je=E(te,Re,"@context");w(je)||(te=yield j({activeCtx:te,localCtx:je,propagate:!1,options:ye}))}let qe,ze=Ue[Re];V(ze)||(ze=[ze]),ze=yield S.expand({activeCtx:te,activeProperty:Oe,element:ze,options:ye,insideList:!1,insideIndex:!0,expansionMap:nt}),qe=Ke?"@none"===Re?"@none":ee({activeCtx:te,activeProperty:Je,value:Re,options:ye}):y(te,Re,{vocab:!0},ye),"@id"===Je?Re=y(te,Re,{base:!0},ye):Ee&&(Re=qe);for(let je of ze){if(Ze&&!T(je)&&(je={"@graph":[je]}),"@type"===Je)"@none"===qe||(je["@type"]=je["@type"]?[Re].concat(je["@type"]):[Re]);else{if(R(je)&&!["@language","@type","@index"].includes(Je))throw new q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Je}".`,"jsonld.SyntaxError",{code:"invalid value object",value:je});Ke?"@none"!==qe&&K(je,Ke,qe,{propertyIsArray:!0,prependValue:!0}):"@none"!==qe&&!(Je in je)&&(je[Je]=Re)}Ve.push(je)}}return Ve})).apply(this,arguments)}S.expand=function(){var te=gt(function*({activeCtx:ye,activeProperty:Oe=null,element:Ue,options:nt={},insideList:Ze=!1,insideIndex:Je=!1,typeScopedContext:Ke=null,expansionMap:Ve=(()=>{})}){if(null==Ue)return null;if("@default"===Oe&&(nt=Object.assign({},nt,{isFrame:!1})),!V(Ue)&&!L(Ue)){if(!Ze&&(null===Oe||"@graph"===y(ye,Oe,{vocab:!0},nt))){const X=yield Ve({unmappedValue:Ue,activeCtx:ye,activeProperty:Oe,options:nt,insideList:Ze});return void 0===X?null:X}return ee({activeCtx:ye,activeProperty:Oe,value:Ue,options:nt})}if(V(Ue)){let X=[];const be=E(ye,Oe,"@container")||[];Ze=Ze||be.includes("@list");for(let ce=0;ce<Ue.length;++ce){let Pe=yield S.expand({activeCtx:ye,activeProperty:Oe,element:Ue[ce],options:nt,expansionMap:Ve,insideIndex:Je,typeScopedContext:Ke});Ze&&V(Pe)&&(Pe={"@list":Pe}),(null!==Pe||(Pe=yield Ve({unmappedValue:Ue[ce],activeCtx:ye,activeProperty:Oe,parent:Ue,index:ce,options:nt,expandedParent:X,insideList:Ze}),void 0!==Pe))&&(V(Pe)?X=X.concat(Pe):X.push(Pe))}return X}const ke=y(ye,Oe,{vocab:!0},nt),Ee=E(ye,Oe,"@context");Ke=Ke||(ye.previousContext?ye:null);let Re=Object.keys(Ue).sort(),ze=!Je;if(ze&&Ke&&Re.length<=2&&!Re.includes("@context"))for(const X of Re){const be=y(Ke,X,{vocab:!0},nt);if("@value"===be){ze=!1,ye=Ke;break}if("@id"===be&&1===Re.length){ze=!1;break}}ze&&(ye=ye.revertToPreviousContext()),w(Ee)||(ye=yield j({activeCtx:ye,localCtx:Ee,propagate:!0,overrideProtected:!0,options:nt})),"@context"in Ue&&(ye=yield j({activeCtx:ye,localCtx:Ue["@context"],options:nt})),Ke=ye;let qe=null;for(const X of Re)if("@type"===y(ye,X,{vocab:!0},nt)){qe=qe||X;const ce=Ue[X],Pe=Array.isArray(ce)?ce.length>1?ce.slice().sort():ce:[ce];for(const Et of Pe){const pt=E(Ke,Et,"@context");w(pt)||(ye=yield j({activeCtx:ye,localCtx:pt,options:nt,propagate:!1}))}}let je={};yield ie({activeCtx:ye,activeProperty:Oe,expandedActiveProperty:ke,element:Ue,expandedParent:je,options:nt,insideList:Ze,typeKey:qe,typeScopedContext:Ke,expansionMap:Ve}),Re=Object.keys(je);let G=Re.length;if("@value"in je){if("@type"in je&&("@language"in je||"@direction"in je))throw new q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:je});let X=G-1;if("@type"in je&&(X-=1),"@index"in je&&(X-=1),"@language"in je&&(X-=1),"@direction"in je&&(X-=1),0!==X)throw new q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:je});const be=null===je["@value"]?[]:M(je["@value"]),ce=F(je,"@type");if(!I(ye,1.1)||!ce.includes("@json")||1!==ce.length)if(0===be.length){const Pe=yield Ve({unmappedValue:je,activeCtx:ye,activeProperty:Oe,element:Ue,options:nt,insideList:Ze});je=void 0!==Pe?Pe:null}else{if(!be.every(Pe=>W(Pe)||re(Pe))&&"@language"in je)throw new q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:je});if(!ce.every(Pe=>$(Pe)&&!(W(Pe)&&0===Pe.indexOf("_:"))||re(Pe)))throw new q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:je})}}else if("@type"in je&&!V(je["@type"]))je["@type"]=[je["@type"]];else if("@set"in je||"@list"in je){if(G>1&&(2!==G||!("@index"in je)))throw new q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:je});"@set"in je&&(je=je["@set"],Re=Object.keys(je),G=Re.length)}else if(1===G&&"@language"in je){const X=yield Ve(je,{unmappedValue:je,activeCtx:ye,activeProperty:Oe,element:Ue,options:nt,insideList:Ze});je=void 0!==X?X:null}if(L(je)&&!nt.keepFreeFloatingNodes&&!Ze&&(null===Oe||"@graph"===ke)&&(0===G||"@value"in je||"@list"in je||1===G&&"@id"in je)){const X=yield Ve({unmappedValue:je,activeCtx:ye,activeProperty:Oe,element:Ue,options:nt,insideList:Ze});je=void 0!==X?X:null}return je});return function(ye){return te.apply(this,arguments)}}()},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],22:[function(Y,Ae,fe){"use strict";const{isSubjectReference:q}=Y("./graphTypes"),{createMergedNodeMap:V}=Y("./nodeMap"),L={};Ae.exports=L,L.flatten=re=>{const W=V(re),w=[],x=Object.keys(W).sort();for(let R=0;R<x.length;++R){const T=W[x[R]];q(T)||w.push(T)}return w}},{"./graphTypes":25,"./nodeMap":27}],23:[function(Y,Ae,fe){"use strict";const{isKeyword:q}=Y("./context"),V=Y("./graphTypes"),L=Y("./types"),re=Y("./util"),W=Y("./url"),w=Y("./JsonLdError"),{createNodeMap:x,mergeNodeMapGraphs:R}=Y("./nodeMap"),T={};function v(S){const U={};for(const ie in S)void 0!==S[ie]&&(U["@"+ie]=[S[ie]]);return[U]}function y(S,U,ie){for(let ue=ie.length-1;ue>=0;--ue){const ee=ie[ue];if(ee.graph===U&&ee.subject["@id"]===S["@id"])return!0}return!1}function E(S,U,ie){const ue="@"+ie;let ee=ue in S?S[ue][0]:U[ie];if("embed"===ie)if(!0===ee)ee="@once";else if(!1===ee)ee="@never";else if("@always"!==ee&&"@never"!==ee&&"@link"!==ee&&"@first"!==ee&&"@last"!==ee&&"@once"!==ee)throw new w("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:S});return ee}function D(S){if(!L.isArray(S)||1!==S.length||!L.isObject(S[0]))throw new w("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:S});if("@id"in S[0])for(const U of re.asArray(S[0]["@id"]))if(!L.isObject(U)&&!W.isAbsolute(U)||L.isString(U)&&0===U.indexOf("_:"))throw new w("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:S});if("@type"in S[0])for(const U of re.asArray(S[0]["@type"]))if(!L.isObject(U)&&!W.isAbsolute(U)||L.isString(U)&&0===U.indexOf("_:"))throw new w("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:S})}function I(S,U,ie,ue){let ee=!0,se=!1;for(const Te in ie){let me=!1;const te=re.getValues(U,Te),ye=0===re.getValues(ie,Te).length;if("@id"===Te){if(L.isEmptyObject(ie["@id"][0]||{})?me=!0:ie["@id"].length>=0&&(me=ie["@id"].includes(te[0])),!ue.requireAll)return me}else if("@type"===Te){if(ee=!1,ye){if(te.length>0)return!1;me=!0}else if(1===ie["@type"].length&&L.isEmptyObject(ie["@type"][0]))me=te.length>0;else for(const Oe of ie["@type"])me=!(!L.isObject(Oe)||!("@default"in Oe))||me||te.some(Ue=>Ue===Oe);if(!ue.requireAll)return me}else{if(q(Te))continue;{const Oe=re.getValues(ie,Te)[0];let Ue=!1;if(Oe&&(D([Oe]),Ue="@default"in Oe),ee=!1,0===te.length&&Ue)continue;if(te.length>0&&ye)return!1;if(void 0===Oe){if(te.length>0)return!1;me=!0}else if(V.isList(Oe)){const nt=Oe["@list"][0];if(V.isList(te[0])){const Ze=te[0]["@list"];V.isValue(nt)?me=Ze.some(Je=>Q(nt,Je)):(V.isSubject(nt)||V.isSubjectReference(nt))&&(me=Ze.some(Je=>F(S,nt,Je,ue)))}}else me=V.isValue(Oe)?te.some(nt=>Q(Oe,nt)):V.isSubjectReference(Oe)?te.some(nt=>F(S,Oe,nt,ue)):!!L.isObject(Oe)&&te.length>0}}if(!me&&ue.requireAll)return!1;se=se||me}return ee||se}function $(S,U){const ie=S.uniqueEmbeds[S.graph],ue=ie[U],ee=ue.parent,se=ue.property,Te={"@id":U};if(L.isArray(ee)){for(let te=0;te<ee.length;++te)if(re.compareValues(ee[te],Te)){ee[te]=Te;break}}else{const te=L.isArray(ee[se]);re.removeValue(ee,se,Te,{propertyIsArray:te}),re.addValue(ee,se,Te,{propertyIsArray:te})}const me=te=>{const ye=Object.keys(ie);for(const Oe of ye)Oe in ie&&L.isObject(ie[Oe].parent)&&ie[Oe].parent["@id"]===te&&(delete ie[Oe],me(Oe))};me(U)}function K(S,U){if(L.isArray(S))return S.map(ie=>K(ie,U));if(L.isObject(S)){if("@preserve"in S)return S["@preserve"][0];if(V.isValue(S))return S;if(V.isList(S))return S["@list"]=K(S["@list"],U),S;if("@id"in S){const ie=S["@id"];if(U.link.hasOwnProperty(ie)){const ue=U.link[ie].indexOf(S);if(-1!==ue)return U.link[ie][ue];U.link[ie].push(S)}else U.link[ie]=[S]}for(const ie in S)"@id"===ie&&U.bnodesToClear.includes(S[ie])?delete S["@id"]:S[ie]=K(S[ie],U)}return S}function M(S,U,ie){L.isObject(S)?re.addValue(S,U,ie,{propertyIsArray:!0}):S.push(ie)}function F(S,U,ie,ue){if(!("@id"in ie))return!1;const ee=S.subjects[ie["@id"]];return ee&&I(S,ee,U,ue)}function Q(S,U){const ie=U["@value"],ue=U["@type"],ee=U["@language"],se=S["@value"]?L.isArray(S["@value"])?S["@value"]:[S["@value"]]:[],Te=S["@type"]?L.isArray(S["@type"])?S["@type"]:[S["@type"]]:[],me=S["@language"]?L.isArray(S["@language"])?S["@language"]:[S["@language"]]:[];return 0===se.length&&0===Te.length&&0===me.length||!(!se.includes(ie)&&!L.isEmptyObject(se[0])||!(!ue&&0===Te.length||Te.includes(ue)||ue&&L.isEmptyObject(Te[0]))||!(!ee&&0===me.length||me.includes(ee)||ee&&L.isEmptyObject(me[0])))}Ae.exports=T,T.frameMergedOrDefault=(S,U,ie)=>{const ue={options:ie,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},ee=new re.IdentifierIssuer("_:b");x(S,ue.graphMap,"@default",ee),ie.merged&&(ue.graphMap["@merged"]=R(ue.graphMap),ue.graph="@merged"),ue.subjects=ue.graphMap[ue.graph];const se=[];return T.frame(ue,Object.keys(ue.subjects).sort(),U,se),ie.pruneBlankNodeIdentifiers&&(ie.bnodesToClear=Object.keys(ue.bnodeMap).filter(Te=>1===ue.bnodeMap[Te].length)),ie.link={},K(se,ie)},T.frame=(S,U,ie,ue,ee=null)=>{D(ie);const se=S.options,Te={embed:E(ie=ie[0],se,"embed"),explicit:E(ie,se,"explicit"),requireAll:E(ie,se,"requireAll")};S.link.hasOwnProperty(S.graph)||(S.link[S.graph]={});const me=S.link[S.graph],te=function(S,U,ie,ue){const ee={};for(const se of U){const Te=S.graphMap[S.graph][se];I(S,Te,ie,ue)&&(ee[se]=Te)}return ee}(S,U,ie,Te),ye=Object.keys(te).sort();for(const Oe of ye){const Ue=te[Oe];if(null===ee?S.uniqueEmbeds={[S.graph]:{}}:S.uniqueEmbeds[S.graph]=S.uniqueEmbeds[S.graph]||{},"@link"===Te.embed&&Oe in me){M(ue,ee,me[Oe]);continue}const nt={"@id":Oe};if(0===Oe.indexOf("_:")&&re.addValue(S.bnodeMap,Oe,nt,{propertyIsArray:!0}),me[Oe]=nt,("@first"===Te.embed||"@last"===Te.embed)&&S.is11)throw new w("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:ie});if(S.embedded||!S.uniqueEmbeds[S.graph].hasOwnProperty(Oe)){if(S.embedded&&("@never"===Te.embed||y(Ue,S.graph,S.subjectStack))){M(ue,ee,nt);continue}if(S.embedded&&("@first"==Te.embed||"@once"==Te.embed)&&S.uniqueEmbeds[S.graph].hasOwnProperty(Oe)){M(ue,ee,nt);continue}if("@last"===Te.embed&&Oe in S.uniqueEmbeds[S.graph]&&$(S,Oe),S.uniqueEmbeds[S.graph][Oe]={parent:ue,property:ee},S.subjectStack.push({subject:Ue,graph:S.graph}),Oe in S.graphMap){let Ze=!1,Je=null;"@graph"in ie?(Je=ie["@graph"][0],Ze=!("@merged"===Oe||"@default"===Oe),L.isObject(Je)||(Je={})):(Ze="@merged"!==S.graph,Je={}),Ze&&T.frame(zn(ht({},S),{graph:Oe,embedded:!1}),Object.keys(S.graphMap[Oe]).sort(),[Je],nt,"@graph")}"@included"in ie&&T.frame(zn(ht({},S),{embedded:!1}),U,ie["@included"],nt,"@included");for(const Ze of Object.keys(Ue).sort())if(q(Ze)){if(nt[Ze]=re.clone(Ue[Ze]),"@type"===Ze)for(const Je of Ue["@type"])0===Je.indexOf("_:")&&re.addValue(S.bnodeMap,Je,nt,{propertyIsArray:!0})}else if(!Te.explicit||Ze in ie)for(const Je of Ue[Ze]){const Ke=Ze in ie?ie[Ze]:v(Te);if(V.isList(Je)){const Ve=ie[Ze]&&ie[Ze][0]&&ie[Ze][0]["@list"]?ie[Ze][0]["@list"]:v(Te),ke={"@list":[]};M(nt,Ze,ke);const Ee=Je["@list"];for(const Re of Ee)V.isSubjectReference(Re)?T.frame(zn(ht({},S),{embedded:!0}),[Re["@id"]],Ve,ke,"@list"):M(ke,"@list",re.clone(Re))}else V.isSubjectReference(Je)?T.frame(zn(ht({},S),{embedded:!0}),[Je["@id"]],Ke,nt,Ze):Q(Ke[0],Je)&&M(nt,Ze,re.clone(Je))}for(const Ze of Object.keys(ie).sort()){if("@type"===Ze){if(!L.isObject(ie[Ze][0])||!("@default"in ie[Ze][0]))continue}else if(q(Ze))continue;const Je=ie[Ze][0]||{};if(!E(Je,se,"omitDefault")&&!(Ze in nt)){let Ve="@null";"@default"in Je&&(Ve=re.clone(Je["@default"])),L.isArray(Ve)||(Ve=[Ve]),nt[Ze]=[{"@preserve":Ve}]}}for(const Ze of Object.keys(ie["@reverse"]||{}).sort()){const Je=ie["@reverse"][Ze];for(const Ke of Object.keys(S.subjects))re.getValues(S.subjects[Ke],Ze).some(ke=>ke["@id"]===Oe)&&(nt["@reverse"]=nt["@reverse"]||{},re.addValue(nt["@reverse"],Ze,[],{propertyIsArray:!0}),T.frame(zn(ht({},S),{embedded:!0}),[Ke],Je,nt["@reverse"][Ze],ee))}M(ue,ee,nt),S.subjectStack.pop()}}},T.cleanupNull=(S,U)=>{if(L.isArray(S))return S.map(ue=>T.cleanupNull(ue,U)).filter(ue=>ue);if("@null"===S)return null;if(L.isObject(S)){if("@id"in S){const ie=S["@id"];if(U.link.hasOwnProperty(ie)){const ue=U.link[ie].indexOf(S);if(-1!==ue)return U.link[ie][ue];U.link[ie].push(S)}else U.link[ie]=[S]}for(const ie in S)S[ie]=T.cleanupNull(S[ie],U)}return S}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32}],24:[function(Y,Ae,fe){"use strict";const q=Y("./JsonLdError"),V=Y("./graphTypes"),L=Y("./types"),re=Y("./util"),{RDF_LIST:W,RDF_FIRST:w,RDF_REST:x,RDF_NIL:R,RDF_TYPE:T,RDF_JSON_LITERAL:v,XSD_BOOLEAN:y,XSD_DOUBLE:E,XSD_INTEGER:D,XSD_STRING:j}=Y("./constants"),I=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,$={};function K(M,F,Q){if(M.termType.endsWith("Node"))return{"@id":M.value};const S={"@value":M.value};if(M.language)S["@language"]=M.language;else{let U=M.datatype.value;if(U||(U=j),U===v){U="@json";try{S["@value"]=JSON.parse(S["@value"])}catch(ie){throw new q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:S["@value"],cause:ie})}}if(F){if(U===y)"true"===S["@value"]?S["@value"]=!0:"false"===S["@value"]&&(S["@value"]=!1);else if(L.isNumeric(S["@value"]))if(U===D){const ie=parseInt(S["@value"],10);ie.toFixed(0)===S["@value"]&&(S["@value"]=ie)}else U===E&&(S["@value"]=parseFloat(S["@value"]));[y,D,E,j].includes(U)||(S["@type"]=U)}else if("i18n-datatype"===Q&&U.startsWith("https://www.w3.org/ns/i18n#")){const[,ie,ue]=U.split(/[#_]/);ie.length>0&&(S["@language"]=ie,ie.match(I)||console.warn(`@language must be valid BCP47: ${ie}`)),S["@direction"]=ue}else U!==j&&(S["@type"]=U)}return S}Ae.exports=$,$.fromRDF=function(){var M=gt(function*(F,{useRdfType:Q=!1,useNativeTypes:S=!1,rdfDirection:U=null}){const ie={},ue={"@default":ie},ee={};for(const me of F){const te="DefaultGraph"===me.graph.termType?"@default":me.graph.value;te in ue||(ue[te]={}),"@default"!==te&&!(te in ie)&&(ie[te]={"@id":te});const ye=ue[te],Oe=me.subject.value,Ue=me.predicate.value,nt=me.object;Oe in ye||(ye[Oe]={"@id":Oe});const Ze=ye[Oe],Je=nt.termType.endsWith("Node");if(Je&&!(nt.value in ye)&&(ye[nt.value]={"@id":nt.value}),Ue===T&&!Q&&Je){re.addValue(Ze,"@type",nt.value,{propertyIsArray:!0});continue}const Ke=K(nt,S,U);if(re.addValue(Ze,Ue,Ke,{propertyIsArray:!0}),Je)if(nt.value===R){const Ve=ye[nt.value];"usages"in Ve||(Ve.usages=[]),Ve.usages.push({node:Ze,property:Ue,value:Ke})}else ee[nt.value]=!(nt.value in ee)&&{node:Ze,property:Ue,value:Ke}}for(const me in ue){const te=ue[me];if(!(R in te))continue;const ye=te[R];if(ye.usages){for(let Oe of ye.usages){let Ue=Oe.node,nt=Oe.property,Ze=Oe.value;const Je=[],Ke=[];let Ve=Object.keys(Ue).length;for(;nt===x&&L.isObject(ee[Ue["@id"]])&&L.isArray(Ue[w])&&1===Ue[w].length&&L.isArray(Ue[x])&&1===Ue[x].length&&(3===Ve||4===Ve&&L.isArray(Ue["@type"])&&1===Ue["@type"].length&&Ue["@type"][0]===W)&&(Je.push(Ue[w][0]),Ke.push(Ue["@id"]),Oe=ee[Ue["@id"]],Ue=Oe.node,nt=Oe.property,Ze=Oe.value,Ve=Object.keys(Ue).length,V.isBlankNode(Ue)););delete Ze["@id"],Ze["@list"]=Je.reverse();for(const ke of Ke)delete te[ke]}delete ye.usages}}const se=[],Te=Object.keys(ie).sort();for(const me of Te){const te=ie[me];if(me in ue){const ye=te["@graph"]=[],Oe=ue[me],Ue=Object.keys(Oe).sort();for(const nt of Ue){const Ze=Oe[nt];V.isSubjectReference(Ze)||ye.push(Ze)}}V.isSubjectReference(te)||se.push(te)}return se});return function(F,Q){return M.apply(this,arguments)}}()},{"./JsonLdError":12,"./constants":18,"./graphTypes":25,"./types":30,"./util":32}],25:[function(Y,Ae,fe){"use strict";const q=Y("./types"),V={};Ae.exports=V,V.isSubject=L=>!(!q.isObject(L)||"@value"in L||"@set"in L||"@list"in L)&&(Object.keys(L).length>1||!("@id"in L)),V.isSubjectReference=L=>q.isObject(L)&&1===Object.keys(L).length&&"@id"in L,V.isValue=L=>q.isObject(L)&&"@value"in L,V.isList=L=>q.isObject(L)&&"@list"in L,V.isGraph=L=>q.isObject(L)&&"@graph"in L&&1===Object.keys(L).filter(re=>"@id"!==re&&"@index"!==re).length,V.isSimpleGraph=L=>V.isGraph(L)&&!("@id"in L),V.isBlankNode=L=>!!q.isObject(L)&&("@id"in L?0===L["@id"].indexOf("_:"):0===Object.keys(L).length||!("@value"in L||"@set"in L||"@list"in L))},{"./types":30}],26:[function(Y,Ae,fe){const q=Y("rdf-canonize"),V=Y("./platform"),L=Y("./util"),re=Y("./ContextResolver"),W=L.IdentifierIssuer,w=Y("./JsonLdError"),x=Y("lru-cache"),R=Y("./NQuads"),{expand:T}=Y("./expand"),{flatten:v}=Y("./flatten"),{fromRDF:y}=Y("./fromRdf"),{toRDF:E}=Y("./toRdf"),{frameMergedOrDefault:D,cleanupNull:j}=Y("./frame"),{isArray:I,isObject:$,isString:K}=Y("./types"),{isSubjectReference:M}=Y("./graphTypes"),{expandIri:F,getInitialContext:Q,process:S,processingMode:U}=Y("./context"),{compact:ie,compactIri:ue}=Y("./compact"),{createNodeMap:ee,createMergedNodeMap:se,mergeNodeMaps:Te}=Y("./nodeMap"),me=function(ye){const Oe={},nt=new x({max:100});function Ze(Je,ke){var Ee=ke,{documentLoader:Ke=ye.documentLoader}=Ee,Ve=LW(Ee,["documentLoader"]);return Object.assign({},{documentLoader:Ke},Ve,Je)}return ye.compact=function(){var Je=gt(function*(Ke,Ve,ke){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===Ve)throw new w("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===Ke)return null;let Ee;(ke=Ze(ke,{base:K(Ke)?Ke:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new W("_:b"),contextResolver:new re({sharedCache:nt})})).link&&(ke.skipExpansion=!0),ke.compactToRelative||delete ke.base,Ee=ke.skipExpansion?Ke:yield ye.expand(Ke,ke);const Re=yield ye.processContext(Q(ke),Ve,ke);let ze=yield ie({activeCtx:Re,element:Ee,options:ke,compactionMap:ke.compactionMap});ke.compactArrays&&!ke.graph&&I(ze)?1===ze.length?ze=ze[0]:0===ze.length&&(ze={}):ke.graph&&$(ze)&&(ze=[ze]),$(Ve)&&"@context"in Ve&&(Ve=Ve["@context"]),Ve=L.clone(Ve),I(Ve)||(Ve=[Ve]);const qe=Ve;Ve=[];for(let G=0;G<qe.length;++G)(!$(qe[G])||Object.keys(qe[G]).length>0)&&Ve.push(qe[G]);const je=Ve.length>0;if(1===Ve.length&&(Ve=Ve[0]),I(ze)){const G=ue({activeCtx:Re,iri:"@graph",relativeTo:{vocab:!0}}),X=ze;ze={},je&&(ze["@context"]=Ve),ze[G]=X}else if($(ze)&&je){const G=ze;ze={"@context":Ve};for(const X in G)ze[X]=G[X]}return ze});return function(Ke,Ve,ke){return Je.apply(this,arguments)}}(),ye.expand=function(){var Je=gt(function*(Ke,Ve){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(Ve=Ze(Ve,{keepFreeFloatingNodes:!1,contextResolver:new re({sharedCache:nt})})).expansionMap&&(Ve.expansionMap=void 0);const ke={},Ee=[];if("expandContext"in Ve){const je=L.clone(Ve.expandContext);ke.expandContext=$(je)&&"@context"in je?je:{"@context":je},Ee.push(ke.expandContext)}let Re;if(K(Ke)){const je=yield ye.get(Ke,Ve);Re=je.documentUrl,ke.input=je.document,je.contextUrl&&(ke.remoteContext={"@context":je.contextUrl},Ee.push(ke.remoteContext))}else ke.input=L.clone(Ke);"base"in Ve||(Ve.base=Re||"");let ze=Q(Ve);for(const je of Ee)ze=yield S({activeCtx:ze,localCtx:je,options:Ve});let qe=yield T({activeCtx:ze,element:ke.input,options:Ve,expansionMap:Ve.expansionMap});return $(qe)&&"@graph"in qe&&1===Object.keys(qe).length?qe=qe["@graph"]:null===qe&&(qe=[]),I(qe)||(qe=[qe]),qe});return function(Ke,Ve){return Je.apply(this,arguments)}}(),ye.flatten=function(){var Je=gt(function*(Ke,Ve,ke){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");Ve="function"==typeof Ve?null:Ve||null,ke=Ze(ke,{base:K(Ke)?Ke:"",contextResolver:new re({sharedCache:nt})});const Ee=yield ye.expand(Ke,ke),Re=v(Ee);return null===Ve?Re:(ke.graph=!0,ke.skipExpansion=!0,yield ye.compact(Re,Ve,ke))});return function(Ke,Ve,ke){return Je.apply(this,arguments)}}(),ye.frame=function(){var Je=gt(function*(Ke,Ve,ke){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(ke=Ze(ke,{base:K(Ke)?Ke:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new re({sharedCache:nt})}),K(Ve)){const ce=yield ye.get(Ve,ke);if(Ve=ce.document,ce.contextUrl){let Pe=Ve["@context"];Pe?I(Pe)?Pe.push(ce.contextUrl):Pe=[Pe,ce.contextUrl]:Pe=ce.contextUrl,Ve["@context"]=Pe}}const Ee=Ve&&Ve["@context"]||{},Re=yield ye.processContext(Q(ke),Ee,ke);ke.hasOwnProperty("omitGraph")||(ke.omitGraph=U(Re,1.1)),ke.hasOwnProperty("pruneBlankNodeIdentifiers")||(ke.pruneBlankNodeIdentifiers=U(Re,1.1));const ze=yield ye.expand(Ke,ke),qe=ht({},ke);qe.isFrame=!0,qe.keepFreeFloatingNodes=!0;const je=yield ye.expand(Ve,qe),G=Object.keys(Ve).map(ce=>F(Re,ce,{vocab:!0}));qe.merged=!G.includes("@graph"),qe.is11=U(Re,1.1);const X=D(ze,je,qe);qe.graph=!ke.omitGraph,qe.skipExpansion=!0,qe.link={},qe.framing=!0;let be=yield ye.compact(X,Ee,qe);return qe.link={},be=j(be,qe),be});return function(Ke,Ve,ke){return Je.apply(this,arguments)}}(),ye.link=function(){var Je=gt(function*(Ke,Ve,ke){const Ee={};return Ve&&(Ee["@context"]=Ve),Ee["@embed"]="@link",ye.frame(Ke,Ee,ke)});return function(Ke,Ve,ke){return Je.apply(this,arguments)}}(),ye.normalize=ye.canonize=function(){var Je=gt(function*(Ke,Ve){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(Ve=Ze(Ve,{base:K(Ke)?Ke:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new re({sharedCache:nt})}))){if("application/n-quads"!==Ve.inputFormat&&"application/nquads"!==Ve.inputFormat)throw new w("Unknown canonicalization input format.","jsonld.CanonizeError");const Re=R.parse(Ke);return q.canonize(Re,Ve)}const ke=ht({},Ve);delete ke.format,ke.produceGeneralizedRdf=!1;const Ee=yield ye.toRDF(Ke,ke);return q.canonize(Ee,Ve)});return function(Ke,Ve){return Je.apply(this,arguments)}}(),ye.fromRDF=function(){var Je=gt(function*(Ke,Ve){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Ve=Ze(Ve,{format:K(Ke)?"application/n-quads":void 0});const{format:ke}=Ve;let{rdfParser:Ee}=Ve;if(ke){if(Ee=Ee||Oe[ke],!Ee)throw new w("Unknown input format.","jsonld.UnknownFormat",{format:ke})}else Ee=()=>Ke;const Re=yield Ee(Ke);return y(Re,Ve)});return function(Ke,Ve){return Je.apply(this,arguments)}}(),ye.toRDF=function(){var Je=gt(function*(Ke,Ve){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let ke;ke=(Ve=Ze(Ve,{base:K(Ke)?Ke:"",skipExpansion:!1,contextResolver:new re({sharedCache:nt})})).skipExpansion?Ke:yield ye.expand(Ke,Ve);const Ee=E(ke,Ve);if(Ve.format){if("application/n-quads"===Ve.format||"application/nquads"===Ve.format)return R.serialize(Ee);throw new w("Unknown output format.","jsonld.UnknownFormat",{format:Ve.format})}return Ee});return function(Ke,Ve){return Je.apply(this,arguments)}}(),ye.createNodeMap=function(){var Je=gt(function*(Ke,Ve){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Ve=Ze(Ve,{base:K(Ke)?Ke:"",contextResolver:new re({sharedCache:nt})});const ke=yield ye.expand(Ke,Ve);return se(ke,Ve)});return function(Ke,Ve){return Je.apply(this,arguments)}}(),ye.merge=function(){var Je=gt(function*(Ke,Ve,ke){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!I(Ke))throw new TypeError('Could not merge, "docs" must be an array.');Ve="function"==typeof Ve?null:Ve||null,ke=Ze(ke,{contextResolver:new re({sharedCache:nt})});const Ee=yield Promise.all(Ke.map(ce=>{const Pe=ht({},ke);return ye.expand(ce,Pe)}));let Re=!0;"mergeNodes"in ke&&(Re=ke.mergeNodes);const ze=ke.issuer||new W("_:b"),qe={"@default":{}};for(let ce=0;ce<Ee.length;++ce){const Pe=L.relabelBlankNodes(Ee[ce],{issuer:new W("_:b"+ce+"-")}),Et=Re||0===ce?qe:{"@default":{}};if(ee(Pe,Et,"@default",ze),Et!==qe)for(const pt in Et){const ge=Et[pt];if(!(pt in qe)){qe[pt]=ge;continue}const B=qe[pt];for(const O in ge)O in B||(B[O]=ge[O])}}const je=Te(qe),G=[],X=Object.keys(je).sort();for(let ce=0;ce<X.length;++ce){const Pe=je[X[ce]];M(Pe)||G.push(Pe)}return null===Ve?G:(ke.graph=!0,ke.skipExpansion=!0,yield ye.compact(G,Ve,ke))});return function(Ke,Ve,ke){return Je.apply(this,arguments)}}(),Object.defineProperty(ye,"documentLoader",{get:()=>ye._documentLoader,set:Je=>ye._documentLoader=Je}),ye.documentLoader=function(){var Je=gt(function*(Ke){throw new w("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:Ke})});return function(Ke){return Je.apply(this,arguments)}}(),ye.get=function(){var Je=gt(function*(Ke,Ve){let ke;ke="function"==typeof Ve.documentLoader?Ve.documentLoader:ye.documentLoader;const Ee=yield ke(Ke);try{if(!Ee.document)throw new w("No remote document found at the given URL.","jsonld.NullRemoteDocument");K(Ee.document)&&(Ee.document=JSON.parse(Ee.document))}catch(Re){throw new w("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Re,remoteDoc:Ee})}return Ee});return function(Ke,Ve){return Je.apply(this,arguments)}}(),ye.processContext=function(){var Je=gt(function*(Ke,Ve,ke){return ke=Ze(ke,{base:"",contextResolver:new re({sharedCache:nt})}),null===Ve?Q(ke):(Ve=L.clone(Ve),$(Ve)&&"@context"in Ve||(Ve={"@context":Ve}),S({activeCtx:Ke,localCtx:Ve,options:ke}))});return function(Ke,Ve,ke){return Je.apply(this,arguments)}}(),ye.getContextValue=Y("./context").getContextValue,ye.documentLoaders={},ye.useDocumentLoader=function(Je){if(!(Je in ye.documentLoaders))throw new w('Unknown document loader type: "'+Je+'"',"jsonld.UnknownDocumentLoader",{type:Je});ye.documentLoader=ye.documentLoaders[Je].apply(ye,Array.prototype.slice.call(arguments,1))},ye.registerRDFParser=function(Je,Ke){Oe[Je]=Ke},ye.unregisterRDFParser=function(Je){delete Oe[Je]},ye.registerRDFParser("application/n-quads",R.parse),ye.registerRDFParser("application/nquads",R.parse),ye.url=Y("./url"),ye.util=L,Object.assign(ye,L),ye.promises=ye,ye.RequestQueue=Y("./RequestQueue"),ye.JsonLdProcessor=Y("./JsonLdProcessor")(ye),V.setupGlobals(ye),V.setupDocumentLoaders(ye),ye},te=function(){return me(function(){return te()})};me(te),Ae.exports=te},{"./ContextResolver":11,"./JsonLdError":12,"./JsonLdProcessor":13,"./NQuads":14,"./RequestQueue":15,"./compact":17,"./context":19,"./expand":21,"./flatten":22,"./frame":23,"./fromRdf":24,"./graphTypes":25,"./nodeMap":27,"./platform":28,"./toRdf":29,"./types":30,"./url":31,"./util":32,"lru-cache":33,"rdf-canonize":46}],27:[function(Y,Ae,fe){"use strict";const{isKeyword:q}=Y("./context"),V=Y("./graphTypes"),L=Y("./types"),re=Y("./util"),W=Y("./JsonLdError"),w={};Ae.exports=w,w.createMergedNodeMap=(x,R)=>{const T=(R=R||{}).issuer||new re.IdentifierIssuer("_:b"),v={"@default":{}};return w.createNodeMap(x,v,"@default",T),w.mergeNodeMaps(v)},w.createNodeMap=(x,R,T,v,y,E)=>{if(L.isArray(x)){for(const $ of x)w.createNodeMap($,R,T,v,void 0,E);return}if(!L.isObject(x))return void(E&&E.push(x));if(V.isValue(x)){if("@type"in x){let $=x["@type"];0===$.indexOf("_:")&&(x["@type"]=$=v.getId($))}return void(E&&E.push(x))}if(E&&V.isList(x)){const $=[];return w.createNodeMap(x["@list"],R,T,v,y,$),void E.push({"@list":$})}if("@type"in x){const $=x["@type"];for(const K of $)0===K.indexOf("_:")&&v.getId(K)}L.isUndefined(y)&&(y=V.isBlankNode(x)?v.getId(x["@id"]):x["@id"]),E&&E.push({"@id":y});const D=R[T],j=D[y]=D[y]||{};j["@id"]=y;const I=Object.keys(x).sort();for(let $ of I){if("@id"===$)continue;if("@reverse"===$){const M={"@id":y},F=x["@reverse"];for(const Q in F){const S=F[Q];for(const U of S){let ie=U["@id"];V.isBlankNode(U)&&(ie=v.getId(ie)),w.createNodeMap(U,R,T,v,ie),re.addValue(D[ie],Q,M,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===$){y in R||(R[y]={}),w.createNodeMap(x[$],R,y,v);continue}if("@included"===$){w.createNodeMap(x[$],R,T,v);continue}if("@type"!==$&&q($)){if("@index"===$&&$ in j&&(x[$]!==j[$]||x[$]["@id"]!==j[$]["@id"]))throw new W("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:j});j[$]=x[$];continue}const K=x[$];if(0===$.indexOf("_:")&&($=v.getId($)),0!==K.length)for(let M of K)if("@type"===$&&(M=0===M.indexOf("_:")?v.getId(M):M),V.isSubject(M)||V.isSubjectReference(M)){if("@id"in M&&!M["@id"])continue;const F=V.isBlankNode(M)?v.getId(M["@id"]):M["@id"];re.addValue(j,$,{"@id":F},{propertyIsArray:!0,allowDuplicate:!1}),w.createNodeMap(M,R,T,v,F)}else if(V.isValue(M))re.addValue(j,$,M,{propertyIsArray:!0,allowDuplicate:!1});else if(V.isList(M)){const F=[];w.createNodeMap(M["@list"],R,T,v,y,F),M={"@list":F},re.addValue(j,$,M,{propertyIsArray:!0,allowDuplicate:!1})}else w.createNodeMap(M,R,T,v,y),re.addValue(j,$,M,{propertyIsArray:!0,allowDuplicate:!1});else re.addValue(j,$,[],{propertyIsArray:!0})}},w.mergeNodeMapGraphs=x=>{const R={};for(const T of Object.keys(x).sort())for(const v of Object.keys(x[T]).sort()){const y=x[T][v];v in R||(R[v]={"@id":v});const E=R[v];for(const D of Object.keys(y).sort())if(q(D)&&"@type"!==D)E[D]=re.clone(y[D]);else for(const j of y[D])re.addValue(E,D,re.clone(j),{propertyIsArray:!0,allowDuplicate:!1})}return R},w.mergeNodeMaps=x=>{const R=x["@default"],T=Object.keys(x).sort();for(const v of T){if("@default"===v)continue;const y=x[v];let E=R[v];E?"@graph"in E||(E["@graph"]=[]):R[v]=E={"@id":v,"@graph":[]};const D=E["@graph"];for(const j of Object.keys(y).sort()){const I=y[j];V.isSubjectReference(I)||D.push(I)}}return R}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./util":32}],28:[function(Y,Ae,fe){"use strict";const q=Y("./documentLoaders/xhr"),V={};Ae.exports=V,V.setupDocumentLoaders=function(L){"undefined"!=typeof XMLHttpRequest&&(L.documentLoaders.xhr=q,L.useDocumentLoader("xhr"))},V.setupGlobals=function(L){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:L.JsonLdProcessor})}},{"./documentLoaders/xhr":20}],29:[function(Y,Ae,fe){"use strict";const{createNodeMap:q}=Y("./nodeMap"),{isKeyword:V}=Y("./context"),L=Y("./graphTypes"),re=Y("canonicalize"),W=Y("./types"),w=Y("./util"),{RDF_FIRST:x,RDF_REST:R,RDF_NIL:T,RDF_TYPE:v,RDF_JSON_LITERAL:y,RDF_LANGSTRING:E,XSD_BOOLEAN:D,XSD_DOUBLE:j,XSD_INTEGER:I,XSD_STRING:$}=Y("./constants"),{isAbsolute:K}=Y("./url"),M={};function F(U,ie,ue,ee,se){const Te=Object.keys(ie).sort();for(const me of Te){const te=ie[me],ye=Object.keys(te).sort();for(let Oe of ye){const Ue=te[Oe];if("@type"===Oe)Oe=v;else if(V(Oe))continue;for(const nt of Ue){const Ze={termType:me.startsWith("_:")?"BlankNode":"NamedNode",value:me};if(!K(me))continue;const Je={termType:Oe.startsWith("_:")?"BlankNode":"NamedNode",value:Oe};if(!K(Oe)||"BlankNode"===Je.termType&&!se.produceGeneralizedRdf)continue;const Ke=S(nt,ee,U,ue,se.rdfDirection);Ke&&U.push({subject:Ze,predicate:Je,object:Ke,graph:ue})}}}}function S(U,ie,ue,ee,se){const Te={};if(L.isValue(U)){Te.termType="Literal",Te.value=void 0,Te.datatype={termType:"NamedNode"};let me=U["@value"];const te=U["@type"]||null;"@json"===te?(Te.value=re(me),Te.datatype.value=y):W.isBoolean(me)?(Te.value=me.toString(),Te.datatype.value=te||D):W.isDouble(me)||te===j?(W.isDouble(me)||(me=parseFloat(me)),Te.value=me.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Te.datatype.value=te||j):W.isNumber(me)?(Te.value=me.toFixed(0),Te.datatype.value=te||I):"i18n-datatype"===se&&"@direction"in U?(Te.datatype.value="https://www.w3.org/ns/i18n#"+(U["@language"]||"")+`_${U["@direction"]}`,Te.value=me):"@language"in U?(Te.value=me,Te.datatype.value=te||E,Te.language=U["@language"]):(Te.value=me,Te.datatype.value=te||$)}else if(L.isList(U)){const me=function(U,ie,ue,ee,se){const Te={termType:"NamedNode",value:x},me={termType:"NamedNode",value:R},te={termType:"NamedNode",value:T},ye=U.pop(),Oe=ye?{termType:"BlankNode",value:ie.getId()}:te;let Ue=Oe;for(const nt of U){const Ze=S(nt,ie,ue,ee,se),Je={termType:"BlankNode",value:ie.getId()};ue.push({subject:Ue,predicate:Te,object:Ze,graph:ee}),ue.push({subject:Ue,predicate:me,object:Je,graph:ee}),Ue=Je}if(ye){const nt=S(ye,ie,ue,ee,se);ue.push({subject:Ue,predicate:Te,object:nt,graph:ee}),ue.push({subject:Ue,predicate:me,object:te,graph:ee})}return Oe}(U["@list"],ie,ue,ee,se);Te.termType=me.termType,Te.value=me.value}else{const me=W.isObject(U)?U["@id"]:U;Te.termType=me.startsWith("_:")?"BlankNode":"NamedNode",Te.value=me}return"NamedNode"!==Te.termType||K(Te.value)?Te:null}Ae.exports=M,M.toRDF=(U,ie)=>{const ue=new w.IdentifierIssuer("_:b"),ee={"@default":{}};q(U,ee,"@default",ue);const se=[],Te=Object.keys(ee).sort();for(const me of Te){let te;if("@default"===me)te={termType:"DefaultGraph",value:""};else{if(!K(me))continue;te=me.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},te.value=me}F(se,ee[me],te,ue,ie)}return se}},{"./constants":18,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32,canonicalize:7}],30:[function(Y,Ae,fe){"use strict";const q={};Ae.exports=q,q.isArray=Array.isArray,q.isBoolean=V=>"boolean"==typeof V||"[object Boolean]"===Object.prototype.toString.call(V),q.isDouble=V=>q.isNumber(V)&&(-1!==String(V).indexOf(".")||Math.abs(V)>=1e21),q.isEmptyObject=V=>q.isObject(V)&&0===Object.keys(V).length,q.isNumber=V=>"number"==typeof V||"[object Number]"===Object.prototype.toString.call(V),q.isNumeric=V=>!isNaN(parseFloat(V))&&isFinite(V),q.isObject=V=>"[object Object]"===Object.prototype.toString.call(V),q.isString=V=>"string"==typeof V||"[object String]"===Object.prototype.toString.call(V),q.isUndefined=V=>void 0===V},{}],31:[function(Y,Ae,fe){"use strict";const q=Y("./types"),V={};Ae.exports=V,V.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},V.parse=(re,W)=>{const w={},x=V.parsers[W||"full"],R=x.regex.exec(re);let T=x.keys.length;for(;T--;)w[x.keys[T]]=void 0===R[T]?null:R[T];return("https"===w.scheme&&"443"===w.port||"http"===w.scheme&&"80"===w.port)&&(w.href=w.href.replace(":"+w.port,""),w.authority=w.authority.replace(":"+w.port,""),w.port=null),w.normalizedPath=V.removeDotSegments(w.path),w},V.prependBase=(re,W)=>{if(null===re||V.isAbsolute(W))return W;(!re||q.isString(re))&&(re=V.parse(re||""));const w=V.parse(W),x={protocol:re.protocol||""};if(null!==w.authority)x.authority=w.authority,x.path=w.path,x.query=w.query;else if(x.authority=re.authority,""===w.path)x.path=re.path,x.query=null!==w.query?w.query:re.query;else{if(0===w.path.indexOf("/"))x.path=w.path;else{let T=re.path;T=T.substr(0,T.lastIndexOf("/")+1),(T.length>0||re.authority)&&"/"!==T.substr(-1)&&(T+="/"),T+=w.path,x.path=T}x.query=w.query}""!==w.path&&(x.path=V.removeDotSegments(x.path));let R=x.protocol;return null!==x.authority&&(R+="//"+x.authority),R+=x.path,null!==x.query&&(R+="?"+x.query),null!==w.fragment&&(R+="#"+w.fragment),""===R&&(R="./"),R},V.removeBase=(re,W)=>{if(null===re)return W;(!re||q.isString(re))&&(re=V.parse(re||""));let w="";if(""!==re.href?w+=(re.protocol||"")+"//"+(re.authority||""):W.indexOf("//")&&(w+="//"),0!==W.indexOf(w))return W;const x=V.parse(W.substr(w.length)),R=re.normalizedPath.split("/"),T=x.normalizedPath.split("/"),v=x.fragment||x.query?0:1;for(;R.length>0&&T.length>v&&R[0]===T[0];)R.shift(),T.shift();let y="";if(R.length>0){R.pop();for(let E=0;E<R.length;++E)y+="../"}return y+=T.join("/"),null!==x.query&&(y+="?"+x.query),null!==x.fragment&&(y+="#"+x.fragment),""===y&&(y="./"),y},V.removeDotSegments=re=>{if(0===re.length)return"";const W=re.split("/"),w=[];for(;W.length>0;){const x=W.shift(),R=0===W.length;"."!==x?".."!==x?w.push(x):(w.pop(),R&&w.push("")):R&&w.push("")}return"/"===re[0]&&w.length>0&&""!==w[0]&&w.unshift(""),1===w.length&&""===w[0]?"/":w.join("/")};const L=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;V.isAbsolute=re=>q.isString(re)&&L.test(re),V.isRelative=re=>q.isString(re)},{"./types":30}],32:[function(Y,Ae,fe){"use strict";const q=Y("./graphTypes"),V=Y("./types"),L=Y("rdf-canonize").IdentifierIssuer,re=Y("./JsonLdError"),W=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,w=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,x=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,R_headers={accept:"application/ld+json, application/json"},T={};function v(y,E){if(V.isArray(E))for(let D=0;D<E.length;++D)E[D]=v(y,E[D]);else if(q.isList(E))E["@list"]=v(y,E["@list"]);else if(V.isObject(E)){q.isBlankNode(E)&&(E["@id"]=y.getId(E["@id"]));const D=Object.keys(E).sort();for(let j=0;j<D.length;++j){const I=D[j];"@id"!==I&&(E[I]=v(y,E[I]))}}return E}Ae.exports=T,T.IdentifierIssuer=L,T.clone=function(y){if(y&&"object"==typeof y){let E;if(V.isArray(y)){E=[];for(let D=0;D<y.length;++D)E[D]=T.clone(y[D])}else if(y instanceof Map){E=new Map;for(const[D,j]of y)E.set(D,T.clone(j))}else if(y instanceof Set){E=new Set;for(const D of y)E.add(T.clone(D))}else if(V.isObject(y)){E={};for(const D in y)E[D]=T.clone(y[D])}else E=y.toString();return E}return y},T.asArray=function(y){return Array.isArray(y)?y:[y]},T.buildHeaders=(y={})=>{if(Object.keys(y).some(D=>"accept"===D.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+R_headers.accept+'" is supported.');return Object.assign({Accept:R_headers.accept},y)},T.parseLinkHeader=y=>{const E={},D=y.match(W);for(let j=0;j<D.length;++j){let I=D[j].match(w);if(!I)continue;const $={target:I[1]},K=I[2];for(;I=x.exec(K);)$[I[1]]=void 0===I[2]?I[3]:I[2];const M=$.rel||"";Array.isArray(E[M])?E[M].push($):E[M]=E.hasOwnProperty(M)?[E[M],$]:$}return E},T.validateTypeValue=(y,E)=>{if(!(V.isString(y)||V.isArray(y)&&y.every(D=>V.isString(D)))){if(E&&V.isObject(y))switch(Object.keys(y).length){case 0:return;case 1:if("@default"in y&&T.asArray(y["@default"]).every(D=>V.isString(D)))return}throw new re('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:y})}},T.hasProperty=(y,E)=>{if(y.hasOwnProperty(E)){const D=y[E];return!V.isArray(D)||D.length>0}return!1},T.hasValue=(y,E,D)=>{if(T.hasProperty(y,E)){let j=y[E];const I=q.isList(j);if(V.isArray(j)||I){I&&(j=j["@list"]);for(let $=0;$<j.length;++$)if(T.compareValues(D,j[$]))return!0}else if(!V.isArray(D))return T.compareValues(D,j)}return!1},T.addValue=(y,E,D,j)=>{if("propertyIsArray"in(j=j||{})||(j.propertyIsArray=!1),"valueIsArray"in j||(j.valueIsArray=!1),"allowDuplicate"in j||(j.allowDuplicate=!0),"prependValue"in j||(j.prependValue=!1),j.valueIsArray)y[E]=D;else if(V.isArray(D)){0===D.length&&j.propertyIsArray&&!y.hasOwnProperty(E)&&(y[E]=[]),j.prependValue&&(D=D.concat(y[E]),y[E]=[]);for(let I=0;I<D.length;++I)T.addValue(y,E,D[I],j)}else if(y.hasOwnProperty(E)){const I=!j.allowDuplicate&&T.hasValue(y,E,D);!V.isArray(y[E])&&(!I||j.propertyIsArray)&&(y[E]=[y[E]]),I||(j.prependValue?y[E].unshift(D):y[E].push(D))}else y[E]=j.propertyIsArray?[D]:D},T.getValues=(y,E)=>[].concat(y[E]||[]),T.removeProperty=(y,E)=>{delete y[E]},T.removeValue=(y,E,D,j)=>{"propertyIsArray"in(j=j||{})||(j.propertyIsArray=!1);const I=T.getValues(y,E).filter($=>!T.compareValues($,D));0===I.length?T.removeProperty(y,E):y[E]=1!==I.length||j.propertyIsArray?I:I[0]},T.relabelBlankNodes=(y,E)=>v((E=E||{}).issuer||new L("_:b"),y),T.compareValues=(y,E)=>!!(y===E||q.isValue(y)&&q.isValue(E)&&y["@value"]===E["@value"]&&y["@type"]===E["@type"]&&y["@language"]===E["@language"]&&y["@index"]===E["@index"])||!!(V.isObject(y)&&"@id"in y&&V.isObject(E)&&"@id"in E)&&y["@id"]===E["@id"],T.compareShortestLeast=(y,E)=>y.length<E.length?-1:E.length<y.length?1:y===E?0:y<E?-1:1},{"./JsonLdError":12,"./graphTypes":25,"./types":30,"rdf-canonize":46}],33:[function(Y,Ae,fe){"use strict";const q=Y("yallist"),V=Symbol("max"),L=Symbol("length"),re=Symbol("lengthCalculator"),W=Symbol("allowStale"),w=Symbol("maxAge"),x=Symbol("dispose"),R=Symbol("noDisposeOnSet"),T=Symbol("lruList"),v=Symbol("cache"),y=Symbol("updateAgeOnGet"),E=()=>1;const j=(Q,S,U)=>{const ie=Q[v].get(S);if(ie){const ue=ie.value;if(I(Q,ue)){if(K(Q,ie),!Q[W])return}else U&&(Q[y]&&(ie.value.now=Date.now()),Q[T].unshiftNode(ie));return ue.value}},I=(Q,S)=>{if(!S||!S.maxAge&&!Q[w])return!1;const U=Date.now()-S.now;return S.maxAge?U>S.maxAge:Q[w]&&U>Q[w]},$=Q=>{if(Q[L]>Q[V])for(let S=Q[T].tail;Q[L]>Q[V]&&null!==S;){const U=S.prev;K(Q,S),S=U}},K=(Q,S)=>{if(S){const U=S.value;Q[x]&&Q[x](U.key,U.value),Q[L]-=U.length,Q[v].delete(U.key),Q[T].removeNode(S)}};class M{constructor(S,U,ie,ue,ee){this.key=S,this.value=U,this.length=ie,this.now=ue,this.maxAge=ee||0}}const F=(Q,S,U,ie)=>{let ue=U.value;I(Q,ue)&&(K(Q,U),Q[W]||(ue=void 0)),ue&&S.call(ie,ue.value,ue.key,Q)};Ae.exports=class{constructor(S){if("number"==typeof S&&(S={max:S}),S||(S={}),S.max&&("number"!=typeof S.max||S.max<0))throw new TypeError("max must be a non-negative number");this[V]=S.max||1/0;const ie=S.length||E;if(this[re]="function"!=typeof ie?E:ie,this[W]=S.stale||!1,S.maxAge&&"number"!=typeof S.maxAge)throw new TypeError("maxAge must be a number");this[w]=S.maxAge||0,this[x]=S.dispose,this[R]=S.noDisposeOnSet||!1,this[y]=S.updateAgeOnGet||!1,this.reset()}set max(S){if("number"!=typeof S||S<0)throw new TypeError("max must be a non-negative number");this[V]=S||1/0,$(this)}get max(){return this[V]}set allowStale(S){this[W]=!!S}get allowStale(){return this[W]}set maxAge(S){if("number"!=typeof S)throw new TypeError("maxAge must be a non-negative number");this[w]=S,$(this)}get maxAge(){return this[w]}set lengthCalculator(S){"function"!=typeof S&&(S=E),S!==this[re]&&(this[re]=S,this[L]=0,this[T].forEach(U=>{U.length=this[re](U.value,U.key),this[L]+=U.length})),$(this)}get lengthCalculator(){return this[re]}get length(){return this[L]}get itemCount(){return this[T].length}rforEach(S,U){U=U||this;for(let ie=this[T].tail;null!==ie;){const ue=ie.prev;F(this,S,ie,U),ie=ue}}forEach(S,U){U=U||this;for(let ie=this[T].head;null!==ie;){const ue=ie.next;F(this,S,ie,U),ie=ue}}keys(){return this[T].toArray().map(S=>S.key)}values(){return this[T].toArray().map(S=>S.value)}reset(){this[x]&&this[T]&&this[T].length&&this[T].forEach(S=>this[x](S.key,S.value)),this[v]=new Map,this[T]=new q,this[L]=0}dump(){return this[T].map(S=>!I(this,S)&&{k:S.key,v:S.value,e:S.now+(S.maxAge||0)}).toArray().filter(S=>S)}dumpLru(){return this[T]}set(S,U,ie){if((ie=ie||this[w])&&"number"!=typeof ie)throw new TypeError("maxAge must be a number");const ue=ie?Date.now():0,ee=this[re](U,S);if(this[v].has(S)){if(ee>this[V])return K(this,this[v].get(S)),!1;const me=this[v].get(S).value;return this[x]&&(this[R]||this[x](S,me.value)),me.now=ue,me.maxAge=ie,me.value=U,this[L]+=ee-me.length,me.length=ee,this.get(S),$(this),!0}const se=new M(S,U,ee,ue,ie);return se.length>this[V]?(this[x]&&this[x](S,U),!1):(this[L]+=se.length,this[T].unshift(se),this[v].set(S,this[T].head),$(this),!0)}has(S){if(!this[v].has(S))return!1;const U=this[v].get(S).value;return!I(this,U)}get(S){return j(this,S,!0)}peek(S){return j(this,S,!1)}pop(){const S=this[T].tail;return S?(K(this,S),S.value):null}del(S){K(this,this[v].get(S))}load(S){this.reset();const U=Date.now();for(let ie=S.length-1;ie>=0;ie--){const ue=S[ie],ee=ue.e||0;if(0===ee)this.set(ue.k,ue.v);else{const se=ee-U;se>0&&this.set(ue.k,ue.v,se)}}}prune(){this[v].forEach((S,U)=>j(this,U,!1))}}},{yallist:92}],34:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",V="http://www.w3.org/2001/XMLSchema#",L="http://www.w3.org/2000/10/swap/";fe.default={xsd:{decimal:`${V}decimal`,boolean:`${V}boolean`,double:`${V}double`,integer:`${V}integer`,string:`${V}string`},rdf:{type:`${q}type`,nil:`${q}nil`,first:`${q}first`,rest:`${q}rest`,langString:`${q}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${L}reify#forSome`,forAll:`${L}reify#forAll`},log:{implies:`${L}log#implies`}}},{}],35:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.termFromId=function M(te,ye){if(ye=ye||v,!te)return ye.defaultGraph();switch(te[0]){case"?":return ye.variable(te.substr(1));case"_":return ye.blankNode(te.substr(2));case'"':if(ye===v)return new j(te);if('"'===te[te.length-1])return ye.literal(te.substr(1,te.length-2));const Oe=te.lastIndexOf('"',te.length-1);return ye.literal(te.substr(1,Oe-1),"@"===te[Oe+1]?te.substr(Oe+2):ye.namedNode(te.substr(Oe+3)));case"<":const Ue=T.exec(te);return ye.quad(M(U(Ue[1]),ye),M(U(Ue[2]),ye),M(U(Ue[3]),ye),Ue[4]&&M(U(Ue[4]),ye));default:return ye.namedNode(te)}},fe.termToId=function F(te){if("string"==typeof te)return te;if(te instanceof E&&"Quad"!==te.termType)return te.id;if(!te)return w.id;switch(te.termType){case"NamedNode":return te.value;case"BlankNode":return`_:${te.value}`;case"Variable":return`?${te.value}`;case"DefaultGraph":return"";case"Literal":return`"${te.value}"${te.language?`@${te.language}`:te.datatype&&te.datatype.value!==W.string?`^^${te.datatype.value}`:""}`;case"Quad":return`<<${S(F(te.subject))} ${S(F(te.predicate))} ${S(F(te.object))}${(0,V.isDefaultGraph)(te.graph)?"":` ${F(te.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${te.termType}`)}},fe.escapeQuotes=S,fe.unescapeQuotes=U,fe.Triple=fe.Quad=fe.DefaultGraph=fe.Variable=fe.BlankNode=fe.Literal=fe.NamedNode=fe.Term=fe.default=void 0;var te,q=(te=Y("./IRIs"))&&te.__esModule?te:{default:te},V=Y("./N3Util");const{rdf:re,xsd:W}=q.default;let w,x=0;const R=/^"(.*".*)(?="[^"]*$)/,T=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,v={namedNode:function(te){return new D(te)},blankNode:function(te){return new I(te||"n3-"+x++)},variable:function(te){return new $(te)},literal:function(te,ye){if("string"==typeof ye)return new j(`"${te}"@${ye.toLowerCase()}`);let Oe=ye?ye.value:"";return""===Oe&&("boolean"==typeof te?Oe=W.boolean:"number"==typeof te&&(Number.isFinite(te)?Oe=Number.isInteger(te)?W.integer:W.double:(Oe=W.double,Number.isNaN(te)||(te=te>0?"INF":"-INF")))),new j(""===Oe||Oe===W.string?`"${te}"`:`"${te}"^^${Oe}`)},defaultGraph:function(){return w},quad:me,triple:me};fe.default=v;class E{constructor(ye){this.id=ye}get value(){return this.id}equals(ye){return ye instanceof E?this.id===ye.id:!!ye&&this.termType===ye.termType&&this.value===ye.value}toJSON(){return{termType:this.termType,value:this.value}}}fe.Term=E;class D extends E{get termType(){return"NamedNode"}}fe.NamedNode=D;class j extends E{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const ye=this.id;let Oe=ye.lastIndexOf('"')+1;return Oe<ye.length&&"@"===ye[Oe++]?ye.substr(Oe).toLowerCase():""}get datatype(){return new D(this.datatypeString)}get datatypeString(){const ye=this.id,Oe=ye.lastIndexOf('"')+1,Ue=Oe<ye.length?ye[Oe]:"";return"^"===Ue?ye.substr(Oe+2):"@"!==Ue?W.string:re.langString}equals(ye){return ye instanceof j?this.id===ye.id:!!ye&&!!ye.datatype&&this.termType===ye.termType&&this.value===ye.value&&this.language===ye.language&&this.datatype.value===ye.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}fe.Literal=j;class I extends E{constructor(ye){super(`_:${ye}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}fe.BlankNode=I;class $ extends E{constructor(ye){super(`?${ye}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}fe.Variable=$;class K extends E{constructor(){return super(""),w||this}get termType(){return"DefaultGraph"}equals(ye){return this===ye||!!ye&&this.termType===ye.termType}}fe.DefaultGraph=K,w=new K;class Q extends E{constructor(ye,Oe,Ue,nt){super(""),this._subject=ye,this._predicate=Oe,this._object=Ue,this._graph=nt||w}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(ye){return!!ye&&this._subject.equals(ye.subject)&&this._predicate.equals(ye.predicate)&&this._object.equals(ye.object)&&this._graph.equals(ye.graph)}}function S(te){return te.replace(R,(ye,Oe)=>`"${Oe.replace(/"/g,'""')}`)}function U(te){return te.replace(R,(ye,Oe)=>`"${Oe.replace(/""/g,'"')}`)}function me(te,ye,Oe,Ue){return new Q(te,ye,Oe,Ue)}fe.Triple=fe.Quad=Q},{"./IRIs":34,"./N3Util":41}],36:[function(Y,Ae,fe){(function(q){(function(){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var V=re(Y("./IRIs")),L=re(Y("queue-microtask"));function re(E){return E&&E.__esModule?E:{default:E}}const{xsd:W}=V.default,w=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,x={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},R=/[\x00-\x20<>\\"\{\}\|\^\`]/,T={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},v=/$0^/;fe.default=class{constructor(D){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(D=D||{}).lineMode){this._n3Mode=!1;for(const j in this)!(j in T)&&this[j]instanceof RegExp&&(this[j]=v)}else this._n3Mode=!1!==D.n3;this._comments=!!D.comments,this._literalClosingPos=0}_tokenizeToEnd(D,j){let I=this._input;const $=this._comments;for(;;){let M,F;for(;M=this._newline.exec(I);)$&&(F=this._comment.exec(M[0]))&&D(null,{line:this._line,type:"comment",value:F[1],prefix:""}),I=I.substr(M[0].length,I.length),this._line++;if(!M&&(M=this._whitespace.exec(I))&&(I=I.substr(M[0].length,I.length)),this._endOfFile.test(I))return j&&($&&(F=this._comment.exec(I))&&D(null,{line:this._line,type:"comment",value:F[1],prefix:""}),D(I=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=I;const Q=this._line,S=I[0];let U="",ie="",ue="",ee=null,se=0,Te=!1;switch(S){case"^":if(I.length<3)break;if("^"!==I[1]){this._n3Mode&&(se=1,U="^");break}if(this._previousMarker="^^",I=I.substr(2),"<"!==I[0]){Te=!0;break}case"<":if(ee=this._unescapedIri.exec(I))U="IRI",ie=ee[1];else if(ee=this._iri.exec(I)){if(ie=this._unescape(ee[1]),null===ie||R.test(ie))return K(this);U="IRI"}else I.length>1&&"<"===I[1]?(U="<<",se=2):this._n3Mode&&I.length>1&&"="===I[1]&&(U="inverse",se=2,ie=">");break;case">":I.length>1&&">"===I[1]&&(U=">>",se=2);break;case"_":((ee=this._blank.exec(I))||j&&(ee=this._blank.exec(`${I} `)))&&(U="blank",ue="_",ie=ee[1]);break;case'"':if(ee=this._simpleQuotedString.exec(I))ie=ee[1];else if(({value:ie,matchLength:se}=this._parseLiteral(I)),null===ie)return K(this);(null!==ee||0!==se)&&(U="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(ee=this._simpleApostropheString.exec(I))ie=ee[1];else if(({value:ie,matchLength:se}=this._parseLiteral(I)),null===ie)return K(this);(null!==ee||0!==se)&&(U="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(ee=this._variable.exec(I))&&(U="var",ie=ee[0]);break;case"@":"literal"===this._previousMarker&&(ee=this._langcode.exec(I))?(U="langcode",ie=ee[1]):(ee=this._keyword.exec(I))&&(U=ee[0]);break;case".":if(1===I.length?j:I[1]<"0"||I[1]>"9"){U=".",se=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(ee=this._number.exec(I)||j&&(ee=this._number.exec(`${I} `)))&&(U="literal",ie=ee[0],ue="string"==typeof ee[1]?W.double:"string"==typeof ee[2]?W.decimal:W.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(ee=this._sparqlKeyword.exec(I))?U=ee[0].toUpperCase():Te=!0;break;case"f":case"t":(ee=this._boolean.exec(I))?(U="literal",ie=ee[0],ue=W.boolean):Te=!0;break;case"a":(ee=this._shortPredicates.exec(I))?(U="abbreviation",ie="a"):Te=!0;break;case"=":this._n3Mode&&I.length>1&&(U="abbreviation",">"!==I[1]?(se=1,ie="="):(se=2,ie=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(se=1,U=S);break;default:Te=!0}if(Te&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(ee=this._prefix.exec(I))?((ee=this._prefixed.exec(I))||j&&(ee=this._prefixed.exec(`${I} `)))&&(U="prefixed",ue=ee[1]||"",ie=this._unescape(ee[2])):(U="prefix",ie=ee[1]||"")),"^^"===this._previousMarker)switch(U){case"prefixed":U="type";break;case"IRI":U="typeIRI";break;default:U=""}if(!U)return j||!/^'''|^"""/.test(I)&&/\n|\r/.test(I)?K(this):this._input=I;const me={line:Q,type:U,value:ie,prefix:ue};D(null,me),this.previousToken=me,this._previousMarker=U,I=I.substr(se||ee[0].length,I.length)}function K(M){D(M._syntaxError(/^\S*/.exec(I)[0]))}}_unescape(D){let j=!1;const I=D.replace(w,($,K,M,F)=>{if("string"==typeof K)return String.fromCharCode(Number.parseInt(K,16));if("string"==typeof M){let Q=Number.parseInt(M,16);return Q<=65535?String.fromCharCode(Number.parseInt(M,16)):String.fromCharCode(55296+((Q-=65536)>>10),56320+(1023&Q))}return F in x?x[F]:(j=!0,"")});return j?null:I}_parseLiteral(D){if(D.length>=3){const j=D.match(/^(?:"""|"|'''|'|)/)[0],I=j.length;let $=Math.max(this._literalClosingPos,I);for(;($=D.indexOf(j,$))>0;){let K=0;for(;"\\"===D[$-K-1];)K++;if(K%2==0){const M=D.substring(I,$),F=M.split(/\r\n|\r|\n/).length-1,Q=$+I;if(1===I&&0!==F||3===I&&this._lineMode)break;return this._line+=F,{value:this._unescape(M),matchLength:Q}}$++}this._literalClosingPos=D.length-I+1}return{value:"",matchLength:0}}_syntaxError(D){this._input=null;const j=new Error(`Unexpected "${D}" on line ${this._line}.`);return j.context={token:void 0,line:this._line,previousToken:this.previousToken},j}_readStartingBom(D){return D.startsWith("\ufeff")?D.substr(1):D}tokenize(D,j){if(this._line=1,"string"==typeof D){if(this._input=this._readStartingBom(D),"function"!=typeof j){const I=[];let $;if(this._tokenizeToEnd((K,M)=>K?$=K:I.push(M),!0),$)throw $;return I}(0,L.default)(()=>this._tokenizeToEnd(j,!0))}else this._pendingBuffer=null,"function"==typeof D.setEncoding&&D.setEncoding("utf8"),D.on("data",I=>{null!==this._input&&0!==I.length&&(this._pendingBuffer&&(I=q.concat([this._pendingBuffer,I]),this._pendingBuffer=null),128&I[I.length-1]?this._pendingBuffer=I:(void 0===this._input?this._input=this._readStartingBom("string"==typeof I?I:I.toString()):this._input+=I,this._tokenizeToEnd(j,!1)))}),D.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(j,!0)}),D.on("error",j)}}}).call(this)}).call(this,Y("buffer").Buffer)},{"./IRIs":34,buffer:6,"queue-microtask":45}],37:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var q=re(Y("./N3Lexer")),V=re(Y("./N3DataFactory")),L=re(Y("./IRIs"));function re(T){return T&&T.__esModule?T:{default:T}}let W=0;class w{constructor(v){this._contextStack=[],this._graph=null,this._setBase((v=v||{}).baseIRI),v.factory&&R(this,v.factory);const y="string"==typeof v.format?v.format.match(/\w*$/)[0].toLowerCase():"",E=/turtle/.test(y),D=/trig/.test(y),j=/triple/.test(y),I=/quad/.test(y),$=this._n3Mode=/n3/.test(y),K=j||I;(this._supportsNamedGraphs=!(E||$))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(E||D||j||$),this._supportsRDFStar=""===y||/star|\*$/.test(y),K&&(this._resolveRelativeIRI=M=>null),this._blankNodePrefix="string"!=typeof v.blankNodePrefix?"":v.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=v.lexer||new q.default({lineMode:K,n3:$}),this._explicitQuantifiers=!!v.explicitQuantifiers}static _resetBlankNodePrefix(){W=0}_setBase(v){if(v){const y=v.indexOf("#");y>=0&&(v=v.substr(0,y)),this._base=v,this._basePath=v.indexOf("/")<0?v:v.replace(/[^\/?]*(?:\?.*)?$/,""),v=v.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=v[0],this._baseScheme=v[1]}else this._base="",this._basePath=""}_saveContext(v,y,E,D,j){const I=this._n3Mode;this._contextStack.push({subject:E,predicate:D,object:j,graph:y,type:v,inverse:!!I&&this._inversePredicate,blankPrefix:I?this._prefixes._:"",quantified:I?this._quantified:null}),I&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const v=this._contextStack.pop(),y=this._n3Mode;this._subject=v.subject,this._predicate=v.predicate,this._object=v.object,this._graph=v.graph,y&&(this._inversePredicate=v.inverse,this._prefixes._=v.blankPrefix,this._quantified=v.quantified)}_readInTopContext(v){switch(v.type){case"eof":return null!==this._graph?this._error("Unclosed graph",v):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(v)}}_readEntity(v,y){let E;switch(v.type){case"IRI":case"typeIRI":const D=this._resolveIRI(v.value);if(null===D)return this._error("Invalid IRI",v);E=this._namedNode(D);break;case"type":case"prefixed":const j=this._prefixes[v.prefix];if(void 0===j)return this._error(`Undefined prefix "${v.prefix}:"`,v);E=this._namedNode(j+v.value);break;case"blank":E=this._blankNode(this._prefixes[v.prefix]+v.value);break;case"var":E=this._variable(v.value.substr(1));break;default:return this._error(`Expected entity but got ${v.type}`,v)}return!y&&this._n3Mode&&E.id in this._quantified&&(E=this._quantified[E.id]),E}_readSubject(v){switch(this._predicate=null,v.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",v);case"}":return this._readPunctuation(v);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',v);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',v);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",v);if(0===v.prefix.length)return this._literalValue=v.value,this._completeSubjectLiteral;this._subject=this._literal(v.value,this._namedNode(v.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",v);default:if(void 0===(this._subject=this._readEntity(v)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(v){const y=v.type;switch(y){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[v.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${y}`,v):(this._subject=null,"]"===y?this._readBlankNodeTail(v):this._readPunctuation(v));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",v);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",v);default:if(void 0===(this._predicate=this._readEntity(v)))return}return this._readObject}_readObject(v){switch(v.type){case"literal":if(0===v.prefix.length)return this._literalValue=v.value,this._readDataTypeOrLang;this._object=this._literal(v.value,this._namedNode(v.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",v);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",v);default:if(void 0===(this._object=this._readEntity(v)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(v){return"{"===v.type?this._readGraph(v):this._readPredicate(v)}_readGraph(v){return"{"!==v.type?this._error(`Expected graph but got ${v.type}`,v):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(v){return"]"===v.type?(this._subject=null,this._readBlankNodeTail(v)):(this._predicate=null,this._readPredicate(v))}_readBlankNodeTail(v){if("]"!==v.type)return this._readBlankNodePunctuation(v);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const y=null===this._predicate;return this._restoreContext(),null===this._object?y?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}_readPredicateAfterBlank(v){switch(v.type){case".":case"}":return this._subject=null,this._readPunctuation(v);default:return this._readPredicate(v)}}_readListItem(v){let y=null,E=null,D=this._readListItem;const j=this._subject,I=this._contextStack,$=I[I.length-1];switch(v.type){case"[":this._saveContext("blank",this._graph,E=this._blankNode(),this.RDF_FIRST,this._subject=y=this._blankNode()),D=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,E=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==I.length&&"list"===I[I.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(D=this._readPredicate,this._subject===this.RDF_NIL)return D}else if(D=this._getContextEndReader(),this._object===this.RDF_NIL)return D;E=this.RDF_NIL;break;case"literal":0===v.prefix.length?(this._literalValue=v.value,D=this._readListItemDataTypeOrLang):(y=this._literal(v.value,this._namedNode(v.prefix)),D=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",v);default:if(void 0===(y=this._readEntity(v)))return}if(null===E&&(this._subject=E=this._blankNode()),null===j?null===$.predicate?$.subject=E:$.object=E:this._emit(j,this.RDF_REST,E,this._graph),null!==y){if(this._n3Mode&&("IRI"===v.type||"prefixed"===v.type))return this._saveContext("item",this._graph,E,this.RDF_FIRST,y),this._subject=y,this._predicate=null,this._getPathReader(this._readListItem);this._emit(E,this.RDF_FIRST,y,this._graph)}return D}_readDataTypeOrLang(v){return this._completeObjectLiteral(v,!1)}_readListItemDataTypeOrLang(v){return this._completeObjectLiteral(v,!0)}_completeLiteral(v){let y=this._literal(this._literalValue);switch(v.type){case"type":case"typeIRI":const E=this._readEntity(v);if(void 0===E)return;y=this._literal(this._literalValue,E),v=null;break;case"langcode":y=this._literal(this._literalValue,v.value),v=null}return{token:v,literal:y}}_completeSubjectLiteral(v){return this._subject=this._completeLiteral(v).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(v,y){const E=this._completeLiteral(v);if(E)return this._object=E.literal,y&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===E.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(E.token))}_readFormulaTail(v){return"}"!==v.type?this._readPunctuation(v):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(v){let y,E=this._graph;const D=this._subject,j=this._inversePredicate;switch(v.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",v);if(this._n3Mode)return this._readFormulaTail(v);this._graph=null;case".":this._subject=null,y=this._contextStack.length?this._readSubject:this._readInTopContext,j&&(this._inversePredicate=!1);break;case";":y=this._readPredicate;break;case",":y=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(E=this._readEntity(v))){y=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,v)}if(null!==D){const I=this._predicate,$=this._object;j?this._emit($,I,D,E):this._emit(D,I,$,E)}return y}_readBlankNodePunctuation(v){let y;switch(v.type){case";":y=this._readPredicate;break;case",":y=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,v)}return this._emit(this._subject,this._predicate,this._object,this._graph),y}_readQuadPunctuation(v){return"."!==v.type?this._error("Expected dot to follow quad",v):this._readInTopContext}_readPrefix(v){return"prefix"!==v.type?this._error("Expected prefix to follow @prefix",v):(this._prefix=v.value,this._readPrefixIRI)}_readPrefixIRI(v){if("IRI"!==v.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,v);const y=this._readEntity(v);return this._prefixes[this._prefix]=y.value,this._prefixCallback(this._prefix,y),this._readDeclarationPunctuation}_readBaseIRI(v){const y="IRI"===v.type&&this._resolveIRI(v.value);return y?(this._setBase(y),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",v)}_readNamedGraphLabel(v){switch(v.type){case"IRI":case"blank":case"prefixed":return this._readSubject(v),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",v)}}_readNamedGraphBlankLabel(v){return"]"!==v.type?this._error("Invalid graph label",v):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(v){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(v)):"."!==v.type?this._error("Expected declaration to end with a dot",v):this._readInTopContext}_readQuantifierList(v){let y;switch(v.type){case"IRI":case"prefixed":if(void 0!==(y=this._readEntity(v,!0)))break;default:return this._error(`Unexpected ${v.type}`,v)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,y,this.QUANTIFIERS_GRAPH)):this._quantified[y.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(v){return","===v.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(v))}_getPathReader(v){return this._afterPath=v,this._readPath}_readPath(v){switch(v.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const y=this._contextStack,E=y.length&&y[y.length-1];if(E&&"item"===E.type){const D=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,D,this._graph)}return this._afterPath(v)}}_readForwardPath(v){let y,E;const D=this._blankNode();if(void 0!==(E=this._readEntity(v)))return null===this._predicate?(y=this._subject,this._subject=D):(y=this._object,this._object=D),this._emit(y,E,D,this._graph),this._readPath}_readBackwardPath(v){const y=this._blankNode();let E,D;if(void 0!==(E=this._readEntity(v)))return null===this._predicate?(D=this._subject,this._subject=y):(D=this._object,this._object=y),this._emit(y,E,D,this._graph),this._readPath}_readRDFStarTailOrGraph(v){return">>"!==v.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(v))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,v):this._readRDFStarTail(v)}_readRDFStarTail(v){if(">>"!==v.type)return this._error(`Expected >> but got ${v.type}`,v);const y=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=y,this._readPredicate):(this._object=y,this._getContextEndReader())}_getContextEndReader(){const v=this._contextStack;if(!v.length)return this._readPunctuation;switch(v[v.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(v,y,E,D){this._callback(null,this._quad(v,y,E,D||this.DEFAULTGRAPH))}_error(v,y){const E=new Error(`${v} on line ${y.line}.`);E.context={token:y,line:y.line,previousToken:this._lexer.previousToken},this._callback(E),this._callback=x}_resolveIRI(v){return/^[a-z][a-z0-9+.-]*:/i.test(v)?v:this._resolveRelativeIRI(v)}_resolveRelativeIRI(v){if(!v.length)return this._base;switch(v[0]){case"#":return this._base+v;case"?":return this._base.replace(/(?:\?.*)?$/,v);case"/":return("/"===v[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(v);default:return/^[^/:]*:/.test(v)?null:this._removeDotSegments(this._basePath+v)}}_removeDotSegments(v){if(!/(^|\/)\.\.?($|[/#?])/.test(v))return v;const y=v.length;let E="",D=-1,j=-1,I=0,$="/";for(;D<y;){switch($){case":":if(j<0&&"/"===v[++D]&&"/"===v[++D])for(;(j=D+1)<y&&"/"!==v[j];)D=j;break;case"?":case"#":D=y;break;case"/":if("."===v[D+1])switch($=v[1+ ++D],$){case"/":E+=v.substring(I,D-1),I=D+1;break;case void 0:case"?":case"#":return E+v.substring(I,D)+v.substr(D+1);case".":if($=v[1+ ++D],void 0===$||"/"===$||"?"===$||"#"===$){if(E+=v.substring(I,D-2),(I=E.lastIndexOf("/"))>=j&&(E=E.substr(0,I)),"/"!==$)return`${E}/${v.substr(D+1)}`;I=D+1}}}$=v[++D]}return E+v.substring(I)}parse(v,y,E){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${W++}_`,this._prefixCallback=E||x,this._inversePredicate=!1,this._quantified=Object.create(null),!y){const D=[];let j;if(this._callback=(I,$)=>{I?j=I:$&&D.push($)},this._lexer.tokenize(v).every(I=>this._readCallback=this._readCallback(I)),j)throw j;return D}this._callback=y,this._lexer.tokenize(v,(D,j)=>{null!==D?(this._callback(D),this._callback=x):this._readCallback&&(this._readCallback=this._readCallback(j))})}}function x(){}function R(T,v){const y=v.namedNode;T._namedNode=y,T._blankNode=v.blankNode,T._literal=v.literal,T._variable=v.variable,T._quad=v.quad,T.DEFAULTGRAPH=v.defaultGraph(),T.RDF_FIRST=y(L.default.rdf.first),T.RDF_REST=y(L.default.rdf.rest),T.RDF_NIL=y(L.default.rdf.nil),T.N3_FORALL=y(L.default.r.forAll),T.N3_FORSOME=y(L.default.r.forSome),T.ABBREVIATIONS={a:y(L.default.rdf.type),"=":y(L.default.owl.sameAs),">":y(L.default.log.implies)},T.QUANTIFIERS_GRAPH=y("urn:n3:quantifiers")}fe.default=w,R(w.prototype,V.default)},{"./IRIs":34,"./N3DataFactory":35,"./N3Lexer":36}],38:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var v,q=function(v,y){if(!y&&v&&v.__esModule)return v;if(null===v||"object"!=typeof v&&"function"!=typeof v)return{default:v};var E=W(y);if(E&&E.has(v))return E.get(v);var D={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in v)if("default"!==I&&Object.prototype.hasOwnProperty.call(v,I)){var $=j?Object.getOwnPropertyDescriptor(v,I):null;$&&($.get||$.set)?Object.defineProperty(D,I,$):D[I]=v[I]}return D.default=v,E&&E.set(v,D),D}(Y("./N3DataFactory")),V=Y("readable-stream"),L=(v=Y("./IRIs"))&&v.__esModule?v:{default:v};function W(v){if("function"!=typeof WeakMap)return null;var y=new WeakMap,E=new WeakMap;return(W=function(D){return D?E:y})(v)}class x{constructor(y,E){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!E&&y&&!y[0]&&(E=y,y=null),this._factory=(E=E||{}).factory||q.default,y&&this.addQuads(y)}get size(){let y=this._size;if(null!==y)return y;y=0;const E=this._graphs;let D,j;for(const I in E)for(const $ in D=E[I].subjects)for(const K in j=D[$])y+=Object.keys(j[K]).length;return this._size=y}_addToIndex(y,E,D,j){const I=y[E]||(y[E]={}),$=I[D]||(I[D]={}),K=j in $;return K||($[j]=null),!K}_removeFromIndex(y,E,D,j){const I=y[E],$=I[D];delete $[j];for(const K in $)return;delete I[D];for(const K in I)return;delete y[E]}_findInIndex(y,E,D,j,I,$,K,M,F,Q){let S,U,ie;const ee=!E+!D+!j>1?Object.keys(this._ids):this._entities;E&&((S=y,y={})[E]=S[E]);for(const se in y){const Te=ee[se];if(U=y[se]){D&&((S=U,U={})[D]=S[D]);for(const me in U){const te=ee[me];if(ie=U[me]){const ye=j?j in ie?[j]:[]:Object.keys(ie);for(let Oe=0;Oe<ye.length;Oe++){const Ue={subject:null,predicate:null,object:null};Ue[I]=(0,q.termFromId)(Te,this._factory),Ue[$]=(0,q.termFromId)(te,this._factory),Ue[K]=(0,q.termFromId)(ee[ye[Oe]],this._factory);const nt=this._factory.quad(Ue.subject,Ue.predicate,Ue.object,(0,q.termFromId)(M,this._factory));if(Q)Q.push(nt);else if(F(nt))return!0}}}}}return Q}_loop(y,E){for(const D in y)E(D)}_loopByKey0(y,E,D){let j,I;if(j=y[E])for(I in j)D(I)}_loopByKey1(y,E,D){let j,I;for(j in y)I=y[j],I[E]&&D(j)}_loopBy2Keys(y,E,D,j){let I,$,K;if((I=y[E])&&($=I[D]))for(K in $)j(K)}_countInIndex(y,E,D,j){let $,K,M,I=0;E&&(($=y,y={})[E]=$[E]);for(const F in y)if(K=y[F]){D&&(($=K,K={})[D]=$[D]);for(const Q in K)(M=K[Q])&&(j?j in M&&I++:I+=Object.keys(M).length)}return I}_getGraphs(y){if(!R(y))return this._graphs;const E={};return E[y]=this._graphs[y],E}_uniqueEntities(y){const E=Object.create(null);return D=>{D in E||(E[D]=!0,y((0,q.termFromId)(this._entities[D],this._factory)))}}add(y){return this.addQuad(y),this}addQuad(y,E,D,j){E||(j=y.graph,D=y.object,E=y.predicate,y=y.subject),y=(0,q.termToId)(y),E=(0,q.termToId)(E),D=(0,q.termToId)(D),j=(0,q.termToId)(j);let I=this._graphs[j];I||(I=this._graphs[j]={subjects:{},predicates:{},objects:{}},Object.freeze(I));const $=this._ids,K=this._entities;y=$[y]||($[K[++this._id]=y]=this._id),E=$[E]||($[K[++this._id]=E]=this._id),D=$[D]||($[K[++this._id]=D]=this._id);const M=this._addToIndex(I.subjects,y,E,D);return this._addToIndex(I.predicates,E,D,y),this._addToIndex(I.objects,D,y,E),this._size=null,M}addQuads(y){for(let E=0;E<y.length;E++)this.addQuad(y[E])}delete(y){return this.removeQuad(y),this}has(y){return 0!==this.getQuads(y.subject,y.predicate,y.object,y.graph).length}import(y){return y.on("data",E=>{this.addQuad(E)}),y}removeQuad(y,E,D,j){E||(j=y.graph,D=y.object,E=y.predicate,y=y.subject),y=(0,q.termToId)(y),E=(0,q.termToId)(E),D=(0,q.termToId)(D),j=(0,q.termToId)(j);const I=this._ids,$=this._graphs;let K,M,F;if(!((y=I[y])&&(E=I[E])&&(D=I[D])&&(K=$[j])&&(M=K.subjects[y])&&(F=M[E])&&D in F))return!1;for(y in this._removeFromIndex(K.subjects,y,E,D),this._removeFromIndex(K.predicates,E,D,y),this._removeFromIndex(K.objects,D,y,E),null!==this._size&&this._size--,K.subjects)return!0;return delete $[j],!0}removeQuads(y){for(let E=0;E<y.length;E++)this.removeQuad(y[E])}remove(y){return y.on("data",E=>{this.removeQuad(E)}),y}removeMatches(y,E,D,j){const I=new V.Readable({objectMode:!0});return I._read=()=>{for(const $ of this.getQuads(y,E,D,j))I.push($);I.push(null)},this.remove(I)}deleteGraph(y){return this.removeMatches(null,null,null,y)}getQuads(y,E,D,j){y=y&&(0,q.termToId)(y),E=E&&(0,q.termToId)(E),D=D&&(0,q.termToId)(D),j=j&&(0,q.termToId)(j);const I=[],$=this._getGraphs(j),K=this._ids;let M,F,Q,S;if(R(y)&&!(F=K[y])||R(E)&&!(Q=K[E])||R(D)&&!(S=K[D]))return I;for(const U in $)(M=$[U])&&(F?S?this._findInIndex(M.objects,S,F,Q,"object","subject","predicate",U,null,I):this._findInIndex(M.subjects,F,Q,null,"subject","predicate","object",U,null,I):Q?this._findInIndex(M.predicates,Q,S,null,"predicate","object","subject",U,null,I):S?this._findInIndex(M.objects,S,null,null,"object","subject","predicate",U,null,I):this._findInIndex(M.subjects,null,null,null,"subject","predicate","object",U,null,I));return I}match(y,E,D,j){return new T(this,y,E,D,j)}countQuads(y,E,D,j){y=y&&(0,q.termToId)(y),E=E&&(0,q.termToId)(E),D=D&&(0,q.termToId)(D),j=j&&(0,q.termToId)(j);const I=this._getGraphs(j),$=this._ids;let M,F,Q,S,K=0;if(R(y)&&!(F=$[y])||R(E)&&!(Q=$[E])||R(D)&&!(S=$[D]))return 0;for(const U in I)(M=I[U])&&(K+=y?D?this._countInIndex(M.objects,S,F,Q):this._countInIndex(M.subjects,F,Q,S):E?this._countInIndex(M.predicates,Q,S,F):this._countInIndex(M.objects,S,F,Q));return K}forEach(y,E,D,j,I){this.some($=>(y($),!1),E,D,j,I)}every(y,E,D,j,I){let $=!1;const K=!this.some(M=>($=!0,!y(M)),E,D,j,I);return $&&K}some(y,E,D,j,I){E=E&&(0,q.termToId)(E),D=D&&(0,q.termToId)(D),j=j&&(0,q.termToId)(j),I=I&&(0,q.termToId)(I);const $=this._getGraphs(I),K=this._ids;let M,F,Q,S;if(R(E)&&!(F=K[E])||R(D)&&!(Q=K[D])||R(j)&&!(S=K[j]))return!1;for(const U in $)if(M=$[U])if(F){if(S){if(this._findInIndex(M.objects,S,F,Q,"object","subject","predicate",U,y,null))return!0}else if(this._findInIndex(M.subjects,F,Q,null,"subject","predicate","object",U,y,null))return!0}else if(Q){if(this._findInIndex(M.predicates,Q,S,null,"predicate","object","subject",U,y,null))return!0}else if(S){if(this._findInIndex(M.objects,S,null,null,"object","subject","predicate",U,y,null))return!0}else if(this._findInIndex(M.subjects,null,null,null,"subject","predicate","object",U,y,null))return!0;return!1}getSubjects(y,E,D){const j=[];return this.forSubjects(I=>{j.push(I)},y,E,D),j}forSubjects(y,E,D,j){E=E&&(0,q.termToId)(E),D=D&&(0,q.termToId)(D),j=j&&(0,q.termToId)(j);const I=this._ids,$=this._getGraphs(j);let K,M,F;if(y=this._uniqueEntities(y),!(R(E)&&!(M=I[E])||R(D)&&!(F=I[D])))for(j in $)(K=$[j])&&(M?F?this._loopBy2Keys(K.predicates,M,F,y):this._loopByKey1(K.subjects,M,y):F?this._loopByKey0(K.objects,F,y):this._loop(K.subjects,y))}getPredicates(y,E,D){const j=[];return this.forPredicates(I=>{j.push(I)},y,E,D),j}forPredicates(y,E,D,j){E=E&&(0,q.termToId)(E),D=D&&(0,q.termToId)(D),j=j&&(0,q.termToId)(j);const I=this._ids,$=this._getGraphs(j);let K,M,F;if(y=this._uniqueEntities(y),!(R(E)&&!(M=I[E])||R(D)&&!(F=I[D])))for(j in $)(K=$[j])&&(M?F?this._loopBy2Keys(K.objects,F,M,y):this._loopByKey0(K.subjects,M,y):F?this._loopByKey1(K.predicates,F,y):this._loop(K.predicates,y))}getObjects(y,E,D){const j=[];return this.forObjects(I=>{j.push(I)},y,E,D),j}forObjects(y,E,D,j){E=E&&(0,q.termToId)(E),D=D&&(0,q.termToId)(D),j=j&&(0,q.termToId)(j);const I=this._ids,$=this._getGraphs(j);let K,M,F;if(y=this._uniqueEntities(y),!(R(E)&&!(M=I[E])||R(D)&&!(F=I[D])))for(j in $)(K=$[j])&&(M?F?this._loopBy2Keys(K.subjects,M,F,y):this._loopByKey1(K.objects,M,y):F?this._loopByKey0(K.predicates,F,y):this._loop(K.objects,y))}getGraphs(y,E,D){const j=[];return this.forGraphs(I=>{j.push(I)},y,E,D),j}forGraphs(y,E,D,j){for(const I in this._graphs)this.some($=>(y($.graph),!0),E,D,j,I)}createBlankNode(y){let E,D;if(y)for(E=y=`_:${y}`,D=1;this._ids[E];)E=y+D++;else do{E="_:b"+this._blankNodeIndex++}while(this._ids[E]);return this._ids[E]=++this._id,this._entities[this._id]=E,this._factory.blankNode(E.substr(2))}extractLists({remove:y=!1,ignoreErrors:E=!1}={}){const D={},j=E?()=>!0:(K,M)=>{throw new Error(`${K.value} ${M}`)},I=this.getQuads(null,L.default.rdf.rest,L.default.rdf.nil,null),$=y?[...I]:[];return I.forEach(K=>{const M=[];let Q,S,F=!1;const U=K.graph;let ie=K.subject;for(;ie&&!F;){const ue=this.getQuads(null,null,ie,null),ee=this.getQuads(ie,null,null,null);let se,Te=null,me=null,te=null;for(let ye=0;ye<ee.length&&!F;ye++)se=ee[ye],se.graph.equals(U)?Q?F=j(ie,"has non-list arcs out"):se.predicate.value===L.default.rdf.first?Te?F=j(ie,"has multiple rdf:first arcs"):$.push(Te=se):se.predicate.value===L.default.rdf.rest?me?F=j(ie,"has multiple rdf:rest arcs"):$.push(me=se):ue.length?F=j(ie,"can't be subject and object"):(Q=se,S="subject"):F=j(ie,"not confined to single graph");for(let ye=0;ye<ue.length&&!F;++ye)se=ue[ye],Q?F=j(ie,"can't have coreferences"):se.predicate.value===L.default.rdf.rest?te?F=j(ie,"has incoming rdf:rest arcs"):te=se:(Q=se,S="object");Te?M.unshift(Te.object):F=j(ie,"has no list head"),ie=te&&te.subject}F?y=!1:Q&&(D[Q[S].value]=M)}),y&&this.removeQuads($),D}*[Symbol.iterator](){yield*this.getQuads()}}function R(v){return"string"==typeof v||v instanceof String}fe.default=x;class T extends V.Readable{constructor(y,E,D,j,I){super({objectMode:!0}),Object.assign(this,{n3Store:y,subject:E,predicate:D,object:j,graph:I})}get filtered(){if(!this._filtered){const{n3Store:y,graph:E,object:D,predicate:j,subject:I}=this,$=y.getQuads(I,j,D,E);this._filtered=new x($,{factory:y._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const y of this.filtered.getQuads())this.push(y);this.push(null)}add(y){return this.filtered.add(y)}delete(y){return this.filtered.delete(y)}has(y){return this.filtered.has(y)}match(y,E,D,j){return new T(this.filtered,y,E,D,j)}*[Symbol.iterator](){yield*this.filtered.getQuads()}}},{"./IRIs":34,"./N3DataFactory":35,"readable-stream":81}],39:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var W,q=(W=Y("./N3Parser"))&&W.__esModule?W:{default:W},V=Y("readable-stream");fe.default=class extends V.Transform{constructor(w){let R,T;super({decodeStrings:!0}),this._readableState.objectMode=!0,new q.default(w).parse({on:(v,y)=>{switch(v){case"data":R=y;break;case"end":T=y}}},(v,y)=>{v&&this.emit("error",v)||y&&this.push(y)},(v,y)=>{this.emit("prefix",v,y)}),this._transform=(v,y,E)=>{R(v),E()},this._flush=v=>{T(),v()}}import(w){return w.on("data",x=>{this.write(x)}),w.on("end",()=>{this.end()}),w.on("error",x=>{this.emit("error",x)}),this}}},{"./N3Parser":37,"readable-stream":81}],40:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var W,q=Y("readable-stream"),V=(W=Y("./N3Writer"))&&W.__esModule?W:{default:W};fe.default=class extends q.Transform{constructor(w){super({encoding:"utf8",writableObjectMode:!0});const x=this._writer=new V.default({write:(R,T,v)=>{this.push(R),v&&v()},end:R=>{this.push(null),R&&R()}},w);this._transform=(R,T,v)=>{x.addQuad(R,v)},this._flush=R=>{x.end(R)}}import(w){return w.on("data",x=>{this.write(x)}),w.on("end",()=>{this.end()}),w.on("error",x=>{this.emit("error",x)}),w.on("prefix",(x,R)=>{this._writer.addPrefix(x,R)}),this}}},{"./N3Writer":42,"readable-stream":81}],41:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.isNamedNode=function(y){return!!y&&"NamedNode"===y.termType},fe.isBlankNode=function(y){return!!y&&"BlankNode"===y.termType},fe.isLiteral=function(y){return!!y&&"Literal"===y.termType},fe.isVariable=function(y){return!!y&&"Variable"===y.termType},fe.isDefaultGraph=x,fe.inDefaultGraph=function(y){return x(y.graph)},fe.prefix=function(y,E){return v({"":y},E)("")},fe.prefixes=v;var y,q=(y=Y("./N3DataFactory"))&&y.__esModule?y:{default:y};function x(y){return!!y&&"DefaultGraph"===y.termType}function v(y,E){const D=Object.create(null);for(const I in y)j(I,y[I]);function j(I,$){if("string"==typeof $){const K=Object.create(null);D[I]=M=>K[M]||(K[M]=E.namedNode($+M))}else if(!(I in D))throw new Error(`Unknown prefix: ${I}`);return D[I]}return E=E||q.default,j}},{"./N3DataFactory":35}],42:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var $,q=($=Y("./IRIs"))&&$.__esModule?$:{default:$},V=function($,K){if(!K&&$&&$.__esModule)return $;if(null===$||"object"!=typeof $&&"function"!=typeof $)return{default:$};var M=re(K);if(M&&M.has($))return M.get($);var F={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in $)if("default"!==S&&Object.prototype.hasOwnProperty.call($,S)){var U=Q?Object.getOwnPropertyDescriptor($,S):null;U&&(U.get||U.set)?Object.defineProperty(F,S,U):F[S]=$[S]}return F.default=$,M&&M.set($,F),F}(Y("./N3DataFactory")),L=Y("./N3Util");function re($){if("function"!=typeof WeakMap)return null;var K=new WeakMap,M=new WeakMap;return(re=function(F){return F?M:K})($)}const x=V.default.defaultGraph(),{rdf:R,xsd:T}=q.default,v=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,y=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,E={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class D extends V.Term{equals(){return!1}}function I($){let K=E[$];return void 0===K&&(1===$.length?(K=$.charCodeAt(0).toString(16),K="\\u0000".substr(0,6-K.length)+K):(K=(1024*($.charCodeAt(0)-55296)+$.charCodeAt(1)+9216).toString(16),K="\\U00000000".substr(0,10-K.length)+K)),K}fe.default=class{constructor(K,M){if(this._prefixRegex=/$0^/,K&&"function"!=typeof K.write&&(M=K,K=null),this._lists=(M=M||{}).lists,K)this._outputStream=K,this._endStream=void 0===M.end||!!M.end;else{let F="";this._outputStream={write(Q,S,U){F+=Q,U&&U()},end:Q=>{Q&&Q(null,F)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(M.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=x,this._baseIRI=M.baseIRI,this._prefixIRIs=Object.create(null),M.prefixes&&this.addPrefixes(M.prefixes))}get _inDefaultGraph(){return x.equals(this._graph)}_write(K,M){this._outputStream.write(K,"utf8",M)}_writeQuad(K,M,F,Q,S){try{Q.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(x.equals(Q)?"":`${this._encodeIriOrBlank(Q)} {\n`)),this._graph=Q,this._subject=null),K.equals(this._subject)?M.equals(this._predicate)?this._write(`, ${this._encodeObject(F)}`,S):this._write(`;\n    ${this._encodePredicate(this._predicate=M)} ${this._encodeObject(F)}`,S):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=K)} ${this._encodePredicate(this._predicate=M)} ${this._encodeObject(F)}`,S)}catch(U){S&&S(U)}}_writeQuadLine(K,M,F,Q,S){delete this._prefixMatch,this._write(this.quadToString(K,M,F,Q),S)}quadToString(K,M,F,Q){return`${this._encodeSubject(K)} ${this._encodeIriOrBlank(M)} ${this._encodeObject(F)}${Q&&Q.value?` ${this._encodeIriOrBlank(Q)} .\n`:" .\n"}`}quadsToString(K){return K.map(M=>this.quadToString(M.subject,M.predicate,M.object,M.graph)).join("")}_encodeSubject(K){return"Quad"===K.termType?this._encodeQuad(K):this._encodeIriOrBlank(K)}_encodeIriOrBlank(K){if("NamedNode"!==K.termType)return this._lists&&K.value in this._lists&&(K=this.list(this._lists[K.value])),"id"in K?K.id:`_:${K.value}`;let M=K.value;this._baseIRI&&M.startsWith(this._baseIRI)&&(M=M.substr(this._baseIRI.length)),v.test(M)&&(M=M.replace(y,I));const F=this._prefixRegex.exec(M);return F?F[1]?this._prefixIRIs[F[1]]+F[2]:M:`<${M}>`}_encodeLiteral(K){let M=K.value;if(v.test(M)&&(M=M.replace(y,I)),K.language)return`"${M}"@${K.language}`;if(this._lineMode){if(K.datatype.value===T.string)return`"${M}"`}else switch(K.datatype.value){case T.string:return`"${M}"`;case T.boolean:if("true"===M||"false"===M)return M;break;case T.integer:if(/^[+-]?\d+$/.test(M))return M;break;case T.decimal:if(/^[+-]?\d*\.\d+$/.test(M))return M;break;case T.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(M))return M}return`"${M}"^^${this._encodeIriOrBlank(K.datatype)}`}_encodePredicate(K){return K.value===R.type?"a":this._encodeIriOrBlank(K)}_encodeObject(K){switch(K.termType){case"Quad":return this._encodeQuad(K);case"Literal":return this._encodeLiteral(K);default:return this._encodeIriOrBlank(K)}}_encodeQuad({subject:K,predicate:M,object:F,graph:Q}){return`<<${this._encodeSubject(K)} ${this._encodePredicate(M)} ${this._encodeObject(F)}${(0,L.isDefaultGraph)(Q)?"":` ${this._encodeIriOrBlank(Q)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(K,M,F,Q,S){void 0===F?this._writeQuad(K.subject,K.predicate,K.object,K.graph,M):"function"==typeof Q?this._writeQuad(K,M,F,x,Q):this._writeQuad(K,M,F,Q||x,S)}addQuads(K){for(let M=0;M<K.length;M++)this.addQuad(K[M])}addPrefix(K,M,F){const Q={};Q[K]=M,this.addPrefixes(Q,F)}addPrefixes(K,M){if(!this._prefixIRIs)return M&&M();let F=!1;for(let Q in K){let S=K[Q];"string"!=typeof S&&(S=S.value),F=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[S]=Q+=":",this._write(`@prefix ${Q} <${S}>.\n`)}if(F){let Q="",S="";for(const U in this._prefixIRIs)Q+=Q?`|${U}`:U,S+=(S?"|":"")+this._prefixIRIs[U];Q=Q.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${S})[^/]*$|^(${Q})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(F?"\n":"",M)}blank(K,M){let Q,S,F=K;switch(void 0===K?F=[]:K.termType?F=[{predicate:K,object:M}]:"length"in K||(F=[K]),S=F.length){case 0:return new D("[]");case 1:if(Q=F[0],!(Q.object instanceof D))return new D(`[ ${this._encodePredicate(Q.predicate)} ${this._encodeObject(Q.object)} ]`);default:let U="[";for(let ie=0;ie<S;ie++)Q=F[ie],Q.predicate.equals(K)?U+=`, ${this._encodeObject(Q.object)}`:(U+=`${(ie?";\n  ":"\n  ")+this._encodePredicate(Q.predicate)} ${this._encodeObject(Q.object)}`,K=Q.predicate);return new D(`${U}\n]`)}}list(K){const M=K&&K.length||0,F=new Array(M);for(let Q=0;Q<M;Q++)F[Q]=this._encodeObject(K[Q]);return new D(`(${F.join(" ")})`)}end(K){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let M=K&&((F,Q)=>{M=null,K(F,Q)});if(this._endStream)try{return this._outputStream.end(M)}catch(F){}M&&M()}}},{"./IRIs":34,"./N3DataFactory":35,"./N3Util":41}],43:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),Object.defineProperty(fe,"Lexer",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(fe,"Parser",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(fe,"Writer",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(fe,"Store",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(fe,"StreamParser",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(fe,"StreamWriter",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(fe,"DataFactory",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(fe,"Term",{enumerable:!0,get:function(){return R.Term}}),Object.defineProperty(fe,"NamedNode",{enumerable:!0,get:function(){return R.NamedNode}}),Object.defineProperty(fe,"Literal",{enumerable:!0,get:function(){return R.Literal}}),Object.defineProperty(fe,"BlankNode",{enumerable:!0,get:function(){return R.BlankNode}}),Object.defineProperty(fe,"Variable",{enumerable:!0,get:function(){return R.Variable}}),Object.defineProperty(fe,"DefaultGraph",{enumerable:!0,get:function(){return R.DefaultGraph}}),Object.defineProperty(fe,"Quad",{enumerable:!0,get:function(){return R.Quad}}),Object.defineProperty(fe,"Triple",{enumerable:!0,get:function(){return R.Triple}}),Object.defineProperty(fe,"termFromId",{enumerable:!0,get:function(){return R.termFromId}}),Object.defineProperty(fe,"termToId",{enumerable:!0,get:function(){return R.termToId}}),fe.Util=void 0;var q=y(Y("./N3Lexer")),V=y(Y("./N3Parser")),L=y(Y("./N3Writer")),re=y(Y("./N3Store")),W=y(Y("./N3StreamParser")),w=y(Y("./N3StreamWriter")),x=v(Y("./N3Util"));fe.Util=x;var R=v(Y("./N3DataFactory"));function T(E){if("function"!=typeof WeakMap)return null;var D=new WeakMap,j=new WeakMap;return(T=function(I){return I?j:D})(E)}function v(E,D){if(!D&&E&&E.__esModule)return E;if(null===E||"object"!=typeof E&&"function"!=typeof E)return{default:E};var j=T(D);if(j&&j.has(E))return j.get(E);var I={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in E)if("default"!==K&&Object.prototype.hasOwnProperty.call(E,K)){var M=$?Object.getOwnPropertyDescriptor(E,K):null;M&&(M.get||M.set)?Object.defineProperty(I,K,M):I[K]=E[K]}return I.default=E,j&&j.set(E,I),I}function y(E){return E&&E.__esModule?E:{default:E}}},{"./N3DataFactory":35,"./N3Lexer":36,"./N3Parser":37,"./N3Store":38,"./N3StreamParser":39,"./N3StreamWriter":40,"./N3Util":41,"./N3Writer":42}],44:[function(Y,Ae,fe){var V,L,q=Ae.exports={};function re(){throw new Error("setTimeout has not been defined")}function W(){throw new Error("clearTimeout has not been defined")}function w($){if(V===setTimeout)return setTimeout($,0);if((V===re||!V)&&setTimeout)return V=setTimeout,setTimeout($,0);try{return V($,0)}catch(K){try{return V.call(null,$,0)}catch(M){return V.call(this,$,0)}}}!function(){try{V="function"==typeof setTimeout?setTimeout:re}catch($){V=re}try{L="function"==typeof clearTimeout?clearTimeout:W}catch($){L=W}}();var v,R=[],T=!1,y=-1;function E(){!T||!v||(T=!1,v.length?R=v.concat(R):y=-1,R.length&&D())}function D(){if(!T){var $=w(E);T=!0;for(var K=R.length;K;){for(v=R,R=[];++y<K;)v&&v[y].run();y=-1,K=R.length}v=null,T=!1,function($){if(L===clearTimeout)return clearTimeout($);if((L===W||!L)&&clearTimeout)return L=clearTimeout,clearTimeout($);try{L($)}catch(K){try{return L.call(null,$)}catch(M){return L.call(this,$)}}}($)}}function j($,K){this.fun=$,this.array=K}function I(){}q.nextTick=function($){var K=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)K[M-1]=arguments[M];R.push(new j($,K)),1===R.length&&!T&&w(D)},j.prototype.run=function(){this.fun.apply(null,this.array)},q.title="browser",q.browser=!0,q.env={},q.argv=[],q.version="",q.versions={},q.on=I,q.addListener=I,q.once=I,q.off=I,q.removeListener=I,q.removeAllListeners=I,q.emit=I,q.prependListener=I,q.prependOnceListener=I,q.listeners=function($){return[]},q.binding=function($){throw new Error("process.binding is not supported")},q.cwd=function(){return"/"},q.chdir=function($){throw new Error("process.chdir is not supported")},q.umask=function(){return 0}},{}],45:[function(Y,Ae,fe){(function(q){(function(){let V;Ae.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:q):L=>(V||(V=Promise.resolve())).then(L).catch(re=>setTimeout(()=>{throw re},0))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(Y,Ae,fe){Ae.exports=Y("./lib")},{"./lib":55}],47:[function(Y,Ae,fe){"use strict";Ae.exports=class kW{constructor(V,L=new Map,re=0){this.prefix=V,this._existing=L,this.counter=re}clone(){const{prefix:V,_existing:L,counter:re}=this;return new kW(V,new Map(L),re)}getId(V){const L=V&&this._existing.get(V);if(L)return L;const re=this.prefix+this.counter;return this.counter++,V&&this._existing.set(V,re),re}hasId(V){return this._existing.has(V)}getOldIds(){return[...this._existing.keys()]}}},{}],48:[function(Y,Ae,fe){"use strict";Y("setimmediate");const q=self.crypto||self.msCrypto;Ae.exports=class{constructor(L){if(!q||!q.subtle)throw new Error("crypto.subtle not found.");if("sha256"===L)this.algorithm={name:"SHA-256"};else{if("sha1"!==L)throw new Error(`Unsupport algorithm "${L}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(L){this._content+=L}digest(){var L=this;return gt(function*(){const re=(new TextEncoder).encode(L._content),W=new Uint8Array(yield q.subtle.digest(L.algorithm,re));let w="";for(let x=0;x<W.length;++x)w+=W[x].toString(16).padStart(2,"0");return w})()}}},{setimmediate:86}],49:[function(Y,Ae,fe){"use strict";const L="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",re="http://www.w3.org/2001/XMLSchema#string",W="NamedNode",w="BlankNode",x="Literal",R="DefaultGraph",T={};function v(I,$){return I.subject.termType===$.subject.termType&&I.object.termType===$.object.termType&&I.subject.value===$.subject.value&&I.predicate.value===$.predicate.value&&I.object.value===$.object.value&&(I.object.termType!==x||I.object.datatype.termType===$.object.datatype.termType&&I.object.language===$.object.language&&I.object.datatype.value===$.object.datatype.value)}T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^[ \\t]*$"),T.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),Ae.exports=class AP{static parse($){const K=[],M={},F=$.split(T.eoln);let Q=0;for(const S of F){if(Q++,T.empty.test(S))continue;const U=S.match(T.quad);if(null===U)throw new Error("N-Quads parse error on line "+Q+".");const ie={subject:null,predicate:null,object:null,graph:null};if(ie.subject=void 0!==U[1]?{termType:W,value:U[1]}:{termType:w,value:U[2]},ie.predicate={termType:W,value:U[3]},void 0!==U[4]?ie.object={termType:W,value:U[4]}:void 0!==U[5]?ie.object={termType:w,value:U[5]}:(ie.object={termType:x,value:void 0,datatype:{termType:W}},void 0!==U[7]?ie.object.datatype.value=U[7]:void 0!==U[8]?(ie.object.datatype.value=L,ie.object.language=U[8]):ie.object.datatype.value=re,ie.object.value=U[6].replace(D,function($,K,M,F){if(K)switch(K){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(M)return String.fromCharCode(parseInt(M,16));if(F)throw new Error("Unsupported U escape")})),ie.graph=void 0!==U[9]?{termType:W,value:U[9]}:void 0!==U[10]?{termType:w,value:U[10]}:{termType:R,value:""},ie.graph.value in M){let ue=!0;const ee=M[ie.graph.value];for(const se of ee)if(v(se,ie)){ue=!1;break}ue&&(ee.push(ie),K.push(ie))}else M[ie.graph.value]=[ie],K.push(ie)}return K}static serialize($){Array.isArray($)||($=AP.legacyDatasetToQuads($));const K=[];for(const M of $)K.push(AP.serializeQuad(M));return K.sort().join("")}static serializeQuad($){const K=$.subject,F=$.object,Q=$.graph;let S="";return S+=K.termType===W?`<${K.value}>`:`${K.value}`,S+=` <${$.predicate.value}> `,F.termType===W?S+=`<${F.value}>`:F.termType===w?S+=F.value:(S+=`"${I=F.value,I.replace(y,function($){switch($){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,F.datatype.value===L?F.language&&(S+=`@${F.language}`):F.datatype.value!==re&&(S+=`^^<${F.datatype.value}>`)),Q.termType===W?S+=` <${Q.value}>`:Q.termType===w&&(S+=` ${Q.value}`),S+=" .\n",S;var I}static legacyDatasetToQuads($){const K=[],M={"blank node":w,IRI:W,literal:x};for(const F in $)$[F].forEach(S=>{const U={};for(const ie in S){const ue=S[ie],ee={termType:M[ue.type],value:ue.value};ee.termType===x&&(ee.datatype={termType:W},"datatype"in ue&&(ee.datatype.value=ue.datatype),"language"in ue?("datatype"in ue||(ee.datatype.value=L),ee.language=ue.language):"datatype"in ue||(ee.datatype.value=re)),U[ie]=ee}U.graph="@default"===F?{termType:R,value:""}:{termType:F.startsWith("_:")?w:W,value:F},K.push(U)});return K}};const y=/["\\\n\r]/g;const D=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],50:[function(Y,Ae,fe){"use strict";Ae.exports=class{constructor(V){this.current=V.sort(),this.done=!1,this.dir=new Map;for(let L=0;L<V.length;++L)this.dir.set(V[L],!0)}hasNext(){return!this.done}next(){const{current:V,dir:L}=this,re=V.slice();let W=null,w=0;const x=V.length;for(let R=0;R<x;++R){const T=V[R],v=L.get(T);(null===W||T>W)&&(v&&R>0&&T>V[R-1]||!v&&R<x-1&&T>V[R+1])&&(W=T,w=R)}if(null===W)this.done=!0;else{const R=L.get(W)?w-1:w+1;V[w]=V[R],V[R]=W;for(const T of V)T>W&&L.set(T,!L.get(T))}return re}}},{}],51:[function(Y,Ae,fe){(function(q){(function(){"use strict";const V=Y("./IdentifierIssuer"),L=Y("./MessageDigest"),re=Y("./Permuter"),W=Y("./NQuads");function w(x,R){return x.hash<R.hash?-1:x.hash>R.hash?1:0}Ae.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new V("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(R){var T=this;return gt(function*(){T.quads=R;for(const $ of R)T._addBlankNodeQuadInfo({quad:$,component:$.subject}),T._addBlankNodeQuadInfo({quad:$,component:$.object}),T._addBlankNodeQuadInfo({quad:$,component:$.graph});const v=new Map,y=[...T.blankNodeInfo.keys()];let E=0;for(const $ of y)++E%100==0&&(yield T._yield()),yield T._hashAndTrackBlankNode({id:$,hashToBlankNodes:v});const D=[...v.keys()].sort(),j=[];for(const $ of D){const K=v.get($);K.length>1?j.push(K):T.canonicalIssuer.getId(K[0])}for(const $ of j){const K=[];for(const M of $){if(T.canonicalIssuer.hasId(M))continue;const F=new V("_:b");F.getId(M);const Q=yield T.hashNDegreeQuads(M,F);K.push(Q)}K.sort(w);for(const M of K){const F=M.issuer.getOldIds();for(const Q of F)T.canonicalIssuer.getId(Q)}}const I=[];for(const $ of T.quads){const K=ht({},$);K.subject=T._useCanonicalId({component:K.subject}),K.object=T._useCanonicalId({component:K.object}),K.graph=T._useCanonicalId({component:K.graph}),I.push(W.serializeQuad(K))}return I.sort(),I.join("")})()}hashFirstDegreeQuads(R){var T=this;return gt(function*(){const v=[],y=T.blankNodeInfo.get(R),E=y.quads;for(const j of E){const I={subject:null,predicate:j.predicate,object:null,graph:null};I.subject=T.modifyFirstDegreeComponent(R,j.subject,"subject"),I.object=T.modifyFirstDegreeComponent(R,j.object,"object"),I.graph=T.modifyFirstDegreeComponent(R,j.graph,"graph"),v.push(W.serializeQuad(I))}v.sort();const D=new L(T.hashAlgorithm);for(const j of v)D.update(j);return y.hash=yield D.digest(),y.hash})()}hashRelatedBlankNode(R,T,v,y){var E=this;return gt(function*(){let D;D=E.canonicalIssuer.hasId(R)?E.canonicalIssuer.getId(R):v.hasId(R)?v.getId(R):E.blankNodeInfo.get(R).hash;const j=new L(E.hashAlgorithm);return j.update(y),"g"!==y&&j.update(E.getRelatedPredicate(T)),j.update(D),j.digest()})()}hashNDegreeQuads(R,T){var v=this;return gt(function*(){const y=new L(v.hashAlgorithm),E=yield v.createHashToRelated(R,T),D=[...E.keys()].sort();for(const j of D){y.update(j);let $,I="";const K=new re(E.get(j));let M=0;for(;K.hasNext();){const F=K.next();++M%3==0&&(yield v._yield());let Q=T.clone(),S="";const U=[];let ie=!1;for(const ue of F)if(v.canonicalIssuer.hasId(ue)?S+=v.canonicalIssuer.getId(ue):(Q.hasId(ue)||U.push(ue),S+=Q.getId(ue)),0!==I.length&&S>I){ie=!0;break}if(!ie){for(const ue of U){const ee=yield v.hashNDegreeQuads(ue,Q);if(S+=Q.getId(ue),S+=`<${ee.hash}>`,Q=ee.issuer,0!==I.length&&S>I){ie=!0;break}}ie||(0===I.length||S<I)&&(I=S,$=Q)}}y.update(I),T=$}return{hash:yield y.digest(),issuer:T}})()}modifyFirstDegreeComponent(R,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===R?"_:a":"_:z"}}getRelatedPredicate(R){return`<${R.predicate.value}>`}createHashToRelated(R,T){var v=this;return gt(function*(){const y=new Map,E=v.blankNodeInfo.get(R).quads;let D=0;for(const j of E)++D%100==0&&(yield v._yield()),yield Promise.all([v._addRelatedBlankNodeHash({quad:j,component:j.subject,position:"s",id:R,issuer:T,hashToRelated:y}),v._addRelatedBlankNodeHash({quad:j,component:j.object,position:"o",id:R,issuer:T,hashToRelated:y}),v._addRelatedBlankNodeHash({quad:j,component:j.graph,position:"g",id:R,issuer:T,hashToRelated:y})]);return y})()}_hashAndTrackBlankNode({id:R,hashToBlankNodes:T}){var v=this;return gt(function*(){const y=yield v.hashFirstDegreeQuads(R),E=T.get(y);E?E.push(R):T.set(y,[R])})()}_addBlankNodeQuadInfo({quad:R,component:T}){if("BlankNode"!==T.termType)return;const v=T.value,y=this.blankNodeInfo.get(v);y?y.quads.add(R):this.blankNodeInfo.set(v,{quads:new Set([R]),hash:null})}_addRelatedBlankNodeHash({quad:R,component:T,position:v,id:y,issuer:E,hashToRelated:D}){var j=this;return gt(function*(){if("BlankNode"!==T.termType||T.value===y)return;const I=T.value,$=yield j.hashRelatedBlankNode(I,R,E,v),K=D.get($);K?K.push(I):D.set($,[I])})()}_useCanonicalId({component:R}){return"BlankNode"!==R.termType||R.value.startsWith(this.canonicalIssuer.prefix)?R:{termType:"BlankNode",value:this.canonicalIssuer.getId(R.value)}}_yield(){return gt(function*(){return new Promise(R=>q(R))})()}}}).call(this)}).call(this,Y("timers").setImmediate)},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50,timers:89}],52:[function(Y,Ae,fe){"use strict";const q=Y("./IdentifierIssuer"),V=Y("./MessageDigest"),L=Y("./Permuter"),re=Y("./NQuads");function W(w,x){return w.hash<x.hash?-1:w.hash>x.hash?1:0}Ae.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new q("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(x){this.quads=x;for(const D of x)this._addBlankNodeQuadInfo({quad:D,component:D.subject}),this._addBlankNodeQuadInfo({quad:D,component:D.object}),this._addBlankNodeQuadInfo({quad:D,component:D.graph});const R=new Map,T=[...this.blankNodeInfo.keys()];for(const D of T)this._hashAndTrackBlankNode({id:D,hashToBlankNodes:R});const v=[...R.keys()].sort(),y=[];for(const D of v){const j=R.get(D);j.length>1?y.push(j):this.canonicalIssuer.getId(j[0])}for(const D of y){const j=[];for(const I of D){if(this.canonicalIssuer.hasId(I))continue;const $=new q("_:b");$.getId(I);const K=this.hashNDegreeQuads(I,$);j.push(K)}j.sort(W);for(const I of j){const $=I.issuer.getOldIds();for(const K of $)this.canonicalIssuer.getId(K)}}const E=[];for(const D of this.quads){const j=ht({},D);j.subject=this._useCanonicalId({component:j.subject}),j.object=this._useCanonicalId({component:j.object}),j.graph=this._useCanonicalId({component:j.graph}),E.push(re.serializeQuad(j))}return E.sort(),E.join("")}hashFirstDegreeQuads(x){const R=[],T=this.blankNodeInfo.get(x),v=T.quads;for(const E of v){const D={subject:null,predicate:E.predicate,object:null,graph:null};D.subject=this.modifyFirstDegreeComponent(x,E.subject,"subject"),D.object=this.modifyFirstDegreeComponent(x,E.object,"object"),D.graph=this.modifyFirstDegreeComponent(x,E.graph,"graph"),R.push(re.serializeQuad(D))}R.sort();const y=new V(this.hashAlgorithm);for(const E of R)y.update(E);return T.hash=y.digest(),T.hash}hashRelatedBlankNode(x,R,T,v){let y;y=this.canonicalIssuer.hasId(x)?this.canonicalIssuer.getId(x):T.hasId(x)?T.getId(x):this.blankNodeInfo.get(x).hash;const E=new V(this.hashAlgorithm);return E.update(v),"g"!==v&&E.update(this.getRelatedPredicate(R)),E.update(y),E.digest()}hashNDegreeQuads(x,R){const T=new V(this.hashAlgorithm),v=this.createHashToRelated(x,R),y=[...v.keys()].sort();for(const E of y){T.update(E);let j,D="";const I=new L(v.get(E));for(;I.hasNext();){const $=I.next();let K=R.clone(),M="";const F=[];let Q=!1;for(const S of $)if(this.canonicalIssuer.hasId(S)?M+=this.canonicalIssuer.getId(S):(K.hasId(S)||F.push(S),M+=K.getId(S)),0!==D.length&&M>D){Q=!0;break}if(!Q){for(const S of F){const U=this.hashNDegreeQuads(S,K);if(M+=K.getId(S),M+=`<${U.hash}>`,K=U.issuer,0!==D.length&&M>D){Q=!0;break}}Q||(0===D.length||M<D)&&(D=M,j=K)}}T.update(D),R=j}return{hash:T.digest(),issuer:R}}modifyFirstDegreeComponent(x,R){return"BlankNode"!==R.termType?R:{termType:"BlankNode",value:R.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return`<${x.predicate.value}>`}createHashToRelated(x,R){const T=new Map,v=this.blankNodeInfo.get(x).quads;for(const y of v)this._addRelatedBlankNodeHash({quad:y,component:y.subject,position:"s",id:x,issuer:R,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:y,component:y.object,position:"o",id:x,issuer:R,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:y,component:y.graph,position:"g",id:x,issuer:R,hashToRelated:T});return T}_hashAndTrackBlankNode({id:x,hashToBlankNodes:R}){const T=this.hashFirstDegreeQuads(x),v=R.get(T);v?v.push(x):R.set(T,[x])}_addBlankNodeQuadInfo({quad:x,component:R}){if("BlankNode"!==R.termType)return;const T=R.value,v=this.blankNodeInfo.get(T);v?v.quads.add(x):this.blankNodeInfo.set(T,{quads:new Set([x]),hash:null})}_addRelatedBlankNodeHash({quad:x,component:R,position:T,id:v,issuer:y,hashToRelated:E}){if("BlankNode"!==R.termType||R.value===v)return;const D=R.value,j=this.hashRelatedBlankNode(D,x,y,T),I=E.get(j);I?I.push(D):E.set(j,[D])}_useCanonicalId({component:x}){return"BlankNode"!==x.termType||x.value.startsWith(this.canonicalIssuer.prefix)?x:{termType:"BlankNode",value:this.canonicalIssuer.getId(x.value)}}}},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50}],53:[function(Y,Ae,fe){"use strict";const q=Y("./URDNA2015");Ae.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(L,re,W){return"BlankNode"!==re.termType?re:"graph"===W?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:re.value===L?"_:a":"_:z"}}getRelatedPredicate(L){return L.predicate.value}createHashToRelated(L,re){var W=this;return gt(function*(){const w=new Map,x=W.blankNodeInfo.get(L).quads;let R=0;for(const T of x){let v,y;if("BlankNode"===T.subject.termType&&T.subject.value!==L)y=T.subject.value,v="p";else{if("BlankNode"!==T.object.termType||T.object.value===L)continue;y=T.object.value,v="r"}++R%100==0&&(yield W._yield());const E=yield W.hashRelatedBlankNode(y,T,re,v),D=w.get(E);D?D.push(y):w.set(E,[y])}return w})()}}},{"./URDNA2015":51}],54:[function(Y,Ae,fe){"use strict";const q=Y("./URDNA2015Sync");Ae.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(L,re,W){return"BlankNode"!==re.termType?re:"graph"===W?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:re.value===L?"_:a":"_:z"}}getRelatedPredicate(L){return L.predicate.value}createHashToRelated(L,re){const W=new Map,w=this.blankNodeInfo.get(L).quads;for(const x of w){let R,T;if("BlankNode"===x.subject.termType&&x.subject.value!==L)T=x.subject.value,R="p";else{if("BlankNode"!==x.object.termType||x.object.value===L)continue;T=x.object.value,R="r"}const v=this.hashRelatedBlankNode(T,x,re,R),y=W.get(v);y?y.push(T):W.set(v,[T])}return W}}},{"./URDNA2015Sync":52}],55:[function(Y,Ae,fe){"use strict";const q=Y("./URDNA2015"),V=Y("./URGNA2012"),L=Y("./URDNA2015Sync"),re=Y("./URGNA2012Sync");let W;try{W=Y("rdf-canonize-native")}catch(x){}const w={};Ae.exports=w,w.NQuads=Y("./NQuads"),w.IdentifierIssuer=Y("./IdentifierIssuer"),w._rdfCanonizeNative=function(x){return x&&(W=x),W},w.canonize=function(){var x=gt(function*(R,T){if(Array.isArray(R)||(R=w.NQuads.legacyDatasetToQuads(R)),T.useNative){if(!W)throw new Error("rdf-canonize-native not available");return new Promise((v,y)=>W.canonize(R,T,(E,D)=>E?y(E):v(D)))}if("URDNA2015"===T.algorithm)return new q(T).main(R);if("URGNA2012"===T.algorithm)return new V(T).main(R);throw"algorithm"in T?new Error("Invalid RDF Dataset Canonicalization algorithm: "+T.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(R,T){return x.apply(this,arguments)}}(),w._canonizeSync=function(x,R){if(Array.isArray(x)||(x=w.NQuads.legacyDatasetToQuads(x)),R.useNative){if(W)return W.canonizeSync(x,R);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===R.algorithm)return new L(R).main(x);if("URGNA2012"===R.algorithm)return new re(R).main(x);throw"algorithm"in R?new Error("Invalid RDF Dataset Canonicalization algorithm: "+R.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":47,"./NQuads":49,"./URDNA2015":51,"./URDNA2015Sync":52,"./URGNA2012":53,"./URGNA2012Sync":54,"rdf-canonize-native":3}],56:[function(Y,Ae,fe){"use strict";var q=this&&this.__createBinding||(Object.create?function(L,re,W,w){void 0===w&&(w=W),Object.defineProperty(L,w,{enumerable:!0,get:function(){return re[W]}})}:function(L,re,W,w){void 0===w&&(w=W),L[w]=re[W]}),V=this&&this.__exportStar||function(L,re){for(var W in L)"default"!==W&&!Object.prototype.hasOwnProperty.call(re,W)&&q(re,L,W)};Object.defineProperty(fe,"__esModule",{value:!0}),V(Y("./lib/BlankNode"),fe),V(Y("./lib/DataFactory"),fe),V(Y("./lib/DefaultGraph"),fe),V(Y("./lib/Literal"),fe),V(Y("./lib/NamedNode"),fe),V(Y("./lib/Quad"),fe),V(Y("./lib/Variable"),fe)},{"./lib/BlankNode":57,"./lib/DataFactory":58,"./lib/DefaultGraph":59,"./lib/Literal":60,"./lib/NamedNode":61,"./lib/Quad":62,"./lib/Variable":63}],57:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.BlankNode=void 0;fe.BlankNode=class{constructor(L){this.termType="BlankNode",this.value=L}equals(L){return!!L&&"BlankNode"===L.termType&&L.value===this.value}}},{}],58:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.DataFactory=void 0;const q=Y("./BlankNode"),V=Y("./DefaultGraph"),L=Y("./Literal"),re=Y("./NamedNode"),W=Y("./Quad"),w=Y("./Variable");let x=0;fe.DataFactory=class{constructor(v){this.blankNodeCounter=0,this.blankNodePrefix=(v=v||{}).blankNodePrefix||`df_${x++}_`}namedNode(v){return new re.NamedNode(v)}blankNode(v){return new q.BlankNode(v||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(v,y){return new L.Literal(v,y)}variable(v){return new w.Variable(v)}defaultGraph(){return V.DefaultGraph.INSTANCE}quad(v,y,E,D){return new W.Quad(v,y,E,D||this.defaultGraph())}fromTerm(v){switch(v.termType){case"NamedNode":return this.namedNode(v.value);case"BlankNode":return this.blankNode(v.value);case"Literal":return v.language?this.literal(v.value,v.language):v.datatype.equals(L.Literal.XSD_STRING)?this.literal(v.value):this.literal(v.value,this.fromTerm(v.datatype));case"Variable":return this.variable(v.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(v.subject),this.fromTerm(v.predicate),this.fromTerm(v.object),this.fromTerm(v.graph))}}fromQuad(v){return this.fromTerm(v)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},{"./BlankNode":57,"./DefaultGraph":59,"./Literal":60,"./NamedNode":61,"./Quad":62,"./Variable":63}],59:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.DefaultGraph=void 0;class q{constructor(){this.termType="DefaultGraph",this.value=""}equals(L){return!!L&&"DefaultGraph"===L.termType}}fe.DefaultGraph=q,q.INSTANCE=new q},{}],60:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Literal=void 0;const q=Y("./NamedNode");class V{constructor(re,W){this.termType="Literal",this.value=re,"string"==typeof W?(this.language=W,this.datatype=V.RDF_LANGUAGE_STRING):W?(this.language="",this.datatype=W):(this.language="",this.datatype=V.XSD_STRING)}equals(re){return!!re&&"Literal"===re.termType&&re.value===this.value&&re.language===this.language&&re.datatype.equals(this.datatype)}}fe.Literal=V,V.RDF_LANGUAGE_STRING=new q.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),V.XSD_STRING=new q.NamedNode("http://www.w3.org/2001/XMLSchema#string")},{"./NamedNode":61}],61:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.NamedNode=void 0;fe.NamedNode=class{constructor(L){this.termType="NamedNode",this.value=L}equals(L){return!!L&&"NamedNode"===L.termType&&L.value===this.value}}},{}],62:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Quad=void 0;fe.Quad=class{constructor(L,re,W,w){this.termType="Quad",this.value="",this.subject=L,this.predicate=re,this.object=W,this.graph=w}equals(L){return!!L&&("Quad"===L.termType||!L.termType)&&this.subject.equals(L.subject)&&this.predicate.equals(L.predicate)&&this.object.equals(L.object)&&this.graph.equals(L.graph)}}},{}],63:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Variable=void 0;fe.Variable=class{constructor(L){this.termType="Variable",this.value=L}equals(L){return!!L&&"Variable"===L.termType&&L.value===this.value}}},{}],64:[function(Y,Ae,fe){"use strict";var q=this&&this.__createBinding||(Object.create?function(L,re,W,w){void 0===w&&(w=W),Object.defineProperty(L,w,{enumerable:!0,get:function(){return re[W]}})}:function(L,re,W,w){void 0===w&&(w=W),L[w]=re[W]}),V=this&&this.__exportStar||function(L,re){for(var W in L)"default"!==W&&!Object.prototype.hasOwnProperty.call(re,W)&&q(re,L,W)};Object.defineProperty(fe,"__esModule",{value:!0}),V(Y("./lib/RdfXmlParser"),fe)},{"./lib/RdfXmlParser":66}],65:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.ParseError=void 0;class q extends Error{constructor(L,re){const W=L.saxStream._parser;super(L.trackPosition?`Line ${W.line+1} column ${W.column+1}: ${re}`:re)}}fe.ParseError=q},{}],66:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.ParseType=fe.RdfXmlParser=void 0;const q=Y("relative-to-absolute-iri"),V=Y("sax"),L=Y("stream"),re=Y("./ParseError"),W=Y("rdf-data-factory");class w extends L.Transform{constructor(T){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},T&&(Object.assign(this,T),this.options=T),this.dataFactory||(this.dataFactory=new W.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=V.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(T,v){const y={};let E=!1;for(const j in T.attributes)j.startsWith("xmlns")&&(5===j.length?(E=!0,y[""]=T.attributes[j]):":"===j.charAt(5)&&(E=!0,y[j.substr(6)]=T.attributes[j]));const D=v&&v.ns?v.ns:[w.DEFAULT_NS];return E?D.concat([y]):D}static expandPrefixedTerm(T,v,y){const E=T.indexOf(":");let D,j;E>=0?(D=T.substr(0,E),j=T.substr(E+1)):(D="",j=T);let I=null,$=null;for(let K=v.length-1;K>=0;K--){const M=v[K][D];if(M){I=M;break}$||($=v[K][""])}if(!I){if(D&&"xmlns"!==D)throw new re.ParseError(y,`The prefix '${D}' in term '${T}' was not bound.`);I=$||""}return{prefix:D,local:j,uri:I}}static isValidIri(T){return w.IRI_REGEX.test(T)}import(T){const v=new L.PassThrough({readableObjectMode:!0});T.on("error",E=>y.emit("error",E)),T.on("data",E=>v.push(E)),T.on("end",()=>v.push(null));const y=v.pipe(new w(this.options));return y}_transform(T,v,y){try{this.saxStream.write(T,v)}catch(E){return y(E)}y()}newParseError(T){return new re.ParseError(this,T)}valueToUri(T,v){return this.uriToNamedNode(q.resolve(T,v.baseIRI))}uriToNamedNode(T){if(!w.isValidIri(T))throw this.newParseError(`Invalid URI: ${T}`);return this.dataFactory.namedNode(T)}validateNcname(T){if(!w.NCNAME_MATCHER.test(T))throw this.newParseError(`Not a valid NCName: ${T}`)}attachSaxListeners(){this.saxStream.on("error",T=>this.emit("error",T)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(T){const v=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let y=x.RESOURCE;if(v&&(v.hadChildren=!0,y=v.childrenParseType),v&&v.childrenStringTags){const D=T.name;let j="";for(const M in T.attributes)j+=` ${M}="${T.attributes[M]}"`;v.childrenStringTags.push(`<${D}${j}>`);const K={childrenStringTags:v.childrenStringTags};return K.childrenStringEmitClosingTag=`</${D}>`,void this.activeTagStack.push(K)}const E={};v?(E.language=v.language,E.baseIRI=v.baseIRI):E.baseIRI=this.baseIRI,this.activeTagStack.push(E),E.ns=w.parseNamespace(T,v),y===x.RESOURCE?this.onTagResource(T,E,v,!v):this.onTagProperty(T,E,v)}onTagResource(T,v,y,E){const D=w.expandPrefixedTerm(T.name,v.ns,this);v.childrenParseType=x.PROPERTY;let j=!0;if(D.uri===w.RDF){if(!E&&w.FORBIDDEN_NODE_ELEMENTS.indexOf(D.local)>=0)throw this.newParseError(`Illegal node element name: ${D.local}`);switch(D.local){case"RDF":v.childrenParseType=x.RESOURCE;case"Description":j=!1}}const I=[],$=[];let K=null,M=!1,F=!1,Q=null;for(const S in T.attributes){const U=T.attributes[S],ie=w.expandPrefixedTerm(S,v.ns,this);if(y&&ie.uri===w.RDF)switch(ie.local){case"about":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${U} and ${K} where found.`);K=U;continue;case"ID":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${U} and ${K} where found.`);this.validateNcname(U),K="#"+U,M=!0;continue;case"nodeID":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${U} and ${K} where found.`);this.validateNcname(U),K=U,F=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":Q=U;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(ie.uri===w.XML){if("lang"===ie.local){v.language=""===U?null:U.toLowerCase();continue}if("base"===ie.local){v.baseIRI=q.resolve(U,v.baseIRI);continue}}"xml"!==ie.prefix&&ie.uri&&(I.push(this.uriToNamedNode(ie.uri+ie.local)),$.push(U))}if(null!==K&&(v.subject=F?this.dataFactory.blankNode(K):this.valueToUri(K,v),M&&this.claimNodeId(v.subject)),v.subject||(v.subject=this.dataFactory.blankNode()),j){const S=this.uriToNamedNode(D.uri+D.local);this.emitTriple(v.subject,this.dataFactory.namedNode(w.RDF+"type"),S,y?y.reifiedStatementId:null)}if(y){if(y.predicate)if(y.childrenCollectionSubject){const S=this.dataFactory.blankNode();this.emitTriple(y.childrenCollectionSubject,y.childrenCollectionPredicate,S,y.reifiedStatementId),this.emitTriple(S,this.dataFactory.namedNode(w.RDF+"first"),v.subject,v.reifiedStatementId),y.childrenCollectionSubject=S,y.childrenCollectionPredicate=this.dataFactory.namedNode(w.RDF+"rest")}else{this.emitTriple(y.subject,y.predicate,v.subject,y.reifiedStatementId);for(let S=0;S<y.predicateSubPredicates.length;S++)this.emitTriple(v.subject,y.predicateSubPredicates[S],y.predicateSubObjects[S],null);y.predicateSubPredicates=[],y.predicateSubObjects=[],y.predicateEmitted=!0}for(let S=0;S<I.length;S++){const U=this.dataFactory.literal($[S],v.datatype||v.language);this.emitTriple(v.subject,I[S],U,y.reifiedStatementId)}Q&&this.emitTriple(v.subject,this.dataFactory.namedNode(w.RDF+"type"),this.uriToNamedNode(Q),null)}}onTagProperty(T,v,y){const E=w.expandPrefixedTerm(T.name,v.ns,this);if(v.childrenParseType=x.RESOURCE,v.subject=y.subject,E.uri===w.RDF&&"li"===E.local?(y.listItemCounter||(y.listItemCounter=1),v.predicate=this.uriToNamedNode(E.uri+"_"+y.listItemCounter++)):v.predicate=this.uriToNamedNode(E.uri+E.local),E.uri===w.RDF&&w.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(E.local)>=0)throw this.newParseError(`Illegal property element name: ${E.local}`);v.predicateSubPredicates=[],v.predicateSubObjects=[];let D=!1,j=!1,I=null,$=!0;const K=[],M=[];for(const F in T.attributes){const Q=T.attributes[F],S=w.expandPrefixedTerm(F,v.ns,this);if(S.uri===w.RDF)switch(S.local){case"resource":if(I)throw this.newParseError(`Found both rdf:resource (${Q}) and rdf:nodeID (${I}).`);if(D)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${Q})`);v.hadChildren=!0,I=Q,$=!1;continue;case"datatype":if(j)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${Q}).`);if(D)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${Q})`);v.datatype=this.valueToUri(Q,v);continue;case"nodeID":if(j)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${Q}).`);if(v.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${Q}).`);if(D)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${Q})`);this.validateNcname(Q),v.hadChildren=!0,I=Q,$=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(j)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(v.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${v.datatype.value})`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${I})`);if("Resource"===Q){D=!0,v.childrenParseType=x.PROPERTY;const U=this.dataFactory.blankNode();this.emitTriple(v.subject,v.predicate,U,v.reifiedStatementId),v.subject=U,v.predicate=null}else"Collection"===Q?(D=!0,v.hadChildren=!0,v.childrenCollectionSubject=v.subject,v.childrenCollectionPredicate=v.predicate,$=!1):"Literal"===Q&&(D=!0,v.childrenTagsToString=!0,v.childrenStringTags=[]);continue;case"ID":this.validateNcname(Q),v.reifiedStatementId=this.valueToUri("#"+Q,v),this.claimNodeId(v.reifiedStatementId);continue}else if(S.uri===w.XML&&"lang"===S.local){v.language=""===Q?null:Q.toLowerCase();continue}if("xml"!==S.prefix&&"xmlns"!==S.prefix&&S.uri){if(D||v.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${Q}`);v.hadChildren=!0,j=!0,K.push(this.uriToNamedNode(S.uri+S.local)),M.push(this.dataFactory.literal(Q,v.datatype||v.language))}}if(null!==I){const F=v.subject;v.subject=$?this.dataFactory.blankNode(I):this.valueToUri(I,v),this.emitTriple(F,v.predicate,v.subject,v.reifiedStatementId);for(let Q=0;Q<K.length;Q++)this.emitTriple(v.subject,K[Q],M[Q],null);v.predicateEmitted=!0}else $&&(v.predicateSubPredicates=K,v.predicateSubObjects=M,v.predicateEmitted=!1)}emitTriple(T,v,y,E){this.push(this.dataFactory.quad(T,v,y,this.defaultGraph)),E&&(this.push(this.dataFactory.quad(E,this.dataFactory.namedNode(w.RDF+"type"),this.dataFactory.namedNode(w.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(E,this.dataFactory.namedNode(w.RDF+"subject"),T,this.defaultGraph)),this.push(this.dataFactory.quad(E,this.dataFactory.namedNode(w.RDF+"predicate"),v,this.defaultGraph)),this.push(this.dataFactory.quad(E,this.dataFactory.namedNode(w.RDF+"object"),y,this.defaultGraph)))}claimNodeId(T){if(!this.allowDuplicateRdfIds){if(this.nodeIds[T.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${T.value}'.`);this.nodeIds[T.value]=!0}}onText(T){const v=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;v&&(v.childrenStringTags?v.childrenStringTags.push(T):v.predicate&&(v.text=T))}onCloseTag(){const T=this.activeTagStack.pop();if(T.childrenStringEmitClosingTag&&T.childrenStringTags.push(T.childrenStringEmitClosingTag),T.childrenTagsToString&&(T.datatype=this.dataFactory.namedNode(w.RDF+"XMLLiteral"),T.text=T.childrenStringTags.join(""),T.hadChildren=!1),T.childrenCollectionSubject)this.emitTriple(T.childrenCollectionSubject,T.childrenCollectionPredicate,this.dataFactory.namedNode(w.RDF+"nil"),T.reifiedStatementId);else if(T.predicate)if(T.hadChildren||T.childrenParseType===x.PROPERTY){if(!T.predicateEmitted){const v=this.dataFactory.blankNode();this.emitTriple(T.subject,T.predicate,v,T.reifiedStatementId);for(let y=0;y<T.predicateSubPredicates.length;y++)this.emitTriple(v,T.predicateSubPredicates[y],T.predicateSubObjects[y],null)}}else this.emitTriple(T.subject,T.predicate,this.dataFactory.literal(T.text||"",T.datatype||T.language),T.reifiedStatementId)}onDoctype(T){T.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(v,y,E)=>(this.saxStream._parser.ENTITIES[y]=E,""))}}var x,R;fe.RdfXmlParser=w,w.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,w.MIME_TYPE="application/rdf+xml",w.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",w.XML="http://www.w3.org/XML/1998/namespace",w.XMLNS="http://www.w3.org/2000/xmlns/",w.DEFAULT_NS={xml:w.XML},w.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],w.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],w.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(R=x=fe.ParseType||(fe.ParseType={}))[R.RESOURCE=0]="RESOURCE",R[R.PROPERTY=1]="PROPERTY"},{"./ParseError":65,"rdf-data-factory":56,"relative-to-absolute-iri":82,sax:85,stream:87}],67:[function(Y,Ae,fe){"use strict";var V={};function L(R,T,v){v||(v=Error);var E=function(D){function j(I,$,K){return D.call(this,function(D,j,I){return"string"==typeof T?T:T(D,j,I)}(I,$,K))||this}return function(R,T){R.prototype=Object.create(T.prototype),R.prototype.constructor=R,R.__proto__=T}(j,D),j}(v);E.prototype.name=v.name,E.prototype.code=R,V[R]=E}function re(R,T){if(Array.isArray(R)){var v=R.length;return R=R.map(function(y){return String(y)}),v>2?"one of ".concat(T," ").concat(R.slice(0,v-1).join(", "),", or ")+R[v-1]:2===v?"one of ".concat(T," ").concat(R[0]," or ").concat(R[1]):"of ".concat(T," ").concat(R[0])}return"of ".concat(T," ").concat(String(R))}L("ERR_INVALID_OPT_VALUE",function(R,T){return'The value "'+T+'" is invalid for option "'+R+'"'},TypeError),L("ERR_INVALID_ARG_TYPE",function(R,T,v){var y,E;if("string"==typeof T&&function(R,T,v){return R.substr(!v||v<0?0:+v,T.length)===T}(T,"not ")?(y="must not be",T=T.replace(/^not /,"")):y="must be",function(R,T,v){return(void 0===v||v>R.length)&&(v=R.length),R.substring(v-T.length,v)===T}(R," argument"))E="The ".concat(R," ").concat(y," ").concat(re(T,"type"));else{var D=function(R,T,v){return"number"!=typeof v&&(v=0),!(v+T.length>R.length)&&-1!==R.indexOf(T,v)}(R,".")?"property":"argument";E='The "'.concat(R,'" ').concat(D," ").concat(y," ").concat(re(T,"type"))}return E+". Received type ".concat(typeof v)},TypeError),L("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),L("ERR_METHOD_NOT_IMPLEMENTED",function(R){return"The "+R+" method is not implemented"}),L("ERR_STREAM_PREMATURE_CLOSE","Premature close"),L("ERR_STREAM_DESTROYED",function(R){return"Cannot call "+R+" after a stream was destroyed"}),L("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),L("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),L("ERR_STREAM_WRITE_AFTER_END","write after end"),L("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),L("ERR_UNKNOWN_ENCODING",function(R){return"Unknown encoding: "+R},TypeError),L("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ae.exports.codes=V},{}],68:[function(Y,Ae,fe){(function(q){(function(){"use strict";var V=Object.keys||function(y){var E=[];for(var D in y)E.push(D);return E};Ae.exports=R;var L=Y("./_stream_readable"),re=Y("./_stream_writable");Y("inherits")(R,L);for(var W=V(re.prototype),w=0;w<W.length;w++){var x=W[w];R.prototype[x]||(R.prototype[x]=re.prototype[x])}function R(y){if(!(this instanceof R))return new R(y);L.call(this,y),re.call(this,y),this.allowHalfOpen=!0,y&&(!1===y.readable&&(this.readable=!1),!1===y.writable&&(this.writable=!1),!1===y.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||q.nextTick(v,this)}function v(y){y.end()}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(E){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=E,this._writableState.destroyed=E)}})}).call(this)}).call(this,Y("_process"))},{"./_stream_readable":70,"./_stream_writable":72,_process:44,inherits:10}],69:[function(Y,Ae,fe){"use strict";Ae.exports=V;var q=Y("./_stream_transform");function V(L){if(!(this instanceof V))return new V(L);q.call(this,L)}Y("inherits")(V,q),V.prototype._transform=function(L,re,W){W(null,L)}},{"./_stream_transform":71,inherits:10}],70:[function(Y,Ae,fe){(function(q,V){(function(){"use strict";var L;Ae.exports=te,te.ReadableState=me,Y("events");var W=function(B,O){return B.listeners(O).length},w=Y("./internal/streams/stream"),x=Y("buffer").Buffer,R=V.Uint8Array||function(){};var E,y=Y("util");E=y&&y.debuglog?y.debuglog("stream"):function(){};var U,ie,ue,D=Y("./internal/streams/buffer_list"),j=Y("./internal/streams/destroy"),$=Y("./internal/streams/state").getHighWaterMark,K=Y("../errors").codes,M=K.ERR_INVALID_ARG_TYPE,F=K.ERR_STREAM_PUSH_AFTER_EOF,Q=K.ERR_METHOD_NOT_IMPLEMENTED,S=K.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Y("inherits")(te,w);var ee=j.errorOrDestroy,se=["error","close","destroy","pause","resume"];function me(ge,B,O){L=L||Y("./_stream_duplex"),"boolean"!=typeof O&&(O=B instanceof L),this.objectMode=!!(ge=ge||{}).objectMode,O&&(this.objectMode=this.objectMode||!!ge.readableObjectMode),this.highWaterMark=$(this,ge,"readableHighWaterMark",O),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ge.emitClose,this.autoDestroy=!!ge.autoDestroy,this.destroyed=!1,this.defaultEncoding=ge.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ge.encoding&&(U||(U=Y("string_decoder/").StringDecoder),this.decoder=new U(ge.encoding),this.encoding=ge.encoding)}function te(ge){if(L=L||Y("./_stream_duplex"),!(this instanceof te))return new te(ge);this._readableState=new me(ge,this,this instanceof L),this.readable=!0,ge&&("function"==typeof ge.read&&(this._read=ge.read),"function"==typeof ge.destroy&&(this._destroy=ge.destroy)),w.call(this)}function ye(ge,B,O,k,Ne){E("readableAddChunk",B);var yt,Xe=ge._readableState;if(null===B)Xe.reading=!1,function(ge,B){if(E("onEofChunk"),!B.ended){if(B.decoder){var O=B.decoder.end();O&&O.length&&(B.buffer.push(O),B.length+=B.objectMode?1:O.length)}B.ended=!0,B.sync?Ve(ge):(B.needReadable=!1,B.emittedReadable||(B.emittedReadable=!0,ke(ge)))}}(ge,Xe);else if(Ne||(yt=function(ge,B){var O;return!function(ge){return x.isBuffer(ge)||ge instanceof R}(B)&&"string"!=typeof B&&void 0!==B&&!ge.objectMode&&(O=new M("chunk",["string","Buffer","Uint8Array"],B)),O}(Xe,B)),yt)ee(ge,yt);else if(Xe.objectMode||B&&B.length>0)if("string"!=typeof B&&!Xe.objectMode&&Object.getPrototypeOf(B)!==x.prototype&&(B=function(ge){return x.from(ge)}(B)),k)Xe.endEmitted?ee(ge,new S):Oe(ge,Xe,B,!0);else if(Xe.ended)ee(ge,new F);else{if(Xe.destroyed)return!1;Xe.reading=!1,Xe.decoder&&!O?(B=Xe.decoder.write(B),Xe.objectMode||0!==B.length?Oe(ge,Xe,B,!1):Ee(ge,Xe)):Oe(ge,Xe,B,!1)}else k||(Xe.reading=!1,Ee(ge,Xe));return!Xe.ended&&(Xe.length<Xe.highWaterMark||0===Xe.length)}function Oe(ge,B,O,k){B.flowing&&0===B.length&&!B.sync?(B.awaitDrain=0,ge.emit("data",O)):(B.length+=B.objectMode?1:O.length,k?B.buffer.unshift(O):B.buffer.push(O),B.needReadable&&Ve(ge)),Ee(ge,B)}Object.defineProperty(te.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(B){!this._readableState||(this._readableState.destroyed=B)}}),te.prototype.destroy=j.destroy,te.prototype._undestroy=j.undestroy,te.prototype._destroy=function(ge,B){B(ge)},te.prototype.push=function(ge,B){var k,O=this._readableState;return O.objectMode?k=!0:"string"==typeof ge&&((B=B||O.defaultEncoding)!==O.encoding&&(ge=x.from(ge,B),B=""),k=!0),ye(this,ge,B,!1,k)},te.prototype.unshift=function(ge){return ye(this,ge,null,!0,!1)},te.prototype.isPaused=function(){return!1===this._readableState.flowing},te.prototype.setEncoding=function(ge){U||(U=Y("string_decoder/").StringDecoder);var B=new U(ge);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var O=this._readableState.buffer.head,k="";null!==O;)k+=B.write(O.data),O=O.next;return this._readableState.buffer.clear(),""!==k&&this._readableState.buffer.push(k),this._readableState.length=k.length,this};var nt=1073741824;function Je(ge,B){return ge<=0||0===B.length&&B.ended?0:B.objectMode?1:ge!=ge?B.flowing&&B.length?B.buffer.head.data.length:B.length:(ge>B.highWaterMark&&(B.highWaterMark=function(ge){return ge>=nt?ge=nt:(ge--,ge|=ge>>>1,ge|=ge>>>2,ge|=ge>>>4,ge|=ge>>>8,ge|=ge>>>16,ge++),ge}(ge)),ge<=B.length?ge:B.ended?B.length:(B.needReadable=!0,0))}function Ve(ge){var B=ge._readableState;E("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(E("emitReadable",B.flowing),B.emittedReadable=!0,q.nextTick(ke,ge))}function ke(ge){var B=ge._readableState;E("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&(B.length||B.ended)&&(ge.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,be(ge)}function Ee(ge,B){B.readingMore||(B.readingMore=!0,q.nextTick(Re,ge,B))}function Re(ge,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&0===B.length);){var O=B.length;if(E("maybeReadMore read 0"),ge.read(0),O===B.length)break}B.readingMore=!1}function qe(ge){var B=ge._readableState;B.readableListening=ge.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:ge.listenerCount("data")>0&&ge.resume()}function je(ge){E("readable nexttick read 0"),ge.read(0)}function X(ge,B){E("resume",B.reading),B.reading||ge.read(0),B.resumeScheduled=!1,ge.emit("resume"),be(ge),B.flowing&&!B.reading&&ge.read(0)}function be(ge){var B=ge._readableState;for(E("flow",B.flowing);B.flowing&&null!==ge.read(););}function ce(ge,B){return 0===B.length?null:(B.objectMode?O=B.buffer.shift():!ge||ge>=B.length?(O=B.decoder?B.buffer.join(""):1===B.buffer.length?B.buffer.first():B.buffer.concat(B.length),B.buffer.clear()):O=B.buffer.consume(ge,B.decoder),O);var O}function Pe(ge){var B=ge._readableState;E("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,q.nextTick(Et,B,ge))}function Et(ge,B){if(E("endReadableNT",ge.endEmitted,ge.length),!ge.endEmitted&&0===ge.length&&(ge.endEmitted=!0,B.readable=!1,B.emit("end"),ge.autoDestroy)){var O=B._writableState;(!O||O.autoDestroy&&O.finished)&&B.destroy()}}function pt(ge,B){for(var O=0,k=ge.length;O<k;O++)if(ge[O]===B)return O;return-1}te.prototype.read=function(ge){E("read",ge),ge=parseInt(ge,10);var B=this._readableState,O=ge;if(0!==ge&&(B.emittedReadable=!1),0===ge&&B.needReadable&&((0!==B.highWaterMark?B.length>=B.highWaterMark:B.length>0)||B.ended))return E("read: emitReadable",B.length,B.ended),0===B.length&&B.ended?Pe(this):Ve(this),null;if(0===(ge=Je(ge,B))&&B.ended)return 0===B.length&&Pe(this),null;var Ne,k=B.needReadable;return E("need readable",k),(0===B.length||B.length-ge<B.highWaterMark)&&E("length less than watermark",k=!0),B.ended||B.reading?E("reading or ended",k=!1):k&&(E("do read"),B.reading=!0,B.sync=!0,0===B.length&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(ge=Je(O,B))),null===(Ne=ge>0?ce(ge,B):null)?(B.needReadable=B.length<=B.highWaterMark,ge=0):(B.length-=ge,B.awaitDrain=0),0===B.length&&(B.ended||(B.needReadable=!0),O!==ge&&B.ended&&Pe(this)),null!==Ne&&this.emit("data",Ne),Ne},te.prototype._read=function(ge){ee(this,new Q("_read()"))},te.prototype.pipe=function(ge,B){var O=this,k=this._readableState;switch(k.pipesCount){case 0:k.pipes=ge;break;case 1:k.pipes=[k.pipes,ge];break;default:k.pipes.push(ge)}k.pipesCount+=1,E("pipe count=%d opts=%j",k.pipesCount,B);var Xe=B&&!1===B.end||ge===q.stdout||ge===q.stderr?cs:It;function yt(Ps,zr){E("onunpipe"),Ps===O&&zr&&!1===zr.hasUnpiped&&(zr.hasUnpiped=!0,E("cleanup"),ge.removeListener("close",Ur),ge.removeListener("finish",Ns),ge.removeListener("drain",Tn),ge.removeListener("error",di),ge.removeListener("unpipe",yt),O.removeListener("end",It),O.removeListener("end",cs),O.removeListener("data",bi),Rn=!0,k.awaitDrain&&(!ge._writableState||ge._writableState.needDrain)&&Tn())}function It(){E("onend"),ge.end()}k.endEmitted?q.nextTick(Xe):O.once("end",Xe),ge.on("unpipe",yt);var Tn=function(ge){return function(){var O=ge._readableState;E("pipeOnDrain",O.awaitDrain),O.awaitDrain&&O.awaitDrain--,0===O.awaitDrain&&W(ge,"data")&&(O.flowing=!0,be(ge))}}(O);ge.on("drain",Tn);var Rn=!1;function bi(Ps){E("ondata");var zr=ge.write(Ps);E("dest.write",zr),!1===zr&&((1===k.pipesCount&&k.pipes===ge||k.pipesCount>1&&-1!==pt(k.pipes,ge))&&!Rn&&(E("false write response, pause",k.awaitDrain),k.awaitDrain++),O.pause())}function di(Ps){E("onerror",Ps),cs(),ge.removeListener("error",di),0===W(ge,"error")&&ee(ge,Ps)}function Ur(){ge.removeListener("finish",Ns),cs()}function Ns(){E("onfinish"),ge.removeListener("close",Ur),cs()}function cs(){E("unpipe"),O.unpipe(ge)}return O.on("data",bi),function(ge,B,O){if("function"==typeof ge.prependListener)return ge.prependListener(B,O);ge._events&&ge._events[B]?Array.isArray(ge._events[B])?ge._events[B].unshift(O):ge._events[B]=[O,ge._events[B]]:ge.on(B,O)}(ge,"error",di),ge.once("close",Ur),ge.once("finish",Ns),ge.emit("pipe",O),k.flowing||(E("pipe resume"),O.resume()),ge},te.prototype.unpipe=function(ge){var B=this._readableState,O={hasUnpiped:!1};if(0===B.pipesCount)return this;if(1===B.pipesCount)return ge&&ge!==B.pipes||(ge||(ge=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,ge&&ge.emit("unpipe",this,O)),this;if(!ge){var k=B.pipes,Ne=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var Xe=0;Xe<Ne;Xe++)k[Xe].emit("unpipe",this,{hasUnpiped:!1});return this}var yt=pt(B.pipes,ge);return-1===yt||(B.pipes.splice(yt,1),B.pipesCount-=1,1===B.pipesCount&&(B.pipes=B.pipes[0]),ge.emit("unpipe",this,O)),this},te.prototype.addListener=te.prototype.on=function(ge,B){var O=w.prototype.on.call(this,ge,B),k=this._readableState;return"data"===ge?(k.readableListening=this.listenerCount("readable")>0,!1!==k.flowing&&this.resume()):"readable"===ge&&!k.endEmitted&&!k.readableListening&&(k.readableListening=k.needReadable=!0,k.flowing=!1,k.emittedReadable=!1,E("on readable",k.length,k.reading),k.length?Ve(this):k.reading||q.nextTick(je,this)),O},te.prototype.removeListener=function(ge,B){var O=w.prototype.removeListener.call(this,ge,B);return"readable"===ge&&q.nextTick(qe,this),O},te.prototype.removeAllListeners=function(ge){var B=w.prototype.removeAllListeners.apply(this,arguments);return("readable"===ge||void 0===ge)&&q.nextTick(qe,this),B},te.prototype.resume=function(){var ge=this._readableState;return ge.flowing||(E("resume"),ge.flowing=!ge.readableListening,function(ge,B){B.resumeScheduled||(B.resumeScheduled=!0,q.nextTick(X,ge,B))}(this,ge)),ge.paused=!1,this},te.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},te.prototype.wrap=function(ge){var B=this,O=this._readableState,k=!1;for(var Ne in ge.on("end",function(){if(E("wrapped end"),O.decoder&&!O.ended){var yt=O.decoder.end();yt&&yt.length&&B.push(yt)}B.push(null)}),ge.on("data",function(yt){E("wrapped data"),O.decoder&&(yt=O.decoder.write(yt)),O.objectMode&&null==yt||!(O.objectMode||yt&&yt.length)||B.push(yt)||(k=!0,ge.pause())}),ge)void 0===this[Ne]&&"function"==typeof ge[Ne]&&(this[Ne]=function(It){return function(){return ge[It].apply(ge,arguments)}}(Ne));for(var Xe=0;Xe<se.length;Xe++)ge.on(se[Xe],this.emit.bind(this,se[Xe]));return this._read=function(yt){E("wrapped _read",yt),k&&(k=!1,ge.resume())},this},"function"==typeof Symbol&&(te.prototype[Symbol.asyncIterator]=function(){return void 0===ie&&(ie=Y("./internal/streams/async_iterator")),ie(this)}),Object.defineProperty(te.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(te.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(te.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}}),te._fromList=ce,Object.defineProperty(te.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(te.from=function(ge,B){return void 0===ue&&(ue=Y("./internal/streams/from")),ue(te,ge,B)})}).call(this)}).call(this,Y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/async_iterator":73,"./internal/streams/buffer_list":74,"./internal/streams/destroy":75,"./internal/streams/from":77,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,events:8,inherits:10,"string_decoder/":88,util:3}],71:[function(Y,Ae,fe){"use strict";Ae.exports=R;var q=Y("../errors").codes,V=q.ERR_METHOD_NOT_IMPLEMENTED,L=q.ERR_MULTIPLE_CALLBACK,re=q.ERR_TRANSFORM_ALREADY_TRANSFORMING,W=q.ERR_TRANSFORM_WITH_LENGTH_0,w=Y("./_stream_duplex");function x(y,E){var D=this._transformState;D.transforming=!1;var j=D.writecb;if(null===j)return this.emit("error",new L);D.writechunk=null,D.writecb=null,null!=E&&this.push(E),j(y);var I=this._readableState;I.reading=!1,(I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}function R(y){if(!(this instanceof R))return new R(y);w.call(this,y),this._transformState={afterTransform:x.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&("function"==typeof y.transform&&(this._transform=y.transform),"function"==typeof y.flush&&(this._flush=y.flush)),this.on("prefinish",T)}function T(){var y=this;"function"!=typeof this._flush||this._readableState.destroyed?v(this,null,null):this._flush(function(E,D){v(y,E,D)})}function v(y,E,D){if(E)return y.emit("error",E);if(null!=D&&y.push(D),y._writableState.length)throw new W;if(y._transformState.transforming)throw new re;return y.push(null)}Y("inherits")(R,w),R.prototype.push=function(y,E){return this._transformState.needTransform=!1,w.prototype.push.call(this,y,E)},R.prototype._transform=function(y,E,D){D(new V("_transform()"))},R.prototype._write=function(y,E,D){var j=this._transformState;if(j.writecb=D,j.writechunk=y,j.writeencoding=E,!j.transforming){var I=this._readableState;(j.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},R.prototype._read=function(y){var E=this._transformState;null===E.writechunk||E.transforming?E.needTransform=!0:(E.transforming=!0,this._transform(E.writechunk,E.writeencoding,E.afterTransform))},R.prototype._destroy=function(y,E){w.prototype._destroy.call(this,y,function(D){E(D)})}},{"../errors":67,"./_stream_duplex":68,inherits:10}],72:[function(Y,Ae,fe){(function(q,V){(function(){"use strict";function re(be){var ce=this;this.next=null,this.entry=null,this.finish=function(){!function(be,ce,Pe){var Et=be.entry;for(be.entry=null;Et;){var pt=Et.callback;ce.pendingcb--,pt(Pe),Et=Et.next}ce.corkedRequestsFree.next=be}(ce,be)}}var W;Ae.exports=me,me.WritableState=se;var w={deprecate:Y("util-deprecate")},x=Y("./internal/streams/stream"),R=Y("buffer").Buffer,T=V.Uint8Array||function(){};var Te,E=Y("./internal/streams/destroy"),j=Y("./internal/streams/state").getHighWaterMark,I=Y("../errors").codes,$=I.ERR_INVALID_ARG_TYPE,K=I.ERR_METHOD_NOT_IMPLEMENTED,M=I.ERR_MULTIPLE_CALLBACK,F=I.ERR_STREAM_CANNOT_PIPE,Q=I.ERR_STREAM_DESTROYED,S=I.ERR_STREAM_NULL_VALUES,U=I.ERR_STREAM_WRITE_AFTER_END,ie=I.ERR_UNKNOWN_ENCODING,ue=E.errorOrDestroy;function ee(){}function se(be,ce,Pe){W=W||Y("./_stream_duplex"),"boolean"!=typeof Pe&&(Pe=ce instanceof W),this.objectMode=!!(be=be||{}).objectMode,Pe&&(this.objectMode=this.objectMode||!!be.writableObjectMode),this.highWaterMark=j(this,be,"writableHighWaterMark",Pe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===be.decodeStrings),this.defaultEncoding=be.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pt){!function(be,ce){var Pe=be._writableState,Et=Pe.sync,pt=Pe.writecb;if("function"!=typeof pt)throw new M;if(function(be){be.writing=!1,be.writecb=null,be.length-=be.writelen,be.writelen=0}(Pe),ce)!function(be,ce,Pe,Et,pt){--ce.pendingcb,Pe?(q.nextTick(pt,Et),q.nextTick(je,be,ce),be._writableState.errorEmitted=!0,ue(be,Et)):(pt(Et),be._writableState.errorEmitted=!0,ue(be,Et),je(be,ce))}(be,Pe,Et,ce,pt);else{var ge=Re(Pe)||be.destroyed;!ge&&!Pe.corked&&!Pe.bufferProcessing&&Pe.bufferedRequest&&Ee(be,Pe),Et?q.nextTick(Ve,be,Pe,ge,pt):Ve(be,Pe,ge,pt)}}(ce,pt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==be.emitClose,this.autoDestroy=!!be.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new re(this)}function me(be){var ce=this instanceof(W=W||Y("./_stream_duplex"));if(!ce&&!Te.call(me,this))return new me(be);this._writableState=new se(be,this,ce),this.writable=!0,be&&("function"==typeof be.write&&(this._write=be.write),"function"==typeof be.writev&&(this._writev=be.writev),"function"==typeof be.destroy&&(this._destroy=be.destroy),"function"==typeof be.final&&(this._final=be.final)),x.call(this)}function Ue(be,ce,Pe,Et,pt,ge){if(!Pe){var B=function(be,ce,Pe){return!be.objectMode&&!1!==be.decodeStrings&&"string"==typeof ce&&(ce=R.from(ce,Pe)),ce}(ce,Et,pt);Et!==B&&(Pe=!0,pt="buffer",Et=B)}var O=ce.objectMode?1:Et.length;ce.length+=O;var k=ce.length<ce.highWaterMark;if(k||(ce.needDrain=!0),ce.writing||ce.corked){var Ne=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:Et,encoding:pt,isBuf:Pe,callback:ge,next:null},Ne?Ne.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else nt(be,ce,!1,O,Et,pt,ge);return k}function nt(be,ce,Pe,Et,pt,ge,B){ce.writelen=Et,ce.writecb=B,ce.writing=!0,ce.sync=!0,ce.destroyed?ce.onwrite(new Q("write")):Pe?be._writev(pt,ce.onwrite):be._write(pt,ge,ce.onwrite),ce.sync=!1}function Ve(be,ce,Pe,Et){Pe||function(be,ce){0===ce.length&&ce.needDrain&&(ce.needDrain=!1,be.emit("drain"))}(be,ce),ce.pendingcb--,Et(),je(be,ce)}function Ee(be,ce){ce.bufferProcessing=!0;var Pe=ce.bufferedRequest;if(be._writev&&Pe&&Pe.next){var pt=new Array(ce.bufferedRequestCount),ge=ce.corkedRequestsFree;ge.entry=Pe;for(var B=0,O=!0;Pe;)pt[B]=Pe,Pe.isBuf||(O=!1),Pe=Pe.next,B+=1;pt.allBuffers=O,nt(be,ce,!0,ce.length,pt,"",ge.finish),ce.pendingcb++,ce.lastBufferedRequest=null,ge.next?(ce.corkedRequestsFree=ge.next,ge.next=null):ce.corkedRequestsFree=new re(ce),ce.bufferedRequestCount=0}else{for(;Pe;){var k=Pe.chunk;if(nt(be,ce,!1,ce.objectMode?1:k.length,k,Pe.encoding,Pe.callback),Pe=Pe.next,ce.bufferedRequestCount--,ce.writing)break}null===Pe&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=Pe,ce.bufferProcessing=!1}function Re(be){return be.ending&&0===be.length&&null===be.bufferedRequest&&!be.finished&&!be.writing}function ze(be,ce){be._final(function(Pe){ce.pendingcb--,Pe&&ue(be,Pe),ce.prefinished=!0,be.emit("prefinish"),je(be,ce)})}function je(be,ce){var Pe=Re(ce);if(Pe&&(function(be,ce){!ce.prefinished&&!ce.finalCalled&&("function"!=typeof be._final||ce.destroyed?(ce.prefinished=!0,be.emit("prefinish")):(ce.pendingcb++,ce.finalCalled=!0,q.nextTick(ze,be,ce)))}(be,ce),0===ce.pendingcb&&(ce.finished=!0,be.emit("finish"),ce.autoDestroy))){var Et=be._readableState;(!Et||Et.autoDestroy&&Et.endEmitted)&&be.destroy()}return Pe}Y("inherits")(me,x),se.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,Pe=[];ce;)Pe.push(ce),ce=ce.next;return Pe},function(){try{Object.defineProperty(se.prototype,"buffer",{get:w.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(be){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Te=Function.prototype[Symbol.hasInstance],Object.defineProperty(me,Symbol.hasInstance,{value:function(ce){return!!Te.call(this,ce)||this===me&&ce&&ce._writableState instanceof se}})):Te=function(ce){return ce instanceof this},me.prototype.pipe=function(){ue(this,new F)},me.prototype.write=function(be,ce,Pe){var Et=this._writableState,pt=!1,ge=!Et.objectMode&&function(be){return R.isBuffer(be)||be instanceof T}(be);return ge&&!R.isBuffer(be)&&(be=function(be){return R.from(be)}(be)),"function"==typeof ce&&(Pe=ce,ce=null),ge?ce="buffer":ce||(ce=Et.defaultEncoding),"function"!=typeof Pe&&(Pe=ee),Et.ending?function(be,ce){var Pe=new U;ue(be,Pe),q.nextTick(ce,Pe)}(this,Pe):(ge||function(be,ce,Pe,Et){var pt;return null===Pe?pt=new S:"string"!=typeof Pe&&!ce.objectMode&&(pt=new $("chunk",["string","Buffer"],Pe)),!pt||(ue(be,pt),q.nextTick(Et,pt),!1)}(this,Et,be,Pe))&&(Et.pendingcb++,pt=Ue(this,Et,ge,be,ce,Pe)),pt},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){var be=this._writableState;be.corked&&(be.corked--,!be.writing&&!be.corked&&!be.bufferProcessing&&be.bufferedRequest&&Ee(this,be))},me.prototype.setDefaultEncoding=function(ce){if("string"==typeof ce&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new ie(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),me.prototype._write=function(be,ce,Pe){Pe(new K("_write()"))},me.prototype._writev=null,me.prototype.end=function(be,ce,Pe){var Et=this._writableState;return"function"==typeof be?(Pe=be,be=null,ce=null):"function"==typeof ce&&(Pe=ce,ce=null),null!=be&&this.write(be,ce),Et.corked&&(Et.corked=1,this.uncork()),Et.ending||function(be,ce,Pe){ce.ending=!0,je(be,ce),Pe&&(ce.finished?q.nextTick(Pe):be.once("finish",Pe)),ce.ended=!0,be.writable=!1}(this,Et,Pe),this},Object.defineProperty(me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ce){!this._writableState||(this._writableState.destroyed=ce)}}),me.prototype.destroy=E.destroy,me.prototype._undestroy=E.undestroy,me.prototype._destroy=function(be,ce){ce(be)}}).call(this)}).call(this,Y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/destroy":75,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,inherits:10,"util-deprecate":90}],73:[function(Y,Ae,fe){(function(q){(function(){"use strict";var V;function L(F,Q,S){return Q in F?Object.defineProperty(F,Q,{value:S,enumerable:!0,configurable:!0,writable:!0}):F[Q]=S,F}var re=Y("./end-of-stream"),W=Symbol("lastResolve"),w=Symbol("lastReject"),x=Symbol("error"),R=Symbol("ended"),T=Symbol("lastPromise"),v=Symbol("handlePromise"),y=Symbol("stream");function E(F,Q){return{value:F,done:Q}}function D(F){var Q=F[W];if(null!==Q){var S=F[y].read();null!==S&&(F[T]=null,F[W]=null,F[w]=null,Q(E(S,!1)))}}function j(F){q.nextTick(D,F)}var $=Object.getPrototypeOf(function(){}),K=Object.setPrototypeOf((L(V={get stream(){return this[y]},next:function(){var Q=this,S=this[x];if(null!==S)return Promise.reject(S);if(this[R])return Promise.resolve(E(void 0,!0));if(this[y].destroyed)return new Promise(function(ee,se){q.nextTick(function(){Q[x]?se(Q[x]):ee(E(void 0,!0))})});var ie,U=this[T];if(U)ie=new Promise(function(F,Q){return function(S,U){F.then(function(){Q[R]?S(E(void 0,!0)):Q[v](S,U)},U)}}(U,this));else{var ue=this[y].read();if(null!==ue)return Promise.resolve(E(ue,!1));ie=new Promise(this[v])}return this[T]=ie,ie}},Symbol.asyncIterator,function(){return this}),L(V,"return",function(){var Q=this;return new Promise(function(S,U){Q[y].destroy(null,function(ie){ie?U(ie):S(E(void 0,!0))})})}),V),$);Ae.exports=function(Q){var S,U=Object.create(K,(L(S={},y,{value:Q,writable:!0}),L(S,W,{value:null,writable:!0}),L(S,w,{value:null,writable:!0}),L(S,x,{value:null,writable:!0}),L(S,R,{value:Q._readableState.endEmitted,writable:!0}),L(S,v,{value:function(ue,ee){var se=U[y].read();se?(U[T]=null,U[W]=null,U[w]=null,ue(E(se,!1))):(U[W]=ue,U[w]=ee)},writable:!0}),S));return U[T]=null,re(Q,function(ie){if(ie&&"ERR_STREAM_PREMATURE_CLOSE"!==ie.code){var ue=U[w];return null!==ue&&(U[T]=null,U[W]=null,U[w]=null,ue(ie)),void(U[x]=ie)}var ee=U[W];null!==ee&&(U[T]=null,U[W]=null,U[w]=null,ee(E(void 0,!0))),U[R]=!0}),Q.on("readable",j.bind(null,U)),U}}).call(this)}).call(this,Y("_process"))},{"./end-of-stream":76,_process:44}],74:[function(Y,Ae,fe){"use strict";function q(D,j){var I=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);j&&($=$.filter(function(K){return Object.getOwnPropertyDescriptor(D,K).enumerable})),I.push.apply(I,$)}return I}function L(D,j,I){return j in D?Object.defineProperty(D,j,{value:I,enumerable:!0,configurable:!0,writable:!0}):D[j]=I,D}function W(D,j){for(var I=0;I<j.length;I++){var $=j[I];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(D,$.key,$)}}var R=Y("buffer").Buffer,v=Y("util").inspect,y=v&&v.custom||"inspect";function E(D,j,I){R.prototype.copy.call(D,j,I)}Ae.exports=function(){function D(){(function(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}return function(D,j,I){j&&W(D.prototype,j),I&&W(D,I)}(D,[{key:"push",value:function(I){var $={data:I,next:null};this.length>0?this.tail.next=$:this.head=$,this.tail=$,++this.length}},{key:"unshift",value:function(I){var $={data:I,next:this.head};0===this.length&&(this.tail=$),this.head=$,++this.length}},{key:"shift",value:function(){if(0!==this.length){var I=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(0===this.length)return"";for(var $=this.head,K=""+$.data;$=$.next;)K+=I+$.data;return K}},{key:"concat",value:function(I){if(0===this.length)return R.alloc(0);for(var $=R.allocUnsafe(I>>>0),K=this.head,M=0;K;)E(K.data,$,M),M+=K.data.length,K=K.next;return $}},{key:"consume",value:function(I,$){var K;return I<this.head.data.length?(K=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):K=I===this.head.data.length?this.shift():$?this._getString(I):this._getBuffer(I),K}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var $=this.head,K=1,M=$.data;for(I-=M.length;$=$.next;){var F=$.data,Q=I>F.length?F.length:I;if(M+=Q===F.length?F:F.slice(0,I),0==(I-=Q)){Q===F.length?(++K,this.head=$.next?$.next:this.tail=null):(this.head=$,$.data=F.slice(Q));break}++K}return this.length-=K,M}},{key:"_getBuffer",value:function(I){var $=R.allocUnsafe(I),K=this.head,M=1;for(K.data.copy($),I-=K.data.length;K=K.next;){var F=K.data,Q=I>F.length?F.length:I;if(F.copy($,$.length-I,0,Q),0==(I-=Q)){Q===F.length?(++M,this.head=K.next?K.next:this.tail=null):(this.head=K,K.data=F.slice(Q));break}++M}return this.length-=M,$}},{key:y,value:function(I,$){return v(this,function(D){for(var j=1;j<arguments.length;j++){var I=null!=arguments[j]?arguments[j]:{};j%2?q(Object(I),!0).forEach(function($){L(D,$,I[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(I)):q(Object(I)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(I,$))})}return D}({},$,{depth:0,customInspect:!1}))}}]),D}()},{buffer:6,util:3}],75:[function(Y,Ae,fe){(function(q){(function(){"use strict";function L(R,T){w(R,T),re(R)}function re(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function w(R,T){R.emit("error",T)}Ae.exports={destroy:function(R,T){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(T?T(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(w,this,R)):q.nextTick(w,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(D){!T&&D?v._writableState?v._writableState.errorEmitted?q.nextTick(re,v):(v._writableState.errorEmitted=!0,q.nextTick(L,v,D)):q.nextTick(L,v,D):T?(q.nextTick(re,v),T(D)):q.nextTick(re,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(R,T){var v=R._readableState,y=R._writableState;v&&v.autoDestroy||y&&y.autoDestroy?R.destroy(T):R.emit("error",T)}}}).call(this)}).call(this,Y("_process"))},{_process:44}],76:[function(Y,Ae,fe){"use strict";var q=Y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function L(){}Ae.exports=function W(w,x,R){if("function"==typeof x)return W(w,null,x);x||(x={}),R=function(w){var x=!1;return function(){if(!x){x=!0;for(var R=arguments.length,T=new Array(R),v=0;v<R;v++)T[v]=arguments[v];w.apply(this,T)}}}(R||L);var T=x.readable||!1!==x.readable&&w.readable,v=x.writable||!1!==x.writable&&w.writable,y=function(){w.writable||D()},E=w._writableState&&w._writableState.finished,D=function(){v=!1,E=!0,T||R.call(w)},j=w._readableState&&w._readableState.endEmitted,I=function(){T=!1,j=!0,v||R.call(w)},$=function(Q){R.call(w,Q)},K=function(){var Q;return T&&!j?((!w._readableState||!w._readableState.ended)&&(Q=new q),R.call(w,Q)):v&&!E?((!w._writableState||!w._writableState.ended)&&(Q=new q),R.call(w,Q)):void 0},M=function(){w.req.on("finish",D)};return function(w){return w.setHeader&&"function"==typeof w.abort}(w)?(w.on("complete",D),w.on("abort",K),w.req?M():w.on("request",M)):v&&!w._writableState&&(w.on("end",y),w.on("close",y)),w.on("end",I),w.on("finish",D),!1!==x.error&&w.on("error",$),w.on("close",K),function(){w.removeListener("complete",D),w.removeListener("abort",K),w.removeListener("request",M),w.req&&w.req.removeListener("finish",D),w.removeListener("end",y),w.removeListener("close",y),w.removeListener("finish",D),w.removeListener("end",I),w.removeListener("error",$),w.removeListener("close",K)}}},{"../../../errors":67}],77:[function(Y,Ae,fe){Ae.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],78:[function(Y,Ae,fe){"use strict";var q;var L=Y("../../../errors").codes,re=L.ERR_MISSING_ARGS,W=L.ERR_STREAM_DESTROYED;function w(D){if(D)throw D}function R(D,j,I,$){$=function(D){var j=!1;return function(){j||(j=!0,D.apply(void 0,arguments))}}($);var K=!1;D.on("close",function(){K=!0}),void 0===q&&(q=Y("./end-of-stream")),q(D,{readable:j,writable:I},function(F){if(F)return $(F);K=!0,$()});var M=!1;return function(F){if(!K&&!M){if(M=!0,function(D){return D.setHeader&&"function"==typeof D.abort}(D))return D.abort();if("function"==typeof D.destroy)return D.destroy();$(F||new W("pipe"))}}}function T(D){D()}function v(D,j){return D.pipe(j)}function y(D){return D.length&&"function"==typeof D[D.length-1]?D.pop():w}Ae.exports=function(){for(var D=arguments.length,j=new Array(D),I=0;I<D;I++)j[I]=arguments[I];var $=y(j);if(Array.isArray(j[0])&&(j=j[0]),j.length<2)throw new re("streams");var K,M=j.map(function(F,Q){var S=Q<j.length-1;return R(F,S,Q>0,function(ie){K||(K=ie),ie&&M.forEach(T),!S&&(M.forEach(T),$(K))})});return j.reduce(v)}},{"../../../errors":67,"./end-of-stream":76}],79:[function(Y,Ae,fe){"use strict";var q=Y("../../../errors").codes.ERR_INVALID_OPT_VALUE;Ae.exports={getHighWaterMark:function(re,W,w,x){var R=function(re,W,w){return null!=re.highWaterMark?re.highWaterMark:W?re[w]:null}(W,x,w);if(null!=R){if(!isFinite(R)||Math.floor(R)!==R||R<0)throw new q(x?w:"highWaterMark",R);return Math.floor(R)}return re.objectMode?16:16384}}},{"../../../errors":67}],80:[function(Y,Ae,fe){Ae.exports=Y("events").EventEmitter},{events:8}],81:[function(Y,Ae,fe){(fe=Ae.exports=Y("./lib/_stream_readable.js")).Stream=fe,fe.Readable=fe,fe.Writable=Y("./lib/_stream_writable.js"),fe.Duplex=Y("./lib/_stream_duplex.js"),fe.Transform=Y("./lib/_stream_transform.js"),fe.PassThrough=Y("./lib/_stream_passthrough.js"),fe.finished=Y("./lib/internal/streams/end-of-stream.js"),fe.pipeline=Y("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":68,"./lib/_stream_passthrough.js":69,"./lib/_stream_readable.js":70,"./lib/_stream_transform.js":71,"./lib/_stream_writable.js":72,"./lib/internal/streams/end-of-stream.js":76,"./lib/internal/streams/pipeline.js":78}],82:[function(Y,Ae,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),function(V){for(var L in V)fe.hasOwnProperty(L)||(fe[L]=V[L])}(Y("./lib/Resolve"))},{"./lib/Resolve":83}],83:[function(Y,Ae,fe){"use strict";function V(W){const w=[];let x=0;for(;x<W.length;)switch(W[x]){case"/":if("."===W[x+1])if("."===W[x+2]){if(!re(W[x+3])){w.push([]),x++;break}w.pop(),W[x+3]||w.push([]),x+=3}else{if(!re(W[x+2])){w.push([]),x++;break}W[x+2]||w.push([]),x+=2}else w.push([]),x++;break;case"#":case"?":w.length||w.push([]),w[w.length-1].push(W.substr(x)),x=W.length;break;default:w.length||w.push([]),w[w.length-1].push(W[x]),x++}return"/"+w.map(R=>R.join("")).join("/")}function L(W,w){let x=w+1;w>=0?"/"===W[w+1]&&"/"===W[w+2]&&(x=w+3):"/"===W[0]&&"/"===W[1]&&(x=2);const R=W.indexOf("/",x);return R<0?W:W.substr(0,R)+V(W.substr(R))}function re(W){return!W||"#"===W||"?"===W||"/"===W}Object.defineProperty(fe,"__esModule",{value:!0}),fe.resolve=function(W,w){const x=(w=w||"").indexOf("#");if(x>0&&(w=w.substr(0,x)),!W.length){if(w.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${w}' for value '${W}'`);return w}if(W.startsWith("?")){const j=w.indexOf("?");return j>0&&(w=w.substr(0,j)),w+W}if(W.startsWith("#"))return w+W;if(!w.length){const j=W.indexOf(":");if(j<0)throw new Error(`Found invalid relative IRI '${W}' for a missing baseIRI`);return L(W,j)}const R=W.indexOf(":");if(R>=0)return L(W,R);const T=w.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${w}' for value '${W}'`);const v=w.substr(0,T+1);if(0===W.indexOf("//"))return v+L(W,R);let y;if(w.indexOf("//",T)===T+1){if(y=w.indexOf("/",T+3),y<0)return w.length>T+3?w+"/"+L(W,R):v+L(W,R)}else if(y=w.indexOf("/",T+1),y<0)return v+L(W,R);if(0===W.indexOf("/"))return w.substr(0,y)+V(W);let E=w.substr(y);const D=E.lastIndexOf("/");return D>=0&&D<E.length-1&&(E=E.substr(0,D+1),"."===W[0]&&"."!==W[1]&&"/"!==W[1]&&W[2]&&(W=W.substr(1))),W=V(W=E+W),w.substr(0,y)+W},fe.removeDotSegments=V,fe.removeDotSegmentsOfPath=L},{}],84:[function(Y,Ae,fe){var q=Y("buffer"),V=q.Buffer;function L(W,w){for(var x in W)w[x]=W[x]}function re(W,w,x){return V(W,w,x)}V.from&&V.alloc&&V.allocUnsafe&&V.allocUnsafeSlow?Ae.exports=q:(L(q,fe),fe.Buffer=re),re.prototype=Object.create(V.prototype),L(V,re),re.from=function(W,w,x){if("number"==typeof W)throw new TypeError("Argument must not be a number");return V(W,w,x)},re.alloc=function(W,w,x){if("number"!=typeof W)throw new TypeError("Argument must be a number");var R=V(W);return void 0!==w?"string"==typeof x?R.fill(w,x):R.fill(w):R.fill(0),R},re.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return V(W)},re.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return q.SlowBuffer(W)}},{buffer:6}],85:[function(Y,Ae,fe){(function(q){(function(){!function(V){V.parser=function(G,X){return new re(G,X)},V.SAXParser=re,V.SAXStream=y,V.createStream=function(G,X){return new y(G,X)},V.MAX_BUFFER_LENGTH=65536;var R,L=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function re(G,X){if(!(this instanceof re))return new re(G,X);var be=this;(function(G){for(var X=0,be=L.length;X<be;X++)G[L[X]]=""})(be),be.q=be.c="",be.bufferCheckPosition=V.MAX_BUFFER_LENGTH,be.opt=X||{},be.opt.lowercase=be.opt.lowercase||be.opt.lowercasetags,be.looseCase=be.opt.lowercase?"toLowerCase":"toUpperCase",be.tags=[],be.closed=be.closedRoot=be.sawRoot=!1,be.tag=be.error=null,be.strict=!!G,be.noscript=!(!G&&!be.opt.noscript),be.state=se.BEGIN,be.strictEntities=be.opt.strictEntities,be.ENTITIES=Object.create(be.strictEntities?V.XML_ENTITIES:V.ENTITIES),be.attribList=[],be.opt.xmlns&&(be.ns=Object.create($)),be.trackPosition=!1!==be.opt.position,be.trackPosition&&(be.position=be.line=be.column=0),me(be,"onready")}V.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(G){function X(){}return X.prototype=G,new X}),Object.keys||(Object.keys=function(G){var X=[];for(var be in G)G.hasOwnProperty(be)&&X.push(be);return X}),re.prototype={end:function(){nt(this)},write:function(G){var X=this;if(this.error)throw this.error;if(X.closed)return Ue(X,"Cannot write after close. Assign an onready handler.");if(null===G)return nt(X);"object"==typeof G&&(G=G.toString());for(var be=0,ce="";ce=qe(G,be++),X.c=ce,ce;)switch(X.trackPosition&&(X.position++,"\n"===ce?(X.line++,X.column=0):X.column++),X.state){case se.BEGIN:if(X.state=se.BEGIN_WHITESPACE,"\ufeff"===ce)continue;ze(X,ce);continue;case se.BEGIN_WHITESPACE:ze(X,ce);continue;case se.TEXT:if(X.sawRoot&&!X.closedRoot){for(var Pe=be-1;ce&&"<"!==ce&&"&"!==ce;)(ce=qe(G,be++))&&X.trackPosition&&(X.position++,"\n"===ce?(X.line++,X.column=0):X.column++);X.textNode+=G.substring(Pe,be-1)}"<"!==ce||X.sawRoot&&X.closedRoot&&!X.strict?(!S(ce)&&(!X.sawRoot||X.closedRoot)&&Ze(X,"Text data outside of root node."),"&"===ce?X.state=se.TEXT_ENTITY:X.textNode+=ce):(X.state=se.OPEN_WAKA,X.startTagPosition=X.position);continue;case se.SCRIPT:"<"===ce?X.state=se.SCRIPT_ENDING:X.script+=ce;continue;case se.SCRIPT_ENDING:"/"===ce?X.state=se.CLOSE_TAG:(X.script+="<"+ce,X.state=se.SCRIPT);continue;case se.OPEN_WAKA:"!"===ce?(X.state=se.SGML_DECL,X.sgmlDecl=""):S(ce)||(ue(K,ce)?(X.state=se.OPEN_TAG,X.tagName=ce):"/"===ce?(X.state=se.CLOSE_TAG,X.tagName=""):"?"===ce?(X.state=se.PROC_INST,X.procInstName=X.procInstBody=""):(Ze(X,"Unencoded <"),X.startTagPosition+1<X.position&&(ce=new Array(X.position-X.startTagPosition).join(" ")+ce),X.textNode+="<"+ce,X.state=se.TEXT));continue;case se.SGML_DECL:"[CDATA["===(X.sgmlDecl+ce).toUpperCase()?(te(X,"onopencdata"),X.state=se.CDATA,X.sgmlDecl="",X.cdata=""):X.sgmlDecl+ce==="--"?(X.state=se.COMMENT,X.comment="",X.sgmlDecl=""):"DOCTYPE"===(X.sgmlDecl+ce).toUpperCase()?(X.state=se.DOCTYPE,(X.doctype||X.sawRoot)&&Ze(X,"Inappropriately located doctype declaration"),X.doctype="",X.sgmlDecl=""):">"===ce?(te(X,"onsgmldeclaration",X.sgmlDecl),X.sgmlDecl="",X.state=se.TEXT):(U(ce)&&(X.state=se.SGML_DECL_QUOTED),X.sgmlDecl+=ce);continue;case se.SGML_DECL_QUOTED:ce===X.q&&(X.state=se.SGML_DECL,X.q=""),X.sgmlDecl+=ce;continue;case se.DOCTYPE:">"===ce?(X.state=se.TEXT,te(X,"ondoctype",X.doctype),X.doctype=!0):(X.doctype+=ce,"["===ce?X.state=se.DOCTYPE_DTD:U(ce)&&(X.state=se.DOCTYPE_QUOTED,X.q=ce));continue;case se.DOCTYPE_QUOTED:X.doctype+=ce,ce===X.q&&(X.q="",X.state=se.DOCTYPE);continue;case se.DOCTYPE_DTD:X.doctype+=ce,"]"===ce?X.state=se.DOCTYPE:U(ce)&&(X.state=se.DOCTYPE_DTD_QUOTED,X.q=ce);continue;case se.DOCTYPE_DTD_QUOTED:X.doctype+=ce,ce===X.q&&(X.state=se.DOCTYPE_DTD,X.q="");continue;case se.COMMENT:"-"===ce?X.state=se.COMMENT_ENDING:X.comment+=ce;continue;case se.COMMENT_ENDING:"-"===ce?(X.state=se.COMMENT_ENDED,X.comment=Oe(X.opt,X.comment),X.comment&&te(X,"oncomment",X.comment),X.comment=""):(X.comment+="-"+ce,X.state=se.COMMENT);continue;case se.COMMENT_ENDED:">"!==ce?(Ze(X,"Malformed comment"),X.comment+="--"+ce,X.state=se.COMMENT):X.state=se.TEXT;continue;case se.CDATA:"]"===ce?X.state=se.CDATA_ENDING:X.cdata+=ce;continue;case se.CDATA_ENDING:"]"===ce?X.state=se.CDATA_ENDING_2:(X.cdata+="]"+ce,X.state=se.CDATA);continue;case se.CDATA_ENDING_2:">"===ce?(X.cdata&&te(X,"oncdata",X.cdata),te(X,"onclosecdata"),X.cdata="",X.state=se.TEXT):"]"===ce?X.cdata+="]":(X.cdata+="]]"+ce,X.state=se.CDATA);continue;case se.PROC_INST:"?"===ce?X.state=se.PROC_INST_ENDING:S(ce)?X.state=se.PROC_INST_BODY:X.procInstName+=ce;continue;case se.PROC_INST_BODY:if(!X.procInstBody&&S(ce))continue;"?"===ce?X.state=se.PROC_INST_ENDING:X.procInstBody+=ce;continue;case se.PROC_INST_ENDING:">"===ce?(te(X,"onprocessinginstruction",{name:X.procInstName,body:X.procInstBody}),X.procInstName=X.procInstBody="",X.state=se.TEXT):(X.procInstBody+="?"+ce,X.state=se.PROC_INST_BODY);continue;case se.OPEN_TAG:ue(M,ce)?X.tagName+=ce:(Je(X),">"===ce?ke(X):"/"===ce?X.state=se.OPEN_TAG_SLASH:(S(ce)||Ze(X,"Invalid character in tag name"),X.state=se.ATTRIB));continue;case se.OPEN_TAG_SLASH:">"===ce?(ke(X,!0),Ee(X)):(Ze(X,"Forward-slash in opening tag not followed by >"),X.state=se.ATTRIB);continue;case se.ATTRIB:if(S(ce))continue;">"===ce?ke(X):"/"===ce?X.state=se.OPEN_TAG_SLASH:ue(K,ce)?(X.attribName=ce,X.attribValue="",X.state=se.ATTRIB_NAME):Ze(X,"Invalid attribute name");continue;case se.ATTRIB_NAME:"="===ce?X.state=se.ATTRIB_VALUE:">"===ce?(Ze(X,"Attribute without value"),X.attribValue=X.attribName,Ve(X),ke(X)):S(ce)?X.state=se.ATTRIB_NAME_SAW_WHITE:ue(M,ce)?X.attribName+=ce:Ze(X,"Invalid attribute name");continue;case se.ATTRIB_NAME_SAW_WHITE:if("="===ce)X.state=se.ATTRIB_VALUE;else{if(S(ce))continue;Ze(X,"Attribute without value"),X.tag.attributes[X.attribName]="",X.attribValue="",te(X,"onattribute",{name:X.attribName,value:""}),X.attribName="",">"===ce?ke(X):ue(K,ce)?(X.attribName=ce,X.state=se.ATTRIB_NAME):(Ze(X,"Invalid attribute name"),X.state=se.ATTRIB)}continue;case se.ATTRIB_VALUE:if(S(ce))continue;U(ce)?(X.q=ce,X.state=se.ATTRIB_VALUE_QUOTED):(Ze(X,"Unquoted attribute value"),X.state=se.ATTRIB_VALUE_UNQUOTED,X.attribValue=ce);continue;case se.ATTRIB_VALUE_QUOTED:if(ce!==X.q){"&"===ce?X.state=se.ATTRIB_VALUE_ENTITY_Q:X.attribValue+=ce;continue}Ve(X),X.q="",X.state=se.ATTRIB_VALUE_CLOSED;continue;case se.ATTRIB_VALUE_CLOSED:S(ce)?X.state=se.ATTRIB:">"===ce?ke(X):"/"===ce?X.state=se.OPEN_TAG_SLASH:ue(K,ce)?(Ze(X,"No whitespace between attributes"),X.attribName=ce,X.attribValue="",X.state=se.ATTRIB_NAME):Ze(X,"Invalid attribute name");continue;case se.ATTRIB_VALUE_UNQUOTED:if(!ie(ce)){"&"===ce?X.state=se.ATTRIB_VALUE_ENTITY_U:X.attribValue+=ce;continue}Ve(X),">"===ce?ke(X):X.state=se.ATTRIB;continue;case se.CLOSE_TAG:if(X.tagName)">"===ce?Ee(X):ue(M,ce)?X.tagName+=ce:X.script?(X.script+="</"+X.tagName,X.tagName="",X.state=se.SCRIPT):(S(ce)||Ze(X,"Invalid tagname in closing tag"),X.state=se.CLOSE_TAG_SAW_WHITE);else{if(S(ce))continue;ee(K,ce)?X.script?(X.script+="</"+ce,X.state=se.SCRIPT):Ze(X,"Invalid tagname in closing tag."):X.tagName=ce}continue;case se.CLOSE_TAG_SAW_WHITE:if(S(ce))continue;">"===ce?Ee(X):Ze(X,"Invalid characters in closing tag");continue;case se.TEXT_ENTITY:case se.ATTRIB_VALUE_ENTITY_Q:case se.ATTRIB_VALUE_ENTITY_U:var pt,ge;switch(X.state){case se.TEXT_ENTITY:pt=se.TEXT,ge="textNode";break;case se.ATTRIB_VALUE_ENTITY_Q:pt=se.ATTRIB_VALUE_QUOTED,ge="attribValue";break;case se.ATTRIB_VALUE_ENTITY_U:pt=se.ATTRIB_VALUE_UNQUOTED,ge="attribValue"}";"===ce?(X[ge]+=Re(X),X.entity="",X.state=pt):ue(X.entity.length?Q:F,ce)?X.entity+=ce:(Ze(X,"Invalid character in entity name"),X[ge]+="&"+X.entity+ce,X.entity="",X.state=pt);continue;default:throw new Error(X,"Unknown state: "+X.state)}return X.position>=X.bufferCheckPosition&&function(G){for(var X=Math.max(V.MAX_BUFFER_LENGTH,10),be=0,ce=0,Pe=L.length;ce<Pe;ce++){var Et=G[L[ce]].length;if(Et>X)switch(L[ce]){case"textNode":ye(G);break;case"cdata":te(G,"oncdata",G.cdata),G.cdata="";break;case"script":te(G,"onscript",G.script),G.script="";break;default:Ue(G,"Max buffer length exceeded: "+L[ce])}be=Math.max(be,Et)}G.bufferCheckPosition=V.MAX_BUFFER_LENGTH-be+G.position}(X),X},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(G){ye(G),""!==G.cdata&&(te(G,"oncdata",G.cdata),G.cdata=""),""!==G.script&&(te(G,"onscript",G.script),G.script="")}(this)}};try{R=Y("stream").Stream}catch(G){R=function(){}}var T=V.EVENTS.filter(function(G){return"error"!==G&&"end"!==G});function y(G,X){if(!(this instanceof y))return new y(G,X);R.apply(this),this._parser=new re(G,X),this.writable=!0,this.readable=!0;var be=this;this._parser.onend=function(){be.emit("end")},this._parser.onerror=function(ce){be.emit("error",ce),be._parser.error=null},this._decoder=null,T.forEach(function(ce){Object.defineProperty(be,"on"+ce,{get:function(){return be._parser["on"+ce]},set:function(Pe){if(!Pe)return be.removeAllListeners(ce),be._parser["on"+ce]=Pe,Pe;be.on(ce,Pe)},enumerable:!0,configurable:!1})})}(y.prototype=Object.create(R.prototype,{constructor:{value:y}})).write=function(G){if("function"==typeof q&&"function"==typeof q.isBuffer&&q.isBuffer(G)){if(!this._decoder){var X=Y("string_decoder").StringDecoder;this._decoder=new X("utf8")}G=this._decoder.write(G)}return this._parser.write(G.toString()),this.emit("data",G),!0},y.prototype.end=function(G){return G&&G.length&&this.write(G),this._parser.end(),!0},y.prototype.on=function(G,X){var be=this;return!be._parser["on"+G]&&-1!==T.indexOf(G)&&(be._parser["on"+G]=function(){var ce=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ce.splice(0,0,G),be.emit.apply(be,ce)}),R.prototype.on.call(be,G,X)};var j="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",$={xml:j,xmlns:I},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function S(G){return" "===G||"\n"===G||"\r"===G||"\t"===G}function U(G){return'"'===G||"'"===G}function ie(G){return">"===G||S(G)}function ue(G,X){return G.test(X)}function ee(G,X){return!ue(G,X)}var G,X,be,se=0;for(var Te in V.STATE={BEGIN:se++,BEGIN_WHITESPACE:se++,TEXT:se++,TEXT_ENTITY:se++,OPEN_WAKA:se++,SGML_DECL:se++,SGML_DECL_QUOTED:se++,DOCTYPE:se++,DOCTYPE_QUOTED:se++,DOCTYPE_DTD:se++,DOCTYPE_DTD_QUOTED:se++,COMMENT_STARTING:se++,COMMENT:se++,COMMENT_ENDING:se++,COMMENT_ENDED:se++,CDATA:se++,CDATA_ENDING:se++,CDATA_ENDING_2:se++,PROC_INST:se++,PROC_INST_BODY:se++,PROC_INST_ENDING:se++,OPEN_TAG:se++,OPEN_TAG_SLASH:se++,ATTRIB:se++,ATTRIB_NAME:se++,ATTRIB_NAME_SAW_WHITE:se++,ATTRIB_VALUE:se++,ATTRIB_VALUE_QUOTED:se++,ATTRIB_VALUE_CLOSED:se++,ATTRIB_VALUE_UNQUOTED:se++,ATTRIB_VALUE_ENTITY_Q:se++,ATTRIB_VALUE_ENTITY_U:se++,CLOSE_TAG:se++,CLOSE_TAG_SAW_WHITE:se++,SCRIPT:se++,SCRIPT_ENDING:se++},V.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},V.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(V.ENTITIES).forEach(function(G){var X=V.ENTITIES[G],be="number"==typeof X?String.fromCharCode(X):X;V.ENTITIES[G]=be}),V.STATE)V.STATE[V.STATE[Te]]=Te;function me(G,X,be){G[X]&&G[X](be)}function te(G,X,be){G.textNode&&ye(G),me(G,X,be)}function ye(G){G.textNode=Oe(G.opt,G.textNode),G.textNode&&me(G,"ontext",G.textNode),G.textNode=""}function Oe(G,X){return G.trim&&(X=X.trim()),G.normalize&&(X=X.replace(/\s+/g," ")),X}function Ue(G,X){return ye(G),G.trackPosition&&(X+="\nLine: "+G.line+"\nColumn: "+G.column+"\nChar: "+G.c),X=new Error(X),G.error=X,me(G,"onerror",X),G}function nt(G){return G.sawRoot&&!G.closedRoot&&Ze(G,"Unclosed root tag"),G.state!==se.BEGIN&&G.state!==se.BEGIN_WHITESPACE&&G.state!==se.TEXT&&Ue(G,"Unexpected end"),ye(G),G.c="",G.closed=!0,me(G,"onend"),re.call(G,G.strict,G.opt),G}function Ze(G,X){if("object"!=typeof G||!(G instanceof re))throw new Error("bad call to strictFail");G.strict&&Ue(G,X)}function Je(G){G.strict||(G.tagName=G.tagName[G.looseCase]());var X=G.tags[G.tags.length-1]||G,be=G.tag={name:G.tagName,attributes:{}};G.opt.xmlns&&(be.ns=X.ns),G.attribList.length=0,te(G,"onopentagstart",be)}function Ke(G,X){var ce=G.indexOf(":")<0?["",G]:G.split(":"),Pe=ce[0],Et=ce[1];return X&&"xmlns"===G&&(Pe="xmlns",Et=""),{prefix:Pe,local:Et}}function Ve(G){if(G.strict||(G.attribName=G.attribName[G.looseCase]()),-1!==G.attribList.indexOf(G.attribName)||G.tag.attributes.hasOwnProperty(G.attribName))G.attribName=G.attribValue="";else{if(G.opt.xmlns){var X=Ke(G.attribName,!0),ce=X.local;if("xmlns"===X.prefix)if("xml"===ce&&G.attribValue!==j)Ze(G,"xml: prefix must be bound to "+j+"\nActual: "+G.attribValue);else if("xmlns"===ce&&G.attribValue!==I)Ze(G,"xmlns: prefix must be bound to "+I+"\nActual: "+G.attribValue);else{var Pe=G.tag,Et=G.tags[G.tags.length-1]||G;Pe.ns===Et.ns&&(Pe.ns=Object.create(Et.ns)),Pe.ns[ce]=G.attribValue}G.attribList.push([G.attribName,G.attribValue])}else G.tag.attributes[G.attribName]=G.attribValue,te(G,"onattribute",{name:G.attribName,value:G.attribValue});G.attribName=G.attribValue=""}}function ke(G,X){if(G.opt.xmlns){var be=G.tag,ce=Ke(G.tagName);be.prefix=ce.prefix,be.local=ce.local,be.uri=be.ns[ce.prefix]||"",be.prefix&&!be.uri&&(Ze(G,"Unbound namespace prefix: "+JSON.stringify(G.tagName)),be.uri=ce.prefix),be.ns&&(G.tags[G.tags.length-1]||G).ns!==be.ns&&Object.keys(be.ns).forEach(function(Tn){te(G,"onopennamespace",{prefix:Tn,uri:be.ns[Tn]})});for(var Et=0,pt=G.attribList.length;Et<pt;Et++){var ge=G.attribList[Et],B=ge[0],O=ge[1],k=Ke(B,!0),Ne=k.prefix,yt=""===Ne?"":be.ns[Ne]||"",It={name:B,value:O,prefix:Ne,local:k.local,uri:yt};Ne&&"xmlns"!==Ne&&!yt&&(Ze(G,"Unbound namespace prefix: "+JSON.stringify(Ne)),It.uri=Ne),G.tag.attributes[B]=It,te(G,"onattribute",It)}G.attribList.length=0}G.tag.isSelfClosing=!!X,G.sawRoot=!0,G.tags.push(G.tag),te(G,"onopentag",G.tag),X||(G.state=G.noscript||"script"!==G.tagName.toLowerCase()?se.TEXT:se.SCRIPT,G.tag=null,G.tagName=""),G.attribName=G.attribValue="",G.attribList.length=0}function Ee(G){if(!G.tagName)return Ze(G,"Weird empty close tag."),G.textNode+="</>",void(G.state=se.TEXT);if(G.script){if("script"!==G.tagName)return G.script+="</"+G.tagName+">",G.tagName="",void(G.state=se.SCRIPT);te(G,"onscript",G.script),G.script=""}var X=G.tags.length,be=G.tagName;G.strict||(be=be[G.looseCase]());for(var ce=be;X--&&G.tags[X].name!==ce;)Ze(G,"Unexpected close tag");if(X<0)return Ze(G,"Unmatched closing tag: "+G.tagName),G.textNode+="</"+G.tagName+">",void(G.state=se.TEXT);G.tagName=be;for(var Et=G.tags.length;Et-- >X;){var pt=G.tag=G.tags.pop();G.tagName=G.tag.name,te(G,"onclosetag",G.tagName);var ge={};for(var B in pt.ns)ge[B]=pt.ns[B];G.opt.xmlns&&pt.ns!==(G.tags[G.tags.length-1]||G).ns&&Object.keys(pt.ns).forEach(function(k){te(G,"onclosenamespace",{prefix:k,uri:pt.ns[k]})})}0===X&&(G.closedRoot=!0),G.tagName=G.attribValue=G.attribName="",G.attribList.length=0,G.state=se.TEXT}function Re(G){var ce,X=G.entity,be=X.toLowerCase(),Pe="";return G.ENTITIES[X]?G.ENTITIES[X]:G.ENTITIES[be]?G.ENTITIES[be]:("#"===(X=be).charAt(0)&&("x"===X.charAt(1)?(X=X.slice(2),Pe=(ce=parseInt(X,16)).toString(16)):(X=X.slice(1),Pe=(ce=parseInt(X,10)).toString(10))),X=X.replace(/^0+/,""),isNaN(ce)||Pe.toLowerCase()!==X?(Ze(G,"Invalid character entity"),"&"+G.entity+";"):String.fromCodePoint(ce))}function ze(G,X){"<"===X?(G.state=se.OPEN_WAKA,G.startTagPosition=G.position):S(X)||(Ze(G,"Non-whitespace before first tag."),G.textNode=X,G.state=se.TEXT)}function qe(G,X){var be="";return X<G.length&&(be=G.charAt(X)),be}se=V.STATE,String.fromCodePoint||(G=String.fromCharCode,X=Math.floor,be=function(){var ce=16384,Pe=[],ge=-1,B=arguments.length;if(!B)return"";for(var O="";++ge<B;){var k=Number(arguments[ge]);if(!isFinite(k)||k<0||k>1114111||X(k)!==k)throw RangeError("Invalid code point: "+k);k<=65535?Pe.push(k):Pe.push(55296+((k-=65536)>>10),k%1024+56320),(ge+1===B||Pe.length>ce)&&(O+=G.apply(null,Pe),Pe.length=0)}return O},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:be,configurable:!0,writable:!0}):String.fromCodePoint=be)}(void 0===fe?this.sax={}:fe)}).call(this)}).call(this,Y("buffer").Buffer)},{buffer:6,stream:87,string_decoder:5}],86:[function(Y,Ae,fe){(function(q,V){(function(){!function(L,re){"use strict";if(!L.setImmediate){var T,W=1,w={},x=!1,R=L.document,Q=Object.getPrototypeOf&&Object.getPrototypeOf(L);Q=Q&&Q.setTimeout?Q:L,"[object process]"==={}.toString.call(L.process)?T=function(S){q.nextTick(function(){D(S)})}:function(){if(L.postMessage&&!L.importScripts){var S=!0,U=L.onmessage;return L.onmessage=function(){S=!1},L.postMessage("","*"),L.onmessage=U,S}}()?(S="setImmediate$"+Math.random()+"$",U=function(ie){ie.source===L&&"string"==typeof ie.data&&0===ie.data.indexOf(S)&&D(+ie.data.slice(S.length))},L.addEventListener?L.addEventListener("message",U,!1):L.attachEvent("onmessage",U),T=function(ie){L.postMessage(S+ie,"*")}):L.MessageChannel?function(){var S=new MessageChannel;S.port1.onmessage=function(U){D(U.data)},T=function(U){S.port2.postMessage(U)}}():R&&"onreadystatechange"in R.createElement("script")?function(){var S=R.documentElement;T=function(U){var ie=R.createElement("script");ie.onreadystatechange=function(){D(U),ie.onreadystatechange=null,S.removeChild(ie),ie=null},S.appendChild(ie)}}():T=function(S){setTimeout(D,0,S)},Q.setImmediate=function(S){"function"!=typeof S&&(S=new Function(""+S));for(var U=new Array(arguments.length-1),ie=0;ie<U.length;ie++)U[ie]=arguments[ie+1];return w[W]={callback:S,args:U},T(W),W++},Q.clearImmediate=y}var S,U;function y(S){delete w[S]}function D(S){if(x)setTimeout(D,0,S);else{var U=w[S];if(U){x=!0;try{!function(S){var U=S.callback,ie=S.args;switch(ie.length){case 0:U();break;case 1:U(ie[0]);break;case 2:U(ie[0],ie[1]);break;case 3:U(ie[0],ie[1],ie[2]);break;default:U.apply(void 0,ie)}}(U)}finally{y(S),x=!1}}}}}("undefined"==typeof self?void 0===V?this:V:self)}).call(this)}).call(this,Y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],87:[function(Y,Ae,fe){Ae.exports=L;var q=Y("events").EventEmitter;function L(){q.call(this)}Y("inherits")(L,q),L.Readable=Y("readable-stream/lib/_stream_readable.js"),L.Writable=Y("readable-stream/lib/_stream_writable.js"),L.Duplex=Y("readable-stream/lib/_stream_duplex.js"),L.Transform=Y("readable-stream/lib/_stream_transform.js"),L.PassThrough=Y("readable-stream/lib/_stream_passthrough.js"),L.finished=Y("readable-stream/lib/internal/streams/end-of-stream.js"),L.pipeline=Y("readable-stream/lib/internal/streams/pipeline.js"),L.Stream=L,L.prototype.pipe=function(re,W){var w=this;function x(j){re.writable&&!1===re.write(j)&&w.pause&&w.pause()}function R(){w.readable&&w.resume&&w.resume()}w.on("data",x),re.on("drain",R),!re._isStdio&&(!W||!1!==W.end)&&(w.on("end",v),w.on("close",y));var T=!1;function v(){T||(T=!0,re.end())}function y(){T||(T=!0,"function"==typeof re.destroy&&re.destroy())}function E(j){if(D(),0===q.listenerCount(this,"error"))throw j}function D(){w.removeListener("data",x),re.removeListener("drain",R),w.removeListener("end",v),w.removeListener("close",y),w.removeListener("error",E),re.removeListener("error",E),w.removeListener("end",D),w.removeListener("close",D),re.removeListener("close",D)}return w.on("error",E),re.on("error",E),w.on("end",D),w.on("close",D),re.on("close",D),re.emit("pipe",w),re}},{events:8,inherits:10,"readable-stream/lib/_stream_duplex.js":68,"readable-stream/lib/_stream_passthrough.js":69,"readable-stream/lib/_stream_readable.js":70,"readable-stream/lib/_stream_transform.js":71,"readable-stream/lib/_stream_writable.js":72,"readable-stream/lib/internal/streams/end-of-stream.js":76,"readable-stream/lib/internal/streams/pipeline.js":78}],88:[function(Y,Ae,fe){arguments[4][5][0].apply(fe,arguments)},{dup:5,"safe-buffer":84}],89:[function(Y,Ae,fe){(function(q,V){(function(){var L=Y("process/browser.js").nextTick,re=Function.prototype.apply,W=Array.prototype.slice,w={},x=0;function R(T,v){this._id=T,this._clearFn=v}fe.setTimeout=function(){return new R(re.call(setTimeout,window,arguments),clearTimeout)},fe.setInterval=function(){return new R(re.call(setInterval,window,arguments),clearInterval)},fe.clearTimeout=fe.clearInterval=function(T){T.close()},R.prototype.unref=R.prototype.ref=function(){},R.prototype.close=function(){this._clearFn.call(window,this._id)},fe.enroll=function(T,v){clearTimeout(T._idleTimeoutId),T._idleTimeout=v},fe.unenroll=function(T){clearTimeout(T._idleTimeoutId),T._idleTimeout=-1},fe._unrefActive=fe.active=function(T){clearTimeout(T._idleTimeoutId);var v=T._idleTimeout;v>=0&&(T._idleTimeoutId=setTimeout(function(){T._onTimeout&&T._onTimeout()},v))},fe.setImmediate="function"==typeof q?q:function(T){var v=x++,y=!(arguments.length<2)&&W.call(arguments,1);return w[v]=!0,L(function(){w[v]&&(y?T.apply(null,y):T.call(null),fe.clearImmediate(v))}),v},fe.clearImmediate="function"==typeof V?V:function(T){delete w[T]}}).call(this)}).call(this,Y("timers").setImmediate,Y("timers").clearImmediate)},{"process/browser.js":44,timers:89}],90:[function(Y,Ae,fe){(function(q){(function(){function L(re){try{if(!q.localStorage)return!1}catch(w){return!1}var W=q.localStorage[re];return null!=W&&"true"===String(W).toLowerCase()}Ae.exports=function(re,W){if(L("noDeprecation"))return re;var w=!1;return function(){if(!w){if(L("throwDeprecation"))throw new Error(W);L("traceDeprecation")?console.trace(W):console.warn(W),w=!0}return re.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(Y,Ae,fe){"use strict";Ae.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let V=this.head;V;V=V.next)yield V.value}}},{}],92:[function(Y,Ae,fe){"use strict";function q(w){var x=this;if(x instanceof q||(x=new q),x.tail=null,x.head=null,x.length=0,w&&"function"==typeof w.forEach)w.forEach(function(v){x.push(v)});else if(arguments.length>0)for(var R=0,T=arguments.length;R<T;R++)x.push(arguments[R]);return x}function V(w,x,R){var T=x===w.head?new W(R,null,x,w):new W(R,x,x.next,w);return null===T.next&&(w.tail=T),null===T.prev&&(w.head=T),w.length++,T}function L(w,x){w.tail=new W(x,w.tail,null,w),w.head||(w.head=w.tail),w.length++}function re(w,x){w.head=new W(x,null,w.head,w),w.tail||(w.tail=w.head),w.length++}function W(w,x,R,T){if(!(this instanceof W))return new W(w,x,R,T);this.list=T,this.value=w,x?(x.next=this,this.prev=x):this.prev=null,R?(R.prev=this,this.next=R):this.next=null}Ae.exports=q,q.Node=W,q.create=q,q.prototype.removeNode=function(w){if(w.list!==this)throw new Error("removing node which does not belong to this list");var x=w.next,R=w.prev;return x&&(x.prev=R),R&&(R.next=x),w===this.head&&(this.head=x),w===this.tail&&(this.tail=R),w.list.length--,w.next=null,w.prev=null,w.list=null,x},q.prototype.unshiftNode=function(w){if(w!==this.head){w.list&&w.list.removeNode(w);var x=this.head;w.list=this,w.next=x,x&&(x.prev=w),this.head=w,this.tail||(this.tail=w),this.length++}},q.prototype.pushNode=function(w){if(w!==this.tail){w.list&&w.list.removeNode(w);var x=this.tail;w.list=this,w.prev=x,x&&(x.next=w),this.tail=w,this.head||(this.head=w),this.length++}},q.prototype.push=function(){for(var w=0,x=arguments.length;w<x;w++)L(this,arguments[w]);return this.length},q.prototype.unshift=function(){for(var w=0,x=arguments.length;w<x;w++)re(this,arguments[w]);return this.length},q.prototype.pop=function(){if(this.tail){var w=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,w}},q.prototype.shift=function(){if(this.head){var w=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,w}},q.prototype.forEach=function(w,x){x=x||this;for(var R=this.head,T=0;null!==R;T++)w.call(x,R.value,T,this),R=R.next},q.prototype.forEachReverse=function(w,x){x=x||this;for(var R=this.tail,T=this.length-1;null!==R;T--)w.call(x,R.value,T,this),R=R.prev},q.prototype.get=function(w){for(var x=0,R=this.head;null!==R&&x<w;x++)R=R.next;if(x===w&&null!==R)return R.value},q.prototype.getReverse=function(w){for(var x=0,R=this.tail;null!==R&&x<w;x++)R=R.prev;if(x===w&&null!==R)return R.value},q.prototype.map=function(w,x){x=x||this;for(var R=new q,T=this.head;null!==T;)R.push(w.call(x,T.value,this)),T=T.next;return R},q.prototype.mapReverse=function(w,x){x=x||this;for(var R=new q,T=this.tail;null!==T;)R.push(w.call(x,T.value,this)),T=T.prev;return R},q.prototype.reduce=function(w,x){var R,T=this.head;if(arguments.length>1)R=x;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");T=this.head.next,R=this.head.value}for(var v=0;null!==T;v++)R=w(R,T.value,v),T=T.next;return R},q.prototype.reduceReverse=function(w,x){var R,T=this.tail;if(arguments.length>1)R=x;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");T=this.tail.prev,R=this.tail.value}for(var v=this.length-1;null!==T;v--)R=w(R,T.value,v),T=T.prev;return R},q.prototype.toArray=function(){for(var w=new Array(this.length),x=0,R=this.head;null!==R;x++)w[x]=R.value,R=R.next;return w},q.prototype.toArrayReverse=function(){for(var w=new Array(this.length),x=0,R=this.tail;null!==R;x++)w[x]=R.value,R=R.prev;return w},q.prototype.slice=function(w,x){(x=x||this.length)<0&&(x+=this.length),(w=w||0)<0&&(w+=this.length);var R=new q;if(x<w||x<0)return R;w<0&&(w=0),x>this.length&&(x=this.length);for(var T=0,v=this.head;null!==v&&T<w;T++)v=v.next;for(;null!==v&&T<x;T++,v=v.next)R.push(v.value);return R},q.prototype.sliceReverse=function(w,x){(x=x||this.length)<0&&(x+=this.length),(w=w||0)<0&&(w+=this.length);var R=new q;if(x<w||x<0)return R;w<0&&(w=0),x>this.length&&(x=this.length);for(var T=this.length,v=this.tail;null!==v&&T>x;T--)v=v.prev;for(;null!==v&&T>w;T--,v=v.prev)R.push(v.value);return R},q.prototype.splice=function(w,x,...R){w>this.length&&(w=this.length-1),w<0&&(w=this.length+w);for(var T=0,v=this.head;null!==v&&T<w;T++)v=v.next;var y=[];for(T=0;v&&T<x;T++)y.push(v.value),v=this.removeNode(v);for(null===v&&(v=this.tail),v!==this.head&&v!==this.tail&&(v=v.prev),T=0;T<R.length;T++)v=V(this,v,R[T]);return y},q.prototype.reverse=function(){for(var w=this.head,x=this.tail,R=w;null!==R;R=R.prev){var T=R.prev;R.prev=R.next,R.next=T}return this.head=x,this.tail=w,this};try{Y("./iterator.js")(q)}catch(w){}},{"./iterator.js":91}]},{},[1])(1)},322:jt=>{jt.exports=function(tt,gt){var J=gt.length;if(0!==J){var xt=tt.length;tt.length+=J;for(var ut=0;ut<J;ut++)tt[xt+ut]=gt[ut]}}},517:(jt,it)=>{"use strict";var gt=(()=>{return(xt=gt||(gt={})).typeOfFunction="function",xt.boolTrue=!0,gt;var xt})();function J(xt,ut,Y){if(!Y||typeof Y.value!==gt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+ut+"> is not a method!");return{configurable:gt.boolTrue,get:function(){var Ae=Y.value.bind(this);return Object.defineProperty(this,ut,{value:Ae,configurable:gt.boolTrue,writable:gt.boolTrue}),Ae}}}it.ak=J,it.ZP=J},266:(jt,it,tt)=>{jt.exports={ResizeSensor:tt(835),ElementQueries:tt(845)}},845:function(jt,it,tt){"use strict";var gt,J,xt;"undefined"!=typeof window&&window,J=[tt(835)],void 0!==(xt="function"==typeof(gt=function(ut){var Y=function(){var fe,q={},V=[];function L(M){M||(M=document.documentElement);var F=window.getComputedStyle(M,null).fontSize;return parseFloat(F)||16}function W(M,F){var Q=F.split(/\d/),S=Q[Q.length-1];switch(F=parseFloat(F),S){case"px":return F;case"em":return F*L(M);case"rem":return F*L();case"vw":return F*document.documentElement.clientWidth/100;case"vh":return F*document.documentElement.clientHeight/100;case"vmin":case"vmax":var U=document.documentElement.clientWidth/100,ie=document.documentElement.clientHeight/100;return F*(0,Math["vmin"===S?"min":"max"])(U,ie);default:return F}}function w(M,F){this.element=M;var Q,S,U,ie,ue,ee,se,Te,me=["min-width","min-height","max-width","max-height"];this.call=function(){for(Q in U=function(M){if(!M.getBoundingClientRect)return{width:M.offsetWidth,height:M.offsetHeight};var F=M.getBoundingClientRect();return{width:Math.round(F.width),height:Math.round(F.height)}}(this.element),ee={},q[F])!q[F].hasOwnProperty(Q)||(ie=W(this.element,(S=q[F][Q]).value),ue="width"===S.property?U.width:U.height,se="","min"===S.mode&&ue>=ie&&(se+=S.value),"max"===S.mode&&ue<=ie&&(se+=S.value),ee[Te=S.mode+"-"+S.property]||(ee[Te]=""),se&&-1===(" "+ee[Te]+" ").indexOf(" "+se+" ")&&(ee[Te]+=" "+se));for(var te in me)!me.hasOwnProperty(te)||(ee[me[te]]?this.element.setAttribute(me[te],ee[me[te]].substr(1)):this.element.removeAttribute(me[te]))}}function x(M,F){M.elementQueriesSetupInformation||(M.elementQueriesSetupInformation=new w(M,F)),M.elementQueriesSensor||(M.elementQueriesSensor=new ut(M,function(){M.elementQueriesSetupInformation.call()}))}function R(M,F,Q,S){if(void 0===q[M]){q[M]=[];var U=V.length;fe.innerHTML+="\n"+M+" {animation: 0.1s element-queries;}",fe.innerHTML+="\n"+M+" > .resize-sensor {min-width: "+U+"px;}",V.push(M)}q[M].push({mode:F,property:Q,value:S})}function T(M){var F;if(document.querySelectorAll&&(F=M?M.querySelectorAll.bind(M):document.querySelectorAll.bind(document)),!F&&"undefined"!=typeof $$&&(F=$$),!F&&"undefined"!=typeof jQuery&&(F=jQuery),!F)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return F}function y(M){var F=[],Q=[],S=[],U=0,ie=-1,ue=[];for(var ee in M.children)if(M.children.hasOwnProperty(ee)&&M.children[ee].tagName&&"img"===M.children[ee].tagName.toLowerCase()){F.push(M.children[ee]);var se=M.children[ee].getAttribute("min-width")||M.children[ee].getAttribute("data-min-width"),Te=M.children[ee].getAttribute("data-src")||M.children[ee].getAttribute("url");S.push(Te),Q.push({minWidth:se}),se?M.children[ee].style.display="none":(U=F.length-1,M.children[ee].style.display="block")}function te(){var Oe,ye=!1;for(Oe in F)!F.hasOwnProperty(Oe)||Q[Oe].minWidth&&M.offsetWidth>Q[Oe].minWidth&&(ye=Oe);if(ye||(ye=U),ie!==ye)if(ue[ye])F[ie].style.display="none",F[ye].style.display="block",ie=ye;else{var Ue=new Image;Ue.onload=function(){F[ye].src=S[ye],F[ie].style.display="none",F[ye].style.display="block",ue[ye]=!0,ie=ye},Ue.src=S[ye]}else F[ye].src=S[ye]}ie=U,M.resizeSensorInstance=new ut(M,te),te()}var D=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,j=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function I(M){var F,Q,S,U;for(M=M.replace(/'/g,'"');null!==(F=D.exec(M));)for(Q=F[1]+F[3],S=F[2];null!==(U=j.exec(S));)R(Q,U[1],U[2],U[3])}function $(M){var F="";if(M)if("string"==typeof M)(-1!==(M=M.toLowerCase()).indexOf("min-width")||-1!==M.indexOf("max-width"))&&I(M);else for(var Q=0,S=M.length;Q<S;Q++)1===M[Q].type?(-1!==(F=M[Q].selectorText||M[Q].cssText).indexOf("min-height")||-1!==F.indexOf("max-height")||-1!==F.indexOf("min-width")||-1!==F.indexOf("max-width"))&&I(F):4===M[Q].type?$(M[Q].cssRules||M[Q].rules):3===M[Q].type&&M[Q].styleSheet.hasOwnProperty("cssRules")&&$(M[Q].styleSheet.cssRules)}var K=!1;this.init=function(){var M="animationstart";void 0!==document.documentElement.style.webkitAnimationName?M="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?M="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(M="oanimationstart"),document.body.addEventListener(M,function(S){var U=S.target,ie=U&&window.getComputedStyle(U,null),ue=ie&&ie.getPropertyValue("animation-name");if(ue&&-1!==ue.indexOf("element-queries")){U.elementQueriesSensor=new ut(U,function(){U.elementQueriesSetupInformation&&U.elementQueriesSetupInformation.call()});var Te=window.getComputedStyle(U.resizeSensor,null).getPropertyValue("min-width");Te=parseInt(Te.replace("px","")),x(S.target,V[Te])}}),K||((fe=document.createElement("style")).type="text/css",fe.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",fe.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(fe),K=!0);for(var F=0,Q=document.styleSheets.length;F<Q;F++)try{document.styleSheets[F].href&&0===document.styleSheets[F].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[F].href),$(document.styleSheets[F].cssRules||document.styleSheets[F].rules||document.styleSheets[F].cssText)}catch(S){}!function(){for(var F=T()("[data-responsive-image],[responsive-image]"),Q=0,S=F.length;Q<S;Q++)y(F[Q])}()},this.findElementQueriesElements=function(M){!function(M){var F=T(M);for(var Q in q)if(q.hasOwnProperty(Q))for(var S=F(Q,M),U=0,ie=S.length;U<ie;U++)x(S[U],Q)}(M)},this.update=function(){this.init()}};Y.update=function(){Y.instance.update()},Y.detach=function(fe){fe.elementQueriesSetupInformation?(fe.elementQueriesSensor.detach(),delete fe.elementQueriesSetupInformation,delete fe.elementQueriesSensor):fe.resizeSensorInstance&&(fe.resizeSensorInstance.detach(),delete fe.resizeSensorInstance)},Y.init=function(){Y.instance||(Y.instance=new Y),Y.instance.init()};return Y.findElementQueriesElements=function(fe){Y.instance.findElementQueriesElements(fe)},Y.listen=function(){!function(fe){if(document.addEventListener)document.addEventListener("DOMContentLoaded",fe,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var q=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(fe(),clearInterval(q))},10);else window.onload=fe}(Y.init)},Y})?gt.apply(it,J):gt)&&(jt.exports=xt)},835:function(jt,it,tt){"use strict";var gt,J;"undefined"!=typeof window&&window,void 0!==(J="function"==typeof(gt=function(){if("undefined"==typeof window)return null;var xt="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),ut=xt.requestAnimationFrame||xt.mozRequestAnimationFrame||xt.webkitRequestAnimationFrame||function(re){return xt.setTimeout(re,20)},Y=xt.cancelAnimationFrame||xt.mozCancelAnimationFrame||xt.webkitCancelAnimationFrame||function(re){xt.clearTimeout(re)};function Ae(re,W){var w=Object.prototype.toString.call(re),x="[object Array]"===w||"[object NodeList]"===w||"[object HTMLCollection]"===w||"[object Object]"===w||"undefined"!=typeof jQuery&&re instanceof jQuery||"undefined"!=typeof Elements&&re instanceof Elements,R=0,T=re.length;if(x)for(;R<T;R++)W(re[R]);else W(re)}function fe(re){if(!re.getBoundingClientRect)return{width:re.offsetWidth,height:re.offsetHeight};var W=re.getBoundingClientRect();return{width:Math.round(W.width),height:Math.round(W.height)}}function q(re,W){Object.keys(W).forEach(function(w){re.style[w]=W[w]})}var V=function(re,W){var w=0;function x(){var v,y,T=[];this.add=function(E){T.push(E)},this.call=function(E){for(v=0,y=T.length;v<y;v++)T[v].call(this,E)},this.remove=function(E){var D=[];for(v=0,y=T.length;v<y;v++)T[v]!==E&&D.push(T[v]);T=D},this.length=function(){return T.length}}function R(T,v){if(T){if(T.resizedAttached)return void T.resizedAttached.add(v);T.resizedAttached=new x,T.resizedAttached.add(v),T.resizeSensor=document.createElement("div"),T.resizeSensor.dir="ltr",T.resizeSensor.className="resize-sensor";var y={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},E={position:"absolute",left:"0px",top:"0px",transition:"0s"};q(T.resizeSensor,y);var D=document.createElement("div");D.className="resize-sensor-expand",q(D,y);var j=document.createElement("div");q(j,E),D.appendChild(j);var I=document.createElement("div");I.className="resize-sensor-shrink",q(I,y);var $=document.createElement("div");q($,E),q($,{width:"200%",height:"200%"}),I.appendChild($),T.resizeSensor.appendChild(D),T.resizeSensor.appendChild(I),T.appendChild(T.resizeSensor);var K=window.getComputedStyle(T),M=K?K.getPropertyValue("position"):null;"absolute"!==M&&"relative"!==M&&"fixed"!==M&&"sticky"!==M&&(T.style.position="relative");var F=!1,Q=0,S=fe(T),U=0,ie=0,ue=!0;w=0;var se=function(){if(ue){if(0===T.offsetWidth&&0===T.offsetHeight)return void(w||(w=ut(function(){w=0,se()})));ue=!1}var ye,Oe;Oe=T.offsetHeight,j.style.width=(ye=T.offsetWidth)+10+"px",j.style.height=Oe+10+"px",D.scrollLeft=ye+10,D.scrollTop=Oe+10,I.scrollLeft=ye+10,I.scrollTop=Oe+10};T.resizeSensor.resetSensor=se;var Te=function(){Q=0,F&&(U=S.width,ie=S.height,T.resizedAttached&&T.resizedAttached.call(S))},me=function(){S=fe(T),(F=S.width!==U||S.height!==ie)&&!Q&&(Q=ut(Te)),se()},te=function(ye,Oe,Ue){ye.attachEvent?ye.attachEvent("on"+Oe,Ue):ye.addEventListener(Oe,Ue)};te(D,"scroll",me),te(I,"scroll",me),w=ut(function(){w=0,se()})}}Ae(re,function(T){R(T,W)}),this.detach=function(T){w||(Y(w),w=0),V.detach(re,T)},this.reset=function(){re.resizeSensor.resetSensor()}};if(V.reset=function(re){Ae(re,function(W){W.resizeSensor.resetSensor()})},V.detach=function(re,W){Ae(re,function(w){!w||w.resizedAttached&&"function"==typeof W&&(w.resizedAttached.remove(W),w.resizedAttached.length())||w.resizeSensor&&(w.contains(w.resizeSensor)&&w.removeChild(w.resizeSensor),delete w.resizeSensor,delete w.resizedAttached)})},"undefined"!=typeof MutationObserver){var L=new MutationObserver(function(re){for(var W in re)if(re.hasOwnProperty(W))for(var w=re[W].addedNodes,x=0;x<w.length;x++)w[x].resizeSensor&&V.reset(w[x])});document.addEventListener("DOMContentLoaded",function(re){L.observe(document.body,{childList:!0,subtree:!0})})}return V})?gt.call(it,tt,it,jt):gt)&&(jt.exports=J)},445:(jt,it,tt)=>{var gt=tt(910),J=tt(369),xt=tt(322);function ut(re,W,w){if(!gt(re))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!re.hasNode(W))throw new Error('graphology-shortest-path: the "'+W+'" source node does not exist in the given graph.');if(!re.hasNode(w))throw new Error('graphology-shortest-path: the "'+w+'" target node does not exist in the given graph.');if((W=""+W)==(w=""+w))return[W];var x=re.inboundNeighbors.bind(re),R=re.outboundNeighbors.bind(re),T={},v={};T[W]=null,v[w]=null;var D,j,I,$,K,M,F,Q,y=[W],E=[w],S=!1;e:for(;y.length&&E.length;)if(y.length<=E.length){for(D=y,y=[],K=0,F=D.length;K<F;K++)for(M=0,Q=(I=R(j=D[K])).length;M<Q;M++)if(($=I[M])in T||(y.push($),T[$]=j),$ in v){S=!0;break e}}else for(D=E,E=[],K=0,F=D.length;K<F;K++)for(j=D[K],I=x(j),M=0,Q=I.length;M<Q;M++)if($=I[M],$ in v||(E.push($),v[$]=j),$ in T){S=!0;break e}if(!S)return null;for(var U=[];$;)U.unshift($),$=T[$];for($=v[U[U.length-1]];$;)U.push($),$=v[$];return U.length?U:null}function Y(re,W){if(!gt(re))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!re.hasNode(W))throw new Error('graphology-shortest-path: the "'+W+'" source node does not exist in the given graph.');var R,T,v,y,E,D,w={},x={};for(w[W=""+W]=!0,x[W]=[W];Object.keys(w).length;)for(v in R=w,w={},R)for(E=0,D=(T=re.outboundNeighbors(v)).length;E<D;E++)x[y=T[E]]||(x[y]=x[v].concat(y),w[y]=!0);return x}function Ae(re,W,w){if(!gt(W))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!W.hasNode(w))throw new Error('graphology-shortest-path: the "'+w+'" source node does not exist in the given graph.');w=""+w;var x=new Set,R={},T=0;R[w]=0;for(var y,E,D,v=[w];0!==v.length;){var j=[];for(y=0,E=v.length;y<E;y++)!x.has(D=v[y])&&(x.add(D),xt(j,W[re](D)),R[D]=T);T++,v=j}return R}var fe=Ae.bind(null,"outboundNeighbors"),q=Ae.bind(null,"neighbors");function V(re,W,w){return arguments.length<3?Y(re,W):ut(re,W,w)}V.bidirectional=ut,V.singleSource=Y,V.singleSourceLength=fe,V.undirectedSingleSourceLength=q,V.brandes=function(re,W){W=""+W;var v,y,E,D,j,I,$,K,M,w=[],x={},R={},T=re.nodes();for(I=0,K=T.length;I<K;I++)x[D=T[I]]=[],R[D]=0;var F={};R[W]=1,F[W]=0;for(var Q=J.of(W);Q.size;)for(D=Q.dequeue(),w.push(D),v=F[D],y=R[D],$=0,M=(E=re.outboundNeighbors(D)).length;$<M;$++)(j=E[$])in F||(Q.enqueue(j),F[j]=v+1),F[j]===v+1&&(R[j]+=y,x[j].push(D));return[w,x,R]},jt.exports=V},910:jt=>{jt.exports=function(tt){return null!==tt&&"object"==typeof tt&&"function"==typeof tt.addUndirectedEdgeWithKey&&"function"==typeof tt.dropNode&&"boolean"==typeof tt.multi}},698:function(jt){jt.exports=function(){"use strict";function it(ne){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ne)}function tt(ne,de){ne.prototype=Object.create(de.prototype),ne.prototype.constructor=ne,J(ne,de)}function gt(ne){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)})(ne)}function J(ne,de){return(J=Object.setPrototypeOf||function(oe,A){return oe.__proto__=A,oe})(ne,de)}function xt(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}function ut(ne,de,oe){return(ut=xt()?Reflect.construct:function(A,P,Z){var we=[null];we.push.apply(we,P);var Le=new(Function.bind.apply(A,we));return Z&&J(Le,Z.prototype),Le}).apply(null,arguments)}function Y(ne){var de="function"==typeof Map?new Map:void 0;return(Y=function(oe){if(null===oe||-1===Function.toString.call(oe).indexOf("[native code]"))return oe;if("function"!=typeof oe)throw new TypeError("Super expression must either be null or a function");if(void 0!==de){if(de.has(oe))return de.get(oe);de.set(oe,P)}function P(){return ut(oe,arguments,gt(this).constructor)}return P.prototype=Object.create(oe.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),J(P,oe)})(ne)}function Ae(ne){if(void 0===ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}var fe=function(){for(var ne=arguments[0],de=1,oe=arguments.length;de<oe;de++)if(arguments[de])for(var A in arguments[de])ne[A]=arguments[de][A];return ne};function q(ne,de,oe,A){var P=ne._nodes.get(de),Z=null;return P?Z="mixed"===A?P.out&&P.out[oe]||P.undirected&&P.undirected[oe]:"directed"===A?P.out&&P.out[oe]:P.undirected&&P.undirected[oe]:Z}function V(ne){return null!==ne&&"object"===it(ne)&&"function"==typeof ne.addUndirectedEdgeWithKey&&"function"==typeof ne.dropNode}function L(ne){return"object"===it(ne)&&null!==ne&&ne.constructor===Object}function re(ne){var de;for(de in ne)return!1;return!0}function W(ne,de,oe){Object.defineProperty(ne,de,{enumerable:!1,configurable:!1,writable:!0,value:oe})}function w(ne,de,oe){var A={enumerable:!0,configurable:!0};"function"==typeof oe?A.get=oe:(A.value=oe,A.writable=!1),Object.defineProperty(ne,de,A)}function x(ne){return!(!L(ne)||ne.attributes&&!Array.isArray(ne.attributes))}"function"==typeof Object.assign&&(fe=Object.assign);var R,T={exports:{}},v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(ne,de,oe){return Function.prototype.apply.call(ne,de,oe)};R=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(ne){return Object.getOwnPropertyNames(ne).concat(Object.getOwnPropertySymbols(ne))}:function(ne){return Object.getOwnPropertyNames(ne)};var E=Number.isNaN||function(ne){return ne!=ne};function D(){D.init.call(this)}T.exports=D,T.exports.once=function(ne,de){return new Promise(function(oe,A){function P(we){ne.removeListener(de,Z),A(we)}function Z(){"function"==typeof ne.removeListener&&ne.removeListener("error",P),oe([].slice.call(arguments))}var we;ie(ne,de,Z,{once:!0}),"error"!==de&&("function"==typeof(we=ne).on&&ie(we,"error",P,{once:!0}))})},D.EventEmitter=D,D.prototype._events=void 0,D.prototype._eventsCount=0,D.prototype._maxListeners=void 0;var j=10;function I(ne){if("function"!=typeof ne)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}function $(ne){return void 0===ne._maxListeners?D.defaultMaxListeners:ne._maxListeners}function K(ne,de,oe,A){var P,Z,we;if(I(oe),void 0===(Z=ne._events)?(Z=ne._events=Object.create(null),ne._eventsCount=0):(void 0!==Z.newListener&&(ne.emit("newListener",de,oe.listener?oe.listener:oe),Z=ne._events),we=Z[de]),void 0===we)we=Z[de]=oe,++ne._eventsCount;else if("function"==typeof we?we=Z[de]=A?[oe,we]:[we,oe]:A?we.unshift(oe):we.push(oe),(P=$(ne))>0&&we.length>P&&!we.warned){we.warned=!0;var et=new Error("Possible EventEmitter memory leak detected. "+we.length+" "+String(de)+" listeners added. Use emitter.setMaxListeners() to increase limit");et.name="MaxListenersExceededWarning",et.emitter=ne,et.type=de,et.count=we.length,console&&console.warn&&console.warn(et)}return ne}function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(ne,de,oe){var A={fired:!1,wrapFn:void 0,target:ne,type:de,listener:oe},P=M.bind(A);return P.listener=oe,A.wrapFn=P,P}function Q(ne,de,oe){var A=ne._events;if(void 0===A)return[];var P=A[de];return void 0===P?[]:"function"==typeof P?oe?[P.listener||P]:[P]:oe?function(Z){for(var we=new Array(Z.length),Le=0;Le<we.length;++Le)we[Le]=Z[Le].listener||Z[Le];return we}(P):U(P,P.length)}function S(ne){var de=this._events;if(void 0!==de){var oe=de[ne];if("function"==typeof oe)return 1;if(void 0!==oe)return oe.length}return 0}function U(ne,de){for(var oe=new Array(de),A=0;A<de;++A)oe[A]=ne[A];return oe}function ie(ne,de,oe,A){if("function"==typeof ne.on)A.once?ne.once(de,oe):ne.on(de,oe);else{if("function"!=typeof ne.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne);ne.addEventListener(de,function P(Z){A.once&&ne.removeEventListener(de,P),oe(Z)})}}function ue(ne){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ne}),this.done=!1}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(ne){if("number"!=typeof ne||ne<0||E(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");j=ne}}),D.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},D.prototype.setMaxListeners=function(ne){if("number"!=typeof ne||ne<0||E(ne))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ne+".");return this._maxListeners=ne,this},D.prototype.getMaxListeners=function(){return $(this)},D.prototype.emit=function(ne){for(var de=[],oe=1;oe<arguments.length;oe++)de.push(arguments[oe]);var A="error"===ne,P=this._events;if(void 0!==P)A=A&&void 0===P.error;else if(!A)return!1;if(A){var Z;if(de.length>0&&(Z=de[0]),Z instanceof Error)throw Z;var we=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw we.context=Z,we}var Le=P[ne];if(void 0===Le)return!1;if("function"==typeof Le)y(Le,this,de);else{var et=Le.length,Dt=U(Le,et);for(oe=0;oe<et;++oe)y(Dt[oe],this,de)}return!0},D.prototype.on=D.prototype.addListener=function(ne,de){return K(this,ne,de,!1)},D.prototype.prependListener=function(ne,de){return K(this,ne,de,!0)},D.prototype.once=function(ne,de){return I(de),this.on(ne,F(this,ne,de)),this},D.prototype.prependOnceListener=function(ne,de){return I(de),this.prependListener(ne,F(this,ne,de)),this},D.prototype.off=D.prototype.removeListener=function(ne,de){var oe,A,P,Z,we;if(I(de),void 0===(A=this._events))return this;if(void 0===(oe=A[ne]))return this;if(oe===de||oe.listener===de)0==--this._eventsCount?this._events=Object.create(null):(delete A[ne],A.removeListener&&this.emit("removeListener",ne,oe.listener||de));else if("function"!=typeof oe){for(P=-1,Z=oe.length-1;Z>=0;Z--)if(oe[Z]===de||oe[Z].listener===de){we=oe[Z].listener,P=Z;break}if(P<0)return this;0===P?oe.shift():function(Le,et){for(;et+1<Le.length;et++)Le[et]=Le[et+1];Le.pop()}(oe,P),1===oe.length&&(A[ne]=oe[0]),void 0!==A.removeListener&&this.emit("removeListener",ne,we||de)}return this},D.prototype.removeAllListeners=function(ne){var de,oe,A;if(void 0===(oe=this._events))return this;if(void 0===oe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==oe[ne]&&(0==--this._eventsCount?this._events=Object.create(null):delete oe[ne]),this;if(0===arguments.length){var P,Z=Object.keys(oe);for(A=0;A<Z.length;++A)"removeListener"!==(P=Z[A])&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(de=oe[ne]))this.removeListener(ne,de);else if(void 0!==de)for(A=de.length-1;A>=0;A--)this.removeListener(ne,de[A]);return this},D.prototype.listeners=function(ne){return Q(this,ne,!0)},D.prototype.rawListeners=function(ne){return Q(this,ne,!1)},D.listenerCount=function(ne,de){return"function"==typeof ne.listenerCount?ne.listenerCount(de):S.call(ne,de)},D.prototype.listenerCount=S,D.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]},ue.prototype.next=function(){if(this.done)return{done:!0};var ne=this._next();return ne.done&&(this.done=!0),ne},"undefined"!=typeof Symbol&&(ue.prototype[Symbol.iterator]=function(){return this}),ue.of=function(){var ne=arguments,de=ne.length,oe=0;return new ue(function(){return oe>=de?{done:!0}:{done:!1,value:ne[oe++]}})},ue.empty=function(){var ne=new ue(null);return ne.done=!0,ne},ue.is=function(ne){return ne instanceof ue||"object"==typeof ne&&null!==ne&&"function"==typeof ne.next};var ee=ue,se=function(ne,de){for(var oe,A=arguments.length>1?de:1/0,P=A!==1/0?new Array(A):[],Z=0;;){if(Z===A)return P;if((oe=ne.next()).done)return Z!==de?P.slice(0,Z):P;P[Z++]=oe.value}},Te=function(ne){function de(oe,A){var P;return(P=ne.call(this)||this).name="GraphError",P.message=oe||"",P.data=A||{},P}return tt(de,ne),de}(Y(Error)),me=function(ne){function de(oe,A){var P;return(P=ne.call(this,oe,A)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Ae(P),de.prototype.constructor),P}return tt(de,ne),de}(Te),te=function(ne){function de(oe,A){var P;return(P=ne.call(this,oe,A)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Ae(P),de.prototype.constructor),P}return tt(de,ne),de}(Te),ye=function(ne){function de(oe,A){var P;return(P=ne.call(this,oe,A)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Ae(P),de.prototype.constructor),P}return tt(de,ne),de}(Te);function Oe(ne,de){this.key=ne,this.attributes=de,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function Ue(ne,de){this.key=ne,this.attributes=de,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function nt(ne,de){this.key=ne,this.attributes=de,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ze(ne,de,oe,A,P,Z){this.key=de,this.attributes=Z,this.undirected=ne,this.source=A,this.target=P,this.generatedKey=oe}function Je(ne,de,oe,A,P,Z,we){var Le,et,Dt="out",$e="in";if(de&&(Dt=$e="undirected"),ne.multi){if(void 0===(et=(Le=Z[Dt])[P])&&(et=new Set,Le[P]=et),et.add(oe),A===P&&de)return;void 0===(Le=we[$e])[A]&&(Le[A]=et)}else{if(Z[Dt][P]=oe,A===P&&de)return;we[$e][A]=oe}}function Ke(ne,de,oe){var A=ne.multi,P=oe.source,Z=oe.target,we=P.key,Le=Z.key,et=P[de?"undirected":"out"],Dt=de?"undirected":"in";if(Le in et)if(A){var $e=et[Le];1===$e.size?(delete et[Le],delete Z[Dt][we]):$e.delete(oe)}else delete et[Le];A||delete Z[Dt][we]}Ue.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},nt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var Ve=[{name:function(ne){return"get".concat(ne,"Attribute")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P){var Z;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var we=""+A,Le=""+P;if(P=arguments[2],!(Z=q(this,we,Le,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(we,'" - "').concat(Le,'").'))}else if(!(Z=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if("mixed"!==oe&&Z.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return Z.attributes[P]}}},{name:function(ne){return"get".concat(ne,"Attributes")},attacher:function(ne,de,oe){ne.prototype[de]=function(A){var P;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+A,we=""+arguments[1];if(!(P=q(this,Z,we,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(Z,'" - "').concat(we,'").'))}else if(!(P=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if("mixed"!==oe&&P.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return P.attributes}}},{name:function(ne){return"has".concat(ne,"Attribute")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P){var Z;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var we=""+A,Le=""+P;if(P=arguments[2],!(Z=q(this,we,Le,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(we,'" - "').concat(Le,'").'))}else if(!(Z=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if("mixed"!==oe&&Z.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return Z.attributes.hasOwnProperty(P)}}},{name:function(ne){return"set".concat(ne,"Attribute")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P,Z){var we;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+A,et=""+P;if(P=arguments[2],Z=arguments[3],!(we=q(this,Le,et,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(Le,'" - "').concat(et,'").'))}else if(!(we=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if("mixed"!==oe&&we.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return we.attributes[P]=Z,this.emit("edgeAttributesUpdated",{key:we.key,type:"set",attributes:we.attributes,name:P}),this}}},{name:function(ne){return"update".concat(ne,"Attribute")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P,Z){var we;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Le=""+A,et=""+P;if(P=arguments[2],Z=arguments[3],!(we=q(this,Le,et,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(Le,'" - "').concat(et,'").'))}else if(!(we=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if("function"!=typeof Z)throw new me("Graph.".concat(de,": updater should be a function."));if("mixed"!==oe&&we.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return we.attributes[P]=Z(we.attributes[P]),this.emit("edgeAttributesUpdated",{key:we.key,type:"set",attributes:we.attributes,name:P}),this}}},{name:function(ne){return"remove".concat(ne,"Attribute")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P){var Z;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var we=""+A,Le=""+P;if(P=arguments[2],!(Z=q(this,we,Le,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(we,'" - "').concat(Le,'").'))}else if(!(Z=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if("mixed"!==oe&&Z.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return delete Z.attributes[P],this.emit("edgeAttributesUpdated",{key:Z.key,type:"remove",attributes:Z.attributes,name:P}),this}}},{name:function(ne){return"replace".concat(ne,"Attributes")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P){var Z;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var we=""+A,Le=""+P;if(P=arguments[2],!(Z=q(this,we,Le,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(we,'" - "').concat(Le,'").'))}else if(!(Z=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if(!L(P))throw new me("Graph.".concat(de,": provided attributes are not a plain object."));if("mixed"!==oe&&Z.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return Z.attributes=P,this.emit("edgeAttributesUpdated",{key:Z.key,type:"replace",attributes:Z.attributes}),this}}},{name:function(ne){return"merge".concat(ne,"Attributes")},attacher:function(ne,de,oe){ne.prototype[de]=function(A,P){var Z;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ye("Graph.".concat(de,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ye("Graph.".concat(de,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var we=""+A,Le=""+P;if(P=arguments[2],!(Z=q(this,we,Le,oe)))throw new te("Graph.".concat(de,': could not find an edge for the given path ("').concat(we,'" - "').concat(Le,'").'))}else if(!(Z=this._edges.get(A=""+A)))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" edge in the graph.'));if(!L(P))throw new me("Graph.".concat(de,": provided attributes are not a plain object."));if("mixed"!==oe&&Z.undirected!==("undirected"===oe))throw new te("Graph.".concat(de,': could not find the "').concat(A,'" ').concat(oe," edge in the graph."));return fe(Z.attributes,P),this.emit("edgeAttributesUpdated",{key:Z.key,type:"merge",attributes:Z.attributes,data:P}),this}}}],ke=ee,Ee=function(){var ne,de=arguments,oe=-1;return new ke(function A(){if(!ne){if(++oe>=de.length)return{done:!0};ne=de[oe]}var P=ne.next();return P.done?(ne=null,A()):P})},Re=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ze(ne,de){for(var oe in de)ne.push(de[oe].key)}function qe(ne,de){for(var oe in de)de[oe].forEach(function(A){return ne.push(A.key)})}function je(ne,de,oe){for(var A in ne)if(A!==oe){var P=ne[A];de(P.key,P.attributes,P.source.key,P.target.key,P.source.attributes,P.target.attributes,P.undirected,P.generatedKey)}}function G(ne,de,oe){for(var A in ne)A!==oe&&ne[A].forEach(function(P){return de(P.key,P.attributes,P.source.key,P.target.key,P.source.attributes,P.target.attributes,P.undirected,P.generatedKey)})}function X(ne,de,oe){for(var A in ne)if(A!==oe){var P=ne[A];if(de(P.key,P.attributes,P.source.key,P.target.key,P.source.attributes,P.target.attributes,P.undirected,P.generatedKey))return!0}return!1}function be(ne,de,oe){var A,P,Z,we,Le;for(var et in ne)if(et!==oe)for(A=ne[et].values();!0!==(P=A.next()).done;)if(we=(Z=P.value).source,de(Z.key,Z.attributes,we.key,(Le=Z.target).key,we.attributes,Le.attributes,Z.undirected,Z.generatedKey))return!0;return!1}function ce(ne,de){var oe=Object.keys(ne),A=oe.length,P=null,Z=0;return new ee(function we(){var Le;if(P){var et=P.next();if(et.done)return P=null,Z++,we();Le=et.value}else{if(Z>=A)return{done:!0};var Dt=oe[Z];if(Dt===de)return Z++,we();if((Le=ne[Dt])instanceof Set)return P=Le.values(),we();Z++}return{done:!1,value:[Le.key,Le.attributes,Le.source.key,Le.target.key,Le.source.attributes,Le.target.attributes]}})}function Pe(ne,de,oe){var A=de[oe];A&&ne.push(A.key)}function Et(ne,de,oe){var A=de[oe];A&&A.forEach(function(P){return ne.push(P.key)})}function pt(ne,de,oe){var A=ne[de];if(A){var P=A.source,Z=A.target;oe(A.key,A.attributes,P.key,Z.key,P.attributes,Z.attributes,A.undirected,A.generatedKey)}}function ge(ne,de,oe){var A=ne[de];A&&A.forEach(function(P){return oe(P.key,P.attributes,P.source.key,P.target.key,P.source.attributes,P.target.attributes,P.undirected,P.generatedKey)})}function B(ne,de,oe){var A=ne[de];if(A){var P=A.source,Z=A.target;return oe(A.key,A.attributes,P.key,Z.key,P.attributes,Z.attributes,A.undirected,A.generatedKey)}}function O(ne,de,oe){var A=ne[de];if(A){for(var P,Z,we=A.values();!0!==(P=we.next()).done;)if(oe((Z=P.value).key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected,Z.generatedKey))return!0;return!1}}function k(ne,de){var oe=ne[de];if(oe instanceof Set){var A=oe.values();return new ee(function(){var P=A.next();if(P.done)return P;var Z=P.value;return{done:!1,value:[Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes]}})}return ee.of([oe.key,oe.attributes,oe.source.key,oe.target.key,oe.source.attributes,oe.target.attributes])}function Ne(ne,de){if(0===ne.size)return[];if("mixed"===de||de===ne.type)return"function"==typeof Array.from?Array.from(ne._edges.keys()):se(ne._edges.keys(),ne._edges.size);for(var oe,A,Z=new Array("undirected"===de?ne.undirectedSize:ne.directedSize),we="undirected"===de,Le=ne._edges.values(),et=0;!0!==(oe=Le.next()).done;)(A=oe.value).undirected===we&&(Z[et++]=A.key);return Z}function Xe(ne,de,oe){if(0!==ne.size)for(var A,P,Z="mixed"!==de&&de!==ne.type,we="undirected"===de,Le=ne._edges.values();!0!==(A=Le.next()).done;)if(P=A.value,!Z||P.undirected===we){var Gt=P.source,vt=P.target;oe(P.key,P.attributes,Gt.key,vt.key,Gt.attributes,vt.attributes,P.undirected,P.generatedKey)}}function yt(ne,de,oe){if(0!==ne.size)for(var A,P,Z="mixed"!==de&&de!==ne.type,we="undirected"===de,Le=ne._edges.values();!0!==(A=Le.next()).done;)if(P=A.value,!Z||P.undirected===we){var Gt=P.source,vt=P.target;if(oe(P.key,P.attributes,Gt.key,vt.key,Gt.attributes,vt.attributes,P.undirected,P.generatedKey))break}}function It(ne,de){if(0===ne.size)return ee.empty();var oe="mixed"!==de&&de!==ne.type,A="undirected"===de,P=ne._edges.values();return new ee(function(){for(var Z,we;;){if((Z=P.next()).done)return Z;if(we=Z.value,!oe||we.undirected===A)break}return{value:[we.key,we.attributes,we.source.key,we.target.key,we.source.attributes,we.target.attributes],done:!1}})}function Tn(ne,de,oe,A){var P=[],Z=ne?qe:ze;return"undirected"!==de&&("out"!==oe&&Z(P,A.in),"in"!==oe&&Z(P,A.out),!oe&&A.directedSelfLoops>0&&P.splice(P.lastIndexOf(A.key),1)),"directed"!==de&&Z(P,A.undirected),P}function Rn(ne,de,oe,A,P){var Z=ne?G:je;"undirected"!==de&&("out"!==oe&&Z(A.in,P),"in"!==oe&&Z(A.out,P,oe?null:A.key)),"directed"!==de&&Z(A.undirected,P)}function Hn(ne,de,oe,A,P){var Z=ne?be:X;"undirected"!==de&&("out"!==oe&&Z(A.in,P)||"in"!==oe&&Z(A.out,P,oe?null:A.key))||"directed"===de||Z(A.undirected,P)}function bi(ne,de,oe){var A=ee.empty();return"undirected"!==ne&&("out"!==de&&void 0!==oe.in&&(A=Ee(A,ce(oe.in))),"in"!==de&&void 0!==oe.out&&(A=Ee(A,ce(oe.out,de?null:oe.key)))),"directed"!==ne&&void 0!==oe.undirected&&(A=Ee(A,ce(oe.undirected))),A}function di(ne,de,oe,A,P){var Z=de?Et:Pe,we=[];return"undirected"!==ne&&(void 0!==A.in&&"out"!==oe&&Z(we,A.in,P),void 0!==A.out&&"in"!==oe&&Z(we,A.out,P),!oe&&A.directedSelfLoops>0&&we.splice(we.lastIndexOf(A.key),1)),"directed"!==ne&&void 0!==A.undirected&&Z(we,A.undirected,P),we}function Ur(ne,de,oe,A,P,Z){var we=de?ge:pt;"undirected"!==ne&&(void 0!==A.in&&"out"!==oe&&we(A.in,P,Z),A.key!==P&&void 0!==A.out&&"in"!==oe&&we(A.out,P,Z)),"directed"!==ne&&void 0!==A.undirected&&we(A.undirected,P,Z)}function Ns(ne,de,oe,A,P,Z){var we=de?O:B;"undirected"!==ne&&(void 0!==A.in&&"out"!==oe&&we(A.in,P,Z)||A.key!==P&&void 0!==A.out&&"in"!==oe&&we(A.out,P,Z,oe?null:A.key))||"directed"===ne||void 0===A.undirected||we(A.undirected,P,Z)}function cs(ne,de,oe,A){var P=ee.empty();return"undirected"!==ne&&(void 0!==oe.in&&"out"!==de&&A in oe.in&&(P=Ee(P,k(oe.in,A))),void 0!==oe.out&&"in"!==de&&A in oe.out&&(P=Ee(P,k(oe.out,A)))),"directed"!==ne&&void 0!==oe.undirected&&A in oe.undirected&&(P=Ee(P,k(oe.undirected,A))),P}var Ps=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function zr(ne,de){if(void 0!==de)for(var oe in de)ne.add(oe)}function da(ne,de,oe){if("mixed"!==ne){if("undirected"===ne)return Object.keys(oe.undirected);if("string"==typeof de)return Object.keys(oe[de])}var A=new Set;return"undirected"!==ne&&("out"!==de&&zr(A,oe.in),"in"!==de&&zr(A,oe.out)),"directed"!==ne&&zr(A,oe.undirected),se(A.values(),A.size)}function Sl(ne,de,oe){for(var A in de){var P=de[A];P instanceof Set&&(P=P.values().next().value);var Z=P.source,Le=Z===ne?P.target:Z;oe(Le.key,Le.attributes)}}function ha(ne,de,oe,A){for(var P in oe){var Z=oe[P];Z instanceof Set&&(Z=Z.values().next().value);var we=Z.source,et=we===de?Z.target:we;ne.has(et.key)||(ne.add(et.key),A(et.key,et.attributes))}}function ms(ne,de,oe){for(var A in de){var P=de[A];P instanceof Set&&(P=P.values().next().value);var Z=P.source,Le=Z===ne?P.target:Z;if(oe(Le.key,Le.attributes))return!0}return!1}function Jt(ne,de,oe,A){for(var P in oe){var Z=oe[P];Z instanceof Set&&(Z=Z.values().next().value);var we=Z.source,et=we===de?Z.target:we;if(!ne.has(et.key)&&(ne.add(et.key),A(et.key,et.attributes)))return!0}return!1}function Ha(ne,de){var oe=Object.keys(de),A=oe.length,P=0;return new ee(function(){if(P>=A)return{done:!0};var Z=de[oe[P++]];Z instanceof Set&&(Z=Z.values().next().value);var we=Z.source,et=we===ne?Z.target:we;return{done:!1,value:[et.key,et.attributes]}})}function rt(ne,de,oe){var A=Object.keys(oe),P=A.length,Z=0;return new ee(function we(){if(Z>=P)return{done:!0};var Le=oe[A[Z++]];Le instanceof Set&&(Le=Le.values().next().value);var et=Le.source,$e=et===de?Le.target:et;return ne.has($e.key)?we():(ne.add($e.key),{done:!1,value:[$e.key,$e.attributes]})})}function ot(ne,de,oe,A,P){var Z=ne._nodes.get(A);if("undirected"!==de){if("out"!==oe&&void 0!==Z.in)for(var we in Z.in)if(we===P)return!0;if("in"!==oe&&void 0!==Z.out)for(var Le in Z.out)if(Le===P)return!0}if("directed"!==de&&void 0!==Z.undirected)for(var et in Z.undirected)if(et===P)return!0;return!1}function Be(ne,de,oe){for(var A,P,Z,we,Le,et,Dt,$e=de._nodes.values(),Gt=de.type;!0!==(A=$e.next()).done;){if(P=A.value,"undirected"!==Gt)for(Z in we=P.out)if(et=(Le=we[Z]).target,Dt=oe(P.key,et.key,P.attributes,et.attributes,Le.key,Le.attributes,Le.undirected,Le.generatedKey),ne&&Dt)return;if("directed"!==Gt)for(Z in we=P.undirected)if((et=(Le=we[Z]).target).key!==Z&&(et=Le.source),Dt=oe(P.key,et.key,P.attributes,et.attributes,Le.key,Le.attributes,Le.undirected,Le.generatedKey),ne&&Dt)return}}function lt(ne,de,oe){for(var A,P,Z,we,Le,et,Dt,$e,Gt,vt=de._nodes.values(),_n=de.type;!0!==(A=vt.next()).done;){if(P=A.value,"undirected"!==_n)for(Z in et=P.out)for(we=et[Z].values();!0!==(Le=we.next()).done;)if($e=(Dt=Le.value).target,Gt=oe(P.key,$e.key,P.attributes,$e.attributes,Dt.key,Dt.attributes,Dt.undirected,Dt.generatedKey),ne&&Gt)return;if("directed"!==_n)for(Z in et=P.undirected)for(we=et[Z].values();!0!==(Le=we.next()).done;)if(($e=(Dt=Le.value).target).key!==Z&&($e=Dt.source),Gt=oe(P.key,$e.key,P.attributes,$e.attributes,Dt.key,Dt.attributes,Dt.undirected,Dt.generatedKey),ne&&Gt)return}}function Qe(ne,de){var oe={key:ne};return re(de.attributes)||(oe.attributes=fe({},de.attributes)),oe}function bt(ne,de){var oe={source:de.source.key,target:de.target.key};return de.generatedKey||(oe.key=ne),re(de.attributes)||(oe.attributes=fe({},de.attributes)),de.undirected&&(oe.undirected=!0),oe}function St(ne){return L(ne)?"key"in ne?!("attributes"in ne)||L(ne.attributes)&&null!==ne.attributes?null:"invalid-attributes":"no-key":"not-object"}function At(ne){return L(ne)?"source"in ne?"target"in ne?!("attributes"in ne)||L(ne.attributes)&&null!==ne.attributes?"undirected"in ne&&"boolean"!=typeof ne.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}var Yt=new Set(["directed","undirected","mixed"]),jn=new Set(["domain","_events","_eventsCount","_maxListeners"]),ni={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function In(ne,de,oe){var A=new ne.NodeDataClass(de,oe);return ne._nodes.set(de,A),ne.emit("nodeAdded",{key:de,attributes:oe}),A}function mn(ne,de,oe,A,P,Z,we,Le){if(!A&&"undirected"===ne.type)throw new ye("Graph.".concat(de,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(A&&"directed"===ne.type)throw new ye("Graph.".concat(de,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Le&&!L(Le))throw new me("Graph.".concat(de,': invalid attributes. Expecting an object but got "').concat(Le,'"'));if(Z=""+Z,we=""+we,Le=Le||{},!ne.allowSelfLoops&&Z===we)throw new ye("Graph.".concat(de,': source & target are the same ("').concat(Z,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var et=ne._nodes.get(Z),Dt=ne._nodes.get(we);if(!et)throw new te("Graph.".concat(de,': source node "').concat(Z,'" not found.'));if(!Dt)throw new te("Graph.".concat(de,': target node "').concat(we,'" not found.'));var $e={key:null,undirected:A,source:Z,target:we,attributes:Le};if(oe&&(P=ne._edgeKeyGenerator($e)),ne._edges.has(P=""+P))throw new ye("Graph.".concat(de,': the "').concat(P,'" edge already exists in the graph.'));if(!ne.multi&&(A?void 0!==et.undirected[we]:void 0!==et.out[we]))throw new ye("Graph.".concat(de,': an edge linking "').concat(Z,'" to "').concat(we,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Gt=new Ze(A,P,oe,et,Dt,Le);return ne._edges.set(P,Gt),Z===we?A?(et.undirectedSelfLoops++,ne._undirectedSelfLoopCount++):(et.directedSelfLoops++,ne._directedSelfLoopCount++):A?(et.undirectedDegree++,Dt.undirectedDegree++):(et.outDegree++,Dt.inDegree++),Je(ne,A,Gt,Z,we,et,Dt),A?ne._undirectedSize++:ne._directedSize++,$e.key=P,ne.emit("edgeAdded",$e),P}function Gn(ne,de,oe,A,P,Z,we,Le,et){if(!A&&"undirected"===ne.type)throw new ye("Graph.".concat(de,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(A&&"directed"===ne.type)throw new ye("Graph.".concat(de,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Le)if(et){if("function"!=typeof Le)throw new me("Graph.".concat(de,': invalid updater function. Expecting a function but got "').concat(Le,'"'))}else if(!L(Le))throw new me("Graph.".concat(de,': invalid attributes. Expecting an object but got "').concat(Le,'"'));var Dt;if(Z=""+Z,we=""+we,et&&(Dt=Le,Le=void 0),!ne.allowSelfLoops&&Z===we)throw new ye("Graph.".concat(de,': source & target are the same ("').concat(Z,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var $e,Gt,vt=ne._nodes.get(Z),_n=ne._nodes.get(we);if(!oe&&($e=ne._edges.get(P))){if($e.source.key!==Z||$e.target.key!==we||A&&($e.source.key!==we||$e.target.key!==Z))throw new ye("Graph.".concat(de,': inconsistency detected when attempting to merge the "').concat(P,'" edge with "').concat(Z,'" source & "').concat(we,'" target vs. ("').concat($e.source.key,'", "').concat($e.target.key,'").'));Gt=$e}if(Gt||ne.multi||!vt||(Gt=A?vt.undirected[we]:vt.out[we]),Gt)return(et?Dt:Le)?(et?(Gt.attributes=Dt(Gt.attributes),ne.emit("edgeAttributesUpdated",{type:"replace",key:Gt.key,attributes:Gt.attributes})):(fe(Gt.attributes,Le),ne.emit("edgeAttributesUpdated",{type:"merge",key:Gt.key,attributes:Gt.attributes,data:Le})),Gt.key):Gt.key;Le=Le||{},et&&Dt&&(Le=Dt(Le));var Gr={key:null,undirected:A,source:Z,target:we,attributes:Le};if(oe&&(P=ne._edgeKeyGenerator(Gr)),ne._edges.has(P=""+P))throw new ye("Graph.".concat(de,': the "').concat(P,'" edge already exists in the graph.'));return vt||(vt=In(ne,Z,{}),Z===we&&(_n=vt)),_n||(_n=In(ne,we,{})),$e=new Ze(A,P,oe,vt,_n,Le),ne._edges.set(P,$e),Z===we?A?(vt.undirectedSelfLoops++,ne._undirectedSelfLoopCount++):(vt.directedSelfLoops++,ne._directedSelfLoopCount++):A?(vt.undirectedDegree++,_n.undirectedDegree++):(vt.outDegree++,_n.inDegree++),Je(ne,A,$e,Z,we,vt,_n),A?ne._undirectedSize++:ne._directedSize++,Gr.key=P,ne.emit("edgeAdded",Gr),P}var ne,Sn=function(ne){function de(A){var P;if(P=ne.call(this)||this,(A=fe({},ni,A)).edgeKeyGenerator&&"function"!=typeof A.edgeKeyGenerator)throw new me("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(A.edgeKeyGenerator,'".'));if("boolean"!=typeof A.multi)throw new me("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(A.multi,'".'));if(!Yt.has(A.type))throw new me('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(A.type,'".'));if("boolean"!=typeof A.allowSelfLoops)throw new me("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(A.allowSelfLoops,'".'));var Z,we="mixed"===A.type?Oe:"directed"===A.type?Ue:nt;return W(Ae(P),"NodeDataClass",we),W(Ae(P),"_attributes",{}),W(Ae(P),"_nodes",new Map),W(Ae(P),"_edges",new Map),W(Ae(P),"_directedSize",0),W(Ae(P),"_undirectedSize",0),W(Ae(P),"_directedSelfLoopCount",0),W(Ae(P),"_undirectedSelfLoopCount",0),W(Ae(P),"_edgeKeyGenerator",A.edgeKeyGenerator||(Z=0,function(){return Z++})),W(Ae(P),"_options",A),jn.forEach(function(Le){return W(Ae(P),Le,P[Le])}),w(Ae(P),"order",function(){return P._nodes.size}),w(Ae(P),"size",function(){return P._edges.size}),w(Ae(P),"directedSize",function(){return P._directedSize}),w(Ae(P),"undirectedSize",function(){return P._undirectedSize}),w(Ae(P),"selfLoopCount",function(){return P._directedSelfLoopCount+P._undirectedSelfLoopCount}),w(Ae(P),"directedSelfLoopCount",function(){return P._directedSelfLoopCount}),w(Ae(P),"undirectedSelfLoopCount",function(){return P._undirectedSelfLoopCount}),w(Ae(P),"multi",P._options.multi),w(Ae(P),"type",P._options.type),w(Ae(P),"allowSelfLoops",P._options.allowSelfLoops),w(Ae(P),"implementation",function(){return"graphology"}),P}tt(de,ne);var oe=de.prototype;return oe.hasNode=function(A){return this._nodes.has(""+A)},oe.hasDirectedEdge=function(A,P){if("undirected"===this.type)return!1;if(1===arguments.length){var we=this._edges.get(""+A);return!!we&&!we.undirected}if(2===arguments.length){P=""+P;var Le=this._nodes.get(A=""+A);if(!Le)return!1;var et=Le.out[P];return!(!et||this.multi&&!et.size)}throw new me("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},oe.hasUndirectedEdge=function(A,P){if("directed"===this.type)return!1;if(1===arguments.length){var we=this._edges.get(""+A);return!!we&&we.undirected}if(2===arguments.length){P=""+P;var Le=this._nodes.get(A=""+A);if(!Le)return!1;var et=Le.undirected[P];return!(!et||this.multi&&!et.size)}throw new me("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},oe.hasEdge=function(A,P){if(1===arguments.length)return this._edges.has(""+A);if(2===arguments.length){P=""+P;var we=this._nodes.get(A=""+A);if(!we)return!1;var Le=void 0!==we.out&&we.out[P];return Le||(Le=void 0!==we.undirected&&we.undirected[P]),!(!Le||this.multi&&!Le.size)}throw new me("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},oe.directedEdge=function(A,P){if("undirected"!==this.type){if(A=""+A,P=""+P,this.multi)throw new ye("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var Z=this._nodes.get(A);if(!Z)throw new te('Graph.directedEdge: could not find the "'.concat(A,'" source node in the graph.'));if(!this._nodes.has(P))throw new te('Graph.directedEdge: could not find the "'.concat(P,'" target node in the graph.'));var we=Z.out&&Z.out[P]||void 0;return we?we.key:void 0}},oe.undirectedEdge=function(A,P){if("directed"!==this.type){if(A=""+A,P=""+P,this.multi)throw new ye("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var Z=this._nodes.get(A);if(!Z)throw new te('Graph.undirectedEdge: could not find the "'.concat(A,'" source node in the graph.'));if(!this._nodes.has(P))throw new te('Graph.undirectedEdge: could not find the "'.concat(P,'" target node in the graph.'));var we=Z.undirected&&Z.undirected[P]||void 0;return we?we.key:void 0}},oe.edge=function(A,P){if(this.multi)throw new ye("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");P=""+P;var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.edge: could not find the "'.concat(A,'" source node in the graph.'));if(!this._nodes.has(P))throw new te('Graph.edge: could not find the "'.concat(P,'" target node in the graph.'));var we=Z.out&&Z.out[P]||Z.undirected&&Z.undirected[P]||void 0;if(we)return we.key},oe.inDegree=function(A){var P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof P)throw new me('Graph.inDegree: Expecting a boolean but got "'.concat(P,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.inDegree: could not find the "'.concat(A,'" node in the graph.'));return"undirected"===this.type?0:Z.inDegree+(P?Z.directedSelfLoops:0)},oe.outDegree=function(A){var P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof P)throw new me('Graph.outDegree: Expecting a boolean but got "'.concat(P,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.outDegree: could not find the "'.concat(A,'" node in the graph.'));return"undirected"===this.type?0:Z.outDegree+(P?Z.directedSelfLoops:0)},oe.directedDegree=function(A){var P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof P)throw new me('Graph.directedDegree: Expecting a boolean but got "'.concat(P,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.directedDegree: could not find the "'.concat(A,'" node in the graph.'));if("undirected"===this.type)return 0;var we=P?Z.directedSelfLoops:0;return Z.inDegree+we+(Z.outDegree+we)},oe.undirectedDegree=function(A){var P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof P)throw new me('Graph.undirectedDegree: Expecting a boolean but got "'.concat(P,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.undirectedDegree: could not find the "'.concat(A,'" node in the graph.'));return"directed"===this.type?0:Z.undirectedDegree+2*(P?Z.undirectedSelfLoops:0)},oe.degree=function(A){var P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof P)throw new me('Graph.degree: Expecting a boolean but got "'.concat(P,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.degree: could not find the "'.concat(A,'" node in the graph.'));var we=0,Le=0;return"directed"!==this.type&&(P&&(Le=Z.undirectedSelfLoops),we+=Z.undirectedDegree+2*Le),"undirected"!==this.type&&(P&&(Le=Z.directedSelfLoops),we+=Z.inDegree+Z.outDegree+2*Le),we},oe.source=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.source: could not find the "'.concat(A,'" edge in the graph.'));return P.source.key},oe.target=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.target: could not find the "'.concat(A,'" edge in the graph.'));return P.target.key},oe.extremities=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.extremities: could not find the "'.concat(A,'" edge in the graph.'));return[P.source.key,P.target.key]},oe.opposite=function(A,P){A=""+A;var Z=this._edges.get(P=""+P);if(!Z)throw new te('Graph.opposite: could not find the "'.concat(P,'" edge in the graph.'));var we=Z.source.key,Le=Z.target.key;if(A!==we&&A!==Le)throw new te('Graph.opposite: the "'.concat(A,'" node is not attached to the "').concat(P,'" edge (').concat(we,", ").concat(Le,")."));return A===we?Le:we},oe.hasExtremity=function(A,P){P=""+P;var Z=this._edges.get(A=""+A);if(!Z)throw new te('Graph.hasExtremity: could not find the "'.concat(A,'" edge in the graph.'));return Z.source.key===P||Z.target.key===P},oe.isUndirected=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.isUndirected: could not find the "'.concat(A,'" edge in the graph.'));return P.undirected},oe.isDirected=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.isDirected: could not find the "'.concat(A,'" edge in the graph.'));return!P.undirected},oe.isSelfLoop=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.isSelfLoop: could not find the "'.concat(A,'" edge in the graph.'));return P.source===P.target},oe.hasGeneratedKey=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.hasGeneratedKey: could not find the "'.concat(A,'" edge in the graph.'));return P.generatedKey},oe.addNode=function(A,P){return function(Z,we,Le){if(Le&&!L(Le))throw new me('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Le,'"'));if(Le=Le||{},Z._nodes.has(we=""+we))throw new ye('Graph.addNode: the "'.concat(we,'" node already exist in the graph.'));var et=new Z.NodeDataClass(we,Le);return Z._nodes.set(we,et),Z.emit("nodeAdded",{key:we,attributes:Le}),et}(this,A,P).key},oe.mergeNode=function(A,P){if(P&&!L(P))throw new me('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(P,'"'));P=P||{};var Z=this._nodes.get(A=""+A);return Z?(P&&(fe(Z.attributes,P),this.emit("nodeAttributesUpdated",{type:"merge",key:A,attributes:Z.attributes,data:P})),A):(Z=new this.NodeDataClass(A,P),this._nodes.set(A,Z),this.emit("nodeAdded",{key:A,attributes:P}),A)},oe.updateNode=function(A,P){if(P&&"function"!=typeof P)throw new me('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(P,'"'));var Z=this._nodes.get(A=""+A);if(Z)return P&&(Z.attributes=P(Z.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:A,attributes:Z.attributes})),A;var Le=P?P({}):{};return Z=new this.NodeDataClass(A,Le),this._nodes.set(A,Z),this.emit("nodeAdded",{key:A,attributes:Le}),A},oe.dropNode=function(A){var P=this,Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.dropNode: could not find the "'.concat(A,'" node in the graph.'));this.forEachEdge(A,function(we){P.dropEdge(we)}),this._nodes.delete(A),this.emit("nodeDropped",{key:A,attributes:Z.attributes})},oe.dropEdge=function(A){var P;if(arguments.length>1){var Z=""+arguments[0],we=""+arguments[1];if(!(P=q(this,Z,we,this.type)))throw new te('Graph.dropEdge: could not find the "'.concat(Z,'" -> "').concat(we,'" edge in the graph.'))}else if(!(P=this._edges.get(A=""+A)))throw new te('Graph.dropEdge: could not find the "'.concat(A,'" edge in the graph.'));this._edges.delete(P.key);var et=P.source,Dt=P.target,$e=P.attributes,Gt=P.undirected;return et===Dt?Gt?(et.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(et.directedSelfLoops--,this._directedSelfLoopCount--):Gt?(et.undirectedDegree--,Dt.undirectedDegree--):(et.outDegree--,Dt.inDegree--),Ke(this,Gt,P),Gt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:A,attributes:$e,source:et.key,target:Dt.key,undirected:Gt}),this},oe.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},oe.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},oe.getAttribute=function(A){return this._attributes[A]},oe.getAttributes=function(){return this._attributes},oe.hasAttribute=function(A){return this._attributes.hasOwnProperty(A)},oe.setAttribute=function(A,P){return this._attributes[A]=P,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:A}),this},oe.updateAttribute=function(A,P){if("function"!=typeof P)throw new me("Graph.updateAttribute: updater should be a function.");return this._attributes[A]=P(this._attributes[A]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:A}),this},oe.removeAttribute=function(A){return delete this._attributes[A],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:A}),this},oe.replaceAttributes=function(A){if(!L(A))throw new me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=A,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},oe.mergeAttributes=function(A){if(!L(A))throw new me("Graph.mergeAttributes: provided attributes are not a plain object.");return fe(this._attributes,A),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:A}),this},oe.getNodeAttribute=function(A,P){var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.getNodeAttribute: could not find the "'.concat(A,'" node in the graph.'));return Z.attributes[P]},oe.getNodeAttributes=function(A){var P=this._nodes.get(A=""+A);if(!P)throw new te('Graph.getNodeAttributes: could not find the "'.concat(A,'" node in the graph.'));return P.attributes},oe.hasNodeAttribute=function(A,P){var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.hasNodeAttribute: could not find the "'.concat(A,'" node in the graph.'));return Z.attributes.hasOwnProperty(P)},oe.setNodeAttribute=function(A,P,Z){var we=this._nodes.get(A=""+A);if(!we)throw new te('Graph.setNodeAttribute: could not find the "'.concat(A,'" node in the graph.'));if(arguments.length<3)throw new me("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return we.attributes[P]=Z,this.emit("nodeAttributesUpdated",{key:A,type:"set",attributes:we.attributes,name:P}),this},oe.updateNodeAttribute=function(A,P,Z){var we=this._nodes.get(A=""+A);if(!we)throw new te('Graph.updateNodeAttribute: could not find the "'.concat(A,'" node in the graph.'));if(arguments.length<3)throw new me("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof Z)throw new me("Graph.updateAttribute: updater should be a function.");var Le=we.attributes,et=Z(Le[P]);return Le[P]=et,this.emit("nodeAttributesUpdated",{key:A,type:"set",attributes:we.attributes,name:P}),this},oe.removeNodeAttribute=function(A,P){var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.hasNodeAttribute: could not find the "'.concat(A,'" node in the graph.'));return delete Z.attributes[P],this.emit("nodeAttributesUpdated",{key:A,type:"remove",attributes:Z.attributes,name:P}),this},oe.replaceNodeAttributes=function(A,P){var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.replaceNodeAttributes: could not find the "'.concat(A,'" node in the graph.'));if(!L(P))throw new me("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return Z.attributes=P,this.emit("nodeAttributesUpdated",{key:A,type:"replace",attributes:Z.attributes}),this},oe.mergeNodeAttributes=function(A,P){var Z=this._nodes.get(A=""+A);if(!Z)throw new te('Graph.mergeNodeAttributes: could not find the "'.concat(A,'" node in the graph.'));if(!L(P))throw new me("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return fe(Z.attributes,P),this.emit("nodeAttributesUpdated",{key:A,type:"merge",attributes:Z.attributes,data:P}),this},oe.updateEachNodeAttributes=function(A,P){if("function"!=typeof A)throw new me("Graph.updateEachNodeAttributes: expecting an updater function.");if(P&&!x(P))throw new me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var Z,we,Le=this._nodes.values();!0!==(Z=Le.next()).done;)(we=Z.value).attributes=A(we.key,we.attributes);this.emit("eachNodeAttributesUpdated",{hints:P||null})},oe.updateEachEdgeAttributes=function(A,P){if("function"!=typeof A)throw new me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(P&&!x(P))throw new me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var Z,we,Le=this._edges.values();!0!==(Z=Le.next()).done;)(we=Z.value).attributes=A(we.key,we.attributes);this.emit("eachEdgeAttributesUpdated",{hints:P||null})},oe.forEach=function(A){if("function"!=typeof A)throw new me("Graph.forEach: expecting a callback.");this.multi?lt(!1,this,A):Be(!1,this,A)},oe.forEachUntil=function(A){if("function"!=typeof A)throw new me("Graph.forEach: expecting a callback.");this.multi?lt(!0,this,A):Be(!0,this,A)},oe.adjacency=function(){return this.multi?(et=(A=this)._nodes.values(),Dt=A.type,$e="outer",Gt=null,new ee(function vt(){var _n;if("outer"===$e)return!0===(_n=et.next()).done?_n:(P=_n.value,$e="directed",vt());if("directed"===$e)return"undirected"===Dt?($e="undirected",vt()):(we=P.out,Z=Object.keys(P.out),Le=0,$e="inner-directed",vt());if("undirected"===$e){if("directed"===Dt)return $e="outer",vt();we=P.undirected,Z=Object.keys(P.undirected),Le=0,$e="inner-undirected"}if(!Gt&&Le>=Z.length)return $e="inner-undirected"===$e?"outer":"undirected",vt();if(!Gt){var _s=Z[Le++];return Gt=we[_s].values(),vt()}if((_n=Gt.next()).done)return Gt=null,vt();var Gr=_n.value,qs=Gr.target;return"inner-undirected"===$e&&qs.key===P.key&&(qs=Gr.source),{done:!1,value:[P.key,qs.key,P.attributes,qs.attributes,Gr.key,Gr.attributes]}})):(Cl=(vt=this)._nodes.values(),oo=vt.type,Rr="outer",new ee(function Fs(){var hc;if("outer"===Rr)return!0===(hc=Cl.next()).done?hc:(_n=hc.value,Rr="directed",Fs());if("directed"===Rr)return"undirected"===oo?(Rr="undirected",Fs()):(Gr=_n.out,_s=Object.keys(_n.out),qs=0,Rr="inner-directed",Fs());if("undirected"===Rr){if("directed"===oo)return Rr="outer",Fs();Gr=_n.undirected,_s=Object.keys(_n.undirected),qs=0,Rr="inner-undirected"}if(qs>=_s.length)return Rr="inner-undirected"===Rr?"outer":"undirected",Fs();var wn=_s[qs++],ao=Gr[wn],xl=ao.target;return"inner-undirected"===Rr&&xl.key===_n.key&&(xl=ao.source),{done:!1,value:[_n.key,xl.key,_n.attributes,xl.attributes,ao.key,ao.attributes]}}));var vt,_n,_s,Gr,qs,Cl,oo,Rr,A,P,Z,we,Le,et,Dt,$e,Gt},oe.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):se(this._nodes.keys(),this._nodes.size)},oe.forEachNode=function(A){if("function"!=typeof A)throw new me("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(P,Z){A(Z,P.attributes)})},oe.forEachNodeUntil=function(A){if("function"!=typeof A)throw new me("Graph.forEachNode: expecting a callback.");for(var P,Z,we=this._nodes.values();!0!==(P=we.next())&&!A((Z=P.value).key,Z.attributes););},oe.nodeEntries=function(){var A=this._nodes.values();return new ee(function(){var P=A.next();if(P.done)return P;var Z=P.value;return{value:[Z.key,Z.attributes],done:!1}})},oe.exportNode=function(A){var P=this._nodes.get(A=""+A);if(!P)throw new te('Graph.exportNode: could not find the "'.concat(A,'" node in the graph.'));return Qe(A,P)},oe.exportEdge=function(A){var P=this._edges.get(A=""+A);if(!P)throw new te('Graph.exportEdge: could not find the "'.concat(A,'" edge in the graph.'));return bt(A,P)},oe.export=function(){var A=new Array(this._nodes.size),P=0;this._nodes.forEach(function(we,Le){A[P++]=Qe(Le,we)});var Z=new Array(this._edges.size);return P=0,this._edges.forEach(function(we,Le){Z[P++]=bt(Le,we)}),{attributes:this.getAttributes(),nodes:A,edges:Z,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},oe.importNode=function(A){var P=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Z=St(A);if(Z){if("not-object"===Z)throw new me('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===Z)throw new me("Graph.importNode: no key provided.");if("invalid-attributes"===Z)throw new me("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var we=A.key,Le=A.attributes,et=void 0===Le?{}:Le;return P?this.mergeNode(we,et):this.addNode(we,et),this},oe.importEdge=function(A){var P=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Z=At(A);if(Z){if("not-object"===Z)throw new me('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===Z)throw new me("Graph.importEdge: missing souce.");if("no-target"===Z)throw new me("Graph.importEdge: missing target.");if("invalid-attributes"===Z)throw new me("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===Z)throw new me("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var we=A.source,Le=A.target,et=A.attributes,Dt=void 0===et?{}:et,$e=A.undirected,Gt=void 0!==$e&&$e;return"key"in A?(P?Gt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Gt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,A.key,we,Le,Dt):(P?Gt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Gt?this.addUndirectedEdge:this.addDirectedEdge).call(this,we,Le,Dt),this},oe.import=function(A){var P,Z,we,Le=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(V(A))return this.import(A.export(),Le),this;if(!L(A))throw new me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(A.attributes){if(!L(A.attributes))throw new me("Graph.import: invalid attributes. Expecting a plain object.");Le?this.mergeAttributes(A.attributes):this.replaceAttributes(A.attributes)}if(A.nodes){if(we=A.nodes,!Array.isArray(we))throw new me("Graph.import: invalid nodes. Expecting an array.");for(P=0,Z=we.length;P<Z;P++)this.importNode(we[P],Le)}if(A.edges){if(we=A.edges,!Array.isArray(we))throw new me("Graph.import: invalid edges. Expecting an array.");for(P=0,Z=we.length;P<Z;P++)this.importEdge(we[P],Le)}return this},oe.nullCopy=function(A){return new de(fe({},this._options,A))},oe.emptyCopy=function(A){var P=this.nullCopy(A);return this._nodes.forEach(function(Z,we){var Le=fe({},Z.attributes);Z=new P.NodeDataClass(we,Le),P._nodes.set(we,Z)}),P},oe.copy=function(){var A=new de(this._options);return A.import(this),A},oe.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(A){return A.upgradeToMixed()}),this._options.type="mixed",w(this,"type",this._options.type),W(this,"NodeDataClass",Oe)),this},oe.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,w(this,"multi",!0),(A=this)._nodes.forEach(function(P,Z){if(P.out)for(var we in P.out){var Le=new Set;Le.add(P.out[we]),P.out[we]=Le,A._nodes.get(we).in[Z]=Le}if(P.undirected)for(var et in P.undirected)if(!(et>Z)){var Dt=new Set;Dt.add(P.undirected[et]),P.undirected[et]=Dt,A._nodes.get(et).undirected[Z]=Dt}})),this;var A},oe.clearIndex=function(){return this._nodes.forEach(function(A){void 0!==A.in&&(A.in={},A.out={}),void 0!==A.undirected&&(A.undirected={})}),this},oe.toJSON=function(){return this.export()},oe.toString=function(){return"[object Graph]"},oe.inspect=function(){var A=this,P={};this._nodes.forEach(function(Dt,$e){P[$e]=Dt.attributes});var Z={},we={};this._edges.forEach(function(Dt,$e){var Gt=Dt.undirected?"--":"->",vt="",_n="(".concat(Dt.source.key,")").concat(Gt,"(").concat(Dt.target.key,")");Dt.generatedKey?A.multi&&(void 0===we[_n]?we[_n]=0:we[_n]++,vt+="".concat(we[_n],". ")):vt+="[".concat($e,"]: "),Z[vt+=_n]=Dt.attributes});var Le={};for(var et in this)this.hasOwnProperty(et)&&!jn.has(et)&&"function"!=typeof this[et]&&(Le[et]=this[et]);return Le.attributes=this._attributes,Le.nodes=P,Le.edges=Z,W(Le,"constructor",this.constructor),Le},de}(T.exports.EventEmitter);"undefined"!=typeof Symbol&&(Sn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Sn.prototype.inspect),[{name:function(ne){return"".concat(ne,"Edge")},generateKey:!0},{name:function(ne){return"".concat(ne,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ne){return"".concat(ne,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ne){return"".concat(ne,"EdgeWithKey")}},{name:function(ne){return"".concat(ne,"DirectedEdgeWithKey")},type:"directed"},{name:function(ne){return"".concat(ne,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ne){["add","merge","update"].forEach(function(de){var oe=ne.name(de),A="add"===de?mn:Gn;Sn.prototype[oe]=ne.generateKey?function(P,Z,we){return A(this,oe,!0,"undirected"===(ne.type||this.type),null,P,Z,we,"update"===de)}:function(P,Z,we,Le){return A(this,oe,!1,"undirected"===(ne.type||this.type),P,Z,we,Le,"update"===de)}})}),"undefined"!=typeof Symbol&&(Sn.prototype[Symbol.iterator]=Sn.prototype.adjacency),ne=Sn,Ve.forEach(function(de){var oe=de.name,A=de.attacher;A(ne,oe("Edge"),"mixed"),A(ne,oe("DirectedEdge"),"directed"),A(ne,oe("UndirectedEdge"),"undirected")}),function(ne){Re.forEach(function(de){var A,P,Z,we;Z=(A=de).type,we=A.direction,ne.prototype[P=A.name]=function(Le,et){if("mixed"!==Z&&"mixed"!==this.type&&Z!==this.type)return[];if(!arguments.length)return Ne(this,Z);if(1===arguments.length){var Dt=this._nodes.get(Le=""+Le);if(void 0===Dt)throw new te("Graph.".concat(P,': could not find the "').concat(Le,'" node in the graph.'));return Tn(this.multi,"mixed"===Z?this.type:Z,we,Dt)}if(2===arguments.length){et=""+et;var $e=this._nodes.get(Le=""+Le);if(!$e)throw new te("Graph.".concat(P,':  could not find the "').concat(Le,'" source node in the graph.'));if(!this._nodes.has(et))throw new te("Graph.".concat(P,':  could not find the "').concat(et,'" target node in the graph.'));return di(Z,this.multi,we,$e,et)}throw new me("Graph.".concat(P,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(oe,A){var P=A.name,Z=A.type,we=A.direction,Le="forEach"+P[0].toUpperCase()+P.slice(1,-1);oe.prototype[Le]=function(et,Dt,$e){if("mixed"===Z||"mixed"===this.type||Z===this.type){if(1===arguments.length)return Xe(this,Z,$e=et);if(2===arguments.length){$e=Dt;var Gt=this._nodes.get(et=""+et);if(void 0===Gt)throw new te("Graph.".concat(Le,': could not find the "').concat(et,'" node in the graph.'));return Rn(this.multi,"mixed"===Z?this.type:Z,we,Gt,$e)}if(3===arguments.length){Dt=""+Dt;var vt=this._nodes.get(et=""+et);if(!vt)throw new te("Graph.".concat(Le,':  could not find the "').concat(et,'" source node in the graph.'));if(!this._nodes.has(Dt))throw new te("Graph.".concat(Le,':  could not find the "').concat(Dt,'" target node in the graph.'));return Ur(Z,this.multi,we,vt,Dt,$e)}throw new me("Graph.".concat(Le,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ne,de),function(oe,A){var P=A.name,Z=A.type,we=A.direction,Le="forEach"+P[0].toUpperCase()+P.slice(1,-1)+"Until";oe.prototype[Le]=function(et,Dt,$e){if("mixed"===Z||"mixed"===this.type||Z===this.type){if(1===arguments.length)return yt(this,Z,$e=et);if(2===arguments.length){$e=Dt;var Gt=this._nodes.get(et=""+et);if(void 0===Gt)throw new te("Graph.".concat(Le,': could not find the "').concat(et,'" node in the graph.'));return Hn(this.multi,"mixed"===Z?this.type:Z,we,Gt,$e)}if(3===arguments.length){Dt=""+Dt;var vt=this._nodes.get(et=""+et);if(!vt)throw new te("Graph.".concat(Le,':  could not find the "').concat(et,'" source node in the graph.'));if(!this._nodes.has(Dt))throw new te("Graph.".concat(Le,':  could not find the "').concat(Dt,'" target node in the graph.'));return Ns(Z,this.multi,we,vt,Dt,$e)}throw new me("Graph.".concat(Le,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ne,de),function(oe,A){var Z=A.type,we=A.direction,Le=A.name.slice(0,-1)+"Entries";oe.prototype[Le]=function(et,Dt){if("mixed"!==Z&&"mixed"!==this.type&&Z!==this.type)return ee.empty();if(!arguments.length)return It(this,Z);if(1===arguments.length){var $e=this._nodes.get(et=""+et);if(!$e)throw new te("Graph.".concat(Le,': could not find the "').concat(et,'" node in the graph.'));return bi(Z,we,$e)}if(2===arguments.length){Dt=""+Dt;var Gt=this._nodes.get(et=""+et);if(!Gt)throw new te("Graph.".concat(Le,':  could not find the "').concat(et,'" source node in the graph.'));if(!this._nodes.has(Dt))throw new te("Graph.".concat(Le,':  could not find the "').concat(Dt,'" target node in the graph.'));return cs(Z,we,Gt,Dt)}throw new me("Graph.".concat(Le,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ne,de)})}(Sn),function(ne){Ps.forEach(function(de){var A,P,Z,we;Z=(A=de).type,we=A.direction,ne.prototype[P=A.name]=function(Le){if("mixed"!==Z&&"mixed"!==this.type&&Z!==this.type)return[];if(2===arguments.length){var et=""+arguments[0],Dt=""+arguments[1];if(!this._nodes.has(et))throw new te("Graph.".concat(P,': could not find the "').concat(et,'" node in the graph.'));if(!this._nodes.has(Dt))throw new te("Graph.".concat(P,': could not find the "').concat(Dt,'" node in the graph.'));return ot(this,Z,we,et,Dt)}if(1===arguments.length){var $e=this._nodes.get(Le=""+Le);if(void 0===$e)throw new te("Graph.".concat(P,': could not find the "').concat(Le,'" node in the graph.'));return da("mixed"===Z?this.type:Z,we,$e)}throw new me("Graph.".concat(P,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function(ne,de){var oe=de.name,A=de.type,P=de.direction,Z="forEach"+oe[0].toUpperCase()+oe.slice(1,-1);ne.prototype[Z]=function(we,Le){if("mixed"===A||"mixed"===this.type||A===this.type){var et=this._nodes.get(we=""+we);if(void 0===et)throw new te("Graph.".concat(Z,': could not find the "').concat(we,'" node in the graph.'));!function(Dt,$e,Gt,vt){if("mixed"!==Dt){if("undirected"===Dt)return Sl(Gt,Gt.undirected,vt);if("string"==typeof $e)return Sl(Gt,Gt[$e],vt)}var _n=new Set;"undirected"!==Dt&&("out"!==$e&&ha(_n,Gt,Gt.in,vt),"in"!==$e&&ha(_n,Gt,Gt.out,vt)),"directed"!==Dt&&ha(_n,Gt,Gt.undirected,vt)}("mixed"===A?this.type:A,P,et,Le)}}}(ne,de),function(ne,de){var oe=de.name,A=de.type,P=de.direction,Z="forEach"+oe[0].toUpperCase()+oe.slice(1,-1)+"Until";ne.prototype[Z]=function(we,Le){if("mixed"===A||"mixed"===this.type||A===this.type){var et=this._nodes.get(we=""+we);if(void 0===et)throw new te("Graph.".concat(Z,': could not find the "').concat(we,'" node in the graph.'));!function(Dt,$e,Gt,vt){if("mixed"!==Dt){if("undirected"===Dt)return ms(Gt,Gt.undirected,vt);if("string"==typeof $e)return ms(Gt,Gt[$e],vt)}var _n=new Set;"undirected"!==Dt&&("out"!==$e&&Jt(_n,Gt,Gt.in,vt)||"in"!==$e&&Jt(_n,Gt,Gt.out,vt))||"directed"===Dt||Jt(_n,Gt,Gt.undirected,vt)}("mixed"===A?this.type:A,P,et,Le)}}}(ne,de),function(ne,de){var A=de.type,P=de.direction,Z=de.name.slice(0,-1)+"Entries";ne.prototype[Z]=function(we){if("mixed"!==A&&"mixed"!==this.type&&A!==this.type)return ee.empty();var Le=this._nodes.get(we=""+we);if(void 0===Le)throw new te("Graph.".concat(Z,': could not find the "').concat(we,'" node in the graph.'));return function(et,Dt,$e){if("mixed"!==et){if("undirected"===et)return Ha($e,$e.undirected);if("string"==typeof Dt)return Ha($e,$e[Dt])}var Gt=ee.empty(),vt=new Set;return"undirected"!==et&&("out"!==Dt&&(Gt=Ee(Gt,rt(vt,$e,$e.in))),"in"!==Dt&&(Gt=Ee(Gt,rt(vt,$e,$e.out)))),"directed"!==et&&(Gt=Ee(Gt,rt(vt,$e,$e.undirected))),Gt}("mixed"===A?this.type:A,P,Le)}}(ne,de)})}(Sn);var Ji=function(ne){function de(oe){var A=fe({type:"directed"},oe);if("multi"in A&&!1!==A.multi)throw new me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==A.type)throw new me('DirectedGraph.from: inconsistent "'+A.type+'" type in given options!');return ne.call(this,A)||this}return tt(de,ne),de}(Sn),er=function(ne){function de(oe){var A=fe({type:"undirected"},oe);if("multi"in A&&!1!==A.multi)throw new me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==A.type)throw new me('UndirectedGraph.from: inconsistent "'+A.type+'" type in given options!');return ne.call(this,A)||this}return tt(de,ne),de}(Sn),qn=function(ne){function de(oe){var A=fe({multi:!0},oe);if("multi"in A&&!0!==A.multi)throw new me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ne.call(this,A)||this}return tt(de,ne),de}(Sn),Bi=function(ne){function de(oe){var A=fe({type:"directed",multi:!0},oe);if("multi"in A&&!0!==A.multi)throw new me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==A.type)throw new me('MultiDirectedGraph.from: inconsistent "'+A.type+'" type in given options!');return ne.call(this,A)||this}return tt(de,ne),de}(Sn),fa=function(ne){function de(oe){var A=fe({type:"undirected",multi:!0},oe);if("multi"in A&&!0!==A.multi)throw new me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==A.type)throw new me('MultiUndirectedGraph.from: inconsistent "'+A.type+'" type in given options!');return ne.call(this,A)||this}return tt(de,ne),de}(Sn);function Hr(ne){ne.from=function(de,oe){var A=fe({},de.options,oe),P=new ne(A);return P.import(de),P}}return Hr(Sn),Hr(Ji),Hr(er),Hr(qn),Hr(Bi),Hr(fa),Sn.Graph=Sn,Sn.DirectedGraph=Ji,Sn.UndirectedGraph=er,Sn.MultiGraph=qn,Sn.MultiDirectedGraph=Bi,Sn.MultiUndirectedGraph=fa,Sn.InvalidArgumentsGraphError=me,Sn.NotFoundGraphError=te,Sn.UsageGraphError=ye,Sn}()},524:(jt,it,tt)=>{var gt;!function(J,xt,ut,Y){"use strict";var T,Ae=["","webkit","Moz","MS","ms","o"],fe=xt.createElement("div"),V=Math.round,L=Math.abs,re=Date.now;function W(_e,xe,Ge){return setTimeout(D(_e,Ge),xe)}function w(_e,xe,Ge){return!!Array.isArray(_e)&&(x(_e,Ge[xe],Ge),!0)}function x(_e,xe,Ge){var mt;if(_e)if(_e.forEach)_e.forEach(xe,Ge);else if(_e.length!==Y)for(mt=0;mt<_e.length;)xe.call(Ge,_e[mt],mt,_e),mt++;else for(mt in _e)_e.hasOwnProperty(mt)&&xe.call(Ge,_e[mt],mt,_e)}function R(_e,xe,Ge){var mt="DEPRECATED METHOD: "+xe+"\n"+Ge+" AT \n";return function(){var Ut=new Error("get-stack-trace"),$t=Ut&&Ut.stack?Ut.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ii=J.console&&(J.console.warn||J.console.log);return ii&&ii.call(J.console,mt,$t),_e.apply(this,arguments)}}T="function"!=typeof Object.assign?function(xe){if(xe===Y||null===xe)throw new TypeError("Cannot convert undefined or null to object");for(var Ge=Object(xe),mt=1;mt<arguments.length;mt++){var Ut=arguments[mt];if(Ut!==Y&&null!==Ut)for(var $t in Ut)Ut.hasOwnProperty($t)&&(Ge[$t]=Ut[$t])}return Ge}:Object.assign;var v=R(function(xe,Ge,mt){for(var Ut=Object.keys(Ge),$t=0;$t<Ut.length;)(!mt||mt&&xe[Ut[$t]]===Y)&&(xe[Ut[$t]]=Ge[Ut[$t]]),$t++;return xe},"extend","Use `assign`."),y=R(function(xe,Ge){return v(xe,Ge,!0)},"merge","Use `assign`.");function E(_e,xe,Ge){var Ut,mt=xe.prototype;(Ut=_e.prototype=Object.create(mt)).constructor=_e,Ut._super=mt,Ge&&T(Ut,Ge)}function D(_e,xe){return function(){return _e.apply(xe,arguments)}}function j(_e,xe){return"function"==typeof _e?_e.apply(xe&&xe[0]||Y,xe):_e}function I(_e,xe){return _e===Y?xe:_e}function $(_e,xe,Ge){x(Q(xe),function(mt){_e.addEventListener(mt,Ge,!1)})}function K(_e,xe,Ge){x(Q(xe),function(mt){_e.removeEventListener(mt,Ge,!1)})}function M(_e,xe){for(;_e;){if(_e==xe)return!0;_e=_e.parentNode}return!1}function F(_e,xe){return _e.indexOf(xe)>-1}function Q(_e){return _e.trim().split(/\s+/g)}function S(_e,xe,Ge){if(_e.indexOf&&!Ge)return _e.indexOf(xe);for(var mt=0;mt<_e.length;){if(Ge&&_e[mt][Ge]==xe||!Ge&&_e[mt]===xe)return mt;mt++}return-1}function U(_e){return Array.prototype.slice.call(_e,0)}function ie(_e,xe,Ge){for(var mt=[],Ut=[],$t=0;$t<_e.length;){var ii=xe?_e[$t][xe]:_e[$t];S(Ut,ii)<0&&mt.push(_e[$t]),Ut[$t]=ii,$t++}return Ge&&(mt=xe?mt.sort(function($r,ys){return $r[xe]>ys[xe]}):mt.sort()),mt}function ue(_e,xe){for(var Ge,mt,Ut=xe[0].toUpperCase()+xe.slice(1),$t=0;$t<Ae.length;){if((mt=(Ge=Ae[$t])?Ge+Ut:xe)in _e)return mt;$t++}return Y}var ee=1;function Te(_e){var xe=_e.ownerDocument||_e;return xe.defaultView||xe.parentWindow||J}var te="ontouchstart"in J,ye=ue(J,"PointerEvent")!==Y,Oe=te&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ue="touch",Ze="mouse",Et=["x","y"],pt=["clientX","clientY"];function ge(_e,xe){var Ge=this;this.manager=_e,this.callback=xe,this.element=_e.element,this.target=_e.options.inputTarget,this.domHandler=function(mt){j(_e.options.enable,[_e])&&Ge.handler(mt)},this.init()}function O(_e,xe,Ge){var mt=Ge.pointers.length,Ut=Ge.changedPointers.length,$t=1&xe&&mt-Ut==0,ii=12&xe&&mt-Ut==0;Ge.isFirst=!!$t,Ge.isFinal=!!ii,$t&&(_e.session={}),Ge.eventType=xe,function(_e,xe){var Ge=_e.session,mt=xe.pointers,Ut=mt.length;Ge.firstInput||(Ge.firstInput=yt(xe)),Ut>1&&!Ge.firstMultiple?Ge.firstMultiple=yt(xe):1===Ut&&(Ge.firstMultiple=!1);var $t=Ge.firstInput,ii=Ge.firstMultiple,Nr=ii?ii.center:$t.center,$r=xe.center=It(mt);xe.timeStamp=re(),xe.deltaTime=xe.timeStamp-$t.timeStamp,xe.angle=bi(Nr,$r),xe.distance=Hn(Nr,$r),function(_e,xe){var Ge=xe.center,mt=_e.offsetDelta||{},Ut=_e.prevDelta||{},$t=_e.prevInput||{};(1===xe.eventType||4===$t.eventType)&&(Ut=_e.prevDelta={x:$t.deltaX||0,y:$t.deltaY||0},mt=_e.offsetDelta={x:Ge.x,y:Ge.y}),xe.deltaX=Ut.x+(Ge.x-mt.x),xe.deltaY=Ut.y+(Ge.y-mt.y)}(Ge,xe),xe.offsetDirection=Rn(xe.deltaX,xe.deltaY);var ys=Tn(xe.deltaTime,xe.deltaX,xe.deltaY);xe.overallVelocityX=ys.x,xe.overallVelocityY=ys.y,xe.overallVelocity=L(ys.x)>L(ys.y)?ys.x:ys.y,xe.scale=ii?function(_e,xe){return Hn(xe[0],xe[1],pt)/Hn(_e[0],_e[1],pt)}(ii.pointers,mt):1,xe.rotation=ii?function(_e,xe){return bi(xe[1],xe[0],pt)+bi(_e[1],_e[0],pt)}(ii.pointers,mt):0,xe.maxPointers=Ge.prevInput?xe.pointers.length>Ge.prevInput.maxPointers?xe.pointers.length:Ge.prevInput.maxPointers:xe.pointers.length,function(_e,xe){var Ut,$t,ii,Nr,Ge=_e.lastInterval||xe,mt=xe.timeStamp-Ge.timeStamp;if(8!=xe.eventType&&(mt>25||Ge.velocity===Y)){var $r=xe.deltaX-Ge.deltaX,ys=xe.deltaY-Ge.deltaY,ei=Tn(mt,$r,ys);$t=ei.x,ii=ei.y,Ut=L(ei.x)>L(ei.y)?ei.x:ei.y,Nr=Rn($r,ys),_e.lastInterval=xe}else Ut=Ge.velocity,$t=Ge.velocityX,ii=Ge.velocityY,Nr=Ge.direction;xe.velocity=Ut,xe.velocityX=$t,xe.velocityY=ii,xe.direction=Nr}(Ge,xe);var ei=_e.element;M(xe.srcEvent.target,ei)&&(ei=xe.srcEvent.target),xe.target=ei}(_e,Ge),_e.emit("hammer.input",Ge),_e.recognize(Ge),_e.session.prevInput=Ge}function yt(_e){for(var xe=[],Ge=0;Ge<_e.pointers.length;)xe[Ge]={clientX:V(_e.pointers[Ge].clientX),clientY:V(_e.pointers[Ge].clientY)},Ge++;return{timeStamp:re(),pointers:xe,center:It(xe),deltaX:_e.deltaX,deltaY:_e.deltaY}}function It(_e){var xe=_e.length;if(1===xe)return{x:V(_e[0].clientX),y:V(_e[0].clientY)};for(var Ge=0,mt=0,Ut=0;Ut<xe;)Ge+=_e[Ut].clientX,mt+=_e[Ut].clientY,Ut++;return{x:V(Ge/xe),y:V(mt/xe)}}function Tn(_e,xe,Ge){return{x:xe/_e||0,y:Ge/_e||0}}function Rn(_e,xe){return _e===xe?1:L(_e)>=L(xe)?_e<0?2:4:xe<0?8:16}function Hn(_e,xe,Ge){Ge||(Ge=Et);var mt=xe[Ge[0]]-_e[Ge[0]],Ut=xe[Ge[1]]-_e[Ge[1]];return Math.sqrt(mt*mt+Ut*Ut)}function bi(_e,xe,Ge){return Ge||(Ge=Et),180*Math.atan2(xe[Ge[1]]-_e[Ge[1]],xe[Ge[0]]-_e[Ge[0]])/Math.PI}ge.prototype={handler:function(){},init:function(){this.evEl&&$(this.element,this.evEl,this.domHandler),this.evTarget&&$(this.target,this.evTarget,this.domHandler),this.evWin&&$(Te(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&K(this.element,this.evEl,this.domHandler),this.evTarget&&K(this.target,this.evTarget,this.domHandler),this.evWin&&K(Te(this.element),this.evWin,this.domHandler)}};var Ns={mousedown:1,mousemove:2,mouseup:4},cs="mousedown",Ps="mousemove mouseup";function zr(){this.evEl=cs,this.evWin=Ps,this.pressed=!1,ge.apply(this,arguments)}E(zr,ge,{handler:function(xe){var Ge=Ns[xe.type];1&Ge&&0===xe.button&&(this.pressed=!0),2&Ge&&1!==xe.which&&(Ge=4),this.pressed&&(4&Ge&&(this.pressed=!1),this.callback(this.manager,Ge,{pointers:[xe],changedPointers:[xe],pointerType:Ze,srcEvent:xe}))}});var da={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Sl={2:Ue,3:"pen",4:Ze,5:"kinect"},ha="pointerdown",ms="pointermove pointerup pointercancel";function Jt(){this.evEl=ha,this.evWin=ms,ge.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}J.MSPointerEvent&&!J.PointerEvent&&(ha="MSPointerDown",ms="MSPointerMove MSPointerUp MSPointerCancel"),E(Jt,ge,{handler:function(xe){var Ge=this.store,mt=!1,Ut=xe.type.toLowerCase().replace("ms",""),$t=da[Ut],ii=Sl[xe.pointerType]||xe.pointerType,Nr=ii==Ue,$r=S(Ge,xe.pointerId,"pointerId");1&$t&&(0===xe.button||Nr)?$r<0&&(Ge.push(xe),$r=Ge.length-1):12&$t&&(mt=!0),!($r<0)&&(Ge[$r]=xe,this.callback(this.manager,$t,{pointers:Ge,changedPointers:[xe],pointerType:ii,srcEvent:xe}),mt&&Ge.splice($r,1))}});var Ha={touchstart:1,touchmove:2,touchend:4,touchcancel:8},rt="touchstart",ot="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=rt,this.evWin=ot,this.started=!1,ge.apply(this,arguments)}function pe(_e,xe){var Ge=U(_e.touches),mt=U(_e.changedTouches);return 12&xe&&(Ge=ie(Ge.concat(mt),"identifier",!0)),[Ge,mt]}E(ct,ge,{handler:function(xe){var Ge=Ha[xe.type];if(1===Ge&&(this.started=!0),this.started){var mt=pe.call(this,xe,Ge);12&Ge&&mt[0].length-mt[1].length==0&&(this.started=!1),this.callback(this.manager,Ge,{pointers:mt[0],changedPointers:mt[1],pointerType:Ue,srcEvent:xe})}}});var ve={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Be="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=Be,this.targetIds={},ge.apply(this,arguments)}function Qe(_e,xe){var Ge=U(_e.touches),mt=this.targetIds;if(3&xe&&1===Ge.length)return mt[Ge[0].identifier]=!0,[Ge,Ge];var Ut,$t,ii=U(_e.changedTouches),Nr=[],$r=this.target;if($t=Ge.filter(function(ys){return M(ys.target,$r)}),1===xe)for(Ut=0;Ut<$t.length;)mt[$t[Ut].identifier]=!0,Ut++;for(Ut=0;Ut<ii.length;)mt[ii[Ut].identifier]&&Nr.push(ii[Ut]),12&xe&&delete mt[ii[Ut].identifier],Ut++;return Nr.length?[ie($t.concat(Nr),"identifier",!0),Nr]:void 0}function At(){ge.apply(this,arguments);var _e=D(this.handler,this);this.touch=new lt(this.manager,_e),this.mouse=new zr(this.manager,_e),this.primaryTouch=null,this.lastTouches=[]}function Yt(_e,xe){1&_e?(this.primaryTouch=xe.changedPointers[0].identifier,jn.call(this,xe)):12&_e&&jn.call(this,xe)}function jn(_e){var xe=_e.changedPointers[0];if(xe.identifier===this.primaryTouch){var Ge={x:xe.clientX,y:xe.clientY};this.lastTouches.push(Ge);var mt=this.lastTouches;setTimeout(function(){var $t=mt.indexOf(Ge);$t>-1&&mt.splice($t,1)},2500)}}function ni(_e){for(var xe=_e.srcEvent.clientX,Ge=_e.srcEvent.clientY,mt=0;mt<this.lastTouches.length;mt++){var Ut=this.lastTouches[mt],$t=Math.abs(xe-Ut.x),ii=Math.abs(Ge-Ut.y);if($t<=25&&ii<=25)return!0}return!1}E(lt,ge,{handler:function(xe){var Ge=ve[xe.type],mt=Qe.call(this,xe,Ge);!mt||this.callback(this.manager,Ge,{pointers:mt[0],changedPointers:mt[1],pointerType:Ue,srcEvent:xe})}}),E(At,ge,{handler:function(xe,Ge,mt){var $t=mt.pointerType==Ze;if(!($t&&mt.sourceCapabilities&&mt.sourceCapabilities.firesTouchEvents)){if(mt.pointerType==Ue)Yt.call(this,Ge,mt);else if($t&&ni.call(this,mt))return;this.callback(xe,Ge,mt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var In=ue(fe.style,"touchAction"),mn=In!==Y,Gn="compute",Ji="manipulation",er="none",qn="pan-x",Bi="pan-y",fa=function(){if(!mn)return!1;var _e={},xe=J.CSS&&J.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ge){_e[Ge]=!xe||J.CSS.supports("touch-action",Ge)}),_e}();function Hr(_e,xe){this.manager=_e,this.set(xe)}function Dt(_e){this.options=T({},this.defaults,_e||{}),this.id=ee++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function $e(_e){return 16&_e?"cancel":8&_e?"end":4&_e?"move":2&_e?"start":""}function Gt(_e){return 16==_e?"down":8==_e?"up":2==_e?"left":4==_e?"right":""}function vt(_e,xe){var Ge=xe.manager;return Ge?Ge.get(_e):_e}function _n(){Dt.apply(this,arguments)}function _s(){_n.apply(this,arguments),this.pX=null,this.pY=null}function Gr(){_n.apply(this,arguments)}function qs(){Dt.apply(this,arguments),this._timer=null,this._input=null}function Cl(){_n.apply(this,arguments)}function oo(){_n.apply(this,arguments)}function Rr(){Dt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Fs(_e,xe){return(xe=xe||{}).recognizers=I(xe.recognizers,Fs.defaults.preset),new ao(_e,xe)}function ao(_e,xe){this.options=T({},Fs.defaults,xe||{}),this.options.inputTarget=this.options.inputTarget||_e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=_e,this.input=function(_e){return new(_e.options.inputClass||(ye?Jt:Oe?lt:te?At:zr))(_e,O)}(this),this.touchAction=new Hr(this,this.options.touchAction),xl(this,!0),x(this.options.recognizers,function(Ge){var mt=this.add(new Ge[0](Ge[1]));Ge[2]&&mt.recognizeWith(Ge[2]),Ge[3]&&mt.requireFailure(Ge[3])},this)}function xl(_e,xe){var mt,Ge=_e.element;Ge.style&&(x(_e.options.cssProps,function(Ut,$t){mt=ue(Ge.style,$t),xe?(_e.oldCssProps[mt]=Ge.style[mt],Ge.style[mt]=Ut):Ge.style[mt]=_e.oldCssProps[mt]||""}),xe||(_e.oldCssProps={}))}Hr.prototype={set:function(_e){_e==Gn&&(_e=this.compute()),mn&&this.manager.element.style&&fa[_e]&&(this.manager.element.style[In]=_e),this.actions=_e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var _e=[];return x(this.manager.recognizers,function(xe){j(xe.options.enable,[xe])&&(_e=_e.concat(xe.getTouchAction()))}),function(_e){if(F(_e,er))return er;var xe=F(_e,qn),Ge=F(_e,Bi);return xe&&Ge?er:xe||Ge?xe?qn:Bi:F(_e,Ji)?Ji:"auto"}(_e.join(" "))},preventDefaults:function(_e){var xe=_e.srcEvent,Ge=_e.offsetDirection;if(!this.manager.session.prevented){var mt=this.actions,Ut=F(mt,er)&&!fa[er],$t=F(mt,Bi)&&!fa[Bi],ii=F(mt,qn)&&!fa[qn];if(Ut&&1===_e.pointers.length&&_e.distance<2&&_e.deltaTime<250)return;return ii&&$t||!(Ut||$t&&6&Ge||ii&&24&Ge)?void 0:this.preventSrc(xe)}xe.preventDefault()},preventSrc:function(_e){this.manager.session.prevented=!0,_e.preventDefault()}},Dt.prototype={defaults:{},set:function(_e){return T(this.options,_e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(_e){if(w(_e,"recognizeWith",this))return this;var xe=this.simultaneous;return xe[(_e=vt(_e,this)).id]||(xe[_e.id]=_e,_e.recognizeWith(this)),this},dropRecognizeWith:function(_e){return w(_e,"dropRecognizeWith",this)||(_e=vt(_e,this),delete this.simultaneous[_e.id]),this},requireFailure:function(_e){if(w(_e,"requireFailure",this))return this;var xe=this.requireFail;return-1===S(xe,_e=vt(_e,this))&&(xe.push(_e),_e.requireFailure(this)),this},dropRequireFailure:function(_e){if(w(_e,"dropRequireFailure",this))return this;_e=vt(_e,this);var xe=S(this.requireFail,_e);return xe>-1&&this.requireFail.splice(xe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(_e){return!!this.simultaneous[_e.id]},emit:function(_e){var xe=this,Ge=this.state;function mt(Ut){xe.manager.emit(Ut,_e)}Ge<8&&mt(xe.options.event+$e(Ge)),mt(xe.options.event),_e.additionalEvent&&mt(_e.additionalEvent),Ge>=8&&mt(xe.options.event+$e(Ge))},tryEmit:function(_e){if(this.canEmit())return this.emit(_e);this.state=32},canEmit:function(){for(var _e=0;_e<this.requireFail.length;){if(!(33&this.requireFail[_e].state))return!1;_e++}return!0},recognize:function(_e){var xe=T({},_e);if(!j(this.options.enable,[this,xe]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(xe),30&this.state&&this.tryEmit(xe)},process:function(_e){},getTouchAction:function(){},reset:function(){}},E(_n,Dt,{defaults:{pointers:1},attrTest:function(_e){var xe=this.options.pointers;return 0===xe||_e.pointers.length===xe},process:function(_e){var xe=this.state,Ge=_e.eventType,mt=6&xe,Ut=this.attrTest(_e);return mt&&(8&Ge||!Ut)?16|xe:mt||Ut?4&Ge?8|xe:2&xe?4|xe:2:32}}),E(_s,_n,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var _e=this.options.direction,xe=[];return 6&_e&&xe.push(Bi),24&_e&&xe.push(qn),xe},directionTest:function(_e){var xe=this.options,Ge=!0,mt=_e.distance,Ut=_e.direction,$t=_e.deltaX,ii=_e.deltaY;return Ut&xe.direction||(6&xe.direction?(Ut=0===$t?1:$t<0?2:4,Ge=$t!=this.pX,mt=Math.abs(_e.deltaX)):(Ut=0===ii?1:ii<0?8:16,Ge=ii!=this.pY,mt=Math.abs(_e.deltaY))),_e.direction=Ut,Ge&&mt>xe.threshold&&Ut&xe.direction},attrTest:function(_e){return _n.prototype.attrTest.call(this,_e)&&(2&this.state||!(2&this.state)&&this.directionTest(_e))},emit:function(_e){this.pX=_e.deltaX,this.pY=_e.deltaY;var xe=Gt(_e.direction);xe&&(_e.additionalEvent=this.options.event+xe),this._super.emit.call(this,_e)}}),E(Gr,_n,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[er]},attrTest:function(_e){return this._super.attrTest.call(this,_e)&&(Math.abs(_e.scale-1)>this.options.threshold||2&this.state)},emit:function(_e){1!==_e.scale&&(_e.additionalEvent=this.options.event+(_e.scale<1?"in":"out")),this._super.emit.call(this,_e)}}),E(qs,Dt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(_e){var xe=this.options,Ge=_e.pointers.length===xe.pointers,mt=_e.distance<xe.threshold,Ut=_e.deltaTime>xe.time;if(this._input=_e,!mt||!Ge||12&_e.eventType&&!Ut)this.reset();else if(1&_e.eventType)this.reset(),this._timer=W(function(){this.state=8,this.tryEmit()},xe.time,this);else if(4&_e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(_e){8===this.state&&(_e&&4&_e.eventType?this.manager.emit(this.options.event+"up",_e):(this._input.timeStamp=re(),this.manager.emit(this.options.event,this._input)))}}),E(Cl,_n,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[er]},attrTest:function(_e){return this._super.attrTest.call(this,_e)&&(Math.abs(_e.rotation)>this.options.threshold||2&this.state)}}),E(oo,_n,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return _s.prototype.getTouchAction.call(this)},attrTest:function(_e){var Ge,xe=this.options.direction;return 30&xe?Ge=_e.overallVelocity:6&xe?Ge=_e.overallVelocityX:24&xe&&(Ge=_e.overallVelocityY),this._super.attrTest.call(this,_e)&&xe&_e.offsetDirection&&_e.distance>this.options.threshold&&_e.maxPointers==this.options.pointers&&L(Ge)>this.options.velocity&&4&_e.eventType},emit:function(_e){var xe=Gt(_e.offsetDirection);xe&&this.manager.emit(this.options.event+xe,_e),this.manager.emit(this.options.event,_e)}}),E(Rr,Dt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ji]},process:function(_e){var xe=this.options,Ge=_e.pointers.length===xe.pointers,mt=_e.distance<xe.threshold,Ut=_e.deltaTime<xe.time;if(this.reset(),1&_e.eventType&&0===this.count)return this.failTimeout();if(mt&&Ut&&Ge){if(4!=_e.eventType)return this.failTimeout();var $t=!this.pTime||_e.timeStamp-this.pTime<xe.interval,ii=!this.pCenter||Hn(this.pCenter,_e.center)<xe.posThreshold;if(this.pTime=_e.timeStamp,this.pCenter=_e.center,ii&&$t?this.count+=1:this.count=1,this._input=_e,0==this.count%xe.taps)return this.hasRequireFailures()?(this._timer=W(function(){this.state=8,this.tryEmit()},xe.interval,this),2):8}return 32},failTimeout:function(){return this._timer=W(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Fs.VERSION="2.0.7",Fs.defaults={domEvents:!1,touchAction:Gn,enable:!0,inputTarget:null,inputClass:null,preset:[[Cl,{enable:!1}],[Gr,{enable:!1},["rotate"]],[oo,{direction:6}],[_s,{direction:6},["swipe"]],[Rr],[Rr,{event:"doubletap",taps:2},["tap"]],[qs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ao.prototype={set:function(_e){return T(this.options,_e),_e.touchAction&&this.touchAction.update(),_e.inputTarget&&(this.input.destroy(),this.input.target=_e.inputTarget,this.input.init()),this},stop:function(_e){this.session.stopped=_e?2:1},recognize:function(_e){var xe=this.session;if(!xe.stopped){this.touchAction.preventDefaults(_e);var Ge,mt=this.recognizers,Ut=xe.curRecognizer;(!Ut||Ut&&8&Ut.state)&&(Ut=xe.curRecognizer=null);for(var $t=0;$t<mt.length;)Ge=mt[$t],2===xe.stopped||Ut&&Ge!=Ut&&!Ge.canRecognizeWith(Ut)?Ge.reset():Ge.recognize(_e),!Ut&&14&Ge.state&&(Ut=xe.curRecognizer=Ge),$t++}},get:function(_e){if(_e instanceof Dt)return _e;for(var xe=this.recognizers,Ge=0;Ge<xe.length;Ge++)if(xe[Ge].options.event==_e)return xe[Ge];return null},add:function(_e){if(w(_e,"add",this))return this;var xe=this.get(_e.options.event);return xe&&this.remove(xe),this.recognizers.push(_e),_e.manager=this,this.touchAction.update(),_e},remove:function(_e){if(w(_e,"remove",this))return this;if(_e=this.get(_e)){var xe=this.recognizers,Ge=S(xe,_e);-1!==Ge&&(xe.splice(Ge,1),this.touchAction.update())}return this},on:function(_e,xe){if(_e!==Y&&xe!==Y){var Ge=this.handlers;return x(Q(_e),function(mt){Ge[mt]=Ge[mt]||[],Ge[mt].push(xe)}),this}},off:function(_e,xe){if(_e!==Y){var Ge=this.handlers;return x(Q(_e),function(mt){xe?Ge[mt]&&Ge[mt].splice(S(Ge[mt],xe),1):delete Ge[mt]}),this}},emit:function(_e,xe){this.options.domEvents&&function(_e,xe){var Ge=xt.createEvent("Event");Ge.initEvent(_e,!0,!0),Ge.gesture=xe,xe.target.dispatchEvent(Ge)}(_e,xe);var Ge=this.handlers[_e]&&this.handlers[_e].slice();if(Ge&&Ge.length){xe.type=_e,xe.preventDefault=function(){xe.srcEvent.preventDefault()};for(var mt=0;mt<Ge.length;)Ge[mt](xe),mt++}},destroy:function(){this.element&&xl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},T(Fs,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:ao,Input:ge,TouchAction:Hr,TouchInput:lt,MouseInput:zr,PointerEventInput:Jt,TouchMouseInput:At,SingleTouchInput:ct,Recognizer:Dt,AttrRecognizer:_n,Tap:Rr,Pan:_s,Swipe:oo,Pinch:Gr,Rotate:Cl,Press:qs,on:$,off:K,each:x,merge:y,extend:v,assign:T,inherit:E,bindFn:D,prefixed:ue}),(void 0!==J?J:"undefined"!=typeof self?self:{}).Hammer=Fs,(gt=function(){return Fs}.call(it,tt,it,jt))!==Y&&(jt.exports=gt)}(window,document)},815:function(jt,it,tt){var gt;jt=tt.nmd(jt),function(){var J,Ae="Expected a function",q="__lodash_hash_undefined__",L="__lodash_placeholder__",j=32,$=128,se=1/0,Te=9007199254740991,ye=4294967295,nt=[["ary",$],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",j],["partialRight",64],["rearg",256]],Ze="[object Arguments]",Je="[object Array]",Ve="[object Boolean]",ke="[object Date]",Re="[object Error]",ze="[object Function]",qe="[object GeneratorFunction]",je="[object Map]",G="[object Number]",be="[object Object]",ce="[object Promise]",Et="[object RegExp]",pt="[object Set]",ge="[object String]",B="[object Symbol]",k="[object WeakMap]",Xe="[object ArrayBuffer]",yt="[object DataView]",It="[object Float32Array]",Tn="[object Float64Array]",Rn="[object Int8Array]",Hn="[object Int16Array]",bi="[object Int32Array]",di="[object Uint8Array]",Ur="[object Uint8ClampedArray]",Ns="[object Uint16Array]",cs="[object Uint32Array]",Ps=/\b__p \+= '';/g,zr=/\b(__p \+=) '' \+/g,da=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Sl=/&(?:amp|lt|gt|quot|#39);/g,ha=/[&<>"']/g,ms=RegExp(Sl.source),Jt=RegExp(ha.source),Ha=/<%-([\s\S]+?)%>/g,rt=/<%([\s\S]+?)%>/g,ot=/<%=([\s\S]+?)%>/g,ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,lt=RegExp(Be.source),Qe=/^\s+/,bt=/\s/,St=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,At=/\{\n\/\* \[wrapped with (.+)\] \*/,Yt=/,? & /,jn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ni=/[()=,{}\[\]\/\s]/,In=/\\(\\)?/g,mn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gn=/\w*$/,Sn=/^[-+]0x[0-9a-f]+$/i,Ji=/^0b[01]+$/i,er=/^\[object .+?Constructor\]$/,qn=/^0o[0-7]+$/i,Bi=/^(?:0|[1-9]\d*)$/,fa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hr=/($^)/,ne=/['\n\r\u2028\u2029\\]/g,de="\\ud800-\\udfff",Z="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",we="\\u2700-\\u27bf",Le="a-z\\xdf-\\xf6\\xf8-\\xff",vt="A-Z\\xc0-\\xd6\\xd8-\\xde",_n="\\ufe0e\\ufe0f",_s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qs="["+de+"]",Cl="["+_s+"]",oo="["+Z+"]",Rr="\\d+",Fs="["+we+"]",hc="["+Le+"]",wn="[^"+de+_s+Rr+we+Le+vt+"]",ao="\\ud83c[\\udffb-\\udfff]",pa="[^"+de+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",xe="["+vt+"]",mt="(?:"+hc+"|"+wn+")",Ut="(?:"+xe+"|"+wn+")",$t="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ii="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Nr="(?:"+oo+"|"+ao+")?",$r="["+_n+"]?",Cx=$r+Nr+"(?:\\u200d(?:"+[pa,ad,_e].join("|")+")"+$r+Nr+")*",ld="(?:"+[Fs,ad,_e].join("|")+")"+Cx,Xi="(?:"+[pa+oo+"?",oo,ad,_e,qs].join("|")+")",Yf=RegExp("['\u2019]","g"),xm=RegExp(oo,"g"),gh=RegExp(ao+"(?="+ao+")|"+Xi+Cx,"g"),pb=RegExp([xe+"?"+hc+"+"+$t+"(?="+[Cl,xe,"$"].join("|")+")",Ut+"+"+ii+"(?="+[Cl,xe+mt,"$"].join("|")+")",xe+"?"+mt+"+"+$t,xe+"+"+ii,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rr,ld].join("|"),"g"),xx=RegExp("[\\u200d"+de+Z+_n+"]"),Al=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ax=-1,yn={};yn[It]=yn[Tn]=yn[Rn]=yn[Hn]=yn[bi]=yn[di]=yn[Ur]=yn[Ns]=yn[cs]=!0,yn[Ze]=yn[Je]=yn[Xe]=yn[Ve]=yn[yt]=yn[ke]=yn[Re]=yn[ze]=yn[je]=yn[G]=yn[be]=yn[Et]=yn[pt]=yn[ge]=yn[k]=!1;var tr={};tr[Ze]=tr[Je]=tr[Xe]=tr[yt]=tr[Ve]=tr[ke]=tr[It]=tr[Tn]=tr[Rn]=tr[Hn]=tr[bi]=tr[je]=tr[G]=tr[be]=tr[Et]=tr[pt]=tr[ge]=tr[B]=tr[di]=tr[Ur]=tr[Ns]=tr[cs]=!0,tr[Re]=tr[ze]=tr[k]=!1;var ln={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tx=parseFloat,yb=parseInt,kt="object"==typeof global&&global&&global.Object===Object&&global,Ls="object"==typeof self&&self&&self.Object===Object&&self,Ri=kt||Ls||Function("return this")(),Tl=it&&!it.nodeType&&it,ga=Tl&&jt&&!jt.nodeType&&jt,So=ga&&ga.exports===Tl,Am=So&&kt.process,_r=function(){try{return ga&&ga.require&&ga.require("util").types||Am&&Am.binding&&Am.binding("util")}catch(Tt){}}(),rn=_r&&_r.isArrayBuffer,si=_r&&_r.isDate,rr=_r&&_r.isMap,lo=_r&&_r.isRegExp,fc=_r&&_r.isSet,Jr=_r&&_r.isTypedArray;function es(st,Tt,_t){switch(_t.length){case 0:return st.call(Tt);case 1:return st.call(Tt,_t[0]);case 2:return st.call(Tt,_t[0],_t[1]);case 3:return st.call(Tt,_t[0],_t[1],_t[2])}return st.apply(Tt,_t)}function Pr(st,Tt,_t,un){for(var xn=-1,Ii=null==st?0:st.length;++xn<Ii;){var Wr=st[xn];Tt(un,Wr,_t(Wr),st)}return un}function ks(st,Tt){for(var _t=-1,un=null==st?0:st.length;++_t<un&&!1!==Tt(st[_t],_t,st););return st}function cd(st,Tt){for(var _t=null==st?0:st.length;_t--&&!1!==Tt(st[_t],_t,st););return st}function Zn(st,Tt){for(var _t=-1,un=null==st?0:st.length;++_t<un;)if(!Tt(st[_t],_t,st))return!1;return!0}function ma(st,Tt){for(var _t=-1,un=null==st?0:st.length,xn=0,Ii=[];++_t<un;){var Wr=st[_t];Tt(Wr,_t,st)&&(Ii[xn++]=Wr)}return Ii}function Dl(st,Tt){return!(null==st||!st.length)&&Ga(st,Tt,0)>-1}function _h(st,Tt,_t){for(var un=-1,xn=null==st?0:st.length;++un<xn;)if(_t(Tt,st[un]))return!0;return!1}function Vi(st,Tt){for(var _t=-1,un=null==st?0:st.length,xn=Array(un);++_t<un;)xn[_t]=Tt(st[_t],_t,st);return xn}function Fr(st,Tt){for(var _t=-1,un=Tt.length,xn=st.length;++_t<un;)st[xn+_t]=Tt[_t];return st}function au(st,Tt,_t,un){var xn=-1,Ii=null==st?0:st.length;for(un&&Ii&&(_t=st[++xn]);++xn<Ii;)_t=Tt(_t,st[xn],xn,st);return _t}function ud(st,Tt,_t,un){var xn=null==st?0:st.length;for(un&&xn&&(_t=st[--xn]);xn--;)_t=Tt(_t,st[xn],xn,st);return _t}function Co(st,Tt){for(var _t=-1,un=null==st?0:st.length;++_t<un;)if(Tt(st[_t],_t,st))return!0;return!1}var nr=Tm("length");function yh(st,Tt,_t){var un;return _t(st,function(xn,Ii,Wr){if(Tt(xn,Ii,Wr))return un=Ii,!1}),un}function dd(st,Tt,_t,un){for(var xn=st.length,Ii=_t+(un?1:-1);un?Ii--:++Ii<xn;)if(Tt(st[Ii],Ii,st))return Ii;return-1}function Ga(st,Tt,_t){return Tt==Tt?function(st,Tt,_t){for(var un=_t-1,xn=st.length;++un<xn;)if(st[un]===Tt)return un;return-1}(st,Tt,_t):dd(st,pc,_t)}function Kf(st,Tt,_t,un){for(var xn=_t-1,Ii=st.length;++xn<Ii;)if(un(st[xn],Tt))return xn;return-1}function pc(st){return st!=st}function vs(st,Tt){var _t=null==st?0:st.length;return _t?hd(st,Tt)/_t:NaN}function Tm(st){return function(Tt){return null==Tt?J:Tt[st]}}function Vo(st){return function(Tt){return null==st?J:st[Tt]}}function Uo(st,Tt,_t,un,xn){return xn(st,function(Ii,Wr,zi){_t=un?(un=!1,Ii):Tt(_t,Ii,Wr,zi)}),_t}function hd(st,Tt){for(var _t,un=-1,xn=st.length;++un<xn;){var Ii=Tt(st[un]);Ii!==J&&(_t=_t===J?Ii:_t+Ii)}return _t}function fd(st,Tt){for(var _t=-1,un=Array(st);++_t<st;)un[_t]=Tt(_t);return un}function vb(st){return st&&st.slice(0,gc(st)+1).replace(Qe,"")}function zo(st){return function(Tt){return st(Tt)}}function Mm(st,Tt){return Vi(Tt,function(_t){return st[_t]})}function vh(st,Tt){return st.has(Tt)}function Ix(st,Tt){for(var _t=-1,un=st.length;++_t<un&&Ga(Tt,st[_t],0)>-1;);return _t}function Ox(st,Tt){for(var _t=st.length;_t--&&Ga(Tt,st[_t],0)>-1;);return _t}function DP(st,Tt){for(var _t=st.length,un=0;_t--;)st[_t]===Tt&&++un;return un}var MP=Vo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),IP=Vo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function OP(st){return"\\"+ln[st]}function bh(st){return xx.test(st)}function bb(st){var Tt=-1,_t=Array(st.size);return st.forEach(function(un,xn){_t[++Tt]=[xn,un]}),_t}function Rx(st,Tt){return function(_t){return st(Tt(_t))}}function lu(st,Tt){for(var _t=-1,un=st.length,xn=0,Ii=[];++_t<un;){var Wr=st[_t];(Wr===Tt||Wr===L)&&(st[_t]=L,Ii[xn++]=_t)}return Ii}function Im(st){var Tt=-1,_t=Array(st.size);return st.forEach(function(un){_t[++Tt]=un}),_t}function wh(st){return bh(st)?function(st){for(var Tt=gh.lastIndex=0;gh.test(st);)++Tt;return Tt}(st):nr(st)}function $a(st){return bh(st)?function(st){return st.match(gh)||[]}(st):function(st){return st.split("")}(st)}function gc(st){for(var Tt=st.length;Tt--&&bt.test(st.charAt(Tt)););return Tt}var Rm=Vo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Eh=function st(Tt){var u,_t=(Tt=null==Tt?Ri:Eh.defaults(Ri.Object(),Tt,Eh.pick(Ri,mh))).Array,un=Tt.Date,xn=Tt.Error,Ii=Tt.Function,Wr=Tt.Math,zi=Tt.Object,Nm=Tt.RegExp,Pm=Tt.String,ya=Tt.TypeError,sr=_t.prototype,cu=zi.prototype,Xf=Tt["__core-js_shared__"],yr=Ii.prototype.toString,Hi=cu.hasOwnProperty,kP=0,Sh=(u=/[^.]+$/.exec(Xf&&Xf.keys&&Xf.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Ys=cu.toString,Fx=yr.call(zi),Fm=Ri._,pd=Nm("^"+yr.call(Hi).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bs=So?Tt.Buffer:J,Ml=Tt.Symbol,gd=Tt.Uint8Array,Sb=Bs?Bs.allocUnsafe:J,va=Rx(zi.getPrototypeOf,zi),Lm=zi.create,Qf=cu.propertyIsEnumerable,Fn=sr.splice,Lx=Ml?Ml.isConcatSpreadable:J,Ch=Ml?Ml.iterator:J,uu=Ml?Ml.toStringTag:J,Zf=function(){try{var u=xc(zi,"defineProperty");return u({},"",{}),u}catch(h){}}(),Cb=Tt.clearTimeout!==Ri.clearTimeout&&Tt.clearTimeout,kx=un&&un.now!==Ri.Date.now&&un.now,Bx=Tt.setTimeout!==Ri.setTimeout&&Tt.setTimeout,Bt=Wr.ceil,hi=Wr.floor,Tr=zi.getOwnPropertySymbols,ts=Bs?Bs.isBuffer:J,km=Tt.isFinite,xh=sr.join,Wa=Rx(zi.keys,zi),Lr=Wr.max,us=Wr.min,BP=un.now,jx=Tt.parseInt,Ah=Wr.random,Jf=sr.reverse,bs=xc(Tt,"DataView"),co=xc(Tt,"Map"),ep=xc(Tt,"Promise"),ba=xc(Tt,"Set"),xo=xc(Tt,"WeakMap"),Th=xc(zi,"create"),Dh=xo&&new xo,md={},Vx=Eu(bs),Bm=Eu(co),jm=Eu(ep),xb=Eu(ba),Vm=Eu(xo),tp=Ml?Ml.prototype:J,_d=tp?tp.valueOf:J,Mh=tp?tp.toString:J;function Se(u){if(wr(u)&&!Dn(u)&&!(u instanceof oi)){if(u instanceof Ao)return u;if(Hi.call(u,"__wrapped__"))return xp(u)}return new Ao(u)}var du=function(){function u(){}return function(h){if(!br(h))return{};if(Lm)return Lm(h);u.prototype=h;var m=new u;return u.prototype=J,m}}();function Ih(){}function Ao(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=J}function oi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ye,this.__views__=[]}function uo(u){var h=-1,m=null==u?0:u.length;for(this.clear();++h<m;){var N=u[h];this.set(N[0],N[1])}}function Il(u){var h=-1,m=null==u?0:u.length;for(this.clear();++h<m;){var N=u[h];this.set(N[0],N[1])}}function qa(u){var h=-1,m=null==u?0:u.length;for(this.clear();++h<m;){var N=u[h];this.set(N[0],N[1])}}function wa(u){var h=-1,m=null==u?0:u.length;for(this.__data__=new qa;++h<m;)this.add(u[h])}function Ea(u){var h=this.__data__=new Il(u);this.size=h.size}function Rh(u,h){var m=Dn(u),N=!m&&nl(u),ae=!m&&!N&&il(u),Ce=!m&&!N&&!ae&&qh(u),He=m||N||ae||Ce,Ye=He?fd(u.length,Pm):[],at=Ye.length;for(var Rt in u)(h||Hi.call(u,Rt))&&(!He||!("length"==Rt||ae&&("offset"==Rt||"parent"==Rt)||Ce&&("buffer"==Rt||"byteLength"==Rt||"byteOffset"==Rt)||Mo(Rt,at)))&&Ye.push(Rt);return Ye}function Gm(u){var h=u.length;return h?u[Ol(0,h-1)]:J}function Tb(u,h){return Rd(Xs(u),hu(h,0,u.length))}function yd(u){return Rd(Xs(u))}function $m(u,h,m){(m!==J&&!An(u[h],m)||m===J&&!(h in u))&&Ka(u,h,m)}function Ya(u,h,m){var N=u[h];(!Hi.call(u,h)||!An(N,m)||m===J&&!(h in u))&&Ka(u,h,m)}function vd(u,h){for(var m=u.length;m--;)if(An(u[m][0],h))return m;return-1}function op(u,h,m,N){return yc(u,function(ae,Ce,He){h(N,ae,m(ae),He)}),N}function Zx(u,h){return u&&Ca(h,xs(h),u)}function Ka(u,h,m){"__proto__"==h&&Zf?Zf(u,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[h]=m}function Wm(u,h){for(var m=-1,N=h.length,ae=_t(N),Ce=null==u;++m<N;)ae[m]=Ce?J:Xh(u,h[m]);return ae}function hu(u,h,m){return u==u&&(m!==J&&(u=u<=m?u:m),h!==J&&(u=u>=h?u:h)),u}function js(u,h,m,N,ae,Ce){var He,Ye=1&h,at=2&h,Rt=4&h;if(m&&(He=ae?m(u,N,ae,Ce):m(u)),He!==J)return He;if(!br(u))return u;var Nt=Dn(u);if(Nt){if(He=function(u){var h=u.length,m=new u.constructor(h);return h&&"string"==typeof u[0]&&Hi.call(u,"index")&&(m.index=u.index,m.input=u.input),m}(u),!Ye)return Xs(u,He)}else{var Vt=Us(u),tn=Vt==ze||Vt==qe;if(il(u))return pp(u,Ye);if(Vt==be||Vt==Ze||tn&&!ae){if(He=at||tn?{}:Xb(u),!Ye)return at?function(u,h){return Ca(u,qb(u),h)}(u,function(u,h){return u&&Ca(h,Zs(h),u)}(He,u)):function(u,h){return Ca(u,l_(u),h)}(u,Zx(He,u))}else{if(!tr[Vt])return ae?u:{};He=function(u,h,m){var N=u.constructor;switch(h){case Xe:return yu(u);case Ve:case ke:return new N(+u);case yt:return function(u,h){var m=h?yu(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}(u,m);case It:case Tn:case Rn:case Hn:case bi:case di:case Ur:case Ns:case cs:return i_(u,m);case je:return new N;case G:case ge:return new N(u);case Et:return function(u){var h=new u.constructor(u.source,Gn.exec(u));return h.lastIndex=u.lastIndex,h}(u);case pt:return new N;case B:return function(u){return _d?zi(_d.call(u)):{}}(u)}}(u,Vt,Ye)}}Ce||(Ce=new Ea);var bn=Ce.get(u);if(bn)return bn;Ce.set(u,He),v1(u)?u.forEach(function(Ln){He.add(js(Ln,h,m,Ln,u,Ce))}):g1(u)&&u.forEach(function(Ln,ci){He.set(ci,js(Ln,h,m,ci,u,Ce))});var li=Nt?J:(Rt?at?o_:Fl:at?Zs:xs)(u);return ks(li||u,function(Ln,ci){li&&(Ln=u[ci=Ln]),Ya(He,ci,js(Ln,h,m,ci,u,Ce))}),He}function ap(u,h,m){var N=m.length;if(null==u)return!N;for(u=zi(u);N--;){var ae=m[N],He=u[ae];if(He===J&&!(ae in u)||!(0,h[ae])(He))return!1}return!0}function Nh(u,h,m){if("function"!=typeof u)throw new ya(Ae);return Vh(function(){u.apply(J,m)},h)}function _c(u,h,m,N){var ae=-1,Ce=Dl,He=!0,Ye=u.length,at=[],Rt=h.length;if(!Ye)return at;m&&(h=Vi(h,zo(m))),N?(Ce=_h,He=!1):h.length>=200&&(Ce=vh,He=!1,h=new wa(h));e:for(;++ae<Ye;){var Nt=u[ae],Vt=null==m?Nt:m(Nt);if(Nt=N||0!==Nt?Nt:0,He&&Vt==Vt){for(var tn=Rt;tn--;)if(h[tn]===Vt)continue e;at.push(Nt)}else Ce(h,Vt,N)||at.push(Nt)}return at}Se.templateSettings={escape:Ha,evaluate:rt,interpolate:ot,variable:"",imports:{_:Se}},(Se.prototype=Ih.prototype).constructor=Se,(Ao.prototype=du(Ih.prototype)).constructor=Ao,(oi.prototype=du(Ih.prototype)).constructor=oi,uo.prototype.clear=function(){this.__data__=Th?Th(null):{},this.size=0},uo.prototype.delete=function(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h},uo.prototype.get=function(u){var h=this.__data__;if(Th){var m=h[u];return m===q?J:m}return Hi.call(h,u)?h[u]:J},uo.prototype.has=function(u){var h=this.__data__;return Th?h[u]!==J:Hi.call(h,u)},uo.prototype.set=function(u,h){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=Th&&h===J?q:h,this},Il.prototype.clear=function(){this.__data__=[],this.size=0},Il.prototype.delete=function(u){var h=this.__data__,m=vd(h,u);return!(m<0||(m==h.length-1?h.pop():Fn.call(h,m,1),--this.size,0))},Il.prototype.get=function(u){var h=this.__data__,m=vd(h,u);return m<0?J:h[m][1]},Il.prototype.has=function(u){return vd(this.__data__,u)>-1},Il.prototype.set=function(u,h){var m=this.__data__,N=vd(m,u);return N<0?(++this.size,m.push([u,h])):m[N][1]=h,this},qa.prototype.clear=function(){this.size=0,this.__data__={hash:new uo,map:new(co||Il),string:new uo}},qa.prototype.delete=function(u){var h=Vs(this,u).delete(u);return this.size-=h?1:0,h},qa.prototype.get=function(u){return Vs(this,u).get(u)},qa.prototype.has=function(u){return Vs(this,u).has(u)},qa.prototype.set=function(u,h){var m=Vs(this,u),N=m.size;return m.set(u,h),this.size+=m.size==N?0:1,this},wa.prototype.add=wa.prototype.push=function(u){return this.__data__.set(u,q),this},wa.prototype.has=function(u){return this.__data__.has(u)},Ea.prototype.clear=function(){this.__data__=new Il,this.size=0},Ea.prototype.delete=function(u){var h=this.__data__,m=h.delete(u);return this.size=h.size,m},Ea.prototype.get=function(u){return this.__data__.get(u)},Ea.prototype.has=function(u){return this.__data__.has(u)},Ea.prototype.set=function(u,h){var m=this.__data__;if(m instanceof Il){var N=m.__data__;if(!co||N.length<199)return N.push([u,h]),this.size=++m.size,this;m=this.__data__=new qa(N)}return m.set(u,h),this.size=m.size,this};var yc=Za(Xa),Ym=Za(lp,!0);function Mb(u,h){var m=!0;return yc(u,function(N,ae,Ce){return m=!!h(N,ae,Ce)}),m}function Ph(u,h,m){for(var N=-1,ae=u.length;++N<ae;){var Ce=u[N],He=h(Ce);if(null!=He&&(Ye===J?He==He&&!Jo(He):m(He,Ye)))var Ye=He,at=Ce}return at}function Ob(u,h){var m=[];return yc(u,function(N,ae,Ce){h(N,ae,Ce)&&m.push(N)}),m}function ws(u,h,m,N,ae){var Ce=-1,He=u.length;for(m||(m=mA),ae||(ae=[]);++Ce<He;){var Ye=u[Ce];h>0&&m(Ye)?h>1?ws(Ye,h-1,m,N,ae):Fr(ae,Ye):N||(ae[ae.length]=Ye)}return ae}var bd=Bb(),wd=Bb(!0);function Xa(u,h){return u&&bd(u,h,xs)}function lp(u,h){return u&&wd(u,h,xs)}function Fh(u,h){return ma(h,function(m){return Zo(u[m])})}function Ho(u,h){for(var m=0,N=(h=Ec(h,u)).length;null!=u&&m<N;)u=u[Jn(h[m++])];return m&&m==N?u:J}function Gi(u,h,m){var N=h(u);return Dn(u)?N:Fr(N,m(u))}function Es(u){return null==u?u===J?"[object Undefined]":"[object Null]":uu&&uu in zi(u)?function(u){var h=Hi.call(u,uu),m=u[uu];try{u[uu]=J;var N=!0}catch(Ce){}var ae=Ys.call(u);return N&&(h?u[uu]=m:delete u[uu]),ae}(u):function(u){return Ys.call(u)}(u)}function Go(u,h){return u>h}function Ed(u,h){return null!=u&&Hi.call(u,h)}function Sd(u,h){return null!=u&&h in zi(u)}function fu(u,h,m){for(var N=m?_h:Dl,ae=u[0].length,Ce=u.length,He=Ce,Ye=_t(Ce),at=1/0,Rt=[];He--;){var Nt=u[He];He&&h&&(Nt=Vi(Nt,zo(h))),at=us(Nt.length,at),Ye[He]=!m&&(h||ae>=120&&Nt.length>=120)?new wa(He&&Nt):J}Nt=u[0];var Vt=-1,tn=Ye[0];e:for(;++Vt<ae&&Rt.length<at;){var bn=Nt[Vt],Pn=h?h(bn):bn;if(bn=m||0!==bn?bn:0,!(tn?vh(tn,Pn):N(Rt,Pn,m))){for(He=Ce;--He;){var li=Ye[He];if(!(li?vh(li,Pn):N(u[He],Pn,m)))continue e}tn&&tn.push(Pn),Rt.push(bn)}}return Rt}function Sa(u,h,m){var N=null==(u=h_(u,h=Ec(h,u)))?u:u[Jn(Ko(h))];return null==N?J:es(N,u,m)}function Jx(u){return wr(u)&&Es(u)==Ze}function cp(u,h,m,N,ae){return u===h||(null==u||null==h||!wr(u)&&!wr(h)?u!=u&&h!=h:function(u,h,m,N,ae,Ce){var He=Dn(u),Ye=Dn(h),at=He?Je:Us(u),Rt=Ye?Je:Us(h),Nt=(at=at==Ze?be:at)==be,Vt=(Rt=Rt==Ze?be:Rt)==be,tn=at==Rt;if(tn&&il(u)){if(!il(h))return!1;He=!0,Nt=!1}if(tn&&!Nt)return Ce||(Ce=new Ea),He||qh(u)?bp(u,h,m,N,ae,Ce):function(u,h,m,N,ae,Ce,He){switch(m){case yt:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case Xe:return!(u.byteLength!=h.byteLength||!Ce(new gd(u),new gd(h)));case Ve:case ke:case G:return An(+u,+h);case Re:return u.name==h.name&&u.message==h.message;case Et:case ge:return u==h+"";case je:var Ye=bb;case pt:if(Ye||(Ye=Im),u.size!=h.size&&!(1&N))return!1;var Rt=He.get(u);if(Rt)return Rt==h;N|=2,He.set(u,h);var Nt=bp(Ye(u),Ye(h),N,ae,Ce,He);return He.delete(u),Nt;case B:if(_d)return _d.call(u)==_d.call(h)}return!1}(u,h,at,m,N,ae,Ce);if(!(1&m)){var bn=Nt&&Hi.call(u,"__wrapped__"),Pn=Vt&&Hi.call(h,"__wrapped__");if(bn||Pn){var li=bn?u.value():u,Ln=Pn?h.value():h;return Ce||(Ce=new Ea),ae(li,Ln,m,N,Ce)}}return!!tn&&(Ce||(Ce=new Ea),function(u,h,m,N,ae,Ce){var He=1&m,Ye=Fl(u),at=Ye.length;if(at!=Fl(h).length&&!He)return!1;for(var Vt=at;Vt--;){var tn=Ye[Vt];if(!(He?tn in h:Hi.call(h,tn)))return!1}var bn=Ce.get(u),Pn=Ce.get(h);if(bn&&Pn)return bn==h&&Pn==u;var li=!0;Ce.set(u,h),Ce.set(h,u);for(var Ln=He;++Vt<at;){var ci=u[tn=Ye[Vt]],wi=h[tn];if(N)var po=He?N(wi,ci,tn,h,u,Ce):N(ci,wi,tn,u,h,Ce);if(!(po===J?ci===wi||ae(ci,wi,m,N,Ce):po)){li=!1;break}Ln||(Ln="constructor"==tn)}if(li&&!Ln){var Hs=u.constructor,ea=h.constructor;Hs!=ea&&"constructor"in u&&"constructor"in h&&!("function"==typeof Hs&&Hs instanceof Hs&&"function"==typeof ea&&ea instanceof ea)&&(li=!1)}return Ce.delete(u),Ce.delete(h),li}(u,h,m,N,ae,Ce))}(u,h,m,N,cp,ae))}function Xm(u,h,m,N){var ae=m.length,Ce=ae,He=!N;if(null==u)return!Ce;for(u=zi(u);ae--;){var Ye=m[ae];if(He&&Ye[2]?Ye[1]!==u[Ye[0]]:!(Ye[0]in u))return!1}for(;++ae<Ce;){var at=(Ye=m[ae])[0],Rt=u[at],Nt=Ye[1];if(He&&Ye[2]){if(Rt===J&&!(at in u))return!1}else{var Vt=new Ea;if(N)var tn=N(Rt,Nt,at,u,h,Vt);if(!(tn===J?cp(Nt,Rt,3,N,Vt):tn))return!1}}return!0}function Qm(u){return!(!br(u)||function(u){return!!Sh&&Sh in u}(u))&&(Zo(u)?pd:er).test(Eu(u))}function nA(u){return"function"==typeof u?u:null==u?Js:"object"==typeof u?Dn(u)?xd(u[0],u[1]):rA(u):xu(u)}function Rb(u){if(!Sp(u))return Wa(u);var h=[];for(var m in zi(u))Hi.call(u,m)&&"constructor"!=m&&h.push(m);return h}function Nb(u,h){return u<h}function iA(u,h){var m=-1,N=ho(u)?_t(u.length):[];return yc(u,function(ae,Ce,He){N[++m]=h(ae,Ce,He)}),N}function rA(u){var h=qo(u);return 1==h.length&&h[0][2]?yA(h[0][0],h[0][1]):function(m){return m===u||Xm(m,u,h)}}function xd(u,h){return Yo(u)&&_A(h)?yA(Jn(u),h):function(m){var N=Xh(m,u);return N===J&&N===h?Lp(m,u):cp(h,N,3)}}function Zm(u,h,m,N,ae){u!==h&&bd(h,function(Ce,He){if(ae||(ae=new Ea),br(Ce))!function(u,h,m,N,ae,Ce,He){var Ye=f_(u,m),at=f_(h,m),Rt=He.get(at);if(Rt)$m(u,m,Rt);else{var Nt=Ce?Ce(Ye,at,m+"",u,h,He):J,Vt=Nt===J;if(Vt){var tn=Dn(at),bn=!tn&&il(at),Pn=!tn&&!bn&&qh(at);Nt=at,tn||bn||Pn?Dn(Ye)?Nt=Ye:vr(Ye)?Nt=Xs(Ye):bn?(Vt=!1,Nt=pp(at,!0)):Pn?(Vt=!1,Nt=i_(at,!0)):Nt=[]:Fp(at)||nl(at)?(Nt=Ye,nl(Ye)?Nt=H0(Ye):(!br(Ye)||Zo(Ye))&&(Nt=Xb(at))):Vt=!1}Vt&&(He.set(at,Nt),ae(Nt,at,N,Ce,He),He.delete(at)),$m(u,m,Nt)}}(u,h,He,m,Zm,N,ae);else{var Ye=N?N(f_(u,He),Ce,He+"",u,h,ae):J;Ye===J&&(Ye=Ce),$m(u,He,Ye)}},Zs)}function pu(u,h){var m=u.length;if(m)return Mo(h+=h<0?m:0,m)?u[h]:J}function Lh(u,h,m){h=h.length?Vi(h,function(Ce){return Dn(Ce)?function(He){return Ho(He,1===Ce.length?Ce[0]:Ce)}:Ce}):[Js];var N=-1;return h=Vi(h,zo(Nn())),function(st,Tt){var _t=st.length;for(st.sort(function(Ce,He){return function(u,h,m){for(var N=-1,ae=u.criteria,Ce=h.criteria,He=ae.length,Ye=m.length;++N<He;){var at=Sc(ae[N],Ce[N]);if(at)return N>=Ye?at:at*("desc"==m[N]?-1:1)}return u.index-h.index}(Ce,He,m)});_t--;)st[_t]=st[_t].value;return st}(iA(u,function(Ce,He,Ye){return{criteria:Vi(h,function(Rt){return Rt(Ce)}),index:++N,value:Ce}}))}function Pb(u,h,m){for(var N=-1,ae=h.length,Ce={};++N<ae;){var He=h[N],Ye=Ho(u,He);m(Ye,He)&&dp(Ce,Ec(He,u),Ye)}return Ce}function Wo(u,h,m,N){var ae=N?Kf:Ga,Ce=-1,He=h.length,Ye=u;for(u===h&&(h=Xs(h)),m&&(Ye=Vi(u,zo(m)));++Ce<He;)for(var at=0,Rt=h[Ce],Nt=m?m(Rt):Rt;(at=ae(Ye,Nt,at,N))>-1;)Ye!==u&&Fn.call(Ye,at,1),Fn.call(u,at,1);return u}function kh(u,h){for(var m=u?h.length:0,N=m-1;m--;){var ae=h[m];if(m==N||ae!==Ce){var Ce=ae;Mo(ae)?Fn.call(u,ae,1):gu(u,ae)}}return u}function Ol(u,h){return u+hi(Ah()*(h-u+1))}function up(u,h){var m="";if(!u||h<1||h>Te)return m;do{h%2&&(m+=u),(h=hi(h/2))&&(u+=u)}while(h);return m}function ai(u,h){return Cp(vA(u,h,Js),u+"")}function sA(u){return Gm(Ud(u))}function qP(u,h){var m=Ud(u);return Rd(m,hu(h,0,m.length))}function dp(u,h,m,N){if(!br(u))return u;for(var ae=-1,Ce=(h=Ec(h,u)).length,He=Ce-1,Ye=u;null!=Ye&&++ae<Ce;){var at=Jn(h[ae]),Rt=m;if("__proto__"===at||"constructor"===at||"prototype"===at)return u;if(ae!=He){var Nt=Ye[at];(Rt=N?N(Nt,at,Ye):J)===J&&(Rt=br(Nt)?Nt:Mo(h[ae+1])?[]:{})}Ya(Ye,at,Rt),Ye=Ye[at]}return u}var Jm=Dh?function(u,h){return Dh.set(u,h),u}:Js,To=Zf?function(u,h){return Zf(u,"toString",{configurable:!0,enumerable:!1,value:ey(h),writable:!0})}:Js;function e_(u){return Rd(Ud(u))}function Ss(u,h,m){var N=-1,ae=u.length;h<0&&(h=-h>ae?0:ae+h),(m=m>ae?ae:m)<0&&(m+=ae),ae=h>m?0:m-h>>>0,h>>>=0;for(var Ce=_t(ae);++N<ae;)Ce[N]=u[N+h];return Ce}function YP(u,h){var m;return yc(u,function(N,ae,Ce){return!(m=h(N,ae,Ce))}),!!m}function Bh(u,h,m){var N=0,ae=null==u?N:u.length;if("number"==typeof h&&h==h&&ae<=2147483647){for(;N<ae;){var Ce=N+ae>>>1,He=u[Ce];null!==He&&!Jo(He)&&(m?He<=h:He<h)?N=Ce+1:ae=Ce}return ae}return t_(u,h,Js,m)}function t_(u,h,m,N){var ae=0,Ce=null==u?0:u.length;if(0===Ce)return 0;for(var He=(h=m(h))!=h,Ye=null===h,at=Jo(h),Rt=h===J;ae<Ce;){var Nt=hi((ae+Ce)/2),Vt=m(u[Nt]),tn=Vt!==J,bn=null===Vt,Pn=Vt==Vt,li=Jo(Vt);if(He)var Ln=N||Pn;else Ln=Rt?Pn&&(N||tn):Ye?Pn&&tn&&(N||!bn):at?Pn&&tn&&!bn&&(N||!li):!bn&&!li&&(N?Vt<=h:Vt<h);Ln?ae=Nt+1:Ce=Nt}return us(Ce,4294967294)}function Fb(u,h){for(var m=-1,N=u.length,ae=0,Ce=[];++m<N;){var He=u[m],Ye=h?h(He):He;if(!m||!An(Ye,at)){var at=Ye;Ce[ae++]=0===He?0:He}}return Ce}function Lb(u){return"number"==typeof u?u:Jo(u)?NaN:+u}function Do(u){if("string"==typeof u)return u;if(Dn(u))return Vi(u,Do)+"";if(Jo(u))return Mh?Mh.call(u):"";var h=u+"";return"0"==h&&1/u==-se?"-0":h}function bc(u,h,m){var N=-1,ae=Dl,Ce=u.length,He=!0,Ye=[],at=Ye;if(m)He=!1,ae=_h;else if(Ce>=200){var Rt=h?null:s_(u);if(Rt)return Im(Rt);He=!1,ae=vh,at=new wa}else at=h?[]:Ye;e:for(;++N<Ce;){var Nt=u[N],Vt=h?h(Nt):Nt;if(Nt=m||0!==Nt?Nt:0,He&&Vt==Vt){for(var tn=at.length;tn--;)if(at[tn]===Vt)continue e;h&&at.push(Vt),Ye.push(Nt)}else ae(at,Vt,m)||(at!==Ye&&at.push(Vt),Ye.push(Nt))}return Ye}function gu(u,h){return null==(u=h_(u,h=Ec(h,u)))||delete u[Jn(Ko(h))]}function hp(u,h,m,N){return dp(u,h,m(Ho(u,h)),N)}function mu(u,h,m,N){for(var ae=u.length,Ce=N?ae:-1;(N?Ce--:++Ce<ae)&&h(u[Ce],Ce,u););return m?Ss(u,N?0:Ce,N?Ce+1:ae):Ss(u,N?Ce+1:0,N?ae:Ce)}function oA(u,h){var m=u;return m instanceof oi&&(m=m.value()),au(h,function(N,ae){return ae.func.apply(ae.thisArg,Fr([N],ae.args))},m)}function _u(u,h,m){var N=u.length;if(N<2)return N?bc(u[0]):[];for(var ae=-1,Ce=_t(N);++ae<N;)for(var He=u[ae],Ye=-1;++Ye<N;)Ye!=ae&&(Ce[ae]=_c(Ce[ae]||He,u[Ye],h,m));return bc(ws(Ce,1),h,m)}function fp(u,h,m){for(var N=-1,ae=u.length,Ce=h.length,He={};++N<ae;)m(He,u[N],N<Ce?h[N]:J);return He}function wc(u){return vr(u)?u:[]}function n_(u){return"function"==typeof u?u:Js}function Ec(u,h){return Dn(u)?u:Yo(u,h)?[u]:e0(Ni(u))}var aA=ai;function Qa(u,h,m){var N=u.length;return m=m===J?N:m,!h&&m>=N?u:Ss(u,h,m)}var lA=Cb||function(u){return Ri.clearTimeout(u)};function pp(u,h){if(h)return u.slice();var m=u.length,N=Sb?Sb(m):new u.constructor(m);return u.copy(N),N}function yu(u){var h=new u.constructor(u.byteLength);return new gd(h).set(new gd(u)),h}function i_(u,h){var m=h?yu(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}function Sc(u,h){if(u!==h){var m=u!==J,N=null===u,ae=u==u,Ce=Jo(u),He=h!==J,Ye=null===h,at=h==h,Rt=Jo(h);if(!Ye&&!Rt&&!Ce&&u>h||Ce&&He&&at&&!Ye&&!Rt||N&&He&&at||!m&&at||!ae)return 1;if(!N&&!Ce&&!Rt&&u<h||Rt&&m&&ae&&!N&&!Ce||Ye&&m&&ae||!He&&ae||!at)return-1}return 0}function Td(u,h,m,N){for(var ae=-1,Ce=u.length,He=m.length,Ye=-1,at=h.length,Rt=Lr(Ce-He,0),Nt=_t(at+Rt),Vt=!N;++Ye<at;)Nt[Ye]=h[Ye];for(;++ae<He;)(Vt||ae<Ce)&&(Nt[m[ae]]=u[ae]);for(;Rt--;)Nt[Ye++]=u[ae++];return Nt}function kb(u,h,m,N){for(var ae=-1,Ce=u.length,He=-1,Ye=m.length,at=-1,Rt=h.length,Nt=Lr(Ce-Ye,0),Vt=_t(Nt+Rt),tn=!N;++ae<Nt;)Vt[ae]=u[ae];for(var bn=ae;++at<Rt;)Vt[bn+at]=h[at];for(;++He<Ye;)(tn||ae<Ce)&&(Vt[bn+m[He]]=u[ae++]);return Vt}function Xs(u,h){var m=-1,N=u.length;for(h||(h=_t(N));++m<N;)h[m]=u[m];return h}function Ca(u,h,m,N){var ae=!m;m||(m={});for(var Ce=-1,He=h.length;++Ce<He;){var Ye=h[Ce],at=N?N(m[Ye],u[Ye],Ye,m,u):J;at===J&&(at=u[Ye]),ae?Ka(m,Ye,at):Ya(m,Ye,at)}return m}function qr(u,h){return function(m,N){var ae=Dn(m)?Pr:op,Ce=h?h():{};return ae(m,u,Nn(N,2),Ce)}}function Rl(u){return ai(function(h,m){var N=-1,ae=m.length,Ce=ae>1?m[ae-1]:J,He=ae>2?m[2]:J;for(Ce=u.length>3&&"function"==typeof Ce?(ae--,Ce):J,He&&zs(m[0],m[1],He)&&(Ce=ae<3?J:Ce,ae=1),h=zi(h);++N<ae;){var Ye=m[N];Ye&&u(h,Ye,N,Ce)}return h})}function Za(u,h){return function(m,N){if(null==m)return m;if(!ho(m))return u(m,N);for(var ae=m.length,Ce=h?ae:-1,He=zi(m);(h?Ce--:++Ce<ae)&&!1!==N(He[Ce],Ce,He););return m}}function Bb(u){return function(h,m,N){for(var ae=-1,Ce=zi(h),He=N(h),Ye=He.length;Ye--;){var at=He[u?Ye:++ae];if(!1===m(Ce[at],at,Ce))break}return h}}function gp(u){return function(h){var m=bh(h=Ni(h))?$a(h):J,N=m?m[0]:h.charAt(0),ae=m?Qa(m,1).join(""):h.slice(1);return N[u]()+ae}}function Nl(u){return function(h){return au(Z_($_(h).replace(Yf,"")),u,"")}}function Md(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=du(u.prototype),N=u.apply(m,h);return br(N)?N:m}}function Vb(u){return function(h,m,N){var ae=zi(h);if(!ho(h)){var Ce=Nn(m,3);h=xs(h),m=function(Ye){return Ce(ae[Ye],Ye,ae)}}var He=u(h,m,N);return He>-1?ae[Ce?h[He]:He]:J}}function bu(u){return Ja(function(h){var m=h.length,N=m,ae=Ao.prototype.thru;for(u&&h.reverse();N--;){var Ce=h[N];if("function"!=typeof Ce)throw new ya(Ae);if(ae&&!He&&"wrapper"==wp(Ce))var He=new Ao([],!0)}for(N=He?N:m;++N<m;){var Ye=wp(Ce=h[N]),at="wrapper"==Ye?a_(Ce):J;He=at&&Ep(at[0])&&424==at[1]&&!at[4].length&&1==at[9]?He[wp(at[0])].apply(He,at[3]):1==Ce.length&&Ep(Ce)?He[Ye]():He.thru(Ce)}return function(){var Rt=arguments,Nt=Rt[0];if(He&&1==Rt.length&&Dn(Nt))return He.plant(Nt).value();for(var Vt=0,tn=m?h[Vt].apply(this,Rt):Nt;++Vt<m;)tn=h[Vt].call(this,tn);return tn}})}function Cc(u,h,m,N,ae,Ce,He,Ye,at,Rt){var Nt=h&$,Vt=1&h,tn=2&h,bn=24&h,Pn=512&h,li=tn?J:Md(u);return function Ln(){for(var ci=arguments.length,wi=_t(ci),po=ci;po--;)wi[po]=arguments[po];if(bn)var Hs=Od(Ln),ea=DP(wi,Hs);if(N&&(wi=Td(wi,N,ae,bn)),Ce&&(wi=kb(wi,Ce,He,bn)),ci-=ea,bn&&ci<Rt){var Pi=lu(wi,Hs);return Hb(u,h,Cc,Ln.placeholder,m,wi,Pi,Ye,at,Rt-ci)}var ol=Vt?m:this,Mc=tn?ol[u]:u;return ci=wi.length,Ye?wi=bA(wi,Ye):Pn&&ci>1&&wi.reverse(),Nt&&at<ci&&(wi.length=at),this&&this!==Ri&&this instanceof Ln&&(Mc=li||Md(Mc)),Mc.apply(ol,wi)}}function Ub(u,h){return function(m,N){return function(u,h,m,N){return Xa(u,function(ae,Ce,He){h(N,m(ae),Ce,He)}),N}(m,u,h(N),{})}}function r_(u,h){return function(m,N){var ae;if(m===J&&N===J)return h;if(m!==J&&(ae=m),N!==J){if(ae===J)return N;"string"==typeof m||"string"==typeof N?(m=Do(m),N=Do(N)):(m=Lb(m),N=Lb(N)),ae=u(m,N)}return ae}}function mp(u){return Ja(function(h){return h=Vi(h,zo(Nn())),ai(function(m){var N=this;return u(h,function(ae){return es(ae,N,m)})})})}function _p(u,h){var m=(h=h===J?" ":Do(h)).length;if(m<2)return m?up(h,u):h;var N=up(h,Bt(u/wh(h)));return bh(h)?Qa($a(N),0,u).join(""):N.slice(0,u)}function zb(u){return function(h,m,N){return N&&"number"!=typeof N&&zs(h,m,N)&&(m=N=J),h=rl(h),m===J?(m=h,h=0):m=rl(m),function(u,h,m,N){for(var ae=-1,Ce=Lr(Bt((h-u)/(m||1)),0),He=_t(Ce);Ce--;)He[N?Ce:++ae]=u,u+=m;return He}(h,m,N=N===J?h<m?1:-1:rl(N),u)}}function yp(u){return function(h,m){return"string"==typeof h&&"string"==typeof m||(h=fo(h),m=fo(m)),u(h,m)}}function Hb(u,h,m,N,ae,Ce,He,Ye,at,Rt){var Nt=8&h;h|=Nt?j:64,4&(h&=~(Nt?64:j))||(h&=-4);var li=[u,h,ae,Nt?Ce:J,Nt?He:J,Nt?J:Ce,Nt?J:He,Ye,at,Rt],Ln=m.apply(J,li);return Ep(u)&&Jb(Ln,li),Ln.placeholder=N,Uh(Ln,u,h)}function Id(u){var h=Wr[u];return function(m,N){if(m=fo(m),(N=null==N?0:us(Xn(N),292))&&km(m)){var ae=(Ni(m)+"e").split("e");return+((ae=(Ni(h(ae[0]+"e"+(+ae[1]+N)))+"e").split("e"))[0]+"e"+(+ae[1]-N))}return h(m)}}var s_=ba&&1/Im(new ba([,-0]))[1]==se?function(u){return new ba(u)}:iy;function wu(u){return function(h){var m=Us(h);return m==je?bb(h):m==pt?function(st){var Tt=-1,_t=Array(st.size);return st.forEach(function(un){_t[++Tt]=[un,un]}),_t}(h):function(st,Tt){return Vi(Tt,function(_t){return[_t,st[_t]]})}(h,u(h))}}function Pl(u,h,m,N,ae,Ce,He,Ye){var at=2&h;if(!at&&"function"!=typeof u)throw new ya(Ae);var Rt=N?N.length:0;if(Rt||(h&=-97,N=ae=J),He=He===J?He:Lr(Xn(He),0),Ye=Ye===J?Ye:Xn(Ye),Rt-=ae?ae.length:0,64&h){var Nt=N,Vt=ae;N=ae=J}var tn=at?J:a_(u),bn=[u,h,m,N,ae,Nt,Vt,Ce,He,Ye];if(tn&&function(u,h){var m=u[1],N=h[1],ae=m|N;if(!(ae<131||(N==$&&8==m||N==$&&256==m&&u[7].length<=h[8]||384==N&&h[7].length<=h[8]&&8==m)))return u;1&N&&(u[2]=h[2],ae|=1&m?0:4);var Ye=h[3];if(Ye){var at=u[3];u[3]=at?Td(at,Ye,h[4]):Ye,u[4]=at?lu(u[3],L):h[4]}(Ye=h[5])&&(u[5]=(at=u[5])?kb(at,Ye,h[6]):Ye,u[6]=at?lu(u[5],L):h[6]),(Ye=h[7])&&(u[7]=Ye),N&$&&(u[8]=null==u[8]?h[8]:us(u[8],h[8])),null==u[9]&&(u[9]=h[9]),u[0]=h[0],u[1]=ae}(bn,tn),u=bn[0],h=bn[1],m=bn[2],N=bn[3],ae=bn[4],!(Ye=bn[9]=bn[9]===J?at?0:u.length:Lr(bn[9]-Rt,0))&&24&h&&(h&=-25),h&&1!=h)Pn=8==h||16==h?function(u,h,m){var N=Md(u);return function ae(){for(var Ce=arguments.length,He=_t(Ce),Ye=Ce,at=Od(ae);Ye--;)He[Ye]=arguments[Ye];var Rt=Ce<3&&He[0]!==at&&He[Ce-1]!==at?[]:lu(He,at);return(Ce-=Rt.length)<m?Hb(u,h,Cc,ae.placeholder,J,He,Rt,J,J,m-Ce):es(this&&this!==Ri&&this instanceof ae?N:u,this,He)}}(u,h,Ye):h!=j&&33!=h||ae.length?Cc.apply(J,bn):function(u,h,m,N){var ae=1&h,Ce=Md(u);return function He(){for(var Ye=-1,at=arguments.length,Rt=-1,Nt=N.length,Vt=_t(Nt+at),tn=this&&this!==Ri&&this instanceof He?Ce:u;++Rt<Nt;)Vt[Rt]=N[Rt];for(;at--;)Vt[Rt++]=arguments[++Ye];return es(tn,ae?m:this,Vt)}}(u,h,m,N);else var Pn=function(u,h,m){var N=1&h,ae=Md(u);return function Ce(){return(this&&this!==Ri&&this instanceof Ce?ae:u).apply(N?m:this,arguments)}}(u,h,m);return Uh((tn?Jm:Jb)(Pn,bn),u,h)}function Gb(u,h,m,N){return u===J||An(u,cu[m])&&!Hi.call(N,m)?h:u}function dA(u,h,m,N,ae,Ce){return br(u)&&br(h)&&(Ce.set(h,u),Zm(u,h,J,dA,Ce),Ce.delete(h)),u}function vp(u){return Fp(u)?J:u}function bp(u,h,m,N,ae,Ce){var He=1&m,Ye=u.length,at=h.length;if(Ye!=at&&!(He&&at>Ye))return!1;var Rt=Ce.get(u),Nt=Ce.get(h);if(Rt&&Nt)return Rt==h&&Nt==u;var Vt=-1,tn=!0,bn=2&m?new wa:J;for(Ce.set(u,h),Ce.set(h,u);++Vt<Ye;){var Pn=u[Vt],li=h[Vt];if(N)var Ln=He?N(li,Pn,Vt,h,u,Ce):N(Pn,li,Vt,u,h,Ce);if(Ln!==J){if(Ln)continue;tn=!1;break}if(bn){if(!Co(h,function(ci,wi){if(!vh(bn,wi)&&(Pn===ci||ae(Pn,ci,m,N,Ce)))return bn.push(wi)})){tn=!1;break}}else if(Pn!==li&&!ae(Pn,li,m,N,Ce)){tn=!1;break}}return Ce.delete(u),Ce.delete(h),tn}function Ja(u){return Cp(vA(u,J,Cs),u+"")}function Fl(u){return Gi(u,xs,l_)}function o_(u){return Gi(u,Zs,qb)}var a_=Dh?function(u){return Dh.get(u)}:iy;function wp(u){for(var h=u.name+"",m=md[h],N=Hi.call(md,h)?m.length:0;N--;){var ae=m[N],Ce=ae.func;if(null==Ce||Ce==u)return ae.name}return h}function Od(u){return(Hi.call(Se,"placeholder")?Se:u).placeholder}function Nn(){var u=Se.iteratee||Cu;return u=u===Cu?nA:u,arguments.length?u(arguments[0],arguments[1]):u}function Vs(u,h){var m=u.__data__;return function(u){var h=typeof u;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==u:null===u}(h)?m["string"==typeof h?"string":"hash"]:m.map}function qo(u){for(var h=xs(u),m=h.length;m--;){var N=h[m],ae=u[N];h[m]=[N,ae,_A(ae)]}return h}function xc(u,h){var m=function(st,Tt){return null==st?J:st[Tt]}(u,h);return Qm(m)?m:J}var l_=Tr?function(u){return null==u?[]:(u=zi(u),ma(Tr(u),function(h){return Qf.call(u,h)}))}:Dc,qb=Tr?function(u){for(var h=[];u;)Fr(h,l_(u)),u=va(u);return h}:Dc,Us=Es;function Kb(u,h,m){for(var N=-1,ae=(h=Ec(h,u)).length,Ce=!1;++N<ae;){var He=Jn(h[N]);if(!(Ce=null!=u&&m(u,He)))break;u=u[He]}return Ce||++N!=ae?Ce:!!(ae=null==u?0:u.length)&&L_(ae)&&Mo(He,ae)&&(Dn(u)||nl(u))}function Xb(u){return"function"!=typeof u.constructor||Sp(u)?{}:du(va(u))}function mA(u){return Dn(u)||nl(u)||!!(Lx&&u&&u[Lx])}function Mo(u,h){var m=typeof u;return!!(h=null==h?Te:h)&&("number"==m||"symbol"!=m&&Bi.test(u))&&u>-1&&u%1==0&&u<h}function zs(u,h,m){if(!br(m))return!1;var N=typeof h;return!!("number"==N?ho(m)&&Mo(h,m.length):"string"==N&&h in m)&&An(m[h],u)}function Yo(u,h){if(Dn(u))return!1;var m=typeof u;return!("number"!=m&&"symbol"!=m&&"boolean"!=m&&null!=u&&!Jo(u))||pe.test(u)||!ct.test(u)||null!=h&&u in zi(h)}function Ep(u){var h=wp(u),m=Se[h];if("function"!=typeof m||!(h in oi.prototype))return!1;if(u===m)return!0;var N=a_(m);return!!N&&u===N[0]}(bs&&Us(new bs(new ArrayBuffer(1)))!=yt||co&&Us(new co)!=je||ep&&Us(ep.resolve())!=ce||ba&&Us(new ba)!=pt||xo&&Us(new xo)!=k)&&(Us=function(u){var h=Es(u),m=h==be?u.constructor:J,N=m?Eu(m):"";if(N)switch(N){case Vx:return yt;case Bm:return je;case jm:return ce;case xb:return pt;case Vm:return k}return h});var Zb=Xf?Zo:sy;function Sp(u){var h=u&&u.constructor;return u===("function"==typeof h&&h.prototype||cu)}function _A(u){return u==u&&!br(u)}function yA(u,h){return function(m){return null!=m&&m[u]===h&&(h!==J||u in zi(m))}}function vA(u,h,m){return h=Lr(h===J?u.length-1:h,0),function(){for(var N=arguments,ae=-1,Ce=Lr(N.length-h,0),He=_t(Ce);++ae<Ce;)He[ae]=N[h+ae];ae=-1;for(var Ye=_t(h+1);++ae<h;)Ye[ae]=N[ae];return Ye[h]=m(He),es(u,this,Ye)}}function h_(u,h){return h.length<2?u:Ho(u,Ss(h,0,-1))}function bA(u,h){for(var m=u.length,N=us(h.length,m),ae=Xs(u);N--;){var Ce=h[N];u[N]=Mo(Ce,m)?ae[Ce]:J}return u}function f_(u,h){if(("constructor"!==h||"function"!=typeof u[h])&&"__proto__"!=h)return u[h]}var Jb=p_(Jm),Vh=Bx||function(u,h){return Ri.setTimeout(u,h)},Cp=p_(To);function Uh(u,h,m){var N=h+"";return Cp(u,function(u,h){var m=h.length;if(!m)return u;var N=m-1;return h[N]=(m>1?"& ":"")+h[N],h=h.join(m>2?", ":" "),u.replace(St,"{\n/* [wrapped with "+h+"] */\n")}(N,function(u,h){return ks(nt,function(m){var N="_."+m[0];h&m[1]&&!Dl(u,N)&&u.push(N)}),u.sort()}(function(u){var h=u.match(At);return h?h[1].split(Yt):[]}(N),m)))}function p_(u){var h=0,m=0;return function(){var N=BP(),ae=16-(N-m);if(m=N,ae>0){if(++h>=800)return arguments[0]}else h=0;return u.apply(J,arguments)}}function Rd(u,h){var m=-1,N=u.length,ae=N-1;for(h=h===J?N:h;++m<h;){var Ce=Ol(m,ae),He=u[Ce];u[Ce]=u[m],u[m]=He}return u.length=h,u}var h,m,e0=(h=Wh(function(u){var h=[];return 46===u.charCodeAt(0)&&h.push(""),u.replace(ve,function(m,N,ae,Ce){h.push(ae?Ce.replace(In,"$1"):N||m)}),h},function(N){return 500===m.size&&m.clear(),N}),m=h.cache,h);function Jn(u){if("string"==typeof u||Jo(u))return u;var h=u+"";return"0"==h&&1/u==-se?"-0":h}function Eu(u){if(null!=u){try{return yr.call(u)}catch(h){}try{return u+""}catch(h){}}return""}function xp(u){if(u instanceof oi)return u.clone();var h=new Ao(u.__wrapped__,u.__chain__);return h.__actions__=Xs(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}var CA=ai(function(u,h){return vr(u)?_c(u,ws(h,1,vr,!0)):[]}),xA=ai(function(u,h){var m=Ko(h);return vr(m)&&(m=J),vr(u)?_c(u,ws(h,1,vr,!0),Nn(m,2)):[]}),AA=ai(function(u,h){var m=Ko(h);return vr(m)&&(m=J),vr(u)?_c(u,ws(h,1,vr,!0),J,m):[]});function m_(u,h,m){var N=null==u?0:u.length;if(!N)return-1;var ae=null==m?0:Xn(m);return ae<0&&(ae=Lr(N+ae,0)),dd(u,Nn(h,3),ae)}function __(u,h,m){var N=null==u?0:u.length;if(!N)return-1;var ae=N-1;return m!==J&&(ae=Xn(m),ae=m<0?Lr(N+ae,0):us(ae,N-1)),dd(u,Nn(h,3),ae,!0)}function Cs(u){return null!=u&&u.length?ws(u,1):[]}function n0(u){return u&&u.length?u[0]:J}var s0=ai(function(u){var h=Vi(u,wc);return h.length&&h[0]===u[0]?fu(h):[]}),MA=ai(function(u){var h=Ko(u),m=Vi(u,wc);return h===Ko(m)?h=J:m.pop(),m.length&&m[0]===u[0]?fu(m,Nn(h,2)):[]}),o0=ai(function(u){var h=Ko(u),m=Vi(u,wc);return(h="function"==typeof h?h:J)&&m.pop(),m.length&&m[0]===u[0]?fu(m,J,h):[]});function Ko(u){var h=null==u?0:u.length;return h?u[h-1]:J}var v_=ai(b_);function b_(u,h){return u&&u.length&&h&&h.length?Wo(u,h):u}var l0=Ja(function(u,h){var m=null==u?0:u.length,N=Wm(u,h);return kh(u,Vi(h,function(ae){return Mo(ae,m)?+ae:ae}).sort(Sc)),N});function w_(u){return null==u?u:Jf.call(u)}var d0=ai(function(u){return bc(ws(u,1,vr,!0))}),UA=ai(function(u){var h=Ko(u);return vr(h)&&(h=J),bc(ws(u,1,vr,!0),Nn(h,2))}),zA=ai(function(u){var h=Ko(u);return h="function"==typeof h?h:J,bc(ws(u,1,vr,!0),J,h)});function h0(u){if(!u||!u.length)return[];var h=0;return u=ma(u,function(m){if(vr(m))return h=Lr(m.length,h),!0}),fd(h,function(m){return Vi(u,Tm(m))})}function GA(u,h){if(!u||!u.length)return[];var m=h0(u);return null==h?m:Vi(m,function(N){return es(h,J,N)})}var f0=ai(function(u,h){return vr(u)?_c(u,h):[]}),iF=ai(function(u){return _u(ma(u,vr))}),Io=ai(function(u){var h=Ko(u);return vr(h)&&(h=J),_u(ma(u,vr),Nn(h,2))}),E_=ai(function(u){var h=Ko(u);return h="function"==typeof h?h:J,_u(ma(u,vr),J,h)}),S_=ai(h0),Gh=ai(function(u){var h=u.length,m=h>1?u[h-1]:J;return m="function"==typeof m?(u.pop(),m):J,GA(u,m)});function C_(u){var h=Se(u);return h.__chain__=!0,h}function Pd(u,h){return h(u)}var x_=Ja(function(u){var h=u.length,m=h?u[0]:0,N=this.__wrapped__,ae=function(Ce){return Wm(Ce,u)};return!(h>1||this.__actions__.length)&&N instanceof oi&&Mo(m)?((N=N.slice(m,+m+(h?1:0))).__actions__.push({func:Pd,args:[ae],thisArg:J}),new Ao(N,this.__chain__).thru(function(Ce){return h&&!Ce.length&&Ce.push(J),Ce})):this.thru(ae)}),qA=qr(function(u,h,m){Hi.call(u,m)?++u[m]:Ka(u,m,1)}),XA=Vb(m_),QA=Vb(__);function M_(u,h){return(Dn(u)?ks:yc)(u,Nn(h,3))}function Dp(u,h){return(Dn(u)?cd:Ym)(u,Nn(h,3))}var JA=qr(function(u,h,m){Hi.call(u,m)?u[m].push(h):Ka(u,m,[h])}),v0=ai(function(u,h,m){var N=-1,ae="function"==typeof h,Ce=ho(u)?_t(u.length):[];return yc(u,function(He){Ce[++N]=ae?es(h,He,m):Sa(He,h,m)}),Ce}),b0=qr(function(u,h,m){Ka(u,m,h)});function tl(u,h){return(Dn(u)?Vi:iA)(u,Nn(h,3))}var E0=qr(function(u,h,m){u[m?0:1].push(h)},function(){return[[],[]]}),Ip=ai(function(u,h){if(null==u)return[];var m=h.length;return m>1&&zs(u,h[0],h[1])?h=[]:m>2&&zs(h[0],h[1],h[2])&&(h=[h[0]]),Lh(u,ws(h,1),[])}),Su=kx||function(){return Ri.Date.now()};function Op(u,h,m){return h=m?J:h,Pl(u,$,J,J,J,J,h=u&&null==h?u.length:h)}function O_(u,h){var m;if("function"!=typeof h)throw new ya(Ae);return u=Xn(u),function(){return--u>0&&(m=h.apply(this,arguments)),u<=1&&(h=J),m}}var $h=ai(function(u,h,m){var N=1;if(m.length){var ae=lu(m,Od($h));N|=j}return Pl(u,N,h,m,ae)}),Ld=ai(function(u,h,m){var N=3;if(m.length){var ae=lu(m,Od(Ld));N|=j}return Pl(h,N,u,m,ae)});function M0(u,h,m){var N,ae,Ce,He,Ye,at,Rt=0,Nt=!1,Vt=!1,tn=!0;if("function"!=typeof u)throw new ya(Ae);function bn(Pi){var ol=N,Mc=ae;return N=ae=J,Rt=Pi,He=u.apply(Mc,ol)}function Pn(Pi){return Rt=Pi,Ye=Vh(ci,h),Nt?bn(Pi):He}function Ln(Pi){var ol=Pi-at;return at===J||ol>=h||ol<0||Vt&&Pi-Rt>=Ce}function ci(){var Pi=Su();if(Ln(Pi))return wi(Pi);Ye=Vh(ci,function(Pi){var lT=h-(Pi-at);return Vt?us(lT,Ce-(Pi-Rt)):lT}(Pi))}function wi(Pi){return Ye=J,tn&&N?bn(Pi):(N=ae=J,He)}function ea(){var Pi=Su(),ol=Ln(Pi);if(N=arguments,ae=this,at=Pi,ol){if(Ye===J)return Pn(at);if(Vt)return lA(Ye),Ye=Vh(ci,h),bn(at)}return Ye===J&&(Ye=Vh(ci,h)),He}return h=fo(h)||0,br(m)&&(Nt=!!m.leading,Ce=(Vt="maxWait"in m)?Lr(fo(m.maxWait)||0,h):Ce,tn="trailing"in m?!!m.trailing:tn),ea.cancel=function(){Ye!==J&&lA(Ye),Rt=0,N=at=ae=Ye=J},ea.flush=function(){return Ye===J?He:wi(Su())},ea}var r1=ai(function(u,h){return Nh(u,1,h)}),I0=ai(function(u,h,m){return Nh(u,fo(h)||0,m)});function Wh(u,h){if("function"!=typeof u||null!=h&&"function"!=typeof h)throw new ya(Ae);var m=function(){var N=arguments,ae=h?h.apply(this,N):N[0],Ce=m.cache;if(Ce.has(ae))return Ce.get(ae);var He=u.apply(this,N);return m.cache=Ce.set(ae,He)||Ce,He};return m.cache=new(Wh.Cache||qa),m}function P_(u){if("function"!=typeof u)throw new ya(Ae);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}Wh.Cache=qa;var s1=aA(function(u,h){var m=(h=1==h.length&&Dn(h[0])?Vi(h[0],zo(Nn())):Vi(ws(h,1),zo(Nn()))).length;return ai(function(N){for(var ae=-1,Ce=us(N.length,m);++ae<Ce;)N[ae]=h[ae].call(this,N[ae]);return es(u,this,N)})}),Rp=ai(function(u,h){var m=lu(h,Od(Rp));return Pl(u,j,J,h,m)}),R0=ai(function(u,h){var m=lu(h,Od(R0));return Pl(u,64,J,h,m)}),o1=Ja(function(u,h){return Pl(u,256,J,J,J,h)});function An(u,h){return u===h||u!=u&&h!=h}var Kt=yp(Go),F0=yp(function(u,h){return u>=h}),nl=Jx(function(){return arguments}())?Jx:function(u){return wr(u)&&Hi.call(u,"callee")&&!Qf.call(u,"callee")},Dn=_t.isArray,L0=rn?zo(rn):function(u){return wr(u)&&Es(u)==Xe};function ho(u){return null!=u&&L_(u.length)&&!Zo(u)}function vr(u){return wr(u)&&ho(u)}var il=ts||sy,k0=si?zo(si):function(u){return wr(u)&&Es(u)==ke};function Aa(u){if(!wr(u))return!1;var h=Es(u);return h==Re||"[object DOMException]"==h||"string"==typeof u.message&&"string"==typeof u.name&&!Fp(u)}function Zo(u){if(!br(u))return!1;var h=Es(u);return h==ze||h==qe||"[object AsyncFunction]"==h||"[object Proxy]"==h}function Pp(u){return"number"==typeof u&&u==Xn(u)}function L_(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Te}function br(u){var h=typeof u;return null!=u&&("object"==h||"function"==h)}function wr(u){return null!=u&&"object"==typeof u}var g1=rr?zo(rr):function(u){return wr(u)&&Us(u)==je};function y1(u){return"number"==typeof u||wr(u)&&Es(u)==G}function Fp(u){if(!wr(u)||Es(u)!=be)return!1;var h=va(u);if(null===h)return!0;var m=Hi.call(h,"constructor")&&h.constructor;return"function"==typeof m&&m instanceof m&&yr.call(m)==Fx}var U0=lo?zo(lo):function(u){return wr(u)&&Es(u)==Et},v1=fc?zo(fc):function(u){return wr(u)&&Us(u)==pt};function B_(u){return"string"==typeof u||!Dn(u)&&wr(u)&&Es(u)==ge}function Jo(u){return"symbol"==typeof u||wr(u)&&Es(u)==B}var qh=Jr?zo(Jr):function(u){return wr(u)&&L_(u.length)&&!!yn[Es(u)]},Ac=yp(Nb),j_=yp(function(u,h){return u<=h});function z0(u){if(!u)return[];if(ho(u))return B_(u)?$a(u):Xs(u);if(Ch&&u[Ch])return function(st){for(var Tt,_t=[];!(Tt=st.next()).done;)_t.push(Tt.value);return _t}(u[Ch]());var h=Us(u);return(h==je?bb:h==pt?Im:Ud)(u)}function rl(u){return u?(u=fo(u))===se||u===-se?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Xn(u){var h=rl(u),m=h%1;return h==h?m?h-m:h:0}function V_(u){return u?hu(Xn(u),0,ye):0}function fo(u){if("number"==typeof u)return u;if(Jo(u))return NaN;if(br(u)){var h="function"==typeof u.valueOf?u.valueOf():u;u=br(h)?h+"":h}if("string"!=typeof u)return 0===u?u:+u;u=vb(u);var m=Ji.test(u);return m||qn.test(u)?yb(u.slice(2),m?2:8):Sn.test(u)?NaN:+u}function H0(u){return Ca(u,Zs(u))}function Ni(u){return null==u?"":Do(u)}var b1=Rl(function(u,h){if(Sp(h)||ho(h))Ca(h,xs(h),u);else for(var m in h)Hi.call(h,m)&&Ya(u,m,h[m])}),w1=Rl(function(u,h){Ca(h,Zs(h),u)}),kd=Rl(function(u,h,m,N){Ca(h,Zs(h),u,N)}),E1=Rl(function(u,h,m,N){Ca(h,xs(h),u,N)}),G0=Ja(Wm),C1=ai(function(u,h){u=zi(u);var m=-1,N=h.length,ae=N>2?h[2]:J;for(ae&&zs(h[0],h[1],ae)&&(N=1);++m<N;)for(var Ce=h[m],He=Zs(Ce),Ye=-1,at=He.length;++Ye<at;){var Rt=He[Ye],Nt=u[Rt];(Nt===J||An(Nt,cu[Rt])&&!Hi.call(u,Rt))&&(u[Rt]=Ce[Rt])}return u}),Yh=ai(function(u){return u.push(J,dA),es(X0,J,u)});function Xh(u,h,m){var N=null==u?J:Ho(u,h);return N===J?m:N}function Lp(u,h){return null!=u&&Kb(u,h,Sd)}var kp=Ub(function(u,h,m){null!=h&&"function"!=typeof h.toString&&(h=Ys.call(h)),u[h]=m},ey(Js)),A1=Ub(function(u,h,m){null!=h&&"function"!=typeof h.toString&&(h=Ys.call(h)),Hi.call(u,h)?u[h].push(m):u[h]=[m]},Nn),q0=ai(Sa);function xs(u){return ho(u)?Rh(u):Rb(u)}function Zs(u){return ho(u)?Rh(u,!0):function(u){if(!br(u))return function(u){var h=[];if(null!=u)for(var m in zi(u))h.push(m);return h}(u);var h=Sp(u),m=[];for(var N in u)"constructor"==N&&(h||!Hi.call(u,N))||m.push(N);return m}(u)}var K0=Rl(function(u,h,m){Zm(u,h,m)}),X0=Rl(function(u,h,m,N){Zm(u,h,m,N)}),D1=Ja(function(u,h){var m={};if(null==u)return m;var N=!1;h=Vi(h,function(Ce){return Ce=Ec(Ce,u),N||(N=Ce.length>1),Ce}),Ca(u,o_(u),m),N&&(m=js(m,7,vp));for(var ae=h.length;ae--;)gu(m,h[ae]);return m}),M1=Ja(function(u,h){return null==u?{}:function(u,h){return Pb(u,h,function(m,N){return Lp(u,N)})}(u,h)});function Q0(u,h){if(null==u)return{};var m=Vi(o_(u),function(N){return[N]});return h=Nn(h),Pb(u,m,function(N,ae){return h(N,ae[0])})}var I1=wu(xs),J0=wu(Zs);function Ud(u){return null==u?[]:Mm(u,xs(u))}var F1=Nl(function(u,h,m){return h=h.toLowerCase(),u+(m?G_(h):h)});function G_(u){return jp(Ni(u).toLowerCase())}function $_(u){return(u=Ni(u))&&u.replace(fa,MP).replace(xm,"")}var k1=Nl(function(u,h,m){return u+(m?"-":"")+h.toLowerCase()}),B1=Nl(function(u,h,m){return u+(m?" ":"")+h.toLowerCase()}),pF=gp("toLowerCase"),H1=Nl(function(u,h,m){return u+(m?"_":"")+h.toLowerCase()}),Y_=Nl(function(u,h,m){return u+(m?" ":"")+jp(h)}),sw=Nl(function(u,h,m){return u+(m?" ":"")+h.toUpperCase()}),jp=gp("toUpperCase");function Z_(u,h,m){return u=Ni(u),(h=m?J:h)===J?function(st){return Al.test(st)}(u)?function(st){return st.match(pb)||[]}(u):function(st){return st.match(jn)||[]}(u):u.match(h)||[]}var J_=ai(function(u,h){try{return es(u,J,h)}catch(m){return Aa(m)?m:new xn(m)}}),ow=Ja(function(u,h){return ks(h,function(m){m=Jn(m),Ka(u,m,$h(u[m],u))}),u});function ey(u){return function(){return u}}var mF=bu(),zd=bu(!0);function Js(u){return u}function Cu(u){return nA("function"==typeof u?u:js(u,1))}var ty=ai(function(u,h){return function(m){return Sa(m,u,h)}}),aw=ai(function(u,h){return function(m){return Sa(u,m,h)}});function ny(u,h,m){var N=xs(h),ae=Fh(h,N);null==m&&(!br(h)||!ae.length&&N.length)&&(m=h,h=u,u=this,ae=Fh(h,xs(h)));var Ce=!(br(m)&&"chain"in m&&!m.chain),He=Zo(u);return ks(ae,function(Ye){var at=h[Ye];u[Ye]=at,He&&(u.prototype[Ye]=function(){var Rt=this.__chain__;if(Ce||Rt){var Nt=u(this.__wrapped__),Vt=Nt.__actions__=Xs(this.__actions__);return Vt.push({func:at,args:arguments,thisArg:u}),Nt.__chain__=Rt,Nt}return at.apply(u,Fr([this.value()],arguments))})}),u}function iy(){}var X1=mp(Vi),Q1=mp(Zn),cw=mp(Co);function xu(u){return Yo(u)?Tm(Jn(u)):function(u){return function(h){return Ho(h,u)}}(u)}var Z1=zb(),J1=zb(!0);function Dc(){return[]}function sy(){return!1}var Vn=r_(function(u,h){return u+h},0),oy=Id("ceil"),yF=r_(function(u,h){return u/h},1),Bl=Id("floor"),fw=r_(function(u,h){return u*h},1),pw=Id("round"),gw=r_(function(u,h){return u-h},0);return Se.after=function(u,h){if("function"!=typeof h)throw new ya(Ae);return u=Xn(u),function(){if(--u<1)return h.apply(this,arguments)}},Se.ary=Op,Se.assign=b1,Se.assignIn=w1,Se.assignInWith=kd,Se.assignWith=E1,Se.at=G0,Se.before=O_,Se.bind=$h,Se.bindAll=ow,Se.bindKey=Ld,Se.castArray=function(){if(!arguments.length)return[];var u=arguments[0];return Dn(u)?u:[u]},Se.chain=C_,Se.chunk=function(u,h,m){h=(m?zs(u,h,m):h===J)?1:Lr(Xn(h),0);var N=null==u?0:u.length;if(!N||h<1)return[];for(var ae=0,Ce=0,He=_t(Bt(N/h));ae<N;)He[Ce++]=Ss(u,ae,ae+=h);return He},Se.compact=function(u){for(var h=-1,m=null==u?0:u.length,N=0,ae=[];++h<m;){var Ce=u[h];Ce&&(ae[N++]=Ce)}return ae},Se.concat=function(){var u=arguments.length;if(!u)return[];for(var h=_t(u-1),m=arguments[0],N=u;N--;)h[N-1]=arguments[N];return Fr(Dn(m)?Xs(m):[m],ws(h,1))},Se.cond=function(u){var h=null==u?0:u.length,m=Nn();return u=h?Vi(u,function(N){if("function"!=typeof N[1])throw new ya(Ae);return[m(N[0]),N[1]]}):[],ai(function(N){for(var ae=-1;++ae<h;){var Ce=u[ae];if(es(Ce[0],this,N))return es(Ce[1],this,N)}})},Se.conforms=function(u){return function(u){var h=xs(u);return function(m){return ap(m,u,h)}}(js(u,1))},Se.constant=ey,Se.countBy=qA,Se.create=function(u,h){var m=du(u);return null==h?m:Zx(m,h)},Se.curry=function D0(u,h,m){var N=Pl(u,8,J,J,J,J,J,h=m?J:h);return N.placeholder=D0.placeholder,N},Se.curryRight=function R_(u,h,m){var N=Pl(u,16,J,J,J,J,J,h=m?J:h);return N.placeholder=R_.placeholder,N},Se.debounce=M0,Se.defaults=C1,Se.defaultsDeep=Yh,Se.defer=r1,Se.delay=I0,Se.difference=CA,Se.differenceBy=xA,Se.differenceWith=AA,Se.drop=function(u,h,m){var N=null==u?0:u.length;return N?Ss(u,(h=m||h===J?1:Xn(h))<0?0:h,N):[]},Se.dropRight=function(u,h,m){var N=null==u?0:u.length;return N?Ss(u,0,(h=N-(h=m||h===J?1:Xn(h)))<0?0:h):[]},Se.dropRightWhile=function(u,h){return u&&u.length?mu(u,Nn(h,3),!0,!0):[]},Se.dropWhile=function(u,h){return u&&u.length?mu(u,Nn(h,3),!0):[]},Se.fill=function(u,h,m,N){var ae=null==u?0:u.length;return ae?(m&&"number"!=typeof m&&zs(u,h,m)&&(m=0,N=ae),function(u,h,m,N){var ae=u.length;for((m=Xn(m))<0&&(m=-m>ae?0:ae+m),(N=N===J||N>ae?ae:Xn(N))<0&&(N+=ae),N=m>N?0:V_(N);m<N;)u[m++]=h;return u}(u,h,m,N)):[]},Se.filter=function(u,h){return(Dn(u)?ma:Ob)(u,Nn(h,3))},Se.flatMap=function(u,h){return ws(tl(u,h),1)},Se.flatMapDeep=function(u,h){return ws(tl(u,h),se)},Se.flatMapDepth=function(u,h,m){return m=m===J?1:Xn(m),ws(tl(u,h),m)},Se.flatten=Cs,Se.flattenDeep=function(u){return null!=u&&u.length?ws(u,se):[]},Se.flattenDepth=function(u,h){return null!=u&&u.length?ws(u,h=h===J?1:Xn(h)):[]},Se.flip=function(u){return Pl(u,512)},Se.flow=mF,Se.flowRight=zd,Se.fromPairs=function(u){for(var h=-1,m=null==u?0:u.length,N={};++h<m;){var ae=u[h];N[ae[0]]=ae[1]}return N},Se.functions=function(u){return null==u?[]:Fh(u,xs(u))},Se.functionsIn=function(u){return null==u?[]:Fh(u,Zs(u))},Se.groupBy=JA,Se.initial=function(u){return null!=u&&u.length?Ss(u,0,-1):[]},Se.intersection=s0,Se.intersectionBy=MA,Se.intersectionWith=o0,Se.invert=kp,Se.invertBy=A1,Se.invokeMap=v0,Se.iteratee=Cu,Se.keyBy=b0,Se.keys=xs,Se.keysIn=Zs,Se.map=tl,Se.mapKeys=function(u,h){var m={};return h=Nn(h,3),Xa(u,function(N,ae,Ce){Ka(m,h(N,ae,Ce),N)}),m},Se.mapValues=function(u,h){var m={};return h=Nn(h,3),Xa(u,function(N,ae,Ce){Ka(m,ae,h(N,ae,Ce))}),m},Se.matches=function(u){return rA(js(u,1))},Se.matchesProperty=function(u,h){return xd(u,js(h,1))},Se.memoize=Wh,Se.merge=K0,Se.mergeWith=X0,Se.method=ty,Se.methodOf=aw,Se.mixin=ny,Se.negate=P_,Se.nthArg=function(u){return u=Xn(u),ai(function(h){return pu(h,u)})},Se.omit=D1,Se.omitBy=function(u,h){return Q0(u,P_(Nn(h)))},Se.once=function(u){return O_(2,u)},Se.orderBy=function(u,h,m,N){return null==u?[]:(Dn(h)||(h=null==h?[]:[h]),Dn(m=N?J:m)||(m=null==m?[]:[m]),Lh(u,h,m))},Se.over=X1,Se.overArgs=s1,Se.overEvery=Q1,Se.overSome=cw,Se.partial=Rp,Se.partialRight=R0,Se.partition=E0,Se.pick=M1,Se.pickBy=Q0,Se.property=xu,Se.propertyOf=function(u){return function(h){return null==u?J:Ho(u,h)}},Se.pull=v_,Se.pullAll=b_,Se.pullAllBy=function(u,h,m){return u&&u.length&&h&&h.length?Wo(u,h,Nn(m,2)):u},Se.pullAllWith=function(u,h,m){return u&&u.length&&h&&h.length?Wo(u,h,J,m):u},Se.pullAt=l0,Se.range=Z1,Se.rangeRight=J1,Se.rearg=o1,Se.reject=function(u,h){return(Dn(u)?ma:Ob)(u,P_(Nn(h,3)))},Se.remove=function(u,h){var m=[];if(!u||!u.length)return m;var N=-1,ae=[],Ce=u.length;for(h=Nn(h,3);++N<Ce;){var He=u[N];h(He,N,u)&&(m.push(He),ae.push(N))}return kh(u,ae),m},Se.rest=function(u,h){if("function"!=typeof u)throw new ya(Ae);return ai(u,h=h===J?h:Xn(h))},Se.reverse=w_,Se.sampleSize=function(u,h,m){return h=(m?zs(u,h,m):h===J)?1:Xn(h),(Dn(u)?Tb:qP)(u,h)},Se.set=function(u,h,m){return null==u?u:dp(u,h,m)},Se.setWith=function(u,h,m,N){return N="function"==typeof N?N:J,null==u?u:dp(u,h,m,N)},Se.shuffle=function(u){return(Dn(u)?yd:e_)(u)},Se.slice=function(u,h,m){var N=null==u?0:u.length;return N?(m&&"number"!=typeof m&&zs(u,h,m)?(h=0,m=N):(h=null==h?0:Xn(h),m=m===J?N:Xn(m)),Ss(u,h,m)):[]},Se.sortBy=Ip,Se.sortedUniq=function(u){return u&&u.length?Fb(u):[]},Se.sortedUniqBy=function(u,h){return u&&u.length?Fb(u,Nn(h,2)):[]},Se.split=function(u,h,m){return m&&"number"!=typeof m&&zs(u,h,m)&&(h=m=J),(m=m===J?ye:m>>>0)?(u=Ni(u))&&("string"==typeof h||null!=h&&!U0(h))&&!(h=Do(h))&&bh(u)?Qa($a(u),0,m):u.split(h,m):[]},Se.spread=function(u,h){if("function"!=typeof u)throw new ya(Ae);return h=null==h?0:Lr(Xn(h),0),ai(function(m){var N=m[h],ae=Qa(m,0,h);return N&&Fr(ae,N),es(u,this,ae)})},Se.tail=function(u){var h=null==u?0:u.length;return h?Ss(u,1,h):[]},Se.take=function(u,h,m){return u&&u.length?Ss(u,0,(h=m||h===J?1:Xn(h))<0?0:h):[]},Se.takeRight=function(u,h,m){var N=null==u?0:u.length;return N?Ss(u,(h=N-(h=m||h===J?1:Xn(h)))<0?0:h,N):[]},Se.takeRightWhile=function(u,h){return u&&u.length?mu(u,Nn(h,3),!1,!0):[]},Se.takeWhile=function(u,h){return u&&u.length?mu(u,Nn(h,3)):[]},Se.tap=function(u,h){return h(u),u},Se.throttle=function(u,h,m){var N=!0,ae=!0;if("function"!=typeof u)throw new ya(Ae);return br(m)&&(N="leading"in m?!!m.leading:N,ae="trailing"in m?!!m.trailing:ae),M0(u,h,{leading:N,maxWait:h,trailing:ae})},Se.thru=Pd,Se.toArray=z0,Se.toPairs=I1,Se.toPairsIn=J0,Se.toPath=function(u){return Dn(u)?Vi(u,Jn):Jo(u)?[u]:Xs(e0(Ni(u)))},Se.toPlainObject=H0,Se.transform=function(u,h,m){var N=Dn(u),ae=N||il(u)||qh(u);if(h=Nn(h,4),null==m){var Ce=u&&u.constructor;m=ae?N?new Ce:[]:br(u)&&Zo(Ce)?du(va(u)):{}}return(ae?ks:Xa)(u,function(He,Ye,at){return h(m,He,Ye,at)}),m},Se.unary=function(u){return Op(u,1)},Se.union=d0,Se.unionBy=UA,Se.unionWith=zA,Se.uniq=function(u){return u&&u.length?bc(u):[]},Se.uniqBy=function(u,h){return u&&u.length?bc(u,Nn(h,2)):[]},Se.uniqWith=function(u,h){return h="function"==typeof h?h:J,u&&u.length?bc(u,J,h):[]},Se.unset=function(u,h){return null==u||gu(u,h)},Se.unzip=h0,Se.unzipWith=GA,Se.update=function(u,h,m){return null==u?u:hp(u,h,n_(m))},Se.updateWith=function(u,h,m,N){return N="function"==typeof N?N:J,null==u?u:hp(u,h,n_(m),N)},Se.values=Ud,Se.valuesIn=function(u){return null==u?[]:Mm(u,Zs(u))},Se.without=f0,Se.words=Z_,Se.wrap=function(u,h){return Rp(n_(h),u)},Se.xor=iF,Se.xorBy=Io,Se.xorWith=E_,Se.zip=S_,Se.zipObject=function(u,h){return fp(u||[],h||[],Ya)},Se.zipObjectDeep=function(u,h){return fp(u||[],h||[],dp)},Se.zipWith=Gh,Se.entries=I1,Se.entriesIn=J0,Se.extend=w1,Se.extendWith=kd,ny(Se,Se),Se.add=Vn,Se.attempt=J_,Se.camelCase=F1,Se.capitalize=G_,Se.ceil=oy,Se.clamp=function(u,h,m){return m===J&&(m=h,h=J),m!==J&&(m=(m=fo(m))==m?m:0),h!==J&&(h=(h=fo(h))==h?h:0),hu(fo(u),h,m)},Se.clone=function(u){return js(u,4)},Se.cloneDeep=function(u){return js(u,5)},Se.cloneDeepWith=function(u,h){return js(u,5,h="function"==typeof h?h:J)},Se.cloneWith=function(u,h){return js(u,4,h="function"==typeof h?h:J)},Se.conformsTo=function(u,h){return null==h||ap(u,h,xs(h))},Se.deburr=$_,Se.defaultTo=function(u,h){return null==u||u!=u?h:u},Se.divide=yF,Se.endsWith=function(u,h,m){u=Ni(u),h=Do(h);var N=u.length,ae=m=m===J?N:hu(Xn(m),0,N);return(m-=h.length)>=0&&u.slice(m,ae)==h},Se.eq=An,Se.escape=function(u){return(u=Ni(u))&&Jt.test(u)?u.replace(ha,IP):u},Se.escapeRegExp=function(u){return(u=Ni(u))&&lt.test(u)?u.replace(Be,"\\$&"):u},Se.every=function(u,h,m){var N=Dn(u)?Zn:Mb;return m&&zs(u,h,m)&&(h=J),N(u,Nn(h,3))},Se.find=XA,Se.findIndex=m_,Se.findKey=function(u,h){return yh(u,Nn(h,3),Xa)},Se.findLast=QA,Se.findLastIndex=__,Se.findLastKey=function(u,h){return yh(u,Nn(h,3),lp)},Se.floor=Bl,Se.forEach=M_,Se.forEachRight=Dp,Se.forIn=function(u,h){return null==u?u:bd(u,Nn(h,3),Zs)},Se.forInRight=function(u,h){return null==u?u:wd(u,Nn(h,3),Zs)},Se.forOwn=function(u,h){return u&&Xa(u,Nn(h,3))},Se.forOwnRight=function(u,h){return u&&lp(u,Nn(h,3))},Se.get=Xh,Se.gt=Kt,Se.gte=F0,Se.has=function(u,h){return null!=u&&Kb(u,h,Ed)},Se.hasIn=Lp,Se.head=n0,Se.identity=Js,Se.includes=function(u,h,m,N){u=ho(u)?u:Ud(u),m=m&&!N?Xn(m):0;var ae=u.length;return m<0&&(m=Lr(ae+m,0)),B_(u)?m<=ae&&u.indexOf(h,m)>-1:!!ae&&Ga(u,h,m)>-1},Se.indexOf=function(u,h,m){var N=null==u?0:u.length;if(!N)return-1;var ae=null==m?0:Xn(m);return ae<0&&(ae=Lr(N+ae,0)),Ga(u,h,ae)},Se.inRange=function(u,h,m){return h=rl(h),m===J?(m=h,h=0):m=rl(m),function(u,h,m){return u>=us(h,m)&&u<Lr(h,m)}(u=fo(u),h,m)},Se.invoke=q0,Se.isArguments=nl,Se.isArray=Dn,Se.isArrayBuffer=L0,Se.isArrayLike=ho,Se.isArrayLikeObject=vr,Se.isBoolean=function(u){return!0===u||!1===u||wr(u)&&Es(u)==Ve},Se.isBuffer=il,Se.isDate=k0,Se.isElement=function(u){return wr(u)&&1===u.nodeType&&!Fp(u)},Se.isEmpty=function(u){if(null==u)return!0;if(ho(u)&&(Dn(u)||"string"==typeof u||"function"==typeof u.splice||il(u)||qh(u)||nl(u)))return!u.length;var h=Us(u);if(h==je||h==pt)return!u.size;if(Sp(u))return!Rb(u).length;for(var m in u)if(Hi.call(u,m))return!1;return!0},Se.isEqual=function(u,h){return cp(u,h)},Se.isEqualWith=function(u,h,m){var N=(m="function"==typeof m?m:J)?m(u,h):J;return N===J?cp(u,h,J,m):!!N},Se.isError=Aa,Se.isFinite=function(u){return"number"==typeof u&&km(u)},Se.isFunction=Zo,Se.isInteger=Pp,Se.isLength=L_,Se.isMap=g1,Se.isMatch=function(u,h){return u===h||Xm(u,h,qo(h))},Se.isMatchWith=function(u,h,m){return m="function"==typeof m?m:J,Xm(u,h,qo(h),m)},Se.isNaN=function(u){return y1(u)&&u!=+u},Se.isNative=function(u){if(Zb(u))throw new xn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Qm(u)},Se.isNil=function(u){return null==u},Se.isNull=function(u){return null===u},Se.isNumber=y1,Se.isObject=br,Se.isObjectLike=wr,Se.isPlainObject=Fp,Se.isRegExp=U0,Se.isSafeInteger=function(u){return Pp(u)&&u>=-Te&&u<=Te},Se.isSet=v1,Se.isString=B_,Se.isSymbol=Jo,Se.isTypedArray=qh,Se.isUndefined=function(u){return u===J},Se.isWeakMap=function(u){return wr(u)&&Us(u)==k},Se.isWeakSet=function(u){return wr(u)&&"[object WeakSet]"==Es(u)},Se.join=function(u,h){return null==u?"":xh.call(u,h)},Se.kebabCase=k1,Se.last=Ko,Se.lastIndexOf=function(u,h,m){var N=null==u?0:u.length;if(!N)return-1;var ae=N;return m!==J&&(ae=(ae=Xn(m))<0?Lr(N+ae,0):us(ae,N-1)),h==h?function(st,Tt,_t){for(var un=_t+1;un--;)if(st[un]===Tt)return un;return un}(u,h,ae):dd(u,pc,ae,!0)},Se.lowerCase=B1,Se.lowerFirst=pF,Se.lt=Ac,Se.lte=j_,Se.max=function(u){return u&&u.length?Ph(u,Js,Go):J},Se.maxBy=function(u,h){return u&&u.length?Ph(u,Nn(h,2),Go):J},Se.mean=function(u){return vs(u,Js)},Se.meanBy=function(u,h){return vs(u,Nn(h,2))},Se.min=function(u){return u&&u.length?Ph(u,Js,Nb):J},Se.minBy=function(u,h){return u&&u.length?Ph(u,Nn(h,2),Nb):J},Se.stubArray=Dc,Se.stubFalse=sy,Se.stubObject=function(){return{}},Se.stubString=function(){return""},Se.stubTrue=function(){return!0},Se.multiply=fw,Se.nth=function(u,h){return u&&u.length?pu(u,Xn(h)):J},Se.noConflict=function(){return Ri._===this&&(Ri._=Fm),this},Se.noop=iy,Se.now=Su,Se.pad=function(u,h,m){u=Ni(u);var N=(h=Xn(h))?wh(u):0;if(!h||N>=h)return u;var ae=(h-N)/2;return _p(hi(ae),m)+u+_p(Bt(ae),m)},Se.padEnd=function(u,h,m){u=Ni(u);var N=(h=Xn(h))?wh(u):0;return h&&N<h?u+_p(h-N,m):u},Se.padStart=function(u,h,m){u=Ni(u);var N=(h=Xn(h))?wh(u):0;return h&&N<h?_p(h-N,m)+u:u},Se.parseInt=function(u,h,m){return m||null==h?h=0:h&&(h=+h),jx(Ni(u).replace(Qe,""),h||0)},Se.random=function(u,h,m){if(m&&"boolean"!=typeof m&&zs(u,h,m)&&(h=m=J),m===J&&("boolean"==typeof h?(m=h,h=J):"boolean"==typeof u&&(m=u,u=J)),u===J&&h===J?(u=0,h=1):(u=rl(u),h===J?(h=u,u=0):h=rl(h)),u>h){var N=u;u=h,h=N}if(m||u%1||h%1){var ae=Ah();return us(u+ae*(h-u+Tx("1e-"+((ae+"").length-1))),h)}return Ol(u,h)},Se.reduce=function(u,h,m){var N=Dn(u)?au:Uo,ae=arguments.length<3;return N(u,Nn(h,4),m,ae,yc)},Se.reduceRight=function(u,h,m){var N=Dn(u)?ud:Uo,ae=arguments.length<3;return N(u,Nn(h,4),m,ae,Ym)},Se.repeat=function(u,h,m){return h=(m?zs(u,h,m):h===J)?1:Xn(h),up(Ni(u),h)},Se.replace=function(){var u=arguments,h=Ni(u[0]);return u.length<3?h:h.replace(u[1],u[2])},Se.result=function(u,h,m){var N=-1,ae=(h=Ec(h,u)).length;for(ae||(ae=1,u=J);++N<ae;){var Ce=null==u?J:u[Jn(h[N])];Ce===J&&(N=ae,Ce=m),u=Zo(Ce)?Ce.call(u):Ce}return u},Se.round=pw,Se.runInContext=st,Se.sample=function(u){return(Dn(u)?Gm:sA)(u)},Se.size=function(u){if(null==u)return 0;if(ho(u))return B_(u)?wh(u):u.length;var h=Us(u);return h==je||h==pt?u.size:Rb(u).length},Se.snakeCase=H1,Se.some=function(u,h,m){var N=Dn(u)?Co:YP;return m&&zs(u,h,m)&&(h=J),N(u,Nn(h,3))},Se.sortedIndex=function(u,h){return Bh(u,h)},Se.sortedIndexBy=function(u,h,m){return t_(u,h,Nn(m,2))},Se.sortedIndexOf=function(u,h){var m=null==u?0:u.length;if(m){var N=Bh(u,h);if(N<m&&An(u[N],h))return N}return-1},Se.sortedLastIndex=function(u,h){return Bh(u,h,!0)},Se.sortedLastIndexBy=function(u,h,m){return t_(u,h,Nn(m,2),!0)},Se.sortedLastIndexOf=function(u,h){if(null!=u&&u.length){var N=Bh(u,h,!0)-1;if(An(u[N],h))return N}return-1},Se.startCase=Y_,Se.startsWith=function(u,h,m){return u=Ni(u),m=null==m?0:hu(Xn(m),0,u.length),h=Do(h),u.slice(m,m+h.length)==h},Se.subtract=gw,Se.sum=function(u){return u&&u.length?hd(u,Js):0},Se.sumBy=function(u,h){return u&&u.length?hd(u,Nn(h,2)):0},Se.template=function(u,h,m){var N=Se.templateSettings;m&&zs(u,h,m)&&(h=J),u=Ni(u),h=kd({},h,N,Gb);var Ye,at,ae=kd({},h.imports,N.imports,Gb),Ce=xs(ae),He=Mm(ae,Ce),Rt=0,Nt=h.interpolate||Hr,Vt="__p += '",tn=Nm((h.escape||Hr).source+"|"+Nt.source+"|"+(Nt===ot?mn:Hr).source+"|"+(h.evaluate||Hr).source+"|$","g"),bn="//# sourceURL="+(Hi.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ax+"]")+"\n";u.replace(tn,function(Ln,ci,wi,po,Hs,ea){return wi||(wi=po),Vt+=u.slice(Rt,ea).replace(ne,OP),ci&&(Ye=!0,Vt+="' +\n__e("+ci+") +\n'"),Hs&&(at=!0,Vt+="';\n"+Hs+";\n__p += '"),wi&&(Vt+="' +\n((__t = ("+wi+")) == null ? '' : __t) +\n'"),Rt=ea+Ln.length,Ln}),Vt+="';\n";var Pn=Hi.call(h,"variable")&&h.variable;if(Pn){if(ni.test(Pn))throw new xn("Invalid `variable` option passed into `_.template`")}else Vt="with (obj) {\n"+Vt+"\n}\n";Vt=(at?Vt.replace(Ps,""):Vt).replace(zr,"$1").replace(da,"$1;"),Vt="function("+(Pn||"obj")+") {\n"+(Pn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Ye?", __e = _.escape":"")+(at?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Vt+"return __p\n}";var li=J_(function(){return Ii(Ce,bn+"return "+Vt).apply(J,He)});if(li.source=Vt,Aa(li))throw li;return li},Se.times=function(u,h){if((u=Xn(u))<1||u>Te)return[];var m=ye,N=us(u,ye);h=Nn(h),u-=ye;for(var ae=fd(N,h);++m<u;)h(m);return ae},Se.toFinite=rl,Se.toInteger=Xn,Se.toLength=V_,Se.toLower=function(u){return Ni(u).toLowerCase()},Se.toNumber=fo,Se.toSafeInteger=function(u){return u?hu(Xn(u),-Te,Te):0===u?u:0},Se.toString=Ni,Se.toUpper=function(u){return Ni(u).toUpperCase()},Se.trim=function(u,h,m){if((u=Ni(u))&&(m||h===J))return vb(u);if(!u||!(h=Do(h)))return u;var N=$a(u),ae=$a(h);return Qa(N,Ix(N,ae),Ox(N,ae)+1).join("")},Se.trimEnd=function(u,h,m){if((u=Ni(u))&&(m||h===J))return u.slice(0,gc(u)+1);if(!u||!(h=Do(h)))return u;var N=$a(u);return Qa(N,0,Ox(N,$a(h))+1).join("")},Se.trimStart=function(u,h,m){if((u=Ni(u))&&(m||h===J))return u.replace(Qe,"");if(!u||!(h=Do(h)))return u;var N=$a(u);return Qa(N,Ix(N,$a(h))).join("")},Se.truncate=function(u,h){var m=30,N="...";if(br(h)){var ae="separator"in h?h.separator:ae;m="length"in h?Xn(h.length):m,N="omission"in h?Do(h.omission):N}var Ce=(u=Ni(u)).length;if(bh(u)){var He=$a(u);Ce=He.length}if(m>=Ce)return u;var Ye=m-wh(N);if(Ye<1)return N;var at=He?Qa(He,0,Ye).join(""):u.slice(0,Ye);if(ae===J)return at+N;if(He&&(Ye+=at.length-Ye),U0(ae)){if(u.slice(Ye).search(ae)){var Rt,Nt=at;for(ae.global||(ae=Nm(ae.source,Ni(Gn.exec(ae))+"g")),ae.lastIndex=0;Rt=ae.exec(Nt);)var Vt=Rt.index;at=at.slice(0,Vt===J?Ye:Vt)}}else if(u.indexOf(Do(ae),Ye)!=Ye){var tn=at.lastIndexOf(ae);tn>-1&&(at=at.slice(0,tn))}return at+N},Se.unescape=function(u){return(u=Ni(u))&&ms.test(u)?u.replace(Sl,Rm):u},Se.uniqueId=function(u){var h=++kP;return Ni(u)+h},Se.upperCase=sw,Se.upperFirst=jp,Se.each=M_,Se.eachRight=Dp,Se.first=n0,ny(Se,function(){var u={};return Xa(Se,function(h,m){Hi.call(Se.prototype,m)||(u[m]=h)}),u}(),{chain:!1}),Se.VERSION="4.17.21",ks(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){Se[u].placeholder=Se}),ks(["drop","take"],function(u,h){oi.prototype[u]=function(m){m=m===J?1:Lr(Xn(m),0);var N=this.__filtered__&&!h?new oi(this):this.clone();return N.__filtered__?N.__takeCount__=us(m,N.__takeCount__):N.__views__.push({size:us(m,ye),type:u+(N.__dir__<0?"Right":"")}),N},oi.prototype[u+"Right"]=function(m){return this.reverse()[u](m).reverse()}}),ks(["filter","map","takeWhile"],function(u,h){var m=h+1,N=1==m||3==m;oi.prototype[u]=function(ae){var Ce=this.clone();return Ce.__iteratees__.push({iteratee:Nn(ae,3),type:m}),Ce.__filtered__=Ce.__filtered__||N,Ce}}),ks(["head","last"],function(u,h){var m="take"+(h?"Right":"");oi.prototype[u]=function(){return this[m](1).value()[0]}}),ks(["initial","tail"],function(u,h){var m="drop"+(h?"":"Right");oi.prototype[u]=function(){return this.__filtered__?new oi(this):this[m](1)}}),oi.prototype.compact=function(){return this.filter(Js)},oi.prototype.find=function(u){return this.filter(u).head()},oi.prototype.findLast=function(u){return this.reverse().find(u)},oi.prototype.invokeMap=ai(function(u,h){return"function"==typeof u?new oi(this):this.map(function(m){return Sa(m,u,h)})}),oi.prototype.reject=function(u){return this.filter(P_(Nn(u)))},oi.prototype.slice=function(u,h){u=Xn(u);var m=this;return m.__filtered__&&(u>0||h<0)?new oi(m):(u<0?m=m.takeRight(-u):u&&(m=m.drop(u)),h!==J&&(m=(h=Xn(h))<0?m.dropRight(-h):m.take(h-u)),m)},oi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},oi.prototype.toArray=function(){return this.take(ye)},Xa(oi.prototype,function(u,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),N=/^(?:head|last)$/.test(h),ae=Se[N?"take"+("last"==h?"Right":""):h],Ce=N||/^find/.test(h);!ae||(Se.prototype[h]=function(){var He=this.__wrapped__,Ye=N?[1]:arguments,at=He instanceof oi,Rt=Ye[0],Nt=at||Dn(He),Vt=function(ci){var wi=ae.apply(Se,Fr([ci],Ye));return N&&tn?wi[0]:wi};Nt&&m&&"function"==typeof Rt&&1!=Rt.length&&(at=Nt=!1);var tn=this.__chain__,bn=!!this.__actions__.length,Pn=Ce&&!tn,li=at&&!bn;if(!Ce&&Nt){He=li?He:new oi(this);var Ln=u.apply(He,Ye);return Ln.__actions__.push({func:Pd,args:[Vt],thisArg:J}),new Ao(Ln,tn)}return Pn&&li?u.apply(this,Ye):(Ln=this.thru(Vt),Pn?N?Ln.value()[0]:Ln.value():Ln)})}),ks(["pop","push","shift","sort","splice","unshift"],function(u){var h=sr[u],m=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",N=/^(?:pop|shift)$/.test(u);Se.prototype[u]=function(){var ae=arguments;if(N&&!this.__chain__){var Ce=this.value();return h.apply(Dn(Ce)?Ce:[],ae)}return this[m](function(He){return h.apply(Dn(He)?He:[],ae)})}}),Xa(oi.prototype,function(u,h){var m=Se[h];if(m){var N=m.name+"";Hi.call(md,N)||(md[N]=[]),md[N].push({name:h,func:m})}}),md[Cc(J,2).name]=[{name:"wrapper",func:J}],oi.prototype.clone=function(){var u=new oi(this.__wrapped__);return u.__actions__=Xs(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Xs(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Xs(this.__views__),u},oi.prototype.reverse=function(){if(this.__filtered__){var u=new oi(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},oi.prototype.value=function(){var u=this.__wrapped__.value(),h=this.__dir__,m=Dn(u),N=h<0,ae=m?u.length:0,Ce=function(u,h,m){for(var N=-1,ae=m.length;++N<ae;){var Ce=m[N],He=Ce.size;switch(Ce.type){case"drop":u+=He;break;case"dropRight":h-=He;break;case"take":h=us(h,u+He);break;case"takeRight":u=Lr(u,h-He)}}return{start:u,end:h}}(0,ae,this.__views__),He=Ce.start,Ye=Ce.end,at=Ye-He,Rt=N?Ye:He-1,Nt=this.__iteratees__,Vt=Nt.length,tn=0,bn=us(at,this.__takeCount__);if(!m||!N&&ae==at&&bn==at)return oA(u,this.__actions__);var Pn=[];e:for(;at--&&tn<bn;){for(var li=-1,Ln=u[Rt+=h];++li<Vt;){var ci=Nt[li],po=ci.type,Hs=(0,ci.iteratee)(Ln);if(2==po)Ln=Hs;else if(!Hs){if(1==po)continue e;break e}}Pn[tn++]=Ln}return Pn},Se.prototype.at=x_,Se.prototype.chain=function(){return C_(this)},Se.prototype.commit=function(){return new Ao(this.value(),this.__chain__)},Se.prototype.next=function(){this.__values__===J&&(this.__values__=z0(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?J:this.__values__[this.__index__++]}},Se.prototype.plant=function(u){for(var h,m=this;m instanceof Ih;){var N=xp(m);N.__index__=0,N.__values__=J,h?ae.__wrapped__=N:h=N;var ae=N;m=m.__wrapped__}return ae.__wrapped__=u,h},Se.prototype.reverse=function(){var u=this.__wrapped__;if(u instanceof oi){var h=u;return this.__actions__.length&&(h=new oi(this)),(h=h.reverse()).__actions__.push({func:Pd,args:[w_],thisArg:J}),new Ao(h,this.__chain__)}return this.thru(w_)},Se.prototype.toJSON=Se.prototype.valueOf=Se.prototype.value=function(){return oA(this.__wrapped__,this.__actions__)},Se.prototype.first=Se.prototype.head,Ch&&(Se.prototype[Ch]=function(){return this}),Se}();Ri._=Eh,(gt=function(){return Eh}.call(it,tt,it,jt))!==J&&(jt.exports=gt)}.call(this)},478:function(jt){jt.exports=function(){"use strict";function it(rt,ot){for(var ct=0;ct<ot.length;ct++){var pe=ot[ct];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(rt,pe.key,pe)}}function J(rt,ot){(null==ot||ot>rt.length)&&(ot=rt.length);for(var ct=0,pe=new Array(ot);ct<ot;ct++)pe[ct]=rt[ct];return pe}function xt(rt,ot){var ct="undefined"!=typeof Symbol&&rt[Symbol.iterator]||rt["@@iterator"];if(ct)return(ct=ct.call(rt)).next.bind(ct);if(Array.isArray(rt)||(ct=function(rt,ot){if(rt){if("string"==typeof rt)return J(rt,ot);var ct=Object.prototype.toString.call(rt).slice(8,-1);if("Object"===ct&&rt.constructor&&(ct=rt.constructor.name),"Map"===ct||"Set"===ct)return Array.from(rt);if("Arguments"===ct||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct))return J(rt,ot)}}(rt))||ot&&rt&&"number"==typeof rt.length){ct&&(rt=ct);var pe=0;return function(){return pe>=rt.length?{done:!0}:{done:!1,value:rt[pe++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ut={exports:{}};function Y(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}ut.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Y,changeDefaults:function(rt){ut.exports.defaults=rt}};var fe=/[&<>"']/,q=/[&<>"']/g,V=/[<>"']|&(?!#?\w+;)/,L=/[<>"']|&(?!#?\w+;)/g,re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},W=function(ot){return re[ot]};var x=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function R(rt){return rt.replace(x,function(ot,ct){return"colon"===(ct=ct.toLowerCase())?":":"#"===ct.charAt(0)?"x"===ct.charAt(1)?String.fromCharCode(parseInt(ct.substring(2),16)):String.fromCharCode(+ct.substring(1)):""})}var T=/(^|[^\[])\^/g;var y=/[^\w:]/g,E=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var j={},I=/^[^:]+:\/*[^/]*$/,$=/^([^:]+:)[\s\S]*$/,K=/^([^:]+:\/*[^/]*)[\s\S]*$/;function M(rt,ot){j[" "+rt]||(j[" "+rt]=I.test(rt)?rt+"/":U(rt,"/",!0));var ct=-1===(rt=j[" "+rt]).indexOf(":");return"//"===ot.substring(0,2)?ct?ot:rt.replace($,"$1")+ot:"/"===ot.charAt(0)?ct?ot:rt.replace(K,"$1")+ot:rt+ot}function U(rt,ot,ct){var pe=rt.length;if(0===pe)return"";for(var ve=0;ve<pe;){var Be=rt.charAt(pe-ve-1);if(Be!==ot||ct){if(Be===ot||!ct)break;ve++}else ve++}return rt.substr(0,pe-ve)}var se_escape=function(rt,ot){if(ot){if(fe.test(rt))return rt.replace(q,W)}else if(V.test(rt))return rt.replace(L,W);return rt},se_unescape=R,se_edit=function(rt,ot){rt=rt.source||rt,ot=ot||"";var ct={replace:function(ve,Be){return Be=(Be=Be.source||Be).replace(T,"$1"),rt=rt.replace(ve,Be),ct},getRegex:function(){return new RegExp(rt,ot)}};return ct},se_cleanUrl=function(rt,ot,ct){if(rt){var pe;try{pe=decodeURIComponent(R(ct)).replace(y,"").toLowerCase()}catch(ve){return null}if(0===pe.indexOf("javascript:")||0===pe.indexOf("vbscript:")||0===pe.indexOf("data:"))return null}ot&&!E.test(ct)&&(ct=M(ot,ct));try{ct=encodeURI(ct).replace(/%25/g,"%")}catch(ve){return null}return ct},se_noopTest={exec:function(){}},se_merge=function(rt){for(var ct,pe,ot=1;ot<arguments.length;ot++)for(pe in ct=arguments[ot])Object.prototype.hasOwnProperty.call(ct,pe)&&(rt[pe]=ct[pe]);return rt},se_checkSanitizeDeprecation=function(rt){rt&&rt.sanitize&&!rt.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},se_repeatString=function(rt,ot){if(ot<1)return"";for(var ct="";ot>1;)1&ot&&(ct+=rt),ot>>=1,rt+=rt;return ct+rt},Te=ut.exports.defaults,me=U,te=function(rt,ot){var pe=rt.replace(/\|/g,function(Be,lt,Qe){for(var bt=!1,St=lt;--St>=0&&"\\"===Qe[St];)bt=!bt;return bt?"|":" |"}).split(/ \|/),ve=0;if(pe.length>ot)pe.splice(ot);else for(;pe.length<ot;)pe.push("");for(;ve<pe.length;ve++)pe[ve]=pe[ve].trim().replace(/\\\|/g,"|");return pe},ye=se_escape,Oe=function(rt,ot){if(-1===rt.indexOf(ot[1]))return-1;for(var ct=rt.length,pe=0,ve=0;ve<ct;ve++)if("\\"===rt[ve])ve++;else if(rt[ve]===ot[0])pe++;else if(rt[ve]===ot[1]&&--pe<0)return ve;return-1};function Ue(rt,ot,ct){var pe=ot.href,ve=ot.title?ye(ot.title):null,Be=rt[1].replace(/\\([\[\]])/g,"$1");return"!"!==rt[0].charAt(0)?{type:"link",raw:ct,href:pe,title:ve,text:Be}:{type:"image",raw:ct,href:pe,title:ve,text:ye(Be)}}var Ze=function(){function rt(ct){this.options=ct||Te}var ot=rt.prototype;return ot.space=function(pe){var ve=this.rules.block.newline.exec(pe);if(ve)return ve[0].length>1?{type:"space",raw:ve[0]}:{raw:"\n"}},ot.code=function(pe){var ve=this.rules.block.code.exec(pe);if(ve){var Be=ve[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ve[0],codeBlockStyle:"indented",text:this.options.pedantic?Be:me(Be,"\n")}}},ot.fences=function(pe){var ve=this.rules.block.fences.exec(pe);if(ve){var Be=ve[0],lt=function(rt,ot){var ct=rt.match(/^(\s+)(?:```)/);if(null===ct)return ot;var pe=ct[1];return ot.split("\n").map(function(ve){var Be=ve.match(/^\s+/);return null===Be?ve:Be[0].length>=pe.length?ve.slice(pe.length):ve}).join("\n")}(Be,ve[3]||"");return{type:"code",raw:Be,lang:ve[2]?ve[2].trim():ve[2],text:lt}}},ot.heading=function(pe){var ve=this.rules.block.heading.exec(pe);if(ve){var Be=ve[2].trim();if(/#$/.test(Be)){var lt=me(Be,"#");(this.options.pedantic||!lt||/ $/.test(lt))&&(Be=lt.trim())}return{type:"heading",raw:ve[0],depth:ve[1].length,text:Be}}},ot.nptable=function(pe){var ve=this.rules.block.nptable.exec(pe);if(ve){var Be={type:"table",header:te(ve[1].replace(/^ *| *\| *$/g,"")),align:ve[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:ve[3]?ve[3].replace(/\n$/,"").split("\n"):[],raw:ve[0]};if(Be.header.length===Be.align.length){var Qe,lt=Be.align.length;for(Qe=0;Qe<lt;Qe++)Be.align[Qe]=/^ *-+: *$/.test(Be.align[Qe])?"right":/^ *:-+: *$/.test(Be.align[Qe])?"center":/^ *:-+ *$/.test(Be.align[Qe])?"left":null;for(lt=Be.cells.length,Qe=0;Qe<lt;Qe++)Be.cells[Qe]=te(Be.cells[Qe],Be.header.length);return Be}}},ot.hr=function(pe){var ve=this.rules.block.hr.exec(pe);if(ve)return{type:"hr",raw:ve[0]}},ot.blockquote=function(pe){var ve=this.rules.block.blockquote.exec(pe);if(ve){var Be=ve[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ve[0],text:Be}}},ot.list=function(pe){var ve=this.rules.block.list.exec(pe);if(ve){var Yt,jn,ni,In,mn,Gn,Sn,Ji,er,Be=ve[0],lt=ve[2],Qe=lt.length>1,bt={type:"list",raw:Be,ordered:Qe,start:Qe?+lt.slice(0,-1):"",loose:!1,items:[]},St=ve[0].match(this.rules.block.item),At=!1,qn=St.length;ni=this.rules.block.listItemStart.exec(St[0]);for(var Bi=0;Bi<qn;Bi++){if(Be=Yt=St[Bi],this.options.pedantic||(er=Yt.match(new RegExp("\\n\\s*\\n {0,"+(ni[0].length-1)+"}\\S")))&&(mn=Yt.length-er.index+St.slice(Bi+1).join("\n").length,bt.raw=bt.raw.substring(0,bt.raw.length-mn),Be=Yt=Yt.substring(0,er.index),qn=Bi+1),Bi!==qn-1){if(In=this.rules.block.listItemStart.exec(St[Bi+1]),this.options.pedantic?In[1].length>ni[1].length:In[1].length>=ni[0].length||In[1].length>3){St.splice(Bi,2,St[Bi]+(!this.options.pedantic&&In[1].length<ni[0].length&&!St[Bi].match(/\n$/)?"":"\n")+St[Bi+1]),Bi--,qn--;continue}(!this.options.pedantic||this.options.smartLists?In[2][In[2].length-1]!==lt[lt.length-1]:Qe===(1===In[2].length))&&(mn=St.slice(Bi+1).join("\n").length,bt.raw=bt.raw.substring(0,bt.raw.length-mn),Bi=qn-1),ni=In}jn=Yt.length,~(Yt=Yt.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(jn-=Yt.length,Yt=Yt.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+jn+"}","gm"),"")),Yt=me(Yt,"\n"),Bi!==qn-1&&(Be+="\n"),Gn=At||/\n\n(?!\s*$)/.test(Be),Bi!==qn-1&&(At="\n\n"===Be.slice(-2),Gn||(Gn=At)),Gn&&(bt.loose=!0),this.options.gfm&&(Ji=void 0,(Sn=/^\[[ xX]\] /.test(Yt))&&(Ji=" "!==Yt[1],Yt=Yt.replace(/^\[[ xX]\] +/,""))),bt.items.push({type:"list_item",raw:Be,task:Sn,checked:Ji,loose:Gn,text:Yt})}return bt}},ot.html=function(pe){var ve=this.rules.block.html.exec(pe);if(ve)return{type:this.options.sanitize?"paragraph":"html",raw:ve[0],pre:!this.options.sanitizer&&("pre"===ve[1]||"script"===ve[1]||"style"===ve[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ve[0]):ye(ve[0]):ve[0]}},ot.def=function(pe){var ve=this.rules.block.def.exec(pe);if(ve)return ve[3]&&(ve[3]=ve[3].substring(1,ve[3].length-1)),{type:"def",tag:ve[1].toLowerCase().replace(/\s+/g," "),raw:ve[0],href:ve[2],title:ve[3]}},ot.table=function(pe){var ve=this.rules.block.table.exec(pe);if(ve){var Be={type:"table",header:te(ve[1].replace(/^ *| *\| *$/g,"")),align:ve[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:ve[3]?ve[3].replace(/\n$/,"").split("\n"):[]};if(Be.header.length===Be.align.length){Be.raw=ve[0];var Qe,lt=Be.align.length;for(Qe=0;Qe<lt;Qe++)Be.align[Qe]=/^ *-+: *$/.test(Be.align[Qe])?"right":/^ *:-+: *$/.test(Be.align[Qe])?"center":/^ *:-+ *$/.test(Be.align[Qe])?"left":null;for(lt=Be.cells.length,Qe=0;Qe<lt;Qe++)Be.cells[Qe]=te(Be.cells[Qe].replace(/^ *\| *| *\| *$/g,""),Be.header.length);return Be}}},ot.lheading=function(pe){var ve=this.rules.block.lheading.exec(pe);if(ve)return{type:"heading",raw:ve[0],depth:"="===ve[2].charAt(0)?1:2,text:ve[1]}},ot.paragraph=function(pe){var ve=this.rules.block.paragraph.exec(pe);if(ve)return{type:"paragraph",raw:ve[0],text:"\n"===ve[1].charAt(ve[1].length-1)?ve[1].slice(0,-1):ve[1]}},ot.text=function(pe){var ve=this.rules.block.text.exec(pe);if(ve)return{type:"text",raw:ve[0],text:ve[0]}},ot.escape=function(pe){var ve=this.rules.inline.escape.exec(pe);if(ve)return{type:"escape",raw:ve[0],text:ye(ve[1])}},ot.tag=function(pe,ve,Be){var lt=this.rules.inline.tag.exec(pe);if(lt)return!ve&&/^<a /i.test(lt[0])?ve=!0:ve&&/^<\/a>/i.test(lt[0])&&(ve=!1),!Be&&/^<(pre|code|kbd|script)(\s|>)/i.test(lt[0])?Be=!0:Be&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(lt[0])&&(Be=!1),{type:this.options.sanitize?"text":"html",raw:lt[0],inLink:ve,inRawBlock:Be,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(lt[0]):ye(lt[0]):lt[0]}},ot.link=function(pe){var ve=this.rules.inline.link.exec(pe);if(ve){var Be=ve[2].trim();if(!this.options.pedantic&&/^</.test(Be)){if(!/>$/.test(Be))return;var lt=me(Be.slice(0,-1),"\\");if((Be.length-lt.length)%2==0)return}else{var Qe=Oe(ve[2],"()");if(Qe>-1){var St=(0===ve[0].indexOf("!")?5:4)+ve[1].length+Qe;ve[2]=ve[2].substring(0,Qe),ve[0]=ve[0].substring(0,St).trim(),ve[3]=""}}var At=ve[2],Yt="";if(this.options.pedantic){var jn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(At);jn&&(At=jn[1],Yt=jn[3])}else Yt=ve[3]?ve[3].slice(1,-1):"";return At=At.trim(),/^</.test(At)&&(At=this.options.pedantic&&!/>$/.test(Be)?At.slice(1):At.slice(1,-1)),Ue(ve,{href:At&&At.replace(this.rules.inline._escapes,"$1"),title:Yt&&Yt.replace(this.rules.inline._escapes,"$1")},ve[0])}},ot.reflink=function(pe,ve){var Be;if((Be=this.rules.inline.reflink.exec(pe))||(Be=this.rules.inline.nolink.exec(pe))){var lt=(Be[2]||Be[1]).replace(/\s+/g," ");if(!(lt=ve[lt.toLowerCase()])||!lt.href){var Qe=Be[0].charAt(0);return{type:"text",raw:Qe,text:Qe}}return Ue(Be,lt,Be[0])}},ot.emStrong=function(pe,ve,Be){void 0===Be&&(Be="");var lt=this.rules.inline.emStrong.lDelim.exec(pe);if(lt&&(!lt[3]||!Be.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Qe=lt[1]||lt[2]||"";if(!Qe||Qe&&(""===Be||this.rules.inline.punctuation.exec(Be))){var St,At,bt=lt[0].length-1,Yt=bt,jn=0,ni="*"===lt[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(ni.lastIndex=0,ve=ve.slice(-1*pe.length+bt);null!=(lt=ni.exec(ve));)if(St=lt[1]||lt[2]||lt[3]||lt[4]||lt[5]||lt[6]){if(At=St.length,lt[3]||lt[4]){Yt+=At;continue}if((lt[5]||lt[6])&&bt%3&&!((bt+At)%3)){jn+=At;continue}if(!((Yt-=At)>0))return At=Math.min(At,At+Yt+jn),Math.min(bt,At)%2?{type:"em",raw:pe.slice(0,bt+lt.index+At+1),text:pe.slice(1,bt+lt.index+At)}:{type:"strong",raw:pe.slice(0,bt+lt.index+At+1),text:pe.slice(2,bt+lt.index+At-1)}}}}},ot.codespan=function(pe){var ve=this.rules.inline.code.exec(pe);if(ve){var Be=ve[2].replace(/\n/g," "),lt=/[^ ]/.test(Be),Qe=/^ /.test(Be)&&/ $/.test(Be);return lt&&Qe&&(Be=Be.substring(1,Be.length-1)),Be=ye(Be,!0),{type:"codespan",raw:ve[0],text:Be}}},ot.br=function(pe){var ve=this.rules.inline.br.exec(pe);if(ve)return{type:"br",raw:ve[0]}},ot.del=function(pe){var ve=this.rules.inline.del.exec(pe);if(ve)return{type:"del",raw:ve[0],text:ve[2]}},ot.autolink=function(pe,ve){var lt,Qe,Be=this.rules.inline.autolink.exec(pe);if(Be)return Qe="@"===Be[2]?"mailto:"+(lt=ye(this.options.mangle?ve(Be[1]):Be[1])):lt=ye(Be[1]),{type:"link",raw:Be[0],text:lt,href:Qe,tokens:[{type:"text",raw:lt,text:lt}]}},ot.url=function(pe,ve){var Be;if(Be=this.rules.inline.url.exec(pe)){var lt,Qe;if("@"===Be[2])Qe="mailto:"+(lt=ye(this.options.mangle?ve(Be[0]):Be[0]));else{var bt;do{bt=Be[0],Be[0]=this.rules.inline._backpedal.exec(Be[0])[0]}while(bt!==Be[0]);lt=ye(Be[0]),Qe="www."===Be[1]?"http://"+lt:lt}return{type:"link",raw:Be[0],text:lt,href:Qe,tokens:[{type:"text",raw:lt,text:lt}]}}},ot.inlineText=function(pe,ve,Be){var Qe,lt=this.rules.inline.text.exec(pe);if(lt)return Qe=ve?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(lt[0]):ye(lt[0]):lt[0]:ye(this.options.smartypants?Be(lt[0]):lt[0]),{type:"text",raw:lt[0],text:Qe}},rt}(),Je=se_noopTest,Ke=se_edit,Ve=se_merge,ke={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Je,table:Je,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ke.def=Ke(ke.def).replace("label",ke._label).replace("title",ke._title).getRegex(),ke.bullet=/(?:[*+-]|\d{1,9}[.)])/,ke.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,ke.item=Ke(ke.item,"gm").replace(/bull/g,ke.bullet).getRegex(),ke.listItemStart=Ke(/^( *)(bull) */).replace("bull",ke.bullet).getRegex(),ke.list=Ke(ke.list).replace(/bull/g,ke.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ke.def.source+")").getRegex(),ke._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ke._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ke.html=Ke(ke.html,"i").replace("comment",ke._comment).replace("tag",ke._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ke.paragraph=Ke(ke._paragraph).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.blockquote=Ke(ke.blockquote).replace("paragraph",ke.paragraph).getRegex(),ke.normal=Ve({},ke),ke.gfm=Ve({},ke.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ke.gfm.nptable=Ke(ke.gfm.nptable).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.gfm.table=Ke(ke.gfm.table).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.pedantic=Ve({},ke.normal,{html:Ke("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ke._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Je,paragraph:Ke(ke.normal._paragraph).replace("hr",ke.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ke.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Ee={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Je,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Je,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Ee.punctuation=Ke(Ee.punctuation).replace(/punctuation/g,Ee._punctuation).getRegex(),Ee.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ee.escapedEmSt=/\\\*|\\_/g,Ee._comment=Ke(ke._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ee.emStrong.lDelim=Ke(Ee.emStrong.lDelim).replace(/punct/g,Ee._punctuation).getRegex(),Ee.emStrong.rDelimAst=Ke(Ee.emStrong.rDelimAst,"g").replace(/punct/g,Ee._punctuation).getRegex(),Ee.emStrong.rDelimUnd=Ke(Ee.emStrong.rDelimUnd,"g").replace(/punct/g,Ee._punctuation).getRegex(),Ee._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ee._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ee._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ee.autolink=Ke(Ee.autolink).replace("scheme",Ee._scheme).replace("email",Ee._email).getRegex(),Ee._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ee.tag=Ke(Ee.tag).replace("comment",Ee._comment).replace("attribute",Ee._attribute).getRegex(),Ee._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ee._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ee._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ee.link=Ke(Ee.link).replace("label",Ee._label).replace("href",Ee._href).replace("title",Ee._title).getRegex(),Ee.reflink=Ke(Ee.reflink).replace("label",Ee._label).getRegex(),Ee.reflinkSearch=Ke(Ee.reflinkSearch,"g").replace("reflink",Ee.reflink).replace("nolink",Ee.nolink).getRegex(),Ee.normal=Ve({},Ee),Ee.pedantic=Ve({},Ee.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",Ee._label).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ee._label).getRegex()}),Ee.gfm=Ve({},Ee.normal,{escape:Ke(Ee.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ee.gfm.url=Ke(Ee.gfm.url,"i").replace("email",Ee.gfm._extended_email).getRegex(),Ee.breaks=Ve({},Ee.gfm,{br:Ke(Ee.br).replace("{2,}","*").getRegex(),text:Ke(Ee.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Re={block:ke,inline:Ee},ze=Ze,qe=ut.exports.defaults,je=Re.block,G=Re.inline,X=se_repeatString;function be(rt){return rt.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ce(rt){var ct,pe,ot="",ve=rt.length;for(ct=0;ct<ve;ct++)pe=rt.charCodeAt(ct),Math.random()>.5&&(pe="x"+pe.toString(16)),ot+="&#"+pe+";";return ot}var Pe=function(){function rt(ct){this.tokens=[],this.tokens.links=Object.create(null),this.options=ct||qe,this.options.tokenizer=this.options.tokenizer||new ze,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var pe={block:je.normal,inline:G.normal};this.options.pedantic?(pe.block=je.pedantic,pe.inline=G.pedantic):this.options.gfm&&(pe.block=je.gfm,pe.inline=this.options.breaks?G.breaks:G.gfm),this.tokenizer.rules=pe}rt.lex=function(pe,ve){return new rt(ve).lex(pe)},rt.lexInline=function(pe,ve){return new rt(ve).inlineTokens(pe)};var ot=rt.prototype;return ot.lex=function(pe){return pe=pe.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(pe,this.tokens,!0),this.inline(this.tokens),this.tokens},ot.blockTokens=function(pe,ve,Be){var Qe,bt,St,At,Yt,jn,lt=this;for(void 0===ve&&(ve=[]),void 0===Be&&(Be=!0),this.options.pedantic&&(pe=pe.replace(/^ +$/gm,""));pe;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(In){return!!(Qe=In.call(lt,pe,ve))&&(pe=pe.substring(Qe.raw.length),ve.push(Qe),!0)}))){if(Qe=this.tokenizer.space(pe)){pe=pe.substring(Qe.raw.length),Qe.type&&ve.push(Qe);continue}if(Qe=this.tokenizer.code(pe)){pe=pe.substring(Qe.raw.length),(At=ve[ve.length-1])&&"paragraph"===At.type?(At.raw+="\n"+Qe.raw,At.text+="\n"+Qe.text):ve.push(Qe);continue}if(Qe=this.tokenizer.fences(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.heading(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.nptable(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.hr(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.blockquote(pe)){pe=pe.substring(Qe.raw.length),Qe.tokens=this.blockTokens(Qe.text,[],Be),ve.push(Qe);continue}if(Qe=this.tokenizer.list(pe)){for(pe=pe.substring(Qe.raw.length),St=Qe.items.length,bt=0;bt<St;bt++)Qe.items[bt].tokens=this.blockTokens(Qe.items[bt].text,[],!1);ve.push(Qe);continue}if(Qe=this.tokenizer.html(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Be&&(Qe=this.tokenizer.def(pe))){pe=pe.substring(Qe.raw.length),this.tokens.links[Qe.tag]||(this.tokens.links[Qe.tag]={href:Qe.href,title:Qe.title});continue}if(Qe=this.tokenizer.table(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.lheading(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Yt=pe,this.options.extensions&&this.options.extensions.startBlock&&function(){var In=1/0,mn=pe.slice(1),Gn=void 0;lt.options.extensions.startBlock.forEach(function(Sn){"number"==typeof(Gn=Sn.call(this,mn))&&Gn>=0&&(In=Math.min(In,Gn))}),In<1/0&&In>=0&&(Yt=pe.substring(0,In+1))}(),Be&&(Qe=this.tokenizer.paragraph(Yt))){At=ve[ve.length-1],jn&&"paragraph"===At.type?(At.raw+="\n"+Qe.raw,At.text+="\n"+Qe.text):ve.push(Qe),jn=Yt.length!==pe.length,pe=pe.substring(Qe.raw.length);continue}if(Qe=this.tokenizer.text(pe)){pe=pe.substring(Qe.raw.length),(At=ve[ve.length-1])&&"text"===At.type?(At.raw+="\n"+Qe.raw,At.text+="\n"+Qe.text):ve.push(Qe);continue}if(pe){var ni="Infinite loop on byte: "+pe.charCodeAt(0);if(this.options.silent){console.error(ni);break}throw new Error(ni)}}return ve},ot.inline=function(pe){var ve,Be,lt,Qe,bt,St,At=pe.length;for(ve=0;ve<At;ve++)switch(St=pe[ve],St.type){case"paragraph":case"text":case"heading":St.tokens=[],this.inlineTokens(St.text,St.tokens);break;case"table":for(St.tokens={header:[],cells:[]},Qe=St.header.length,Be=0;Be<Qe;Be++)St.tokens.header[Be]=[],this.inlineTokens(St.header[Be],St.tokens.header[Be]);for(Qe=St.cells.length,Be=0;Be<Qe;Be++)for(bt=St.cells[Be],St.tokens.cells[Be]=[],lt=0;lt<bt.length;lt++)St.tokens.cells[Be][lt]=[],this.inlineTokens(bt[lt],St.tokens.cells[Be][lt]);break;case"blockquote":this.inline(St.tokens);break;case"list":for(Qe=St.items.length,Be=0;Be<Qe;Be++)this.inline(St.items[Be].tokens)}return pe},ot.inlineTokens=function(pe,ve,Be,lt){var Qe=this;void 0===ve&&(ve=[]),void 0===Be&&(Be=!1),void 0===lt&&(lt=!1);var bt,St,At,jn,ni,In,Yt=pe;if(this.tokens.links){var mn=Object.keys(this.tokens.links);if(mn.length>0)for(;null!=(jn=this.tokenizer.rules.inline.reflinkSearch.exec(Yt));)mn.includes(jn[0].slice(jn[0].lastIndexOf("[")+1,-1))&&(Yt=Yt.slice(0,jn.index)+"["+X("a",jn[0].length-2)+"]"+Yt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(jn=this.tokenizer.rules.inline.blockSkip.exec(Yt));)Yt=Yt.slice(0,jn.index)+"["+X("a",jn[0].length-2)+"]"+Yt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(jn=this.tokenizer.rules.inline.escapedEmSt.exec(Yt));)Yt=Yt.slice(0,jn.index)+"++"+Yt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;pe;)if(ni||(In=""),ni=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Sn){return!!(bt=Sn.call(Qe,pe,ve))&&(pe=pe.substring(bt.raw.length),ve.push(bt),!0)}))){if(bt=this.tokenizer.escape(pe)){pe=pe.substring(bt.raw.length),ve.push(bt);continue}if(bt=this.tokenizer.tag(pe,Be,lt)){pe=pe.substring(bt.raw.length),Be=bt.inLink,lt=bt.inRawBlock,(St=ve[ve.length-1])&&"text"===bt.type&&"text"===St.type?(St.raw+=bt.raw,St.text+=bt.text):ve.push(bt);continue}if(bt=this.tokenizer.link(pe)){pe=pe.substring(bt.raw.length),"link"===bt.type&&(bt.tokens=this.inlineTokens(bt.text,[],!0,lt)),ve.push(bt);continue}if(bt=this.tokenizer.reflink(pe,this.tokens.links)){pe=pe.substring(bt.raw.length),St=ve[ve.length-1],"link"===bt.type?(bt.tokens=this.inlineTokens(bt.text,[],!0,lt),ve.push(bt)):St&&"text"===bt.type&&"text"===St.type?(St.raw+=bt.raw,St.text+=bt.text):ve.push(bt);continue}if(bt=this.tokenizer.emStrong(pe,Yt,In)){pe=pe.substring(bt.raw.length),bt.tokens=this.inlineTokens(bt.text,[],Be,lt),ve.push(bt);continue}if(bt=this.tokenizer.codespan(pe)){pe=pe.substring(bt.raw.length),ve.push(bt);continue}if(bt=this.tokenizer.br(pe)){pe=pe.substring(bt.raw.length),ve.push(bt);continue}if(bt=this.tokenizer.del(pe)){pe=pe.substring(bt.raw.length),bt.tokens=this.inlineTokens(bt.text,[],Be,lt),ve.push(bt);continue}if(bt=this.tokenizer.autolink(pe,ce)){pe=pe.substring(bt.raw.length),ve.push(bt);continue}if(!Be&&(bt=this.tokenizer.url(pe,ce))){pe=pe.substring(bt.raw.length),ve.push(bt);continue}if(At=pe,this.options.extensions&&this.options.extensions.startInline&&function(){var Sn=1/0,Ji=pe.slice(1),er=void 0;Qe.options.extensions.startInline.forEach(function(qn){"number"==typeof(er=qn.call(this,Ji))&&er>=0&&(Sn=Math.min(Sn,er))}),Sn<1/0&&Sn>=0&&(At=pe.substring(0,Sn+1))}(),bt=this.tokenizer.inlineText(At,lt,be)){pe=pe.substring(bt.raw.length),"_"!==bt.raw.slice(-1)&&(In=bt.raw.slice(-1)),ni=!0,(St=ve[ve.length-1])&&"text"===St.type?(St.raw+=bt.raw,St.text+=bt.text):ve.push(bt);continue}if(pe){var Gn="Infinite loop on byte: "+pe.charCodeAt(0);if(this.options.silent){console.error(Gn);break}throw new Error(Gn)}}return ve},function(rt,ot,ct){ot&&it(rt.prototype,ot),ct&&it(rt,ct)}(rt,null,[{key:"rules",get:function(){return{block:je,inline:G}}}]),rt}(),Et=ut.exports.defaults,pt=se_cleanUrl,ge=se_escape,B=function(){function rt(ct){this.options=ct||Et}var ot=rt.prototype;return ot.code=function(pe,ve,Be){var lt=(ve||"").match(/\S*/)[0];if(this.options.highlight){var Qe=this.options.highlight(pe,lt);null!=Qe&&Qe!==pe&&(Be=!0,pe=Qe)}return pe=pe.replace(/\n$/,"")+"\n",lt?'<pre><code class="'+this.options.langPrefix+ge(lt,!0)+'">'+(Be?pe:ge(pe,!0))+"</code></pre>\n":"<pre><code>"+(Be?pe:ge(pe,!0))+"</code></pre>\n"},ot.blockquote=function(pe){return"<blockquote>\n"+pe+"</blockquote>\n"},ot.html=function(pe){return pe},ot.heading=function(pe,ve,Be,lt){return this.options.headerIds?"<h"+ve+' id="'+this.options.headerPrefix+lt.slug(Be)+'">'+pe+"</h"+ve+">\n":"<h"+ve+">"+pe+"</h"+ve+">\n"},ot.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},ot.list=function(pe,ve,Be){var lt=ve?"ol":"ul";return"<"+lt+(ve&&1!==Be?' start="'+Be+'"':"")+">\n"+pe+"</"+lt+">\n"},ot.listitem=function(pe){return"<li>"+pe+"</li>\n"},ot.checkbox=function(pe){return"<input "+(pe?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ot.paragraph=function(pe){return"<p>"+pe+"</p>\n"},ot.table=function(pe,ve){return ve&&(ve="<tbody>"+ve+"</tbody>"),"<table>\n<thead>\n"+pe+"</thead>\n"+ve+"</table>\n"},ot.tablerow=function(pe){return"<tr>\n"+pe+"</tr>\n"},ot.tablecell=function(pe,ve){var Be=ve.header?"th":"td";return(ve.align?"<"+Be+' align="'+ve.align+'">':"<"+Be+">")+pe+"</"+Be+">\n"},ot.strong=function(pe){return"<strong>"+pe+"</strong>"},ot.em=function(pe){return"<em>"+pe+"</em>"},ot.codespan=function(pe){return"<code>"+pe+"</code>"},ot.br=function(){return this.options.xhtml?"<br/>":"<br>"},ot.del=function(pe){return"<del>"+pe+"</del>"},ot.link=function(pe,ve,Be){if(null===(pe=pt(this.options.sanitize,this.options.baseUrl,pe)))return Be;var lt='<a href="'+ge(pe)+'"';return ve&&(lt+=' title="'+ve+'"'),lt+">"+Be+"</a>"},ot.image=function(pe,ve,Be){if(null===(pe=pt(this.options.sanitize,this.options.baseUrl,pe)))return Be;var lt='<img src="'+pe+'" alt="'+Be+'"';return ve&&(lt+=' title="'+ve+'"'),lt+(this.options.xhtml?"/>":">")},ot.text=function(pe){return pe},rt}(),O=function(){function rt(){}var ot=rt.prototype;return ot.strong=function(pe){return pe},ot.em=function(pe){return pe},ot.codespan=function(pe){return pe},ot.del=function(pe){return pe},ot.html=function(pe){return pe},ot.text=function(pe){return pe},ot.link=function(pe,ve,Be){return""+Be},ot.image=function(pe,ve,Be){return""+Be},ot.br=function(){return""},rt}(),k=function(){function rt(){this.seen={}}var ot=rt.prototype;return ot.serialize=function(pe){return pe.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ot.getNextSafeSlug=function(pe,ve){var Be=pe,lt=0;if(this.seen.hasOwnProperty(Be)){lt=this.seen[pe];do{Be=pe+"-"+ ++lt}while(this.seen.hasOwnProperty(Be))}return ve||(this.seen[pe]=lt,this.seen[Be]=0),Be},ot.slug=function(pe,ve){void 0===ve&&(ve={});var Be=this.serialize(pe);return this.getNextSafeSlug(Be,ve.dryrun)},rt}(),Ne=B,Xe=O,yt=k,It=ut.exports.defaults,Tn=se_unescape,Hn=Pe,bi=function(){function rt(ct){this.options=ct||It,this.options.renderer=this.options.renderer||new Ne,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Xe,this.slugger=new yt}rt.parse=function(pe,ve){return new rt(ve).parse(pe)},rt.parseInline=function(pe,ve){return new rt(ve).parseInline(pe)};var ot=rt.prototype;return ot.parse=function(pe,ve){void 0===ve&&(ve=!0);var lt,Qe,bt,St,At,Yt,jn,ni,In,mn,Gn,Sn,Ji,er,qn,Bi,fa,Hr,ne,Be="",de=pe.length;for(lt=0;lt<de;lt++)if(mn=pe[lt],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[mn.type]&&(!1!==(ne=this.options.extensions.renderers[mn.type].call(this,mn))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(mn.type)))Be+=ne||"";else switch(mn.type){case"space":continue;case"hr":Be+=this.renderer.hr();continue;case"heading":Be+=this.renderer.heading(this.parseInline(mn.tokens),mn.depth,Tn(this.parseInline(mn.tokens,this.textRenderer)),this.slugger);continue;case"code":Be+=this.renderer.code(mn.text,mn.lang,mn.escaped);continue;case"table":for(ni="",jn="",St=mn.header.length,Qe=0;Qe<St;Qe++)jn+=this.renderer.tablecell(this.parseInline(mn.tokens.header[Qe]),{header:!0,align:mn.align[Qe]});for(ni+=this.renderer.tablerow(jn),In="",St=mn.cells.length,Qe=0;Qe<St;Qe++){for(jn="",At=(Yt=mn.tokens.cells[Qe]).length,bt=0;bt<At;bt++)jn+=this.renderer.tablecell(this.parseInline(Yt[bt]),{header:!1,align:mn.align[bt]});In+=this.renderer.tablerow(jn)}Be+=this.renderer.table(ni,In);continue;case"blockquote":In=this.parse(mn.tokens),Be+=this.renderer.blockquote(In);continue;case"list":for(Gn=mn.ordered,Sn=mn.start,Ji=mn.loose,St=mn.items.length,In="",Qe=0;Qe<St;Qe++)Bi=(qn=mn.items[Qe]).checked,fa=qn.task,er="",qn.task&&(Hr=this.renderer.checkbox(Bi),Ji?qn.tokens.length>0&&"text"===qn.tokens[0].type?(qn.tokens[0].text=Hr+" "+qn.tokens[0].text,qn.tokens[0].tokens&&qn.tokens[0].tokens.length>0&&"text"===qn.tokens[0].tokens[0].type&&(qn.tokens[0].tokens[0].text=Hr+" "+qn.tokens[0].tokens[0].text)):qn.tokens.unshift({type:"text",text:Hr}):er+=Hr),er+=this.parse(qn.tokens,Ji),In+=this.renderer.listitem(er,fa,Bi);Be+=this.renderer.list(In,Gn,Sn);continue;case"html":Be+=this.renderer.html(mn.text);continue;case"paragraph":Be+=this.renderer.paragraph(this.parseInline(mn.tokens));continue;case"text":for(In=mn.tokens?this.parseInline(mn.tokens):mn.text;lt+1<de&&"text"===pe[lt+1].type;)In+="\n"+((mn=pe[++lt]).tokens?this.parseInline(mn.tokens):mn.text);Be+=ve?this.renderer.paragraph(In):In;continue;default:var oe='Token with "'+mn.type+'" type was not found.';if(this.options.silent)return void console.error(oe);throw new Error(oe)}return Be},ot.parseInline=function(pe,ve){ve=ve||this.renderer;var lt,Qe,bt,Be="",St=pe.length;for(lt=0;lt<St;lt++)if(Qe=pe[lt],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Qe.type]&&(!1!==(bt=this.options.extensions.renderers[Qe.type].call(this,Qe))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Qe.type)))Be+=bt||"";else switch(Qe.type){case"escape":Be+=ve.text(Qe.text);break;case"html":Be+=ve.html(Qe.text);break;case"link":Be+=ve.link(Qe.href,Qe.title,this.parseInline(Qe.tokens,ve));break;case"image":Be+=ve.image(Qe.href,Qe.title,Qe.text);break;case"strong":Be+=ve.strong(this.parseInline(Qe.tokens,ve));break;case"em":Be+=ve.em(this.parseInline(Qe.tokens,ve));break;case"codespan":Be+=ve.codespan(Qe.text);break;case"br":Be+=ve.br();break;case"del":Be+=ve.del(this.parseInline(Qe.tokens,ve));break;case"text":Be+=ve.text(Qe.text);break;default:var At='Token with "'+Qe.type+'" type was not found.';if(this.options.silent)return void console.error(At);throw new Error(At)}return Be},rt}(),di=Ze,Ur=B,Ns=O,cs=k,Ps=se_merge,zr=se_checkSanitizeDeprecation,da=se_escape,Sl=ut.exports.getDefaults,ha=ut.exports.changeDefaults,ms=ut.exports.defaults;function Jt(rt,ot,ct){if(null==rt)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof rt)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(rt)+", string expected");if("function"==typeof ot&&(ct=ot,ot=null),ot=Ps({},Jt.defaults,ot||{}),zr(ot),ct){var ve,pe=ot.highlight;try{ve=Hn.lex(rt,ot)}catch(bt){return ct(bt)}var Be=function(St){var At;if(!St)try{ot.walkTokens&&Jt.walkTokens(ve,ot.walkTokens),At=bi.parse(ve,ot)}catch(Yt){St=Yt}return ot.highlight=pe,St?ct(St):ct(null,At)};if(!pe||pe.length<3||(delete ot.highlight,!ve.length))return Be();var lt=0;return Jt.walkTokens(ve,function(bt){"code"===bt.type&&(lt++,setTimeout(function(){pe(bt.text,bt.lang,function(St,At){if(St)return Be(St);null!=At&&At!==bt.text&&(bt.text=At,bt.escaped=!0),0==--lt&&Be()})},0))}),void(0===lt&&Be())}try{var Qe=Hn.lex(rt,ot);return ot.walkTokens&&Jt.walkTokens(Qe,ot.walkTokens),bi.parse(Qe,ot)}catch(bt){if(bt.message+="\nPlease report this to https://github.com/markedjs/marked.",ot.silent)return"<p>An error occurred:</p><pre>"+da(bt.message+"",!0)+"</pre>";throw bt}}return Jt.options=Jt.setOptions=function(rt){return Ps(Jt.defaults,rt),ha(Jt.defaults),Jt},Jt.getDefaults=Sl,Jt.defaults=ms,Jt.use=function(){for(var rt=this,ot=arguments.length,ct=new Array(ot),pe=0;pe<ot;pe++)ct[pe]=arguments[pe];var lt,ve=Ps.apply(void 0,[{}].concat(ct)),Be=Jt.defaults.extensions||{renderers:{},childTokens:{}};ct.forEach(function(Qe){if(Qe.extensions&&(lt=!0,Qe.extensions.forEach(function(St){if(!St.name)throw new Error("extension name required");if(St.renderer){var At=Be.renderers?Be.renderers[St.name]:null;Be.renderers[St.name]=At?function(){for(var Yt=arguments.length,jn=new Array(Yt),ni=0;ni<Yt;ni++)jn[ni]=arguments[ni];var In=St.renderer.apply(this,jn);return!1===In&&(In=At.apply(this,jn)),In}:St.renderer}if(St.tokenizer){if(!St.level||"block"!==St.level&&"inline"!==St.level)throw new Error("extension level must be 'block' or 'inline'");Be[St.level]?Be[St.level].unshift(St.tokenizer):Be[St.level]=[St.tokenizer],St.start&&("block"===St.level?Be.startBlock?Be.startBlock.push(St.start):Be.startBlock=[St.start]:"inline"===St.level&&(Be.startInline?Be.startInline.push(St.start):Be.startInline=[St.start]))}St.childTokens&&(Be.childTokens[St.name]=St.childTokens)})),Qe.renderer&&function(){var St=Jt.defaults.renderer||new Ur,At=function(ni){var In=St[ni];St[ni]=function(){for(var mn=arguments.length,Gn=new Array(mn),Sn=0;Sn<mn;Sn++)Gn[Sn]=arguments[Sn];var Ji=Qe.renderer[ni].apply(St,Gn);return!1===Ji&&(Ji=In.apply(St,Gn)),Ji}};for(var Yt in Qe.renderer)At(Yt);ve.renderer=St}(),Qe.tokenizer&&function(){var St=Jt.defaults.tokenizer||new di,At=function(ni){var In=St[ni];St[ni]=function(){for(var mn=arguments.length,Gn=new Array(mn),Sn=0;Sn<mn;Sn++)Gn[Sn]=arguments[Sn];var Ji=Qe.tokenizer[ni].apply(St,Gn);return!1===Ji&&(Ji=In.apply(St,Gn)),Ji}};for(var Yt in Qe.tokenizer)At(Yt);ve.tokenizer=St}(),Qe.walkTokens){var bt=Jt.defaults.walkTokens;ve.walkTokens=function(St){Qe.walkTokens.call(rt,St),bt&&bt(St)}}lt&&(ve.extensions=Be),Jt.setOptions(ve)})},Jt.walkTokens=function(rt,ot){for(var ve,ct=function(){var lt=ve.value;switch(ot(lt),lt.type){case"table":for(var bt,Qe=xt(lt.tokens.header);!(bt=Qe()).done;)Jt.walkTokens(bt.value,ot);for(var Yt,At=xt(lt.tokens.cells);!(Yt=At()).done;)for(var In,ni=xt(Yt.value);!(In=ni()).done;)Jt.walkTokens(In.value,ot);break;case"list":Jt.walkTokens(lt.items,ot);break;default:Jt.defaults.extensions&&Jt.defaults.extensions.childTokens&&Jt.defaults.extensions.childTokens[lt.type]?Jt.defaults.extensions.childTokens[lt.type].forEach(function(Gn){Jt.walkTokens(lt[Gn],ot)}):lt.tokens&&Jt.walkTokens(lt.tokens,ot)}},pe=xt(rt);!(ve=pe()).done;)ct()},Jt.parseInline=function(rt,ot){if(null==rt)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof rt)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(rt)+", string expected");ot=Ps({},Jt.defaults,ot||{}),zr(ot);try{var ct=Hn.lexInline(rt,ot);return ot.walkTokens&&Jt.walkTokens(ct,ot.walkTokens),bi.parseInline(ct,ot)}catch(pe){if(pe.message+="\nPlease report this to https://github.com/markedjs/marked.",ot.silent)return"<p>An error occurred:</p><pre>"+da(pe.message+"",!0)+"</pre>";throw pe}},Jt.Parser=bi,Jt.parser=bi.parse,Jt.Renderer=Ur,Jt.TextRenderer=Ns,Jt.Lexer=Hn,Jt.lexer=Hn.lex,Jt.Tokenizer=di,Jt.Slugger=cs,Jt.parse=Jt,Jt}()},369:(jt,it,tt)=>{var gt=tt(284),J=tt(830);function xt(){this.clear()}xt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},xt.prototype.enqueue=function(ut){return this.items.push(ut),++this.size},xt.prototype.dequeue=function(){if(this.size){var ut=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,ut}},xt.prototype.peek=function(){if(this.size)return this.items[this.offset]},xt.prototype.forEach=function(ut,Y){Y=arguments.length>1?Y:this;for(var Ae=this.offset,fe=0,q=this.items.length;Ae<q;Ae++,fe++)ut.call(Y,this.items[Ae],fe,this)},xt.prototype.toArray=function(){return this.items.slice(this.offset)},xt.prototype.values=function(){var ut=this.items,Y=this.offset;return new gt(function(){if(Y>=ut.length)return{done:!0};var Ae=ut[Y];return Y++,{value:Ae,done:!1}})},xt.prototype.entries=function(){var ut=this.items,Y=this.offset,Ae=0;return new gt(function(){if(Y>=ut.length)return{done:!0};var fe=ut[Y];return Y++,{value:[Ae++,fe],done:!1}})},"undefined"!=typeof Symbol&&(xt.prototype[Symbol.iterator]=xt.prototype.values),xt.prototype.toString=function(){return this.toArray().join(",")},xt.prototype.toJSON=function(){return this.toArray()},xt.prototype.inspect=function(){var ut=this.toArray();return Object.defineProperty(ut,"constructor",{value:xt,enumerable:!1}),ut},"undefined"!=typeof Symbol&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=xt.prototype.inspect),xt.from=function(ut){var Y=new xt;return J(ut,function(Ae){Y.enqueue(Ae)}),Y},xt.of=function(){return xt.from(arguments)},jt.exports=xt},830:jt=>{var it="undefined"!=typeof ArrayBuffer,tt="undefined"!=typeof Symbol;function gt(J,xt){var ut,Y,Ae,fe,q;if(!J)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof xt)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(J)||it&&ArrayBuffer.isView(J)||"string"==typeof J||"[object Arguments]"===J.toString())for(Ae=0,fe=J.length;Ae<fe;Ae++)xt(J[Ae],Ae);else if("function"!=typeof J.forEach)if(tt&&Symbol.iterator in J&&"function"!=typeof J.next&&(J=J[Symbol.iterator]()),"function"!=typeof J.next)for(Y in J)J.hasOwnProperty(Y)&&xt(J[Y],Y);else for(ut=J,Ae=0;!0!==(q=ut.next()).done;)xt(q.value,Ae),Ae++;else J.forEach(xt)}gt.forEachWithNullKeys=function(J,xt){var ut,Y,Ae,fe,q;if(!J)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if("function"!=typeof xt)throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(J)||it&&ArrayBuffer.isView(J)||"string"==typeof J||"[object Arguments]"===J.toString())for(Ae=0,fe=J.length;Ae<fe;Ae++)xt(J[Ae],null);else if(J instanceof Set)J.forEach(function(V){xt(V,null)});else if("function"!=typeof J.forEach)if(tt&&Symbol.iterator in J&&"function"!=typeof J.next&&(J=J[Symbol.iterator]()),"function"!=typeof J.next)for(Y in J)J.hasOwnProperty(Y)&&xt(J[Y],Y);else for(ut=J,Ae=0;!0!==(q=ut.next()).done;)xt(q.value,null),Ae++;else J.forEach(xt)},jt.exports=gt},284:jt=>{function it(tt){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:tt}),this.done=!1}it.prototype.next=function(){if(this.done)return{done:!0};var tt=this._next();return tt.done&&(this.done=!0),tt},"undefined"!=typeof Symbol&&(it.prototype[Symbol.iterator]=function(){return this}),it.of=function(){var tt=arguments,gt=tt.length,J=0;return new it(function(){return J>=gt?{done:!0}:{done:!1,value:tt[J++]}})},it.empty=function(){var tt=new it(null);return tt.done=!0,tt},it.is=function(tt){return tt instanceof it||"object"==typeof tt&&null!==tt&&"function"==typeof tt.next},jt.exports=it},310:(jt,it,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(it,"__esModule",{value:!0}),it.isMobile=function(){return void 0!==J.window.orientation},it.default=function(fe){if(!fe&&!(0,xt.default)())return"Node";if((0,ut.default)(fe))return"Electron";var q="undefined"!=typeof navigator?navigator:{},V=fe||q.userAgent||"";if(V.indexOf("Edge")>-1)return"Edge";var L=-1!==V.indexOf("MSIE "),re=-1!==V.indexOf("Trident/");return L||re?"IE":J.window.chrome?"Chrome":J.window.safari?"Safari":J.window.mozInnerScreenX?"Firefox":"Unknown"};var J=tt(151),xt=gt(tt(602)),ut=gt(tt(344))},151:(jt,it,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(it,"__esModule",{value:!0}),it.console=it.process=it.document=it.global=it.window=it.self=void 0;var J=gt(tt(321)),xt={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,J.default)(process))&&process};it.self=xt.self||xt.window||xt.global,it.window=xt.window||xt.self||xt.global,it.global=xt.global||xt.self||xt.window,it.document=xt.document||{},it.process=xt.process||{};var V=console;it.console=V},761:(jt,it,tt)=>{"use strict";var J=tt(948),xt=tt(321);Object.defineProperty(it,"CO",{enumerable:!0,get:function(){return ut.global}}),Object.defineProperty(it,"jU",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(it,"qs",{enumerable:!0,get:function(){return Ae.default}});var ut=tt(151),Y=V(tt(602)),Ae=V(tt(310));J(tt(344));function q(L){if("function"!=typeof WeakMap)return null;var re=new WeakMap,W=new WeakMap;return(q=function(x){return x?W:re})(L)}function V(L,re){if(!re&&L&&L.__esModule)return L;if(null===L||"object"!==xt(L)&&"function"!=typeof L)return{default:L};var W=q(re);if(W&&W.has(L))return W.get(L);var w={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in L)if("default"!==R&&Object.prototype.hasOwnProperty.call(L,R)){var T=x?Object.getOwnPropertyDescriptor(L,R):null;T&&(T.get||T.set)?Object.defineProperty(w,R,T):w[R]=L[R]}return w.default=L,W&&W.set(L,w),w}},602:(jt,it,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(it,"__esModule",{value:!0}),it.default=ut,it.isBrowserMainThread=function(){return ut()&&"undefined"!=typeof document};var J=gt(tt(321)),xt=gt(tt(344));function ut(){return!("object"===("undefined"==typeof process?"undefined":(0,J.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,xt.default)()}},344:(jt,it,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(it,"__esModule",{value:!0}),it.default=function(ut){if("undefined"!=typeof window&&"object"===(0,J.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,J.default)(process.versions)&&Boolean(process.versions.electron))return!0;var Y="object"===("undefined"==typeof navigator?"undefined":(0,J.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,Ae=ut||Y;return!!(Ae&&Ae.indexOf("Electron")>=0)};var J=gt(tt(321))},991:function(jt,it,tt){"use strict";var gt=this&&this.__createBinding||(Object.create?function(xt,ut,Y,Ae){void 0===Ae&&(Ae=Y),Object.defineProperty(xt,Ae,{enumerable:!0,get:function(){return ut[Y]}})}:function(xt,ut,Y,Ae){void 0===Ae&&(Ae=Y),xt[Ae]=ut[Y]}),J=this&&this.__exportStar||function(xt,ut){for(var Y in xt)"default"!==Y&&!Object.prototype.hasOwnProperty.call(ut,Y)&&gt(ut,xt,Y)};Object.defineProperty(it,"__esModule",{value:!0}),J(tt(180),it),J(tt(103),it),J(tt(965),it),J(tt(595),it),J(tt(417),it),J(tt(451),it),J(tt(735),it)},180:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.BlankNode=void 0,it.BlankNode=class{constructor(J){this.termType="BlankNode",this.value=J}equals(J){return!!J&&"BlankNode"===J.termType&&J.value===this.value}}},103:(jt,it,tt)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.DataFactory=void 0;const gt=tt(180),J=tt(965),xt=tt(595),ut=tt(417),Y=tt(451),Ae=tt(735);let fe=0;it.DataFactory=class{constructor(L){this.blankNodeCounter=0,this.blankNodePrefix=(L=L||{}).blankNodePrefix||`df_${fe++}_`}namedNode(L){return new ut.NamedNode(L)}blankNode(L){return new gt.BlankNode(L||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(L,re){return new xt.Literal(L,re)}variable(L){return new Ae.Variable(L)}defaultGraph(){return J.DefaultGraph.INSTANCE}quad(L,re,W,w){return new Y.Quad(L,re,W,w||this.defaultGraph())}fromTerm(L){switch(L.termType){case"NamedNode":return this.namedNode(L.value);case"BlankNode":return this.blankNode(L.value);case"Literal":return L.language?this.literal(L.value,L.language):L.datatype.equals(xt.Literal.XSD_STRING)?this.literal(L.value):this.literal(L.value,this.fromTerm(L.datatype));case"Variable":return this.variable(L.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(L.subject),this.fromTerm(L.predicate),this.fromTerm(L.object),this.fromTerm(L.graph))}}fromQuad(L){return this.fromTerm(L)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},965:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.DefaultGraph=void 0;class tt{constructor(){this.termType="DefaultGraph",this.value=""}equals(J){return!!J&&"DefaultGraph"===J.termType}}it.DefaultGraph=tt,tt.INSTANCE=new tt},595:(jt,it,tt)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.Literal=void 0;const gt=tt(417);class J{constructor(ut,Y){this.termType="Literal",this.value=ut,"string"==typeof Y?(this.language=Y,this.datatype=J.RDF_LANGUAGE_STRING):Y?(this.language="",this.datatype=Y):(this.language="",this.datatype=J.XSD_STRING)}equals(ut){return!!ut&&"Literal"===ut.termType&&ut.value===this.value&&ut.language===this.language&&ut.datatype.equals(this.datatype)}}it.Literal=J,J.RDF_LANGUAGE_STRING=new gt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),J.XSD_STRING=new gt.NamedNode("http://www.w3.org/2001/XMLSchema#string")},417:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.NamedNode=void 0,it.NamedNode=class{constructor(J){this.termType="NamedNode",this.value=J}equals(J){return!!J&&"NamedNode"===J.termType&&J.value===this.value}}},451:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.Quad=void 0,it.Quad=class{constructor(J,xt,ut,Y){this.termType="Quad",this.value="",this.subject=J,this.predicate=xt,this.object=ut,this.graph=Y}equals(J){return!!J&&("Quad"===J.termType||!J.termType)&&this.subject.equals(J.subject)&&this.predicate.equals(J.predicate)&&this.object.equals(J.object)&&this.graph.equals(J.graph)}}},735:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.Variable=void 0,it.Variable=class{constructor(J){this.termType="Variable",this.value=J}equals(J){return!!J&&"Variable"===J.termType&&J.value===this.value}}},609:function(jt,it,tt){"use strict";var gt=this&&this.__createBinding||(Object.create?function(w,x,R,T){void 0===T&&(T=R),Object.defineProperty(w,T,{enumerable:!0,get:function(){return x[R]}})}:function(w,x,R,T){void 0===T&&(T=R),w[T]=x[R]}),J=this&&this.__exportStar||function(w,x){for(var R in w)"default"!==R&&!Object.prototype.hasOwnProperty.call(x,R)&&gt(x,w,R)};Object.defineProperty(it,"__esModule",{value:!0}),it.getSupportedJavaScriptPrimitives=it.getSupportedRdfDatatypes=it.getTermRaw=it.toRdf=it.fromRdf=void 0;const xt=tt(991),ut=tt(938),Y=tt(60);J(tt(938),it),J(tt(871),it),J(tt(60),it);const Ae=new xt.DataFactory,fe=new Y.Translator;function q(w,x){return fe.fromRdf(w,x)}fe.registerHandler(new ut.TypeHandlerString,ut.TypeHandlerString.TYPES.map(w=>Ae.namedNode(w)),["string"]),fe.registerHandler(new ut.TypeHandlerBoolean,[ut.TypeHandlerBoolean.TYPE].map(w=>Ae.namedNode(w)),["boolean"]),fe.registerHandler(new ut.TypeHandlerNumberDouble,ut.TypeHandlerNumberDouble.TYPES.map(w=>Ae.namedNode(w)),["number"]),fe.registerHandler(new ut.TypeHandlerNumberInteger,ut.TypeHandlerNumberInteger.TYPES.map(w=>Ae.namedNode(w)),["number"]),fe.registerHandler(new ut.TypeHandlerDate,ut.TypeHandlerDate.TYPES.map(w=>Ae.namedNode(w)),["object"]),it.fromRdf=q,it.toRdf=function(w,x){return x&&"namedNode"in x&&(x={dataFactory:x}),(x=x||{})&&!x.dataFactory&&(x.dataFactory=Ae),fe.toRdf(w,x)},it.getTermRaw=function(w,x){return"Literal"===w.termType?q(w,x):w.value},it.getSupportedRdfDatatypes=function(){return fe.getSupportedRdfDatatypes()},it.getSupportedJavaScriptPrimitives=function(){return fe.getSupportedJavaScriptPrimitives()}},871:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0})},60:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.Translator=void 0,it.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(J){throw new Error(`Invalid RDF ${J.datatype.value} value: '${J.value}'`)}registerHandler(J,xt,ut){for(const Y of xt)this.supportedRdfDatatypes.push(Y),this.fromRdfHandlers[Y.value]=J;for(const Y of ut){let Ae=this.toRdfHandlers[Y];Ae||(this.toRdfHandlers[Y]=Ae=[]),Ae.push(J)}}fromRdf(J,xt){const ut=this.fromRdfHandlers[J.datatype.value];return ut?ut.fromRdf(J,xt):J.value}toRdf(J,xt){const ut=this.toRdfHandlers[typeof J];if(ut)for(const Y of ut){const Ae=Y.toRdf(J,xt);if(Ae)return Ae}throw new Error(`Invalid JavaScript value: '${J}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},727:(jt,it,tt)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.TypeHandlerBoolean=void 0;const gt=tt(60);class J{fromRdf(ut,Y){switch(ut.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return Y&&gt.Translator.incorrectRdfDataType(ut),!1}toRdf(ut,{datatype:Y,dataFactory:Ae}){return Ae.literal(ut?"true":"false",Y||Ae.namedNode(J.TYPE))}}it.TypeHandlerBoolean=J,J.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},525:(jt,it,tt)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.TypeHandlerDate=void 0;const gt=tt(60);class J{fromRdf(ut,Y){switch(Y&&!ut.value.match(J.VALIDATORS[ut.datatype.value.substr(33,ut.datatype.value.length)])&&gt.Translator.incorrectRdfDataType(ut),ut.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(ut.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const Ae=ut.value.split("-");return new Date(0,parseInt(Ae[0],10)-1,parseInt(Ae[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(ut.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(ut.value+"-01");default:return new Date(ut.value)}}toRdf(ut,{datatype:Y,dataFactory:Ae}){if(Y=Y||Ae.namedNode(J.TYPES[0]),!(ut instanceof Date))return null;const fe=ut;let q;switch(Y.value){case"http://www.w3.org/2001/XMLSchema#gDay":q=String(fe.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":q=fe.getUTCMonth()+1+"-"+fe.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":q=String(fe.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":q=fe.getUTCFullYear()+"-"+(fe.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":q=fe.toISOString().replace(/T.*$/,"");break;default:q=fe.toISOString()}return Ae.literal(q,Y)}}it.TypeHandlerDate=J,J.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],J.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},554:(jt,it,tt)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.TypeHandlerNumberDouble=void 0;const gt=tt(60);class J{fromRdf(ut,Y){const Ae=parseFloat(ut.value);return Y&&isNaN(Ae)&&gt.Translator.incorrectRdfDataType(ut),Ae}toRdf(ut,{datatype:Y,dataFactory:Ae}){return Y=Y||Ae.namedNode(J.TYPES[0]),isNaN(ut)?Ae.literal("NaN",Y):isFinite(ut)?ut%1==0?null:Ae.literal(ut.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Y):Ae.literal(ut>0?"INF":"-INF",Y)}}it.TypeHandlerNumberDouble=J,J.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},750:(jt,it,tt)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.TypeHandlerNumberInteger=void 0;const gt=tt(60);class J{fromRdf(ut,Y){const Ae=parseInt(ut.value,10);return Y&&(isNaN(Ae)||ut.value.indexOf(".")>=0)&&gt.Translator.incorrectRdfDataType(ut),Ae}toRdf(ut,{datatype:Y,dataFactory:Ae}){return Ae.literal(String(ut),Y||Ae.namedNode(ut<=J.MAX_INT&&ut>=J.MIN_INT?J.TYPES[0]:J.TYPES[1]))}}it.TypeHandlerNumberInteger=J,J.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],J.MAX_INT=2147483647,J.MIN_INT=-2147483648},608:(jt,it)=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0}),it.TypeHandlerString=void 0;class tt{fromRdf(J){return J.value}toRdf(J,{datatype:xt,dataFactory:ut}){return ut.literal(J,xt)}}it.TypeHandlerString=tt,tt.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},938:function(jt,it,tt){"use strict";var gt=this&&this.__createBinding||(Object.create?function(xt,ut,Y,Ae){void 0===Ae&&(Ae=Y),Object.defineProperty(xt,Ae,{enumerable:!0,get:function(){return ut[Y]}})}:function(xt,ut,Y,Ae){void 0===Ae&&(Ae=Y),xt[Ae]=ut[Y]}),J=this&&this.__exportStar||function(xt,ut){for(var Y in xt)"default"!==Y&&!Object.prototype.hasOwnProperty.call(ut,Y)&&gt(ut,xt,Y)};Object.defineProperty(it,"__esModule",{value:!0}),J(tt(727),it),J(tt(525),it),J(tt(554),it),J(tt(750),it),J(tt(608),it)},213:(jt,it,tt)=>{"use strict";var gt={};tt.r(gt),tt.d(gt,{decode:()=>gfe,encode:()=>mfe});var J={};tt.r(J),tt.d(J,{decode:()=>wfe,encode:()=>Efe});var xt={};tt.r(xt),tt.d(xt,{decode:()=>Sfe,encode:()=>Cfe});var ut={};function Y(n){return"function"==typeof n}tt.r(ut),tt.d(ut,{decode:()=>xfe,encode:()=>Afe});let Ae=!1;const fe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Ae&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Ae=n},get useDeprecatedSynchronousErrorHandling(){return Ae}};function q(n){setTimeout(()=>{throw n},0)}const V={closed:!0,next(n){},error(n){if(fe.useDeprecatedSynchronousErrorHandling)throw n;q(n)},complete(){}},L=Array.isArray||(n=>n&&"number"==typeof n.length);function re(n){return null!==n&&"object"==typeof n}const w=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,i)=>`${i+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class x{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof x)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Y(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof w?R(o.errors):[o]}}if(L(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(re(l))try{l.unsubscribe()}catch(c){e=e||[],c instanceof w?e=e.concat(R(c.errors)):e.push(c)}}}if(e)throw new w(e)}add(e){let t=e;if(!e)return x.EMPTY;switch(typeof e){case"function":t=new x(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof x)){const s=t;t=new x,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=t;if(null===i)t._parentOrParents=this;else if(i instanceof x){if(i===this)return t;t._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return t;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}var n;function R(n){return n.reduce((e,t)=>e.concat(t instanceof w?t.errors:t),[])}x.EMPTY=((n=new x).closed=!0,n);const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class y extends x{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=V;break;case 1:if(!e){this.destination=V;break}if("object"==typeof e){e instanceof y?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new E(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new E(this,e,t,i)}}[T](){return this}static create(e,t,i){const r=new y(e,t,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class E extends y{constructor(e,t,i,r){super(),this._parentSubscriber=e;let s,o=this;Y(t)?s=t:t&&(s=t.next,i=t.error,r=t.complete,t!==V&&(o=Object.create(t),Y(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;fe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=fe;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):q(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;q(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);fe.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),fe.useDeprecatedSynchronousErrorHandling)throw i;q(i)}}__tryOrSetError(e,t,i){if(!fe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(r){return fe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(q(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const I="function"==typeof Symbol&&Symbol.observable||"@@observable";function $(n){return n}let F=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof y)return n;if(n[T])return n[T]()}return n||e||t?new y(n,e,t):new y(V)}(t,i,r);if(o.add(s?s.call(o,this.source):this.source||fe.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),fe.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){fe.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),function(n){for(;n;){const{closed:e,destination:t,isStopped:i}=n;if(e||i)return!1;n=t&&t instanceof y?t:null}return!0}(t)?t.error(i):console.warn(i)}}forEach(t,i){return new(i=Q(i))((r,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(t){const{source:i}=this;return i&&i.subscribe(t)}[I](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?$:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=Q(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Q(n){if(n||(n=fe.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const U=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ie extends x{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class ue extends y{constructor(e){super(e),this.destination=e}}let ee=(()=>{class n extends F{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[T](){return new ue(this)}lift(t){const i=new se(this,this);return i.operator=t,i}next(t){if(this.closed)throw new U;if(!this.isStopped){const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].next(t)}}error(t){if(this.closed)throw new U;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:i}=this,r=i.length,s=i.slice();for(let o=0;o<r;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new U;this.isStopped=!0;const{observers:t}=this,i=t.length,r=t.slice();for(let s=0;s<i;s++)r[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new U;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new U;return this.hasError?(t.error(this.thrownError),x.EMPTY):this.isStopped?(t.complete(),x.EMPTY):(this.observers.push(t),new ie(this,t))}asObservable(){const t=new F;return t.source=this,t}}return n.create=(e,t)=>new se(e,t),n})();class se extends ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):x.EMPTY}}function Te(n){return n&&"function"==typeof n.schedule}function me(n,e){return function(i){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new te(n,e))}}class te{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new ye(e,this.project,this.thisArg))}}class ye extends y{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Oe=n=>e=>{for(let t=0,i=n.length;t<i&&!e.closed;t++)e.next(n[t]);e.complete()},Ze="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ke=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ee(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Re=n=>{if(n&&"function"==typeof n[I])return(n=>e=>{const t=n[I]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(ke(n))return Oe(n);if(Ee(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,q),e))(n);if(n&&"function"==typeof n[Ze])return(n=>e=>{const t=n[Ze]();for(;;){let i;try{i=t.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${re(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function je(n,e){return new F(t=>{const i=new x;let r=0;return i.add(e.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||i.add(this.schedule())):t.complete()})),i})}function Pe(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[I]}(n))return function(n,e){return new F(t=>{const i=new x;return i.add(e.schedule(()=>{const r=n[I]();i.add(r.subscribe({next(s){i.add(e.schedule(()=>t.next(s)))},error(s){i.add(e.schedule(()=>t.error(s)))},complete(){i.add(e.schedule(()=>t.complete()))}}))})),i})}(n,e);if(Ee(n))return function(n,e){return new F(t=>{const i=new x;return i.add(e.schedule(()=>n.then(r=>{i.add(e.schedule(()=>{t.next(r),i.add(e.schedule(()=>t.complete()))}))},r=>{i.add(e.schedule(()=>t.error(r)))}))),i})}(n,e);if(ke(n))return je(n,e);if(function(n){return n&&"function"==typeof n[Ze]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new F(t=>{const i=new x;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=n[Ze](),i.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=r.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),i})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof F?n:new F(Re(n))}class Et extends y{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ge extends y{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function O(n,e){if(e.closed)return;if(n instanceof F)return n.subscribe(e);let t;try{t=Re(n)(e)}catch(i){e.error(i)}return t}function k(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(k((r,s)=>Pe(n(r,s)).pipe(me((o,a)=>e(r,o,s,a))),t)):("number"==typeof e&&(t=e),i=>i.lift(new Ne(n,t)))}class Ne{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Xe(e,this.project,this.concurrent))}}class Xe extends ge{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new Et(this),i=this.destination;i.add(t);const r=O(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function It(n=Number.POSITIVE_INFINITY){return k($,n)}function Tn(n,e){return e?je(n,e):new F(Oe(n))}function Rn(...n){let e=Number.POSITIVE_INFINITY,t=null,i=n[n.length-1];return Te(i)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof i&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof F?n[0]:It(e)(Tn(n,t))}function Hn(){return function(e){return e.lift(new bi(e))}}class bi{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const r=new di(e,i),s=t.subscribe(r);return r.closed||(r.connection=i.connect()),s}}class di extends y{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,r=e._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Ur extends F{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new x,e.add(this.source.subscribe(new cs(this.getSubject(),this))),e.closed&&(this._connection=null,e=x.EMPTY)),e}refCount(){return Hn()(this)}}const Ns=(()=>{const n=Ur.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class cs extends ue{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function da(n,e){return function(i){let r;if(r="function"==typeof n?n:function(){return n},"function"==typeof e)return i.lift(new Sl(r,e));const s=Object.create(i,Ns);return s.source=i,s.subjectFactory=r,s}}class Sl{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:i}=this,r=this.subjectFactory(),s=i(r).subscribe(e);return s.add(t.subscribe(r)),s}}function ha(){return new ee}function ms(){return n=>Hn()(da(ha)(n))}function Jt(n){for(let e in n)if(n[e]===Jt)return e;throw Error("Could not find renamed property on target object.")}function Ha(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ot(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ct=Jt({__forward_ref__:Jt});function pe(n){return n.__forward_ref__=pe,n.toString=function(){return rt(this())},n}function ve(n){return Be(n)?n():n}function Be(n){return"function"==typeof n&&n.hasOwnProperty(ct)&&n.__forward_ref__===pe}class Qe extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function At(n){return"string"==typeof n?n:null==n?"":String(n)}function Yt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():At(n)}function mn(n,e){const t=e?` in ${e}`:"";throw new Qe("201",`No provider for ${Yt(n)} found${t}`)}function Z(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function $e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function _n(n){return _s(n,oo)||_s(n,Fs)}function _s(n,e){return n.hasOwnProperty(e)?n[e]:null}function Cl(n){return n&&(n.hasOwnProperty(Rr)||n.hasOwnProperty(hc))?n[Rr]:null}const oo=Jt({\u0275prov:Jt}),Rr=Jt({\u0275inj:Jt}),Fs=Jt({ngInjectableDef:Jt}),hc=Jt({ngInjectorDef:Jt});var wn=(()=>((wn=wn||{})[wn.Default=0]="Default",wn[wn.Host=1]="Host",wn[wn.Self=2]="Self",wn[wn.SkipSelf=4]="SkipSelf",wn[wn.Optional=8]="Optional",wn))();let ao;function pa(n){const e=ao;return ao=n,e}function ad(n,e,t){const i=_n(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&wn.Optional?null:void 0!==e?e:void mn(rt(n),"Injector")}function xe(n){return{toString:n}.toString()}var Ge=(()=>((Ge=Ge||{})[Ge.OnPush=0]="OnPush",Ge[Ge.Default=1]="Default",Ge))(),$t=(()=>(($t=$t||{})[$t.Emulated=0]="Emulated",$t[$t.None=2]="None",$t[$t.ShadowDom=3]="ShadowDom",$t))();const ii="undefined"!=typeof globalThis&&globalThis,Nr="undefined"!=typeof window&&window,$r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ys="undefined"!=typeof global&&global,ei=ii||ys||Nr||$r,ld={},Xi=[],Yf=Jt({\u0275cmp:Jt}),xm=Jt({\u0275dir:Jt}),gh=Jt({\u0275pipe:Jt}),pb=Jt({\u0275mod:Jt}),xx=Jt({\u0275loc:Jt}),Al=Jt({\u0275fac:Jt}),mh=Jt({__NG_ELEMENT_ID__:Jt});let Ax=0;function yn(n){return xe(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Xi,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||$t.Emulated,id:"c",styles:n.styles||Xi,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,s=n.features,o=n.pipes;return i.id+=Ax++,i.inputs=yb(n.inputs,t),i.outputs=yb(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(gb):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(mb):null,i})}function gb(n){return Ri(n)||function(n){return n[xm]||null}(n)}function mb(n){return function(n){return n[gh]||null}(n)}const _b={};function ln(n){return xe(()=>{const e={type:n.type,bootstrap:n.bootstrap||Xi,declarations:n.declarations||Xi,imports:n.imports||Xi,exports:n.exports||Xi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(_b[n.id]=n.type),e})}function yb(n,e){if(null==n)return ld;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const kt=yn;function Ls(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ri(n){return n[Yf]||null}function So(n,e){const t=n[pb]||null;if(!t&&!0===e)throw new Error(`Type ${rt(n)} does not have '\u0275mod' property.`);return t}function Vo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Uo(n){return Array.isArray(n)&&!0===n[1]}function Dm(n){return 0!=(8&n.flags)}function hd(n){return 2==(2&n.flags)}function fd(n){return 1==(1&n.flags)}function _a(n){return null!==n.template}function vb(n){return 0!=(512&n[2])}function gc(n,e){return n.hasOwnProperty(Al)?n[Al]:null}class Rm{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ui(){return Eb}function Eb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Px),Nx}function Nx(){const n=st(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===ld)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Px(n,e,t,i){const r=st(n)||function(n,e){return n[Eh]=e}(n,{previous:ld,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new Rm(l&&l.currentValue,e,o===ld),n[i]=e}Ui.ngInherit=!0;const Eh="__ngSimpleChanges__";function st(n){return n[Eh]||null}let zi;function sr(n){return!!n.listen}const cu={createRenderer:(n,e)=>void 0!==zi?zi:"undefined"!=typeof document?document:void 0};function yr(n){for(;Array.isArray(n);)n=n[0];return n}function Sh(n,e){return yr(e[n])}function Ys(n,e){return yr(e[n.index])}function Fm(n,e){return n.data[e]}function pd(n,e){return n[e]}function Bs(n,e){const t=e[n];return Vo(t)?t:t[0]}function Ml(n){return 4==(4&n[2])}function gd(n){return 128==(128&n[2])}function va(n,e){return null==e?null:n[e]}function Lm(n){n[18]=0}function Qf(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Fn={lFrame:du(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Cb(){return Fn.bindingsEnabled}function Bt(){return Fn.lFrame.lView}function hi(){return Fn.lFrame.tView}function Tr(n){return Fn.lFrame.contextLView=n,n[8]}function ts(){let n=km();for(;null!==n&&64===n.type;)n=n.parent;return n}function km(){return Fn.lFrame.currentTNode}function Wa(n,e){const t=Fn.lFrame;t.currentTNode=n,t.isParent=e}function Lr(){return Fn.lFrame.isParent}function us(){Fn.lFrame.isParent=!1}function Ah(){return Fn.isInCheckNoChangesMode}function Jf(n){Fn.isInCheckNoChangesMode=n}function bs(){const n=Fn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ba(){return Fn.lFrame.bindingIndex++}function xo(n){const e=Fn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function md(n,e){const t=Fn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bm(e)}function Bm(n){Fn.lFrame.currentDirectiveIndex=n}function xb(){return Fn.lFrame.currentQueryIndex}function Vm(n){Fn.lFrame.currentQueryIndex=n}function tp(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function _d(n,e,t){if(t&wn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&wn.Host||(r=tp(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Fn.lFrame=Se();return i.currentTNode=e,i.lView=n,!0}function Mh(n){const e=Se(),t=n[1];Fn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Se(){const n=Fn.lFrame,e=null===n?null:n.child;return null===e?du(n):e}function du(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ih(){const n=Fn.lFrame;return Fn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ao=Ih;function oi(){const n=Ih();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ks(){return Fn.lFrame.selectedIndex}function uo(n){Fn.lFrame.selectedIndex=n}function Dr(){const n=Fn.lFrame;return Fm(n.tView,n.selectedIndex)}function np(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=d&&(n.destroyHooks||(n.destroyHooks=[])).push(t,d)}}function ip(n,e,t){qa(n,e,3,t)}function rp(n,e,t,i){(3&n[2])===t&&qa(n,e,t,i)}function Um(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function qa(n,e,t,i){const s=null!=i?i:-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(Yx(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function Yx(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Oh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function sp(n,e,t){const i=sr(n);let r=0;for(;r<t.length;){const s=t[r];if("number"==typeof s){if(0!==s)break;r++;const o=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++r];Hm(o)?i&&n.setProperty(e,o,a):i?n.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function Ab(n){return 3===n||4===n||6===n}function Hm(n){return 64===n.charCodeAt(0)}function Rh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Gm(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Gm(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Tb(n){return-1!==n}function yd(n){return 32767&n}function Ya(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let vd=!0;function op(n){const e=vd;return vd=n,e}let Wm=0;function js(n,e){const t=ap(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,qm(i.data,n),qm(e,null),qm(i.blueprint,null));const r=Nh(n,e),s=n.injectorIndex;if(Tb(r)){const o=yd(r),a=Ya(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function qm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ap(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Nh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const s=r[1],o=s.type;if(i=2===o?s.declTNode:1===o?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function _c(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(mh)&&(i=t[mh]),null==i&&(i=t[mh]=Wm++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Ym(n,e,t){if(t&wn.Optional)return n;mn(e,"NodeInjector")}function Mb(n,e,t,i){if(t&wn.Optional&&void 0===i&&(i=null),0==(t&(wn.Self|wn.Host))){const r=n[9],s=pa(void 0);try{return r?r.get(e,i,t&wn.Optional):ad(e,i,t&wn.Optional)}finally{pa(s)}}return Ym(i,e,t)}function Ph(n,e,t,i=wn.Default,r){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(mh)?n[mh]:void 0;return"number"==typeof e?e>=0?255&e:Ob:e}(t);if("function"==typeof s){if(!_d(e,n,i))return i&wn.Host?Ym(r,t,i):Mb(e,t,i,r);try{const o=s(i);if(null!=o||i&wn.Optional)return o;mn(t)}finally{Ao()}}else if("number"==typeof s){let o=null,a=ap(n,e),l=-1,c=i&wn.Host?e[16][6]:null;for((-1===a||i&wn.SkipSelf)&&(l=-1===a?Nh(n,e):e[a+8],-1!==l&&Fh(i,!1)?(o=e[1],a=yd(l),e=Ya(l,e)):a=-1);-1!==a;){const d=e[1];if(lp(s,a,d.data)){const f=ws(a,e,t,o,i,c);if(f!==Ib)return f}l=e[a+8],-1!==l&&Fh(i,e[1].data[a+8]===c)&&lp(s,a,e)?(o=d,a=yd(l),e=Ya(l,e)):a=-1}}}return Mb(e,t,i,r)}const Ib={};function Ob(){return new Ho(ts(),Bt())}function ws(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],d=bd(a,o,t,null==i?hd(a)&&vd:i!=o&&0!=(3&a.type),r&wn.Host&&s===a);return null!==d?wd(e,o,d,a):Ib}function bd(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,d=s>>20,p=r?a+d:n.directiveEnd;for(let g=i?a:a+d;g<p;g++){const _=o[g];if(g<l&&t===_||g>=l&&_.type===t)return g}if(r){const g=o[l];if(g&&_a(g)&&g.type===t)return l}return null}function wd(n,e,t,i){let r=n[t];const s=e.data;if(function(n){return n instanceof Oh}(r)){const o=r;o.resolving&&function(n,e){throw new Qe("200",`Circular dependency in DI detected for ${n}`)}(Yt(s[t]));const a=op(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?pa(o.injectImpl):null;_d(n,i,wn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Eb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&pa(l),op(a),o.resolving=!1,Ao()}}return r}function lp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Fh(n,e){return!(n&wn.Self||n&wn.Host&&e)}class Ho{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Ph(this._tNode,this._lView,e,void 0,t)}}function Gi(n){return xe(()=>{const e=n.prototype.constructor,t=e[Al]||Es(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Al]||Es(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Es(n){return Be(n)?()=>{const e=Es(ve(n));return e&&e()}:gc(n)}const Sd="__parameters__";function Sa(n,e,t){return xe(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const f=l.hasOwnProperty(Sd)?l[Sd]:Object.defineProperty(l,Sd,{value:[]})[Sd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class zt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=$e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function $o(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),$o(i,e)):e!==n&&e.push(i)}return e}function Wo(n,e){n.forEach(t=>Array.isArray(t)?Wo(t,e):e(t))}function kh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ol(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vc(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function To(n,e,t){let i=Ss(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function e_(n,e){const t=Ss(n,e);if(t>=0)return n[1|t]}function Ss(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const _u={},fp="__NG_DI_FLAG__",wc="ngTempTokenPath",Ec=/\n/gm,Qa="__source",pp=Jt({provide:String,useValue:Jt});let yu;function Ad(n){const e=yu;return yu=n,e}function cA(n,e=wn.Default){if(void 0===yu)throw new Error("inject() must be called from an injection context");return null===yu?ad(n,void 0,e):yu.get(n,e&wn.Optional?null:void 0,e)}function Me(n,e=wn.Default){return(ao||cA)(ve(n),e)}const Sc=Me;function vu(n){const e=[];for(let t=0;t<n.length;t++){const i=ve(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,s=wn.Default;for(let o=0;o<i.length;o++){const a=i[o],l=kb(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(Me(r,s))}else e.push(Me(i))}return e}function Td(n,e){return n[fp]=e,n.prototype[fp]=e,n}function kb(n){return n[fp]}function Xs(n,e,t,i){const r=n[wc];throw e[Qa]&&r.unshift(e[Qa]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=rt(e);if(Array.isArray(e))r=e.map(rt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):rt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Ec,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[wc]=null,n}const Dd=Td(Sa("Inject",n=>({token:n})),-1),qr=Td(Sa("Optional"),8),Za=Td(Sa("SkipSelf"),4);function Vs(n){return n instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}const __="__ngContext__";function Cs(n,e){n[__]=e}function y_(n){const e=function(n){return n[__]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Ap(n){return n.ngOriginalError}function NA(n,...e){n.error(...e)}class Xo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),r=function(n){return n&&n.ngErrorLogger||NA}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Ap(e)):null}_findOriginalError(e){let t=e&&Ap(e);for(;t&&Ap(t);)t=Ap(t);return t||null}}const d0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ei))();function el(n){return n instanceof Function?n():n}var Io=(()=>((Io=Io||{})[Io.Important=1]="Important",Io[Io.DashCase=2]="DashCase",Io))();function S_(n,e){return undefined(n,e)}function Gh(n){const e=n[3];return Uo(e)?e[3]:e}function Pd(n){return m0(n[13])}function x_(n){return m0(n[4])}function m0(n){for(;null!==n&&!Uo(n);)n=n[4];return n}function Fd(n,e,t,i,r){if(null!=i){let s,o=!1;Uo(i)?s=i:Vo(i)&&(o=!0,i=i[0]);const a=yr(i);0===n&&null!==t?null==r?w0(e,t,a):tl(e,t,a,r||null,!0):1===n&&null!==t?tl(e,t,a,r||null,!0):2===n?function(n,e,t){const i=Mp(n,e);i&&function(n,e,t,i){sr(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,i,r){const s=t[7];s!==yr(t)&&Fd(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Ld(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function T_(n,e,t){return sr(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function y0(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Qf(r,-1)),t.splice(i,1)}function D_(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&y0(r,i),e>0&&(n[t-1][4]=i[4]);const s=Ol(n,10+e);!function(n,e){Ld(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function M_(n,e){if(!(256&e[2])){const t=e[11];sr(t)&&t.destroyNode&&Ld(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Dp(n[1],n);for(;e;){let t=null;if(Vo(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Vo(e)&&Dp(e[1],e),e=e[3];null===e&&(e=n),Vo(e)&&Dp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Dp(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Oh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):yr(e[o]),l=i[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)i[s]();e[7]=null}}(n,e),1===e[1].type&&sr(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Uo(e[3])){t!==e[3]&&y0(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function v0(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===$t.None||r===$t.Emulated)return null}return Ys(i,t)}(n,e.parent,t)}function tl(n,e,t,i,r){sr(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function w0(n,e,t){sr(n)?n.appendChild(e,t):e.appendChild(t)}function E0(n,e,t,i,r){null!==i?tl(n,e,t,i,r):w0(n,e,t)}function Mp(n,e){return sr(n)?n.parentNode(e):e.parentNode}function S0(n,e,t){return x0(n,e,t)}let x0=function(n,e,t){return 40&n.type?Ys(n,t):null};function Ip(n,e,t,i){const r=v0(n,i,e),s=e[11],a=S0(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)E0(s,r,t[l],a,!1);else E0(s,r,t,a,!1)}function Su(n,e){if(null!==e){const t=e.type;if(3&t)return Ys(e,n);if(4&t)return Op(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Su(n,i);{const r=n[e.index];return Uo(r)?Op(-1,r):yr(r)}}if(32&t)return S_(e,n)()||yr(n[e.index]);{const i=T0(n,e);return null!==i?Array.isArray(i)?i[0]:Su(Gh(n[16]),i):Su(n,e.next)}}return null}function T0(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Op(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Su(i,r)}return e[7]}function $h(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Cs(yr(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)$h(n,e,t.child,i,r,s,!1),Fd(e,n,r,a,s);else if(32&l){const c=S_(t,i);let d;for(;d=c();)Fd(e,n,r,d,s);Fd(e,n,r,a,s)}else 16&l?R_(n,e,i,t,r,s):Fd(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Ld(n,e,t,i,r,s){$h(t,i,n.firstChild,e,r,s,!1)}function R_(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Fd(e,n,r,l[c],s);else $h(n,e,l,o[3],r,s,!0)}function I0(n,e,t){sr(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function N_(n,e,t){sr(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Wh(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const O0="ng-template";function s1(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==Wh(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Rp(n){return 4===n.type&&n.value!==O0}function R0(n,e,t){return e===(4!==n.type||t?n.value:O0)}function o1(n,e,t){let i=4;const r=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(Ab(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!R0(n,l,t)||""===l&&1===e.length){if(xa(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!s1(n.attrs,c,t)){if(xa(i))return!1;o=!0}continue}const f=a1(8&i?"class":l,r,Rp(n),t);if(-1===f){if(xa(i))return!1;o=!0;continue}if(""!==c){let p;p=f>s?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==Wh(g,c,0)||2&i&&c!==p){if(xa(i))return!1;o=!0}}}}else{if(!o&&!xa(i)&&!xa(l))return!1;if(o&&xa(l))continue;o=!1,i=l|1&i}}return xa(i)||o}function xa(n){return 0==(1&n)}function a1(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function N0(n,e,t=!1){for(let i=0;i<e.length;i++)if(o1(n,e[i],t))return!0;return!1}function d1(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function P0(n,e){return n?":not("+e.trim()+")":e}function h1(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!xa(o)&&(e+=P0(s,r),r=""),i=o,s=s||!xa(i);t++}return""!==r&&(e+=P0(s,r)),e}const An={};function Kt(n){F0(hi(),Bt(),Ks()+n,Ah())}function F0(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&ip(e,s,t)}else{const s=n.preOrderHooks;null!==s&&rp(e,s,0,t)}uo(t)}function nl(n,e){return n<<17|e<<2}function Dn(n){return n>>17&32767}function vr(n){return 2|n}function Ll(n){return(131068&n)>>2}function il(n,e){return-131069&n|e<<2}function F_(n){return 1|n}function G0(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Vm(r),o.contentQueries(2,e[s],s)}}}function Yh(n,e,t,i,r,s,o,a,l,c){const d=e.blueprint.slice();return d[0]=r,d[2]=140|i,Lm(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[16]=2==e.type?n[16]:d,d}function Bd(n,e,t,i,r){let s=n.data[e];if(null===s)s=function(n,e,t,i,r){const s=km(),o=Lr(),l=n.data[e]=function(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),Fn.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function(){const n=Fn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Wa(s,!0),s}function jd(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Kh(n,e,t){Mh(e);try{const i=n.viewQuery;null!==i&&Q_(1,i,t);const r=n.template;null!==r&&$0(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&G0(n,e),n.staticViewQueries&&Q_(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)z1(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,oi()}}function Vd(n,e,t,i){const r=e[2];if(256==(256&r))return;Mh(e);const s=Ah();try{Lm(e),function(n){Fn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&$0(n,e,t,2,i);const o=3==(3&r);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&ip(e,c,null)}else{const c=n.preOrderHooks;null!==c&&rp(e,c,0,null),Um(e,0)}if(function(n){for(let e=Pd(n);null!==e;e=x_(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(1024&r[2])&&Qf(s,1),r[2]|=1024}}}(e),function(n){for(let e=Pd(n);null!==e;e=x_(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];gd(i)&&Vd(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&G0(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&ip(e,c)}else{const c=n.contentHooks;null!==c&&rp(e,c,1),Um(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)uo(~r);else{const s=r,o=t[++i],a=t[++i];md(o,s),a(2,e[s])}}}finally{uo(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)U1(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Q_(2,l,i),!s)if(o){const c=n.viewCheckHooks;null!==c&&ip(e,c)}else{const c=n.viewHooks;null!==c&&rp(e,c,2),Um(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Qf(e[3],-1))}finally{oi()}}function x1(n,e,t,i){const r=e[10],s=!Ah(),o=Ml(e);try{s&&!o&&r.begin&&r.begin(),o&&Kh(n,e,i),Vd(n,e,t,i)}finally{s&&!o&&r.end&&r.end()}}function $0(n,e,t,i,r){const s=Ks(),o=2&i;try{uo(-1),o&&e.length>20&&F0(n,e,20,Ah()),t(i,r)}finally{uo(s)}}function Xh(n,e,t){!Cb()||(function(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||js(t,e),Cs(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=_a(l);c&&L1(e,t,l);const d=wd(e,n,a,t);Cs(d,e),null!==o&&k1(0,a-r,d,l,0,o),c&&(Bs(t.index,e)[8]=d)}}(n,e,t,Ys(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,a=Fn.lFrame.currentDirectiveIndex;try{uo(o);for(let l=i;l<r;l++){const c=n.data[l],d=e[l];Bm(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&tw(c,d)}}finally{uo(-1),Bm(a)}}(n,e,t))}function z_(n,e,t=Ys){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function Lp(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=kp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function kp(n,e,t,i,r,s,o,a,l,c){const d=20+i,f=d+r,p=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:An);return t}(d,f),g="function"==typeof c?c():c;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function Y0(n,e,t,i){const r=sw(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&jp(n).push(i,r.length-1))}function K0(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function Oo(n,e,t,i,r,s,o,a){const l=Ys(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[i])?(ow(n,t,d,i,r),hd(e)&&function(n,e){const t=Bs(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,sr(s)?s.setProperty(l,i,r):Hm(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function H_(n,e,t,i){let r=!1;if(Cb()){const s=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];N0(t,o.selectors,!1)&&(r||(r=[]),_c(js(t,e),n,o.type),_a(o)?(nw(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,G_(t,n.data.length,s.length);for(let d=0;d<s.length;d++){const f=s[d];f.providersResolver&&f.providersResolver(f)}let a=!1,l=!1,c=jd(n,e,s.length,null);for(let d=0;d<s.length;d++){const f=s[d];t.mergedAttrs=Rh(t.mergedAttrs,f.hostAttrs),$_(n,t,e,c,f),F1(c,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const d=r[c],f=d.inputs,p=null===s||Rp(e)?null:B1(f,s);o.push(p),a=K0(f,c,a),l=K0(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Qe("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Rh(t.mergedAttrs,t.attrs),r}function ew(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,o)}}function tw(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function nw(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function F1(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;_a(e)&&(t[""]=n)}}function G_(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function $_(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=gc(r.type)),o=new Oh(s,_a(r),null);n.blueprint[i]=o,t[i]=o,ew(n,e,0,i,jd(n,t,r.hostVars,An),r)}function L1(n,e,t){const i=Ys(e,n),r=Lp(t),s=n[10],o=Bp(n,Yh(n,r,null,t.onPush?64:16,i,e,s,s.createRenderer(i,t),null,null));n[e.index]=o}function sl(n,e,t,i,r,s){const o=Ys(n,e);!function(n,e,t,i,r,s,o){if(null==s)sr(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==o?At(s):o(s,i||"",r);sr(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],o,s,n.value,t,i,r)}function k1(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],f=o[l++];null!==a?i.setInput(t,f,c,d):t[d]=f}}}function B1(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function iw(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function U1(n,e){const t=Bs(e,n);if(gd(t)){const i=t[1];80&t[2]?Vd(i,t,i.template,t[8]):t[5]>0&&q_(t)}}function q_(n){for(let i=Pd(n);null!==i;i=x_(i))for(let r=10;r<i.length;r++){const s=i[r];if(1024&s[2]){const o=s[1];Vd(o,s,o.template,s[8])}else s[5]>0&&q_(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Bs(t[i],n);gd(r)&&r[5]>0&&q_(r)}}function z1(n,e){const t=Bs(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Kh(i,t,t[8])}function Bp(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Y_(n){for(;n;){n[2]|=64;const e=Gh(n);if(vb(n)&&!e)return n;n=e}return null}function X_(n,e,t){const i=e[10];i.begin&&i.begin();try{Vd(n,e,n.template,t)}catch(r){throw J_(e,r),r}finally{i.end&&i.end()}}function rw(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=y_(t),r=i[1];x1(r,i,r.template,t)}}(n[8])}function Q_(n,e,t){Vm(0),e(n,t)}const q1=(()=>Promise.resolve(null))();function sw(n){return n[7]||(n[7]=[])}function jp(n){return n.cleanup||(n.cleanup=[])}function J_(n,e){const t=n[9],i=t?t.get(Xo,null):null;i&&i.handleError(e)}function ow(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function kl(n,e,t){const i=Sh(e,n);!function(n,e,t){sr(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Vp(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=ot(r,a):2==s&&(i=ot(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const zd=new zt("INJECTOR",-1);class Js{get(e,t=_u){if(t===_u){const i=new Error(`NullInjectorError: No provider for ${rt(e)}!`);throw i.name="NullInjectorError",i}return t}}const Cu=new zt("Set Injector scope."),Qh={},K1={};let ty;function aw(){return void 0===ty&&(ty=new Js),ty}function lw(n,e=null,t=null,i){return new iy(n,t,e||aw(),i)}class iy{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&Wo(t,a=>this.processProvider(a,e,t)),Wo([e],a=>this.processInjectorType(a,[],s)),this.records.set(zd,xu(void 0,this));const o=this.records.get(Cu);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:rt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=_u,i=wn.Default){this.assertNotDestroyed();const r=Ad(this),s=pa(void 0);try{if(!(i&wn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof zt}(e)&&_n(e);a=l&&this.injectableDefInScope(l)?xu(ry(e),Qh):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&wn.Self?aw():this.parent).get(e,t=i&wn.Optional&&t===_u?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[wc]=o[wc]||[]).unshift(rt(e)),r)throw o;return Xs(o,e,"R3InjectorError",this.source)}throw o}finally{pa(s),Ad(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(rt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=ve(e)))return!1;let r=Cl(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==i.indexOf(o);if(void 0!==s&&(r=Cl(s)),null==r)return!1;if(null!=r.imports&&!a){let d;i.push(o);try{Wo(r.imports,f=>{this.processInjectorType(f,t,i)&&(void 0===d&&(d=[]),d.push(f))})}finally{}if(void 0!==d)for(let f=0;f<d.length;f++){const{ngModule:p,providers:g}=d[f];Wo(g,_=>this.processProvider(_,p,g||Xi))}}this.injectorDefTypes.add(o);const l=gc(o)||(()=>new o);this.records.set(o,xu(l,Qh));const c=r.providers;if(null!=c&&!a){const d=e;Wo(c,f=>this.processProvider(f,d,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let r=Dc(e=ve(e))?e:ve(e&&e.provide);const s=function(n,e,t){return uw(n)?xu(void 0,n.useValue):xu(cw(n),Qh)}(e);if(Dc(e)||!0!==e.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=xu(void 0,Qh,!0),o.factory=()=>vu(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,s)}hydrate(e,t){return t.value===Qh&&(t.value=K1,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ve(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ry(n){const e=_n(n),t=null!==e?e.factory:gc(n);if(null!==t)return t;if(n instanceof zt)throw new Error(`Token ${rt(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=vc(e,"?");throw new Error(`Can't resolve all parameters for ${rt(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[oo]||n[Fs]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function cw(n,e,t){let i;if(Dc(n)){const r=ve(n);return gc(r)||ry(r)}if(uw(n))i=()=>ve(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...vu(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>Me(ve(n.useExisting));else{const r=ve(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return gc(r)||ry(r);i=()=>new r(...vu(n.deps))}return i}function xu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uw(n){return null!==n&&"object"==typeof n&&pp in n}function Dc(n){return"function"==typeof n}const dw=function(n,e,t){return function(n,e=null,t=null,i){const r=lw(n,e,t,i);return r._resolveInjectorDefTypes(),r}({name:t},e,n,t)};class Vn{static create(e,t){return Array.isArray(e)?dw(e,t,""):dw(e.providers,e.parent,e.name||"")}}function BW(n,e){np(y_(n)[1],ts())}function Mn(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(_a(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=cT(n.inputs),o.declaredInputs=cT(n.declaredInputs),o.outputs=cT(n.outputs);const a=r.hostBindings;a&&zW(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&VW(n,l),c&&UW(n,c),Ha(n.inputs,r.inputs),Ha(n.declaredInputs,r.declaredInputs),Ha(n.outputs,r.outputs),_a(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Mn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Rh(r.hostAttrs,t=Rh(t,r.hostAttrs))}}(i)}function cT(n){return n===ld?{}:n===Xi?[]:n}function VW(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function UW(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function zW(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}Vn.THROW_IF_NOT_FOUND=_u,Vn.NULL=new Js,Vn.\u0275prov=$e({token:Vn,providedIn:"any",factory:()=>Me(zd)}),Vn.__NG_ELEMENT_ID__=-1;let mw=null;function Up(){if(!mw){const n=ei.Symbol;if(n&&n.iterator)mw=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(mw=i)}}}return mw}class jl{constructor(e){this.wrapped=e}static wrap(e){return new jl(e)}static unwrap(e){return jl.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof jl}}function cy(n){return!!uT(n)&&(Array.isArray(n)||!(n instanceof Map)&&Up()in n)}function uT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ic(n,e,t){return n[e]=t}function go(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function $i(n,e,t,i){const r=Bt();return go(r,ba(),e)&&(hi(),sl(Dr(),r,n,e,t,i)),$i}function Ei(n,e,t,i,r,s,o,a){const l=Bt(),c=hi(),d=n+20,f=c.firstCreatePass?function(n,e,t,i,r,s,o,a,l){const c=e.consts,d=Bd(e,n,4,o||null,va(c,a));H_(e,t,d,va(c,l)),np(e,d);const f=d.tViews=kp(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,i,r,s,o):c.data[d];Wa(f,!1);const p=l[11].createComment("");Ip(c,l,p,f),Cs(p,l),Bp(l,l[d]=iw(p,l,p,f)),fd(f)&&Xh(c,l,f),null!=o&&z_(l,f,a)}function Qp(n){return pd(Fn.lFrame.contextLView,20+n)}function De(n,e=wn.Default){const t=Bt();return null===t?Me(n,e):Ph(ts(),t,ve(n),e)}function on(n,e,t){const i=Bt();return go(i,ba(),e)&&Oo(hi(),Dr(),i,n,e,i[11],t,!1),on}function gT(n,e,t,i,r){const o=r?"class":"style";ow(n,t,e.inputs[o],o,i)}function Pt(n,e,t,i){const r=Bt(),s=hi(),o=20+n,a=r[11],l=r[o]=T_(a,e,Fn.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,i,r,s,o){const a=e.consts,c=Bd(e,n,2,r,va(a,s));return H_(e,t,c,va(a,o)),null!==c.attrs&&Vp(c,c.attrs,!1),null!==c.mergedAttrs&&Vp(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,i):s.data[o];Wa(c,!0);const d=c.mergedAttrs;null!==d&&sp(a,l,d);const f=c.classes;null!==f&&N_(a,l,f);const p=c.styles;null!==p&&I0(a,l,p),64!=(64&c.flags)&&Ip(s,r,l,c),0===Fn.lFrame.elementDepthCount&&Cs(l,r),Fn.lFrame.elementDepthCount++,fd(c)&&(Xh(s,r,c),function(n,e,t){if(Dm(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,r)),null!==i&&z_(r,c)}function Ft(){let n=ts();Lr()?us():(n=n.parent,Wa(n,!1));const e=n;Fn.lFrame.elementDepthCount--;const t=hi();t.firstCreatePass&&(np(t,n),Dm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&gT(t,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&gT(t,e,Bt(),e.stylesWithoutHost,!1)}function xi(n,e,t,i){Pt(n,e,t,i),Ft()}function Vl(){return Bt()}function dy(n){return!!n&&"function"==typeof n.then}function WF(n){return!!n&&"function"==typeof n.subscribe}const vw=WF;function Bn(n,e,t,i){const r=Bt(),s=hi(),o=ts();return function(n,e,t,i,r,s,o,a){const l=fd(i),d=n.firstCreatePass&&jp(n),f=e[8],p=sw(e);let g=!0;if(3&i.type||a){const b=Ys(i,e),H=a?a(b):b,z=p.length,he=a?Ie=>a(yr(Ie[i.index])):i.index;if(sr(t)){let Ie=null;if(!a&&l&&(Ie=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==Ie)(Ie.__ngLastListenerFn__||Ie).__ngNextListenerFn__=s,Ie.__ngLastListenerFn__=s,g=!1;else{s=mT(i,e,f,s,!1);const Fe=t.listen(H,r,s);p.push(s,Fe),d&&d.push(r,he,z,z+1)}}else s=mT(i,e,f,s,!0),H.addEventListener(r,s,o),p.push(s),d&&d.push(r,he,z,o)}else s=mT(i,e,f,s,!1);const _=i.outputs;let C;if(g&&null!==_&&(C=_[r])){const b=C.length;if(b)for(let H=0;H<b;H+=2){const We=e[C[H]][C[H+1]].subscribe(s),dt=p.length;p.push(s,We),d&&d.push(r,i.index,dt,-(dt+1))}}}(s,r,r[11],o,n,e,!!t,i),Bn}function YF(n,e,t,i){try{return!1!==t(i)}catch(r){return J_(n,r),!1}}function mT(n,e,t,i,r){return function s(o){if(o===Function)return i;const a=2&n.flags?Bs(n.index,e):e;0==(32&e[2])&&Y_(a);let l=YF(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=YF(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Si(n=1){return function(n){return(Fn.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Fn.lFrame.contextLView))[8]}(n)}function E7(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?N0(n,s,!0):d1(i,s))return r}else t=r}return t}function iL(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Dn(s):Ll(s),l=!1;for(;0!==a&&(!1===l||o);){const d=n[a+1];x7(n[a],e)&&(l=!0,n[a+1]=i?F_(d):vr(d)),a=i?Dn(d):Ll(d)}l&&(n[t+1]=i?vr(s):F_(s))}function x7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ss(n,e)>=0}const As={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rL(n){return n.substring(As.key,As.keyEnd)}function sL(n,e){const t=As.textEnd;return t===e?-1:(e=As.keyEnd=function(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,As.key=e,t),tg(n,e,t))}function tg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ai(n,e){return function(n,e,t,i){const r=Bt(),s=hi(),o=xo(2);s.firstUpdatePass&&dL(s,n,o,i),e!==An&&go(r,o,e)&&fL(s,s.data[Ks()],r,r[11],n,r[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=rt(Vs(n)))),n}(e,t),i,o)}(n,e,null,!0),Ai}function Oc(n){!function(n,e,t,i){const r=hi(),s=xo(2);r.firstUpdatePass&&dL(r,null,s,i);const o=Bt();if(t!==An&&go(o,s,t)){const a=r.data[Ks()];if(gL(a,i)&&!uL(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ot(l,t||"")),gT(r,a,o,t,i)}else!function(n,e,t,i,r,s,o,a){r===An&&(r=Xi);let l=0,c=0,d=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==d||null!==f;){const p=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let C,_=null;d===f?(l+=2,c+=2,p!==g&&(_=f,C=g)):null===f||null!==d&&d<f?(l+=2,_=d):(c+=2,_=f,C=g),null!==_&&fL(n,e,t,i,_,C,o,a),d=l<r.length?r[l]:null,f=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(n,e,t){if(null==t||""===t)return Xi;const i=[],r=Vs(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(To,Rc,n,!0)}function Rc(n,e){for(let t=function(n){return function(n){As.key=0,As.keyEnd=0,As.value=0,As.valueEnd=0,As.textEnd=n.length}(n),sL(n,tg(n,0,As.textEnd))}(e);t>=0;t=sL(e,t))To(n,rL(e),!0)}function uL(n,e){return e>=n.expandoStartIndex}function dL(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Ks()],o=uL(n,t);gL(s,i)&&null===e&&!o&&(e=!1),e=function(n,e,t,i){const r=function(n){const e=Fn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=fy(t=yT(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=yT(r,n,e,t,i),null===s){let l=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ll(i))return n[Dn(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=yT(null,n,e,l[1],i),l=fy(l,e.attrs,i),function(n,e,t,i){n[Dn(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=fy(i,n[s].hostAttrs,t);return fy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Dn(o),l=Ll(o);n[i]=t;let d,c=!1;if(Array.isArray(t)){const f=t;d=f[1],(null===d||Ss(f,d)>0)&&(c=!0)}else d=t;if(r)if(0!==l){const p=Dn(n[a+1]);n[i+1]=nl(p,a),0!==p&&(n[p+1]=il(n[p+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=nl(a,0),0!==a&&(n[a+1]=il(n[a+1],i)),a=i;else n[i+1]=nl(l,0),0===a?a=i:n[l+1]=il(n[l+1],i),l=i;c&&(n[i+1]=vr(n[i+1])),iL(n,d,i,!0),iL(n,d,i,!1),function(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ss(s,e)>=0&&(t[i+1]=F_(t[i+1]))}(e,d,n,i,s),o=nl(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function yT(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=fy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function fy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),To(n,o,!!t||e[++s]))}return void 0===n?null:n}function fL(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Ew(function(n){return 1==(1&n)}(c)?pL(l,e,t,r,Ll(c),o):void 0)||(Ew(s)||function(n){return 2==(2&n)}(c)&&(s=pL(l,null,t,r,a,o)),function(n,e,t,i,r){const s=sr(n);if(e)r?s?n.addClass(t,i):t.classList.add(i):s?n.removeClass(t,i):t.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Io.DashCase;if(null==r)s?n.removeStyle(t,i,o):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),o|=Io.Important),s?n.setStyle(t,i,r,o):t.style.setProperty(i,r,a?"important":"")}}}(i,o,Sh(Ks(),t),r,s))}function pL(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),d=c?l[1]:l,f=null===d;let p=t[r+1];p===An&&(p=f?Xi:void 0);let g=f?e_(p,i):d===i?p:void 0;if(c&&!Ew(g)&&(g=e_(l,i)),Ew(g)&&(a=g,o))return a;const _=n[r+1];r=o?Dn(_):Ll(_)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=e_(l,i))}return a}function Ew(n){return void 0!==n}function gL(n,e){return 0!=(n.flags&(e?16:32))}function Ti(n,e=""){const t=Bt(),i=hi(),r=n+20,s=i.firstCreatePass?Bd(i,r,1,e,null):i.data[r],o=t[r]=function(n,e){return sr(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Ip(i,t,o,s),Wa(s,!1)}function Ts(n){return Nc("",n,""),Ts}function Nc(n,e,t){const i=Bt(),r=function(n,e,t,i){return go(n,ba(),t)?e+At(t)+i:An}(i,n,e,t);return r!==An&&kl(i,Ks(),r),Nc}function Au(n,e,t){const i=Bt();return go(i,ba(),e)&&Oo(hi(),Dr(),i,n,e,i[11],t,!0),Au}const Jh=void 0;var s9=["en",[["a","p"],["AM","PM"],Jh],[["AM","PM"],Jh,Jh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jh,"{1} 'at' {0}",Jh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let ng={};function NL(n){return n in ng||(ng[n]=ei.ng&&ei.ng.common&&ei.ng.common.locales&&ei.ng.common.locales[n]),ng[n]}var cn=(()=>((cn=cn||{})[cn.LocaleId=0]="LocaleId",cn[cn.DayPeriodsFormat=1]="DayPeriodsFormat",cn[cn.DayPeriodsStandalone=2]="DayPeriodsStandalone",cn[cn.DaysFormat=3]="DaysFormat",cn[cn.DaysStandalone=4]="DaysStandalone",cn[cn.MonthsFormat=5]="MonthsFormat",cn[cn.MonthsStandalone=6]="MonthsStandalone",cn[cn.Eras=7]="Eras",cn[cn.FirstDayOfWeek=8]="FirstDayOfWeek",cn[cn.WeekendRange=9]="WeekendRange",cn[cn.DateFormat=10]="DateFormat",cn[cn.TimeFormat=11]="TimeFormat",cn[cn.DateTimeFormat=12]="DateTimeFormat",cn[cn.NumberSymbols=13]="NumberSymbols",cn[cn.NumberFormats=14]="NumberFormats",cn[cn.CurrencyCode=15]="CurrencyCode",cn[cn.CurrencySymbol=16]="CurrencySymbol",cn[cn.CurrencyName=17]="CurrencyName",cn[cn.Currencies=18]="Currencies",cn[cn.Directionality=19]="Directionality",cn[cn.PluralCase=20]="PluralCase",cn[cn.ExtraData=21]="ExtraData",cn))();const Cw="en-US";let PL=Cw;function bT(n){Z(n,"Expected localeId to be defined"),"string"==typeof n&&(PL=n.toLowerCase().replace(/_/g,"-"))}function ST(n,e,t,i,r){if(n=ve(n),Array.isArray(n))for(let s=0;s<n.length;s++)ST(n[s],e,t,i,r);else{const s=hi(),o=Bt();let a=Dc(n)?n:ve(n.provide),l=cw(n);const c=ts(),d=1048575&c.providerIndexes,f=c.directiveStart,p=c.providerIndexes>>20;if(Dc(n)||!n.multi){const g=new Oh(l,r,De),_=xT(a,e,r?d:d+p,f);-1===_?(_c(js(c,o),s,a),CT(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),o.push(g)):(t[_]=g,o[_]=g)}else{const g=xT(a,e,d+p,f),_=xT(a,e,d,d+p),C=g>=0&&t[g],b=_>=0&&t[_];if(r&&!b||!r&&!C){_c(js(c,o),s,a);const H=function(n,e,t,i,r){const s=new Oh(n,t,De);return s.multi=[],s.index=e,s.componentProviders=0,rk(s,r,i&&!t),s}(r?nq:tq,t.length,r,i,l);!r&&b&&(t[_].providerFactory=H),CT(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(H),o.push(H)}else CT(s,n,g>-1?g:_,rk(t[r?_:g],l,!r&&i));!r&&i&&b&&t[_].componentProviders++}}}function CT(n,e,t,i){const r=Dc(e);if(r||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const l=a.indexOf(t);-1===l?a.push(t,[i,o]):a[l+1].push(i,o)}else a.push(t,o)}}}function rk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xT(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function tq(n,e,t,i){return AT(this.multi,[])}function nq(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=wd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),AT(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],AT(r,s);return s}function AT(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Yn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=hi();if(i.firstCreatePass){const r=_a(n);ST(t,i.data,i.blueprint,r,!0),ST(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class sk{}const ak="ngComponent";class sq{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${rt(n)}. Did you add it to @NgModule.entryComponents?`);return e[ak]=n,e}(e)}}class ll{}function Mw(...n){}function rg(n,e){return new En(Ys(n,e))}ll.NULL=new sq;const lq=function(){return rg(ts(),Bt())};let En=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=lq,n})();function lk(n){return n instanceof En?n.nativeElement:n}class ef{}let DT=(()=>{class n{}return n.\u0275prov=$e({token:n,providedIn:"root",factory:()=>null}),n})();class Du{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ck=new Du("12.2.5");class uk{constructor(){}supports(e){return cy(e)}create(e){return new pq(e)}}const fq=(n,e)=>e;class pq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fq}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<hk(i,r,s)?t:i,a=hk(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const g=p<s.length?s[p]:s[p]=0,_=g+p;d<=_&&_<c&&(s[p]=g+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!cy(e))throw new Error(`Error trying to diff '${rt(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Up()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new gq(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new dk),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dk),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class gq{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class dk{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new mq,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hk(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class fk{constructor(){}supports(e){return e instanceof Map||uT(e)}create(){return new _q}}class _q{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||uT(e)))throw new Error(`Error trying to diff '${rt(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new yq(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class yq{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pk(){return new sg([new uk])}let sg=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||pk()),deps:[[n,new Za,new qr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=$e({token:n,providedIn:"root",factory:pk}),n})();function gk(){return new og([new fk])}let og=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||gk()),deps:[[n,new Za,new qr]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=$e({token:n,providedIn:"root",factory:gk}),n})();function Iw(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(yr(s)),Uo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Iw(l[1],l,c,i)}const o=t.type;if(8&o)Iw(n,e,t.child,i);else if(32&o){const a=S_(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=T0(e,t);if(Array.isArray(a))i.push(...a);else{const l=Gh(e[16]);Iw(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class yy{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Iw(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Uo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(D_(e,i),Ol(t,i))}this._attachedToViewContainer=!1}M_(this._lView[1],this._lView)}onDestroy(e){Y0(this._lView[1],this._lView,null,e)}markForCheck(){Y_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){X_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){Jf(!0);try{X_(n,e,t)}finally{Jf(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){Ld(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class bq extends yy{constructor(e){super(e),this._view=e}detectChanges(){rw(this._view)}checkNoChanges(){!function(n){Jf(!0);try{rw(n)}finally{Jf(!1)}}(this._view)}get context(){return null}}const Eq=function(n){return function(n,e,t){if(hd(n)&&!t){const i=Bs(n.index,e);return new yy(i,i)}return 47&n.type?new yy(e[16],e):null}(ts(),Bt(),16==(16&n))};let is=(()=>{class n{}return n.__NG_ELEMENT_ID__=Eq,n})();const xq=[new fk],Tq=new sg([new uk]),Dq=new og(xq),Iq=function(){return Ow(ts(),Bt())};let No=(()=>{class n{}return n.__NG_ELEMENT_ID__=Iq,n})();const Oq=No,Rq=class extends Oq{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Yh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(t)),Kh(t,i,e),new yy(i)}};function Ow(n,e){return 4&n.type?new Rq(e,n,rg(n,e)):null}class Pc{}const Fq=function(){return vk(ts(),Bt())};let Ds=(()=>{class n{}return n.__NG_ELEMENT_ID__=Fq,n})();const kq=Ds,_k=class extends kq{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return rg(this._hostTNode,this._hostLView)}get injector(){return new Ho(this._hostTNode,this._hostLView)}get parentInjector(){const e=Nh(this._hostTNode,this._hostLView);if(Tb(e)){const t=Ya(e,this._hostLView),i=yd(e);return new Ho(t[1].data[i+8],t)}return new Ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=yk(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,s){const o=i||this.parentInjector;if(!s&&null==e.ngModule&&o){const l=o.get(Pc,null);l&&(s=l)}const a=e.create(o,r,void 0,s);return this.insert(a.hostView,t),a}insert(e,t){const i=e._lView,r=i[1];if(function(n){return Uo(n[3])}(i)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const f=i[3],p=new _k(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],kh(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,o,s);const a=Op(s,o),l=i[11],c=Mp(l,o[7]);return null!==c&&function(n,e,t,i,r,s){i[0]=r,i[6]=e,Ld(n,i,t,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),kh(MT(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=yk(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=D_(this._lContainer,t);i&&(Ol(MT(this._lContainer),t),M_(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=D_(this._lContainer,t);return i&&null!=Ol(MT(this._lContainer),t)?new yy(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function yk(n){return n[8]}function MT(n){return n[8]||(n[8]=[])}function vk(n,e){let t;const i=e[n.index];if(Uo(i))t=i;else{let r;if(8&n.type)r=yr(i);else{const s=e[11];r=s.createComment("");const o=Ys(n,e);tl(s,Mp(s,o),r,function(n,e){return sr(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=iw(i,e,r,n),Bp(e,t)}return new _k(t,n,e)}const ug={};class jk extends ll{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ri(e);return new Uk(t,this.ngModule)}}function Vk(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const NY=new zt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>d0});class Uk extends sk{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(h1).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Vk(this.componentDef.inputs)}get outputs(){return Vk(this.componentDef.outputs)}create(e,t,i,r){const s=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const s=n.get(t,ug,r);return s!==ug||i===ug?s:e.get(t,i,r)}}}(e,r.injector):e,o=s.get(ef,cu),a=s.get(DT,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=i?function(n,e,t){if(sr(n))return n.selectRootElement(e,t===$t.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):T_(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),f=this.componentDef.onPush?576:528,p=function(n,e){return{components:[],scheduler:n||d0,clean:q1,playerHandler:e||null,flags:0}}(),g=kp(0,null,null,1,0,null,null,null,null,null),_=Yh(null,g,p,f,null,null,o,l,a,s);let C,b;Mh(_);try{const H=function(n,e,t,i,r,s){const o=t[1];t[20]=n;const l=Bd(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Vp(l,c,!0),null!==n&&(sp(r,n,c),null!==l.classes&&N_(r,n,l.classes),null!==l.styles&&I0(r,n,l.styles)));const d=i.createRenderer(n,e),f=Yh(t,Lp(e),null,e.onPush?64:16,t[20],l,i,d,s||null,null);return o.firstCreatePass&&(_c(js(l,t),o,e.type),nw(o,l),G_(l,t.length,1)),Bp(t,f),t[20]=f}(d,this.componentDef,_,o,l);if(d)if(i)sp(l,d,["ng-version",ck.full]);else{const{attrs:z,classes:he}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!xa(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);z&&sp(l,d,z),he&&he.length>0&&N_(l,d,he.join(" "))}if(b=Fm(g,20),void 0!==t){const z=b.projection=[];for(let he=0;he<this.ngContentSelectors.length;he++){const Ie=t[he];z.push(null!=Ie?Array.from(Ie):null)}}C=function(n,e,t,i,r){const s=t[1],o=function(n,e,t){const i=ts();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),$_(n,i,e,jd(n,e,1,null),t));const r=wd(e,n,i.directiveStart,i);Cs(r,e);const s=Ys(i,e);return s&&Cs(s,e),r}(s,t,e);if(i.components.push(o),n[8]=o,r&&r.forEach(l=>l(o,e)),e.contentQueries){const l=ts();e.contentQueries(1,o,l.directiveStart)}const a=ts();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(uo(a.index),ew(t[1],a,0,a.directiveStart,a.directiveEnd,e),tw(e,o)),o}(H,this.componentDef,_,p,[BW]),Kh(g,_,null)}finally{oi()}return new LY(this.componentType,C,rg(b,_),_,b)}}class LY extends class{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new bq(r),this.componentType=e}get injector(){return new Ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const dg=new Map;class jY extends Pc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jk(this);const i=So(e),r=function(n){return n[xx]||null}(e);r&&bT(r),this._bootstrapComponents=el(i.bootstrap),this._r3Injector=lw(e,t,[{provide:Pc,useValue:this},{provide:ll,useValue:this.componentFactoryResolver}],rt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Vn.THROW_IF_NOT_FOUND,i=wn.Default){return e===Vn||e===Pc||e===zd?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zT extends class{}{constructor(e){super(),this.moduleType=e,null!==So(e)&&function(n){const e=new Set;!function t(i){const r=So(i,!0),s=r.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${rt(e)} vs ${rt(e.name)}`)}(s,dg.get(s),i),dg.set(s,i));const o=el(r.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new jY(this.moduleType,e)}}function Lw(n,e,t){const i=bs()+n,r=Bt();return r[i]===An?Ic(r,i,t?e.call(t):e()):function(n,e){return n[e]}(r,i)}function $k(n,e,t,i,r,s){const o=e+t;return go(n,o,r)?Ic(n,o+1,s?i.call(s,r):i(r)):function(n,e){const t=n[e];return t===An?void 0:t}(n,o+1)}function dl(n,e){const t=hi();let i;const r=n+20;t.firstCreatePass?(i=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}throw new Qe("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=gc(i.type)),o=pa(De);try{const a=op(!1),l=s();return op(a),function(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Bt(),r,l),l}finally{pa(o)}}function hl(n,e,t){const i=n+20,r=Bt(),s=pd(r,i);return function(n,e){jl.isWrapped(e)&&(e=jl.unwrap(e),n[Fn.lFrame.bindingIndex]=An);return e}(r,function(n,e){return n[1].data[e].pure}(r,i)?$k(r,bs(),e,s.transform,t,s):s.transform(t))}function HT(n){return e=>{setTimeout(n,void 0,e)}}const hn=class extends ee{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var r,s,o;let a=e,l=t||(()=>null),c=i;if(e&&"object"==typeof e){const f=e;a=null===(r=f.next)||void 0===r?void 0:r.bind(f),l=null===(s=f.error)||void 0===s?void 0:s.bind(f),c=null===(o=f.complete)||void 0===o?void 0:o.bind(f)}this.__isAsync&&(l=HT(l),a&&(a=HT(a)),c&&(c=HT(c)));const d=super.subscribe({next:a,error:l,complete:c});return e instanceof x&&e.add(d),d}};function eK(){return this._results[Up()]()}class rf{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Up(),i=rf.prototype;i[t]||(i[t]=eK)}get changes(){return this._changes||(this._changes=new hn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=$o(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class GT{constructor(e){this.queryList=e,this.matches=null}clone(){return new GT(this.queryList)}setDirty(){this.queryList.setDirty()}}class $T{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new $T(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==e2(e,t).matches&&this.queries[t].setDirty()}}class Xk{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class WT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new WT(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new qT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,iK(t,s)),this.matchTNodeWithReadOption(e,t,bd(t,e,s,!1,!1))}else i===No?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bd(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===En||r===Ds||r===No&&4&t.type)this.addMatch(t.index,-2);else{const s=bd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function iK(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function sK(n,e,t,i){return-1===t?function(n,e){return 11&n.type?rg(n,e):4&n.type?Ow(n,e):null}(e,n):-2===t?function(n,e,t){return t===En?rg(e,n):t===No?Ow(e,n):t===Ds?vk(e,n):void 0}(n,e,i):wd(n,n[1],t,e)}function Qk(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:sK(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function KT(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=Qk(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let f=10;f<d.length;f++){const p=d[f];p[17]===p[3]&&KT(p[1],p,c,i)}if(null!==d[9]){const f=d[9];for(let p=0;p<f.length;p++){const g=f[p];KT(g[1],g,c,i)}}}}}return i}function fi(n){const e=Bt(),t=hi(),i=xb();Vm(i+1);const r=e2(t,i);if(n.dirty&&Ml(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?KT(t,e,i,[]):Qk(t,e,r,i);n.reset(s,lk),n.notifyOnChanges()}return!0}return!1}function Mr(n,e,t){const i=hi();i.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new WT),n.queries.track(new qT(e,t))}(i,new Xk(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function(n,e,t){const i=new rf(4==(4&t));Y0(n,e,i,i.destroy),null===e[19]&&(e[19]=new $T),e[19].queries.push(new GT(i))}(i,Bt(),e)}function pi(){return function(n,e){return n[19].queries[e].queryList}(Bt(),xb())}function e2(n,e){return n.queries.getByIndex(e)}const sf=new zt("Application Initializer");let fg=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Mw,this.reject=Mw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(dy(s))t.push(s);else if(vw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Me(sf,8))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const Iy=new zt("AppId"),LK={provide:Iy,useFactory:function(){return`${tD()}${tD()}${tD()}`},deps:[]};function tD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const v2=new zt("Platform Initializer"),Fc=new zt("Platform ID"),jw=new zt("appBootstrapListener");let Vw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const Mu=new zt("LocaleId"),b2=new zt("DefaultCurrencyCode");class BK{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const nD=function(n){return new zT(n)},jK=nD,VK=function(n){return Promise.resolve(nD(n))},w2=function(n){const e=nD(n),i=el(So(n).declarations).reduce((r,s)=>{const o=Ri(s);return o&&r.push(new Uk(o)),r},[]);return new BK(e,i)},UK=w2,zK=function(n){return Promise.resolve(w2(n))};let of=(()=>{class n{constructor(){this.compileModuleSync=jK,this.compileModuleAsync=VK,this.compileModuleAndAllComponentsSync=UK,this.compileModuleAndAllComponentsAsync=zK}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const E2=new zt("compilerOptions"),GK=(()=>Promise.resolve(0))();function iD(n){"undefined"==typeof Zone?GK.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class vn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hn(!1),this.onMicrotaskEmpty=new hn(!1),this.onStable=new hn(!1),this.onError=new hn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=ei.requestAnimationFrame,e=ei.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ei,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,sD(n),n.isCheckStableRunning=!0,rD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),sD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return S2(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),C2(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return S2(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),C2(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,sD(n),rD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,WK,Mw,Mw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const WK={};function rD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function S2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function C2(n){n._nesting--,rD(n)}class KK{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hn,this.onMicrotaskEmpty=new hn,this.onStable=new hn,this.onError=new hn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let oD=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vn.assertNotInAngularZone(),iD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())iD(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Me(vn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),x2=(()=>{class n{constructor(){this._applications=new Map,aD.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return aD.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class XK{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let aD=new XK,A2=!0,T2=!1;function na(){return T2=!0,A2}let Wl;const D2=new zt("AllowMultipleToken");function M2(n,e,t=[]){const i=`Platform: ${e}`,r=new zt(i);return(s=[])=>{let o=cD();if(!o||o.injector.get(D2,!1))if(n)n(t.concat(s).concat({provide:r,useValue:!0}));else{const a=t.concat(s).concat({provide:r,useValue:!0},{provide:Cu,useValue:"platform"});!function(n){if(Wl&&!Wl.destroyed&&!Wl.injector.get(D2,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Wl=n.get(I2);const e=n.get(v2,null);e&&e.forEach(t=>t())}(Vn.create({providers:a,name:i}))}return function(n){const e=cD();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function cD(){return Wl&&!Wl.destroyed?Wl:null}let I2=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new KK:("zone.js"===n?void 0:n)||new vn({enableLongStackTrace:na(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:vn,useValue:a}];return a.run(()=>{const c=Vn.create({providers:l,parent:this.injector,name:t.moduleType.name}),d=t.create(c),f=d.injector.get(Xo,null);if(!f)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const p=a.onError.subscribe({next:g=>{f.handleError(g)}});d.onDestroy(()=>{uD(this._modules,d),p.unsubscribe()})}),function(n,e,t){try{const i=t();return dy(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(f,a,()=>{const p=d.injector.get(fg);return p.runInitializers(),p.donePromise.then(()=>(bT(d.injector.get(Mu,Cw)||Cw),this._moduleDoBootstrap(d),d))})})}bootstrapModule(t,i=[]){const r=O2({},i);return function(n,e,t){const i=new zT(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Gd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${rt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Me(Vn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();function O2(n,e){return Array.isArray(e)?e.reduce(O2,n):Object.assign(Object.assign({},n),e)}let Gd=(()=>{class n{constructor(t,i,r,s,o){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new F(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new F(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{vn.assertNotInAngularZone(),iD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{vn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),f.unsubscribe()}});this.isStable=Rn(a,l.pipe(ms()))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof sk?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const s=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(Pc),a=r.create(Vn.NULL,[],i||r.selector,s),l=a.location.nativeElement,c=a.injector.get(oD,null),d=c&&a.injector.get(x2);return c&&d&&d.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),uD(this.components,a),d&&d.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;uD(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(jw,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Me(vn),Me(Vn),Me(Xo),Me(ll),Me(fg))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();function uD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const SX=M2(null,"core",[{provide:Fc,useValue:"unknown"},{provide:I2,deps:[Vn]},{provide:x2,deps:[]},{provide:Vw,deps:[]}]),DX=[{provide:Gd,useClass:Gd,deps:[vn,Vn,Xo,ll,fg]},{provide:NY,deps:[vn],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:fg,useClass:fg,deps:[[new qr,sf]]},{provide:of,useClass:of,deps:[]},LK,{provide:sg,useFactory:function(){return Tq},deps:[]},{provide:og,useFactory:function(){return Dq},deps:[]},{provide:Mu,useFactory:function(n){return bT(n=n||"undefined"!=typeof $localize&&$localize.locale||Cw),n},deps:[[new Dd(Mu),new qr,new Za]]},{provide:b2,useValue:"USD"}];let IX=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Me(Gd))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:DX}),n})(),Zw=null;function Lc(){return Zw}const dn=new zt("DocumentToken");var ds=(()=>((ds=ds||{})[ds.Zero=0]="Zero",ds[ds.One=1]="One",ds[ds.Two=2]="Two",ds[ds.Few=3]="Few",ds[ds.Many=4]="Many",ds[ds.Other=5]="Other",ds))();const zQ=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=NL(e);if(t)return t;const i=e.split("-")[0];if(t=NL(i),t)return t;if("en"===i)return s9;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[cn.PluralCase]};class lE{}let _Z=(()=>{class n extends lE{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(zQ(i||this.locale)(t)){case ds.Zero:return"zero";case ds.One:return"one";case ds.Two:return"two";case ds.Few:return"few";case ds.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(Me(Mu))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();function v3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class vZ{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wd=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,s,o)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new vZ(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new b3(r,a);i.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new b3(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,s=this._viewContainer.length;r<s;r++){const o=this._viewContainer.get(r);o.context.index=r,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(De(Ds),De(No),De(sg))},n.\u0275dir=kt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class b3{constructor(e,t){this.record=e,this.view=t}}let Nu=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new wZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){w3("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){w3("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(De(Ds),De(No))},n.\u0275dir=kt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wZ{constructor(){this.$implicit=null,this.ngIf=null}}function w3(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${rt(e)}'.`)}class xZ{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class AZ{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const TZ=new AZ,DZ=new xZ;let uE=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(dy(t))return TZ;if(WF(t))return DZ;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${rt(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(De(is,16))},n.\u0275pipe=Ls({name:"async",type:n,pure:!1}),n})(),Kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[{provide:lE,useClass:_Z}]}),n})();const T3="browser";function uf(n){return n===T3}class I3{}class jD extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){Zw||(Zw=n)}(new jD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ky=ky||document.querySelector("base"),ky?ky.getAttribute("href"):null);return null==t?null:function(n){dE=dE||document.createElement("a"),dE.setAttribute("href",n);const e=dE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ky=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return v3(document.cookie,e)}}let dE,ky=null;const O3=new zt("TRANSITION_ID"),JZ=[{provide:sf,useFactory:function(n,e,t){return()=>{t.get(fg).donePromise.then(()=>{const i=Lc(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[O3,dn,Vn],multi:!0}];class VD{static init(){!function(n){aD=n}(new VD)}addToWindow(e){ei.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},ei.getAllAngularTestabilities=()=>e.getAllTestabilities(),ei.getAllAngularRootElements=()=>e.getAllRootElements(),ei.frameworkStabilizers||(ei.frameworkStabilizers=[]),ei.frameworkStabilizers.push(i=>{const r=ei.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Lc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let eJ=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const By=new zt("EventManagerPlugins");let fE=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Me(By),Me(vn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class UD{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Lc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let N3=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),jy=(()=>{class n extends N3{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(P3),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(P3))}}return n.\u0275fac=function(t){return new(t||n)(Me(dn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();function P3(n){Lc().remove(n)}const zD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},HD=/%COMP%/g;function pE(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?pE(n,r,t):(r=r.replace(HD,n),t.push(r))}return t}function k3(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gE=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new GD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case $t.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new gJ(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case $t.ShadowDom:return new mJ(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=pE(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Me(fE),Me(jy),Me(Iy))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class GD{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(zD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=zD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=zD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Io.DashCase|Io.Important)?e.style.setProperty(t,i,r&Io.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Io.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,k3(i)):this.eventManager.addEventListener(e,t,k3(i))}}class gJ extends GD{constructor(e,t,i,r){super(e),this.component=i;const s=pE(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(HD,n)}(r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(HD,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class mJ extends GD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=pE(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _J=(()=>{class n extends UD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Me(dn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const V3=["alt","control","meta","shift"],CJ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xJ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let AJ=(()=>{class n extends UD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="";if(V3.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&U3.hasOwnProperty(e)&&(e=U3[e]))}return CJ[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),V3.forEach(s=>{s!=r&&xJ[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(Me(dn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const PJ=M2(SX,"browser",[{provide:Fc,useValue:T3},{provide:v2,useValue:function(){jD.makeCurrent(),VD.init()},multi:!0},{provide:dn,useFactory:function(){return function(n){zi=n}(document),document},deps:[]}]),FJ=[[],{provide:Cu,useValue:"root"},{provide:Xo,useFactory:function(){return new Xo},deps:[]},{provide:By,useClass:_J,multi:!0,deps:[dn,vn,Fc]},{provide:By,useClass:AJ,multi:!0,deps:[dn]},[],{provide:gE,useClass:gE,deps:[fE,jy,Iy]},{provide:ef,useExisting:gE},{provide:N3,useExisting:jy},{provide:jy,useClass:jy,deps:[dn]},{provide:oD,useClass:oD,deps:[vn]},{provide:fE,useClass:fE,deps:[By,vn]},{provide:I3,useClass:eJ,deps:[]},[]];let qD=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Iy,useValue:t.appId},{provide:O3,useExisting:Iy},JZ]}}}return n.\u0275fac=function(t){return new(t||n)(Me(n,12))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:FJ,imports:[Kr,IX]}),n})();"undefined"!=typeof window&&window;class HJ extends x{constructor(e,t){super()}schedule(e,t=0){return this}}class mE extends HJ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let H3=(()=>{class n{constructor(t,i=n.now){this.SchedulerAction=t,this.now=i}schedule(t,i=0,r){return new this.SchedulerAction(this,t).schedule(r,i)}}return n.now=()=>Date.now(),n})();class Ql extends H3{constructor(e,t=H3.now){super(e,()=>Ql.delegate&&Ql.delegate!==this?Ql.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return Ql.delegate&&Ql.delegate!==this?Ql.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const WJ=new class extends Ql{}(class extends mE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}),kc=new F(n=>n.complete());function Vy(n){return n?function(n){return new F(e=>n.schedule(()=>e.complete()))}(n):kc}function nn(...n){let e=n[n.length-1];return Te(e)?(n.pop(),je(n,e)):Tn(n)}function yg(n,e){return new F(e?t=>e.schedule(YJ,0,{error:n,subscriber:t}):t=>t.error(n))}function YJ({error:n,subscriber:e}){e.error(n)}class ra{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return nn(this.value);case"E":return yg(this.error);case"C":return Vy()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new ra("N",e):ra.undefinedValueNotification}static createError(e){return new ra("E",void 0,e)}static createComplete(){return ra.completeNotification}}ra.completeNotification=new ra("C"),ra.undefinedValueNotification=new ra("N",void 0);class _E extends y{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(_E.dispatch,this.delay,new XJ(e,this.destination)))}_next(e){this.scheduleMessage(ra.createNext(e))}_error(e){this.scheduleMessage(ra.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ra.createComplete()),this.unsubscribe()}}class XJ{constructor(e,t){this.notification=e,this.destination=t}}class hf extends ee{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new QJ(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=i.length;let o;if(this.closed)throw new U;if(this.isStopped||this.hasError?o=x.EMPTY:(this.observers.push(e),o=new ie(this,e)),r&&e.add(e=new _E(e,r)),t)for(let a=0;a<s&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||WJ).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<i);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class QJ{constructor(e,t){this.time=e,this.value=t}}function Xr(n,e){return"function"==typeof e?t=>t.pipe(Xr((i,r)=>Pe(n(i,r)).pipe(me((s,o)=>e(i,s,r,o))))):t=>t.lift(new ZJ(n))}class ZJ{constructor(e){this.project=e}call(e,t){return t.subscribe(new JJ(e,this.project))}}class JJ extends ge{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new Et(this),r=this.destination;r.add(i),this.innerSubscription=O(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const yE={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if("undefined"==typeof window)return yE.schedule(n,0);if(void 0===window.requestAnimationFrame)return yE.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let KD;function cee(n,e,t){let i=t;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function(n,e){if(!KD){const t=Element.prototype;KD=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&KD.call(n,e)}(n,r)||(i=s,0))),i}class dee{constructor(e,t){this.componentFactory=t.get(ll).resolveComponentFactory(e)}create(e){return new hee(this.componentFactory,e)}}class hee{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new hf(1),this.events=this.eventEmitters.pipe(Xr(i=>Rn(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(vn),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=yE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?function(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Vn.create({providers:[],parent:this.injector}),i=function(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],l=cee(a,e,r);-1!==l&&i[l].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(is),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Gd).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(me(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=yE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Rm(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class fee extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const gee={initialConfig:{},parse:{},rename:{}};class mee{constructor(e,t){this.configState=e,this.storedChanges={},this.options=Object.assign(Object.assign({},gee),t)}addChanges(e){this.storedChanges=Object.assign(Object.assign({},this.storedChanges),e)}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,s=i.snapshot,o=Object.assign(Object.assign(Object.assign({},r),s),t);for(const[a,l]of Object.entries(e))this.processChange(a,l,o);i.setConfig(o)}processChange(e,t,i){var r,s;const{options:{parse:o,rename:a}}=this,l=null!==(r=a[e])&&void 0!==r?r:e,c=t.currentValue,d=null!==(s=o[e])&&void 0!==s?s:o[l];if(null==c)delete i[l];else if(d)try{i[l]=d(c)}catch(f){console.warn(`Failed to parse ${e} = ${c}`,f.message)}else i[l]=c}}let _ee=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new mee(this.configState,this.options)}ngOnInit(){var t;this._init=setTimeout(()=>this.initialize(),null!==(t=this.options.initialDelay)&&void 0!==t?t:0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return n.\u0275fac=function(t){!function(){throw new Error("invalid")}()},n.\u0275dir=kt({type:n,features:[Ui]}),n})();const XD={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}};var QD;const ff={production:!0,disableDbWorker:!0,acceptableViewerDomains:["https://portal.hubmapconsortium.org","https://portal.test.hubmapconsortium.org"],organNodes:["http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0002049"],dbOptions:{ccfOwlUrl:"https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:null!==(QD=localStorage.getItem("HUBMAP_TOKEN"))&&void 0!==QD?QD:"",useRemoteApi:!1,remoteApiEndpoint:"https://ccf-api--staging.herokuapp.com/v1"},googleAnalyticsToken:"G-ERNVZ1Q4KE"};function Qr(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function $3(n,e){return function(t,i){e(t,i,n)}}function Zl(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function Zi(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function Y3(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function JD(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||Y3()}const K3="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",bE=JD();class wee{constructor(e,t,i="sessionStorage"){this.storage=function(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(e){return null}}(i),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function eM(n,e,t,i=600){const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}const X3={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function Q3(n){return"string"==typeof n?X3[n.toUpperCase()]||X3.WHITE:n}function wE(n,e){if(!n)throw new Error(e||"Assertion failed")}const Jl={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},Uy=Jl.window||Jl.self||Jl.global,Z3=Jl.process||{};function vg(){let n;if(bE&&Uy.performance)n=Uy.performance.now();else if(Z3.hrtime){const e=Z3.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}console;const bg={debug:bE&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Dee={enabled:!0,level:0};function gl(){}const J3={},eB={once:!0};function Mee(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}let tM=(()=>{class n{constructor({id:t}={id:""}){this.id=t,this.VERSION=K3,this._startTs=vg(),this._deltaTs=vg(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new wee("__probe-".concat(this.id,"__"),Dee),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,e=["constructor"]){const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((vg()-this._startTs).toPrecision(10))}getDelta(){return Number((vg()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}assert(t,i){wE(t,i)}warn(t){return this._getLogFunction(0,t,bg.warn,arguments,eB)}error(t){return this._getLogFunction(0,t,bg.error,arguments)}deprecated(t,i){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(i,"` instead"))}removed(t,i){return this.error("`".concat(t,"` has been removed. Use `").concat(i,"` instead"))}probe(t,i){return this._getLogFunction(t,i,bg.log,arguments,{time:!0,once:!0})}log(t,i){return this._getLogFunction(t,i,bg.debug,arguments)}info(t,i){return this._getLogFunction(t,i,console.info,arguments)}once(t,i){return this._getLogFunction(t,i,bg.debug||bg.info,arguments,eB)}table(t,i,r){return i?this._getLogFunction(t,i,console.table||gl,r&&[r],{tag:Mee(i)}):gl}image({logLevel:t,priority:i,image:r,message:s="",scale:o=1}){return this._shouldLog(t||i)?bE?function({image:n,message:e="",scale:t=1}){if("string"==typeof n){const r=new Image;return r.onload=()=>{const s=eM(r,e,t);console.log(...s)},r.src=n,gl}const i=n.nodeName||"";if("img"===i.toLowerCase())return console.log(...eM(n,e,t)),gl;if("canvas"===i.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...eM(r,e,t)),r.src=n.toDataURL(),gl}return gl}({image:r,message:s,scale:o}):function({image:n,message:e="",scale:t=1}){let i=null;try{i=tt(307)}catch(r){}return i?()=>i(n,{fit:"box",width:"".concat(Math.round(80*t),"%")}).then(r=>console.log(r)):gl}({image:r,message:s,scale:o}):gl}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(t){return this._storage.config[t]}set(t,i){this._storage.updateConfiguration({[t]:i})}time(t,i){return this._getLogFunction(t,i,console.time?console.time:console.info)}timeEnd(t,i){return this._getLogFunction(t,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,i){return this._getLogFunction(t,i,console.timeStamp||gl)}group(t,i,r={collapsed:!1}){r=nB({logLevel:t,message:i,opts:r});const{collapsed:s}=r;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,i,r={}){return this.group(t,i,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||gl)}withGroup(t,i,r){this.group(t,i)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=tB(t)}_getLogFunction(t,i,r,s=[],o){if(this._shouldLog(t)){o=nB({logLevel:t,message:i,args:s,opts:o}),wE(r=r||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=vg();const a=o.tag||o.message;if(o.once){if(J3[a])return gl;J3[a]=vg()}return i=function(n,e,t){if("string"==typeof e){const i=t.time?function(n,e=8){const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function(n,e,t){return!bE&&"string"==typeof n&&(e&&(e=Q3(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=Q3(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),r.bind(console,i,...o.args)}return gl}}return n.VERSION=K3,n})();function tB(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return wE(Number.isFinite(e)&&e>=0),e}function nB(n){const{logLevel:e,message:t}=n;n.logLevel=tB(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(n.args=i,typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return wE("string"===r||"object"===r),Object.assign(n,n.opts)}const Fi=new tM({id:"deck"}),Oi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Oi,"IDENTITY",{get:()=>Fi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const Bc={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},iB={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},fn=new tM({id:"luma.gl"});function Lo(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function EE(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function gi(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function SE(n){return Lo(EE(n),"Invalid WebGLRenderingContext"),n}function ko(n){return Lo(gi(n),"Requires WebGL2"),n}var Er=tt(761);const zy={};const Hy=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(Hy.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const pf=function(e){const t=this;this.gl=e,function(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&(zy[i]=!0)}while(0!==i);for(i in zy)if(zy[i])return delete zy[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,d){const f=t.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const p=f.attribs[s];return p.buffer=t.currentArrayBuffer,p.size=o,p.type=a,p.normalized=l,p.stride=c,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{Er.CO.console&&Er.CO.console.log&&Er.CO.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};pf.prototype.VERTEX_ARRAY_BINDING_OES=34229,pf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new Hy(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},pf.prototype.createVertexArrayOES=function(){const e=new Hy(this);return this.vertexArrayObjects.push(e),e},pf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},pf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Hy&&e.hasBeenBound&&e.ext===this)},pf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function(n,e){zy[n]=!0,void 0!==e&&function(n){Er.CO.console&&Er.CO.console.error&&Er.CO.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],d=r?r.attribs[l]:null;if((!r||c.enabled!==d.enabled)&&(c.enabled?i.enableVertexAttribArray.call(t,l):i.disableVertexAttribArray.call(t,l)),c.enabled){let f=!1;(!r||c.buffer!==d.buffer)&&(o!==c.buffer&&(i.bindBuffer.call(t,34962,c.buffer),o=c.buffer),f=!0),(f||c.cached!==d.cached)&&i.vertexAttribPointer.call(t,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const rB="OES_element_index",sB="WEBGL_draw_buffers",oB="WEBGL_debug_renderer_info",dr=n=>gi(n)?void 0:0,Xee={3074:n=>gi(n)?void 0:36064,35723:n=>gi(n)?void 0:4352,35977:dr,32937:dr,36795:(n,e)=>{const t=gi(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(oB);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(oB);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:dr,35071:dr,37447:dr,36063:(n,e)=>{if(!gi(n)){const t=n.getExtension(sB);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:dr,35374:dr,35377:dr,34852:n=>{if(!gi(n)){const e=n.getExtension(sB);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(rB)?2147483647:65535,33001:n=>n.getExtension(rB)?16777216:65535,33e3:n=>16777216,37157:dr,35373:dr,35657:dr,36183:dr,37137:dr,34045:dr,35978:dr,35979:dr,35968:dr,35376:dr,35375:dr,35659:dr,37154:dr,35371:dr,35658:dr,35076:dr,35077:dr,35380:dr},aB="ANGLE_instanced_arrays",lB={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Lo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[aB]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Lo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Lo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Lo(!1)},deleteQuery:()=>{Lo(!1)},beginQuery:()=>{Lo(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},nM={readBuffer:(n,e,t)=>{gi(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function(n,e){return{webgl2:gi(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!gi(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>{if(!gi(n))switch(r){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,i,r)},getTexParameter(n,e,t,i){switch(i){case 34046:const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function(n,e,t){const i=Xee[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function cte(n,{extension:e,target:t,target2:i}){const r=lB[e];Lo(r);const{meta:s={}}=r,{suffix:o=""}=s,a=n.getExtension(e);for(const l of Object.keys(r)){const c=`${l}${o}`;let d=null;"meta"===l||"function"==typeof n[l]||(a&&"function"==typeof a[c]?d=(...f)=>a[c](...f):"function"==typeof r[l]&&(d=r[l].bind(t))),d&&(t[l]=d,i[l]=d)}}("undefined"!=typeof global?global:window).polyfillContext=function(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new pf(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&cte(n,{extension:t,target:n.luma,target2:n})}(n,lB),function(n,{target:e,target2:t}){Object.keys(nM).forEach(i=>{if("function"==typeof nM[i]){const r=n[i]?n[i].bind(n):()=>{},s=nM[i].bind(null,n,r);e[i]=s,t[i]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const iM={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Yd=(n,e,t)=>e?n.enable(t):n.disable(t),cB=(n,e,t)=>n.hint(t,e),Ta=(n,e,t)=>n.pixelStorei(t,e);function Gy(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const hte={3042:Yd,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:Yd,2885:(n,e)=>n.cullFace(e),2929:Yd,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:Yd,35723:cB,36006:(n,e)=>{const t=gi(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:cB,2849:(n,e)=>n.lineWidth(e),32823:Yd,32824:"polygonOffset",10752:"polygonOffset",35977:Yd,32938:"sampleCoverage",32939:"sampleCoverage",3089:Yd,3088:(n,e)=>n.scissor(...e),2960:Yd,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:Ta,3317:Ta,37440:Ta,37441:Ta,37443:Ta,3330:Ta,3332:Ta,3331:Ta,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:Ta,32878:Ta,3316:Ta,3315:Ta,32877:Ta,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=Gy(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=Gy(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=Gy(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=Gy(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=Gy(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function Zr(n,e,t){return void 0!==e[n]?e[n]:t[n]}const fte={blendEquation:(n,e,t)=>n.blendEquationSeparate(Zr(32777,e,t),Zr(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Zr(32969,e,t),Zr(32968,e,t),Zr(32971,e,t),Zr(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Zr(32824,e,t),Zr(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Zr(32938,e,t),Zr(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Zr(2962,e,t),Zr(2967,e,t),Zr(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Zr(34816,e,t),Zr(36003,e,t),Zr(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Zr(2964,e,t),Zr(2965,e,t),Zr(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Zr(34817,e,t),Zr(34818,e,t),Zr(34819,e,t))},uB={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},jc=(n,e)=>n.isEnabled(e),dB={3042:jc,2884:jc,2929:jc,3024:jc,32823:jc,32926:jc,32928:jc,3089:jc,2960:jc,35977:jc};function hB(n){for(const e in n)return!1;return!0}function pte(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function fB(n,e){const t=n[e].bind(n);n[e]=function(...r){const s=r[0];return s in n.state.cache||(n.state.cache[s]=t(...r)),n.state.enable?n.state.cache[s]:t(...r)},Object.defineProperty(n[e],"name",{value:`${e}-from-cache`,configurable:!1})}function gte(n,e,t){const i=n[e].bind(n);n[e]=function(...s){const{valueChanged:o,oldValue:a}=t(n.state._updateCache,...s);return o&&i(...s),a},Object.defineProperty(n[e],"name",{value:`${e}-to-cache`,configurable:!1})}class _te{constructor(e,{copyState:t=!1,log:i=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(n,e){if("number"==typeof(e=e||iM)){const r=e,s=dB[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=dB[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},iM),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){Lo(this.stateStack.length>0),Pu(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Lo(void 0!==s);const o=e[s],a=this.cache[s];pte(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function pB(n,e={}){const{enable:t=!0,copyState:i}=e;if(Lo(void 0!==i),!n.state){const r="undefined"!=typeof global?global:window,{polyfillContext:s}=r;s&&s(n),n.state=new _te(n,{copyState:i}),function(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const o in uB)gte(n,o,uB[o]);fB(n,"getParameter"),fB(n,"isEnabled")}return n.state.enable=t,n}function gB(n){Lo(n.state),n.state.pop()}function Pu(n,e){if(Lo(EE(n),"setParameters requires a WebGL context"),hB(e))return;const t={};for(const r in e){const s=Number(r),o=hte[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)fte[r](n,e,i)}function ec(n,e,t){if(hB(e))return t(n);const{nocatch:i=!0}=e;let r;if(function(n){n.state||pB(n,{copyState:!1}),n.state.push()}(n),Pu(n,e),i)r=t(n),gB(n);else try{r=t(n)}finally{gB(n)}return r}function wg(n){const{luma:e}=n;if(n.canvas&&e){const{clientWidth:t}=e.canvasSizeInfo;return t?n.drawingBufferWidth/t:1}return 1}function rM(n,e,t=!0){return function(n,e,t,i,r){const s=mB(n[0],e,t);let o=_B(n[1],e,i,r),a=mB(n[0]+1,e,t);const l=a===t-1?a:a-1;let c;return a=_B(n[1]+1,e,i,r),r?(a=0===a?a:a+1,c=o,o=a):c=a===i-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}(e,wg(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function mB(n,e,t){return Math.min(Math.round(n*e),t-1)}function _B(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const sM=(0,Er.jU)(),Ste=sM&&"undefined"!=typeof document,yB={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function vB(n={}){Lo(sM,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},yB,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function({canvas:n,width:e=800,height:t=600,onError:i}){let r;return"string"==typeof n?(Ste&&"complete"===document.readyState||i(`createGLContext called on canvas '${n}' before page was loaded`),r=document.getElementById(n)):n?r=n:(r=document.createElement("canvas"),r.id="lumagl-canvas",r.style.width=Number.isFinite(e)?`${e}px`:"100%",r.style.height=Number.isFinite(t)?`${t}px`:"100%",document.body.insertBefore(r,document.body.firstChild)),r}({canvas:s,width:e,height:t,onError:i});return r=function(n,e){const{onError:t}=e;let i=null;const r=l=>i=l.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${i||"Unknown error"}`)}(o,n),r?(r=oM(r,n),function(n){const e=gi(n)?"WebGL2":"WebGL1",t=function(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);fn.info(1,`${e}${n.debug?" debug":""} context ${t?`(${t.vendor},${t.renderer})`:""}`)()}(r),r):null}function oM(n,e={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},yB,e);const{manageState:t,debug:i}=e;return t&&pB(n,{copyState:!1,log:(...r)=>fn.log(1,...r)()}),sM&&i&&(Er.CO.makeDebugContext?(n=Er.CO.makeDebugContext(n,e),fn.level=Math.max(fn.level,1)):fn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function bB(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class wB{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=bB(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(bB()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class aM{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof wB?e:new wB(t,i)),this.stats[t]}}const $y="8.5.7",gf=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new aM({id:e})),this.stats.get(e)}};if(Er.CO.luma&&Er.CO.luma.VERSION!==$y)throw new Error(`luma.gl - multiple VERSIONs detected: ${Er.CO.luma.VERSION} vs 8.5.7`);function sn(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function lM(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return sn(void 0!==i,`Accessing undefined constant GL.${e}`),i}function Kd(n,e){e=Number(e);for(const t in n)if(n[t]===e)return`GL.${t}`;return String(e)}Er.CO.luma||((0,Er.jU)()&&fn.log(1,"luma.gl 8.5.7 - set luma.log.level=1 (or higher) to trace rendering")(),Er.CO.luma=Er.CO.luma||{VERSION:$y,version:$y,log:fn,stats:gf,globals:{modules:{},nodeIO:{}}});const cM={};function Vc(n="id"){return cM[n]=cM[n]||1,`${n}-${cM[n]++}`}function EB(n){return sn("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function Eg(n){let e=!0;for(const t in n){e=!1;break}return e}function SB(n,e,t,i){const r=`See luma.gl ${t} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw fn.removed(`Calling removed method ${e}.${o}: `,r)(),new Error(o)})})}const Sg="Resource subclass must define virtual methods";class Fu{constructor(e,t={}){SE(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||Vc(this.constructor.name),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){sn(e=lM(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=gi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension)){const a=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1;return s?l:a}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=gi(this.gl),o={},a=t||Object.keys(r);for(const l of a){const c=r[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const f=i?Kd(this.gl,l):l;o[f]=this.getParameter(l,e),i&&"GLenum"===c.type&&(o[f]=Kd(this.gl,o[f]))}}return o}setParameter(e,t){sn(e=lM(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=gi(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=lM(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return SB(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(Sg)}_deleteHandle(){throw new Error(Sg)}_bindHandle(e){throw new Error(Sg)}_getOptsFromHandle(){throw new Error(Sg)}_getParameter(e,t){throw new Error(Sg)}_setParameter(e,t){throw new Error(Sg)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this.constructor.name,t=gf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this.constructor.name;gf.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this.constructor.name){const i=gf.get("Memory Usage");i.get("GPU Memory").addCount(e),i.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){const t=gf.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function uM(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Wy(n,{clamped:e=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Fte({data:n,width:e,height:t}){const i=Math.round(e/2),r=Math.round(t/2),s=new Uint8Array(i*r*4);for(let o=0;o<r;o++)for(let a=0;a<i;a++)for(let l=0;l<4;l++)s[4*(o*i+a)+l]=n[4*(2*o*e+2*a)+l];return{data:s,width:i,height:r}}function dM(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)a in e&&fn.removed(`${n}.${a}`,i[a]?`${n}.${i[a]}`:"N/A")();for(const a in r)a in e&&fn.deprecated(`${n}.${a}`,`${n}.${r[a]}`)();let o=null;for(const a in s)if(a in e){const l=s[a];fn.deprecated(`${n}.${a}`,`${n}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const Lte={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},kte={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class sa{static getBytesPerElement(e){return Wy(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return sn(e.size),Wy(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new sa(...[Lte,...e])}constructor(...e){e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return sa.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return sa.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=dM("Accessor",e,kte)).type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const xB={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Bte={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:xB},jte={removedProps:xB};class ir extends Fu{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/sa.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/sa.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=dM("Buffer",e,Bte),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=dM("Buffer",e,jte))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new sa(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;sn(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(ko(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:i=0,size:r}){const{gl:s}=this;return ko(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,t,i,r),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}={}){ko(this.gl);const s=Wy(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,r||o),c=a+l);const d=Math.min(o,l);return sn((r=r||d)<=d),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}={}){return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(sn(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,i=e.byteLength+t){sn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=uM(e);return sn(s),this.setAccessor(new sa(this.accessor,{type:s})),this}_setByteLength(e,t=this.usage){sn(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/Wy(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new sa(this.accessor,{type:uM(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return fn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return fn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return fn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return fn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new sa(this.accessor,e),this}}const hM={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},AB={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},TB={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},zte=[9729,9728],DB=Er.CO.WebGLBuffer||function(){};class Cg extends Fu{static isSupported(e,t={}){const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function(n,e){const t=hM[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=gi(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function(n,e){const t=hM[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=Vc("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then(z=>this.initialize(Object.assign({},e,{pixels:z,data:z}))),this;const i="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:d}=e;t||(t=r);let{width:f,height:p,dataFormat:g,type:_,compressed:C=!1,mipmaps:b=!0}=e;const{depth:H=0}=e;return({width:f,height:p,compressed:C,dataFormat:g,type:_}=this._deduceParameters({format:s,type:_,dataFormat:g,compressed:C,data:t,width:f,height:p})),this.width=f,this.height=p,this.depth=H,this.format=s,this.type=_,this.dataFormat=g,this.border=o,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),b&&this._isNPOT()&&(fn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),b=!1,this._updateForNPOT(l)),this.mipmaps=b,this.setImageData({data:t,width:f,height:p,depth:H,format:s,type:_,dataFormat:g,border:o,mipmaps:b,parameters:c,compressed:C}),b&&this.generateMipmap(),this.setParameters(l),a&&(this.data=t),i&&(this._video={video:t,parameters:l,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:i=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(e={}){return this._isNPOT()?(fn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ec(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:d=this.type,width:f=this.width,height:p=this.height,dataFormat:g=this.dataFormat,compressed:_=!1}=e;c||(c=i),({type:d,dataFormat:g,compressed:_,width:f,height:p}=this._deduceParameters({format:s,type:d,dataFormat:g,compressed:_,data:c,width:f,height:p}));const{gl:C}=this;C.bindTexture(this.target,this.handle);let H,b=null;return({data:c,dataType:b}=this._getDataType({data:c,compressed:_})),ec(this.gl,l,()=>{switch(b){case"null":C.texImage2D(t,r,s,f,p,o,g,d,c);break;case"typed-array":C.texImage2D(t,r,s,f,p,o,g,d,c,a);break;case"buffer":H=ko(C),H.bindBuffer(35052,c.handle||c),H.texImage2D(t,r,s,f,p,o,g,d,a),H.bindBuffer(35052,null);break;case"browser-object":gi(C)?C.texImage2D(t,r,s,f,p,o,g,d,c):C.texImage2D(t,r,s,g,d,c);break;case"compressed":for(const[z,he]of c.entries())C.compressedTexImage2D(t,z,he.format,he.width,he.height,o,he.data);break;default:sn(!1,"Unknown image data type")}}),this._trackAllocatedMemory(c&&c.byteLength?c.byteLength:this.width*this.height*(AB[this.dataFormat]||4)*(TB[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:i=null,x:r=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:c=this.format,type:d=this.type,dataFormat:f=this.dataFormat,compressed:p=!1,offset:g=0,border:_=this.border,parameters:C={}}){if(({type:d,dataFormat:f,compressed:p,width:o,height:a}=this._deduceParameters({format:c,type:d,dataFormat:f,compressed:p,data:i,width:o,height:a})),sn(0===this.depth,"texSubImage not supported for 3D textures"),i||(i=t),i&&i.data){const b=i;i=b.data,o=b.shape[0],a=b.shape[1]}i instanceof ir&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ec(this.gl,C,()=>{if(p)this.gl.compressedTexSubImage2D(e,l,r,s,o,a,c,i);else if(null===i)this.gl.texSubImage2D(e,l,r,s,o,a,f,d,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,l,r,s,o,a,f,d,i,g);else if(i instanceof DB){const b=ko(this.gl);b.bindBuffer(35052,i),b.texSubImage2D(e,l,r,s,o,a,f,d,g),b.bindBuffer(35052,null)}else gi(this.gl)?ko(this.gl).texSubImage2D(e,l,r,s,o,a,f,d,i):this.gl.texSubImage2D(e,l,r,s,f,d,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return fn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof ir?{data:e.handle,dataType:"buffer"}:e instanceof DB?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:l}=e;const c=hM[t];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:l,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},sn(r,"Could not deduced texture size"),sn(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),sn(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:sn(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(gi(this.gl)||!this.width||!this.height||EB(this.width)&&EB(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===zte.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Hte(n,e){return sn("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error(`Could not load image ${n}.`)),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class Da extends Cg{static isSupported(e,t){return Cg.isSupported(e,t)}constructor(e,t={}){SE(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Hte(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const mf="EXT_color_buffer_float",MB={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:mf,bpp:2},33327:{gl2:mf,bpp:4},34842:{gl2:mf,bpp:8},33326:{gl2:mf,bpp:4},33328:{gl2:mf,bpp:8},34836:{gl2:mf,bpp:16},35898:{gl2:mf,bpp:4}};class xg extends Fu{static isSupported(e,{format:t}={format:null}){return!t||function(n,e,t){const i=t[e];if(!i)return!1;const r=gi(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,MB)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:i=1,samples:r=0}){return sn(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==r&&gi(this.gl)?this.gl.renderbufferStorageMultisample(36161,r,e,t,i):this.gl.renderbufferStorage(36161,e,t,i),this.format=e,this.width=t,this.height=i,this.samples=r,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*MB[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const PB="clear: bad arguments";function pM(n,{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}={}){const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),sn(0!==o,PB),ec(n,s,()=>{n.clear(o)})}function FB(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function ti(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){FB(s,i,r,o,a,"next",l)}function a(l){FB(s,i,r,o,a,"throw",l)}o(void 0)})}}const gM=[34069,34070,34071,34072,34073,34074];let Xte=(()=>{class n extends Cg{constructor(t,i={}){SE(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(t={}){const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage({face:t,data:i,x:r=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:t,data:i,x:r,y:s,mipmapLevel:o})}setCubeMapImageData({width:t,height:i,pixels:r,data:s,border:o=0,format:a=6408,type:l=5121}){var c=this;return ti(function*(){const{gl:d}=c,f=r||s,p=yield Promise.all(gM.map(g=>{const _=f[g];return Promise.all(Array.isArray(_)?_:[_])}));c.bind(),gM.forEach((g,_)=>{p[_].length>1&&!1!==c.opts.mipmaps&&fn.warn(`${c.id} has mipmap and multiple LODs.`)(),p[_].forEach((C,b)=>{t&&i?d.texImage2D(g,b,a,t,i,o,a,l,C):d.texImage2D(g,b,a,a,l,C)})}),c.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:l=0,format:c=6408,type:d=5121}=t,{gl:f}=this,p=o||a;return this.bind(),p instanceof Promise?p.then(g=>this.setImageDataForFace(Object.assign({},t,{face:i,data:g,pixels:g}))):this.width||this.height?f.texImage2D(i,0,c,r,s,l,c,d,p):f.texImage2D(i,0,c,c,d,p),this}}return n.FACES=gM,n})();class Qte extends Cg{static isSupported(e){return gi(e)}constructor(e,t={}){ko(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:i,height:r,depth:s=1,border:o=0,format:a,type:l=5121,offset:c=0,data:d,parameters:f={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ec(this.gl,f,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,d),d instanceof ir&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,e,t,i,r,s,o,a,l,c))}),this._trackAllocatedMemory(d&&d.byteLength?d.byteLength:this.width*this.height*this.depth*(AB[this.dataFormat]||4)*(TB[this.type]||1),"Texture"),this.loaded=!0,this}}function Jte(n,e){const{gl:t,width:i,height:r,id:s}=n;return new Is(t,Object.assign({},e,{id:`framebuffer-for-${s}`,width:i,height:r,attachments:{36064:n}}))}function CE(n,e={}){const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:d,deleteFramebuffer:f}=function(n){return n instanceof Is?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:Jte(n),deleteFramebuffer:!0}}(n);sn(d);const{gl:p,handle:g,attachments:_}=d;a=a||d.width,l=l||d.height,36064===s&&null===g&&(s=1028),sn(_[s]),c=c||_[s].type,o=function(n,e,t,i,r){if(n)return n;return new(Wy(e=e||5121,{clamped:!1}))(i*r*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return sn(!1),0}}(t))}(o,c,r,a,l),c=c||uM(o);const C=p.bindFramebuffer(36160,g);return p.readPixels(t,i,a,l,r,c,o),p.bindFramebuffer(36160,C||null),f&&d.delete(),o}function mM(n,{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}={}){let i=CE(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=Fte({data:i,width:r,height:s}));!function({data:n,width:e,height:t,bytesPerPixel:i=4,temp:r}){const s=e*i;r=r||new Uint8Array(s);for(let o=0;o<t/2;++o){const a=o*s,l=(t-o-1)*s;r.set(n.subarray(a,a+s)),n.copyWithin(a,l,l+s),n.set(r,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),l=a.createImageData(r,s);return l.data.set(i),a.putImageData(l,0,0),o.toDataURL()}const LB="Multiple render targets not supported";class Is extends Fu{static isSupported(e,t={}){const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Is(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=ko(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=ko(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:i=null,color:r=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:c}){if(sn(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,i)for(const d in i){const f=i[d];(Array.isArray(f)?f[0]:f).resize({width:e,height:t})}else i=this._createDefaultAttachments(r,s,o,e,t);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:i,clearAttachments:r=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:r,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),i&&this._setDrawBuffers(i),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:t,height:i}=e;if(null===this.handle)return sn(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&fn.log(2,`Resizing framebuffer ${this.id} to ${t}x${i}`)();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e,{clearAttachments:t=!1,resizeAttachments:i=!0}={}){const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){sn(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=r[a];let c=l;if(c)if(c instanceof xg)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[d,f=0,p=0]=l;c=d,this._attachTexture({attachment:a,texture:d,layer:f,level:p})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});else this._unattach(a);i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function(n){return(Is.STATUS||{})[n]||`Framebuffer error ${n}`}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(e={}){const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&pM(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,l)=>{!function(n,{framebuffer:e=null,buffer:t=6144,drawBuffer:i=0,value:r=[0,0,0,0]}={}){ko(n),ec(n,{framebuffer:e},()=>{switch(t){case 6144:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:sn(!1,PB)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return fn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return fn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return fn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return fn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return fn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return fn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:i=0,width:r,height:s}){const o=ko(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===t&&0===i&&void 0===r&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,i,r,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Kd(this.gl,r)),r}getAttachmentParameters(e=36064,t,i=this.constructor.ATTACHMENT_PARAMETERS||[]){const r={};for(const s of i)r[t?Kd(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(e=!0){const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?Kd(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return"undefined"!=typeof window&&window.open(mM(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>fn.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const i=mM(this,{targetMaxHeight:100});return fn.image({logLevel:e,message:t,image:i},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new Da(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new xg(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new xg(this.gl,{id:`${this.id}-depth`,format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&sn(!1),o}_unattach(e){const t=this.attachments[e];!t||(t instanceof xg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:i}=this;i.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:i,level:r}){const{gl:s}=this;switch(s.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:ko(s).framebufferTextureLayer(36160,e,t.target,r,i);break;case 34067:const a=function(n){return n<34069?n+34069:n}(i);s.framebufferTexture2D(36160,e,a,t.handle,r);break;case 3553:s.framebufferTexture2D(36160,e,3553,t.handle,r);break;default:sn(!1,"Illegal texture type")}s.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=function(n){return gi(n)?n:null}(this.gl);t?t.readBuffer(e):sn(36064===e||1029===e,LB),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=ko(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):sn(1===e.length&&(36064===e[0]||1029===e[0]),LB)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in kB)void 0===n.luma.caps[e]&&(n.luma.caps[e]=jB(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Is.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const kB={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const e=new Da(n,{format:6408,type:5126,dataFormat:6408}),t=new Is(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function _M(n,e){return BB(n,e)}function BB(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>jB(n,t))}function jB(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function(n,e){const t=kB[e];let i;sn(t,e);const r=gi(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&Boolean(n.getExtension(s))}else"string"==typeof r?i=Boolean(n.getExtension(r)):"boolean"==typeof r?i=r:sn(!1);return i}(n,e)),n.luma.caps[e]||fn.log(2,`Feature: ${e} not supported`)(),n.luma.caps[e]}class yM{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return ht(ht({},this.source.getAccessor()),this.opts)}}const Yy=new class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,d=t*i+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,d)}let f;l&&(f=l*i+s);const p=this._allocate(c,d,a,f);return e&&o?p.set(e):a||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.props.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return i&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.props.poolSize)&&t.splice(s,0,i),t.length>this.props.poolSize&&t.shift()}},dne=(Math,1/180*Math.PI),Sr={};function fne(n,{precision:e=Sr.precision||4}={}){return n=function(n){return Math.round(n/Sr.EPSILON)*Sr.EPSILON}(n),`${parseFloat(n.toPrecision(e))}`}function Xd(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Lu(n,e,t){if(Xd(n)){t=t||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let i=0;i<t.length&&i<n.length;++i)t[i]=e(n[i],i,t);return t}return e(n)}function VB(n){return function(n,e){return Lu(n,t=>t*dne,void 0)}(n)}function _f(n,e,t){return Lu(n,i=>Math.max(e,Math.min(t,i)))}function xE(n,e,t){return Xd(n)?n.map((i,r)=>xE(i,e[r],t)):t*e+(1-t)*n}function Ky(n,e,t){const i=Sr.EPSILON;t&&(Sr.EPSILON=t);try{if(n===e)return!0;if(Xd(n)&&Xd(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!Ky(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Sr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Sr.EPSILON=i}}function ku(n,e){if(!n)throw new Error(`math.gl assertion ${e}`)}Sr.EPSILON=1e-12,Sr.debug=!1,Sr.precision=4,Sr.printTypes=!1,Sr.printDegrees=!1,Sr.printRowMajor=!0;class vM extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return ku(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}to(e){return e===this?this:Xd(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Sr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+fne(this[i],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Ky(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){void 0===i&&(i=t,t=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Sr.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function eo(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function AE(n,e,t=""){if(Sr.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error(`math.gl: ${t} some fields set to invalid numbers'`);return n}const UB={};function bM(n,e){UB[n]||(UB[n]=!0,console.warn(`${n} has been removed in version ${e}, see upgrade guide for more information`))}class bne extends vM{get ELEMENTS(){return ku(!1),0}copy(e){return ku(!1),this}get x(){return this[0]}set x(e){this[0]=eo(e)}get y(){return this[1]}set y(e){this[1]=eo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return eo(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return eo(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ku(e>=0&&e<this.ELEMENTS,"index is out of range"),eo(this[e])}setComponent(e,t){return ku(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var fr=1e-6,oa="undefined"!=typeof Float32Array?Float32Array:Array;function zB(){var n=new oa(3);return oa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function HB(n,e,t){var i=new oa(3);return i[0]=n,i[1]=e,i[2]=t,i}function GB(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function TE(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=r*l-s*a,n[1]=s*o-i*l,n[2]=i*a-r*o,n}function $B(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function WB(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}zB();const wM=[0,0,0],qB={};class vo extends bne{static get ZERO(){return qB.ZERO=qB.ZERO||Object.freeze(new vo(0,0,0,0))}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Xd(e)?this.copy(e):(Sr.debug&&(eo(e),eo(t),eo(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Sr.debug&&(eo(e.x),eo(e.y),eo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=eo(e)}angle(e){return function(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],d=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),f=d&&GB(n,e)/d;return Math.acos(Math.min(Math.max(f,-1),1))}(this,e)}cross(e){return TE(this,this,e),this.check()}rotateX({radians:e,origin:t=wM}){return function(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=wM}){return function(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=wM}){return function(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return $B(this,this,e),this.check()}transformAsVector(e){return WB(this,this,e),this.check()}transformByMatrix3(e){return function(n,e,t){var i=e[0],r=e[1],s=e[2];n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],l=e[1],c=e[2],d=r*c-s*l,f=s*a-i*c,p=i*l-r*a,g=r*p-s*f,_=s*d-i*p,C=i*f-r*d,b=2*t[3];f*=b,p*=b,_*=2,C*=2,n[0]=a+(d*=b)+(g*=2),n[1]=l+f+_,n[2]=c+p+C}(this,this,e),this.check()}}const YB=new vo;function Ag(n,e,t,i){YB.set(n,e,t);const r=YB.len();return{distance:i/r,normal:new vo(-n/r,-e/r,-t/r)}}function zne(n){return n-Math.fround(n)}let Qy;function EM(n,{size:e=1,startIndex:t=0,endIndex:i}){Number.isFinite(i)||(i=n.length);const r=(i-t)/e;Qy=Yy.allocate(Qy,r,{type:Float32Array,size:2*e});let s=t,o=0;for(;s<i;){for(let a=0;a<e;a++){const l=n[s++];Qy[o+a]=l,Qy[o+a+e]=zne(l)}o+=2*e}return Qy.subarray(0,r*e*2)}function DE(n){return n.stride||n.size*n.bytesPerElement}function KB(n,e){e.offset&&Fi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=DE(n),s=("vertexOffset"in e?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return zn(ht({},e),{offset:s,stride:t})}function tc(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const XB=[],QB=[];function ZB(n,e=0,t=1/0){let i=XB;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(QB.length=n.length,i=QB):i=XB,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function JB(n){return n&&n[Symbol.asyncIterator]}function SM(n,e=(()=>!0)){return Array.isArray(n)?ej(n,e,[]):e(n)?[n]:[]}function ej(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?ej(r,e,t):e(r)&&t.push(r)}return t}function Wne({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const qne=[],ME=[[0,1/0]];function CM({source:n,target:e,start:t=0,end:i,size:r,getData:s}){const o=n.length,a=(i=i||e.length)-t;if(o>a)return void e.set(n.subarray(0,a),t);if(e.set(n,t),!s)return;let l=o;for(;l<a;){const c=s(l,n);for(let d=0;d<r;d++)e[t+l]=c[d]||0,l++}}const Xne={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function tj(n,e){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",ht(ht(ht({},Xne[n.type]),e),n)):null}function nj(n,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function ij(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function rj(n){n.push(n.shift())}function xM(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function sj({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,l=t.byteOffset,c=t.startIndices,d=r&&c,f=xM(t,e),p=t.state.constant;if(!d&&i>=f)return;const g=p?t.value:t.getBuffer().getData({srcByteOffset:l});if(t.settings.normalized&&!p){const H=s;s=(z,he)=>t._normalizeConstant(H(z,he))}const _=p?(H,z)=>s(g,z):(H,z)=>s(g.subarray(H,H+a),z),C=n.getData({length:i}),b=new Float32Array(f);(function({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return CM({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const l=i&&((d,f)=>i(d+a,f)),c=Math.min(r.length,s.length);for(let d=1;d<c;d++){const f=r[d]*t,p=s[d]*t;CM({source:n.subarray(o,f),target:e,start:a,end:p,size:t,getData:l}),o=f,a=p}a<e.length&&CM({source:[],target:e,start:a,size:t,getData:l})})({source:C,target:b,sourceStartIndices:r,targetStartIndices:c,size:a,getData:_}),n.byteLength<b.byteLength+l&&n.reallocate(b.byteLength+l),n.subData({data:b,offset:l})}class AM extends class{constructor(e,t){this.gl=e,this.id=t.id,this.size=t.size;const i=t.logicalType||t.type,r=5130===i;let{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),t.defaultValue=s;let o=i;r?o=5126:!o&&t.isIndexed?o=e&&_M(e,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),t.logicalType=i,t.type=o;let a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(i||o||5126);this.shaderAttributes={},this.doublePrecision=r,r&&!1===t.fp64&&(a=Float32Array),t.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new ir(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*DE(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Yy.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function(n,e){const t=KB(n,e);return{high:t,low:zn(ht({},t),{offset:t.offset+4*n.size})}}(this.getAccessor(),t||{});return i[e]=new yM(this,s.high),i["".concat(e,"64Low")]=r?new yM(this,s.low):new Float32Array(this.size),i}if(t){const i=KB(this.getAccessor(),t);return{[e]:new yM(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:t}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof ir&&(e={buffer:e});const i=ht(ht({},this.settings),e);if(t.bufferAccessor=i,e.constant){let r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),t.constant&&this._areValuesEqual(r,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){const r=e.buffer;t.externalBuffer=r,t.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;i.type=e.type||r.accessor.type,i.bytesPerElement=r.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=DE(i)}else if(e.value){this._checkExternalBuffer(e);let r=e.value;t.externalBuffer=null,t.constant=!1,this.value=r,i.bytesPerElement=r.BYTES_PER_ELEMENT,i.stride=DE(i);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&r instanceof Float64Array&&(r=EM(r,i));const a=r.byteLength+o+2*i.stride;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:r,offset:o}),i.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?EM(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:i}=this,r=i.allocatedValue,s=Yy.allocate(r,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?EM(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const i=this.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Fi.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}{constructor(e,t={}){super(e,t);const{transition:i=!1,noAlloc:r=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=t;Object.assign(this.settings,{transition:i,noAlloc:r,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:ME,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return tj(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function(n,e){if(n===ME||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=ME}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=qne}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate({numInstances:e,copy:t.updateRanges!==ME}),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,d]of s)o.call(r,this,{data:t,startRow:c,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else for(const[c,d]of s){const f=Number.isFinite(c)?this.getVertexOffset(c):0,p=Number.isFinite(d)?this.getVertexOffset(d):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:p})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;return e?!r.noAlloc&&(i.binaryValue===e?(this.clearNeedsUpdate(),!0):(i.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),r.transform||t!==this.startIndices?(tc(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function(n,{size:e,stride:t,offset:i,startIndices:r,nested:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:e,l=i?i/o:0,c=Math.floor((n.length-l)/a);return(d,{index:f,target:p})=>{if(!r){const b=f*a+l;for(let H=0;H<e;H++)p[H]=n[b+H];return p}const g=r[f],_=r[f+1]||c;let C;if(s){C=new Array(_-g);for(let b=g;b<_;b++){const H=b*a+l;p=new Array(e);for(let z=0;z<e;z++)p[z]=n[H+z];C[b-g]=p}}else if(a===e)C=n.subarray(g*e+l,_*e+l);else{C=new n.constructor((_-g)*e);let b=0;for(let H=g;H<_;H++){const z=H*a+l;for(let he=0;he<e;he++)C[b++]=n[z+he]}}return C}}(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:e.size&&e.size!==this.size}),!1):(this.clearNeedsUpdate(),this.setData(e),!0))):(i.binaryValue=null,i.binaryAccessor=null,!1)}getVertexOffset(e){const{startIndices:t}=this;return(t?t[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:d,startIndices:f}=e,{accessor:p,transform:g}=a,_=l.binaryAccessor||("function"==typeof p?p:s[p]);tc("function"==typeof _,'accessor "'.concat(p,'" is not a function'));let C=e.getVertexOffset(i);const{iterable:b,objectInfo:H}=ZB(t,i,r);for(const z of b){H.index++;let he=_(z,H);if(g&&(he=g.call(this,he)),f){const Ie=(H.index<f.length-1?f[H.index+1]:o)-f[H.index];if(he&&Array.isArray(he[0])){let Fe=C;for(const We of he)e._normalizeValue(We,c,Fe),Fe+=d}else he&&he.length>d?c.set(he,C):(e._normalizeValue(he,H.target,0),Wne({target:c,source:H.target,start:C,count:Ie}));C+=Ie*d}else e._normalizeValue(he,c,C),C+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let TM={};function bo(n){Fi.level>0&&TM[n]&&TM[n].call(...arguments)}function Ma(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const oj="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Jne=`#version 300 es\n${oj}`;function aj(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function lj(n={}){const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?Jne:e>300?`#version ${e}\n${oj}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,e){switch(e){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return Ma(!1),null}}(t,i);return e>=300?`#version ${e} ${300===e?"es":""}\nin ${i} ${t};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${s};\n}`:`varying ${i} ${t};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class cj extends Fu{static isSupported(e){return gi(e)}constructor(e,t={}){ko(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Eg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,fn.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof ir?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,i=0,r){const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,i,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class iie{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof ir?i:i.buffer:null}getData(e={}){const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&sn(gi(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const s=this.feedbackMap[r];r in t&&(i[s]=r)}Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:l,accessor:c}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:l,accessor:c})}}return i}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,{model:t}){const{program:i}=t;e.transformFeedback=new cj(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],sn(i[s]instanceof ir)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new ir(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function uj(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const Zy="vs",oie={[Zy]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},IE="__LUMA_INJECT_DECLARATIONS__",dj=/void\s+main\s*\([^)]*\)\s*\{\n?/,hj=/}\n?[^{}]*$/,MM=[];function fj(n,e,t,i=!1){const r=e===Zy;for(const s in t){const o=t[s];o.sort((l,c)=>l.order-c.order),MM.length=o.length;for(let l=0,c=o.length;l<c;++l)MM[l]=o[l].injection;const a=`${MM.join("\n")}\n`;switch(s){case"vs:#decl":r&&(n=n.replace(IE,a));break;case"vs:#main-start":r&&(n=n.replace(dj,l=>l+a));break;case"vs:#main-end":r&&(n=n.replace(hj,l=>a+l));break;case"fs:#decl":r||(n=n.replace(IE,a));break;case"fs:#main-start":r||(n=n.replace(dj,l=>l+a));break;case"fs:#main-end":r||(n=n.replace(hj,l=>a+l));break;default:n=n.replace(s,l=>l+a)}}return n=n.replace(IE,""),i&&(n=n.replace(/\}\s*$/,s=>s+oie[e])),n}function IM(n){const e={};return Ma(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?`${e[i]}\n${t[i]}`:t[i]}),e}const aie={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},OE="transform_uSize_",pj="transform_position";const gie={10241:9728,10240:9728,10242:33071,10243:33071};class _ie{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap)a[f]=i[this.samplerTextureMap[f]];this._setSourceTextureParameters();const d=function({sourceTextureMap:n,targetTextureVarying:e,targetTexture:t}){const i={};let r,s;e&&(({width:r,height:s}=t),i[`${OE}${e}`]=[r,s]);for(const o in n)({width:r,height:s}=n[o]),i[`${OE}${o}`]=[r,s];return i}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,d)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:c,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],i=CE(t);if(!e)return i;const r=i.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ma(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let l=0;l<i.length;l+=4)for(let c=0;c<s;c++)o[a++]=i[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof Da)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new ir(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new Is(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(gie)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function(n,e){sn(n instanceof Da||n instanceof Xte||n instanceof Qte);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:d}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:d},{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}}))}(e);return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function({vs:n,sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}){let s=Object.keys(e).length,o=null;const a={};let l=n,c={};if(s>0||t){const d=l.split("\n"),f=d.slice();if(d.forEach((p,g,_)=>{if(s>0){const C=function(n,e){const t={},i=function(n){return aj(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:c}=function(n){const e=`transform_uSampler_${n}`,t=`${OE}${n}`;return{samplerName:e,sizeName:t,uniformDeclerations:`  uniform sampler2D ${e};\n  uniform vec2 ${t};`}}(s),f=`  ${r} ${s} = transform_getInput(${a}, ${l}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ma(!1),null}}(r)};\n`;return t[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":f},samplerTextureMap:t}}return null}(p,e);if(C){const{updatedLine:b,inject:H}=C;f[g]=b,c=IM([c,H]),Object.assign(a,C.samplerTextureMap),s--}}t&&!o&&(o=function(n,e){const t=aj(n,["varying","out"]);return t&&t.name===e?t.type:null}(p,t))}),t){sn(i);const p=`${OE}${t}`;c=IM([c,{"vs:#decl":`uniform vec2 ${p};\n`,"vs:#main-start":`     vec2 ${pj} = transform_getPos(${p});\n     gl_Position = vec4(${pj}, 0, 1.);\n`}])}l=f.join("\n")}return{vs:l,targetTextureType:o,inject:c,samplerTextureMap:a}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),c=IM([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:r,fs:e._fs||lj({version:uj(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[aie].concat(e.modules||[]):e.modules,uniforms:s,inject:c}}}const OM={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function vie(n){let e=gj(n);return"object"===e?n?"type"in n?Object.assign({},n,OM[n.type]):"value"in n?(e=gj(n.value),Object.assign({type:e},n,OM[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},OM[e])}function gj(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class RM{constructor({name:e,vs:t,fs:i,dependencies:r=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:c={},vertexShader:d,fragmentShader:f}){Ma("string"==typeof e),this.name=e,this.vs=t||d,this.fs=i||f,this.getModuleUniforms=o,this.dependencies=r,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];const r=t.slice(0,2);"string"==typeof i&&(i={order:0,injection:i}),e[r][t]=i}return e}(c),s&&(this.uniforms=function(n){const e={};for(const t in n){const r=vie(n[t]);e[t]=r}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Ma(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}_defaultGetUniforms(e={}){const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ma(s.validate(e[r],s),`${this.name}: invalid ${r}`),t[r]=e[r]):t[r]=s.value}return t}}function Sie(n){return function(n){const e={},t={};return NM({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(_j(n))}function NM({modules:n,level:e,moduleMap:t,moduleDepth:i}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const r of n)t[r.name]=r,(void 0===i[r.name]||i[r.name]<e)&&(i[r.name]=e);for(const r of n)r.dependencies&&NM({modules:r.dependencies,level:e+1,moduleMap:t,moduleDepth:i})}function _j(n,e){return n.map(t=>(t instanceof RM||(Ma("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${t}' and use it directly.`),Ma(t.name,"shader module has no name"),(t=new RM(t)).dependencies=_j(t.dependencies)),t))}const PM={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},yf={};function Oie(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/Apple/i)||e.match(/Apple/i)?"APPLE":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN"}Object.keys(PM).forEach(n=>{yf[n]=n});const FM={};function yj(n,e,t={}){const i=PM[e];if(Ma(i,e),!function(n={}){const e="undefined"!=typeof window&&window.navigator||{},t=n.userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in FM)return FM[e];const o=`#extension GL_${i[0]} : ${t.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const l=n.getShaderParameter(a,35713);return n.deleteShader(a),FM[e]=l,l}function RE(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function(n,e){const t=PM[e];Ma(t,e);const i=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&t[1]||t[0],r="string"==typeof i?Boolean(n.getExtension(i)):i;return Ma(!1===r||!0===r),r}(n,t))}function Tg(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const vj=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Fie=[...vj,[Tg("attribute"),"in $1"],[Tg("varying"),"out $1"]],Lie=[...vj,[Tg("varying"),"in $1"]],bj=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],kie=[...bj,[Tg("in"),"attribute $1"],[Tg("out"),"varying $1"]],Bie=[...bj,[Tg("in"),"varying $1"]],LM="gl_FragColor",kM=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,jie=/void\s+main\s*\([^)]*\)\s*\{\n?/;function NE(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const Hie=`\n\n${IE}\n\n`,wj={[Zy]:"vertex",fs:"fragment"};function Ej(n,{id:e,source:t,type:i,modules:r,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:c=!0,log:d}){Ma("string"==typeof t,"shader source must be a string");const f=i===Zy,p=t.split("\n");let g=100,_="",C=t;0===p[0].indexOf("#version ")?(g=300,_=p[0],C=p.slice(1).join("\n")):_=`#version ${g}`;const b={};r.forEach(We=>{Object.assign(b,We.getDefines())}),Object.assign(b,s);let H=c?`${_}\n${function({id:n,source:e,type:t}){return n&&"string"==typeof n&&-1===e.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${wj[t]}\n\n`:""}({id:e,source:t,type:i})}\n${function({type:n}){return`\n#define SHADER_TYPE_${wj[n].toUpperCase()}\n`}({type:i})}\n${function(n){switch(function(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:Oie(t,i),vendor:t,renderer:i,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n"}}(n)}\n${function(n,e,t){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return RE(n,yf.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),RE(n,yf.GLSL_DERIVATIVES)&&yj(n,yf.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),RE(n,yf.GLSL_FRAG_DATA)&&yj(n,yf.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),RE(n,yf.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n)}\n${function(n={}){let e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+=`#define ${i.toUpperCase()} ${n[i]}\n`)}return 0===e&&(t+="\n"),t}(b)}\n${f?"":"precision highp float;\n\n"}\n`:`${_}\n`;const z=function(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(o),he={},Ie={},Fe={};for(const We in a){const dt="string"==typeof a[We]?{injection:a[We],order:0}:a[We],Mt=We.match(/^(v|f)s:(#)?([\w-]+)$/);if(Mt){const Lt=Mt[3];Mt[2]?"decl"===Lt?Ie[We]=[dt]:Fe[We]=[dt]:he[We]=[dt]}else Fe[We]=[dt]}for(const We of r){d&&We.checkDeprecations(C,d),H+=We.getModuleSource(i,g);const Mt=We.injections[i];for(const Ot in Mt){const Lt=Ot.match(/^(v|f)s:#([\w-]+)$/);if(Lt){const en="decl"===Lt[2]?Ie:Fe;en[Ot]=en[Ot]||[],en[Ot].push(Mt[Ot])}else he[Ot]=he[Ot]||[],he[Ot].push(Mt[Ot])}}return H+=Hie,H=fj(H,i,Ie),H+=function(n,e){let t="";for(const i in n){const r=n[i];if(t+=`void ${r.signature} {\n`,r.header&&(t+=`  ${r.header}`),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+=`  ${o.injection}\n`}r.footer&&(t+=`  ${r.footer}`),t+="}\n"}return t}(z[i],he),H+=C,H=fj(H,i,Fe),H=function(n,e,t){switch(e){case 300:return t?NE(n,Fie):function(n){const e=(n=NE(n,Lie)).match(kM);if(e){const t=e[1];n=n.replace(new RegExp(`\\b${LM}\\b`,"g"),t)}else{const t="fragmentColor";n=n.replace(jie,i=>`out vec4 ${t};\n${i}`).replace(new RegExp(`\\b${LM}\\b`,"g"),t)}return n}(n);case 100:return t?NE(n,kie):function(n){const e=(n=NE(n,Bie)).match(kM);if(e){const t=e[1];n=n.replace(kM,"").replace(new RegExp(`\\b${t}\\b`,"g"),LM)}return n}(n);default:throw new Error(`unknown GLSL version ${e}`)}}(H,l?100:g,f),H}function Wie(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const Zie={5126:Cr.bind(null,"uniform1fv",Ia,1,wo),35664:Cr.bind(null,"uniform2fv",Ia,2,wo),35665:Cr.bind(null,"uniform3fv",Ia,3,wo),35666:Cr.bind(null,"uniform4fv",Ia,4,wo),5124:Cr.bind(null,"uniform1iv",Qd,1,wo),35667:Cr.bind(null,"uniform2iv",Qd,2,wo),35668:Cr.bind(null,"uniform3iv",Qd,3,wo),35669:Cr.bind(null,"uniform4iv",Qd,4,wo),35670:Cr.bind(null,"uniform1iv",Qd,1,wo),35671:Cr.bind(null,"uniform2iv",Qd,2,wo),35672:Cr.bind(null,"uniform3iv",Qd,3,wo),35673:Cr.bind(null,"uniform4iv",Qd,4,wo),35674:Cr.bind(null,"uniformMatrix2fv",Ia,4,Bu),35675:Cr.bind(null,"uniformMatrix3fv",Ia,9,Bu),35676:Cr.bind(null,"uniformMatrix4fv",Ia,16,Bu),35678:to,35680:to,5125:Cr.bind(null,"uniform1uiv",PE,1,wo),36294:Cr.bind(null,"uniform2uiv",PE,2,wo),36295:Cr.bind(null,"uniform3uiv",PE,3,wo),36296:Cr.bind(null,"uniform4uiv",PE,4,wo),35685:Cr.bind(null,"uniformMatrix2x3fv",Ia,6,Bu),35686:Cr.bind(null,"uniformMatrix2x4fv",Ia,8,Bu),35687:Cr.bind(null,"uniformMatrix3x2fv",Ia,6,Bu),35688:Cr.bind(null,"uniformMatrix3x4fv",Ia,12,Bu),35689:Cr.bind(null,"uniformMatrix4x2fv",Ia,8,Bu),35690:Cr.bind(null,"uniformMatrix4x3fv",Ia,12,Bu),35678:to,35680:to,35679:to,35682:to,36289:to,36292:to,36293:to,36298:to,36299:to,36300:to,36303:to,36306:to,36307:to,36308:to,36311:to},Jie={},ere={},tre={},Sj=[0];function BM(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(Sj[0]=n,n=Sj);const r=n.length;if(r%e&&fn.warn(`Uniform size should be multiples of ${e}`,n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Ia(n,e){return BM(n,e,Float32Array,Jie)}function Qd(n,e){return BM(n,e,Int32Array,ere)}function PE(n,e){return BM(n,e,Uint32Array,tre)}function Cj(n,e,t){const i=Zie[t.type];if(!i)throw new Error(`Unknown GLSL uniform type ${t.type}`);return i().bind(null,n,e)}function nre(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function rre(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Cg||n instanceof xg)||n instanceof Is&&Boolean(n.texture)}function sre(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function to(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Cr(n,e,t,i){let r=null,s=null;return(o,a,l)=>{const c=e(l,t),d=c.length;let f=!1;if(null===r)r=new Float32Array(d),s=d,f=!0;else{sn(s===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(c[p]!==r[p]){f=!0;break}}return f&&(i(o,n,a,c),r.set(c)),f}}function wo(n,e,t,i){n[e](t,i)}function Bu(n,e,t,i){n[e](t,!1,i)}function FE(n,e="unnamed"){const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function Aj(n,e){let t="";for(let i=0;i<e.length;i++){const r=e[i];if((n[i+3]||n[i+2]||n[i+1])&&(t+=`${r}\n`,n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0;t+=Tj(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,l)}}return t}function Tj(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return`${t}${n}`}class Jy extends Fu{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return sn(!1),"unknown"}}constructor(e,t){SE(e),sn("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:FE(t.source,null)||t.id||Vc(`unnamed ${Jy.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=FE(e,null);t&&(this.id=Vc(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${Jy.getTypeName(this.shaderType)}:${this.id}`}getName(){return FE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||FE(e)||"(unnamed)",l=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)} shader ${a}`;for(let d=0;d<r.length;d++){const f=r[d];if(f.length<=1)continue;const p=f.split(":"),g=p[0],_=parseInt(p[2],10);if(isNaN(_))throw new Error(`GLSL compilation error in ${l}: ${n}`);"WARNING"!==g?s[_]=f:o[_]=f}const c=function(n,e=1,t=": "){const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return Tj(a,r-a.length)+t+s})}(e);return{shaderName:l,errors:Aj(s,c),warnings:Aj(o,c)}}(i,this.source,this.shaderType,this.id);throw fn.error(`GLSL compilation errors in ${r}\n${s}`)(),fn.warn(`GLSL compilation warnings in ${r}\n${o}`)(),new Error(`GLSL compilation errors in ${r}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class jM extends Jy{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class VM extends Jy{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Os=5126,ev=5124,tv=5125,UM={[Os]:[Os,1,"float"],35664:[Os,2,"vec2"],35665:[Os,3,"vec3"],35666:[Os,4,"vec4"],[ev]:[ev,1,"int"],35667:[ev,2,"ivec2"],35668:[ev,3,"ivec3"],35669:[ev,4,"ivec4"],[tv]:[tv,1,"uint"],36294:[tv,2,"uvec2"],36295:[tv,3,"uvec3"],36296:[tv,4,"uvec4"],35670:[Os,1,"bool"],35671:[Os,2,"bvec2"],35672:[Os,3,"bvec3"],35673:[Os,4,"bvec4"],35674:[Os,8,"mat2"],35685:[Os,8,"mat2x3"],35686:[Os,8,"mat2x4"],35675:[Os,12,"mat3"],35687:[Os,12,"mat3x2"],35688:[Os,12,"mat3x4"],35676:[Os,16,"mat4"],35689:[Os,16,"mat4x2"],35690:[Os,16,"mat4x3"]};function Nj(n){const e=UM[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function Pj(n,e){switch(n){case 5120:case 5121:case 5122:case 5123:n=Os}for(const t in UM){const[i,r,s]=UM[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class jre{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),l=t.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!gi(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=Nj(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const l={location:e,name:t,accessor:new sa(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=Nj(i),l={location:e,name:t,accessor:new sa({type:s,size:r*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Vre=35981,Ure=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Lj extends Fu{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",Ure),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=Vre}=e;return this.hash=t||"",this.vs="string"==typeof i?new jM(this.gl,{id:`${e.id}-vs`,source:i}):i,this.fs="string"==typeof r?new VM(this.gl,{id:`${e.id}-fs`,source:r}):r,sn(this.vs instanceof jM),sn(this.fs instanceof VM),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ko(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new jre(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:i,offset:r=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:d=c>0,vertexArray:f=null,transformFeedback:p,framebuffer:g,parameters:_={},uniforms:C,samplers:b}){if((C||b)&&(fn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(C||{})),fn.priority>=e){const H=g?g.id:"default",z=`mode=${Kd(this.gl,t)} verts=${i} instances=${c} indexType=${Kd(this.gl,l)} isInstanced=${d} isIndexed=${a} Framebuffer=${H}`;fn.log(e,z)()}return sn(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||d&&0===c||(f.bindForDraw(i,c,()=>{if(void 0!==g&&(_=Object.assign({},_,{framebuffer:g})),p){const H=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return sn(!1),0}}(t);p.begin(H)}this._bindTextures(),ec(this.gl,_,()=>{a&&d?this.gl2.drawElementsInstanced(t,i,l,r,c):a&&gi(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(t,s,o,i,l,r):a?this.gl.drawElements(t,i,l,r):d?this.gl2.drawArraysInstanced(t,r,i,c):this.gl.drawArrays(t,r,i)}),p&&p.end()}),0))}setUniforms(e={}){fn.priority>=2&&function(n,e,t){for(const i in n){const r=n[i];if((!t||Boolean(t[i]))&&!rre(r))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${i}`,r),new Error(`${e} Bad uniform ${i}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof Is&&(s=s.texture),s instanceof Cg)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=r;a.bind(l),s=l,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&sre(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new jM({handle:r});break;case 35632:i.fs=new VM({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=Vc(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),fn.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),fn.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||fn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=nre(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=Cj(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,`${r}[${o}]`),this._uniformSetters[`${r}[${o}]`]=Cj(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class nv{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new nv(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),d=this._getHash(t),f=this._getHash(i),p=c.map(he=>this._getHash(he.name)).sort(),g=o.map(he=>this._getHash(he)),_=Object.keys(r).sort(),C=Object.keys(s).sort(),b=[],H=[];for(const he of _)b.push(this._getHash(he)),b.push(this._getHash(r[he]));for(const he of C)H.push(this._getHash(he)),H.push(this._getHash(s[he]));const z=`${d}/${f}D${b.join("/")}M${p.join("/")}I${H.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[z]){const he=function(n,e){const{vs:t,fs:i}=e,r=Sie(e.modules||[]);return{gl:n,vs:Ej(n,Object.assign({},e,{source:t,type:Zy,modules:r})),fs:Ej(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Wie(r)}}(this.gl,{vs:t,fs:i,modules:c,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[z]=new Lj(this.gl,{hash:z,vs:he.vs,fs:he.fs,varyings:o,bufferMode:a}),this._getUniforms[z]=he.getUniforms||(Ie=>{}),this._useCounts[z]=0}return this._useCounts[z]++,this._programCache[z]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;t[r++]=a,i[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;i[l]||(t[r++]=a,i[l]=!0)}return t.length=r,t}}let kE=null;class Oa extends Fu{static isSupported(e,t={}){return!t.constantAttributeZero||gi(e)||"Chrome"===function(n){if(!JD())return"Node";if(Y3(n))return"Electron";const t=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":Uy.chrome?"Chrome":Uy.safari?"Safari":Uy.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Oa(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Oa.MAX_ATTRIBUTES=Oa.MAX_ATTRIBUTES||e.getParameter(34921),Oa.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Oa._setConstantFloatArray(e,t,i);break;case Int32Array:Oa._setConstantIntArray(e,t,i);break;case Uint32Array:Oa._setConstantUintArray(e,t,i);break;default:sn(!1)}}constructor(e,t={}){super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Oa.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return sn(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:d}=i,{gl:f,gl2:p}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,t.handle),c?(sn(gi(f)),p.vertexAttribIPointer(e,r,s,o,a)):f.vertexAttribPointer(e,r,s,l,o,a),f.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e,t=!0){return!t&&0===e&&!Oa.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new ir(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function(n,e){return new n(function(n){return(!kE||kE.byteLength<n)&&(kE=new ArrayBuffer(n)),kE}(n.BYTES_PER_ELEMENT*e),0,e)}(t.constructor,s);(function({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:sn(!1)}}static _setConstantIntArray(e,t,i){switch(sn(gi(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:sn(!1)}}static _setConstantUintArray(e,t,i){switch(sn(gi(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:sn(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return sn(Number.isFinite(t)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(t,e);default:return this.gl.getVertexAttrib(t,e)}})}}const Yre=/^(.+)__LOCATION_([0-9]+)$/,Kre=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Xre{constructor(e,t={}){this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Oa(e),SB(this,"VertexArray","v6.0",Kre),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,i={}){if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t,i={}){const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new ir(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof ir&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof ir&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,fn.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const d=sa.resolve(l.accessor,this.accessors[o]||{},i,r),{size:f,type:p}=d;return sn(Number.isFinite(f)&&Number.isFinite(p)),{location:o,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=Yre.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof ir)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof ir)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof ir))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(Oa.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Oa.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof ir){const a=i;if(o){const l=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,t={}){return fn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function iv(n,e={}){const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=","+(o%i==0?" ":"")),r+=iv(n[o],e);return`${r}${n.length>t?"...":"]"}`}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function kj(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let c,d,f,s="NOT PROVIDED",o=1,a=0,l=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),c=-1!==s.indexOf("nt")),e instanceof ir){const p=e,{data:g,changed:_}=p.getDebugData();let C;return d=_?"*":"",f=g,l=p.byteLength,a=l/g.BYTES_PER_ELEMENT/o,t?C=`${t.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${Kd(r,s)})`:(c=!0,C=`${l} bytes`),{[i]:`${d}${iv(f,{size:o,isInteger:c})}`,"Format ":C}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=-1!==s.indexOf("nt"),{[i]:`${iv(f,{size:o,isInteger:c})} (constant)`,"Format ":`${o}x${s} (constant)`}}function Jre(n,e){const{type:t,size:i}=e,r=Pj(t,i);return r?`${n} (${r.name})`:n}function Bj({header:n="Uniforms",program:e,uniforms:t,undefinedOnly:i=!1}){sn(e);const s=".*Matrix",a={},l=Object.keys(e._uniformSetters).sort();let c=0;for(const p of l)!p.match(".*_.*")&&!p.match(s)&&zM({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)p.match(s)&&zM({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;for(const p of l)a[p]||zM({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:i})&&c++;let d=0;const f={};if(!i)for(const p in t){const g=t[p];a[p]||(d++,f[p]={Type:`NOT USED: ${g}`,[n]:iv(g)})}return{table:a,count:c,unusedTable:f,unusedCount:d}}function zM({table:n,header:e,uniforms:t,uniformName:i,undefinedOnly:r}){const s=t[i],o=function(n){return null!=n}(s);return!(r&&o||(n[i]={[e]:o?iv(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function jj(n){const{type:e,size:t}=n.accessor,i=Pj(e,t);return i?`${i.name} ${n.name}`:n.name}const nse={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function rse(n,e){const{attributeMap:t=nse}=e||{};return t&&t[n]||n}function sse(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}sn(Number.isFinite(e.size),`attribute ${n} needs size`)}const Vj=()=>{},lse={};class BE{constructor(e,t={}){const{id:i=Vc("model")}=t;sn(EE(e)),this.id=i,this.gl=e,this.id=t.id||Vc("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||nv.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},sn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return sn(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return sn(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=rse(s,undefined);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const l=o.value,c=ht({},o);delete c.value,i[a]=[new ir(n,l),c],sse(s,c)}}if(r){const s=r.value||r;sn(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new ir(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(Eg(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return pM(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;let c;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),fn.priority>=2&&(c=this._logDrawCallStart(2));const d=this.vertexArray.getDrawParams(),{isIndexed:f=d.isIndexed,indexType:p=d.indexType,indexOffset:g=d.indexOffset,vertexArrayInstanced:_=d.isInstanced}=this.props;_&&!this.isInstanced&&fn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:C,instanceCount:b}=this,{onBeforeRender:H=Vj,onAfterRender:z=Vj}=this.props;H(),this.program.setUniforms(this.uniforms);const he=this.program.draw(Object.assign(lse,e,{logPriority:c,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:p,isInstanced:C,instanceCount:b,offset:f?g:0}));return z(),fn.priority>=2&&this._logDrawCallEnd(c,l,i),he}transform(e={}){const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return fn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:d}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}sn(t instanceof Lj,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Xre(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof ir&&t.delete()}}_setAnimationProps(e){this.animated&&sn(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(Eg(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new cj(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),fn.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:fn.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function({vertexArray:n,header:e="Attributes"}){if(!n.configuration)return{};const t={};n.elements&&(t.ELEMENT_ARRAY_BUFFER=kj(n,n.elements,null,e));const i=n.values;for(const r in i){const s=n._getAttributeInfo(r);if(s){let o=`${r}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${r}: ${Jre(s.name,a)}`),t[o]=kj(n,i[r],a,e)}}return t}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=Bj({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:c,count:d}=Bj({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&fn.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&fn.log("UNUSED UNIFORMS",Object.keys(a))();const f=function(n){const e={},t=`Accessors for ${n.id}`;for(const i of n.attributeInfos)i&&(e[`in ${jj(i)}`]={[t]:JSON.stringify(i.accessor)});for(const i of n.varyingInfos)i&&(e[`out ${jj(i)}`]={[t]:JSON.stringify(i.accessor)});return e}(this.vertexArray.configuration);fn.table(e,s)(),fn.table(e,o)(),fn.table(e+1,f)(),r&&r.log({logLevel:2,message:`Rendered to ${r.id}`}),fn.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class HM{static isSupported(e){return gi(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();sn(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new BE(t,Object.assign({},e,{fs:e.fs||lj({version:uj(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(n){return!(Eg(n.feedbackBuffers)&&Eg(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new iie(e,t)),function(n){return!(Eg(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new _ie(e,t)),sn(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}function jE(){}const dse={onStart:jE,onUpdate:jE,onInterrupt:jE,onEnd:jE};class rv{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=ht(ht({},dse),e),this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const vse={interpolation:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="interpolation",this.transition=new rv(i),this.attribute=t,this.attributeInTransition=new AM(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(n,e){const t=ij(e.size);return new HM(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new ir(e,r),new ir(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();const{buffers:r,attribute:s}=this;rj(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)sj(ht({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=xM(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:nj(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{time:t,settings:{duration:i,easing:r}}=this.transition,s=r(t/i);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},spring:class{constructor({gl:e,attribute:t,timeline:i}){this.gl=e,this.type="spring",this.transition=new rv(i),this.attribute=t,this.attributeInTransition=new AM(e,zn(ht({},t.settings),{normalized:!1})),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(n){return new Da(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(n,e){return new Is(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(n,e,t){const i=ij(e.size);return new HM(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new ir(e,r),new ir(e,r),new ir(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)sj(ht({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=xM(s,t),this.attributeInTransition.update({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:nj(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),rj(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),CE(i)[0]>0||r.end(),!0)}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}};class bse{constructor(e,{id:t,timeline:i}){this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=HM.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);!o||this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void Fi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=vse[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Fi.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const Uj="attributeManager.invalidate";class Ase{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new bse(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,t){this._add(e,t)}addInstanced(e,t){this._add(e,t,{instanced:1})}remove(e){for(let t=0;t<e.length;t++){const i=e[t];void 0!==this.attributes[i]&&(this.attributes[i].delete(),delete this.attributes[i])}}invalidate(e,t){const i=this._invalidateTrigger(e,t);bo(Uj,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);bo(Uj,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}={}){let l=!1;bo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const d=this.attributes[c],f=d.settings.accessor;d.startIndices=i,s[c]&&Fi.removed("props.".concat(c),"data.attributes.".concat(c))(),d.setExternalBuffer(o[c])||d.setBinaryValue(o[f],e.startIndices)||!o[f]&&d.setConstantValue(s[f])||d.needsUpdate()&&(l=!0,this._updateAttribute({attribute:d,numInstances:t,data:e,props:s,context:a})),this.needsRedraw|=d.needsRedraw()}l&&bo("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r=ht({},i.getAttributes());for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}getAccessors(){return this.updateTriggers}_add(e,t,i={}){t&&Fi.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const r in e)this.attributes[r]=this._createAttribute(r,e[r],i);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r=zn(ht({},t),{id:e,isIndexed:t.isIndexed||t.elements||!1,constant:t.constant||!1,size:(t.elements?1:t.size)||1,value:t.value||null,divisor:t.instanced||i.instanced?1:t.divisor||0});return new AM(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;bo("attribute.updateStart",t),t.allocate(i)&&bo("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,bo("attribute.updateEnd",t,i))}}function Hj(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function Gj(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const Ise={interpolation:class extends rv{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=xE(t,i,o)}},spring:class extends rv{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=Hj(n[o],e[o],t[o],i,r);return s}return Hj(n,e,t,i,r)}(s,o,t,i,r);const l=Gj(a,t),c=Gj(a,o);l<1e-5&&c<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class Ose{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;t=c,this.remove(e)}if(!(r=tj(r)))return;const o=Ise[r.type];if(!o)return void Fi.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start(zn(ht({},r),{fromValue:t,toValue:i})),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const VE={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},{COMPONENT:Rse}=VE;function Fse(n,e){if(!n.transitions)return null;const t={},i=$M(n);for(const r in n.transitions){const s=i[r],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&GM(n[r],e[r],s)&&(t[r]=!0)}return t}function $j({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}={}){if(e===n)return null;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=GM(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=GM(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return null}function GM(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function Bse(n,e){if(null===e)return"oldProps is null, initial diff";const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function Wj(n,e,t){let i=n.updateTriggers[t];i=null==i?{}:i;let r=e.updateTriggers[t];return r=null==r?{}:r,$j({oldProps:r,newProps:i,triggerName:t})}function $M(n){const e=n[Rse],t=e&&e.constructor;return t?t._propTypes:{}}function Gse(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function UE(n){let t,e={};return i=>{for(const r in i)if(!Gse(i[r],e[r])){t=n(i),e=i;break}return t}}function $se(n,e){if(!e)return n;const t=ht(ht({},n),e);if("defines"in e&&(t.defines=ht(ht({},n.defines),e.defines)),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i=ht({},n.inject);for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function zE(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],g=e[11],_=e[12],C=e[13],b=e[14],H=e[15],z=t*a-i*o,he=t*l-r*o,Ie=t*c-s*o,Fe=i*l-r*a,We=i*c-s*a,dt=r*c-s*l,Mt=d*C-f*_,Ot=d*b-p*_,Lt=d*H-g*_,Zt=f*b-p*C,en=f*H-g*C,wt=p*H-g*b,Ct=z*wt-he*en+Ie*Zt+Fe*Lt-We*Ot+dt*Mt;return Ct?(n[0]=(a*wt-l*en+c*Zt)*(Ct=1/Ct),n[1]=(r*en-i*wt-s*Zt)*Ct,n[2]=(C*dt-b*We+H*Fe)*Ct,n[3]=(p*We-f*dt-g*Fe)*Ct,n[4]=(l*Lt-o*wt-c*Ot)*Ct,n[5]=(t*wt-r*Lt+s*Ot)*Ct,n[6]=(b*Ie-_*dt-H*he)*Ct,n[7]=(d*dt-p*Ie+g*he)*Ct,n[8]=(o*en-a*Lt+c*Mt)*Ct,n[9]=(i*Lt-t*en-s*Mt)*Ct,n[10]=(_*We-C*Ie+H*z)*Ct,n[11]=(f*Ie-d*We-g*z)*Ct,n[12]=(a*Ot-o*Zt-l*Mt)*Ct,n[13]=(t*Zt-i*Ot+r*Mt)*Ct,n[14]=(C*he-_*Fe-b*z)*Ct,n[15]=(d*Fe-f*he+p*z)*Ct,n):null}function Uc(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],f=e[8],p=e[9],g=e[10],_=e[11],C=e[12],b=e[13],H=e[14],z=e[15],he=t[0],Ie=t[1],Fe=t[2],We=t[3];return n[0]=he*i+Ie*a+Fe*f+We*C,n[1]=he*r+Ie*l+Fe*p+We*b,n[2]=he*s+Ie*c+Fe*g+We*H,n[3]=he*o+Ie*d+Fe*_+We*z,n[4]=(he=t[4])*i+(Ie=t[5])*a+(Fe=t[6])*f+(We=t[7])*C,n[5]=he*r+Ie*l+Fe*p+We*b,n[6]=he*s+Ie*c+Fe*g+We*H,n[7]=he*o+Ie*d+Fe*_+We*z,n[8]=(he=t[8])*i+(Ie=t[9])*a+(Fe=t[10])*f+(We=t[11])*C,n[9]=he*r+Ie*l+Fe*p+We*b,n[10]=he*s+Ie*c+Fe*g+We*H,n[11]=he*o+Ie*d+Fe*_+We*z,n[12]=(he=t[12])*i+(Ie=t[13])*a+(Fe=t[14])*f+(We=t[15])*C,n[13]=he*r+Ie*l+Fe*p+We*b,n[14]=he*s+Ie*c+Fe*g+We*H,n[15]=he*o+Ie*d+Fe*_+We*z,n}function sv(n,e,t){var o,a,l,c,d,f,p,g,_,C,b,H,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],l=e[2],c=e[3],d=e[4],f=e[5],p=e[6],g=e[7],_=e[8],C=e[9],b=e[10],H=e[11],n[0]=o=e[0],n[1]=a,n[2]=l,n[3]=c,n[4]=d,n[5]=f,n[6]=p,n[7]=g,n[8]=_,n[9]=C,n[10]=b,n[11]=H,n[12]=o*i+d*r+_*s+e[12],n[13]=a*i+f*r+C*s+e[13],n[14]=l*i+p*r+b*s+e[14],n[15]=c*i+g*r+H*s+e[15]),n}function ov(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function qj(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],f=e[10],p=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+c*i,n[5]=o*r+d*i,n[6]=a*r+f*i,n[7]=l*r+p*i,n[8]=c*r-s*i,n[9]=d*r-o*i,n[10]=f*r-a*i,n[11]=p*r-l*i,n}function Yj(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],d=e[5],f=e[6],p=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+c*i,n[1]=o*r+d*i,n[2]=a*r+f*i,n[3]=l*r+p*i,n[4]=c*r-s*i,n[5]=d*r-o*i,n[6]=f*r-a*i,n[7]=p*r-l*i,n}function Kj(n,e,t,i,r){var o,s=1/Math.tan(e/2);return n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i),n}function Xj(n,e){var t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=n[6],c=n[7],d=n[8],f=n[9],p=n[10],g=n[11],_=n[12],C=n[13],b=n[14],H=n[15],z=e[0],he=e[1],Ie=e[2],Fe=e[3],We=e[4],dt=e[5],Mt=e[6],Ot=e[7],Lt=e[8],Zt=e[9],en=e[10],wt=e[11],Ct=e[12],Ht=e[13],ft=e[14],Xt=e[15];return Math.abs(t-z)<=fr*Math.max(1,Math.abs(t),Math.abs(z))&&Math.abs(i-he)<=fr*Math.max(1,Math.abs(i),Math.abs(he))&&Math.abs(r-Ie)<=fr*Math.max(1,Math.abs(r),Math.abs(Ie))&&Math.abs(s-Fe)<=fr*Math.max(1,Math.abs(s),Math.abs(Fe))&&Math.abs(o-We)<=fr*Math.max(1,Math.abs(o),Math.abs(We))&&Math.abs(a-dt)<=fr*Math.max(1,Math.abs(a),Math.abs(dt))&&Math.abs(l-Mt)<=fr*Math.max(1,Math.abs(l),Math.abs(Mt))&&Math.abs(c-Ot)<=fr*Math.max(1,Math.abs(c),Math.abs(Ot))&&Math.abs(d-Lt)<=fr*Math.max(1,Math.abs(d),Math.abs(Lt))&&Math.abs(f-Zt)<=fr*Math.max(1,Math.abs(f),Math.abs(Zt))&&Math.abs(p-en)<=fr*Math.max(1,Math.abs(p),Math.abs(en))&&Math.abs(g-wt)<=fr*Math.max(1,Math.abs(g),Math.abs(wt))&&Math.abs(_-Ct)<=fr*Math.max(1,Math.abs(_),Math.abs(Ct))&&Math.abs(C-Ht)<=fr*Math.max(1,Math.abs(C),Math.abs(Ht))&&Math.abs(b-ft)<=fr*Math.max(1,Math.abs(b),Math.abs(ft))&&Math.abs(H-Xt)<=fr*Math.max(1,Math.abs(H),Math.abs(Xt))}function Qj(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function HE(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}!function(){var n=new oa(4);oa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const Zj=[0,0,0,0],_oe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],yoe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],voe=[0,0,0],boe=[0,0,0],woe=UE(function({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=function(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=Zj,l=Zj,c=n.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:f,offsetMode:p}=Jj(n,e,t);return p&&(l=n.projectPosition(d||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=HE([],l,o),s=i||s,o=Uc([],r,s),o=Uc([],o,_oe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:d}}(n,t,i),d=n.getDistanceScales(),f=[n.width*e,n.height*e],p=n.projectionMatrix.transform([0,0,-n.focalDistance,1])[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:voe,project_uScale:n.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(c){const _=n.getDistanceScales(c);switch(t){case Oi.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=_.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=_.unitsPerMeter2;break;case Oi.LNGLAT:case Oi.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=_.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=_.unitsPerDegree2;break;case Oi.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,_.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,_.unitsPerMeter2[2]]}}return g});function Jj(n,e,t=boe){let r,i=t,s=!0;switch(r=e===Oi.LNGLAT_OFFSETS||e===Oi.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Bc.WEB_MERCATOR:(e===Oi.LNGLAT||e===Oi.CARTESIAN)&&(s=!1);break;case Bc.WEB_MERCATOR_AUTO_OFFSET:e===Oi.LNGLAT?i=r:e===Oi.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case Bc.IDENTITY:i=n.position.map(Math.fround);break;case Bc.GLOBE:s=!1,r=null;break;default:s=!1}return i[2]=i[2]||0,{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}class xoe extends vM{get ELEMENTS(){return ku(!1),0}get RANK(){return ku(!1),0}toString(){let e="[";if(Sr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=` ${this[i*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=eo(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function Rg(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function WM(n,e){return n[0]=-e[0],n[1]=-e[1],n}function eV(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}!function(){var n=new oa(2);oa!=Float32Array&&(n[0]=0,n[1]=0)}();const tV=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Doe=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Moe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Ng={};class $n extends xoe{static get IDENTITY(){return Ng.IDENTITY=Ng.IDENTITY||Object.freeze(new $n(tV)),Ng.IDENTITY}static get ZERO(){return Ng.ZERO=Ng.ZERO||Object.freeze(new $n(Doe)),Ng.ZERO}get INDICES(){return Moe}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,l,c,d,f,p,g,_,C,b){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=d,this[10]=f,this[11]=p,this[12]=g,this[13]=_,this[14]=C,this[15]=b,this.check()}setRowMajor(e,t,i,r,s,o,a,l,c,d,f,p,g,_,C,b){return this[0]=e,this[1]=s,this[2]=c,this[3]=g,this[4]=t,this[5]=o,this[6]=d,this[7]=_,this[8]=i,this[9]=a,this[10]=f,this[11]=C,this[12]=r,this[13]=l,this[14]=p,this[15]=b,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(tV)}fromQuaternion(e){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,l=r+r,c=t*o,d=i*o,f=i*a,p=r*o,g=r*a,_=r*l,C=s*o,b=s*a,H=s*l;n[0]=1-f-_,n[1]=d+H,n[2]=p-b,n[3]=0,n[4]=d-H,n[5]=1-c-_,n[6]=g+C,n[7]=0,n[8]=p+b,n[9]=g-C,n[10]=1-c-f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:i,top:r,near:s,far:o}){return o===1/0?$n._computeInfinitePerspectiveOffCenter(this,e,t,i,r,s):function(n,e,t,i,r,s,o){var a=1/(t-e),l=1/(r-i),c=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*l,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*l,n[10]=(o+s)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*c,n[15]=0}(this,e,t,i,r,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,i,r,s,o){const l=2*o/(s-r),c=(i+t)/(i-t),d=(s+r)/(s-r),g=-2*o;return e[0]=2*o/(i-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=c,e[9]=d,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,t,i){return 1===arguments.length&&({eye:e,center:t,up:i}=e),function(n,e,t,i){var r,s,o,a,l,c,d,f,p,g,_=e[0],C=e[1],b=e[2],H=i[0],z=i[1],he=i[2],Ie=t[0],Fe=t[1],We=t[2];Math.abs(_-Ie)<fr&&Math.abs(C-Fe)<fr&&Math.abs(b-We)<fr?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(d=_-Ie,f=C-Fe,p=b-We,r=z*(p*=g=1/Math.hypot(d,f,p))-he*(f*=g),s=he*(d*=g)-H*p,o=H*f-z*d,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=f*o-p*s,l=p*r-d*o,c=d*s-f*r,(g=Math.hypot(a,l,c))?(a*=g=1/g,l*=g,c*=g):(a=0,l=0,c=0),n[0]=r,n[1]=a,n[2]=d,n[3]=0,n[4]=s,n[5]=l,n[6]=f,n[7]=0,n[8]=o,n[9]=c,n[10]=p,n[11]=0,n[12]=-(r*_+s*C+o*b),n[13]=-(a*_+l*C+c*b),n[14]=-(d*_+f*C+p*b),n[15]=1)}(this,e,t=t||[0,0,0],i=i||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:i,top:r,near:s=.1,far:o=500}){return function(n,e,t,i,r,s,o){var a=1/(e-t),l=1/(i-r),c=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*l,n[14]=(o+s)*c,n[15]=1}(this,e,t,i,r,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:i=1,near:r=.1,far:s=500}){if(e>2*Math.PI)throw Error("radians");const a=i*Math.tan(e/2),l=a*t;return(new $n).ortho({left:-l,right:l,bottom:-a,top:a,near:r,far:s})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return Kj(this,e,i,r,s),this.check()}determinant(){return function(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],l=n[7],c=n[8],d=n[9],f=n[10],p=n[11],g=n[12],_=n[13],C=n[14],b=n[15];return(e*o-t*s)*(f*b-p*C)-(e*a-i*s)*(d*b-p*_)+(e*l-r*s)*(d*C-f*_)+(t*a-i*o)*(c*b-p*g)-(t*l-r*o)*(c*C-f*g)+(i*l-r*a)*(c*_-d*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const i=this.getScale(t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return zE(this,this),this.check()}multiplyLeft(e){return Uc(this,e,this),this.check()}multiplyRight(e){return Uc(this,this,e),this.check()}rotateX(e){return qj(this,this,e),this.check()}rotateY(e){return function(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],d=e[9],f=e[10],p=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-c*i,n[1]=o*r-d*i,n[2]=a*r-f*i,n[3]=l*r-p*i,n[8]=s*i+c*r,n[9]=o*i+d*r,n[10]=a*i+f*r,n[11]=l*i+p*r}(this,this,e),this.check()}rotateZ(e){return Yj(this,this,e),this.check()}rotateXYZ([e,t,i]){return this.rotateX(e).rotateY(t).rotateZ(i)}rotateAxis(e,t){return function(n,e,t,i){var l,c,d,f,p,g,_,C,b,H,z,he,Ie,Fe,We,dt,Mt,Ot,Lt,Zt,en,wt,Ct,Ht,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<fr||(r*=a=1/a,s*=a,o*=a,l=Math.sin(t),c=Math.cos(t),p=e[1],g=e[2],_=e[3],b=e[5],H=e[6],z=e[7],Ie=e[9],Fe=e[10],We=e[11],Lt=r*s*(d=1-c)-o*l,Zt=s*s*d+c,en=o*s*d+r*l,wt=r*o*d+s*l,Ct=s*o*d-r*l,Ht=o*o*d+c,n[0]=(f=e[0])*(dt=r*r*d+c)+(C=e[4])*(Mt=s*r*d+o*l)+(he=e[8])*(Ot=o*r*d-s*l),n[1]=p*dt+b*Mt+Ie*Ot,n[2]=g*dt+H*Mt+Fe*Ot,n[3]=_*dt+z*Mt+We*Ot,n[4]=f*Lt+C*Zt+he*en,n[5]=p*Lt+b*Zt+Ie*en,n[6]=g*Lt+H*Zt+Fe*en,n[7]=_*Lt+z*Zt+We*en,n[8]=f*wt+C*Ct+he*Ht,n[9]=p*wt+b*Ct+Ie*Ht,n[10]=g*wt+H*Ct+Fe*Ht,n[11]=_*wt+z*Ct+We*Ht,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?ov(this,this,e):ov(this,this,[e,e,e]),this.check()}translate(e){return sv(this,this,e),this.check()}transform(e,t){return 4===e.length?(AE(t=HE(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;switch(i){case 2:t=function(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:t=$B(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return AE(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:t=WB(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return AE(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}transformPoint(e,t){return bM("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return bM("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return bM("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function Pg(n,e){const t=HE([],e,n);return Qj(t,t,1/t[3]),t}function nV(n,e){const t=n%e;return t<0?e+t:t}const qM=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function ju(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const nc=Math.PI,iV=nc/4,ic=nc/180,YM=180/nc,KM=4003e4;function Fg([n,e]){return ju(Number.isFinite(n)),ju(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude"),[512*(n*ic+nc)/(2*nc),512*(nc+Math.log(Math.tan(iV+e*ic*.5)))/(2*nc)]}function Zd([n,e]){const t=n/512*(2*nc)-nc,i=2*(Math.atan(Math.exp(e/512*(2*nc)-nc))-iV);return[t*YM,i*YM]}function $E({latitude:n,longitude:e,highPrecision:t=!1}){ju(Number.isFinite(n)&&Number.isFinite(e));const i={},s=Math.cos(n*ic),o=512/360,a=o/s,l=512/KM/s;if(i.unitsPerMeter=[l,l,l],i.metersPerUnit=[1/l,1/l,1/l],i.unitsPerDegree=[o,a,l],i.degreesPerUnit=[1/o,1/a,1/l],t){const c=ic*Math.tan(n*ic)/s,f=512/KM*c,p=f/a*l;i.unitsPerDegree2=[0,o*c/2,f],i.unitsPerMeter2=[p,0,p]}return i}function sV(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=$E({longitude:t,latitude:i,highPrecision:!0}),d=Fg(n);d[0]+=s*(l[0]+c[0]*o),d[1]+=o*(l[1]+c[1]*o);const f=Zd(d),p=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[f[0],f[1],p]:f}function oV({height:n,pitch:e,bearing:t,altitude:i,scale:r,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return sv(o,o,[0,0,-i]),qj(o,o,-e*ic),Yj(o,o,t*ic),ov(o,o,[r/=n,r,r]),s&&sv(o,o,function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),o}function aV({width:n,height:e,fovy:t=WE(1.5),altitude:i,pitch:r=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==i&&(t=WE(i));const a=.5*t*ic,l=lV(t),c=r*ic,d=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/e,focalDistance:l,near:s,far:(Math.sin(c)*d+l)*o}}function WE(n){return 2*Math.atan(.5/n)*YM}function lV(n){return.5/Math.tan(.5*n*ic)}function XM(n,e){const[t,i,r=0]=n;return ju(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Pg(e,[t,i,r,1])}function vf(n,e,t=0){const[i,r,s]=n;if(ju(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Pg(e,[i,r,s,1]);const o=Pg(e,[i,r,0,1]),a=Pg(e,[i,r,1,1]),l=o[2],c=a[2];return eV([],o,a,l===c?0:((t||0)-l)/(c-l))}function cV({width:n,height:e,bounds:t,minExtent:i=0,maxZoom:r=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[c,d]]=t;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:ju(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const f=new qE({width:n,height:e,longitude:0,latitude:0,zoom:0}),p=f.project([a,d]),g=f.project([c,l]),_=[Math.max(Math.abs(g[0]-p[0]),i),Math.max(Math.abs(g[1]-p[1]),i)],C=[n-s.left-s.right-2*Math.abs(o[0]),e-s.top-s.bottom-2*Math.abs(o[1])];ju(C[0]>0&&C[1]>0);const b=C[0]/_[0],H=C[1]/_[1],Fe=f.unproject([(g[0]+p[0])/2+(s.right-s.left)/2/b,(g[1]+p[1])/2+(s.bottom-s.top)/2/H]),We=Math.min(r,f.zoom+qM(Math.abs(Math.min(b,H))));return ju(Number.isFinite(We)),{longitude:Fe[0],latitude:Fe[1],zoom:We}}const uV=Math.PI/180;function dV(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let l,c;return(n.fovy?.5*n.fovy*uV:Math.atan(.5/n.altitude))>(90-n.pitch)*uV-.01?(l=hV(n,0,e),c=hV(n,t,e)):(l=r([0,0],s),c=r([t,0],s)),[o,a,c,l]}function hV(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Pg(i,[e,0,1,1]),s=Pg(i,[e,n.height,1,1]),c=Zd(eV([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return c[2]=t,c}class qE{constructor({width:e,height:t,latitude:i=0,longitude:r=0,zoom:s=0,pitch:o=0,bearing:a=0,altitude:l=null,fovy:c=null,position:d=null,nearZMultiplier:f=.02,farZMultiplier:p=1.01}={width:1,height:1}){e=e||1,t=t||1,null===c&&null===l?c=WE(l=1.5):null===c?c=WE(l):null===l&&(l=lV(c));const g=function(n){return Math.pow(2,n)}(s);l=Math.max(.75,l);const _=$E({longitude:r,latitude:i}),C=Fg([r,i]);C[2]=0,d&&function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2]}(C,C,function(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}([],d,_.unitsPerMeter)),this.projectionMatrix=function({width:n,height:e,pitch:t,altitude:i,fovy:r,nearZMultiplier:s,farZMultiplier:o}){const{fov:a,aspect:l,near:c,far:d}=aV({width:n,height:e,altitude:i,fovy:r,pitch:t,nearZMultiplier:s,farZMultiplier:o});return Kj([],a,l,c,d)}({width:e,height:t,pitch:o,fovy:c,nearZMultiplier:f,farZMultiplier:p}),this.viewMatrix=oV({height:t,scale:g,center:C,pitch:o,bearing:a,altitude:l}),this.width=e,this.height=t,this.scale=g,this.latitude=i,this.longitude=r,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=l,this.fovy=c,this.center=C,this.meterOffset=d||[0,0,0],this.distanceScales=_,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:e,height:t,projectionMatrix:i,viewMatrix:r}=this,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Uc(s,s,i),Uc(s,s,r),this.viewProjectionMatrix=s;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ov(o,o,[e/2,-t/2,1]),sv(o,o,[1,-1,0]),Uc(o,o,s);const a=zE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}equals(e){return e instanceof qE&&e.width===this.width&&e.height===this.height&&Xj(e.projectionMatrix,this.projectionMatrix)&&Xj(e.viewMatrix,this.viewMatrix)}project(e,{topLeft:t=!0}={}){const r=XM(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=t?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,s,o]=e,c=vf([r,t?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[d,f,p]=this.unprojectPosition(c);return Number.isFinite(o)?[d,f,p]:Number.isFinite(i)?[d,f,i]:[d,f]}projectPosition(e){const[t,i]=Fg(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=Zd(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){return Fg(e)}unprojectFlat(e){return Zd(e)}getMapCenterByLngLatPosition({lngLat:e,pos:t}){const i=vf(t,this.pixelUnprojectionMatrix),s=Rg([],Fg(e),WM([],i));return Zd(Rg([],this.center,s))}getLocationAtPoint({lngLat:e,pos:t}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:t})}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=cV(Object.assign({width:i,height:r,bounds:e},t));return new qE({width:i,height:r,longitude:s,latitude:o,zoom:a})}getBounds(e){const t=this.getBoundingRegion(e),i=Math.min(...t.map(a=>a[0])),r=Math.max(...t.map(a=>a[0]));return[[i,Math.min(...t.map(a=>a[1]))],[r,Math.max(...t.map(a=>a[1]))]]}getBoundingRegion(e={}){return dV(this,e.z||0)}}const koe=Math.PI/180,Boe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],QM=[0,0,0],Voe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};let Lg=(()=>{class n{constructor(t={}){const{id:i=null,x:r=0,y:s=0,width:o=1,height:a=1}=t;this.id=i||this.constructor.displayName||"viewport",this.x=r,this.y=s,this.width=o||1,this.height=a||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Bc.WEB_MERCATOR:Bc.WEB_MERCATOR_AUTO_OFFSET:Bc.IDENTITY}equals(t){return t instanceof n&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Ky(t.projectionMatrix,this.projectionMatrix)&&Ky(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:i=!0}={}){const s=XM(this.projectPosition(t),this.pixelProjectionMatrix),[o,a]=s,l=i?a:this.height-a;return 2===t.length?[o,l]:[o,l,s[2]]}unproject(t,{topLeft:i=!0,targetZ:r}={}){const[s,o,a]=t,d=vf([s,i?o:this.height-o,a],this.pixelUnprojectionMatrix,r&&r*this.distanceScales.unitsPerMeter[2]),[f,p,g]=this.unprojectPosition(d);return Number.isFinite(a)?[f,p,g]:Number.isFinite(r)?[f,p,r]:[f,p]}projectPosition(t){const[i,r]=this.projectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[i,r]=this.unprojectFlat(t);return[i,r,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return this.isGeospatial?Fg(t):t}unprojectFlat(t){return this.isGeospatial?Zd(t):t}getBounds(t={}){const i={targetZ:t.z||0},r=this.unproject([0,0],i),s=this.unproject([this.width,0],i),o=this.unproject([0,this.height],i),a=this.unproject([this.width,this.height],i);return[Math.min(r[0],s[0],o[0],a[0]),Math.min(r[1],s[1],o[1],a[1]),Math.max(r[0],s[0],o[0],a[0]),Math.max(r[1],s[1],o[1],a[1])]}getDistanceScales(t=null){return t?$E({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:i,width:r=1,height:s=1}){return t<this.x+this.width&&this.x<t+r&&i<this.y+this.height&&this.y<i+s}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){const e={};return e.left=Ag(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),e.right=Ag(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),e.bottom=Ag(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),e.top=Ag(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),e.near=Ag(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),e.far=Ag(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),e}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,i){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:t,fovyRadians:i,aspect:r,focalDistance:s,near:o,far:a}){return t?(new $n).orthographic({fovy:i,aspect:r,focalDistance:s,near:o,far:a}):(new $n).perspective({fovy:i,aspect:r,near:o,far:a})}_initViewMatrix(t){const{viewMatrix:i=Boe,longitude:r=null,latitude:s=null,zoom:o=null,position:a=null,modelMatrix:l=null,focalDistance:c=1,distanceScales:d=null}=t;this.isGeospatial=Number.isFinite(s)&&Number.isFinite(r),this.zoom=o,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){ju(Number.isFinite(n));const e=Math.cos(n*ic);return function(n){return qM(n)}(KM*e)-9}({latitude:s})+Math.log2(c):0);const f=Math.pow(2,this.zoom);this.scale=f,this.distanceScales=this.isGeospatial?$E({latitude:s,longitude:r}):d||Voe,this.focalDistance=c,this.distanceScales.metersPerUnit=new vo(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new vo(this.distanceScales.unitsPerMeter),this.position=QM,this.meterOffset=QM,a&&(this.position=a,this.modelMatrix=l,this.meterOffset=l?l.transformVector(a):a),this.isGeospatial?(this.longitude=r,this.latitude=s,this.center=this._getCenterInWorld({longitude:r,latitude:s})):this.center=a?this.projectPosition(a):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new $n).multiplyRight(this.viewMatrixUncentered).translate(new vo(this.center||QM).negate())}_getCenterInWorld({longitude:t,latitude:i}){const{meterOffset:r,distanceScales:s}=this,o=new vo(this.projectPosition([t,i,0]));if(r){const a=new vo(r).scale(s.unitsPerMeter);o.add(a)}return o}_initProjectionMatrix(t){const{projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,focalDistance:c=1}=t;this.projectionMatrix=i||this._createProjectionMatrix({orthographic:r,fovyRadians:s||o*koe,aspect:this.width/this.height,focalDistance:c,near:a,far:l})}_initPixelMatrices(){const t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Uc(t,t,this.projectionMatrix),Uc(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=zE([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ov(i,i,[this.width/2,-this.height/2,1]),sv(i,i,[1,-1,0]),Uc(r,i,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=i,this.pixelUnprojectionMatrix=zE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Fi.warn("Pixel project matrix not invertible")()}}return n.displayName="Viewport",n})(),_V=(()=>{class n extends Lg{constructor(t={}){const{latitude:i=0,longitude:r=0,zoom:s=11,pitch:o=0,bearing:a=0,nearZMultiplier:l=.1,farZMultiplier:c=1.01,orthographic:d=!1,repeat:f=!1,worldOffset:p=0}=t;let{width:g,height:_,altitude:C=1.5}=t;const b=Math.pow(2,s);g=g||1,_=_||1,C=Math.max(.75,C);const{fov:H,aspect:z,focalDistance:he,near:Ie,far:Fe}=aV({width:g,height:_,pitch:o,altitude:C,nearZMultiplier:l,farZMultiplier:c});let We=oV({height:_,pitch:o,bearing:a,scale:b,altitude:C});p&&(We=(new $n).translate([512*p,0,0]).multiplyLeft(We)),super(zn(ht({},t),{width:g,height:_,viewMatrix:We,longitude:r,latitude:i,zoom:s,orthographic:d,fovyRadians:H,aspect:z,focalDistance:he,near:Ie,far:Fe})),this.latitude=i,this.longitude=r,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=C,this.orthographic=d,this._subViewports=f?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),i=Math.floor((t[0]+180)/360),r=Math.ceil((t[2]-180)/360);for(let s=i;s<=r;s++){const o=s?new n(zn(ht({},this),{worldOffset:s})):this;this._subViewports.push(o)}}return this._subViewports}addMetersToLngLat(t,i){return sV(t,i)}panByPosition(t,i){const r=vf(i,this.pixelUnprojectionMatrix),o=Rg([],this.projectFlat(t),WM([],r)),a=Rg([],this.center,o),[l,c]=this.unprojectFlat(a);return{longitude:l,latitude:c}}getBounds(t={}){const i=dV(this,t.z||0);return[Math.min(i[0][0],i[1][0],i[2][0],i[3][0]),Math.min(i[0][1],i[1][1],i[2][1],i[3][1]),Math.max(i[0][0],i[1][0],i[2][0],i[3][0]),Math.max(i[0][1],i[1][1],i[2][1],i[3][1])]}fitBounds(t,i={}){const{width:r,height:s}=this,{longitude:o,latitude:a,zoom:l}=cV(ht({width:r,height:s,bounds:t},i));return new n({width:r,height:s,longitude:o,latitude:a,zoom:l})}}return n.displayName="WebMercatorViewport",n})();function ZM(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof _V){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function yV(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,l=0]=n;switch(t&&([o,a,l]=HE([],[o,a,l,1],t)),i){case Oi.LNGLAT:return ZM([o,a,l],e,s);case Oi.LNGLAT_OFFSETS:return ZM([o+r[0],a+r[1],l+(r[2]||0)],e,s);case Oi.METER_OFFSETS:return ZM(sV(r,[o,a,l]),e,s);case Oi.CARTESIAN:default:return e.isGeospatial?[o+r[0],a+r[1],l+r[2]]:e.projectPosition([o,a,l])}}const Hoe={10241:9987,10240:9729,10242:33071,10243:33071},JM={},Woe={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>Boolean(n)===Boolean(e)},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||cv(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>eI(n,e)},accessor:{validate(n,e){const t=YE(n);return"function"===t||t===YE(e.value)},equal:(n,e,t)=>"function"==typeof e||eI(n,e)},array:{validate:(n,e)=>e.optional&&!n||cv(n),equal:(n,e,t)=>t.compare?eI(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t?t.props:{};return i&&n?i(n):n}},image:{transform:(n,e,t)=>function(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof Da)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new Da(t,zn(ht({},e),{parameters:ht(ht(ht({},Hoe),i),n.props.textureParameters)}));return JM[r.id]=!0,r}(t,n),release:n=>{!function(n){!n||!(n instanceof Da)||JM[n.id]&&(n.delete(),delete JM[n.id])}(n)}}};function eI(n,e){if(n===e)return!0;if(!cv(n)||!cv(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Yoe(n,e){switch(YE(e)){case"object":return lv(n,e);case"array":return lv(n,{type:"array",value:e,compare:!1});case"boolean":return lv(n,{type:"boolean",value:e});case"number":return lv(n,{type:"number",value:e});case"function":return lv(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function lv(n,e){return"type"in e?ht(ht({name:n},Woe[e.type]),e):"value"in e?ht({name:n,type:YE(e.value)},e):{name:n,type:"object",value:e}}function cv(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function YE(n){return cv(n)?"array":null===n?"null":typeof n}const{COMPONENT:tI,ASYNC_ORIGINAL:KE,ASYNC_RESOLVED:uv,ASYNC_DEFAULTS:XE}=VE;function Koe(){const n=this,e=vV(n.constructor),t=Object.create(e);t[tI]=n,t[KE]={},t[uv]={};for(let i=0;i<arguments.length;++i){const r=arguments[i];for(const s in r)t[s]=r[s]}return Object.freeze(t),t}function vV(n){return QE(n,"_mergedDefaultProps")||(function(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=vV(t),s=function(n){const e={},t={},i={};for(const[r,s]of Object.entries(n))if(s&&s.deprecatedFor)i[r]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{const o=Yoe(r,s);e[r]=o,t[r]=o.value}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(QE(n,"defaultProps")||{}),o=function(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function(n){const e=QE(n,"layerName")||QE(n,"componentName");return e||Fi.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a=ht(ht({},t._propTypes),s.propTypes);!function(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=eae(o))}n[XE]=t,n[KE]={},Object.defineProperties(n,i)}(o,a);const l=ht(ht({},t._deprecatedProps),s.deprecatedProps);(function(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])bV(this,s)||(this[s]=i);Fi.deprecated(r,e[t].join("/"))()}})})(o,l),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=l}(n),n._mergedDefaultProps)}function eae(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||JB(e)?this[KE][n]=e:this[uv][n]=e},get(){if(this[uv]){if(n in this[uv])return this[uv][n]||this[XE][n];if(n in this[KE]){const e=this[tI]&&this[tI].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[XE][n]}}return this[XE][n]}}}function bV(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function QE(n,e){return bV(n,e)&&n[e]}function nI(n){var e;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(e=n[Symbol.asyncIterator]),null==e&&Symbol.iterator&&(e=n[Symbol.iterator])),null==e&&(e=n["@@asyncIterator"]),null==e&&(e=n["@@iterator"]),null==e)throw new TypeError("Object is not async iterable");return e.call(n)}const{ASYNC_ORIGINAL:nae,ASYNC_RESOLVED:iae,ASYNC_DEFAULTS:rae}=VE,sae=Object.freeze({});class wV{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=sae,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[iae]||{},i=e[nae]||e,r=e[rae]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var i;const r=null===(i=this.layer)||void 0===i?void 0:i.props.fetch;r&&(t=r(t,{propName:e,layer:this.layer}))}if(t instanceof Promise)return void this._watchPromise(e,t);if(JB(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){const i=this.asyncProps[e];t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{var o;s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r);const a=null===(o=this.layer)||void 0===o?void 0:o.props.onDataLoad;"data"===e&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;null===(o=this.layer)||void 0===o||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}_resolveAsyncIterable(e,t){var i=this;return ti(function*(){var r;"data"!==e&&i._setPropValue(e,t);const s=i.asyncProps[e];s.pendingLoadCount++;const o=s.pendingLoadCount;let a=[],l=0;var f,c=!0,d=!1;try{for(var g,_,p=nI(t);c=(g=yield p.next()).done,_=yield g.value,!c;c=!0){const b=_,{dataTransform:H}=i.component?i.component.props:{};a=H?H(b,a):a.concat(b),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:l,endRow:a.length}]}),l=a.length,i._setAsyncPropValue(e,a,o)}}catch(b){d=!0,f=b}finally{try{!c&&null!=p.return&&(yield p.return())}finally{if(d)throw f}}const C=null===(r=i.layer)||void 0===r?void 0:r.props.onDataLoad;C&&C(a,{propName:e,layer:i.layer})})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:EV,ASYNC_RESOLVED:SV,ASYNC_DEFAULTS:oae}=VE,aae={};let lae=0,cae=(()=>{class n{constructor(){this.props=Koe.apply(this,arguments),this.id=this.props.id,this.count=lae++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(t){const{props:i}=this,r={};for(const s in i[oae])s in i[SV]?r[s]=i[SV][s]:s in i[EV]&&(r[s]=i[EV][s]);return new this.constructor(ht(ht(ht({},i),r),t))}get stats(){return this.internalState.stats}_initState(){this.internalState=new wV({})}}return n.componentName="Component",n.defaultProps=aae,n})();class uae extends wV{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const rc=n=>"function"==typeof n,Jd=n=>null!==n&&"object"==typeof n,xV=n=>Jd(n)&&n.constructor==={}.constructor,dae=n=>n&&"function"==typeof n[Symbol.iterator],hae=n=>n&&"function"==typeof n[Symbol.asyncIterator],dv=n=>"undefined"!=typeof Response&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,kg=n=>"undefined"!=typeof Blob&&n instanceof Blob,AV=n=>(n=>"undefined"!=typeof ReadableStream&&n instanceof ReadableStream||Jd(n)&&rc(n.tee)&&rc(n.cancel)&&rc(n.getReader))(n)||(n=>Jd(n)&&rc(n.read)&&rc(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function bf(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function iI(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function rI(n){var e,t;let i;return bf(n,"null loader"),bf(iI(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=zn(ht({},n=n[0]),{options:ht(ht({},n.options),i)})),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const zc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},sI=zc.global||zc.self||zc.window||{},yae="object"!=typeof process||"[object process]"!==String(process)||process.browser,TV="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);TV&&parseFloat(TV[1]);const aI={};function vae(n){for(const e in aI)n.startsWith(e)&&(n=n.replace(e,aI[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n=`${n}`),n}const bae=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,wae=/^([-\w.]+\/[-\w.+]+)/;function Eae(n){const e=wae.exec(n);return e?e[1]:n}function DV(n){const e=bae.exec(n);return e?e[1]:""}const Sae=/\?.*/;function ZE(n){if(dv(n)){const e=lI(n.url||"");return{url:e,type:Eae(n.headers.get("content-type")||"")||DV(e)}}return kg(n)?{url:lI(n.name||""),type:n.type||""}:"string"==typeof n?{url:lI(n),type:DV(n)}:{url:"",type:""}}function Cae(n){return dv(n)?n.headers["content-length"]||-1:kg(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function lI(n){return n.replace(Sae,"")}function MV(n){return cI.apply(this,arguments)}function cI(){return(cI=ti(function*(n){if(dv(n))return n;const e={},t=Cae(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=ZE(n);r&&(e["content-type"]=r);const s=yield Tae(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o})).apply(this,arguments)}function xae(n){return uI.apply(this,arguments)}function uI(){return(uI=ti(function*(n){if(!n.ok){const e=yield Aae(n);throw new Error(e)}})).apply(this,arguments)}function Aae(n){return dI.apply(this,arguments)}function dI(){return(dI=ti(function*(n){let e=`Failed to fetch resource ${n.url} (${n.status}): `;try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=` ${yield n.text()}`),e+=i,e=e.length>60?`${e.slice(60)}...`:e}catch(t){}return e})).apply(this,arguments)}function Tae(n){return hI.apply(this,arguments)}function hI(){return(hI=ti(function*(n){if("string"==typeof n)return`data:,${n.slice(0,5)}`;if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}return n instanceof ArrayBuffer?`data:base64,${Dae(n.slice(0,5))}`:null})).apply(this,arguments)}function Dae(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function IV(n,e){return fI.apply(this,arguments)}function fI(){return(fI=ti(function*(n,e){if("string"==typeof n){n=vae(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(t=e.fetch),yield fetch(n,t)}return yield MV(n)})).apply(this,arguments)}function Wn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const OV=new tM({id:"loaders.gl"});class Mae{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const RV={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){Wn(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Oae={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function pI(){sI.loaders=sI.loaders||{};const{loaders:n}=sI;return n._state=n._state||{},n._state}const gI=()=>{const n=pI();return n.globalOptions=n.globalOptions||ht({},RV),n.globalOptions};function Rae(n,e,t,i){return t=t||[],function(n,e){PV(n,null,RV,Oae,e);for(const t of e)PV(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function(n,e,t){const r=ht({},n.options||{});return function(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new Mae),LV(r,gI()),LV(r,e),r}(e,n,i)}function NV(n,e){const t=gI(),i=n||t;return"function"==typeof i.fetch?i.fetch:Jd(i.fetch)?r=>IV(r,i):null!=e&&e.fetch?null==e?void 0:e.fetch:IV}function PV(n,e,t,i,r){const s=e||"Top level",o=e?`${e}.`:"";for(const a in n){const l=!e&&Jd(n[a]),c="baseUri"===a&&!e,d="workerUrl"===a&&e;if(!(a in t)&&!c&&!d)if(a in i)OV.warn(`${s} loader option '${o}${a}' no longer supported, use '${i[a]}'`)();else if(!l){const f=Pae(a,r);OV.warn(`${s} loader option '${o}${a}' not recognized. ${f}`)()}}}function Pae(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return`Did you mean '${r.id}.${s}'?`;const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||`Did you mean '${r.id}.${s}'?`)}return i}function LV(n,e){for(const t in e)t in e&&(n[t]=xV(e[t])&&xV(n[t])?ht(ht({},n[t]),e[t]):e[t])}function Hc(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}function kae(n,e="3.0.12"){return Hc(n,"no worker provided"),!(!e||!n.version)}const Gc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Bae=Gc.global||Gc.self||Gc.window||{},mI="object"!=typeof process||"[object process]"!==String(process)||process.browser,_I="function"==typeof importScripts,jae="undefined"!=typeof window&&void 0!==window.orientation,kV="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),yI=(kV&&parseFloat(kV[1]),new Map);function BV(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function jV(n,e=!0,t){const i=t||new Set;if(n)if(VV(n))i.add(n);else if(VV(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)jV(n[r],e,i);return void 0===t?Array.from(i):[]}function VV(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}const vI=()=>{};class UV{static isSupported(){return"undefined"!=typeof Worker}constructor(e){Wn(this,"name",void 0),Wn(this,"source",void 0),Wn(this,"url",void 0),Wn(this,"terminated",!1),Wn(this,"worker",void 0),Wn(this,"onMessage",void 0),Wn(this,"onError",void 0),Wn(this,"_loadableURL","");const{name:t,source:i,url:r}=e;Hc(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=vI,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=vI,this.onError=vI,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||jV(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=function(n){Hc(n.source&&!n.url||!n.source&&n.url);let e=yI.get(n.source||n.url);return e||(n.url&&(e=function(n){return n.startsWith("http")?BV(function(n){return`try {\n  importScripts('${n}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}(n)):n}(n.url),yI.set(n.url,e)),n.source&&(e=BV(n.source),yI.set(n.source,e))),Hc(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}}class Hae{constructor(e,t){Wn(this,"name",void 0),Wn(this,"workerThread",void 0),Wn(this,"isRunning",void 0),Wn(this,"result",void 0),Wn(this,"_resolve",void 0),Wn(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Hc(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Hc(this.isRunning),this.isRunning=!1,this._reject(e)}}class Gae{constructor(e){Wn(this,"name","unnamed"),Wn(this,"source",void 0),Wn(this,"url",void 0),Wn(this,"maxConcurrency",1),Wn(this,"maxMobileConcurrency",1),Wn(this,"onDebug",()=>{}),Wn(this,"reuseWorkers",!0),Wn(this,"props",{}),Wn(this,"jobQueue",[]),Wn(this,"idleQueue",[]),Wn(this,"count",0),Wn(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=ht(ht({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return ti(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return ti(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new Hae(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new UV({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return jae?this.maxMobileConcurrency:this.maxConcurrency}}const $ae={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class Vu{static isSupported(){return UV.isSupported()}static getWorkerFarm(e={}){return Vu._workerFarm=Vu._workerFarm||new Vu({}),Vu._workerFarm.setProps(e),Vu._workerFarm}constructor(e){Wn(this,"props",void 0),Wn(this,"workerPools",new Map),this.props=ht({},$ae),this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props=ht(ht({},this.props),e);for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new Gae({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function qae(n,e={}){const i=`${n.id}-worker.js`;let r=(e[n.id]||{}).workerUrl;if("test"===e._workerType&&(r=`modules/${n.module}/dist/${i}`),!r){let s=n.version;"latest"===s&&(s="latest"),r=`https://unpkg.com/@loaders.gl/${n.module}${s?`@${s}`:""}/dist/${i}`}return Hc(r),r}function Yae(n,e){return!!Vu.isSupported()&&n.worker&&(null==e?void 0:e.worker)}function Kae(n,e,t,i,r){return bI.apply(this,arguments)}function bI(){return(bI=ti(function*(n,e,t,i,r){const s=n.id,o=qae(n,t),l=Vu.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t));const c=yield l.startJob("process-on-worker",Xae.bind(null,r));return c.postMessage("process",{input:e,options:t}),yield(yield c.result).result})).apply(this,arguments)}function Xae(n,e,t,i){return wI.apply(this,arguments)}function wI(){return(wI=ti(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(i.error);break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn(`parse-with-worker unknown message ${t}`)}})).apply(this,arguments)}Wn(Vu,"_workerFarm",void 0);var HV=tt(521);function GV(n){if(function(n){return n&&"object"==typeof n&&n.isBuffer}(n)&&(n=function(n){return HV.toArrayBuffer?HV.toArrayBuffer(n):n}(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function ele(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}function $V(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function tle(n){return SI.apply(this,arguments)}function SI(){return(SI=ti(function*(n){const e=[];var r,t=!0,i=!1;try{for(var o,a,s=nI(n);t=(o=yield s.next()).done,a=yield o.value,!t;t=!0)e.push(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return ele(...e)})).apply(this,arguments)}const rle=262144;function WV(n){this.wrapped=n}function hv(n){return new WV(n)}function fv(n){var e,t;function r(o,a){try{var l=n[o](a),c=l.value,d=c instanceof WV;Promise.resolve(d?c.wrapped:c).then(function(f){d?r("return"===o?"return":"next",f):s(l.done?"return":"normal",f)},function(f){r("throw",f)})}catch(f){s("throw",f)}}function s(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?r(e.key,e.arg):t=null}this._invoke=function(o,a){return new Promise(function(l,c){var d={key:o,arg:a,resolve:l,reject:c,next:null};t?t=t.next=d:(e=t=d,r(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function xI(n){return function(){return new fv(n.apply(this,arguments))}}function AI(){return(AI=xI(function*(n,e){const t=(null==e?void 0:e.chunkSize)||1048576;let i=0;for(;i<n.size;){const r=i+t,s=yield hv(n.slice(i,r).arrayBuffer());i=r,yield s}})).apply(this,arguments)}function qV(n,e){return yae?function(n,e){return TI.apply(this,arguments)}(n,e):function(n,e){return DI.apply(this,arguments)}(n,e)}function TI(){return(TI=xI(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield hv(r);if(s)return;yield GV(o)}}catch(r){t.releaseLock()}})).apply(this,arguments)}function DI(){return(DI=xI(function*(n,e){var r,t=!0,i=!1;try{for(var o,a,s=nI(n);t=(o=yield hv(s.next())).done,a=yield hv(o.value),!t;t=!0)yield GV(a)}catch(l){i=!0,r=l}finally{try{!t&&null!=s.return&&(yield hv(s.return()))}finally{if(i)throw r}}})).apply(this,arguments)}function ule(n,e){if("string"==typeof n)return function*(n,e){const t=(null==e?void 0:e.chunkSize)||262144;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*(n,e={}){const{chunkSize:t=rle}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(kg(n))return function(n,e){return AI.apply(this,arguments)}(n,e);if(AV(n))return qV(n,e);if(dv(n))return qV(n.body,e);throw new Error("makeIterator")}fv.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},fv.prototype.next=function(n){return this._invoke("next",n)},fv.prototype.throw=function(n){return this._invoke("throw",n)},fv.prototype.return=function(n){return this._invoke("return",n)};const MI="Cannot convert supplied data type";function dle(n,e,t){if(e.text&&"string"==typeof n)return n;if((n=>n&&"object"==typeof n&&n.isBuffer)(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(MI)}function hle(n,e,t){return II.apply(this,arguments)}function II(){return(II=ti(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return dle(n,e);if(kg(n)&&(n=yield MV(n)),dv(n)){const r=n;return yield xae(r),e.binary?yield r.arrayBuffer():yield r.text()}if(AV(n)&&(n=ule(n,t)),dae(n)||hae(n))return tle(n);throw new Error(MI)})).apply(this,arguments)}function ple(n,e,t=null){if(t)return t;const i=ht({fetch:NV(e,n)},n);return Array.isArray(i.loaders)||(i.loaders=null),i}function gle(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}const YV=()=>{const n=pI();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function KV(n){const e=YV();n=Array.isArray(n)?n:[n];for(const t of n){const i=rI(t);e.find(r=>i===r)||e.unshift(i)}}const _le=/\.([^.]+)$/;function yle(n){return NI.apply(this,arguments)}function NI(){return(NI=ti(function*(n,e=[],t,i){if(!QV(n))return null;let r=XV(n,e,zn(ht({},t),{nothrow:!0}),i);if(r)return r;if(kg(n)&&(r=XV(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(ZV(n));return r})).apply(this,arguments)}function XV(n,e=[],t,i){if(!QV(n))return null;if(e&&!Array.isArray(e))return rI(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...YV()),function(n){for(const e of n)rI(e)}(r);const s=function(n,e,t,i){const{url:r,type:s}=ZE(n),o=r||(null==i?void 0:i.url);let a=null;return null!=t&&t.mimeType&&(a=PI(e,null==t?void 0:t.mimeType)),a=a||function(n,e){const t=e&&_le.exec(e),i=t&&t[1];return i?function(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),a=a||PI(e,s),a=a||function(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(Cle(e,t))return t}else if(ArrayBuffer.isView(e)){if(JV(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&JV(e,0,t))return t;return null}(e,n),a=a||PI(e,null==t?void 0:t.fallbackMimeType),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error(ZV(n));return s}function QV(n){return!(n instanceof Response&&204===n.status)}function ZV(n){const{url:e,type:t}=ZE(n);let i="No valid loader found";return n&&(i+=` data: "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?FI(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?FI(n,0,e):""}(n)}", contentType: "${t}"`),e&&(i+=` url: ${e}`),i}function PI(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e===`application/x.${t.id}`)return t;return null}function Cle(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function JV(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function(n,e,t,i){if(i instanceof ArrayBuffer)return function(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===FI(n,e,i.length);default:return!1}}(n,e,t,r))}function FI(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function JE(n,e,t,i){return LI.apply(this,arguments)}function LI(){return(LI=ti(function*(n,e,t,i){Hc(!i||"object"==typeof i),e&&!Array.isArray(e)&&!iI(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=ZE(n),o=gle(e,i),a=yield yle(n,o,t);return a?(i=ple({url:r,parse:JE,loaders:o},t=Rae(t,a,o,r),i),yield Tle(a,n,t,i)):null})).apply(this,arguments)}function Tle(n,e,t,i){return kI.apply(this,arguments)}function kI(){return(kI=ti(function*(n,e,t,i){if(kae(n),e=yield hle(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(Yae(n,t))return yield Kae(n,e,t,i,JE);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw Hc(!n.parseSync),new Error(`${n.id} loader - no parser found and worker is disabled`)})).apply(this,arguments)}function eS(n,e,t,i){return BI.apply(this,arguments)}function BI(){return(BI=ti(function*(n,e,t,i){!Array.isArray(e)&&!iI(e)&&(t=e,e=void 0);const r=NV(t);let s=n;return"string"==typeof n&&(s=yield r(n)),kg(n)&&(s=yield r(n)),yield JE(s,e,t)})).apply(this,arguments)}const eU=mr(2,24)-1,Nle=Object.freeze([]),Ple=UE(({oldViewport:n,viewport:e})=>n.equals(e));let $c=new Uint8ClampedArray(0);const Fle={data:{type:"data",value:Nle,async:!0},dataComparator:null,_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r=zn(ht({},r),{fetch:zn(ht({},null===(a=r)||void 0===a?void 0:a.fetch),{signal:s})}));let l=o.contains(n);return!l&&!r&&(o.add({resourceId:n,data:eS(n,i),persistent:!1}),l=!0),l?o.subscribe({resourceId:n,onChange:c=>t.internalState.reloadAsyncProp(e,c),consumerId:t.id,requestId:e}):eS(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Oi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};let jI=(()=>{class n extends cae{toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}raiseError(t,i){var r,s,o,a;i&&(t.message="".concat(i,": ").concat(t.message)),(null===(r=(s=this.props).onError)||void 0===r?void 0:r.call(s,t))||null===(o=this.context)||void 0===o||null===(a=o.onError)||void 0===a||a.call(o,t,this)}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(t=!0){this.internalState&&(this.internalState.needsRedraw=t)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(t){const{viewport:i}=this.context,r=yV(t,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,o,a]=XM(r,i.pixelProjectionMatrix);return 2===t.length?[s,o]:[s,o,a]}unproject(t){const{viewport:i}=this.context;return i.unproject(t)}projectPosition(t){return function(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(n){const e=ht({},n);let{coordinateSystem:t}=n;const{viewport:i,coordinateOrigin:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return t===Oi.DEFAULT&&(t=i.isGeospatial?Oi.LNGLAT:Oi.CARTESIAN),void 0===s&&(e.fromCoordinateSystem=t),void 0===o&&(e.fromCoordinateOrigin=r),e.coordinateSystem=t,e}(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:d}=Jj(t,i,r),f=yV(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});d&&function(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(f,f,t.projectPosition(l||c));return f}(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===Oi.DEFAULT||t===Oi.LNGLAT||t===Oi.CARTESIAN}onHover(t,i){return!!this.props.onHover&&this.props.onHover(t,i)}onClick(t,i){return!!this.props.onClick&&this.props.onClick(t,i)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,i=[]){return i[0]=t+1&255,i[1]=t+1>>8&255,i[2]=t+1>>8>>8&255,i}decodePickingColor(t){tc(t instanceof Uint8Array);const[i,r,s]=t;return i+256*r+65536*s-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(t){for(const i of this.props.extensions)t=$se(t,i.getShaders.call(this,i));return t}shouldUpdateState({changeFlags:s}){return s.propsOrDataChanged}updateState({oldProps:t,props:i,changeFlags:s}){const o=this.getAttributeManager();if(s.dataChanged&&o){const{dataChanged:c}=s;if(Array.isArray(c))for(const d of c)o.invalidateAll(d);else o.invalidateAll()}const l=i.highlightedObjectIndex>=0||i.pickable;if((t.highlightedObjectIndex>=0||t.pickable)!==l&&o){const{pickingColors:c,instancePickingColors:d}=o.attributes,f=c||d;f&&(l&&f.constant&&(f.constant=!1,o.invalidate(f.id)),!f.value&&!l&&(f.constant=!0,f.value=[0,0,0]))}}finalizeState(){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(t){for(const i of this.getModels())i.draw(t)}getPickingInfo({info:t}){const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}activateViewport(t){const i=this.internalState.viewport;this.internalState.viewport=t,(!i||!Ple({oldViewport:i,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all",i=""){const r=this.getAttributeManager();!r||("all"===t?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const i of this.getModels())this._setModelAttributes(i,t)}_updateAttributes(t){const i=this.getAttributeManager();if(!i)return;const r=this.getNumInstances(t),s=this.getStartIndices(t);i.update({data:t.data,numInstances:r,startIndices:s,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});const o=i.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const i=t.update(),r=Object.create(this.props);for(const s in i)Object.defineProperty(r,s,{value:i[s]});return r}return this.props}calculateInstancePickingColors(t,{numInstances:i}){if(t.constant)return;const r=Math.floor($c.length/3);if(this.internalState.usesPickingColorCache=!0,r<i){i>eU&&Fi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),$c=Yy.allocate($c,i,{size:3,copy:!0,maxCount:Math.max(i,eU)});const s=Math.floor($c.length/3),o=[];for(let a=r;a<s;a++)this.encodePickingColor(a,o),$c[3*a+0]=o[0],$c[3*a+1]=o[1],$c[3*a+2]=o[2]}t.value=$c.subarray(0,3*i)}_setModelAttributes(t,i){const o=this.getAttributeManager().getShaderAttributes(i,t.userData.excludeAttributes||{});t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,s=i||r,o=s.getVertexOffset(t),a=s.getVertexOffset(t+1);s.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;this.internalState.usesPickingColorCache&&r.value.buffer!==$c.buffer&&(r.value=$c.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}getNumInstances(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(t.data)}getStartIndices(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){bo("layer.initialize",this),this._initState(),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const t=this.needsUpdate();bo("layer.update",this,t),t&&this._updateState()}_updateState(){const t=this.props,i=this.context.viewport,r=this._updateUniformTransition();this.internalState.propsInTransition=r,this.context.viewport=this.internalState.viewport||i,this.props=r;try{const s=this._getUpdateParams(),o=this.getModels();if(this.context.gl)this.updateState(s);else try{this.updateState(s)}catch(l){}for(const l of this.props.extensions)l.updateState.call(this,s,l);const a=this.getModels()[0]!==o[0];this._updateModules(s,a),this.isComposite?this._renderLayers(s):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=i,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){bo("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}drawLayer({moduleParameters:t=null,uniforms:i={},parameters:r={}}){this._updateAttributeTransition();const s=this.props;this.props=this.internalState.propsInTransition||s;const{opacity:o}=this.props;i.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(i)||[0,0];Pu(this.context.gl,{polygonOffset:l}),ec(this.context.gl,r,()=>{const c={moduleParameters:t,uniforms:i,parameters:r,context:this.context};for(const d of this.props.extensions)d.draw.call(this,c,d);this.draw(c)})}finally{this.props=s}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(t){const{changeFlags:i}=this.internalState;for(const s in t)if(t[s]){let o=!1;switch(s){case"dataChanged":Array.isArray(i[s])&&(i[s]=Array.isArray(t[s])?i[s].concat(t[s]):t[s],o=!0);default:i[s]||(i[s]=t[s],o=!0)}o&&bo("layer.changeFlag",this,s,t)}const r=i.dataChanged||i.updateTriggersChanged||i.propsChanged||i.extensionsChanged;i.propsOrDataChanged=r,i.somethingChanged=r||t.viewportChanged||t.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(t,i){const r=function(n,e){const t=$j({newProps:n,oldProps:e,propTypes:$M(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(n,e){if(null===e)return"oldProps is null, initial diff";let t=null;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function(n,e){if(null===e)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&Wj(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&Wj(n,e,r)&&(t[r]=!0,i=t);return i}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:Bse(n,e),transitionsChanged:Fse(n,e)}}(t,i);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged)this.internalState.uniformTransitions.add(s,i[s],t[s],t.transitions[s]);return this.setChangeFlags(r)}validateProps(){!function(n){const e=$M(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}setModuleParameters(t){for(const i of this.getModels())i.updateModuleSettings(t)}updateAutoHighlight(t){this.props.autoHighlight&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const i={pickingSelectedColor:t.picked?t.color:null},{highlightColor:r}=this.props;t.picked&&"function"==typeof r&&(i.pickingHighlightColor=r(t)),this.setModuleParameters(i),this.setNeedsRedraw()}_updateModules({props:t,oldProps:i},r){const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=t;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==o||i.highlightColor!==a){const l={};s||(l.pickingSelectedColor=null),Array.isArray(a)&&(l.pickingHighlightColor=a),Number.isInteger(o)&&(l.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let i=!1;i=i||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const r=this.getAttributeManager(),s=r&&r.getNeedsRedraw(t);return i=i||s,i}_getAttributeManager(){return new Ase(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){tc(!this.internalState&&!this.state),tc(isFinite(this.props.coordinateSystem));const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new uae({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Fi.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Ose(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(t){bo("layer.matched",this,this===t);const{state:i,internalState:r}=t;this!==t&&(this.internalState=r,this.internalState.layer=this,this.state=i,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}return n.layerName="Layer",n.defaultProps=Fle,n})(),kle=(()=>{class n extends jI{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:i}=t;return i&&i.__source&&i.__source.parent&&i.__source.parent.id===this.id&&(t.object=i.__source.object,t.index=i.__source.index),t}renderLayers(){return null}filterSubLayer(t){return!0}shouldRenderSubLayer(t,i){return i&&i.length}getSubLayerClass(t,i){const{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||i}getSubLayerRow(t,i,r){return t.__source={parent:this,object:i,index:r},t}getSubLayerAccessor(t){if("function"==typeof t){const i={data:this.props.data,target:[]};return(r,s)=>r&&r.__source?(i.index=r.__source.index,t(r.__source.object,i)):t(r,s)}return t}getSubLayerProps(t={}){const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:d,coordinateSystem:f,coordinateOrigin:p,wrapLongitude:g,positionFormat:_,modelMatrix:C,extensions:b,fetch:H,_subLayerProps:z}=this.props,he={opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:d,coordinateSystem:f,coordinateOrigin:p,wrapLongitude:g,positionFormat:_,modelMatrix:C,extensions:b,fetch:H},Ie=z&&z[t.id],Fe=Ie&&Ie.updateTriggers,We=t.id||"sublayer";if(Ie){const dt=this.constructor._propTypes,Mt=t.type?t.type._propTypes:{};for(const Ot in Ie){const Lt=Mt[Ot]||dt[Ot];Lt&&"accessor"===Lt.type&&(Ie[Ot]=this.getSubLayerAccessor(Ie[Ot]))}}Object.assign(he,t,Ie),he.id="".concat(this.props.id,"-").concat(We),he.updateTriggers=ht(ht({all:this.props.updateTriggers.all},t.updateTriggers),Fe);for(const dt of b){const Mt=dt.getSubLayerProps.call(this,dt);Mt&&Object.assign(he,Mt,{updateTriggers:Object.assign(he.updateTriggers,Mt.updateTriggers)})}return he}_updateAutoHighlight(t){for(const i of this.getSubLayers())i.updateAutoHighlight(t)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:t}=this.internalState;const i=!t||this.needsUpdate();i&&(t=this.renderLayers(),t=SM(t,Boolean),this.internalState.subLayers=t),bo("compositeLayer.renderLayers",this,i,t);for(const r of t)r.parent=this}}return n.layerName="CompositeLayer",n})();const Ble=/([0-9]+\.?[0-9]*)(%|px)/;function tS(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=n.match(Ble);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function nS(n,e){return n.relative?Math.round(n.position*e):n.position}function pv(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&pv(i,r)))return!1}return!0}class VI{constructor(e={}){const{id:t=null,x:i=0,y:r=0,width:s="100%",height:o="100%",projectionMatrix:a=null,fovy:l=50,near:c=.1,far:d=1e3,modelMatrix:f=null,viewportInstance:p=null,type:g=Lg}=e;tc(!p||p instanceof Lg),this.viewportInstance=p,this.id=t||this.constructor.displayName||"view",this.type=g,this.props=zn(ht({},e),{id:this.id,projectionMatrix:a,fovy:l,near:c,far:d,modelMatrix:f}),this._parseDimensions({x:i,y:r,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):pv(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return this._getViewport(i,r)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t=ht({},e);for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){return{x:nS(this._x,e),y:nS(this._y,t),width:nS(this._width,e),height:nS(this._height,t)}}_getControllerProps(e){let t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),ht(ht({},e),t)):null}_getViewport(e,t){const{type:i}=this;return new i(ht(ht(ht({},e),this.props),t))}_parseDimensions({x:e,y:t,width:i,height:r}){this._x=tS(e),this._y=tS(t),this._width=tS(i),this._height=tS(r)}}const gv=()=>{},tU={transitionEasing:n=>n,transitionInterruption:1,onTransitionStart:gv,onTransitionInterrupt:gv,onTransitionEnd:gv};class jle{constructor(e,t={}){this.ControllerState=e,this.props=ht(ht({},tU),t),this.propsInTransition=null,this.transition=new rv(t.timeline),this.onViewStateChange=t.onViewStateChange||gv,this.onStateChange=t.onStateChange||gv,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(e=ht(ht({},tU),e),this.props=e,this._shouldIgnoreViewportChange(i,e))return t;if(this._isTransitionEnabled(e)){const{interruption:r,endProps:s}=this.transition.settings,o=ht(ht({},i),2===r?s:this.propsInTransition||i);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&Boolean(i)}_isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(i),{transitionInterpolator:s}=t,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(t)}}_onTransitionUpdate(e){const{time:t,settings:{interpolator:i,startProps:r,endProps:s,duration:o,easing:a}}=e,l=a(t/o),c=i.interpolateProps(r,s,l);this.propsInTransition=new this.ControllerState(ht(ht({},this.props),c)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}const nU=["longitude","latitude","zoom","bearing","pitch"],Ule=["longitude","latitude","zoom"];class iU extends class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare||Object.keys(t))if(!(i in e)||!(i in t)||!Ky(e[i],t[i]))return!1;return!0}initializeProps(e,t){let i;if(this._propsToExtract){const r={},s={};for(const o of this._propsToExtract)r[o]=e[o],s[o]=t[o];i={start:r,end:s}}else i={start:e,end:t};return this._checkRequiredProps(i.start),this._checkRequiredProps(i.end),i}interpolateProps(e,t,i){return t}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(t=>{const i=e[t];tc(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}{constructor(e={}){super((Array.isArray(e)?e:e.transitionProps)||{compare:nU,extract:nU,required:Ule}),this.opts=e}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),l=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(l),aroundPosition:l,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=xE(e[s]||0,t[s]||0,i);if(t.aroundPosition){const s=this.opts.makeViewport(ht(ht({},t),r));Object.assign(r,s.panByPosition(t.aroundPosition,xE(e.around,t.around,i)))}return r}}const eh={transitionDuration:0},zle={transitionDuration:300,transitionEasing:n=>n,transitionInterruption:1},rS=n=>1-(1-n)*(1-n),Bg_WHEEL=["wheel"],Bg_PAN=["panstart","panmove","panend"],Bg_PINCH=["pinchstart","pinchmove","pinchend"],Bg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Bg_DOUBLE_TAP=["doubletap"],Bg_KEYBOARD=["keydown"];class UI{constructor(e,t={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new jle(e,zn(ht({},t),{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));const i=this.linearTransitionProps;this._transition=i&&zn(ht({},zle),{transitionInterpolator:new iU({transitionProps:i})}),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:t}=this;this.controllerState=new t(ht(ht({makeViewport:this.makeViewport},this.controllerStateProps),this._state));const i=this._eventStartBlocked;switch(e.type){case"panstart":return!i&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!i&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!i&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:t,y:i}=this.controllerStateProps,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.controllerStateProps;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:t}=e;!0===t&&(t=300),this.inertia=t;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,d=Boolean(this.onViewStateChange);this.toggleEvents(Bg_WHEEL,d&&i),this.toggleEvents(Bg_PAN,d&&(r||s)),this.toggleEvents(Bg_PINCH,d&&(a||l)),this.toggleEvents(Bg_TRIPLE_PAN,d&&l),this.toggleEvents(Bg_DOUBLE_TAP,d&&o),this.toggleEvents(Bg_KEYBOARD,d&&c),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t={},i={}){const r=ht(ht({},e.getViewportProps()),t),s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,eh,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,eh,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,zn(ht({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:rS}),{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,eh,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,zn(ht({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:rS}),{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,zn(ht({},this._getTransitionProps({around:t})),{transitionDuration:r?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,eh,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,eh,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,zn(ht({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:rS}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(i,eh,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:this._startPinchRotation-i})}return this.updateViewport(t,eh,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t,_lastPinchEvent:i}=this;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),l=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,zn(ht({},this._getTransitionProps({around:r})),{transitionDuration:t,transitionEasing:rS}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),c.isZooming=!0;break;case"Equal":l=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":t?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":t?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(r),c.isPanning=!0);break;case"ArrowUp":t?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(r),c.isPanning=!0);break;case"ArrowDown":t?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{_transition:t}=this;return t?e?zn(ht({},t),{transitionInterpolator:new iU(zn(ht({},e),{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):t:eh}}class rU{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const th_target=[0,0,0];class sS extends rU{constructor({makeViewport:e,width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=th_target,zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:d=-(1/0),maxZoom:f=Infinity,startPanPosition:p,startRotatePos:g,startRotationX:_,startRotationOrbit:C,startZoomPosition:b,startZoom:H}){super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:d,maxZoom:f}),this._state={startPanPosition:p,startRotatePos:g,startRotationX:_,startRotationOrbit:C,startZoomPosition:b,startZoom:H},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this._state.startPanPosition||t;if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:l}=this._viewportProps;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let c;if(e){let d=(e[0]-r[0])/a;(s<-90||s>90)&&(d*=-1),c={rotationX:s+(e[1]-r[1])/l*180,rotationOrbit:o+180*d}}else c={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i=ht({},this._viewportProps),{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){const{zoom:r}=this._viewportProps;let{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=r,o=this._unproject(t)||this._unproject(e));const a=this._calculateNewZoom({scale:i,startZoom:s}),l=this.makeViewport(zn(ht({},this._viewportProps),{zoom:a}));return this._getUpdatedState(ht({zoom:a},l.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return Number.isFinite(t)||(t=this._viewportProps.zoom),_f(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this._viewportProps;return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new sS(ht(ht(ht({},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=_f(r,i,t),e.rotationX=_f(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function(n,e){const t=n%360;return t<0?360+t:t}(a+180)-180),e}}class Gle extends UI{constructor(e){super(sS,e)}get linearTransitionProps(){return["target","zoom","rotationX","rotationOrbit"]}}class $le extends UI{constructor(e){e.dragMode=e.dragMode||"pan",super(sS,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const Wle=(new $n).lookAt({eye:[0,0,1]});function qle({width:n,height:e,near:t,far:i}){return n=n||1,e=e||1,(new $n).ortho({left:-n/2,right:n/2,bottom:-e/2,top:e/2,near:t,far:i})}class Yle extends Lg{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,c=Math.pow(2,o);super(zn(ht({},e),{longitude:null,position:a,viewMatrix:Wle.clone().scale([c,c*(l?-1:1),c]),projectionMatrix:qle({width:t,height:i,near:r,far:s}),zoom:o}))}panByPosition(e,t){const r=Rg([],e,WM([],vf(t,this.pixelUnprojectionMatrix)));return{target:Rg([],this.center,r)}}}let Kle=(()=>{class n extends VI{constructor(t){super(zn(ht({},t),{type:Yle}))}get controller(){return this._getControllerProps({type:$le})}}return n.displayName="OrthographicView",n})();const oS=Math.PI/180;function Xle({height:n,fovy:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o=.5/Math.tan(e*oS/2),a="Z"===t?[0,0,1]:[0,1,0],l="Z"===t?[0,-o,0]:[0,0,o],c=(new $n).lookAt({eye:l,up:a});c.rotateX(i*oS),"Z"===t?c.rotateZ(r*oS):c.rotateY(r*oS);const d=Math.pow(2,s)/(n||1);return c.scale(d),c}class Qle extends Lg{constructor(e){const{height:t,fovy:i,orbitAxis:r,target:s=[0,0,0],rotationX:o=0,rotationOrbit:a=0,zoom:l=0}=e;super(zn(ht({},e),{longitude:null,viewMatrix:Xle({height:t,fovy:i,orbitAxis:r,rotationX:o,rotationOrbit:a,zoom:l}),fovy:i,position:s,zoom:l})),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,l,c]=vf([i,o,s],this.pixelUnprojectionMatrix);return[a,l,c]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}let Zle=(()=>{class n extends VI{constructor(t={}){const{orbitAxis:i="Z"}=t;super(zn(ht({},t),{orbitAxis:i,type:Qle}))}get controller(){return this._getControllerProps({type:Gle})}}return n.displayName="OrbitView",n})();const Jle=[255,255,255],ece=1;let tce=0;class sU{constructor(e={}){const{color:t=Jle}=e,{intensity:i=ece}=e;this.id=e.id||"ambient-".concat(tce++),this.color=t,this.intensity=i,this.type="ambient"}}const nce=[255,255,255],ice=1,rce=[0,0,-1];let sce=0;class oU{constructor(e={}){const{color:t=nce}=e,{intensity:i=ice}=e,{direction:r=rce}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(sce++),this.color=t,this.intensity=i,this.type="directional",this.direction=new vo(r).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class aU{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props=ht({},e)}preRender(){}getModuleParameters(){}cleanup(){}}class zI extends class{constructor(e,t={}){const{id:i="pass"}=t;this.id=i,this.gl=e,this.props=ht({},t)}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}{render(e){return Pu(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:t,views:i,onViewportActive:r,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;s&&function(n){Pu(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(o);const a=[];for(const l of t){const c=l.viewport||l,d=i&&i[c.id];r(c);const f=this._getDrawLayerParams(c,e);e.view=d;const p=c.subViewports||[c];for(const g of p){e.viewport=g;const _=this._drawLayersInViewport(o,e,f);a.push(_)}}return a}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,effects:s,moduleParameters:o}){const a=[],l=lU(),c={viewport:e,isPicking:i.startsWith("picking"),renderPass:i};for(let d=0;d<t.length;d++){const f=t[d],p=this._shouldDrawLayer(f,c,r),_={shouldDrawLayer:p,layerRenderIndex:l(f,p)};p&&(_.moduleParameters=this._getModuleParameters(f,s,i,o),_.layerParameters=this.getLayerParameters(f,d)),a[d]=_}return a}_drawLayersInViewport(e,{layers:t,pass:i,viewport:r,view:s},o){const a=function(n,{viewport:e}){const t=n.canvas?n.canvas.clientHeight||n.canvas.height:100,i=e,r=wg(n);return[i.x*r,(t-i.y-i.height)*r,i.width*r,i.height*r]}(e,{viewport:r});if(s&&s.props.clear){const c=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;ec(e,{scissorTest:!0,scissor:a},()=>pM(e,c))}const l={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Pu(e,{viewport:a});for(let c=0;c<t.length;c++){const d=t[c],{shouldDrawLayer:f,layerRenderIndex:p,moduleParameters:g,layerParameters:_}=o[c];if(f&&d.props.pickable&&l.pickableCount++,d.isComposite)l.compositeCount++;else if(f){l.visibleCount++,g.viewport=r;try{d.drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:_})}catch(C){d.raiseError(C,"drawing ".concat(d," to ").concat(i))}}}return l}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t){return e.props.parameters}_shouldDrawLayer(e,t,i){if(!this.shouldDrawLayer(e)||!e.props.visible||(t.layer=e,i&&!i(t)))return!1;let s=e.parent;for(;s;){if(!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:wg(this.gl)});if(t)for(const o of t)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,t),r)}}function lU(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in t){const d=t[l]=t[l]||lU(e[l],e);c=d(r,s),t[a]=d}else Number.isFinite(o)?(c=o+(e[l]||0),t[a]=null):c=n;return s&&c>=n&&(n=c+1),e[a]=c,c};return i}class cce extends zI{constructor(e,t){super(e,t),this.shadowMap=new Da(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new xg(e,{format:33189,width:1,height:1}),this.fbo=new Is(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;ec(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=wg(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render(zn(ht({},e),{target:t,pass:"shadow"}))})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const dce=Object.keys(Oi).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Oi[n],";")).join(""),hce=Object.keys(Bc).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Bc[n],";")).join(""),fce="".concat(dce,"\n").concat(hce,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),pce={},HI={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:fce,getUniforms:function(n=pce){return n.viewport?function({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=Oi.DEFAULT,coordinateOrigin:r,autoWrapLongitude:s=!1}={}){i===Oi.DEFAULT&&(i=n.isGeospatial?Oi.LNGLAT:Oi.CARTESIAN);const o=woe({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||yoe,o}(n):{}}},yce=UE(function({viewport:n,center:e}){return new $n(n.viewProjectionMatrix).invert().transform(e)}),vce=UE(function({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function(n,e){const[t,i,r]=n,s=vf([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new vo(n.center).negate()),l=s.map(d=>a.transform(d)),c=(new $n).ortho({left:Math.min(...l.map(d=>d[0])),right:Math.max(...l.map(d=>d[0])),bottom:Math.min(...l.map(d=>d[1])),top:Math.max(...l.map(d=>d[1])),near:Math.min(...l.map(d=>-d[2])),far:Math.max(...l.map(d=>-d[2]))});t.push(c.multiplyRight(o))}return t}),bce=[0,0,0,1],wce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],GI={name:"shadow",dependencies:[HI],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>{if(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0){const{shadowEnabled:t=!0}=n;return t&&n.shadowMatrices&&n.shadowMatrices.length>0?function(n={},e={}){const t={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||bce,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},i=yce({viewport:n.viewport,center:e.project_uCenter}),r=[],s=vce({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let o=0;o<n.shadowMatrices.length;o++){const a=s[o],l=a.clone().translate(new vo(n.viewport.center).negate());e.project_uCoordinateSystem===Oi.LNGLAT&&e.project_uProjectionMode===Bc.WEB_MERCATOR?(s[o]=l,r[o]=i):(s[o]=a.clone().multiplyRight(wce),r[o]=l.transform(i))}for(let o=0;o<s.length;o++)t["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],t["shadow_uProjectCenters[".concat(o,"]")]=r[o],t["shadow_uShadowMap".concat(o)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[o]:n.dummyShadowMap;return t}(n,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},Ace={color:[255,255,255],intensity:1},cU=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Tce=[0,0,0,200/255];class $I extends aU{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=Tce,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=nv.getDefaultProgramManager(e),GI&&this.programManager.addDefaultModule(GI)),this.dummyShadowMap||(this.dummyShadowMap=new Da(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(GI),this.programManager=null)}_createLightMatrix(){const e=[];for(const t of this.directionalLights){const i=(new $n).lookAt({eye:new vo(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new cce(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new sU(Ace),this.directionalLights.push(new oU(cU[0]),new oU(cU[1])))}}let Dce=1,Mce=1;class uU{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=Dce++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=Mce++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}class Ice{constructor(e,t,i){this.id=e,this.context=i,this._loadCount=0,this._subscribers=new Set,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=eS(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Oce{constructor({gl:e,protocol:t}){this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new Ice(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i];r.resource&&r.resource.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),i&&(o[t]=a,a.onChange=r,a.resource=i,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const Rce=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},HI],Nce=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Pce(n){const e=nv.getDefaultProgramManager(n);for(const t of Rce)e.addDefaultModule(t);for(const t of Nce)e.addShaderHook(t);return e}const kce=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class Bce{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new Oce({gl:e,protocol:"deck://"}),this.context=zn(ht({},kce),{layerManager:this,gl:e,deck:t,programManager:e&&Pce(e),stats:i||new aM({id:"deck.gl"}),viewport:r||new Lg({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new uU,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){bo("layerManager.setLayers",this,t,e),this.lastRenderedLayers=e,e=SM(e,Boolean);for(const i of e)i.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return bo("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?Fi.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&Fi.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite&&r.getSubLayers()}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class jce{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return"string"==typeof e?this.views.find(t=>t.id===e):e}getViewState(e){const t=this.getView(e),i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=SM(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!pv(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Fi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)(ht({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height})},t))}_updateController(e,t,i,r){let s=e.controller;return s?(s=zn(ht(ht(ht({},t),e.props),s),{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height}),r?r.setProps(s):r=this._createController(e,s),r):null}_rebuildViewports(){const{width:e,height:t,views:i}=this,r=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=i.length;o--;){const a=i[o],l=this.getViewState(a),c=a.makeViewport({width:e,height:t,viewState:l});let d=r[a.id];a.controller&&!d&&(s=!0),(s||!a.controller)&&d&&(d.finalize(),d=null),this.controllers[a.id]=this._updateController(a,l,c,d),this._viewports.unshift(c)}for(const o in r)r[o]&&!this.controllers[o]&&r[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}class Uce extends rU{constructor({makeViewport:e,width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,maxZoom:d=20,minZoom:f=0,maxPitch:p=60,minPitch:g=0,startPanLngLat:_,startZoomLngLat:C,startRotatePos:b,startBearing:H,startPitch:z,startZoom:he,normalize:Ie}={}){tc(Number.isFinite(s)),tc(Number.isFinite(r)),tc(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:d,minZoom:f,maxPitch:p,minPitch:g,normalize:Ie}),this._state={startPanLngLat:_,startZoomLngLat:C,startRotatePos:b,startBearing:H,startPitch:z,startZoom:he},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this._state.startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this._viewportProps).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this._state;if(!r||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return a=e?this._calculateNewPitchAndBearing(zn(ht({},this._getRotationParams(e,r)),{startBearing:s,startPitch:o})):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this._state;Number.isFinite(r)||(r=this._viewportProps.zoom,s=this._unproject(t)||this._unproject(e));const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport(zn(ht({},this._viewportProps),{zoom:o}));return this._getUpdatedState(ht({zoom:o},a.panByPosition(s,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i=ht({},this._viewportProps),{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}_zoomFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this._viewportProps;return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor(ht(ht(ht({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=_f(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=_f(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,function({width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s=0,bearing:o=0}){(t<-180||t>180)&&(t=nV(t+180,360)-180),(o<-180||o>180)&&(o=nV(o+180,360)-180);const a=qM(e/512);if(r<=a)r=a,i=0;else{const l=e/2/Math.pow(2,r),c=Zd([0,l])[1];if(i<c)i=c;else{const d=Zd([0,512-l])[1];i>d&&(i=d)}}return{width:n,height:e,longitude:t,latitude:i,zoom:r,pitch:s,bearing:o}}(e)),e}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this._viewportProps;return _f(t+Math.log2(e),r,i)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:t,startBearing:i,startPitch:r}){t=_f(t,-1,1);const{minPitch:s,maxPitch:o}=this._viewportProps;let l=r;return t>0?l=r+t*(o-r):t<0&&(l=r-t*(s-r)),{pitch:l,bearing:i+180*e}}_getRotationParams(e,t){const i=e[0]-t[0],r=e[1]-t[1],s=e[1],o=t[1],{width:a,height:l}=this._viewportProps,c=i/a;let d=0;return r>0?Math.abs(l-o)>5&&(d=r/(o-l)*1.2):r<0&&o>5&&(d=1-s/o),d=Math.min(1,Math.max(-1,d)),{deltaScaleX:c,deltaScaleY:d}}}class zce extends UI{constructor(e){e.dragMode=e.dragMode||"pan",super(Uce,e)}setProps(e){const t=this.controllerStateProps;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState(ht(ht({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}let Hce=(()=>{class n extends VI{constructor(t){super(zn(ht({},t),{type:_V}))}get controller(){return this._getControllerProps({type:zce})}}return n.displayName="MapView",n})();const Gce=new $I;class $ce{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!pv(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof $I)||this._internalEffects.push(Gce)}}class Wce extends zI{}const hU={blendFunc:[1,0,32771,0],blendEquation:32774};class fU extends zI{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:d},pass:f="picking",redrawReason:p,pickZ:g}){const _=this.gl;return this.pickZ=g,ec(_,zn(ht({scissorTest:!0,scissor:[a,l,c,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},hU),{blend:!g}),()=>{super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pass:f,redrawReason:p})})}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t){const i=this.pickZ?{blend:!1}:zn(ht({},hU),{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return ht(ht({},e.props.parameters),i)}}class Yce{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Wce(e),this.pickLayersPass=new fU(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||Is.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(zn(ht({},e),{target:i}));this._postRender(e.effects,e),this.renderCount++,bo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new Is(this.gl),new Is(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const Kce={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Xce({pickedColors:n,layers:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){if(n){const{x:o,y:a,width:l,height:c}=s;let d=r*r,f=-1,p=0;for(let g=0;g<c;g++){const _=g+a-i,C=_*_;if(C>d)p+=4*l;else for(let b=0;b<l;b++){if(n[p+3]-1>=0){const z=b+o-t,he=z*z+C;he<=d&&(d=he,f=p)}p+=4}}if(f>=0){const g=n[f+3]-1,_=n.slice(f,f+4),C=e[g];if(C){const b=C.decodePickingColor(_),H=Math.floor(f/4/l);return{pickedColor:_,pickedLayer:C,pickedObjectIndex:b,pickedX:o+(f/4-H*l),pickedY:a+H}}Fi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Kce}function pU({pickInfo:n,mode:e,viewports:t,layerFilter:i,pixelRatio:r,x:s,y:o,z:a}){const l=n&&n.pickedLayer,d=function(n,e,t){for(let i=n.length-1;i>=0;i--){const r=n[i];if(r.containsPixel(e)&&(!t||t(r)))return r}return n[0]}(t,{x:s,y:o},i&&l&&(p=>i({layer:l,viewport:p,isPicking:!0,renderPass:"picking:".concat(e)}))),f=d&&d.unproject([s-d.x,o-d.y],{targetZ:a});return{color:null,layer:null,viewport:d,index:-1,picked:!1,x:s,y:o,pixel:[s,o],coordinate:f,devicePixel:n&&[n.pickedX,n.pickedY],pixelRatio:r}}function Zce(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===i){const f=t.index,p=t.layerId,g=o&&o.props.id;if(g!==p||a!==f){if(g!==p){const _=r.find(C=>C.props.id===p);_&&l.unshift(_)}t.layerId=g,t.index=a,t.info=null}}const c=pU(n),d=new Map;return d.set(null,c),l.forEach(f=>{let p=ht({},c);f===o&&(p.color=s,p.index=a,p.picked=!0),p=gU({layer:f,info:p,mode:i}),f===o&&"hover"===i&&(t.info=p),d.set(p.layer.id,p),"hover"===i&&p.layer.updateAutoHighlight(p)}),d}function gU({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class eue{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new fU(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?i.find(p=>p.id===o):null,c=a&&r.find(p=>p.id===a)||r[0],d=c&&c.unproject([e-c.x,t-c.y]),f={x:e,y:t,viewport:c,coordinate:d,layer:l};return l?ht(ht({},s),f):Object.assign(f,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new Is(e),Is.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new Is(e),this.depthFBO.attach({36064:new Da(e,{format:gi(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length>255?(Fi.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:d}){if(!(e=this._getPickable(e)))return{result:[],emptyInfo:pU({viewports:i,x:r,y:s})};this._resizeBuffer();const f=wg(this.gl),p=rM(this.gl,[r,s],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],_=Math.round(o*f),{width:C,height:b}=this.pickingFBO,H=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:_,deviceWidth:C,deviceHeight:b});let z;const he=[],Ie={};for(let Fe=0;Fe<a;Fe++){const dt=Xce({pickedColors:H&&this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:d,deviceRect:H,pass:"picking:".concat(l),redrawReason:l}),layers:e,deviceX:g[0],deviceY:g[1],deviceRadius:_,deviceRect:H});let Mt;if(dt.pickedLayer&&c&&this.depthFBO&&(Mt=this._drawAndSample({layers:[dt.pickedLayer],views:t,viewports:i,onViewportActive:d,deviceRect:{x:dt.pickedX,y:dt.pickedY,width:1,height:1},pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0})[0]*i[0].distanceScales.metersPerUnit[2]+i[0].position[2]),dt.pickedColor&&Fe+1<a){const Ot=dt.pickedColor[3]-1;Ie[Ot]=!0,e[Ot].disablePickingIndex(dt.pickedObjectIndex)}z=Zce({pickInfo:dt,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,layerFilter:this.layerFilter,viewports:i,x:r,y:s,z:Mt,pixelRatio:f});for(const Ot of z.values())Ot.layer&&he.push(Ot);if(!dt.pickedColor)break}for(const Fe in Ie)e[Fe].restorePickingColors();return{result:he,emptyInfo:z&&z.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:d}){if(!(e=this._getPickable(e)))return[];this._resizeBuffer();const f=wg(this.gl),p=rM(this.gl,[r,s],!0),g=p.x,_=p.y+p.height,C=rM(this.gl,[r+o,s+a],!0),H=C.y,Ie=function({pickedColors:n,layers:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4){const r=n[i+3]-1;if(r>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e[r];a?t.set(o,{pickedColor:s,pickedLayer:a,pickedObjectIndex:a.decodePickingColor(s)}):Fi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}({pickedColors:this._drawAndSample({layers:e,views:t,viewports:i,onViewportActive:d,deviceRect:{x:g,y:H,width:C.x+C.width-g,height:_-H},pass:"picking:".concat(l),redrawReason:l}),layers:e}),Fe=new Map,We=Number.isFinite(c);for(let dt=0;dt<Ie.length&&!(We&&Fe.size>=c);dt++){const Mt=Ie[dt];let Ot={color:Mt.pickedColor,layer:null,index:Mt.pickedObjectIndex,picked:!0,x:r,y:s,width:o,height:a,pixelRatio:f};Ot=gU({layer:Mt.pickedLayer,info:Ot,mode:l}),Fe.has(Ot.object)||Fe.set(Ot.object,Ot)}return Array.from(Fe.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,pass:o,redrawReason:a,pickZ:l}){if(e.length<1)return null;const c=l?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:c,deviceRect:s,pass:o,redrawReason:a,pickZ:l});const{x:d,y:f,width:p,height:g}=s,_=new(l?Float32Array:Uint8Array)(p*g*4);return CE(c,{sourceX:d,sourceY:f,sourceWidth:p,sourceHeight:g,target:_}),_}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),l=Math.min(r,e+i+1)-o,c=Math.min(s,t+i+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const tue={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class nue{constructor(e){const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,tue),t.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,i){const r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}remove(){this.el&&this.el.remove()}}function mU(n,e){if(!n)throw new Error(e)}const Wc={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},_U=Wc.global||Wc.self||Wc.window,rue="object"!=typeof process||"[object process]"!==String(process)||process.browser,yU="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:sue}=(yU&&parseFloat(yU[1]),_U),WI="undefined"!=typeof Image,qI="undefined"!=typeof ImageBitmap,oue=Boolean(sue),YI=!!rue||oue;function vU(n){const e=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}function bU(n){switch(vU(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}const cue=/^data:image\/svg\+xml/,uue=/\.svg((\?|#).*)?$/;function KI(n){return n&&(cue.test(n)||uue.test(n))}function due(n,e){if(KI(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return EU(n,e)}function EU(n,e){if(KI(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function SU(n,e,t){return XI.apply(this,arguments)}function XI(){return(XI=ti(function*(n,e,t){const i=due(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield hue(s||i,e)}finally{s&&r.revokeObjectURL(s)}})).apply(this,arguments)}function hue(n,e){return QI.apply(this,arguments)}function QI(){return(QI=ti(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error(`Could not load image ${n}: ${s}`))}catch(s){r(s)}})})).apply(this,arguments)}const fue={};let CU=!0;function pue(n,e,t){return ZI.apply(this,arguments)}function ZI(){return(ZI=ti(function*(n,e,t){let i;i=KI(t)?yield SU(n,e,t):EU(n,t);const r=e&&e.imagebitmap;return yield gue(i,r)})).apply(this,arguments)}function gue(n){return JI.apply(this,arguments)}function JI(){return(JI=ti(function*(n,e=null){if((mue(e)||!CU)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),CU=!1}return yield createImageBitmap(n)})).apply(this,arguments)}function mue(n){for(const e in n||fue)return!1;return!0}const qc=!1,mv=!0;function eO(n){const e=_v(n);return function(n){const e=_v(n);return e.byteLength>=24&&2303741511===e.getUint32(0,qc)?{mimeType:"image/png",width:e.getUint32(16,qc),height:e.getUint32(20,qc)}:null}(e)||function(n){const e=_v(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,qc)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,qc);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,qc),width:e.getUint16(s+7,qc)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,qc)}return null}(e)||function(n){const e=_v(n);return e.byteLength>=10&&1195984440===e.getUint32(0,qc)?{mimeType:"image/gif",width:e.getUint16(6,mv),height:e.getUint16(8,mv)}:null}(e)||function(n){const e=_v(n);return e.byteLength>=14&&16973===e.getUint16(0,qc)&&e.getUint32(2,mv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,mv),height:e.getUint32(22,mv)}:null}(e)}function _v(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function Eue(n,e){const{mimeType:t}=eO(n)||{},{_parseImageNode:i}=_U;return mU(i),i(n,t,e)}function tO(){return(tO=ti(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{};let a;switch(Cue(r)){case"imagebitmap":a=yield pue(n,e,s);break;case"image":a=yield SU(n,e,s);break;case"data":a=yield Eue(n,e);break;default:mU(!1)}return"data"===r&&(a=bU(a)),a})).apply(this,arguments)}function Cue(n){switch(n){case"auto":case"data":return function(){if(qI)return"imagebitmap";if(WI)return"image";if(YI)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return qI||WI||YI;case"imagebitmap":return qI;case"image":return WI;case"data":return YI;default:throw new Error(`@loaders.gl/images: image ${n} not supported in this environment`)}}(n),n}}const xU={id:"image",module:"images",name:"Images",version:"3.0.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,e,t){return tO.apply(this,arguments)},tests:[n=>Boolean(eO(new DataView(n)))],options:{image:{type:"auto",decode:!0}}},Aue={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},yv="8.5.8",aS=Er.CO.deck&&Er.CO.deck.VERSION;if(aS&&aS!==yv)throw new Error("deck.gl - multiple versions detected: ".concat(aS," vs ").concat(yv));aS||(Fi.log(1,"deck.gl ".concat(yv))(),Er.CO.deck=Object.assign(Er.CO.deck||{},{VERSION:yv,version:yv,log:Fi,_registerLoggers:function(n){TM=n}}),KV([Aue,[xU,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Tue=Er.CO.deck;class lS extends Fu{static isSupported(e,t=[]){const i=gi(e),r=BB(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:sn(!1)}return s}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return lS.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const AU=(0,Er.jU)()&&"undefined"!=typeof document;let kue=0;class Bue{constructor(e={}){const{onCreateContext:t=(b=>vB(b)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:c={},debug:d=!1,createFramebuffer:f=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:g=!0,stats:_=gf.get("animation-loop-"+kue++)}=e;let{useDevicePixels:C=!0}=e;"useDevicePixelRatio"in e&&(fn.deprecated("useDevicePixelRatio","useDevicePixels")(),C=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:d,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=_,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:g,useDevicePixels:C}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return sn("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=lS.isSupported(this.gl,["timers"])?new lS(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return ti(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return fn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=AU?new Promise((e,t)=>{AU&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?oM(this.props.gl,e):this.onCreateContext(e),!EE(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){Pu(n,iM)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,e={}){if(n.canvas)return void function(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(fn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),l=Math.floor(r*o);n.canvas.width=a,n.canvas.height=l,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==l)&&(fn.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,function(n){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels),e);const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Is(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var jue=tt(524),cS=tt.n(jue);const Vue={mousedown:1,mousemove:2,mouseup:4};(function(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function(n,e){for(let t=0;t<n.length;t++)if(n[t].pointerId===i.pointerId)return!0;return!1}(r)||r.push(i)),e.call(this,i)}})(cS().PointerEventInput),function(n){n.prototype.handler=function(t){let i=Vue[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(cS().MouseInput);const Gue=cS().Manager,Yc=cS(),$ue=Yc?[[Yc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Yc.Rotate,{enable:!1}],[Yc.Pinch,{enable:!1}],[Yc.Swipe,{enable:!1}],[Yc.Pan,{threshold:0,enable:!1}],[Yc.Press,{enable:!1}],[Yc.Tap,{event:"doubletap",taps:2,enable:!1}],[Yc.Tap,{event:"anytap",enable:!1}],[Yc.Tap,{enable:!1}]]:null,MU={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Wue={doubletap:["tap"]},que={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},iO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Yue={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},IU={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Kue="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",jg="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let OU=!1;try{const n={get passive(){return OU=!0,!0}};jg.addEventListener("test",n,n),jg.removeEventListener("test",n,n)}catch(n){}const Xue=-1!==Kue.indexOf("firefox"),{WHEEL_EVENTS:Que}=iO,NU=4.000244140625;class ede{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.events=Que.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!OU&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;jg.WheelEvent&&(Xue&&e.deltaMode===jg.WheelEvent.DOM_DELTA_PIXEL&&(t/=jg.devicePixelRatio),e.deltaMode===jg.WheelEvent.DOM_DELTA_LINE&&(t*=40));const i={x:e.clientX,y:e.clientY};0!==t&&t%NU==0&&(t=Math.floor(t/NU)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,i)}_onWheel(e,t,i){this.callback({type:"wheel",center:i,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:tde}=iO,PU="pointermove",FU="pointerover",LU="pointerout",kU="pointerleave";class nde{constructor(e,t,i={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=tde.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===PU&&(this.enableMoveEvent=t),e===FU&&(this.enableOverEvent=t),e===LU&&(this.enableOutEvent=t),e===kU&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:FU,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:LU,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:kU,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:PU,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:ide}=iO,BU="keydown";class rde{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=ide.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=i.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===BU&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:BU,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}const VU="contextmenu";class sde{constructor(e,t,i={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===VU&&(this.options.enable=t)}handleEvent(e){!this.options.enable||this.callback({type:VU,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const ode={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},UU={srcElement:"root",priority:0};class yde{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;i&&("object"!=typeof i||i.addEventListener)&&(i={srcElement:i}),i=i?Object.assign({},UU,i):UU;let l=a.get(i.srcElement);l||(l=[],a.set(i.srcElement,l));const c={type:e,handler:t,srcElement:i.srcElement,priority:i.priority};r&&(c.once=!0),s&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let d=l.length-1;for(;d>=0&&!(l[d].priority>=c.priority);)d--;l.splice(d+1,0,c)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let i=e.srcEvent.target;for(;i&&i!==t.rootElement;){if(this._emit(t,i),t.handled)return;i=i.parentNode}this._emit(t,"root")}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let l=0;l<i.length;l++){const{type:c,handler:d,once:f}=i[l];if(d(Object.assign({},e,{type:c,stopPropagation:s,stopImmediatePropagation:o})),f&&a.push(i[l]),r)break}for(let l=0;l<a.length;l++){const{type:c,handler:d}=a[l];this.remove(c,d)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(n){const e=ode[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i,which:r}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===r,o=2===r,a=3===r):2===e?(s=Boolean(1&t),o=Boolean(4&t),a=Boolean(2&t)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}(e),function(n,e){const{srcEvent:t}=n;if(!n.center&&!Number.isFinite(t.clientX))return null;const i=n.center||{x:t.clientX,y:t.clientY},r=e.getBoundingClientRect();return{center:i,offsetCenter:{x:(i.x-r.left-e.clientLeft)/(r.width/e.offsetWidth||1),y:(i.y-r.top-e.clientTop)/(r.height/e.offsetHeight||1)}}}(e,t),{handled:!1,rootElement:t})}}const vde={events:null,recognizers:null,recognizerOptions:{},Manager:Gue,touchAction:"none",tabIndex:0};class bde{constructor(e=null,t={}){this.options=Object.assign({},vde,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:i}=t;i&&this.on(i)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||$ue}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(MU).forEach(r=>{const s=this.manager.get(r);s&&MU[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new ede(e,this._onOtherEvent,{enable:!1}),this.moveInput=new nde(e,this._onOtherEvent,{enable:!1}),this.keyInput=new rde(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new sde(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=Wue[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const d in e)this._addEventHandler(d,e[d],i,r,s);return}const{manager:o,events:a}=this,l=IU[e]||e;let c=a.get(l);c||(c=new yde(this),a.set(l,c),c.recognizerName=Yue[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,t,i,r,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(IU[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of i.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:t}=e,i=que[t.type];i&&this.manager.emit(i,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function Ef(){}const zU={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Ef,onResize:Ef,onViewStateChange:Ef,onInteractionStateChange:Ef,onBeforeRender:Ef,onAfterRender:Ef,onLoad:Ef,onError:(n,e)=>Fi.error(n)(),_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",debug:!1,drawPickingColors:!1};class dS{constructor(e){e=ht(ht({},zU),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&Fi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,Er.qs)()&&Fi.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new aM({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Yy.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Fi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Fi.removed("onLayerClick","onClick")(),e.initialViewState&&!pv(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});!t||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e](ht({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport},i));return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),tc(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:i}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;return(t!==this.width||i!==this.height)&&(this.width=t,this.height=i,!0)}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:d,autoResizeDrawingBuffer:f}=e;return new Bue({width:t,height:i,useDevicePixels:d,autoResizeDrawingBuffer:f,autoResizeViewport:!1,gl:r,onCreateContext:p=>vB(zn(ht(ht({},s),p),{canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()})),onInitialize:p=>this._setGLContext(p.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Hce({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const i=e.offsetCenter;if(!i)return;t.x=i.x,t.y=i.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let r=i,s=!1;for(const o of t)r=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(r,e.event),this.props.getTooltip){const o=this.props.getTooltip(r);this.tooltip.setTooltip(o,r.x,r.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,oM(e,{enable:!0,copyState:!0})),this.tooltip=new nue(this.canvas),Pu(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new uU;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new bde(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in iB)this.eventManager.on(r,this._onEvent);this.viewManager=new jce({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new Bce(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new $ce,this.deckRenderer=new Yce(e),this.deckPicker=new eue(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Pu(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(ht({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Fi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=zn(ht({},this.viewState),{[e.viewId]:t}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=iB[e.type],i=e.offsetCenter;if(!t||!i)return;const r=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[t.handler]||o.props[t.handler]),l=this.props[t.handler];let c=!1;a&&(c=a.call(o,s,e)),!c&&l&&l(s,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=gf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}dS.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(aU)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},dS.defaultProps=zU,dS.VERSION=Tue.VERSION;const HU={name:"project32",dependencies:[HI],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},GU="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Sde={lightSources:{}};function oO({color:n=[0,0,0],intensity:e=1}={}){return n.map(t=>t*e/255)}const aO={name:"lights",vs:GU,fs:GU,getUniforms:function $U(n=Sde){if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function({ambientLight:n,pointLights:e=[],directionalLights:t=[]}){const i={};return i["lighting_uAmbientLight.color"]=n?oO(n):[0,0,0],e.forEach((r,s)=>{i[`lighting_uPointLight[${s}].color`]=oO(r),i[`lighting_uPointLight[${s}].position`]=r.position,i[`lighting_uPointLight[${s}].attenuation`]=r.attenuation||[1,0,0]}),i.lighting_uPointLightCount=e.length,t.forEach((r,s)=>{i[`lighting_uDirectionalLight[${s}].color`]=oO(r),i[`lighting_uDirectionalLight[${s}].direction`]=r.direction}),i.lighting_uDirectionalLightCount=t.length,i}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return $U({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},xde={};const Tde={name:"phong-lighting",dependencies:[aO],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=xde){if(!("material"in n))return{};const{material:e}=n;return e?function(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},Mde={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},YU=ht({inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=Mde){const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=Boolean(n.pickingActive),e.picking_uAttribute=Boolean(n.pickingAttribute)),e}}),KU={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class hS{static get DRAW_MODE(){return KU}constructor(e={}){const{id:t=Vc("geometry"),drawMode:i=KU.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?ht({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,sn(ArrayBuffer.isView(r.value),`${this._print(i)}: must be typed array or object with value as typed array`),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(sn(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(i=Math.min(i,o.length/a))}return sn(Number.isFinite(i)),i}}const lO=Math.PI/180,fS=new Float32Array(16),XU=new Float32Array(12);function QU(n,e,t){const i=e[0]*lO,r=e[1]*lO,s=e[2]*lO,o=Math.sin(s),a=Math.sin(i),l=Math.sin(r),c=Math.cos(s),d=Math.cos(i),f=Math.cos(r),p=t[0],g=t[1],_=t[2];n[0]=p*f*d,n[1]=p*l*d,n[2]=p*-a,n[3]=g*(-l*c+f*a*o),n[4]=g*(f*c+l*a*o),n[5]=g*d*o,n[6]=_*(l*o+f*a*c),n[7]=_*(-f*o+l*a*c),n[8]=_*d*c}function ZU(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const JU={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,l=Array.isArray(a),c=l&&16===a.length,d=Array.isArray(s),f=Array.isArray(r),p=Array.isArray(o),g=c||!l&&Boolean(a(i[0]));n.constant=g?c:f&&d&&p;const _=n.value;if(n.constant){let C;g?(fS.set(a),C=ZU(fS)):(C=XU,QU(C,r,s),C.set(o,9)),n.value=new Float32Array(C)}else{let C=e*n.size;const{iterable:b,objectInfo:H}=ZB(i,e,t);for(const z of b){let he;H.index++,g?(fS.set(c?a:a(z,H)),he=ZU(fS)):(he=XU,QU(he,f?r:r(z,H),d?s:s(z,H)),he.set(p?o:o(z,H),9)),_[C++]=he[0],_[C++]=he[1],_[C++]=he[2],_[C++]=he[3],_[C++]=he[4],_[C++]=he[5],_[C++]=he[6],_[C++]=he[7],_[C++]=he[8],_[C++]=he[9],_[C++]=he[10],_[C++]=he[11]}}}};function ez(n,e){return e===Oi.CARTESIAN||e===Oi.METER_OFFSETS||e===Oi.DEFAULT&&!n.isGeospatial}function tz(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Fi.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Nde(n,e){if(n.attributes)return tz(n.attributes,e),n instanceof hS?n:new hS(n);if(n.positions||n.POSITION)return tz(n,e),new hS({attributes:n});throw Error("Invalid mesh")}const Pde={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};let Fde=(()=>{class n extends jI{getShaders(){const t=!gi(this.context.gl),i={};return _M(this.context.gl,"GLSL_DERIVATIVES")&&(i.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[HU,Tde,YU],transpileToGLSL100:t,defines:i})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:JU}),this.setState({emptyTexture:new Da(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:t,oldProps:i,changeFlags:r}){if(super.updateState({props:t,oldProps:i,changeFlags:r}),t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(){super.finalizeState(),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;const{viewport:i}=this.context,{sizeScale:r,coordinateSystem:s,_instanced:o}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:r,composeModelMatrix:!o||ez(i,s),flatShading:!this.state.hasNormals}).draw()}getModel(t){const i=new BE(this.context.gl,zn(ht({},this.getShaders()),{id:this.props.id,geometry:Nde(t,this.props._useMeshColors),isInstanced:!0})),{texture:r}=this.props,{emptyTexture:s}=this.state;return i.setUniforms({sampler:r||s,hasTexture:Boolean(r)}),i}setTexture(t){const{emptyTexture:i,model:r}=this.state;null==r||r.setUniforms({sampler:t||i,hasTexture:Boolean(t)})}}return n.layerName="SimpleMeshLayer",n.defaultProps=Pde,n})();const nz={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[aO]};class Vg{constructor(e={}){const{id:t}=e;this.id=t||Vc(this.constructor.name),this.display=!0,this.position=new vo,this.rotation=new vo,this.scale=new vo(1,1,1),this.matrix=new $n,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return sn(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return sn(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return sn(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e,t=!0){t?this.matrix.copy(e):this.matrix=e}setMatrixComponents({position:e,rotation:t,scale:i,update:r=!0}){return e&&this.setPosition(e),t&&this.setRotation(t),i&&this.setScale(i),r&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(e={}){const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){sn(e),t=t||this.matrix;const i=new $n(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class vv extends Vg{constructor(e={}){e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;fn.assert(t.every(i=>i instanceof Vg),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(...e){for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e,{worldMatrix:t=new $n}={}){const i=new $n(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof vv?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}function iz(){var n=new oa(4);return oa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function rz(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function sz(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],l=t[1],c=t[2],d=t[3];return n[0]=i*d+o*a+r*c-s*l,n[1]=r*d+o*l+s*a-i*c,n[2]=s*d+o*c+i*l-r*a,n[3]=o*d-i*a-r*l-s*c,n}var az=Qj,Xde=function(){var n=zB(),e=HB(1,0,0),t=HB(0,1,0);return function(i,r,s){var o=GB(r,s);return o<-.999999?(TE(n,e,r),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&TE(n,t,r),function(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),rz(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(TE(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();iz(),iz(),function(){var n=new oa(9);oa!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const Qde=[0,0,0,1],Jde={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ehe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function uz(n){if(!n._animation){const e=ehe[n.componentType],t=Jde[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=t)a.push(Array.from(o.slice(l,l+t)));n._animation=a}}return n._animation}const the=new $n,cO=new class extends vM{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}}(this,e),this.check()}identity(){return function(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return rz(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=eo(e)}get y(){return this[1]}set y(e){this[1]=eo(e)}get z(){return this[2]}set z(e){this[2]=eo(e)}get w(){return this[3]}set w(e){this[3]=eo(e)}len(){return function(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return Xde(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return function(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check()}multiplyRight(e,t){return ku(!t),sz(this,this,e),this.check()}multiplyLeft(e,t){return ku(!t),sz(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=i*l+o*a,n[1]=r*l+s*a,n[2]=s*l-r*a,n[3]=o*l-i*a}(this,this,e),this.check()}rotateY(e){return function(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=i*l-s*a,n[1]=r*l+o*a,n[2]=s*l+i*a,n[3]=o*l-r*a}(this,this,e),this.check()}rotateZ(e){return function(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=i*l+r*a,n[1]=r*l-i*a,n[2]=s*l+o*a,n[3]=o*l-s*a}(this,this,e),this.check()}scale(e){return az(this,this,e),this.check()}slerp(e,t,i){switch(arguments.length){case 1:({start:e=Qde,target:t,ratio:i}=arguments[0]);break;case 2:[t,i]=arguments,e=this}return function(n,e,t,i){var p,g,_,C,b,r=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],d=t[2],f=t[3];(g=r*l+s*c+o*d+a*f)<0&&(g=-g,l=-l,c=-c,d=-d,f=-f),1-g>fr?(p=Math.acos(g),_=Math.sin(p),C=Math.sin((1-i)*p)/_,b=Math.sin(i*p)/_):(C=1-i,b=i),n[0]=C*r+b*l,n[1]=C*s+b*c,n[2]=C*o+b*d,n[3]=C*a+b*f}(this,e,t,i),this.check()}transformVector4(e,t=e){return function(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=t[3],d=c*i+a*s-l*r,f=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;n[0]=d*c+g*-o+f*-l-p*-a,n[1]=f*c+g*-a+p*-o-d*-l,n[2]=p*c+g*-l+d*-a-f*-o,n[3]=e[3]}(t,e,this),AE(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}};class ahe{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:r,target:s,path:o})=>{(function(n,{input:e,interpolation:t,output:i},r,s){const a=n%e[e.length-1],l=e.findIndex(p=>p>=a),c=Math.max(0,l-1);if(!Array.isArray(r[s]))switch(s){case"translation":r[s]=[0,0,0];break;case"rotation":r[s]=[0,0,0,1];break;case"scale":r[s]=[1,1,1];break;default:fn.warn(`Bad animation path ${s}`)()}sn(r[s].length===i[c].length);const d=e[c],f=e[l];switch(t){case"STEP":!function(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(r,s,i[c]);break;case"LINEAR":f>d&&function(n,e,t,i,r){if("rotation"===e){cO.slerp({start:t,target:i,ratio:r});for(let s=0;s<cO.length;s++)n[e][s]=cO[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(r,s,i[c],i[l],(a-d)/(f-d));break;case"CUBICSPLINE":f>d&&function(n,e,{p0:t,outTangent0:i,inTangent1:r,p1:s,tDiff:o,ratio:a}){for(let l=0;l<n[e].length;l++){const c=i[l]*o,d=r[l]*o;n[e][l]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*t[l]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*c+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[l]+(Math.pow(a,3)-Math.pow(a,2))*d}}(r,s,{p0:i[3*c+1],outTangent0:i[3*c+2],inTangent1:i[3*l+0],p1:i[3*l+1],tDiff:f-d,ratio:(a-d)/(f-d)});break;default:fn.warn(`Interpolation ${t} not supported`)()}})(i,r,s,o),function(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=the.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class lhe{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||`Animation-${i}`,s=t.samplers.map(({input:a,interpolation:l="LINEAR",output:c})=>({input:uz(e.accessors[a]),interpolation:l,output:uz(e.accessors[c])})),o=t.channels.map(({sampler:a,target:l})=>({sampler:s[a],target:e.nodes[l.node],path:l.path}));return new ahe({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class che extends Vg{constructor(e,t={}){super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof BE?(this.model=e,this._setModelNodeProps(t)):this.model=new BE(e,t),this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(...e){return this.model.draw(...e)}setUniforms(...e){return this.model.setUniforms(...e),this}setAttributes(...e){return this.model.setAttributes(...e),this}updateModuleSettings(...e){return this.model.updateModuleSettings(...e),this}_setModelNodeProps(e){this.model.setProps(e)}}class uhe{constructor(e,{attributes:t,material:i,pbrDebug:r,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},_M(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),r&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(t.NORMAL,"HAS_NORMALS"),this.defineIfPresent(t.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(t.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(r,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t,i=null){const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new Da(this.gl,ht({id:e.name||e.id,parameters:ht(ht({},e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[t]=l,this.defineIfPresent(i,i),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(fn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function dz(n,e){return gi(n)?`#version 300 es\n${e}`:e}const phe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ghe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class mhe{constructor(e,t={}){this.gl=e,this.options=Object.assign({},ghe,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new lhe(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new vv({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new vv({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new $n).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new vv({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){fn.warn("getVertexCount() not found")()}createPrimitive(e,t,i){return function(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new uhe(n,e);fn.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(d=>d.buffer));const c=new che(n,Object.assign({id:t,drawMode:i,vertexCount:r,modules:[nz],defines:a.defines,parameters:a.parameters,vs:dz(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:dz(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},o));return c.setProps({attributes:s}),c.setUniforms(a.uniforms),c}(this.gl,Object.assign({id:e.name||`${i.name||i.id}-primitive-${t}`,drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),fn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new ir(this.gl,{id:`from-${i.id}`,data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new sa({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:phe[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function hz(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function Ra(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function fz(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error(`'baseUri' must be provided to resolve relative url ${n}`);return i.substr(0,i.lastIndexOf("/")+1)+n}function pz(n,e,t){const i=n.bufferViews[t];Ra(i);const s=e[i.buffer];return Ra(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}const gz={name:"Draco",id:"draco",module:"draco",version:"3.0.12",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class Ug{constructor(e,t){Wn(this,"fields",void 0),Wn(this,"metadata",void 0),function(n,e){if(!n)throw new Error("loader assertion failed.")}(Array.isArray(e)),function(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new Ug(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Ug(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof Ug){const o=e;t=o.fields,i=mz(mz(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new Ug(s,i)}}function mz(n,e){return new Map([...n||new Map,...e||new Map])}let Ir,_z,yz,vz,bz,wz,Ez,Sz;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(Ir||(Ir={}));class uO{static isNull(e){return e&&e.typeId===Ir.Null}static isInt(e){return e&&e.typeId===Ir.Int}static isFloat(e){return e&&e.typeId===Ir.Float}static isBinary(e){return e&&e.typeId===Ir.Binary}static isUtf8(e){return e&&e.typeId===Ir.Utf8}static isBool(e){return e&&e.typeId===Ir.Bool}static isDecimal(e){return e&&e.typeId===Ir.Decimal}static isDate(e){return e&&e.typeId===Ir.Date}static isTime(e){return e&&e.typeId===Ir.Time}static isTimestamp(e){return e&&e.typeId===Ir.Timestamp}static isInterval(e){return e&&e.typeId===Ir.Interval}static isList(e){return e&&e.typeId===Ir.List}static isStruct(e){return e&&e.typeId===Ir.Struct}static isUnion(e){return e&&e.typeId===Ir.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ir.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ir.FixedSizeList}static isMap(e){return e&&e.typeId===Ir.Map}static isDictionary(e){return e&&e.typeId===Ir.Dictionary}get typeId(){return Ir.NONE}compareTo(e){return this===e}}Symbol,Symbol,_z=Symbol.toStringTag;class zg extends uO{constructor(e,t){super(),Wn(this,"isSigned",void 0),Wn(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return Ir.Int}get[_z](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class Ahe extends zg{constructor(){super(!0,8)}}class The extends zg{constructor(){super(!0,16)}}class Dhe extends zg{constructor(){super(!0,32)}}class Mhe extends zg{constructor(){super(!1,8)}}class Ihe extends zg{constructor(){super(!1,16)}}class Ohe extends zg{constructor(){super(!1,32)}}yz=Symbol.toStringTag;class Cz extends uO{constructor(e){super(),Wn(this,"precision",void 0),this.precision=e}get typeId(){return Ir.Float}get[yz](){return"Float"}toString(){return`Float${this.precision}`}}class Rhe extends Cz{constructor(){super(32)}}class Nhe extends Cz{constructor(){super(64)}}Symbol,Symbol,vz=Symbol.toStringTag,bz=Symbol.toStringTag,wz=Symbol.toStringTag,Ez=Symbol.toStringTag,Sz=Symbol.toStringTag;class Phe extends uO{constructor(e,t){super(),Wn(this,"listSize",void 0),Wn(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return Ir.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Sz](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}class gS{constructor(e,t,i=!1,r=new Map){Wn(this,"name",void 0),Wn(this,"type",void 0),Wn(this,"nullable",void 0),Wn(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new gS(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${this.metadata}`:""}`}}function xz(n,e,t){const i=t?Az(t.metadata):void 0,r=function(n){switch(n.constructor){case Int8Array:return new Ahe;case Uint8Array:return new Mhe;case Int16Array:return new The;case Uint16Array:return new Ihe;case Int32Array:return new Dhe;case Uint32Array:return new Ohe;case Float32Array:return new Rhe;case Float64Array:return new Nhe;default:throw new Error("array type not supported")}}(e.value);return new gS(n,new Phe(e.size,new gS("value",r)),!1,i)}function Az(n){const e=new Map;for(const t in n)e.set(`${t}.string`,JSON.stringify(n[t]));return e}const Tz={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Bhe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Vhe{constructor(e){Wn(this,"draco",void 0),Wn(this,"decoder",void 0),Wn(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const p=`DRACO decompression failed: ${o.error_msg()}`;throw new Error(p)}const a=this._getDracoLoaderData(s,r,t),l=this._getMeshData(s,a,t),c=function(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],l=a&&a.length;for(let c=0;c<l;c+=3){const d=a[c],f=a[c+1],p=a[c+2];e=d<e?d:e,t=f<t?f:t,i=p<i?p:i,r=d>r?d:r,s=f>s?f:s,o=p>o?p:o}return[[e,t,i],[r,s,o]]}(l.attributes),d=function(n,e,t){const i=Az(e.metadata),r=[],s=function(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const l=xz(o,n[o],s[o]);r.push(l)}if(t){const o=xz("indices",t);r.push(o)}return new Ug(r,i)}(l.attributes,a,l.indices);return zn(ht({loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:c}},l),{schema:d})}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const l=this._getOctahedronTransform(s,t);l&&(i[s.unique_id()].octahedron_transform=l)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:l}=this._getAttributeValues(t,s);r[o]={value:a,size:l,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=Bhe[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,l=function(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let c;const d=this.draco._malloc(a);try{const f=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,f,l,a,d),c=new i(this.draco.HEAPF32.buffer,d,o).slice()}finally{this.draco._free(d)}return{value:c,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in Tz)if(this.draco[o]===r)return Tz[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:`CUSTOM_ATTRIBUTE_${i}`}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}var mS=tt(125);const pO={};function gO(n){return mO.apply(this,arguments)}function mO(){return(mO=ti(function*(n,e=null,t={}){return e&&(n=$he(n,e,t)),pO[n]=pO[n]||Whe(n),yield pO[n]})).apply(this,arguments)}function $he(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:mI?t.CDN?(Hc(t.CDN.startsWith("http")),`${t.CDN}/${e}@3.0.12/dist/libs/${n}`):_I?`../src/libs/${n}`:`modules/${e}/src/libs/${n}`:`modules/${e}/dist/libs/${n}`}function Whe(n){return _O.apply(this,arguments)}function _O(){return(_O=ti(function*(n){return n.endsWith("wasm")?yield(yield fetch(n)).arrayBuffer():mI?_I?importScripts(n):qhe(yield(yield fetch(n)).text(),n):mS.requireFromFile&&(yield mS.requireFromFile(n))})).apply(this,arguments)}function qhe(n,e){if(!mI)return mS.requireFromString&&mS.requireFromString(n,e);if(_I)return eval.call(Bae,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch(i){t.text=n}return document.body.appendChild(t),null}const Yhe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.js",Khe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_wasm_wrapper.js",Xhe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.wasm";let bv;function Zhe(n){return yO.apply(this,arguments)}function yO(){return(yO=ti(function*(n){const e=n.modules||{};return bv=e.draco3d?bv||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):bv||Jhe(n),yield bv})).apply(this,arguments)}function Jhe(n){return bO.apply(this,arguments)}function bO(){return(bO=ti(function*(n){let e,t;switch(n.draco&&n.draco.decoderType){case"js":e=yield gO(Yhe,"draco",n);break;case"wasm":default:[e,t]=yield Promise.all([yield gO(Khe,"draco",n),yield gO(Xhe,"draco",n)])}return e=e||globalThis.DracoDecoderModule,yield efe(e,t)})).apply(this,arguments)}function efe(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(zn(ht({},t),{onModuleLoaded:r=>i({draco:r})}))})}const EO=zn(ht({},gz),{parse:function(n,e){return SO.apply(this,arguments)}});function SO(){return(SO=ti(function*(n,e){const{draco:t}=yield Zhe(e),i=new Vhe(t);try{return i.parseSync(n,null==e?void 0:e.draco)}finally{i.destroy()}})).apply(this,arguments)}function Ev(n,e){return bf(n>=0),bf(e>0),n+(e-1)&~(e-1)}function ife(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+Ev(i.byteLength,4)}const Dz=["SCALAR","VEC2","VEC3","VEC4"],rfe=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],sfe=new Map(rfe),ofe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},afe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},lfe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Mz(n){return Dz[n-1]||Dz[0]}function Iz(n){const e=sfe.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function Oz(n,e){const t=lfe[n.componentType],i=ofe[n.type],s=n.count*i,o=n.count*i*afe[n.componentType];return Ra(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const cfe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class ih{constructor(e){Wn(this,"gltf",void 0),Wn(this,"sourceBuffers",void 0),Wn(this,"byteLength",void 0),this.gltf=e||{json:ht({},cfe),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error(`glTF file error: Could not find ${e}[${t}]`);return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Ra(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=Oz(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return Ra(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Ra(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const l=this._addIndices(i);a.primitives[0].indices=l}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=eO(e),r=t||(null==i?void 0:i.mimeType),o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Ra(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=Ev(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:Mz(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:Iz(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=ife(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Rz="KHR_binary_glTF",Sv="KHR_draco_mesh_compression",Hg="KHR_lights_punctual",yS="KHR_materials_unlit",vS="KHR_techniques_webgl";function hfe(n){const e={};for(const t in n){const i=n[t];if("indices"!==t){const r=Nz(i);e[t]=r}}return e}function Nz(n){const{buffer:e,size:t,count:i}=function(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:Mz(t),componentType:Iz(e)}}function gfe(n,e,t){return CO.apply(this,arguments)}function CO(){return(CO=ti(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new ih(n),s=[];for(const o of bfe(r))r.getObjectExtension(o,Sv)&&s.push(_fe(r,o,e,t));yield Promise.all(s),r.removeExtension(Sv)})).apply(this,arguments)}function mfe(n,e={}){const t=new ih(n);for(const i of t.json.meshes||[])yfe(i),t.addRequiredExtension(Sv)}function _fe(n,e,t,i){return xO.apply(this,arguments)}function xO(){return(xO=ti(function*(n,e,t,i){const r=n.getObjectExtension(e,Sv);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=$V(s.buffer,s.byteOffset),{parse:a}=i,l=ht({},t);delete l["3d-tiles"];const c=yield a(o,EO,l,i),d=hfe(c.attributes);for(const[f,p]of Object.entries(d))if(f in e.attributes){const _=n.getAccessor(e.attributes[f]);null!=_&&_.min&&null!=_&&_.max&&(p.min=_.min,p.max=_.max)}e.attributes=d,c.indices&&(e.indices=Nz(c.indices)),vfe(e)})).apply(this,arguments)}function yfe(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),l=i._addFauxAttributes(a.attributes),c=i.addBufferView(o);return{primitives:[{attributes:l,mode:t,extensions:{[Sv]:{bufferView:c,attributes:l}}}]}}function vfe(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*bfe(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}function wfe(n){return AO.apply(this,arguments)}function AO(){return(AO=ti(function*(n){const e=new ih(n),{json:t}=e;e.removeExtension(yS);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,yS)})).apply(this,arguments)}function Efe(n){const e=new ih(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,yS,{}),e.addExtension(yS))}function Sfe(n){return TO.apply(this,arguments)}function TO(){return(TO=ti(function*(n){const e=new ih(n),{json:t}=e,i=e.getExtension(Hg);i&&(e.json.lights=i.lights,e.removeExtension(Hg));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,Hg);s&&(r.light=s.light),e.removeObjectExtension(r,Hg)}})).apply(this,arguments)}function Cfe(n){return DO.apply(this,arguments)}function DO(){return(DO=ti(function*(n){const e=new ih(n),{json:t}=e;if(t.lights){const i=e.addExtension(Hg);Ra(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Hg,i);delete e.json.lights}})).apply(this,arguments)}function xfe(n){return MO.apply(this,arguments)}function MO(){return(MO=ti(function*(n){const e=new ih(n),{json:t}=e,i=e.getExtension(vS);if(i){const r=Tfe(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,vS);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=Dfe(s.technique,e)),e.removeObjectExtension(s,vS)}e.removeExtension(vS)}})).apply(this,arguments)}function Afe(n,e){return IO.apply(this,arguments)}function IO(){return(IO=ti(function*(n,e){})).apply(this,arguments)}function Tfe(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}function Dfe(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const Pz={KHR_draco_mesh_compression:gt,KHR_materials_unlit:J,KHR_lights_punctual:xt,KHR_techniques_webgl:ut};function Mfe(n){return OO.apply(this,arguments)}function OO(){return(OO=ti(function*(n,e={},t){for(const r in Pz){var i;const s=(null==e||null===(i=e.gltf)||void 0===i?void 0:i.excludeExtensions)||{};r in s&&!s[r]||(yield Pz[r].decode(n,e,t))}})).apply(this,arguments)}const Fz={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},Ofe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class Rfe{constructor(e){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${i.asset.version}`)}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function(n){const e=new ih(n),{json:t}=e;for(const i of t.images||[]){const r=e.removeObjectExtension(i,Rz);r&&Object.assign(i,r)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(Rz)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in Fz)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in Fz)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn(`gltf v1: json doesn't contain attribute ${t}`),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=Ofe[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error(`gltf v1: failed to resolve ${t} with id ${e}`);return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const t of e.materials){t.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const i=t.values&&t.values.tex,r=e.textures.findIndex(s=>s.id===i);-1!==r&&(t.pbrMetallicRoughness.baseColorTexture={index:r})}}}function Nfe(n,e={}){return(new Rfe).normalize(n,e)}const Pfe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ffe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ml={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},Lfe={magFilter:ml.TEXTURE_MAG_FILTER,minFilter:ml.TEXTURE_MIN_FILTER,wrapS:ml.TEXTURE_WRAP_S,wrapT:ml.TEXTURE_WRAP_T},kfe={[ml.TEXTURE_MAG_FILTER]:ml.LINEAR,[ml.TEXTURE_MIN_FILTER]:ml.NEAREST_MIPMAP_LINEAR,[ml.TEXTURE_WRAP_S]:ml.REPEAT,[ml.TEXTURE_WRAP_]:ml.REPEAT};class Vfe{postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Ra(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn(`glTF file error: Could not find ${e}[${t}]`),i}_resolveScene(e,t){return e.id=e.id||`scene-${t}`,e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||`node-${t}`,e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||`skin-${t}`,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||`mesh-${t}`,e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i=ht({},i)).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||`material-${t}`,e.normalTexture&&(e.normalTexture=ht({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=ht({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=ht({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=ht({},e.pbrMetallicRoughness);const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture=ht({},i.baseColorTexture),i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture=ht({},i.metallicRoughnessTexture),i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||`accessor-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function(n){return Ffe[n]}(e.componentType),e.components=function(n){return Pfe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=Oz(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset,a=i.arrayBuffer.slice(o,o+s);e.value=new r(a)}return e}_resolveTexture(e,t){return e.id=e.id||`texture-${t}`,e.sampler="sampler"in e?this.getSampler(e.sampler):kfe,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||`sampler-${t}`,e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return Lfe[e]}_resolveImage(e,t){e.id=e.id||`image-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){e.id=e.id||`bufferView-${t}`;const i=e.buffer;e.buffer=this.buffers[i];let s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),e.data=new Uint8Array(this.buffers[i].arrayBuffer,s,e.byteLength),e}_resolveCamera(e,t){return e.id=e.id||`camera-${t}`,e}}function Ufe(n,e){return(new Vfe).postProcess(n,e)}const Lz=1735152710,Gg=!0;function NO(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),Ev(i,4)}function PO(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),Ev(i,4)}function Jfe(n,e){return FO.apply(this,arguments)}function FO(){return(FO=ti(function*(n,e,t=0,i,r){var s,o,a,l;epe(n,e,t,i),Nfe(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize});const c=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield tpe(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const f=npe(n,i,r);c.push(f)}const d=Mfe(n,i,r);return c.push(d),yield Promise.all(c),null!=i&&null!==(l=i.gltf)&&void 0!==l&&l.postProcess?Ufe(n,i):n})).apply(this,arguments)}function epe(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function(n,e=0,t={}){const i=new DataView(n),{magic:r=Lz}=t,s=i.getUint32(e,!1);return s===r||s===Lz}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function(n){try{return JSON.parse(n)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?hz(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?hz(n,0,e):""}(n)}"`)}}(e);else if(e instanceof ArrayBuffer){const o={};t=function(n,e,t=0,i={}){const r=new DataView(e),s=function(n,e=0){return`${String.fromCharCode(n.getUint8(e+0))}${String.fromCharCode(n.getUint8(e+1))}${String.fromCharCode(n.getUint8(e+2))}${String.fromCharCode(n.getUint8(e+3))}`}(r,t+0),o=r.getUint32(t+4,Gg),a=r.getUint32(t+8,Gg);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=12,n.version){case 1:return function(n,e,t){bf(n.header.byteLength>20);const i=e.getUint32(t+0,Gg),r=e.getUint32(t+4,Gg);return t+=8,bf(0===r),NO(n,e,t,i),(t+=i)+PO(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function(n,e,t,i){return bf(n.header.byteLength>20),function(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,Gg),s=e.getUint32(t+4,Gg);switch(t+=8,s){case 1313821514:NO(n,e,t,r);break;case 5130562:PO(n,e,t,r);break;case 0:i.strict||NO(n,e,t,r);break;case 1:i.strict||PO(n,e,t,r)}t+=Ev(r,4)}}(n,e,t,{}),t+n.header.byteLength}(n,r,t);default:throw new Error(`Invalid GLB version ${n.version}. Only supports v1 and v2.`)}}(o,e,t,i.glb),Ra("glTF"===o.type,`Invalid GLB magic string ${o.type}`),n._glb=o,n.json=o.json}else Ra(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function tpe(n,e,t){return LO.apply(this,arguments)}function LO(){return(LO=ti(function*(n,e,t){for(let s=0;s<n.json.buffers.length;++s){const o=n.json.buffers[s];if(o.uri){var i,r;const{fetch:a}=t;Ra(a);const l=fz(o.uri,e),c=yield null==t||null===(i=t.fetch)||void 0===i?void 0:i.call(t,l),d=yield null==c||null===(r=c.arrayBuffer)||void 0===r?void 0:r.call(c);n.buffers[s]={arrayBuffer:d,byteOffset:0,byteLength:d.byteLength},delete o.uri}}})).apply(this,arguments)}function npe(n,e,t){return kO.apply(this,arguments)}function kO(){return(kO=ti(function*(n,e,t){const i=n.json.images||[],r=[];for(let s=0;s<i.length;++s)r.push(ipe(n,i[s],s,e,t));return yield Promise.all(r)})).apply(this,arguments)}function ipe(n,e,t,i,r){return BO.apply(this,arguments)}function BO(){return(BO=ti(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri){const c=fz(e.uri,i);a=yield(yield s(c)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const c=pz(n.json,n.buffers,e.bufferView);a=$V(c.buffer,c.byteOffset,c.byteLength)}Ra(a,"glTF image has no data");const l=yield o(a,xU,{},r);n.images[t]=l})).apply(this,arguments)}const $g={name:"glTF",id:"gltf",module:"gltf",version:"3.0.12",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return jO.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function jO(){return(jO=ti(function*(n,e={},t){(e=ht(ht({},$g.options),e)).gltf=ht(ht({},$g.options.gltf),e.gltf);const{byteOffset:i=0}=e;return yield Jfe({},n,i,e,t)})).apply(this,arguments)}function VO(){return(VO=ti(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield ope(()=>e.some(t=>!t.loaded))})).apply(this,arguments)}function ope(n){return UO.apply(this,arguments)}function UO(){return(UO=ti(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))})).apply(this,arguments)}const kz=[255,255,255,255],cpe={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:kz},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[$g]};let upe=(()=>{class n extends jI{getShaders(){const t=[HU,YU];return"pbr"===this.props._lighting&&t.push(nz),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:kz,transition:!0},instanceModelMatrix:JU})}updateState(t){super.updateState(t);const{props:i,oldProps:r}=t;i.scenegraph!==r.scenegraph?this._updateScenegraph(i):i._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,i._animations)}finalizeState(){super.finalizeState(),this._deleteScenegraph()}_updateScenegraph(t){const{gl:i}=this.context;let r=null;if(t.scenegraph instanceof Vg)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const l=t.scenegraph,c=function(n,e,t){const i=new mhe(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(i,l,this._getModelOptions());r=ht({gltf:l},c),function(n){return VO.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else t.scenegraph&&(Fi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);const s={layer:this,gl:i},o=t.getScene(r,s),a=t.getAnimator(r,s);o instanceof Vg?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,a,t._animations),this.setState({scenegraph:o,animator:a})):null!==o&&Fi.warn("invalid scenegraph:",o)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const i=this.getAttributeManager().getAttributes();t.traverse(r=>{this._setModelAttributes(r.model,i)})}}_applyAnimationsProp(t,i,r){if(!t||!i||!r)return;const s=i.getAnimations();Object.keys(r).sort().forEach(o=>{const a=r[o];if("*"===o)s.forEach(l=>{Object.assign(l,a)});else if(Number.isFinite(Number(o))){const l=Number(o);l>=0&&l<s.length?Object.assign(s[l],a):Fi.warn("animation ".concat(o," not found"))()}else{const l=s.find(({name:c})=>c===o);l?Object.assign(l,a):Fi.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof Vg&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let i=null;return t&&(i="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:i,modelOptions:ht({isInstanced:!0,transpileToGLSL100:!gi(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(i=>{this._setModelAttributes(i.model,t)})}draw({moduleParameters:t=null,parameters:i={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());const{viewport:s}=this.context,{sizeScale:o,sizeMinPixels:a,sizeMaxPixels:l,opacity:c,coordinateSystem:d}=this.props,f=this.getNumInstances();this.state.scenegraph.traverse((p,{worldMatrix:g})=>{p.model.setInstanceCount(f),p.updateModuleSettings(t),p.draw({parameters:i,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:a,sizeMaxPixels:l,composeModelMatrix:ez(s,d),sceneModelMatrix:g,u_Camera:p.model.getUniforms().project_uCameraPosition}})})}}return n.layerName="ScenegraphLayer",n.defaultProps=cpe,n})();const dpe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),hpe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),fpe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),ppe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),gpe={POSITION:{size:3,value:new Float32Array(hpe)},NORMAL:{size:3,value:new Float32Array(fpe)},TEXCOORD_0:{size:2,value:new Float32Array(ppe)}};class mpe extends hS{constructor(e={}){const{id:t=Vc("cube-geometry")}=e;super(zn(ht({},e),{id:t,indices:{size:1,value:new Uint16Array(dpe)},attributes:ht(ht({},gpe),e.attributes)}))}}class Kc{constructor(e=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e=new le){const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t=new le){const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t=new Kc){const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],l=i[2],c=i[3],d=i[4],f=i[5],p=i[6],g=i[7],_=i[8],C=r[0],b=r[1],H=r[2],z=r[3],he=r[4],Ie=r[5],Fe=r[6],We=r[7],dt=r[8];return s[0]=o*C+a*z+l*Fe,s[1]=o*b+a*he+l*We,s[2]=o*H+a*Ie+l*dt,s[3]=c*C+d*z+f*Fe,s[4]=c*b+d*he+f*We,s[5]=c*H+d*Ie+f*dt,s[6]=p*C+g*z+_*Fe,s[7]=p*b+g*he+_*We,s[8]=p*H+g*Ie+_*dt,t}scale(e,t=new Kc){const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t=new le){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let l=3;const c=l;let d,p;do{if(o=c-l,0===s[o+4*o])for(a=o+1;a<c;a++)if(0!==s[o+4*a]){d=4;do{p=4-d,s[p+4*o]+=s[p+4*a]}while(--d);break}if(0!==s[o+4*o])for(a=o+1;a<c;a++){const g=s[o+4*a]/s[o+4*o];d=4;do{p=4-d,s[p+4*a]=p<=o?0:s[p+4*a]-s[p+4*o]*g}while(--d)}}while(--l);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e=new Kc){const r=_pe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const l=a;let c,f;do{if(s=l-a,0===r[s+6*s])for(o=s+1;o<l;o++)if(0!==r[s+6*o]){c=6;do{f=6-c,r[f+6*s]+=r[f+6*o]}while(--c);break}if(0!==r[s+6*s])for(o=s+1;o<l;o++){const p=r[s+6*o]/r[s+6*s];c=6;do{f=6-c,r[f+6*o]=f<=s?0:r[f+6*o]-r[f+6*s]*p}while(--c)}}while(--a);s=2;do{o=s-1;do{const p=r[s+6*o]/r[s+6*s];c=6;do{f=6-c,r[f+6*o]=r[f+6*o]-r[f+6*s]*p}while(--c)}while(o--)}while(--s);s=2;do{const p=1/r[s+6*s];c=6;do{f=6-c,r[f+6*s]=r[f+6*s]*p}while(--c)}while(s--);s=2;do{o=2;do{if(f=r[3+o+6*s],isNaN(f)||f===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(s,o,f)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,l=r+r,c=t*o,d=t*a,f=t*l,p=i*a,g=i*l,_=r*l,C=s*o,b=s*a,H=s*l,z=this.elements;return z[0]=1-(p+_),z[1]=d-H,z[2]=f+b,z[3]=d+H,z[4]=1-(c+_),z[5]=g-C,z[6]=f-b,z[7]=g+C,z[8]=1-(c+p),this}transpose(e=new Kc){const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const _pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class le{constructor(e=0,t=0,i=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=i}cross(e,t=new le){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*s-l*r,t.y=l*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new le(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new le(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Kc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e=new le){const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t=new le){const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t=new le){return t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i=new le){return i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e=new le){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=ype,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=vpe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t=1e-6){return!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e=1e-6){return!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(Bz),Bz.almostEquals(e,t)}clone(){return new le(this.x,this.y,this.z)}}le.ZERO=void 0,le.UNIT_X=void 0,le.UNIT_Y=void 0,le.UNIT_Z=void 0,le.ZERO=new le(0,0,0),le.UNIT_X=new le(1,0,0),le.UNIT_Y=new le(0,1,0),le.UNIT_Z=new le(0,0,1);const ype=new le,vpe=new le,Bz=new le;class ar{constructor(e={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new le,this.upperBound=new le,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<e.length;l++){let c=e[l];a&&(a.vmult(c,jz),c=jz),c.x>o.x&&(o.x=c.x),c.x<s.x&&(s.x=c.x),c.y>o.y&&(o.y=c.y),c.y<s.y&&(s.y=c.y),c.z>o.z&&(o.z=c.z),c.z<s.z&&(s.z=c.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new ar).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,l){const c=this.lowerBound,d=this.upperBound;e.copy(c),t.set(d.x,c.y,c.z),i.set(d.x,d.y,c.z),r.set(c.x,d.y,d.z),s.set(d.x,c.y,d.z),o.set(c.x,d.y,c.z),a.set(c.x,c.y,d.z),l.copy(d)}toLocalFrame(e,t){const i=Vz;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];e.pointToLocal(g,g)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=Vz;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let p=0;8!==p;p++){const g=i[p];e.pointToWorld(g,g)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,l=(this.upperBound.x-i.x)*r,c=(this.lowerBound.y-i.y)*s,d=(this.upperBound.y-i.y)*s,f=(this.lowerBound.z-i.z)*o,p=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(c,d)),Math.min(f,p)),_=Math.min(Math.min(Math.max(a,l),Math.max(c,d)),Math.max(f,p));return!(_<0||g>_)}}const jz=new le,Vz=[new le,new le,new le,new le,new le,new le,new le,new le];class ss{constructor(e=0,t=0,i=0,r=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e=new le){this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=wpe;e.tangents(i,Epe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(mr(e.length(),2)*mr(t.length(),2))+e.dot(t),this.normalize()}return this}mult(e,t=new ss){const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,l=e.y,c=e.z,d=e.w;return t.x=i*d+o*a+r*c-s*l,t.y=r*d+o*l+s*a-i*c,t.z=s*d+o*c+i*l-r*a,t.w=o*d-i*a-r*l-s*c,t}inverse(e=new ss){const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e=new ss){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t=new le){const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,l=this.z,c=this.w,d=c*i+a*s-l*r,f=c*r+l*i-o*s,p=c*s+o*r-a*i,g=-o*i-a*r-l*s;return t.x=d*c+g*-o+f*-l-p*-a,t.y=f*c+g*-a+p*-o-d*-l,t.z=p*c+g*-l+d*-a-f*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t="YZX"){let i,r,s;const o=this.x,a=this.y,l=this.z,c=this.w;switch(t){case"YZX":const d=o*a+l*c;if(d>.499&&(i=2*Math.atan2(o,c),r=Math.PI/2,s=0),d<-.499&&(i=-2*Math.atan2(o,c),r=-Math.PI/2,s=0),void 0===i){const f=o*o,g=l*l;i=Math.atan2(2*a*c-2*o*l,1-a*a*2-2*g),r=Math.asin(2*d),s=Math.atan2(2*o*c-2*a*l,1-2*f-2*g)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r="XYZ"){const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(t/2),d=Math.sin(i/2);return"XYZ"===r?(this.x=l*o*a+s*c*d,this.y=s*c*a-l*o*d,this.z=s*o*d+l*c*a,this.w=s*o*a-l*c*d):"YXZ"===r?(this.x=l*o*a+s*c*d,this.y=s*c*a-l*o*d,this.z=s*o*d-l*c*a,this.w=s*o*a+l*c*d):"ZXY"===r?(this.x=l*o*a-s*c*d,this.y=s*c*a+l*o*d,this.z=s*o*d+l*c*a,this.w=s*o*a-l*c*d):"ZYX"===r?(this.x=l*o*a-s*c*d,this.y=s*c*a+l*o*d,this.z=s*o*d-l*c*a,this.w=s*o*a+l*c*d):"YZX"===r?(this.x=l*o*a+s*c*d,this.y=s*c*a+l*o*d,this.z=s*o*d-l*c*a,this.w=s*o*a-l*c*d):"XZY"===r&&(this.x=l*o*a-s*c*d,this.y=s*c*a-l*o*d,this.z=s*o*d+l*c*a,this.w=s*o*a+l*c*d),this}clone(){return new ss(this.x,this.y,this.z,this.w)}slerp(e,t,i=new ss){const r=this.x,s=this.y,o=this.z,a=this.w;let p,g,_,C,b,l=e.x,c=e.y,d=e.z,f=e.w;return g=r*l+s*c+o*d+a*f,g<0&&(g=-g,l=-l,c=-c,d=-d,f=-f),1-g>1e-6?(p=Math.acos(g),_=Math.sin(p),C=Math.sin((1-t)*p)/_,b=Math.sin(t*p)/_):(C=1-t,b=t),i.x=C*r+b*l,i.y=C*s+b*c,i.z=C*o+b*d,i.w=C*a+b*f,i}integrate(e,t,i,r=new ss){const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,l=this.x,c=this.y,d=this.z,f=this.w,p=.5*t;return r.x+=p*(s*f+o*d-a*c),r.y+=p*(o*f+a*l-s*d),r.z+=p*(a*f+s*c-o*l),r.w+=p*(-s*l-o*c-a*d),r}}const wpe=new le,Epe=new le,Spe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let pn=(()=>{class n{constructor(t={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,i){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,i,r,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=Spe,n})();class Li{constructor(e={}){this.position=void 0,this.quaternion=void 0,this.position=new le,this.quaternion=new ss,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return Li.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return Li.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r=new le){return i.vsub(e,r),t.conjugate(zz),zz.vmult(r,r),r}static pointToWorldFrame(e,t,i,r=new le){return t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i=new le){return e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r=new le){return t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const zz=new ss;class Sf extends pn{constructor(e={}){const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:pn.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new le;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let l=0;l!==a;l++){t[o[l]].vsub(t[o[(l+1)%a]],r),r.normalize();let d=!1;for(let f=0;f!==i.length;f++)if(i[f].almostEquals(r)||i[f].almostEquals(r)){d=!0;break}d||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error("Vertex "+this.faces[e][r]+" not found!");const t=this.faceNormals[e]||new le;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(".faceNormals["+e+"] = Vec3("+t.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let r=0;r<this.faces[e].length;r++)console.warn(".vertices["+this.faces[e][r]+"] = Vec3("+this.vertices[this.faces[e][r]].toString()+")")}}}getFaceNormal(e,t){const i=this.faces[e];Sf.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new le,o=new le;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,l,c){const d=new le;let f=-1,p=-Number.MAX_VALUE;for(let _=0;_<i.faces.length;_++){d.copy(i.faceNormals[_]),s.vmult(d,d);const C=d.dot(o);C>p&&(p=C,f=_)}const g=[];for(let _=0;_<i.faces[f].length;_++){const C=i.vertices[i.faces[f][_]],b=new le;b.copy(C),s.vmult(b,b),r.vadd(b,b),g.push(b)}f>=0&&this.clipFaceAgainstHull(o,e,t,g,a,l,c)}findSeparatingAxis(e,t,i,r,s,o,a,l){const c=new le,d=new le,f=new le,p=new le,g=new le,_=new le;let C=Number.MAX_VALUE;const b=this;if(b.uniqueAxes)for(let H=0;H!==b.uniqueAxes.length;H++){i.vmult(b.uniqueAxes[H],c);const z=b.testSepAxis(c,e,t,i,r,s);if(!1===z)return!1;z<C&&(C=z,o.copy(c))}else{const H=a?a.length:b.faces.length;for(let z=0;z<H;z++){c.copy(b.faceNormals[a?a[z]:z]),i.vmult(c,c);const Ie=b.testSepAxis(c,e,t,i,r,s);if(!1===Ie)return!1;Ie<C&&(C=Ie,o.copy(c))}}if(e.uniqueAxes)for(let H=0;H!==e.uniqueAxes.length;H++){s.vmult(e.uniqueAxes[H],d);const z=b.testSepAxis(d,e,t,i,r,s);if(!1===z)return!1;z<C&&(C=z,o.copy(d))}else{const H=l?l.length:e.faces.length;for(let z=0;z<H;z++){d.copy(e.faceNormals[l?l[z]:z]),s.vmult(d,d);const Ie=b.testSepAxis(d,e,t,i,r,s);if(!1===Ie)return!1;Ie<C&&(C=Ie,o.copy(d))}}for(let H=0;H!==b.uniqueEdges.length;H++){i.vmult(b.uniqueEdges[H],p);for(let z=0;z!==e.uniqueEdges.length;z++)if(s.vmult(e.uniqueEdges[z],g),p.cross(g,_),!_.almostZero()){_.normalize();const he=b.testSepAxis(_,e,t,i,r,s);if(!1===he)return!1;he<C&&(C=he,o.copy(_))}}return r.vsub(t,f),f.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){Sf.project(this,e,i,r,zO),Sf.project(t,e,s,o,HO);const l=zO[0],c=zO[1],d=HO[0],f=HO[1];if(l<f||d<c)return!1;const p=l-f,g=d-c;return p<g?p:g}calculateLocalInertia(e,t){const i=new le,r=new le;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const l=new le,c=new le,d=new le,f=new le,p=new le,g=new le,_=new le,C=new le,b=this,z=r,he=[];let Ie=-1,Fe=Number.MAX_VALUE;for(let Lt=0;Lt<b.faces.length;Lt++){l.copy(b.faceNormals[Lt]),i.vmult(l,l);const Zt=l.dot(e);Zt<Fe&&(Fe=Zt,Ie=Lt)}if(Ie<0)return;const We=b.faces[Ie];We.connectedFaces=[];for(let Lt=0;Lt<b.faces.length;Lt++)for(let Zt=0;Zt<b.faces[Lt].length;Zt++)-1!==We.indexOf(b.faces[Lt][Zt])&&Lt!==Ie&&-1===We.connectedFaces.indexOf(Lt)&&We.connectedFaces.push(Lt);const dt=We.length;for(let Lt=0;Lt<dt;Lt++){const Zt=b.vertices[We[Lt]];Zt.vsub(b.vertices[We[(Lt+1)%dt]],c),d.copy(c),i.vmult(d,d),t.vadd(d,d),f.copy(this.faceNormals[Ie]),i.vmult(f,f),t.vadd(f,f),d.cross(f,p),p.negate(p),g.copy(Zt),i.vmult(g,g),t.vadd(g,g);const wt=We.connectedFaces[Lt];_.copy(this.faceNormals[wt]);const Ct=this.getPlaneConstantOfFace(wt);C.copy(_),i.vmult(C,C);const Ht=Ct-C.dot(t);for(this.clipFaceAgainstPlane(z,he,C,Ht);z.length;)z.shift();for(;he.length;)z.push(he.shift())}_.copy(this.faceNormals[Ie]);const Mt=this.getPlaneConstantOfFace(Ie);C.copy(_),i.vmult(C,C);const Ot=Mt-C.dot(t);for(let Lt=0;Lt<z.length;Lt++){let Zt=C.dot(z[Lt])+Ot;if(Zt<=s&&(console.log("clamped: depth="+Zt+" to minDist="+s),Zt=s),Zt<=o){const en=z[Lt];Zt<=1e-6&&a.push({point:en,normal:C,depth:Zt})}}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],c=e[0];s=i.dot(l)+r;for(let d=0;d<a;d++){if(c=e[d],o=i.dot(c)+r,s<0)if(o<0){const f=new le;f.copy(c),t.push(f)}else{const f=new le;l.lerp(c,s/(s-o),f),t.push(f)}else if(o<0){const f=new le;l.lerp(c,s/(s-o),f),t.push(f),t.push(c)}l=c,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new le);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new le);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,l,c,d,f,p=new le;for(let g=0;g<s.length;g++){p.copy(s[g]),t.vmult(p,p),e.vadd(p,p);const _=p;(void 0===o||_.x<o)&&(o=_.x),(void 0===c||_.x>c)&&(c=_.x),(void 0===a||_.y<a)&&(a=_.y),(void 0===d||_.y>d)&&(d=_.y),(void 0===l||_.z<l)&&(l=_.z),(void 0===f||_.z>f)&&(f=_.z)}i.set(o,a,l),r.set(c,d,f)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e=new le){const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,s=new le;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=r[o];const l=t[i[o][0]],c=new le;e.vsub(l,c);const d=a.dot(c),f=new le;s.vsub(l,f);const p=a.dot(f);if(d<0&&p>0||d>0&&p<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=Cpe;let l=0,c=0;const d=xpe,f=e.vertices;d.setZero(),Li.vectorToLocalFrame(i,r,t,a),Li.pointToLocalFrame(i,r,d,d);const p=d.dot(a);c=l=f[0].dot(a);for(let g=1;g<o;g++){const _=f[g].dot(a);_>l&&(l=_),_<c&&(c=_)}if(c-=p,l-=p,c>l){const g=c;c=l,l=g}s[0]=l,s[1]=c}}const zO=[],HO=[],Cpe=new le,xpe=new le;class wS extends pn{constructor(e){super({type:pn.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=le,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],l=new Sf({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t=new le){return wS.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)rh.set(s[o][0],s[o][1],s[o][2]),t.vmult(rh,rh),e.vadd(rh,rh),i(rh.x,rh.y,rh.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;Xc[0].set(s.x,s.y,s.z),Xc[1].set(-s.x,s.y,s.z),Xc[2].set(-s.x,-s.y,s.z),Xc[3].set(-s.x,-s.y,-s.z),Xc[4].set(s.x,-s.y,-s.z),Xc[5].set(s.x,s.y,-s.z),Xc[6].set(-s.x,s.y,-s.z),Xc[7].set(s.x,-s.y,s.z);const o=Xc[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const l=Xc[a];t.vmult(l,l),e.vadd(l,l);const c=l.x,d=l.y,f=l.z;c>r.x&&(r.x=c),d>r.y&&(r.y=d),f>r.z&&(r.z=f),c<i.x&&(i.x=c),d<i.y&&(i.y=d),f<i.z&&(i.z=f)}}}const rh=new le,Xc=[new le,new le,new le,new le,new le,new le,new le,new le];class gn extends class{constructor(){this._listeners=void 0}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}{constructor(e={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=gn.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new le,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new le,this.previousPosition=new le,this.interpolatedPosition=new le,this.initPosition=new le,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new le,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new le,this.force=new le;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?gn.STATIC:gn.DYNAMIC,typeof e.type==typeof gn.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=gn.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new le,this.quaternion=new ss,this.initQuaternion=new ss,this.previousQuaternion=new ss,this.interpolatedQuaternion=new ss,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new le,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new le,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new le,this.invInertia=new le,this.invInertiaWorld=new Kc,this.invMassSolve=0,this.invInertiaSolve=new le,this.invInertiaWorldSolve=new Kc,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new le(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new le(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new ar,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new le,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=gn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===gn.SLEEPING&&this.dispatchEvent(gn.wakeupEvent)}sleep(){this.sleepState=gn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=mr(this.sleepSpeedLimit,2);t===gn.AWAKE&&i<r?(this.sleepState=gn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(gn.sleepyEvent)):t===gn.SLEEPY&&i>r?this.wakeUp():t===gn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(gn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===gn.SLEEPING||this.type===gn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t=new le){return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t=new le){return this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new le,s=new ss;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),l=o.boundingSphereRadius;a+l>r&&(r=a+l)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=Ape,o=Tpe,a=this.quaternion,l=this.aabb,c=Dpe;for(let d=0;d!==r;d++){const f=e[d];a.vmult(t[d],s),s.vadd(this.position,s),a.mult(i[d],o),f.calculateWorldAABB(s,o,c.lowerBound,c.upperBound),0===d?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=Mpe,r=Ipe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t=new le){if(this.type!==gn.DYNAMIC)return;this.sleepState===gn.SLEEPING&&this.wakeUp();const i=Ope;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t=new le){if(this.type!==gn.DYNAMIC)return;const i=Rpe,r=Npe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===gn.DYNAMIC&&(this.sleepState===gn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t=new le){if(this.type!==gn.DYNAMIC)return;this.sleepState===gn.SLEEPING&&this.wakeUp();const i=t,r=Ppe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=Fpe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t=new le){if(this.type!==gn.DYNAMIC)return;const i=Lpe,r=kpe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Bpe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),wS.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new le;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==gn.DYNAMIC&&this.type!==gn.KINEMATIC||this.sleepState===gn.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,c=this.quaternion,f=this.invInertiaWorld,p=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*p.x,r.y+=a.y*g*p.y,r.z+=a.z*g*p.z;const _=f.elements,C=this.angularFactor,b=l.x*C.x,H=l.y*C.y,z=l.z*C.z;s.x+=e*(_[0]*b+_[1]*H+_[2]*z),s.y+=e*(_[3]*b+_[4]*H+_[5]*z),s.z+=e*(_[6]*b+_[7]*H+_[8]*z),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}gn.idCounter=0,gn.COLLIDE_EVENT_NAME="collide",gn.DYNAMIC=1,gn.STATIC=2,gn.KINEMATIC=4,gn.AWAKE=0,gn.SLEEPY=1,gn.SLEEPING=2,gn.wakeupEvent={type:"wakeup"},gn.sleepyEvent={type:"sleepy"},gn.sleepEvent={type:"sleep"};const Ape=new le,Tpe=new ss,Dpe=new ar,Mpe=new Kc,Ipe=new Kc,Ope=new le,Rpe=new le,Npe=new le,Ppe=new le,Fpe=new le,Lpe=new le,kpe=new le,Bpe=new le;new le,new le;class ES{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new le,this.rayToWorld=new le,this.hitNormalWorld=new le,this.hitPointWorld=new le,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let Hz,Gz,$z,Wz,qz,Yz,Kz;Hz=pn.types.SPHERE,Gz=pn.types.PLANE,$z=pn.types.BOX,Wz=pn.types.CYLINDER,qz=pn.types.CONVEXPOLYHEDRON,Yz=pn.types.HEIGHTFIELD,Kz=pn.types.TRIMESH;class fs{get[Hz](){return this._intersectSphere}get[Gz](){return this._intersectPlane}get[$z](){return this._intersectBox}get[Wz](){return this._intersectConvex}get[qz](){return this._intersectConvex}get[Yz](){return this._intersectHeightfield}get[Kz](){return this._intersectTrimesh}constructor(e=new le,t=new le){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=e.clone(),this.to=t.clone(),this.direction=new le,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=fs.ANY,this.result=new ES,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||fs.ANY,this.result=t.result||new ES,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Xz),qO.length=0,e.broadphase.aabbQuery(e,Xz,qO),this.intersectBodies(qO),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||0==(this.collisionFilterGroup&e.collisionFilterMask)||0==(e.collisionFilterGroup&this.collisionFilterMask))return;const r=$pe,s=Wpe;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if((!i||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(l,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function(n,e,t){t.vsub(n,Cf);const i=Cf.dot(e);return e.scale(i,CS),CS.vadd(n,CS),t.distanceTo(CS)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,l=this.direction,c=new le(0,0,1);t.vmult(c,c);const d=new le;o.vsub(i,d);const f=d.dot(c);if(a.vsub(i,d),f*d.dot(c)>0||o.distanceTo(a)<f)return;const g=c.dot(l);if(Math.abs(g)<this.precision)return;const _=new le,C=new le,b=new le;o.vsub(i,_);const H=-c.dot(_)/g;l.scale(H,C),o.vadd(C,b),this.reportIntersection(c,b,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=qpe;o.from.copy(this.from),o.to.copy(this.to),Li.pointToLocalFrame(i,t,o.from,o.from),Li.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=Ype;let l,c,d,f;l=c=0,d=f=e.data.length-1;const p=new ar;o.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),l=Math.max(l,a[0]),c=Math.max(c,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),d=Math.min(d,a[0]+1),f=Math.min(f,a[1]+1);for(let g=l;g<d;g++)for(let _=c;_<f;_++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,_,p),p.overlapsRay(o)){if(e.getConvexTrianglePillar(g,_,!1),Li.pointToWorldFrame(i,t,e.pillarOffset,SS),this._intersectConvex(e.pillarConvex,t,SS,r,s,Qz),this.result.shouldStop)return;e.getConvexTrianglePillar(g,_,!0),Li.pointToWorldFrame(i,t,e.pillarOffset,SS),this._intersectConvex(e.pillarConvex,t,SS,r,s,Qz)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=e.radius,c=mr(a.x-o.x,2)+mr(a.y-o.y,2)+mr(a.z-o.z,2),d=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=mr(o.x-i.x,2)+mr(o.y-i.y,2)+mr(o.z-i.z,2)-mr(l,2),p=mr(d,2)-4*c*f,g=Kpe,_=Xpe;if(!(p<0))if(0===p)o.lerp(a,p,g),g.vsub(i,_),_.normalize(),this.reportIntersection(_,g,s,r,-1);else{const C=(-d-Math.sqrt(p))/(2*c),b=(-d+Math.sqrt(p))/(2*c);if(C>=0&&C<=1&&(o.lerp(a,C,g),g.vsub(i,_),_.normalize(),this.reportIntersection(_,g,s,r,-1)),this.result.shouldStop)return;b>=0&&b<=1&&(o.lerp(a,b,g),g.vsub(i,_),_.normalize(),this.reportIntersection(_,g,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=Qpe,l=Zz,c=o&&o.faceList||null,d=e.faces,f=e.vertices,p=e.faceNormals,g=this.direction,_=this.from,b=_.distanceTo(this.to),H=c?c.length:d.length,z=this.result;for(let he=0;!z.shouldStop&&he<H;he++){const Ie=c?c[he]:he,Fe=d[Ie],We=p[Ie],dt=t,Mt=i;l.copy(f[Fe[0]]),dt.vmult(l,l),l.vadd(Mt,l),l.vsub(_,l),dt.vmult(We,a);const Ot=g.dot(a);if(Math.abs(Ot)<this.precision)continue;const Lt=a.dot(l)/Ot;if(!(Lt<0)){g.scale(Lt,aa),aa.vadd(_,aa),sc.copy(f[Fe[0]]),dt.vmult(sc,sc),Mt.vadd(sc,sc);for(let Zt=1;!z.shouldStop&&Zt<Fe.length-1;Zt++){Qc.copy(f[Fe[Zt]]),Zc.copy(f[Fe[Zt+1]]),dt.vmult(Qc,Qc),dt.vmult(Zc,Zc),Mt.vadd(Qc,Qc),Mt.vadd(Zc,Zc);const en=aa.distanceTo(_);!fs.pointInTriangle(aa,sc,Qc,Zc)&&!fs.pointInTriangle(aa,Qc,sc,Zc)||en>b||this.reportIntersection(a,aa,s,r,Ie)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=Zpe,l=rge,c=sge,d=Zz,f=Jpe,p=ege,g=tge,_=ige,C=nge,b=e.indices,H=this.from,z=this.to,he=this.direction;c.position.copy(i),c.quaternion.copy(t),Li.vectorToLocalFrame(i,t,he,f),Li.pointToLocalFrame(i,t,H,p),Li.pointToLocalFrame(i,t,z,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,g.vsub(p,f),f.normalize();const Ie=p.distanceSquared(g);e.tree.rayQuery(this,c,l);for(let Fe=0,We=l.length;!this.result.shouldStop&&Fe!==We;Fe++){const dt=l[Fe];e.getNormal(dt,a),e.getVertex(b[3*dt],sc),sc.vsub(p,d);const Mt=f.dot(a),Ot=a.dot(d)/Mt;if(Ot<0)continue;f.scale(Ot,aa),aa.vadd(p,aa),e.getVertex(b[3*dt+1],Qc),e.getVertex(b[3*dt+2],Zc);const Lt=aa.distanceSquared(p);!fs.pointInTriangle(aa,Qc,sc,Zc)&&!fs.pointInTriangle(aa,sc,Qc,Zc)||Lt>Ie||(Li.vectorToWorldFrame(t,a,C),Li.pointToWorldFrame(i,t,aa,_),this.reportIntersection(C,_,s,r,dt))}l.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,l=o.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=void 0!==s?s:-1,this.mode){case fs.ALL:this.hasHit=!0,c.set(o,a,e,t,i,r,l),c.hasHit=!0,this.callback(c);break;case fs.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l));break;case fs.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,e,t,i,r,l),c.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,Cf),i.vsub(t,Cv),e.vsub(t,YO);const s=Cf.dot(Cf),o=Cf.dot(Cv),a=Cf.dot(YO),l=Cv.dot(Cv),c=Cv.dot(YO);let d,f;return(d=l*a-o*c)>=0&&(f=s*c-o*a)>=0&&d+f<s*l-o*o}}fs.CLOSEST=1,fs.ANY=2,fs.ALL=4;const Xz=new ar,qO=[],Cv=new le,YO=new le,$pe=new le,Wpe=new ss,aa=new le,sc=new le,Qc=new le,Zc=new le,Qz={faceList:[0]},SS=new le,qpe=new fs,Ype=[],Kpe=new le,Xpe=new le,Qpe=new le,Zz=new le,Zpe=new le,Jpe=new le,ege=new le,tge=new le,nge=new le,ige=new le;new ar;const rge=[],sge=new Li,Cf=new le,CS=new le;let f4,p4,g4,m4,_4,y4,v4,b4,w4,E4,S4,C4,x4,A4,T4,D4,M4,I4,O4,R4,N4,P4,F4,L4,k4;new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new fs,new le,new le,new le(1,0,0),new le(0,1,0),new le(0,0,1),new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new ar,new le,new ar,new le,new le,new le,new le,new le,new le,new le,new ar,new le,new Li,new ar;const xr={sphereSphere:pn.types.SPHERE,spherePlane:pn.types.SPHERE|pn.types.PLANE,boxBox:pn.types.BOX|pn.types.BOX,sphereBox:pn.types.SPHERE|pn.types.BOX,planeBox:pn.types.PLANE|pn.types.BOX,convexConvex:pn.types.CONVEXPOLYHEDRON,sphereConvex:pn.types.SPHERE|pn.types.CONVEXPOLYHEDRON,planeConvex:pn.types.PLANE|pn.types.CONVEXPOLYHEDRON,boxConvex:pn.types.BOX|pn.types.CONVEXPOLYHEDRON,sphereHeightfield:pn.types.SPHERE|pn.types.HEIGHTFIELD,boxHeightfield:pn.types.BOX|pn.types.HEIGHTFIELD,convexHeightfield:pn.types.CONVEXPOLYHEDRON|pn.types.HEIGHTFIELD,sphereParticle:pn.types.PARTICLE|pn.types.SPHERE,planeParticle:pn.types.PLANE|pn.types.PARTICLE,boxParticle:pn.types.BOX|pn.types.PARTICLE,convexParticle:pn.types.PARTICLE|pn.types.CONVEXPOLYHEDRON,cylinderCylinder:pn.types.CYLINDER,sphereCylinder:pn.types.SPHERE|pn.types.CYLINDER,planeCylinder:pn.types.PLANE|pn.types.CYLINDER,boxCylinder:pn.types.BOX|pn.types.CYLINDER,convexCylinder:pn.types.CONVEXPOLYHEDRON|pn.types.CYLINDER,heightfieldCylinder:pn.types.HEIGHTFIELD|pn.types.CYLINDER,particleCylinder:pn.types.PARTICLE|pn.types.CYLINDER,sphereTrimesh:pn.types.SPHERE|pn.types.TRIMESH,planeTrimesh:pn.types.PLANE|pn.types.TRIMESH};f4=xr.sphereSphere,p4=xr.spherePlane,g4=xr.boxBox,m4=xr.sphereBox,_4=xr.planeBox,y4=xr.convexConvex,v4=xr.sphereConvex,b4=xr.planeConvex,w4=xr.boxConvex,E4=xr.sphereHeightfield,S4=xr.boxHeightfield,C4=xr.convexHeightfield,x4=xr.sphereParticle,A4=xr.planeParticle,T4=xr.boxParticle,D4=xr.convexParticle,M4=xr.cylinderCylinder,I4=xr.sphereCylinder,O4=xr.planeCylinder,R4=xr.boxCylinder,N4=xr.convexCylinder,P4=xr.heightfieldCylinder,F4=xr.particleCylinder,L4=xr.sphereTrimesh,k4=xr.planeTrimesh,new le,new le,new le,new le,new le,new ss,new ss,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new ar,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new ss,new le,new le,new le,new le,new le,new le,new le,new le,new ar,new fs;const Ws=globalThis.performance||{};if(!Ws.now){let n=Date.now();Ws.timing&&Ws.timing.navigationStart&&(n=Ws.timing.navigationStart),Ws.now=()=>Date.now()-n}var Df=tt(517);class Or extends ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new U;return this._value}next(e){super.next(this._value=e)}}function Kg(n,e,t){e||(e=new $n($n.IDENTITY));const i=new $n($n.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new $n($n.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new $n(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===Kg(s,r,t))return!1;return!0}function H4(){KV([gz,$g])}function G4(n,e){const t=e.nodes.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||Kg(r,new $n($n.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function QO(n,e){return Zi(this,void 0,void 0,function*(){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield JE(i,$g,{DracoLoader:EO,gltf:{decompressMeshes:!0,postProcess:!0}});return G4(n.scenegraphNode,r)})}function oye(n,e){return Zi(this,void 0,void 0,function*(){return G4(n,yield e)})}function ZO(n,e,t){if(e&&0!==e.length)return new Fde(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Oi.CARTESIAN,data:e,mesh:new mpe,wireframe:!1,getTransformMatrix:i=>i.transformMatrix,getColor:i=>i.color||[255,255,255,229.5]},t))}let lye=(()=>{class n extends kle{initializeState(){const{data:t}=this.props;this.setState({data:null!=t?t:[],zoomOpacity:.8,doCollisions:!1}),H4()}renderLayers(){const t=this.state,i=t.data.filter(l=>!l.scenegraph&&!l.wireframe&&l.unpickable),r=t.data.filter(l=>!l.scenegraph&&!l.wireframe&&!l.unpickable),s=t.data.filter(l=>!l.scenegraph&&l.wireframe),o=t.data.filter(l=>!!l.scenegraph);t.doCollisions&&function(n){Zi(this,void 0,void 0,function*(){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&!o.wireframe).map(o=>{const a=new $n(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),c=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new ar({lowerBound:new le(...l.map((d,f)=>Math.min(d,c[f]))),upperBound:new le(...c.map((d,f)=>Math.max(d,l[f])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield eS(o.scenegraph,$g,{DracoLoader:EO,decompress:!0,postProcess:!0});for(const l of a.scenes)Kg(l,new $n(o.transformMatrix),(c,d)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const f of c.mesh.primitives)if(f.attributes.POSITION&&f.attributes.POSITION.min){const p=d.transformAsPoint(f.attributes.POSITION.min,[]),g=d.transformAsPoint(f.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:c.name,entityId:o.entityId,bbox:new ar({lowerBound:new le(...p.map((_,C)=>Math.min(_,g[C]))),upperBound:new le(...g.map((_,C)=>Math.max(_,p[C])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const l of t)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i})}(t.data);const a={};for(const l of o)l.scenegraph&&l.scenegraphNode&&!Object.prototype.hasOwnProperty.call(a,l.scenegraph)&&(a[l.scenegraph]=QO({scenegraph:l.scenegraph},n.gltfCache));return[ZO("cubes",i,{wireframe:!1,pickable:!1}),ZO("pickableCubes",r,{wireframe:!1,pickable:!0}),ZO("wireframes",s,{wireframe:!0,pickable:!1}),...o.map(l=>{var c;return new upe({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?t.zoomOpacity:void 0!==l.opacity?l.opacity:1,pickable:!l.unpickable,coordinateSystem:Oi.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?oye(l.scenegraphNode,a[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:null!==(c=l.color)&&void 0!==c?c:[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}})})].filter(l=>!!l)}getPickingInfo(t){return t.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function $4(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),$4(t,e);return e}let uye=(()=>{class n{constructor(t){var i,r,s,o,a;this.deckProps=t,this.bodyUILayer=new lye({}),this.nodeClickSubject=new ee,this.nodeHoverStartSubject=new ee,this.nodeHoverStopSubject=new ee,this.sceneRotationSubject=new Or([0,0]),this.nodeDragStartSubject=new ee,this.nodeDragSubject=new ee,this.nodeDragEndSubject=new ee,this.nodeClick$=this.nodeClickSubject.pipe(ms()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(ms()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(ms()),this.sceneRotation$=this.sceneRotationSubject.pipe(ms()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(ms()),this.nodeDrag$=this.nodeDragSubject.pipe(ms()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(ms());const l=Object.assign(Object.assign({},t),{views:["orthographic"===t.camera?new Kle({flipY:!1,near:-1e3}):new Zle({orbitAxis:"Y"})],controller:void 0===t.interactive||t.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:c=>{var d;return null!==(d=this.cursor)&&void 0!==d?d:c.isDragging?"grabbing":"grab"}});t.legacyLighting&&(l.effects=[new $I({ambientLight:new sU({color:[255,255,255],intensity:10})})]),this.deck=new dS(l),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(i=t.minRotationX)&&void 0!==i?i:-15,maxRotationX:null!==(r=t.maxRotationX)&&void 0!==r?r:15,target:null!==(s=t.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=t.rotation)&&void 0!==o?o:0,zoom:null!==(a=t.zoom)&&void 0!==a?a:9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return Zi(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if((null==t?void 0:t.length)>0){let i=this.bodyUILayer.state.zoomOpacity,r=!1;for(const s of t)s.zoomToOnLoad&&(this.zoomTo(s),r=!0);i=r?.05:i,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,i):this.bodyUILayer.setState({data:t,zoomOpacity:i})}}debugSceneNodeProcessing(t,i){const r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new $n([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,e,t){return Zi(this,void 0,void 0,function*(){H4();const i=yield QO({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"}),r={},s=[];for(const o of i.scenes)Kg(o,e=new $n(e||$n.IDENTITY),(a,l)=>{const c={"@id":a.name||a.id,"@type":"ProcessedNode",transformMatrix:new $n(l),wireframe:!0,node:a};if(s.push({"@id":`GLTF:${c["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:c["@id"],transformMatrix:new $n(e||$n.IDENTITY),tooltip:a.name||a.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:a}),a.mesh&&a.mesh.primitives&&a.mesh.primitives.length>0)for(const d of a.mesh.primitives)if(d.attributes.POSITION&&d.attributes.POSITION.min){const f=l.transformAsPoint(d.attributes.POSITION.min,[]),p=l.transformAsPoint(d.attributes.POSITION.max,[]);c.bbox=new ar({lowerBound:new le(...f.map((g,_)=>Math.min(g,p[_]))),upperBound:new le(...p.map((g,_)=>Math.max(g,f[_])))})}return r[c["@id"]]=c,!0});for(const o of Object.values(r).filter(a=>!a.bbox)){for(const a of $4(o.node).map(l=>r[l]).filter(l=>l.bbox))o.bbox?o.bbox.extend(a.bbox):o.bbox=a.bbox.clone();o.bbox||delete r[o["@id"]]}for(const o of Object.values(r)){const a=o.bbox.lowerBound,d=(o.size=o.bbox.upperBound.clone().vsub(a)).clone().vmul(new le(.5,.5,.5)),f=o.center=a.clone().vadd(d);o.transformMatrix=new $n($n.IDENTITY).translate(f.toArray()).scale(d.toArray())}for(const o of s)r[o["@id"]]=o;return r})})(r,s).then(o=>{console.log("results",o),console.log("data",t),(t=t.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:i})})}zoomTo(t){const i=new $n(t.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:i.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:i}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object&&t.object["@id"]?i!==t.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)}_onClick(t,i){var r,s;t.picked&&t.object&&t.object["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:null!==(s=null===(r=null==i?void 0:i.srcEvent)||void 0===r?void 0:r.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(t){var i;if(null===(i=t.interactionState)||void 0===i?void 0:i.isZooming){const r=this.bodyUILayer.state,s=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);r.zoomOpacity!==s&&this.bodyUILayer.setState({data:r.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},t.viewState)}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,i){this._dragEvent(t,i,this.nodeDragStartSubject)}_onDrag(t,i){this._dragEvent(t,i,this.nodeDragSubject)}_onDragEnd(t,i){this._dragEvent(t,i,this.nodeDragEndSubject)}_dragEvent(t,i,r){var s;(null===(s=null==t?void 0:t.object)||void 0===s?void 0:s["@id"])&&r.next({node:t.object,info:t,e:i})}}return Qr([Df.ZP],n.prototype,"_onHover",null),Qr([Df.ZP],n.prototype,"_onClick",null),Qr([Df.ZP],n.prototype,"_onViewStateChange",null),Qr([Df.ZP],n.prototype,"_onDragStart",null),Qr([Df.ZP],n.prototype,"_onDrag",null),Qr([Df.ZP],n.prototype,"_onDragEnd",null),n})();function hye(n,e){return n===e}function fye(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function W4(n,e=hye){let t=null,i=null;function r(){return fye(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}const gye=W4(function(){const n=cD();if(!n)return!1;const e=n.injector.get(E2,null);return!!e&&e.some(i=>(i&&i.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let JO=(()=>{class n{constructor(){this.bootstrap$=new hf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const eR=new zt("INITIAL_STATE_TOKEN");let mye=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const q4=new zt("Internals.StateContextFactory"),Y4=new zt("Internals.StateFactory");function Iv(...n){if(1===n.length){const e=n[0];if(L(e))return OS(e,null);if(re(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return OS(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return OS(n=1===n.length&&L(n[0])?n[0]:n,null).pipe(me(t=>e(...t)))}return OS(n,null)}function OS(n,e){return new F(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=Pe(n[a]);let c=!1;t.add(l.subscribe({next:d=>{c||(c=!0,o++),r[a]=d},error:d=>t.error(d),complete:()=>{s++,(s===i||!c)&&(o===i&&t.next(e?e.reduce((d,f,p)=>(d[f]=r[p],d),{}):r),t.complete())}}))}})}function Wi(n,e){return function(i){return i.lift(new _ye(n,e))}}class _ye{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new yye(e,this.predicate,this.thisArg))}}class yye extends y{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function Na(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(d){let f;s++,!r||a?(a=!1,r=new hf(n,e,i),f=r.subscribe(this),o=d.subscribe({next(p){r.next(p)},error(p){a=!0,r.error(p)},complete(){l=!0,o=void 0,r.complete()}}),l&&(o=void 0)):f=r.subscribe(this),this.add(()=>{s--,f.unsubscribe(),f=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}const K4=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function jr(n){return e=>0===n?Vy():e.lift(new bye(n))}class bye{constructor(e){if(this.total=e,this.total<0)throw new K4}call(e,t){return t.subscribe(new wye(e,this.total))}}class wye extends y{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function X4(n,e){return e?t=>t.pipe(X4((i,r)=>Pe(n(i,r)).pipe(me((s,o)=>e(i,s,r,o))))):t=>t.lift(new Eye(n))}class Eye{constructor(e){this.project=e}call(e,t){return t.subscribe(new Sye(e,this.project))}}class Sye extends ge{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new Et(this),i=this.destination;i.add(t);const r=O(e,t);r!==t&&i.add(r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function RS(n=null){return e=>e.lift(new Cye(n))}class Cye{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new xye(e,this.defaultValue))}}class xye extends y{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function oc(n){return function(t){const i=new Aye(n),r=t.lift(i);return i.caught=r}}class Aye{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Tye(e,this.selector,this.caught))}}class Tye extends ge{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const i=new Et(this);this.add(i);const r=O(t,i);r!==i&&this.add(r)}}}function os(n){return e=>e.lift(new Dye(n))}class Dye{constructor(e){this.notifier=e}call(e,t){const i=new Mye(e),r=O(this.notifier,new Et(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i}}class Mye extends ge{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function sh(){}function lr(n,e,t){return function(r){return r.lift(new Iye(n,e,t))}}class Iye{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new Oye(e,this.nextOrObserver,this.error,this.complete))}}class Oye extends y{constructor(e,t,i,r){super(e),this._tapNext=sh,this._tapError=sh,this._tapComplete=sh,this._tapError=i||sh,this._tapComplete=r||sh,Y(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||sh,this._tapError=t.error||sh,this._tapComplete=t.complete||sh)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function qu(n,e){return t=>t.lift(new Rye(n,e))}class Rye{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Nye(e,this.compare,this.keySelector))}}class Nye extends y{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}const Pa={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,e,t)=>`State name '${n}' from ${e} already exists in ${t}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let Q4=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return function(n){return"server"===n}(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return vn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return vn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof vn||console.warn(Pa.ZONE_WARNING())}}return n.\u0275fac=function(t){return new(t||n)(Me(vn),Me(Fc))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const Z4=new zt("ROOT_STATE_TOKEN"),J4=new zt("FEATURE_STATE_TOKEN"),eH=new zt("NGXS_PLUGINS"),tH=new zt("NG_TEST_MODE"),nH=new zt("NG_DEV_MODE"),Yu="NGXS_META",iH="NGXS_OPTIONS_META";let Mf=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=Q4}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class Pye{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}const rH=new zt("NGXS_EXECUTION_STRATEGY");function If(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const sH=(n,e,t)=>{n=Object.assign({},n);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},NS=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n),nR=n=>n&&"object"==typeof n&&!Array.isArray(n),iR=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(nR(n)&&nR(t))for(const i in t)nR(t[i])?(n[i]||Object.assign(n,{[i]:{}}),iR(n[i],t[i])):Object.assign(n,{[i]:t[i]});return iR(n,...e)};function Ov(n){return n[Yu]}function aH(n,e){const t=NS(e.currentAppState,n.path),i=NS(e.newAppState,n.path);return new Pye(t,i,!n.isInitialised)}function zye(...n){return function(n,e,t=$ye){const i=function(n){return n.reduce((e,t)=>(e[If(t)]=!0,e),{})}(n),r=e&&function(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function(n,e){return Wi(t=>{const i=If(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function $ye(){return me(n=>n.action)}function PS(n){return e=>new F(t=>e.subscribe({next(i){n.leave(()=>t.next(i))},error(i){n.leave(()=>t.error(i))},complete(){n.leave(()=>t.complete())}}))}let FS=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(rH))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class Yye extends ee{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let LS=(()=>{class n extends Yye{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gi(n)))(i||n)}}(),n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),Kye=(()=>{class n extends F{constructor(t,i){super(r=>{const s=t.pipe(PS(i)).subscribe({next:o=>r.next(o),error:o=>r.error(o),complete:()=>r.complete()});r.add(s)})}}return n.\u0275fac=function(t){return new(t||n)(Me(LS),Me(FS))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const lH=n=>(...e)=>n.shift()(...e,(...i)=>lH(n)(...i));let kS=(()=>{class n extends Or{constructor(){super({})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),aR=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return n.\u0275fac=function(t){return new(t||n)(Me(n,12),Me(eH,8))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),lR=(()=>{class n extends ee{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gi(n)))(i||n)}}(),n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),cH=(()=>{class n{constructor(t,i,r,s,o,a){this._injector=t,this._actions=i,this._actionResults=r,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){const i=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return i.subscribe({error:r=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(Xo),this._errorHandler.handleError(r)}catch(s){}})}),i.pipe(PS(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?nn(this._stateStream.getValue()):Iv(t.map(i=>this.dispatchSingle(i))):this.dispatchSingle(t)}dispatchSingle(t){if(!If(t))return yg(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const r=this._stateStream.getValue();return lH([...this._pluginManager.plugins,(o,a)=>{o!==r&&this._stateStream.next(o);const l=this.getActionResultStream(a);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(r,t).pipe(Na())}getActionResultStream(t){return this._actionResults.pipe(Wi(i=>i.action===t&&"DISPATCHED"!==i.status),jr(1),Na())}createDispatchObservable(t){return t.pipe(X4(i=>{switch(i.status){case"SUCCESSFUL":return nn(this._stateStream.getValue());case"ERRORED":return yg(i.error);default:return kc}})).pipe(Na())}}return n.\u0275fac=function(t){return new(t||n)(Me(Vn),Me(LS),Me(lR),Me(aR),Me(kS),Me(FS))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const uH=n=>{Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(i){t.call(n,i)&&(!e||"caller"!==i&&"callee"!==i&&"arguments"!==i)&&null!==n[i]&&("object"==typeof n[i]||"function"==typeof n[i])&&!Object.isFrozen(n[i])&&uH(n[i])}),n};let dH=(()=>{class n{constructor(t,i){this.isDevMode=t,this.isTestMode=i}}return n.\u0275fac=function(t){return new(t||n)(Me(nH),Me(tH))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),hH=(()=>{class n{constructor(t,i){this._host=t,this._config=i}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(Pa.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(Pa.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(t){return new(t||n)(Me(dH),Me(Mf))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),Qg=(()=>{class n{constructor(t,i,r,s){this._stateStream=t,this._dispatcher=i,this._config=r,s.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:i=>{const r=uH(i);return t.setState(r)},dispatch:i=>t.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign({},r,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(Me(kS),Me(cH),Me(Mf),Me(hH))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),BS=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();function r(l){return NS(l,t.path)}function s(l,c){const d=sH(l,t.path,c),f=t.instance;if(f.ngxsOnChanges){const p=aH(t,{currentAppState:l,newAppState:d});f.ngxsOnChanges(p)}return i.setState(d),d}function o(l,c){return s(l,c(r(l)))}return{getState:()=>r(i.getState()),patchState:l=>o(i.getState(),function(n){return e=>{if(Array.isArray(n))throw new Error(Pa.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(Pa.PATCHING_PRIMITIVE());const t=Object.assign({},e);for(const i in n)t[i]=n[i];return t}}(l)),setState(l){const c=i.getState();return function(l){return"function"==typeof l}(l)?o(c,l):s(c,l)},dispatch:l=>i.dispatch(l)}}}return n.\u0275fac=function(t){return new(t||n)(Me(Qg))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class jS{static stateNameErrorMessage(e){return Pa.STATE_NAME(e)}static checkCorrectStateName(e){if(!e)throw new Error(Pa.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}static checkStateNameIsUnique(e,t){const r=this.getValidStateMeta(e).name,s=t[r];if(s&&s!==e)throw new Error(Pa.STATE_UNIQUE(r,e.name,s.name));return r}static getValidStateMeta(e){const t=Ov(e);if(!t)throw new Error(Pa.STATE_DECORATOR());return t}}jS.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let Zg=(()=>{class n{constructor(t,i,r,s,o,a,l){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=W4(()=>{const c=this;function d(p){const g=c.statePaths[p];return g?function(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(n){const e=n.slice();return t=>e.reduce((i,r)=>i&&i[r],t)}(n):function(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}(n)}(g.split("."),c._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let g=d(p);return g||((..._)=>(g||(g=d(p)),g?g(..._):void 0))},getSelectorOptions:p=>Object.assign({},c._config.selectorOptions,p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let i={};return i=Array.isArray(t)?t.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,i}static checkStatesAreValid(t){t.forEach(jS.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){n.checkStatesAreValid(t);const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function(n){const e=t=>{const i=n.find(r=>r===t);if(!i)throw new Error(`Child state not found: ${t}. \r\nYou may have forgotten to add states to module`);return i[Yu].name};return n.reduce((t,i)=>{const{name:r,children:s}=i[Yu];return t[r]=(s||[]).map(e),t},{})}(i),s=function(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${r}': ${s.join(" -> ")}`);t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function(n){return n.reduce((e,t)=>(e[t[Yu].name]=t,e),{})}(i),l=[];for(const c of s){const d=a[c],f=o[c],p=d[Yu];this.addRuntimeInfoToMeta(p,f);const g={name:c,path:f,isInitialised:!1,actions:p.actions,instance:this._injector.get(d),defaults:n.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(c,f)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>sH(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(Wi(t=>"DISPATCHED"===t.status),k(({action:t})=>this.invokeActions(this._actions,t).pipe(me(()=>({action:t,status:"SUCCESSFUL"})),RS({action:t,status:"CANCELED"}),oc(i=>nn({action:t,status:"ERRORED",error:i}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,i){const r=If(i),s=[];for(const o of this.states){const a=o.actions[r];if(a)for(const l of a){const c=this._stateContextFactory.createStateContext(o);try{let d=o.instance[l.fn](c,i);d instanceof Promise&&(d=Pe(d)),d instanceof F?(d=d.pipe(RS({})),l.options.cancelUncompleted&&(d=d.pipe(os(t.pipe(zye(i)))))):d=nn({}).pipe(Na()),s.push(d)}catch(d){s.push(yg(d))}}}return s.length||s.push(nn({})),Iv(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=jS.checkStateNameIsUnique(s,r);!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==NS(this._initialState,i);return this.statesByName[t]&&r}}return n.\u0275fac=function(t){return new(t||n)(Me(Vn),Me(Mf),Me(n,12),Me(LS),Me(lR),Me(BS),Me(eR,8))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),cR=(()=>{class n{constructor(t,i,r){this.internalStateOperations=t,this.stateContextFactory=i,this.bootstrapper=r}ngxsBootstrap(t,i){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(Wi(()=>!!i),lr(()=>this.invokeInit(i.states)),k(()=>this.bootstrapper.appBootstrapped$),Wi(r=>!!r)).subscribe(()=>this.invokeBootstrap(i.states))}invokeInit(t){for(const i of t){const r=i.instance;if(r.ngxsOnChanges){const a=aH(i,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});r.ngxsOnChanges(a)}r.ngxsOnInit&&r.ngxsOnInit(this.getStateContext(i)),i.isInitialised=!0}}invokeBootstrap(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this.getStateContext(i))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(Qg),Me(BS),Me(JO))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();let oh=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(me(i),oc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?nn(void 0):yg(r)}),qu(),PS(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(jr(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(PS(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return function(n){const e=function(n){return n.NGXS_SELECTOR_META}(n)||Ov(n);return e&&e.makeRootSelector||(()=>n)}(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(Me(kS),Me(Qg),Me(Mf),Me(FS),Me(Zg),Me(eR,8))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),Rv=(()=>{class n{constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(Me(oh),Me(Mf))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class nve{static get type(){return"@@INIT"}}class ive{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}const US=new hf(1);let sve=(()=>{class n{constructor(t,i,r,s,o=[],a){!function(){try{const n=window.ng,t=!(n.probe&&n.coreTokens)&&na();US.next(t)}catch(n){US.next(!1)}finally{US.complete()}}();const l=t.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(l),t.connectActionHandlers(),a.ngxsBootstrap(new nve,l)}}return n.\u0275fac=function(t){return new(t||n)(Me(Zg),Me(Qg),Me(oh),Me(Rv),Me(Z4,8),Me(cR))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})(),ove=(()=>{class n{constructor(t,i,r,s=[],o){const a=n.flattenStates(s),l=r.addAndReturnDefaults(a);l.states.length&&(i.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new ive(l.defaults),l))}static flattenStates(t=[]){return t.reduce((i,r)=>i.concat(r),[])}}return n.\u0275fac=function(t){return new(t||n)(Me(oh),Me(Qg),Me(Zg),Me(J4,8),Me(cR))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})();class la{static forRoot(e=[],t={}){return{ngModule:sve,providers:[Zg,BS,Kye,LS,JO,hH,dH,cR,cH,lR,Qg,FS,oh,kS,Rv,aR,...e,...la.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:ove,providers:[Zg,aR,...e,{provide:J4,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:tH,useValue:gye},{provide:nH,useValue:na},{provide:rH,useClass:t.executionStrategy||Q4},{provide:Z4,useValue:e},{provide:la.ROOT_OPTIONS,useValue:t},{provide:Mf,useFactory:la.ngxsConfigFactory,deps:[la.ROOT_OPTIONS]},{provide:jw,useFactory:la.appBootstrapListenerFactory,multi:!0,deps:[JO]},{provide:eR,useFactory:la.getInitialState},{provide:q4,useExisting:BS},{provide:Y4,useExisting:Zg}]}static ngxsConfigFactory(e){return iR(new Mf,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return mye.pop()}}function lve(n){return i=>{!function(n){US.subscribe(e=>{e&&(n.\u0275prov||console.warn(Pa.UNDECORATED_STATE_IN_IVY(n.name)))})}(i);const r=i,s=function(n){if(!n.hasOwnProperty(Yu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,Yu,{value:e})}return Ov(n)}(r),o=Object.getPrototypeOf(r),a=function(i){return Object.assign({},i[iH]||{},n)}(o);(function(i){const{meta:r,inheritedStateClass:s,optionsWithInheritance:o}=i,{children:a,defaults:l,name:c}=o,d="string"==typeof c?c:c&&c.getName()||null;jS.checkCorrectStateName(d),s.hasOwnProperty(Yu)&&(r.actions=Object.assign({},r.actions,(s[Yu]||{}).actions)),r.children=a,r.defaults=l,r.name=d})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),r[iH]=a}}la.\u0275fac=function(e){return new(e||la)},la.\u0275mod=ln({type:la}),la.\u0275inj=vt({}),la.ROOT_OPTIONS=new zt("ROOT_OPTIONS");const Fa=new zt("NgValueAccessor"),JS=new Ql(mE);class mbe{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new _be(e,this.dueTime,this.scheduler))}}class _be extends y{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ybe,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function ybe(n){n.debouncedNext()}class vbe{constructor(e){this.total=e}call(e,t){return t.subscribe(new bbe(e,this.total))}}class bbe extends y{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function qi(n){return null!=n&&"false"!=`${n}`}function La(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Xu(n){return n instanceof En?n.nativeElement:n}let FR;try{FR="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){FR=!1}let Uv,LR,Yi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?uf(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!FR)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Me(Fc))},n.\u0275prov=$e({factory:function(){return new n(Me(Fc))},token:n,providedIn:"root"}),n})(),Vv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})();function tm(n){return function(){if(null==Uv&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Uv=!0}))}finally{Uv=Uv||!1}return Uv}()?n:!!n.capture}function Nf(n){return n.composedPath?n.composedPath()[0]:n.target}let kR=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({factory:function(){return new n},token:n,providedIn:"root"}),n})(),C8=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Xu(t);return new F(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new ee,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Me(kR))},n.\u0275prov=$e({factory:function(){return new n(Me(kR))},token:n,providedIn:"root"}),n})(),x8=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new hn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=qi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=La(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(n,e=JS){return t=>t.lift(new mbe(n,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(De(C8),De(En),De(vn))},n.\u0275dir=kt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[kR]}),n})();function L8(n){return 0===n.offsetX&&0===n.offsetY}function k8(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const B8=new zt("cdk-input-modality-detector-options"),Wbe={ignoreKeys:[18,17,224,91,16]},nm=tm({passive:!0,capture:!0});let V8=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Or(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Nf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(L8(o)?"keyboard":"mouse"),this._mostRecentTarget=Nf(o))},this._onTouchstart=o=>{k8(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Nf(o))},this._options=Object.assign(Object.assign({},Wbe),s),this.modalityDetected=this._modality.pipe(function(n){return e=>e.lift(new vbe(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(qu()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,nm),r.addEventListener("mousedown",this._onMousedown,nm),r.addEventListener("touchstart",this._onTouchstart,nm)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,nm),document.removeEventListener("mousedown",this._onMousedown,nm),document.removeEventListener("touchstart",this._onTouchstart,nm))}}return n.\u0275fac=function(t){return new(t||n)(Me(Yi),Me(vn),Me(dn),Me(B8,8))},n.\u0275prov=$e({factory:function(){return new n(Me(Yi),Me(vn),Me(dn),Me(B8,8))},token:n,providedIn:"root"}),n})();const H8=new zt("cdk-focus-monitor-default-options"),sC=tm({passive:!0,capture:!0});let Qu=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ee,this._rootNodeFocusAndBlurListener=a=>{const l=Nf(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let d=l;d;d=d.parentElement)c.call(this,a,d)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const r=Xu(t);if(!this._platform.isBrowser||1!==r.nodeType)return nn(null);const s=function(n){if(function(){if(null==LR){const n="undefined"!=typeof document?document.head:null;LR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return LR}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ee,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Xu(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Xu(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,i,r){r?t.classList.add(i):t.classList.remove(i)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){this._toggleClass(t,"cdk-focused",!!i),this._toggleClass(t,"cdk-touch-focused","touch"===i),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(t,"cdk-mouse-focused","mouse"===i),this._toggleClass(t,"cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Nf(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,sC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,sC)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(os(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(Me(vn),Me(Yi),Me(V8),Me(dn,8),Me(H8,8))},n.\u0275prov=$e({factory:function(){return new n(Me(vn),Me(Yi),Me(V8),Me(dn,8),Me(H8,8))},token:n,providedIn:"root"}),n})();const G8="cdk-high-contrast-black-on-white",$8="cdk-high-contrast-white-on-black",VR="cdk-high-contrast-active";let W8=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(VR),t.remove(G8),t.remove($8),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(VR),t.add(G8)):2===i&&(t.add(VR),t.add($8))}}}return n.\u0275fac=function(t){return new(t||n)(Me(Yi),Me(dn))},n.\u0275prov=$e({factory:function(){return new n(Me(Yi),Me(dn))},token:n,providedIn:"root"}),n})(),Hv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})();const Y8=new Du("12.2.5");function Q8(n){Promise.resolve(null).then(n)}class rm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Q8(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function J8(){return"undefined"!=typeof window&&void 0!==window.document}function zR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let WR=(n,e)=>!1,qR=(n,e)=>!1,n5=(n,e,t)=>[];const i5=zR();(i5||"undefined"!=typeof Element)&&(WR=J8()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),qR=(()=>{if(i5||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):qR}})(),n5=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let s=0;s<r.length;s++)i.push(r[s])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let Pf=null,r5=!1;function YR(n){Pf||(Pf=("undefined"!=typeof document?document.body:null)||{},r5=!!Pf.style&&"WebkitAppearance"in Pf.style);let e=!0;return Pf.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Pf.style,!e&&r5&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Pf.style)),e}const KR=qR,XR=WR,QR=n5;let o5=(()=>{class n{validateStyleProperty(t){return YR(t)}matchesElement(t,i){return KR(t,i)}containsElement(t,i){return XR(t,i)}query(t,i,r){return QR(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new rm(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class oC{}oC.NOOP=new o5;function u5(n,e,t){return t?e+":"+t+";":""}function d5(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=u5(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=u5(0,o0e(t),n.style[t]));n.setAttribute("style",e)}function tu(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=nN(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),zR()&&d5(n))}function Lf(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=nN(t);n.style[i]=""}),zR()&&d5(n))}const s0e=/-+([a-z0-9])/g;function nN(n){return n.replace(s0e,(...e)=>e[1].toUpperCase())}function o0e(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class am{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=am.initialStylesByElement.get(e);r||am.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&tu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tu(this._element,this._initialStyles),this._endStyles&&(tu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(am.initialStylesByElement.delete(this._element),this._startStyles&&(Lf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lf(this._element,this._endStyles),this._endStyles=null),tu(this._element,this._initialStyles),this._state=3)}}am.initialStylesByElement=new WeakMap;const lc=new zt("AnimationModuleType"),K5=new Du("12.2.5"),Twe=new zt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Bf,gr=(()=>{class n{constructor(t,i,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checkIsEnabled(t){return!(!na()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&K5.full!==Y8.full&&console.warn("The Angular Material version ("+K5.full+") does not match the Angular CDK version ("+Y8.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(Me(W8),Me(Twe,8),Me(dn))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[Hv],Hv]}),n})();function xC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=qi(e)}}}function Wv(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function _N(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=qi(e)}}}function yN(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?La(t):this.defaultTabIndex}}}try{Bf="undefined"!=typeof Intl}catch(n){Bf=!1}class Vwe{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Z5={enterDuration:225,exitDuration:150},vN=tm({passive:!0}),J5=["mousedown","touchstart"],e6=["mouseup","mouseleave","touchend","touchcancel"];class zwe{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Xu(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Z5),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(d),d.style.transform="scale(1)";const f=new Vwe(this,d,i);return f.state=0,this._activeRipples.add(f),i.persistent||(this._mostRecentTransientRipple=f),this._runTimeoutOutsideZone(()=>{const p=f===this._mostRecentTransientRipple;f.state=1,!i.persistent&&(!p||!this._isPointerDown)&&f.fadeOut()},c),f}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Z5),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.parentNode.removeChild(i)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Xu(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(J5))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(e6),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=L8(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!k8(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,vN)})})}_removeTriggerEvents(){this._triggerElement&&(J5.forEach(e=>{this._triggerElement.removeEventListener(e,this,vN)}),this._pointerUpEventsRegistered&&e6.forEach(e=>{this._triggerElement.removeEventListener(e,this,vN)}))}}const $we=new zt("mat-ripple-global-options");let lm=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new zwe(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(De(En),De(vn),De(Yi),De($we,8),De(lc,8))},n.\u0275dir=kt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Ai("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),TC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[gr,Vv],gr]}),n})();function td(n,e,t,i){return Y(t)&&(i=t,t=void 0),i?td(n,e,t).pipe(me(r=>L(r)?i(...r):i(r))):new F(r=>{s6(n,e,function(o){r.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},r,t)})}function s6(n,e,t,i,r){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,r),s=()=>o.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)s6(n[o],e,t,i,r)}i.add(s)}new class extends Ql{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends mE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let oEe=1;const aEe=Promise.resolve(),MC={};function o6(n){return n in MC&&(delete MC[n],!0)}const a6={setImmediate(n){const e=oEe++;return MC[e]=!0,aEe.then(()=>o6(e)&&n()),e},clearImmediate(n){o6(n)}};new class extends Ql{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,i){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends mE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=a6.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(a6.clearImmediate(t),e.scheduled=void 0)}});function Yv(n){return!!n&&(n instanceof F||"function"==typeof n.lift&&"function"==typeof n.subscribe)}function OC(...n){return It(1)(nn(...n))}"undefined"!=typeof window&&window;class MSe{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new TN(e,this.delay,this.scheduler))}}class TN extends y{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,r=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const o=Math.max(0,i[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(TN.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new ISe(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(ra.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(ra.createComplete()),this.unsubscribe()}}class ISe{constructor(e,t){this.time=e,this.notification=t}}function U6(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return t=>me(function(n,e){return i=>{let r=i;for(let s=0;s<e;s++){const o=null!=r?r[n[s]]:void 0;if(void 0===o)return;r=o}return r}}(n,e))(t)}tt(266);class vCe{constructor(e){this.callback=e}call(e,t){return t.subscribe(new bCe(e,this.callback))}}class bCe extends y{constructor(e,t){super(e),this.add(new x(t))}}class Z6{}class J6{}class iu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof iu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new iu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof iu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class wCe{encodeKey(e){return eG(e)}encodeValue(e){return eG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const SCe=/%(\d[a-f0-9])/gi,CCe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function eG(n){return encodeURIComponent(n).replace(SCe,(e,t)=>{var i;return null!==(i=CCe[t])&&void 0!==i?i:e})}function tG(n){return`${n}`}class Rs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wCe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Rs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tG(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(tG(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class bl{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function nG(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function iG(n){return"undefined"!=typeof Blob&&n instanceof Blob}function rG(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Xv{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new iu),this.context||(this.context=new bl),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Rs,this.urlWithParams=t}serializeBody(){return null===this.body?null:nG(this.body)||iG(this.body)||rG(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rG(this.body)?null:iG(this.body)?this.body.type||null:nG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,d=e.params||this.params;const f=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new Xv(i,r,o,{params:d,headers:c,context:f,reportProgress:l,responseType:s,withCredentials:a})}}var gs=(()=>((gs=gs||{})[gs.Sent=0]="Sent",gs[gs.UploadProgress=1]="UploadProgress",gs[gs.ResponseHeader=2]="ResponseHeader",gs[gs.DownloadProgress=3]="DownloadProgress",gs[gs.Response=4]="Response",gs[gs.User=5]="User",gs))();class MN{constructor(e,t=200,i="OK"){this.headers=e.headers||new iu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class IN extends MN{constructor(e={}){super(e),this.type=gs.ResponseHeader}clone(e={}){return new IN({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class BC extends MN{constructor(e={}){super(e),this.type=gs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new BC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sG extends MN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ON(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nd=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Xv)s=t;else{let l,c;l=r.headers instanceof iu?r.headers:new iu(r.headers),r.params&&(c=r.params instanceof Rs?r.params:new Rs({fromObject:r.params})),s=new Xv(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=nn(s).pipe(function(n,e){return k(n,e,1)}(l=>this.handler.handle(l)));if(t instanceof Xv||"events"===r.observe)return o;const a=o.pipe(Wi(l=>l instanceof BC));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(me(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(me(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(me(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(me(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Rs).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ON(r,i))}post(t,i,r={}){return this.request("POST",t,ON(r,i))}put(t,i,r={}){return this.request("PUT",t,ON(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Me(Z6))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class oG{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const aG=new zt("HTTP_INTERCEPTORS");let TCe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const DCe=/^\)\]\}',?\n/;let lG=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new F(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,_)=>r.setRequestHeader(g,_.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=1223===r.status?204:r.status,_=r.statusText||"OK",C=new iu(r.getAllResponseHeaders()),b=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new IN({headers:C,status:g,statusText:_,url:b}),o},l=()=>{let{headers:g,status:_,statusText:C,url:b}=a(),H=null;204!==_&&(H=void 0===r.response?r.responseText:r.response),0===_&&(_=H?200:0);let z=_>=200&&_<300;if("json"===t.responseType&&"string"==typeof H){const he=H;H=H.replace(DCe,"");try{H=""!==H?JSON.parse(H):null}catch(Ie){H=he,z&&(z=!1,H={error:Ie,text:H})}}z?(i.next(new BC({body:H,headers:g,status:_,statusText:C,url:b||void 0})),i.complete()):i.error(new sG({error:H,headers:g,status:_,statusText:C,url:b||void 0}))},c=g=>{const{url:_}=a(),C=new sG({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:_||void 0});i.error(C)};let d=!1;const f=g=>{d||(i.next(a()),d=!0);let _={type:gs.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),"text"===t.responseType&&!!r.responseText&&(_.partialText=r.responseText),i.next(_)},p=g=>{let _={type:gs.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),i.next(_)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:gs.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Me(I3))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const RN=new zt("XSRF_COOKIE_NAME"),NN=new zt("XSRF_HEADER_NAME");class cG{}let ICe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=v3(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Me(dn),Me(Fc),Me(RN))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),PN=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(cG),Me(NN))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),OCe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(aG,[]);this.chain=i.reduceRight((r,s)=>new oG(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(J6),Me(Vn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),RCe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:PN,useClass:TCe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:RN,useValue:t.cookieName}:[],t.headerName?{provide:NN,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[PN,{provide:aG,useExisting:PN,multi:!0},{provide:cG,useClass:ICe},{provide:RN,useValue:"XSRF-TOKEN"},{provide:NN,useValue:"X-XSRF-TOKEN"}]}),n})(),uG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[nd,{provide:Z6,useClass:OCe},lG,{provide:J6,useExisting:lG}],imports:[[RCe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Jv(n){return!0===n}function ja(n){return null==n}function Va(n){return!ja(n)}function GN(n){return Boolean(n)}function kG(n){return ja(n)?n:JSON.parse(JSON.stringify(n))}tt(478),Object.create(Error.prototype),new zt("SECURITY_CONTEXT");const YC=n=>{const t=n instanceof Date;if("object"!=typeof n||null===n||t)return n;Object.freeze(n);const r="function"==typeof n,s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(o=>{s.call(n,o)&&(!r||"caller"!==o&&"callee"!==o&&"arguments"!==o)&&null!==n[o]&&("object"==typeof n[o]||"function"==typeof n[o])&&!Object.isFrozen(n[o])&&YC(n[o])}),n};function BG(n){return Va(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const UG="NGXS_DATA_META",WN="NGXS_META",zG="NGXS_ARGUMENT_REGISTRY_META";let HG=(()=>{class n{constructor(t){this.sequence$=new Or(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(Me(oh,8))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();function eb(n){return n[UG]}let Ua=(()=>{class n{constructor(t,i,r){n.store=t.get(oh),n.ngZone=t.get(vn),n.factory=i,n.context=r,n.computed=t.get(HG)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(t){return new(t||n)(Me(Vn),Me(Y4),Me(q4))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();class ls{constructor(){ls.statesCachedMeta.clear()}static createStateContext(e){return Ua.context.createStateContext(e)}static ensureMappedState(e){if(ja(Ua.factory)||ja(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Va(e.name)?ls.statesCachedMeta.get(e.name):null)||ls.ensureMeta(e)}static getRepositoryByInstance(e){var t;const r=null!==(t=eb(ls.getStateClassByInstance(e)))&&void 0!==t?t:null;if(ja(r))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return r}static getStateClassByInstance(e){return(null!=e?e:{}).constructor}static clearMetaByInstance(e){const t=ls.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(let s=0;s<r.length;s++){const o=null==t?void 0:t.getPayloadTypeByIndex(s);Va(o)&&(i[o]=r[s])}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=ls.createPayload(t,i);return new(function(n){return class{constructor(t){t&&Object.keys(t).forEach(i=>{this[i]=t[i]})}static get type(){return n}}}(e.type))(r)}static ensureMeta(e){var t;const i=Va(e.name)?null===(t=Ua.factory.states)||void 0===t?void 0:t.find(r=>r.name===e.name):null;return Va(i)&&Va(e.name)&&ls.statesCachedMeta.set(e.name,i),i}}ls.statesCachedMeta=new Map,ls.\u0275fac=function(e){return new(e||ls)},ls.\u0275prov=$e({token:ls,factory:ls.\u0275fac}),new hf(1);class DAe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Va(null==e?void 0:e.constructor)?e.constructor.name:e} to PlainObject`)}}function GG(n){var e;return null!==(e=n.NGXS_OPTIONS_META)&&void 0!==e?e:{name:""}}function $G(n){var e;const t=GG(n),i=null!==(e=t.children)&&void 0!==e?e:[],s=kG(void 0===t.defaults?{}:t.defaults);if(i.length){if(BG(s))return function(n,e){return e.reduce((t,i)=>{const r=GG(i);if(function(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=$G(i),t},null!=n?n:{})}(s,i);throw new DAe(s)}return s}function qG(n){var e;return null!==(e=n.__NGXS_COMPUTED_OPTION__)&&void 0!==e?e:null}function YG(){var n,e;return null!==(e=null===(n=null==Ua?void 0:Ua.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==e?e:0}function RAe(n){let e=!1;return Yv(n)&&(e=!0),e}function qN(n){return n[zG]}class NAe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class PAe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){var t;return null!==(t=this.payloadMap.get(e))&&void 0!==t?t:null}getArgumentNameByIndex(e){var t;return null!==(t=this.argumentMap.get(e))&&void 0!==t?t:null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(GN(this.argumentMap.has(e))||GN(this.payloadMap.has(e)))throw new NAe(e,t)}}function VAe(n){return{enumerable:!0,configurable:!0,get(){const e=eb(n),t=ls.ensureMappedState(e.stateMeta);return ls.createStateContext(t)}}}function KG(){return(n,e,t)=>{!function(n,e){if(!function(n,e){var t;let i=n,r=!1;if(BG(i))for(;null!==i;){if(Jv(null==i?void 0:i.hasOwnProperty(e))){r=!!(null===(t=Object.getOwnPropertyDescriptor(i,e))||void 0===t?void 0:t.get);break}i=Object.getPrototypeOf(i)}return r}(n,null==e?void 0:e.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function(n){return ja(qG(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),qG(n)}(this),o=null==s?void 0:s.get(i);if(Jv(null==o?void 0:o.isObservable))return null==o?void 0:o.value;if(ja(o)||o.sequenceId!==YG()){s.delete(i);const l=i.apply(this,r);return s.set(i,{value:l,sequenceId:YG(),isObservable:RAe(l)}),l}return o.value},t}}const WAe={cancelUncompleted:!0,insideZone:!1};function YN(n=WAe){return(e,t,i)=>{!function(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(e,i);const r=i.value,s=t.toString();return i.value=function(...o){const a=this;let l=null;const c=ls.getRepositoryByInstance(a),d=c.operations;let f=d[s];const p=c.stateMeta,g=qN(r);if(ja(f)){const z=function(n){var e,t,i;return null!==(i=null===(t=null===(e=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===e?void 0:e[0])||void 0===t?void 0:t.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==i?i:[]}(r),he=function(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)Va(null==r?void 0:r.getArgumentNameByIndex(o))?s+=null==r?void 0:r.getArgumentNameByIndex(o):Va(null==r?void 0:r.getPayloadTypeByIndex(o))?s+=null==r?void 0:r.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:p.path,methodName:s,argumentsNames:z,argumentRegistry:g});f=d[s]={type:he,options:{cancelUncompleted:n.cancelUncompleted}},p.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}]}ls.ensureMappedState(p).instance[f.type]=()=>{var z;return Jv(n.insideZone)?null===(z=Ua.ngZone)||void 0===z||z.run(()=>{l=r.apply(a,o)}):l=r.apply(a,o),Yv(l)?nn(null).pipe(me(()=>l)):l};const b=ls.createAction(f,o,g),H=Ua.store.dispatch(b);return Yv(l)?function(n,e){return Iv([n,e]).pipe(me(t=>t.pop()))}(H,l):l},i}}function XG(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function(n,e){const t=n[e];return ja(qN(t))&&Object.defineProperties(t,{[zG]:{enumerable:!0,configurable:!0,value:new PAe}}),qN(t)})(e,t).createPayloadType(r,t,i)}}function YAe(){return n=>{const e=function(n){if(function(n){return!GN(n)}(n.hasOwnProperty(WN))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,WN,{value:e})}return function(n){var e;return null===(e=n)||void 0===e?void 0:e[WN]}(n)}(n);if(ja(e.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,e){(function(n){var e;const t=null!==(e=eb(n))&&void 0!==e?e:null;return(ja(t)||(null==t?void 0:t.stateClass)!==n)&&function(n){Object.defineProperty(n,UG,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),eb(n)}(n)).stateMeta=e}(n,e),function(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>kG(t)},context:VAe(n)})}(n,e,$G(n)),function(n){var e,t;const i=eb(n),r=null!==(t=null===(e=null==i?void 0:i.stateMeta)||void 0===e?void 0:e.name)&&void 0!==t?t:null;if(Va(r)){const s=`__${r}__selector`;Object.defineProperties(n.prototype,{[s]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Va(this[s]))return this[s];if(ja(Ua.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[s]=Ua.store.select(n).pipe(me(o=>na()?YC(o):o),Na({refCount:!0,bufferSize:1})),this[s]}}})}}(n)}}let XAe=(()=>{class n{constructor(){this.browserStorageEvents$=new ee,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){var r;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var i;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(i=this.ngxsDataDoCheck)||void 0===i||i.call(this))}markAsDirtyAfterReset(){var i;this.dirty=!0,null===(i=this.ngxsDataAfterReset)||void 0===i||i.call(this)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),QAe=(()=>{class n extends XAe{get snapshot(){return function(n){return na()?YC(n):n}(this.getState())}get ctx(){return function(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>na()?YC(n.getState()):n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}})}(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gi(n)))(i||n)}}(),n.\u0275prov=$e({token:n,factory:n.\u0275fac}),Qr([KG(),Zl("design:type",Object),Zl("design:paramtypes",[])],n.prototype,"snapshot",null),Qr([YN(),$3(0,XG("patchValue")),Zl("design:type",Function),Zl("design:paramtypes",[Object]),Zl("design:returntype",void 0)],n.prototype,"patchState",null),Qr([YN(),$3(0,XG("stateValue")),Zl("design:type",Function),Zl("design:paramtypes",[Object]),Zl("design:returntype",void 0)],n.prototype,"setState",null),Qr([YN(),Zl("design:type",Function),Zl("design:paramtypes",[]),Zl("design:returntype",void 0)],n.prototype,"reset",null),n})(),rW=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=kt({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const vm=new zt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),yP=new zt("ngx-window",{providedIn:"root",factory:()=>function(n){return uf(n)?window:null}(Sc(Fc))}),yDe=new zt("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(Sc(yP))}),vP=new zt("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Sc(yP),Sc(yDe))});let hx=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){(this.settings.enableTracing||na())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o){try{const a=new Map;i&&a.set("event_category",i),r&&a.set("event_label",r),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",t,l):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(Me(vm),Me(dn),Me(vP))},n.\u0275prov=$e({factory:function(){return new n(Me(vm),Me(dn),Me(vP))},token:n,providedIn:"root"}),n})(),sW=(()=>{class n{constructor(t,i,r,s){this.gaCategoryDirective=t,this.gaService=i,this.settings=r,this.el=s,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=td(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){(na()||this.settings.enableTracing)&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(De(rW,8),De(hx),De(vm),De(En))},n.\u0275dir=kt({type:n,selectors:[["","gaEvent",""]],inputs:{gaBind:"gaBind",gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent"},exportAs:["gaEvent"]}),n})();const bDe={provide:sf,multi:!0,useFactory:function(n,e,t){return()=>Zi(this,void 0,void 0,function*(){var i;if(!n.trackingCode)return void(na()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(na()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||na()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(i=null==n?void 0:n.initCommands)&&void 0!==i?i:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const r=t.createElement("script");r.async=!0,r.src=n.uri,n.nonce&&r.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(r)})},deps:[vm,vP,dn]};new zt("ngx-google-analytics-routing-settings",{factory:()=>({})});let fx=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:vm,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},bDe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[]]}),n})(),px=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new hf(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),CDe=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new x,this.token=r,this.subscriptions.add(t.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}}return n.\u0275fac=function(t){return new(t||n)(Me(px),Me(yP),Me(vm))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const xDe=new zt("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),lW=[px,CDe,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new x;try{this.storage=localStorage}catch(r){}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){var t,i;const r=null===(i=null===(t=this.storage)||void 0===t?void 0:t.getItem)||void 0===i?void 0:i.call(t,this.key);if(null==r)return"not-set";const s=r.trim().toLowerCase();switch(s){case"given":case"rescinded":return s;default:return"not-set"}}saveConsent(t){var i,r;null===(r=null===(i=this.storage)||void 0===i?void 0:i.setItem)||void 0===r||r.call(i,this.key,t)}}return n.\u0275fac=function(t){return new(t||n)(Me(px),Me(xDe))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})()];function TDe(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let MDe=(()=>{class n{static forRoot(t){const{providers:i=[]}=fx.forRoot(t.gaToken,function(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[TDe({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[...lW,{provide:sf,multi:!0,useFactory:()=>()=>{},deps:lW}],imports:[[fx]]}),n})();const NDe=(n,e)=>JSON.stringify(n)===JSON.stringify(e),PDe=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),uc={storageStrategy:class extends class{}{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},FDe=new ee;function sd(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,s=i.value;if(i&&i.value){let o=n.storageStrategy?new n.storageStrategy:new uc.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(d=>o.addMany(d(o.getAll(r,this)),r,this)),Rn(FDe.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:Vy()).subscribe(d=>{o.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||uc.cacheResolver||NDe,n.cacheHasher=n.cacheHasher||uc.cacheHasher||PDe,i.value=function(...d){const f=o.getAll(r,this);let p=n.cacheHasher(d),g=f.find(C=>n.cacheResolver(C.parameters,p));const _=a.find(C=>n.cacheResolver(C.parameters,p));if((n.maxAge||uc.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(n.maxAge||uc.maxAge)?(o.remove?o.remove(f.indexOf(g),g,r,this):o.removeAtIndex(f.indexOf(g),r,this),g=null):(n.slidingExpiration||uc.slidingExpiration)&&(g.created=new Date,o.update?o.update(f.indexOf(g),g,r,this):o.updateAtIndex(f.indexOf(g),g,r,this))),g){const C=nn(g.response);return n.async?C.pipe(function(n,e=JS){const i=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-e.now():Math.abs(n);return r=>r.lift(new MSe(i,e))}(0)):C}if(_)return _.response;{const C=s.call(this,...d).pipe(function(n){return e=>e.lift(new vCe(n))}(()=>{const b=a.find(H=>n.cacheResolver(H.parameters,p));a.splice(a.indexOf(b),1)}),lr(b=>{(!n.shouldCacheDecider||n.shouldCacheDecider(b))&&((!(n.maxCacheCount||uc.maxCacheCount)||1===(n.maxCacheCount||uc.maxCacheCount)||(n.maxCacheCount||uc.maxCacheCount)&&(n.maxCacheCount||uc.maxCacheCount)<f.length+1)&&(o.remove?o.remove(0,f[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:p,response:b,created:n.maxAge||uc.maxAge?new Date:null},r,this))}),function(n,e,t,i){const s=new hf(1,void 0,i);return o=>da(()=>s,undefined)(o)}(),Hn());return a.push({parameters:p,response:C,created:new Date}),C}}}return i}}class LDe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const cW=new zt("basePath");class ub{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}}let uW=(()=>{class n{constructor(t,i,r){this.httpClient=t,this.basePath="/v1",this.defaultHeaders=new iu,this.configuration=new ub,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new LDe}addToHttpParams(t,i,r){return"object"!=typeof i||i instanceof Date?this.addToHttpParamsRecursive(t,i,r):this.addToHttpParamsRecursive(t,i)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>t=this.addToHttpParamsRecursive(t,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>t=this.addToHttpParamsRecursive(t,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,d=t.cache,f=t.ontologyTerms,p=t.providers,g=t.sex,_=t.technologies,C=t.token;let b=new Rs({encoder:this.encoder});null!=o&&(b=this.addToHttpParams(b,o,"age")),null!=a&&(b=this.addToHttpParams(b,a,"age-range")),null!=l&&(b=this.addToHttpParams(b,l,"bmi")),null!=c&&(b=this.addToHttpParams(b,c,"bmi-range")),null!=d&&(b=this.addToHttpParams(b,d,"cache")),f&&f.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"ontology-terms")}),p&&p.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"providers")}),null!=g&&(b=this.addToHttpParams(b,g,"sex")),_&&_.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"technologies")}),null!=C&&(b=this.addToHttpParams(b,C,"token"));let H=this.defaultHeaders,z=s&&s.httpHeaderAccept;void 0===z&&(z=this.configuration.selectHeaderAccept(["application/json"])),void 0!==z&&(H=H.set("Accept",z));let he=s&&s.context;void 0===he&&(he=new bl);let Ie="json";return z&&(Ie=z.startsWith("text")?"text":this.configuration.isJsonMime(z)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:he,params:b,responseType:Ie,withCredentials:this.configuration.withCredentials,headers:H,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,s){const o=t.cache;let a=new Rs({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(l=l.set("Accept",c));let d=s&&s.context;void 0===d&&(d=new bl);let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:d,params:a,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Rs({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(c=c.set("Accept",d));let f=s&&s.context;void 0===f&&(f=new bl);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:f,params:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,d=t.cache,f=t.ontologyTerms,p=t.providers,g=t.sex,_=t.technologies,C=t.token;let b=new Rs({encoder:this.encoder});null!=o&&(b=this.addToHttpParams(b,o,"age")),null!=a&&(b=this.addToHttpParams(b,a,"age-range")),null!=l&&(b=this.addToHttpParams(b,l,"bmi")),null!=c&&(b=this.addToHttpParams(b,c,"bmi-range")),null!=d&&(b=this.addToHttpParams(b,d,"cache")),f&&f.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"ontology-terms")}),p&&p.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"providers")}),null!=g&&(b=this.addToHttpParams(b,g,"sex")),_&&_.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"technologies")}),null!=C&&(b=this.addToHttpParams(b,C,"token"));let H=this.defaultHeaders,z=s&&s.httpHeaderAccept;void 0===z&&(z=this.configuration.selectHeaderAccept(["application/json"])),void 0!==z&&(H=H.set("Accept",z));let he=s&&s.context;void 0===he&&(he=new bl);let Ie="json";return z&&(Ie=z.startsWith("text")?"text":this.configuration.isJsonMime(z)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:he,params:b,responseType:Ie,withCredentials:this.configuration.withCredentials,headers:H,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Rs({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(c=c.set("Accept",d));let f=s&&s.context;void 0===f&&(f=new bl);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:f,params:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Rs({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(c=c.set("Accept",d));let f=s&&s.context;void 0===f&&(f=new bl);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:f,params:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,s){const o=t.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,l=t.ageRange,c=t.bmi,d=t.bmiRange,f=t.cache,p=t.ontologyTerms,g=t.providers,_=t.sex,C=t.technologies,b=t.token;let H=new Rs({encoder:this.encoder});null!=a&&(H=this.addToHttpParams(H,a,"age")),null!=l&&(H=this.addToHttpParams(H,l,"age-range")),null!=c&&(H=this.addToHttpParams(H,c,"bmi")),null!=d&&(H=this.addToHttpParams(H,d,"bmi-range")),null!=f&&(H=this.addToHttpParams(H,f,"cache")),p&&p.forEach(We=>{H=this.addToHttpParams(H,We,"ontology-terms")}),null!=o&&(H=this.addToHttpParams(H,o,"organ-iri")),g&&g.forEach(We=>{H=this.addToHttpParams(H,We,"providers")}),null!=_&&(H=this.addToHttpParams(H,_,"sex")),C&&C.forEach(We=>{H=this.addToHttpParams(H,We,"technologies")}),null!=b&&(H=this.addToHttpParams(H,b,"token"));let z=this.defaultHeaders,he=s&&s.httpHeaderAccept;void 0===he&&(he=this.configuration.selectHeaderAccept(["application/json"])),void 0!==he&&(z=z.set("Accept",he));let Ie=s&&s.context;void 0===Ie&&(Ie=new bl);let Fe="json";return he&&(Fe=he.startsWith("text")?"text":this.configuration.isJsonMime(he)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:Ie,params:H,responseType:Fe,withCredentials:this.configuration.withCredentials,headers:z,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Rs({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(c=c.set("Accept",d));let f=s&&s.context;void 0===f&&(f=new bl);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:f,params:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}scene(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,d=t.cache,f=t.ontologyTerms,p=t.providers,g=t.sex,_=t.technologies,C=t.token;let b=new Rs({encoder:this.encoder});null!=o&&(b=this.addToHttpParams(b,o,"age")),null!=a&&(b=this.addToHttpParams(b,a,"age-range")),null!=l&&(b=this.addToHttpParams(b,l,"bmi")),null!=c&&(b=this.addToHttpParams(b,c,"bmi-range")),null!=d&&(b=this.addToHttpParams(b,d,"cache")),f&&f.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"ontology-terms")}),p&&p.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"providers")}),null!=g&&(b=this.addToHttpParams(b,g,"sex")),_&&_.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"technologies")}),null!=C&&(b=this.addToHttpParams(b,C,"token"));let H=this.defaultHeaders,z=s&&s.httpHeaderAccept;void 0===z&&(z=this.configuration.selectHeaderAccept(["application/json"])),void 0!==z&&(H=H.set("Accept",z));let he=s&&s.context;void 0===he&&(he=new bl);let Ie="json";return z&&(Ie=z.startsWith("text")?"text":this.configuration.isJsonMime(z)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:he,params:b,responseType:Ie,withCredentials:this.configuration.withCredentials,headers:H,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let l=new Rs({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"cache")),null!=a&&(l=this.addToHttpParams(l,a,"token"));let c=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json"])),void 0!==d&&(c=c.set("Accept",d));let f=s&&s.context;void 0===f&&(f=new bl);let p="json";return d&&(p=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:f,params:l,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,l=t.bmi,c=t.bmiRange,d=t.cache,f=t.ontologyTerms,p=t.providers,g=t.sex,_=t.technologies,C=t.token;let b=new Rs({encoder:this.encoder});null!=o&&(b=this.addToHttpParams(b,o,"age")),null!=a&&(b=this.addToHttpParams(b,a,"age-range")),null!=l&&(b=this.addToHttpParams(b,l,"bmi")),null!=c&&(b=this.addToHttpParams(b,c,"bmi-range")),null!=d&&(b=this.addToHttpParams(b,d,"cache")),f&&f.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"ontology-terms")}),p&&p.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"providers")}),null!=g&&(b=this.addToHttpParams(b,g,"sex")),_&&_.forEach(Fe=>{b=this.addToHttpParams(b,Fe,"technologies")}),null!=C&&(b=this.addToHttpParams(b,C,"token"));let H=this.defaultHeaders,z=s&&s.httpHeaderAccept;void 0===z&&(z=this.configuration.selectHeaderAccept(["application/json"])),void 0!==z&&(H=H.set("Accept",z));let he=s&&s.context;void 0===he&&(he=new bl);let Ie="json";return z&&(Ie=z.startsWith("text")?"text":this.configuration.isJsonMime(z)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:he,params:b,responseType:Ie,withCredentials:this.configuration.withCredentials,headers:H,observe:i,reportProgress:r})}}return n.\u0275fac=function(t){return new(t||n)(Me(nd),Me(cW,8),Me(ub,8))},n.\u0275prov=$e({factory:function(){return new n(Me(nd),Me(cW,8),Me(ub,8))},token:n,providedIn:"root"}),n})(),kDe=(()=>{class n{constructor(t,i){if(t)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static forRoot(t){return{ngModule:n,providers:[{provide:ub,useFactory:t}]}}}return n.\u0275fac=function(t){return new(t||n)(Me(n,12),Me(nd,8))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[],imports:[[]]}),n})();function ou(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let bP;function dc(){return bP||(bP=function(n,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise(t=>{const i=()=>indexedDB.databases().finally(t);e=setInterval(i,100),i()}).finally(()=>clearInterval(e))}().then(()=>{const i=indexedDB.open("keyval-store");return i.onupgradeneeded=()=>i.result.createObjectStore(e),ou(i)});return(i,r)=>t.then(s=>r(s.transaction(e,i).objectStore(e)))}(0,"keyval")),bP}function dW(n,e=dc()){return e("readonly",t=>ou(t.get(n)))}var ki=tt(440),HDe=tt(698),GDe=tt(445),$De=tt.n(GDe),mi=tt(815),ph=tt(609);const ji=ki.Util.prefixes({ccf:"http://purl.org/ccf/latest/ccf.owl#",entity:"http://purl.org/ccf/latest/ccf-entity.owl#",fma:"http://purl.obolibrary.org/obo/FMA_",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/"},ki.DataFactory),hW={x:ji("rdf"),type:ji("rdf")("type")},bm={x:ji("rdfs"),label:ji("rdfs")("label"),comment:ji("rdfs")("comment"),isDefinedBy:ji("rdfs")("isDefinedBy"),seeAlso:ji("rdfs")("seeAlso")},_i={x:ji("entity"),id:ji("entity")("id"),label:bm.label,description:bm.comment,link:bm.seeAlso,sex:ji("entity")("sex"),age:ji("entity")("age"),bmi:ji("entity")("bmi"),Male:ki.DataFactory.literal("Male"),Female:ki.DataFactory.literal("Female"),consortiumName:ji("entity")("consortium_name"),providerName:ji("entity")("provider_name"),providerUUID:ji("entity")("provider_uuid"),donor:ji("entity")("has_donor"),sections:ji("entity")("has_tissue_section"),datasets:ji("entity")("has_dataset"),sampleType:ji("entity")("sample_type"),TissueBlock:ki.DataFactory.literal("Tissue Block"),TissueSection:ki.DataFactory.literal("Tissue Section"),NonStandard:ki.DataFactory.literal("Non-standard"),sectionCount:ji("entity")("section_count"),sectionSize:ji("entity")("section_size"),sectionUnits:ji("entity")("section_units"),sectionNumber:ji("entity")("section_number"),spatialEntity:ji("entity")("has_spatial_entity"),ontologyTerms:ji("entity")("has_ontology_term"),technology:ji("entity")("technology"),thumbnail:ji("entity")("has_thumbnail")},On=ji("ccf"),cr={x:On,ontologyNode:{label:On("ccf_preferred_label"),parent:On("ccf_part_of"),children:On("ccf_part_of"),rui_rank:On("ccf_rui_rank"),synonymLabels:ki.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},spatial:{Female:On("VHFemale"),Male:On("VHMale"),BothSexes:On("VHBothSexes"),FemaleOrgans:On("VHFemaleOrgans"),MaleOrgans:On("VHMaleOrgans")},SpatialObjectReference:On("SpatialObjectReference"),SpatialEntity:On("SpatialEntity"),SpatialPlacement:On("SpatialPlacement"),spatialObjectReference:{file:On("has_object_file"),file_format:On("has_object_file_format"),file_subpath:On("has_object_file_subpath")},extractionSet:{label:bm.label,rui_rank:On("ccf_rui_rank")},spatialEntity:{label:bm.label,comment:bm.comment,creator:ji("dc")("creator"),creator_first_name:On("creator_first_name"),creator_last_name:On("creator_last_name"),creator_orcid:On("creator_orcid"),creation_date:On("creation_date"),updated_date:On("updated_date"),ccf_annotations:On("ccf_annotation"),representation_of:On("ccf_representation_of"),reference_organ:On("anatomical_structure_of"),extraction_set_for:On("extraction_set_for"),extraction_set:On("extraction_site_for"),sex:On("has_sex"),side:On("has_side"),rui_rank:On("ccf_rui_rank"),slice_thickness:On("ccf_slice_thickness"),slice_count:On("ccf_slice_count"),x_dimension:On("has_x_dimension"),y_dimension:On("has_y_dimension"),z_dimension:On("has_z_dimension"),dimension_units:On("has_dimension_units"),object:On("has_object_reference")},spatialPlacement:{source:On("has_placement_source"),target:On("has_placement_target"),placement_date:On("has_placement_date"),x_scaling:On("has_x_scaling"),y_scaling:On("has_y_scaling"),z_scaling:On("has_z_scaling"),scaling_units:On("has_scaling_units"),x_rotation:On("has_x_rotation"),y_rotation:On("has_y_rotation"),z_rotation:On("has_z_rotation"),w_rotation:On("has_theta_rotation"),rotation_order:On("has_rotation_order"),rotation_units:On("has_rotation_units"),x_translation:On("has_x_translation"),y_translation:On("has_y_translation"),z_translation:On("has_z_translation"),translation_units:On("has_translation_units")}},ri={x:ji("uberon")},db={x:ji("fma")},fW=(ji("lmha"),{body:ri.x("0013702"),respiratory_system:ri.x("0001004"),colon:ri.x("0001155"),left_lung:ri.x("0002168"),right_lung:ri.x("0002167"),left_bronchus:ri.x("0002178"),right_bronchus:ri.x("0002177"),kidney:ri.x("0002113"),ureter:ri.x("0000056"),eye:ri.x("0000970"),fallopian_tube:ri.x("0003889"),knee:ri.x("0001465"),ovary:ri.x("0000992"),trachea:ri.x("0003126"),aorta:ri.x("0000947"),blood:ri.x("0000178"),bone_marrow:ri.x("0002371"),male_reproductive_system:ri.x("0000079"),lymph_node:ri.x("0000029"),blood_vasculature:ri.x("0004537"),brain:ri.x("0000955"),eye_left:ri.x("0004548"),eye_right:db.x("54449"),fallopian_tube_left:ri.x("0001303"),fallopian_tube_right:ri.x("0001302"),heart:ri.x("0000948"),kidney_left:ri.x("0004538"),kidney_right:ri.x("0004539"),knee_left:db.x("24978"),knee_right:db.x("24977"),large_intestine:ri.x("0000059"),liver:ri.x("0002107"),lungs:ri.x("0002048"),mesenteric_lymph_node:ri.x("0002509"),ovary_left:db.x("7214"),ovary_right:db.x("7213"),pancreas:ri.x("0001264"),pelvis:ri.x("0001270"),prostate_gland:ri.x("0002367"),skin:ri.x("0002097"),small_intestine:ri.x("0002108"),spleen:ri.x("0002106"),thymus:ri.x("0002370"),ureter_left:ri.x("0001223"),ureter_right:ri.x("0001222"),urinary_bladder:ri.x("0001255"),uterus:ri.x("0000995")});function EP(n){const e={};return Object.entries(n).forEach(([t,i])=>{e[i.id]=t}),e}const gx={spatialObjectReference:EP(cr.spatialObjectReference),spatialEntity:EP(cr.spatialEntity),spatialPlacement:EP(cr.spatialPlacement)};function mx(n,e,t,i){const r={"@id":e,"@type":t};return n.some(s=>{const o=i[s.predicate.id];if(o){const a="Literal"===s.object.termType?(0,ph.fromRdf)(s.object):s.object.id;(0,mi.set)(r,o,a)}return!1},ki.DataFactory.namedNode(e),null,null,null),r}const YDe=(0,mi.memoize)(function(n,e){return mx(n,e,"SpatialObjectReference",gx.spatialObjectReference)},(n,e)=>e),pW=(0,mi.memoize)(function(n,e){const t=mx(n,e,"ExtractionSet",gx.spatialEntity);return t.extractionSites=(0,mi.sortBy)(n.getSubjects(cr.spatialEntity.extraction_set,e,null).map(i=>qf(n,i.id)),["rui_rank"]),t},(n,e)=>e),QDe=(0,mi.memoize)(function(n,e){return(0,mi.sortBy)(n.getSubjects(cr.spatialEntity.extraction_set_for,e,null).map(t=>pW(n,t.id)),["rui_rank"])},(n,e)=>e),JDe=(0,mi.memoize)(function(n,e){return(0,mi.sortBy)(n.getSubjects(cr.spatialEntity.reference_organ,e,null).map(t=>qf(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])},(n,e)=>e),tMe=(0,mi.memoize)(function(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(qf(n,t.subject.id))},null,cr.spatialEntity.reference_organ,null,null),(0,mi.sortBy)(e,["rui_rank"])}),qf=(0,mi.memoize)(function(n,e){const t=mx(n,e,"SpatialEntity",gx.spatialEntity);return t.object&&(t.object=YDe(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,cr.spatialEntity.ccf_annotations,null).map(i=>i.id)),n.forSubjects(i=>t.entityId=i.id,_i.spatialEntity,e,null),t},(n,e)=>e),rMe=(0,mi.memoize)(function(n,e){const t=mx(n,e,"SpatialPlacement",gx.spatialPlacement);return t.source&&(t.source=qf(n,t.source)),t.target&&(t.target=qf(n,t.target)),t},(n,e)=>e),oMe=(0,mi.memoize)(function(n,e){const t=n.getObjects(ki.DataFactory.namedNode(e),_i.spatialEntity,null);if(t.length>0)return qf(n,t[0].id)},(n,e)=>e);function aMe(n,e){const t=e;let i;switch(t.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;case"meter":default:i=1}const r=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*i),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(VB),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(r).rotateXYZ(s).scale(o)}class gW{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new HDe.DirectedGraph;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},hW.type,cr.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},hW.type,cr.SpatialEntity,null);const t={};e.some(i=>(t[i.subject.id]=i.object.id,!1),null,cr.spatialPlacement.source,null,null),e.some(i=>{const r=t[i.subject.id];return r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement"),!1},null,cr.spatialPlacement.target,null,null)}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,i,r){this.graph.mergeDirectedEdge(t,i,{type:r,id:e})}getTransformationMatrix(e,t){if(e===t)return new $n($n.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const i=this.db.store,r=new $n($n.IDENTITY),s=$De()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s){if(o){const l=this.graph.getEdgeAttribute(a,o,"id");aMe(r,rMe(i,l))}o=a}return r}}}class mW{constructor(e){this.db=e}getSpatialEntity(e){return qf(this.db.store,e)}getExtractionSets(e){return QDe(this.db.store,e)}getExtractionSet(e){return pW(this.db.store,e)}getAnatomicalStructures(e){return JDe(this.db.store,e)}getReferenceOrgans(){return tMe(this.db.store)}getReferenceBody(e){let t;switch(null==e?void 0:e.sex){case"Male":t=cr.spatial.Male.id;break;case"Female":t=cr.spatial.Female.id;break;case"Both":default:t=cr.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(null==e?void 0:e.sex){case"Male":t=t.filter(i=>"Male"===i.sex);break;case"Female":t=t.filter(i=>"Female"===i.sex)}return(null==e?void 0:e.debug)&&(t=t.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,t,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),(null==e?void 0:e.debug)&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(cr.x("VHRightKidney").id),t,{color:[0,0,255,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(cr.x("VHLeftKidney").id),t,{color:[255,0,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(cr.x("VHSpleenCC1").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(cr.x("VHSpleenCC2").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(cr.x("VHSpleenCC3").id),t,{color:[0,255,0,127.5],wireframe:!0})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,t){var i,r;const s=null!==(i=void 0!==(null==t?void 0:t.sex))&&void 0!==i&&i,o=this.getReferenceOrgans().filter(a=>a.representation_of===e&&(!s||a.sex===(null==t?void 0:t.sex)));if(o.length>0){const a=o[0],c=this.getSceneNode(a,a,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===a.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),d=(null!==(r=this.db.getSpatialEntities(t))&&void 0!==r?r:[]).map(f=>this.getSceneNode(f,a,{color:[255,255,255,229.5]}));return[c].concat(d).filter(f=>void 0!==f)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,t,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,t,i={}){var r,s,o,a;const l=null===(s=null===(r=null==e?void 0:e.object)||void 0===r?void 0:r.file_format)||void 0===s?void 0:s.startsWith("model/gltf");let d=this.db.graph.getTransformationMatrix(l&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(d){if(l)d=new $n($n.IDENTITY).rotateX(VB(90)).multiplyLeft(d);else{let f;switch(e.dimension_units){case"centimeter":f=.01;break;case"millimeter":f=.001;break;case"meter":default:f=1}const p=[e.x_dimension,e.y_dimension,e.z_dimension].map(g=>g*f/2);d.scale(p)}return Object.assign({"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:l?null===(o=e.object)||void 0===o?void 0:o.file:void 0,scenegraphNode:l?null===(a=e.object)||void 0===a?void 0:a.file_subpath:void 0,transformMatrix:d,tooltip:e.label},i)}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const _x="https://entity.api.hubmapconsortium.org/entities/",_W=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),lMe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},yx={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford"},Wt=function(){const n={};return Object.entries(fW).forEach(([e,t])=>n[e]=t.id),n}(),uMe={AO:[Wt.body,Wt.heart,Wt.aorta],BL:[Wt.body,Wt.urinary_bladder],BD:[Wt.body,Wt.pelvis,Wt.blood],BM:[Wt.body,Wt.pelvis,Wt.bone_marrow],BR:[Wt.body,Wt.brain],LB:[Wt.body,Wt.respiratory_system,Wt.lungs,Wt.left_bronchus],RB:[Wt.body,Wt.respiratory_system,Wt.lungs,Wt.right_bronchus],LE:[Wt.body,Wt.eye,Wt.eye_left],RE:[Wt.body,Wt.eye,Wt.eye_right],LF:[Wt.body,Wt.fallopian_tube,Wt.fallopian_tube_left],RF:[Wt.body,Wt.fallopian_tube,Wt.fallopian_tube_right],HT:[Wt.body,Wt.heart],LK:[Wt.body,Wt.kidney,Wt.kidney_left],RK:[Wt.body,Wt.kidney,Wt.kidney_right],LI:[Wt.body,Wt.large_intestine,Wt.colon],LV:[Wt.body,Wt.liver],LL:[Wt.body,Wt.respiratory_system,Wt.lungs,Wt.left_lung],LN:[Wt.body,Wt.knee,Wt.knee_left],RL:[Wt.body,Wt.respiratory_system,Wt.lungs,Wt.right_lung],RN:[Wt.body,Wt.knee,Wt.knee_right],LY:[Wt.body,Wt.lymph_node,Wt.mesenteric_lymph_node],LO:[Wt.body,Wt.ovary,Wt.ovary_left],RO:[Wt.body,Wt.ovary,Wt.ovary_right],PA:[Wt.body,Wt.pancreas],PL:[Wt.body],SI:[Wt.body,Wt.small_intestine],SK:[Wt.body,Wt.skin],SP:[Wt.body,Wt.spleen],ST:[Wt.body],TH:[Wt.body,Wt.thymus],TR:[Wt.body,Wt.respiratory_system,Wt.lungs,Wt.trachea],UR:[Wt.body,Wt.ureter],UT:[Wt.body,Wt.uterus],OT:[Wt.body]},yW={"@base":"http://purl.org/ccf/latest/ccf-entity.owl#","@vocab":"http://purl.org/ccf/latest/ccf-entity.owl#",ccf:"http://purl.org/ccf/latest/ccf.owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",label:"rdfs:label",description:"rdfs:comment",link:{"@id":"rdfs:seeAlso","@type":"@id"},samples:{"@reverse":"has_donor"},sections:{"@id":"has_tissue_section","@type":"@id"},datasets:{"@id":"has_dataset","@type":"@id"},rui_location:{"@id":"has_spatial_entity","@type":"@id"},ontologyTerms:{"@id":"has_ontology_term","@type":"@id"},thumbnail:{"@id":"has_thumbnail"}};class fMe{constructor(e,t="",i="",r){var s,o;if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const c=this.data.descendants||[],d=(this.data.ancestors||[]).find(We=>"Donor"===We.entity_type);this.donor=this.getDonor(d,i);const f=this.getRuiLocation(e,this.donor);f?this.rui_location=f:this.bad=!0;const p=new Date(e.last_modified_timestamp).toLocaleDateString(),g=yx[e.group_uuid]||e.group_name,_=e.created_by_user_displayname;this["@id"]=_x+e.uuid,this.label=`Registered ${p}, ${_}, ${g}`,this.link=`${i}browse/sample/${e.uuid}`;const C={},b=[];this.sections=b;const H=[];this.datasets=H;for(const We of c.filter(dt=>"Sample"===dt.entity_type)){const dt=this.getSection(We,e,i);C[We.submission_id]=dt,b.push(dt),dt.section_number=null!==(s=dt.section_number)&&void 0!==s?s:b.length}for(const We of c)if("Dataset"===We.entity_type){const dt=this.getDataset(We,t,i,r),Mt=(0,mi.get)(We,["ingest_metadata","metadata","tissue_id"]);C[Mt]?null===(o=C[Mt].datasets)||void 0===o||o.push(dt):H.push(dt)}const z=null!=f?f:{},he=`${z.x_dimension} x ${z.y_dimension} x ${z.z_dimension} ${z.dimension_units}`;this.section_count=z.slice_count||b.length;const Ie=parseFloat((z.slice_thickness||(z.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=Ie;const Fe=z.dimension_units||"millimeter";this.section_units=Fe,this.description=`${he}, ${Ie} ${Fe}, ${e.specimen_type}, ${this.section_count} Sections`,b.forEach((We,dt)=>{We.description=`${z.x_dimension} x ${z.y_dimension} x ${Ie} ${Fe}, ${Ie} ${Fe}, ${We.description}`,We.section_number=dt+1})}getSection(e,t,i){const r=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":_x+e.uuid,"@type":"Sample",label:`Registered ${r}, ${e.created_by_user_displayname}, ${yx[e.group_uuid]||e.group_name}`,description:`${t.specimen_type}`,link:`${i}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",i="",r){var s;const o=new Date(e.last_modified_timestamp).toLocaleDateString(),a=yx[e.group_uuid]||e.group_name,l=e.created_by_user_displayname,c=[...e.data_types,(0,mi.get)(e,["ingest_metadata","metadata","assay_type"],"")],d=c.join("|").toLowerCase();let f,p="assets/icons/ico-unknown.svg";return-1!==d.indexOf("10x")?(f="10x",p="assets/icons/ico-bulk-10x.svg"):-1!==d.indexOf("af")?(f="AF",p="assets/icons/ico-spatial-af.svg"):-1!==d.indexOf("codex")?(f="CODEX",p="assets/icons/ico-spatial-codex.svg"):-1!==d.indexOf("imc")?(f="IMC",p="assets/icons/ico-spatial-imc.svg"):-1!==d.indexOf("lc")&&-1===d.indexOf("af")?(f="LC",p="assets/icons/ico-bulk-lc.svg"):f=-1!==d.indexOf("maldi")?"MALDI":-1!==d.indexOf("pas")?"PAS":"OTHER",p=null!==(s=this.getDatasetThumbnail(e,t,r))&&void 0!==s?s:p,{"@id":_x+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${l}, ${a}`,description:`Data/Assay Types: ${c.join(", ")}`,link:`${i}browse/dataset/${e.uuid}`,technology:f,thumbnail:p}}getDatasetThumbnail(e,t,i){if(e.thumbnail_file){const r=e.thumbnail_file;return`${t}/${r.file_uuid}/${r.filename}`+(i?`?token=${i}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const r=(0,mi.get)(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>_W.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${t}/${e.uuid}/${s.rel_path}`+(i?`?token=${i}`:""));if(r.length>0){const s=r[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(_W.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const r=lMe[e.hubmap_id];if(r)return`assets/thumbnails/TMC-Florida/${r}`}}getDonor(e,t){const i=(e.description||"").toLowerCase();let r;i.includes("female")?r="Female":i.includes("male")&&(r="Male");const s=i.match(/age ([0-9]+)/);let o,a;s&&(o=(0,mi.toNumber)(s[1]));for(const p of(0,mi.get)(e,"metadata.organ_donor_data",[]))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?r="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?r="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?o=(0,mi.toNumber)(p.data_value):"Body mass index"===p.preferred_term&&(a=(0,mi.toNumber)(p.data_value));let l="";r&&o&&(l+=`${r}, Age ${o}`,a&&(l+=`, BMI ${a.toFixed(1)}`));const c=new Date(e.last_modified_timestamp).toLocaleDateString(),d=yx[e.group_uuid]||e.group_name;return{"@id":_x+e.uuid,"@type":"Donor",label:l,description:`Entered ${c}, ${e.created_by_user_displayname}, ${d}`,link:`${t}browse/donor/${e.uuid}`,age:o,sex:r,bmi:a,consortium_name:"HuBMAP",provider_name:d,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){var i;const s=(e.ancestors||[]).find(c=>"Sample"===c.entity_type&&"organ"===c.specimen_type),o=uMe[null==s?void 0:s.organ]||[Wt.body];let a,l=e.rui_location;if(l&&("string"==typeof l&&(l=JSON.parse(l)),l.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):l["@id"]&&(a=l)),a){a.ccf_annotations=o.concat(a.ccf_annotations||[]);const c=null!==(i=(0,mi.get)(a,["placement","target"]))&&void 0!==i?i:"";c.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")&&(0,mi.set)(a,["placement","target"],c.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")),("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===c||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===c)&&(0,mi.set)(a,["placement","target"],"Male"===t.sex?c.replace("#VH","#VHM")+"_Patch":c.replace("#VH","#VHF")+"_Patch")}return a}getTissueBlock(){return(0,mi.omit)(Object.assign({},this),["data","bad","donor"])}toJsonLd(){return Object.assign(Object.assign({},this.donor),{samples:[this.getTissueBlock()]})}}const gMe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors","descendants","rui_location","specimen_type"],mMe={exists:{field:"rui_location"}};function vW(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:null!=t?t:mMe,_source:{includes:gMe}})}function SP(n,e){return Zi(this,void 0,void 0,function*(){try{const t=yield fetch(n,e);return t.ok?yield t.json():void 0}catch(t){return}})}function bW(n,e,t,i,r="",s=""){return Zi(this,void 0,void 0,function*(){let o;if("static"===e?o=yield SP(n):"search-api"===e&&(o=yield function(n,e,t){return Zi(this,void 0,void 0,function*(){const r=function(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),s=vW(0,50,t),o=yield SP(n,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=50)return o;const l=[];for(let f=50;f<a;f+=50)l.push(SP(n,{method:"POST",headers:r,body:vW(f,50,t)}));const c=yield Promise.all(l);if(c.some(f=>!f))return;const d=c.map(f=>f.hits.hits);return Object.assign(Object.assign({},o),{hits:Object.assign(Object.assign({},o.hits),{hits:o.hits.hits.concat(...d)})})})}(n,i,t)),o)return function(n,e="",t="",i,r=!1){const o={},a=(0,mi.get)(n,"hits.hits",[]).map(c=>(0,mi.get)(c,"_source",{})).map(c=>new fMe(c,e,t,i).toJsonLd());for(const c of a){const d=c["@id"];o[d]?o[d].samples.push(c.samples[0]):o[d]=c}const l=Object.values(o);return r&&(function(n){let e=[],t=0;for(const i of n.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(c=>c["@id"]===o)&&(r[s].deleteMe=!0,t++)}i.samples=r.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(l),console.log(l.map(c=>Object.assign({"@context":yW},c)))),{"@context":yW,"@graph":l}}(o,r,s,i);console.warn(`Unable to load ${n} as HuBMAP Data`)})}function vx(n,e,t){var i;const r=new Map,s=new Set;n.some(l=>{var c;return e.has(l.subject.id)&&(s.add(l.object.id),r.has(l.object.id)?null===(c=r.get(l.object.id))||void 0===c||c.push(l.subject.id):r.set(l.object.id,[l.subject.id])),!1},null,_i.donor,null,null);const o=t(s),a=new Set;for(const l of o)for(const c of null!==(i=r.get(l))&&void 0!==i?i:[])a.add(c);return a}function hb(n,e){return t=>n.has(t.id)?e.add(t.id):void 0}const PMe={[cr.ontologyNode.label.id]:"label",[cr.ontologyNode.parent.id]:"parent",[cr.ontologyNode.synonymLabels.id]:"synonymLabels"};function FMe(n,e){const t=ki.DataFactory.namedNode(e),i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""};return n.some(r=>{const s=PMe[r.predicate.id];if(s){const o="Literal"===r.object.termType?(0,ph.fromRdf)(r.object):r.object.id;"synonymLabels"===s?i.synonymLabels.push(o):(0,mi.set)(i,s,o)}return!1},t,null,null,null),i.children=n.getSubjects(cr.ontologyNode.children,t,null).map(r=>r.id),i}const bx={[_i.label.id]:"label",[_i.description.id]:"description",[_i.link.id]:"link"},kMe=Object.assign(Object.assign({},bx),{[_i.providerName.id]:"providerName"}),BMe=Object.assign(Object.assign({},bx),{[_i.technology.id]:"technology",[_i.thumbnail.id]:"thumbnail"}),jMe=Object.assign(Object.assign({},bx),{[_i.sampleType.id]:"sampleType",[_i.sectionNumber.id]:"sectionNumber",[_i.datasets.id]:"datasets"}),VMe=Object.assign(Object.assign({},bx),{[_i.sampleType.id]:"sampleType",[_i.sectionCount.id]:"sectionCount",[_i.sectionSize.id]:"sectionSize",[_i.sectionUnits.id]:"sectionUnits",[_i.donor.id]:"donor",[_i.spatialEntity.id]:"spatialEntityId",[_i.sections.id]:"sections",[_i.datasets.id]:"datasets"}),zMe=(0,mi.memoize)(function(n,e){const t={"@id":e,"@type":"Donor"};return n.some(i=>{const r=kMe[i.predicate.id];if(r){const s="Literal"===i.object.termType?(0,ph.fromRdf)(i.object):i.object.id;(0,mi.set)(t,r,s)}return!1},ki.DataFactory.namedNode(e),null,null,null),t},(n,e)=>e);function wW(n,e){const t={"@id":e,"@type":"Dataset"};return n.some(i=>{const r=BMe[i.predicate.id];if(r){const s="Literal"===i.object.termType?(0,ph.fromRdf)(i.object):i.object.id;(0,mi.set)(t,r,s)}return!1},ki.DataFactory.namedNode(e),null,null,null),t}const $Me=(0,mi.memoize)(function(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};return n.some(i=>{const r=VMe[i.predicate.id];if(r){const s="Literal"===i.object.termType?(0,ph.fromRdf)(i.object):i.object.id;if("sections"===r){const o=function(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};return n.some(i=>{const r=jMe[i.predicate.id];if(r){const s="Literal"===i.object.termType?(0,ph.fromRdf)(i.object):i.object.id;if("datasets"===r){const o=wW(n,s);t[r].push(o)}else(0,mi.set)(t,r,s)}return!1},ki.DataFactory.namedNode(e),null,null,null),t}(n,s);t[r].push(o)}else if("datasets"===r){const o=wW(n,s);t[r].push(o)}else"donor"===r?t[r]=zMe(n,s):(0,mi.set)(t,r,s)}return!1},ki.DataFactory.namedNode(e),null,null,null),t},(n,e)=>e),WMe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class qMe{constructor(e=WMe){this.options=e,this.store=new ki.Store(void 0,{factory:ki.DataFactory}),this.graph=new gW(this),this.scene=new mW(this)}connect(e,t=!1){return Zi(this,void 0,void 0,function*(){return e&&(this.options=e),this.initializing||(this.initializing=t?this.cachedConnect():this.doConnect()),yield this.initializing,this.store.size>0})}cachedConnect(){return Zi(this,void 0,void 0,function*(){const e=(new Date).getTime(),t="ccf-database.last_modified",i="ccf-database",r=yield dW(t).catch(()=>{});let s;r&&e-new Date(+r).getTime()>36e5?yield function(n,e=dc()){return e("readwrite",t=>(n.forEach(i=>t.delete(i)),ou(t.transaction)))}([i,t]).catch(()=>{}):s=yield dW(i).catch(()=>{}),s?yield this.deserialize(s):(yield this.doConnect(),function(n,e=dc()){return e("readwrite",t=>(n.forEach(i=>t.put(i[1],i[0])),ou(t.transaction)))}([[i,this.serialize()],[t,""+e]]).catch(()=>{}))})}doConnect(){var e,t;return Zi(this,void 0,void 0,function*(){const i=[],r=null!==(t=null===(e=this.options.dataSources)||void 0===e?void 0:e.concat())&&void 0!==t?t:[],s=this.options.ccfOwlUrl;if(s.startsWith("{"))this.store=(0,ki.deserializeN3Store)(s,ki.DataFactory);else if(s.endsWith(".n3store.json")){const o=yield fetch(s).then(a=>a.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(this.store=(0,ki.deserializeN3Store)(o,ki.DataFactory))}else(null==s?void 0:s.length)>0&&r.push(s);this.options.hubmapDataUrl&&(this.options.hubmapDataUrl.endsWith("jsonld")?r.push(this.options.hubmapDataUrl):i.push(bW(this.options.hubmapDataUrl,this.options.hubmapDataService,this.options.hubmapQuery,this.options.hubmapToken,this.options.hubmapAssetsUrl,this.options.hubmapPortalUrl).then(o=>{if(o)return this.addDataSources([o])}))),i.push(this.addDataSources(r)),yield Promise.all(i),yield this.synchronize()})}addDataSources(e,t){return Zi(this,void 0,void 0,function*(){const i=null!=t?t:this.store;return yield Promise.all(e.map(r=>Zi(this,void 0,void 0,function*(){"string"==typeof r?r.endsWith("jsonld")?yield(0,ki.addJsonLdToStore)(r,i):r.endsWith("n3")?yield(0,ki.addN3ToStore)(r,i):r.endsWith("rdf")||r.endsWith("owl")||r.endsWith("xml")?yield(0,ki.addRdfXmlToStore)(r,i):yield(0,ki.addJsonLdToStore)(r,i):yield(0,ki.addJsonLdToStore)(r,i)}))),this})}synchronize(){return Zi(this,void 0,void 0,function*(){return yield new Promise(e=>{setTimeout(e,500)}),this.graph.createGraph(),this})}serialize(){return(0,ki.serializeN3Store)(this.store)}deserialize(e){return Zi(this,void 0,void 0,function*(){this.store=(0,ki.deserializeN3Store)(e,ki.DataFactory),this.graph=new gW(this),this.scene=new mW(this),yield new Promise(t=>{setTimeout(t,10)})})}getIds(e={}){return function(n,e){var t,i,r,s,o;let a=function(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),_i.spatialEntity,null,null),e}(n);if(a.size>0&&(a=function(n,e,t=!0){const i=new Set;if(n.forSubjects(hb(e,i),_i.spatialEntity,null,null),!t){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(n,a)),a.size>0&&("Male"===e.sex||"Female"===e.sex)){const l=e.sex;a=vx(n,a,c=>function(n,e,t){const i=new Set;return n.forSubjects(hb(e,i),_i.sex,_i[t],null),i}(n,c,l))}if(a.size>0&&(null===(t=e.tmc)||void 0===t?void 0:t.length)>0&&(a=vx(n,a,l=>function(n,e,t){const i=new Set;for(const r of t){const s=ki.DataFactory.literal(r);n.forSubjects(hb(e,i),_i.providerName,s,null)}return i}(n,l,e.tmc))),a.size>0&&(null===(i=e.technologies)||void 0===i?void 0:i.length)>0&&(a=function(n,e,t){var i;const r=new Map,s=new Set,o=new Set;n.some(c=>(e.has(c.subject.id)&&o.add(c.object.id),!1),null,_i.sections,null,null),n.some(c=>{var d;return(e.has(c.subject.id)||o.has(c.subject.id))&&(s.add(c.object.id),r.has(c.object.id)?null===(d=r.get(c.object.id))||void 0===d||d.push(c.subject.id):r.set(c.object.id,[c.subject.id])),!1},null,_i.datasets,null,null);const a=t(s),l=new Set;for(const c of a)for(const d of null!==(i=r.get(c))&&void 0!==i?i:[])l.add(d);return l}(n,a,l=>function(n,e,t){const i=new Set;for(const r of t){const s=ki.DataFactory.literal(r);n.forSubjects(hb(e,i),_i.technology,s,null)}return i}(n,l,e.technologies))),a.size>0&&(null===(r=e.ontologyTerms)||void 0===r?void 0:r.length)>0&&(a=function(n,e,t){var i;const r=new Map,s=new Set;n.some(l=>{var c;return e.has(l.subject.id)&&(s.add(l.object.id),r.has(l.object.id)?null===(c=r.get(l.object.id))||void 0===c||c.push(l.subject.id):r.set(l.object.id,[l.subject.id])),!1},null,_i.spatialEntity,null,null);const o=t(s),a=new Set;for(const l of o)for(const c of null!==(i=r.get(l))&&void 0!==i?i:[])a.add(c);return a}(n,a,l=>function(n,e,t){const i=new Set;for(const r of t){const s=ki.DataFactory.namedNode(r);n.forSubjects(hb(e,i),cr.spatialEntity.ccf_annotations,s,null)}return i}(n,l,e.ontologyTerms))),a.size>0&&2===(null===(s=e.ageRange)||void 0===s?void 0:s.length)&&(0,mi.isFinite)(e.ageRange[0])&&(0,mi.isFinite)(e.ageRange[1])){const l=Math.max(...e.ageRange),c=Math.min(...e.ageRange);1===c&&110===l||(a=vx(n,a,d=>function(n,e,t,i){const r=new Set;return n.some(s=>{if(e.has(s.subject.id)){const o=(0,ph.fromRdf)(s.object);o>=t&&o<=i&&r.add(s.subject.id)}return!1},null,_i.age,null,null),r}(n,d,c,l)))}if(a.size>0&&2===(null===(o=e.bmiRange)||void 0===o?void 0:o.length)&&(0,mi.isFinite)(e.bmiRange[0])&&(0,mi.isFinite)(e.bmiRange[1])){const l=Math.max(...e.bmiRange),c=Math.min(...e.bmiRange);13===c&&83===l||(a=vx(n,a,d=>function(n,e,t,i){const r=new Set;return n.some(s=>{if(e.has(s.subject.id)){const o=(0,ph.fromRdf)(s.object);o>=t&&o<=i&&r.add(s.subject.id)}return!1},null,_i.bmi,null,null),r}(n,d,c,l)))}return a}(this.store,e)}get(e){return this.store.getQuads(ki.DataFactory.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>oMe(this.store,t))}getDatasetTechnologyNames(){return Zi(this,void 0,void 0,function*(){return function(n){const e=new Set;return n.some(t=>(e.add(t.object.value),!1),null,_i.technology,null,null),Array.from(e).sort()}(this.store)})}getProviderNames(){return Zi(this,void 0,void 0,function*(){return function(n){const e=new Set;return n.some(t=>(e.add(t.object.value),!1),null,_i.providerName,null,null),Array.from(e).sort()}(this.store)})}getTissueBlockResults(e){return Zi(this,void 0,void 0,function*(){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>$Me(this.store,t))})}getAggregateResults(e){return Zi(this,void 0,void 0,function*(){return function(n,e){const t=new Set;e.some(l=>(n.has(l.subject.id)&&t.add(l.object.id),!1),null,_i.donor,null,null);const i=new Set;e.some(l=>(t.has(l.subject.id)&&i.add(l.object.id),!1),null,_i.providerUUID,null,null);const r=new Set;e.forSubjects(l=>{n.has(l.id)&&r.add(l.id)},_i.spatialEntity,null,null);const s=new Set;e.some(l=>(r.has(l.subject.id)&&s.add(l.object.id),!1),null,_i.sections,null,null);const o=new Set;return e.some(l=>{const c=l.subject;return(r.has(c.id)||s.has(c.id))&&o.add(l.object.id),!1},null,_i.datasets,null,null),Object.entries({"Tissue Data Providers":i.size,Donors:t.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([l,c])=>({label:l,count:c}))}(this.getIds(e),this.store)})}getOntologyTermOccurences(e){return Zi(this,void 0,void 0,function*(){return function(n,e){const t=new Map;e.some(r=>(n.has(r.subject.id)&&(t.has(r.object.id)?t.get(r.object.id).push(r.subject.id):t.set(r.object.id,[r.subject.id])),!1),null,_i.spatialEntity,null,null);const i={};return e.some(r=>{var s,o;if(t.has(r.subject.id)){const a=null!==(o=null===(s=t.get(r.subject.id))||void 0===s?void 0:s.length)&&void 0!==o?o:0;i[r.object.id]=a+(i[r.object.id]||0)}return!1},null,cr.spatialEntity.ccf_annotations,null,null),i}(this.getIds(e),this.store)})}getOntologyTreeModel(){return Zi(this,void 0,void 0,function*(){return function(n){const e={root:fW.body.id,nodes:{}},t=new Set;n.some(i=>(t.add(i.subject.id),t.add(i.predicate.id),!1),null,cr.ontologyNode.parent,null,null);for(const i of t)e.nodes[i]=FMe(n,i);return e}(this.store)})}getReferenceOrgans(){return Zi(this,void 0,void 0,function*(){return this.scene.getReferenceOrgans()})}getScene(e){return Zi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getScene(e)})}getReferenceOrganScene(e,t){return Zi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getReferenceOrganScene(e,t)})}}const YMe=["bodyCanvas"];let KMe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new hn,this.nodeDrag=new hn,this.nodeClick=new hn,this.nodeHoverStart=new hn,this.nodeHoverStop=new hn,this.initialized=new hn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){var i;this._scene=t,null===(i=this.bodyUI)||void 0===i||i.setScene(t)}get rotation(){return this._rotation}set rotation(t){var i;this._rotation=t,null===(i=this.bodyUI)||void 0===i||i.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){var i;this._rotationX=t,null===(i=this.bodyUI)||void 0===i||i.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){var i;this._zoom=t,null===(i=this.bodyUI)||void 0===i||i.setZoom(t)}get target(){return this._target}set target(t){var i;this._target=t,null===(i=this.bodyUI)||void 0===i||i.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t;return Zi(this,void 0,void 0,function*(){const i=this.bodyCanvas.nativeElement,r=new uye({id:"body-ui",canvas:i,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),this.bodyUI=r,window.bodyUI=r,(null===(t=this.scene)||void 0===t?void 0:t.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))],this.initialized.emit()})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yn({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(t,i){if(1&t&&Mr(YMe,5,En),2&t){let r;fi(r=pi())&&(i.bodyCanvas=r.first)}},hostVars:2,hostBindings:function(t,i){2&t&&Oc(i.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(t,i){1&t&&xi(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),XMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[Kr]]}),n})();new zt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const SW=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_54449"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/FMA_7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/FMA_7213"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));SW.filter(n=>!0!==n.disabled);let wm=(()=>{let n=class extends QAe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(Wi(n=>null!=n),Na(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(U6(...t),qu(),Na(1))}getOption(...t){const i=this.getPathKey(t);if(this.optionCache.has(i))return this.optionCache.get(i);const r=this.config$.pipe(U6(...t),qu(),Na(1));return this.optionCache.set(i,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}};return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gi(n)))(i||n)}}(),n.\u0275prov=$e({token:n,factory:n.\u0275fac}),Qr([KG()],n.prototype,"config$",null),n=Qr([YAe(),lve({name:"globalConfig",defaults:null})],n),n})();!function(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();class CW extends class{getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,t){return this.forwardCall("getReferenceOrganScene",e,t)}}{forwardCall(e,...t){return this.impl$.pipe(Xr(i=>i[e](...t)))}}let xW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const CP=new ee,wx={cacheBusterObserver:CP},fb={cacheBusterObserver:CP,maxCacheCount:4};function AW(n,e,t){return n?{min:n[0]>=e?n[0]:void 0,max:n[1]<=t?n[1]:void 0}:void 0}function TW(n){return n.map(e=>{var t;return Object.assign(Object.assign({},e),{transformMatrix:new $n(null!==(t=e.transformMatrix)&&void 0!==t?t:[])})})}let DIe=(()=>{class n{constructor(t,i){this.api=t,this.globalConfig=i,i.getOption("hubmapToken").subscribe(CP)}getProviderNames(){return this.doRequest(t=>this.api.providerNames(t))}getDatasetTechnologyNames(){return this.doRequest(t=>this.api.technologyNames(t))}getOntologyTreeModel(){return this.doRequest(t=>this.api.ontologyTreeModel(t),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(t=>this.api.referenceOrgans(t),void 0,{},n=>n)}getTissueBlockResults(t){return this.doRequest(i=>this.api.tissueBlocks(i),t,{},n=>n)}getAggregateResults(t){return this.doRequest(i=>this.api.aggregateResults(i),t)}getOntologyTermOccurences(t){return this.doRequest(i=>this.api.ontologyTermOccurences(i),t)}getScene(t){return this.doRequest(i=>this.api.scene(i),t,{},TW)}getReferenceOrganScene(t,i){return this.doRequest(r=>this.api.referenceOrganScene(r),i,{organIri:t},TW)}doRequest(t,i,r,s){const{api:o,globalConfig:a}=this,l=Object.assign(Object.assign({},function(n){var e,t;return{age:AW(null==n?void 0:n.ageRange,1,110),bmi:AW(null==n?void 0:n.bmiRange,13,83),sex:null===(t=null===(e=null==n?void 0:n.sex)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e),ontologyTerms:null==n?void 0:n.ontologyTerms,providers:null==n?void 0:n.tmc,technologies:null==n?void 0:n.technologies}}(i)),r);return a.getOption("remoteApiEndpoint").pipe(jr(1),lr(c=>o.configuration.basePath=c),Xr(()=>t(l)),me(c=>s?s(c):c))}}return n.\u0275fac=function(t){return new(t||n)(Me(uW),Me(wm))},n.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"}),Qr([sd(wx)],n.prototype,"getProviderNames",null),Qr([sd(wx)],n.prototype,"getDatasetTechnologyNames",null),Qr([sd(wx)],n.prototype,"getOntologyTreeModel",null),Qr([sd(wx)],n.prototype,"getReferenceOrgans",null),Qr([sd(fb)],n.prototype,"getTissueBlockResults",null),Qr([sd(fb)],n.prototype,"getAggregateResults",null),Qr([sd(fb)],n.prototype,"getOntologyTermOccurences",null),Qr([sd(fb)],n.prototype,"getScene",null),Qr([sd(fb)],n.prototype,"getReferenceOrganScene",null),n})(),MIe=(()=>{class n extends CW{constructor(t){super(),this.impl$=this.database$=t.config$.pipe(i=>i,Wi(i=>Object.keys(i).length>0),Xr(i=>function(n,e){return new F(t=>{let i,r;try{i=n()}catch(a){return void t.error(a)}try{r=e(i)}catch(a){return void t.error(a)}const o=(r?Pe(r):kc).subscribe(t);return()=>{o.unsubscribe(),i&&i.unsubscribe()}})}(()=>this.createDatabase(i),r=>this.connectDatabase(r,i))),me(i=>i.database),Na(1))}connectDatabase(t,i){return Zi(this,void 0,void 0,function*(){const r=!na();return yield t.database.connect(i,r),t})}}return n.\u0275fac=function(t){return new(t||n)(Me(wm))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),IIe=(()=>{class n extends MIe{createDatabase(t){return{database:new qMe(t),unsubscribe:()=>{}}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gi(n)))(i||n)}}(),n.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OIe=(()=>{class n extends CW{constructor(t,i){super(),this.impl$=t.config$.pipe(r=>r,me(r=>this.selectToken(r)),qu(),me(r=>i.get(r)),Na(1))}}return n.\u0275fac=function(t){return new(t||n)(Me(wm),Me(Vn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})(),RIe=(()=>{class n{constructor(t){this.source=t,this.organs=SW}getOrganInfo(t,i,r="Female"){let s=this.organs.find(a=>a.id===t);if(!s)return nn(void 0);const o=s.organ;return s.disabled&&(s=this.organs.find(a=>!a.disabled&&a.organ===o)),(null==s?void 0:s.side)&&i&&s.side!==i&&(s=this.organs.find(a=>!a.disabled&&a.organ===o&&a.side===i)),nn(s)}getOrgan(t,i="Both"){return this.source.getReferenceOrgans().pipe(me(r=>r.find(s=>s.representation_of===t.id&&("Both"===i||s.sex===i))))}getOrganScene(t,i="Female"){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:i}):nn([])}getOrganStats(t,i="Female"){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:i}):nn([])}getBlocks(t,i="Female"){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:i}):nn([])}}return n.\u0275fac=function(t){return new(t||n)(Me(xW))},n.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NIe=["thumbContainer"],PIe=["toggleBar"],FIe=["input"],LIe=function(n){return{enterDuration:n}},kIe=["*"],BIe=new zt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let jIe=0;const VIe={provide:Fa,useExisting:pe(()=>DW),multi:!0};class UIe{constructor(e,t){this.source=e,this.checked=t}}const zIe=yN(Wv(_N(xC(class{constructor(n){this._elementRef=n}}))));let DW=(()=>{class n extends zIe{constructor(t,i,r,s,o,a){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++jIe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new hn,this.toggleChange=new hn,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(t){this._required=qi(t)}get checked(){return this._checked}set checked(t){this._checked=qi(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new UIe(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(De(En),De(Qu),De(is),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(Ab(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(ts(),n)}("tabindex"),De(BIe),De(lc,8))},n.\u0275cmp=yn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&(Mr(NIe,5),Mr(PIe,5),Mr(FIe,5)),2&t){let r;fi(r=pi())&&(i._thumbEl=r.first),fi(r=pi())&&(i._thumbBarEl=r.first),fi(r=pi())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,i){2&t&&(Au("id",i.id),$i("tabindex",i.disabled?null:-1)("aria-label",null)("aria-labelledby",null),Ai("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Yn([VIe]),Mn],ngContentSelectors:kIe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(function(n){const e=Bt()[16][6];if(!e.projection){const i=e.projection=vc(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?E7(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),Pt(0,"label",0,1),Pt(2,"div",2,3),Pt(4,"input",4,5),Bn("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),Ft(),Pt(6,"div",6,7),xi(8,"div",8),Pt(9,"div",9),xi(10,"div",10),Ft(),Ft(),Ft(),Pt(11,"span",11,12),Bn("cdkObserveContent",function(){return i._onLabelTextChange()}),Pt(13,"span",13),Ti(14,"\xa0"),Ft(),function(n,e=0,t){const i=Bt(),r=hi(),s=Bd(r,20+n,16,null,t||null);null===s.projection&&(s.projection=e),us(),64!=(64&s.flags)&&function(n,e,t){R_(e[11],0,e,t,v0(n,t,e),S0(t.parent||e[6],t,e))}(r,i,s)}(15),Ft(),Ft()),2&t){const r=Qp(1),s=Qp(12);$i("for",i.inputId),Kt(2),Ai("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),Kt(2),on("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),$i("name",i.name)("aria-checked",i.checked.toString())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),Kt(5),on("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function(n,e,t,i){return $k(Bt(),bs(),n,e,t,i)}(18,LIe,i._noopAnimations?0:150))}},directives:[lm,x8],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),MW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})(),$Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[MW,TC,gr,BR],MW,gr]}),n})(),WIe=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new hn}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yn({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(t,i){2&t&&Oc(i.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],[1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(t,i){if(1&t){const r=Vl();Pt(0,"span",0),Bn("click",function(){Tr(r);const o=Qp(3);return i.left||o.toggle(),i.updateToggle(!0)}),Ti(1),Ft(),Pt(2,"mat-slide-toggle",1,2),Bn("change",function(o){return i.updateToggle(!o.checked)}),Ft(),Pt(4,"span",0),Bn("click",function(){Tr(r);const o=Qp(3);return i.left&&o.toggle(),i.updateToggle(!1)}),Ti(5),Ft()}2&t&&(Ai("disabled",i.disabled)("highlighted",i.left),Kt(1),Ts(i.labels[0].charAt(0).toUpperCase()+i.labels[0].slice(1)),Kt(1),on("disabled",i.disabled)("checked",!i.left),Kt(2),Ai("disabled",i.disabled)("highlighted",!i.left),Kt(1),Ts(i.labels[1].charAt(0).toUpperCase()+i.labels[1].slice(1)))},directives:[DW],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mat-slide-toggle-bar{background-color:#43476580}[_nghost-%COMP%]     .slider .mat-slide-toggle-thumb{background-color:#434765}"],changeDetection:0}),n})();const qIe=["bodyUI"],YIe=function(){return["Male","Female"]},KIe=function(){return["Left","Right"]};let XIe=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new hn,this.sideChange=new hn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){var t,i,r,s;const o=new Set(null!==(i=null===(t=this.filter)||void 0===t?void 0:t.tmc)&&void 0!==i?i:[]);this.filteredBlocks=null!==(s=null===(r=this.blocks)||void 0===r?void 0:r.filter(a=>o.has(a.donor.providerName)).map(a=>a["@id"]))&&void 0!==s?s:[],this.bodyUI.scene=this.bodyUI.scene.map(a=>{var l;return Object.assign(Object.assign({},a),{color:a.entityId&&this.highlightedNodeId===a["@id"]?[30,136,229,255]:this.filteredBlocks.includes(null!==(l=a.entityId)&&void 0!==l?l:"")?[173,255,47,229.5]:[255,255,255,229.5]})})}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:i}=this;if(i){const{x_dimension:r,y_dimension:s,z_dimension:o}=i;t.rotation=t.rotationX=0,t.bounds={x:1.25*r/1e3,y:1.25*s/1e3,z:1.25*o/1e3},t.target=[r/1e3/2,s/1e3/2,o/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"]}}return n.\u0275fac=function(t){return new(t||n)(De(hx))},n.\u0275cmp=yn({type:n,selectors:[["ccf-organ"]],viewQuery:function(t,i){if(1&t&&Mr(qIe,7),2&t){let r;fi(r=pi())&&(i.bodyUI=r.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[Ui],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(t,i){1&t&&(Pt(0,"ccf-body-ui",0,1),Bn("nodeClick",function(s){return i.nodeClicked(s)})("initialized",function(){return i.zoomToFitOrgan()}),Ft(),Pt(2,"div",2),Pt(3,"ccf-slide-toggle",3),Bn("valueChange",function(s){return i.updateSex(s)}),Ft(),Pt(4,"ccf-slide-toggle",3),Bn("valueChange",function(s){return i.updateSide(s)}),Ft(),Ft()),2&t&&(on("scene",i.scene)("interactive",!0),Kt(3),on("labels",Lw(8,YIe))("value",i.sex)("hidden",!i.sex),Kt(1),on("labels",Lw(9,KIe))("value",i.side)("hidden",!i.side))},directives:[KMe,WIe],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),n})();function QIe(n,e){if(1&n&&(Pt(0,"div",3),Pt(1,"div",4),Ti(2),Ft(),Pt(3,"div",5),Ti(4),Ft(),Ft()),2&n){const t=e.$implicit;Kt(2),Ts(t.count),Kt(2),Ts(t.label)}}let ZIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yn({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(t,i){1&t&&(Pt(0,"div",0),Pt(1,"div",1),Ti(2),Ft(),Ei(3,QIe,5,2,"div",2),Ft()),2&t&&(Kt(2),Nc(" ",i.statsLabel," "),Kt(1),on("ngForOf",i.stats))},directives:[Wd],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),n})();function JIe(n,e){if(1&n){const t=Vl();Pt(0,"div",6),Pt(1,"div",7),Pt(2,"div",8),Ti(3),Ft(),Pt(4,"div",9),Bn("click",function(){const s=Tr(t).$implicit;return Si().goToURL(s.buttonUrl)}),Ti(5),Ft(),Ft(),Ft()}if(2&n){const t=e.$implicit;Kt(3),Ts(t.body),Kt(1),on("gaLabel",t.buttonUrl),Kt(1),Nc(" ",t.buttonTitle,"")}}function eOe(n,e){if(1&n){const t=Vl();Pt(0,"div",10),Bn("click",function(){const s=Tr(t).$implicit;return Si().goToURL(s.buttonUrl)}),Ti(1),Ft()}if(2&n){const t=e.$implicit;on("gaLabel",t.buttonUrl),Kt(1),Ts(t.buttonTitle)}}let tOe=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the CCF Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the CCF Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"CCF Portal",buttonUrl:"https://hubmapconsortium.github.io/ccf/"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.biorxiv.org/content/10.1101/2021.05.31.446440v2"}]}goToURL(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yn({type:n,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(t,i){1&t&&(Pt(0,"div",0),Ei(1,JIe,6,3,"div",1),Ft(),Pt(2,"div",2),Pt(3,"div",3),Ti(4,"Common Coordinate Framework (CCF) Deep Dive"),Ft(),Pt(5,"div",4),Ei(6,eOe,2,2,"div",5),Ft(),Ft()),2&t&&(Kt(1),on("ngForOf",i.linkCards),Kt(5),on("ngForOf",i.deepDives))},directives:[rW,Wd,sW],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),n})();const nOe=["left"],iOe=["right"],rOe=function(){return[]},sOe=[{color:[0,0,0,0],opacity:.001}];let oOe=(()=>{class n{constructor(t,i,r){this.ga=i,this.configState=r,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(me(s=>({tmc:s}))),this.latestConfig={},this.organInfo$=r.config$.pipe(lr(s=>this.latestConfig=s),Xr(s=>{var o,a,l;return t.getOrganInfo(null!==(o=s.organIri)&&void 0!==o?o:"",null===(l=null===(a=s.side)||void 0===a?void 0:a.toLowerCase)||void 0===l?void 0:l.call(a),s.sex)}),lr(s=>this.logOrganLookup(s)),lr(s=>this.latestOrganInfo=s),Na(1)),this.organ$=this.organInfo$.pipe(Xr(s=>s?t.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):nn(void 0)),lr(s=>{var o;if(s&&this.latestOrganInfo){const a=(null===(o=this.latestOrganInfo)||void 0===o?void 0:o.hasSex)?s.sex:void 0;a!==this.latestConfig.sex&&this.updateInput("sex",a),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),Na(1)),this.scene$=this.organ$.pipe(Xr(s=>s&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,s.sex):nn(sOe))),this.stats$=this.organ$.pipe(Xr(s=>s&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,s.sex):nn([]))),this.statsLabel$=this.organ$.pipe(me(s=>this.makeStatsLabel(this.latestOrganInfo,null==s?void 0:s.sex)),function(...n){const e=n[n.length-1];return Te(e)?(n.pop(),t=>OC(n,t,e)):t=>OC(n,t)}("Loading...")),this.blocks$=this.organ$.pipe(Xr(s=>s&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,s.sex):nn([])))}ngAfterViewInit(){const{left:t,right:i}=this;t.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(t,i){this.configState.patchConfig({[t]:i})}makeStatsLabel(t,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const s=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;r=[i,t.organ,s]}return r.filter(s=>!!s).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}}return n.\u0275fac=function(t){return new(t||n)(De(RIe),De(hx),De(wm))},n.\u0275cmp=yn({type:n,selectors:[["ccf-root"]],viewQuery:function(t,i){if(1&t&&(Mr(nOe,7,En),Mr(iOe,7,En)),2&t){let r;fi(r=pi())&&(i.left=r.first),fi(r=pi())&&(i.right=r.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(t,i){if(1&t&&(Pt(0,"div",0),Pt(1,"div",1,2),Pt(3,"ccf-organ",3),Bn("sexChange",function(s){return i.updateInput("sex",s)})("sideChange",function(s){return i.updateInput("side",s)}),dl(4,"async"),dl(5,"async"),dl(6,"async"),dl(7,"async"),dl(8,"async"),dl(9,"async"),Ft(),Ft(),Pt(10,"div",4,5),xi(12,"ccf-stats-list",6),dl(13,"async"),dl(14,"async"),xi(15,"ccf-link-cards"),Ft(),Ft()),2&t){let r;Kt(3),on("blocks",hl(4,8,i.blocks$))("filter",hl(5,10,i.filter$))("sex",hl(6,12,i.sex$))("side",hl(7,14,i.side$))("organ",hl(8,16,i.organ$))("scene",null!==(r=hl(9,18,i.scene$))&&void 0!==r?r:Lw(24,rOe)),Kt(9),on("statsLabel",hl(13,20,i.statsLabel$))("stats",hl(14,22,i.stats$))}},directives:[XIe,ZIe,tOe],pipes:[uE],styles:[".container[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),n})();function aOe(n,e){1&n&&xi(0,"ccf-root")}function lOe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){const i=XD.json(n);if(t(i))return i}else if(t(n))return n;throw new Error("Invalid data sources")}function cOe(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){if(!(null==n?void 0:n.startsWith("[")))return[n];{const i=XD.json(n);if(t(i))return i}}else if(t(n))return n;throw new Error("Invalid data sources")}let uOe=(()=>{class n extends _ee{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:Object.assign(Object.assign({},ff.dbOptions),globalThis.dbOptions),parse:{dataSources:lOe,highlightProviders:cOe,useRemoteApi:XD.boolean}}),this.sex="Female",this.side="Left"}}return n.\u0275fac=function(t){return new(t||n)(De(wm),De(is))},n.\u0275cmp=yn({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[Mn],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&Ei(0,aOe,1,0,"ccf-root",0),2&t&&on("ngIf",i.initialized)},directives:[Nu,oOe],encapsulation:2,changeDetection:0}),n})(),dOe=(()=>{class n extends OIe{selectToken(t){return t.useRemoteApi&&t.remoteApiEndpoint?DIe:IIe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Gi(n)))(i||n)}}(),n.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hOe=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[ls,Ua,HG,...t]}}}return n.\u0275fac=function(t){return new(t||n)(Me(ls,2),Me(Ua,2))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})();const Ex=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class gOe{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=If(this.action),i=function(n){return Ex(n.getHours(),2)+":"+Ex(n.getMinutes(),2)+":"+Ex(n.getSeconds(),2)+"."+Ex(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class mOe{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch(i){console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch(e){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const IW=new zt("NGXS_LOGGER_PLUGIN_OPTIONS");let _Oe=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new mOe(this._options),this._store=this._store||this._injector.get(oh);const s=new gOe(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(lr(o=>{s.completed(o)}),oc(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(Me(IW),Me(Vn))},n.\u0275prov=$e({token:n,factory:n.\u0275fac}),n})();const OW=new zt("LOGGER_USER_OPTIONS");function yOe(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let vOe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:eH,useClass:_Oe,multi:!0},{provide:OW,useValue:t},{provide:IW,useFactory:yOe,deps:[OW]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({}),n})();const bOe=[wm];let wOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[hOe.forRoot(),la.forRoot(bOe,{developmentMode:!ff.production}),vOe.forRoot({disabled:ff.production})]]}),n})(),EOe=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}}return n.\u0275fac=function(t){return new(t||n)(Me(n,12))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[{provide:xW,useExisting:dOe}],imports:[[uG,MDe.forRoot({gaToken:ff.googleAnalyticsToken,appName:"organ-info",projectName:"ccf",developmentMode:!ff.production}),kDe.forRoot(()=>new ub({basePath:ff.dbOptions.remoteApiEndpoint})),wOe]]}),n})(),SOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[Kr,$Ie]]}),n})(),COe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[Kr,XMe,SOe]]}),n})(),xOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[Kr,fx]]}),n})(),AOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({imports:[[Kr]]}),n})(),TOe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function(n,e){const t=function(n,e){return e.get(ll).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new dee(n,e.injector),r=function(n){const e={};return n.forEach(({propName:t,templateName:i})=>{e[function(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=t}),e}(t);class s extends fee{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:l})=>{if(!this.hasOwnProperty(l))return;const c=this[l];delete this[l],a.setInputValue(l,c)})}return this._ngElementStrategy}attributeChangedCallback(a,l,c,d){this.ngElementStrategy.setInputValue(r[a],c)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=function(n,e,t){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(r),t.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(uOe,{injector:this.injector});customElements.define("ccf-organ-info",t)}}return n.\u0275fac=function(t){return new(t||n)(Me(Vn))},n.\u0275mod=ln({type:n}),n.\u0275inj=vt({providers:[],imports:[[qD,EOe,xOe,AOe,COe]]}),n})();ff.production&&function(){if(T2)throw new Error("Cannot enable prod mode after platform setup.");A2=!1}(),PJ().bootstrapModule(TOe).catch(n=>console.error(n))},52:jt=>{function it(gt,J,xt,ut,Y,Ae,fe){try{var q=gt[Ae](fe),V=q.value}catch(L){return void xt(L)}q.done?J(V):Promise.resolve(V).then(ut,Y)}jt.exports=function(gt){return function(){var J=this,xt=arguments;return new Promise(function(ut,Y){var Ae=gt.apply(J,xt);function fe(V){it(Ae,ut,Y,fe,q,"next",V)}function q(V){it(Ae,ut,Y,fe,q,"throw",V)}fe(void 0)})}},jt.exports.default=jt.exports,jt.exports.__esModule=!0},948:jt=>{jt.exports=function(tt){return tt&&tt.__esModule?tt:{default:tt}},jt.exports.default=jt.exports,jt.exports.__esModule=!0},321:jt=>{function it(tt){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(jt.exports=it=function(J){return typeof J},jt.exports.default=jt.exports,jt.exports.__esModule=!0):(jt.exports=it=function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},jt.exports.default=jt.exports,jt.exports.__esModule=!0),it(tt)}jt.exports=it,jt.exports.default=jt.exports,jt.exports.__esModule=!0},82:jt=>{function it(tt){return Promise.resolve().then(()=>{var gt=new Error("Cannot find module '"+tt+"'");throw gt.code="MODULE_NOT_FOUND",gt})}it.keys=()=>[],it.resolve=it,it.id=82,jt.exports=it},521:()=>{},125:()=>{},307:()=>{}},jt=>{jt(jt.s=213)}]);