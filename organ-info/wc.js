(()=>{"use strict";var e,d={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={id:e,loaded:!1,exports:{}};return d[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=d,e=[],a.O=(n,r,u,l)=>{if(!r){var c=1/0;for(t=0;t<e.length;t++){for(var[r,u,l]=e[t],i=!0,f=0;f<r.length;f++)(!1&l||c>=l)&&Object.keys(a.O).every(b=>a.O[b](r[f]))?r.splice(f--,1):(i=!1,l<c&&(c=l));if(i){e.splice(t--,1);var o=u();void 0!==o&&(n=o)}}return n}l=l||0;for(var t=e.length;t>0&&e[t-1][2]>l;t--)e[t]=e[t-1];e[t]=[r,u,l]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={666:0};a.O.j=u=>0===e[u];var n=(u,l)=>{var f,o,[t,c,i]=l,s=0;for(f in c)a.o(c,f)&&(a.m[f]=c[f]);if(i)var _=i(a);for(u&&u(l);s<t.length;s++)a.o(e,o=t[s])&&e[o]&&e[o][0](),e[t[s]]=0;return a.O(_)},r=self.webpackChunkccf_ui=self.webpackChunkccf_ui||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[429],{138:()=>{!function(){"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const G=HTMLElement;window.HTMLElement=function(){return Reflect.construct(G,[],this.constructor)},HTMLElement.prototype=G.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,G)}()}()},142:()=>{!function(G,ne){"use strict";function he(){var e=Ge.splice(0,Ge.length);for(V=0;e.length;)e.shift().call(null,e.shift())}function ye(e,r){for(var i=0,h=e.length;i<h;i++)je(e[i],r)}function Ve(e){return function(r){L(r)&&(je(r,e),le.length&&ye(r.querySelectorAll(le),e))}}function Ie(e){var r=R.call(e,"is"),i=e.nodeName.toUpperCase(),h=Te.call(Ne,r?st+r.toUpperCase():Xe+i);return r&&-1<h&&!Ze(i,r)?-1:h}function Ze(e,r){return-1<le.indexOf(e+'[is="'+r+'"]')}function Ue(e){var r=e.currentTarget,i=e.attrChange,h=e.attrName,s=e.target,o=e[ot]||2,l=e[pt]||3;!n||s&&s!==r||!r[Ee]||"style"===h||e.prevValue===e.newValue&&(""!==e.newValue||i!==o&&i!==l)||r[Ee](h,i===o?null:e.prevValue,i===l?null:e.newValue)}function et(e){var r=Ve(e);return function(i){Ge.push(r,i.target),V&&clearTimeout(V),V=setTimeout(he,1)}}function de(e){k&&(k=!1,e.currentTarget.removeEventListener(bt,de)),le.length&&ye((e.target||A).querySelectorAll(le),e.detail===pe?pe:Le),z&&function(){for(var e,r=0,i=T.length;r<i;r++)De.contains(e=T[r])||(i--,T.splice(r--,1),je(e,pe))}()}function ve(e,r){var i=this;$.call(i,e,r),xe.call(i,{target:i})}function Ae(e,r,i){var h=r.apply(e,i),s=Ie(h);return-1<s&&ae(h,Ye[s]),i.pop()&&le.length&&function(e){for(var r,i=0,h=e.length;i<h;i++)ae(r=e[i],Ye[Ie(r)])}(h.querySelectorAll(le)),h}function Be(e,r){b(e,r),We?We.observe(e,oe):(I&&(e.setAttribute=ve,e[me]=nt(e),e[be](Et,xe)),e[be](He,Ue)),e[qe]&&n&&(e.created=!0,e[qe](),e.created=!1)}function U(e){throw new Error("A "+e+" type is already registered")}function je(e,r){var i,h,s=Ie(e);-1<s&&!B.call(e,"TEMPLATE")&&(we(e,Ye[s]),s=0,r!==Le||e[Le]?r!==pe||e[pe]||(e[Le]=!1,e[pe]=!0,h="disconnected",s=1):(e[pe]=!1,e[Le]=!0,h="connected",s=1,z&&Te.call(T,e)<0&&T.push(e)),s&&(i=e[r+ce]||e[h+ce])&&i.call(e))}function ke(){}function J(e,r,i){var h=i&&i[te]||"",s=r.prototype,o=w(s),l=r.observedAttributes||Oe,d={prototype:o};x(o,qe,{value:function(){if(f)f=!1;else if(!this[Je]){this[Je]=!0,new r(this),s[qe]&&s[qe].call(this);var p=m[v.get(r)];(!t||p.create.length>1)&&tt(this)}}}),x(o,Ee,{value:function(p){-1<Te.call(l,p)&&s[Ee]&&s[Ee].apply(this,arguments)}}),s[rt]&&x(o,vt,{value:s[rt]}),s[mt]&&x(o,kt,{value:s[mt]}),h&&(d[te]=h),e=e.toUpperCase(),m[e]={constructor:r,create:h?[h,C(e)]:[e]},v.set(r,e),A[se](e.toLowerCase(),d),ut(e),E[e].r()}function gt(e){var r=m[e.toUpperCase()];return r&&r.constructor}function yt(e){return"string"==typeof e?e:e&&e.is||""}function tt(e){for(var r,i=e[Ee],h=i?e.attributes:Oe,s=h.length;s--;)i.call(e,(r=h[s]).name||r.nodeName,null,r.value||r.nodeValue)}function ut(e){return(e=e.toUpperCase())in E||(E[e]={},E[e].p=new c(function(r){E[e].r=r})),E[e].p}function ft(){Me&&delete G.customElements,Re(G,"customElements",{configurable:!0,value:new ke}),Re(G,"CustomElementRegistry",{configurable:!0,value:ke});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),r=e.length;r--;function(i){var h=G[i];if(h){G[i]=function(s){var o,l;return s||(s=this),s[Je]||(f=!0,o=m[v.get(s.constructor)],(s=(l=t&&1===o.create.length)?Reflect.construct(h,Oe,o.constructor):A.createElement.apply(A,o.create))[Je]=!0,f=!1,l||tt(s)),s},G[i].prototype=h.prototype;try{h.prototype.constructor=G[i]}catch(s){Re(h,Je,{value:G[i]})}}}(e[r]));A.createElement=function(i,h){var s=yt(h);return s?H.call(this,i,C(s)):H.call(this,i)},ue||(X=!0,A[se](""))}var A=G.document,re=G.Object,ht=function(e){var r,i,h,s,o=/^[A-Z]+[a-z]/,d=function(_,g){(g=g.toLowerCase())in p||(p[_]=(p[_]||[]).concat(g),p[g]=p[g.toUpperCase()]=_)},p=(re.create||re)(null),y={};for(i in e)for(s in e[i])for(p[s]=h=e[i][s],r=0;r<h.length;r++)p[h[r].toLowerCase()]=p[h[r].toUpperCase()]=s;return y.get=function(_){return"string"==typeof _?p[_]||(o.test(_)?[]:""):function(_){var g,M=[];for(g in p)_.test(g)&&M.push(g);return M}(_)},y.set=function(_,g){return o.test(_)?d(_,g):d(g,_),y},y}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof ne&&(ne={type:ne||"auto"});var Ge,xe,ze,nt,We,ie,we,ae,Ce,e,r,i,h,s,se="registerElement",dt=1e5*G.Math.random()>>0,me="__"+se+dt,be="addEventListener",Le="attached",ce="Callback",pe="detached",te="extends",Ee="attributeChanged"+ce,vt=Le+ce,rt="connected"+ce,mt="disconnected"+ce,qe="created"+ce,kt=pe+ce,ot="ADDITION",pt="REMOVAL",He="DOMAttrModified",bt="DOMContentLoaded",Et="DOMSubtreeModified",Xe="<",st="=",Mt=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,wt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ne=[],Ye=[],le="",De=A.documentElement,Te=Ne.indexOf||function(e){for(var r=this.length;r--&&this[r]!==e;);return r},it=re.prototype,Pe=it.hasOwnProperty,at=it.isPrototypeOf,Re=re.defineProperty,Oe=[],Ke=re.getOwnPropertyDescriptor,Y=re.getOwnPropertyNames,Ct=re.getPrototypeOf,$e=re.setPrototypeOf,Se=!!re.__proto__,Je="__dreCEv1",Me=G.customElements,t=!/^force/.test(ne.type)&&!!(Me&&Me.define&&Me.get&&Me.whenDefined),a=re.create||re,u=G.Map||function(){var e,r=[],i=[];return{get:function(h){return i[Te.call(r,h)]},set:function(h,s){(e=Te.call(r,h))<0?i[r.push(h)-1]=s:i[e]=s}}},c=G.Promise||function(e){function r(o){for(h=!0;i.length;)i.shift()(o)}var i=[],h=!1,s={catch:function(){return s},then:function(o){return i.push(o),h&&setTimeout(r,1),s}};return e(r),s},f=!1,m=a(null),E=a(null),v=new u,C=function(e){return e.toLowerCase()},w=re.create||function e(r){return r?(e.prototype=r,new e):this},b=$e||(Se?function(e,r){return e.__proto__=r,e}:Y&&Ke?function(){function e(r,i){for(var h,s=Y(i),o=0,l=s.length;o<l;o++)Pe.call(r,h=s[o])||Re(r,h,Ke(i,h))}return function(r,i){do{e(r,i)}while((i=Ct(i))&&!at.call(i,r));return r}}():function(e,r){for(var i in r)e[i]=r[i];return e}),N=G.MutationObserver||G.WebKitMutationObserver,S=G.HTMLAnchorElement,P=(G.HTMLElement||G.Element||G.Node).prototype,z=!at.call(P,De),x=z?function(e,r,i){return e[r]=i.value,e}:Re,L=z?function(e){return 1===e.nodeType}:function(e){return at.call(P,e)},T=z&&[],Z=P.attachShadow,W=P.cloneNode,B=P.closest||function(e){for(var r=this;r&&r.nodeName!==e;)r=r.parentNode;return r},K=P.dispatchEvent,R=P.getAttribute,Q=P.hasAttribute,F=P.removeAttribute,$=P.setAttribute,O=A.createElement,j=A.importNode,H=O,oe=N&&{attributes:!0,characterData:!0,attributeOldValue:!0},_e=N||function(e){I=!1,De.removeEventListener(He,_e)},V=0,ue=se in A&&!/^force-all/.test(ne.type),fe=!0,X=!1,I=!0,k=!0,n=!0;if(N&&((Ce=A.createElement("div")).innerHTML="<div><div></div></div>",new N(function(e,r){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var i=(Ce=Ke(P,"innerHTML"))&&Ce.set;i&&Re(P,"innerHTML",{set:function(h){for(;this.lastChild;)this.removeChild(this.lastChild);i.call(this,h)}})}r.disconnect(),Ce=null}).observe(Ce,{childList:!0,subtree:!0}),Ce.innerHTML=""),ue||($e||Se?(we=function(e,r){at.call(r,e)||Be(e,r)},ae=Be):ae=we=function(e,r){e[me]||(e[me]=re(!0),Be(e,r))},z?(I=!1,e=Ke(P,be),r=e.value,i=function(o){var l=new CustomEvent(He,{bubbles:!0});l.attrName=o,l.prevValue=R.call(this,o),l.newValue=null,l[pt]=l.attrChange=2,F.call(this,o),K.call(this,l)},h=function(o,l){var d=Q.call(this,o),p=d&&R.call(this,o),y=new CustomEvent(He,{bubbles:!0});$.call(this,o,l),y.attrName=o,y.prevValue=d?p:null,y.newValue=l,d?y.MODIFICATION=y.attrChange=1:y[ot]=y.attrChange=0,K.call(this,y)},s=function(o){var l,d=o.currentTarget,p=d[me],y=o.propertyName;p.hasOwnProperty(y)&&(p=p[y],(l=new CustomEvent(He,{bubbles:!0})).attrName=p.name,l.prevValue=p.value||null,l.newValue=p.value=d[y]||null,null==l.prevValue?l[ot]=l.attrChange=0:l.MODIFICATION=l.attrChange=1,K.call(d,l))},e.value=function(o,l,d){o===He&&this[Ee]&&this.setAttribute!==h&&(this[me]={className:{name:"class",value:this.className}},this.setAttribute=h,this.removeAttribute=i,r.call(this,"propertychange",s)),r.call(this,o,l,d)},Re(P,be,e)):N||(De[be](He,_e),De.setAttribute(me,1),De.removeAttribute(me),I&&(xe=function(e){var r,i,h,s=this;if(s===e.target){for(h in r=s[me],s[me]=i=nt(s),i){if(!(h in r))return ze(0,s,h,r[h],i[h],ot);if(i[h]!==r[h])return ze(1,s,h,r[h],i[h],"MODIFICATION")}for(h in r)if(!(h in i))return ze(2,s,h,r[h],i[h],pt)}},ze=function(e,r,i,h,s,o){var l={attrChange:e,currentTarget:r,attrName:i,prevValue:h,newValue:s};l[o]=e,Ue(l)},nt=function(e){for(var r,i,h={},s=e.attributes,o=0,l=s.length;o<l;o++)"setAttribute"!==(i=(r=s[o]).name)&&(h[i]=r.value);return h})),A[se]=function(e,r){if(i=e.toUpperCase(),fe&&(fe=!1,N?(We=function(p,y){function _(g,M){for(var D=0,q=g.length;D<q;M(g[D++]));}return new N(function(g){for(var M,D,q,ee=0,ge=g.length;ee<ge;ee++)"childList"===(M=g[ee]).type?(_(M.addedNodes,p),_(M.removedNodes,y)):(D=M.target,n&&D[Ee]&&"style"!==M.attributeName&&(q=R.call(D,M.attributeName))!==M.oldValue&&D[Ee](M.attributeName,M.oldValue,q))})}(Ve(Le),Ve(pe)),(ie=function(p){return We.observe(p,{childList:!0,subtree:!0}),p})(A),Z&&(P.attachShadow=function(){return ie(Z.apply(this,arguments))})):(Ge=[],A[be]("DOMNodeInserted",et(Le)),A[be]("DOMNodeRemoved",et(pe))),A[be](bt,de),A[be]("readystatechange",de),A.importNode=function(p,y){switch(p.nodeType){case 1:return Ae(A,j,[p,!!y]);case 11:for(var _=A.createDocumentFragment(),g=p.childNodes,M=g.length,D=0;D<M;D++)_.appendChild(A.importNode(g[D],!!y));return _;default:return W.call(p,!!y)}},P.cloneNode=function(p){return Ae(this,W,[!!p])}),X)return X=!1;if(-2<Te.call(Ne,st+i)+Te.call(Ne,Xe+i)&&U(e),!Mt.test(i)||-1<Te.call(wt,i))throw new Error("The type "+e+" is invalid");var i,h,s=function(){return l?A.createElement(d,i):A.createElement(d)},o=r||it,l=Pe.call(o,te),d=l?r[te].toUpperCase():i;return l&&-1<Te.call(Ne,Xe+d)&&U(d),h=Ne.push((l?st:Xe)+i)-1,le=le.concat(le.length?",":"",l?d+'[is="'+e.toLowerCase()+'"]':d),s.prototype=Ye[h]=Pe.call(o,"prototype")?o.prototype:w(P),le.length&&ye(A.querySelectorAll(le),Le),s},A.createElement=H=function(e,r){var i=yt(r),h=i?O.call(A,e,C(i)):O.call(A,e),s=""+e,o=Te.call(Ne,(i?st:Xe)+(i||s).toUpperCase()),l=-1<o;return i&&(h.setAttribute("is",i=i.toLowerCase()),l&&(l=Ze(s.toUpperCase(),i))),n=!A.createElement.innerHTMLHelper,l&&ae(h,Ye[o]),h}),addEventListener("beforeunload",function(){delete A.createElement,delete A.importNode,delete A[se]},!1),ke.prototype={constructor:ke,define:t?function(e,r,i){if(i)J(e,r,i);else{var h=e.toUpperCase();m[h]={constructor:r,create:[h]},v.set(r,h),Me.define(e,r)}}:J,get:t?function(e){return Me.get(e)||gt(e)}:gt,whenDefined:t?function(e){return c.race([Me.whenDefined(e),ut(e)])}:ut},!Me||/^force/.test(ne.type))ft();else if(!ne.noBuiltIn)try{!function(e,r,i){var h=new RegExp("^<a\\s+is=('|\")"+i+"\\1></a>$");if(r[te]="a",(e.prototype=w(S.prototype)).constructor=e,G.customElements.define(i,e,r),!h.test(A.createElement("a",{is:i}).outerHTML)||!h.test((new e).outerHTML))throw r}(function e(){return Reflect.construct(S,[],e)},{},"document-register-element-a"+dt)}catch(e){ft()}if(!ne.noBuiltIn)try{if(O.call(A,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){C=function(r){return{is:r.toLowerCase()}}}}(window)},277:()=>{"use strict";!function(t){const a=t.performance;function u(I){a&&a.mark&&a.mark(I)}function c(I,k){a&&a.measure&&a.measure(I,k)}u("Zone");const f=t.__Zone_symbol_prefix||"__zone_symbol__";function m(I){return f+I}const E=!0===t[m("forceDuplicateZoneCheck")];if(t.Zone){if(E||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let v=(()=>{class I{constructor(n,e){this._parent=n,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new w(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=I.current;for(;n.parent;)n=n.parent;return n}static get current(){return V.zone}static get currentTask(){return ue}static __load_patch(n,e,r=!1){if(oe.hasOwnProperty(n)){if(!r&&E)throw Error("Already loaded patch: "+n)}else if(!t["__Zone_disable_"+n]){const i="Zone:"+n;u(i),oe[n]=e(t,I,_e),c(i,i)}}get parent(){return this._parent}get name(){return this._name}get(n){const e=this.getZoneWith(n);if(e)return e._properties[n]}getZoneWith(n){let e=this;for(;e;){if(e._properties.hasOwnProperty(n))return e;e=e._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,e){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const r=this._zoneDelegate.intercept(this,n,e),i=this;return function(){return i.runGuarded(r,this,arguments,e)}}run(n,e,r,i){V={parent:V,zone:this};try{return this._zoneDelegate.invoke(this,n,e,r,i)}finally{V=V.parent}}runGuarded(n,e=null,r,i){V={parent:V,zone:this};try{try{return this._zoneDelegate.invoke(this,n,e,r,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{V=V.parent}}runTask(n,e,r){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");if(n.state===B&&(n.type===H||n.type===j))return;const i=n.state!=Q;i&&n._transitionTo(Q,R),n.runCount++;const h=ue;ue=n,V={parent:V,zone:this};try{n.type==j&&n.data&&!n.data.isPeriodic&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,n,e,r)}catch(s){if(this._zoneDelegate.handleError(this,s))throw s}}finally{n.state!==B&&n.state!==$&&(n.type==H||n.data&&n.data.isPeriodic?i&&n._transitionTo(R,Q):(n.runCount=0,this._updateTaskCount(n,-1),i&&n._transitionTo(B,Q,B))),V=V.parent,ue=h}}scheduleTask(n){if(n.zone&&n.zone!==this){let r=this;for(;r;){if(r===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);r=r.parent}}n._transitionTo(K,B);const e=[];n._zoneDelegates=e,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(r){throw n._transitionTo($,K,B),this._zoneDelegate.handleError(this,r),r}return n._zoneDelegates===e&&this._updateTaskCount(n,1),n.state==K&&n._transitionTo(R,K),n}scheduleMicroTask(n,e,r,i){return this.scheduleTask(new b(O,n,e,r,i,void 0))}scheduleMacroTask(n,e,r,i,h){return this.scheduleTask(new b(j,n,e,r,i,h))}scheduleEventTask(n,e,r,i,h){return this.scheduleTask(new b(H,n,e,r,i,h))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||W).name+"; Execution: "+this.name+")");n._transitionTo(F,R,Q);try{this._zoneDelegate.cancelTask(this,n)}catch(e){throw n._transitionTo($,F),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(n,-1),n._transitionTo(B,F),n.runCount=0,n}_updateTaskCount(n,e){const r=n._zoneDelegates;-1==e&&(n._zoneDelegates=null);for(let i=0;i<r.length;i++)r[i]._updateTaskCount(n.type,e)}}return I.__symbol__=m,I})();const C={name:"",onHasTask:(I,k,n,e)=>I.hasTask(n,e),onScheduleTask:(I,k,n,e)=>I.scheduleTask(n,e),onInvokeTask:(I,k,n,e,r,i)=>I.invokeTask(n,e,r,i),onCancelTask:(I,k,n,e)=>I.cancelTask(n,e)};class w{constructor(k,n,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=k,this._parentDelegate=n,this._forkZS=e&&(e&&e.onFork?e:n._forkZS),this._forkDlgt=e&&(e.onFork?n:n._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:n._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:n._interceptZS),this._interceptDlgt=e&&(e.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:n._invokeZS),this._invokeDlgt=e&&(e.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:n._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:n._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:n._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:n._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=e&&e.onHasTask;(r||n&&n._hasTaskZS)&&(this._hasTaskZS=r?e:C,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=k,e.onScheduleTask||(this._scheduleTaskZS=C,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=C,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=C,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}fork(k,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,k,n):new v(k,n)}intercept(k,n,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,k,n,e):n}invoke(k,n,e,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,k,n,e,r,i):n.apply(e,r)}handleError(k,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,k,n)}scheduleTask(k,n){let e=n;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,k,n),e||(e=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=O)throw new Error("Task is missing scheduleFn.");T(n)}return e}invokeTask(k,n,e,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,k,n,e,r):n.callback.apply(e,r)}cancelTask(k,n){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,k,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");e=n.cancelFn(n)}return e}hasTask(k,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,k,n)}catch(e){this.handleError(k,e)}}_updateTaskCount(k,n){const e=this._taskCounts,r=e[k],i=e[k]=r+n;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:k})}}class b{constructor(k,n,e,r,i,h){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=k,this.source=n,this.data=r,this.scheduleFn=i,this.cancelFn=h,!e)throw new Error("callback is not defined");this.callback=e;const s=this;this.invoke=k===H&&r&&r.useG?b.invokeTask:function(){return b.invokeTask.call(t,s,this,arguments)}}static invokeTask(k,n,e){k||(k=this),fe++;try{return k.runCount++,k.zone.runTask(k,n,e)}finally{1==fe&&Z(),fe--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(B,K)}_transitionTo(k,n,e){if(this._state!==n&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${k}', expecting state '${n}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=k,k==B&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const N=m("setTimeout"),S=m("Promise"),P=m("then");let L,z=[],x=!1;function T(I){if(0===fe&&0===z.length)if(L||t[S]&&(L=t[S].resolve(0)),L){let k=L[P];k||(k=L.then),k.call(L,Z)}else t[N](Z,0);I&&z.push(I)}function Z(){if(!x){for(x=!0;z.length;){const I=z;z=[];for(let k=0;k<I.length;k++){const n=I[k];try{n.zone.runTask(n,null,null)}catch(e){_e.onUnhandledError(e)}}}_e.microtaskDrainDone(),x=!1}}const W={name:"NO ZONE"},B="notScheduled",K="scheduling",R="scheduled",Q="running",F="canceling",$="unknown",O="microTask",j="macroTask",H="eventTask",oe={},_e={symbol:m,currentZoneFrame:()=>V,onUnhandledError:X,microtaskDrainDone:X,scheduleMicroTask:T,showUncaughtError:()=>!v[m("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:X,patchMethod:()=>X,bindArguments:()=>[],patchThen:()=>X,patchMacroTask:()=>X,patchEventPrototype:()=>X,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>X,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>X,wrapWithCurrentZone:()=>X,filterProperties:()=>[],attachOriginToPatched:()=>X,_redefineProperty:()=>X,patchCallbacks:()=>X};let V={parent:null,zone:new v(null,null)},ue=null,fe=0;function X(){}c("Zone","Zone"),t.Zone=v}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const ne=Object.getOwnPropertyDescriptor,he=Object.defineProperty,ye=Object.getPrototypeOf,_t=Object.create,Ve=Array.prototype.slice,Ie="addEventListener",Ze="removeEventListener",Ue=Zone.__symbol__(Ie),et=Zone.__symbol__(Ze),de="true",ve="false",Ae=Zone.__symbol__("");function Be(t,a){return Zone.current.wrap(t,a)}function lt(t,a,u,c,f){return Zone.current.scheduleMacroTask(t,a,u,c,f)}const U=Zone.__symbol__,je="undefined"!=typeof window,ke=je?window:void 0,J=je&&ke||"object"==typeof self&&self||global,yt=[null];function tt(t,a){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=Be(t[u],a+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const A="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,re=!("nw"in J)&&void 0!==J.process&&"[object process]"==={}.toString.call(J.process),ht=!re&&!A&&!(!je||!ke.HTMLElement),Ge=void 0!==J.process&&"[object process]"==={}.toString.call(J.process)&&!A&&!(!je||!ke.HTMLElement),xe={},ze=function(t){if(!(t=t||J.event))return;let a=xe[t.type];a||(a=xe[t.type]=U("ON_PROPERTY"+t.type));const u=this||t.target||J,c=u[a];let f;if(ht&&u===ke&&"error"===t.type){const m=t;f=c&&c.call(this,m.message,m.filename,m.lineno,m.colno,m.error),!0===f&&t.preventDefault()}else f=c&&c.apply(this,arguments),null!=f&&!f&&t.preventDefault();return f};function nt(t,a,u){let c=ne(t,a);if(!c&&u&&ne(u,a)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const f=U("on"+a+"patched");if(t.hasOwnProperty(f)&&t[f])return;delete c.writable,delete c.value;const m=c.get,E=c.set,v=a.substr(2);let C=xe[v];C||(C=xe[v]=U("ON_PROPERTY"+v)),c.set=function(w){let b=this;!b&&t===J&&(b=J),b&&(b[C]&&b.removeEventListener(v,ze),E&&E.apply(b,yt),"function"==typeof w?(b[C]=w,b.addEventListener(v,ze,!1)):b[C]=null)},c.get=function(){let w=this;if(!w&&t===J&&(w=J),!w)return null;const b=w[C];if(b)return b;if(m){let N=m&&m.call(this);if(N)return c.set.call(this,N),"function"==typeof w.removeAttribute&&w.removeAttribute(a),N}return null},he(t,a,c),t[f]=!0}function We(t,a,u){if(a)for(let c=0;c<a.length;c++)nt(t,"on"+a[c],u);else{const c=[];for(const f in t)"on"==f.substr(0,2)&&c.push(f);for(let f=0;f<c.length;f++)nt(t,c[f],u)}}const ie=U("originalInstance");function we(t){const a=J[t];if(!a)return;J[U(t)]=a,J[t]=function(){const f=tt(arguments,t);switch(f.length){case 0:this[ie]=new a;break;case 1:this[ie]=new a(f[0]);break;case 2:this[ie]=new a(f[0],f[1]);break;case 3:this[ie]=new a(f[0],f[1],f[2]);break;case 4:this[ie]=new a(f[0],f[1],f[2],f[3]);break;default:throw new Error("Arg list too long.")}},se(J[t],a);const u=new a(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(f){"function"==typeof u[f]?J[t].prototype[f]=function(){return this[ie][f].apply(this[ie],arguments)}:he(J[t].prototype,f,{set:function(m){"function"==typeof m?(this[ie][f]=Be(m,t+"."+f),se(this[ie][f],m)):this[ie][f]=m},get:function(){return this[ie][f]}})}(c);for(c in a)"prototype"!==c&&a.hasOwnProperty(c)&&(J[t][c]=a[c])}function ae(t,a,u){let c=t;for(;c&&!c.hasOwnProperty(a);)c=ye(c);!c&&t[a]&&(c=t);const f=U(a);let m=null;if(c&&(!(m=c[f])||!c.hasOwnProperty(f))&&(m=c[f]=c[a],ft(c&&ne(c,a)))){const v=u(m,f,a);c[a]=function(){return v(this,arguments)},se(c[a],m)}return m}function Ce(t,a,u){let c=null;function f(m){const E=m.data;return E.args[E.cbIdx]=function(){m.invoke.apply(this,arguments)},c.apply(E.target,E.args),m}c=ae(t,a,m=>function(E,v){const C=u(E,v);return C.cbIdx>=0&&"function"==typeof v[C.cbIdx]?lt(C.name,v[C.cbIdx],C,f):m.apply(E,v)})}function se(t,a){t[U("OriginalDelegate")]=a}let dt=!1,me=!1;function Le(){if(dt)return me;dt=!0;try{const t=ke.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(me=!0)}catch(t){}return me}Zone.__load_patch("ZoneAwarePromise",(t,a,u)=>{const c=Object.getOwnPropertyDescriptor,f=Object.defineProperty,E=u.symbol,v=[],C=!0===t[E("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],w=E("Promise"),b=E("then");u.onUnhandledError=s=>{if(u.showUncaughtError()){const o=s&&s.rejection;o?console.error("Unhandled Promise rejection:",o instanceof Error?o.message:o,"; Zone:",s.zone.name,"; Task:",s.task&&s.task.source,"; Value:",o,o instanceof Error?o.stack:void 0):console.error(s)}},u.microtaskDrainDone=()=>{for(;v.length;){const s=v.shift();try{s.zone.runGuarded(()=>{throw s.throwOriginal?s.rejection:s})}catch(o){P(o)}}};const S=E("unhandledPromiseRejectionHandler");function P(s){u.onUnhandledError(s);try{const o=a[S];"function"==typeof o&&o.call(this,s)}catch(o){}}function z(s){return s&&s.then}function x(s){return s}function L(s){return n.reject(s)}const T=E("state"),Z=E("value"),W=E("finally"),B=E("parentPromiseValue"),K=E("parentPromiseState"),Q=null,F=!0,$=!1;function j(s,o){return l=>{try{V(s,o,l)}catch(d){V(s,!1,d)}}}const _e=E("currentTaskTrace");function V(s,o,l){const d=function(){let s=!1;return function(l){return function(){s||(s=!0,l.apply(null,arguments))}}}();if(s===l)throw new TypeError("Promise resolved with itself");if(s[T]===Q){let p=null;try{("object"==typeof l||"function"==typeof l)&&(p=l&&l.then)}catch(y){return d(()=>{V(s,!1,y)})(),s}if(o!==$&&l instanceof n&&l.hasOwnProperty(T)&&l.hasOwnProperty(Z)&&l[T]!==Q)fe(l),V(s,l[T],l[Z]);else if(o!==$&&"function"==typeof p)try{p.call(l,d(j(s,o)),d(j(s,!1)))}catch(y){d(()=>{V(s,!1,y)})()}else{s[T]=o;const y=s[Z];if(s[Z]=l,s[W]===W&&o===F&&(s[T]=s[K],s[Z]=s[B]),o===$&&l instanceof Error){const _=a.currentTask&&a.currentTask.data&&a.currentTask.data.__creationTrace__;_&&f(l,_e,{configurable:!0,enumerable:!1,writable:!0,value:_})}for(let _=0;_<y.length;)X(s,y[_++],y[_++],y[_++],y[_++]);if(0==y.length&&o==$){s[T]=0;let _=l;try{throw new Error("Uncaught (in promise): "+function(s){return s&&s.toString===Object.prototype.toString?(s.constructor&&s.constructor.name||"")+": "+JSON.stringify(s):s?s.toString():Object.prototype.toString.call(s)}(l)+(l&&l.stack?"\n"+l.stack:""))}catch(g){_=g}C&&(_.throwOriginal=!0),_.rejection=l,_.promise=s,_.zone=a.current,_.task=a.currentTask,v.push(_),u.scheduleMicroTask()}}}return s}const ue=E("rejectionHandledHandler");function fe(s){if(0===s[T]){try{const o=a[ue];o&&"function"==typeof o&&o.call(this,{rejection:s[Z],promise:s})}catch(o){}s[T]=$;for(let o=0;o<v.length;o++)s===v[o].promise&&v.splice(o,1)}}function X(s,o,l,d,p){fe(s);const y=s[T],_=y?"function"==typeof d?d:x:"function"==typeof p?p:L;o.scheduleMicroTask("Promise.then",()=>{try{const g=s[Z],M=!!l&&W===l[W];M&&(l[B]=g,l[K]=y);const D=o.run(_,void 0,M&&_!==L&&_!==x?[]:[g]);V(l,!0,D)}catch(g){V(l,!1,g)}},l)}const k=function(){};class n{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(o){return V(new this(null),F,o)}static reject(o){return V(new this(null),$,o)}static race(o){let l,d,p=new this((g,M)=>{l=g,d=M});function y(g){l(g)}function _(g){d(g)}for(let g of o)z(g)||(g=this.resolve(g)),g.then(y,_);return p}static all(o){return n.allWithCallback(o)}static allSettled(o){return(this&&this.prototype instanceof n?this:n).allWithCallback(o,{thenCallback:d=>({status:"fulfilled",value:d}),errorCallback:d=>({status:"rejected",reason:d})})}static allWithCallback(o,l){let d,p,y=new this((D,q)=>{d=D,p=q}),_=2,g=0;const M=[];for(let D of o){z(D)||(D=this.resolve(D));const q=g;try{D.then(ee=>{M[q]=l?l.thenCallback(ee):ee,_--,0===_&&d(M)},ee=>{l?(M[q]=l.errorCallback(ee),_--,0===_&&d(M)):p(ee)})}catch(ee){p(ee)}_++,g++}return _-=2,0===_&&d(M),y}constructor(o){const l=this;if(!(l instanceof n))throw new Error("Must be an instanceof Promise.");l[T]=Q,l[Z]=[];try{o&&o(j(l,F),j(l,$))}catch(d){V(l,!1,d)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return n}then(o,l){let d=this.constructor[Symbol.species];(!d||"function"!=typeof d)&&(d=this.constructor||n);const p=new d(k),y=a.current;return this[T]==Q?this[Z].push(y,p,o,l):X(this,y,p,o,l),p}catch(o){return this.then(null,o)}finally(o){let l=this.constructor[Symbol.species];(!l||"function"!=typeof l)&&(l=n);const d=new l(k);d[W]=W;const p=a.current;return this[T]==Q?this[Z].push(p,d,o,o):X(this,p,d,o,o),d}}n.resolve=n.resolve,n.reject=n.reject,n.race=n.race,n.all=n.all;const e=t[w]=t.Promise;t.Promise=n;const r=E("thenPatched");function i(s){const o=s.prototype,l=c(o,"then");if(l&&(!1===l.writable||!l.configurable))return;const d=o.then;o[b]=d,s.prototype.then=function(p,y){return new n((g,M)=>{d.call(this,g,M)}).then(p,y)},s[r]=!0}return u.patchThen=i,e&&(i(e),ae(t,"fetch",s=>function(s){return function(o,l){let d=s.apply(o,l);if(d instanceof n)return d;let p=d.constructor;return p[r]||i(p),d}}(s))),Promise[a.__symbol__("uncaughtPromiseErrors")]=v,n}),Zone.__load_patch("toString",t=>{const a=Function.prototype.toString,u=U("OriginalDelegate"),c=U("Promise"),f=U("Error"),m=function(){if("function"==typeof this){const w=this[u];if(w)return"function"==typeof w?a.call(w):Object.prototype.toString.call(w);if(this===Promise){const b=t[c];if(b)return a.call(b)}if(this===Error){const b=t[f];if(b)return a.call(b)}}return a.call(this)};m[u]=a,Function.prototype.toString=m;const E=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":E.call(this)}});let ce=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){ce=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){ce=!1}const pe={useG:!0},te={},Ee={},vt=new RegExp("^"+Ae+"(\\w+)(true|false)$"),rt=U("propagationStopped");function mt(t,a){const u=(a?a(t):t)+ve,c=(a?a(t):t)+de,f=Ae+u,m=Ae+c;te[t]={},te[t][ve]=f,te[t][de]=m}function qe(t,a,u){const c=u&&u.add||Ie,f=u&&u.rm||Ze,m=u&&u.listeners||"eventListeners",E=u&&u.rmAll||"removeAllListeners",v=U(c),C="."+c+":",N=function(L,T,Z){if(L.isRemoved)return;const W=L.callback;"object"==typeof W&&W.handleEvent&&(L.callback=K=>W.handleEvent(K),L.originalDelegate=W),L.invoke(L,T,[Z]);const B=L.options;B&&"object"==typeof B&&B.once&&T[f].call(T,Z.type,L.originalDelegate?L.originalDelegate:L.callback,B)},S=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][ve]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}},P=function(L){if(!(L=L||t.event))return;const T=this||L.target||t,Z=T[te[L.type][de]];if(Z)if(1===Z.length)N(Z[0],T,L);else{const W=Z.slice();for(let B=0;B<W.length&&(!L||!0!==L[rt]);B++)N(W[B],T,L)}};function z(L,T){if(!L)return!1;let Z=!0;T&&void 0!==T.useG&&(Z=T.useG);const W=T&&T.vh;let B=!0;T&&void 0!==T.chkDup&&(B=T.chkDup);let K=!1;T&&void 0!==T.rt&&(K=T.rt);let R=L;for(;R&&!R.hasOwnProperty(c);)R=ye(R);if(!R&&L[c]&&(R=L),!R||R[v])return!1;const Q=T&&T.eventNameToString,F={},$=R[v]=R[c],O=R[U(f)]=R[f],j=R[U(m)]=R[m],H=R[U(E)]=R[E];let oe;function _e(o,l){return!ce&&"object"==typeof o&&o?!!o.capture:ce&&l?"boolean"==typeof o?{capture:o,passive:!0}:o?"object"==typeof o&&!1!==o.passive?Object.assign(Object.assign({},o),{passive:!0}):o:{passive:!0}:o}T&&T.prepend&&(oe=R[U(T.prepend)]=R[T.prepend]);const k=Z?function(o){if(!F.isExisting)return $.call(F.target,F.eventName,F.capture?P:S,F.options)}:function(o){return $.call(F.target,F.eventName,o.invoke,F.options)},n=Z?function(o){if(!o.isRemoved){const l=te[o.eventName];let d;l&&(d=l[o.capture?de:ve]);const p=d&&o.target[d];if(p)for(let y=0;y<p.length;y++)if(p[y]===o){p.splice(y,1),o.isRemoved=!0,0===p.length&&(o.allRemoved=!0,o.target[d]=null);break}}if(o.allRemoved)return O.call(o.target,o.eventName,o.capture?P:S,o.options)}:function(o){return O.call(o.target,o.eventName,o.invoke,o.options)},r=T&&T.diff?T.diff:function(o,l){const d=typeof l;return"function"===d&&o.callback===l||"object"===d&&o.originalDelegate===l},i=Zone[U("UNPATCHED_EVENTS")],h=t[U("PASSIVE_EVENTS")],s=function(o,l,d,p,y=!1,_=!1){return function(){const g=this||t;let M=arguments[0];T&&T.transferEventName&&(M=T.transferEventName(M));let D=arguments[1];if(!D)return o.apply(this,arguments);if(re&&"uncaughtException"===M)return o.apply(this,arguments);let q=!1;if("function"!=typeof D){if(!D.handleEvent)return o.apply(this,arguments);q=!0}if(W&&!W(o,D,g,arguments))return;const ee=ce&&!!h&&-1!==h.indexOf(M),ge=_e(arguments[2],ee);if(i)for(let Qe=0;Qe<i.length;Qe++)if(M===i[Qe])return ee?o.call(g,M,D,ge):o.apply(this,arguments);const Ot=!!ge&&("boolean"==typeof ge||ge.capture),Nt=!(!ge||"object"!=typeof ge)&&ge.once,Zt=Zone.current;let Ht=te[M];Ht||(mt(M,Q),Ht=te[M]);const Dt=Ht[Ot?de:ve];let Lt,ct=g[Dt],Rt=!1;if(ct){if(Rt=!0,B)for(let Qe=0;Qe<ct.length;Qe++)if(r(ct[Qe],D))return}else ct=g[Dt]=[];const St=g.constructor.name,It=Ee[St];It&&(Lt=It[M]),Lt||(Lt=St+l+(Q?Q(M):M)),F.options=ge,Nt&&(F.options.once=!1),F.target=g,F.capture=Ot,F.eventName=M,F.isExisting=Rt;const Tt=Z?pe:void 0;Tt&&(Tt.taskData=F);const Fe=Zt.scheduleEventTask(Lt,D,Tt,d,p);return F.target=null,Tt&&(Tt.taskData=null),Nt&&(ge.once=!0),!ce&&"boolean"==typeof Fe.options||(Fe.options=ge),Fe.target=g,Fe.capture=Ot,Fe.eventName=M,q&&(Fe.originalDelegate=D),_?ct.unshift(Fe):ct.push(Fe),y?g:void 0}};return R[c]=s($,C,k,n,K),oe&&(R.prependListener=s(oe,".prependListener:",function(o){return oe.call(F.target,F.eventName,o.invoke,F.options)},n,K,!0)),R[f]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=arguments[2],p=!!d&&("boolean"==typeof d||d.capture),y=arguments[1];if(!y)return O.apply(this,arguments);if(W&&!W(O,y,o,arguments))return;const _=te[l];let g;_&&(g=_[p?de:ve]);const M=g&&o[g];if(M)for(let D=0;D<M.length;D++){const q=M[D];if(r(q,y))return M.splice(D,1),q.isRemoved=!0,0===M.length&&(q.allRemoved=!0,o[g]=null,"string"==typeof l)&&(o[Ae+"ON_PROPERTY"+l]=null),q.zone.cancelTask(q),K?o:void 0}return O.apply(this,arguments)},R[m]=function(){const o=this||t;let l=arguments[0];T&&T.transferEventName&&(l=T.transferEventName(l));const d=[],p=kt(o,Q?Q(l):l);for(let y=0;y<p.length;y++){const _=p[y];d.push(_.originalDelegate?_.originalDelegate:_.callback)}return d},R[E]=function(){const o=this||t;let l=arguments[0];if(l){T&&T.transferEventName&&(l=T.transferEventName(l));const d=te[l];if(d){const _=o[d[ve]],g=o[d[de]];if(_){const M=_.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}if(g){const M=g.slice();for(let D=0;D<M.length;D++){const q=M[D];this[f].call(this,l,q.originalDelegate?q.originalDelegate:q.callback,q.options)}}}}else{const d=Object.keys(o);for(let p=0;p<d.length;p++){const _=vt.exec(d[p]);let g=_&&_[1];g&&"removeListener"!==g&&this[E].call(this,g)}this[E].call(this,"removeListener")}if(K)return this},se(R[c],$),se(R[f],O),H&&se(R[E],H),j&&se(R[m],j),!0}let x=[];for(let L=0;L<a.length;L++)x[L]=z(a[L],u);return x}function kt(t,a){if(!a){const m=[];for(let E in t){const v=vt.exec(E);let C=v&&v[1];if(C&&(!a||C===a)){const w=t[E];if(w)for(let b=0;b<w.length;b++)m.push(w[b])}}return m}let u=te[a];u||(mt(a),u=te[a]);const c=t[u[ve]],f=t[u[de]];return c?f?c.concat(f):c.slice():f?f.slice():[]}function ot(t,a){const u=t.Event;u&&u.prototype&&a.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(f,m){f[rt]=!0,c&&c.apply(f,m)})}function pt(t,a,u,c,f){const m=Zone.__symbol__(c);if(a[m])return;const E=a[m]=a[c];a[c]=function(v,C,w){return C&&C.prototype&&f.forEach(function(b){const N=`${u}.${c}::`+b,S=C.prototype;if(S.hasOwnProperty(b)){const P=t.ObjectGetOwnPropertyDescriptor(S,b);P&&P.value?(P.value=t.wrapWithCurrentZone(P.value,N),t._redefineProperty(C.prototype,b,P)):S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}else S[b]&&(S[b]=t.wrapWithCurrentZone(S[b],N))}),E.call(a,v,C,w)},t.attachOriginToPatched(a[c],E)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],st=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],le=["load"],De=["blur","error","focus","load","resize","scroll","messageerror"],Te=["bounce","finish","start"],it=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Pe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],at=["close","error","open","message"],Re=["error","message"],Oe=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function Ke(t,a,u){if(!u||0===u.length)return a;const c=u.filter(m=>m.target===t);if(!c||0===c.length)return a;const f=c[0].ignoreProperties;return a.filter(m=>-1===f.indexOf(m))}function Y(t,a,u,c){t&&We(t,Ke(t,a,u),c)}Zone.__load_patch("util",(t,a,u)=>{u.patchOnProperties=We,u.patchMethod=ae,u.bindArguments=tt,u.patchMacroTask=Ce;const c=a.__symbol__("BLACK_LISTED_EVENTS"),f=a.__symbol__("UNPATCHED_EVENTS");t[f]&&(t[c]=t[f]),t[c]&&(a[c]=a[f]=t[c]),u.patchEventPrototype=ot,u.patchEventTarget=qe,u.isIEOrEdge=Le,u.ObjectDefineProperty=he,u.ObjectGetOwnPropertyDescriptor=ne,u.ObjectCreate=_t,u.ArraySlice=Ve,u.patchClass=we,u.wrapWithCurrentZone=Be,u.filterProperties=Ke,u.attachOriginToPatched=se,u._redefineProperty=Object.defineProperty,u.patchCallbacks=pt,u.getGlobalObjects=()=>({globalSources:Ee,zoneSymbolEventNames:te,eventNames:Oe,isBrowser:ht,isMix:Ge,isNode:re,TRUE_STR:de,FALSE_STR:ve,ZONE_SYMBOL_PREFIX:Ae,ADD_EVENT_LISTENER_STR:Ie,REMOVE_EVENT_LISTENER_STR:Ze})});const $e=U("zoneTask");function Se(t,a,u,c){let f=null,m=null;u+=c;const E={};function v(w){const b=w.data;return b.args[0]=function(){return w.invoke.apply(this,arguments)},b.handleId=f.apply(t,b.args),w}function C(w){return m.call(t,w.data.handleId)}f=ae(t,a+=c,w=>function(b,N){if("function"==typeof N[0]){const S={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?N[1]||0:void 0,args:N},P=N[0];N[0]=function(){try{return P.apply(this,arguments)}finally{S.isPeriodic||("number"==typeof S.handleId?delete E[S.handleId]:S.handleId&&(S.handleId[$e]=null))}};const z=lt(a,N[0],S,v,C);if(!z)return z;const x=z.data.handleId;return"number"==typeof x?E[x]=z:x&&(x[$e]=z),x&&x.ref&&x.unref&&"function"==typeof x.ref&&"function"==typeof x.unref&&(z.ref=x.ref.bind(x),z.unref=x.unref.bind(x)),"number"==typeof x||x?x:z}return w.apply(t,N)}),m=ae(t,u,w=>function(b,N){const S=N[0];let P;"number"==typeof S?P=E[S]:(P=S&&S[$e],P||(P=S)),P&&"string"==typeof P.type?"notScheduled"!==P.state&&(P.cancelFn&&P.data.isPeriodic||0===P.runCount)&&("number"==typeof S?delete E[S]:S&&(S[$e]=null),P.zone.cancelTask(P)):w.apply(t,N)})}Zone.__load_patch("legacy",t=>{const a=t[Zone.__symbol__("legacyPatch")];a&&a()}),Zone.__load_patch("queueMicrotask",(t,a,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(f,m){a.current.scheduleMicroTask("queueMicrotask",m[0])})}),Zone.__load_patch("timers",t=>{const a="set",u="clear";Se(t,a,u,"Timeout"),Se(t,a,u,"Interval"),Se(t,a,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{Se(t,"request","cancel","AnimationFrame"),Se(t,"mozRequest","mozCancel","AnimationFrame"),Se(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,a)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ae(t,u[c],(m,E,v)=>function(C,w){return a.current.run(m,t,w,v)})}),Zone.__load_patch("EventTarget",(t,a,u)=>{(function(t,a){a.patchEventPrototype(t,a)})(t,u),function(t,a){if(Zone[a.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:f,FALSE_STR:m,ZONE_SYMBOL_PREFIX:E}=a.getGlobalObjects();for(let C=0;C<u.length;C++){const w=u[C],S=E+(w+m),P=E+(w+f);c[w]={},c[w][m]=S,c[w][f]=P}const v=t.EventTarget;v&&v.prototype&&a.patchEventTarget(t,[v&&v.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,a,u)=>{we("MutationObserver"),we("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,a,u)=>{we("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,a,u)=>{we("FileReader")}),Zone.__load_patch("on_property",(t,a,u)=>{!function(t,a){if(re&&!Ge||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=a.__Zone_ignore_on_properties;if(ht){const E=window,v=function(){try{const t=ke.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:E,ignoreProperties:["error"]}]:[];Y(E,Oe.concat(["messageerror"]),c&&c.concat(v),ye(E)),Y(Document.prototype,Oe,c),void 0!==E.SVGElement&&Y(E.SVGElement.prototype,Oe,c),Y(Element.prototype,Oe,c),Y(HTMLElement.prototype,Oe,c),Y(HTMLMediaElement.prototype,st,c),Y(HTMLFrameSetElement.prototype,Et.concat(De),c),Y(HTMLBodyElement.prototype,Et.concat(De),c),Y(HTMLFrameElement.prototype,le,c),Y(HTMLIFrameElement.prototype,le,c);const C=E.HTMLMarqueeElement;C&&Y(C.prototype,Te,c);const w=E.Worker;w&&Y(w.prototype,Re,c)}const f=a.XMLHttpRequest;f&&Y(f.prototype,it,c);const m=a.XMLHttpRequestEventTarget;m&&Y(m&&m.prototype,it,c),"undefined"!=typeof IDBIndex&&(Y(IDBIndex.prototype,Pe,c),Y(IDBRequest.prototype,Pe,c),Y(IDBOpenDBRequest.prototype,Pe,c),Y(IDBDatabase.prototype,Pe,c),Y(IDBTransaction.prototype,Pe,c),Y(IDBCursor.prototype,Pe,c)),u&&Y(WebSocket.prototype,at,c)}(u,t)}),Zone.__load_patch("customElements",(t,a,u)=>{!function(t,a){const{isBrowser:u,isMix:c}=a.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&a.patchCallbacks(a,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,a)=>{!function(w){const b=w.XMLHttpRequest;if(!b)return;const N=b.prototype;let P=N[Ue],z=N[et];if(!P){const O=w.XMLHttpRequestEventTarget;if(O){const j=O.prototype;P=j[Ue],z=j[et]}}const x="readystatechange",L="scheduled";function T(O){const j=O.data,H=j.target;H[m]=!1,H[v]=!1;const oe=H[f];P||(P=H[Ue],z=H[et]),oe&&z.call(H,x,oe);const _e=H[f]=()=>{if(H.readyState===H.DONE)if(!j.aborted&&H[m]&&O.state===L){const ue=H[a.__symbol__("loadfalse")];if(0!==H.status&&ue&&ue.length>0){const fe=O.invoke;O.invoke=function(){const X=H[a.__symbol__("loadfalse")];for(let I=0;I<X.length;I++)X[I]===O&&X.splice(I,1);!j.aborted&&O.state===L&&fe.call(O)},ue.push(O)}else O.invoke()}else!j.aborted&&!1===H[m]&&(H[v]=!0)};return P.call(H,x,_e),H[u]||(H[u]=O),F.apply(H,j.args),H[m]=!0,O}function Z(){}function W(O){const j=O.data;return j.aborted=!0,$.apply(j.target,j.args)}const B=ae(N,"open",()=>function(O,j){return O[c]=0==j[2],O[E]=j[1],B.apply(O,j)}),R=U("fetchTaskAborting"),Q=U("fetchTaskScheduling"),F=ae(N,"send",()=>function(O,j){if(!0===a.current[Q]||O[c])return F.apply(O,j);{const H={target:O,url:O[E],isPeriodic:!1,args:j,aborted:!1},oe=lt("XMLHttpRequest.send",Z,H,T,W);O&&!0===O[v]&&!H.aborted&&oe.state===L&&oe.invoke()}}),$=ae(N,"abort",()=>function(O,j){const H=function(O){return O[u]}(O);if(H&&"string"==typeof H.type){if(null==H.cancelFn||H.data&&H.data.aborted)return;H.zone.cancelTask(H)}else if(!0===a.current[R])return $.apply(O,j)})}(t);const u=U("xhrTask"),c=U("xhrSync"),f=U("xhrListener"),m=U("xhrScheduled"),E=U("xhrURL"),v=U("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,a){const u=t.constructor.name;for(let c=0;c<a.length;c++){const f=a[c],m=t[f];if(m){if(!ft(ne(t,f)))continue;t[f]=(v=>{const C=function(){return v.apply(this,tt(arguments,u+"."+f))};return se(C,v),C})(m)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,a)=>{function u(c){return function(f){kt(t,c).forEach(E=>{const v=t.PromiseRejectionEvent;if(v){const C=new v(c,{promise:f.promise,reason:f.rejection});E.invoke(C)}})}}t.PromiseRejectionEvent&&(a[U("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),a[U("rejectionHandledHandler")]=u("rejectionhandled"))})},454:(G,ne,he)=>{"use strict";he(277),he(142),he(138)}},G=>{G(G.s=454)}]);
/*! (C) Andrea Giammarchi - @WebReflection - ISC Style License */
!function(e,t){"use strict";function n(){var e=C.splice(0,C.length);for(We=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)p(e[n],t)}function o(e){return function(t){Re(t)&&(p(t,e),le.length&&r(t.querySelectorAll(le),e))}}function l(e){var t=Be.call(e,"is"),n=e.nodeName.toUpperCase(),r=ie.call(re,t?ee+t.toUpperCase():J+n);return t&&-1<r&&!a(n,t)?-1:r}function a(e,t){return-1<le.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,l=e[X]||2,a=e[$]||3;!rt||o&&o!==t||!t[B]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==l&&n!==a)||t[B](r,n===l?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=o(e);return function(e){C.push(t,e.target),We&&clearTimeout(We),We=setTimeout(n,1)}}function c(e){nt&&(nt=!1,e.currentTarget.removeEventListener(W,c)),le.length&&r((e.target||g).querySelectorAll(le),e.detail===x?x:_),Ve&&function(){for(var e,t=0,n=Ue.length;t<n;t++)e=Ue[t],ae.contains(e)||(n--,Ue.splice(t--,1),p(e,x))}()}function s(e,t){var n=this;Ge.call(n,e,t),w.call(n,{target:n})}function m(e,t,n){var r=t.apply(e,n),o=l(r);return-1<o&&F(r,oe[o]),n.pop()&&le.length&&function(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],F(t,oe[l(t)])}(r.querySelectorAll(le)),r}function f(e,t){De(e,t),N?N.observe(e,$e):(tt&&(e.setAttribute=s,e[R]=O(e),e[U](Y,w)),e[U](Q,i)),e[z]&&rt&&(e.created=!0,e[z](),e.created=!1)}function d(e){throw new Error("A "+e+" type is already registered")}function p(e,t){var n,r,o=l(e);-1<o&&!xe.call(e,"TEMPLATE")&&(I(e,oe[o]),o=0,t!==_||e[_]?t!==x||e[x]||(e[_]=!1,e[x]=!0,r="disconnected",o=1):(e[x]=!1,e[_]=!0,r="connected",o=1,Ve&&ie.call(Ue,e)<0&&Ue.push(e)),o&&(n=e[t+k]||e[r+k])&&n.call(e))}function h(){}function T(e,t,n){var r=n&&n[q]||"",o=t.prototype,l=Ne(o),a=t.observedAttributes||fe,i={prototype:l};Pe(l,z,{value:function(){if(ye)ye=!1;else if(!this[Me]){this[Me]=!0,new t(this),o[z]&&o[z].call(this);var e=Ce[Ae.get(t)];(!ve||e.create.length>1)&&E(this)}}}),Pe(l,B,{value:function(e){-1<ie.call(a,e)&&o[B]&&o[B].apply(this,arguments)}}),o[j]&&Pe(l,Z,{value:o[j]}),o[G]&&Pe(l,K,{value:o[G]}),r&&(i[q]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),g[V](e.toLowerCase(),i),v(e),we[e].r()}function L(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function M(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[B],r=n?e.attributes:fe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function v(e){return(e=e.toUpperCase())in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function H(){Ee&&delete e.customElements,me(e,"customElements",{configurable:!0,value:new h}),me(e,"CustomElementRegistry",{configurable:!0,value:h});for(var t=y.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Me]||(ye=!0,t=Ce[Ae.get(e.constructor)],(e=(r=ve&&1===t.create.length)?Reflect.construct(n,fe,t.constructor):g.createElement.apply(g,t.create))[Me]=!0,ye=!1,r||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){!0,me(n,Me,{value:e[t]})}}}(t[n]));g.createElement=function(e,t){var n=M(t);return n?Xe.call(this,e,Oe(n)):Xe.call(this,e)},Ye||(et=!0,g[V](""))}var g=e.document,b=e.Object,y=function(e){var t,n,r,o,l=/^[A-Z]+[a-z]/,a=function(e,t){(t=t.toLowerCase())in i||(i[e]=(i[e]||[]).concat(t),i[t]=i[t.toUpperCase()]=e)},i=(b.create||b)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],i[o]=r,t=0;t<r.length;t++)i[r[t].toLowerCase()]=i[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?i[e]||(l.test(e)?[]:""):function(e){var t,n=[];for(t in i)e.test(t)&&n.push(t);return n}(e)},u.set=function(e,t){return l.test(e)?a(e,t):a(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var C,w,A,O,N,D,I,F,S,V="registerElement",P=1e5*e.Math.random()>>0,R="__"+V+P,U="addEventListener",_="attached",k="Callback",x="detached",q="extends",B="attributeChanged"+k,Z=_+k,j="connected"+k,G="disconnected"+k,z="created"+k,K=x+k,X="ADDITION",$="REMOVAL",Q="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",J="<",ee="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],re=[],oe=[],le="",ae=g.documentElement,ie=re.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ue=b.prototype,ce=ue.hasOwnProperty,se=ue.isPrototypeOf,me=b.defineProperty,fe=[],de=b.getOwnPropertyDescriptor,pe=b.getOwnPropertyNames,he=b.getPrototypeOf,Te=b.setPrototypeOf,Le=!!b.__proto__,Me="__dreCEv1",Ee=e.customElements,ve=!/^force/.test(t.type)&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),He=b.create||b,ge=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ie.call(t,e)]},set:function(r,o){(e=ie.call(t,r))<0?n[t.push(r)-1]=o:n[e]=o}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},ye=!1,Ce=He(null),we=He(null),Ae=new ge,Oe=function(e){return e.toLowerCase()},Ne=b.create||function e(t){return t?(e.prototype=t,new e):this},De=Te||(Le?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,r=pe(t),o=0,l=r.length;o<l;o++)n=r[o],ce.call(e,n)||me(e,n,de(t,n))}return function(t,n){do{e(t,n)}while((n=he(n))&&!se.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Ie=e.MutationObserver||e.WebKitMutationObserver,Fe=e.HTMLAnchorElement,Se=(e.HTMLElement||e.Element||e.Node).prototype,Ve=!se.call(Se,ae),Pe=Ve?function(e,t,n){return e[t]=n.value,e}:me,Re=Ve?function(e){return 1===e.nodeType}:function(e){return se.call(Se,e)},Ue=Ve&&[],_e=Se.attachShadow,ke=Se.cloneNode,xe=Se.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},qe=Se.dispatchEvent,Be=Se.getAttribute,Ze=Se.hasAttribute,je=Se.removeAttribute,Ge=Se.setAttribute,ze=g.createElement,Ke=g.importNode,Xe=ze,$e=Ie&&{attributes:!0,characterData:!0,attributeOldValue:!0},Qe=Ie||function(e){tt=!1,ae.removeEventListener(Q,Qe)},We=0,Ye=V in g&&!/^force-all/.test(t.type),Je=!0,et=!1,tt=!0,nt=!0,rt=!0;if(Ie&&((S=g.createElement("div")).innerHTML="<div><div></div></div>",new Ie(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var n=(S=de(Se,"innerHTML"))&&S.set;n&&me(Se,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),S=null}).observe(S,{childList:!0,subtree:!0}),S.innerHTML=""),Ye||(Te||Le?(I=function(e,t){se.call(t,e)||f(e,t)},F=f):F=I=function(e,t){e[R]||(e[R]=b(!0),f(e,t))},Ve?(tt=!1,function(){var e=de(Se,U),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=Be.call(this,e),t.newValue=null,t[$]=t.attrChange=2,je.call(this,e),qe.call(this,t)},r=function(e,t){var n=Ze.call(this,e),r=n&&Be.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[X]=o.attrChange=0,qe.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[R],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],(t=new CustomEvent(Q,{bubbles:!0})).attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[X]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,qe.call(n,t))};e.value=function(e,l,a){e===Q&&this[B]&&this.setAttribute!==r&&(this[R]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,l,a)},me(Se,U,e)}()):Ie||(ae[U](Q,Qe),ae.setAttribute(R,1),ae.removeAttribute(R),tt&&(w=function(e){var t,n,r,o=this;if(o===e.target){for(r in t=o[R],o[R]=n=O(o),n){if(!(r in t))return A(0,o,r,t[r],n[r],X);if(n[r]!==t[r])return A(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return A(2,o,r,t[r],n[r],$)}},A=function(e,t,n,r,o,l){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[l]=e,i(a)},O=function(e){for(var t,n,r={},o=e.attributes,l=0,a=o.length;l<a;l++)"setAttribute"!==(n=(t=o[l]).name)&&(r[n]=t.value);return r})),g[V]=function(e,t){if(n=e.toUpperCase(),Je&&(Je=!1,Ie?(N=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Ie(function(r){for(var o,l,a,i=0,u=r.length;i<u;i++)"childList"===(o=r[i]).type?(n(o.addedNodes,e),n(o.removedNodes,t)):(l=o.target,rt&&l[B]&&"style"!==o.attributeName&&(a=Be.call(l,o.attributeName))!==o.oldValue&&l[B](o.attributeName,o.oldValue,a))})}(o(_),o(x)),(D=function(e){return N.observe(e,{childList:!0,subtree:!0}),e})(g),_e&&(Se.attachShadow=function(){return D(_e.apply(this,arguments))})):(C=[],g[U]("DOMNodeInserted",u(_)),g[U]("DOMNodeRemoved",u(x))),g[U](W,c),g[U]("readystatechange",c),g.importNode=function(e,t){switch(e.nodeType){case 1:return m(g,Ke,[e,!!t]);case 11:for(var n=g.createDocumentFragment(),r=e.childNodes,o=r.length,l=0;l<o;l++)n.appendChild(g.importNode(r[l],!!t));return n;default:return ke.call(e,!!t)}},Se.cloneNode=function(e){return m(this,ke,[!!e])}),et)return et=!1;if(-2<ie.call(re,ee+n)+ie.call(re,J+n)&&d(e),!te.test(n)||-1<ie.call(ne,n))throw new Error("The type "+e+" is invalid");var n,l,a=function(){return s?g.createElement(f,n):g.createElement(f)},i=t||ue,s=ce.call(i,q),f=s?t[q].toUpperCase():n;return s&&-1<ie.call(re,J+f)&&d(f),l=re.push((s?ee:J)+n)-1,le=le.concat(le.length?",":"",s?f+'[is="'+e.toLowerCase()+'"]':f),a.prototype=oe[l]=ce.call(i,"prototype")?i.prototype:Ne(Se),le.length&&r(g.querySelectorAll(le),_),a},g.createElement=Xe=function(e,t){var n=M(t),r=n?ze.call(g,e,Oe(n)):ze.call(g,e),o=""+e,l=ie.call(re,(n?ee:J)+(n||o).toUpperCase()),i=-1<l;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=a(o.toUpperCase(),n))),rt=!g.createElement.innerHTMLHelper,i&&F(r,oe[l]),r}),addEventListener("beforeunload",function(){delete g.createElement,delete g.importNode,delete g[V]},!1),h.prototype={constructor:h,define:ve?function(e,t,n){if(n)T(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Ee.define(e,t)}}:T,get:ve?function(e){return Ee.get(e)||L(e)}:L,whenDefined:ve?function(e){return be.race([Ee.whenDefined(e),v(e)])}:v},!Ee||/^force/.test(t.type))H();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[q]="a",(t.prototype=Ne(Fe.prototype)).constructor=t,e.customElements.define(r,t,n),!o.test(g.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Fe,[],e)},{},"document-register-element-a"+P)}catch(e){H()}if(!t.noBuiltIn)try{if(ze.call(g,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){Oe=function(e){return{is:e.toLowerCase()}}}}(window);
var Zet=Object.defineProperty,Jet=Object.defineProperties,ett=Object.getOwnPropertyDescriptors,yR=Object.getOwnPropertySymbols,vce=Object.prototype.hasOwnProperty,wce=Object.prototype.propertyIsEnumerable,Hi=Math.pow,Ece=(Vt,rt,tt)=>rt in Vt?Zet(Vt,rt,{enumerable:!0,configurable:!0,writable:!0,value:tt}):Vt[rt]=tt,ht=(Vt,rt)=>{for(var tt in rt||(rt={}))vce.call(rt,tt)&&Ece(Vt,tt,rt[tt]);if(yR)for(var tt of yR(rt))wce.call(rt,tt)&&Ece(Vt,tt,rt[tt]);return Vt},Kn=(Vt,rt)=>Jet(Vt,ett(rt)),Cce=(Vt,rt)=>{var tt={};for(var gt in Vt)vce.call(Vt,gt)&&rt.indexOf(gt)<0&&(tt[gt]=Vt[gt]);if(null!=Vt&&yR)for(var gt of yR(Vt))rt.indexOf(gt)<0&&wce.call(Vt,gt)&&(tt[gt]=Vt[gt]);return tt};(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{440:(Vt,rt,tt)=>{var gt=tt(52).default;Vt.exports=function Y(Te,fe,q){function H(W,E){if(!fe[W]){if(!Te[W]){if(B)return B(W,!0);var P=new Error("Cannot find module '"+W+"'");throw P.code="MODULE_NOT_FOUND",P}var T=fe[W]={exports:{}};Te[W][0].call(T.exports,function(w){return H(Te[W][1][w]||w)},T,T.exports,Y,Te,fe,q)}return fe[W].exports}for(var B=void 0,se=0;se<q.length;se++)H(q[se]);return H}({1:[function(Y,Te,fe){var q,H;q=this,H=function(q,H,B,se,W){"use strict";function A(Ce,Ne,ze,qe){return new(ze||(ze=Promise))(function($,X){function we(Et){try{Fe(qe.next(Et))}catch(pt){X(pt)}}function ue(Et){try{Fe(qe.throw(Et))}catch(pt){X(pt)}}function Fe(Et){Et.done?$(Et.value):function($){return $ instanceof ze?$:new ze(function(X){X($)})}(Et.value).then(we,ue)}Fe((qe=qe.apply(Ce,Ne||[])).next())})}function U(Ce,Ne){var qe,Ve,$,X,ze={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return X={next:we(0),throw:we(1),return:we(2)},"function"==typeof Symbol&&(X[Symbol.iterator]=function(){return this}),X;function we(Fe){return function(Et){return function(Fe){if(qe)throw new TypeError("Generator is already executing.");for(;ze;)try{if(qe=1,Ve&&($=2&Fe[0]?Ve.return:Fe[0]?Ve.throw||(($=Ve.return)&&$.call(Ve),0):Ve.next)&&!($=$.call(Ve,Fe[1])).done)return $;switch(Ve=0,$&&(Fe=[2&Fe[0],$.value]),Fe[0]){case 0:case 1:$=Fe;break;case 4:return ze.label++,{value:Fe[1],done:!1};case 5:ze.label++,Ve=Fe[1],Fe=[0];continue;case 7:Fe=ze.ops.pop(),ze.trys.pop();continue;default:if(!($=($=ze.trys).length>0&&$[$.length-1])&&(6===Fe[0]||2===Fe[0])){ze=0;continue}if(3===Fe[0]&&(!$||Fe[1]>$[0]&&Fe[1]<$[3])){ze.label=Fe[1];break}if(6===Fe[0]&&ze.label<$[1]){ze.label=$[1],$=Fe;break}if($&&ze.label<$[2]){ze.label=$[2],ze.ops.push(Fe);break}$[2]&&ze.ops.pop(),ze.trys.pop();continue}Fe=Ne.call(Ce,ze)}catch(Et){Fe=[6,Et],Ve=0}finally{qe=$=0}if(5&Fe[0])throw Fe[1];return{value:Fe[0]?Fe[1]:void 0,done:!0}}([Fe,Et])}}}function nt(Ce){var Ne=Ce.length,ze=0;return new W.Readable({objectMode:!0,read:function(){this.push(ze<Ne?Ce[ze++]:null)}})}q.addJsonLdToStore=function(Ce,Ne){return A(this,void 0,void 0,function(){var ze,qe,Ve;return U(this,function($){switch($.label){case 0:return"string"!=typeof Ce?[3,4]:[4,fetch(Ce,{redirect:"follow"})];case 1:return(qe=$.sent()).ok?[4,qe.json()]:[3,3];case 2:ze=$.sent(),$.label=3;case 3:return[3,5];case 4:ze=Ce,$.label=5;case 5:return ze?[4,H.toRDF(ze)]:[3,7];case 6:Ve=$.sent(),Ne.import(nt(Ve)),$.label=7;case 7:return[2,Ne]}})})},q.addN3ToStore=function(Ce,Ne){return A(this,void 0,void 0,function(){var ze,qe,Ve;return U(this,function($){switch($.label){case 0:return"string"==typeof Ce&&(null==Ce?void 0:Ce.startsWith("http"))?[4,fetch(Ce,{redirect:"follow"})]:[3,4];case 1:return(qe=$.sent()).ok?[4,qe.text()]:[3,3];case 2:ze=$.sent(),$.label=3;case 3:return[3,5];case 4:ze=Ce,$.label=5;case 5:return ze&&(Ve=new B.Parser({format:"n3"}).parse(ze),Ne.import(nt(Ve))),[2,Ne]}})})},q.addRdfXmlToStore=function(Ce,Ne){return A(this,void 0,void 0,function(){var ze,qe,Ve,$;return U(this,function(X){switch(X.label){case 0:return"string"==typeof Ce&&(null==Ce?void 0:Ce.startsWith("http"))?[4,fetch(Ce,{redirect:"follow"})]:[3,4];case 1:return(qe=X.sent()).ok?[4,qe.text()]:[3,3];case 2:ze=X.sent(),X.label=3;case 3:return[3,5];case 4:ze=Ce,X.label=5;case 5:return ze?(Ve=new se.RdfXmlParser({dataFactory:B.DataFactory,strict:!0}),$=new Promise(function(we){Ve.once("end",function(){return we(Ne)})}),Ne.import(Ve),Ve.write(ze),Ve.end(),[2,$]):[2,Ne]}})})},q.arrayToStream=nt,q.deserializeN3Store=function(Ce,Ne){var ze=JSON.parse(Ce),qe=new B.Store;return Object.assign(qe,ze,{_factory:null!=Ne?Ne:B.DataFactory}),qe},q.serializeN3Store=function(Ce){var Ne=Object.assign({},Ce);return delete Ne._factory,JSON.stringify(Ne)},q.streamToArray=function(Ce){return new Promise(function(Ne,ze){var qe=[];Ce.on("data",function(Ve){qe.push(Ve)}).once("end",function(){Ne(qe)}).once("error",function(Ve){ze(Ve)})})},Object.keys(B).forEach(function(Ce){"default"!==Ce&&!q.hasOwnProperty(Ce)&&Object.defineProperty(q,Ce,{enumerable:!0,get:function(){return B[Ce]}})}),Object.defineProperty(q,"__esModule",{value:!0})},"object"==typeof fe&&void 0!==Te?H(fe,Y("jsonld"),Y("n3"),Y("rdfxml-streaming-parser"),Y("readable-stream")):H((q="undefined"!=typeof globalThis?globalThis:q||self).tripleStoreUtils={},q.jsonld,q.n3,q.rdfxmlStreamingParser,q.readablestream)},{jsonld:26,n3:43,"rdfxml-streaming-parser":64,"readable-stream":81}],2:[function(Y,Te,fe){"use strict";fe.byteLength=function(U){var O=D(U),K=O[1];return 3*(O[0]+K)/4-K},fe.toByteArray=function(U){var O,z,G=D(U),K=G[0],I=G[1],L=new B(function(U,O,G){return 3*(O+G)/4-G}(0,K,I)),Q=0,S=I>0?K-4:K;for(z=0;z<S;z+=4)O=H[U.charCodeAt(z)]<<18|H[U.charCodeAt(z+1)]<<12|H[U.charCodeAt(z+2)]<<6|H[U.charCodeAt(z+3)],L[Q++]=O>>16&255,L[Q++]=O>>8&255,L[Q++]=255&O;return 2===I&&(O=H[U.charCodeAt(z)]<<2|H[U.charCodeAt(z+1)]>>4,L[Q++]=255&O),1===I&&(O=H[U.charCodeAt(z)]<<10|H[U.charCodeAt(z+1)]<<4|H[U.charCodeAt(z+2)]>>2,L[Q++]=O>>8&255,L[Q++]=255&O),L},fe.fromByteArray=function(U){for(var O,G=U.length,K=G%3,I=[],L=16383,Q=0,S=G-K;Q<S;Q+=L)I.push(C(U,Q,Q+L>S?S:Q+L));return 1===K?I.push(q[(O=U[G-1])>>2]+q[O<<4&63]+"=="):2===K&&I.push(q[(O=(U[G-2]<<8)+U[G-1])>>10]+q[O>>4&63]+q[O<<2&63]+"="),I.join("")};for(var q=[],H=[],B="undefined"!=typeof Uint8Array?Uint8Array:Array,se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=0,E=se.length;W<E;++W)q[W]=se[W],H[se.charCodeAt(W)]=W;function D(U){var O=U.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var G=U.indexOf("=");return-1===G&&(G=O),[G,G===O?0:4-G%4]}function v(U){return q[U>>18&63]+q[U>>12&63]+q[U>>6&63]+q[63&U]}function C(U,O,G){for(var I=[],L=O;L<G;L+=3)I.push(v((U[L]<<16&16711680)+(U[L+1]<<8&65280)+(255&U[L+2])));return I.join("")}H["-".charCodeAt(0)]=62,H["_".charCodeAt(0)]=63},{}],3:[function(Y,Te,fe){},{}],4:[function(Y,Te,fe){var q=Y("buffer"),H=q.Buffer;function B(W,E){for(var D in W)E[D]=W[D]}function se(W,E,D){return H(W,E,D)}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?Te.exports=q:(B(q,fe),fe.Buffer=se),B(H,se),se.from=function(W,E,D){if("number"==typeof W)throw new TypeError("Argument must not be a number");return H(W,E,D)},se.alloc=function(W,E,D){if("number"!=typeof W)throw new TypeError("Argument must be a number");var P=H(W);return void 0!==E?"string"==typeof D?P.fill(E,D):P.fill(E):P.fill(0),P},se.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return H(W)},se.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return q.SlowBuffer(W)}},{buffer:6}],5:[function(Y,Te,fe){"use strict";var q=Y("safe-buffer").Buffer,H=q.isEncoding||function(I){switch((I=""+I)&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function W(I){var L;switch(this.encoding=function(I){var L=function(I){if(!I)return"utf8";for(var L;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(L)return;I=(""+I).toLowerCase(),L=!0}}(I);if("string"!=typeof L&&(q.isEncoding===H||!H(I)))throw new Error("Unknown encoding: "+I);return L||I}(I),this.encoding){case"utf16le":this.text=C,this.end=A,L=4;break;case"utf8":this.fillLast=T,L=4;break;case"base64":this.text=U,this.end=O,L=3;break;default:return this.write=G,void(this.end=K)}this.lastNeed=0,this.lastTotal=0,this.lastChar=q.allocUnsafe(L)}function E(I){return I<=127?0:I>>5==6?2:I>>4==14?3:I>>3==30?4:I>>6==2?-1:-2}function T(I){var L=this.lastTotal-this.lastNeed,Q=function(I,L,Q){if(128!=(192&L[0]))return I.lastNeed=0,"\ufffd";if(I.lastNeed>1&&L.length>1){if(128!=(192&L[1]))return I.lastNeed=1,"\ufffd";if(I.lastNeed>2&&L.length>2&&128!=(192&L[2]))return I.lastNeed=2,"\ufffd"}}(this,I);return void 0!==Q?Q:this.lastNeed<=I.length?(I.copy(this.lastChar,L,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(I.copy(this.lastChar,L,0,I.length),void(this.lastNeed-=I.length))}function C(I,L){if((I.length-L)%2==0){var Q=I.toString("utf16le",L);if(Q){var S=Q.charCodeAt(Q.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],Q.slice(0,-1)}return Q}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",L,I.length-1)}function A(I){var L=I&&I.length?this.write(I):"";return this.lastNeed?L+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):L}function U(I,L){var Q=(I.length-L)%3;return 0===Q?I.toString("base64",L):(this.lastNeed=3-Q,this.lastTotal=3,1===Q?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",L,I.length-Q))}function O(I){var L=I&&I.length?this.write(I):"";return this.lastNeed?L+this.lastChar.toString("base64",0,3-this.lastNeed):L}function G(I){return I.toString(this.encoding)}function K(I){return I&&I.length?this.write(I):""}fe.StringDecoder=W,W.prototype.write=function(I){if(0===I.length)return"";var L,Q;if(this.lastNeed){if(void 0===(L=this.fillLast(I)))return"";Q=this.lastNeed,this.lastNeed=0}else Q=0;return Q<I.length?L?L+this.text(I,Q):this.text(I,Q):L||""},W.prototype.end=function(I){var L=I&&I.length?this.write(I):"";return this.lastNeed?L+"\ufffd":L},W.prototype.text=function(I,L){var Q=function(I,L,Q){var S=L.length-1;if(S<Q)return 0;var z=E(L[S]);return z>=0?(z>0&&(I.lastNeed=z-1),z):--S<Q||-2===z?0:(z=E(L[S]))>=0?(z>0&&(I.lastNeed=z-2),z):--S<Q||-2===z?0:(z=E(L[S]))>=0?(z>0&&(2===z?z=0:I.lastNeed=z-3),z):0}(this,I,L);if(!this.lastNeed)return I.toString("utf8",L);this.lastTotal=Q;var S=I.length-(Q-this.lastNeed);return I.copy(this.lastChar,0,S),I.toString("utf8",L,S)},W.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length}},{"safe-buffer":4}],6:[function(Y,Te,fe){(function(q){(function(){"use strict";var H=Y("base64-js"),B=Y("ieee754");fe.Buffer=D,fe.SlowBuffer=function(j){return+j!=j&&(j=0),D.alloc(+j)},fe.INSPECT_MAX_BYTES=50;var se=2147483647;function E(j){if(j>se)throw new RangeError('The value "'+j+'" is invalid for option "size"');var N=new Uint8Array(j);return N.__proto__=D.prototype,N}function D(j,N,V){if("number"==typeof j){if("string"==typeof N)throw new TypeError('The "string" argument must be of type string. Received type number');return v(j)}return P(j,N,V)}function P(j,N,V){if("string"==typeof j)return function(j,N){if(("string"!=typeof N||""===N)&&(N="utf8"),!D.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var V=0|I(j,N),Pe=E(V),Xe=Pe.write(j,N);return Xe!==V&&(Pe=Pe.slice(0,Xe)),Pe}(j,N);if(ArrayBuffer.isView(j))return A(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(pt(j,ArrayBuffer)||j&&pt(j.buffer,ArrayBuffer))return function(j,N,V){if(N<0||j.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<N+(V||0))throw new RangeError('"length" is outside of buffer bounds');var Pe;return(Pe=void 0===N&&void 0===V?new Uint8Array(j):void 0===V?new Uint8Array(j,N):new Uint8Array(j,N,V)).__proto__=D.prototype,Pe}(j,N,V);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var Pe=j.valueOf&&j.valueOf();if(null!=Pe&&Pe!==j)return D.from(Pe,N,V);var Xe=function(j){if(D.isBuffer(j)){var N=0|G(j.length),V=E(N);return 0===V.length||j.copy(V,0,0,N),V}return void 0!==j.length?"number"!=typeof j.length||ge(j.length)?E(0):A(j):"Buffer"===j.type&&Array.isArray(j.data)?A(j.data):void 0}(j);if(Xe)return Xe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return D.from(j[Symbol.toPrimitive]("string"),N,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function T(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function v(j){return T(j),E(j<0?0:0|G(j))}function A(j){for(var N=j.length<0?0:0|G(j.length),V=E(N),Pe=0;Pe<N;Pe+=1)V[Pe]=255&j[Pe];return V}function G(j){if(j>=se)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+se.toString(16)+" bytes");return 0|j}function I(j,N){if(D.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||pt(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var V=j.length,Pe=arguments.length>2&&!0===arguments[2];if(!Pe&&0===V)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return X(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return Fe(j).length;default:if(Xe)return Pe?-1:X(j).length;N=(""+N).toLowerCase(),Xe=!0}}function L(j,N,V){var Pe=!1;if((void 0===N||N<0)&&(N=0),N>this.length||((void 0===V||V>this.length)&&(V=this.length),V<=0)||(V>>>=0)<=(N>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return Je(this,N,V);case"utf8":case"utf-8":return be(this,N,V);case"ascii":return nt(this,N,V);case"latin1":case"binary":return Ze(this,N,V);case"base64":return ne(this,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ke(this,N,V);default:if(Pe)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),Pe=!0}}function Q(j,N,V){var Pe=j[N];j[N]=j[V],j[V]=Pe}function S(j,N,V,Pe,Xe){if(0===j.length)return-1;if("string"==typeof V?(Pe=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),ge(V=+V)&&(V=Xe?0:j.length-1),V<0&&(V=j.length+V),V>=j.length){if(Xe)return-1;V=j.length-1}else if(V<0){if(!Xe)return-1;V=0}if("string"==typeof N&&(N=D.from(N,Pe)),D.isBuffer(N))return 0===N.length?-1:z(j,N,V,Pe,Xe);if("number"==typeof N)return N&=255,"function"==typeof Uint8Array.prototype.indexOf?Xe?Uint8Array.prototype.indexOf.call(j,N,V):Uint8Array.prototype.lastIndexOf.call(j,N,V):z(j,[N],V,Pe,Xe);throw new TypeError("val must be string, number or Buffer")}function z(j,N,V,Pe,Xe){var Xn,yt=1,Rt=j.length,In=N.length;if(void 0!==Pe&&("ucs2"===(Pe=String(Pe).toLowerCase())||"ucs-2"===Pe||"utf16le"===Pe||"utf-16le"===Pe)){if(j.length<2||N.length<2)return-1;yt=2,Rt/=2,In/=2,V/=2}function kn(Ao,Ks){return 1===yt?Ao[Ks]:Ao.readUInt16BE(Ks*yt)}if(Xe){var kr=-1;for(Xn=V;Xn<Rt;Xn++)if(kn(j,Xn)===kn(N,-1===kr?0:Xn-kr)){if(-1===kr&&(kr=Xn),Xn-kr+1===In)return kr*yt}else-1!==kr&&(Xn-=Xn-kr),kr=-1}else for(V+In>Rt&&(V=Rt-In),Xn=V;Xn>=0;Xn--){for(var xr=!0,bs=0;bs<In;bs++)if(kn(j,Xn+bs)!==kn(N,bs)){xr=!1;break}if(xr)return Xn}return-1}function ie(j,N,V,Pe){V=Number(V)||0;var Xe=j.length-V;Pe?(Pe=Number(Pe))>Xe&&(Pe=Xe):Pe=Xe;var yt=N.length;Pe>yt/2&&(Pe=yt/2);for(var Rt=0;Rt<Pe;++Rt){var In=parseInt(N.substr(2*Rt,2),16);if(ge(In))return Rt;j[V+Rt]=In}return Rt}function de(j,N,V,Pe){return Et(X(N,j.length-V),j,V,Pe)}function te(j,N,V,Pe){return Et(function(j){for(var N=[],V=0;V<j.length;++V)N.push(255&j.charCodeAt(V));return N}(N),j,V,Pe)}function oe(j,N,V,Pe){return te(j,N,V,Pe)}function Ae(j,N,V,Pe){return Et(Fe(N),j,V,Pe)}function me(j,N,V,Pe){return Et(function(j,N){for(var V,Pe,yt=[],Rt=0;Rt<j.length&&!((N-=2)<0);++Rt)Pe=(V=j.charCodeAt(Rt))>>8,yt.push(V%256),yt.push(Pe);return yt}(N,j.length-V),j,V,Pe)}function ne(j,N,V){return H.fromByteArray(0===N&&V===j.length?j:j.slice(N,V))}function be(j,N,V){V=Math.min(j.length,V);for(var Pe=[],Xe=N;Xe<V;){var kn,Xn,kr,xr,yt=j[Xe],Rt=null,In=yt>239?4:yt>223?3:yt>191?2:1;if(Xe+In<=V)switch(In){case 1:yt<128&&(Rt=yt);break;case 2:128==(192&(kn=j[Xe+1]))&&(xr=(31&yt)<<6|63&kn)>127&&(Rt=xr);break;case 3:Xn=j[Xe+2],128==(192&(kn=j[Xe+1]))&&128==(192&Xn)&&(xr=(15&yt)<<12|(63&kn)<<6|63&Xn)>2047&&(xr<55296||xr>57343)&&(Rt=xr);break;case 4:Xn=j[Xe+2],kr=j[Xe+3],128==(192&(kn=j[Xe+1]))&&128==(192&Xn)&&128==(192&kr)&&(xr=(15&yt)<<18|(63&kn)<<12|(63&Xn)<<6|63&kr)>65535&&xr<1114112&&(Rt=xr)}null===Rt?(Rt=65533,In=1):Rt>65535&&(Pe.push((Rt-=65536)>>>10&1023|55296),Rt=56320|1023&Rt),Pe.push(Rt),Xe+=In}return function(j){var N=j.length;if(N<=4096)return String.fromCharCode.apply(String,j);for(var V="",Pe=0;Pe<N;)V+=String.fromCharCode.apply(String,j.slice(Pe,Pe+=4096));return V}(Pe)}fe.kMaxLength=se,!(D.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(N){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.buffer}}),Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&D[Symbol.species]===D&&Object.defineProperty(D,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),D.poolSize=8192,D.from=function(j,N,V){return P(j,N,V)},D.prototype.__proto__=Uint8Array.prototype,D.__proto__=Uint8Array,D.alloc=function(j,N,V){return function(j,N,V){return T(j),j<=0?E(j):void 0!==N?"string"==typeof V?E(j).fill(N,V):E(j).fill(N):E(j)}(j,N,V)},D.allocUnsafe=function(j){return v(j)},D.allocUnsafeSlow=function(j){return v(j)},D.isBuffer=function(N){return null!=N&&!0===N._isBuffer&&N!==D.prototype},D.compare=function(N,V){if(pt(N,Uint8Array)&&(N=D.from(N,N.offset,N.byteLength)),pt(V,Uint8Array)&&(V=D.from(V,V.offset,V.byteLength)),!D.isBuffer(N)||!D.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===V)return 0;for(var Pe=N.length,Xe=V.length,yt=0,Rt=Math.min(Pe,Xe);yt<Rt;++yt)if(N[yt]!==V[yt]){Pe=N[yt],Xe=V[yt];break}return Pe<Xe?-1:Xe<Pe?1:0},D.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},D.concat=function(N,V){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(0===N.length)return D.alloc(0);var Pe;if(void 0===V)for(V=0,Pe=0;Pe<N.length;++Pe)V+=N[Pe].length;var Xe=D.allocUnsafe(V),yt=0;for(Pe=0;Pe<N.length;++Pe){var Rt=N[Pe];if(pt(Rt,Uint8Array)&&(Rt=D.from(Rt)),!D.isBuffer(Rt))throw new TypeError('"list" argument must be an Array of Buffers');Rt.copy(Xe,yt),yt+=Rt.length}return Xe},D.byteLength=I,D.prototype._isBuffer=!0,D.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<N;V+=2)Q(this,V,V+1);return this},D.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<N;V+=4)Q(this,V,V+3),Q(this,V+1,V+2);return this},D.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<N;V+=8)Q(this,V,V+7),Q(this,V+1,V+6),Q(this,V+2,V+5),Q(this,V+3,V+4);return this},D.prototype.toLocaleString=D.prototype.toString=function(){var N=this.length;return 0===N?"":0===arguments.length?be(this,0,N):L.apply(this,arguments)},D.prototype.equals=function(N){if(!D.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||0===D.compare(this,N)},D.prototype.inspect=function(){var N="",V=fe.INSPECT_MAX_BYTES;return N=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(N+=" ... "),"<Buffer "+N+">"},D.prototype.compare=function(N,V,Pe,Xe,yt){if(pt(N,Uint8Array)&&(N=D.from(N,N.offset,N.byteLength)),!D.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(void 0===V&&(V=0),void 0===Pe&&(Pe=N?N.length:0),void 0===Xe&&(Xe=0),void 0===yt&&(yt=this.length),V<0||Pe>N.length||Xe<0||yt>this.length)throw new RangeError("out of range index");if(Xe>=yt&&V>=Pe)return 0;if(Xe>=yt)return-1;if(V>=Pe)return 1;if(this===N)return 0;for(var Rt=(yt>>>=0)-(Xe>>>=0),In=(Pe>>>=0)-(V>>>=0),kn=Math.min(Rt,In),Xn=this.slice(Xe,yt),kr=N.slice(V,Pe),xr=0;xr<kn;++xr)if(Xn[xr]!==kr[xr]){Rt=Xn[xr],In=kr[xr];break}return Rt<In?-1:In<Rt?1:0},D.prototype.includes=function(N,V,Pe){return-1!==this.indexOf(N,V,Pe)},D.prototype.indexOf=function(N,V,Pe){return S(this,N,V,Pe,!0)},D.prototype.lastIndexOf=function(N,V,Pe){return S(this,N,V,Pe,!1)},D.prototype.write=function(N,V,Pe,Xe){if(void 0===V)Xe="utf8",Pe=this.length,V=0;else if(void 0===Pe&&"string"==typeof V)Xe=V,Pe=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(Pe)?(Pe>>>=0,void 0===Xe&&(Xe="utf8")):(Xe=Pe,Pe=void 0)}var yt=this.length-V;if((void 0===Pe||Pe>yt)&&(Pe=yt),N.length>0&&(Pe<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var Rt=!1;;)switch(Xe){case"hex":return ie(this,N,V,Pe);case"utf8":case"utf-8":return de(this,N,V,Pe);case"ascii":return te(this,N,V,Pe);case"latin1":case"binary":return oe(this,N,V,Pe);case"base64":return Ae(this,N,V,Pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,N,V,Pe);default:if(Rt)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),Rt=!0}},D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function nt(j,N,V){var Pe="";V=Math.min(j.length,V);for(var Xe=N;Xe<V;++Xe)Pe+=String.fromCharCode(127&j[Xe]);return Pe}function Ze(j,N,V){var Pe="";V=Math.min(j.length,V);for(var Xe=N;Xe<V;++Xe)Pe+=String.fromCharCode(j[Xe]);return Pe}function Je(j,N,V){var Pe=j.length;(!N||N<0)&&(N=0),(!V||V<0||V>Pe)&&(V=Pe);for(var Xe="",yt=N;yt<V;++yt)Xe+=$(j[yt]);return Xe}function Ke(j,N,V){for(var Pe=j.slice(N,V),Xe="",yt=0;yt<Pe.length;yt+=2)Xe+=String.fromCharCode(Pe[yt]+256*Pe[yt+1]);return Xe}function je(j,N,V){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+N>V)throw new RangeError("Trying to access beyond buffer length")}function Le(j,N,V,Pe,Xe,yt){if(!D.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<yt)throw new RangeError('"value" argument is out of bounds');if(V+Pe>j.length)throw new RangeError("Index out of range")}function Ce(j,N,V,Pe,Xe,yt){if(V+Pe>j.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function Ne(j,N,V,Pe,Xe){return N=+N,V>>>=0,Xe||Ce(j,0,V,4),B.write(j,N,V,Pe,23,4),V+4}function ze(j,N,V,Pe,Xe){return N=+N,V>>>=0,Xe||Ce(j,0,V,8),B.write(j,N,V,Pe,52,8),V+8}D.prototype.slice=function(N,V){var Pe=this.length;(N=~~N)<0?(N+=Pe)<0&&(N=0):N>Pe&&(N=Pe),(V=void 0===V?Pe:~~V)<0?(V+=Pe)<0&&(V=0):V>Pe&&(V=Pe),V<N&&(V=N);var Xe=this.subarray(N,V);return Xe.__proto__=D.prototype,Xe},D.prototype.readUIntLE=function(N,V,Pe){N>>>=0,V>>>=0,Pe||je(N,V,this.length);for(var Xe=this[N],yt=1,Rt=0;++Rt<V&&(yt*=256);)Xe+=this[N+Rt]*yt;return Xe},D.prototype.readUIntBE=function(N,V,Pe){N>>>=0,V>>>=0,Pe||je(N,V,this.length);for(var Xe=this[N+--V],yt=1;V>0&&(yt*=256);)Xe+=this[N+--V]*yt;return Xe},D.prototype.readUInt8=function(N,V){return N>>>=0,V||je(N,1,this.length),this[N]},D.prototype.readUInt16LE=function(N,V){return N>>>=0,V||je(N,2,this.length),this[N]|this[N+1]<<8},D.prototype.readUInt16BE=function(N,V){return N>>>=0,V||je(N,2,this.length),this[N]<<8|this[N+1]},D.prototype.readUInt32LE=function(N,V){return N>>>=0,V||je(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},D.prototype.readUInt32BE=function(N,V){return N>>>=0,V||je(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},D.prototype.readIntLE=function(N,V,Pe){N>>>=0,V>>>=0,Pe||je(N,V,this.length);for(var Xe=this[N],yt=1,Rt=0;++Rt<V&&(yt*=256);)Xe+=this[N+Rt]*yt;return Xe>=(yt*=128)&&(Xe-=Math.pow(2,8*V)),Xe},D.prototype.readIntBE=function(N,V,Pe){N>>>=0,V>>>=0,Pe||je(N,V,this.length);for(var Xe=V,yt=1,Rt=this[N+--Xe];Xe>0&&(yt*=256);)Rt+=this[N+--Xe]*yt;return Rt>=(yt*=128)&&(Rt-=Math.pow(2,8*V)),Rt},D.prototype.readInt8=function(N,V){return N>>>=0,V||je(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},D.prototype.readInt16LE=function(N,V){N>>>=0,V||je(N,2,this.length);var Pe=this[N]|this[N+1]<<8;return 32768&Pe?4294901760|Pe:Pe},D.prototype.readInt16BE=function(N,V){N>>>=0,V||je(N,2,this.length);var Pe=this[N+1]|this[N]<<8;return 32768&Pe?4294901760|Pe:Pe},D.prototype.readInt32LE=function(N,V){return N>>>=0,V||je(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},D.prototype.readInt32BE=function(N,V){return N>>>=0,V||je(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},D.prototype.readFloatLE=function(N,V){return N>>>=0,V||je(N,4,this.length),B.read(this,N,!0,23,4)},D.prototype.readFloatBE=function(N,V){return N>>>=0,V||je(N,4,this.length),B.read(this,N,!1,23,4)},D.prototype.readDoubleLE=function(N,V){return N>>>=0,V||je(N,8,this.length),B.read(this,N,!0,52,8)},D.prototype.readDoubleBE=function(N,V){return N>>>=0,V||je(N,8,this.length),B.read(this,N,!1,52,8)},D.prototype.writeUIntLE=function(N,V,Pe,Xe){N=+N,V>>>=0,Pe>>>=0,Xe||Le(this,N,V,Pe,Math.pow(2,8*Pe)-1,0);var Rt=1,In=0;for(this[V]=255&N;++In<Pe&&(Rt*=256);)this[V+In]=N/Rt&255;return V+Pe},D.prototype.writeUIntBE=function(N,V,Pe,Xe){N=+N,V>>>=0,Pe>>>=0,Xe||Le(this,N,V,Pe,Math.pow(2,8*Pe)-1,0);var Rt=Pe-1,In=1;for(this[V+Rt]=255&N;--Rt>=0&&(In*=256);)this[V+Rt]=N/In&255;return V+Pe},D.prototype.writeUInt8=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,1,255,0),this[V]=255&N,V+1},D.prototype.writeUInt16LE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,2,65535,0),this[V]=255&N,this[V+1]=N>>>8,V+2},D.prototype.writeUInt16BE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,2,65535,0),this[V]=N>>>8,this[V+1]=255&N,V+2},D.prototype.writeUInt32LE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,4,4294967295,0),this[V+3]=N>>>24,this[V+2]=N>>>16,this[V+1]=N>>>8,this[V]=255&N,V+4},D.prototype.writeUInt32BE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,4,4294967295,0),this[V]=N>>>24,this[V+1]=N>>>16,this[V+2]=N>>>8,this[V+3]=255&N,V+4},D.prototype.writeIntLE=function(N,V,Pe,Xe){if(N=+N,V>>>=0,!Xe){var yt=Math.pow(2,8*Pe-1);Le(this,N,V,Pe,yt-1,-yt)}var Rt=0,In=1,kn=0;for(this[V]=255&N;++Rt<Pe&&(In*=256);)N<0&&0===kn&&0!==this[V+Rt-1]&&(kn=1),this[V+Rt]=(N/In>>0)-kn&255;return V+Pe},D.prototype.writeIntBE=function(N,V,Pe,Xe){if(N=+N,V>>>=0,!Xe){var yt=Math.pow(2,8*Pe-1);Le(this,N,V,Pe,yt-1,-yt)}var Rt=Pe-1,In=1,kn=0;for(this[V+Rt]=255&N;--Rt>=0&&(In*=256);)N<0&&0===kn&&0!==this[V+Rt+1]&&(kn=1),this[V+Rt]=(N/In>>0)-kn&255;return V+Pe},D.prototype.writeInt8=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,1,127,-128),N<0&&(N=255+N+1),this[V]=255&N,V+1},D.prototype.writeInt16LE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,2,32767,-32768),this[V]=255&N,this[V+1]=N>>>8,V+2},D.prototype.writeInt16BE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,2,32767,-32768),this[V]=N>>>8,this[V+1]=255&N,V+2},D.prototype.writeInt32LE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,4,2147483647,-2147483648),this[V]=255&N,this[V+1]=N>>>8,this[V+2]=N>>>16,this[V+3]=N>>>24,V+4},D.prototype.writeInt32BE=function(N,V,Pe){return N=+N,V>>>=0,Pe||Le(this,N,V,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[V]=N>>>24,this[V+1]=N>>>16,this[V+2]=N>>>8,this[V+3]=255&N,V+4},D.prototype.writeFloatLE=function(N,V,Pe){return Ne(this,N,V,!0,Pe)},D.prototype.writeFloatBE=function(N,V,Pe){return Ne(this,N,V,!1,Pe)},D.prototype.writeDoubleLE=function(N,V,Pe){return ze(this,N,V,!0,Pe)},D.prototype.writeDoubleBE=function(N,V,Pe){return ze(this,N,V,!1,Pe)},D.prototype.copy=function(N,V,Pe,Xe){if(!D.isBuffer(N))throw new TypeError("argument should be a Buffer");if(Pe||(Pe=0),!Xe&&0!==Xe&&(Xe=this.length),V>=N.length&&(V=N.length),V||(V=0),Xe>0&&Xe<Pe&&(Xe=Pe),Xe===Pe||0===N.length||0===this.length)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(Pe<0||Pe>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-V<Xe-Pe&&(Xe=N.length-V+Pe);var yt=Xe-Pe;if(this===N&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(V,Pe,Xe);else if(this===N&&Pe<V&&V<Xe)for(var Rt=yt-1;Rt>=0;--Rt)N[Rt+V]=this[Rt+Pe];else Uint8Array.prototype.set.call(N,this.subarray(Pe,Xe),V);return yt},D.prototype.fill=function(N,V,Pe,Xe){if("string"==typeof N){if("string"==typeof V?(Xe=V,V=0,Pe=this.length):"string"==typeof Pe&&(Xe=Pe,Pe=this.length),void 0!==Xe&&"string"!=typeof Xe)throw new TypeError("encoding must be a string");if("string"==typeof Xe&&!D.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(1===N.length){var yt=N.charCodeAt(0);("utf8"===Xe&&yt<128||"latin1"===Xe)&&(N=yt)}}else"number"==typeof N&&(N&=255);if(V<0||this.length<V||this.length<Pe)throw new RangeError("Out of range index");if(Pe<=V)return this;var Rt;if(V>>>=0,Pe=void 0===Pe?this.length:Pe>>>0,N||(N=0),"number"==typeof N)for(Rt=V;Rt<Pe;++Rt)this[Rt]=N;else{var In=D.isBuffer(N)?N:D.from(N,Xe),kn=In.length;if(0===kn)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(Rt=0;Rt<Pe-V;++Rt)this[Rt+V]=In[Rt%kn]}return this};var qe=/[^+/0-9A-Za-z-_]/g;function $(j){return j<16?"0"+j.toString(16):j.toString(16)}function X(j,N){N=N||1/0;for(var V,Pe=j.length,Xe=null,yt=[],Rt=0;Rt<Pe;++Rt){if((V=j.charCodeAt(Rt))>55295&&V<57344){if(!Xe){if(V>56319){(N-=3)>-1&&yt.push(239,191,189);continue}if(Rt+1===Pe){(N-=3)>-1&&yt.push(239,191,189);continue}Xe=V;continue}if(V<56320){(N-=3)>-1&&yt.push(239,191,189),Xe=V;continue}V=65536+(Xe-55296<<10|V-56320)}else Xe&&(N-=3)>-1&&yt.push(239,191,189);if(Xe=null,V<128){if((N-=1)<0)break;yt.push(V)}else if(V<2048){if((N-=2)<0)break;yt.push(V>>6|192,63&V|128)}else if(V<65536){if((N-=3)<0)break;yt.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;yt.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return yt}function Fe(j){return H.toByteArray(function(j){if((j=(j=j.split("=")[0]).trim().replace(qe,"")).length<2)return"";for(;j.length%4!=0;)j+="=";return j}(j))}function Et(j,N,V,Pe){for(var Xe=0;Xe<Pe&&!(Xe+V>=N.length||Xe>=j.length);++Xe)N[Xe+V]=j[Xe];return Xe}function pt(j,N){return j instanceof N||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===N.name}function ge(j){return j!=j}}).call(this)}).call(this,Y("buffer").Buffer)},{"base64-js":2,buffer:6,ieee754:9}],7:[function(Y,Te,fe){"use strict";Te.exports=function q(H){return null===H||"object"!=typeof H||null!=H.toJSON?JSON.stringify(H):Array.isArray(H)?"["+H.reduce((B,se,W)=>B+(0===W?"":",")+q(void 0===se||"symbol"==typeof se?null:se),"")+"]":"{"+Object.keys(H).sort().reduce((B,se,W)=>void 0===H[se]||"symbol"==typeof H[se]?B:B+(0===B.length?"":",")+q(se)+":"+q(H[se]),"")+"}"}},{}],8:[function(Y,Te,fe){"use strict";var B,q="object"==typeof Reflect?Reflect:null,H=q&&"function"==typeof q.apply?q.apply:function(z,ie,de){return Function.prototype.apply.call(z,ie,de)};B=q&&"function"==typeof q.ownKeys?q.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var W=Number.isNaN||function(z){return z!=z};function E(){E.init.call(this)}Te.exports=E,Te.exports.once=function(S,z){return new Promise(function(ie,de){function te(Ae){S.removeListener(z,oe),de(Ae)}function oe(){"function"==typeof S.removeListener&&S.removeListener("error",te),ie([].slice.call(arguments))}Q(S,z,oe,{once:!0}),"error"!==z&&function(S,z,ie){"function"==typeof S.on&&Q(S,"error",z,ie)}(S,te,{once:!0})})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var D=10;function P(S){if("function"!=typeof S)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function T(S){return void 0===S._maxListeners?E.defaultMaxListeners:S._maxListeners}function w(S,z,ie,de){var te,oe,Ae;if(P(ie),void 0===(oe=S._events)?(oe=S._events=Object.create(null),S._eventsCount=0):(void 0!==oe.newListener&&(S.emit("newListener",z,ie.listener?ie.listener:ie),oe=S._events),Ae=oe[z]),void 0===Ae)Ae=oe[z]=ie,++S._eventsCount;else if("function"==typeof Ae?Ae=oe[z]=de?[ie,Ae]:[Ae,ie]:de?Ae.unshift(ie):Ae.push(ie),(te=T(S))>0&&Ae.length>te&&!Ae.warned){Ae.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+Ae.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=S,me.type=z,me.count=Ae.length,function(S){console&&console.warn&&console.warn(S)}(me)}return S}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(S,z,ie){var de={fired:!1,wrapFn:void 0,target:S,type:z,listener:ie},te=v.bind(de);return te.listener=ie,de.wrapFn=te,te}function A(S,z,ie){var de=S._events;if(void 0===de)return[];var te=de[z];return void 0===te?[]:"function"==typeof te?ie?[te.listener||te]:[te]:ie?function(S){for(var z=new Array(S.length),ie=0;ie<z.length;++ie)z[ie]=S[ie].listener||S[ie];return z}(te):O(te,te.length)}function U(S){var z=this._events;if(void 0!==z){var ie=z[S];if("function"==typeof ie)return 1;if(void 0!==ie)return ie.length}return 0}function O(S,z){for(var ie=new Array(z),de=0;de<z;++de)ie[de]=S[de];return ie}function Q(S,z,ie,de){if("function"==typeof S.on)de.once?S.once(z,ie):S.on(z,ie);else{if("function"!=typeof S.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(z,function te(oe){de.once&&S.removeEventListener(z,te),ie(oe)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(S){if("number"!=typeof S||S<0||W(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");D=S}}),E.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(z){if("number"!=typeof z||z<0||W(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},E.prototype.getMaxListeners=function(){return T(this)},E.prototype.emit=function(z){for(var ie=[],de=1;de<arguments.length;de++)ie.push(arguments[de]);var te="error"===z,oe=this._events;if(void 0!==oe)te=te&&void 0===oe.error;else if(!te)return!1;if(te){var Ae;if(ie.length>0&&(Ae=ie[0]),Ae instanceof Error)throw Ae;var me=new Error("Unhandled error."+(Ae?" ("+Ae.message+")":""));throw me.context=Ae,me}var ne=oe[z];if(void 0===ne)return!1;if("function"==typeof ne)H(ne,this,ie);else{var be=ne.length,Re=O(ne,be);for(de=0;de<be;++de)H(Re[de],this,ie)}return!0},E.prototype.on=E.prototype.addListener=function(z,ie){return w(this,z,ie,!1)},E.prototype.prependListener=function(z,ie){return w(this,z,ie,!0)},E.prototype.once=function(z,ie){return P(ie),this.on(z,C(this,z,ie)),this},E.prototype.prependOnceListener=function(z,ie){return P(ie),this.prependListener(z,C(this,z,ie)),this},E.prototype.off=E.prototype.removeListener=function(z,ie){var de,te,oe,Ae,me;if(P(ie),void 0===(te=this._events))return this;if(void 0===(de=te[z]))return this;if(de===ie||de.listener===ie)0==--this._eventsCount?this._events=Object.create(null):(delete te[z],te.removeListener&&this.emit("removeListener",z,de.listener||ie));else if("function"!=typeof de){for(oe=-1,Ae=de.length-1;Ae>=0;Ae--)if(de[Ae]===ie||de[Ae].listener===ie){me=de[Ae].listener,oe=Ae;break}if(oe<0)return this;0===oe?de.shift():function(S,z){for(;z+1<S.length;z++)S[z]=S[z+1];S.pop()}(de,oe),1===de.length&&(te[z]=de[0]),void 0!==te.removeListener&&this.emit("removeListener",z,me||ie)}return this},E.prototype.removeAllListeners=function(z){var ie,de,te;if(void 0===(de=this._events))return this;if(void 0===de.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==de[z]&&(0==--this._eventsCount?this._events=Object.create(null):delete de[z]),this;if(0===arguments.length){var Ae,oe=Object.keys(de);for(te=0;te<oe.length;++te)"removeListener"!==(Ae=oe[te])&&this.removeAllListeners(Ae);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ie=de[z]))this.removeListener(z,ie);else if(void 0!==ie)for(te=ie.length-1;te>=0;te--)this.removeListener(z,ie[te]);return this},E.prototype.listeners=function(z){return A(this,z,!0)},E.prototype.rawListeners=function(z){return A(this,z,!1)},E.listenerCount=function(S,z){return"function"==typeof S.listenerCount?S.listenerCount(z):U.call(S,z)},E.prototype.listenerCount=U,E.prototype.eventNames=function(){return this._eventsCount>0?B(this._events):[]}},{}],9:[function(Y,Te,fe){fe.read=function(q,H,B,se,W){var E,D,P=8*W-se-1,T=(1<<P)-1,w=T>>1,v=-7,C=B?W-1:0,A=B?-1:1,U=q[H+C];for(C+=A,E=U&(1<<-v)-1,U>>=-v,v+=P;v>0;E=256*E+q[H+C],C+=A,v-=8);for(D=E&(1<<-v)-1,E>>=-v,v+=se;v>0;D=256*D+q[H+C],C+=A,v-=8);if(0===E)E=1-w;else{if(E===T)return D?NaN:1/0*(U?-1:1);D+=Math.pow(2,se),E-=w}return(U?-1:1)*D*Math.pow(2,E-se)},fe.write=function(q,H,B,se,W,E){var D,P,T,w=8*E-W-1,v=(1<<w)-1,C=v>>1,A=23===W?Math.pow(2,-24)-Math.pow(2,-77):0,U=se?0:E-1,O=se?1:-1,G=H<0||0===H&&1/H<0?1:0;for(H=Math.abs(H),isNaN(H)||H===1/0?(P=isNaN(H)?1:0,D=v):(D=Math.floor(Math.log(H)/Math.LN2),H*(T=Math.pow(2,-D))<1&&(D--,T*=2),(H+=D+C>=1?A/T:A*Math.pow(2,1-C))*T>=2&&(D++,T/=2),D+C>=v?(P=0,D=v):D+C>=1?(P=(H*T-1)*Math.pow(2,W),D+=C):(P=H*Math.pow(2,C-1)*Math.pow(2,W),D=0));W>=8;q[B+U]=255&P,U+=O,P/=256,W-=8);for(D=D<<W|P,w+=W;w>0;q[B+U]=255&D,U+=O,D/=256,w-=8);q[B+U-O]|=128*G}},{}],10:[function(Y,Te,fe){Te.exports="function"==typeof Object.create?function(H,B){B&&(H.super_=B,H.prototype=Object.create(B.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}))}:function(H,B){if(B){H.super_=B;var se=function(){};se.prototype=B.prototype,H.prototype=new se,H.prototype.constructor=H}}},{}],11:[function(Y,Te,fe){"use strict";const{isArray:q,isObject:H,isString:B}=Y("./types"),{asArray:se}=Y("./util"),{prependBase:W}=Y("./url"),E=Y("./JsonLdError"),D=Y("./ResolvedContext");function T(v){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:v})}function w({context:v,base:C}){if(!v)return;const A=v["@context"];if(B(A))v["@context"]=W(C,A);else if(q(A))for(let U=0;U<A.length;++U){const O=A[U];B(O)?A[U]=W(C,O):H(O)&&w({context:{"@context":O},base:C})}else if(H(A))for(const U in A)w({context:A[U],base:C})}Te.exports=class{constructor({sharedCache:C}){this.perOpCache=new Map,this.sharedCache=C}resolve({activeCtx:C,context:A,documentLoader:U,base:O,cycles:G=new Set}){var K=this;return gt(function*(){A&&H(A)&&A["@context"]&&(A=A["@context"]),A=se(A);const I=[];for(const L of A){if(B(L)){let z=K._get(L);z||(z=yield K._resolveRemoteContext({activeCtx:C,url:L,documentLoader:U,base:O,cycles:G})),q(z)?I.push(...z):I.push(z);continue}if(null===L){I.push(new D({document:null}));continue}H(L)||T(A);const Q=JSON.stringify(L);let S=K._get(Q);S||(S=new D({document:L}),K._cacheResolvedContext({key:Q,resolved:S,tag:"static"})),I.push(S)}return I})()}_get(C){let A=this.perOpCache.get(C);if(!A){const U=this.sharedCache.get(C);U&&(A=U.get("static"),A&&this.perOpCache.set(C,A))}return A}_cacheResolvedContext({key:C,resolved:A,tag:U}){if(this.perOpCache.set(C,A),void 0!==U){let O=this.sharedCache.get(C);O||(O=new Map,this.sharedCache.set(C,O)),O.set(U,A)}return A}_resolveRemoteContext({activeCtx:C,url:A,documentLoader:U,base:O,cycles:G}){var K=this;return gt(function*(){A=W(O,A);const{context:I,remoteDoc:L}=yield K._fetchContext({activeCtx:C,url:A,documentLoader:U,cycles:G});w({context:I,base:O=L.documentUrl||A});const Q=yield K.resolve({activeCtx:C,context:I,documentLoader:U,base:O,cycles:G});return K._cacheResolvedContext({key:A,resolved:Q,tag:L.tag}),Q})()}_fetchContext({activeCtx:C,url:A,documentLoader:U,cycles:O}){return gt(function*(){if(O.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===C.processingMode?"loading remote context failed":"context overflow",max:10});if(O.has(A))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===C.processingMode?"recursive context inclusion":"context overflow",url:A});let G,K;O.add(A);try{K=yield U(A),G=K.document||null,B(G)&&(G=JSON.parse(G))}catch(I){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:A,cause:I})}if(!H(G))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:A});return G="@context"in G?{"@context":G["@context"]}:{"@context":{}},K.contextUrl&&(q(G["@context"])||(G["@context"]=[G["@context"]]),G["@context"].push(K.contextUrl)),{context:G,remoteDoc:K}})()}}},{"./JsonLdError":12,"./ResolvedContext":16,"./types":30,"./url":31,"./util":32}],12:[function(Y,Te,fe){"use strict";Te.exports=class extends Error{constructor(H="An unspecified JSON-LD error occurred.",B="jsonld.Error",se={}){super(H),this.name=B,this.message=H,this.details=se}}},{}],13:[function(Y,Te,fe){"use strict";Te.exports=q=>{class H{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(H,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(H.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:H}),H.compact=function(B,se){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(B,se)},H.expand=function(B){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(B)},H.flatten=function(B){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(B)},H}},{}],14:[function(Y,Te,fe){"use strict";Te.exports=Y("rdf-canonize").NQuads},{"rdf-canonize":46}],15:[function(Y,Te,fe){"use strict";Te.exports=class{constructor(){this._requests={}}wrapLoader(H){const B=this;return B._loader=H,function(){return B.add.apply(B,arguments)}}add(H){var B=this;return gt(function*(){let se=B._requests[H];if(se)return Promise.resolve(se);se=B._requests[H]=B._loader(H);try{return yield se}finally{delete B._requests[H]}})()}}},{}],16:[function(Y,Te,fe){"use strict";const q=Y("lru-cache");Te.exports=class{constructor({document:se}){this.document=se,this.cache=new q({max:10})}getProcessed(se){return this.cache.get(se)}setProcessed(se,W){this.cache.set(se,W)}}},{"lru-cache":33}],17:[function(Y,Te,fe){"use strict";const q=Y("./JsonLdError"),{isArray:H,isObject:B,isString:se,isUndefined:W}=Y("./types"),{isList:E,isValue:D,isGraph:P,isSimpleGraph:T,isSubjectReference:w}=Y("./graphTypes"),{expandIri:v,getContextValue:C,isKeyword:A,process:U,processingMode:O}=Y("./context"),{removeBase:G,prependBase:K}=Y("./url"),{addValue:I,asArray:L,compareShortestLeast:Q}=Y("./util"),S={};function ie(de,te,oe){if("@nest"!==v(de,te,{vocab:!0},oe))throw new q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Te.exports=S,S.compact=function(){var de=gt(function*({activeCtx:te,activeProperty:oe=null,element:Ae,options:me={},compactionMap:ne=(()=>{})}){if(H(Ae)){let Re=[];for(let He=0;He<Ae.length;++He){let nt=yield S.compact({activeCtx:te,activeProperty:oe,element:Ae[He],options:me,compactionMap:ne});null===nt&&(nt=yield ne({unmappedValue:Ae[He],activeCtx:te,activeProperty:oe,parent:Ae,index:He,options:me}),void 0===nt)||Re.push(nt)}return me.compactArrays&&1===Re.length&&0===(C(te,oe,"@container")||[]).length&&(Re=Re[0]),Re}const be=C(te,oe,"@context");if(W(be)||(te=yield U({activeCtx:te,localCtx:be,propagate:!0,overrideProtected:!0,options:me})),B(Ae)){if(me.link&&"@id"in Ae&&me.link.hasOwnProperty(Ae["@id"])){const Le=me.link[Ae["@id"]];for(let Ce=0;Ce<Le.length;++Ce)if(Le[Ce].expanded===Ae)return Le[Ce].compacted}if(D(Ae)||w(Ae)){const Le=S.compactValue({activeCtx:te,activeProperty:oe,value:Ae,options:me});return me.link&&w(Ae)&&(me.link.hasOwnProperty(Ae["@id"])||(me.link[Ae["@id"]]=[]),me.link[Ae["@id"]].push({expanded:Ae,compacted:Le})),Le}if(E(Ae)&&(C(te,oe,"@container")||[]).includes("@list"))return S.compact({activeCtx:te,activeProperty:oe,element:Ae["@list"],options:me,compactionMap:ne});const Re="@reverse"===oe,He={},nt=te;!D(Ae)&&!w(Ae)&&(te=te.revertToPreviousContext());const Ze=C(nt,oe,"@context");W(Ze)||(te=yield U({activeCtx:te,localCtx:Ze,propagate:!0,overrideProtected:!0,options:me})),me.link&&"@id"in Ae&&(me.link.hasOwnProperty(Ae["@id"])||(me.link[Ae["@id"]]=[]),me.link[Ae["@id"]].push({expanded:Ae,compacted:He}));let Je=Ae["@type"]||[];Je.length>1&&(Je=Array.from(Je).sort());const Ke=te;for(const Le of Je){const Ce=S.compactIri({activeCtx:Ke,iri:Le,relativeTo:{vocab:!0}}),Ne=C(nt,Ce,"@context");W(Ne)||(te=yield U({activeCtx:te,localCtx:Ne,options:me,propagate:!1}))}const je=Object.keys(Ae).sort();for(const Le of je){const Ce=Ae[Le];if("@id"!==Le)if("@type"!==Le)if("@reverse"!==Le)if("@preserve"!==Le)if("@index"!==Le)if("@graph"!==Le&&"@list"!==Le&&"@included"!==Le&&A(Le)){const Ne=S.compactIri({activeCtx:te,iri:Le,relativeTo:{vocab:!0}});I(He,Ne,Ce)}else{if(!H(Ce))throw new q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Ce.length){const Ne=S.compactIri({activeCtx:te,iri:Le,value:Ce,relativeTo:{vocab:!0},reverse:Re}),ze=te.mappings.has(Ne)?te.mappings.get(Ne)["@nest"]:null;let qe=He;ze&&(ie(te,ze,me),B(He[ze])||(He[ze]={}),qe=He[ze]),I(qe,Ne,Ce,{propertyIsArray:!0})}for(const Ne of Ce){const ze=S.compactIri({activeCtx:te,iri:Le,value:Ne,relativeTo:{vocab:!0},reverse:Re}),qe=te.mappings.has(ze)?te.mappings.get(ze)["@nest"]:null;let Ve=He;qe&&(ie(te,qe,me),B(He[qe])||(He[qe]={}),Ve=He[qe]);const $=C(te,ze,"@container")||[],X=P(Ne),we=E(Ne);let ue;we?ue=Ne["@list"]:X&&(ue=Ne["@graph"]);let Fe=yield S.compact({activeCtx:te,activeProperty:ze,element:we||X?ue:Ne,options:me,compactionMap:ne});if(we){if(H(Fe)||(Fe=[Fe]),$.includes("@list")){I(Ve,ze,Fe,{valueIsArray:!0,allowDuplicate:!0});continue}Fe={[S.compactIri({activeCtx:te,iri:"@list",relativeTo:{vocab:!0}})]:Fe},"@index"in Ne&&(Fe[S.compactIri({activeCtx:te,iri:"@index",relativeTo:{vocab:!0}})]=Ne["@index"])}if(X)if($.includes("@graph")&&($.includes("@id")||$.includes("@index")&&T(Ne))){let Et;Ve.hasOwnProperty(ze)?Et=Ve[ze]:Ve[ze]=Et={};const pt=($.includes("@id")?Ne["@id"]:Ne["@index"])||S.compactIri({activeCtx:te,iri:"@none",relativeTo:{vocab:!0}});I(Et,pt,Fe,{propertyIsArray:!me.compactArrays||$.includes("@set")})}else $.includes("@graph")&&T(Ne)?(H(Fe)&&Fe.length>1&&(Fe={"@included":Fe}),I(Ve,ze,Fe,{propertyIsArray:!me.compactArrays||$.includes("@set")})):(H(Fe)&&1===Fe.length&&me.compactArrays&&(Fe=Fe[0]),Fe={[S.compactIri({activeCtx:te,iri:"@graph",relativeTo:{vocab:!0}})]:Fe},"@id"in Ne&&(Fe[S.compactIri({activeCtx:te,iri:"@id",relativeTo:{vocab:!0}})]=Ne["@id"]),"@index"in Ne&&(Fe[S.compactIri({activeCtx:te,iri:"@index",relativeTo:{vocab:!0}})]=Ne["@index"]),I(Ve,ze,Fe,{propertyIsArray:!me.compactArrays||$.includes("@set")}));else if($.includes("@language")||$.includes("@index")||$.includes("@id")||$.includes("@type")){let Et,pt;if(Ve.hasOwnProperty(ze)?Et=Ve[ze]:Ve[ze]=Et={},$.includes("@language"))D(Fe)&&(Fe=Fe["@value"]),pt=Ne["@language"];else if($.includes("@index")){const ge=C(te,ze,"@index")||"@index",j=S.compactIri({activeCtx:te,iri:ge,relativeTo:{vocab:!0}});if("@index"===ge)pt=Ne["@index"],delete Fe[j];else{let N;if([pt,...N]=L(Fe[ge]||[]),se(pt))switch(N.length){case 0:delete Fe[ge];break;case 1:Fe[ge]=N[0];break;default:Fe[ge]=N}else pt=null}}else if($.includes("@id")){const ge=S.compactIri({activeCtx:te,iri:"@id",relativeTo:{vocab:!0}});pt=Fe[ge],delete Fe[ge]}else if($.includes("@type")){const ge=S.compactIri({activeCtx:te,iri:"@type",relativeTo:{vocab:!0}});let j;switch([pt,...j]=L(Fe[ge]||[]),j.length){case 0:delete Fe[ge];break;case 1:Fe[ge]=j[0];break;default:Fe[ge]=j}1===Object.keys(Fe).length&&"@id"in Ne&&(Fe=yield S.compact({activeCtx:te,activeProperty:ze,element:{"@id":Ne["@id"]},options:me,compactionMap:ne}))}pt||(pt=S.compactIri({activeCtx:te,iri:"@none",relativeTo:{vocab:!0}})),I(Et,pt,Fe,{propertyIsArray:$.includes("@set")})}else{const Et=!me.compactArrays||$.includes("@set")||$.includes("@list")||H(Fe)&&0===Fe.length||"@list"===Le||"@graph"===Le;I(Ve,ze,Fe,{propertyIsArray:Et})}}}else{if((C(te,oe,"@container")||[]).includes("@index"))continue;const ze=S.compactIri({activeCtx:te,iri:Le,relativeTo:{vocab:!0}});I(He,ze,Ce)}else{const Ne=yield S.compact({activeCtx:te,activeProperty:oe,element:Ce,options:me,compactionMap:ne});H(Ne)&&0===Ne.length||I(He,Le,Ne)}else{const Ne=yield S.compact({activeCtx:te,activeProperty:"@reverse",element:Ce,options:me,compactionMap:ne});for(const ze in Ne)if(te.mappings.has(ze)&&te.mappings.get(ze).reverse){const qe=Ne[ze],$=(C(te,ze,"@container")||[]).includes("@set")||!me.compactArrays;I(He,ze,qe,{propertyIsArray:$}),delete Ne[ze]}if(Object.keys(Ne).length>0){const ze=S.compactIri({activeCtx:te,iri:Le,relativeTo:{vocab:!0}});I(He,ze,Ne)}}else{let Ne=L(Ce).map(X=>S.compactIri({activeCtx:nt,iri:X,relativeTo:{vocab:!0}}));1===Ne.length&&(Ne=Ne[0]);const ze=S.compactIri({activeCtx:te,iri:"@type",relativeTo:{vocab:!0}}),$=(C(te,ze,"@container")||[]).includes("@set")&&O(te,1.1)||H(Ne)&&0===Ce.length;I(He,ze,Ne,{propertyIsArray:$})}else{let Ne=L(Ce).map(qe=>S.compactIri({activeCtx:te,iri:qe,relativeTo:{vocab:!1},base:me.base}));1===Ne.length&&(Ne=Ne[0]),He[S.compactIri({activeCtx:te,iri:"@id",relativeTo:{vocab:!0}})]=Ne}}return He}return Ae});return function(te){return de.apply(this,arguments)}}(),S.compactIri=({activeCtx:de,iri:te,value:oe=null,relativeTo:Ae={vocab:!1},reverse:me=!1,base:ne=null})=>{if(null===te)return te;de.isPropertyTermScoped&&de.previousContext&&(de=de.previousContext);const be=de.getInverse();if(A(te)&&te in be&&"@none"in be[te]&&"@type"in be[te]["@none"]&&"@none"in be[te]["@none"]["@type"])return be[te]["@none"]["@type"]["@none"];if(Ae.vocab&&te in be){const Je=de["@language"]||"@none",Ke=[];B(oe)&&"@index"in oe&&!("@graph"in oe)&&Ke.push("@index","@index@set"),B(oe)&&"@preserve"in oe&&(oe=oe["@preserve"][0]),P(oe)?("@index"in oe&&Ke.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in oe&&Ke.push("@graph@id","@graph@id@set"),Ke.push("@graph","@graph@set","@set"),"@index"in oe||Ke.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in oe||Ke.push("@graph@id","@graph@id@set")):B(oe)&&!D(oe)&&Ke.push("@id","@id@set","@type","@set@type");let je="@language",Le="@null";if(me)je="@type",Le="@reverse",Ke.push("@set");else if(E(oe)){"@index"in oe||Ke.push("@list");const Ne=oe["@list"];if(0===Ne.length)je="@any",Le="@none";else{let ze=0===Ne.length?Je:null,qe=null;for(let Ve=0;Ve<Ne.length;++Ve){const $=Ne[Ve];let X="@none",we="@none";if(D($)?"@direction"in $?X=`${($["@language"]||"").toLowerCase()}_${$["@direction"]}`:"@language"in $?X=$["@language"].toLowerCase():"@type"in $?we=$["@type"]:X="@null":we="@id",null===ze?ze=X:X!==ze&&D($)&&(ze="@none"),null===qe?qe=we:we!==qe&&(qe="@none"),"@none"===ze&&"@none"===qe)break}ze=ze||"@none",qe=qe||"@none","@none"!==qe?(je="@type",Le=qe):Le=ze}}else{if(D(oe))if("@language"in oe&&!("@index"in oe)){Ke.push("@language","@language@set"),Le=oe["@language"];const Ne=oe["@direction"];Ne&&(Le=`${Le}_${Ne}`)}else"@direction"in oe&&!("@index"in oe)?Le=`_${oe["@direction"]}`:"@type"in oe&&(je="@type",Le=oe["@type"]);else je="@type",Le="@id";Ke.push("@set")}Ke.push("@none"),B(oe)&&!("@index"in oe)&&Ke.push("@index","@index@set"),D(oe)&&1===Object.keys(oe).length&&Ke.push("@language","@language@set");const Ce=function(de,te,oe,Ae,me,ne){null===ne&&(ne="@null");const be=[];if(("@id"===ne||"@reverse"===ne)&&B(oe)&&"@id"in oe){"@reverse"===ne&&be.push("@reverse");const He=S.compactIri({activeCtx:de,iri:oe["@id"],relativeTo:{vocab:!0}});de.mappings.has(He)&&de.mappings.get(He)&&de.mappings.get(He)["@id"]===oe["@id"]?be.push.apply(be,["@vocab","@id"]):be.push.apply(be,["@id","@vocab"])}else{be.push(ne);const He=be.find(nt=>nt.includes("_"));He&&be.push(He.replace(/^[^_]+_/,"_"))}be.push("@none");const Re=de.inverse[te];for(const He of Ae){if(!(He in Re))continue;const nt=Re[He][me];for(const Ze of be)if(Ze in nt)return nt[Ze]}return null}(de,te,oe,Ke,je,Le);if(null!==Ce)return Ce}if(Ae.vocab&&"@vocab"in de){const Je=de["@vocab"];if(0===te.indexOf(Je)&&te!==Je){const Ke=te.substr(Je.length);if(!de.mappings.has(Ke))return Ke}}let Re=null;const He=[];let nt=de.fastCurieMap;const Ze=te.length-1;for(let Je=0;Je<Ze&&te[Je]in nt;++Je)nt=nt[te[Je]],""in nt&&He.push(nt[""][0]);for(let Je=He.length-1;Je>=0;--Je){const Ke=He[Je],je=Ke.terms;for(const Le of je){const Ce=Le+":"+te.substr(Ke.iri.length);de.mappings.get(Le)._prefix&&(!de.mappings.has(Ce)||null===oe&&de.mappings.get(Ce)["@id"]===te)&&(null===Re||Q(Ce,Re)<0)&&(Re=Ce)}}if(null!==Re)return Re;for(const[Je,Ke]of de.mappings)if(Ke&&Ke._prefix&&te.startsWith(Je+":"))throw new q(`Absolute IRI "${te}" confused with prefix "${Je}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:de});return Ae.vocab?te:"@base"in de?de["@base"]?G(K(ne,de["@base"]),te):te:G(ne,te)},S.compactValue=({activeCtx:de,activeProperty:te,value:oe,options:Ae})=>{if(D(oe)){const Re=C(de,te,"@type"),He=C(de,te,"@language"),nt=C(de,te,"@direction"),Ze=C(de,te,"@container")||[],Je="@index"in oe&&!Ze.includes("@index");if(!Je&&"@none"!==Re&&(oe["@type"]===Re||"@language"in oe&&oe["@language"]===He&&"@direction"in oe&&oe["@direction"]===nt||"@language"in oe&&oe["@language"]===He||"@direction"in oe&&oe["@direction"]===nt))return oe["@value"];const Ke=Object.keys(oe).length,je=1===Ke||2===Ke&&"@index"in oe&&!Je,Le="@language"in de,Ce=se(oe["@value"]),Ne=de.mappings.has(te)&&null===de.mappings.get(te)["@language"];if(je&&"@none"!==Re&&(!Le||!Ce||Ne))return oe["@value"];const ze={};return Je&&(ze[S.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=oe["@index"]),"@type"in oe?ze[S.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}})]=S.compactIri({activeCtx:de,iri:oe["@type"],relativeTo:{vocab:!0}}):"@language"in oe&&(ze[S.compactIri({activeCtx:de,iri:"@language",relativeTo:{vocab:!0}})]=oe["@language"]),"@direction"in oe&&(ze[S.compactIri({activeCtx:de,iri:"@direction",relativeTo:{vocab:!0}})]=oe["@direction"]),ze[S.compactIri({activeCtx:de,iri:"@value",relativeTo:{vocab:!0}})]=oe["@value"],ze}const me=v(de,te,{vocab:!0},Ae),ne=C(de,te,"@type"),be=S.compactIri({activeCtx:de,iri:oe["@id"],relativeTo:{vocab:"@vocab"===ne},base:Ae.base});return"@id"===ne||"@vocab"===ne||"@graph"===me?be:{[S.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]:be}}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],18:[function(Y,Te,fe){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",H="http://www.w3.org/2001/XMLSchema#";Te.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:H,XSD_BOOLEAN:H+"boolean",XSD_DOUBLE:H+"double",XSD_INTEGER:H+"integer",XSD_STRING:H+"string"}},{}],19:[function(Y,Te,fe){"use strict";const q=Y("./util"),H=Y("./JsonLdError"),{isArray:B,isObject:se,isString:W,isUndefined:E}=Y("./types"),{isAbsolute:D,isRelative:P,prependBase:T}=Y("./url"),{asArray:w,compareShortestLeast:v}=Y("./util"),C=new Map,U=/^@[a-zA-Z]+$/,O={};function G(I,L,Q,S,z,ie){if(null===L||!W(L)||O.isKeyword(L))return L;if(L.match(U))return null;if(S&&S.hasOwnProperty(L)&&!0!==z.get(L)&&O.createTermDefinition({activeCtx:I,localCtx:S,term:L,defined:z,options:ie}),(Q=Q||{}).vocab){const te=I.mappings.get(L);if(null===te)return null;if(se(te)&&"@id"in te)return te["@id"]}const de=L.indexOf(":");if(de>0){const te=L.substr(0,de),oe=L.substr(de+1);if("_"===te||0===oe.indexOf("//"))return L;S&&S.hasOwnProperty(te)&&O.createTermDefinition({activeCtx:I,localCtx:S,term:te,defined:z,options:ie});const Ae=I.mappings.get(te);if(Ae&&Ae._prefix)return Ae["@id"]+oe;if(D(L))return L}if(Q.vocab&&"@vocab"in I)return I["@vocab"]+L;if(Q.base&&"@base"in I){if(I["@base"])return T(T(ie.base,I["@base"]),L)}else if(Q.base)return T(ie.base,L);return L}function K(I,L){if(!I||"object"!=typeof I||!L||"object"!=typeof L)return I===L;const Q=Array.isArray(I);if(Q!==Array.isArray(L))return!1;if(Q){if(I.length!==L.length)return!1;for(let ie=0;ie<I.length;++ie)if(!K(I[ie],L[ie]))return!1;return!0}const S=Object.keys(I),z=Object.keys(L);if(S.length!==z.length)return!1;for(const ie in I){let de=I[ie],te=L[ie];if("@container"===ie&&Array.isArray(de)&&Array.isArray(te)&&(de=de.slice().sort(),te=te.slice().sort()),!K(de,te))return!1}return!0}Te.exports=O,O.process=function(){var I=gt(function*({activeCtx:L,localCtx:Q,options:S,propagate:z=!0,overrideProtected:ie=!1,cycles:de=new Set}){if(se(Q)&&"@context"in Q&&B(Q["@context"])&&(Q=Q["@context"]),0===w(Q).length)return L;const oe=yield S.contextResolver.resolve({activeCtx:L,context:Q,documentLoader:S.documentLoader,base:S.base});se(oe[0].document)&&"boolean"==typeof oe[0].document["@propagate"]&&(z=oe[0].document["@propagate"]);let Ae=L;!z&&!Ae.previousContext&&(Ae=Ae.clone(),Ae.previousContext=L);for(const me of oe){let{document:ne}=me;if(L=Ae,null===ne){if(!ie&&0!==Object.keys(L.protected).length){const He=S&&S.protectedMode||"error";if("error"===He)throw new H("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===He){console.warn("WARNING: invalid context nullification");const nt=me.getProcessed(L);if(nt){Ae=L=nt;continue}const Ze=L;Ae=L=O.getInitialContext(S).clone();for(const[Je,Ke]of Object.entries(Ze.protected))Ke&&(L.mappings[Je]=q.clone(Ze.mappings[Je]));L.protected=q.clone(Ze.protected),me.setProcessed(Ze,Ae);continue}throw new H("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:Q,protectedMode:He})}Ae=L=O.getInitialContext(S).clone();continue}const be=me.getProcessed(L);if(be){Ae=L=be;continue}if(se(ne)&&"@context"in ne&&(ne=ne["@context"]),!se(ne))throw new H("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ne});Ae=Ae.clone();const Re=new Map;if("@version"in ne){if(1.1!==ne["@version"])throw new H("Unsupported JSON-LD version: "+ne["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ne});if(L.processingMode&&"json-ld-1.0"===L.processingMode)throw new H("@version: "+ne["@version"]+" not compatible with "+L.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ne});Ae.processingMode="json-ld-1.1",Ae["@version"]=ne["@version"],Re.set("@version",!0)}if(Ae.processingMode=Ae.processingMode||L.processingMode,"@base"in ne){let He=ne["@base"];if(null!==He&&!D(He)){if(!P(He))throw new H('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ne});He=T(Ae["@base"],He)}Ae["@base"]=He,Re.set("@base",!0)}if("@vocab"in ne){const He=ne["@vocab"];if(null===He)delete Ae["@vocab"];else{if(!W(He))throw new H('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ne});if(!D(He)&&O.processingMode(Ae,1))throw new H('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ne});Ae["@vocab"]=G(Ae,He,{vocab:!0,base:!0},void 0,void 0,S)}Re.set("@vocab",!0)}if("@language"in ne){const He=ne["@language"];if(null===He)delete Ae["@language"];else{if(!W(He))throw new H('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ne});Ae["@language"]=He.toLowerCase()}Re.set("@language",!0)}if("@direction"in ne){const He=ne["@direction"];if("json-ld-1.0"===L.processingMode)throw new H("Invalid JSON-LD syntax; @direction not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ne});if(null===He)delete Ae["@direction"];else{if("ltr"!==He&&"rtl"!==He)throw new H('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ne});Ae["@direction"]=He}Re.set("@direction",!0)}if("@propagate"in ne){const He=ne["@propagate"];if("json-ld-1.0"===L.processingMode)throw new H("Invalid JSON-LD syntax; @propagate not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ne});if("boolean"!=typeof He)throw new H("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:Q});Re.set("@propagate",!0)}if("@import"in ne){const He=ne["@import"];if("json-ld-1.0"===L.processingMode)throw new H("Invalid JSON-LD syntax; @import not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ne});if(!W(He))throw new H("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:Q});const nt=yield S.contextResolver.resolve({activeCtx:L,context:He,documentLoader:S.documentLoader,base:S.base});if(1!==nt.length)throw new H("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:Q});const Ze=nt[0].getProcessed(L);if(Ze)ne=Ze;else{const Je=nt[0].document;if("@import"in Je)throw new H("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:Q});for(const Ke in Je)ne.hasOwnProperty(Ke)||(ne[Ke]=Je[Ke]);nt[0].setProcessed(L,ne)}Re.set("@import",!0)}Re.set("@protected",ne["@protected"]||!1);for(const He in ne)if(O.createTermDefinition({activeCtx:Ae,localCtx:ne,term:He,defined:Re,options:S,overrideProtected:ie}),se(ne[He])&&"@context"in ne[He]){const nt=ne[He]["@context"];let Ze=!0;if(W(nt)){const Je=T(S.base,nt);de.has(Je)?Ze=!1:de.add(Je)}if(Ze)try{yield O.process({activeCtx:Ae.clone(),localCtx:ne[He]["@context"],overrideProtected:!0,options:S,cycles:de})}catch(Je){throw new H("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ne[He]["@context"],term:He})}}me.setProcessed(L,Ae)}return Ae});return function(L){return I.apply(this,arguments)}}(),O.createTermDefinition=({activeCtx:I,localCtx:L,term:Q,defined:S,options:z,overrideProtected:ie=!1})=>{if(S.has(Q)){if(S.get(Q))return;throw new H("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:L,term:Q})}let de;if(S.set(Q,!1),L.hasOwnProperty(Q)&&(de=L[Q]),"@type"===Q&&se(de)&&"@set"===(de["@container"]||"@set")&&O.processingMode(I,1.1)){const Re=["@container","@id","@protected"],He=Object.keys(de);if(0===He.length||He.some(nt=>!Re.includes(nt)))throw new H("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:Q})}else{if(O.isKeyword(Q))throw new H("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:Q});if(Q.match(U))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:Q});if(""===Q)throw new H("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:L})}const te=I.mappings.get(Q);I.mappings.has(Q)&&I.mappings.delete(Q);let oe=!1;if((W(de)||null===de)&&(oe=!0,de={"@id":de}),!se(de))throw new H("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:L});const Ae={};I.mappings.set(Q,Ae),Ae.reverse=!1;const me=["@container","@id","@language","@reverse","@type"];O.processingMode(I,1.1)&&me.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Re in de)if(!me.includes(Re))throw new H("Invalid JSON-LD syntax; a term definition must not contain "+Re,"jsonld.SyntaxError",{code:"invalid term definition",context:L});const ne=Q.indexOf(":");if(Ae._termHasColon=ne>0,"@reverse"in de){if("@id"in de)throw new H("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});if("@nest"in de)throw new H("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});const Re=de["@reverse"];if(!W(Re))throw new H("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(!O.isKeyword(Re)&&Re.match(U))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:Re}),void(te?I.mappings.set(Q,te):I.mappings.delete(Q));const He=G(I,Re,{vocab:!0,base:!1},L,S,z);if(!D(He))throw new H("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});Ae["@id"]=He,Ae.reverse=!0}else if("@id"in de){let Re=de["@id"];if(Re&&!W(Re))throw new H("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(null===Re)Ae["@id"]=null;else{if(!O.isKeyword(Re)&&Re.match(U))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:Re}),void(te?I.mappings.set(Q,te):I.mappings.delete(Q));if(Re!==Q){if(Re=G(I,Re,{vocab:!0,base:!1},L,S,z),!D(Re)&&!O.isKeyword(Re))throw new H("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(Q.match(/(?::[^:])|\//)&&G(I,Q,{vocab:!0,base:!1},L,new Map(S).set(Q,!0),z)!==Re)throw new H("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});Ae["@id"]=Re,Ae._prefix=oe&&!Ae._termHasColon&&Re.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in Ae))if(Ae._termHasColon){const Re=Q.substr(0,ne);if(L.hasOwnProperty(Re)&&O.createTermDefinition({activeCtx:I,localCtx:L,term:Re,defined:S,options:z}),I.mappings.has(Re)){const He=Q.substr(ne+1);Ae["@id"]=I.mappings.get(Re)["@id"]+He}else Ae["@id"]=Q}else if("@type"===Q)Ae["@id"]=Q;else{if(!("@vocab"in I))throw new H("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L,term:Q});Ae["@id"]=I["@vocab"]+Q}if((!0===de["@protected"]||!0===S.get("@protected")&&!1!==de["@protected"])&&(I.protected[Q]=!0,Ae.protected=!0),S.set(Q,!0),"@type"in de){let Re=de["@type"];if(!W(Re))throw new H("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if("@json"===Re||"@none"===Re){if(O.processingMode(I,1))throw new H(`Invalid JSON-LD syntax; an @context @type value must not be "${Re}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else if("@id"!==Re&&"@vocab"!==Re){if(Re=G(I,Re,{vocab:!0,base:!1},L,S,z),!D(Re))throw new H("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if(0===Re.indexOf("_:"))throw new H("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}Ae["@type"]=Re}if("@container"in de){const Re=W(de["@container"])?[de["@container"]]:de["@container"]||[],He=["@list","@set","@index","@language"];let nt=!0;const Ze=Re.includes("@set");if(O.processingMode(I,1.1)){if(He.push("@graph","@id","@type"),Re.includes("@list")){if(1!==Re.length)throw new H("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else if(Re.includes("@graph")){if(Re.some(Je=>"@graph"!==Je&&"@id"!==Je&&"@index"!==Je&&"@set"!==Je))throw new H("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else nt&=Re.length<=(Ze?2:1);if(Re.includes("@type")&&(Ae["@type"]=Ae["@type"]||"@id",!["@id","@vocab"].includes(Ae["@type"])))throw new H("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else nt&=!B(de["@container"]),nt&=Re.length<=1;if(nt&=Re.every(Je=>He.includes(Je)),nt&=!(Ze&&Re.includes("@list")),!nt)throw new H("Invalid JSON-LD syntax; @context @container value must be one of the following: "+He.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:L});if(Ae.reverse&&!Re.every(Je=>["@index","@set"].includes(Je)))throw new H("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});Ae["@container"]=Re}if("@index"in de){if(!("@container"in de)||!Ae["@container"].includes("@index"))throw new H(`Invalid JSON-LD syntax; @index without @index in @container: "${de["@index"]}" on term "${Q}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});if(!W(de["@index"])||0===de["@index"].indexOf("@"))throw new H(`Invalid JSON-LD syntax; @index must expand to an IRI: "${de["@index"]}" on term "${Q}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});Ae["@index"]=de["@index"]}if("@context"in de&&(Ae["@context"]=de["@context"]),"@language"in de&&!("@type"in de)){let Re=de["@language"];if(null!==Re&&!W(Re))throw new H("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:L});null!==Re&&(Re=Re.toLowerCase()),Ae["@language"]=Re}if("@prefix"in de){if(Q.match(/:|\//))throw new H("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:L});if(O.isKeyword(Ae["@id"]))throw new H("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:L});if("boolean"!=typeof de["@prefix"])throw new H("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:L});Ae._prefix=!0===de["@prefix"]}if("@direction"in de){const Re=de["@direction"];if(null!==Re&&"ltr"!==Re&&"rtl"!==Re)throw new H('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:L});Ae["@direction"]=Re}if("@nest"in de){const Re=de["@nest"];if(!W(Re)||"@nest"!==Re&&0===Re.indexOf("@"))throw new H("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:L});Ae["@nest"]=Re}const be=Ae["@id"];if("@context"===be||"@preserve"===be)throw new H("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:L});if(te&&te.protected&&!ie&&(I.protected[Q]=!0,Ae.protected=!0,!K(te,Ae))){const Re=z&&z.protectedMode||"error";if("error"===Re)throw new H(`Invalid JSON-LD syntax; tried to redefine "${Q}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:L,term:Q});if("warn"===Re)return void console.warn("WARNING: protected term redefinition",{term:Q});throw new H("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:L,term:Q,protectedMode:Re})}},O.expandIri=(I,L,Q,S)=>G(I,L,Q,void 0,void 0,S),O.getInitialContext=I=>{const L=JSON.stringify({processingMode:I.processingMode}),Q=C.get(L);if(Q)return Q;const S={processingMode:I.processingMode,mappings:new Map,inverse:null,getInverse:function(){const Ae=this;if(Ae.inverse)return Ae.inverse;const me=Ae.inverse={},ne=Ae.fastCurieMap={},be={},Re=(Ae["@language"]||"@none").toLowerCase(),He=Ae["@direction"],nt=Ae.mappings,Ze=[...nt.keys()].sort(v);for(const Je of Ze){const Ke=nt.get(Je);if(null===Ke)continue;let je=Ke["@container"]||"@none";if(je=[].concat(je).sort().join(""),null===Ke["@id"])continue;const Le=w(Ke["@id"]);for(const Ce of Le){let Ne=me[Ce];const ze=O.isKeyword(Ce);if(Ne)!ze&&!Ke._termHasColon&&be[Ce].push(Je);else if(me[Ce]=Ne={},!ze&&!Ke._termHasColon){be[Ce]=[Je];const qe={iri:Ce,terms:be[Ce]};Ce[0]in ne?ne[Ce[0]].push(qe):ne[Ce[0]]=[qe]}if(Ne[je]||(Ne[je]={"@language":{},"@type":{},"@any":{}}),Ne=Ne[je],de(Je,Ne["@any"],"@none"),Ke.reverse)de(Je,Ne["@type"],"@reverse");else if("@none"===Ke["@type"])de(Je,Ne["@any"],"@none"),de(Je,Ne["@language"],"@none"),de(Je,Ne["@type"],"@none");else if("@type"in Ke)de(Je,Ne["@type"],Ke["@type"]);else if("@language"in Ke&&"@direction"in Ke){const qe=Ke["@language"],Ve=Ke["@direction"];de(Je,Ne["@language"],qe&&Ve?`${qe}_${Ve}`.toLowerCase():qe?qe.toLowerCase():Ve?`_${Ve}`:"@null")}else"@language"in Ke?de(Je,Ne["@language"],(Ke["@language"]||"@null").toLowerCase()):"@direction"in Ke?de(Je,Ne["@language"],Ke["@direction"]?`_${Ke["@direction"]}`:"@none"):He?(de(Je,Ne["@language"],`_${He}`),de(Je,Ne["@language"],"@none"),de(Je,Ne["@type"],"@none")):(de(Je,Ne["@language"],Re),de(Je,Ne["@language"],"@none"),de(Je,Ne["@type"],"@none"))}}for(const Je in ne)ie(ne,Je,1);return me},clone:function(){const Ae={};return Ae.mappings=q.clone(this.mappings),Ae.clone=this.clone,Ae.inverse=null,Ae.getInverse=this.getInverse,Ae.protected=q.clone(this.protected),this.previousContext&&(Ae.previousContext=this.previousContext.clone()),Ae.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Ae["@base"]=this["@base"]),"@language"in this&&(Ae["@language"]=this["@language"]),"@vocab"in this&&(Ae["@vocab"]=this["@vocab"]),Ae},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===C.size&&C.clear(),C.set(L,S),S;function ie(Ae,me,ne){const be=Ae[me],Re=Ae[me]={};let He,nt;for(const Ze of be)He=Ze.iri,nt=ne>=He.length?"":He[ne],nt in Re?Re[nt].push(Ze):Re[nt]=[Ze];for(const Ze in Re)""!==Ze&&ie(Re,Ze,ne+1)}function de(Ae,me,ne){me.hasOwnProperty(ne)||(me[ne]=Ae)}},O.getContextValue=(I,L,Q)=>{if(null===L)return"@context"===Q?void 0:null;if(I.mappings.has(L)){const S=I.mappings.get(L);if(E(Q))return S;if(S.hasOwnProperty(Q))return S[Q]}return"@language"===Q&&Q in I||"@direction"===Q&&Q in I?I[Q]:"@context"!==Q?null:void 0},O.processingMode=(I,L)=>L.toString()>="1.1"?!I.processingMode||I.processingMode>="json-ld-"+L.toString():"json-ld-1.0"===I.processingMode,O.isKeyword=I=>{if(!W(I)||"@"!==I[0])return!1;switch(I){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":12,"./types":30,"./url":31,"./util":32}],20:[function(Y,Te,fe){"use strict";const{parseLinkHeader:q,buildHeaders:H}=Y("../util"),{LINK_HEADER_CONTEXT:B}=Y("../constants"),se=Y("../JsonLdError"),W=Y("../RequestQueue"),{prependBase:E}=Y("../url"),D=/(^|(\r\n))link:/i;function P(T,w,v){const C=new(T=T||XMLHttpRequest);return new Promise((A,U)=>{C.onload=()=>A(C),C.onerror=O=>U(O),C.open("GET",w,!0);for(const O in v)C.setRequestHeader(O,v[O]);C.send()})}Te.exports=({secure:T,headers:w={},xhr:v}={headers:{}})=>{return w=H(w),(new W).wrapLoader(A);function A(O){return U.apply(this,arguments)}function U(){return(U=gt(function*(O){if(0!==O.indexOf("http:")&&0!==O.indexOf("https:"))throw new se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:O});if(T&&0!==O.indexOf("https"))throw new se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:O});let G;try{G=yield P(v,O,w)}catch(S){throw new se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:O,cause:S})}if(G.status>=400)throw new se("URL could not be dereferenced: "+G.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:O,httpStatusCode:G.status});let K={contextUrl:null,documentUrl:O,document:G.response},I=null;const L=G.getResponseHeader("Content-Type");let Q;if(D.test(G.getAllResponseHeaders())&&(Q=G.getResponseHeader("Link")),Q&&"application/ld+json"!==L){const S=q(Q),z=S[B];if(Array.isArray(z))throw new se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:O});z&&(K.contextUrl=z.target),I=S.alternate,I&&"application/ld+json"==I.type&&!(L||"").match(/^application\/(\w*\+)?json$/)&&(K=yield A(E(O,I.target)))}return K})).apply(this,arguments)}}},{"../JsonLdError":12,"../RequestQueue":15,"../constants":18,"../url":31,"../util":32}],21:[function(Y,Te,fe){"use strict";const q=Y("./JsonLdError"),{isArray:H,isObject:B,isEmptyObject:se,isString:W,isUndefined:E}=Y("./types"),{isList:D,isValue:P,isGraph:T,isSubject:w}=Y("./graphTypes"),{expandIri:v,getContextValue:C,isKeyword:A,process:U,processingMode:O}=Y("./context"),{isAbsolute:G}=Y("./url"),{addValue:K,asArray:I,getValues:L,validateTypeValue:Q}=Y("./util"),S={};Te.exports=S;const z=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function ie(ne){return de.apply(this,arguments)}function de(){return(de=gt(function*({activeCtx:ne,activeProperty:be,expandedActiveProperty:Re,element:He,expandedParent:nt,options:Ze={},insideList:Je,typeKey:Ke,typeScopedContext:je,expansionMap:Le}){const Ce=Object.keys(He).sort(),Ne=[];let ze;const qe=He[Ke]&&"@json"===v(ne,H(He[Ke])?He[Ke][0]:He[Ke],{vocab:!0},Ze);for(const Ve of Ce){let X,$=He[Ve];if("@context"===Ve)continue;let we=v(ne,Ve,{vocab:!0},Ze);if((null===we||!G(we)&&!A(we))&&(we=Le({unmappedProperty:Ve,activeCtx:ne,activeProperty:be,parent:He,options:Ze,insideList:Je,value:$,expandedParent:nt}),void 0===we))continue;if(A(we)){if("@reverse"===Re)throw new q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:$});if(we in nt&&"@included"!==we&&"@type"!==we)throw new q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:we})}if("@id"===we){if(!W($)){if(!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:$});if(B($)){if(!se($))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}else{if(!H($))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$});if(!$.every(pt=>W(pt)))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:$})}}K(nt,"@id",I($).map(pt=>W(pt)?v(ne,pt,{base:!0},Ze):pt),{propertyIsArray:Ze.isFrame});continue}if("@type"===we){B($)&&($=Object.fromEntries(Object.entries($).map(([pt,ge])=>[v(je,pt,{vocab:!0}),I(ge).map(j=>v(je,j,{base:!0,vocab:!0}))]))),Q($,Ze.isFrame),K(nt,"@type",I($).map(pt=>W(pt)?v(je,pt,{base:!0,vocab:!0},Ze):pt),{propertyIsArray:Ze.isFrame});continue}if("@included"===we&&O(ne,1.1)){const pt=I(yield S.expand({activeCtx:ne,activeProperty:be,element:$,options:Ze,expansionMap:Le}));if(!pt.every(ge=>w(ge)))throw new q("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:$});K(nt,"@included",pt,{propertyIsArray:!0});continue}if("@graph"===we&&!B($)&&!H($))throw new q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:$});if("@value"===we){ze=$,qe&&O(ne,1.1)?nt["@value"]=$:K(nt,"@value",$,{propertyIsArray:Ze.isFrame});continue}if("@language"===we){if(null===$)continue;if(!W($)&&!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:$});$=I($).map(pt=>W(pt)?pt.toLowerCase():pt);for(const pt of $)W(pt)&&!pt.match(z)&&console.warn(`@language must be valid BCP47: ${pt}`);K(nt,"@language",$,{propertyIsArray:Ze.isFrame});continue}if("@direction"===we){if(!W($)&&!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:$});$=I($);for(const pt of $)if(W(pt)&&"ltr"!==pt&&"rtl"!==pt)throw new q('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:$});K(nt,"@direction",$,{propertyIsArray:Ze.isFrame});continue}if("@index"===we){if(!W($))throw new q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:$});K(nt,"@index",$);continue}if("@reverse"===we){if(!B($))throw new q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:$});if(X=yield S.expand({activeCtx:ne,activeProperty:"@reverse",element:$,options:Ze,expansionMap:Le}),"@reverse"in X)for(const ge in X["@reverse"])K(nt,ge,X["@reverse"][ge],{propertyIsArray:!0});let pt=nt["@reverse"]||null;for(const ge in X){if("@reverse"===ge)continue;null===pt&&(pt=nt["@reverse"]={}),K(pt,ge,[],{propertyIsArray:!0});const j=X[ge];for(let N=0;N<j.length;++N){const V=j[N];if(P(V)||D(V))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});K(pt,ge,V,{propertyIsArray:!0})}}continue}if("@nest"===we){Ne.push(Ve);continue}let ue=ne;const Fe=C(ne,Ve,"@context");E(Fe)||(ue=yield U({activeCtx:ne,localCtx:Fe,propagate:!0,overrideProtected:!0,options:Ze}));const Et=C(ue,Ve,"@container")||[];if(Et.includes("@language")&&B($))X=oe(ue,$,C(ue,Ve,"@direction"),Ze);else if(Et.includes("@index")&&B($)){const pt=Et.includes("@graph"),ge=C(ue,Ve,"@index")||"@index",j="@index"!==ge&&v(ne,ge,{vocab:!0},Ze);X=yield Ae({activeCtx:ue,options:Ze,activeProperty:Ve,value:$,expansionMap:Le,asGraph:pt,indexKey:ge,propertyIndex:j})}else if(Et.includes("@id")&&B($)){const pt=Et.includes("@graph");X=yield Ae({activeCtx:ue,options:Ze,activeProperty:Ve,value:$,expansionMap:Le,asGraph:pt,indexKey:"@id"})}else if(Et.includes("@type")&&B($))X=yield Ae({activeCtx:ue.revertToPreviousContext(),options:Ze,activeProperty:Ve,value:$,expansionMap:Le,asGraph:!1,indexKey:"@type"});else{const pt="@list"===we;if(pt||"@set"===we){let ge=be;pt&&"@graph"===Re&&(ge=null),X=yield S.expand({activeCtx:ue,activeProperty:ge,element:$,options:Ze,insideList:pt,expansionMap:Le})}else X="@json"===C(ne,Ve,"@type")?{"@type":"@json","@value":$}:yield S.expand({activeCtx:ue,activeProperty:Ve,element:$,options:Ze,insideList:!1,expansionMap:Le})}if(null!==X||"@value"===we||(X=Le({unmappedValue:$,expandedProperty:we,activeCtx:ue,activeProperty:be,parent:He,options:Ze,insideList:Je,key:Ve,expandedParent:nt}),void 0!==X)){if("@list"!==we&&!D(X)&&Et.includes("@list")&&(X={"@list":I(X)}),Et.includes("@graph")&&!Et.some(pt=>"@id"===pt||"@index"===pt)&&(X=I(X).map(pt=>({"@graph":I(pt)}))),ue.mappings.has(Ve)&&ue.mappings.get(Ve).reverse){const pt=nt["@reverse"]=nt["@reverse"]||{};X=I(X);for(let ge=0;ge<X.length;++ge){const j=X[ge];if(P(j)||D(j))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:X});K(pt,we,j,{propertyIsArray:!0})}continue}K(nt,we,X,{propertyIsArray:!0})}}if("@value"in nt&&("@json"!==nt["@type"]||!O(ne,1.1))&&(B(ze)||H(ze))&&!Ze.isFrame)throw new q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ze});for(const Ve of Ne){const $=H(He[Ve])?He[Ve]:[He[Ve]];for(const X of $){if(!B(X)||Object.keys(X).some(we=>"@value"===v(ne,we,{vocab:!0},Ze)))throw new q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:X});yield ie({activeCtx:ne,activeProperty:be,expandedActiveProperty:Re,element:X,expandedParent:nt,options:Ze,insideList:Je,typeScopedContext:je,typeKey:Ke,expansionMap:Le})}}})).apply(this,arguments)}function te({activeCtx:ne,activeProperty:be,value:Re,options:He}){if(null==Re)return null;const nt=v(ne,be,{vocab:!0},He);if("@id"===nt)return v(ne,Re,{base:!0},He);if("@type"===nt)return v(ne,Re,{vocab:!0,base:!0},He);const Ze=C(ne,be,"@type");if(("@id"===Ze||"@graph"===nt)&&W(Re))return{"@id":v(ne,Re,{base:!0},He)};if("@vocab"===Ze&&W(Re))return{"@id":v(ne,Re,{vocab:!0,base:!0},He)};if(A(nt))return Re;const Je={};if(Ze&&!["@id","@vocab","@none"].includes(Ze))Je["@type"]=Ze;else if(W(Re)){const Ke=C(ne,be,"@language");null!==Ke&&(Je["@language"]=Ke);const je=C(ne,be,"@direction");null!==je&&(Je["@direction"]=je)}return["boolean","number","string"].includes(typeof Re)||(Re=Re.toString()),Je["@value"]=Re,Je}function oe(ne,be,Re,He){const nt=[],Ze=Object.keys(be).sort();for(const Je of Ze){const Ke=v(ne,Je,{vocab:!0},He);let je=be[Je];H(je)||(je=[je]);for(const Le of je){if(null===Le)continue;if(!W(Le))throw new q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:be});const Ce={"@value":Le};"@none"!==Ke&&(Ce["@language"]=Je.toLowerCase()),Re&&(Ce["@direction"]=Re),nt.push(Ce)}}return nt}function Ae(ne){return me.apply(this,arguments)}function me(){return(me=gt(function*({activeCtx:ne,options:be,activeProperty:Re,value:He,expansionMap:nt,asGraph:Ze,indexKey:Je,propertyIndex:Ke}){const je=[],Le=Object.keys(He).sort(),Ce="@type"===Je;for(let Ne of Le){if(Ce){const Ve=C(ne,Ne,"@context");E(Ve)||(ne=yield U({activeCtx:ne,localCtx:Ve,propagate:!1,options:be}))}let qe,ze=He[Ne];H(ze)||(ze=[ze]),ze=yield S.expand({activeCtx:ne,activeProperty:Re,element:ze,options:be,insideList:!1,insideIndex:!0,expansionMap:nt}),qe=Ke?"@none"===Ne?"@none":te({activeCtx:ne,activeProperty:Je,value:Ne,options:be}):v(ne,Ne,{vocab:!0},be),"@id"===Je?Ne=v(ne,Ne,{base:!0},be):Ce&&(Ne=qe);for(let Ve of ze){if(Ze&&!T(Ve)&&(Ve={"@graph":[Ve]}),"@type"===Je)"@none"===qe||(Ve["@type"]=Ve["@type"]?[Ne].concat(Ve["@type"]):[Ne]);else{if(P(Ve)&&!["@language","@type","@index"].includes(Je))throw new q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Je}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Ve});Ke?"@none"!==qe&&K(Ve,Ke,qe,{propertyIsArray:!0,prependValue:!0}):"@none"!==qe&&!(Je in Ve)&&(Ve[Je]=Ne)}je.push(Ve)}}return je})).apply(this,arguments)}S.expand=function(){var ne=gt(function*({activeCtx:be,activeProperty:Re=null,element:He,options:nt={},insideList:Ze=!1,insideIndex:Je=!1,typeScopedContext:Ke=null,expansionMap:je=(()=>{})}){if(null==He)return null;if("@default"===Re&&(nt=Object.assign({},nt,{isFrame:!1})),!H(He)&&!B(He)){if(!Ze&&(null===Re||"@graph"===v(be,Re,{vocab:!0},nt))){const X=yield je({unmappedValue:He,activeCtx:be,activeProperty:Re,options:nt,insideList:Ze});return void 0===X?null:X}return te({activeCtx:be,activeProperty:Re,value:He,options:nt})}if(H(He)){let X=[];const we=C(be,Re,"@container")||[];Ze=Ze||we.includes("@list");for(let ue=0;ue<He.length;++ue){let Fe=yield S.expand({activeCtx:be,activeProperty:Re,element:He[ue],options:nt,expansionMap:je,insideIndex:Je,typeScopedContext:Ke});Ze&&H(Fe)&&(Fe={"@list":Fe}),(null!==Fe||(Fe=yield je({unmappedValue:He[ue],activeCtx:be,activeProperty:Re,parent:He,index:ue,options:nt,expandedParent:X,insideList:Ze}),void 0!==Fe))&&(H(Fe)?X=X.concat(Fe):X.push(Fe))}return X}const Le=v(be,Re,{vocab:!0},nt),Ce=C(be,Re,"@context");Ke=Ke||(be.previousContext?be:null);let Ne=Object.keys(He).sort(),ze=!Je;if(ze&&Ke&&Ne.length<=2&&!Ne.includes("@context"))for(const X of Ne){const we=v(Ke,X,{vocab:!0},nt);if("@value"===we){ze=!1,be=Ke;break}if("@id"===we&&1===Ne.length){ze=!1;break}}ze&&(be=be.revertToPreviousContext()),E(Ce)||(be=yield U({activeCtx:be,localCtx:Ce,propagate:!0,overrideProtected:!0,options:nt})),"@context"in He&&(be=yield U({activeCtx:be,localCtx:He["@context"],options:nt})),Ke=be;let qe=null;for(const X of Ne)if("@type"===v(be,X,{vocab:!0},nt)){qe=qe||X;const ue=He[X],Fe=Array.isArray(ue)?ue.length>1?ue.slice().sort():ue:[ue];for(const Et of Fe){const pt=C(Ke,Et,"@context");E(pt)||(be=yield U({activeCtx:be,localCtx:pt,options:nt,propagate:!1}))}}let Ve={};yield ie({activeCtx:be,activeProperty:Re,expandedActiveProperty:Le,element:He,expandedParent:Ve,options:nt,insideList:Ze,typeKey:qe,typeScopedContext:Ke,expansionMap:je}),Ne=Object.keys(Ve);let $=Ne.length;if("@value"in Ve){if("@type"in Ve&&("@language"in Ve||"@direction"in Ve))throw new q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ve});let X=$-1;if("@type"in Ve&&(X-=1),"@index"in Ve&&(X-=1),"@language"in Ve&&(X-=1),"@direction"in Ve&&(X-=1),0!==X)throw new q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ve});const we=null===Ve["@value"]?[]:I(Ve["@value"]),ue=L(Ve,"@type");if(!O(be,1.1)||!ue.includes("@json")||1!==ue.length)if(0===we.length){const Fe=yield je({unmappedValue:Ve,activeCtx:be,activeProperty:Re,element:He,options:nt,insideList:Ze});Ve=void 0!==Fe?Fe:null}else{if(!we.every(Fe=>W(Fe)||se(Fe))&&"@language"in Ve)throw new q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Ve});if(!ue.every(Fe=>G(Fe)&&!(W(Fe)&&0===Fe.indexOf("_:"))||se(Fe)))throw new q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Ve})}}else if("@type"in Ve&&!H(Ve["@type"]))Ve["@type"]=[Ve["@type"]];else if("@set"in Ve||"@list"in Ve){if($>1&&(2!==$||!("@index"in Ve)))throw new q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Ve});"@set"in Ve&&(Ve=Ve["@set"],Ne=Object.keys(Ve),$=Ne.length)}else if(1===$&&"@language"in Ve){const X=yield je(Ve,{unmappedValue:Ve,activeCtx:be,activeProperty:Re,element:He,options:nt,insideList:Ze});Ve=void 0!==X?X:null}if(B(Ve)&&!nt.keepFreeFloatingNodes&&!Ze&&(null===Re||"@graph"===Le)&&(0===$||"@value"in Ve||"@list"in Ve||1===$&&"@id"in Ve)){const X=yield je({unmappedValue:Ve,activeCtx:be,activeProperty:Re,element:He,options:nt,insideList:Ze});Ve=void 0!==X?X:null}return Ve});return function(be){return ne.apply(this,arguments)}}()},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],22:[function(Y,Te,fe){"use strict";const{isSubjectReference:q}=Y("./graphTypes"),{createMergedNodeMap:H}=Y("./nodeMap"),B={};Te.exports=B,B.flatten=se=>{const W=H(se),E=[],D=Object.keys(W).sort();for(let P=0;P<D.length;++P){const T=W[D[P]];q(T)||E.push(T)}return E}},{"./graphTypes":25,"./nodeMap":27}],23:[function(Y,Te,fe){"use strict";const{isKeyword:q}=Y("./context"),H=Y("./graphTypes"),B=Y("./types"),se=Y("./util"),W=Y("./url"),E=Y("./JsonLdError"),{createNodeMap:D,mergeNodeMapGraphs:P}=Y("./nodeMap"),T={};function w(S){const z={};for(const ie in S)void 0!==S[ie]&&(z["@"+ie]=[S[ie]]);return[z]}function v(S,z,ie){for(let de=ie.length-1;de>=0;--de){const te=ie[de];if(te.graph===z&&te.subject["@id"]===S["@id"])return!0}return!1}function C(S,z,ie){const de="@"+ie;let te=de in S?S[de][0]:z[ie];if("embed"===ie)if(!0===te)te="@once";else if(!1===te)te="@never";else if("@always"!==te&&"@never"!==te&&"@link"!==te&&"@first"!==te&&"@last"!==te&&"@once"!==te)throw new E("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:S});return te}function A(S){if(!B.isArray(S)||1!==S.length||!B.isObject(S[0]))throw new E("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:S});if("@id"in S[0])for(const z of se.asArray(S[0]["@id"]))if(!B.isObject(z)&&!W.isAbsolute(z)||B.isString(z)&&0===z.indexOf("_:"))throw new E("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:S});if("@type"in S[0])for(const z of se.asArray(S[0]["@type"]))if(!B.isObject(z)&&!W.isAbsolute(z)||B.isString(z)&&0===z.indexOf("_:"))throw new E("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:S})}function O(S,z,ie,de){let te=!0,oe=!1;for(const Ae in ie){let me=!1;const ne=se.getValues(z,Ae),be=0===se.getValues(ie,Ae).length;if("@id"===Ae){if(B.isEmptyObject(ie["@id"][0]||{})?me=!0:ie["@id"].length>=0&&(me=ie["@id"].includes(ne[0])),!de.requireAll)return me}else if("@type"===Ae){if(te=!1,be){if(ne.length>0)return!1;me=!0}else if(1===ie["@type"].length&&B.isEmptyObject(ie["@type"][0]))me=ne.length>0;else for(const Re of ie["@type"])me=!(!B.isObject(Re)||!("@default"in Re))||me||ne.some(He=>He===Re);if(!de.requireAll)return me}else{if(q(Ae))continue;{const Re=se.getValues(ie,Ae)[0];let He=!1;if(Re&&(A([Re]),He="@default"in Re),te=!1,0===ne.length&&He)continue;if(ne.length>0&&be)return!1;if(void 0===Re){if(ne.length>0)return!1;me=!0}else if(H.isList(Re)){const nt=Re["@list"][0];if(H.isList(ne[0])){const Ze=ne[0]["@list"];H.isValue(nt)?me=Ze.some(Je=>Q(nt,Je)):(H.isSubject(nt)||H.isSubjectReference(nt))&&(me=Ze.some(Je=>L(S,nt,Je,de)))}}else me=H.isValue(Re)?ne.some(nt=>Q(Re,nt)):H.isSubjectReference(Re)?ne.some(nt=>L(S,Re,nt,de)):!!B.isObject(Re)&&ne.length>0}}if(!me&&de.requireAll)return!1;oe=oe||me}return te||oe}function G(S,z){const ie=S.uniqueEmbeds[S.graph],de=ie[z],te=de.parent,oe=de.property,Ae={"@id":z};if(B.isArray(te)){for(let ne=0;ne<te.length;++ne)if(se.compareValues(te[ne],Ae)){te[ne]=Ae;break}}else{const ne=B.isArray(te[oe]);se.removeValue(te,oe,Ae,{propertyIsArray:ne}),se.addValue(te,oe,Ae,{propertyIsArray:ne})}const me=ne=>{const be=Object.keys(ie);for(const Re of be)Re in ie&&B.isObject(ie[Re].parent)&&ie[Re].parent["@id"]===ne&&(delete ie[Re],me(Re))};me(z)}function K(S,z){if(B.isArray(S))return S.map(ie=>K(ie,z));if(B.isObject(S)){if("@preserve"in S)return S["@preserve"][0];if(H.isValue(S))return S;if(H.isList(S))return S["@list"]=K(S["@list"],z),S;if("@id"in S){const ie=S["@id"];if(z.link.hasOwnProperty(ie)){const de=z.link[ie].indexOf(S);if(-1!==de)return z.link[ie][de];z.link[ie].push(S)}else z.link[ie]=[S]}for(const ie in S)"@id"===ie&&z.bnodesToClear.includes(S[ie])?delete S["@id"]:S[ie]=K(S[ie],z)}return S}function I(S,z,ie){B.isObject(S)?se.addValue(S,z,ie,{propertyIsArray:!0}):S.push(ie)}function L(S,z,ie,de){if(!("@id"in ie))return!1;const te=S.subjects[ie["@id"]];return te&&O(S,te,z,de)}function Q(S,z){const ie=z["@value"],de=z["@type"],te=z["@language"],oe=S["@value"]?B.isArray(S["@value"])?S["@value"]:[S["@value"]]:[],Ae=S["@type"]?B.isArray(S["@type"])?S["@type"]:[S["@type"]]:[],me=S["@language"]?B.isArray(S["@language"])?S["@language"]:[S["@language"]]:[];return 0===oe.length&&0===Ae.length&&0===me.length||!(!oe.includes(ie)&&!B.isEmptyObject(oe[0])||!(!de&&0===Ae.length||Ae.includes(de)||de&&B.isEmptyObject(Ae[0]))||!(!te&&0===me.length||me.includes(te)||te&&B.isEmptyObject(me[0])))}Te.exports=T,T.frameMergedOrDefault=(S,z,ie)=>{const de={options:ie,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},te=new se.IdentifierIssuer("_:b");D(S,de.graphMap,"@default",te),ie.merged&&(de.graphMap["@merged"]=P(de.graphMap),de.graph="@merged"),de.subjects=de.graphMap[de.graph];const oe=[];return T.frame(de,Object.keys(de.subjects).sort(),z,oe),ie.pruneBlankNodeIdentifiers&&(ie.bnodesToClear=Object.keys(de.bnodeMap).filter(Ae=>1===de.bnodeMap[Ae].length)),ie.link={},K(oe,ie)},T.frame=(S,z,ie,de,te=null)=>{A(ie);const oe=S.options,Ae={embed:C(ie=ie[0],oe,"embed"),explicit:C(ie,oe,"explicit"),requireAll:C(ie,oe,"requireAll")};S.link.hasOwnProperty(S.graph)||(S.link[S.graph]={});const me=S.link[S.graph],ne=function(S,z,ie,de){const te={};for(const oe of z){const Ae=S.graphMap[S.graph][oe];O(S,Ae,ie,de)&&(te[oe]=Ae)}return te}(S,z,ie,Ae),be=Object.keys(ne).sort();for(const Re of be){const He=ne[Re];if(null===te?S.uniqueEmbeds={[S.graph]:{}}:S.uniqueEmbeds[S.graph]=S.uniqueEmbeds[S.graph]||{},"@link"===Ae.embed&&Re in me){I(de,te,me[Re]);continue}const nt={"@id":Re};if(0===Re.indexOf("_:")&&se.addValue(S.bnodeMap,Re,nt,{propertyIsArray:!0}),me[Re]=nt,("@first"===Ae.embed||"@last"===Ae.embed)&&S.is11)throw new E("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:ie});if(S.embedded||!S.uniqueEmbeds[S.graph].hasOwnProperty(Re)){if(S.embedded&&("@never"===Ae.embed||v(He,S.graph,S.subjectStack))){I(de,te,nt);continue}if(S.embedded&&("@first"==Ae.embed||"@once"==Ae.embed)&&S.uniqueEmbeds[S.graph].hasOwnProperty(Re)){I(de,te,nt);continue}if("@last"===Ae.embed&&Re in S.uniqueEmbeds[S.graph]&&G(S,Re),S.uniqueEmbeds[S.graph][Re]={parent:de,property:te},S.subjectStack.push({subject:He,graph:S.graph}),Re in S.graphMap){let Ze=!1,Je=null;"@graph"in ie?(Je=ie["@graph"][0],Ze=!("@merged"===Re||"@default"===Re),B.isObject(Je)||(Je={})):(Ze="@merged"!==S.graph,Je={}),Ze&&T.frame(Kn(ht({},S),{graph:Re,embedded:!1}),Object.keys(S.graphMap[Re]).sort(),[Je],nt,"@graph")}"@included"in ie&&T.frame(Kn(ht({},S),{embedded:!1}),z,ie["@included"],nt,"@included");for(const Ze of Object.keys(He).sort())if(q(Ze)){if(nt[Ze]=se.clone(He[Ze]),"@type"===Ze)for(const Je of He["@type"])0===Je.indexOf("_:")&&se.addValue(S.bnodeMap,Je,nt,{propertyIsArray:!0})}else if(!Ae.explicit||Ze in ie)for(const Je of He[Ze]){const Ke=Ze in ie?ie[Ze]:w(Ae);if(H.isList(Je)){const je=ie[Ze]&&ie[Ze][0]&&ie[Ze][0]["@list"]?ie[Ze][0]["@list"]:w(Ae),Le={"@list":[]};I(nt,Ze,Le);const Ce=Je["@list"];for(const Ne of Ce)H.isSubjectReference(Ne)?T.frame(Kn(ht({},S),{embedded:!0}),[Ne["@id"]],je,Le,"@list"):I(Le,"@list",se.clone(Ne))}else H.isSubjectReference(Je)?T.frame(Kn(ht({},S),{embedded:!0}),[Je["@id"]],Ke,nt,Ze):Q(Ke[0],Je)&&I(nt,Ze,se.clone(Je))}for(const Ze of Object.keys(ie).sort()){if("@type"===Ze){if(!B.isObject(ie[Ze][0])||!("@default"in ie[Ze][0]))continue}else if(q(Ze))continue;const Je=ie[Ze][0]||{};if(!C(Je,oe,"omitDefault")&&!(Ze in nt)){let je="@null";"@default"in Je&&(je=se.clone(Je["@default"])),B.isArray(je)||(je=[je]),nt[Ze]=[{"@preserve":je}]}}for(const Ze of Object.keys(ie["@reverse"]||{}).sort()){const Je=ie["@reverse"][Ze];for(const Ke of Object.keys(S.subjects))se.getValues(S.subjects[Ke],Ze).some(Le=>Le["@id"]===Re)&&(nt["@reverse"]=nt["@reverse"]||{},se.addValue(nt["@reverse"],Ze,[],{propertyIsArray:!0}),T.frame(Kn(ht({},S),{embedded:!0}),[Ke],Je,nt["@reverse"][Ze],te))}I(de,te,nt),S.subjectStack.pop()}}},T.cleanupNull=(S,z)=>{if(B.isArray(S))return S.map(de=>T.cleanupNull(de,z)).filter(de=>de);if("@null"===S)return null;if(B.isObject(S)){if("@id"in S){const ie=S["@id"];if(z.link.hasOwnProperty(ie)){const de=z.link[ie].indexOf(S);if(-1!==de)return z.link[ie][de];z.link[ie].push(S)}else z.link[ie]=[S]}for(const ie in S)S[ie]=T.cleanupNull(S[ie],z)}return S}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32}],24:[function(Y,Te,fe){"use strict";const q=Y("./JsonLdError"),H=Y("./graphTypes"),B=Y("./types"),se=Y("./util"),{RDF_LIST:W,RDF_FIRST:E,RDF_REST:D,RDF_NIL:P,RDF_TYPE:T,RDF_JSON_LITERAL:w,XSD_BOOLEAN:v,XSD_DOUBLE:C,XSD_INTEGER:A,XSD_STRING:U}=Y("./constants"),O=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,G={};function K(I,L,Q){if(I.termType.endsWith("Node"))return{"@id":I.value};const S={"@value":I.value};if(I.language)S["@language"]=I.language;else{let z=I.datatype.value;if(z||(z=U),z===w){z="@json";try{S["@value"]=JSON.parse(S["@value"])}catch(ie){throw new q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:S["@value"],cause:ie})}}if(L){if(z===v)"true"===S["@value"]?S["@value"]=!0:"false"===S["@value"]&&(S["@value"]=!1);else if(B.isNumeric(S["@value"]))if(z===A){const ie=parseInt(S["@value"],10);ie.toFixed(0)===S["@value"]&&(S["@value"]=ie)}else z===C&&(S["@value"]=parseFloat(S["@value"]));[v,A,C,U].includes(z)||(S["@type"]=z)}else if("i18n-datatype"===Q&&z.startsWith("https://www.w3.org/ns/i18n#")){const[,ie,de]=z.split(/[#_]/);ie.length>0&&(S["@language"]=ie,ie.match(O)||console.warn(`@language must be valid BCP47: ${ie}`)),S["@direction"]=de}else z!==U&&(S["@type"]=z)}return S}Te.exports=G,G.fromRDF=function(){var I=gt(function*(L,{useRdfType:Q=!1,useNativeTypes:S=!1,rdfDirection:z=null}){const ie={},de={"@default":ie},te={};for(const me of L){const ne="DefaultGraph"===me.graph.termType?"@default":me.graph.value;ne in de||(de[ne]={}),"@default"!==ne&&!(ne in ie)&&(ie[ne]={"@id":ne});const be=de[ne],Re=me.subject.value,He=me.predicate.value,nt=me.object;Re in be||(be[Re]={"@id":Re});const Ze=be[Re],Je=nt.termType.endsWith("Node");if(Je&&!(nt.value in be)&&(be[nt.value]={"@id":nt.value}),He===T&&!Q&&Je){se.addValue(Ze,"@type",nt.value,{propertyIsArray:!0});continue}const Ke=K(nt,S,z);if(se.addValue(Ze,He,Ke,{propertyIsArray:!0}),Je)if(nt.value===P){const je=be[nt.value];"usages"in je||(je.usages=[]),je.usages.push({node:Ze,property:He,value:Ke})}else te[nt.value]=!(nt.value in te)&&{node:Ze,property:He,value:Ke}}for(const me in de){const ne=de[me];if(!(P in ne))continue;const be=ne[P];if(be.usages){for(let Re of be.usages){let He=Re.node,nt=Re.property,Ze=Re.value;const Je=[],Ke=[];let je=Object.keys(He).length;for(;nt===D&&B.isObject(te[He["@id"]])&&B.isArray(He[E])&&1===He[E].length&&B.isArray(He[D])&&1===He[D].length&&(3===je||4===je&&B.isArray(He["@type"])&&1===He["@type"].length&&He["@type"][0]===W)&&(Je.push(He[E][0]),Ke.push(He["@id"]),Re=te[He["@id"]],He=Re.node,nt=Re.property,Ze=Re.value,je=Object.keys(He).length,H.isBlankNode(He)););delete Ze["@id"],Ze["@list"]=Je.reverse();for(const Le of Ke)delete ne[Le]}delete be.usages}}const oe=[],Ae=Object.keys(ie).sort();for(const me of Ae){const ne=ie[me];if(me in de){const be=ne["@graph"]=[],Re=de[me],He=Object.keys(Re).sort();for(const nt of He){const Ze=Re[nt];H.isSubjectReference(Ze)||be.push(Ze)}}H.isSubjectReference(ne)||oe.push(ne)}return oe});return function(L,Q){return I.apply(this,arguments)}}()},{"./JsonLdError":12,"./constants":18,"./graphTypes":25,"./types":30,"./util":32}],25:[function(Y,Te,fe){"use strict";const q=Y("./types"),H={};Te.exports=H,H.isSubject=B=>!(!q.isObject(B)||"@value"in B||"@set"in B||"@list"in B)&&(Object.keys(B).length>1||!("@id"in B)),H.isSubjectReference=B=>q.isObject(B)&&1===Object.keys(B).length&&"@id"in B,H.isValue=B=>q.isObject(B)&&"@value"in B,H.isList=B=>q.isObject(B)&&"@list"in B,H.isGraph=B=>q.isObject(B)&&"@graph"in B&&1===Object.keys(B).filter(se=>"@id"!==se&&"@index"!==se).length,H.isSimpleGraph=B=>H.isGraph(B)&&!("@id"in B),H.isBlankNode=B=>!!q.isObject(B)&&("@id"in B?0===B["@id"].indexOf("_:"):0===Object.keys(B).length||!("@value"in B||"@set"in B||"@list"in B))},{"./types":30}],26:[function(Y,Te,fe){const q=Y("rdf-canonize"),H=Y("./platform"),B=Y("./util"),se=Y("./ContextResolver"),W=B.IdentifierIssuer,E=Y("./JsonLdError"),D=Y("lru-cache"),P=Y("./NQuads"),{expand:T}=Y("./expand"),{flatten:w}=Y("./flatten"),{fromRDF:v}=Y("./fromRdf"),{toRDF:C}=Y("./toRdf"),{frameMergedOrDefault:A,cleanupNull:U}=Y("./frame"),{isArray:O,isObject:G,isString:K}=Y("./types"),{isSubjectReference:I}=Y("./graphTypes"),{expandIri:L,getInitialContext:Q,process:S,processingMode:z}=Y("./context"),{compact:ie,compactIri:de}=Y("./compact"),{createNodeMap:te,createMergedNodeMap:oe,mergeNodeMaps:Ae}=Y("./nodeMap"),me=function(be){const Re={},nt=new D({max:100});function Ze(Je,Le){var Ce=Le,{documentLoader:Ke=be.documentLoader}=Ce,je=Cce(Ce,["documentLoader"]);return Object.assign({},{documentLoader:Ke},je,Je)}return be.compact=function(){var Je=gt(function*(Ke,je,Le){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===je)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===Ke)return null;let Ce;(Le=Ze(Le,{base:K(Ke)?Ke:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new W("_:b"),contextResolver:new se({sharedCache:nt})})).link&&(Le.skipExpansion=!0),Le.compactToRelative||delete Le.base,Ce=Le.skipExpansion?Ke:yield be.expand(Ke,Le);const Ne=yield be.processContext(Q(Le),je,Le);let ze=yield ie({activeCtx:Ne,element:Ce,options:Le,compactionMap:Le.compactionMap});Le.compactArrays&&!Le.graph&&O(ze)?1===ze.length?ze=ze[0]:0===ze.length&&(ze={}):Le.graph&&G(ze)&&(ze=[ze]),G(je)&&"@context"in je&&(je=je["@context"]),je=B.clone(je),O(je)||(je=[je]);const qe=je;je=[];for(let $=0;$<qe.length;++$)(!G(qe[$])||Object.keys(qe[$]).length>0)&&je.push(qe[$]);const Ve=je.length>0;if(1===je.length&&(je=je[0]),O(ze)){const $=de({activeCtx:Ne,iri:"@graph",relativeTo:{vocab:!0}}),X=ze;ze={},Ve&&(ze["@context"]=je),ze[$]=X}else if(G(ze)&&Ve){const $=ze;ze={"@context":je};for(const X in $)ze[X]=$[X]}return ze});return function(Ke,je,Le){return Je.apply(this,arguments)}}(),be.expand=function(){var Je=gt(function*(Ke,je){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(je=Ze(je,{keepFreeFloatingNodes:!1,contextResolver:new se({sharedCache:nt})})).expansionMap&&(je.expansionMap=void 0);const Le={},Ce=[];if("expandContext"in je){const Ve=B.clone(je.expandContext);Le.expandContext=G(Ve)&&"@context"in Ve?Ve:{"@context":Ve},Ce.push(Le.expandContext)}let Ne;if(K(Ke)){const Ve=yield be.get(Ke,je);Ne=Ve.documentUrl,Le.input=Ve.document,Ve.contextUrl&&(Le.remoteContext={"@context":Ve.contextUrl},Ce.push(Le.remoteContext))}else Le.input=B.clone(Ke);"base"in je||(je.base=Ne||"");let ze=Q(je);for(const Ve of Ce)ze=yield S({activeCtx:ze,localCtx:Ve,options:je});let qe=yield T({activeCtx:ze,element:Le.input,options:je,expansionMap:je.expansionMap});return G(qe)&&"@graph"in qe&&1===Object.keys(qe).length?qe=qe["@graph"]:null===qe&&(qe=[]),O(qe)||(qe=[qe]),qe});return function(Ke,je){return Je.apply(this,arguments)}}(),be.flatten=function(){var Je=gt(function*(Ke,je,Le){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");je="function"==typeof je?null:je||null,Le=Ze(Le,{base:K(Ke)?Ke:"",contextResolver:new se({sharedCache:nt})});const Ce=yield be.expand(Ke,Le),Ne=w(Ce);return null===je?Ne:(Le.graph=!0,Le.skipExpansion=!0,yield be.compact(Ne,je,Le))});return function(Ke,je,Le){return Je.apply(this,arguments)}}(),be.frame=function(){var Je=gt(function*(Ke,je,Le){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Le=Ze(Le,{base:K(Ke)?Ke:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new se({sharedCache:nt})}),K(je)){const ue=yield be.get(je,Le);if(je=ue.document,ue.contextUrl){let Fe=je["@context"];Fe?O(Fe)?Fe.push(ue.contextUrl):Fe=[Fe,ue.contextUrl]:Fe=ue.contextUrl,je["@context"]=Fe}}const Ce=je&&je["@context"]||{},Ne=yield be.processContext(Q(Le),Ce,Le);Le.hasOwnProperty("omitGraph")||(Le.omitGraph=z(Ne,1.1)),Le.hasOwnProperty("pruneBlankNodeIdentifiers")||(Le.pruneBlankNodeIdentifiers=z(Ne,1.1));const ze=yield be.expand(Ke,Le),qe=ht({},Le);qe.isFrame=!0,qe.keepFreeFloatingNodes=!0;const Ve=yield be.expand(je,qe),$=Object.keys(je).map(ue=>L(Ne,ue,{vocab:!0}));qe.merged=!$.includes("@graph"),qe.is11=z(Ne,1.1);const X=A(ze,Ve,qe);qe.graph=!Le.omitGraph,qe.skipExpansion=!0,qe.link={},qe.framing=!0;let we=yield be.compact(X,Ce,qe);return qe.link={},we=U(we,qe),we});return function(Ke,je,Le){return Je.apply(this,arguments)}}(),be.link=function(){var Je=gt(function*(Ke,je,Le){const Ce={};return je&&(Ce["@context"]=je),Ce["@embed"]="@link",be.frame(Ke,Ce,Le)});return function(Ke,je,Le){return Je.apply(this,arguments)}}(),be.normalize=be.canonize=function(){var Je=gt(function*(Ke,je){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(je=Ze(je,{base:K(Ke)?Ke:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new se({sharedCache:nt})}))){if("application/n-quads"!==je.inputFormat&&"application/nquads"!==je.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const Ne=P.parse(Ke);return q.canonize(Ne,je)}const Le=ht({},je);delete Le.format,Le.produceGeneralizedRdf=!1;const Ce=yield be.toRDF(Ke,Le);return q.canonize(Ce,je)});return function(Ke,je){return Je.apply(this,arguments)}}(),be.fromRDF=function(){var Je=gt(function*(Ke,je){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");je=Ze(je,{format:K(Ke)?"application/n-quads":void 0});const{format:Le}=je;let{rdfParser:Ce}=je;if(Le){if(Ce=Ce||Re[Le],!Ce)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:Le})}else Ce=()=>Ke;const Ne=yield Ce(Ke);return v(Ne,je)});return function(Ke,je){return Je.apply(this,arguments)}}(),be.toRDF=function(){var Je=gt(function*(Ke,je){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Le;Le=(je=Ze(je,{base:K(Ke)?Ke:"",skipExpansion:!1,contextResolver:new se({sharedCache:nt})})).skipExpansion?Ke:yield be.expand(Ke,je);const Ce=C(Le,je);if(je.format){if("application/n-quads"===je.format||"application/nquads"===je.format)return P.serialize(Ce);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:je.format})}return Ce});return function(Ke,je){return Je.apply(this,arguments)}}(),be.createNodeMap=function(){var Je=gt(function*(Ke,je){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");je=Ze(je,{base:K(Ke)?Ke:"",contextResolver:new se({sharedCache:nt})});const Le=yield be.expand(Ke,je);return oe(Le,je)});return function(Ke,je){return Je.apply(this,arguments)}}(),be.merge=function(){var Je=gt(function*(Ke,je,Le){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!O(Ke))throw new TypeError('Could not merge, "docs" must be an array.');je="function"==typeof je?null:je||null,Le=Ze(Le,{contextResolver:new se({sharedCache:nt})});const Ce=yield Promise.all(Ke.map(ue=>{const Fe=ht({},Le);return be.expand(ue,Fe)}));let Ne=!0;"mergeNodes"in Le&&(Ne=Le.mergeNodes);const ze=Le.issuer||new W("_:b"),qe={"@default":{}};for(let ue=0;ue<Ce.length;++ue){const Fe=B.relabelBlankNodes(Ce[ue],{issuer:new W("_:b"+ue+"-")}),Et=Ne||0===ue?qe:{"@default":{}};if(te(Fe,Et,"@default",ze),Et!==qe)for(const pt in Et){const ge=Et[pt];if(!(pt in qe)){qe[pt]=ge;continue}const j=qe[pt];for(const N in ge)N in j||(j[N]=ge[N])}}const Ve=Ae(qe),$=[],X=Object.keys(Ve).sort();for(let ue=0;ue<X.length;++ue){const Fe=Ve[X[ue]];I(Fe)||$.push(Fe)}return null===je?$:(Le.graph=!0,Le.skipExpansion=!0,yield be.compact($,je,Le))});return function(Ke,je,Le){return Je.apply(this,arguments)}}(),Object.defineProperty(be,"documentLoader",{get:()=>be._documentLoader,set:Je=>be._documentLoader=Je}),be.documentLoader=function(){var Je=gt(function*(Ke){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:Ke})});return function(Ke){return Je.apply(this,arguments)}}(),be.get=function(){var Je=gt(function*(Ke,je){let Le;Le="function"==typeof je.documentLoader?je.documentLoader:be.documentLoader;const Ce=yield Le(Ke);try{if(!Ce.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");K(Ce.document)&&(Ce.document=JSON.parse(Ce.document))}catch(Ne){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ne,remoteDoc:Ce})}return Ce});return function(Ke,je){return Je.apply(this,arguments)}}(),be.processContext=function(){var Je=gt(function*(Ke,je,Le){return Le=Ze(Le,{base:"",contextResolver:new se({sharedCache:nt})}),null===je?Q(Le):(je=B.clone(je),G(je)&&"@context"in je||(je={"@context":je}),S({activeCtx:Ke,localCtx:je,options:Le}))});return function(Ke,je,Le){return Je.apply(this,arguments)}}(),be.getContextValue=Y("./context").getContextValue,be.documentLoaders={},be.useDocumentLoader=function(Je){if(!(Je in be.documentLoaders))throw new E('Unknown document loader type: "'+Je+'"',"jsonld.UnknownDocumentLoader",{type:Je});be.documentLoader=be.documentLoaders[Je].apply(be,Array.prototype.slice.call(arguments,1))},be.registerRDFParser=function(Je,Ke){Re[Je]=Ke},be.unregisterRDFParser=function(Je){delete Re[Je]},be.registerRDFParser("application/n-quads",P.parse),be.registerRDFParser("application/nquads",P.parse),be.url=Y("./url"),be.util=B,Object.assign(be,B),be.promises=be,be.RequestQueue=Y("./RequestQueue"),be.JsonLdProcessor=Y("./JsonLdProcessor")(be),H.setupGlobals(be),H.setupDocumentLoaders(be),be},ne=function(){return me(function(){return ne()})};me(ne),Te.exports=ne},{"./ContextResolver":11,"./JsonLdError":12,"./JsonLdProcessor":13,"./NQuads":14,"./RequestQueue":15,"./compact":17,"./context":19,"./expand":21,"./flatten":22,"./frame":23,"./fromRdf":24,"./graphTypes":25,"./nodeMap":27,"./platform":28,"./toRdf":29,"./types":30,"./url":31,"./util":32,"lru-cache":33,"rdf-canonize":46}],27:[function(Y,Te,fe){"use strict";const{isKeyword:q}=Y("./context"),H=Y("./graphTypes"),B=Y("./types"),se=Y("./util"),W=Y("./JsonLdError"),E={};Te.exports=E,E.createMergedNodeMap=(D,P)=>{const T=(P=P||{}).issuer||new se.IdentifierIssuer("_:b"),w={"@default":{}};return E.createNodeMap(D,w,"@default",T),E.mergeNodeMaps(w)},E.createNodeMap=(D,P,T,w,v,C)=>{if(B.isArray(D)){for(const G of D)E.createNodeMap(G,P,T,w,void 0,C);return}if(!B.isObject(D))return void(C&&C.push(D));if(H.isValue(D)){if("@type"in D){let G=D["@type"];0===G.indexOf("_:")&&(D["@type"]=G=w.getId(G))}return void(C&&C.push(D))}if(C&&H.isList(D)){const G=[];return E.createNodeMap(D["@list"],P,T,w,v,G),void C.push({"@list":G})}if("@type"in D){const G=D["@type"];for(const K of G)0===K.indexOf("_:")&&w.getId(K)}B.isUndefined(v)&&(v=H.isBlankNode(D)?w.getId(D["@id"]):D["@id"]),C&&C.push({"@id":v});const A=P[T],U=A[v]=A[v]||{};U["@id"]=v;const O=Object.keys(D).sort();for(let G of O){if("@id"===G)continue;if("@reverse"===G){const I={"@id":v},L=D["@reverse"];for(const Q in L){const S=L[Q];for(const z of S){let ie=z["@id"];H.isBlankNode(z)&&(ie=w.getId(ie)),E.createNodeMap(z,P,T,w,ie),se.addValue(A[ie],Q,I,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===G){v in P||(P[v]={}),E.createNodeMap(D[G],P,v,w);continue}if("@included"===G){E.createNodeMap(D[G],P,T,w);continue}if("@type"!==G&&q(G)){if("@index"===G&&G in U&&(D[G]!==U[G]||D[G]["@id"]!==U[G]["@id"]))throw new W("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:U});U[G]=D[G];continue}const K=D[G];if(0===G.indexOf("_:")&&(G=w.getId(G)),0!==K.length)for(let I of K)if("@type"===G&&(I=0===I.indexOf("_:")?w.getId(I):I),H.isSubject(I)||H.isSubjectReference(I)){if("@id"in I&&!I["@id"])continue;const L=H.isBlankNode(I)?w.getId(I["@id"]):I["@id"];se.addValue(U,G,{"@id":L},{propertyIsArray:!0,allowDuplicate:!1}),E.createNodeMap(I,P,T,w,L)}else if(H.isValue(I))se.addValue(U,G,I,{propertyIsArray:!0,allowDuplicate:!1});else if(H.isList(I)){const L=[];E.createNodeMap(I["@list"],P,T,w,v,L),I={"@list":L},se.addValue(U,G,I,{propertyIsArray:!0,allowDuplicate:!1})}else E.createNodeMap(I,P,T,w,v),se.addValue(U,G,I,{propertyIsArray:!0,allowDuplicate:!1});else se.addValue(U,G,[],{propertyIsArray:!0})}},E.mergeNodeMapGraphs=D=>{const P={};for(const T of Object.keys(D).sort())for(const w of Object.keys(D[T]).sort()){const v=D[T][w];w in P||(P[w]={"@id":w});const C=P[w];for(const A of Object.keys(v).sort())if(q(A)&&"@type"!==A)C[A]=se.clone(v[A]);else for(const U of v[A])se.addValue(C,A,se.clone(U),{propertyIsArray:!0,allowDuplicate:!1})}return P},E.mergeNodeMaps=D=>{const P=D["@default"],T=Object.keys(D).sort();for(const w of T){if("@default"===w)continue;const v=D[w];let C=P[w];C?"@graph"in C||(C["@graph"]=[]):P[w]=C={"@id":w,"@graph":[]};const A=C["@graph"];for(const U of Object.keys(v).sort()){const O=v[U];H.isSubjectReference(O)||A.push(O)}}return P}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./util":32}],28:[function(Y,Te,fe){"use strict";const q=Y("./documentLoaders/xhr"),H={};Te.exports=H,H.setupDocumentLoaders=function(B){"undefined"!=typeof XMLHttpRequest&&(B.documentLoaders.xhr=q,B.useDocumentLoader("xhr"))},H.setupGlobals=function(B){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:B.JsonLdProcessor})}},{"./documentLoaders/xhr":20}],29:[function(Y,Te,fe){"use strict";const{createNodeMap:q}=Y("./nodeMap"),{isKeyword:H}=Y("./context"),B=Y("./graphTypes"),se=Y("canonicalize"),W=Y("./types"),E=Y("./util"),{RDF_FIRST:D,RDF_REST:P,RDF_NIL:T,RDF_TYPE:w,RDF_JSON_LITERAL:v,RDF_LANGSTRING:C,XSD_BOOLEAN:A,XSD_DOUBLE:U,XSD_INTEGER:O,XSD_STRING:G}=Y("./constants"),{isAbsolute:K}=Y("./url"),I={};function L(z,ie,de,te,oe){const Ae=Object.keys(ie).sort();for(const me of Ae){const ne=ie[me],be=Object.keys(ne).sort();for(let Re of be){const He=ne[Re];if("@type"===Re)Re=w;else if(H(Re))continue;for(const nt of He){const Ze={termType:me.startsWith("_:")?"BlankNode":"NamedNode",value:me};if(!K(me))continue;const Je={termType:Re.startsWith("_:")?"BlankNode":"NamedNode",value:Re};if(!K(Re)||"BlankNode"===Je.termType&&!oe.produceGeneralizedRdf)continue;const Ke=S(nt,te,z,de,oe.rdfDirection);Ke&&z.push({subject:Ze,predicate:Je,object:Ke,graph:de})}}}}function S(z,ie,de,te,oe){const Ae={};if(B.isValue(z)){Ae.termType="Literal",Ae.value=void 0,Ae.datatype={termType:"NamedNode"};let me=z["@value"];const ne=z["@type"]||null;"@json"===ne?(Ae.value=se(me),Ae.datatype.value=v):W.isBoolean(me)?(Ae.value=me.toString(),Ae.datatype.value=ne||A):W.isDouble(me)||ne===U?(W.isDouble(me)||(me=parseFloat(me)),Ae.value=me.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Ae.datatype.value=ne||U):W.isNumber(me)?(Ae.value=me.toFixed(0),Ae.datatype.value=ne||O):"i18n-datatype"===oe&&"@direction"in z?(Ae.datatype.value="https://www.w3.org/ns/i18n#"+(z["@language"]||"")+`_${z["@direction"]}`,Ae.value=me):"@language"in z?(Ae.value=me,Ae.datatype.value=ne||C,Ae.language=z["@language"]):(Ae.value=me,Ae.datatype.value=ne||G)}else if(B.isList(z)){const me=function(z,ie,de,te,oe){const Ae={termType:"NamedNode",value:D},me={termType:"NamedNode",value:P},ne={termType:"NamedNode",value:T},be=z.pop(),Re=be?{termType:"BlankNode",value:ie.getId()}:ne;let He=Re;for(const nt of z){const Ze=S(nt,ie,de,te,oe),Je={termType:"BlankNode",value:ie.getId()};de.push({subject:He,predicate:Ae,object:Ze,graph:te}),de.push({subject:He,predicate:me,object:Je,graph:te}),He=Je}if(be){const nt=S(be,ie,de,te,oe);de.push({subject:He,predicate:Ae,object:nt,graph:te}),de.push({subject:He,predicate:me,object:ne,graph:te})}return Re}(z["@list"],ie,de,te,oe);Ae.termType=me.termType,Ae.value=me.value}else{const me=W.isObject(z)?z["@id"]:z;Ae.termType=me.startsWith("_:")?"BlankNode":"NamedNode",Ae.value=me}return"NamedNode"!==Ae.termType||K(Ae.value)?Ae:null}Te.exports=I,I.toRDF=(z,ie)=>{const de=new E.IdentifierIssuer("_:b"),te={"@default":{}};q(z,te,"@default",de);const oe=[],Ae=Object.keys(te).sort();for(const me of Ae){let ne;if("@default"===me)ne={termType:"DefaultGraph",value:""};else{if(!K(me))continue;ne=me.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},ne.value=me}L(oe,te[me],ne,de,ie)}return oe}},{"./constants":18,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32,canonicalize:7}],30:[function(Y,Te,fe){"use strict";const q={};Te.exports=q,q.isArray=Array.isArray,q.isBoolean=H=>"boolean"==typeof H||"[object Boolean]"===Object.prototype.toString.call(H),q.isDouble=H=>q.isNumber(H)&&(-1!==String(H).indexOf(".")||Math.abs(H)>=1e21),q.isEmptyObject=H=>q.isObject(H)&&0===Object.keys(H).length,q.isNumber=H=>"number"==typeof H||"[object Number]"===Object.prototype.toString.call(H),q.isNumeric=H=>!isNaN(parseFloat(H))&&isFinite(H),q.isObject=H=>"[object Object]"===Object.prototype.toString.call(H),q.isString=H=>"string"==typeof H||"[object String]"===Object.prototype.toString.call(H),q.isUndefined=H=>void 0===H},{}],31:[function(Y,Te,fe){"use strict";const q=Y("./types"),H={};Te.exports=H,H.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},H.parse=(se,W)=>{const E={},D=H.parsers[W||"full"],P=D.regex.exec(se);let T=D.keys.length;for(;T--;)E[D.keys[T]]=void 0===P[T]?null:P[T];return("https"===E.scheme&&"443"===E.port||"http"===E.scheme&&"80"===E.port)&&(E.href=E.href.replace(":"+E.port,""),E.authority=E.authority.replace(":"+E.port,""),E.port=null),E.normalizedPath=H.removeDotSegments(E.path),E},H.prependBase=(se,W)=>{if(null===se||H.isAbsolute(W))return W;(!se||q.isString(se))&&(se=H.parse(se||""));const E=H.parse(W),D={protocol:se.protocol||""};if(null!==E.authority)D.authority=E.authority,D.path=E.path,D.query=E.query;else if(D.authority=se.authority,""===E.path)D.path=se.path,D.query=null!==E.query?E.query:se.query;else{if(0===E.path.indexOf("/"))D.path=E.path;else{let T=se.path;T=T.substr(0,T.lastIndexOf("/")+1),(T.length>0||se.authority)&&"/"!==T.substr(-1)&&(T+="/"),T+=E.path,D.path=T}D.query=E.query}""!==E.path&&(D.path=H.removeDotSegments(D.path));let P=D.protocol;return null!==D.authority&&(P+="//"+D.authority),P+=D.path,null!==D.query&&(P+="?"+D.query),null!==E.fragment&&(P+="#"+E.fragment),""===P&&(P="./"),P},H.removeBase=(se,W)=>{if(null===se)return W;(!se||q.isString(se))&&(se=H.parse(se||""));let E="";if(""!==se.href?E+=(se.protocol||"")+"//"+(se.authority||""):W.indexOf("//")&&(E+="//"),0!==W.indexOf(E))return W;const D=H.parse(W.substr(E.length)),P=se.normalizedPath.split("/"),T=D.normalizedPath.split("/"),w=D.fragment||D.query?0:1;for(;P.length>0&&T.length>w&&P[0]===T[0];)P.shift(),T.shift();let v="";if(P.length>0){P.pop();for(let C=0;C<P.length;++C)v+="../"}return v+=T.join("/"),null!==D.query&&(v+="?"+D.query),null!==D.fragment&&(v+="#"+D.fragment),""===v&&(v="./"),v},H.removeDotSegments=se=>{if(0===se.length)return"";const W=se.split("/"),E=[];for(;W.length>0;){const D=W.shift(),P=0===W.length;"."!==D?".."!==D?E.push(D):(E.pop(),P&&E.push("")):P&&E.push("")}return"/"===se[0]&&E.length>0&&""!==E[0]&&E.unshift(""),1===E.length&&""===E[0]?"/":E.join("/")};const B=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;H.isAbsolute=se=>q.isString(se)&&B.test(se),H.isRelative=se=>q.isString(se)},{"./types":30}],32:[function(Y,Te,fe){"use strict";const q=Y("./graphTypes"),H=Y("./types"),B=Y("rdf-canonize").IdentifierIssuer,se=Y("./JsonLdError"),W=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,D=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,P_headers={accept:"application/ld+json, application/json"},T={};function w(v,C){if(H.isArray(C))for(let A=0;A<C.length;++A)C[A]=w(v,C[A]);else if(q.isList(C))C["@list"]=w(v,C["@list"]);else if(H.isObject(C)){q.isBlankNode(C)&&(C["@id"]=v.getId(C["@id"]));const A=Object.keys(C).sort();for(let U=0;U<A.length;++U){const O=A[U];"@id"!==O&&(C[O]=w(v,C[O]))}}return C}Te.exports=T,T.IdentifierIssuer=B,T.clone=function(v){if(v&&"object"==typeof v){let C;if(H.isArray(v)){C=[];for(let A=0;A<v.length;++A)C[A]=T.clone(v[A])}else if(v instanceof Map){C=new Map;for(const[A,U]of v)C.set(A,T.clone(U))}else if(v instanceof Set){C=new Set;for(const A of v)C.add(T.clone(A))}else if(H.isObject(v)){C={};for(const A in v)C[A]=T.clone(v[A])}else C=v.toString();return C}return v},T.asArray=function(v){return Array.isArray(v)?v:[v]},T.buildHeaders=(v={})=>{if(Object.keys(v).some(A=>"accept"===A.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+P_headers.accept+'" is supported.');return Object.assign({Accept:P_headers.accept},v)},T.parseLinkHeader=v=>{const C={},A=v.match(W);for(let U=0;U<A.length;++U){let O=A[U].match(E);if(!O)continue;const G={target:O[1]},K=O[2];for(;O=D.exec(K);)G[O[1]]=void 0===O[2]?O[3]:O[2];const I=G.rel||"";Array.isArray(C[I])?C[I].push(G):C[I]=C.hasOwnProperty(I)?[C[I],G]:G}return C},T.validateTypeValue=(v,C)=>{if(!(H.isString(v)||H.isArray(v)&&v.every(A=>H.isString(A)))){if(C&&H.isObject(v))switch(Object.keys(v).length){case 0:return;case 1:if("@default"in v&&T.asArray(v["@default"]).every(A=>H.isString(A)))return}throw new se('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:v})}},T.hasProperty=(v,C)=>{if(v.hasOwnProperty(C)){const A=v[C];return!H.isArray(A)||A.length>0}return!1},T.hasValue=(v,C,A)=>{if(T.hasProperty(v,C)){let U=v[C];const O=q.isList(U);if(H.isArray(U)||O){O&&(U=U["@list"]);for(let G=0;G<U.length;++G)if(T.compareValues(A,U[G]))return!0}else if(!H.isArray(A))return T.compareValues(A,U)}return!1},T.addValue=(v,C,A,U)=>{if("propertyIsArray"in(U=U||{})||(U.propertyIsArray=!1),"valueIsArray"in U||(U.valueIsArray=!1),"allowDuplicate"in U||(U.allowDuplicate=!0),"prependValue"in U||(U.prependValue=!1),U.valueIsArray)v[C]=A;else if(H.isArray(A)){0===A.length&&U.propertyIsArray&&!v.hasOwnProperty(C)&&(v[C]=[]),U.prependValue&&(A=A.concat(v[C]),v[C]=[]);for(let O=0;O<A.length;++O)T.addValue(v,C,A[O],U)}else if(v.hasOwnProperty(C)){const O=!U.allowDuplicate&&T.hasValue(v,C,A);!H.isArray(v[C])&&(!O||U.propertyIsArray)&&(v[C]=[v[C]]),O||(U.prependValue?v[C].unshift(A):v[C].push(A))}else v[C]=U.propertyIsArray?[A]:A},T.getValues=(v,C)=>[].concat(v[C]||[]),T.removeProperty=(v,C)=>{delete v[C]},T.removeValue=(v,C,A,U)=>{"propertyIsArray"in(U=U||{})||(U.propertyIsArray=!1);const O=T.getValues(v,C).filter(G=>!T.compareValues(G,A));0===O.length?T.removeProperty(v,C):v[C]=1!==O.length||U.propertyIsArray?O:O[0]},T.relabelBlankNodes=(v,C)=>w((C=C||{}).issuer||new B("_:b"),v),T.compareValues=(v,C)=>!!(v===C||q.isValue(v)&&q.isValue(C)&&v["@value"]===C["@value"]&&v["@type"]===C["@type"]&&v["@language"]===C["@language"]&&v["@index"]===C["@index"])||!!(H.isObject(v)&&"@id"in v&&H.isObject(C)&&"@id"in C)&&v["@id"]===C["@id"],T.compareShortestLeast=(v,C)=>v.length<C.length?-1:C.length<v.length?1:v===C?0:v<C?-1:1},{"./JsonLdError":12,"./graphTypes":25,"./types":30,"rdf-canonize":46}],33:[function(Y,Te,fe){"use strict";const q=Y("yallist"),H=Symbol("max"),B=Symbol("length"),se=Symbol("lengthCalculator"),W=Symbol("allowStale"),E=Symbol("maxAge"),D=Symbol("dispose"),P=Symbol("noDisposeOnSet"),T=Symbol("lruList"),w=Symbol("cache"),v=Symbol("updateAgeOnGet"),C=()=>1;const U=(Q,S,z)=>{const ie=Q[w].get(S);if(ie){const de=ie.value;if(O(Q,de)){if(K(Q,ie),!Q[W])return}else z&&(Q[v]&&(ie.value.now=Date.now()),Q[T].unshiftNode(ie));return de.value}},O=(Q,S)=>{if(!S||!S.maxAge&&!Q[E])return!1;const z=Date.now()-S.now;return S.maxAge?z>S.maxAge:Q[E]&&z>Q[E]},G=Q=>{if(Q[B]>Q[H])for(let S=Q[T].tail;Q[B]>Q[H]&&null!==S;){const z=S.prev;K(Q,S),S=z}},K=(Q,S)=>{if(S){const z=S.value;Q[D]&&Q[D](z.key,z.value),Q[B]-=z.length,Q[w].delete(z.key),Q[T].removeNode(S)}};class I{constructor(S,z,ie,de,te){this.key=S,this.value=z,this.length=ie,this.now=de,this.maxAge=te||0}}const L=(Q,S,z,ie)=>{let de=z.value;O(Q,de)&&(K(Q,z),Q[W]||(de=void 0)),de&&S.call(ie,de.value,de.key,Q)};Te.exports=class{constructor(S){if("number"==typeof S&&(S={max:S}),S||(S={}),S.max&&("number"!=typeof S.max||S.max<0))throw new TypeError("max must be a non-negative number");this[H]=S.max||1/0;const ie=S.length||C;if(this[se]="function"!=typeof ie?C:ie,this[W]=S.stale||!1,S.maxAge&&"number"!=typeof S.maxAge)throw new TypeError("maxAge must be a number");this[E]=S.maxAge||0,this[D]=S.dispose,this[P]=S.noDisposeOnSet||!1,this[v]=S.updateAgeOnGet||!1,this.reset()}set max(S){if("number"!=typeof S||S<0)throw new TypeError("max must be a non-negative number");this[H]=S||1/0,G(this)}get max(){return this[H]}set allowStale(S){this[W]=!!S}get allowStale(){return this[W]}set maxAge(S){if("number"!=typeof S)throw new TypeError("maxAge must be a non-negative number");this[E]=S,G(this)}get maxAge(){return this[E]}set lengthCalculator(S){"function"!=typeof S&&(S=C),S!==this[se]&&(this[se]=S,this[B]=0,this[T].forEach(z=>{z.length=this[se](z.value,z.key),this[B]+=z.length})),G(this)}get lengthCalculator(){return this[se]}get length(){return this[B]}get itemCount(){return this[T].length}rforEach(S,z){z=z||this;for(let ie=this[T].tail;null!==ie;){const de=ie.prev;L(this,S,ie,z),ie=de}}forEach(S,z){z=z||this;for(let ie=this[T].head;null!==ie;){const de=ie.next;L(this,S,ie,z),ie=de}}keys(){return this[T].toArray().map(S=>S.key)}values(){return this[T].toArray().map(S=>S.value)}reset(){this[D]&&this[T]&&this[T].length&&this[T].forEach(S=>this[D](S.key,S.value)),this[w]=new Map,this[T]=new q,this[B]=0}dump(){return this[T].map(S=>!O(this,S)&&{k:S.key,v:S.value,e:S.now+(S.maxAge||0)}).toArray().filter(S=>S)}dumpLru(){return this[T]}set(S,z,ie){if((ie=ie||this[E])&&"number"!=typeof ie)throw new TypeError("maxAge must be a number");const de=ie?Date.now():0,te=this[se](z,S);if(this[w].has(S)){if(te>this[H])return K(this,this[w].get(S)),!1;const me=this[w].get(S).value;return this[D]&&(this[P]||this[D](S,me.value)),me.now=de,me.maxAge=ie,me.value=z,this[B]+=te-me.length,me.length=te,this.get(S),G(this),!0}const oe=new I(S,z,te,de,ie);return oe.length>this[H]?(this[D]&&this[D](S,z),!1):(this[B]+=oe.length,this[T].unshift(oe),this[w].set(S,this[T].head),G(this),!0)}has(S){if(!this[w].has(S))return!1;const z=this[w].get(S).value;return!O(this,z)}get(S){return U(this,S,!0)}peek(S){return U(this,S,!1)}pop(){const S=this[T].tail;return S?(K(this,S),S.value):null}del(S){K(this,this[w].get(S))}load(S){this.reset();const z=Date.now();for(let ie=S.length-1;ie>=0;ie--){const de=S[ie],te=de.e||0;if(0===te)this.set(de.k,de.v);else{const oe=te-z;oe>0&&this.set(de.k,de.v,oe)}}}prune(){this[w].forEach((S,z)=>U(this,z,!1))}}},{yallist:92}],34:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",H="http://www.w3.org/2001/XMLSchema#",B="http://www.w3.org/2000/10/swap/";fe.default={xsd:{decimal:`${H}decimal`,boolean:`${H}boolean`,double:`${H}double`,integer:`${H}integer`,string:`${H}string`},rdf:{type:`${q}type`,nil:`${q}nil`,first:`${q}first`,rest:`${q}rest`,langString:`${q}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${B}reify#forSome`,forAll:`${B}reify#forAll`},log:{implies:`${B}log#implies`}}},{}],35:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.termFromId=function I(ne,be){if(be=be||w,!ne)return be.defaultGraph();switch(ne[0]){case"?":return be.variable(ne.substr(1));case"_":return be.blankNode(ne.substr(2));case'"':if(be===w)return new U(ne);if('"'===ne[ne.length-1])return be.literal(ne.substr(1,ne.length-2));const Re=ne.lastIndexOf('"',ne.length-1);return be.literal(ne.substr(1,Re-1),"@"===ne[Re+1]?ne.substr(Re+2):be.namedNode(ne.substr(Re+3)));case"<":const He=T.exec(ne);return be.quad(I(z(He[1]),be),I(z(He[2]),be),I(z(He[3]),be),He[4]&&I(z(He[4]),be));default:return be.namedNode(ne)}},fe.termToId=function L(ne){if("string"==typeof ne)return ne;if(ne instanceof C&&"Quad"!==ne.termType)return ne.id;if(!ne)return E.id;switch(ne.termType){case"NamedNode":return ne.value;case"BlankNode":return`_:${ne.value}`;case"Variable":return`?${ne.value}`;case"DefaultGraph":return"";case"Literal":return`"${ne.value}"${ne.language?`@${ne.language}`:ne.datatype&&ne.datatype.value!==W.string?`^^${ne.datatype.value}`:""}`;case"Quad":return`<<${S(L(ne.subject))} ${S(L(ne.predicate))} ${S(L(ne.object))}${(0,H.isDefaultGraph)(ne.graph)?"":` ${L(ne.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${ne.termType}`)}},fe.escapeQuotes=S,fe.unescapeQuotes=z,fe.Triple=fe.Quad=fe.DefaultGraph=fe.Variable=fe.BlankNode=fe.Literal=fe.NamedNode=fe.Term=fe.default=void 0;var ne,q=(ne=Y("./IRIs"))&&ne.__esModule?ne:{default:ne},H=Y("./N3Util");const{rdf:se,xsd:W}=q.default;let E,D=0;const P=/^"(.*".*)(?="[^"]*$)/,T=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,w={namedNode:function(ne){return new A(ne)},blankNode:function(ne){return new O(ne||"n3-"+D++)},variable:function(ne){return new G(ne)},literal:function(ne,be){if("string"==typeof be)return new U(`"${ne}"@${be.toLowerCase()}`);let Re=be?be.value:"";return""===Re&&("boolean"==typeof ne?Re=W.boolean:"number"==typeof ne&&(Number.isFinite(ne)?Re=Number.isInteger(ne)?W.integer:W.double:(Re=W.double,Number.isNaN(ne)||(ne=ne>0?"INF":"-INF")))),new U(""===Re||Re===W.string?`"${ne}"`:`"${ne}"^^${Re}`)},defaultGraph:function(){return E},quad:me,triple:me};fe.default=w;class C{constructor(be){this.id=be}get value(){return this.id}equals(be){return be instanceof C?this.id===be.id:!!be&&this.termType===be.termType&&this.value===be.value}toJSON(){return{termType:this.termType,value:this.value}}}fe.Term=C;class A extends C{get termType(){return"NamedNode"}}fe.NamedNode=A;class U extends C{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const be=this.id;let Re=be.lastIndexOf('"')+1;return Re<be.length&&"@"===be[Re++]?be.substr(Re).toLowerCase():""}get datatype(){return new A(this.datatypeString)}get datatypeString(){const be=this.id,Re=be.lastIndexOf('"')+1,He=Re<be.length?be[Re]:"";return"^"===He?be.substr(Re+2):"@"!==He?W.string:se.langString}equals(be){return be instanceof U?this.id===be.id:!!be&&!!be.datatype&&this.termType===be.termType&&this.value===be.value&&this.language===be.language&&this.datatype.value===be.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}fe.Literal=U;class O extends C{constructor(be){super(`_:${be}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}fe.BlankNode=O;class G extends C{constructor(be){super(`?${be}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}fe.Variable=G;class K extends C{constructor(){return super(""),E||this}get termType(){return"DefaultGraph"}equals(be){return this===be||!!be&&this.termType===be.termType}}fe.DefaultGraph=K,E=new K;class Q extends C{constructor(be,Re,He,nt){super(""),this._subject=be,this._predicate=Re,this._object=He,this._graph=nt||E}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(be){return!!be&&this._subject.equals(be.subject)&&this._predicate.equals(be.predicate)&&this._object.equals(be.object)&&this._graph.equals(be.graph)}}function S(ne){return ne.replace(P,(be,Re)=>`"${Re.replace(/"/g,'""')}`)}function z(ne){return ne.replace(P,(be,Re)=>`"${Re.replace(/""/g,'"')}`)}function me(ne,be,Re,He){return new Q(ne,be,Re,He)}fe.Triple=fe.Quad=Q},{"./IRIs":34,"./N3Util":41}],36:[function(Y,Te,fe){(function(q){(function(){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var H=se(Y("./IRIs")),B=se(Y("queue-microtask"));function se(C){return C&&C.__esModule?C:{default:C}}const{xsd:W}=H.default,E=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,D={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},P=/[\x00-\x20<>\\"\{\}\|\^\`]/,T={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},w=/$0^/;fe.default=class{constructor(A){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(A=A||{}).lineMode){this._n3Mode=!1;for(const U in this)!(U in T)&&this[U]instanceof RegExp&&(this[U]=w)}else this._n3Mode=!1!==A.n3;this._comments=!!A.comments,this._literalClosingPos=0}_tokenizeToEnd(A,U){let O=this._input;const G=this._comments;for(;;){let I,L;for(;I=this._newline.exec(O);)G&&(L=this._comment.exec(I[0]))&&A(null,{line:this._line,type:"comment",value:L[1],prefix:""}),O=O.substr(I[0].length,O.length),this._line++;if(!I&&(I=this._whitespace.exec(O))&&(O=O.substr(I[0].length,O.length)),this._endOfFile.test(O))return U&&(G&&(L=this._comment.exec(O))&&A(null,{line:this._line,type:"comment",value:L[1],prefix:""}),A(O=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=O;const Q=this._line,S=O[0];let z="",ie="",de="",te=null,oe=0,Ae=!1;switch(S){case"^":if(O.length<3)break;if("^"!==O[1]){this._n3Mode&&(oe=1,z="^");break}if(this._previousMarker="^^",O=O.substr(2),"<"!==O[0]){Ae=!0;break}case"<":if(te=this._unescapedIri.exec(O))z="IRI",ie=te[1];else if(te=this._iri.exec(O)){if(ie=this._unescape(te[1]),null===ie||P.test(ie))return K(this);z="IRI"}else O.length>1&&"<"===O[1]?(z="<<",oe=2):this._n3Mode&&O.length>1&&"="===O[1]&&(z="inverse",oe=2,ie=">");break;case">":O.length>1&&">"===O[1]&&(z=">>",oe=2);break;case"_":((te=this._blank.exec(O))||U&&(te=this._blank.exec(`${O} `)))&&(z="blank",de="_",ie=te[1]);break;case'"':if(te=this._simpleQuotedString.exec(O))ie=te[1];else if(({value:ie,matchLength:oe}=this._parseLiteral(O)),null===ie)return K(this);(null!==te||0!==oe)&&(z="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(te=this._simpleApostropheString.exec(O))ie=te[1];else if(({value:ie,matchLength:oe}=this._parseLiteral(O)),null===ie)return K(this);(null!==te||0!==oe)&&(z="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(te=this._variable.exec(O))&&(z="var",ie=te[0]);break;case"@":"literal"===this._previousMarker&&(te=this._langcode.exec(O))?(z="langcode",ie=te[1]):(te=this._keyword.exec(O))&&(z=te[0]);break;case".":if(1===O.length?U:O[1]<"0"||O[1]>"9"){z=".",oe=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(te=this._number.exec(O)||U&&(te=this._number.exec(`${O} `)))&&(z="literal",ie=te[0],de="string"==typeof te[1]?W.double:"string"==typeof te[2]?W.decimal:W.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(te=this._sparqlKeyword.exec(O))?z=te[0].toUpperCase():Ae=!0;break;case"f":case"t":(te=this._boolean.exec(O))?(z="literal",ie=te[0],de=W.boolean):Ae=!0;break;case"a":(te=this._shortPredicates.exec(O))?(z="abbreviation",ie="a"):Ae=!0;break;case"=":this._n3Mode&&O.length>1&&(z="abbreviation",">"!==O[1]?(oe=1,ie="="):(oe=2,ie=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(oe=1,z=S);break;default:Ae=!0}if(Ae&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(te=this._prefix.exec(O))?((te=this._prefixed.exec(O))||U&&(te=this._prefixed.exec(`${O} `)))&&(z="prefixed",de=te[1]||"",ie=this._unescape(te[2])):(z="prefix",ie=te[1]||"")),"^^"===this._previousMarker)switch(z){case"prefixed":z="type";break;case"IRI":z="typeIRI";break;default:z=""}if(!z)return U||!/^'''|^"""/.test(O)&&/\n|\r/.test(O)?K(this):this._input=O;const me={line:Q,type:z,value:ie,prefix:de};A(null,me),this.previousToken=me,this._previousMarker=z,O=O.substr(oe||te[0].length,O.length)}function K(I){A(I._syntaxError(/^\S*/.exec(O)[0]))}}_unescape(A){let U=!1;const O=A.replace(E,(G,K,I,L)=>{if("string"==typeof K)return String.fromCharCode(Number.parseInt(K,16));if("string"==typeof I){let Q=Number.parseInt(I,16);return Q<=65535?String.fromCharCode(Number.parseInt(I,16)):String.fromCharCode(55296+((Q-=65536)>>10),56320+(1023&Q))}return L in D?D[L]:(U=!0,"")});return U?null:O}_parseLiteral(A){if(A.length>=3){const U=A.match(/^(?:"""|"|'''|'|)/)[0],O=U.length;let G=Math.max(this._literalClosingPos,O);for(;(G=A.indexOf(U,G))>0;){let K=0;for(;"\\"===A[G-K-1];)K++;if(K%2==0){const I=A.substring(O,G),L=I.split(/\r\n|\r|\n/).length-1,Q=G+O;if(1===O&&0!==L||3===O&&this._lineMode)break;return this._line+=L,{value:this._unescape(I),matchLength:Q}}G++}this._literalClosingPos=A.length-O+1}return{value:"",matchLength:0}}_syntaxError(A){this._input=null;const U=new Error(`Unexpected "${A}" on line ${this._line}.`);return U.context={token:void 0,line:this._line,previousToken:this.previousToken},U}_readStartingBom(A){return A.startsWith("\ufeff")?A.substr(1):A}tokenize(A,U){if(this._line=1,"string"==typeof A){if(this._input=this._readStartingBom(A),"function"!=typeof U){const O=[];let G;if(this._tokenizeToEnd((K,I)=>K?G=K:O.push(I),!0),G)throw G;return O}(0,B.default)(()=>this._tokenizeToEnd(U,!0))}else this._pendingBuffer=null,"function"==typeof A.setEncoding&&A.setEncoding("utf8"),A.on("data",O=>{null!==this._input&&0!==O.length&&(this._pendingBuffer&&(O=q.concat([this._pendingBuffer,O]),this._pendingBuffer=null),128&O[O.length-1]?this._pendingBuffer=O:(void 0===this._input?this._input=this._readStartingBom("string"==typeof O?O:O.toString()):this._input+=O,this._tokenizeToEnd(U,!1)))}),A.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(U,!0)}),A.on("error",U)}}}).call(this)}).call(this,Y("buffer").Buffer)},{"./IRIs":34,buffer:6,"queue-microtask":45}],37:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var q=se(Y("./N3Lexer")),H=se(Y("./N3DataFactory")),B=se(Y("./IRIs"));function se(T){return T&&T.__esModule?T:{default:T}}let W=0;class E{constructor(w){this._contextStack=[],this._graph=null,this._setBase((w=w||{}).baseIRI),w.factory&&P(this,w.factory);const v="string"==typeof w.format?w.format.match(/\w*$/)[0].toLowerCase():"",C=/turtle/.test(v),A=/trig/.test(v),U=/triple/.test(v),O=/quad/.test(v),G=this._n3Mode=/n3/.test(v),K=U||O;(this._supportsNamedGraphs=!(C||G))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(C||A||U||G),this._supportsRDFStar=""===v||/star|\*$/.test(v),K&&(this._resolveRelativeIRI=I=>null),this._blankNodePrefix="string"!=typeof w.blankNodePrefix?"":w.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=w.lexer||new q.default({lineMode:K,n3:G}),this._explicitQuantifiers=!!w.explicitQuantifiers}static _resetBlankNodePrefix(){W=0}_setBase(w){if(w){const v=w.indexOf("#");v>=0&&(w=w.substr(0,v)),this._base=w,this._basePath=w.indexOf("/")<0?w:w.replace(/[^\/?]*(?:\?.*)?$/,""),w=w.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=w[0],this._baseScheme=w[1]}else this._base="",this._basePath=""}_saveContext(w,v,C,A,U){const O=this._n3Mode;this._contextStack.push({subject:C,predicate:A,object:U,graph:v,type:w,inverse:!!O&&this._inversePredicate,blankPrefix:O?this._prefixes._:"",quantified:O?this._quantified:null}),O&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const w=this._contextStack.pop(),v=this._n3Mode;this._subject=w.subject,this._predicate=w.predicate,this._object=w.object,this._graph=w.graph,v&&(this._inversePredicate=w.inverse,this._prefixes._=w.blankPrefix,this._quantified=w.quantified)}_readInTopContext(w){switch(w.type){case"eof":return null!==this._graph?this._error("Unclosed graph",w):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(w)}}_readEntity(w,v){let C;switch(w.type){case"IRI":case"typeIRI":const A=this._resolveIRI(w.value);if(null===A)return this._error("Invalid IRI",w);C=this._namedNode(A);break;case"type":case"prefixed":const U=this._prefixes[w.prefix];if(void 0===U)return this._error(`Undefined prefix "${w.prefix}:"`,w);C=this._namedNode(U+w.value);break;case"blank":C=this._blankNode(this._prefixes[w.prefix]+w.value);break;case"var":C=this._variable(w.value.substr(1));break;default:return this._error(`Expected entity but got ${w.type}`,w)}return!v&&this._n3Mode&&C.id in this._quantified&&(C=this._quantified[C.id]),C}_readSubject(w){switch(this._predicate=null,w.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",w);case"}":return this._readPunctuation(w);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',w);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',w);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",w);if(0===w.prefix.length)return this._literalValue=w.value,this._completeSubjectLiteral;this._subject=this._literal(w.value,this._namedNode(w.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",w);default:if(void 0===(this._subject=this._readEntity(w)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(w){const v=w.type;switch(v){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[w.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${v}`,w):(this._subject=null,"]"===v?this._readBlankNodeTail(w):this._readPunctuation(w));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",w);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",w);default:if(void 0===(this._predicate=this._readEntity(w)))return}return this._readObject}_readObject(w){switch(w.type){case"literal":if(0===w.prefix.length)return this._literalValue=w.value,this._readDataTypeOrLang;this._object=this._literal(w.value,this._namedNode(w.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",w);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",w);default:if(void 0===(this._object=this._readEntity(w)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(w){return"{"===w.type?this._readGraph(w):this._readPredicate(w)}_readGraph(w){return"{"!==w.type?this._error(`Expected graph but got ${w.type}`,w):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(w){return"]"===w.type?(this._subject=null,this._readBlankNodeTail(w)):(this._predicate=null,this._readPredicate(w))}_readBlankNodeTail(w){if("]"!==w.type)return this._readBlankNodePunctuation(w);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const v=null===this._predicate;return this._restoreContext(),null===this._object?v?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}_readPredicateAfterBlank(w){switch(w.type){case".":case"}":return this._subject=null,this._readPunctuation(w);default:return this._readPredicate(w)}}_readListItem(w){let v=null,C=null,A=this._readListItem;const U=this._subject,O=this._contextStack,G=O[O.length-1];switch(w.type){case"[":this._saveContext("blank",this._graph,C=this._blankNode(),this.RDF_FIRST,this._subject=v=this._blankNode()),A=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,C=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==O.length&&"list"===O[O.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(A=this._readPredicate,this._subject===this.RDF_NIL)return A}else if(A=this._getContextEndReader(),this._object===this.RDF_NIL)return A;C=this.RDF_NIL;break;case"literal":0===w.prefix.length?(this._literalValue=w.value,A=this._readListItemDataTypeOrLang):(v=this._literal(w.value,this._namedNode(w.prefix)),A=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",w);default:if(void 0===(v=this._readEntity(w)))return}if(null===C&&(this._subject=C=this._blankNode()),null===U?null===G.predicate?G.subject=C:G.object=C:this._emit(U,this.RDF_REST,C,this._graph),null!==v){if(this._n3Mode&&("IRI"===w.type||"prefixed"===w.type))return this._saveContext("item",this._graph,C,this.RDF_FIRST,v),this._subject=v,this._predicate=null,this._getPathReader(this._readListItem);this._emit(C,this.RDF_FIRST,v,this._graph)}return A}_readDataTypeOrLang(w){return this._completeObjectLiteral(w,!1)}_readListItemDataTypeOrLang(w){return this._completeObjectLiteral(w,!0)}_completeLiteral(w){let v=this._literal(this._literalValue);switch(w.type){case"type":case"typeIRI":const C=this._readEntity(w);if(void 0===C)return;v=this._literal(this._literalValue,C),w=null;break;case"langcode":v=this._literal(this._literalValue,w.value),w=null}return{token:w,literal:v}}_completeSubjectLiteral(w){return this._subject=this._completeLiteral(w).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(w,v){const C=this._completeLiteral(w);if(C)return this._object=C.literal,v&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===C.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(C.token))}_readFormulaTail(w){return"}"!==w.type?this._readPunctuation(w):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(w){let v,C=this._graph;const A=this._subject,U=this._inversePredicate;switch(w.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",w);if(this._n3Mode)return this._readFormulaTail(w);this._graph=null;case".":this._subject=null,v=this._contextStack.length?this._readSubject:this._readInTopContext,U&&(this._inversePredicate=!1);break;case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(C=this._readEntity(w))){v=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,w)}if(null!==A){const O=this._predicate,G=this._object;U?this._emit(G,O,A,C):this._emit(A,O,G,C)}return v}_readBlankNodePunctuation(w){let v;switch(w.type){case";":v=this._readPredicate;break;case",":v=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,w)}return this._emit(this._subject,this._predicate,this._object,this._graph),v}_readQuadPunctuation(w){return"."!==w.type?this._error("Expected dot to follow quad",w):this._readInTopContext}_readPrefix(w){return"prefix"!==w.type?this._error("Expected prefix to follow @prefix",w):(this._prefix=w.value,this._readPrefixIRI)}_readPrefixIRI(w){if("IRI"!==w.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,w);const v=this._readEntity(w);return this._prefixes[this._prefix]=v.value,this._prefixCallback(this._prefix,v),this._readDeclarationPunctuation}_readBaseIRI(w){const v="IRI"===w.type&&this._resolveIRI(w.value);return v?(this._setBase(v),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",w)}_readNamedGraphLabel(w){switch(w.type){case"IRI":case"blank":case"prefixed":return this._readSubject(w),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",w)}}_readNamedGraphBlankLabel(w){return"]"!==w.type?this._error("Invalid graph label",w):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(w){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(w)):"."!==w.type?this._error("Expected declaration to end with a dot",w):this._readInTopContext}_readQuantifierList(w){let v;switch(w.type){case"IRI":case"prefixed":if(void 0!==(v=this._readEntity(w,!0)))break;default:return this._error(`Unexpected ${w.type}`,w)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,v,this.QUANTIFIERS_GRAPH)):this._quantified[v.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(w){return","===w.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(w))}_getPathReader(w){return this._afterPath=w,this._readPath}_readPath(w){switch(w.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const v=this._contextStack,C=v.length&&v[v.length-1];if(C&&"item"===C.type){const A=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,A,this._graph)}return this._afterPath(w)}}_readForwardPath(w){let v,C;const A=this._blankNode();if(void 0!==(C=this._readEntity(w)))return null===this._predicate?(v=this._subject,this._subject=A):(v=this._object,this._object=A),this._emit(v,C,A,this._graph),this._readPath}_readBackwardPath(w){const v=this._blankNode();let C,A;if(void 0!==(C=this._readEntity(w)))return null===this._predicate?(A=this._subject,this._subject=v):(A=this._object,this._object=v),this._emit(v,C,A,this._graph),this._readPath}_readRDFStarTailOrGraph(w){return">>"!==w.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(w))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,w):this._readRDFStarTail(w)}_readRDFStarTail(w){if(">>"!==w.type)return this._error(`Expected >> but got ${w.type}`,w);const v=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=v,this._readPredicate):(this._object=v,this._getContextEndReader())}_getContextEndReader(){const w=this._contextStack;if(!w.length)return this._readPunctuation;switch(w[w.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(w,v,C,A){this._callback(null,this._quad(w,v,C,A||this.DEFAULTGRAPH))}_error(w,v){const C=new Error(`${w} on line ${v.line}.`);C.context={token:v,line:v.line,previousToken:this._lexer.previousToken},this._callback(C),this._callback=D}_resolveIRI(w){return/^[a-z][a-z0-9+.-]*:/i.test(w)?w:this._resolveRelativeIRI(w)}_resolveRelativeIRI(w){if(!w.length)return this._base;switch(w[0]){case"#":return this._base+w;case"?":return this._base.replace(/(?:\?.*)?$/,w);case"/":return("/"===w[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(w);default:return/^[^/:]*:/.test(w)?null:this._removeDotSegments(this._basePath+w)}}_removeDotSegments(w){if(!/(^|\/)\.\.?($|[/#?])/.test(w))return w;const v=w.length;let C="",A=-1,U=-1,O=0,G="/";for(;A<v;){switch(G){case":":if(U<0&&"/"===w[++A]&&"/"===w[++A])for(;(U=A+1)<v&&"/"!==w[U];)A=U;break;case"?":case"#":A=v;break;case"/":if("."===w[A+1])switch(G=w[1+ ++A],G){case"/":C+=w.substring(O,A-1),O=A+1;break;case void 0:case"?":case"#":return C+w.substring(O,A)+w.substr(A+1);case".":if(G=w[1+ ++A],void 0===G||"/"===G||"?"===G||"#"===G){if(C+=w.substring(O,A-2),(O=C.lastIndexOf("/"))>=U&&(C=C.substr(0,O)),"/"!==G)return`${C}/${w.substr(A+1)}`;O=A+1}}}G=w[++A]}return C+w.substring(O)}parse(w,v,C){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${W++}_`,this._prefixCallback=C||D,this._inversePredicate=!1,this._quantified=Object.create(null),!v){const A=[];let U;if(this._callback=(O,G)=>{O?U=O:G&&A.push(G)},this._lexer.tokenize(w).every(O=>this._readCallback=this._readCallback(O)),U)throw U;return A}this._callback=v,this._lexer.tokenize(w,(A,U)=>{null!==A?(this._callback(A),this._callback=D):this._readCallback&&(this._readCallback=this._readCallback(U))})}}function D(){}function P(T,w){const v=w.namedNode;T._namedNode=v,T._blankNode=w.blankNode,T._literal=w.literal,T._variable=w.variable,T._quad=w.quad,T.DEFAULTGRAPH=w.defaultGraph(),T.RDF_FIRST=v(B.default.rdf.first),T.RDF_REST=v(B.default.rdf.rest),T.RDF_NIL=v(B.default.rdf.nil),T.N3_FORALL=v(B.default.r.forAll),T.N3_FORSOME=v(B.default.r.forSome),T.ABBREVIATIONS={a:v(B.default.rdf.type),"=":v(B.default.owl.sameAs),">":v(B.default.log.implies)},T.QUANTIFIERS_GRAPH=v("urn:n3:quantifiers")}fe.default=E,P(E.prototype,H.default)},{"./IRIs":34,"./N3DataFactory":35,"./N3Lexer":36}],38:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var w,q=function(w,v){if(!v&&w&&w.__esModule)return w;if(null===w||"object"!=typeof w&&"function"!=typeof w)return{default:w};var C=W(v);if(C&&C.has(w))return C.get(w);var A={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in w)if("default"!==O&&Object.prototype.hasOwnProperty.call(w,O)){var G=U?Object.getOwnPropertyDescriptor(w,O):null;G&&(G.get||G.set)?Object.defineProperty(A,O,G):A[O]=w[O]}return A.default=w,C&&C.set(w,A),A}(Y("./N3DataFactory")),H=Y("readable-stream"),B=(w=Y("./IRIs"))&&w.__esModule?w:{default:w};function W(w){if("function"!=typeof WeakMap)return null;var v=new WeakMap,C=new WeakMap;return(W=function(A){return A?C:v})(w)}class D{constructor(v,C){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!C&&v&&!v[0]&&(C=v,v=null),this._factory=(C=C||{}).factory||q.default,v&&this.addQuads(v)}get size(){let v=this._size;if(null!==v)return v;v=0;const C=this._graphs;let A,U;for(const O in C)for(const G in A=C[O].subjects)for(const K in U=A[G])v+=Object.keys(U[K]).length;return this._size=v}_addToIndex(v,C,A,U){const O=v[C]||(v[C]={}),G=O[A]||(O[A]={}),K=U in G;return K||(G[U]=null),!K}_removeFromIndex(v,C,A,U){const O=v[C],G=O[A];delete G[U];for(const K in G)return;delete O[A];for(const K in O)return;delete v[C]}_findInIndex(v,C,A,U,O,G,K,I,L,Q){let S,z,ie;const te=!C+!A+!U>1?Object.keys(this._ids):this._entities;C&&((S=v,v={})[C]=S[C]);for(const oe in v){const Ae=te[oe];if(z=v[oe]){A&&((S=z,z={})[A]=S[A]);for(const me in z){const ne=te[me];if(ie=z[me]){const be=U?U in ie?[U]:[]:Object.keys(ie);for(let Re=0;Re<be.length;Re++){const He={subject:null,predicate:null,object:null};He[O]=(0,q.termFromId)(Ae,this._factory),He[G]=(0,q.termFromId)(ne,this._factory),He[K]=(0,q.termFromId)(te[be[Re]],this._factory);const nt=this._factory.quad(He.subject,He.predicate,He.object,(0,q.termFromId)(I,this._factory));if(Q)Q.push(nt);else if(L(nt))return!0}}}}}return Q}_loop(v,C){for(const A in v)C(A)}_loopByKey0(v,C,A){let U,O;if(U=v[C])for(O in U)A(O)}_loopByKey1(v,C,A){let U,O;for(U in v)O=v[U],O[C]&&A(U)}_loopBy2Keys(v,C,A,U){let O,G,K;if((O=v[C])&&(G=O[A]))for(K in G)U(K)}_countInIndex(v,C,A,U){let G,K,I,O=0;C&&((G=v,v={})[C]=G[C]);for(const L in v)if(K=v[L]){A&&((G=K,K={})[A]=G[A]);for(const Q in K)(I=K[Q])&&(U?U in I&&O++:O+=Object.keys(I).length)}return O}_getGraphs(v){if(!P(v))return this._graphs;const C={};return C[v]=this._graphs[v],C}_uniqueEntities(v){const C=Object.create(null);return A=>{A in C||(C[A]=!0,v((0,q.termFromId)(this._entities[A],this._factory)))}}add(v){return this.addQuad(v),this}addQuad(v,C,A,U){C||(U=v.graph,A=v.object,C=v.predicate,v=v.subject),v=(0,q.termToId)(v),C=(0,q.termToId)(C),A=(0,q.termToId)(A),U=(0,q.termToId)(U);let O=this._graphs[U];O||(O=this._graphs[U]={subjects:{},predicates:{},objects:{}},Object.freeze(O));const G=this._ids,K=this._entities;v=G[v]||(G[K[++this._id]=v]=this._id),C=G[C]||(G[K[++this._id]=C]=this._id),A=G[A]||(G[K[++this._id]=A]=this._id);const I=this._addToIndex(O.subjects,v,C,A);return this._addToIndex(O.predicates,C,A,v),this._addToIndex(O.objects,A,v,C),this._size=null,I}addQuads(v){for(let C=0;C<v.length;C++)this.addQuad(v[C])}delete(v){return this.removeQuad(v),this}has(v){return 0!==this.getQuads(v.subject,v.predicate,v.object,v.graph).length}import(v){return v.on("data",C=>{this.addQuad(C)}),v}removeQuad(v,C,A,U){C||(U=v.graph,A=v.object,C=v.predicate,v=v.subject),v=(0,q.termToId)(v),C=(0,q.termToId)(C),A=(0,q.termToId)(A),U=(0,q.termToId)(U);const O=this._ids,G=this._graphs;let K,I,L;if(!((v=O[v])&&(C=O[C])&&(A=O[A])&&(K=G[U])&&(I=K.subjects[v])&&(L=I[C])&&A in L))return!1;for(v in this._removeFromIndex(K.subjects,v,C,A),this._removeFromIndex(K.predicates,C,A,v),this._removeFromIndex(K.objects,A,v,C),null!==this._size&&this._size--,K.subjects)return!0;return delete G[U],!0}removeQuads(v){for(let C=0;C<v.length;C++)this.removeQuad(v[C])}remove(v){return v.on("data",C=>{this.removeQuad(C)}),v}removeMatches(v,C,A,U){const O=new H.Readable({objectMode:!0});return O._read=()=>{for(const G of this.getQuads(v,C,A,U))O.push(G);O.push(null)},this.remove(O)}deleteGraph(v){return this.removeMatches(null,null,null,v)}getQuads(v,C,A,U){v=v&&(0,q.termToId)(v),C=C&&(0,q.termToId)(C),A=A&&(0,q.termToId)(A),U=U&&(0,q.termToId)(U);const O=[],G=this._getGraphs(U),K=this._ids;let I,L,Q,S;if(P(v)&&!(L=K[v])||P(C)&&!(Q=K[C])||P(A)&&!(S=K[A]))return O;for(const z in G)(I=G[z])&&(L?S?this._findInIndex(I.objects,S,L,Q,"object","subject","predicate",z,null,O):this._findInIndex(I.subjects,L,Q,null,"subject","predicate","object",z,null,O):Q?this._findInIndex(I.predicates,Q,S,null,"predicate","object","subject",z,null,O):S?this._findInIndex(I.objects,S,null,null,"object","subject","predicate",z,null,O):this._findInIndex(I.subjects,null,null,null,"subject","predicate","object",z,null,O));return O}match(v,C,A,U){return new T(this,v,C,A,U)}countQuads(v,C,A,U){v=v&&(0,q.termToId)(v),C=C&&(0,q.termToId)(C),A=A&&(0,q.termToId)(A),U=U&&(0,q.termToId)(U);const O=this._getGraphs(U),G=this._ids;let I,L,Q,S,K=0;if(P(v)&&!(L=G[v])||P(C)&&!(Q=G[C])||P(A)&&!(S=G[A]))return 0;for(const z in O)(I=O[z])&&(K+=v?A?this._countInIndex(I.objects,S,L,Q):this._countInIndex(I.subjects,L,Q,S):C?this._countInIndex(I.predicates,Q,S,L):this._countInIndex(I.objects,S,L,Q));return K}forEach(v,C,A,U,O){this.some(G=>(v(G),!1),C,A,U,O)}every(v,C,A,U,O){let G=!1;const K=!this.some(I=>(G=!0,!v(I)),C,A,U,O);return G&&K}some(v,C,A,U,O){C=C&&(0,q.termToId)(C),A=A&&(0,q.termToId)(A),U=U&&(0,q.termToId)(U),O=O&&(0,q.termToId)(O);const G=this._getGraphs(O),K=this._ids;let I,L,Q,S;if(P(C)&&!(L=K[C])||P(A)&&!(Q=K[A])||P(U)&&!(S=K[U]))return!1;for(const z in G)if(I=G[z])if(L){if(S){if(this._findInIndex(I.objects,S,L,Q,"object","subject","predicate",z,v,null))return!0}else if(this._findInIndex(I.subjects,L,Q,null,"subject","predicate","object",z,v,null))return!0}else if(Q){if(this._findInIndex(I.predicates,Q,S,null,"predicate","object","subject",z,v,null))return!0}else if(S){if(this._findInIndex(I.objects,S,null,null,"object","subject","predicate",z,v,null))return!0}else if(this._findInIndex(I.subjects,null,null,null,"subject","predicate","object",z,v,null))return!0;return!1}getSubjects(v,C,A){const U=[];return this.forSubjects(O=>{U.push(O)},v,C,A),U}forSubjects(v,C,A,U){C=C&&(0,q.termToId)(C),A=A&&(0,q.termToId)(A),U=U&&(0,q.termToId)(U);const O=this._ids,G=this._getGraphs(U);let K,I,L;if(v=this._uniqueEntities(v),!(P(C)&&!(I=O[C])||P(A)&&!(L=O[A])))for(U in G)(K=G[U])&&(I?L?this._loopBy2Keys(K.predicates,I,L,v):this._loopByKey1(K.subjects,I,v):L?this._loopByKey0(K.objects,L,v):this._loop(K.subjects,v))}getPredicates(v,C,A){const U=[];return this.forPredicates(O=>{U.push(O)},v,C,A),U}forPredicates(v,C,A,U){C=C&&(0,q.termToId)(C),A=A&&(0,q.termToId)(A),U=U&&(0,q.termToId)(U);const O=this._ids,G=this._getGraphs(U);let K,I,L;if(v=this._uniqueEntities(v),!(P(C)&&!(I=O[C])||P(A)&&!(L=O[A])))for(U in G)(K=G[U])&&(I?L?this._loopBy2Keys(K.objects,L,I,v):this._loopByKey0(K.subjects,I,v):L?this._loopByKey1(K.predicates,L,v):this._loop(K.predicates,v))}getObjects(v,C,A){const U=[];return this.forObjects(O=>{U.push(O)},v,C,A),U}forObjects(v,C,A,U){C=C&&(0,q.termToId)(C),A=A&&(0,q.termToId)(A),U=U&&(0,q.termToId)(U);const O=this._ids,G=this._getGraphs(U);let K,I,L;if(v=this._uniqueEntities(v),!(P(C)&&!(I=O[C])||P(A)&&!(L=O[A])))for(U in G)(K=G[U])&&(I?L?this._loopBy2Keys(K.subjects,I,L,v):this._loopByKey1(K.objects,I,v):L?this._loopByKey0(K.predicates,L,v):this._loop(K.objects,v))}getGraphs(v,C,A){const U=[];return this.forGraphs(O=>{U.push(O)},v,C,A),U}forGraphs(v,C,A,U){for(const O in this._graphs)this.some(G=>(v(G.graph),!0),C,A,U,O)}createBlankNode(v){let C,A;if(v)for(C=v=`_:${v}`,A=1;this._ids[C];)C=v+A++;else do{C="_:b"+this._blankNodeIndex++}while(this._ids[C]);return this._ids[C]=++this._id,this._entities[this._id]=C,this._factory.blankNode(C.substr(2))}extractLists({remove:v=!1,ignoreErrors:C=!1}={}){const A={},U=C?()=>!0:(K,I)=>{throw new Error(`${K.value} ${I}`)},O=this.getQuads(null,B.default.rdf.rest,B.default.rdf.nil,null),G=v?[...O]:[];return O.forEach(K=>{const I=[];let Q,S,L=!1;const z=K.graph;let ie=K.subject;for(;ie&&!L;){const de=this.getQuads(null,null,ie,null),te=this.getQuads(ie,null,null,null);let oe,Ae=null,me=null,ne=null;for(let be=0;be<te.length&&!L;be++)oe=te[be],oe.graph.equals(z)?Q?L=U(ie,"has non-list arcs out"):oe.predicate.value===B.default.rdf.first?Ae?L=U(ie,"has multiple rdf:first arcs"):G.push(Ae=oe):oe.predicate.value===B.default.rdf.rest?me?L=U(ie,"has multiple rdf:rest arcs"):G.push(me=oe):de.length?L=U(ie,"can't be subject and object"):(Q=oe,S="subject"):L=U(ie,"not confined to single graph");for(let be=0;be<de.length&&!L;++be)oe=de[be],Q?L=U(ie,"can't have coreferences"):oe.predicate.value===B.default.rdf.rest?ne?L=U(ie,"has incoming rdf:rest arcs"):ne=oe:(Q=oe,S="object");Ae?I.unshift(Ae.object):L=U(ie,"has no list head"),ie=ne&&ne.subject}L?v=!1:Q&&(A[Q[S].value]=I)}),v&&this.removeQuads(G),A}*[Symbol.iterator](){yield*this.getQuads()}}function P(w){return"string"==typeof w||w instanceof String}fe.default=D;class T extends H.Readable{constructor(v,C,A,U,O){super({objectMode:!0}),Object.assign(this,{n3Store:v,subject:C,predicate:A,object:U,graph:O})}get filtered(){if(!this._filtered){const{n3Store:v,graph:C,object:A,predicate:U,subject:O}=this,G=v.getQuads(O,U,A,C);this._filtered=new D(G,{factory:v._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const v of this.filtered.getQuads())this.push(v);this.push(null)}add(v){return this.filtered.add(v)}delete(v){return this.filtered.delete(v)}has(v){return this.filtered.has(v)}match(v,C,A,U){return new T(this.filtered,v,C,A,U)}*[Symbol.iterator](){yield*this.filtered.getQuads()}}},{"./IRIs":34,"./N3DataFactory":35,"readable-stream":81}],39:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var W,q=(W=Y("./N3Parser"))&&W.__esModule?W:{default:W},H=Y("readable-stream");fe.default=class extends H.Transform{constructor(E){let P,T;super({decodeStrings:!0}),this._readableState.objectMode=!0,new q.default(E).parse({on:(w,v)=>{switch(w){case"data":P=v;break;case"end":T=v}}},(w,v)=>{w&&this.emit("error",w)||v&&this.push(v)},(w,v)=>{this.emit("prefix",w,v)}),this._transform=(w,v,C)=>{P(w),C()},this._flush=w=>{T(),w()}}import(E){return E.on("data",D=>{this.write(D)}),E.on("end",()=>{this.end()}),E.on("error",D=>{this.emit("error",D)}),this}}},{"./N3Parser":37,"readable-stream":81}],40:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var W,q=Y("readable-stream"),H=(W=Y("./N3Writer"))&&W.__esModule?W:{default:W};fe.default=class extends q.Transform{constructor(E){super({encoding:"utf8",writableObjectMode:!0});const D=this._writer=new H.default({write:(P,T,w)=>{this.push(P),w&&w()},end:P=>{this.push(null),P&&P()}},E);this._transform=(P,T,w)=>{D.addQuad(P,w)},this._flush=P=>{D.end(P)}}import(E){return E.on("data",D=>{this.write(D)}),E.on("end",()=>{this.end()}),E.on("error",D=>{this.emit("error",D)}),E.on("prefix",(D,P)=>{this._writer.addPrefix(D,P)}),this}}},{"./N3Writer":42,"readable-stream":81}],41:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.isNamedNode=function(v){return!!v&&"NamedNode"===v.termType},fe.isBlankNode=function(v){return!!v&&"BlankNode"===v.termType},fe.isLiteral=function(v){return!!v&&"Literal"===v.termType},fe.isVariable=function(v){return!!v&&"Variable"===v.termType},fe.isDefaultGraph=D,fe.inDefaultGraph=function(v){return D(v.graph)},fe.prefix=function(v,C){return w({"":v},C)("")},fe.prefixes=w;var v,q=(v=Y("./N3DataFactory"))&&v.__esModule?v:{default:v};function D(v){return!!v&&"DefaultGraph"===v.termType}function w(v,C){const A=Object.create(null);for(const O in v)U(O,v[O]);function U(O,G){if("string"==typeof G){const K=Object.create(null);A[O]=I=>K[I]||(K[I]=C.namedNode(G+I))}else if(!(O in A))throw new Error(`Unknown prefix: ${O}`);return A[O]}return C=C||q.default,U}},{"./N3DataFactory":35}],42:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var G,q=(G=Y("./IRIs"))&&G.__esModule?G:{default:G},H=function(G,K){if(!K&&G&&G.__esModule)return G;if(null===G||"object"!=typeof G&&"function"!=typeof G)return{default:G};var I=se(K);if(I&&I.has(G))return I.get(G);var L={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in G)if("default"!==S&&Object.prototype.hasOwnProperty.call(G,S)){var z=Q?Object.getOwnPropertyDescriptor(G,S):null;z&&(z.get||z.set)?Object.defineProperty(L,S,z):L[S]=G[S]}return L.default=G,I&&I.set(G,L),L}(Y("./N3DataFactory")),B=Y("./N3Util");function se(G){if("function"!=typeof WeakMap)return null;var K=new WeakMap,I=new WeakMap;return(se=function(L){return L?I:K})(G)}const D=H.default.defaultGraph(),{rdf:P,xsd:T}=q.default,w=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,v=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,C={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class A extends H.Term{equals(){return!1}}function O(G){let K=C[G];return void 0===K&&(1===G.length?(K=G.charCodeAt(0).toString(16),K="\\u0000".substr(0,6-K.length)+K):(K=(1024*(G.charCodeAt(0)-55296)+G.charCodeAt(1)+9216).toString(16),K="\\U00000000".substr(0,10-K.length)+K)),K}fe.default=class{constructor(K,I){if(this._prefixRegex=/$0^/,K&&"function"!=typeof K.write&&(I=K,K=null),this._lists=(I=I||{}).lists,K)this._outputStream=K,this._endStream=void 0===I.end||!!I.end;else{let L="";this._outputStream={write(Q,S,z){L+=Q,z&&z()},end:Q=>{Q&&Q(null,L)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(I.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=D,this._baseIRI=I.baseIRI,this._prefixIRIs=Object.create(null),I.prefixes&&this.addPrefixes(I.prefixes))}get _inDefaultGraph(){return D.equals(this._graph)}_write(K,I){this._outputStream.write(K,"utf8",I)}_writeQuad(K,I,L,Q,S){try{Q.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(D.equals(Q)?"":`${this._encodeIriOrBlank(Q)} {\n`)),this._graph=Q,this._subject=null),K.equals(this._subject)?I.equals(this._predicate)?this._write(`, ${this._encodeObject(L)}`,S):this._write(`;\n    ${this._encodePredicate(this._predicate=I)} ${this._encodeObject(L)}`,S):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=K)} ${this._encodePredicate(this._predicate=I)} ${this._encodeObject(L)}`,S)}catch(z){S&&S(z)}}_writeQuadLine(K,I,L,Q,S){delete this._prefixMatch,this._write(this.quadToString(K,I,L,Q),S)}quadToString(K,I,L,Q){return`${this._encodeSubject(K)} ${this._encodeIriOrBlank(I)} ${this._encodeObject(L)}${Q&&Q.value?` ${this._encodeIriOrBlank(Q)} .\n`:" .\n"}`}quadsToString(K){return K.map(I=>this.quadToString(I.subject,I.predicate,I.object,I.graph)).join("")}_encodeSubject(K){return"Quad"===K.termType?this._encodeQuad(K):this._encodeIriOrBlank(K)}_encodeIriOrBlank(K){if("NamedNode"!==K.termType)return this._lists&&K.value in this._lists&&(K=this.list(this._lists[K.value])),"id"in K?K.id:`_:${K.value}`;let I=K.value;this._baseIRI&&I.startsWith(this._baseIRI)&&(I=I.substr(this._baseIRI.length)),w.test(I)&&(I=I.replace(v,O));const L=this._prefixRegex.exec(I);return L?L[1]?this._prefixIRIs[L[1]]+L[2]:I:`<${I}>`}_encodeLiteral(K){let I=K.value;if(w.test(I)&&(I=I.replace(v,O)),K.language)return`"${I}"@${K.language}`;if(this._lineMode){if(K.datatype.value===T.string)return`"${I}"`}else switch(K.datatype.value){case T.string:return`"${I}"`;case T.boolean:if("true"===I||"false"===I)return I;break;case T.integer:if(/^[+-]?\d+$/.test(I))return I;break;case T.decimal:if(/^[+-]?\d*\.\d+$/.test(I))return I;break;case T.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(I))return I}return`"${I}"^^${this._encodeIriOrBlank(K.datatype)}`}_encodePredicate(K){return K.value===P.type?"a":this._encodeIriOrBlank(K)}_encodeObject(K){switch(K.termType){case"Quad":return this._encodeQuad(K);case"Literal":return this._encodeLiteral(K);default:return this._encodeIriOrBlank(K)}}_encodeQuad({subject:K,predicate:I,object:L,graph:Q}){return`<<${this._encodeSubject(K)} ${this._encodePredicate(I)} ${this._encodeObject(L)}${(0,B.isDefaultGraph)(Q)?"":` ${this._encodeIriOrBlank(Q)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(K,I,L,Q,S){void 0===L?this._writeQuad(K.subject,K.predicate,K.object,K.graph,I):"function"==typeof Q?this._writeQuad(K,I,L,D,Q):this._writeQuad(K,I,L,Q||D,S)}addQuads(K){for(let I=0;I<K.length;I++)this.addQuad(K[I])}addPrefix(K,I,L){const Q={};Q[K]=I,this.addPrefixes(Q,L)}addPrefixes(K,I){if(!this._prefixIRIs)return I&&I();let L=!1;for(let Q in K){let S=K[Q];"string"!=typeof S&&(S=S.value),L=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[S]=Q+=":",this._write(`@prefix ${Q} <${S}>.\n`)}if(L){let Q="",S="";for(const z in this._prefixIRIs)Q+=Q?`|${z}`:z,S+=(S?"|":"")+this._prefixIRIs[z];Q=Q.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${S})[^/]*$|^(${Q})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(L?"\n":"",I)}blank(K,I){let Q,S,L=K;switch(void 0===K?L=[]:K.termType?L=[{predicate:K,object:I}]:"length"in K||(L=[K]),S=L.length){case 0:return new A("[]");case 1:if(Q=L[0],!(Q.object instanceof A))return new A(`[ ${this._encodePredicate(Q.predicate)} ${this._encodeObject(Q.object)} ]`);default:let z="[";for(let ie=0;ie<S;ie++)Q=L[ie],Q.predicate.equals(K)?z+=`, ${this._encodeObject(Q.object)}`:(z+=`${(ie?";\n  ":"\n  ")+this._encodePredicate(Q.predicate)} ${this._encodeObject(Q.object)}`,K=Q.predicate);return new A(`${z}\n]`)}}list(K){const I=K&&K.length||0,L=new Array(I);for(let Q=0;Q<I;Q++)L[Q]=this._encodeObject(K[Q]);return new A(`(${L.join(" ")})`)}end(K){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let I=K&&((L,Q)=>{I=null,K(L,Q)});if(this._endStream)try{return this._outputStream.end(I)}catch(L){}I&&I()}}},{"./IRIs":34,"./N3DataFactory":35,"./N3Util":41}],43:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),Object.defineProperty(fe,"Lexer",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(fe,"Parser",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(fe,"Writer",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(fe,"Store",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(fe,"StreamParser",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(fe,"StreamWriter",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(fe,"DataFactory",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(fe,"Term",{enumerable:!0,get:function(){return P.Term}}),Object.defineProperty(fe,"NamedNode",{enumerable:!0,get:function(){return P.NamedNode}}),Object.defineProperty(fe,"Literal",{enumerable:!0,get:function(){return P.Literal}}),Object.defineProperty(fe,"BlankNode",{enumerable:!0,get:function(){return P.BlankNode}}),Object.defineProperty(fe,"Variable",{enumerable:!0,get:function(){return P.Variable}}),Object.defineProperty(fe,"DefaultGraph",{enumerable:!0,get:function(){return P.DefaultGraph}}),Object.defineProperty(fe,"Quad",{enumerable:!0,get:function(){return P.Quad}}),Object.defineProperty(fe,"Triple",{enumerable:!0,get:function(){return P.Triple}}),Object.defineProperty(fe,"termFromId",{enumerable:!0,get:function(){return P.termFromId}}),Object.defineProperty(fe,"termToId",{enumerable:!0,get:function(){return P.termToId}}),fe.Util=void 0;var q=v(Y("./N3Lexer")),H=v(Y("./N3Parser")),B=v(Y("./N3Writer")),se=v(Y("./N3Store")),W=v(Y("./N3StreamParser")),E=v(Y("./N3StreamWriter")),D=w(Y("./N3Util"));fe.Util=D;var P=w(Y("./N3DataFactory"));function T(C){if("function"!=typeof WeakMap)return null;var A=new WeakMap,U=new WeakMap;return(T=function(O){return O?U:A})(C)}function w(C,A){if(!A&&C&&C.__esModule)return C;if(null===C||"object"!=typeof C&&"function"!=typeof C)return{default:C};var U=T(A);if(U&&U.has(C))return U.get(C);var O={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in C)if("default"!==K&&Object.prototype.hasOwnProperty.call(C,K)){var I=G?Object.getOwnPropertyDescriptor(C,K):null;I&&(I.get||I.set)?Object.defineProperty(O,K,I):O[K]=C[K]}return O.default=C,U&&U.set(C,O),O}function v(C){return C&&C.__esModule?C:{default:C}}},{"./N3DataFactory":35,"./N3Lexer":36,"./N3Parser":37,"./N3Store":38,"./N3StreamParser":39,"./N3StreamWriter":40,"./N3Util":41,"./N3Writer":42}],44:[function(Y,Te,fe){var H,B,q=Te.exports={};function se(){throw new Error("setTimeout has not been defined")}function W(){throw new Error("clearTimeout has not been defined")}function E(G){if(H===setTimeout)return setTimeout(G,0);if((H===se||!H)&&setTimeout)return H=setTimeout,setTimeout(G,0);try{return H(G,0)}catch(K){try{return H.call(null,G,0)}catch(I){return H.call(this,G,0)}}}!function(){try{H="function"==typeof setTimeout?setTimeout:se}catch(G){H=se}try{B="function"==typeof clearTimeout?clearTimeout:W}catch(G){B=W}}();var w,P=[],T=!1,v=-1;function C(){!T||!w||(T=!1,w.length?P=w.concat(P):v=-1,P.length&&A())}function A(){if(!T){var G=E(C);T=!0;for(var K=P.length;K;){for(w=P,P=[];++v<K;)w&&w[v].run();v=-1,K=P.length}w=null,T=!1,function(G){if(B===clearTimeout)return clearTimeout(G);if((B===W||!B)&&clearTimeout)return B=clearTimeout,clearTimeout(G);try{B(G)}catch(K){try{return B.call(null,G)}catch(I){return B.call(this,G)}}}(G)}}function U(G,K){this.fun=G,this.array=K}function O(){}q.nextTick=function(G){var K=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)K[I-1]=arguments[I];P.push(new U(G,K)),1===P.length&&!T&&E(A)},U.prototype.run=function(){this.fun.apply(null,this.array)},q.title="browser",q.browser=!0,q.env={},q.argv=[],q.version="",q.versions={},q.on=O,q.addListener=O,q.once=O,q.off=O,q.removeListener=O,q.removeAllListeners=O,q.emit=O,q.prependListener=O,q.prependOnceListener=O,q.listeners=function(G){return[]},q.binding=function(G){throw new Error("process.binding is not supported")},q.cwd=function(){return"/"},q.chdir=function(G){throw new Error("process.chdir is not supported")},q.umask=function(){return 0}},{}],45:[function(Y,Te,fe){(function(q){(function(){let H;Te.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:q):B=>(H||(H=Promise.resolve())).then(B).catch(se=>setTimeout(()=>{throw se},0))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(Y,Te,fe){Te.exports=Y("./lib")},{"./lib":55}],47:[function(Y,Te,fe){"use strict";Te.exports=class Sce{constructor(H,B=new Map,se=0){this.prefix=H,this._existing=B,this.counter=se}clone(){const{prefix:H,_existing:B,counter:se}=this;return new Sce(H,new Map(B),se)}getId(H){const B=H&&this._existing.get(H);if(B)return B;const se=this.prefix+this.counter;return this.counter++,H&&this._existing.set(H,se),se}hasId(H){return this._existing.has(H)}getOldIds(){return[...this._existing.keys()]}}},{}],48:[function(Y,Te,fe){"use strict";Y("setimmediate");const q=self.crypto||self.msCrypto;Te.exports=class{constructor(B){if(!q||!q.subtle)throw new Error("crypto.subtle not found.");if("sha256"===B)this.algorithm={name:"SHA-256"};else{if("sha1"!==B)throw new Error(`Unsupport algorithm "${B}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(B){this._content+=B}digest(){var B=this;return gt(function*(){const se=(new TextEncoder).encode(B._content),W=new Uint8Array(yield q.subtle.digest(B.algorithm,se));let E="";for(let D=0;D<W.length;++D)E+=W[D].toString(16).padStart(2,"0");return E})()}}},{setimmediate:86}],49:[function(Y,Te,fe){"use strict";const B="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",se="http://www.w3.org/2001/XMLSchema#string",W="NamedNode",E="BlankNode",D="Literal",P="DefaultGraph",T={};function w(O,G){return O.subject.termType===G.subject.termType&&O.object.termType===G.object.termType&&O.subject.value===G.subject.value&&O.predicate.value===G.predicate.value&&O.object.value===G.object.value&&(O.object.termType!==D||O.object.datatype.termType===G.object.datatype.termType&&O.object.language===G.object.language&&O.object.datatype.value===G.object.datatype.value)}T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^[ \\t]*$"),T.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),Te.exports=class kH{static parse(G){const K=[],I={},L=G.split(T.eoln);let Q=0;for(const S of L){if(Q++,T.empty.test(S))continue;const z=S.match(T.quad);if(null===z)throw new Error("N-Quads parse error on line "+Q+".");const ie={subject:null,predicate:null,object:null,graph:null};if(ie.subject=void 0!==z[1]?{termType:W,value:z[1]}:{termType:E,value:z[2]},ie.predicate={termType:W,value:z[3]},void 0!==z[4]?ie.object={termType:W,value:z[4]}:void 0!==z[5]?ie.object={termType:E,value:z[5]}:(ie.object={termType:D,value:void 0,datatype:{termType:W}},void 0!==z[7]?ie.object.datatype.value=z[7]:void 0!==z[8]?(ie.object.datatype.value=B,ie.object.language=z[8]):ie.object.datatype.value=se,ie.object.value=z[6].replace(A,function(G,K,I,L){if(K)switch(K){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(I)return String.fromCharCode(parseInt(I,16));if(L)throw new Error("Unsupported U escape")})),ie.graph=void 0!==z[9]?{termType:W,value:z[9]}:void 0!==z[10]?{termType:E,value:z[10]}:{termType:P,value:""},ie.graph.value in I){let de=!0;const te=I[ie.graph.value];for(const oe of te)if(w(oe,ie)){de=!1;break}de&&(te.push(ie),K.push(ie))}else I[ie.graph.value]=[ie],K.push(ie)}return K}static serialize(G){Array.isArray(G)||(G=kH.legacyDatasetToQuads(G));const K=[];for(const I of G)K.push(kH.serializeQuad(I));return K.sort().join("")}static serializeQuad(G){const K=G.subject,L=G.object,Q=G.graph;let S="";return S+=K.termType===W?`<${K.value}>`:`${K.value}`,S+=` <${G.predicate.value}> `,L.termType===W?S+=`<${L.value}>`:L.termType===E?S+=L.value:(S+=`"${O=L.value,O.replace(v,function(G){switch(G){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,L.datatype.value===B?L.language&&(S+=`@${L.language}`):L.datatype.value!==se&&(S+=`^^<${L.datatype.value}>`)),Q.termType===W?S+=` <${Q.value}>`:Q.termType===E&&(S+=` ${Q.value}`),S+=" .\n",S;var O}static legacyDatasetToQuads(G){const K=[],I={"blank node":E,IRI:W,literal:D};for(const L in G)G[L].forEach(S=>{const z={};for(const ie in S){const de=S[ie],te={termType:I[de.type],value:de.value};te.termType===D&&(te.datatype={termType:W},"datatype"in de&&(te.datatype.value=de.datatype),"language"in de?("datatype"in de||(te.datatype.value=B),te.language=de.language):"datatype"in de||(te.datatype.value=se)),z[ie]=te}z.graph="@default"===L?{termType:P,value:""}:{termType:L.startsWith("_:")?E:W,value:L},K.push(z)});return K}};const v=/["\\\n\r]/g;const A=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],50:[function(Y,Te,fe){"use strict";Te.exports=class{constructor(H){this.current=H.sort(),this.done=!1,this.dir=new Map;for(let B=0;B<H.length;++B)this.dir.set(H[B],!0)}hasNext(){return!this.done}next(){const{current:H,dir:B}=this,se=H.slice();let W=null,E=0;const D=H.length;for(let P=0;P<D;++P){const T=H[P],w=B.get(T);(null===W||T>W)&&(w&&P>0&&T>H[P-1]||!w&&P<D-1&&T>H[P+1])&&(W=T,E=P)}if(null===W)this.done=!0;else{const P=B.get(W)?E-1:E+1;H[E]=H[P],H[P]=W;for(const T of H)T>W&&B.set(T,!B.get(T))}return se}}},{}],51:[function(Y,Te,fe){(function(q){(function(){"use strict";const H=Y("./IdentifierIssuer"),B=Y("./MessageDigest"),se=Y("./Permuter"),W=Y("./NQuads");function E(D,P){return D.hash<P.hash?-1:D.hash>P.hash?1:0}Te.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new H("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(P){var T=this;return gt(function*(){T.quads=P;for(const G of P)T._addBlankNodeQuadInfo({quad:G,component:G.subject}),T._addBlankNodeQuadInfo({quad:G,component:G.object}),T._addBlankNodeQuadInfo({quad:G,component:G.graph});const w=new Map,v=[...T.blankNodeInfo.keys()];let C=0;for(const G of v)++C%100==0&&(yield T._yield()),yield T._hashAndTrackBlankNode({id:G,hashToBlankNodes:w});const A=[...w.keys()].sort(),U=[];for(const G of A){const K=w.get(G);K.length>1?U.push(K):T.canonicalIssuer.getId(K[0])}for(const G of U){const K=[];for(const I of G){if(T.canonicalIssuer.hasId(I))continue;const L=new H("_:b");L.getId(I);const Q=yield T.hashNDegreeQuads(I,L);K.push(Q)}K.sort(E);for(const I of K){const L=I.issuer.getOldIds();for(const Q of L)T.canonicalIssuer.getId(Q)}}const O=[];for(const G of T.quads){const K=ht({},G);K.subject=T._useCanonicalId({component:K.subject}),K.object=T._useCanonicalId({component:K.object}),K.graph=T._useCanonicalId({component:K.graph}),O.push(W.serializeQuad(K))}return O.sort(),O.join("")})()}hashFirstDegreeQuads(P){var T=this;return gt(function*(){const w=[],v=T.blankNodeInfo.get(P),C=v.quads;for(const U of C){const O={subject:null,predicate:U.predicate,object:null,graph:null};O.subject=T.modifyFirstDegreeComponent(P,U.subject,"subject"),O.object=T.modifyFirstDegreeComponent(P,U.object,"object"),O.graph=T.modifyFirstDegreeComponent(P,U.graph,"graph"),w.push(W.serializeQuad(O))}w.sort();const A=new B(T.hashAlgorithm);for(const U of w)A.update(U);return v.hash=yield A.digest(),v.hash})()}hashRelatedBlankNode(P,T,w,v){var C=this;return gt(function*(){let A;A=C.canonicalIssuer.hasId(P)?C.canonicalIssuer.getId(P):w.hasId(P)?w.getId(P):C.blankNodeInfo.get(P).hash;const U=new B(C.hashAlgorithm);return U.update(v),"g"!==v&&U.update(C.getRelatedPredicate(T)),U.update(A),U.digest()})()}hashNDegreeQuads(P,T){var w=this;return gt(function*(){const v=new B(w.hashAlgorithm),C=yield w.createHashToRelated(P,T),A=[...C.keys()].sort();for(const U of A){v.update(U);let G,O="";const K=new se(C.get(U));let I=0;for(;K.hasNext();){const L=K.next();++I%3==0&&(yield w._yield());let Q=T.clone(),S="";const z=[];let ie=!1;for(const de of L)if(w.canonicalIssuer.hasId(de)?S+=w.canonicalIssuer.getId(de):(Q.hasId(de)||z.push(de),S+=Q.getId(de)),0!==O.length&&S>O){ie=!0;break}if(!ie){for(const de of z){const te=yield w.hashNDegreeQuads(de,Q);if(S+=Q.getId(de),S+=`<${te.hash}>`,Q=te.issuer,0!==O.length&&S>O){ie=!0;break}}ie||(0===O.length||S<O)&&(O=S,G=Q)}}v.update(O),T=G}return{hash:yield v.digest(),issuer:T}})()}modifyFirstDegreeComponent(P,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===P?"_:a":"_:z"}}getRelatedPredicate(P){return`<${P.predicate.value}>`}createHashToRelated(P,T){var w=this;return gt(function*(){const v=new Map,C=w.blankNodeInfo.get(P).quads;let A=0;for(const U of C)++A%100==0&&(yield w._yield()),yield Promise.all([w._addRelatedBlankNodeHash({quad:U,component:U.subject,position:"s",id:P,issuer:T,hashToRelated:v}),w._addRelatedBlankNodeHash({quad:U,component:U.object,position:"o",id:P,issuer:T,hashToRelated:v}),w._addRelatedBlankNodeHash({quad:U,component:U.graph,position:"g",id:P,issuer:T,hashToRelated:v})]);return v})()}_hashAndTrackBlankNode({id:P,hashToBlankNodes:T}){var w=this;return gt(function*(){const v=yield w.hashFirstDegreeQuads(P),C=T.get(v);C?C.push(P):T.set(v,[P])})()}_addBlankNodeQuadInfo({quad:P,component:T}){if("BlankNode"!==T.termType)return;const w=T.value,v=this.blankNodeInfo.get(w);v?v.quads.add(P):this.blankNodeInfo.set(w,{quads:new Set([P]),hash:null})}_addRelatedBlankNodeHash({quad:P,component:T,position:w,id:v,issuer:C,hashToRelated:A}){var U=this;return gt(function*(){if("BlankNode"!==T.termType||T.value===v)return;const O=T.value,G=yield U.hashRelatedBlankNode(O,P,C,w),K=A.get(G);K?K.push(O):A.set(G,[O])})()}_useCanonicalId({component:P}){return"BlankNode"!==P.termType||P.value.startsWith(this.canonicalIssuer.prefix)?P:{termType:"BlankNode",value:this.canonicalIssuer.getId(P.value)}}_yield(){return gt(function*(){return new Promise(P=>q(P))})()}}}).call(this)}).call(this,Y("timers").setImmediate)},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50,timers:89}],52:[function(Y,Te,fe){"use strict";const q=Y("./IdentifierIssuer"),H=Y("./MessageDigest"),B=Y("./Permuter"),se=Y("./NQuads");function W(E,D){return E.hash<D.hash?-1:E.hash>D.hash?1:0}Te.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new q("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(D){this.quads=D;for(const A of D)this._addBlankNodeQuadInfo({quad:A,component:A.subject}),this._addBlankNodeQuadInfo({quad:A,component:A.object}),this._addBlankNodeQuadInfo({quad:A,component:A.graph});const P=new Map,T=[...this.blankNodeInfo.keys()];for(const A of T)this._hashAndTrackBlankNode({id:A,hashToBlankNodes:P});const w=[...P.keys()].sort(),v=[];for(const A of w){const U=P.get(A);U.length>1?v.push(U):this.canonicalIssuer.getId(U[0])}for(const A of v){const U=[];for(const O of A){if(this.canonicalIssuer.hasId(O))continue;const G=new q("_:b");G.getId(O);const K=this.hashNDegreeQuads(O,G);U.push(K)}U.sort(W);for(const O of U){const G=O.issuer.getOldIds();for(const K of G)this.canonicalIssuer.getId(K)}}const C=[];for(const A of this.quads){const U=ht({},A);U.subject=this._useCanonicalId({component:U.subject}),U.object=this._useCanonicalId({component:U.object}),U.graph=this._useCanonicalId({component:U.graph}),C.push(se.serializeQuad(U))}return C.sort(),C.join("")}hashFirstDegreeQuads(D){const P=[],T=this.blankNodeInfo.get(D),w=T.quads;for(const C of w){const A={subject:null,predicate:C.predicate,object:null,graph:null};A.subject=this.modifyFirstDegreeComponent(D,C.subject,"subject"),A.object=this.modifyFirstDegreeComponent(D,C.object,"object"),A.graph=this.modifyFirstDegreeComponent(D,C.graph,"graph"),P.push(se.serializeQuad(A))}P.sort();const v=new H(this.hashAlgorithm);for(const C of P)v.update(C);return T.hash=v.digest(),T.hash}hashRelatedBlankNode(D,P,T,w){let v;v=this.canonicalIssuer.hasId(D)?this.canonicalIssuer.getId(D):T.hasId(D)?T.getId(D):this.blankNodeInfo.get(D).hash;const C=new H(this.hashAlgorithm);return C.update(w),"g"!==w&&C.update(this.getRelatedPredicate(P)),C.update(v),C.digest()}hashNDegreeQuads(D,P){const T=new H(this.hashAlgorithm),w=this.createHashToRelated(D,P),v=[...w.keys()].sort();for(const C of v){T.update(C);let U,A="";const O=new B(w.get(C));for(;O.hasNext();){const G=O.next();let K=P.clone(),I="";const L=[];let Q=!1;for(const S of G)if(this.canonicalIssuer.hasId(S)?I+=this.canonicalIssuer.getId(S):(K.hasId(S)||L.push(S),I+=K.getId(S)),0!==A.length&&I>A){Q=!0;break}if(!Q){for(const S of L){const z=this.hashNDegreeQuads(S,K);if(I+=K.getId(S),I+=`<${z.hash}>`,K=z.issuer,0!==A.length&&I>A){Q=!0;break}}Q||(0===A.length||I<A)&&(A=I,U=K)}}T.update(A),P=U}return{hash:T.digest(),issuer:P}}modifyFirstDegreeComponent(D,P){return"BlankNode"!==P.termType?P:{termType:"BlankNode",value:P.value===D?"_:a":"_:z"}}getRelatedPredicate(D){return`<${D.predicate.value}>`}createHashToRelated(D,P){const T=new Map,w=this.blankNodeInfo.get(D).quads;for(const v of w)this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:D,issuer:P,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:D,issuer:P,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:D,issuer:P,hashToRelated:T});return T}_hashAndTrackBlankNode({id:D,hashToBlankNodes:P}){const T=this.hashFirstDegreeQuads(D),w=P.get(T);w?w.push(D):P.set(T,[D])}_addBlankNodeQuadInfo({quad:D,component:P}){if("BlankNode"!==P.termType)return;const T=P.value,w=this.blankNodeInfo.get(T);w?w.quads.add(D):this.blankNodeInfo.set(T,{quads:new Set([D]),hash:null})}_addRelatedBlankNodeHash({quad:D,component:P,position:T,id:w,issuer:v,hashToRelated:C}){if("BlankNode"!==P.termType||P.value===w)return;const A=P.value,U=this.hashRelatedBlankNode(A,D,v,T),O=C.get(U);O?O.push(A):C.set(U,[A])}_useCanonicalId({component:D}){return"BlankNode"!==D.termType||D.value.startsWith(this.canonicalIssuer.prefix)?D:{termType:"BlankNode",value:this.canonicalIssuer.getId(D.value)}}}},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50}],53:[function(Y,Te,fe){"use strict";const q=Y("./URDNA2015");Te.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(B,se,W){return"BlankNode"!==se.termType?se:"graph"===W?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:se.value===B?"_:a":"_:z"}}getRelatedPredicate(B){return B.predicate.value}createHashToRelated(B,se){var W=this;return gt(function*(){const E=new Map,D=W.blankNodeInfo.get(B).quads;let P=0;for(const T of D){let w,v;if("BlankNode"===T.subject.termType&&T.subject.value!==B)v=T.subject.value,w="p";else{if("BlankNode"!==T.object.termType||T.object.value===B)continue;v=T.object.value,w="r"}++P%100==0&&(yield W._yield());const C=yield W.hashRelatedBlankNode(v,T,se,w),A=E.get(C);A?A.push(v):E.set(C,[v])}return E})()}}},{"./URDNA2015":51}],54:[function(Y,Te,fe){"use strict";const q=Y("./URDNA2015Sync");Te.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(B,se,W){return"BlankNode"!==se.termType?se:"graph"===W?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:se.value===B?"_:a":"_:z"}}getRelatedPredicate(B){return B.predicate.value}createHashToRelated(B,se){const W=new Map,E=this.blankNodeInfo.get(B).quads;for(const D of E){let P,T;if("BlankNode"===D.subject.termType&&D.subject.value!==B)T=D.subject.value,P="p";else{if("BlankNode"!==D.object.termType||D.object.value===B)continue;T=D.object.value,P="r"}const w=this.hashRelatedBlankNode(T,D,se,P),v=W.get(w);v?v.push(T):W.set(w,[T])}return W}}},{"./URDNA2015Sync":52}],55:[function(Y,Te,fe){"use strict";const q=Y("./URDNA2015"),H=Y("./URGNA2012"),B=Y("./URDNA2015Sync"),se=Y("./URGNA2012Sync");let W;try{W=Y("rdf-canonize-native")}catch(D){}const E={};Te.exports=E,E.NQuads=Y("./NQuads"),E.IdentifierIssuer=Y("./IdentifierIssuer"),E._rdfCanonizeNative=function(D){return D&&(W=D),W},E.canonize=function(){var D=gt(function*(P,T){if(Array.isArray(P)||(P=E.NQuads.legacyDatasetToQuads(P)),T.useNative){if(!W)throw new Error("rdf-canonize-native not available");return new Promise((w,v)=>W.canonize(P,T,(C,A)=>C?v(C):w(A)))}if("URDNA2015"===T.algorithm)return new q(T).main(P);if("URGNA2012"===T.algorithm)return new H(T).main(P);throw"algorithm"in T?new Error("Invalid RDF Dataset Canonicalization algorithm: "+T.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(P,T){return D.apply(this,arguments)}}(),E._canonizeSync=function(D,P){if(Array.isArray(D)||(D=E.NQuads.legacyDatasetToQuads(D)),P.useNative){if(W)return W.canonizeSync(D,P);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===P.algorithm)return new B(P).main(D);if("URGNA2012"===P.algorithm)return new se(P).main(D);throw"algorithm"in P?new Error("Invalid RDF Dataset Canonicalization algorithm: "+P.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":47,"./NQuads":49,"./URDNA2015":51,"./URDNA2015Sync":52,"./URGNA2012":53,"./URGNA2012Sync":54,"rdf-canonize-native":3}],56:[function(Y,Te,fe){"use strict";var q=this&&this.__createBinding||(Object.create?function(B,se,W,E){void 0===E&&(E=W),Object.defineProperty(B,E,{enumerable:!0,get:function(){return se[W]}})}:function(B,se,W,E){void 0===E&&(E=W),B[E]=se[W]}),H=this&&this.__exportStar||function(B,se){for(var W in B)"default"!==W&&!Object.prototype.hasOwnProperty.call(se,W)&&q(se,B,W)};Object.defineProperty(fe,"__esModule",{value:!0}),H(Y("./lib/BlankNode"),fe),H(Y("./lib/DataFactory"),fe),H(Y("./lib/DefaultGraph"),fe),H(Y("./lib/Literal"),fe),H(Y("./lib/NamedNode"),fe),H(Y("./lib/Quad"),fe),H(Y("./lib/Variable"),fe)},{"./lib/BlankNode":57,"./lib/DataFactory":58,"./lib/DefaultGraph":59,"./lib/Literal":60,"./lib/NamedNode":61,"./lib/Quad":62,"./lib/Variable":63}],57:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.BlankNode=void 0;fe.BlankNode=class{constructor(B){this.termType="BlankNode",this.value=B}equals(B){return!!B&&"BlankNode"===B.termType&&B.value===this.value}}},{}],58:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.DataFactory=void 0;const q=Y("./BlankNode"),H=Y("./DefaultGraph"),B=Y("./Literal"),se=Y("./NamedNode"),W=Y("./Quad"),E=Y("./Variable");let D=0;fe.DataFactory=class{constructor(w){this.blankNodeCounter=0,this.blankNodePrefix=(w=w||{}).blankNodePrefix||`df_${D++}_`}namedNode(w){return new se.NamedNode(w)}blankNode(w){return new q.BlankNode(w||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(w,v){return new B.Literal(w,v)}variable(w){return new E.Variable(w)}defaultGraph(){return H.DefaultGraph.INSTANCE}quad(w,v,C,A){return new W.Quad(w,v,C,A||this.defaultGraph())}fromTerm(w){switch(w.termType){case"NamedNode":return this.namedNode(w.value);case"BlankNode":return this.blankNode(w.value);case"Literal":return w.language?this.literal(w.value,w.language):w.datatype.equals(B.Literal.XSD_STRING)?this.literal(w.value):this.literal(w.value,this.fromTerm(w.datatype));case"Variable":return this.variable(w.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(w.subject),this.fromTerm(w.predicate),this.fromTerm(w.object),this.fromTerm(w.graph))}}fromQuad(w){return this.fromTerm(w)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},{"./BlankNode":57,"./DefaultGraph":59,"./Literal":60,"./NamedNode":61,"./Quad":62,"./Variable":63}],59:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.DefaultGraph=void 0;class q{constructor(){this.termType="DefaultGraph",this.value=""}equals(B){return!!B&&"DefaultGraph"===B.termType}}fe.DefaultGraph=q,q.INSTANCE=new q},{}],60:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Literal=void 0;const q=Y("./NamedNode");class H{constructor(se,W){this.termType="Literal",this.value=se,"string"==typeof W?(this.language=W,this.datatype=H.RDF_LANGUAGE_STRING):W?(this.language="",this.datatype=W):(this.language="",this.datatype=H.XSD_STRING)}equals(se){return!!se&&"Literal"===se.termType&&se.value===this.value&&se.language===this.language&&se.datatype.equals(this.datatype)}}fe.Literal=H,H.RDF_LANGUAGE_STRING=new q.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),H.XSD_STRING=new q.NamedNode("http://www.w3.org/2001/XMLSchema#string")},{"./NamedNode":61}],61:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.NamedNode=void 0;fe.NamedNode=class{constructor(B){this.termType="NamedNode",this.value=B}equals(B){return!!B&&"NamedNode"===B.termType&&B.value===this.value}}},{}],62:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Quad=void 0;fe.Quad=class{constructor(B,se,W,E){this.termType="Quad",this.value="",this.subject=B,this.predicate=se,this.object=W,this.graph=E}equals(B){return!!B&&("Quad"===B.termType||!B.termType)&&this.subject.equals(B.subject)&&this.predicate.equals(B.predicate)&&this.object.equals(B.object)&&this.graph.equals(B.graph)}}},{}],63:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.Variable=void 0;fe.Variable=class{constructor(B){this.termType="Variable",this.value=B}equals(B){return!!B&&"Variable"===B.termType&&B.value===this.value}}},{}],64:[function(Y,Te,fe){"use strict";var q=this&&this.__createBinding||(Object.create?function(B,se,W,E){void 0===E&&(E=W),Object.defineProperty(B,E,{enumerable:!0,get:function(){return se[W]}})}:function(B,se,W,E){void 0===E&&(E=W),B[E]=se[W]}),H=this&&this.__exportStar||function(B,se){for(var W in B)"default"!==W&&!Object.prototype.hasOwnProperty.call(se,W)&&q(se,B,W)};Object.defineProperty(fe,"__esModule",{value:!0}),H(Y("./lib/RdfXmlParser"),fe)},{"./lib/RdfXmlParser":66}],65:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.ParseError=void 0;class q extends Error{constructor(B,se){const W=B.saxStream._parser;super(B.trackPosition?`Line ${W.line+1} column ${W.column+1}: ${se}`:se)}}fe.ParseError=q},{}],66:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),fe.ParseType=fe.RdfXmlParser=void 0;const q=Y("relative-to-absolute-iri"),H=Y("sax"),B=Y("stream"),se=Y("./ParseError"),W=Y("rdf-data-factory");class E extends B.Transform{constructor(T){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},T&&(Object.assign(this,T),this.options=T),this.dataFactory||(this.dataFactory=new W.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=H.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(T,w){const v={};let C=!1;for(const U in T.attributes)U.startsWith("xmlns")&&(5===U.length?(C=!0,v[""]=T.attributes[U]):":"===U.charAt(5)&&(C=!0,v[U.substr(6)]=T.attributes[U]));const A=w&&w.ns?w.ns:[E.DEFAULT_NS];return C?A.concat([v]):A}static expandPrefixedTerm(T,w,v){const C=T.indexOf(":");let A,U;C>=0?(A=T.substr(0,C),U=T.substr(C+1)):(A="",U=T);let O=null,G=null;for(let K=w.length-1;K>=0;K--){const I=w[K][A];if(I){O=I;break}G||(G=w[K][""])}if(!O){if(A&&"xmlns"!==A)throw new se.ParseError(v,`The prefix '${A}' in term '${T}' was not bound.`);O=G||""}return{prefix:A,local:U,uri:O}}static isValidIri(T){return E.IRI_REGEX.test(T)}import(T){const w=new B.PassThrough({readableObjectMode:!0});T.on("error",C=>v.emit("error",C)),T.on("data",C=>w.push(C)),T.on("end",()=>w.push(null));const v=w.pipe(new E(this.options));return v}_transform(T,w,v){try{this.saxStream.write(T,w)}catch(C){return v(C)}v()}newParseError(T){return new se.ParseError(this,T)}valueToUri(T,w){return this.uriToNamedNode(q.resolve(T,w.baseIRI))}uriToNamedNode(T){if(!E.isValidIri(T))throw this.newParseError(`Invalid URI: ${T}`);return this.dataFactory.namedNode(T)}validateNcname(T){if(!E.NCNAME_MATCHER.test(T))throw this.newParseError(`Not a valid NCName: ${T}`)}attachSaxListeners(){this.saxStream.on("error",T=>this.emit("error",T)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(T){const w=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let v=D.RESOURCE;if(w&&(w.hadChildren=!0,v=w.childrenParseType),w&&w.childrenStringTags){const A=T.name;let U="";for(const I in T.attributes)U+=` ${I}="${T.attributes[I]}"`;w.childrenStringTags.push(`<${A}${U}>`);const K={childrenStringTags:w.childrenStringTags};return K.childrenStringEmitClosingTag=`</${A}>`,void this.activeTagStack.push(K)}const C={};w?(C.language=w.language,C.baseIRI=w.baseIRI):C.baseIRI=this.baseIRI,this.activeTagStack.push(C),C.ns=E.parseNamespace(T,w),v===D.RESOURCE?this.onTagResource(T,C,w,!w):this.onTagProperty(T,C,w)}onTagResource(T,w,v,C){const A=E.expandPrefixedTerm(T.name,w.ns,this);w.childrenParseType=D.PROPERTY;let U=!0;if(A.uri===E.RDF){if(!C&&E.FORBIDDEN_NODE_ELEMENTS.indexOf(A.local)>=0)throw this.newParseError(`Illegal node element name: ${A.local}`);switch(A.local){case"RDF":w.childrenParseType=D.RESOURCE;case"Description":U=!1}}const O=[],G=[];let K=null,I=!1,L=!1,Q=null;for(const S in T.attributes){const z=T.attributes[S],ie=E.expandPrefixedTerm(S,w.ns,this);if(v&&ie.uri===E.RDF)switch(ie.local){case"about":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${z} and ${K} where found.`);K=z;continue;case"ID":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${z} and ${K} where found.`);this.validateNcname(z),K="#"+z,I=!0;continue;case"nodeID":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${z} and ${K} where found.`);this.validateNcname(z),K=z,L=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":Q=z;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(ie.uri===E.XML){if("lang"===ie.local){w.language=""===z?null:z.toLowerCase();continue}if("base"===ie.local){w.baseIRI=q.resolve(z,w.baseIRI);continue}}"xml"!==ie.prefix&&ie.uri&&(O.push(this.uriToNamedNode(ie.uri+ie.local)),G.push(z))}if(null!==K&&(w.subject=L?this.dataFactory.blankNode(K):this.valueToUri(K,w),I&&this.claimNodeId(w.subject)),w.subject||(w.subject=this.dataFactory.blankNode()),U){const S=this.uriToNamedNode(A.uri+A.local);this.emitTriple(w.subject,this.dataFactory.namedNode(E.RDF+"type"),S,v?v.reifiedStatementId:null)}if(v){if(v.predicate)if(v.childrenCollectionSubject){const S=this.dataFactory.blankNode();this.emitTriple(v.childrenCollectionSubject,v.childrenCollectionPredicate,S,v.reifiedStatementId),this.emitTriple(S,this.dataFactory.namedNode(E.RDF+"first"),w.subject,w.reifiedStatementId),v.childrenCollectionSubject=S,v.childrenCollectionPredicate=this.dataFactory.namedNode(E.RDF+"rest")}else{this.emitTriple(v.subject,v.predicate,w.subject,v.reifiedStatementId);for(let S=0;S<v.predicateSubPredicates.length;S++)this.emitTriple(w.subject,v.predicateSubPredicates[S],v.predicateSubObjects[S],null);v.predicateSubPredicates=[],v.predicateSubObjects=[],v.predicateEmitted=!0}for(let S=0;S<O.length;S++){const z=this.dataFactory.literal(G[S],w.datatype||w.language);this.emitTriple(w.subject,O[S],z,v.reifiedStatementId)}Q&&this.emitTriple(w.subject,this.dataFactory.namedNode(E.RDF+"type"),this.uriToNamedNode(Q),null)}}onTagProperty(T,w,v){const C=E.expandPrefixedTerm(T.name,w.ns,this);if(w.childrenParseType=D.RESOURCE,w.subject=v.subject,C.uri===E.RDF&&"li"===C.local?(v.listItemCounter||(v.listItemCounter=1),w.predicate=this.uriToNamedNode(C.uri+"_"+v.listItemCounter++)):w.predicate=this.uriToNamedNode(C.uri+C.local),C.uri===E.RDF&&E.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(C.local)>=0)throw this.newParseError(`Illegal property element name: ${C.local}`);w.predicateSubPredicates=[],w.predicateSubObjects=[];let A=!1,U=!1,O=null,G=!0;const K=[],I=[];for(const L in T.attributes){const Q=T.attributes[L],S=E.expandPrefixedTerm(L,w.ns,this);if(S.uri===E.RDF)switch(S.local){case"resource":if(O)throw this.newParseError(`Found both rdf:resource (${Q}) and rdf:nodeID (${O}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${Q})`);w.hadChildren=!0,O=Q,G=!1;continue;case"datatype":if(U)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${Q}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${Q})`);w.datatype=this.valueToUri(Q,w);continue;case"nodeID":if(U)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${Q}).`);if(w.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${Q}).`);if(A)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${Q})`);this.validateNcname(Q),w.hadChildren=!0,O=Q,G=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(U)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(w.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${w.datatype.value})`);if(O)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${O})`);if("Resource"===Q){A=!0,w.childrenParseType=D.PROPERTY;const z=this.dataFactory.blankNode();this.emitTriple(w.subject,w.predicate,z,w.reifiedStatementId),w.subject=z,w.predicate=null}else"Collection"===Q?(A=!0,w.hadChildren=!0,w.childrenCollectionSubject=w.subject,w.childrenCollectionPredicate=w.predicate,G=!1):"Literal"===Q&&(A=!0,w.childrenTagsToString=!0,w.childrenStringTags=[]);continue;case"ID":this.validateNcname(Q),w.reifiedStatementId=this.valueToUri("#"+Q,w),this.claimNodeId(w.reifiedStatementId);continue}else if(S.uri===E.XML&&"lang"===S.local){w.language=""===Q?null:Q.toLowerCase();continue}if("xml"!==S.prefix&&"xmlns"!==S.prefix&&S.uri){if(A||w.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${Q}`);w.hadChildren=!0,U=!0,K.push(this.uriToNamedNode(S.uri+S.local)),I.push(this.dataFactory.literal(Q,w.datatype||w.language))}}if(null!==O){const L=w.subject;w.subject=G?this.dataFactory.blankNode(O):this.valueToUri(O,w),this.emitTriple(L,w.predicate,w.subject,w.reifiedStatementId);for(let Q=0;Q<K.length;Q++)this.emitTriple(w.subject,K[Q],I[Q],null);w.predicateEmitted=!0}else G&&(w.predicateSubPredicates=K,w.predicateSubObjects=I,w.predicateEmitted=!1)}emitTriple(T,w,v,C){this.push(this.dataFactory.quad(T,w,v,this.defaultGraph)),C&&(this.push(this.dataFactory.quad(C,this.dataFactory.namedNode(E.RDF+"type"),this.dataFactory.namedNode(E.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(C,this.dataFactory.namedNode(E.RDF+"subject"),T,this.defaultGraph)),this.push(this.dataFactory.quad(C,this.dataFactory.namedNode(E.RDF+"predicate"),w,this.defaultGraph)),this.push(this.dataFactory.quad(C,this.dataFactory.namedNode(E.RDF+"object"),v,this.defaultGraph)))}claimNodeId(T){if(!this.allowDuplicateRdfIds){if(this.nodeIds[T.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${T.value}'.`);this.nodeIds[T.value]=!0}}onText(T){const w=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;w&&(w.childrenStringTags?w.childrenStringTags.push(T):w.predicate&&(w.text=T))}onCloseTag(){const T=this.activeTagStack.pop();if(T.childrenStringEmitClosingTag&&T.childrenStringTags.push(T.childrenStringEmitClosingTag),T.childrenTagsToString&&(T.datatype=this.dataFactory.namedNode(E.RDF+"XMLLiteral"),T.text=T.childrenStringTags.join(""),T.hadChildren=!1),T.childrenCollectionSubject)this.emitTriple(T.childrenCollectionSubject,T.childrenCollectionPredicate,this.dataFactory.namedNode(E.RDF+"nil"),T.reifiedStatementId);else if(T.predicate)if(T.hadChildren||T.childrenParseType===D.PROPERTY){if(!T.predicateEmitted){const w=this.dataFactory.blankNode();this.emitTriple(T.subject,T.predicate,w,T.reifiedStatementId);for(let v=0;v<T.predicateSubPredicates.length;v++)this.emitTriple(w,T.predicateSubPredicates[v],T.predicateSubObjects[v],null)}}else this.emitTriple(T.subject,T.predicate,this.dataFactory.literal(T.text||"",T.datatype||T.language),T.reifiedStatementId)}onDoctype(T){T.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(w,v,C)=>(this.saxStream._parser.ENTITIES[v]=C,""))}}var D,P;fe.RdfXmlParser=E,E.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,E.MIME_TYPE="application/rdf+xml",E.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",E.XML="http://www.w3.org/XML/1998/namespace",E.XMLNS="http://www.w3.org/2000/xmlns/",E.DEFAULT_NS={xml:E.XML},E.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],E.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],E.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(P=D=fe.ParseType||(fe.ParseType={}))[P.RESOURCE=0]="RESOURCE",P[P.PROPERTY=1]="PROPERTY"},{"./ParseError":65,"rdf-data-factory":56,"relative-to-absolute-iri":82,sax:85,stream:87}],67:[function(Y,Te,fe){"use strict";var H={};function B(P,T,w){w||(w=Error);var C=function(A){function U(O,G,K){return A.call(this,function(A,U,O){return"string"==typeof T?T:T(A,U,O)}(O,G,K))||this}return function(P,T){P.prototype=Object.create(T.prototype),P.prototype.constructor=P,P.__proto__=T}(U,A),U}(w);C.prototype.name=w.name,C.prototype.code=P,H[P]=C}function se(P,T){if(Array.isArray(P)){var w=P.length;return P=P.map(function(v){return String(v)}),w>2?"one of ".concat(T," ").concat(P.slice(0,w-1).join(", "),", or ")+P[w-1]:2===w?"one of ".concat(T," ").concat(P[0]," or ").concat(P[1]):"of ".concat(T," ").concat(P[0])}return"of ".concat(T," ").concat(String(P))}B("ERR_INVALID_OPT_VALUE",function(P,T){return'The value "'+T+'" is invalid for option "'+P+'"'},TypeError),B("ERR_INVALID_ARG_TYPE",function(P,T,w){var v,C;if("string"==typeof T&&function(P,T,w){return P.substr(!w||w<0?0:+w,T.length)===T}(T,"not ")?(v="must not be",T=T.replace(/^not /,"")):v="must be",function(P,T,w){return(void 0===w||w>P.length)&&(w=P.length),P.substring(w-T.length,w)===T}(P," argument"))C="The ".concat(P," ").concat(v," ").concat(se(T,"type"));else{var A=function(P,T,w){return"number"!=typeof w&&(w=0),!(w+T.length>P.length)&&-1!==P.indexOf(T,w)}(P,".")?"property":"argument";C='The "'.concat(P,'" ').concat(A," ").concat(v," ").concat(se(T,"type"))}return C+". Received type ".concat(typeof w)},TypeError),B("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),B("ERR_METHOD_NOT_IMPLEMENTED",function(P){return"The "+P+" method is not implemented"}),B("ERR_STREAM_PREMATURE_CLOSE","Premature close"),B("ERR_STREAM_DESTROYED",function(P){return"Cannot call "+P+" after a stream was destroyed"}),B("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),B("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),B("ERR_STREAM_WRITE_AFTER_END","write after end"),B("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),B("ERR_UNKNOWN_ENCODING",function(P){return"Unknown encoding: "+P},TypeError),B("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Te.exports.codes=H},{}],68:[function(Y,Te,fe){(function(q){(function(){"use strict";var H=Object.keys||function(v){var C=[];for(var A in v)C.push(A);return C};Te.exports=P;var B=Y("./_stream_readable"),se=Y("./_stream_writable");Y("inherits")(P,B);for(var W=H(se.prototype),E=0;E<W.length;E++){var D=W[E];P.prototype[D]||(P.prototype[D]=se.prototype[D])}function P(v){if(!(this instanceof P))return new P(v);B.call(this,v),se.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||q.nextTick(w,this)}function w(v){v.end()}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(C){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=C,this._writableState.destroyed=C)}})}).call(this)}).call(this,Y("_process"))},{"./_stream_readable":70,"./_stream_writable":72,_process:44,inherits:10}],69:[function(Y,Te,fe){"use strict";Te.exports=H;var q=Y("./_stream_transform");function H(B){if(!(this instanceof H))return new H(B);q.call(this,B)}Y("inherits")(H,q),H.prototype._transform=function(B,se,W){W(null,B)}},{"./_stream_transform":71,inherits:10}],70:[function(Y,Te,fe){(function(q,H){(function(){"use strict";var B;Te.exports=ne,ne.ReadableState=me,Y("events");var W=function(j,N){return j.listeners(N).length},E=Y("./internal/streams/stream"),D=Y("buffer").Buffer,P=H.Uint8Array||function(){};var C,v=Y("util");C=v&&v.debuglog?v.debuglog("stream"):function(){};var z,ie,de,A=Y("./internal/streams/buffer_list"),U=Y("./internal/streams/destroy"),G=Y("./internal/streams/state").getHighWaterMark,K=Y("../errors").codes,I=K.ERR_INVALID_ARG_TYPE,L=K.ERR_STREAM_PUSH_AFTER_EOF,Q=K.ERR_METHOD_NOT_IMPLEMENTED,S=K.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Y("inherits")(ne,E);var te=U.errorOrDestroy,oe=["error","close","destroy","pause","resume"];function me(ge,j,N){B=B||Y("./_stream_duplex"),"boolean"!=typeof N&&(N=j instanceof B),this.objectMode=!!(ge=ge||{}).objectMode,N&&(this.objectMode=this.objectMode||!!ge.readableObjectMode),this.highWaterMark=G(this,ge,"readableHighWaterMark",N),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ge.emitClose,this.autoDestroy=!!ge.autoDestroy,this.destroyed=!1,this.defaultEncoding=ge.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ge.encoding&&(z||(z=Y("string_decoder/").StringDecoder),this.decoder=new z(ge.encoding),this.encoding=ge.encoding)}function ne(ge){if(B=B||Y("./_stream_duplex"),!(this instanceof ne))return new ne(ge);this._readableState=new me(ge,this,this instanceof B),this.readable=!0,ge&&("function"==typeof ge.read&&(this._read=ge.read),"function"==typeof ge.destroy&&(this._destroy=ge.destroy)),E.call(this)}function be(ge,j,N,V,Pe){C("readableAddChunk",j);var yt,Xe=ge._readableState;if(null===j)Xe.reading=!1,function(ge,j){if(C("onEofChunk"),!j.ended){if(j.decoder){var N=j.decoder.end();N&&N.length&&(j.buffer.push(N),j.length+=j.objectMode?1:N.length)}j.ended=!0,j.sync?je(ge):(j.needReadable=!1,j.emittedReadable||(j.emittedReadable=!0,Le(ge)))}}(ge,Xe);else if(Pe||(yt=function(ge,j){var N;return!function(ge){return D.isBuffer(ge)||ge instanceof P}(j)&&"string"!=typeof j&&void 0!==j&&!ge.objectMode&&(N=new I("chunk",["string","Buffer","Uint8Array"],j)),N}(Xe,j)),yt)te(ge,yt);else if(Xe.objectMode||j&&j.length>0)if("string"!=typeof j&&!Xe.objectMode&&Object.getPrototypeOf(j)!==D.prototype&&(j=function(ge){return D.from(ge)}(j)),V)Xe.endEmitted?te(ge,new S):Re(ge,Xe,j,!0);else if(Xe.ended)te(ge,new L);else{if(Xe.destroyed)return!1;Xe.reading=!1,Xe.decoder&&!N?(j=Xe.decoder.write(j),Xe.objectMode||0!==j.length?Re(ge,Xe,j,!1):Ce(ge,Xe)):Re(ge,Xe,j,!1)}else V||(Xe.reading=!1,Ce(ge,Xe));return!Xe.ended&&(Xe.length<Xe.highWaterMark||0===Xe.length)}function Re(ge,j,N,V){j.flowing&&0===j.length&&!j.sync?(j.awaitDrain=0,ge.emit("data",N)):(j.length+=j.objectMode?1:N.length,V?j.buffer.unshift(N):j.buffer.push(N),j.needReadable&&je(ge)),Ce(ge,j)}Object.defineProperty(ne.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){!this._readableState||(this._readableState.destroyed=j)}}),ne.prototype.destroy=U.destroy,ne.prototype._undestroy=U.undestroy,ne.prototype._destroy=function(ge,j){j(ge)},ne.prototype.push=function(ge,j){var V,N=this._readableState;return N.objectMode?V=!0:"string"==typeof ge&&((j=j||N.defaultEncoding)!==N.encoding&&(ge=D.from(ge,j),j=""),V=!0),be(this,ge,j,!1,V)},ne.prototype.unshift=function(ge){return be(this,ge,null,!0,!1)},ne.prototype.isPaused=function(){return!1===this._readableState.flowing},ne.prototype.setEncoding=function(ge){z||(z=Y("string_decoder/").StringDecoder);var j=new z(ge);this._readableState.decoder=j,this._readableState.encoding=this._readableState.decoder.encoding;for(var N=this._readableState.buffer.head,V="";null!==N;)V+=j.write(N.data),N=N.next;return this._readableState.buffer.clear(),""!==V&&this._readableState.buffer.push(V),this._readableState.length=V.length,this};var nt=1073741824;function Je(ge,j){return ge<=0||0===j.length&&j.ended?0:j.objectMode?1:ge!=ge?j.flowing&&j.length?j.buffer.head.data.length:j.length:(ge>j.highWaterMark&&(j.highWaterMark=function(ge){return ge>=nt?ge=nt:(ge--,ge|=ge>>>1,ge|=ge>>>2,ge|=ge>>>4,ge|=ge>>>8,ge|=ge>>>16,ge++),ge}(ge)),ge<=j.length?ge:j.ended?j.length:(j.needReadable=!0,0))}function je(ge){var j=ge._readableState;C("emitReadable",j.needReadable,j.emittedReadable),j.needReadable=!1,j.emittedReadable||(C("emitReadable",j.flowing),j.emittedReadable=!0,q.nextTick(Le,ge))}function Le(ge){var j=ge._readableState;C("emitReadable_",j.destroyed,j.length,j.ended),!j.destroyed&&(j.length||j.ended)&&(ge.emit("readable"),j.emittedReadable=!1),j.needReadable=!j.flowing&&!j.ended&&j.length<=j.highWaterMark,we(ge)}function Ce(ge,j){j.readingMore||(j.readingMore=!0,q.nextTick(Ne,ge,j))}function Ne(ge,j){for(;!j.reading&&!j.ended&&(j.length<j.highWaterMark||j.flowing&&0===j.length);){var N=j.length;if(C("maybeReadMore read 0"),ge.read(0),N===j.length)break}j.readingMore=!1}function qe(ge){var j=ge._readableState;j.readableListening=ge.listenerCount("readable")>0,j.resumeScheduled&&!j.paused?j.flowing=!0:ge.listenerCount("data")>0&&ge.resume()}function Ve(ge){C("readable nexttick read 0"),ge.read(0)}function X(ge,j){C("resume",j.reading),j.reading||ge.read(0),j.resumeScheduled=!1,ge.emit("resume"),we(ge),j.flowing&&!j.reading&&ge.read(0)}function we(ge){var j=ge._readableState;for(C("flow",j.flowing);j.flowing&&null!==ge.read(););}function ue(ge,j){return 0===j.length?null:(j.objectMode?N=j.buffer.shift():!ge||ge>=j.length?(N=j.decoder?j.buffer.join(""):1===j.buffer.length?j.buffer.first():j.buffer.concat(j.length),j.buffer.clear()):N=j.buffer.consume(ge,j.decoder),N);var N}function Fe(ge){var j=ge._readableState;C("endReadable",j.endEmitted),j.endEmitted||(j.ended=!0,q.nextTick(Et,j,ge))}function Et(ge,j){if(C("endReadableNT",ge.endEmitted,ge.length),!ge.endEmitted&&0===ge.length&&(ge.endEmitted=!0,j.readable=!1,j.emit("end"),ge.autoDestroy)){var N=j._writableState;(!N||N.autoDestroy&&N.finished)&&j.destroy()}}function pt(ge,j){for(var N=0,V=ge.length;N<V;N++)if(ge[N]===j)return N;return-1}ne.prototype.read=function(ge){C("read",ge),ge=parseInt(ge,10);var j=this._readableState,N=ge;if(0!==ge&&(j.emittedReadable=!1),0===ge&&j.needReadable&&((0!==j.highWaterMark?j.length>=j.highWaterMark:j.length>0)||j.ended))return C("read: emitReadable",j.length,j.ended),0===j.length&&j.ended?Fe(this):je(this),null;if(0===(ge=Je(ge,j))&&j.ended)return 0===j.length&&Fe(this),null;var Pe,V=j.needReadable;return C("need readable",V),(0===j.length||j.length-ge<j.highWaterMark)&&C("length less than watermark",V=!0),j.ended||j.reading?C("reading or ended",V=!1):V&&(C("do read"),j.reading=!0,j.sync=!0,0===j.length&&(j.needReadable=!0),this._read(j.highWaterMark),j.sync=!1,j.reading||(ge=Je(N,j))),null===(Pe=ge>0?ue(ge,j):null)?(j.needReadable=j.length<=j.highWaterMark,ge=0):(j.length-=ge,j.awaitDrain=0),0===j.length&&(j.ended||(j.needReadable=!0),N!==ge&&j.ended&&Fe(this)),null!==Pe&&this.emit("data",Pe),Pe},ne.prototype._read=function(ge){te(this,new Q("_read()"))},ne.prototype.pipe=function(ge,j){var N=this,V=this._readableState;switch(V.pipesCount){case 0:V.pipes=ge;break;case 1:V.pipes=[V.pipes,ge];break;default:V.pipes.push(ge)}V.pipesCount+=1,C("pipe count=%d opts=%j",V.pipesCount,j);var Xe=j&&!1===j.end||ge===q.stdout||ge===q.stderr?Ks:Rt;function yt(Mo,vs){C("onunpipe"),Mo===N&&vs&&!1===vs.hasUnpiped&&(vs.hasUnpiped=!0,C("cleanup"),ge.removeListener("close",bs),ge.removeListener("finish",Ao),ge.removeListener("drain",In),ge.removeListener("error",xr),ge.removeListener("unpipe",yt),N.removeListener("end",Rt),N.removeListener("end",Ks),N.removeListener("data",kr),kn=!0,V.awaitDrain&&(!ge._writableState||ge._writableState.needDrain)&&In())}function Rt(){C("onend"),ge.end()}V.endEmitted?q.nextTick(Xe):N.once("end",Xe),ge.on("unpipe",yt);var In=function(ge){return function(){var N=ge._readableState;C("pipeOnDrain",N.awaitDrain),N.awaitDrain&&N.awaitDrain--,0===N.awaitDrain&&W(ge,"data")&&(N.flowing=!0,we(ge))}}(N);ge.on("drain",In);var kn=!1;function kr(Mo){C("ondata");var vs=ge.write(Mo);C("dest.write",vs),!1===vs&&((1===V.pipesCount&&V.pipes===ge||V.pipesCount>1&&-1!==pt(V.pipes,ge))&&!kn&&(C("false write response, pause",V.awaitDrain),V.awaitDrain++),N.pause())}function xr(Mo){C("onerror",Mo),Ks(),ge.removeListener("error",xr),0===W(ge,"error")&&te(ge,Mo)}function bs(){ge.removeListener("finish",Ao),Ks()}function Ao(){C("onfinish"),ge.removeListener("close",bs),Ks()}function Ks(){C("unpipe"),N.unpipe(ge)}return N.on("data",kr),function(ge,j,N){if("function"==typeof ge.prependListener)return ge.prependListener(j,N);ge._events&&ge._events[j]?Array.isArray(ge._events[j])?ge._events[j].unshift(N):ge._events[j]=[N,ge._events[j]]:ge.on(j,N)}(ge,"error",xr),ge.once("close",bs),ge.once("finish",Ao),ge.emit("pipe",N),V.flowing||(C("pipe resume"),N.resume()),ge},ne.prototype.unpipe=function(ge){var j=this._readableState,N={hasUnpiped:!1};if(0===j.pipesCount)return this;if(1===j.pipesCount)return ge&&ge!==j.pipes||(ge||(ge=j.pipes),j.pipes=null,j.pipesCount=0,j.flowing=!1,ge&&ge.emit("unpipe",this,N)),this;if(!ge){var V=j.pipes,Pe=j.pipesCount;j.pipes=null,j.pipesCount=0,j.flowing=!1;for(var Xe=0;Xe<Pe;Xe++)V[Xe].emit("unpipe",this,{hasUnpiped:!1});return this}var yt=pt(j.pipes,ge);return-1===yt||(j.pipes.splice(yt,1),j.pipesCount-=1,1===j.pipesCount&&(j.pipes=j.pipes[0]),ge.emit("unpipe",this,N)),this},ne.prototype.addListener=ne.prototype.on=function(ge,j){var N=E.prototype.on.call(this,ge,j),V=this._readableState;return"data"===ge?(V.readableListening=this.listenerCount("readable")>0,!1!==V.flowing&&this.resume()):"readable"===ge&&!V.endEmitted&&!V.readableListening&&(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,C("on readable",V.length,V.reading),V.length?je(this):V.reading||q.nextTick(Ve,this)),N},ne.prototype.removeListener=function(ge,j){var N=E.prototype.removeListener.call(this,ge,j);return"readable"===ge&&q.nextTick(qe,this),N},ne.prototype.removeAllListeners=function(ge){var j=E.prototype.removeAllListeners.apply(this,arguments);return("readable"===ge||void 0===ge)&&q.nextTick(qe,this),j},ne.prototype.resume=function(){var ge=this._readableState;return ge.flowing||(C("resume"),ge.flowing=!ge.readableListening,function(ge,j){j.resumeScheduled||(j.resumeScheduled=!0,q.nextTick(X,ge,j))}(this,ge)),ge.paused=!1,this},ne.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ne.prototype.wrap=function(ge){var j=this,N=this._readableState,V=!1;for(var Pe in ge.on("end",function(){if(C("wrapped end"),N.decoder&&!N.ended){var yt=N.decoder.end();yt&&yt.length&&j.push(yt)}j.push(null)}),ge.on("data",function(yt){C("wrapped data"),N.decoder&&(yt=N.decoder.write(yt)),N.objectMode&&null==yt||!(N.objectMode||yt&&yt.length)||j.push(yt)||(V=!0,ge.pause())}),ge)void 0===this[Pe]&&"function"==typeof ge[Pe]&&(this[Pe]=function(Rt){return function(){return ge[Rt].apply(ge,arguments)}}(Pe));for(var Xe=0;Xe<oe.length;Xe++)ge.on(oe[Xe],this.emit.bind(this,oe[Xe]));return this._read=function(yt){C("wrapped _read",yt),V&&(V=!1,ge.resume())},this},"function"==typeof Symbol&&(ne.prototype[Symbol.asyncIterator]=function(){return void 0===ie&&(ie=Y("./internal/streams/async_iterator")),ie(this)}),Object.defineProperty(ne.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ne.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ne.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),ne._fromList=ue,Object.defineProperty(ne.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ne.from=function(ge,j){return void 0===de&&(de=Y("./internal/streams/from")),de(ne,ge,j)})}).call(this)}).call(this,Y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/async_iterator":73,"./internal/streams/buffer_list":74,"./internal/streams/destroy":75,"./internal/streams/from":77,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,events:8,inherits:10,"string_decoder/":88,util:3}],71:[function(Y,Te,fe){"use strict";Te.exports=P;var q=Y("../errors").codes,H=q.ERR_METHOD_NOT_IMPLEMENTED,B=q.ERR_MULTIPLE_CALLBACK,se=q.ERR_TRANSFORM_ALREADY_TRANSFORMING,W=q.ERR_TRANSFORM_WITH_LENGTH_0,E=Y("./_stream_duplex");function D(v,C){var A=this._transformState;A.transforming=!1;var U=A.writecb;if(null===U)return this.emit("error",new B);A.writechunk=null,A.writecb=null,null!=C&&this.push(C),U(v);var O=this._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}function P(v){if(!(this instanceof P))return new P(v);E.call(this,v),this._transformState={afterTransform:D.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",T)}function T(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?w(this,null,null):this._flush(function(C,A){w(v,C,A)})}function w(v,C,A){if(C)return v.emit("error",C);if(null!=A&&v.push(A),v._writableState.length)throw new W;if(v._transformState.transforming)throw new se;return v.push(null)}Y("inherits")(P,E),P.prototype.push=function(v,C){return this._transformState.needTransform=!1,E.prototype.push.call(this,v,C)},P.prototype._transform=function(v,C,A){A(new H("_transform()"))},P.prototype._write=function(v,C,A){var U=this._transformState;if(U.writecb=A,U.writechunk=v,U.writeencoding=C,!U.transforming){var O=this._readableState;(U.needTransform||O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}},P.prototype._read=function(v){var C=this._transformState;null===C.writechunk||C.transforming?C.needTransform=!0:(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform))},P.prototype._destroy=function(v,C){E.prototype._destroy.call(this,v,function(A){C(A)})}},{"../errors":67,"./_stream_duplex":68,inherits:10}],72:[function(Y,Te,fe){(function(q,H){(function(){"use strict";function se(we){var ue=this;this.next=null,this.entry=null,this.finish=function(){!function(we,ue,Fe){var Et=we.entry;for(we.entry=null;Et;){var pt=Et.callback;ue.pendingcb--,pt(Fe),Et=Et.next}ue.corkedRequestsFree.next=we}(ue,we)}}var W;Te.exports=me,me.WritableState=oe;var E={deprecate:Y("util-deprecate")},D=Y("./internal/streams/stream"),P=Y("buffer").Buffer,T=H.Uint8Array||function(){};var Ae,C=Y("./internal/streams/destroy"),U=Y("./internal/streams/state").getHighWaterMark,O=Y("../errors").codes,G=O.ERR_INVALID_ARG_TYPE,K=O.ERR_METHOD_NOT_IMPLEMENTED,I=O.ERR_MULTIPLE_CALLBACK,L=O.ERR_STREAM_CANNOT_PIPE,Q=O.ERR_STREAM_DESTROYED,S=O.ERR_STREAM_NULL_VALUES,z=O.ERR_STREAM_WRITE_AFTER_END,ie=O.ERR_UNKNOWN_ENCODING,de=C.errorOrDestroy;function te(){}function oe(we,ue,Fe){W=W||Y("./_stream_duplex"),"boolean"!=typeof Fe&&(Fe=ue instanceof W),this.objectMode=!!(we=we||{}).objectMode,Fe&&(this.objectMode=this.objectMode||!!we.writableObjectMode),this.highWaterMark=U(this,we,"writableHighWaterMark",Fe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===we.decodeStrings),this.defaultEncoding=we.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pt){!function(we,ue){var Fe=we._writableState,Et=Fe.sync,pt=Fe.writecb;if("function"!=typeof pt)throw new I;if(function(we){we.writing=!1,we.writecb=null,we.length-=we.writelen,we.writelen=0}(Fe),ue)!function(we,ue,Fe,Et,pt){--ue.pendingcb,Fe?(q.nextTick(pt,Et),q.nextTick(Ve,we,ue),we._writableState.errorEmitted=!0,de(we,Et)):(pt(Et),we._writableState.errorEmitted=!0,de(we,Et),Ve(we,ue))}(we,Fe,Et,ue,pt);else{var ge=Ne(Fe)||we.destroyed;!ge&&!Fe.corked&&!Fe.bufferProcessing&&Fe.bufferedRequest&&Ce(we,Fe),Et?q.nextTick(je,we,Fe,ge,pt):je(we,Fe,ge,pt)}}(ue,pt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==we.emitClose,this.autoDestroy=!!we.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new se(this)}function me(we){var ue=this instanceof(W=W||Y("./_stream_duplex"));if(!ue&&!Ae.call(me,this))return new me(we);this._writableState=new oe(we,this,ue),this.writable=!0,we&&("function"==typeof we.write&&(this._write=we.write),"function"==typeof we.writev&&(this._writev=we.writev),"function"==typeof we.destroy&&(this._destroy=we.destroy),"function"==typeof we.final&&(this._final=we.final)),D.call(this)}function He(we,ue,Fe,Et,pt,ge){if(!Fe){var j=function(we,ue,Fe){return!we.objectMode&&!1!==we.decodeStrings&&"string"==typeof ue&&(ue=P.from(ue,Fe)),ue}(ue,Et,pt);Et!==j&&(Fe=!0,pt="buffer",Et=j)}var N=ue.objectMode?1:Et.length;ue.length+=N;var V=ue.length<ue.highWaterMark;if(V||(ue.needDrain=!0),ue.writing||ue.corked){var Pe=ue.lastBufferedRequest;ue.lastBufferedRequest={chunk:Et,encoding:pt,isBuf:Fe,callback:ge,next:null},Pe?Pe.next=ue.lastBufferedRequest:ue.bufferedRequest=ue.lastBufferedRequest,ue.bufferedRequestCount+=1}else nt(we,ue,!1,N,Et,pt,ge);return V}function nt(we,ue,Fe,Et,pt,ge,j){ue.writelen=Et,ue.writecb=j,ue.writing=!0,ue.sync=!0,ue.destroyed?ue.onwrite(new Q("write")):Fe?we._writev(pt,ue.onwrite):we._write(pt,ge,ue.onwrite),ue.sync=!1}function je(we,ue,Fe,Et){Fe||function(we,ue){0===ue.length&&ue.needDrain&&(ue.needDrain=!1,we.emit("drain"))}(we,ue),ue.pendingcb--,Et(),Ve(we,ue)}function Ce(we,ue){ue.bufferProcessing=!0;var Fe=ue.bufferedRequest;if(we._writev&&Fe&&Fe.next){var pt=new Array(ue.bufferedRequestCount),ge=ue.corkedRequestsFree;ge.entry=Fe;for(var j=0,N=!0;Fe;)pt[j]=Fe,Fe.isBuf||(N=!1),Fe=Fe.next,j+=1;pt.allBuffers=N,nt(we,ue,!0,ue.length,pt,"",ge.finish),ue.pendingcb++,ue.lastBufferedRequest=null,ge.next?(ue.corkedRequestsFree=ge.next,ge.next=null):ue.corkedRequestsFree=new se(ue),ue.bufferedRequestCount=0}else{for(;Fe;){var V=Fe.chunk;if(nt(we,ue,!1,ue.objectMode?1:V.length,V,Fe.encoding,Fe.callback),Fe=Fe.next,ue.bufferedRequestCount--,ue.writing)break}null===Fe&&(ue.lastBufferedRequest=null)}ue.bufferedRequest=Fe,ue.bufferProcessing=!1}function Ne(we){return we.ending&&0===we.length&&null===we.bufferedRequest&&!we.finished&&!we.writing}function ze(we,ue){we._final(function(Fe){ue.pendingcb--,Fe&&de(we,Fe),ue.prefinished=!0,we.emit("prefinish"),Ve(we,ue)})}function Ve(we,ue){var Fe=Ne(ue);if(Fe&&(function(we,ue){!ue.prefinished&&!ue.finalCalled&&("function"!=typeof we._final||ue.destroyed?(ue.prefinished=!0,we.emit("prefinish")):(ue.pendingcb++,ue.finalCalled=!0,q.nextTick(ze,we,ue)))}(we,ue),0===ue.pendingcb&&(ue.finished=!0,we.emit("finish"),ue.autoDestroy))){var Et=we._readableState;(!Et||Et.autoDestroy&&Et.endEmitted)&&we.destroy()}return Fe}Y("inherits")(me,D),oe.prototype.getBuffer=function(){for(var ue=this.bufferedRequest,Fe=[];ue;)Fe.push(ue),ue=ue.next;return Fe},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(we){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Ae=Function.prototype[Symbol.hasInstance],Object.defineProperty(me,Symbol.hasInstance,{value:function(ue){return!!Ae.call(this,ue)||this===me&&ue&&ue._writableState instanceof oe}})):Ae=function(ue){return ue instanceof this},me.prototype.pipe=function(){de(this,new L)},me.prototype.write=function(we,ue,Fe){var Et=this._writableState,pt=!1,ge=!Et.objectMode&&function(we){return P.isBuffer(we)||we instanceof T}(we);return ge&&!P.isBuffer(we)&&(we=function(we){return P.from(we)}(we)),"function"==typeof ue&&(Fe=ue,ue=null),ge?ue="buffer":ue||(ue=Et.defaultEncoding),"function"!=typeof Fe&&(Fe=te),Et.ending?function(we,ue){var Fe=new z;de(we,Fe),q.nextTick(ue,Fe)}(this,Fe):(ge||function(we,ue,Fe,Et){var pt;return null===Fe?pt=new S:"string"!=typeof Fe&&!ue.objectMode&&(pt=new G("chunk",["string","Buffer"],Fe)),!pt||(de(we,pt),q.nextTick(Et,pt),!1)}(this,Et,we,Fe))&&(Et.pendingcb++,pt=He(this,Et,ge,we,ue,Fe)),pt},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){var we=this._writableState;we.corked&&(we.corked--,!we.writing&&!we.corked&&!we.bufferProcessing&&we.bufferedRequest&&Ce(this,we))},me.prototype.setDefaultEncoding=function(ue){if("string"==typeof ue&&(ue=ue.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ue+"").toLowerCase())>-1))throw new ie(ue);return this._writableState.defaultEncoding=ue,this},Object.defineProperty(me.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(me.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),me.prototype._write=function(we,ue,Fe){Fe(new K("_write()"))},me.prototype._writev=null,me.prototype.end=function(we,ue,Fe){var Et=this._writableState;return"function"==typeof we?(Fe=we,we=null,ue=null):"function"==typeof ue&&(Fe=ue,ue=null),null!=we&&this.write(we,ue),Et.corked&&(Et.corked=1,this.uncork()),Et.ending||function(we,ue,Fe){ue.ending=!0,Ve(we,ue),Fe&&(ue.finished?q.nextTick(Fe):we.once("finish",Fe)),ue.ended=!0,we.writable=!1}(this,Et,Fe),this},Object.defineProperty(me.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ue){!this._writableState||(this._writableState.destroyed=ue)}}),me.prototype.destroy=C.destroy,me.prototype._undestroy=C.undestroy,me.prototype._destroy=function(we,ue){ue(we)}}).call(this)}).call(this,Y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/destroy":75,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,inherits:10,"util-deprecate":90}],73:[function(Y,Te,fe){(function(q){(function(){"use strict";var H;function B(L,Q,S){return Q in L?Object.defineProperty(L,Q,{value:S,enumerable:!0,configurable:!0,writable:!0}):L[Q]=S,L}var se=Y("./end-of-stream"),W=Symbol("lastResolve"),E=Symbol("lastReject"),D=Symbol("error"),P=Symbol("ended"),T=Symbol("lastPromise"),w=Symbol("handlePromise"),v=Symbol("stream");function C(L,Q){return{value:L,done:Q}}function A(L){var Q=L[W];if(null!==Q){var S=L[v].read();null!==S&&(L[T]=null,L[W]=null,L[E]=null,Q(C(S,!1)))}}function U(L){q.nextTick(A,L)}var G=Object.getPrototypeOf(function(){}),K=Object.setPrototypeOf((B(H={get stream(){return this[v]},next:function(){var Q=this,S=this[D];if(null!==S)return Promise.reject(S);if(this[P])return Promise.resolve(C(void 0,!0));if(this[v].destroyed)return new Promise(function(te,oe){q.nextTick(function(){Q[D]?oe(Q[D]):te(C(void 0,!0))})});var ie,z=this[T];if(z)ie=new Promise(function(L,Q){return function(S,z){L.then(function(){Q[P]?S(C(void 0,!0)):Q[w](S,z)},z)}}(z,this));else{var de=this[v].read();if(null!==de)return Promise.resolve(C(de,!1));ie=new Promise(this[w])}return this[T]=ie,ie}},Symbol.asyncIterator,function(){return this}),B(H,"return",function(){var Q=this;return new Promise(function(S,z){Q[v].destroy(null,function(ie){ie?z(ie):S(C(void 0,!0))})})}),H),G);Te.exports=function(Q){var S,z=Object.create(K,(B(S={},v,{value:Q,writable:!0}),B(S,W,{value:null,writable:!0}),B(S,E,{value:null,writable:!0}),B(S,D,{value:null,writable:!0}),B(S,P,{value:Q._readableState.endEmitted,writable:!0}),B(S,w,{value:function(de,te){var oe=z[v].read();oe?(z[T]=null,z[W]=null,z[E]=null,de(C(oe,!1))):(z[W]=de,z[E]=te)},writable:!0}),S));return z[T]=null,se(Q,function(ie){if(ie&&"ERR_STREAM_PREMATURE_CLOSE"!==ie.code){var de=z[E];return null!==de&&(z[T]=null,z[W]=null,z[E]=null,de(ie)),void(z[D]=ie)}var te=z[W];null!==te&&(z[T]=null,z[W]=null,z[E]=null,te(C(void 0,!0))),z[P]=!0}),Q.on("readable",U.bind(null,z)),z}}).call(this)}).call(this,Y("_process"))},{"./end-of-stream":76,_process:44}],74:[function(Y,Te,fe){"use strict";function q(A,U){var O=Object.keys(A);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(A);U&&(G=G.filter(function(K){return Object.getOwnPropertyDescriptor(A,K).enumerable})),O.push.apply(O,G)}return O}function B(A,U,O){return U in A?Object.defineProperty(A,U,{value:O,enumerable:!0,configurable:!0,writable:!0}):A[U]=O,A}function W(A,U){for(var O=0;O<U.length;O++){var G=U[O];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(A,G.key,G)}}var P=Y("buffer").Buffer,w=Y("util").inspect,v=w&&w.custom||"inspect";function C(A,U,O){P.prototype.copy.call(A,U,O)}Te.exports=function(){function A(){(function(A,U){if(!(A instanceof U))throw new TypeError("Cannot call a class as a function")})(this,A),this.head=null,this.tail=null,this.length=0}return function(A,U,O){U&&W(A.prototype,U),O&&W(A,O)}(A,[{key:"push",value:function(O){var G={data:O,next:null};this.length>0?this.tail.next=G:this.head=G,this.tail=G,++this.length}},{key:"unshift",value:function(O){var G={data:O,next:this.head};0===this.length&&(this.tail=G),this.head=G,++this.length}},{key:"shift",value:function(){if(0!==this.length){var O=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,O}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(O){if(0===this.length)return"";for(var G=this.head,K=""+G.data;G=G.next;)K+=O+G.data;return K}},{key:"concat",value:function(O){if(0===this.length)return P.alloc(0);for(var G=P.allocUnsafe(O>>>0),K=this.head,I=0;K;)C(K.data,G,I),I+=K.data.length,K=K.next;return G}},{key:"consume",value:function(O,G){var K;return O<this.head.data.length?(K=this.head.data.slice(0,O),this.head.data=this.head.data.slice(O)):K=O===this.head.data.length?this.shift():G?this._getString(O):this._getBuffer(O),K}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(O){var G=this.head,K=1,I=G.data;for(O-=I.length;G=G.next;){var L=G.data,Q=O>L.length?L.length:O;if(I+=Q===L.length?L:L.slice(0,O),0==(O-=Q)){Q===L.length?(++K,this.head=G.next?G.next:this.tail=null):(this.head=G,G.data=L.slice(Q));break}++K}return this.length-=K,I}},{key:"_getBuffer",value:function(O){var G=P.allocUnsafe(O),K=this.head,I=1;for(K.data.copy(G),O-=K.data.length;K=K.next;){var L=K.data,Q=O>L.length?L.length:O;if(L.copy(G,G.length-O,0,Q),0==(O-=Q)){Q===L.length?(++I,this.head=K.next?K.next:this.tail=null):(this.head=K,K.data=L.slice(Q));break}++I}return this.length-=I,G}},{key:v,value:function(O,G){return w(this,function(A){for(var U=1;U<arguments.length;U++){var O=null!=arguments[U]?arguments[U]:{};U%2?q(Object(O),!0).forEach(function(G){B(A,G,O[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(O)):q(Object(O)).forEach(function(G){Object.defineProperty(A,G,Object.getOwnPropertyDescriptor(O,G))})}return A}({},G,{depth:0,customInspect:!1}))}}]),A}()},{buffer:6,util:3}],75:[function(Y,Te,fe){(function(q){(function(){"use strict";function B(P,T){E(P,T),se(P)}function se(P){P._writableState&&!P._writableState.emitClose||P._readableState&&!P._readableState.emitClose||P.emit("close")}function E(P,T){P.emit("error",T)}Te.exports={destroy:function(P,T){var w=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(T?T(P):P&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(E,this,P)):q.nextTick(E,this,P)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(P||null,function(A){!T&&A?w._writableState?w._writableState.errorEmitted?q.nextTick(se,w):(w._writableState.errorEmitted=!0,q.nextTick(B,w,A)):q.nextTick(B,w,A):T?(q.nextTick(se,w),T(A)):q.nextTick(se,w)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(P,T){var w=P._readableState,v=P._writableState;w&&w.autoDestroy||v&&v.autoDestroy?P.destroy(T):P.emit("error",T)}}}).call(this)}).call(this,Y("_process"))},{_process:44}],76:[function(Y,Te,fe){"use strict";var q=Y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function B(){}Te.exports=function W(E,D,P){if("function"==typeof D)return W(E,null,D);D||(D={}),P=function(E){var D=!1;return function(){if(!D){D=!0;for(var P=arguments.length,T=new Array(P),w=0;w<P;w++)T[w]=arguments[w];E.apply(this,T)}}}(P||B);var T=D.readable||!1!==D.readable&&E.readable,w=D.writable||!1!==D.writable&&E.writable,v=function(){E.writable||A()},C=E._writableState&&E._writableState.finished,A=function(){w=!1,C=!0,T||P.call(E)},U=E._readableState&&E._readableState.endEmitted,O=function(){T=!1,U=!0,w||P.call(E)},G=function(Q){P.call(E,Q)},K=function(){var Q;return T&&!U?((!E._readableState||!E._readableState.ended)&&(Q=new q),P.call(E,Q)):w&&!C?((!E._writableState||!E._writableState.ended)&&(Q=new q),P.call(E,Q)):void 0},I=function(){E.req.on("finish",A)};return function(E){return E.setHeader&&"function"==typeof E.abort}(E)?(E.on("complete",A),E.on("abort",K),E.req?I():E.on("request",I)):w&&!E._writableState&&(E.on("end",v),E.on("close",v)),E.on("end",O),E.on("finish",A),!1!==D.error&&E.on("error",G),E.on("close",K),function(){E.removeListener("complete",A),E.removeListener("abort",K),E.removeListener("request",I),E.req&&E.req.removeListener("finish",A),E.removeListener("end",v),E.removeListener("close",v),E.removeListener("finish",A),E.removeListener("end",O),E.removeListener("error",G),E.removeListener("close",K)}}},{"../../../errors":67}],77:[function(Y,Te,fe){Te.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],78:[function(Y,Te,fe){"use strict";var q;var B=Y("../../../errors").codes,se=B.ERR_MISSING_ARGS,W=B.ERR_STREAM_DESTROYED;function E(A){if(A)throw A}function P(A,U,O,G){G=function(A){var U=!1;return function(){U||(U=!0,A.apply(void 0,arguments))}}(G);var K=!1;A.on("close",function(){K=!0}),void 0===q&&(q=Y("./end-of-stream")),q(A,{readable:U,writable:O},function(L){if(L)return G(L);K=!0,G()});var I=!1;return function(L){if(!K&&!I){if(I=!0,function(A){return A.setHeader&&"function"==typeof A.abort}(A))return A.abort();if("function"==typeof A.destroy)return A.destroy();G(L||new W("pipe"))}}}function T(A){A()}function w(A,U){return A.pipe(U)}function v(A){return A.length&&"function"==typeof A[A.length-1]?A.pop():E}Te.exports=function(){for(var A=arguments.length,U=new Array(A),O=0;O<A;O++)U[O]=arguments[O];var G=v(U);if(Array.isArray(U[0])&&(U=U[0]),U.length<2)throw new se("streams");var K,I=U.map(function(L,Q){var S=Q<U.length-1;return P(L,S,Q>0,function(ie){K||(K=ie),ie&&I.forEach(T),!S&&(I.forEach(T),G(K))})});return U.reduce(w)}},{"../../../errors":67,"./end-of-stream":76}],79:[function(Y,Te,fe){"use strict";var q=Y("../../../errors").codes.ERR_INVALID_OPT_VALUE;Te.exports={getHighWaterMark:function(se,W,E,D){var P=function(se,W,E){return null!=se.highWaterMark?se.highWaterMark:W?se[E]:null}(W,D,E);if(null!=P){if(!isFinite(P)||Math.floor(P)!==P||P<0)throw new q(D?E:"highWaterMark",P);return Math.floor(P)}return se.objectMode?16:16384}}},{"../../../errors":67}],80:[function(Y,Te,fe){Te.exports=Y("events").EventEmitter},{events:8}],81:[function(Y,Te,fe){(fe=Te.exports=Y("./lib/_stream_readable.js")).Stream=fe,fe.Readable=fe,fe.Writable=Y("./lib/_stream_writable.js"),fe.Duplex=Y("./lib/_stream_duplex.js"),fe.Transform=Y("./lib/_stream_transform.js"),fe.PassThrough=Y("./lib/_stream_passthrough.js"),fe.finished=Y("./lib/internal/streams/end-of-stream.js"),fe.pipeline=Y("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":68,"./lib/_stream_passthrough.js":69,"./lib/_stream_readable.js":70,"./lib/_stream_transform.js":71,"./lib/_stream_writable.js":72,"./lib/internal/streams/end-of-stream.js":76,"./lib/internal/streams/pipeline.js":78}],82:[function(Y,Te,fe){"use strict";Object.defineProperty(fe,"__esModule",{value:!0}),function(H){for(var B in H)fe.hasOwnProperty(B)||(fe[B]=H[B])}(Y("./lib/Resolve"))},{"./lib/Resolve":83}],83:[function(Y,Te,fe){"use strict";function H(W){const E=[];let D=0;for(;D<W.length;)switch(W[D]){case"/":if("."===W[D+1])if("."===W[D+2]){if(!se(W[D+3])){E.push([]),D++;break}E.pop(),W[D+3]||E.push([]),D+=3}else{if(!se(W[D+2])){E.push([]),D++;break}W[D+2]||E.push([]),D+=2}else E.push([]),D++;break;case"#":case"?":E.length||E.push([]),E[E.length-1].push(W.substr(D)),D=W.length;break;default:E.length||E.push([]),E[E.length-1].push(W[D]),D++}return"/"+E.map(P=>P.join("")).join("/")}function B(W,E){let D=E+1;E>=0?"/"===W[E+1]&&"/"===W[E+2]&&(D=E+3):"/"===W[0]&&"/"===W[1]&&(D=2);const P=W.indexOf("/",D);return P<0?W:W.substr(0,P)+H(W.substr(P))}function se(W){return!W||"#"===W||"?"===W||"/"===W}Object.defineProperty(fe,"__esModule",{value:!0}),fe.resolve=function(W,E){const D=(E=E||"").indexOf("#");if(D>0&&(E=E.substr(0,D)),!W.length){if(E.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${E}' for value '${W}'`);return E}if(W.startsWith("?")){const U=E.indexOf("?");return U>0&&(E=E.substr(0,U)),E+W}if(W.startsWith("#"))return E+W;if(!E.length){const U=W.indexOf(":");if(U<0)throw new Error(`Found invalid relative IRI '${W}' for a missing baseIRI`);return B(W,U)}const P=W.indexOf(":");if(P>=0)return B(W,P);const T=E.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${E}' for value '${W}'`);const w=E.substr(0,T+1);if(0===W.indexOf("//"))return w+B(W,P);let v;if(E.indexOf("//",T)===T+1){if(v=E.indexOf("/",T+3),v<0)return E.length>T+3?E+"/"+B(W,P):w+B(W,P)}else if(v=E.indexOf("/",T+1),v<0)return w+B(W,P);if(0===W.indexOf("/"))return E.substr(0,v)+H(W);let C=E.substr(v);const A=C.lastIndexOf("/");return A>=0&&A<C.length-1&&(C=C.substr(0,A+1),"."===W[0]&&"."!==W[1]&&"/"!==W[1]&&W[2]&&(W=W.substr(1))),W=H(W=C+W),E.substr(0,v)+W},fe.removeDotSegments=H,fe.removeDotSegmentsOfPath=B},{}],84:[function(Y,Te,fe){var q=Y("buffer"),H=q.Buffer;function B(W,E){for(var D in W)E[D]=W[D]}function se(W,E,D){return H(W,E,D)}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?Te.exports=q:(B(q,fe),fe.Buffer=se),se.prototype=Object.create(H.prototype),B(H,se),se.from=function(W,E,D){if("number"==typeof W)throw new TypeError("Argument must not be a number");return H(W,E,D)},se.alloc=function(W,E,D){if("number"!=typeof W)throw new TypeError("Argument must be a number");var P=H(W);return void 0!==E?"string"==typeof D?P.fill(E,D):P.fill(E):P.fill(0),P},se.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return H(W)},se.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return q.SlowBuffer(W)}},{buffer:6}],85:[function(Y,Te,fe){(function(q){(function(){!function(H){H.parser=function($,X){return new se($,X)},H.SAXParser=se,H.SAXStream=v,H.createStream=function($,X){return new v($,X)},H.MAX_BUFFER_LENGTH=65536;var P,B=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function se($,X){if(!(this instanceof se))return new se($,X);var we=this;(function($){for(var X=0,we=B.length;X<we;X++)$[B[X]]=""})(we),we.q=we.c="",we.bufferCheckPosition=H.MAX_BUFFER_LENGTH,we.opt=X||{},we.opt.lowercase=we.opt.lowercase||we.opt.lowercasetags,we.looseCase=we.opt.lowercase?"toLowerCase":"toUpperCase",we.tags=[],we.closed=we.closedRoot=we.sawRoot=!1,we.tag=we.error=null,we.strict=!!$,we.noscript=!(!$&&!we.opt.noscript),we.state=oe.BEGIN,we.strictEntities=we.opt.strictEntities,we.ENTITIES=Object.create(we.strictEntities?H.XML_ENTITIES:H.ENTITIES),we.attribList=[],we.opt.xmlns&&(we.ns=Object.create(G)),we.trackPosition=!1!==we.opt.position,we.trackPosition&&(we.position=we.line=we.column=0),me(we,"onready")}H.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function($){function X(){}return X.prototype=$,new X}),Object.keys||(Object.keys=function($){var X=[];for(var we in $)$.hasOwnProperty(we)&&X.push(we);return X}),se.prototype={end:function(){nt(this)},write:function($){var X=this;if(this.error)throw this.error;if(X.closed)return He(X,"Cannot write after close. Assign an onready handler.");if(null===$)return nt(X);"object"==typeof $&&($=$.toString());for(var we=0,ue="";ue=qe($,we++),X.c=ue,ue;)switch(X.trackPosition&&(X.position++,"\n"===ue?(X.line++,X.column=0):X.column++),X.state){case oe.BEGIN:if(X.state=oe.BEGIN_WHITESPACE,"\ufeff"===ue)continue;ze(X,ue);continue;case oe.BEGIN_WHITESPACE:ze(X,ue);continue;case oe.TEXT:if(X.sawRoot&&!X.closedRoot){for(var Fe=we-1;ue&&"<"!==ue&&"&"!==ue;)(ue=qe($,we++))&&X.trackPosition&&(X.position++,"\n"===ue?(X.line++,X.column=0):X.column++);X.textNode+=$.substring(Fe,we-1)}"<"!==ue||X.sawRoot&&X.closedRoot&&!X.strict?(!S(ue)&&(!X.sawRoot||X.closedRoot)&&Ze(X,"Text data outside of root node."),"&"===ue?X.state=oe.TEXT_ENTITY:X.textNode+=ue):(X.state=oe.OPEN_WAKA,X.startTagPosition=X.position);continue;case oe.SCRIPT:"<"===ue?X.state=oe.SCRIPT_ENDING:X.script+=ue;continue;case oe.SCRIPT_ENDING:"/"===ue?X.state=oe.CLOSE_TAG:(X.script+="<"+ue,X.state=oe.SCRIPT);continue;case oe.OPEN_WAKA:"!"===ue?(X.state=oe.SGML_DECL,X.sgmlDecl=""):S(ue)||(de(K,ue)?(X.state=oe.OPEN_TAG,X.tagName=ue):"/"===ue?(X.state=oe.CLOSE_TAG,X.tagName=""):"?"===ue?(X.state=oe.PROC_INST,X.procInstName=X.procInstBody=""):(Ze(X,"Unencoded <"),X.startTagPosition+1<X.position&&(ue=new Array(X.position-X.startTagPosition).join(" ")+ue),X.textNode+="<"+ue,X.state=oe.TEXT));continue;case oe.SGML_DECL:"[CDATA["===(X.sgmlDecl+ue).toUpperCase()?(ne(X,"onopencdata"),X.state=oe.CDATA,X.sgmlDecl="",X.cdata=""):X.sgmlDecl+ue==="--"?(X.state=oe.COMMENT,X.comment="",X.sgmlDecl=""):"DOCTYPE"===(X.sgmlDecl+ue).toUpperCase()?(X.state=oe.DOCTYPE,(X.doctype||X.sawRoot)&&Ze(X,"Inappropriately located doctype declaration"),X.doctype="",X.sgmlDecl=""):">"===ue?(ne(X,"onsgmldeclaration",X.sgmlDecl),X.sgmlDecl="",X.state=oe.TEXT):(z(ue)&&(X.state=oe.SGML_DECL_QUOTED),X.sgmlDecl+=ue);continue;case oe.SGML_DECL_QUOTED:ue===X.q&&(X.state=oe.SGML_DECL,X.q=""),X.sgmlDecl+=ue;continue;case oe.DOCTYPE:">"===ue?(X.state=oe.TEXT,ne(X,"ondoctype",X.doctype),X.doctype=!0):(X.doctype+=ue,"["===ue?X.state=oe.DOCTYPE_DTD:z(ue)&&(X.state=oe.DOCTYPE_QUOTED,X.q=ue));continue;case oe.DOCTYPE_QUOTED:X.doctype+=ue,ue===X.q&&(X.q="",X.state=oe.DOCTYPE);continue;case oe.DOCTYPE_DTD:X.doctype+=ue,"]"===ue?X.state=oe.DOCTYPE:z(ue)&&(X.state=oe.DOCTYPE_DTD_QUOTED,X.q=ue);continue;case oe.DOCTYPE_DTD_QUOTED:X.doctype+=ue,ue===X.q&&(X.state=oe.DOCTYPE_DTD,X.q="");continue;case oe.COMMENT:"-"===ue?X.state=oe.COMMENT_ENDING:X.comment+=ue;continue;case oe.COMMENT_ENDING:"-"===ue?(X.state=oe.COMMENT_ENDED,X.comment=Re(X.opt,X.comment),X.comment&&ne(X,"oncomment",X.comment),X.comment=""):(X.comment+="-"+ue,X.state=oe.COMMENT);continue;case oe.COMMENT_ENDED:">"!==ue?(Ze(X,"Malformed comment"),X.comment+="--"+ue,X.state=oe.COMMENT):X.state=oe.TEXT;continue;case oe.CDATA:"]"===ue?X.state=oe.CDATA_ENDING:X.cdata+=ue;continue;case oe.CDATA_ENDING:"]"===ue?X.state=oe.CDATA_ENDING_2:(X.cdata+="]"+ue,X.state=oe.CDATA);continue;case oe.CDATA_ENDING_2:">"===ue?(X.cdata&&ne(X,"oncdata",X.cdata),ne(X,"onclosecdata"),X.cdata="",X.state=oe.TEXT):"]"===ue?X.cdata+="]":(X.cdata+="]]"+ue,X.state=oe.CDATA);continue;case oe.PROC_INST:"?"===ue?X.state=oe.PROC_INST_ENDING:S(ue)?X.state=oe.PROC_INST_BODY:X.procInstName+=ue;continue;case oe.PROC_INST_BODY:if(!X.procInstBody&&S(ue))continue;"?"===ue?X.state=oe.PROC_INST_ENDING:X.procInstBody+=ue;continue;case oe.PROC_INST_ENDING:">"===ue?(ne(X,"onprocessinginstruction",{name:X.procInstName,body:X.procInstBody}),X.procInstName=X.procInstBody="",X.state=oe.TEXT):(X.procInstBody+="?"+ue,X.state=oe.PROC_INST_BODY);continue;case oe.OPEN_TAG:de(I,ue)?X.tagName+=ue:(Je(X),">"===ue?Le(X):"/"===ue?X.state=oe.OPEN_TAG_SLASH:(S(ue)||Ze(X,"Invalid character in tag name"),X.state=oe.ATTRIB));continue;case oe.OPEN_TAG_SLASH:">"===ue?(Le(X,!0),Ce(X)):(Ze(X,"Forward-slash in opening tag not followed by >"),X.state=oe.ATTRIB);continue;case oe.ATTRIB:if(S(ue))continue;">"===ue?Le(X):"/"===ue?X.state=oe.OPEN_TAG_SLASH:de(K,ue)?(X.attribName=ue,X.attribValue="",X.state=oe.ATTRIB_NAME):Ze(X,"Invalid attribute name");continue;case oe.ATTRIB_NAME:"="===ue?X.state=oe.ATTRIB_VALUE:">"===ue?(Ze(X,"Attribute without value"),X.attribValue=X.attribName,je(X),Le(X)):S(ue)?X.state=oe.ATTRIB_NAME_SAW_WHITE:de(I,ue)?X.attribName+=ue:Ze(X,"Invalid attribute name");continue;case oe.ATTRIB_NAME_SAW_WHITE:if("="===ue)X.state=oe.ATTRIB_VALUE;else{if(S(ue))continue;Ze(X,"Attribute without value"),X.tag.attributes[X.attribName]="",X.attribValue="",ne(X,"onattribute",{name:X.attribName,value:""}),X.attribName="",">"===ue?Le(X):de(K,ue)?(X.attribName=ue,X.state=oe.ATTRIB_NAME):(Ze(X,"Invalid attribute name"),X.state=oe.ATTRIB)}continue;case oe.ATTRIB_VALUE:if(S(ue))continue;z(ue)?(X.q=ue,X.state=oe.ATTRIB_VALUE_QUOTED):(Ze(X,"Unquoted attribute value"),X.state=oe.ATTRIB_VALUE_UNQUOTED,X.attribValue=ue);continue;case oe.ATTRIB_VALUE_QUOTED:if(ue!==X.q){"&"===ue?X.state=oe.ATTRIB_VALUE_ENTITY_Q:X.attribValue+=ue;continue}je(X),X.q="",X.state=oe.ATTRIB_VALUE_CLOSED;continue;case oe.ATTRIB_VALUE_CLOSED:S(ue)?X.state=oe.ATTRIB:">"===ue?Le(X):"/"===ue?X.state=oe.OPEN_TAG_SLASH:de(K,ue)?(Ze(X,"No whitespace between attributes"),X.attribName=ue,X.attribValue="",X.state=oe.ATTRIB_NAME):Ze(X,"Invalid attribute name");continue;case oe.ATTRIB_VALUE_UNQUOTED:if(!ie(ue)){"&"===ue?X.state=oe.ATTRIB_VALUE_ENTITY_U:X.attribValue+=ue;continue}je(X),">"===ue?Le(X):X.state=oe.ATTRIB;continue;case oe.CLOSE_TAG:if(X.tagName)">"===ue?Ce(X):de(I,ue)?X.tagName+=ue:X.script?(X.script+="</"+X.tagName,X.tagName="",X.state=oe.SCRIPT):(S(ue)||Ze(X,"Invalid tagname in closing tag"),X.state=oe.CLOSE_TAG_SAW_WHITE);else{if(S(ue))continue;te(K,ue)?X.script?(X.script+="</"+ue,X.state=oe.SCRIPT):Ze(X,"Invalid tagname in closing tag."):X.tagName=ue}continue;case oe.CLOSE_TAG_SAW_WHITE:if(S(ue))continue;">"===ue?Ce(X):Ze(X,"Invalid characters in closing tag");continue;case oe.TEXT_ENTITY:case oe.ATTRIB_VALUE_ENTITY_Q:case oe.ATTRIB_VALUE_ENTITY_U:var pt,ge;switch(X.state){case oe.TEXT_ENTITY:pt=oe.TEXT,ge="textNode";break;case oe.ATTRIB_VALUE_ENTITY_Q:pt=oe.ATTRIB_VALUE_QUOTED,ge="attribValue";break;case oe.ATTRIB_VALUE_ENTITY_U:pt=oe.ATTRIB_VALUE_UNQUOTED,ge="attribValue"}";"===ue?(X[ge]+=Ne(X),X.entity="",X.state=pt):de(X.entity.length?Q:L,ue)?X.entity+=ue:(Ze(X,"Invalid character in entity name"),X[ge]+="&"+X.entity+ue,X.entity="",X.state=pt);continue;default:throw new Error(X,"Unknown state: "+X.state)}return X.position>=X.bufferCheckPosition&&function($){for(var X=Math.max(H.MAX_BUFFER_LENGTH,10),we=0,ue=0,Fe=B.length;ue<Fe;ue++){var Et=$[B[ue]].length;if(Et>X)switch(B[ue]){case"textNode":be($);break;case"cdata":ne($,"oncdata",$.cdata),$.cdata="";break;case"script":ne($,"onscript",$.script),$.script="";break;default:He($,"Max buffer length exceeded: "+B[ue])}we=Math.max(we,Et)}$.bufferCheckPosition=H.MAX_BUFFER_LENGTH-we+$.position}(X),X},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function($){be($),""!==$.cdata&&(ne($,"oncdata",$.cdata),$.cdata=""),""!==$.script&&(ne($,"onscript",$.script),$.script="")}(this)}};try{P=Y("stream").Stream}catch($){P=function(){}}var T=H.EVENTS.filter(function($){return"error"!==$&&"end"!==$});function v($,X){if(!(this instanceof v))return new v($,X);P.apply(this),this._parser=new se($,X),this.writable=!0,this.readable=!0;var we=this;this._parser.onend=function(){we.emit("end")},this._parser.onerror=function(ue){we.emit("error",ue),we._parser.error=null},this._decoder=null,T.forEach(function(ue){Object.defineProperty(we,"on"+ue,{get:function(){return we._parser["on"+ue]},set:function(Fe){if(!Fe)return we.removeAllListeners(ue),we._parser["on"+ue]=Fe,Fe;we.on(ue,Fe)},enumerable:!0,configurable:!1})})}(v.prototype=Object.create(P.prototype,{constructor:{value:v}})).write=function($){if("function"==typeof q&&"function"==typeof q.isBuffer&&q.isBuffer($)){if(!this._decoder){var X=Y("string_decoder").StringDecoder;this._decoder=new X("utf8")}$=this._decoder.write($)}return this._parser.write($.toString()),this.emit("data",$),!0},v.prototype.end=function($){return $&&$.length&&this.write($),this._parser.end(),!0},v.prototype.on=function($,X){var we=this;return!we._parser["on"+$]&&-1!==T.indexOf($)&&(we._parser["on"+$]=function(){var ue=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ue.splice(0,0,$),we.emit.apply(we,ue)}),P.prototype.on.call(we,$,X)};var U="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/2000/xmlns/",G={xml:U,xmlns:O},K=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,L=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function S($){return" "===$||"\n"===$||"\r"===$||"\t"===$}function z($){return'"'===$||"'"===$}function ie($){return">"===$||S($)}function de($,X){return $.test(X)}function te($,X){return!de($,X)}var $,X,we,oe=0;for(var Ae in H.STATE={BEGIN:oe++,BEGIN_WHITESPACE:oe++,TEXT:oe++,TEXT_ENTITY:oe++,OPEN_WAKA:oe++,SGML_DECL:oe++,SGML_DECL_QUOTED:oe++,DOCTYPE:oe++,DOCTYPE_QUOTED:oe++,DOCTYPE_DTD:oe++,DOCTYPE_DTD_QUOTED:oe++,COMMENT_STARTING:oe++,COMMENT:oe++,COMMENT_ENDING:oe++,COMMENT_ENDED:oe++,CDATA:oe++,CDATA_ENDING:oe++,CDATA_ENDING_2:oe++,PROC_INST:oe++,PROC_INST_BODY:oe++,PROC_INST_ENDING:oe++,OPEN_TAG:oe++,OPEN_TAG_SLASH:oe++,ATTRIB:oe++,ATTRIB_NAME:oe++,ATTRIB_NAME_SAW_WHITE:oe++,ATTRIB_VALUE:oe++,ATTRIB_VALUE_QUOTED:oe++,ATTRIB_VALUE_CLOSED:oe++,ATTRIB_VALUE_UNQUOTED:oe++,ATTRIB_VALUE_ENTITY_Q:oe++,ATTRIB_VALUE_ENTITY_U:oe++,CLOSE_TAG:oe++,CLOSE_TAG_SAW_WHITE:oe++,SCRIPT:oe++,SCRIPT_ENDING:oe++},H.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},H.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(H.ENTITIES).forEach(function($){var X=H.ENTITIES[$],we="number"==typeof X?String.fromCharCode(X):X;H.ENTITIES[$]=we}),H.STATE)H.STATE[H.STATE[Ae]]=Ae;function me($,X,we){$[X]&&$[X](we)}function ne($,X,we){$.textNode&&be($),me($,X,we)}function be($){$.textNode=Re($.opt,$.textNode),$.textNode&&me($,"ontext",$.textNode),$.textNode=""}function Re($,X){return $.trim&&(X=X.trim()),$.normalize&&(X=X.replace(/\s+/g," ")),X}function He($,X){return be($),$.trackPosition&&(X+="\nLine: "+$.line+"\nColumn: "+$.column+"\nChar: "+$.c),X=new Error(X),$.error=X,me($,"onerror",X),$}function nt($){return $.sawRoot&&!$.closedRoot&&Ze($,"Unclosed root tag"),$.state!==oe.BEGIN&&$.state!==oe.BEGIN_WHITESPACE&&$.state!==oe.TEXT&&He($,"Unexpected end"),be($),$.c="",$.closed=!0,me($,"onend"),se.call($,$.strict,$.opt),$}function Ze($,X){if("object"!=typeof $||!($ instanceof se))throw new Error("bad call to strictFail");$.strict&&He($,X)}function Je($){$.strict||($.tagName=$.tagName[$.looseCase]());var X=$.tags[$.tags.length-1]||$,we=$.tag={name:$.tagName,attributes:{}};$.opt.xmlns&&(we.ns=X.ns),$.attribList.length=0,ne($,"onopentagstart",we)}function Ke($,X){var ue=$.indexOf(":")<0?["",$]:$.split(":"),Fe=ue[0],Et=ue[1];return X&&"xmlns"===$&&(Fe="xmlns",Et=""),{prefix:Fe,local:Et}}function je($){if($.strict||($.attribName=$.attribName[$.looseCase]()),-1!==$.attribList.indexOf($.attribName)||$.tag.attributes.hasOwnProperty($.attribName))$.attribName=$.attribValue="";else{if($.opt.xmlns){var X=Ke($.attribName,!0),ue=X.local;if("xmlns"===X.prefix)if("xml"===ue&&$.attribValue!==U)Ze($,"xml: prefix must be bound to "+U+"\nActual: "+$.attribValue);else if("xmlns"===ue&&$.attribValue!==O)Ze($,"xmlns: prefix must be bound to "+O+"\nActual: "+$.attribValue);else{var Fe=$.tag,Et=$.tags[$.tags.length-1]||$;Fe.ns===Et.ns&&(Fe.ns=Object.create(Et.ns)),Fe.ns[ue]=$.attribValue}$.attribList.push([$.attribName,$.attribValue])}else $.tag.attributes[$.attribName]=$.attribValue,ne($,"onattribute",{name:$.attribName,value:$.attribValue});$.attribName=$.attribValue=""}}function Le($,X){if($.opt.xmlns){var we=$.tag,ue=Ke($.tagName);we.prefix=ue.prefix,we.local=ue.local,we.uri=we.ns[ue.prefix]||"",we.prefix&&!we.uri&&(Ze($,"Unbound namespace prefix: "+JSON.stringify($.tagName)),we.uri=ue.prefix),we.ns&&($.tags[$.tags.length-1]||$).ns!==we.ns&&Object.keys(we.ns).forEach(function(In){ne($,"onopennamespace",{prefix:In,uri:we.ns[In]})});for(var Et=0,pt=$.attribList.length;Et<pt;Et++){var ge=$.attribList[Et],j=ge[0],N=ge[1],V=Ke(j,!0),Pe=V.prefix,yt=""===Pe?"":we.ns[Pe]||"",Rt={name:j,value:N,prefix:Pe,local:V.local,uri:yt};Pe&&"xmlns"!==Pe&&!yt&&(Ze($,"Unbound namespace prefix: "+JSON.stringify(Pe)),Rt.uri=Pe),$.tag.attributes[j]=Rt,ne($,"onattribute",Rt)}$.attribList.length=0}$.tag.isSelfClosing=!!X,$.sawRoot=!0,$.tags.push($.tag),ne($,"onopentag",$.tag),X||($.state=$.noscript||"script"!==$.tagName.toLowerCase()?oe.TEXT:oe.SCRIPT,$.tag=null,$.tagName=""),$.attribName=$.attribValue="",$.attribList.length=0}function Ce($){if(!$.tagName)return Ze($,"Weird empty close tag."),$.textNode+="</>",void($.state=oe.TEXT);if($.script){if("script"!==$.tagName)return $.script+="</"+$.tagName+">",$.tagName="",void($.state=oe.SCRIPT);ne($,"onscript",$.script),$.script=""}var X=$.tags.length,we=$.tagName;$.strict||(we=we[$.looseCase]());for(var ue=we;X--&&$.tags[X].name!==ue;)Ze($,"Unexpected close tag");if(X<0)return Ze($,"Unmatched closing tag: "+$.tagName),$.textNode+="</"+$.tagName+">",void($.state=oe.TEXT);$.tagName=we;for(var Et=$.tags.length;Et-- >X;){var pt=$.tag=$.tags.pop();$.tagName=$.tag.name,ne($,"onclosetag",$.tagName);var ge={};for(var j in pt.ns)ge[j]=pt.ns[j];$.opt.xmlns&&pt.ns!==($.tags[$.tags.length-1]||$).ns&&Object.keys(pt.ns).forEach(function(V){ne($,"onclosenamespace",{prefix:V,uri:pt.ns[V]})})}0===X&&($.closedRoot=!0),$.tagName=$.attribValue=$.attribName="",$.attribList.length=0,$.state=oe.TEXT}function Ne($){var ue,X=$.entity,we=X.toLowerCase(),Fe="";return $.ENTITIES[X]?$.ENTITIES[X]:$.ENTITIES[we]?$.ENTITIES[we]:("#"===(X=we).charAt(0)&&("x"===X.charAt(1)?(X=X.slice(2),Fe=(ue=parseInt(X,16)).toString(16)):(X=X.slice(1),Fe=(ue=parseInt(X,10)).toString(10))),X=X.replace(/^0+/,""),isNaN(ue)||Fe.toLowerCase()!==X?(Ze($,"Invalid character entity"),"&"+$.entity+";"):String.fromCodePoint(ue))}function ze($,X){"<"===X?($.state=oe.OPEN_WAKA,$.startTagPosition=$.position):S(X)||(Ze($,"Non-whitespace before first tag."),$.textNode=X,$.state=oe.TEXT)}function qe($,X){var we="";return X<$.length&&(we=$.charAt(X)),we}oe=H.STATE,String.fromCodePoint||($=String.fromCharCode,X=Math.floor,we=function(){var ue=16384,Fe=[],ge=-1,j=arguments.length;if(!j)return"";for(var N="";++ge<j;){var V=Number(arguments[ge]);if(!isFinite(V)||V<0||V>1114111||X(V)!==V)throw RangeError("Invalid code point: "+V);V<=65535?Fe.push(V):Fe.push(55296+((V-=65536)>>10),V%1024+56320),(ge+1===j||Fe.length>ue)&&(N+=$.apply(null,Fe),Fe.length=0)}return N},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:we,configurable:!0,writable:!0}):String.fromCodePoint=we)}(void 0===fe?this.sax={}:fe)}).call(this)}).call(this,Y("buffer").Buffer)},{buffer:6,stream:87,string_decoder:5}],86:[function(Y,Te,fe){(function(q,H){(function(){!function(B,se){"use strict";if(!B.setImmediate){var T,W=1,E={},D=!1,P=B.document,Q=Object.getPrototypeOf&&Object.getPrototypeOf(B);Q=Q&&Q.setTimeout?Q:B,"[object process]"==={}.toString.call(B.process)?T=function(S){q.nextTick(function(){A(S)})}:function(){if(B.postMessage&&!B.importScripts){var S=!0,z=B.onmessage;return B.onmessage=function(){S=!1},B.postMessage("","*"),B.onmessage=z,S}}()?(S="setImmediate$"+Math.random()+"$",z=function(ie){ie.source===B&&"string"==typeof ie.data&&0===ie.data.indexOf(S)&&A(+ie.data.slice(S.length))},B.addEventListener?B.addEventListener("message",z,!1):B.attachEvent("onmessage",z),T=function(ie){B.postMessage(S+ie,"*")}):B.MessageChannel?function(){var S=new MessageChannel;S.port1.onmessage=function(z){A(z.data)},T=function(z){S.port2.postMessage(z)}}():P&&"onreadystatechange"in P.createElement("script")?function(){var S=P.documentElement;T=function(z){var ie=P.createElement("script");ie.onreadystatechange=function(){A(z),ie.onreadystatechange=null,S.removeChild(ie),ie=null},S.appendChild(ie)}}():T=function(S){setTimeout(A,0,S)},Q.setImmediate=function(S){"function"!=typeof S&&(S=new Function(""+S));for(var z=new Array(arguments.length-1),ie=0;ie<z.length;ie++)z[ie]=arguments[ie+1];return E[W]={callback:S,args:z},T(W),W++},Q.clearImmediate=v}var S,z;function v(S){delete E[S]}function A(S){if(D)setTimeout(A,0,S);else{var z=E[S];if(z){D=!0;try{!function(S){var z=S.callback,ie=S.args;switch(ie.length){case 0:z();break;case 1:z(ie[0]);break;case 2:z(ie[0],ie[1]);break;case 3:z(ie[0],ie[1],ie[2]);break;default:z.apply(void 0,ie)}}(z)}finally{v(S),D=!1}}}}}("undefined"==typeof self?void 0===H?this:H:self)}).call(this)}).call(this,Y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],87:[function(Y,Te,fe){Te.exports=B;var q=Y("events").EventEmitter;function B(){q.call(this)}Y("inherits")(B,q),B.Readable=Y("readable-stream/lib/_stream_readable.js"),B.Writable=Y("readable-stream/lib/_stream_writable.js"),B.Duplex=Y("readable-stream/lib/_stream_duplex.js"),B.Transform=Y("readable-stream/lib/_stream_transform.js"),B.PassThrough=Y("readable-stream/lib/_stream_passthrough.js"),B.finished=Y("readable-stream/lib/internal/streams/end-of-stream.js"),B.pipeline=Y("readable-stream/lib/internal/streams/pipeline.js"),B.Stream=B,B.prototype.pipe=function(se,W){var E=this;function D(U){se.writable&&!1===se.write(U)&&E.pause&&E.pause()}function P(){E.readable&&E.resume&&E.resume()}E.on("data",D),se.on("drain",P),!se._isStdio&&(!W||!1!==W.end)&&(E.on("end",w),E.on("close",v));var T=!1;function w(){T||(T=!0,se.end())}function v(){T||(T=!0,"function"==typeof se.destroy&&se.destroy())}function C(U){if(A(),0===q.listenerCount(this,"error"))throw U}function A(){E.removeListener("data",D),se.removeListener("drain",P),E.removeListener("end",w),E.removeListener("close",v),E.removeListener("error",C),se.removeListener("error",C),E.removeListener("end",A),E.removeListener("close",A),se.removeListener("close",A)}return E.on("error",C),se.on("error",C),E.on("end",A),E.on("close",A),se.on("close",A),se.emit("pipe",E),se}},{events:8,inherits:10,"readable-stream/lib/_stream_duplex.js":68,"readable-stream/lib/_stream_passthrough.js":69,"readable-stream/lib/_stream_readable.js":70,"readable-stream/lib/_stream_transform.js":71,"readable-stream/lib/_stream_writable.js":72,"readable-stream/lib/internal/streams/end-of-stream.js":76,"readable-stream/lib/internal/streams/pipeline.js":78}],88:[function(Y,Te,fe){arguments[4][5][0].apply(fe,arguments)},{dup:5,"safe-buffer":84}],89:[function(Y,Te,fe){(function(q,H){(function(){var B=Y("process/browser.js").nextTick,se=Function.prototype.apply,W=Array.prototype.slice,E={},D=0;function P(T,w){this._id=T,this._clearFn=w}fe.setTimeout=function(){return new P(se.call(setTimeout,window,arguments),clearTimeout)},fe.setInterval=function(){return new P(se.call(setInterval,window,arguments),clearInterval)},fe.clearTimeout=fe.clearInterval=function(T){T.close()},P.prototype.unref=P.prototype.ref=function(){},P.prototype.close=function(){this._clearFn.call(window,this._id)},fe.enroll=function(T,w){clearTimeout(T._idleTimeoutId),T._idleTimeout=w},fe.unenroll=function(T){clearTimeout(T._idleTimeoutId),T._idleTimeout=-1},fe._unrefActive=fe.active=function(T){clearTimeout(T._idleTimeoutId);var w=T._idleTimeout;w>=0&&(T._idleTimeoutId=setTimeout(function(){T._onTimeout&&T._onTimeout()},w))},fe.setImmediate="function"==typeof q?q:function(T){var w=D++,v=!(arguments.length<2)&&W.call(arguments,1);return E[w]=!0,B(function(){E[w]&&(v?T.apply(null,v):T.call(null),fe.clearImmediate(w))}),w},fe.clearImmediate="function"==typeof H?H:function(T){delete E[T]}}).call(this)}).call(this,Y("timers").setImmediate,Y("timers").clearImmediate)},{"process/browser.js":44,timers:89}],90:[function(Y,Te,fe){(function(q){(function(){function B(se){try{if(!q.localStorage)return!1}catch(E){return!1}var W=q.localStorage[se];return null!=W&&"true"===String(W).toLowerCase()}Te.exports=function(se,W){if(B("noDeprecation"))return se;var E=!1;return function(){if(!E){if(B("throwDeprecation"))throw new Error(W);B("traceDeprecation")?console.trace(W):console.warn(W),E=!0}return se.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(Y,Te,fe){"use strict";Te.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let H=this.head;H;H=H.next)yield H.value}}},{}],92:[function(Y,Te,fe){"use strict";function q(E){var D=this;if(D instanceof q||(D=new q),D.tail=null,D.head=null,D.length=0,E&&"function"==typeof E.forEach)E.forEach(function(w){D.push(w)});else if(arguments.length>0)for(var P=0,T=arguments.length;P<T;P++)D.push(arguments[P]);return D}function H(E,D,P){var T=D===E.head?new W(P,null,D,E):new W(P,D,D.next,E);return null===T.next&&(E.tail=T),null===T.prev&&(E.head=T),E.length++,T}function B(E,D){E.tail=new W(D,E.tail,null,E),E.head||(E.head=E.tail),E.length++}function se(E,D){E.head=new W(D,null,E.head,E),E.tail||(E.tail=E.head),E.length++}function W(E,D,P,T){if(!(this instanceof W))return new W(E,D,P,T);this.list=T,this.value=E,D?(D.next=this,this.prev=D):this.prev=null,P?(P.prev=this,this.next=P):this.next=null}Te.exports=q,q.Node=W,q.create=q,q.prototype.removeNode=function(E){if(E.list!==this)throw new Error("removing node which does not belong to this list");var D=E.next,P=E.prev;return D&&(D.prev=P),P&&(P.next=D),E===this.head&&(this.head=D),E===this.tail&&(this.tail=P),E.list.length--,E.next=null,E.prev=null,E.list=null,D},q.prototype.unshiftNode=function(E){if(E!==this.head){E.list&&E.list.removeNode(E);var D=this.head;E.list=this,E.next=D,D&&(D.prev=E),this.head=E,this.tail||(this.tail=E),this.length++}},q.prototype.pushNode=function(E){if(E!==this.tail){E.list&&E.list.removeNode(E);var D=this.tail;E.list=this,E.prev=D,D&&(D.next=E),this.tail=E,this.head||(this.head=E),this.length++}},q.prototype.push=function(){for(var E=0,D=arguments.length;E<D;E++)B(this,arguments[E]);return this.length},q.prototype.unshift=function(){for(var E=0,D=arguments.length;E<D;E++)se(this,arguments[E]);return this.length},q.prototype.pop=function(){if(this.tail){var E=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,E}},q.prototype.shift=function(){if(this.head){var E=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,E}},q.prototype.forEach=function(E,D){D=D||this;for(var P=this.head,T=0;null!==P;T++)E.call(D,P.value,T,this),P=P.next},q.prototype.forEachReverse=function(E,D){D=D||this;for(var P=this.tail,T=this.length-1;null!==P;T--)E.call(D,P.value,T,this),P=P.prev},q.prototype.get=function(E){for(var D=0,P=this.head;null!==P&&D<E;D++)P=P.next;if(D===E&&null!==P)return P.value},q.prototype.getReverse=function(E){for(var D=0,P=this.tail;null!==P&&D<E;D++)P=P.prev;if(D===E&&null!==P)return P.value},q.prototype.map=function(E,D){D=D||this;for(var P=new q,T=this.head;null!==T;)P.push(E.call(D,T.value,this)),T=T.next;return P},q.prototype.mapReverse=function(E,D){D=D||this;for(var P=new q,T=this.tail;null!==T;)P.push(E.call(D,T.value,this)),T=T.prev;return P},q.prototype.reduce=function(E,D){var P,T=this.head;if(arguments.length>1)P=D;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");T=this.head.next,P=this.head.value}for(var w=0;null!==T;w++)P=E(P,T.value,w),T=T.next;return P},q.prototype.reduceReverse=function(E,D){var P,T=this.tail;if(arguments.length>1)P=D;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");T=this.tail.prev,P=this.tail.value}for(var w=this.length-1;null!==T;w--)P=E(P,T.value,w),T=T.prev;return P},q.prototype.toArray=function(){for(var E=new Array(this.length),D=0,P=this.head;null!==P;D++)E[D]=P.value,P=P.next;return E},q.prototype.toArrayReverse=function(){for(var E=new Array(this.length),D=0,P=this.tail;null!==P;D++)E[D]=P.value,P=P.prev;return E},q.prototype.slice=function(E,D){(D=D||this.length)<0&&(D+=this.length),(E=E||0)<0&&(E+=this.length);var P=new q;if(D<E||D<0)return P;E<0&&(E=0),D>this.length&&(D=this.length);for(var T=0,w=this.head;null!==w&&T<E;T++)w=w.next;for(;null!==w&&T<D;T++,w=w.next)P.push(w.value);return P},q.prototype.sliceReverse=function(E,D){(D=D||this.length)<0&&(D+=this.length),(E=E||0)<0&&(E+=this.length);var P=new q;if(D<E||D<0)return P;E<0&&(E=0),D>this.length&&(D=this.length);for(var T=this.length,w=this.tail;null!==w&&T>D;T--)w=w.prev;for(;null!==w&&T>E;T--,w=w.prev)P.push(w.value);return P},q.prototype.splice=function(E,D,...P){E>this.length&&(E=this.length-1),E<0&&(E=this.length+E);for(var T=0,w=this.head;null!==w&&T<E;T++)w=w.next;var v=[];for(T=0;w&&T<D;T++)v.push(w.value),w=this.removeNode(w);for(null===w&&(w=this.tail),w!==this.head&&w!==this.tail&&(w=w.prev),T=0;T<P.length;T++)w=H(this,w,P[T]);return v},q.prototype.reverse=function(){for(var E=this.head,D=this.tail,P=E;null!==P;P=P.prev){var T=P.prev;P.prev=P.next,P.next=T}return this.head=D,this.tail=E,this};try{Y("./iterator.js")(q)}catch(E){}},{"./iterator.js":91}]},{},[1])(1)},322:Vt=>{Vt.exports=function(tt,gt){var J=gt.length;if(0!==J){var xt=tt.length;tt.length+=J;for(var dt=0;dt<J;dt++)tt[xt+dt]=gt[dt]}}},517:(Vt,rt)=>{"use strict";var gt=(()=>{return(xt=gt||(gt={})).typeOfFunction="function",xt.boolTrue=!0,gt;var xt})();function J(xt,dt,Y){if(!Y||typeof Y.value!==gt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+dt+"> is not a method!");return{configurable:gt.boolTrue,get:function(){var Te=Y.value.bind(this);return Object.defineProperty(this,dt,{value:Te,configurable:gt.boolTrue,writable:gt.boolTrue}),Te}}}rt.ak=J,rt.ZP=J},266:(Vt,rt,tt)=>{Vt.exports={ResizeSensor:tt(835),ElementQueries:tt(845)}},845:function(Vt,rt,tt){"use strict";var gt,J,xt;"undefined"!=typeof window&&window,J=[tt(835)],void 0!==(xt="function"==typeof(gt=function(dt){var Y=function(){var fe,q={},H=[];function B(I){I||(I=document.documentElement);var L=window.getComputedStyle(I,null).fontSize;return parseFloat(L)||16}function W(I,L){var Q=L.split(/\d/),S=Q[Q.length-1];switch(L=parseFloat(L),S){case"px":return L;case"em":return L*B(I);case"rem":return L*B();case"vw":return L*document.documentElement.clientWidth/100;case"vh":return L*document.documentElement.clientHeight/100;case"vmin":case"vmax":var z=document.documentElement.clientWidth/100,ie=document.documentElement.clientHeight/100;return L*(0,Math["vmin"===S?"min":"max"])(z,ie);default:return L}}function E(I,L){this.element=I;var Q,S,z,ie,de,te,oe,Ae,me=["min-width","min-height","max-width","max-height"];this.call=function(){for(Q in z=function(I){if(!I.getBoundingClientRect)return{width:I.offsetWidth,height:I.offsetHeight};var L=I.getBoundingClientRect();return{width:Math.round(L.width),height:Math.round(L.height)}}(this.element),te={},q[L])!q[L].hasOwnProperty(Q)||(ie=W(this.element,(S=q[L][Q]).value),de="width"===S.property?z.width:z.height,oe="","min"===S.mode&&de>=ie&&(oe+=S.value),"max"===S.mode&&de<=ie&&(oe+=S.value),te[Ae=S.mode+"-"+S.property]||(te[Ae]=""),oe&&-1===(" "+te[Ae]+" ").indexOf(" "+oe+" ")&&(te[Ae]+=" "+oe));for(var ne in me)!me.hasOwnProperty(ne)||(te[me[ne]]?this.element.setAttribute(me[ne],te[me[ne]].substr(1)):this.element.removeAttribute(me[ne]))}}function D(I,L){I.elementQueriesSetupInformation||(I.elementQueriesSetupInformation=new E(I,L)),I.elementQueriesSensor||(I.elementQueriesSensor=new dt(I,function(){I.elementQueriesSetupInformation.call()}))}function P(I,L,Q,S){if(void 0===q[I]){q[I]=[];var z=H.length;fe.innerHTML+="\n"+I+" {animation: 0.1s element-queries;}",fe.innerHTML+="\n"+I+" > .resize-sensor {min-width: "+z+"px;}",H.push(I)}q[I].push({mode:L,property:Q,value:S})}function T(I){var L;if(document.querySelectorAll&&(L=I?I.querySelectorAll.bind(I):document.querySelectorAll.bind(document)),!L&&"undefined"!=typeof $$&&(L=$$),!L&&"undefined"!=typeof jQuery&&(L=jQuery),!L)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return L}function v(I){var L=[],Q=[],S=[],z=0,ie=-1,de=[];for(var te in I.children)if(I.children.hasOwnProperty(te)&&I.children[te].tagName&&"img"===I.children[te].tagName.toLowerCase()){L.push(I.children[te]);var oe=I.children[te].getAttribute("min-width")||I.children[te].getAttribute("data-min-width"),Ae=I.children[te].getAttribute("data-src")||I.children[te].getAttribute("url");S.push(Ae),Q.push({minWidth:oe}),oe?I.children[te].style.display="none":(z=L.length-1,I.children[te].style.display="block")}function ne(){var Re,be=!1;for(Re in L)!L.hasOwnProperty(Re)||Q[Re].minWidth&&I.offsetWidth>Q[Re].minWidth&&(be=Re);if(be||(be=z),ie!==be)if(de[be])L[ie].style.display="none",L[be].style.display="block",ie=be;else{var He=new Image;He.onload=function(){L[be].src=S[be],L[ie].style.display="none",L[be].style.display="block",de[be]=!0,ie=be},He.src=S[be]}else L[be].src=S[be]}ie=z,I.resizeSensorInstance=new dt(I,ne),ne()}var A=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,U=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function O(I){var L,Q,S,z;for(I=I.replace(/'/g,'"');null!==(L=A.exec(I));)for(Q=L[1]+L[3],S=L[2];null!==(z=U.exec(S));)P(Q,z[1],z[2],z[3])}function G(I){var L="";if(I)if("string"==typeof I)(-1!==(I=I.toLowerCase()).indexOf("min-width")||-1!==I.indexOf("max-width"))&&O(I);else for(var Q=0,S=I.length;Q<S;Q++)1===I[Q].type?(-1!==(L=I[Q].selectorText||I[Q].cssText).indexOf("min-height")||-1!==L.indexOf("max-height")||-1!==L.indexOf("min-width")||-1!==L.indexOf("max-width"))&&O(L):4===I[Q].type?G(I[Q].cssRules||I[Q].rules):3===I[Q].type&&I[Q].styleSheet.hasOwnProperty("cssRules")&&G(I[Q].styleSheet.cssRules)}var K=!1;this.init=function(){var I="animationstart";void 0!==document.documentElement.style.webkitAnimationName?I="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?I="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(I="oanimationstart"),document.body.addEventListener(I,function(S){var z=S.target,ie=z&&window.getComputedStyle(z,null),de=ie&&ie.getPropertyValue("animation-name");if(de&&-1!==de.indexOf("element-queries")){z.elementQueriesSensor=new dt(z,function(){z.elementQueriesSetupInformation&&z.elementQueriesSetupInformation.call()});var Ae=window.getComputedStyle(z.resizeSensor,null).getPropertyValue("min-width");Ae=parseInt(Ae.replace("px","")),D(S.target,H[Ae])}}),K||((fe=document.createElement("style")).type="text/css",fe.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",fe.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(fe),K=!0);for(var L=0,Q=document.styleSheets.length;L<Q;L++)try{document.styleSheets[L].href&&0===document.styleSheets[L].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[L].href),G(document.styleSheets[L].cssRules||document.styleSheets[L].rules||document.styleSheets[L].cssText)}catch(S){}!function(){for(var L=T()("[data-responsive-image],[responsive-image]"),Q=0,S=L.length;Q<S;Q++)v(L[Q])}()},this.findElementQueriesElements=function(I){!function(I){var L=T(I);for(var Q in q)if(q.hasOwnProperty(Q))for(var S=L(Q,I),z=0,ie=S.length;z<ie;z++)D(S[z],Q)}(I)},this.update=function(){this.init()}};Y.update=function(){Y.instance.update()},Y.detach=function(fe){fe.elementQueriesSetupInformation?(fe.elementQueriesSensor.detach(),delete fe.elementQueriesSetupInformation,delete fe.elementQueriesSensor):fe.resizeSensorInstance&&(fe.resizeSensorInstance.detach(),delete fe.resizeSensorInstance)},Y.init=function(){Y.instance||(Y.instance=new Y),Y.instance.init()};return Y.findElementQueriesElements=function(fe){Y.instance.findElementQueriesElements(fe)},Y.listen=function(){!function(fe){if(document.addEventListener)document.addEventListener("DOMContentLoaded",fe,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var q=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(fe(),clearInterval(q))},10);else window.onload=fe}(Y.init)},Y})?gt.apply(rt,J):gt)&&(Vt.exports=xt)},835:function(Vt,rt,tt){"use strict";var gt,J;"undefined"!=typeof window&&window,void 0!==(J="function"==typeof(gt=function(){if("undefined"==typeof window)return null;var xt="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),dt=xt.requestAnimationFrame||xt.mozRequestAnimationFrame||xt.webkitRequestAnimationFrame||function(se){return xt.setTimeout(se,20)},Y=xt.cancelAnimationFrame||xt.mozCancelAnimationFrame||xt.webkitCancelAnimationFrame||function(se){xt.clearTimeout(se)};function Te(se,W){var E=Object.prototype.toString.call(se),D="[object Array]"===E||"[object NodeList]"===E||"[object HTMLCollection]"===E||"[object Object]"===E||"undefined"!=typeof jQuery&&se instanceof jQuery||"undefined"!=typeof Elements&&se instanceof Elements,P=0,T=se.length;if(D)for(;P<T;P++)W(se[P]);else W(se)}function fe(se){if(!se.getBoundingClientRect)return{width:se.offsetWidth,height:se.offsetHeight};var W=se.getBoundingClientRect();return{width:Math.round(W.width),height:Math.round(W.height)}}function q(se,W){Object.keys(W).forEach(function(E){se.style[E]=W[E]})}var H=function(se,W){var E=0;function D(){var w,v,T=[];this.add=function(C){T.push(C)},this.call=function(C){for(w=0,v=T.length;w<v;w++)T[w].call(this,C)},this.remove=function(C){var A=[];for(w=0,v=T.length;w<v;w++)T[w]!==C&&A.push(T[w]);T=A},this.length=function(){return T.length}}function P(T,w){if(T){if(T.resizedAttached)return void T.resizedAttached.add(w);T.resizedAttached=new D,T.resizedAttached.add(w),T.resizeSensor=document.createElement("div"),T.resizeSensor.dir="ltr",T.resizeSensor.className="resize-sensor";var v={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},C={position:"absolute",left:"0px",top:"0px",transition:"0s"};q(T.resizeSensor,v);var A=document.createElement("div");A.className="resize-sensor-expand",q(A,v);var U=document.createElement("div");q(U,C),A.appendChild(U);var O=document.createElement("div");O.className="resize-sensor-shrink",q(O,v);var G=document.createElement("div");q(G,C),q(G,{width:"200%",height:"200%"}),O.appendChild(G),T.resizeSensor.appendChild(A),T.resizeSensor.appendChild(O),T.appendChild(T.resizeSensor);var K=window.getComputedStyle(T),I=K?K.getPropertyValue("position"):null;"absolute"!==I&&"relative"!==I&&"fixed"!==I&&"sticky"!==I&&(T.style.position="relative");var L=!1,Q=0,S=fe(T),z=0,ie=0,de=!0;E=0;var oe=function(){if(de){if(0===T.offsetWidth&&0===T.offsetHeight)return void(E||(E=dt(function(){E=0,oe()})));de=!1}var be,Re;Re=T.offsetHeight,U.style.width=(be=T.offsetWidth)+10+"px",U.style.height=Re+10+"px",A.scrollLeft=be+10,A.scrollTop=Re+10,O.scrollLeft=be+10,O.scrollTop=Re+10};T.resizeSensor.resetSensor=oe;var Ae=function(){Q=0,L&&(z=S.width,ie=S.height,T.resizedAttached&&T.resizedAttached.call(S))},me=function(){S=fe(T),(L=S.width!==z||S.height!==ie)&&!Q&&(Q=dt(Ae)),oe()},ne=function(be,Re,He){be.attachEvent?be.attachEvent("on"+Re,He):be.addEventListener(Re,He)};ne(A,"scroll",me),ne(O,"scroll",me),E=dt(function(){E=0,oe()})}}Te(se,function(T){P(T,W)}),this.detach=function(T){E||(Y(E),E=0),H.detach(se,T)},this.reset=function(){se.resizeSensor.resetSensor()}};if(H.reset=function(se){Te(se,function(W){W.resizeSensor.resetSensor()})},H.detach=function(se,W){Te(se,function(E){!E||E.resizedAttached&&"function"==typeof W&&(E.resizedAttached.remove(W),E.resizedAttached.length())||E.resizeSensor&&(E.contains(E.resizeSensor)&&E.removeChild(E.resizeSensor),delete E.resizeSensor,delete E.resizedAttached)})},"undefined"!=typeof MutationObserver){var B=new MutationObserver(function(se){for(var W in se)if(se.hasOwnProperty(W))for(var E=se[W].addedNodes,D=0;D<E.length;D++)E[D].resizeSensor&&H.reset(E[D])});document.addEventListener("DOMContentLoaded",function(se){B.observe(document.body,{childList:!0,subtree:!0})})}return H})?gt.call(rt,tt,rt,Vt):gt)&&(Vt.exports=J)},445:(Vt,rt,tt)=>{var gt=tt(910),J=tt(369),xt=tt(322);function dt(se,W,E){if(!gt(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!se.hasNode(W))throw new Error('graphology-shortest-path: the "'+W+'" source node does not exist in the given graph.');if(!se.hasNode(E))throw new Error('graphology-shortest-path: the "'+E+'" target node does not exist in the given graph.');if((W=""+W)==(E=""+E))return[W];var D=se.inboundNeighbors.bind(se),P=se.outboundNeighbors.bind(se),T={},w={};T[W]=null,w[E]=null;var A,U,O,G,K,I,L,Q,v=[W],C=[E],S=!1;e:for(;v.length&&C.length;)if(v.length<=C.length){for(A=v,v=[],K=0,L=A.length;K<L;K++)for(I=0,Q=(O=P(U=A[K])).length;I<Q;I++)if((G=O[I])in T||(v.push(G),T[G]=U),G in w){S=!0;break e}}else for(A=C,C=[],K=0,L=A.length;K<L;K++)for(U=A[K],O=D(U),I=0,Q=O.length;I<Q;I++)if(G=O[I],G in w||(C.push(G),w[G]=U),G in T){S=!0;break e}if(!S)return null;for(var z=[];G;)z.unshift(G),G=T[G];for(G=w[z[z.length-1]];G;)z.push(G),G=w[G];return z.length?z:null}function Y(se,W){if(!gt(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!se.hasNode(W))throw new Error('graphology-shortest-path: the "'+W+'" source node does not exist in the given graph.');var P,T,w,v,C,A,E={},D={};for(E[W=""+W]=!0,D[W]=[W];Object.keys(E).length;)for(w in P=E,E={},P)for(C=0,A=(T=se.outboundNeighbors(w)).length;C<A;C++)D[v=T[C]]||(D[v]=D[w].concat(v),E[v]=!0);return D}function Te(se,W,E){if(!gt(W))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!W.hasNode(E))throw new Error('graphology-shortest-path: the "'+E+'" source node does not exist in the given graph.');E=""+E;var D=new Set,P={},T=0;P[E]=0;for(var v,C,A,w=[E];0!==w.length;){var U=[];for(v=0,C=w.length;v<C;v++)!D.has(A=w[v])&&(D.add(A),xt(U,W[se](A)),P[A]=T);T++,w=U}return P}var fe=Te.bind(null,"outboundNeighbors"),q=Te.bind(null,"neighbors");function H(se,W,E){return arguments.length<3?Y(se,W):dt(se,W,E)}H.bidirectional=dt,H.singleSource=Y,H.singleSourceLength=fe,H.undirectedSingleSourceLength=q,H.brandes=function(se,W){W=""+W;var w,v,C,A,U,O,G,K,I,E=[],D={},P={},T=se.nodes();for(O=0,K=T.length;O<K;O++)D[A=T[O]]=[],P[A]=0;var L={};P[W]=1,L[W]=0;for(var Q=J.of(W);Q.size;)for(A=Q.dequeue(),E.push(A),w=L[A],v=P[A],G=0,I=(C=se.outboundNeighbors(A)).length;G<I;G++)(U=C[G])in L||(Q.enqueue(U),L[U]=w+1),L[U]===w+1&&(P[U]+=v,D[U].push(A));return[E,D,P]},Vt.exports=H},910:Vt=>{Vt.exports=function(tt){return null!==tt&&"object"==typeof tt&&"function"==typeof tt.addUndirectedEdgeWithKey&&"function"==typeof tt.dropNode&&"boolean"==typeof tt.multi}},698:function(Vt){Vt.exports=function(){"use strict";function rt(re){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he})(re)}function tt(re,he){re.prototype=Object.create(he.prototype),re.prototype.constructor=re,J(re,he)}function gt(re){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(he){return he.__proto__||Object.getPrototypeOf(he)})(re)}function J(re,he){return(J=Object.setPrototypeOf||function(ae,x){return ae.__proto__=x,ae})(re,he)}function xt(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(re){return!1}}function dt(re,he,ae){return(dt=xt()?Reflect.construct:function(x,k,Z){var Ee=[null];Ee.push.apply(Ee,k);var ke=new(Function.bind.apply(x,Ee));return Z&&J(ke,Z.prototype),ke}).apply(null,arguments)}function Y(re){var he="function"==typeof Map?new Map:void 0;return(Y=function(ae){if(null===ae||-1===Function.toString.call(ae).indexOf("[native code]"))return ae;if("function"!=typeof ae)throw new TypeError("Super expression must either be null or a function");if(void 0!==he){if(he.has(ae))return he.get(ae);he.set(ae,k)}function k(){return dt(ae,arguments,gt(this).constructor)}return k.prototype=Object.create(ae.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),J(k,ae)})(re)}function Te(re){if(void 0===re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}var fe=function(){for(var re=arguments[0],he=1,ae=arguments.length;he<ae;he++)if(arguments[he])for(var x in arguments[he])re[x]=arguments[he][x];return re};function q(re,he,ae,x){var k=re._nodes.get(he),Z=null;return k?Z="mixed"===x?k.out&&k.out[ae]||k.undirected&&k.undirected[ae]:"directed"===x?k.out&&k.out[ae]:k.undirected&&k.undirected[ae]:Z}function H(re){return null!==re&&"object"===rt(re)&&"function"==typeof re.addUndirectedEdgeWithKey&&"function"==typeof re.dropNode}function B(re){return"object"===rt(re)&&null!==re&&re.constructor===Object}function se(re){var he;for(he in re)return!1;return!0}function W(re,he,ae){Object.defineProperty(re,he,{enumerable:!1,configurable:!1,writable:!0,value:ae})}function E(re,he,ae){var x={enumerable:!0,configurable:!0};"function"==typeof ae?x.get=ae:(x.value=ae,x.writable=!1),Object.defineProperty(re,he,x)}function D(re){return!(!B(re)||re.attributes&&!Array.isArray(re.attributes))}"function"==typeof Object.assign&&(fe=Object.assign);var P,T={exports:{}},w="object"==typeof Reflect?Reflect:null,v=w&&"function"==typeof w.apply?w.apply:function(re,he,ae){return Function.prototype.apply.call(re,he,ae)};P=w&&"function"==typeof w.ownKeys?w.ownKeys:Object.getOwnPropertySymbols?function(re){return Object.getOwnPropertyNames(re).concat(Object.getOwnPropertySymbols(re))}:function(re){return Object.getOwnPropertyNames(re)};var C=Number.isNaN||function(re){return re!=re};function A(){A.init.call(this)}T.exports=A,T.exports.once=function(re,he){return new Promise(function(ae,x){function k(Ee){re.removeListener(he,Z),x(Ee)}function Z(){"function"==typeof re.removeListener&&re.removeListener("error",k),ae([].slice.call(arguments))}var Ee;ie(re,he,Z,{once:!0}),"error"!==he&&("function"==typeof(Ee=re).on&&ie(Ee,"error",k,{once:!0}))})},A.EventEmitter=A,A.prototype._events=void 0,A.prototype._eventsCount=0,A.prototype._maxListeners=void 0;var U=10;function O(re){if("function"!=typeof re)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof re)}function G(re){return void 0===re._maxListeners?A.defaultMaxListeners:re._maxListeners}function K(re,he,ae,x){var k,Z,Ee;if(O(ae),void 0===(Z=re._events)?(Z=re._events=Object.create(null),re._eventsCount=0):(void 0!==Z.newListener&&(re.emit("newListener",he,ae.listener?ae.listener:ae),Z=re._events),Ee=Z[he]),void 0===Ee)Ee=Z[he]=ae,++re._eventsCount;else if("function"==typeof Ee?Ee=Z[he]=x?[ae,Ee]:[Ee,ae]:x?Ee.unshift(ae):Ee.push(ae),(k=G(re))>0&&Ee.length>k&&!Ee.warned){Ee.warned=!0;var et=new Error("Possible EventEmitter memory leak detected. "+Ee.length+" "+String(he)+" listeners added. Use emitter.setMaxListeners() to increase limit");et.name="MaxListenersExceededWarning",et.emitter=re,et.type=he,et.count=Ee.length,console&&console.warn&&console.warn(et)}return re}function I(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function L(re,he,ae){var x={fired:!1,wrapFn:void 0,target:re,type:he,listener:ae},k=I.bind(x);return k.listener=ae,x.wrapFn=k,k}function Q(re,he,ae){var x=re._events;if(void 0===x)return[];var k=x[he];return void 0===k?[]:"function"==typeof k?ae?[k.listener||k]:[k]:ae?function(Z){for(var Ee=new Array(Z.length),ke=0;ke<Ee.length;++ke)Ee[ke]=Z[ke].listener||Z[ke];return Ee}(k):z(k,k.length)}function S(re){var he=this._events;if(void 0!==he){var ae=he[re];if("function"==typeof ae)return 1;if(void 0!==ae)return ae.length}return 0}function z(re,he){for(var ae=new Array(he),x=0;x<he;++x)ae[x]=re[x];return ae}function ie(re,he,ae,x){if("function"==typeof re.on)x.once?re.once(he,ae):re.on(he,ae);else{if("function"!=typeof re.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof re);re.addEventListener(he,function k(Z){x.once&&re.removeEventListener(he,k),ae(Z)})}}function de(re){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:re}),this.done=!1}Object.defineProperty(A,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(re){if("number"!=typeof re||re<0||C(re))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+re+".");U=re}}),A.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},A.prototype.setMaxListeners=function(re){if("number"!=typeof re||re<0||C(re))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+re+".");return this._maxListeners=re,this},A.prototype.getMaxListeners=function(){return G(this)},A.prototype.emit=function(re){for(var he=[],ae=1;ae<arguments.length;ae++)he.push(arguments[ae]);var x="error"===re,k=this._events;if(void 0!==k)x=x&&void 0===k.error;else if(!x)return!1;if(x){var Z;if(he.length>0&&(Z=he[0]),Z instanceof Error)throw Z;var Ee=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw Ee.context=Z,Ee}var ke=k[re];if(void 0===ke)return!1;if("function"==typeof ke)v(ke,this,he);else{var et=ke.length,It=z(ke,et);for(ae=0;ae<et;++ae)v(It[ae],this,he)}return!0},A.prototype.on=A.prototype.addListener=function(re,he){return K(this,re,he,!1)},A.prototype.prependListener=function(re,he){return K(this,re,he,!0)},A.prototype.once=function(re,he){return O(he),this.on(re,L(this,re,he)),this},A.prototype.prependOnceListener=function(re,he){return O(he),this.prependListener(re,L(this,re,he)),this},A.prototype.off=A.prototype.removeListener=function(re,he){var ae,x,k,Z,Ee;if(O(he),void 0===(x=this._events))return this;if(void 0===(ae=x[re]))return this;if(ae===he||ae.listener===he)0==--this._eventsCount?this._events=Object.create(null):(delete x[re],x.removeListener&&this.emit("removeListener",re,ae.listener||he));else if("function"!=typeof ae){for(k=-1,Z=ae.length-1;Z>=0;Z--)if(ae[Z]===he||ae[Z].listener===he){Ee=ae[Z].listener,k=Z;break}if(k<0)return this;0===k?ae.shift():function(ke,et){for(;et+1<ke.length;et++)ke[et]=ke[et+1];ke.pop()}(ae,k),1===ae.length&&(x[re]=ae[0]),void 0!==x.removeListener&&this.emit("removeListener",re,Ee||he)}return this},A.prototype.removeAllListeners=function(re){var he,ae,x;if(void 0===(ae=this._events))return this;if(void 0===ae.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ae[re]&&(0==--this._eventsCount?this._events=Object.create(null):delete ae[re]),this;if(0===arguments.length){var k,Z=Object.keys(ae);for(x=0;x<Z.length;++x)"removeListener"!==(k=Z[x])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(he=ae[re]))this.removeListener(re,he);else if(void 0!==he)for(x=he.length-1;x>=0;x--)this.removeListener(re,he[x]);return this},A.prototype.listeners=function(re){return Q(this,re,!0)},A.prototype.rawListeners=function(re){return Q(this,re,!1)},A.listenerCount=function(re,he){return"function"==typeof re.listenerCount?re.listenerCount(he):S.call(re,he)},A.prototype.listenerCount=S,A.prototype.eventNames=function(){return this._eventsCount>0?P(this._events):[]},de.prototype.next=function(){if(this.done)return{done:!0};var re=this._next();return re.done&&(this.done=!0),re},"undefined"!=typeof Symbol&&(de.prototype[Symbol.iterator]=function(){return this}),de.of=function(){var re=arguments,he=re.length,ae=0;return new de(function(){return ae>=he?{done:!0}:{done:!1,value:re[ae++]}})},de.empty=function(){var re=new de(null);return re.done=!0,re},de.is=function(re){return re instanceof de||"object"==typeof re&&null!==re&&"function"==typeof re.next};var te=de,oe=function(re,he){for(var ae,x=arguments.length>1?he:1/0,k=x!==1/0?new Array(x):[],Z=0;;){if(Z===x)return k;if((ae=re.next()).done)return Z!==he?k.slice(0,Z):k;k[Z++]=ae.value}},Ae=function(re){function he(ae,x){var k;return(k=re.call(this)||this).name="GraphError",k.message=ae||"",k.data=x||{},k}return tt(he,re),he}(Y(Error)),me=function(re){function he(ae,x){var k;return(k=re.call(this,ae,x)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Te(k),he.prototype.constructor),k}return tt(he,re),he}(Ae),ne=function(re){function he(ae,x){var k;return(k=re.call(this,ae,x)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Te(k),he.prototype.constructor),k}return tt(he,re),he}(Ae),be=function(re){function he(ae,x){var k;return(k=re.call(this,ae,x)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Te(k),he.prototype.constructor),k}return tt(he,re),he}(Ae);function Re(re,he){this.key=re,this.attributes=he,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function He(re,he){this.key=re,this.attributes=he,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function nt(re,he){this.key=re,this.attributes=he,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Ze(re,he,ae,x,k,Z){this.key=he,this.attributes=Z,this.undirected=re,this.source=x,this.target=k,this.generatedKey=ae}function Je(re,he,ae,x,k,Z,Ee){var ke,et,It="out",We="in";if(he&&(It=We="undirected"),re.multi){if(void 0===(et=(ke=Z[It])[k])&&(et=new Set,ke[k]=et),et.add(ae),x===k&&he)return;void 0===(ke=Ee[We])[x]&&(ke[x]=et)}else{if(Z[It][k]=ae,x===k&&he)return;Ee[We][x]=ae}}function Ke(re,he,ae){var x=re.multi,k=ae.source,Z=ae.target,Ee=k.key,ke=Z.key,et=k[he?"undirected":"out"],It=he?"undirected":"in";if(ke in et)if(x){var We=et[ke];1===We.size?(delete et[ke],delete Z[It][Ee]):We.delete(ae)}else delete et[ke];x||delete Z[It][Ee]}He.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},nt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var je=[{name:function(re){return"get".concat(re,"Attribute")},attacher:function(re,he,ae){re.prototype[he]=function(x,k){var Z;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,ke=""+k;if(k=arguments[2],!(Z=q(this,Ee,ke,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(ke,'").'))}else if(!(Z=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==ae&&Z.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return Z.attributes[k]}}},{name:function(re){return"get".concat(re,"Attributes")},attacher:function(re,he,ae){re.prototype[he]=function(x){var k;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Z=""+x,Ee=""+arguments[1];if(!(k=q(this,Z,Ee,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(Z,'" - "').concat(Ee,'").'))}else if(!(k=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==ae&&k.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return k.attributes}}},{name:function(re){return"has".concat(re,"Attribute")},attacher:function(re,he,ae){re.prototype[he]=function(x,k){var Z;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,ke=""+k;if(k=arguments[2],!(Z=q(this,Ee,ke,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(ke,'").'))}else if(!(Z=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==ae&&Z.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return Z.attributes.hasOwnProperty(k)}}},{name:function(re){return"set".concat(re,"Attribute")},attacher:function(re,he,ae){re.prototype[he]=function(x,k,Z){var Ee;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ke=""+x,et=""+k;if(k=arguments[2],Z=arguments[3],!(Ee=q(this,ke,et,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(ke,'" - "').concat(et,'").'))}else if(!(Ee=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==ae&&Ee.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return Ee.attributes[k]=Z,this.emit("edgeAttributesUpdated",{key:Ee.key,type:"set",attributes:Ee.attributes,name:k}),this}}},{name:function(re){return"update".concat(re,"Attribute")},attacher:function(re,he,ae){re.prototype[he]=function(x,k,Z){var Ee;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ke=""+x,et=""+k;if(k=arguments[2],Z=arguments[3],!(Ee=q(this,ke,et,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(ke,'" - "').concat(et,'").'))}else if(!(Ee=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("function"!=typeof Z)throw new me("Graph.".concat(he,": updater should be a function."));if("mixed"!==ae&&Ee.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return Ee.attributes[k]=Z(Ee.attributes[k]),this.emit("edgeAttributesUpdated",{key:Ee.key,type:"set",attributes:Ee.attributes,name:k}),this}}},{name:function(re){return"remove".concat(re,"Attribute")},attacher:function(re,he,ae){re.prototype[he]=function(x,k){var Z;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,ke=""+k;if(k=arguments[2],!(Z=q(this,Ee,ke,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(ke,'").'))}else if(!(Z=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==ae&&Z.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return delete Z.attributes[k],this.emit("edgeAttributesUpdated",{key:Z.key,type:"remove",attributes:Z.attributes,name:k}),this}}},{name:function(re){return"replace".concat(re,"Attributes")},attacher:function(re,he,ae){re.prototype[he]=function(x,k){var Z;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,ke=""+k;if(k=arguments[2],!(Z=q(this,Ee,ke,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(ke,'").'))}else if(!(Z=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if(!B(k))throw new me("Graph.".concat(he,": provided attributes are not a plain object."));if("mixed"!==ae&&Z.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return Z.attributes=k,this.emit("edgeAttributesUpdated",{key:Z.key,type:"replace",attributes:Z.attributes}),this}}},{name:function(re){return"merge".concat(re,"Attributes")},attacher:function(re,he,ae){re.prototype[he]=function(x,k){var Z;if("mixed"!==this.type&&"mixed"!==ae&&ae!==this.type)throw new be("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new be("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,ke=""+k;if(k=arguments[2],!(Z=q(this,Ee,ke,ae)))throw new ne("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(ke,'").'))}else if(!(Z=this._edges.get(x=""+x)))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if(!B(k))throw new me("Graph.".concat(he,": provided attributes are not a plain object."));if("mixed"!==ae&&Z.undirected!==("undirected"===ae))throw new ne("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(ae," edge in the graph."));return fe(Z.attributes,k),this.emit("edgeAttributesUpdated",{key:Z.key,type:"merge",attributes:Z.attributes,data:k}),this}}}],Le=te,Ce=function(){var re,he=arguments,ae=-1;return new Le(function x(){if(!re){if(++ae>=he.length)return{done:!0};re=he[ae]}var k=re.next();return k.done?(re=null,x()):k})},Ne=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ze(re,he){for(var ae in he)re.push(he[ae].key)}function qe(re,he){for(var ae in he)he[ae].forEach(function(x){return re.push(x.key)})}function Ve(re,he,ae){for(var x in re)if(x!==ae){var k=re[x];he(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey)}}function $(re,he,ae){for(var x in re)x!==ae&&re[x].forEach(function(k){return he(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey)})}function X(re,he,ae){for(var x in re)if(x!==ae){var k=re[x];if(he(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey))return!0}return!1}function we(re,he,ae){var x,k,Z,Ee,ke;for(var et in re)if(et!==ae)for(x=re[et].values();!0!==(k=x.next()).done;)if(Ee=(Z=k.value).source,he(Z.key,Z.attributes,Ee.key,(ke=Z.target).key,Ee.attributes,ke.attributes,Z.undirected,Z.generatedKey))return!0;return!1}function ue(re,he){var ae=Object.keys(re),x=ae.length,k=null,Z=0;return new te(function Ee(){var ke;if(k){var et=k.next();if(et.done)return k=null,Z++,Ee();ke=et.value}else{if(Z>=x)return{done:!0};var It=ae[Z];if(It===he)return Z++,Ee();if((ke=re[It])instanceof Set)return k=ke.values(),Ee();Z++}return{done:!1,value:[ke.key,ke.attributes,ke.source.key,ke.target.key,ke.source.attributes,ke.target.attributes]}})}function Fe(re,he,ae){var x=he[ae];x&&re.push(x.key)}function Et(re,he,ae){var x=he[ae];x&&x.forEach(function(k){return re.push(k.key)})}function pt(re,he,ae){var x=re[he];if(x){var k=x.source,Z=x.target;ae(x.key,x.attributes,k.key,Z.key,k.attributes,Z.attributes,x.undirected,x.generatedKey)}}function ge(re,he,ae){var x=re[he];x&&x.forEach(function(k){return ae(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey)})}function j(re,he,ae){var x=re[he];if(x){var k=x.source,Z=x.target;return ae(x.key,x.attributes,k.key,Z.key,k.attributes,Z.attributes,x.undirected,x.generatedKey)}}function N(re,he,ae){var x=re[he];if(x){for(var k,Z,Ee=x.values();!0!==(k=Ee.next()).done;)if(ae((Z=k.value).key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes,Z.undirected,Z.generatedKey))return!0;return!1}}function V(re,he){var ae=re[he];if(ae instanceof Set){var x=ae.values();return new te(function(){var k=x.next();if(k.done)return k;var Z=k.value;return{done:!1,value:[Z.key,Z.attributes,Z.source.key,Z.target.key,Z.source.attributes,Z.target.attributes]}})}return te.of([ae.key,ae.attributes,ae.source.key,ae.target.key,ae.source.attributes,ae.target.attributes])}function Pe(re,he){if(0===re.size)return[];if("mixed"===he||he===re.type)return"function"==typeof Array.from?Array.from(re._edges.keys()):oe(re._edges.keys(),re._edges.size);for(var ae,x,Z=new Array("undirected"===he?re.undirectedSize:re.directedSize),Ee="undirected"===he,ke=re._edges.values(),et=0;!0!==(ae=ke.next()).done;)(x=ae.value).undirected===Ee&&(Z[et++]=x.key);return Z}function Xe(re,he,ae){if(0!==re.size)for(var x,k,Z="mixed"!==he&&he!==re.type,Ee="undirected"===he,ke=re._edges.values();!0!==(x=ke.next()).done;)if(k=x.value,!Z||k.undirected===Ee){var Gt=k.source,vt=k.target;ae(k.key,k.attributes,Gt.key,vt.key,Gt.attributes,vt.attributes,k.undirected,k.generatedKey)}}function yt(re,he,ae){if(0!==re.size)for(var x,k,Z="mixed"!==he&&he!==re.type,Ee="undirected"===he,ke=re._edges.values();!0!==(x=ke.next()).done;)if(k=x.value,!Z||k.undirected===Ee){var Gt=k.source,vt=k.target;if(ae(k.key,k.attributes,Gt.key,vt.key,Gt.attributes,vt.attributes,k.undirected,k.generatedKey))break}}function Rt(re,he){if(0===re.size)return te.empty();var ae="mixed"!==he&&he!==re.type,x="undirected"===he,k=re._edges.values();return new te(function(){for(var Z,Ee;;){if((Z=k.next()).done)return Z;if(Ee=Z.value,!ae||Ee.undirected===x)break}return{value:[Ee.key,Ee.attributes,Ee.source.key,Ee.target.key,Ee.source.attributes,Ee.target.attributes],done:!1}})}function In(re,he,ae,x){var k=[],Z=re?qe:ze;return"undirected"!==he&&("out"!==ae&&Z(k,x.in),"in"!==ae&&Z(k,x.out),!ae&&x.directedSelfLoops>0&&k.splice(k.lastIndexOf(x.key),1)),"directed"!==he&&Z(k,x.undirected),k}function kn(re,he,ae,x,k){var Z=re?$:Ve;"undirected"!==he&&("out"!==ae&&Z(x.in,k),"in"!==ae&&Z(x.out,k,ae?null:x.key)),"directed"!==he&&Z(x.undirected,k)}function Xn(re,he,ae,x,k){var Z=re?we:X;"undirected"!==he&&("out"!==ae&&Z(x.in,k)||"in"!==ae&&Z(x.out,k,ae?null:x.key))||"directed"===he||Z(x.undirected,k)}function kr(re,he,ae){var x=te.empty();return"undirected"!==re&&("out"!==he&&void 0!==ae.in&&(x=Ce(x,ue(ae.in))),"in"!==he&&void 0!==ae.out&&(x=Ce(x,ue(ae.out,he?null:ae.key)))),"directed"!==re&&void 0!==ae.undirected&&(x=Ce(x,ue(ae.undirected))),x}function xr(re,he,ae,x,k){var Z=he?Et:Fe,Ee=[];return"undirected"!==re&&(void 0!==x.in&&"out"!==ae&&Z(Ee,x.in,k),void 0!==x.out&&"in"!==ae&&Z(Ee,x.out,k),!ae&&x.directedSelfLoops>0&&Ee.splice(Ee.lastIndexOf(x.key),1)),"directed"!==re&&void 0!==x.undirected&&Z(Ee,x.undirected,k),Ee}function bs(re,he,ae,x,k,Z){var Ee=he?ge:pt;"undirected"!==re&&(void 0!==x.in&&"out"!==ae&&Ee(x.in,k,Z),x.key!==k&&void 0!==x.out&&"in"!==ae&&Ee(x.out,k,Z)),"directed"!==re&&void 0!==x.undirected&&Ee(x.undirected,k,Z)}function Ao(re,he,ae,x,k,Z){var Ee=he?N:j;"undirected"!==re&&(void 0!==x.in&&"out"!==ae&&Ee(x.in,k,Z)||x.key!==k&&void 0!==x.out&&"in"!==ae&&Ee(x.out,k,Z,ae?null:x.key))||"directed"===re||void 0===x.undirected||Ee(x.undirected,k,Z)}function Ks(re,he,ae,x){var k=te.empty();return"undirected"!==re&&(void 0!==ae.in&&"out"!==he&&x in ae.in&&(k=Ce(k,V(ae.in,x))),void 0!==ae.out&&"in"!==he&&x in ae.out&&(k=Ce(k,V(ae.out,x)))),"directed"!==re&&void 0!==ae.undirected&&x in ae.undirected&&(k=Ce(k,V(ae.undirected,x))),k}var Mo=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function vs(re,he){if(void 0!==he)for(var ae in he)re.add(ae)}function Tc(re,he,ae){if("mixed"!==re){if("undirected"===re)return Object.keys(ae.undirected);if("string"==typeof he)return Object.keys(ae[he])}var x=new Set;return"undirected"!==re&&("out"!==he&&vs(x,ae.in),"in"!==he&&vs(x,ae.out)),"directed"!==re&&vs(x,ae.undirected),oe(x.values(),x.size)}function su(re,he,ae){for(var x in he){var k=he[x];k instanceof Set&&(k=k.values().next().value);var Z=k.source,ke=Z===re?k.target:Z;ae(ke.key,ke.attributes)}}function Ac(re,he,ae,x){for(var k in ae){var Z=ae[k];Z instanceof Set&&(Z=Z.values().next().value);var Ee=Z.source,et=Ee===he?Z.target:Ee;re.has(et.key)||(re.add(et.key),x(et.key,et.attributes))}}function oo(re,he,ae){for(var x in he){var k=he[x];k instanceof Set&&(k=k.values().next().value);var Z=k.source,ke=Z===re?k.target:Z;if(ae(ke.key,ke.attributes))return!0}return!1}function en(re,he,ae,x){for(var k in ae){var Z=ae[k];Z instanceof Set&&(Z=Z.values().next().value);var Ee=Z.source,et=Ee===he?Z.target:Ee;if(!re.has(et.key)&&(re.add(et.key),x(et.key,et.attributes)))return!0}return!1}function dl(re,he){var ae=Object.keys(he),x=ae.length,k=0;return new te(function(){if(k>=x)return{done:!0};var Z=he[ae[k++]];Z instanceof Set&&(Z=Z.values().next().value);var Ee=Z.source,et=Ee===re?Z.target:Ee;return{done:!1,value:[et.key,et.attributes]}})}function it(re,he,ae){var x=Object.keys(ae),k=x.length,Z=0;return new te(function Ee(){if(Z>=k)return{done:!0};var ke=ae[x[Z++]];ke instanceof Set&&(ke=ke.values().next().value);var et=ke.source,We=et===he?ke.target:et;return re.has(We.key)?Ee():(re.add(We.key),{done:!1,value:[We.key,We.attributes]})})}function ot(re,he,ae,x,k){var Z=re._nodes.get(x);if("undirected"!==he){if("out"!==ae&&void 0!==Z.in)for(var Ee in Z.in)if(Ee===k)return!0;if("in"!==ae&&void 0!==Z.out)for(var ke in Z.out)if(ke===k)return!0}if("directed"!==he&&void 0!==Z.undirected)for(var et in Z.undirected)if(et===k)return!0;return!1}function Be(re,he,ae){for(var x,k,Z,Ee,ke,et,It,We=he._nodes.values(),Gt=he.type;!0!==(x=We.next()).done;){if(k=x.value,"undirected"!==Gt)for(Z in Ee=k.out)if(et=(ke=Ee[Z]).target,It=ae(k.key,et.key,k.attributes,et.attributes,ke.key,ke.attributes,ke.undirected,ke.generatedKey),re&&It)return;if("directed"!==Gt)for(Z in Ee=k.undirected)if((et=(ke=Ee[Z]).target).key!==Z&&(et=ke.source),It=ae(k.key,et.key,k.attributes,et.attributes,ke.key,ke.attributes,ke.undirected,ke.generatedKey),re&&It)return}}function lt(re,he,ae){for(var x,k,Z,Ee,ke,et,It,We,Gt,vt=he._nodes.values(),vn=he.type;!0!==(x=vt.next()).done;){if(k=x.value,"undirected"!==vn)for(Z in et=k.out)for(Ee=et[Z].values();!0!==(ke=Ee.next()).done;)if(We=(It=ke.value).target,Gt=ae(k.key,We.key,k.attributes,We.attributes,It.key,It.attributes,It.undirected,It.generatedKey),re&&Gt)return;if("directed"!==vn)for(Z in et=k.undirected)for(Ee=et[Z].values();!0!==(ke=Ee.next()).done;)if((We=(It=ke.value).target).key!==Z&&(We=It.source),Gt=ae(k.key,We.key,k.attributes,We.attributes,It.key,It.attributes,It.undirected,It.generatedKey),re&&Gt)return}}function Qe(re,he){var ae={key:re};return se(he.attributes)||(ae.attributes=fe({},he.attributes)),ae}function wt(re,he){var ae={source:he.source.key,target:he.target.key};return he.generatedKey||(ae.key=re),se(he.attributes)||(ae.attributes=fe({},he.attributes)),he.undirected&&(ae.undirected=!0),ae}function Dt(re){return B(re)?"key"in re?!("attributes"in re)||B(re.attributes)&&null!==re.attributes?null:"invalid-attributes":"no-key":"not-object"}function At(re){return B(re)?"source"in re?"target"in re?!("attributes"in re)||B(re.attributes)&&null!==re.attributes?"undirected"in re&&"boolean"!=typeof re.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}var Xt=new Set(["directed","undirected","mixed"]),Gn=new Set(["domain","_events","_eventsCount","_maxListeners"]),pr={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Pn(re,he,ae){var x=new re.NodeDataClass(he,ae);return re._nodes.set(he,x),re.emit("nodeAdded",{key:he,attributes:ae}),x}function bn(re,he,ae,x,k,Z,Ee,ke){if(!x&&"undirected"===re.type)throw new be("Graph.".concat(he,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(x&&"directed"===re.type)throw new be("Graph.".concat(he,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(ke&&!B(ke))throw new me("Graph.".concat(he,': invalid attributes. Expecting an object but got "').concat(ke,'"'));if(Z=""+Z,Ee=""+Ee,ke=ke||{},!re.allowSelfLoops&&Z===Ee)throw new be("Graph.".concat(he,': source & target are the same ("').concat(Z,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var et=re._nodes.get(Z),It=re._nodes.get(Ee);if(!et)throw new ne("Graph.".concat(he,': source node "').concat(Z,'" not found.'));if(!It)throw new ne("Graph.".concat(he,': target node "').concat(Ee,'" not found.'));var We={key:null,undirected:x,source:Z,target:Ee,attributes:ke};if(ae&&(k=re._edgeKeyGenerator(We)),re._edges.has(k=""+k))throw new be("Graph.".concat(he,': the "').concat(k,'" edge already exists in the graph.'));if(!re.multi&&(x?void 0!==et.undirected[Ee]:void 0!==et.out[Ee]))throw new be("Graph.".concat(he,': an edge linking "').concat(Z,'" to "').concat(Ee,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Gt=new Ze(x,k,ae,et,It,ke);return re._edges.set(k,Gt),Z===Ee?x?(et.undirectedSelfLoops++,re._undirectedSelfLoopCount++):(et.directedSelfLoops++,re._directedSelfLoopCount++):x?(et.undirectedDegree++,It.undirectedDegree++):(et.outDegree++,It.inDegree++),Je(re,x,Gt,Z,Ee,et,It),x?re._undirectedSize++:re._directedSize++,We.key=k,re.emit("edgeAdded",We),k}function Qn(re,he,ae,x,k,Z,Ee,ke,et){if(!x&&"undirected"===re.type)throw new be("Graph.".concat(he,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(x&&"directed"===re.type)throw new be("Graph.".concat(he,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(ke)if(et){if("function"!=typeof ke)throw new me("Graph.".concat(he,': invalid updater function. Expecting a function but got "').concat(ke,'"'))}else if(!B(ke))throw new me("Graph.".concat(he,': invalid attributes. Expecting an object but got "').concat(ke,'"'));var It;if(Z=""+Z,Ee=""+Ee,et&&(It=ke,ke=void 0),!re.allowSelfLoops&&Z===Ee)throw new be("Graph.".concat(he,': source & target are the same ("').concat(Z,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var We,Gt,vt=re._nodes.get(Z),vn=re._nodes.get(Ee);if(!ae&&(We=re._edges.get(k))){if(We.source.key!==Z||We.target.key!==Ee||x&&(We.source.key!==Ee||We.target.key!==Z))throw new be("Graph.".concat(he,': inconsistency detected when attempting to merge the "').concat(k,'" edge with "').concat(Z,'" source & "').concat(Ee,'" target vs. ("').concat(We.source.key,'", "').concat(We.target.key,'").'));Gt=We}if(Gt||re.multi||!vt||(Gt=x?vt.undirected[Ee]:vt.out[Ee]),Gt)return(et?It:ke)?(et?(Gt.attributes=It(Gt.attributes),re.emit("edgeAttributesUpdated",{type:"replace",key:Gt.key,attributes:Gt.attributes})):(fe(Gt.attributes,ke),re.emit("edgeAttributesUpdated",{type:"merge",key:Gt.key,attributes:Gt.attributes,data:ke})),Gt.key):Gt.key;ke=ke||{},et&&It&&(ke=It(ke));var Es={key:null,undirected:x,source:Z,target:Ee,attributes:ke};if(ae&&(k=re._edgeKeyGenerator(Es)),re._edges.has(k=""+k))throw new be("Graph.".concat(he,': the "').concat(k,'" edge already exists in the graph.'));return vt||(vt=Pn(re,Z,{}),Z===Ee&&(vn=vt)),vn||(vn=Pn(re,Ee,{})),We=new Ze(x,k,ae,vt,vn,ke),re._edges.set(k,We),Z===Ee?x?(vt.undirectedSelfLoops++,re._undirectedSelfLoopCount++):(vt.directedSelfLoops++,re._directedSelfLoopCount++):x?(vt.undirectedDegree++,vn.undirectedDegree++):(vt.outDegree++,vn.inDegree++),Je(re,x,We,Z,Ee,vt,vn),x?re._undirectedSize++:re._directedSize++,Es.key=k,re.emit("edgeAdded",Es),k}var re,xn=function(re){function he(x){var k;if(k=re.call(this)||this,(x=fe({},pr,x)).edgeKeyGenerator&&"function"!=typeof x.edgeKeyGenerator)throw new me("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(x.edgeKeyGenerator,'".'));if("boolean"!=typeof x.multi)throw new me("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(x.multi,'".'));if(!Xt.has(x.type))throw new me('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(x.type,'".'));if("boolean"!=typeof x.allowSelfLoops)throw new me("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(x.allowSelfLoops,'".'));var Z,Ee="mixed"===x.type?Re:"directed"===x.type?He:nt;return W(Te(k),"NodeDataClass",Ee),W(Te(k),"_attributes",{}),W(Te(k),"_nodes",new Map),W(Te(k),"_edges",new Map),W(Te(k),"_directedSize",0),W(Te(k),"_undirectedSize",0),W(Te(k),"_directedSelfLoopCount",0),W(Te(k),"_undirectedSelfLoopCount",0),W(Te(k),"_edgeKeyGenerator",x.edgeKeyGenerator||(Z=0,function(){return Z++})),W(Te(k),"_options",x),Gn.forEach(function(ke){return W(Te(k),ke,k[ke])}),E(Te(k),"order",function(){return k._nodes.size}),E(Te(k),"size",function(){return k._edges.size}),E(Te(k),"directedSize",function(){return k._directedSize}),E(Te(k),"undirectedSize",function(){return k._undirectedSize}),E(Te(k),"selfLoopCount",function(){return k._directedSelfLoopCount+k._undirectedSelfLoopCount}),E(Te(k),"directedSelfLoopCount",function(){return k._directedSelfLoopCount}),E(Te(k),"undirectedSelfLoopCount",function(){return k._undirectedSelfLoopCount}),E(Te(k),"multi",k._options.multi),E(Te(k),"type",k._options.type),E(Te(k),"allowSelfLoops",k._options.allowSelfLoops),E(Te(k),"implementation",function(){return"graphology"}),k}tt(he,re);var ae=he.prototype;return ae.hasNode=function(x){return this._nodes.has(""+x)},ae.hasDirectedEdge=function(x,k){if("undirected"===this.type)return!1;if(1===arguments.length){var Ee=this._edges.get(""+x);return!!Ee&&!Ee.undirected}if(2===arguments.length){k=""+k;var ke=this._nodes.get(x=""+x);if(!ke)return!1;var et=ke.out[k];return!(!et||this.multi&&!et.size)}throw new me("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ae.hasUndirectedEdge=function(x,k){if("directed"===this.type)return!1;if(1===arguments.length){var Ee=this._edges.get(""+x);return!!Ee&&Ee.undirected}if(2===arguments.length){k=""+k;var ke=this._nodes.get(x=""+x);if(!ke)return!1;var et=ke.undirected[k];return!(!et||this.multi&&!et.size)}throw new me("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ae.hasEdge=function(x,k){if(1===arguments.length)return this._edges.has(""+x);if(2===arguments.length){k=""+k;var Ee=this._nodes.get(x=""+x);if(!Ee)return!1;var ke=void 0!==Ee.out&&Ee.out[k];return ke||(ke=void 0!==Ee.undirected&&Ee.undirected[k]),!(!ke||this.multi&&!ke.size)}throw new me("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ae.directedEdge=function(x,k){if("undirected"!==this.type){if(x=""+x,k=""+k,this.multi)throw new be("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var Z=this._nodes.get(x);if(!Z)throw new ne('Graph.directedEdge: could not find the "'.concat(x,'" source node in the graph.'));if(!this._nodes.has(k))throw new ne('Graph.directedEdge: could not find the "'.concat(k,'" target node in the graph.'));var Ee=Z.out&&Z.out[k]||void 0;return Ee?Ee.key:void 0}},ae.undirectedEdge=function(x,k){if("directed"!==this.type){if(x=""+x,k=""+k,this.multi)throw new be("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var Z=this._nodes.get(x);if(!Z)throw new ne('Graph.undirectedEdge: could not find the "'.concat(x,'" source node in the graph.'));if(!this._nodes.has(k))throw new ne('Graph.undirectedEdge: could not find the "'.concat(k,'" target node in the graph.'));var Ee=Z.undirected&&Z.undirected[k]||void 0;return Ee?Ee.key:void 0}},ae.edge=function(x,k){if(this.multi)throw new be("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");k=""+k;var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.edge: could not find the "'.concat(x,'" source node in the graph.'));if(!this._nodes.has(k))throw new ne('Graph.edge: could not find the "'.concat(k,'" target node in the graph.'));var Ee=Z.out&&Z.out[k]||Z.undirected&&Z.undirected[k]||void 0;if(Ee)return Ee.key},ae.inDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new me('Graph.inDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.inDegree: could not find the "'.concat(x,'" node in the graph.'));return"undirected"===this.type?0:Z.inDegree+(k?Z.directedSelfLoops:0)},ae.outDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new me('Graph.outDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.outDegree: could not find the "'.concat(x,'" node in the graph.'));return"undirected"===this.type?0:Z.outDegree+(k?Z.directedSelfLoops:0)},ae.directedDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new me('Graph.directedDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.directedDegree: could not find the "'.concat(x,'" node in the graph.'));if("undirected"===this.type)return 0;var Ee=k?Z.directedSelfLoops:0;return Z.inDegree+Ee+(Z.outDegree+Ee)},ae.undirectedDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new me('Graph.undirectedDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.undirectedDegree: could not find the "'.concat(x,'" node in the graph.'));return"directed"===this.type?0:Z.undirectedDegree+2*(k?Z.undirectedSelfLoops:0)},ae.degree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new me('Graph.degree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.degree: could not find the "'.concat(x,'" node in the graph.'));var Ee=0,ke=0;return"directed"!==this.type&&(k&&(ke=Z.undirectedSelfLoops),Ee+=Z.undirectedDegree+2*ke),"undirected"!==this.type&&(k&&(ke=Z.directedSelfLoops),Ee+=Z.inDegree+Z.outDegree+2*ke),Ee},ae.source=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.source: could not find the "'.concat(x,'" edge in the graph.'));return k.source.key},ae.target=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.target: could not find the "'.concat(x,'" edge in the graph.'));return k.target.key},ae.extremities=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.extremities: could not find the "'.concat(x,'" edge in the graph.'));return[k.source.key,k.target.key]},ae.opposite=function(x,k){x=""+x;var Z=this._edges.get(k=""+k);if(!Z)throw new ne('Graph.opposite: could not find the "'.concat(k,'" edge in the graph.'));var Ee=Z.source.key,ke=Z.target.key;if(x!==Ee&&x!==ke)throw new ne('Graph.opposite: the "'.concat(x,'" node is not attached to the "').concat(k,'" edge (').concat(Ee,", ").concat(ke,")."));return x===Ee?ke:Ee},ae.hasExtremity=function(x,k){k=""+k;var Z=this._edges.get(x=""+x);if(!Z)throw new ne('Graph.hasExtremity: could not find the "'.concat(x,'" edge in the graph.'));return Z.source.key===k||Z.target.key===k},ae.isUndirected=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.isUndirected: could not find the "'.concat(x,'" edge in the graph.'));return k.undirected},ae.isDirected=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.isDirected: could not find the "'.concat(x,'" edge in the graph.'));return!k.undirected},ae.isSelfLoop=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.isSelfLoop: could not find the "'.concat(x,'" edge in the graph.'));return k.source===k.target},ae.hasGeneratedKey=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.hasGeneratedKey: could not find the "'.concat(x,'" edge in the graph.'));return k.generatedKey},ae.addNode=function(x,k){return function(Z,Ee,ke){if(ke&&!B(ke))throw new me('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(ke,'"'));if(ke=ke||{},Z._nodes.has(Ee=""+Ee))throw new be('Graph.addNode: the "'.concat(Ee,'" node already exist in the graph.'));var et=new Z.NodeDataClass(Ee,ke);return Z._nodes.set(Ee,et),Z.emit("nodeAdded",{key:Ee,attributes:ke}),et}(this,x,k).key},ae.mergeNode=function(x,k){if(k&&!B(k))throw new me('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(k,'"'));k=k||{};var Z=this._nodes.get(x=""+x);return Z?(k&&(fe(Z.attributes,k),this.emit("nodeAttributesUpdated",{type:"merge",key:x,attributes:Z.attributes,data:k})),x):(Z=new this.NodeDataClass(x,k),this._nodes.set(x,Z),this.emit("nodeAdded",{key:x,attributes:k}),x)},ae.updateNode=function(x,k){if(k&&"function"!=typeof k)throw new me('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(k,'"'));var Z=this._nodes.get(x=""+x);if(Z)return k&&(Z.attributes=k(Z.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:x,attributes:Z.attributes})),x;var ke=k?k({}):{};return Z=new this.NodeDataClass(x,ke),this._nodes.set(x,Z),this.emit("nodeAdded",{key:x,attributes:ke}),x},ae.dropNode=function(x){var k=this,Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.dropNode: could not find the "'.concat(x,'" node in the graph.'));this.forEachEdge(x,function(Ee){k.dropEdge(Ee)}),this._nodes.delete(x),this.emit("nodeDropped",{key:x,attributes:Z.attributes})},ae.dropEdge=function(x){var k;if(arguments.length>1){var Z=""+arguments[0],Ee=""+arguments[1];if(!(k=q(this,Z,Ee,this.type)))throw new ne('Graph.dropEdge: could not find the "'.concat(Z,'" -> "').concat(Ee,'" edge in the graph.'))}else if(!(k=this._edges.get(x=""+x)))throw new ne('Graph.dropEdge: could not find the "'.concat(x,'" edge in the graph.'));this._edges.delete(k.key);var et=k.source,It=k.target,We=k.attributes,Gt=k.undirected;return et===It?Gt?(et.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(et.directedSelfLoops--,this._directedSelfLoopCount--):Gt?(et.undirectedDegree--,It.undirectedDegree--):(et.outDegree--,It.inDegree--),Ke(this,Gt,k),Gt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:x,attributes:We,source:et.key,target:It.key,undirected:Gt}),this},ae.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},ae.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},ae.getAttribute=function(x){return this._attributes[x]},ae.getAttributes=function(){return this._attributes},ae.hasAttribute=function(x){return this._attributes.hasOwnProperty(x)},ae.setAttribute=function(x,k){return this._attributes[x]=k,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:x}),this},ae.updateAttribute=function(x,k){if("function"!=typeof k)throw new me("Graph.updateAttribute: updater should be a function.");return this._attributes[x]=k(this._attributes[x]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:x}),this},ae.removeAttribute=function(x){return delete this._attributes[x],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:x}),this},ae.replaceAttributes=function(x){if(!B(x))throw new me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=x,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ae.mergeAttributes=function(x){if(!B(x))throw new me("Graph.mergeAttributes: provided attributes are not a plain object.");return fe(this._attributes,x),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:x}),this},ae.getNodeAttribute=function(x,k){var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.getNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));return Z.attributes[k]},ae.getNodeAttributes=function(x){var k=this._nodes.get(x=""+x);if(!k)throw new ne('Graph.getNodeAttributes: could not find the "'.concat(x,'" node in the graph.'));return k.attributes},ae.hasNodeAttribute=function(x,k){var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.hasNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));return Z.attributes.hasOwnProperty(k)},ae.setNodeAttribute=function(x,k,Z){var Ee=this._nodes.get(x=""+x);if(!Ee)throw new ne('Graph.setNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));if(arguments.length<3)throw new me("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Ee.attributes[k]=Z,this.emit("nodeAttributesUpdated",{key:x,type:"set",attributes:Ee.attributes,name:k}),this},ae.updateNodeAttribute=function(x,k,Z){var Ee=this._nodes.get(x=""+x);if(!Ee)throw new ne('Graph.updateNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));if(arguments.length<3)throw new me("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof Z)throw new me("Graph.updateAttribute: updater should be a function.");var ke=Ee.attributes,et=Z(ke[k]);return ke[k]=et,this.emit("nodeAttributesUpdated",{key:x,type:"set",attributes:Ee.attributes,name:k}),this},ae.removeNodeAttribute=function(x,k){var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.hasNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));return delete Z.attributes[k],this.emit("nodeAttributesUpdated",{key:x,type:"remove",attributes:Z.attributes,name:k}),this},ae.replaceNodeAttributes=function(x,k){var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.replaceNodeAttributes: could not find the "'.concat(x,'" node in the graph.'));if(!B(k))throw new me("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return Z.attributes=k,this.emit("nodeAttributesUpdated",{key:x,type:"replace",attributes:Z.attributes}),this},ae.mergeNodeAttributes=function(x,k){var Z=this._nodes.get(x=""+x);if(!Z)throw new ne('Graph.mergeNodeAttributes: could not find the "'.concat(x,'" node in the graph.'));if(!B(k))throw new me("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return fe(Z.attributes,k),this.emit("nodeAttributesUpdated",{key:x,type:"merge",attributes:Z.attributes,data:k}),this},ae.updateEachNodeAttributes=function(x,k){if("function"!=typeof x)throw new me("Graph.updateEachNodeAttributes: expecting an updater function.");if(k&&!D(k))throw new me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var Z,Ee,ke=this._nodes.values();!0!==(Z=ke.next()).done;)(Ee=Z.value).attributes=x(Ee.key,Ee.attributes);this.emit("eachNodeAttributesUpdated",{hints:k||null})},ae.updateEachEdgeAttributes=function(x,k){if("function"!=typeof x)throw new me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(k&&!D(k))throw new me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var Z,Ee,ke=this._edges.values();!0!==(Z=ke.next()).done;)(Ee=Z.value).attributes=x(Ee.key,Ee.attributes);this.emit("eachEdgeAttributesUpdated",{hints:k||null})},ae.forEach=function(x){if("function"!=typeof x)throw new me("Graph.forEach: expecting a callback.");this.multi?lt(!1,this,x):Be(!1,this,x)},ae.forEachUntil=function(x){if("function"!=typeof x)throw new me("Graph.forEach: expecting a callback.");this.multi?lt(!0,this,x):Be(!0,this,x)},ae.adjacency=function(){return this.multi?(et=(x=this)._nodes.values(),It=x.type,We="outer",Gt=null,new te(function vt(){var vn;if("outer"===We)return!0===(vn=et.next()).done?vn:(k=vn.value,We="directed",vt());if("directed"===We)return"undirected"===It?(We="undirected",vt()):(Ee=k.out,Z=Object.keys(k.out),ke=0,We="inner-directed",vt());if("undirected"===We){if("directed"===It)return We="outer",vt();Ee=k.undirected,Z=Object.keys(k.undirected),ke=0,We="inner-undirected"}if(!Gt&&ke>=Z.length)return We="inner-undirected"===We?"outer":"undirected",vt();if(!Gt){var ao=Z[ke++];return Gt=Ee[ao].values(),vt()}if((vn=Gt.next()).done)return Gt=null,vt();var Es=vn.value,Go=Es.target;return"inner-undirected"===We&&Go.key===k.key&&(Go=Es.source),{done:!1,value:[k.key,Go.key,k.attributes,Go.attributes,Es.key,Es.attributes]}})):(ou=(vt=this)._nodes.values(),sa=vt.type,cs="outer",new te(function Io(){var hd;if("outer"===cs)return!0===(hd=ou.next()).done?hd:(vn=hd.value,cs="directed",Io());if("directed"===cs)return"undirected"===sa?(cs="undirected",Io()):(Es=vn.out,ao=Object.keys(vn.out),Go=0,cs="inner-directed",Io());if("undirected"===cs){if("directed"===sa)return cs="outer",Io();Es=vn.undirected,ao=Object.keys(vn.undirected),Go=0,cs="inner-undirected"}if(Go>=ao.length)return cs="inner-undirected"===cs?"outer":"undirected",Io();var Sn=ao[Go++],oa=Es[Sn],au=oa.target;return"inner-undirected"===cs&&au.key===vn.key&&(au=oa.source),{done:!1,value:[vn.key,au.key,vn.attributes,au.attributes,oa.key,oa.attributes]}}));var vt,vn,ao,Es,Go,ou,sa,cs,x,k,Z,Ee,ke,et,It,We,Gt},ae.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):oe(this._nodes.keys(),this._nodes.size)},ae.forEachNode=function(x){if("function"!=typeof x)throw new me("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(k,Z){x(Z,k.attributes)})},ae.forEachNodeUntil=function(x){if("function"!=typeof x)throw new me("Graph.forEachNode: expecting a callback.");for(var k,Z,Ee=this._nodes.values();!0!==(k=Ee.next())&&!x((Z=k.value).key,Z.attributes););},ae.nodeEntries=function(){var x=this._nodes.values();return new te(function(){var k=x.next();if(k.done)return k;var Z=k.value;return{value:[Z.key,Z.attributes],done:!1}})},ae.exportNode=function(x){var k=this._nodes.get(x=""+x);if(!k)throw new ne('Graph.exportNode: could not find the "'.concat(x,'" node in the graph.'));return Qe(x,k)},ae.exportEdge=function(x){var k=this._edges.get(x=""+x);if(!k)throw new ne('Graph.exportEdge: could not find the "'.concat(x,'" edge in the graph.'));return wt(x,k)},ae.export=function(){var x=new Array(this._nodes.size),k=0;this._nodes.forEach(function(Ee,ke){x[k++]=Qe(ke,Ee)});var Z=new Array(this._edges.size);return k=0,this._edges.forEach(function(Ee,ke){Z[k++]=wt(ke,Ee)}),{attributes:this.getAttributes(),nodes:x,edges:Z,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},ae.importNode=function(x){var k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Z=Dt(x);if(Z){if("not-object"===Z)throw new me('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===Z)throw new me("Graph.importNode: no key provided.");if("invalid-attributes"===Z)throw new me("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Ee=x.key,ke=x.attributes,et=void 0===ke?{}:ke;return k?this.mergeNode(Ee,et):this.addNode(Ee,et),this},ae.importEdge=function(x){var k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Z=At(x);if(Z){if("not-object"===Z)throw new me('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===Z)throw new me("Graph.importEdge: missing souce.");if("no-target"===Z)throw new me("Graph.importEdge: missing target.");if("invalid-attributes"===Z)throw new me("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===Z)throw new me("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Ee=x.source,ke=x.target,et=x.attributes,It=void 0===et?{}:et,We=x.undirected,Gt=void 0!==We&&We;return"key"in x?(k?Gt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Gt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,x.key,Ee,ke,It):(k?Gt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Gt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Ee,ke,It),this},ae.import=function(x){var k,Z,Ee,ke=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(H(x))return this.import(x.export(),ke),this;if(!B(x))throw new me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(x.attributes){if(!B(x.attributes))throw new me("Graph.import: invalid attributes. Expecting a plain object.");ke?this.mergeAttributes(x.attributes):this.replaceAttributes(x.attributes)}if(x.nodes){if(Ee=x.nodes,!Array.isArray(Ee))throw new me("Graph.import: invalid nodes. Expecting an array.");for(k=0,Z=Ee.length;k<Z;k++)this.importNode(Ee[k],ke)}if(x.edges){if(Ee=x.edges,!Array.isArray(Ee))throw new me("Graph.import: invalid edges. Expecting an array.");for(k=0,Z=Ee.length;k<Z;k++)this.importEdge(Ee[k],ke)}return this},ae.nullCopy=function(x){return new he(fe({},this._options,x))},ae.emptyCopy=function(x){var k=this.nullCopy(x);return this._nodes.forEach(function(Z,Ee){var ke=fe({},Z.attributes);Z=new k.NodeDataClass(Ee,ke),k._nodes.set(Ee,Z)}),k},ae.copy=function(){var x=new he(this._options);return x.import(this),x},ae.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(x){return x.upgradeToMixed()}),this._options.type="mixed",E(this,"type",this._options.type),W(this,"NodeDataClass",Re)),this},ae.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,E(this,"multi",!0),(x=this)._nodes.forEach(function(k,Z){if(k.out)for(var Ee in k.out){var ke=new Set;ke.add(k.out[Ee]),k.out[Ee]=ke,x._nodes.get(Ee).in[Z]=ke}if(k.undirected)for(var et in k.undirected)if(!(et>Z)){var It=new Set;It.add(k.undirected[et]),k.undirected[et]=It,x._nodes.get(et).undirected[Z]=It}})),this;var x},ae.clearIndex=function(){return this._nodes.forEach(function(x){void 0!==x.in&&(x.in={},x.out={}),void 0!==x.undirected&&(x.undirected={})}),this},ae.toJSON=function(){return this.export()},ae.toString=function(){return"[object Graph]"},ae.inspect=function(){var x=this,k={};this._nodes.forEach(function(It,We){k[We]=It.attributes});var Z={},Ee={};this._edges.forEach(function(It,We){var Gt=It.undirected?"--":"->",vt="",vn="(".concat(It.source.key,")").concat(Gt,"(").concat(It.target.key,")");It.generatedKey?x.multi&&(void 0===Ee[vn]?Ee[vn]=0:Ee[vn]++,vt+="".concat(Ee[vn],". ")):vt+="[".concat(We,"]: "),Z[vt+=vn]=It.attributes});var ke={};for(var et in this)this.hasOwnProperty(et)&&!Gn.has(et)&&"function"!=typeof this[et]&&(ke[et]=this[et]);return ke.attributes=this._attributes,ke.nodes=k,ke.edges=Z,W(ke,"constructor",this.constructor),ke},he}(T.exports.EventEmitter);"undefined"!=typeof Symbol&&(xn.prototype[Symbol.for("nodejs.util.inspect.custom")]=xn.prototype.inspect),[{name:function(re){return"".concat(re,"Edge")},generateKey:!0},{name:function(re){return"".concat(re,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(re){return"".concat(re,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(re){return"".concat(re,"EdgeWithKey")}},{name:function(re){return"".concat(re,"DirectedEdgeWithKey")},type:"directed"},{name:function(re){return"".concat(re,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(re){["add","merge","update"].forEach(function(he){var ae=re.name(he),x="add"===he?bn:Qn;xn.prototype[ae]=re.generateKey?function(k,Z,Ee){return x(this,ae,!0,"undirected"===(re.type||this.type),null,k,Z,Ee,"update"===he)}:function(k,Z,Ee,ke){return x(this,ae,!1,"undirected"===(re.type||this.type),k,Z,Ee,ke,"update"===he)}})}),"undefined"!=typeof Symbol&&(xn.prototype[Symbol.iterator]=xn.prototype.adjacency),re=xn,je.forEach(function(he){var ae=he.name,x=he.attacher;x(re,ae("Edge"),"mixed"),x(re,ae("DirectedEdge"),"directed"),x(re,ae("UndirectedEdge"),"undirected")}),function(re){Ne.forEach(function(he){var x,k,Z,Ee;Z=(x=he).type,Ee=x.direction,re.prototype[k=x.name]=function(ke,et){if("mixed"!==Z&&"mixed"!==this.type&&Z!==this.type)return[];if(!arguments.length)return Pe(this,Z);if(1===arguments.length){var It=this._nodes.get(ke=""+ke);if(void 0===It)throw new ne("Graph.".concat(k,': could not find the "').concat(ke,'" node in the graph.'));return In(this.multi,"mixed"===Z?this.type:Z,Ee,It)}if(2===arguments.length){et=""+et;var We=this._nodes.get(ke=""+ke);if(!We)throw new ne("Graph.".concat(k,':  could not find the "').concat(ke,'" source node in the graph.'));if(!this._nodes.has(et))throw new ne("Graph.".concat(k,':  could not find the "').concat(et,'" target node in the graph.'));return xr(Z,this.multi,Ee,We,et)}throw new me("Graph.".concat(k,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ae,x){var k=x.name,Z=x.type,Ee=x.direction,ke="forEach"+k[0].toUpperCase()+k.slice(1,-1);ae.prototype[ke]=function(et,It,We){if("mixed"===Z||"mixed"===this.type||Z===this.type){if(1===arguments.length)return Xe(this,Z,We=et);if(2===arguments.length){We=It;var Gt=this._nodes.get(et=""+et);if(void 0===Gt)throw new ne("Graph.".concat(ke,': could not find the "').concat(et,'" node in the graph.'));return kn(this.multi,"mixed"===Z?this.type:Z,Ee,Gt,We)}if(3===arguments.length){It=""+It;var vt=this._nodes.get(et=""+et);if(!vt)throw new ne("Graph.".concat(ke,':  could not find the "').concat(et,'" source node in the graph.'));if(!this._nodes.has(It))throw new ne("Graph.".concat(ke,':  could not find the "').concat(It,'" target node in the graph.'));return bs(Z,this.multi,Ee,vt,It,We)}throw new me("Graph.".concat(ke,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(re,he),function(ae,x){var k=x.name,Z=x.type,Ee=x.direction,ke="forEach"+k[0].toUpperCase()+k.slice(1,-1)+"Until";ae.prototype[ke]=function(et,It,We){if("mixed"===Z||"mixed"===this.type||Z===this.type){if(1===arguments.length)return yt(this,Z,We=et);if(2===arguments.length){We=It;var Gt=this._nodes.get(et=""+et);if(void 0===Gt)throw new ne("Graph.".concat(ke,': could not find the "').concat(et,'" node in the graph.'));return Xn(this.multi,"mixed"===Z?this.type:Z,Ee,Gt,We)}if(3===arguments.length){It=""+It;var vt=this._nodes.get(et=""+et);if(!vt)throw new ne("Graph.".concat(ke,':  could not find the "').concat(et,'" source node in the graph.'));if(!this._nodes.has(It))throw new ne("Graph.".concat(ke,':  could not find the "').concat(It,'" target node in the graph.'));return Ao(Z,this.multi,Ee,vt,It,We)}throw new me("Graph.".concat(ke,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(re,he),function(ae,x){var Z=x.type,Ee=x.direction,ke=x.name.slice(0,-1)+"Entries";ae.prototype[ke]=function(et,It){if("mixed"!==Z&&"mixed"!==this.type&&Z!==this.type)return te.empty();if(!arguments.length)return Rt(this,Z);if(1===arguments.length){var We=this._nodes.get(et=""+et);if(!We)throw new ne("Graph.".concat(ke,': could not find the "').concat(et,'" node in the graph.'));return kr(Z,Ee,We)}if(2===arguments.length){It=""+It;var Gt=this._nodes.get(et=""+et);if(!Gt)throw new ne("Graph.".concat(ke,':  could not find the "').concat(et,'" source node in the graph.'));if(!this._nodes.has(It))throw new ne("Graph.".concat(ke,':  could not find the "').concat(It,'" target node in the graph.'));return Ks(Z,Ee,Gt,It)}throw new me("Graph.".concat(ke,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(re,he)})}(xn),function(re){Mo.forEach(function(he){var x,k,Z,Ee;Z=(x=he).type,Ee=x.direction,re.prototype[k=x.name]=function(ke){if("mixed"!==Z&&"mixed"!==this.type&&Z!==this.type)return[];if(2===arguments.length){var et=""+arguments[0],It=""+arguments[1];if(!this._nodes.has(et))throw new ne("Graph.".concat(k,': could not find the "').concat(et,'" node in the graph.'));if(!this._nodes.has(It))throw new ne("Graph.".concat(k,': could not find the "').concat(It,'" node in the graph.'));return ot(this,Z,Ee,et,It)}if(1===arguments.length){var We=this._nodes.get(ke=""+ke);if(void 0===We)throw new ne("Graph.".concat(k,': could not find the "').concat(ke,'" node in the graph.'));return Tc("mixed"===Z?this.type:Z,Ee,We)}throw new me("Graph.".concat(k,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function(re,he){var ae=he.name,x=he.type,k=he.direction,Z="forEach"+ae[0].toUpperCase()+ae.slice(1,-1);re.prototype[Z]=function(Ee,ke){if("mixed"===x||"mixed"===this.type||x===this.type){var et=this._nodes.get(Ee=""+Ee);if(void 0===et)throw new ne("Graph.".concat(Z,': could not find the "').concat(Ee,'" node in the graph.'));!function(It,We,Gt,vt){if("mixed"!==It){if("undirected"===It)return su(Gt,Gt.undirected,vt);if("string"==typeof We)return su(Gt,Gt[We],vt)}var vn=new Set;"undirected"!==It&&("out"!==We&&Ac(vn,Gt,Gt.in,vt),"in"!==We&&Ac(vn,Gt,Gt.out,vt)),"directed"!==It&&Ac(vn,Gt,Gt.undirected,vt)}("mixed"===x?this.type:x,k,et,ke)}}}(re,he),function(re,he){var ae=he.name,x=he.type,k=he.direction,Z="forEach"+ae[0].toUpperCase()+ae.slice(1,-1)+"Until";re.prototype[Z]=function(Ee,ke){if("mixed"===x||"mixed"===this.type||x===this.type){var et=this._nodes.get(Ee=""+Ee);if(void 0===et)throw new ne("Graph.".concat(Z,': could not find the "').concat(Ee,'" node in the graph.'));!function(It,We,Gt,vt){if("mixed"!==It){if("undirected"===It)return oo(Gt,Gt.undirected,vt);if("string"==typeof We)return oo(Gt,Gt[We],vt)}var vn=new Set;"undirected"!==It&&("out"!==We&&en(vn,Gt,Gt.in,vt)||"in"!==We&&en(vn,Gt,Gt.out,vt))||"directed"===It||en(vn,Gt,Gt.undirected,vt)}("mixed"===x?this.type:x,k,et,ke)}}}(re,he),function(re,he){var x=he.type,k=he.direction,Z=he.name.slice(0,-1)+"Entries";re.prototype[Z]=function(Ee){if("mixed"!==x&&"mixed"!==this.type&&x!==this.type)return te.empty();var ke=this._nodes.get(Ee=""+Ee);if(void 0===ke)throw new ne("Graph.".concat(Z,': could not find the "').concat(Ee,'" node in the graph.'));return function(et,It,We){if("mixed"!==et){if("undirected"===et)return dl(We,We.undirected);if("string"==typeof It)return dl(We,We[It])}var Gt=te.empty(),vt=new Set;return"undirected"!==et&&("out"!==It&&(Gt=Ce(Gt,it(vt,We,We.in))),"in"!==It&&(Gt=Ce(Gt,it(vt,We,We.out)))),"directed"!==et&&(Gt=Ce(Gt,it(vt,We,We.undirected))),Gt}("mixed"===x?this.type:x,k,ke)}}(re,he)})}(xn);var wi=function(re){function he(ae){var x=fe({type:"directed"},ae);if("multi"in x&&!1!==x.multi)throw new me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==x.type)throw new me('DirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return re.call(this,x)||this}return tt(he,re),he}(xn),Ei=function(re){function he(ae){var x=fe({type:"undirected"},ae);if("multi"in x&&!1!==x.multi)throw new me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==x.type)throw new me('UndirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return re.call(this,x)||this}return tt(he,re),he}(xn),er=function(re){function he(ae){var x=fe({multi:!0},ae);if("multi"in x&&!0!==x.multi)throw new me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return re.call(this,x)||this}return tt(he,re),he}(xn),ii=function(re){function he(ae){var x=fe({type:"directed",multi:!0},ae);if("multi"in x&&!0!==x.multi)throw new me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==x.type)throw new me('MultiDirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return re.call(this,x)||this}return tt(he,re),he}(xn),Mc=function(re){function he(ae){var x=fe({type:"undirected",multi:!0},ae);if("multi"in x&&!0!==x.multi)throw new me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==x.type)throw new me('MultiUndirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return re.call(this,x)||this}return tt(he,re),he}(xn);function ws(re){re.from=function(he,ae){var x=fe({},he.options,ae),k=new re(x);return k.import(he),k}}return ws(xn),ws(wi),ws(Ei),ws(er),ws(ii),ws(Mc),xn.Graph=xn,xn.DirectedGraph=wi,xn.UndirectedGraph=Ei,xn.MultiGraph=er,xn.MultiDirectedGraph=ii,xn.MultiUndirectedGraph=Mc,xn.InvalidArgumentsGraphError=me,xn.NotFoundGraphError=ne,xn.UsageGraphError=be,xn}()},524:(Vt,rt,tt)=>{var gt;!function(J,xt,dt,Y){"use strict";var T,Te=["","webkit","Moz","MS","ms","o"],fe=xt.createElement("div"),H=Math.round,B=Math.abs,se=Date.now;function W(ye,xe,Ge){return setTimeout(A(ye,Ge),xe)}function E(ye,xe,Ge){return!!Array.isArray(ye)&&(D(ye,Ge[xe],Ge),!0)}function D(ye,xe,Ge){var mt;if(ye)if(ye.forEach)ye.forEach(xe,Ge);else if(ye.length!==Y)for(mt=0;mt<ye.length;)xe.call(Ge,ye[mt],mt,ye),mt++;else for(mt in ye)ye.hasOwnProperty(mt)&&xe.call(Ge,ye[mt],mt,ye)}function P(ye,xe,Ge){var mt="DEPRECATED METHOD: "+xe+"\n"+Ge+" AT \n";return function(){var Ht=new Error("get-stack-trace"),Wt=Ht&&Ht.stack?Ht.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",gr=J.console&&(J.console.warn||J.console.log);return gr&&gr.call(J.console,mt,Wt),ye.apply(this,arguments)}}T="function"!=typeof Object.assign?function(xe){if(xe===Y||null===xe)throw new TypeError("Cannot convert undefined or null to object");for(var Ge=Object(xe),mt=1;mt<arguments.length;mt++){var Ht=arguments[mt];if(Ht!==Y&&null!==Ht)for(var Wt in Ht)Ht.hasOwnProperty(Wt)&&(Ge[Wt]=Ht[Wt])}return Ge}:Object.assign;var w=P(function(xe,Ge,mt){for(var Ht=Object.keys(Ge),Wt=0;Wt<Ht.length;)(!mt||mt&&xe[Ht[Wt]]===Y)&&(xe[Ht[Wt]]=Ge[Ht[Wt]]),Wt++;return xe},"extend","Use `assign`."),v=P(function(xe,Ge){return w(xe,Ge,!0)},"merge","Use `assign`.");function C(ye,xe,Ge){var Ht,mt=xe.prototype;(Ht=ye.prototype=Object.create(mt)).constructor=ye,Ht._super=mt,Ge&&T(Ht,Ge)}function A(ye,xe){return function(){return ye.apply(xe,arguments)}}function U(ye,xe){return"function"==typeof ye?ye.apply(xe&&xe[0]||Y,xe):ye}function O(ye,xe){return ye===Y?xe:ye}function G(ye,xe,Ge){D(Q(xe),function(mt){ye.addEventListener(mt,Ge,!1)})}function K(ye,xe,Ge){D(Q(xe),function(mt){ye.removeEventListener(mt,Ge,!1)})}function I(ye,xe){for(;ye;){if(ye==xe)return!0;ye=ye.parentNode}return!1}function L(ye,xe){return ye.indexOf(xe)>-1}function Q(ye){return ye.trim().split(/\s+/g)}function S(ye,xe,Ge){if(ye.indexOf&&!Ge)return ye.indexOf(xe);for(var mt=0;mt<ye.length;){if(Ge&&ye[mt][Ge]==xe||!Ge&&ye[mt]===xe)return mt;mt++}return-1}function z(ye){return Array.prototype.slice.call(ye,0)}function ie(ye,xe,Ge){for(var mt=[],Ht=[],Wt=0;Wt<ye.length;){var gr=xe?ye[Wt][xe]:ye[Wt];S(Ht,gr)<0&&mt.push(ye[Wt]),Ht[Wt]=gr,Wt++}return Ge&&(mt=xe?mt.sort(function(Cs,co){return Cs[xe]>co[xe]}):mt.sort()),mt}function de(ye,xe){for(var Ge,mt,Ht=xe[0].toUpperCase()+xe.slice(1),Wt=0;Wt<Te.length;){if((mt=(Ge=Te[Wt])?Ge+Ht:xe)in ye)return mt;Wt++}return Y}var te=1;function Ae(ye){var xe=ye.ownerDocument||ye;return xe.defaultView||xe.parentWindow||J}var ne="ontouchstart"in J,be=de(J,"PointerEvent")!==Y,Re=ne&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),He="touch",Ze="mouse",Et=["x","y"],pt=["clientX","clientY"];function ge(ye,xe){var Ge=this;this.manager=ye,this.callback=xe,this.element=ye.element,this.target=ye.options.inputTarget,this.domHandler=function(mt){U(ye.options.enable,[ye])&&Ge.handler(mt)},this.init()}function N(ye,xe,Ge){var mt=Ge.pointers.length,Ht=Ge.changedPointers.length,Wt=1&xe&&mt-Ht==0,gr=12&xe&&mt-Ht==0;Ge.isFirst=!!Wt,Ge.isFinal=!!gr,Wt&&(ye.session={}),Ge.eventType=xe,function(ye,xe){var Ge=ye.session,mt=xe.pointers,Ht=mt.length;Ge.firstInput||(Ge.firstInput=yt(xe)),Ht>1&&!Ge.firstMultiple?Ge.firstMultiple=yt(xe):1===Ht&&(Ge.firstMultiple=!1);var Wt=Ge.firstInput,gr=Ge.firstMultiple,ls=gr?gr.center:Wt.center,Cs=xe.center=Rt(mt);xe.timeStamp=se(),xe.deltaTime=xe.timeStamp-Wt.timeStamp,xe.angle=kr(ls,Cs),xe.distance=Xn(ls,Cs),function(ye,xe){var Ge=xe.center,mt=ye.offsetDelta||{},Ht=ye.prevDelta||{},Wt=ye.prevInput||{};(1===xe.eventType||4===Wt.eventType)&&(Ht=ye.prevDelta={x:Wt.deltaX||0,y:Wt.deltaY||0},mt=ye.offsetDelta={x:Ge.x,y:Ge.y}),xe.deltaX=Ht.x+(Ge.x-mt.x),xe.deltaY=Ht.y+(Ge.y-mt.y)}(Ge,xe),xe.offsetDirection=kn(xe.deltaX,xe.deltaY);var co=In(xe.deltaTime,xe.deltaX,xe.deltaY);xe.overallVelocityX=co.x,xe.overallVelocityY=co.y,xe.overallVelocity=B(co.x)>B(co.y)?co.x:co.y,xe.scale=gr?function(ye,xe){return Xn(xe[0],xe[1],pt)/Xn(ye[0],ye[1],pt)}(gr.pointers,mt):1,xe.rotation=gr?function(ye,xe){return kr(xe[1],xe[0],pt)+kr(ye[1],ye[0],pt)}(gr.pointers,mt):0,xe.maxPointers=Ge.prevInput?xe.pointers.length>Ge.prevInput.maxPointers?xe.pointers.length:Ge.prevInput.maxPointers:xe.pointers.length,function(ye,xe){var Ht,Wt,gr,ls,Ge=ye.lastInterval||xe,mt=xe.timeStamp-Ge.timeStamp;if(8!=xe.eventType&&(mt>25||Ge.velocity===Y)){var Cs=xe.deltaX-Ge.deltaX,co=xe.deltaY-Ge.deltaY,hr=In(mt,Cs,co);Wt=hr.x,gr=hr.y,Ht=B(hr.x)>B(hr.y)?hr.x:hr.y,ls=kn(Cs,co),ye.lastInterval=xe}else Ht=Ge.velocity,Wt=Ge.velocityX,gr=Ge.velocityY,ls=Ge.direction;xe.velocity=Ht,xe.velocityX=Wt,xe.velocityY=gr,xe.direction=ls}(Ge,xe);var hr=ye.element;I(xe.srcEvent.target,hr)&&(hr=xe.srcEvent.target),xe.target=hr}(ye,Ge),ye.emit("hammer.input",Ge),ye.recognize(Ge),ye.session.prevInput=Ge}function yt(ye){for(var xe=[],Ge=0;Ge<ye.pointers.length;)xe[Ge]={clientX:H(ye.pointers[Ge].clientX),clientY:H(ye.pointers[Ge].clientY)},Ge++;return{timeStamp:se(),pointers:xe,center:Rt(xe),deltaX:ye.deltaX,deltaY:ye.deltaY}}function Rt(ye){var xe=ye.length;if(1===xe)return{x:H(ye[0].clientX),y:H(ye[0].clientY)};for(var Ge=0,mt=0,Ht=0;Ht<xe;)Ge+=ye[Ht].clientX,mt+=ye[Ht].clientY,Ht++;return{x:H(Ge/xe),y:H(mt/xe)}}function In(ye,xe,Ge){return{x:xe/ye||0,y:Ge/ye||0}}function kn(ye,xe){return ye===xe?1:B(ye)>=B(xe)?ye<0?2:4:xe<0?8:16}function Xn(ye,xe,Ge){Ge||(Ge=Et);var mt=xe[Ge[0]]-ye[Ge[0]],Ht=xe[Ge[1]]-ye[Ge[1]];return Math.sqrt(mt*mt+Ht*Ht)}function kr(ye,xe,Ge){return Ge||(Ge=Et),180*Math.atan2(xe[Ge[1]]-ye[Ge[1]],xe[Ge[0]]-ye[Ge[0]])/Math.PI}ge.prototype={handler:function(){},init:function(){this.evEl&&G(this.element,this.evEl,this.domHandler),this.evTarget&&G(this.target,this.evTarget,this.domHandler),this.evWin&&G(Ae(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&K(this.element,this.evEl,this.domHandler),this.evTarget&&K(this.target,this.evTarget,this.domHandler),this.evWin&&K(Ae(this.element),this.evWin,this.domHandler)}};var Ao={mousedown:1,mousemove:2,mouseup:4},Ks="mousedown",Mo="mousemove mouseup";function vs(){this.evEl=Ks,this.evWin=Mo,this.pressed=!1,ge.apply(this,arguments)}C(vs,ge,{handler:function(xe){var Ge=Ao[xe.type];1&Ge&&0===xe.button&&(this.pressed=!0),2&Ge&&1!==xe.which&&(Ge=4),this.pressed&&(4&Ge&&(this.pressed=!1),this.callback(this.manager,Ge,{pointers:[xe],changedPointers:[xe],pointerType:Ze,srcEvent:xe}))}});var Tc={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},su={2:He,3:"pen",4:Ze,5:"kinect"},Ac="pointerdown",oo="pointermove pointerup pointercancel";function en(){this.evEl=Ac,this.evWin=oo,ge.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}J.MSPointerEvent&&!J.PointerEvent&&(Ac="MSPointerDown",oo="MSPointerMove MSPointerUp MSPointerCancel"),C(en,ge,{handler:function(xe){var Ge=this.store,mt=!1,Ht=xe.type.toLowerCase().replace("ms",""),Wt=Tc[Ht],gr=su[xe.pointerType]||xe.pointerType,ls=gr==He,Cs=S(Ge,xe.pointerId,"pointerId");1&Wt&&(0===xe.button||ls)?Cs<0&&(Ge.push(xe),Cs=Ge.length-1):12&Wt&&(mt=!0),!(Cs<0)&&(Ge[Cs]=xe,this.callback(this.manager,Wt,{pointers:Ge,changedPointers:[xe],pointerType:gr,srcEvent:xe}),mt&&Ge.splice(Cs,1))}});var dl={touchstart:1,touchmove:2,touchend:4,touchcancel:8},it="touchstart",ot="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=it,this.evWin=ot,this.started=!1,ge.apply(this,arguments)}function pe(ye,xe){var Ge=z(ye.touches),mt=z(ye.changedTouches);return 12&xe&&(Ge=ie(Ge.concat(mt),"identifier",!0)),[Ge,mt]}C(ut,ge,{handler:function(xe){var Ge=dl[xe.type];if(1===Ge&&(this.started=!0),this.started){var mt=pe.call(this,xe,Ge);12&Ge&&mt[0].length-mt[1].length==0&&(this.started=!1),this.callback(this.manager,Ge,{pointers:mt[0],changedPointers:mt[1],pointerType:He,srcEvent:xe})}}});var ve={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Be="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=Be,this.targetIds={},ge.apply(this,arguments)}function Qe(ye,xe){var Ge=z(ye.touches),mt=this.targetIds;if(3&xe&&1===Ge.length)return mt[Ge[0].identifier]=!0,[Ge,Ge];var Ht,Wt,gr=z(ye.changedTouches),ls=[],Cs=this.target;if(Wt=Ge.filter(function(co){return I(co.target,Cs)}),1===xe)for(Ht=0;Ht<Wt.length;)mt[Wt[Ht].identifier]=!0,Ht++;for(Ht=0;Ht<gr.length;)mt[gr[Ht].identifier]&&ls.push(gr[Ht]),12&xe&&delete mt[gr[Ht].identifier],Ht++;return ls.length?[ie(Wt.concat(ls),"identifier",!0),ls]:void 0}function At(){ge.apply(this,arguments);var ye=A(this.handler,this);this.touch=new lt(this.manager,ye),this.mouse=new vs(this.manager,ye),this.primaryTouch=null,this.lastTouches=[]}function Xt(ye,xe){1&ye?(this.primaryTouch=xe.changedPointers[0].identifier,Gn.call(this,xe)):12&ye&&Gn.call(this,xe)}function Gn(ye){var xe=ye.changedPointers[0];if(xe.identifier===this.primaryTouch){var Ge={x:xe.clientX,y:xe.clientY};this.lastTouches.push(Ge);var mt=this.lastTouches;setTimeout(function(){var Wt=mt.indexOf(Ge);Wt>-1&&mt.splice(Wt,1)},2500)}}function pr(ye){for(var xe=ye.srcEvent.clientX,Ge=ye.srcEvent.clientY,mt=0;mt<this.lastTouches.length;mt++){var Ht=this.lastTouches[mt],Wt=Math.abs(xe-Ht.x),gr=Math.abs(Ge-Ht.y);if(Wt<=25&&gr<=25)return!0}return!1}C(lt,ge,{handler:function(xe){var Ge=ve[xe.type],mt=Qe.call(this,xe,Ge);!mt||this.callback(this.manager,Ge,{pointers:mt[0],changedPointers:mt[1],pointerType:He,srcEvent:xe})}}),C(At,ge,{handler:function(xe,Ge,mt){var Wt=mt.pointerType==Ze;if(!(Wt&&mt.sourceCapabilities&&mt.sourceCapabilities.firesTouchEvents)){if(mt.pointerType==He)Xt.call(this,Ge,mt);else if(Wt&&pr.call(this,mt))return;this.callback(xe,Ge,mt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pn=de(fe.style,"touchAction"),bn=Pn!==Y,Qn="compute",wi="manipulation",Ei="none",er="pan-x",ii="pan-y",Mc=function(){if(!bn)return!1;var ye={},xe=J.CSS&&J.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ge){ye[Ge]=!xe||J.CSS.supports("touch-action",Ge)}),ye}();function ws(ye,xe){this.manager=ye,this.set(xe)}function It(ye){this.options=T({},this.defaults,ye||{}),this.id=te++,this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function We(ye){return 16&ye?"cancel":8&ye?"end":4&ye?"move":2&ye?"start":""}function Gt(ye){return 16==ye?"down":8==ye?"up":2==ye?"left":4==ye?"right":""}function vt(ye,xe){var Ge=xe.manager;return Ge?Ge.get(ye):ye}function vn(){It.apply(this,arguments)}function ao(){vn.apply(this,arguments),this.pX=null,this.pY=null}function Es(){vn.apply(this,arguments)}function Go(){It.apply(this,arguments),this._timer=null,this._input=null}function ou(){vn.apply(this,arguments)}function sa(){vn.apply(this,arguments)}function cs(){It.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Io(ye,xe){return(xe=xe||{}).recognizers=O(xe.recognizers,Io.defaults.preset),new oa(ye,xe)}function oa(ye,xe){this.options=T({},Io.defaults,xe||{}),this.options.inputTarget=this.options.inputTarget||ye,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ye,this.input=function(ye){return new(ye.options.inputClass||(be?en:Re?lt:ne?At:vs))(ye,N)}(this),this.touchAction=new ws(this,this.options.touchAction),au(this,!0),D(this.options.recognizers,function(Ge){var mt=this.add(new Ge[0](Ge[1]));Ge[2]&&mt.recognizeWith(Ge[2]),Ge[3]&&mt.requireFailure(Ge[3])},this)}function au(ye,xe){var mt,Ge=ye.element;Ge.style&&(D(ye.options.cssProps,function(Ht,Wt){mt=de(Ge.style,Wt),xe?(ye.oldCssProps[mt]=Ge.style[mt],Ge.style[mt]=Ht):Ge.style[mt]=ye.oldCssProps[mt]||""}),xe||(ye.oldCssProps={}))}ws.prototype={set:function(ye){ye==Qn&&(ye=this.compute()),bn&&this.manager.element.style&&Mc[ye]&&(this.manager.element.style[Pn]=ye),this.actions=ye.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ye=[];return D(this.manager.recognizers,function(xe){U(xe.options.enable,[xe])&&(ye=ye.concat(xe.getTouchAction()))}),function(ye){if(L(ye,Ei))return Ei;var xe=L(ye,er),Ge=L(ye,ii);return xe&&Ge?Ei:xe||Ge?xe?er:ii:L(ye,wi)?wi:"auto"}(ye.join(" "))},preventDefaults:function(ye){var xe=ye.srcEvent,Ge=ye.offsetDirection;if(!this.manager.session.prevented){var mt=this.actions,Ht=L(mt,Ei)&&!Mc[Ei],Wt=L(mt,ii)&&!Mc[ii],gr=L(mt,er)&&!Mc[er];if(Ht&&1===ye.pointers.length&&ye.distance<2&&ye.deltaTime<250)return;return gr&&Wt||!(Ht||Wt&&6&Ge||gr&&24&Ge)?void 0:this.preventSrc(xe)}xe.preventDefault()},preventSrc:function(ye){this.manager.session.prevented=!0,ye.preventDefault()}},It.prototype={defaults:{},set:function(ye){return T(this.options,ye),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ye){if(E(ye,"recognizeWith",this))return this;var xe=this.simultaneous;return xe[(ye=vt(ye,this)).id]||(xe[ye.id]=ye,ye.recognizeWith(this)),this},dropRecognizeWith:function(ye){return E(ye,"dropRecognizeWith",this)||(ye=vt(ye,this),delete this.simultaneous[ye.id]),this},requireFailure:function(ye){if(E(ye,"requireFailure",this))return this;var xe=this.requireFail;return-1===S(xe,ye=vt(ye,this))&&(xe.push(ye),ye.requireFailure(this)),this},dropRequireFailure:function(ye){if(E(ye,"dropRequireFailure",this))return this;ye=vt(ye,this);var xe=S(this.requireFail,ye);return xe>-1&&this.requireFail.splice(xe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ye){return!!this.simultaneous[ye.id]},emit:function(ye){var xe=this,Ge=this.state;function mt(Ht){xe.manager.emit(Ht,ye)}Ge<8&&mt(xe.options.event+We(Ge)),mt(xe.options.event),ye.additionalEvent&&mt(ye.additionalEvent),Ge>=8&&mt(xe.options.event+We(Ge))},tryEmit:function(ye){if(this.canEmit())return this.emit(ye);this.state=32},canEmit:function(){for(var ye=0;ye<this.requireFail.length;){if(!(33&this.requireFail[ye].state))return!1;ye++}return!0},recognize:function(ye){var xe=T({},ye);if(!U(this.options.enable,[this,xe]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(xe),30&this.state&&this.tryEmit(xe)},process:function(ye){},getTouchAction:function(){},reset:function(){}},C(vn,It,{defaults:{pointers:1},attrTest:function(ye){var xe=this.options.pointers;return 0===xe||ye.pointers.length===xe},process:function(ye){var xe=this.state,Ge=ye.eventType,mt=6&xe,Ht=this.attrTest(ye);return mt&&(8&Ge||!Ht)?16|xe:mt||Ht?4&Ge?8|xe:2&xe?4|xe:2:32}}),C(ao,vn,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var ye=this.options.direction,xe=[];return 6&ye&&xe.push(ii),24&ye&&xe.push(er),xe},directionTest:function(ye){var xe=this.options,Ge=!0,mt=ye.distance,Ht=ye.direction,Wt=ye.deltaX,gr=ye.deltaY;return Ht&xe.direction||(6&xe.direction?(Ht=0===Wt?1:Wt<0?2:4,Ge=Wt!=this.pX,mt=Math.abs(ye.deltaX)):(Ht=0===gr?1:gr<0?8:16,Ge=gr!=this.pY,mt=Math.abs(ye.deltaY))),ye.direction=Ht,Ge&&mt>xe.threshold&&Ht&xe.direction},attrTest:function(ye){return vn.prototype.attrTest.call(this,ye)&&(2&this.state||!(2&this.state)&&this.directionTest(ye))},emit:function(ye){this.pX=ye.deltaX,this.pY=ye.deltaY;var xe=Gt(ye.direction);xe&&(ye.additionalEvent=this.options.event+xe),this._super.emit.call(this,ye)}}),C(Es,vn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ei]},attrTest:function(ye){return this._super.attrTest.call(this,ye)&&(Math.abs(ye.scale-1)>this.options.threshold||2&this.state)},emit:function(ye){1!==ye.scale&&(ye.additionalEvent=this.options.event+(ye.scale<1?"in":"out")),this._super.emit.call(this,ye)}}),C(Go,It,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(ye){var xe=this.options,Ge=ye.pointers.length===xe.pointers,mt=ye.distance<xe.threshold,Ht=ye.deltaTime>xe.time;if(this._input=ye,!mt||!Ge||12&ye.eventType&&!Ht)this.reset();else if(1&ye.eventType)this.reset(),this._timer=W(function(){this.state=8,this.tryEmit()},xe.time,this);else if(4&ye.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(ye){8===this.state&&(ye&&4&ye.eventType?this.manager.emit(this.options.event+"up",ye):(this._input.timeStamp=se(),this.manager.emit(this.options.event,this._input)))}}),C(ou,vn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ei]},attrTest:function(ye){return this._super.attrTest.call(this,ye)&&(Math.abs(ye.rotation)>this.options.threshold||2&this.state)}}),C(sa,vn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ao.prototype.getTouchAction.call(this)},attrTest:function(ye){var Ge,xe=this.options.direction;return 30&xe?Ge=ye.overallVelocity:6&xe?Ge=ye.overallVelocityX:24&xe&&(Ge=ye.overallVelocityY),this._super.attrTest.call(this,ye)&&xe&ye.offsetDirection&&ye.distance>this.options.threshold&&ye.maxPointers==this.options.pointers&&B(Ge)>this.options.velocity&&4&ye.eventType},emit:function(ye){var xe=Gt(ye.offsetDirection);xe&&this.manager.emit(this.options.event+xe,ye),this.manager.emit(this.options.event,ye)}}),C(cs,It,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wi]},process:function(ye){var xe=this.options,Ge=ye.pointers.length===xe.pointers,mt=ye.distance<xe.threshold,Ht=ye.deltaTime<xe.time;if(this.reset(),1&ye.eventType&&0===this.count)return this.failTimeout();if(mt&&Ht&&Ge){if(4!=ye.eventType)return this.failTimeout();var Wt=!this.pTime||ye.timeStamp-this.pTime<xe.interval,gr=!this.pCenter||Xn(this.pCenter,ye.center)<xe.posThreshold;if(this.pTime=ye.timeStamp,this.pCenter=ye.center,gr&&Wt?this.count+=1:this.count=1,this._input=ye,0==this.count%xe.taps)return this.hasRequireFailures()?(this._timer=W(function(){this.state=8,this.tryEmit()},xe.interval,this),2):8}return 32},failTimeout:function(){return this._timer=W(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Io.VERSION="2.0.7",Io.defaults={domEvents:!1,touchAction:Qn,enable:!0,inputTarget:null,inputClass:null,preset:[[ou,{enable:!1}],[Es,{enable:!1},["rotate"]],[sa,{direction:6}],[ao,{direction:6},["swipe"]],[cs],[cs,{event:"doubletap",taps:2},["tap"]],[Go]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},oa.prototype={set:function(ye){return T(this.options,ye),ye.touchAction&&this.touchAction.update(),ye.inputTarget&&(this.input.destroy(),this.input.target=ye.inputTarget,this.input.init()),this},stop:function(ye){this.session.stopped=ye?2:1},recognize:function(ye){var xe=this.session;if(!xe.stopped){this.touchAction.preventDefaults(ye);var Ge,mt=this.recognizers,Ht=xe.curRecognizer;(!Ht||Ht&&8&Ht.state)&&(Ht=xe.curRecognizer=null);for(var Wt=0;Wt<mt.length;)Ge=mt[Wt],2===xe.stopped||Ht&&Ge!=Ht&&!Ge.canRecognizeWith(Ht)?Ge.reset():Ge.recognize(ye),!Ht&&14&Ge.state&&(Ht=xe.curRecognizer=Ge),Wt++}},get:function(ye){if(ye instanceof It)return ye;for(var xe=this.recognizers,Ge=0;Ge<xe.length;Ge++)if(xe[Ge].options.event==ye)return xe[Ge];return null},add:function(ye){if(E(ye,"add",this))return this;var xe=this.get(ye.options.event);return xe&&this.remove(xe),this.recognizers.push(ye),ye.manager=this,this.touchAction.update(),ye},remove:function(ye){if(E(ye,"remove",this))return this;if(ye=this.get(ye)){var xe=this.recognizers,Ge=S(xe,ye);-1!==Ge&&(xe.splice(Ge,1),this.touchAction.update())}return this},on:function(ye,xe){if(ye!==Y&&xe!==Y){var Ge=this.handlers;return D(Q(ye),function(mt){Ge[mt]=Ge[mt]||[],Ge[mt].push(xe)}),this}},off:function(ye,xe){if(ye!==Y){var Ge=this.handlers;return D(Q(ye),function(mt){xe?Ge[mt]&&Ge[mt].splice(S(Ge[mt],xe),1):delete Ge[mt]}),this}},emit:function(ye,xe){this.options.domEvents&&function(ye,xe){var Ge=xt.createEvent("Event");Ge.initEvent(ye,!0,!0),Ge.gesture=xe,xe.target.dispatchEvent(Ge)}(ye,xe);var Ge=this.handlers[ye]&&this.handlers[ye].slice();if(Ge&&Ge.length){xe.type=ye,xe.preventDefault=function(){xe.srcEvent.preventDefault()};for(var mt=0;mt<Ge.length;)Ge[mt](xe),mt++}},destroy:function(){this.element&&au(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},T(Io,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:oa,Input:ge,TouchAction:ws,TouchInput:lt,MouseInput:vs,PointerEventInput:en,TouchMouseInput:At,SingleTouchInput:ut,Recognizer:It,AttrRecognizer:vn,Tap:cs,Pan:ao,Swipe:sa,Pinch:Es,Rotate:ou,Press:Go,on:G,off:K,each:D,merge:v,extend:w,assign:T,inherit:C,bindFn:A,prefixed:de}),(void 0!==J?J:"undefined"!=typeof self?self:{}).Hammer=Io,(gt=function(){return Io}.call(rt,tt,rt,Vt))!==Y&&(Vt.exports=gt)}(window,document)},815:function(Vt,rt,tt){var gt;Vt=tt.nmd(Vt),function(){var J,Te="Expected a function",q="__lodash_hash_undefined__",B="__lodash_placeholder__",U=32,G=128,oe=1/0,Ae=9007199254740991,be=4294967295,nt=[["ary",G],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",U],["partialRight",64],["rearg",256]],Ze="[object Arguments]",Je="[object Array]",je="[object Boolean]",Le="[object Date]",Ne="[object Error]",ze="[object Function]",qe="[object GeneratorFunction]",Ve="[object Map]",$="[object Number]",we="[object Object]",ue="[object Promise]",Et="[object RegExp]",pt="[object Set]",ge="[object String]",j="[object Symbol]",V="[object WeakMap]",Xe="[object ArrayBuffer]",yt="[object DataView]",Rt="[object Float32Array]",In="[object Float64Array]",kn="[object Int8Array]",Xn="[object Int16Array]",kr="[object Int32Array]",xr="[object Uint8Array]",bs="[object Uint8ClampedArray]",Ao="[object Uint16Array]",Ks="[object Uint32Array]",Mo=/\b__p \+= '';/g,vs=/\b(__p \+=) '' \+/g,Tc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,su=/&(?:amp|lt|gt|quot|#39);/g,Ac=/[&<>"']/g,oo=RegExp(su.source),en=RegExp(Ac.source),dl=/<%-([\s\S]+?)%>/g,it=/<%([\s\S]+?)%>/g,ot=/<%=([\s\S]+?)%>/g,ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,lt=RegExp(Be.source),Qe=/^\s+/,wt=/\s/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,At=/\{\n\/\* \[wrapped with (.+)\] \*/,Xt=/,? & /,Gn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pr=/[()=,{}\[\]\/\s]/,Pn=/\\(\\)?/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qn=/\w*$/,xn=/^[-+]0x[0-9a-f]+$/i,wi=/^0b[01]+$/i,Ei=/^\[object .+?Constructor\]$/,er=/^0o[0-7]+$/i,ii=/^(?:0|[1-9]\d*)$/,Mc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ws=/($^)/,re=/['\n\r\u2028\u2029\\]/g,he="\\ud800-\\udfff",Z="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",vt="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",ao="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Go="["+he+"]",ou="["+ao+"]",sa="["+Z+"]",cs="\\d+",Io="["+Ee+"]",hd="["+ke+"]",Sn="[^"+he+ao+cs+Ee+ke+vt+"]",oa="\\ud83c[\\udffb-\\udfff]",Ic="[^"+he+"]",Of="(?:\\ud83c[\\udde6-\\uddff]){2}",ye="[\\ud800-\\udbff][\\udc00-\\udfff]",xe="["+vt+"]",mt="(?:"+hd+"|"+Sn+")",Ht="(?:"+xe+"|"+Sn+")",Wt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",gr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ls="(?:"+sa+"|"+oa+")?",Cs="["+vn+"]?",bR=Cs+ls+"(?:\\u200d(?:"+[Ic,Of,ye].join("|")+")"+Cs+ls+")*",Nf="(?:"+[Io,Of,ye].join("|")+")"+bR,_i="(?:"+[Ic+sa+"?",sa,Of,ye,Go].join("|")+")",Zm=RegExp("['\u2019]","g"),Av=RegExp(sa,"g"),ng=RegExp(oa+"(?="+oa+")|"+_i+bR,"g"),SS=RegExp([xe+"?"+hd+"+"+Wt+"(?="+[ou,xe,"$"].join("|")+")",Ht+"+"+gr+"(?="+[ou,xe+mt,"$"].join("|")+")",xe+"?"+mt+"+"+Wt,xe+"+"+gr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cs,Nf].join("|"),"g"),vR=RegExp("[\\u200d"+he+Z+vn+"]"),cu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wR=-1,wn={};wn[Rt]=wn[In]=wn[kn]=wn[Xn]=wn[kr]=wn[xr]=wn[bs]=wn[Ao]=wn[Ks]=!0,wn[Ze]=wn[Je]=wn[Xe]=wn[je]=wn[yt]=wn[Le]=wn[Ne]=wn[ze]=wn[Ve]=wn[$]=wn[we]=wn[Et]=wn[pt]=wn[ge]=wn[V]=!1;var Ci={};Ci[Ze]=Ci[Je]=Ci[Xe]=Ci[yt]=Ci[je]=Ci[Le]=Ci[Rt]=Ci[In]=Ci[kn]=Ci[Xn]=Ci[kr]=Ci[Ve]=Ci[$]=Ci[we]=Ci[Et]=Ci[pt]=Ci[ge]=Ci[j]=Ci[xr]=Ci[bs]=Ci[Ao]=Ci[Ks]=!0,Ci[Ne]=Ci[ze]=Ci[V]=!1;var hn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ER=parseFloat,AS=parseInt,Lt="object"==typeof global&&global&&global.Object===Object&&global,Ro="object"==typeof self&&self&&self.Object===Object&&self,Zr=Lt||Ro||Function("return this")(),lu=rt&&!rt.nodeType&&rt,Rc=lu&&Vt&&!Vt.nodeType&&Vt,xa=Rc&&Rc.exports===lu,Mv=xa&&Lt.process,zi=function(){try{return Rc&&Rc.require&&Rc.require("util").types||Mv&&Mv.binding&&Mv.binding("util")}catch(Mt){}}(),sn=zi&&zi.isArrayBuffer,_r=zi&&zi.isDate,Ai=zi&&zi.isMap,aa=zi&&zi.isRegExp,fd=zi&&zi.isSet,Ps=zi&&zi.isTypedArray;function Fs(st,Mt,_t){switch(_t.length){case 0:return st.call(Mt);case 1:return st.call(Mt,_t[0]);case 2:return st.call(Mt,_t[0],_t[1]);case 3:return st.call(Mt,_t[0],_t[1],_t[2])}return st.apply(Mt,_t)}function us(st,Mt,_t,fn){for(var An=-1,Kr=null==st?0:st.length;++An<Kr;){var Ss=st[An];Mt(fn,Ss,_t(Ss),st)}return fn}function Oo(st,Mt){for(var _t=-1,fn=null==st?0:st.length;++_t<fn&&!1!==Mt(st[_t],_t,st););return st}function Pf(st,Mt){for(var _t=null==st?0:st.length;_t--&&!1!==Mt(st[_t],_t,st););return st}function lr(st,Mt){for(var _t=-1,fn=null==st?0:st.length;++_t<fn;)if(!Mt(st[_t],_t,st))return!1;return!0}function Oc(st,Mt){for(var _t=-1,fn=null==st?0:st.length,An=0,Kr=[];++_t<fn;){var Ss=st[_t];Mt(Ss,_t,st)&&(Kr[An++]=Ss)}return Kr}function uu(st,Mt){return!(null==st||!st.length)&&hl(st,Mt,0)>-1}function ig(st,Mt,_t){for(var fn=-1,An=null==st?0:st.length;++fn<An;)if(_t(Mt,st[fn]))return!0;return!1}function oi(st,Mt){for(var _t=-1,fn=null==st?0:st.length,An=Array(fn);++_t<fn;)An[_t]=Mt(st[_t],_t,st);return An}function ds(st,Mt){for(var _t=-1,fn=Mt.length,An=st.length;++_t<fn;)st[An+_t]=Mt[_t];return st}function yh(st,Mt,_t,fn){var An=-1,Kr=null==st?0:st.length;for(fn&&Kr&&(_t=st[++An]);++An<Kr;)_t=Mt(_t,st[An],An,st);return _t}function Ff(st,Mt,_t,fn){var An=null==st?0:st.length;for(fn&&An&&(_t=st[--An]);An--;)_t=Mt(_t,st[An],An,st);return _t}function Ta(st,Mt){for(var _t=-1,fn=null==st?0:st.length;++_t<fn;)if(Mt(st[_t],_t,st))return!0;return!1}var Si=Iv("length");function sg(st,Mt,_t){var fn;return _t(st,function(An,Kr,Ss){if(Mt(An,Kr,Ss))return fn=Kr,!1}),fn}function kf(st,Mt,_t,fn){for(var An=st.length,Kr=_t+(fn?1:-1);fn?Kr--:++Kr<An;)if(Mt(st[Kr],Kr,st))return Kr;return-1}function hl(st,Mt,_t){return Mt==Mt?function(st,Mt,_t){for(var fn=_t-1,An=st.length;++fn<An;)if(st[fn]===Mt)return fn;return-1}(st,Mt,_t):kf(st,pd,_t)}function Jm(st,Mt,_t,fn){for(var An=_t-1,Kr=st.length;++An<Kr;)if(fn(st[An],Mt))return An;return-1}function pd(st){return st!=st}function lo(st,Mt){var _t=null==st?0:st.length;return _t?Lf(st,Mt)/_t:NaN}function Iv(st){return function(Mt){return null==Mt?J:Mt[st]}}function Za(st){return function(Mt){return null==st?J:st[Mt]}}function Ja(st,Mt,_t,fn,An){return An(st,function(Kr,Ss,ci){_t=fn?(fn=!1,Kr):Mt(_t,Kr,Ss,ci)}),_t}function Lf(st,Mt){for(var _t,fn=-1,An=st.length;++fn<An;){var Kr=Mt(st[fn]);Kr!==J&&(_t=_t===J?Kr:_t+Kr)}return _t}function Bf(st,Mt){for(var _t=-1,fn=Array(st);++_t<st;)fn[_t]=Mt(_t);return fn}function MS(st){return st&&st.slice(0,gd(st)+1).replace(Qe,"")}function ec(st){return function(Mt){return st(Mt)}}function Ov(st,Mt){return oi(Mt,function(_t){return st[_t]})}function og(st,Mt){return st.has(Mt)}function DR(st,Mt){for(var _t=-1,fn=st.length;++_t<fn&&hl(Mt,st[_t],0)>-1;);return _t}function xR(st,Mt){for(var _t=st.length;_t--&&hl(Mt,st[_t],0)>-1;);return _t}function BH(st,Mt){for(var _t=st.length,fn=0;_t--;)st[_t]===Mt&&++fn;return fn}var VH=Za({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),jH=Za({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function UH(st){return"\\"+hn[st]}function ag(st){return vR.test(st)}function IS(st){var Mt=-1,_t=Array(st.size);return st.forEach(function(fn,An){_t[++Mt]=[An,fn]}),_t}function TR(st,Mt){return function(_t){return st(Mt(_t))}}function bh(st,Mt){for(var _t=-1,fn=st.length,An=0,Kr=[];++_t<fn;){var Ss=st[_t];(Ss===Mt||Ss===B)&&(st[_t]=B,Kr[An++]=_t)}return Kr}function Nv(st){var Mt=-1,_t=Array(st.size);return st.forEach(function(fn){_t[++Mt]=fn}),_t}function cg(st){return ag(st)?function(st){for(var Mt=ng.lastIndex=0;ng.test(st);)++Mt;return Mt}(st):Si(st)}function fl(st){return ag(st)?function(st){return st.match(ng)||[]}(st):function(st){return st.split("")}(st)}function gd(st){for(var Mt=st.length;Mt--&&wt.test(st.charAt(Mt)););return Mt}var Fv=Za({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),lg=function st(Mt){var d,_t=(Mt=null==Mt?Zr:lg.defaults(Zr.Object(),Mt,lg.pick(Zr,rg))).Array,fn=Mt.Date,An=Mt.Error,Kr=Mt.Function,Ss=Mt.Math,ci=Mt.Object,kv=Mt.RegExp,Lv=Mt.String,Pc=Mt.TypeError,Mi=_t.prototype,vh=ci.prototype,e_=Mt["__core-js_shared__"],$i=Kr.prototype.toString,li=vh.hasOwnProperty,qH=0,ug=(d=/[^.]+$/.exec(e_&&e_.keys&&e_.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",Wo=vh.toString,IR=$i.call(ci),Bv=Zr._,Vf=kv("^"+$i.call(li).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),No=xa?Mt.Buffer:J,du=Mt.Symbol,jf=Mt.Uint8Array,NS=No?No.allocUnsafe:J,Fc=TR(ci.getPrototypeOf,ci),Vv=ci.create,t_=vh.propertyIsEnumerable,Vn=Mi.splice,RR=du?du.isConcatSpreadable:J,dg=du?du.iterator:J,wh=du?du.toStringTag:J,n_=function(){try{var d=Dd(ci,"defineProperty");return d({},"",{}),d}catch(p){}}(),PS=Mt.clearTimeout!==Zr.clearTimeout&&Mt.clearTimeout,OR=fn&&fn.now!==Zr.Date.now&&fn.now,NR=Mt.setTimeout!==Zr.setTimeout&&Mt.setTimeout,Bt=Ss.ceil,Tr=Ss.floor,es=ci.getOwnPropertySymbols,ks=No?No.isBuffer:J,jv=Mt.isFinite,hg=Mi.join,pl=TR(ci.keys,ci),hs=Ss.max,Xs=Ss.min,YH=fn.now,PR=Mt.parseInt,fg=Ss.random,r_=Mi.reverse,uo=Dd(Mt,"DataView"),ca=Dd(Mt,"Map"),i_=Dd(Mt,"Promise"),kc=Dd(Mt,"Set"),Aa=Dd(Mt,"WeakMap"),pg=Dd(ci,"create"),gg=Aa&&new Aa,Uf={},FR=Nh(uo),Uv=Nh(ca),Hv=Nh(i_),FS=Nh(kc),zv=Nh(Aa),s_=du?du.prototype:J,Hf=s_?s_.valueOf:J,mg=s_?s_.toString:J;function Se(d){if(qi(d)&&!Rn(d)&&!(d instanceof yr)){if(d instanceof Ma)return d;if(li.call(d,"__wrapped__"))return M_(d)}return new Ma(d)}var Eh=function(){function d(){}return function(p){if(!Wi(p))return{};if(Vv)return Vv(p);d.prototype=p;var y=new d;return d.prototype=J,y}}();function _g(){}function Ma(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=J}function yr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function la(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var F=d[p];this.set(F[0],F[1])}}function hu(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var F=d[p];this.set(F[0],F[1])}}function gl(d){var p=-1,y=null==d?0:d.length;for(this.clear();++p<y;){var F=d[p];this.set(F[0],F[1])}}function Lc(d){var p=-1,y=null==d?0:d.length;for(this.__data__=new gl;++p<y;)this.add(d[p])}function Bc(d){var p=this.__data__=new hu(d);this.size=p.size}function bg(d,p){var y=Rn(d),F=!y&&Sl(d),ce=!y&&!F&&Dl(d),De=!y&&!F&&!ce&&Pg(d),$e=y||F||ce||De,Ye=$e?Bf(d.length,Lv):[],ct=Ye.length;for(var Nt in d)(p||li.call(d,Nt))&&(!$e||!("length"==Nt||ce&&("offset"==Nt||"parent"==Nt)||De&&("buffer"==Nt||"byteLength"==Nt||"byteOffset"==Nt)||Oa(Nt,ct)))&&Ye.push(Nt);return Ye}function qv(d){var p=d.length;return p?d[fu(0,p-1)]:J}function LS(d,p){return rp(Yo(d),Ch(p,0,d.length))}function zf(d){return rp(Yo(d))}function Yv(d,p,y){(y!==J&&!Mn(d[p],y)||y===J&&!(p in d))&&_l(d,p,y)}function ml(d,p,y){var F=d[p];(!li.call(d,p)||!Mn(F,y)||y===J&&!(p in d))&&_l(d,p,y)}function $f(d,p){for(var y=d.length;y--;)if(Mn(d[y][0],p))return y;return-1}function u_(d,p,y,F){return yd(d,function(ce,De,$e){p(F,ce,y(ce),$e)}),F}function qR(d,p){return d&&jc(p,mo(p),d)}function _l(d,p,y){"__proto__"==p&&n_?n_(d,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):d[p]=y}function Kv(d,p){for(var y=-1,F=p.length,ce=_t(F),De=null==d;++y<F;)ce[y]=De?J:Lg(d,p[y]);return ce}function Ch(d,p,y){return d==d&&(y!==J&&(d=d<=y?d:y),p!==J&&(d=d>=p?d:p)),d}function Po(d,p,y,F,ce,De){var $e,Ye=1&p,ct=2&p,Nt=4&p;if(y&&($e=ce?y(d,F,ce,De):y(d)),$e!==J)return $e;if(!Wi(d))return d;var Pt=Rn(d);if(Pt){if($e=function(d){var p=d.length,y=new d.constructor(p);return p&&"string"==typeof d[0]&&li.call(d,"index")&&(y.index=d.index,y.input=d.input),y}(d),!Ye)return Yo(d,$e)}else{var jt=ko(d),nn=jt==ze||jt==qe;if(Dl(d))return y_(d,Ye);if(jt==we||jt==Ze||nn&&!ce){if($e=ct||nn?{}:oD(d),!Ye)return ct?function(d,p){return jc(d,rD(d),p)}(d,function(d,p){return d&&jc(p,Xo(p),d)}($e,d)):function(d,p){return jc(d,h0(d),p)}(d,qR($e,d))}else{if(!Ci[jt])return ce?d:{};$e=function(d,p,y){var F=d.constructor;switch(p){case Xe:return Mh(d);case je:case Le:return new F(+d);case yt:return function(d,p){var y=p?Mh(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.byteLength)}(d,y);case Rt:case In:case kn:case Xn:case kr:case xr:case bs:case Ao:case Ks:return a0(d,y);case Ve:return new F;case $:case ge:return new F(d);case Et:return function(d){var p=new d.constructor(d.source,Qn.exec(d));return p.lastIndex=d.lastIndex,p}(d);case pt:return new F;case j:return function(d){return Hf?ci(Hf.call(d)):{}}(d)}}(d,jt,Ye)}}De||(De=new Bc);var Cn=De.get(d);if(Cn)return Cn;De.set(d,$e),fN(d)?d.forEach(function(jn){$e.add(Po(jn,p,y,jn,d,De))}):lN(d)&&d.forEach(function(jn,wr){$e.set(wr,Po(jn,p,y,wr,d,De))});var vr=Pt?J:(Nt?ct?u0:_u:ct?Xo:mo)(d);return Oo(vr||d,function(jn,wr){vr&&(jn=d[wr=jn]),ml($e,wr,Po(jn,p,y,wr,d,De))}),$e}function d_(d,p,y){var F=y.length;if(null==d)return!F;for(d=ci(d);F--;){var ce=y[F],$e=d[ce];if($e===J&&!(ce in d)||!(0,p[ce])($e))return!1}return!0}function vg(d,p,y){if("function"!=typeof d)throw new Pc(Te);return Tg(function(){d.apply(J,y)},p)}function _d(d,p,y,F){var ce=-1,De=uu,$e=!0,Ye=d.length,ct=[],Nt=p.length;if(!Ye)return ct;y&&(p=oi(p,ec(y))),F?(De=ig,$e=!1):p.length>=200&&(De=og,$e=!1,p=new Lc(p));e:for(;++ce<Ye;){var Pt=d[ce],jt=null==y?Pt:y(Pt);if(Pt=F||0!==Pt?Pt:0,$e&&jt==jt){for(var nn=Nt;nn--;)if(p[nn]===jt)continue e;ct.push(Pt)}else De(p,jt,F)||ct.push(Pt)}return ct}Se.templateSettings={escape:dl,evaluate:it,interpolate:ot,variable:"",imports:{_:Se}},(Se.prototype=_g.prototype).constructor=Se,(Ma.prototype=Eh(_g.prototype)).constructor=Ma,(yr.prototype=Eh(_g.prototype)).constructor=yr,la.prototype.clear=function(){this.__data__=pg?pg(null):{},this.size=0},la.prototype.delete=function(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},la.prototype.get=function(d){var p=this.__data__;if(pg){var y=p[d];return y===q?J:y}return li.call(p,d)?p[d]:J},la.prototype.has=function(d){var p=this.__data__;return pg?p[d]!==J:li.call(p,d)},la.prototype.set=function(d,p){var y=this.__data__;return this.size+=this.has(d)?0:1,y[d]=pg&&p===J?q:p,this},hu.prototype.clear=function(){this.__data__=[],this.size=0},hu.prototype.delete=function(d){var p=this.__data__,y=$f(p,d);return!(y<0||(y==p.length-1?p.pop():Vn.call(p,y,1),--this.size,0))},hu.prototype.get=function(d){var p=this.__data__,y=$f(p,d);return y<0?J:p[y][1]},hu.prototype.has=function(d){return $f(this.__data__,d)>-1},hu.prototype.set=function(d,p){var y=this.__data__,F=$f(y,d);return F<0?(++this.size,y.push([d,p])):y[F][1]=p,this},gl.prototype.clear=function(){this.size=0,this.__data__={hash:new la,map:new(ca||hu),string:new la}},gl.prototype.delete=function(d){var p=Fo(this,d).delete(d);return this.size-=p?1:0,p},gl.prototype.get=function(d){return Fo(this,d).get(d)},gl.prototype.has=function(d){return Fo(this,d).has(d)},gl.prototype.set=function(d,p){var y=Fo(this,d),F=y.size;return y.set(d,p),this.size+=y.size==F?0:1,this},Lc.prototype.add=Lc.prototype.push=function(d){return this.__data__.set(d,q),this},Lc.prototype.has=function(d){return this.__data__.has(d)},Bc.prototype.clear=function(){this.__data__=new hu,this.size=0},Bc.prototype.delete=function(d){var p=this.__data__,y=p.delete(d);return this.size=p.size,y},Bc.prototype.get=function(d){return this.__data__.get(d)},Bc.prototype.has=function(d){return this.__data__.has(d)},Bc.prototype.set=function(d,p){var y=this.__data__;if(y instanceof hu){var F=y.__data__;if(!ca||F.length<199)return F.push([d,p]),this.size=++y.size,this;y=this.__data__=new gl(F)}return y.set(d,p),this.size=y.size,this};var yd=vl(yl),Qv=vl(h_,!0);function VS(d,p){var y=!0;return yd(d,function(F,ce,De){return y=!!p(F,ce,De)}),y}function wg(d,p,y){for(var F=-1,ce=d.length;++F<ce;){var De=d[F],$e=p(De);if(null!=$e&&(Ye===J?$e==$e&&!dc($e):y($e,Ye)))var Ye=$e,ct=De}return ct}function US(d,p){var y=[];return yd(d,function(F,ce,De){p(F,ce,De)&&y.push(F)}),y}function ho(d,p,y,F,ce){var De=-1,$e=d.length;for(y||(y=dO),ce||(ce=[]);++De<$e;){var Ye=d[De];p>0&&y(Ye)?p>1?ho(Ye,p-1,y,F,ce):ds(ce,Ye):F||(ce[ce.length]=Ye)}return ce}var Gf=YS(),Wf=YS(!0);function yl(d,p){return d&&Gf(d,p,mo)}function h_(d,p){return d&&Wf(d,p,mo)}function Eg(d,p){return Oc(p,function(y){return uc(d[y])})}function tc(d,p){for(var y=0,F=(p=Ed(p,d)).length;null!=d&&y<F;)d=d[ur(p[y++])];return y&&y==F?d:J}function ui(d,p,y){var F=p(d);return Rn(d)?F:ds(F,y(d))}function fo(d){return null==d?d===J?"[object Undefined]":"[object Null]":wh&&wh in ci(d)?function(d){var p=li.call(d,wh),y=d[wh];try{d[wh]=J;var F=!0}catch(De){}var ce=Wo.call(d);return F&&(p?d[wh]=y:delete d[wh]),ce}(d):function(d){return Wo.call(d)}(d)}function nc(d,p){return d>p}function qf(d,p){return null!=d&&li.call(d,p)}function Yf(d,p){return null!=d&&p in ci(d)}function Sh(d,p,y){for(var F=y?ig:uu,ce=d[0].length,De=d.length,$e=De,Ye=_t(De),ct=1/0,Nt=[];$e--;){var Pt=d[$e];$e&&p&&(Pt=oi(Pt,ec(p))),ct=Xs(Pt.length,ct),Ye[$e]=!y&&(p||ce>=120&&Pt.length>=120)?new Lc($e&&Pt):J}Pt=d[0];var jt=-1,nn=Ye[0];e:for(;++jt<ce&&Nt.length<ct;){var Cn=Pt[jt],Bn=p?p(Cn):Cn;if(Cn=y||0!==Cn?Cn:0,!(nn?og(nn,Bn):F(Nt,Bn,y))){for($e=De;--$e;){var vr=Ye[$e];if(!(vr?og(vr,Bn):F(d[$e],Bn,y)))continue e}nn&&nn.push(Bn),Nt.push(Cn)}}return Nt}function Vc(d,p,y){var F=null==(d=m0(d,p=Ed(p,d)))?d:d[ur(ac(p))];return null==F?J:Fs(F,d,y)}function YR(d){return qi(d)&&fo(d)==Ze}function f_(d,p,y,F,ce){return d===p||(null==d||null==p||!qi(d)&&!qi(p)?d!=d&&p!=p:function(d,p,y,F,ce,De){var $e=Rn(d),Ye=Rn(p),ct=$e?Je:ko(d),Nt=Ye?Je:ko(p),Pt=(ct=ct==Ze?we:ct)==we,jt=(Nt=Nt==Ze?we:Nt)==we,nn=ct==Nt;if(nn&&Dl(d)){if(!Dl(p))return!1;$e=!0,Pt=!1}if(nn&&!Pt)return De||(De=new Bc),$e||Pg(d)?S_(d,p,y,F,ce,De):function(d,p,y,F,ce,De,$e){switch(y){case yt:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case Xe:return!(d.byteLength!=p.byteLength||!De(new jf(d),new jf(p)));case je:case Le:case $:return Mn(+d,+p);case Ne:return d.name==p.name&&d.message==p.message;case Et:case ge:return d==p+"";case Ve:var Ye=IS;case pt:if(Ye||(Ye=Nv),d.size!=p.size&&!(1&F))return!1;var Nt=$e.get(d);if(Nt)return Nt==p;F|=2,$e.set(d,p);var Pt=S_(Ye(d),Ye(p),F,ce,De,$e);return $e.delete(d),Pt;case j:if(Hf)return Hf.call(d)==Hf.call(p)}return!1}(d,p,ct,y,F,ce,De);if(!(1&y)){var Cn=Pt&&li.call(d,"__wrapped__"),Bn=jt&&li.call(p,"__wrapped__");if(Cn||Bn){var vr=Cn?d.value():d,jn=Bn?p.value():p;return De||(De=new Bc),ce(vr,jn,y,F,De)}}return!!nn&&(De||(De=new Bc),function(d,p,y,F,ce,De){var $e=1&y,Ye=_u(d),ct=Ye.length;if(ct!=_u(p).length&&!$e)return!1;for(var jt=ct;jt--;){var nn=Ye[jt];if(!($e?nn in p:li.call(p,nn)))return!1}var Cn=De.get(d),Bn=De.get(p);if(Cn&&Bn)return Cn==p&&Bn==d;var vr=!0;De.set(d,p),De.set(p,d);for(var jn=$e;++jt<ct;){var wr=d[nn=Ye[jt]],Lr=p[nn];if(F)var ha=$e?F(Lr,wr,nn,p,d,De):F(wr,Lr,nn,d,p,De);if(!(ha===J?wr===Lr||ce(wr,Lr,y,F,De):ha)){vr=!1;break}jn||(jn="constructor"==nn)}if(vr&&!jn){var Bo=d.constructor,hc=p.constructor;Bo!=hc&&"constructor"in d&&"constructor"in p&&!("function"==typeof Bo&&Bo instanceof Bo&&"function"==typeof hc&&hc instanceof hc)&&(vr=!1)}return De.delete(d),De.delete(p),vr}(d,p,y,F,ce,De))}(d,p,y,F,f_,ce))}function Jv(d,p,y,F){var ce=y.length,De=ce,$e=!F;if(null==d)return!De;for(d=ci(d);ce--;){var Ye=y[ce];if($e&&Ye[2]?Ye[1]!==d[Ye[0]]:!(Ye[0]in d))return!1}for(;++ce<De;){var ct=(Ye=y[ce])[0],Nt=d[ct],Pt=Ye[1];if($e&&Ye[2]){if(Nt===J&&!(ct in d))return!1}else{var jt=new Bc;if(F)var nn=F(Nt,Pt,ct,d,p,jt);if(!(nn===J?f_(Pt,Nt,3,F,jt):nn))return!1}}return!0}function e0(d){return!(!Wi(d)||function(d){return!!ug&&ug in d}(d))&&(uc(d)?Vf:Ei).test(Nh(d))}function QR(d){return"function"==typeof d?d:null==d?Qo:"object"==typeof d?Rn(d)?Xf(d[0],d[1]):JR(d):kh(d)}function HS(d){if(!T_(d))return pl(d);var p=[];for(var y in ci(d))li.call(d,y)&&"constructor"!=y&&p.push(y);return p}function zS(d,p){return d<p}function ZR(d,p){var y=-1,F=ua(d)?_t(d.length):[];return yd(d,function(ce,De,$e){F[++y]=p(ce,De,$e)}),F}function JR(d){var p=sc(d);return 1==p.length&&p[0][2]?fO(p[0][0],p[0][1]):function(y){return y===d||Jv(y,d,p)}}function Xf(d,p){return oc(d)&&hO(p)?fO(ur(d),p):function(y){var F=Lg(y,d);return F===J&&F===p?j_(y,d):f_(p,F,3)}}function t0(d,p,y,F,ce){d!==p&&Gf(p,function(De,$e){if(ce||(ce=new Bc),Wi(De))!function(d,p,y,F,ce,De,$e){var Ye=_0(d,y),ct=_0(p,y),Nt=$e.get(ct);if(Nt)Yv(d,y,Nt);else{var Pt=De?De(Ye,ct,y+"",d,p,$e):J,jt=Pt===J;if(jt){var nn=Rn(ct),Cn=!nn&&Dl(ct),Bn=!nn&&!Cn&&Pg(ct);Pt=ct,nn||Cn||Bn?Rn(Ye)?Pt=Ye:Gi(Ye)?Pt=Yo(Ye):Cn?(jt=!1,Pt=y_(ct,!0)):Bn?(jt=!1,Pt=a0(ct,!0)):Pt=[]:V_(ct)||Sl(ct)?(Pt=Ye,Sl(Ye)?Pt=ZD(Ye):(!Wi(Ye)||uc(Ye))&&(Pt=oD(ct))):jt=!1}jt&&($e.set(ct,Pt),ce(Pt,ct,F,De,$e),$e.delete(ct)),Yv(d,y,Pt)}}(d,p,$e,y,t0,F,ce);else{var Ye=F?F(_0(d,$e),De,$e+"",d,p,ce):J;Ye===J&&(Ye=De),Yv(d,$e,Ye)}},Xo)}function Dh(d,p){var y=d.length;if(y)return Oa(p+=p<0?y:0,y)?d[p]:J}function Cg(d,p,y){p=p.length?oi(p,function(De){return Rn(De)?function($e){return tc($e,1===De.length?De[0]:De)}:De}):[Qo];var F=-1;return p=oi(p,ec(Ln())),function(st,Mt){var _t=st.length;for(st.sort(function(De,$e){return function(d,p,y){for(var F=-1,ce=d.criteria,De=p.criteria,$e=ce.length,Ye=y.length;++F<$e;){var ct=Cd(ce[F],De[F]);if(ct)return F>=Ye?ct:ct*("desc"==y[F]?-1:1)}return d.index-p.index}(De,$e,y)});_t--;)st[_t]=st[_t].value;return st}(ZR(d,function(De,$e,Ye){return{criteria:oi(p,function(Nt){return Nt(De)}),index:++F,value:De}}))}function $S(d,p,y){for(var F=-1,ce=p.length,De={};++F<ce;){var $e=p[F],Ye=tc(d,$e);y(Ye,$e)&&g_(De,Ed($e,d),Ye)}return De}function ic(d,p,y,F){var ce=F?Jm:hl,De=-1,$e=p.length,Ye=d;for(d===p&&(p=Yo(p)),y&&(Ye=oi(d,ec(y)));++De<$e;)for(var ct=0,Nt=p[De],Pt=y?y(Nt):Nt;(ct=ce(Ye,Pt,ct,F))>-1;)Ye!==d&&Vn.call(Ye,ct,1),Vn.call(d,ct,1);return d}function Sg(d,p){for(var y=d?p.length:0,F=y-1;y--;){var ce=p[y];if(y==F||ce!==De){var De=ce;Oa(ce)?Vn.call(d,ce,1):xh(d,ce)}}return d}function fu(d,p){return d+Tr(fg()*(p-d+1))}function p_(d,p){var y="";if(!d||p<1||p>Ae)return y;do{p%2&&(y+=d),(p=Tr(p/2))&&(d+=d)}while(p);return y}function br(d,p){return A_(pO(d,p,Qo),d+"")}function eO(d){return qv(hp(d))}function r8(d,p){var y=hp(d);return rp(y,Ch(p,0,y.length))}function g_(d,p,y,F){if(!Wi(d))return d;for(var ce=-1,De=(p=Ed(p,d)).length,$e=De-1,Ye=d;null!=Ye&&++ce<De;){var ct=ur(p[ce]),Nt=y;if("__proto__"===ct||"constructor"===ct||"prototype"===ct)return d;if(ce!=$e){var Pt=Ye[ct];(Nt=F?F(Pt,ct,Ye):J)===J&&(Nt=Wi(Pt)?Pt:Oa(p[ce+1])?[]:{})}ml(Ye,ct,Nt),Ye=Ye[ct]}return d}var n0=gg?function(d,p){return gg.set(d,p),d}:Qo,Ia=n_?function(d,p){return n_(d,"toString",{configurable:!0,enumerable:!1,value:iw(p),writable:!0})}:Qo;function r0(d){return rp(hp(d))}function po(d,p,y){var F=-1,ce=d.length;p<0&&(p=-p>ce?0:ce+p),(y=y>ce?ce:y)<0&&(y+=ce),ce=p>y?0:y-p>>>0,p>>>=0;for(var De=_t(ce);++F<ce;)De[F]=d[F+p];return De}function i8(d,p){var y;return yd(d,function(F,ce,De){return!(y=p(F,ce,De))}),!!y}function Dg(d,p,y){var F=0,ce=null==d?F:d.length;if("number"==typeof p&&p==p&&ce<=2147483647){for(;F<ce;){var De=F+ce>>>1,$e=d[De];null!==$e&&!dc($e)&&(y?$e<=p:$e<p)?F=De+1:ce=De}return ce}return s0(d,p,Qo,y)}function s0(d,p,y,F){var ce=0,De=null==d?0:d.length;if(0===De)return 0;for(var $e=(p=y(p))!=p,Ye=null===p,ct=dc(p),Nt=p===J;ce<De;){var Pt=Tr((ce+De)/2),jt=y(d[Pt]),nn=jt!==J,Cn=null===jt,Bn=jt==jt,vr=dc(jt);if($e)var jn=F||Bn;else jn=Nt?Bn&&(F||nn):Ye?Bn&&nn&&(F||!Cn):ct?Bn&&nn&&!Cn&&(F||!vr):!Cn&&!vr&&(F?jt<=p:jt<p);jn?ce=Pt+1:De=Pt}return Xs(De,4294967294)}function GS(d,p){for(var y=-1,F=d.length,ce=0,De=[];++y<F;){var $e=d[y],Ye=p?p($e):$e;if(!y||!Mn(Ye,ct)){var ct=Ye;De[ce++]=0===$e?0:$e}}return De}function WS(d){return"number"==typeof d?d:dc(d)?NaN:+d}function Ra(d){if("string"==typeof d)return d;if(Rn(d))return oi(d,Ra)+"";if(dc(d))return mg?mg.call(d):"";var p=d+"";return"0"==p&&1/d==-oe?"-0":p}function vd(d,p,y){var F=-1,ce=uu,De=d.length,$e=!0,Ye=[],ct=Ye;if(y)$e=!1,ce=ig;else if(De>=200){var Nt=p?null:l0(d);if(Nt)return Nv(Nt);$e=!1,ce=og,ct=new Lc}else ct=p?[]:Ye;e:for(;++F<De;){var Pt=d[F],jt=p?p(Pt):Pt;if(Pt=y||0!==Pt?Pt:0,$e&&jt==jt){for(var nn=ct.length;nn--;)if(ct[nn]===jt)continue e;p&&ct.push(jt),Ye.push(Pt)}else ce(ct,jt,y)||(ct!==Ye&&ct.push(jt),Ye.push(Pt))}return Ye}function xh(d,p){return null==(d=m0(d,p=Ed(p,d)))||delete d[ur(ac(p))]}function m_(d,p,y,F){return g_(d,p,y(tc(d,p)),F)}function Th(d,p,y,F){for(var ce=d.length,De=F?ce:-1;(F?De--:++De<ce)&&p(d[De],De,d););return y?po(d,F?0:De,F?De+1:ce):po(d,F?De+1:0,F?ce:De)}function tO(d,p){var y=d;return y instanceof yr&&(y=y.value()),yh(p,function(F,ce){return ce.func.apply(ce.thisArg,ds([F],ce.args))},y)}function Ah(d,p,y){var F=d.length;if(F<2)return F?vd(d[0]):[];for(var ce=-1,De=_t(F);++ce<F;)for(var $e=d[ce],Ye=-1;++Ye<F;)Ye!=ce&&(De[ce]=_d(De[ce]||$e,d[Ye],p,y));return vd(ho(De,1),p,y)}function __(d,p,y){for(var F=-1,ce=d.length,De=p.length,$e={};++F<ce;)y($e,d[F],F<De?p[F]:J);return $e}function wd(d){return Gi(d)?d:[]}function o0(d){return"function"==typeof d?d:Qo}function Ed(d,p){return Rn(d)?d:oc(d,p)?[d]:uD(Jr(d))}var nO=br;function bl(d,p,y){var F=d.length;return y=y===J?F:y,!p&&y>=F?d:po(d,p,y)}var rO=PS||function(d){return Zr.clearTimeout(d)};function y_(d,p){if(p)return d.slice();var y=d.length,F=NS?NS(y):new d.constructor(y);return d.copy(F),F}function Mh(d){var p=new d.constructor(d.byteLength);return new jf(p).set(new jf(d)),p}function a0(d,p){var y=p?Mh(d.buffer):d.buffer;return new d.constructor(y,d.byteOffset,d.length)}function Cd(d,p){if(d!==p){var y=d!==J,F=null===d,ce=d==d,De=dc(d),$e=p!==J,Ye=null===p,ct=p==p,Nt=dc(p);if(!Ye&&!Nt&&!De&&d>p||De&&$e&&ct&&!Ye&&!Nt||F&&$e&&ct||!y&&ct||!ce)return 1;if(!F&&!De&&!Nt&&d<p||Nt&&y&&ce&&!F&&!De||Ye&&y&&ce||!$e&&ce||!ct)return-1}return 0}function Zf(d,p,y,F){for(var ce=-1,De=d.length,$e=y.length,Ye=-1,ct=p.length,Nt=hs(De-$e,0),Pt=_t(ct+Nt),jt=!F;++Ye<ct;)Pt[Ye]=p[Ye];for(;++ce<$e;)(jt||ce<De)&&(Pt[y[ce]]=d[ce]);for(;Nt--;)Pt[Ye++]=d[ce++];return Pt}function qS(d,p,y,F){for(var ce=-1,De=d.length,$e=-1,Ye=y.length,ct=-1,Nt=p.length,Pt=hs(De-Ye,0),jt=_t(Pt+Nt),nn=!F;++ce<Pt;)jt[ce]=d[ce];for(var Cn=ce;++ct<Nt;)jt[Cn+ct]=p[ct];for(;++$e<Ye;)(nn||ce<De)&&(jt[Cn+y[$e]]=d[ce++]);return jt}function Yo(d,p){var y=-1,F=d.length;for(p||(p=_t(F));++y<F;)p[y]=d[y];return p}function jc(d,p,y,F){var ce=!y;y||(y={});for(var De=-1,$e=p.length;++De<$e;){var Ye=p[De],ct=F?F(y[Ye],d[Ye],Ye,y,d):J;ct===J&&(ct=d[Ye]),ce?_l(y,Ye,ct):ml(y,Ye,ct)}return y}function Ds(d,p){return function(y,F){var ce=Rn(y)?us:u_,De=p?p():{};return ce(y,d,Ln(F,2),De)}}function pu(d){return br(function(p,y){var F=-1,ce=y.length,De=ce>1?y[ce-1]:J,$e=ce>2?y[2]:J;for(De=d.length>3&&"function"==typeof De?(ce--,De):J,$e&&Lo(y[0],y[1],$e)&&(De=ce<3?J:De,ce=1),p=ci(p);++F<ce;){var Ye=y[F];Ye&&d(p,Ye,F,De)}return p})}function vl(d,p){return function(y,F){if(null==y)return y;if(!ua(y))return d(y,F);for(var ce=y.length,De=p?ce:-1,$e=ci(y);(p?De--:++De<ce)&&!1!==F($e[De],De,$e););return y}}function YS(d){return function(p,y,F){for(var ce=-1,De=ci(p),$e=F(p),Ye=$e.length;Ye--;){var ct=$e[d?Ye:++ce];if(!1===y(De[ct],ct,De))break}return p}}function b_(d){return function(p){var y=ag(p=Jr(p))?fl(p):J,F=y?y[0]:p.charAt(0),ce=y?bl(y,1).join(""):p.slice(1);return F[d]()+ce}}function gu(d){return function(p){return yh(nw(K0(p).replace(Zm,"")),d,"")}}function ep(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var y=Eh(d.prototype),F=d.apply(y,p);return Wi(F)?F:y}}function XS(d){return function(p,y,F){var ce=ci(p);if(!ua(p)){var De=Ln(y,3);p=mo(p),y=function(Ye){return De(ce[Ye],Ye,ce)}}var $e=d(p,y,F);return $e>-1?ce[De?p[$e]:$e]:J}}function Rh(d){return wl(function(p){var y=p.length,F=y,ce=Ma.prototype.thru;for(d&&p.reverse();F--;){var De=p[F];if("function"!=typeof De)throw new Pc(Te);if(ce&&!$e&&"wrapper"==D_(De))var $e=new Ma([],!0)}for(F=$e?F:y;++F<y;){var Ye=D_(De=p[F]),ct="wrapper"==Ye?d0(De):J;$e=ct&&x_(ct[0])&&424==ct[1]&&!ct[4].length&&1==ct[9]?$e[D_(ct[0])].apply($e,ct[3]):1==De.length&&x_(De)?$e[Ye]():$e.thru(De)}return function(){var Nt=arguments,Pt=Nt[0];if($e&&1==Nt.length&&Rn(Pt))return $e.plant(Pt).value();for(var jt=0,nn=y?p[jt].apply(this,Nt):Pt;++jt<y;)nn=p[jt].call(this,nn);return nn}})}function Sd(d,p,y,F,ce,De,$e,Ye,ct,Nt){var Pt=p&G,jt=1&p,nn=2&p,Cn=24&p,Bn=512&p,vr=nn?J:ep(d);return function jn(){for(var wr=arguments.length,Lr=_t(wr),ha=wr;ha--;)Lr[ha]=arguments[ha];if(Cn)var Bo=np(jn),hc=BH(Lr,Bo);if(F&&(Lr=Zf(Lr,F,ce,Cn)),De&&(Lr=qS(Lr,De,$e,Cn)),wr-=hc,Cn&&wr<Nt){var ei=bh(Lr,Bo);return JS(d,p,Sd,jn.placeholder,y,Lr,ei,Ye,ct,Nt-wr)}var Al=jt?y:this,Md=nn?Al[d]:d;return wr=Lr.length,Ye?Lr=gO(Lr,Ye):Bn&&wr>1&&Lr.reverse(),Pt&&ct<wr&&(Lr.length=ct),this&&this!==Zr&&this instanceof jn&&(Md=vr||ep(Md)),Md.apply(Al,Lr)}}function QS(d,p){return function(y,F){return function(d,p,y,F){return yl(d,function(ce,De,$e){p(F,y(ce),De,$e)}),F}(y,d,p(F),{})}}function c0(d,p){return function(y,F){var ce;if(y===J&&F===J)return p;if(y!==J&&(ce=y),F!==J){if(ce===J)return F;"string"==typeof y||"string"==typeof F?(y=Ra(y),F=Ra(F)):(y=WS(y),F=WS(F)),ce=d(y,F)}return ce}}function v_(d){return wl(function(p){return p=oi(p,ec(Ln())),br(function(y){var F=this;return d(p,function(ce){return Fs(ce,F,y)})})})}function w_(d,p){var y=(p=p===J?" ":Ra(p)).length;if(y<2)return y?p_(p,d):p;var F=p_(p,Bt(d/cg(p)));return ag(p)?bl(fl(F),0,d).join(""):F.slice(0,d)}function ZS(d){return function(p,y,F){return F&&"number"!=typeof F&&Lo(p,y,F)&&(y=F=J),p=xl(p),y===J?(y=p,p=0):y=xl(y),function(d,p,y,F){for(var ce=-1,De=hs(Bt((p-d)/(y||1)),0),$e=_t(De);De--;)$e[F?De:++ce]=d,d+=y;return $e}(p,y,F=F===J?p<y?1:-1:xl(F),d)}}function E_(d){return function(p,y){return"string"==typeof p&&"string"==typeof y||(p=da(p),y=da(y)),d(p,y)}}function JS(d,p,y,F,ce,De,$e,Ye,ct,Nt){var Pt=8&p;p|=Pt?U:64,4&(p&=~(Pt?64:U))||(p&=-4);var vr=[d,p,ce,Pt?De:J,Pt?$e:J,Pt?J:De,Pt?J:$e,Ye,ct,Nt],jn=y.apply(J,vr);return x_(d)&&lD(jn,vr),jn.placeholder=F,Ag(jn,d,p)}function tp(d){var p=Ss[d];return function(y,F){if(y=da(y),(F=null==F?0:Xs(sr(F),292))&&jv(y)){var ce=(Jr(y)+"e").split("e");return+((ce=(Jr(p(ce[0]+"e"+(+ce[1]+F)))+"e").split("e"))[0]+"e"+(+ce[1]-F))}return p(y)}}var l0=kc&&1/Nv(new kc([,-0]))[1]==oe?function(d){return new kc(d)}:aw;function Oh(d){return function(p){var y=ko(p);return y==Ve?IS(p):y==pt?function(st){var Mt=-1,_t=Array(st.size);return st.forEach(function(fn){_t[++Mt]=[fn,fn]}),_t}(p):function(st,Mt){return oi(Mt,function(_t){return[_t,st[_t]]})}(p,d(p))}}function mu(d,p,y,F,ce,De,$e,Ye){var ct=2&p;if(!ct&&"function"!=typeof d)throw new Pc(Te);var Nt=F?F.length:0;if(Nt||(p&=-97,F=ce=J),$e=$e===J?$e:hs(sr($e),0),Ye=Ye===J?Ye:sr(Ye),Nt-=ce?ce.length:0,64&p){var Pt=F,jt=ce;F=ce=J}var nn=ct?J:d0(d),Cn=[d,p,y,F,ce,Pt,jt,De,$e,Ye];if(nn&&function(d,p){var y=d[1],F=p[1],ce=y|F;if(!(ce<131||(F==G&&8==y||F==G&&256==y&&d[7].length<=p[8]||384==F&&p[7].length<=p[8]&&8==y)))return d;1&F&&(d[2]=p[2],ce|=1&y?0:4);var Ye=p[3];if(Ye){var ct=d[3];d[3]=ct?Zf(ct,Ye,p[4]):Ye,d[4]=ct?bh(d[3],B):p[4]}(Ye=p[5])&&(d[5]=(ct=d[5])?qS(ct,Ye,p[6]):Ye,d[6]=ct?bh(d[5],B):p[6]),(Ye=p[7])&&(d[7]=Ye),F&G&&(d[8]=null==d[8]?p[8]:Xs(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=ce}(Cn,nn),d=Cn[0],p=Cn[1],y=Cn[2],F=Cn[3],ce=Cn[4],!(Ye=Cn[9]=Cn[9]===J?ct?0:d.length:hs(Cn[9]-Nt,0))&&24&p&&(p&=-25),p&&1!=p)Bn=8==p||16==p?function(d,p,y){var F=ep(d);return function ce(){for(var De=arguments.length,$e=_t(De),Ye=De,ct=np(ce);Ye--;)$e[Ye]=arguments[Ye];var Nt=De<3&&$e[0]!==ct&&$e[De-1]!==ct?[]:bh($e,ct);return(De-=Nt.length)<y?JS(d,p,Sd,ce.placeholder,J,$e,Nt,J,J,y-De):Fs(this&&this!==Zr&&this instanceof ce?F:d,this,$e)}}(d,p,Ye):p!=U&&33!=p||ce.length?Sd.apply(J,Cn):function(d,p,y,F){var ce=1&p,De=ep(d);return function $e(){for(var Ye=-1,ct=arguments.length,Nt=-1,Pt=F.length,jt=_t(Pt+ct),nn=this&&this!==Zr&&this instanceof $e?De:d;++Nt<Pt;)jt[Nt]=F[Nt];for(;ct--;)jt[Nt++]=arguments[++Ye];return Fs(nn,ce?y:this,jt)}}(d,p,y,F);else var Bn=function(d,p,y){var F=1&p,ce=ep(d);return function De(){return(this&&this!==Zr&&this instanceof De?ce:d).apply(F?y:this,arguments)}}(d,p,y);return Ag((nn?n0:lD)(Bn,Cn),d,p)}function eD(d,p,y,F){return d===J||Mn(d,vh[y])&&!li.call(F,y)?p:d}function oO(d,p,y,F,ce,De){return Wi(d)&&Wi(p)&&(De.set(p,d),t0(d,p,J,oO,De),De.delete(p)),d}function C_(d){return V_(d)?J:d}function S_(d,p,y,F,ce,De){var $e=1&y,Ye=d.length,ct=p.length;if(Ye!=ct&&!($e&&ct>Ye))return!1;var Nt=De.get(d),Pt=De.get(p);if(Nt&&Pt)return Nt==p&&Pt==d;var jt=-1,nn=!0,Cn=2&y?new Lc:J;for(De.set(d,p),De.set(p,d);++jt<Ye;){var Bn=d[jt],vr=p[jt];if(F)var jn=$e?F(vr,Bn,jt,p,d,De):F(Bn,vr,jt,d,p,De);if(jn!==J){if(jn)continue;nn=!1;break}if(Cn){if(!Ta(p,function(wr,Lr){if(!og(Cn,Lr)&&(Bn===wr||ce(Bn,wr,y,F,De)))return Cn.push(Lr)})){nn=!1;break}}else if(Bn!==vr&&!ce(Bn,vr,y,F,De)){nn=!1;break}}return De.delete(d),De.delete(p),nn}function wl(d){return A_(pO(d,J,go),d+"")}function _u(d){return ui(d,mo,h0)}function u0(d){return ui(d,Xo,rD)}var d0=gg?function(d){return gg.get(d)}:aw;function D_(d){for(var p=d.name+"",y=Uf[p],F=li.call(Uf,p)?y.length:0;F--;){var ce=y[F],De=ce.func;if(null==De||De==d)return ce.name}return p}function np(d){return(li.call(Se,"placeholder")?Se:d).placeholder}function Ln(){var d=Se.iteratee||Fh;return d=d===Fh?QR:d,arguments.length?d(arguments[0],arguments[1]):d}function Fo(d,p){var y=d.__data__;return function(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?y["string"==typeof p?"string":"hash"]:y.map}function sc(d){for(var p=mo(d),y=p.length;y--;){var F=p[y],ce=d[F];p[y]=[F,ce,hO(ce)]}return p}function Dd(d,p){var y=function(st,Mt){return null==st?J:st[Mt]}(d,p);return e0(y)?y:J}var h0=es?function(d){return null==d?[]:(d=ci(d),Oc(es(d),function(p){return t_.call(d,p)}))}:Ad,rD=es?function(d){for(var p=[];d;)ds(p,h0(d)),d=Fc(d);return p}:Ad,ko=fo;function sD(d,p,y){for(var F=-1,ce=(p=Ed(p,d)).length,De=!1;++F<ce;){var $e=ur(p[F]);if(!(De=null!=d&&y(d,$e)))break;d=d[$e]}return De||++F!=ce?De:!!(ce=null==d?0:d.length)&&j0(ce)&&Oa($e,ce)&&(Rn(d)||Sl(d))}function oD(d){return"function"!=typeof d.constructor||T_(d)?{}:Eh(Fc(d))}function dO(d){return Rn(d)||Sl(d)||!!(RR&&d&&d[RR])}function Oa(d,p){var y=typeof d;return!!(p=null==p?Ae:p)&&("number"==y||"symbol"!=y&&ii.test(d))&&d>-1&&d%1==0&&d<p}function Lo(d,p,y){if(!Wi(y))return!1;var F=typeof p;return!!("number"==F?ua(y)&&Oa(p,y.length):"string"==F&&p in y)&&Mn(y[p],d)}function oc(d,p){if(Rn(d))return!1;var y=typeof d;return!("number"!=y&&"symbol"!=y&&"boolean"!=y&&null!=d&&!dc(d))||pe.test(d)||!ut.test(d)||null!=p&&d in ci(p)}function x_(d){var p=D_(d),y=Se[p];if("function"!=typeof y||!(p in yr.prototype))return!1;if(d===y)return!0;var F=d0(y);return!!F&&d===F[0]}(uo&&ko(new uo(new ArrayBuffer(1)))!=yt||ca&&ko(new ca)!=Ve||i_&&ko(i_.resolve())!=ue||kc&&ko(new kc)!=pt||Aa&&ko(new Aa)!=V)&&(ko=function(d){var p=fo(d),y=p==we?d.constructor:J,F=y?Nh(y):"";if(F)switch(F){case FR:return yt;case Uv:return Ve;case Hv:return ue;case FS:return pt;case zv:return V}return p});var cD=e_?uc:lw;function T_(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||vh)}function hO(d){return d==d&&!Wi(d)}function fO(d,p){return function(y){return null!=y&&y[d]===p&&(p!==J||d in ci(y))}}function pO(d,p,y){return p=hs(p===J?d.length-1:p,0),function(){for(var F=arguments,ce=-1,De=hs(F.length-p,0),$e=_t(De);++ce<De;)$e[ce]=F[p+ce];ce=-1;for(var Ye=_t(p+1);++ce<p;)Ye[ce]=F[ce];return Ye[p]=y($e),Fs(d,this,Ye)}}function m0(d,p){return p.length<2?d:tc(d,po(p,0,-1))}function gO(d,p){for(var y=d.length,F=Xs(p.length,y),ce=Yo(d);F--;){var De=p[F];d[F]=Oa(De,y)?ce[De]:J}return d}function _0(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var lD=y0(n0),Tg=NR||function(d,p){return Zr.setTimeout(d,p)},A_=y0(Ia);function Ag(d,p,y){var F=p+"";return A_(d,function(d,p){var y=p.length;if(!y)return d;var F=y-1;return p[F]=(y>1?"& ":"")+p[F],p=p.join(y>2?", ":" "),d.replace(Dt,"{\n/* [wrapped with "+p+"] */\n")}(F,function(d,p){return Oo(nt,function(y){var F="_."+y[0];p&y[1]&&!uu(d,F)&&d.push(F)}),d.sort()}(function(d){var p=d.match(At);return p?p[1].split(Xt):[]}(F),y)))}function y0(d){var p=0,y=0;return function(){var F=YH(),ce=16-(F-y);if(y=F,ce>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(J,arguments)}}function rp(d,p){var y=-1,F=d.length,ce=F-1;for(p=p===J?F:p;++y<p;){var De=fu(y,ce),$e=d[De];d[De]=d[y],d[y]=$e}return d.length=p,d}var p,y,uD=(p=Ng(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(ve,function(y,F,ce,De){p.push(ce?De.replace(Pn,"$1"):F||y)}),p},function(F){return 500===y.size&&y.clear(),F}),y=p.cache,p);function ur(d){if("string"==typeof d||dc(d))return d;var p=d+"";return"0"==p&&1/d==-oe?"-0":p}function Nh(d){if(null!=d){try{return $i.call(d)}catch(p){}try{return d+""}catch(p){}}return""}function M_(d){if(d instanceof yr)return d.clone();var p=new Ma(d.__wrapped__,d.__chain__);return p.__actions__=Yo(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var bO=br(function(d,p){return Gi(d)?_d(d,ho(p,1,Gi,!0)):[]}),vO=br(function(d,p){var y=ac(p);return Gi(y)&&(y=J),Gi(d)?_d(d,ho(p,1,Gi,!0),Ln(y,2)):[]}),wO=br(function(d,p){var y=ac(p);return Gi(y)&&(y=J),Gi(d)?_d(d,ho(p,1,Gi,!0),J,y):[]});function v0(d,p,y){var F=null==d?0:d.length;if(!F)return-1;var ce=null==y?0:sr(y);return ce<0&&(ce=hs(F+ce,0)),kf(d,Ln(p,3),ce)}function w0(d,p,y){var F=null==d?0:d.length;if(!F)return-1;var ce=F-1;return y!==J&&(ce=sr(y),ce=y<0?hs(F+ce,0):Xs(ce,F-1)),kf(d,Ln(p,3),ce,!0)}function go(d){return null!=d&&d.length?ho(d,1):[]}function hD(d){return d&&d.length?d[0]:J}var pD=br(function(d){var p=oi(d,wd);return p.length&&p[0]===d[0]?Sh(p):[]}),SO=br(function(d){var p=ac(d),y=oi(d,wd);return p===ac(y)?p=J:y.pop(),y.length&&y[0]===d[0]?Sh(y,Ln(p,2)):[]}),gD=br(function(d){var p=ac(d),y=oi(d,wd);return(p="function"==typeof p?p:J)&&y.pop(),y.length&&y[0]===d[0]?Sh(y,J,p):[]});function ac(d){var p=null==d?0:d.length;return p?d[p-1]:J}var C0=br(S0);function S0(d,p){return d&&d.length&&p&&p.length?ic(d,p):d}var _D=wl(function(d,p){var y=null==d?0:d.length,F=Kv(d,p);return Sg(d,oi(p,function(ce){return Oa(ce,y)?+ce:ce}).sort(Cd)),F});function D0(d){return null==d?d:r_.call(d)}var vD=br(function(d){return vd(ho(d,1,Gi,!0))}),kO=br(function(d){var p=ac(d);return Gi(p)&&(p=J),vd(ho(d,1,Gi,!0),Ln(p,2))}),LO=br(function(d){var p=ac(d);return p="function"==typeof p?p:J,vd(ho(d,1,Gi,!0),J,p)});function wD(d){if(!d||!d.length)return[];var p=0;return d=Oc(d,function(y){if(Gi(y))return p=hs(y.length,p),!0}),Bf(p,function(y){return oi(d,Iv(y))})}function VO(d,p){if(!d||!d.length)return[];var y=wD(d);return null==p?y:oi(y,function(F){return Fs(p,J,F)})}var ED=br(function(d,p){return Gi(d)?_d(d,p):[]}),f8=br(function(d){return Ah(Oc(d,Gi))}),Na=br(function(d){var p=ac(d);return Gi(p)&&(p=J),Ah(Oc(d,Gi),Ln(p,2))}),x0=br(function(d){var p=ac(d);return p="function"==typeof p?p:J,Ah(Oc(d,Gi),J,p)}),T0=br(wD),Rg=br(function(d){var p=d.length,y=p>1?d[p-1]:J;return y="function"==typeof y?(d.pop(),y):J,VO(d,y)});function A0(d){var p=Se(d);return p.__chain__=!0,p}function sp(d,p){return p(d)}var M0=wl(function(d){var p=d.length,y=p?d[0]:0,F=this.__wrapped__,ce=function(De){return Kv(De,d)};return!(p>1||this.__actions__.length)&&F instanceof yr&&Oa(y)?((F=F.slice(y,+y+(p?1:0))).__actions__.push({func:sp,args:[ce],thisArg:J}),new Ma(F,this.__chain__).thru(function(De){return p&&!De.length&&De.push(J),De})):this.thru(ce)}),HO=Ds(function(d,p,y){li.call(d,y)?++d[y]:_l(d,y,1)}),GO=XS(v0),WO=XS(w0);function N0(d,p){return(Rn(d)?Oo:yd)(d,Ln(p,3))}function O_(d,p){return(Rn(d)?Pf:Qv)(d,Ln(p,3))}var YO=Ds(function(d,p,y){li.call(d,y)?d[y].push(p):_l(d,y,[p])}),AD=br(function(d,p,y){var F=-1,ce="function"==typeof p,De=ua(d)?_t(d.length):[];return yd(d,function($e){De[++F]=ce?Fs(p,$e,y):Vc($e,p,y)}),De}),MD=Ds(function(d,p,y){_l(d,y,p)});function Cl(d,p){return(Rn(d)?oi:ZR)(d,Ln(p,3))}var RD=Ds(function(d,p,y){d[y?0:1].push(p)},function(){return[[],[]]}),P_=br(function(d,p){if(null==d)return[];var y=p.length;return y>1&&Lo(d,p[0],p[1])?p=[]:y>2&&Lo(p[0],p[1],p[2])&&(p=[p[0]]),Cg(d,ho(p,1),[])}),Ph=OR||function(){return Zr.Date.now()};function F_(d,p,y){return p=y?J:p,mu(d,G,J,J,J,J,p=d&&null==p?d.length:p)}function F0(d,p){var y;if("function"!=typeof p)throw new Pc(Te);return d=sr(d),function(){return--d>0&&(y=p.apply(this,arguments)),d<=1&&(p=J),y}}var Og=br(function(d,p,y){var F=1;if(y.length){var ce=bh(y,np(Og));F|=U}return mu(d,F,p,y,ce)}),ap=br(function(d,p,y){var F=3;if(y.length){var ce=bh(y,np(ap));F|=U}return mu(p,F,d,y,ce)});function BD(d,p,y){var F,ce,De,$e,Ye,ct,Nt=0,Pt=!1,jt=!1,nn=!0;if("function"!=typeof d)throw new Pc(Te);function Cn(ei){var Al=F,Md=ce;return F=ce=J,Nt=ei,$e=d.apply(Md,Al)}function Bn(ei){return Nt=ei,Ye=Tg(wr,p),Pt?Cn(ei):$e}function jn(ei){var Al=ei-ct;return ct===J||Al>=p||Al<0||jt&&ei-Nt>=De}function wr(){var ei=Ph();if(jn(ei))return Lr(ei);Ye=Tg(wr,function(ei){var nP=p-(ei-ct);return jt?Xs(nP,De-(ei-Nt)):nP}(ei))}function Lr(ei){return Ye=J,nn&&F?Cn(ei):(F=ce=J,$e)}function hc(){var ei=Ph(),Al=jn(ei);if(F=arguments,ce=this,ct=ei,Al){if(Ye===J)return Bn(ct);if(jt)return rO(Ye),Ye=Tg(wr,p),Cn(ct)}return Ye===J&&(Ye=Tg(wr,p)),$e}return p=da(p)||0,Wi(y)&&(Pt=!!y.leading,De=(jt="maxWait"in y)?hs(da(y.maxWait)||0,p):De,nn="trailing"in y?!!y.trailing:nn),hc.cancel=function(){Ye!==J&&rO(Ye),Nt=0,F=ct=ce=Ye=J},hc.flush=function(){return Ye===J?$e:Lr(Ph())},hc}var ZO=br(function(d,p){return vg(d,1,p)}),VD=br(function(d,p,y){return vg(d,da(p)||0,y)});function Ng(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new Pc(Te);var y=function(){var F=arguments,ce=p?p.apply(this,F):F[0],De=y.cache;if(De.has(ce))return De.get(ce);var $e=d.apply(this,F);return y.cache=De.set(ce,$e)||De,$e};return y.cache=new(Ng.Cache||gl),y}function B0(d){if("function"!=typeof d)throw new Pc(Te);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}Ng.Cache=gl;var JO=nO(function(d,p){var y=(p=1==p.length&&Rn(p[0])?oi(p[0],ec(Ln())):oi(ho(p,1),ec(Ln()))).length;return br(function(F){for(var ce=-1,De=Xs(F.length,y);++ce<De;)F[ce]=p[ce].call(this,F[ce]);return Fs(d,this,F)})}),k_=br(function(d,p){var y=bh(p,np(k_));return mu(d,U,J,p,y)}),UD=br(function(d,p){var y=bh(p,np(UD));return mu(d,64,J,p,y)}),eN=wl(function(d,p){return mu(d,256,J,J,J,p)});function Mn(d,p){return d===p||d!=d&&p!=p}var Qt=E_(nc),$D=E_(function(d,p){return d>=p}),Sl=YR(function(){return arguments}())?YR:function(d){return qi(d)&&li.call(d,"callee")&&!t_.call(d,"callee")},Rn=_t.isArray,GD=sn?ec(sn):function(d){return qi(d)&&fo(d)==Xe};function ua(d){return null!=d&&j0(d.length)&&!uc(d)}function Gi(d){return qi(d)&&ua(d)}var Dl=ks||lw,WD=_r?ec(_r):function(d){return qi(d)&&fo(d)==Le};function Hc(d){if(!qi(d))return!1;var p=fo(d);return p==Ne||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!V_(d)}function uc(d){if(!Wi(d))return!1;var p=fo(d);return p==ze||p==qe||"[object AsyncFunction]"==p||"[object Proxy]"==p}function B_(d){return"number"==typeof d&&d==sr(d)}function j0(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Ae}function Wi(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function qi(d){return null!=d&&"object"==typeof d}var lN=Ai?ec(Ai):function(d){return qi(d)&&ko(d)==Ve};function hN(d){return"number"==typeof d||qi(d)&&fo(d)==$}function V_(d){if(!qi(d)||fo(d)!=we)return!1;var p=Fc(d);if(null===p)return!0;var y=li.call(p,"constructor")&&p.constructor;return"function"==typeof y&&y instanceof y&&$i.call(y)==IR}var XD=aa?ec(aa):function(d){return qi(d)&&fo(d)==Et},fN=fd?ec(fd):function(d){return qi(d)&&ko(d)==pt};function H0(d){return"string"==typeof d||!Rn(d)&&qi(d)&&fo(d)==ge}function dc(d){return"symbol"==typeof d||qi(d)&&fo(d)==j}var Pg=Ps?ec(Ps):function(d){return qi(d)&&j0(d.length)&&!!wn[fo(d)]},xd=E_(zS),z0=E_(function(d,p){return d<=p});function QD(d){if(!d)return[];if(ua(d))return H0(d)?fl(d):Yo(d);if(dg&&d[dg])return function(st){for(var Mt,_t=[];!(Mt=st.next()).done;)_t.push(Mt.value);return _t}(d[dg]());var p=ko(d);return(p==Ve?IS:p==pt?Nv:hp)(d)}function xl(d){return d?(d=da(d))===oe||d===-oe?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function sr(d){var p=xl(d),y=p%1;return p==p?y?p-y:p:0}function $0(d){return d?Ch(sr(d),0,be):0}function da(d){if("number"==typeof d)return d;if(dc(d))return NaN;if(Wi(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=Wi(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=MS(d);var y=wi.test(d);return y||er.test(d)?AS(d.slice(2),y?2:8):xn.test(d)?NaN:+d}function ZD(d){return jc(d,Xo(d))}function Jr(d){return null==d?"":Ra(d)}var pN=pu(function(d,p){if(T_(p)||ua(p))jc(p,mo(p),d);else for(var y in p)li.call(p,y)&&ml(d,y,p[y])}),gN=pu(function(d,p){jc(p,Xo(p),d)}),cp=pu(function(d,p,y,F){jc(p,Xo(p),d,F)}),mN=pu(function(d,p,y,F){jc(p,mo(p),d,F)}),JD=wl(Kv),yN=br(function(d,p){d=ci(d);var y=-1,F=p.length,ce=F>2?p[2]:J;for(ce&&Lo(p[0],p[1],ce)&&(F=1);++y<F;)for(var De=p[y],$e=Xo(De),Ye=-1,ct=$e.length;++Ye<ct;){var Nt=$e[Ye],Pt=d[Nt];(Pt===J||Mn(Pt,vh[Nt])&&!li.call(d,Nt))&&(d[Nt]=De[Nt])}return d}),Fg=br(function(d){return d.push(J,oO),Fs(sx,J,d)});function Lg(d,p,y){var F=null==d?J:tc(d,p);return F===J?y:F}function j_(d,p){return null!=d&&sD(d,p,Yf)}var U_=QS(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=Wo.call(p)),d[p]=y},iw(Qo)),vN=QS(function(d,p,y){null!=p&&"function"!=typeof p.toString&&(p=Wo.call(p)),li.call(d,p)?d[p].push(y):d[p]=[y]},Ln),nx=br(Vc);function mo(d){return ua(d)?bg(d):HS(d)}function Xo(d){return ua(d)?bg(d,!0):function(d){if(!Wi(d))return function(d){var p=[];if(null!=d)for(var y in ci(d))p.push(y);return p}(d);var p=T_(d),y=[];for(var F in d)"constructor"==F&&(p||!li.call(d,F))||y.push(F);return y}(d)}var ix=pu(function(d,p,y){t0(d,p,y)}),sx=pu(function(d,p,y,F){t0(d,p,y,F)}),EN=wl(function(d,p){var y={};if(null==d)return y;var F=!1;p=oi(p,function(De){return De=Ed(De,d),F||(F=De.length>1),De}),jc(d,u0(d),y),F&&(y=Po(y,7,C_));for(var ce=p.length;ce--;)xh(y,p[ce]);return y}),CN=wl(function(d,p){return null==d?{}:function(d,p){return $S(d,p,function(y,F){return j_(d,F)})}(d,p)});function ox(d,p){if(null==d)return{};var y=oi(u0(d),function(F){return[F]});return p=Ln(p),$S(d,y,function(F,ce){return p(F,ce[0])})}var SN=Oh(mo),cx=Oh(Xo);function hp(d){return null==d?[]:Ov(d,mo(d))}var MN=gu(function(d,p,y){return p=p.toLowerCase(),d+(y?Y0(p):p)});function Y0(d){return z_(Jr(d).toLowerCase())}function K0(d){return(d=Jr(d))&&d.replace(Mc,VH).replace(Av,"")}var RN=gu(function(d,p,y){return d+(y?"-":"")+p.toLowerCase()}),ON=gu(function(d,p,y){return d+(y?" ":"")+p.toLowerCase()}),S8=b_("toLowerCase"),LN=gu(function(d,p,y){return d+(y?"_":"")+p.toLowerCase()}),Z0=gu(function(d,p,y){return d+(y?" ":"")+z_(p)}),px=gu(function(d,p,y){return d+(y?" ":"")+p.toUpperCase()}),z_=b_("toUpperCase");function nw(d,p,y){return d=Jr(d),(p=y?J:p)===J?function(st){return cu.test(st)}(d)?function(st){return st.match(SS)||[]}(d):function(st){return st.match(Gn)||[]}(d):d.match(p)||[]}var rw=br(function(d,p){try{return Fs(d,J,p)}catch(y){return Hc(y)?y:new An(y)}}),gx=wl(function(d,p){return Oo(p,function(y){y=ur(y),_l(d,y,Og(d[y],d))}),d});function iw(d){return function(){return d}}var x8=Rh(),fp=Rh(!0);function Qo(d){return d}function Fh(d){return QR("function"==typeof d?d:Po(d,1))}var sw=br(function(d,p){return function(y){return Vc(y,d,p)}}),mx=br(function(d,p){return function(y){return Vc(d,y,p)}});function ow(d,p,y){var F=mo(p),ce=Eg(p,F);null==y&&(!Wi(p)||!ce.length&&F.length)&&(y=p,p=d,d=this,ce=Eg(p,mo(p)));var De=!(Wi(y)&&"chain"in y&&!y.chain),$e=uc(d);return Oo(ce,function(Ye){var ct=p[Ye];d[Ye]=ct,$e&&(d.prototype[Ye]=function(){var Nt=this.__chain__;if(De||Nt){var Pt=d(this.__wrapped__),jt=Pt.__actions__=Yo(this.__actions__);return jt.push({func:ct,args:arguments,thisArg:d}),Pt.__chain__=Nt,Pt}return ct.apply(d,ds([this.value()],arguments))})}),d}function aw(){}var $N=v_(oi),GN=v_(lr),yx=v_(Ta);function kh(d){return oc(d)?Iv(ur(d)):function(d){return function(p){return tc(p,d)}}(d)}var WN=ZS(),qN=ZS(!0);function Ad(){return[]}function lw(){return!1}var Wn=c0(function(d,p){return d+p},0),uw=tp("ceil"),A8=c0(function(d,p){return d/p},1),vu=tp("floor"),Ex=c0(function(d,p){return d*p},1),Cx=tp("round"),Sx=c0(function(d,p){return d-p},0);return Se.after=function(d,p){if("function"!=typeof p)throw new Pc(Te);return d=sr(d),function(){if(--d<1)return p.apply(this,arguments)}},Se.ary=F_,Se.assign=pN,Se.assignIn=gN,Se.assignInWith=cp,Se.assignWith=mN,Se.at=JD,Se.before=F0,Se.bind=Og,Se.bindAll=gx,Se.bindKey=ap,Se.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return Rn(d)?d:[d]},Se.chain=A0,Se.chunk=function(d,p,y){p=(y?Lo(d,p,y):p===J)?1:hs(sr(p),0);var F=null==d?0:d.length;if(!F||p<1)return[];for(var ce=0,De=0,$e=_t(Bt(F/p));ce<F;)$e[De++]=po(d,ce,ce+=p);return $e},Se.compact=function(d){for(var p=-1,y=null==d?0:d.length,F=0,ce=[];++p<y;){var De=d[p];De&&(ce[F++]=De)}return ce},Se.concat=function(){var d=arguments.length;if(!d)return[];for(var p=_t(d-1),y=arguments[0],F=d;F--;)p[F-1]=arguments[F];return ds(Rn(y)?Yo(y):[y],ho(p,1))},Se.cond=function(d){var p=null==d?0:d.length,y=Ln();return d=p?oi(d,function(F){if("function"!=typeof F[1])throw new Pc(Te);return[y(F[0]),F[1]]}):[],br(function(F){for(var ce=-1;++ce<p;){var De=d[ce];if(Fs(De[0],this,F))return Fs(De[1],this,F)}})},Se.conforms=function(d){return function(d){var p=mo(d);return function(y){return d_(y,d,p)}}(Po(d,1))},Se.constant=iw,Se.countBy=HO,Se.create=function(d,p){var y=Eh(d);return null==p?y:qR(y,p)},Se.curry=function LD(d,p,y){var F=mu(d,8,J,J,J,J,J,p=y?J:p);return F.placeholder=LD.placeholder,F},Se.curryRight=function k0(d,p,y){var F=mu(d,16,J,J,J,J,J,p=y?J:p);return F.placeholder=k0.placeholder,F},Se.debounce=BD,Se.defaults=yN,Se.defaultsDeep=Fg,Se.defer=ZO,Se.delay=VD,Se.difference=bO,Se.differenceBy=vO,Se.differenceWith=wO,Se.drop=function(d,p,y){var F=null==d?0:d.length;return F?po(d,(p=y||p===J?1:sr(p))<0?0:p,F):[]},Se.dropRight=function(d,p,y){var F=null==d?0:d.length;return F?po(d,0,(p=F-(p=y||p===J?1:sr(p)))<0?0:p):[]},Se.dropRightWhile=function(d,p){return d&&d.length?Th(d,Ln(p,3),!0,!0):[]},Se.dropWhile=function(d,p){return d&&d.length?Th(d,Ln(p,3),!0):[]},Se.fill=function(d,p,y,F){var ce=null==d?0:d.length;return ce?(y&&"number"!=typeof y&&Lo(d,p,y)&&(y=0,F=ce),function(d,p,y,F){var ce=d.length;for((y=sr(y))<0&&(y=-y>ce?0:ce+y),(F=F===J||F>ce?ce:sr(F))<0&&(F+=ce),F=y>F?0:$0(F);y<F;)d[y++]=p;return d}(d,p,y,F)):[]},Se.filter=function(d,p){return(Rn(d)?Oc:US)(d,Ln(p,3))},Se.flatMap=function(d,p){return ho(Cl(d,p),1)},Se.flatMapDeep=function(d,p){return ho(Cl(d,p),oe)},Se.flatMapDepth=function(d,p,y){return y=y===J?1:sr(y),ho(Cl(d,p),y)},Se.flatten=go,Se.flattenDeep=function(d){return null!=d&&d.length?ho(d,oe):[]},Se.flattenDepth=function(d,p){return null!=d&&d.length?ho(d,p=p===J?1:sr(p)):[]},Se.flip=function(d){return mu(d,512)},Se.flow=x8,Se.flowRight=fp,Se.fromPairs=function(d){for(var p=-1,y=null==d?0:d.length,F={};++p<y;){var ce=d[p];F[ce[0]]=ce[1]}return F},Se.functions=function(d){return null==d?[]:Eg(d,mo(d))},Se.functionsIn=function(d){return null==d?[]:Eg(d,Xo(d))},Se.groupBy=YO,Se.initial=function(d){return null!=d&&d.length?po(d,0,-1):[]},Se.intersection=pD,Se.intersectionBy=SO,Se.intersectionWith=gD,Se.invert=U_,Se.invertBy=vN,Se.invokeMap=AD,Se.iteratee=Fh,Se.keyBy=MD,Se.keys=mo,Se.keysIn=Xo,Se.map=Cl,Se.mapKeys=function(d,p){var y={};return p=Ln(p,3),yl(d,function(F,ce,De){_l(y,p(F,ce,De),F)}),y},Se.mapValues=function(d,p){var y={};return p=Ln(p,3),yl(d,function(F,ce,De){_l(y,ce,p(F,ce,De))}),y},Se.matches=function(d){return JR(Po(d,1))},Se.matchesProperty=function(d,p){return Xf(d,Po(p,1))},Se.memoize=Ng,Se.merge=ix,Se.mergeWith=sx,Se.method=sw,Se.methodOf=mx,Se.mixin=ow,Se.negate=B0,Se.nthArg=function(d){return d=sr(d),br(function(p){return Dh(p,d)})},Se.omit=EN,Se.omitBy=function(d,p){return ox(d,B0(Ln(p)))},Se.once=function(d){return F0(2,d)},Se.orderBy=function(d,p,y,F){return null==d?[]:(Rn(p)||(p=null==p?[]:[p]),Rn(y=F?J:y)||(y=null==y?[]:[y]),Cg(d,p,y))},Se.over=$N,Se.overArgs=JO,Se.overEvery=GN,Se.overSome=yx,Se.partial=k_,Se.partialRight=UD,Se.partition=RD,Se.pick=CN,Se.pickBy=ox,Se.property=kh,Se.propertyOf=function(d){return function(p){return null==d?J:tc(d,p)}},Se.pull=C0,Se.pullAll=S0,Se.pullAllBy=function(d,p,y){return d&&d.length&&p&&p.length?ic(d,p,Ln(y,2)):d},Se.pullAllWith=function(d,p,y){return d&&d.length&&p&&p.length?ic(d,p,J,y):d},Se.pullAt=_D,Se.range=WN,Se.rangeRight=qN,Se.rearg=eN,Se.reject=function(d,p){return(Rn(d)?Oc:US)(d,B0(Ln(p,3)))},Se.remove=function(d,p){var y=[];if(!d||!d.length)return y;var F=-1,ce=[],De=d.length;for(p=Ln(p,3);++F<De;){var $e=d[F];p($e,F,d)&&(y.push($e),ce.push(F))}return Sg(d,ce),y},Se.rest=function(d,p){if("function"!=typeof d)throw new Pc(Te);return br(d,p=p===J?p:sr(p))},Se.reverse=D0,Se.sampleSize=function(d,p,y){return p=(y?Lo(d,p,y):p===J)?1:sr(p),(Rn(d)?LS:r8)(d,p)},Se.set=function(d,p,y){return null==d?d:g_(d,p,y)},Se.setWith=function(d,p,y,F){return F="function"==typeof F?F:J,null==d?d:g_(d,p,y,F)},Se.shuffle=function(d){return(Rn(d)?zf:r0)(d)},Se.slice=function(d,p,y){var F=null==d?0:d.length;return F?(y&&"number"!=typeof y&&Lo(d,p,y)?(p=0,y=F):(p=null==p?0:sr(p),y=y===J?F:sr(y)),po(d,p,y)):[]},Se.sortBy=P_,Se.sortedUniq=function(d){return d&&d.length?GS(d):[]},Se.sortedUniqBy=function(d,p){return d&&d.length?GS(d,Ln(p,2)):[]},Se.split=function(d,p,y){return y&&"number"!=typeof y&&Lo(d,p,y)&&(p=y=J),(y=y===J?be:y>>>0)?(d=Jr(d))&&("string"==typeof p||null!=p&&!XD(p))&&!(p=Ra(p))&&ag(d)?bl(fl(d),0,y):d.split(p,y):[]},Se.spread=function(d,p){if("function"!=typeof d)throw new Pc(Te);return p=null==p?0:hs(sr(p),0),br(function(y){var F=y[p],ce=bl(y,0,p);return F&&ds(ce,F),Fs(d,this,ce)})},Se.tail=function(d){var p=null==d?0:d.length;return p?po(d,1,p):[]},Se.take=function(d,p,y){return d&&d.length?po(d,0,(p=y||p===J?1:sr(p))<0?0:p):[]},Se.takeRight=function(d,p,y){var F=null==d?0:d.length;return F?po(d,(p=F-(p=y||p===J?1:sr(p)))<0?0:p,F):[]},Se.takeRightWhile=function(d,p){return d&&d.length?Th(d,Ln(p,3),!1,!0):[]},Se.takeWhile=function(d,p){return d&&d.length?Th(d,Ln(p,3)):[]},Se.tap=function(d,p){return p(d),d},Se.throttle=function(d,p,y){var F=!0,ce=!0;if("function"!=typeof d)throw new Pc(Te);return Wi(y)&&(F="leading"in y?!!y.leading:F,ce="trailing"in y?!!y.trailing:ce),BD(d,p,{leading:F,maxWait:p,trailing:ce})},Se.thru=sp,Se.toArray=QD,Se.toPairs=SN,Se.toPairsIn=cx,Se.toPath=function(d){return Rn(d)?oi(d,ur):dc(d)?[d]:Yo(uD(Jr(d)))},Se.toPlainObject=ZD,Se.transform=function(d,p,y){var F=Rn(d),ce=F||Dl(d)||Pg(d);if(p=Ln(p,4),null==y){var De=d&&d.constructor;y=ce?F?new De:[]:Wi(d)&&uc(De)?Eh(Fc(d)):{}}return(ce?Oo:yl)(d,function($e,Ye,ct){return p(y,$e,Ye,ct)}),y},Se.unary=function(d){return F_(d,1)},Se.union=vD,Se.unionBy=kO,Se.unionWith=LO,Se.uniq=function(d){return d&&d.length?vd(d):[]},Se.uniqBy=function(d,p){return d&&d.length?vd(d,Ln(p,2)):[]},Se.uniqWith=function(d,p){return p="function"==typeof p?p:J,d&&d.length?vd(d,J,p):[]},Se.unset=function(d,p){return null==d||xh(d,p)},Se.unzip=wD,Se.unzipWith=VO,Se.update=function(d,p,y){return null==d?d:m_(d,p,o0(y))},Se.updateWith=function(d,p,y,F){return F="function"==typeof F?F:J,null==d?d:m_(d,p,o0(y),F)},Se.values=hp,Se.valuesIn=function(d){return null==d?[]:Ov(d,Xo(d))},Se.without=ED,Se.words=nw,Se.wrap=function(d,p){return k_(o0(p),d)},Se.xor=f8,Se.xorBy=Na,Se.xorWith=x0,Se.zip=T0,Se.zipObject=function(d,p){return __(d||[],p||[],ml)},Se.zipObjectDeep=function(d,p){return __(d||[],p||[],g_)},Se.zipWith=Rg,Se.entries=SN,Se.entriesIn=cx,Se.extend=gN,Se.extendWith=cp,ow(Se,Se),Se.add=Wn,Se.attempt=rw,Se.camelCase=MN,Se.capitalize=Y0,Se.ceil=uw,Se.clamp=function(d,p,y){return y===J&&(y=p,p=J),y!==J&&(y=(y=da(y))==y?y:0),p!==J&&(p=(p=da(p))==p?p:0),Ch(da(d),p,y)},Se.clone=function(d){return Po(d,4)},Se.cloneDeep=function(d){return Po(d,5)},Se.cloneDeepWith=function(d,p){return Po(d,5,p="function"==typeof p?p:J)},Se.cloneWith=function(d,p){return Po(d,4,p="function"==typeof p?p:J)},Se.conformsTo=function(d,p){return null==p||d_(d,p,mo(p))},Se.deburr=K0,Se.defaultTo=function(d,p){return null==d||d!=d?p:d},Se.divide=A8,Se.endsWith=function(d,p,y){d=Jr(d),p=Ra(p);var F=d.length,ce=y=y===J?F:Ch(sr(y),0,F);return(y-=p.length)>=0&&d.slice(y,ce)==p},Se.eq=Mn,Se.escape=function(d){return(d=Jr(d))&&en.test(d)?d.replace(Ac,jH):d},Se.escapeRegExp=function(d){return(d=Jr(d))&&lt.test(d)?d.replace(Be,"\\$&"):d},Se.every=function(d,p,y){var F=Rn(d)?lr:VS;return y&&Lo(d,p,y)&&(p=J),F(d,Ln(p,3))},Se.find=GO,Se.findIndex=v0,Se.findKey=function(d,p){return sg(d,Ln(p,3),yl)},Se.findLast=WO,Se.findLastIndex=w0,Se.findLastKey=function(d,p){return sg(d,Ln(p,3),h_)},Se.floor=vu,Se.forEach=N0,Se.forEachRight=O_,Se.forIn=function(d,p){return null==d?d:Gf(d,Ln(p,3),Xo)},Se.forInRight=function(d,p){return null==d?d:Wf(d,Ln(p,3),Xo)},Se.forOwn=function(d,p){return d&&yl(d,Ln(p,3))},Se.forOwnRight=function(d,p){return d&&h_(d,Ln(p,3))},Se.get=Lg,Se.gt=Qt,Se.gte=$D,Se.has=function(d,p){return null!=d&&sD(d,p,qf)},Se.hasIn=j_,Se.head=hD,Se.identity=Qo,Se.includes=function(d,p,y,F){d=ua(d)?d:hp(d),y=y&&!F?sr(y):0;var ce=d.length;return y<0&&(y=hs(ce+y,0)),H0(d)?y<=ce&&d.indexOf(p,y)>-1:!!ce&&hl(d,p,y)>-1},Se.indexOf=function(d,p,y){var F=null==d?0:d.length;if(!F)return-1;var ce=null==y?0:sr(y);return ce<0&&(ce=hs(F+ce,0)),hl(d,p,ce)},Se.inRange=function(d,p,y){return p=xl(p),y===J?(y=p,p=0):y=xl(y),function(d,p,y){return d>=Xs(p,y)&&d<hs(p,y)}(d=da(d),p,y)},Se.invoke=nx,Se.isArguments=Sl,Se.isArray=Rn,Se.isArrayBuffer=GD,Se.isArrayLike=ua,Se.isArrayLikeObject=Gi,Se.isBoolean=function(d){return!0===d||!1===d||qi(d)&&fo(d)==je},Se.isBuffer=Dl,Se.isDate=WD,Se.isElement=function(d){return qi(d)&&1===d.nodeType&&!V_(d)},Se.isEmpty=function(d){if(null==d)return!0;if(ua(d)&&(Rn(d)||"string"==typeof d||"function"==typeof d.splice||Dl(d)||Pg(d)||Sl(d)))return!d.length;var p=ko(d);if(p==Ve||p==pt)return!d.size;if(T_(d))return!HS(d).length;for(var y in d)if(li.call(d,y))return!1;return!0},Se.isEqual=function(d,p){return f_(d,p)},Se.isEqualWith=function(d,p,y){var F=(y="function"==typeof y?y:J)?y(d,p):J;return F===J?f_(d,p,J,y):!!F},Se.isError=Hc,Se.isFinite=function(d){return"number"==typeof d&&jv(d)},Se.isFunction=uc,Se.isInteger=B_,Se.isLength=j0,Se.isMap=lN,Se.isMatch=function(d,p){return d===p||Jv(d,p,sc(p))},Se.isMatchWith=function(d,p,y){return y="function"==typeof y?y:J,Jv(d,p,sc(p),y)},Se.isNaN=function(d){return hN(d)&&d!=+d},Se.isNative=function(d){if(cD(d))throw new An("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return e0(d)},Se.isNil=function(d){return null==d},Se.isNull=function(d){return null===d},Se.isNumber=hN,Se.isObject=Wi,Se.isObjectLike=qi,Se.isPlainObject=V_,Se.isRegExp=XD,Se.isSafeInteger=function(d){return B_(d)&&d>=-Ae&&d<=Ae},Se.isSet=fN,Se.isString=H0,Se.isSymbol=dc,Se.isTypedArray=Pg,Se.isUndefined=function(d){return d===J},Se.isWeakMap=function(d){return qi(d)&&ko(d)==V},Se.isWeakSet=function(d){return qi(d)&&"[object WeakSet]"==fo(d)},Se.join=function(d,p){return null==d?"":hg.call(d,p)},Se.kebabCase=RN,Se.last=ac,Se.lastIndexOf=function(d,p,y){var F=null==d?0:d.length;if(!F)return-1;var ce=F;return y!==J&&(ce=(ce=sr(y))<0?hs(F+ce,0):Xs(ce,F-1)),p==p?function(st,Mt,_t){for(var fn=_t+1;fn--;)if(st[fn]===Mt)return fn;return fn}(d,p,ce):kf(d,pd,ce,!0)},Se.lowerCase=ON,Se.lowerFirst=S8,Se.lt=xd,Se.lte=z0,Se.max=function(d){return d&&d.length?wg(d,Qo,nc):J},Se.maxBy=function(d,p){return d&&d.length?wg(d,Ln(p,2),nc):J},Se.mean=function(d){return lo(d,Qo)},Se.meanBy=function(d,p){return lo(d,Ln(p,2))},Se.min=function(d){return d&&d.length?wg(d,Qo,zS):J},Se.minBy=function(d,p){return d&&d.length?wg(d,Ln(p,2),zS):J},Se.stubArray=Ad,Se.stubFalse=lw,Se.stubObject=function(){return{}},Se.stubString=function(){return""},Se.stubTrue=function(){return!0},Se.multiply=Ex,Se.nth=function(d,p){return d&&d.length?Dh(d,sr(p)):J},Se.noConflict=function(){return Zr._===this&&(Zr._=Bv),this},Se.noop=aw,Se.now=Ph,Se.pad=function(d,p,y){d=Jr(d);var F=(p=sr(p))?cg(d):0;if(!p||F>=p)return d;var ce=(p-F)/2;return w_(Tr(ce),y)+d+w_(Bt(ce),y)},Se.padEnd=function(d,p,y){d=Jr(d);var F=(p=sr(p))?cg(d):0;return p&&F<p?d+w_(p-F,y):d},Se.padStart=function(d,p,y){d=Jr(d);var F=(p=sr(p))?cg(d):0;return p&&F<p?w_(p-F,y)+d:d},Se.parseInt=function(d,p,y){return y||null==p?p=0:p&&(p=+p),PR(Jr(d).replace(Qe,""),p||0)},Se.random=function(d,p,y){if(y&&"boolean"!=typeof y&&Lo(d,p,y)&&(p=y=J),y===J&&("boolean"==typeof p?(y=p,p=J):"boolean"==typeof d&&(y=d,d=J)),d===J&&p===J?(d=0,p=1):(d=xl(d),p===J?(p=d,d=0):p=xl(p)),d>p){var F=d;d=p,p=F}if(y||d%1||p%1){var ce=fg();return Xs(d+ce*(p-d+ER("1e-"+((ce+"").length-1))),p)}return fu(d,p)},Se.reduce=function(d,p,y){var F=Rn(d)?yh:Ja,ce=arguments.length<3;return F(d,Ln(p,4),y,ce,yd)},Se.reduceRight=function(d,p,y){var F=Rn(d)?Ff:Ja,ce=arguments.length<3;return F(d,Ln(p,4),y,ce,Qv)},Se.repeat=function(d,p,y){return p=(y?Lo(d,p,y):p===J)?1:sr(p),p_(Jr(d),p)},Se.replace=function(){var d=arguments,p=Jr(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Se.result=function(d,p,y){var F=-1,ce=(p=Ed(p,d)).length;for(ce||(ce=1,d=J);++F<ce;){var De=null==d?J:d[ur(p[F])];De===J&&(F=ce,De=y),d=uc(De)?De.call(d):De}return d},Se.round=Cx,Se.runInContext=st,Se.sample=function(d){return(Rn(d)?qv:eO)(d)},Se.size=function(d){if(null==d)return 0;if(ua(d))return H0(d)?cg(d):d.length;var p=ko(d);return p==Ve||p==pt?d.size:HS(d).length},Se.snakeCase=LN,Se.some=function(d,p,y){var F=Rn(d)?Ta:i8;return y&&Lo(d,p,y)&&(p=J),F(d,Ln(p,3))},Se.sortedIndex=function(d,p){return Dg(d,p)},Se.sortedIndexBy=function(d,p,y){return s0(d,p,Ln(y,2))},Se.sortedIndexOf=function(d,p){var y=null==d?0:d.length;if(y){var F=Dg(d,p);if(F<y&&Mn(d[F],p))return F}return-1},Se.sortedLastIndex=function(d,p){return Dg(d,p,!0)},Se.sortedLastIndexBy=function(d,p,y){return s0(d,p,Ln(y,2),!0)},Se.sortedLastIndexOf=function(d,p){if(null!=d&&d.length){var F=Dg(d,p,!0)-1;if(Mn(d[F],p))return F}return-1},Se.startCase=Z0,Se.startsWith=function(d,p,y){return d=Jr(d),y=null==y?0:Ch(sr(y),0,d.length),p=Ra(p),d.slice(y,y+p.length)==p},Se.subtract=Sx,Se.sum=function(d){return d&&d.length?Lf(d,Qo):0},Se.sumBy=function(d,p){return d&&d.length?Lf(d,Ln(p,2)):0},Se.template=function(d,p,y){var F=Se.templateSettings;y&&Lo(d,p,y)&&(p=J),d=Jr(d),p=cp({},p,F,eD);var Ye,ct,ce=cp({},p.imports,F.imports,eD),De=mo(ce),$e=Ov(ce,De),Nt=0,Pt=p.interpolate||ws,jt="__p += '",nn=kv((p.escape||ws).source+"|"+Pt.source+"|"+(Pt===ot?bn:ws).source+"|"+(p.evaluate||ws).source+"|$","g"),Cn="//# sourceURL="+(li.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wR+"]")+"\n";d.replace(nn,function(jn,wr,Lr,ha,Bo,hc){return Lr||(Lr=ha),jt+=d.slice(Nt,hc).replace(re,UH),wr&&(Ye=!0,jt+="' +\n__e("+wr+") +\n'"),Bo&&(ct=!0,jt+="';\n"+Bo+";\n__p += '"),Lr&&(jt+="' +\n((__t = ("+Lr+")) == null ? '' : __t) +\n'"),Nt=hc+jn.length,jn}),jt+="';\n";var Bn=li.call(p,"variable")&&p.variable;if(Bn){if(pr.test(Bn))throw new An("Invalid `variable` option passed into `_.template`")}else jt="with (obj) {\n"+jt+"\n}\n";jt=(ct?jt.replace(Mo,""):jt).replace(vs,"$1").replace(Tc,"$1;"),jt="function("+(Bn||"obj")+") {\n"+(Bn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Ye?", __e = _.escape":"")+(ct?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+jt+"return __p\n}";var vr=rw(function(){return Kr(De,Cn+"return "+jt).apply(J,$e)});if(vr.source=jt,Hc(vr))throw vr;return vr},Se.times=function(d,p){if((d=sr(d))<1||d>Ae)return[];var y=be,F=Xs(d,be);p=Ln(p),d-=be;for(var ce=Bf(F,p);++y<d;)p(y);return ce},Se.toFinite=xl,Se.toInteger=sr,Se.toLength=$0,Se.toLower=function(d){return Jr(d).toLowerCase()},Se.toNumber=da,Se.toSafeInteger=function(d){return d?Ch(sr(d),-Ae,Ae):0===d?d:0},Se.toString=Jr,Se.toUpper=function(d){return Jr(d).toUpperCase()},Se.trim=function(d,p,y){if((d=Jr(d))&&(y||p===J))return MS(d);if(!d||!(p=Ra(p)))return d;var F=fl(d),ce=fl(p);return bl(F,DR(F,ce),xR(F,ce)+1).join("")},Se.trimEnd=function(d,p,y){if((d=Jr(d))&&(y||p===J))return d.slice(0,gd(d)+1);if(!d||!(p=Ra(p)))return d;var F=fl(d);return bl(F,0,xR(F,fl(p))+1).join("")},Se.trimStart=function(d,p,y){if((d=Jr(d))&&(y||p===J))return d.replace(Qe,"");if(!d||!(p=Ra(p)))return d;var F=fl(d);return bl(F,DR(F,fl(p))).join("")},Se.truncate=function(d,p){var y=30,F="...";if(Wi(p)){var ce="separator"in p?p.separator:ce;y="length"in p?sr(p.length):y,F="omission"in p?Ra(p.omission):F}var De=(d=Jr(d)).length;if(ag(d)){var $e=fl(d);De=$e.length}if(y>=De)return d;var Ye=y-cg(F);if(Ye<1)return F;var ct=$e?bl($e,0,Ye).join(""):d.slice(0,Ye);if(ce===J)return ct+F;if($e&&(Ye+=ct.length-Ye),XD(ce)){if(d.slice(Ye).search(ce)){var Nt,Pt=ct;for(ce.global||(ce=kv(ce.source,Jr(Qn.exec(ce))+"g")),ce.lastIndex=0;Nt=ce.exec(Pt);)var jt=Nt.index;ct=ct.slice(0,jt===J?Ye:jt)}}else if(d.indexOf(Ra(ce),Ye)!=Ye){var nn=ct.lastIndexOf(ce);nn>-1&&(ct=ct.slice(0,nn))}return ct+F},Se.unescape=function(d){return(d=Jr(d))&&oo.test(d)?d.replace(su,Fv):d},Se.uniqueId=function(d){var p=++qH;return Jr(d)+p},Se.upperCase=px,Se.upperFirst=z_,Se.each=N0,Se.eachRight=O_,Se.first=hD,ow(Se,function(){var d={};return yl(Se,function(p,y){li.call(Se.prototype,y)||(d[y]=p)}),d}(),{chain:!1}),Se.VERSION="4.17.21",Oo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Se[d].placeholder=Se}),Oo(["drop","take"],function(d,p){yr.prototype[d]=function(y){y=y===J?1:hs(sr(y),0);var F=this.__filtered__&&!p?new yr(this):this.clone();return F.__filtered__?F.__takeCount__=Xs(y,F.__takeCount__):F.__views__.push({size:Xs(y,be),type:d+(F.__dir__<0?"Right":"")}),F},yr.prototype[d+"Right"]=function(y){return this.reverse()[d](y).reverse()}}),Oo(["filter","map","takeWhile"],function(d,p){var y=p+1,F=1==y||3==y;yr.prototype[d]=function(ce){var De=this.clone();return De.__iteratees__.push({iteratee:Ln(ce,3),type:y}),De.__filtered__=De.__filtered__||F,De}}),Oo(["head","last"],function(d,p){var y="take"+(p?"Right":"");yr.prototype[d]=function(){return this[y](1).value()[0]}}),Oo(["initial","tail"],function(d,p){var y="drop"+(p?"":"Right");yr.prototype[d]=function(){return this.__filtered__?new yr(this):this[y](1)}}),yr.prototype.compact=function(){return this.filter(Qo)},yr.prototype.find=function(d){return this.filter(d).head()},yr.prototype.findLast=function(d){return this.reverse().find(d)},yr.prototype.invokeMap=br(function(d,p){return"function"==typeof d?new yr(this):this.map(function(y){return Vc(y,d,p)})}),yr.prototype.reject=function(d){return this.filter(B0(Ln(d)))},yr.prototype.slice=function(d,p){d=sr(d);var y=this;return y.__filtered__&&(d>0||p<0)?new yr(y):(d<0?y=y.takeRight(-d):d&&(y=y.drop(d)),p!==J&&(y=(p=sr(p))<0?y.dropRight(-p):y.take(p-d)),y)},yr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},yr.prototype.toArray=function(){return this.take(be)},yl(yr.prototype,function(d,p){var y=/^(?:filter|find|map|reject)|While$/.test(p),F=/^(?:head|last)$/.test(p),ce=Se[F?"take"+("last"==p?"Right":""):p],De=F||/^find/.test(p);!ce||(Se.prototype[p]=function(){var $e=this.__wrapped__,Ye=F?[1]:arguments,ct=$e instanceof yr,Nt=Ye[0],Pt=ct||Rn($e),jt=function(wr){var Lr=ce.apply(Se,ds([wr],Ye));return F&&nn?Lr[0]:Lr};Pt&&y&&"function"==typeof Nt&&1!=Nt.length&&(ct=Pt=!1);var nn=this.__chain__,Cn=!!this.__actions__.length,Bn=De&&!nn,vr=ct&&!Cn;if(!De&&Pt){$e=vr?$e:new yr(this);var jn=d.apply($e,Ye);return jn.__actions__.push({func:sp,args:[jt],thisArg:J}),new Ma(jn,nn)}return Bn&&vr?d.apply(this,Ye):(jn=this.thru(jt),Bn?F?jn.value()[0]:jn.value():jn)})}),Oo(["pop","push","shift","sort","splice","unshift"],function(d){var p=Mi[d],y=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",F=/^(?:pop|shift)$/.test(d);Se.prototype[d]=function(){var ce=arguments;if(F&&!this.__chain__){var De=this.value();return p.apply(Rn(De)?De:[],ce)}return this[y](function($e){return p.apply(Rn($e)?$e:[],ce)})}}),yl(yr.prototype,function(d,p){var y=Se[p];if(y){var F=y.name+"";li.call(Uf,F)||(Uf[F]=[]),Uf[F].push({name:p,func:y})}}),Uf[Sd(J,2).name]=[{name:"wrapper",func:J}],yr.prototype.clone=function(){var d=new yr(this.__wrapped__);return d.__actions__=Yo(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Yo(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Yo(this.__views__),d},yr.prototype.reverse=function(){if(this.__filtered__){var d=new yr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},yr.prototype.value=function(){var d=this.__wrapped__.value(),p=this.__dir__,y=Rn(d),F=p<0,ce=y?d.length:0,De=function(d,p,y){for(var F=-1,ce=y.length;++F<ce;){var De=y[F],$e=De.size;switch(De.type){case"drop":d+=$e;break;case"dropRight":p-=$e;break;case"take":p=Xs(p,d+$e);break;case"takeRight":d=hs(d,p-$e)}}return{start:d,end:p}}(0,ce,this.__views__),$e=De.start,Ye=De.end,ct=Ye-$e,Nt=F?Ye:$e-1,Pt=this.__iteratees__,jt=Pt.length,nn=0,Cn=Xs(ct,this.__takeCount__);if(!y||!F&&ce==ct&&Cn==ct)return tO(d,this.__actions__);var Bn=[];e:for(;ct--&&nn<Cn;){for(var vr=-1,jn=d[Nt+=p];++vr<jt;){var wr=Pt[vr],ha=wr.type,Bo=(0,wr.iteratee)(jn);if(2==ha)jn=Bo;else if(!Bo){if(1==ha)continue e;break e}}Bn[nn++]=jn}return Bn},Se.prototype.at=M0,Se.prototype.chain=function(){return A0(this)},Se.prototype.commit=function(){return new Ma(this.value(),this.__chain__)},Se.prototype.next=function(){this.__values__===J&&(this.__values__=QD(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?J:this.__values__[this.__index__++]}},Se.prototype.plant=function(d){for(var p,y=this;y instanceof _g;){var F=M_(y);F.__index__=0,F.__values__=J,p?ce.__wrapped__=F:p=F;var ce=F;y=y.__wrapped__}return ce.__wrapped__=d,p},Se.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof yr){var p=d;return this.__actions__.length&&(p=new yr(this)),(p=p.reverse()).__actions__.push({func:sp,args:[D0],thisArg:J}),new Ma(p,this.__chain__)}return this.thru(D0)},Se.prototype.toJSON=Se.prototype.valueOf=Se.prototype.value=function(){return tO(this.__wrapped__,this.__actions__)},Se.prototype.first=Se.prototype.head,dg&&(Se.prototype[dg]=function(){return this}),Se}();Zr._=lg,(gt=function(){return lg}.call(rt,tt,rt,Vt))!==J&&(Vt.exports=gt)}.call(this)},478:function(Vt){Vt.exports=function(){"use strict";function rt(it,ot){for(var ut=0;ut<ot.length;ut++){var pe=ot[ut];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(it,pe.key,pe)}}function J(it,ot){(null==ot||ot>it.length)&&(ot=it.length);for(var ut=0,pe=new Array(ot);ut<ot;ut++)pe[ut]=it[ut];return pe}function xt(it,ot){var ut="undefined"!=typeof Symbol&&it[Symbol.iterator]||it["@@iterator"];if(ut)return(ut=ut.call(it)).next.bind(ut);if(Array.isArray(it)||(ut=function(it,ot){if(it){if("string"==typeof it)return J(it,ot);var ut=Object.prototype.toString.call(it).slice(8,-1);if("Object"===ut&&it.constructor&&(ut=it.constructor.name),"Map"===ut||"Set"===ut)return Array.from(it);if("Arguments"===ut||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return J(it,ot)}}(it))||ot&&it&&"number"==typeof it.length){ut&&(it=ut);var pe=0;return function(){return pe>=it.length?{done:!0}:{done:!1,value:it[pe++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var dt={exports:{}};function Y(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}dt.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Y,changeDefaults:function(it){dt.exports.defaults=it}};var fe=/[&<>"']/,q=/[&<>"']/g,H=/[<>"']|&(?!#?\w+;)/,B=/[<>"']|&(?!#?\w+;)/g,se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},W=function(ot){return se[ot]};var D=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function P(it){return it.replace(D,function(ot,ut){return"colon"===(ut=ut.toLowerCase())?":":"#"===ut.charAt(0)?"x"===ut.charAt(1)?String.fromCharCode(parseInt(ut.substring(2),16)):String.fromCharCode(+ut.substring(1)):""})}var T=/(^|[^\[])\^/g;var v=/[^\w:]/g,C=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var U={},O=/^[^:]+:\/*[^/]*$/,G=/^([^:]+:)[\s\S]*$/,K=/^([^:]+:\/*[^/]*)[\s\S]*$/;function I(it,ot){U[" "+it]||(U[" "+it]=O.test(it)?it+"/":z(it,"/",!0));var ut=-1===(it=U[" "+it]).indexOf(":");return"//"===ot.substring(0,2)?ut?ot:it.replace(G,"$1")+ot:"/"===ot.charAt(0)?ut?ot:it.replace(K,"$1")+ot:it+ot}function z(it,ot,ut){var pe=it.length;if(0===pe)return"";for(var ve=0;ve<pe;){var Be=it.charAt(pe-ve-1);if(Be!==ot||ut){if(Be===ot||!ut)break;ve++}else ve++}return it.substr(0,pe-ve)}var oe_escape=function(it,ot){if(ot){if(fe.test(it))return it.replace(q,W)}else if(H.test(it))return it.replace(B,W);return it},oe_unescape=P,oe_edit=function(it,ot){it=it.source||it,ot=ot||"";var ut={replace:function(ve,Be){return Be=(Be=Be.source||Be).replace(T,"$1"),it=it.replace(ve,Be),ut},getRegex:function(){return new RegExp(it,ot)}};return ut},oe_cleanUrl=function(it,ot,ut){if(it){var pe;try{pe=decodeURIComponent(P(ut)).replace(v,"").toLowerCase()}catch(ve){return null}if(0===pe.indexOf("javascript:")||0===pe.indexOf("vbscript:")||0===pe.indexOf("data:"))return null}ot&&!C.test(ut)&&(ut=I(ot,ut));try{ut=encodeURI(ut).replace(/%25/g,"%")}catch(ve){return null}return ut},oe_noopTest={exec:function(){}},oe_merge=function(it){for(var ut,pe,ot=1;ot<arguments.length;ot++)for(pe in ut=arguments[ot])Object.prototype.hasOwnProperty.call(ut,pe)&&(it[pe]=ut[pe]);return it},oe_checkSanitizeDeprecation=function(it){it&&it.sanitize&&!it.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},oe_repeatString=function(it,ot){if(ot<1)return"";for(var ut="";ot>1;)1&ot&&(ut+=it),ot>>=1,it+=it;return ut+it},Ae=dt.exports.defaults,me=z,ne=function(it,ot){var pe=it.replace(/\|/g,function(Be,lt,Qe){for(var wt=!1,Dt=lt;--Dt>=0&&"\\"===Qe[Dt];)wt=!wt;return wt?"|":" |"}).split(/ \|/),ve=0;if(pe.length>ot)pe.splice(ot);else for(;pe.length<ot;)pe.push("");for(;ve<pe.length;ve++)pe[ve]=pe[ve].trim().replace(/\\\|/g,"|");return pe},be=oe_escape,Re=function(it,ot){if(-1===it.indexOf(ot[1]))return-1;for(var ut=it.length,pe=0,ve=0;ve<ut;ve++)if("\\"===it[ve])ve++;else if(it[ve]===ot[0])pe++;else if(it[ve]===ot[1]&&--pe<0)return ve;return-1};function He(it,ot,ut){var pe=ot.href,ve=ot.title?be(ot.title):null,Be=it[1].replace(/\\([\[\]])/g,"$1");return"!"!==it[0].charAt(0)?{type:"link",raw:ut,href:pe,title:ve,text:Be}:{type:"image",raw:ut,href:pe,title:ve,text:be(Be)}}var Ze=function(){function it(ut){this.options=ut||Ae}var ot=it.prototype;return ot.space=function(pe){var ve=this.rules.block.newline.exec(pe);if(ve)return ve[0].length>1?{type:"space",raw:ve[0]}:{raw:"\n"}},ot.code=function(pe){var ve=this.rules.block.code.exec(pe);if(ve){var Be=ve[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ve[0],codeBlockStyle:"indented",text:this.options.pedantic?Be:me(Be,"\n")}}},ot.fences=function(pe){var ve=this.rules.block.fences.exec(pe);if(ve){var Be=ve[0],lt=function(it,ot){var ut=it.match(/^(\s+)(?:```)/);if(null===ut)return ot;var pe=ut[1];return ot.split("\n").map(function(ve){var Be=ve.match(/^\s+/);return null===Be?ve:Be[0].length>=pe.length?ve.slice(pe.length):ve}).join("\n")}(Be,ve[3]||"");return{type:"code",raw:Be,lang:ve[2]?ve[2].trim():ve[2],text:lt}}},ot.heading=function(pe){var ve=this.rules.block.heading.exec(pe);if(ve){var Be=ve[2].trim();if(/#$/.test(Be)){var lt=me(Be,"#");(this.options.pedantic||!lt||/ $/.test(lt))&&(Be=lt.trim())}return{type:"heading",raw:ve[0],depth:ve[1].length,text:Be}}},ot.nptable=function(pe){var ve=this.rules.block.nptable.exec(pe);if(ve){var Be={type:"table",header:ne(ve[1].replace(/^ *| *\| *$/g,"")),align:ve[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:ve[3]?ve[3].replace(/\n$/,"").split("\n"):[],raw:ve[0]};if(Be.header.length===Be.align.length){var Qe,lt=Be.align.length;for(Qe=0;Qe<lt;Qe++)Be.align[Qe]=/^ *-+: *$/.test(Be.align[Qe])?"right":/^ *:-+: *$/.test(Be.align[Qe])?"center":/^ *:-+ *$/.test(Be.align[Qe])?"left":null;for(lt=Be.cells.length,Qe=0;Qe<lt;Qe++)Be.cells[Qe]=ne(Be.cells[Qe],Be.header.length);return Be}}},ot.hr=function(pe){var ve=this.rules.block.hr.exec(pe);if(ve)return{type:"hr",raw:ve[0]}},ot.blockquote=function(pe){var ve=this.rules.block.blockquote.exec(pe);if(ve){var Be=ve[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ve[0],text:Be}}},ot.list=function(pe){var ve=this.rules.block.list.exec(pe);if(ve){var Xt,Gn,pr,Pn,bn,Qn,xn,wi,Ei,Be=ve[0],lt=ve[2],Qe=lt.length>1,wt={type:"list",raw:Be,ordered:Qe,start:Qe?+lt.slice(0,-1):"",loose:!1,items:[]},Dt=ve[0].match(this.rules.block.item),At=!1,er=Dt.length;pr=this.rules.block.listItemStart.exec(Dt[0]);for(var ii=0;ii<er;ii++){if(Be=Xt=Dt[ii],this.options.pedantic||(Ei=Xt.match(new RegExp("\\n\\s*\\n {0,"+(pr[0].length-1)+"}\\S")))&&(bn=Xt.length-Ei.index+Dt.slice(ii+1).join("\n").length,wt.raw=wt.raw.substring(0,wt.raw.length-bn),Be=Xt=Xt.substring(0,Ei.index),er=ii+1),ii!==er-1){if(Pn=this.rules.block.listItemStart.exec(Dt[ii+1]),this.options.pedantic?Pn[1].length>pr[1].length:Pn[1].length>=pr[0].length||Pn[1].length>3){Dt.splice(ii,2,Dt[ii]+(!this.options.pedantic&&Pn[1].length<pr[0].length&&!Dt[ii].match(/\n$/)?"":"\n")+Dt[ii+1]),ii--,er--;continue}(!this.options.pedantic||this.options.smartLists?Pn[2][Pn[2].length-1]!==lt[lt.length-1]:Qe===(1===Pn[2].length))&&(bn=Dt.slice(ii+1).join("\n").length,wt.raw=wt.raw.substring(0,wt.raw.length-bn),ii=er-1),pr=Pn}Gn=Xt.length,~(Xt=Xt.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(Gn-=Xt.length,Xt=Xt.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+Gn+"}","gm"),"")),Xt=me(Xt,"\n"),ii!==er-1&&(Be+="\n"),Qn=At||/\n\n(?!\s*$)/.test(Be),ii!==er-1&&(At="\n\n"===Be.slice(-2),Qn||(Qn=At)),Qn&&(wt.loose=!0),this.options.gfm&&(wi=void 0,(xn=/^\[[ xX]\] /.test(Xt))&&(wi=" "!==Xt[1],Xt=Xt.replace(/^\[[ xX]\] +/,""))),wt.items.push({type:"list_item",raw:Be,task:xn,checked:wi,loose:Qn,text:Xt})}return wt}},ot.html=function(pe){var ve=this.rules.block.html.exec(pe);if(ve)return{type:this.options.sanitize?"paragraph":"html",raw:ve[0],pre:!this.options.sanitizer&&("pre"===ve[1]||"script"===ve[1]||"style"===ve[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ve[0]):be(ve[0]):ve[0]}},ot.def=function(pe){var ve=this.rules.block.def.exec(pe);if(ve)return ve[3]&&(ve[3]=ve[3].substring(1,ve[3].length-1)),{type:"def",tag:ve[1].toLowerCase().replace(/\s+/g," "),raw:ve[0],href:ve[2],title:ve[3]}},ot.table=function(pe){var ve=this.rules.block.table.exec(pe);if(ve){var Be={type:"table",header:ne(ve[1].replace(/^ *| *\| *$/g,"")),align:ve[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:ve[3]?ve[3].replace(/\n$/,"").split("\n"):[]};if(Be.header.length===Be.align.length){Be.raw=ve[0];var Qe,lt=Be.align.length;for(Qe=0;Qe<lt;Qe++)Be.align[Qe]=/^ *-+: *$/.test(Be.align[Qe])?"right":/^ *:-+: *$/.test(Be.align[Qe])?"center":/^ *:-+ *$/.test(Be.align[Qe])?"left":null;for(lt=Be.cells.length,Qe=0;Qe<lt;Qe++)Be.cells[Qe]=ne(Be.cells[Qe].replace(/^ *\| *| *\| *$/g,""),Be.header.length);return Be}}},ot.lheading=function(pe){var ve=this.rules.block.lheading.exec(pe);if(ve)return{type:"heading",raw:ve[0],depth:"="===ve[2].charAt(0)?1:2,text:ve[1]}},ot.paragraph=function(pe){var ve=this.rules.block.paragraph.exec(pe);if(ve)return{type:"paragraph",raw:ve[0],text:"\n"===ve[1].charAt(ve[1].length-1)?ve[1].slice(0,-1):ve[1]}},ot.text=function(pe){var ve=this.rules.block.text.exec(pe);if(ve)return{type:"text",raw:ve[0],text:ve[0]}},ot.escape=function(pe){var ve=this.rules.inline.escape.exec(pe);if(ve)return{type:"escape",raw:ve[0],text:be(ve[1])}},ot.tag=function(pe,ve,Be){var lt=this.rules.inline.tag.exec(pe);if(lt)return!ve&&/^<a /i.test(lt[0])?ve=!0:ve&&/^<\/a>/i.test(lt[0])&&(ve=!1),!Be&&/^<(pre|code|kbd|script)(\s|>)/i.test(lt[0])?Be=!0:Be&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(lt[0])&&(Be=!1),{type:this.options.sanitize?"text":"html",raw:lt[0],inLink:ve,inRawBlock:Be,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(lt[0]):be(lt[0]):lt[0]}},ot.link=function(pe){var ve=this.rules.inline.link.exec(pe);if(ve){var Be=ve[2].trim();if(!this.options.pedantic&&/^</.test(Be)){if(!/>$/.test(Be))return;var lt=me(Be.slice(0,-1),"\\");if((Be.length-lt.length)%2==0)return}else{var Qe=Re(ve[2],"()");if(Qe>-1){var Dt=(0===ve[0].indexOf("!")?5:4)+ve[1].length+Qe;ve[2]=ve[2].substring(0,Qe),ve[0]=ve[0].substring(0,Dt).trim(),ve[3]=""}}var At=ve[2],Xt="";if(this.options.pedantic){var Gn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(At);Gn&&(At=Gn[1],Xt=Gn[3])}else Xt=ve[3]?ve[3].slice(1,-1):"";return At=At.trim(),/^</.test(At)&&(At=this.options.pedantic&&!/>$/.test(Be)?At.slice(1):At.slice(1,-1)),He(ve,{href:At&&At.replace(this.rules.inline._escapes,"$1"),title:Xt&&Xt.replace(this.rules.inline._escapes,"$1")},ve[0])}},ot.reflink=function(pe,ve){var Be;if((Be=this.rules.inline.reflink.exec(pe))||(Be=this.rules.inline.nolink.exec(pe))){var lt=(Be[2]||Be[1]).replace(/\s+/g," ");if(!(lt=ve[lt.toLowerCase()])||!lt.href){var Qe=Be[0].charAt(0);return{type:"text",raw:Qe,text:Qe}}return He(Be,lt,Be[0])}},ot.emStrong=function(pe,ve,Be){void 0===Be&&(Be="");var lt=this.rules.inline.emStrong.lDelim.exec(pe);if(lt&&(!lt[3]||!Be.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Qe=lt[1]||lt[2]||"";if(!Qe||Qe&&(""===Be||this.rules.inline.punctuation.exec(Be))){var Dt,At,wt=lt[0].length-1,Xt=wt,Gn=0,pr="*"===lt[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(pr.lastIndex=0,ve=ve.slice(-1*pe.length+wt);null!=(lt=pr.exec(ve));)if(Dt=lt[1]||lt[2]||lt[3]||lt[4]||lt[5]||lt[6]){if(At=Dt.length,lt[3]||lt[4]){Xt+=At;continue}if((lt[5]||lt[6])&&wt%3&&!((wt+At)%3)){Gn+=At;continue}if(!((Xt-=At)>0))return At=Math.min(At,At+Xt+Gn),Math.min(wt,At)%2?{type:"em",raw:pe.slice(0,wt+lt.index+At+1),text:pe.slice(1,wt+lt.index+At)}:{type:"strong",raw:pe.slice(0,wt+lt.index+At+1),text:pe.slice(2,wt+lt.index+At-1)}}}}},ot.codespan=function(pe){var ve=this.rules.inline.code.exec(pe);if(ve){var Be=ve[2].replace(/\n/g," "),lt=/[^ ]/.test(Be),Qe=/^ /.test(Be)&&/ $/.test(Be);return lt&&Qe&&(Be=Be.substring(1,Be.length-1)),Be=be(Be,!0),{type:"codespan",raw:ve[0],text:Be}}},ot.br=function(pe){var ve=this.rules.inline.br.exec(pe);if(ve)return{type:"br",raw:ve[0]}},ot.del=function(pe){var ve=this.rules.inline.del.exec(pe);if(ve)return{type:"del",raw:ve[0],text:ve[2]}},ot.autolink=function(pe,ve){var lt,Qe,Be=this.rules.inline.autolink.exec(pe);if(Be)return Qe="@"===Be[2]?"mailto:"+(lt=be(this.options.mangle?ve(Be[1]):Be[1])):lt=be(Be[1]),{type:"link",raw:Be[0],text:lt,href:Qe,tokens:[{type:"text",raw:lt,text:lt}]}},ot.url=function(pe,ve){var Be;if(Be=this.rules.inline.url.exec(pe)){var lt,Qe;if("@"===Be[2])Qe="mailto:"+(lt=be(this.options.mangle?ve(Be[0]):Be[0]));else{var wt;do{wt=Be[0],Be[0]=this.rules.inline._backpedal.exec(Be[0])[0]}while(wt!==Be[0]);lt=be(Be[0]),Qe="www."===Be[1]?"http://"+lt:lt}return{type:"link",raw:Be[0],text:lt,href:Qe,tokens:[{type:"text",raw:lt,text:lt}]}}},ot.inlineText=function(pe,ve,Be){var Qe,lt=this.rules.inline.text.exec(pe);if(lt)return Qe=ve?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(lt[0]):be(lt[0]):lt[0]:be(this.options.smartypants?Be(lt[0]):lt[0]),{type:"text",raw:lt[0],text:Qe}},it}(),Je=oe_noopTest,Ke=oe_edit,je=oe_merge,Le={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Je,table:Je,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Le.def=Ke(Le.def).replace("label",Le._label).replace("title",Le._title).getRegex(),Le.bullet=/(?:[*+-]|\d{1,9}[.)])/,Le.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,Le.item=Ke(Le.item,"gm").replace(/bull/g,Le.bullet).getRegex(),Le.listItemStart=Ke(/^( *)(bull) */).replace("bull",Le.bullet).getRegex(),Le.list=Ke(Le.list).replace(/bull/g,Le.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Le.def.source+")").getRegex(),Le._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Le._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Le.html=Ke(Le.html,"i").replace("comment",Le._comment).replace("tag",Le._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Le.paragraph=Ke(Le._paragraph).replace("hr",Le.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Le._tag).getRegex(),Le.blockquote=Ke(Le.blockquote).replace("paragraph",Le.paragraph).getRegex(),Le.normal=je({},Le),Le.gfm=je({},Le.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Le.gfm.nptable=Ke(Le.gfm.nptable).replace("hr",Le.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Le._tag).getRegex(),Le.gfm.table=Ke(Le.gfm.table).replace("hr",Le.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Le._tag).getRegex(),Le.pedantic=je({},Le.normal,{html:Ke("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Le._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Je,paragraph:Ke(Le.normal._paragraph).replace("hr",Le.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Le.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Ce={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Je,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Je,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Ce.punctuation=Ke(Ce.punctuation).replace(/punctuation/g,Ce._punctuation).getRegex(),Ce.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ce.escapedEmSt=/\\\*|\\_/g,Ce._comment=Ke(Le._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ce.emStrong.lDelim=Ke(Ce.emStrong.lDelim).replace(/punct/g,Ce._punctuation).getRegex(),Ce.emStrong.rDelimAst=Ke(Ce.emStrong.rDelimAst,"g").replace(/punct/g,Ce._punctuation).getRegex(),Ce.emStrong.rDelimUnd=Ke(Ce.emStrong.rDelimUnd,"g").replace(/punct/g,Ce._punctuation).getRegex(),Ce._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ce._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ce._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ce.autolink=Ke(Ce.autolink).replace("scheme",Ce._scheme).replace("email",Ce._email).getRegex(),Ce._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ce.tag=Ke(Ce.tag).replace("comment",Ce._comment).replace("attribute",Ce._attribute).getRegex(),Ce._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ce._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ce._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ce.link=Ke(Ce.link).replace("label",Ce._label).replace("href",Ce._href).replace("title",Ce._title).getRegex(),Ce.reflink=Ke(Ce.reflink).replace("label",Ce._label).getRegex(),Ce.reflinkSearch=Ke(Ce.reflinkSearch,"g").replace("reflink",Ce.reflink).replace("nolink",Ce.nolink).getRegex(),Ce.normal=je({},Ce),Ce.pedantic=je({},Ce.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",Ce._label).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ce._label).getRegex()}),Ce.gfm=je({},Ce.normal,{escape:Ke(Ce.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ce.gfm.url=Ke(Ce.gfm.url,"i").replace("email",Ce.gfm._extended_email).getRegex(),Ce.breaks=je({},Ce.gfm,{br:Ke(Ce.br).replace("{2,}","*").getRegex(),text:Ke(Ce.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Ne={block:Le,inline:Ce},ze=Ze,qe=dt.exports.defaults,Ve=Ne.block,$=Ne.inline,X=oe_repeatString;function we(it){return it.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ue(it){var ut,pe,ot="",ve=it.length;for(ut=0;ut<ve;ut++)pe=it.charCodeAt(ut),Math.random()>.5&&(pe="x"+pe.toString(16)),ot+="&#"+pe+";";return ot}var Fe=function(){function it(ut){this.tokens=[],this.tokens.links=Object.create(null),this.options=ut||qe,this.options.tokenizer=this.options.tokenizer||new ze,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var pe={block:Ve.normal,inline:$.normal};this.options.pedantic?(pe.block=Ve.pedantic,pe.inline=$.pedantic):this.options.gfm&&(pe.block=Ve.gfm,pe.inline=this.options.breaks?$.breaks:$.gfm),this.tokenizer.rules=pe}it.lex=function(pe,ve){return new it(ve).lex(pe)},it.lexInline=function(pe,ve){return new it(ve).inlineTokens(pe)};var ot=it.prototype;return ot.lex=function(pe){return pe=pe.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(pe,this.tokens,!0),this.inline(this.tokens),this.tokens},ot.blockTokens=function(pe,ve,Be){var Qe,wt,Dt,At,Xt,Gn,lt=this;for(void 0===ve&&(ve=[]),void 0===Be&&(Be=!0),this.options.pedantic&&(pe=pe.replace(/^ +$/gm,""));pe;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Pn){return!!(Qe=Pn.call(lt,pe,ve))&&(pe=pe.substring(Qe.raw.length),ve.push(Qe),!0)}))){if(Qe=this.tokenizer.space(pe)){pe=pe.substring(Qe.raw.length),Qe.type&&ve.push(Qe);continue}if(Qe=this.tokenizer.code(pe)){pe=pe.substring(Qe.raw.length),(At=ve[ve.length-1])&&"paragraph"===At.type?(At.raw+="\n"+Qe.raw,At.text+="\n"+Qe.text):ve.push(Qe);continue}if(Qe=this.tokenizer.fences(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.heading(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.nptable(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.hr(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.blockquote(pe)){pe=pe.substring(Qe.raw.length),Qe.tokens=this.blockTokens(Qe.text,[],Be),ve.push(Qe);continue}if(Qe=this.tokenizer.list(pe)){for(pe=pe.substring(Qe.raw.length),Dt=Qe.items.length,wt=0;wt<Dt;wt++)Qe.items[wt].tokens=this.blockTokens(Qe.items[wt].text,[],!1);ve.push(Qe);continue}if(Qe=this.tokenizer.html(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Be&&(Qe=this.tokenizer.def(pe))){pe=pe.substring(Qe.raw.length),this.tokens.links[Qe.tag]||(this.tokens.links[Qe.tag]={href:Qe.href,title:Qe.title});continue}if(Qe=this.tokenizer.table(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Qe=this.tokenizer.lheading(pe)){pe=pe.substring(Qe.raw.length),ve.push(Qe);continue}if(Xt=pe,this.options.extensions&&this.options.extensions.startBlock&&function(){var Pn=1/0,bn=pe.slice(1),Qn=void 0;lt.options.extensions.startBlock.forEach(function(xn){"number"==typeof(Qn=xn.call(this,bn))&&Qn>=0&&(Pn=Math.min(Pn,Qn))}),Pn<1/0&&Pn>=0&&(Xt=pe.substring(0,Pn+1))}(),Be&&(Qe=this.tokenizer.paragraph(Xt))){At=ve[ve.length-1],Gn&&"paragraph"===At.type?(At.raw+="\n"+Qe.raw,At.text+="\n"+Qe.text):ve.push(Qe),Gn=Xt.length!==pe.length,pe=pe.substring(Qe.raw.length);continue}if(Qe=this.tokenizer.text(pe)){pe=pe.substring(Qe.raw.length),(At=ve[ve.length-1])&&"text"===At.type?(At.raw+="\n"+Qe.raw,At.text+="\n"+Qe.text):ve.push(Qe);continue}if(pe){var pr="Infinite loop on byte: "+pe.charCodeAt(0);if(this.options.silent){console.error(pr);break}throw new Error(pr)}}return ve},ot.inline=function(pe){var ve,Be,lt,Qe,wt,Dt,At=pe.length;for(ve=0;ve<At;ve++)switch(Dt=pe[ve],Dt.type){case"paragraph":case"text":case"heading":Dt.tokens=[],this.inlineTokens(Dt.text,Dt.tokens);break;case"table":for(Dt.tokens={header:[],cells:[]},Qe=Dt.header.length,Be=0;Be<Qe;Be++)Dt.tokens.header[Be]=[],this.inlineTokens(Dt.header[Be],Dt.tokens.header[Be]);for(Qe=Dt.cells.length,Be=0;Be<Qe;Be++)for(wt=Dt.cells[Be],Dt.tokens.cells[Be]=[],lt=0;lt<wt.length;lt++)Dt.tokens.cells[Be][lt]=[],this.inlineTokens(wt[lt],Dt.tokens.cells[Be][lt]);break;case"blockquote":this.inline(Dt.tokens);break;case"list":for(Qe=Dt.items.length,Be=0;Be<Qe;Be++)this.inline(Dt.items[Be].tokens)}return pe},ot.inlineTokens=function(pe,ve,Be,lt){var Qe=this;void 0===ve&&(ve=[]),void 0===Be&&(Be=!1),void 0===lt&&(lt=!1);var wt,Dt,At,Gn,pr,Pn,Xt=pe;if(this.tokens.links){var bn=Object.keys(this.tokens.links);if(bn.length>0)for(;null!=(Gn=this.tokenizer.rules.inline.reflinkSearch.exec(Xt));)bn.includes(Gn[0].slice(Gn[0].lastIndexOf("[")+1,-1))&&(Xt=Xt.slice(0,Gn.index)+"["+X("a",Gn[0].length-2)+"]"+Xt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(Gn=this.tokenizer.rules.inline.blockSkip.exec(Xt));)Xt=Xt.slice(0,Gn.index)+"["+X("a",Gn[0].length-2)+"]"+Xt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(Gn=this.tokenizer.rules.inline.escapedEmSt.exec(Xt));)Xt=Xt.slice(0,Gn.index)+"++"+Xt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;pe;)if(pr||(Pn=""),pr=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(xn){return!!(wt=xn.call(Qe,pe,ve))&&(pe=pe.substring(wt.raw.length),ve.push(wt),!0)}))){if(wt=this.tokenizer.escape(pe)){pe=pe.substring(wt.raw.length),ve.push(wt);continue}if(wt=this.tokenizer.tag(pe,Be,lt)){pe=pe.substring(wt.raw.length),Be=wt.inLink,lt=wt.inRawBlock,(Dt=ve[ve.length-1])&&"text"===wt.type&&"text"===Dt.type?(Dt.raw+=wt.raw,Dt.text+=wt.text):ve.push(wt);continue}if(wt=this.tokenizer.link(pe)){pe=pe.substring(wt.raw.length),"link"===wt.type&&(wt.tokens=this.inlineTokens(wt.text,[],!0,lt)),ve.push(wt);continue}if(wt=this.tokenizer.reflink(pe,this.tokens.links)){pe=pe.substring(wt.raw.length),Dt=ve[ve.length-1],"link"===wt.type?(wt.tokens=this.inlineTokens(wt.text,[],!0,lt),ve.push(wt)):Dt&&"text"===wt.type&&"text"===Dt.type?(Dt.raw+=wt.raw,Dt.text+=wt.text):ve.push(wt);continue}if(wt=this.tokenizer.emStrong(pe,Xt,Pn)){pe=pe.substring(wt.raw.length),wt.tokens=this.inlineTokens(wt.text,[],Be,lt),ve.push(wt);continue}if(wt=this.tokenizer.codespan(pe)){pe=pe.substring(wt.raw.length),ve.push(wt);continue}if(wt=this.tokenizer.br(pe)){pe=pe.substring(wt.raw.length),ve.push(wt);continue}if(wt=this.tokenizer.del(pe)){pe=pe.substring(wt.raw.length),wt.tokens=this.inlineTokens(wt.text,[],Be,lt),ve.push(wt);continue}if(wt=this.tokenizer.autolink(pe,ue)){pe=pe.substring(wt.raw.length),ve.push(wt);continue}if(!Be&&(wt=this.tokenizer.url(pe,ue))){pe=pe.substring(wt.raw.length),ve.push(wt);continue}if(At=pe,this.options.extensions&&this.options.extensions.startInline&&function(){var xn=1/0,wi=pe.slice(1),Ei=void 0;Qe.options.extensions.startInline.forEach(function(er){"number"==typeof(Ei=er.call(this,wi))&&Ei>=0&&(xn=Math.min(xn,Ei))}),xn<1/0&&xn>=0&&(At=pe.substring(0,xn+1))}(),wt=this.tokenizer.inlineText(At,lt,we)){pe=pe.substring(wt.raw.length),"_"!==wt.raw.slice(-1)&&(Pn=wt.raw.slice(-1)),pr=!0,(Dt=ve[ve.length-1])&&"text"===Dt.type?(Dt.raw+=wt.raw,Dt.text+=wt.text):ve.push(wt);continue}if(pe){var Qn="Infinite loop on byte: "+pe.charCodeAt(0);if(this.options.silent){console.error(Qn);break}throw new Error(Qn)}}return ve},function(it,ot,ut){ot&&rt(it.prototype,ot),ut&&rt(it,ut)}(it,null,[{key:"rules",get:function(){return{block:Ve,inline:$}}}]),it}(),Et=dt.exports.defaults,pt=oe_cleanUrl,ge=oe_escape,j=function(){function it(ut){this.options=ut||Et}var ot=it.prototype;return ot.code=function(pe,ve,Be){var lt=(ve||"").match(/\S*/)[0];if(this.options.highlight){var Qe=this.options.highlight(pe,lt);null!=Qe&&Qe!==pe&&(Be=!0,pe=Qe)}return pe=pe.replace(/\n$/,"")+"\n",lt?'<pre><code class="'+this.options.langPrefix+ge(lt,!0)+'">'+(Be?pe:ge(pe,!0))+"</code></pre>\n":"<pre><code>"+(Be?pe:ge(pe,!0))+"</code></pre>\n"},ot.blockquote=function(pe){return"<blockquote>\n"+pe+"</blockquote>\n"},ot.html=function(pe){return pe},ot.heading=function(pe,ve,Be,lt){return this.options.headerIds?"<h"+ve+' id="'+this.options.headerPrefix+lt.slug(Be)+'">'+pe+"</h"+ve+">\n":"<h"+ve+">"+pe+"</h"+ve+">\n"},ot.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},ot.list=function(pe,ve,Be){var lt=ve?"ol":"ul";return"<"+lt+(ve&&1!==Be?' start="'+Be+'"':"")+">\n"+pe+"</"+lt+">\n"},ot.listitem=function(pe){return"<li>"+pe+"</li>\n"},ot.checkbox=function(pe){return"<input "+(pe?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ot.paragraph=function(pe){return"<p>"+pe+"</p>\n"},ot.table=function(pe,ve){return ve&&(ve="<tbody>"+ve+"</tbody>"),"<table>\n<thead>\n"+pe+"</thead>\n"+ve+"</table>\n"},ot.tablerow=function(pe){return"<tr>\n"+pe+"</tr>\n"},ot.tablecell=function(pe,ve){var Be=ve.header?"th":"td";return(ve.align?"<"+Be+' align="'+ve.align+'">':"<"+Be+">")+pe+"</"+Be+">\n"},ot.strong=function(pe){return"<strong>"+pe+"</strong>"},ot.em=function(pe){return"<em>"+pe+"</em>"},ot.codespan=function(pe){return"<code>"+pe+"</code>"},ot.br=function(){return this.options.xhtml?"<br/>":"<br>"},ot.del=function(pe){return"<del>"+pe+"</del>"},ot.link=function(pe,ve,Be){if(null===(pe=pt(this.options.sanitize,this.options.baseUrl,pe)))return Be;var lt='<a href="'+ge(pe)+'"';return ve&&(lt+=' title="'+ve+'"'),lt+">"+Be+"</a>"},ot.image=function(pe,ve,Be){if(null===(pe=pt(this.options.sanitize,this.options.baseUrl,pe)))return Be;var lt='<img src="'+pe+'" alt="'+Be+'"';return ve&&(lt+=' title="'+ve+'"'),lt+(this.options.xhtml?"/>":">")},ot.text=function(pe){return pe},it}(),N=function(){function it(){}var ot=it.prototype;return ot.strong=function(pe){return pe},ot.em=function(pe){return pe},ot.codespan=function(pe){return pe},ot.del=function(pe){return pe},ot.html=function(pe){return pe},ot.text=function(pe){return pe},ot.link=function(pe,ve,Be){return""+Be},ot.image=function(pe,ve,Be){return""+Be},ot.br=function(){return""},it}(),V=function(){function it(){this.seen={}}var ot=it.prototype;return ot.serialize=function(pe){return pe.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ot.getNextSafeSlug=function(pe,ve){var Be=pe,lt=0;if(this.seen.hasOwnProperty(Be)){lt=this.seen[pe];do{Be=pe+"-"+ ++lt}while(this.seen.hasOwnProperty(Be))}return ve||(this.seen[pe]=lt,this.seen[Be]=0),Be},ot.slug=function(pe,ve){void 0===ve&&(ve={});var Be=this.serialize(pe);return this.getNextSafeSlug(Be,ve.dryrun)},it}(),Pe=j,Xe=N,yt=V,Rt=dt.exports.defaults,In=oe_unescape,Xn=Fe,kr=function(){function it(ut){this.options=ut||Rt,this.options.renderer=this.options.renderer||new Pe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Xe,this.slugger=new yt}it.parse=function(pe,ve){return new it(ve).parse(pe)},it.parseInline=function(pe,ve){return new it(ve).parseInline(pe)};var ot=it.prototype;return ot.parse=function(pe,ve){void 0===ve&&(ve=!0);var lt,Qe,wt,Dt,At,Xt,Gn,pr,Pn,bn,Qn,xn,wi,Ei,er,ii,Mc,ws,re,Be="",he=pe.length;for(lt=0;lt<he;lt++)if(bn=pe[lt],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[bn.type]&&(!1!==(re=this.options.extensions.renderers[bn.type].call(this,bn))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(bn.type)))Be+=re||"";else switch(bn.type){case"space":continue;case"hr":Be+=this.renderer.hr();continue;case"heading":Be+=this.renderer.heading(this.parseInline(bn.tokens),bn.depth,In(this.parseInline(bn.tokens,this.textRenderer)),this.slugger);continue;case"code":Be+=this.renderer.code(bn.text,bn.lang,bn.escaped);continue;case"table":for(pr="",Gn="",Dt=bn.header.length,Qe=0;Qe<Dt;Qe++)Gn+=this.renderer.tablecell(this.parseInline(bn.tokens.header[Qe]),{header:!0,align:bn.align[Qe]});for(pr+=this.renderer.tablerow(Gn),Pn="",Dt=bn.cells.length,Qe=0;Qe<Dt;Qe++){for(Gn="",At=(Xt=bn.tokens.cells[Qe]).length,wt=0;wt<At;wt++)Gn+=this.renderer.tablecell(this.parseInline(Xt[wt]),{header:!1,align:bn.align[wt]});Pn+=this.renderer.tablerow(Gn)}Be+=this.renderer.table(pr,Pn);continue;case"blockquote":Pn=this.parse(bn.tokens),Be+=this.renderer.blockquote(Pn);continue;case"list":for(Qn=bn.ordered,xn=bn.start,wi=bn.loose,Dt=bn.items.length,Pn="",Qe=0;Qe<Dt;Qe++)ii=(er=bn.items[Qe]).checked,Mc=er.task,Ei="",er.task&&(ws=this.renderer.checkbox(ii),wi?er.tokens.length>0&&"text"===er.tokens[0].type?(er.tokens[0].text=ws+" "+er.tokens[0].text,er.tokens[0].tokens&&er.tokens[0].tokens.length>0&&"text"===er.tokens[0].tokens[0].type&&(er.tokens[0].tokens[0].text=ws+" "+er.tokens[0].tokens[0].text)):er.tokens.unshift({type:"text",text:ws}):Ei+=ws),Ei+=this.parse(er.tokens,wi),Pn+=this.renderer.listitem(Ei,Mc,ii);Be+=this.renderer.list(Pn,Qn,xn);continue;case"html":Be+=this.renderer.html(bn.text);continue;case"paragraph":Be+=this.renderer.paragraph(this.parseInline(bn.tokens));continue;case"text":for(Pn=bn.tokens?this.parseInline(bn.tokens):bn.text;lt+1<he&&"text"===pe[lt+1].type;)Pn+="\n"+((bn=pe[++lt]).tokens?this.parseInline(bn.tokens):bn.text);Be+=ve?this.renderer.paragraph(Pn):Pn;continue;default:var ae='Token with "'+bn.type+'" type was not found.';if(this.options.silent)return void console.error(ae);throw new Error(ae)}return Be},ot.parseInline=function(pe,ve){ve=ve||this.renderer;var lt,Qe,wt,Be="",Dt=pe.length;for(lt=0;lt<Dt;lt++)if(Qe=pe[lt],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Qe.type]&&(!1!==(wt=this.options.extensions.renderers[Qe.type].call(this,Qe))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Qe.type)))Be+=wt||"";else switch(Qe.type){case"escape":Be+=ve.text(Qe.text);break;case"html":Be+=ve.html(Qe.text);break;case"link":Be+=ve.link(Qe.href,Qe.title,this.parseInline(Qe.tokens,ve));break;case"image":Be+=ve.image(Qe.href,Qe.title,Qe.text);break;case"strong":Be+=ve.strong(this.parseInline(Qe.tokens,ve));break;case"em":Be+=ve.em(this.parseInline(Qe.tokens,ve));break;case"codespan":Be+=ve.codespan(Qe.text);break;case"br":Be+=ve.br();break;case"del":Be+=ve.del(this.parseInline(Qe.tokens,ve));break;case"text":Be+=ve.text(Qe.text);break;default:var At='Token with "'+Qe.type+'" type was not found.';if(this.options.silent)return void console.error(At);throw new Error(At)}return Be},it}(),xr=Ze,bs=j,Ao=N,Ks=V,Mo=oe_merge,vs=oe_checkSanitizeDeprecation,Tc=oe_escape,su=dt.exports.getDefaults,Ac=dt.exports.changeDefaults,oo=dt.exports.defaults;function en(it,ot,ut){if(null==it)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof it)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(it)+", string expected");if("function"==typeof ot&&(ut=ot,ot=null),ot=Mo({},en.defaults,ot||{}),vs(ot),ut){var ve,pe=ot.highlight;try{ve=Xn.lex(it,ot)}catch(wt){return ut(wt)}var Be=function(Dt){var At;if(!Dt)try{ot.walkTokens&&en.walkTokens(ve,ot.walkTokens),At=kr.parse(ve,ot)}catch(Xt){Dt=Xt}return ot.highlight=pe,Dt?ut(Dt):ut(null,At)};if(!pe||pe.length<3||(delete ot.highlight,!ve.length))return Be();var lt=0;return en.walkTokens(ve,function(wt){"code"===wt.type&&(lt++,setTimeout(function(){pe(wt.text,wt.lang,function(Dt,At){if(Dt)return Be(Dt);null!=At&&At!==wt.text&&(wt.text=At,wt.escaped=!0),0==--lt&&Be()})},0))}),void(0===lt&&Be())}try{var Qe=Xn.lex(it,ot);return ot.walkTokens&&en.walkTokens(Qe,ot.walkTokens),kr.parse(Qe,ot)}catch(wt){if(wt.message+="\nPlease report this to https://github.com/markedjs/marked.",ot.silent)return"<p>An error occurred:</p><pre>"+Tc(wt.message+"",!0)+"</pre>";throw wt}}return en.options=en.setOptions=function(it){return Mo(en.defaults,it),Ac(en.defaults),en},en.getDefaults=su,en.defaults=oo,en.use=function(){for(var it=this,ot=arguments.length,ut=new Array(ot),pe=0;pe<ot;pe++)ut[pe]=arguments[pe];var lt,ve=Mo.apply(void 0,[{}].concat(ut)),Be=en.defaults.extensions||{renderers:{},childTokens:{}};ut.forEach(function(Qe){if(Qe.extensions&&(lt=!0,Qe.extensions.forEach(function(Dt){if(!Dt.name)throw new Error("extension name required");if(Dt.renderer){var At=Be.renderers?Be.renderers[Dt.name]:null;Be.renderers[Dt.name]=At?function(){for(var Xt=arguments.length,Gn=new Array(Xt),pr=0;pr<Xt;pr++)Gn[pr]=arguments[pr];var Pn=Dt.renderer.apply(this,Gn);return!1===Pn&&(Pn=At.apply(this,Gn)),Pn}:Dt.renderer}if(Dt.tokenizer){if(!Dt.level||"block"!==Dt.level&&"inline"!==Dt.level)throw new Error("extension level must be 'block' or 'inline'");Be[Dt.level]?Be[Dt.level].unshift(Dt.tokenizer):Be[Dt.level]=[Dt.tokenizer],Dt.start&&("block"===Dt.level?Be.startBlock?Be.startBlock.push(Dt.start):Be.startBlock=[Dt.start]:"inline"===Dt.level&&(Be.startInline?Be.startInline.push(Dt.start):Be.startInline=[Dt.start]))}Dt.childTokens&&(Be.childTokens[Dt.name]=Dt.childTokens)})),Qe.renderer&&function(){var Dt=en.defaults.renderer||new bs,At=function(pr){var Pn=Dt[pr];Dt[pr]=function(){for(var bn=arguments.length,Qn=new Array(bn),xn=0;xn<bn;xn++)Qn[xn]=arguments[xn];var wi=Qe.renderer[pr].apply(Dt,Qn);return!1===wi&&(wi=Pn.apply(Dt,Qn)),wi}};for(var Xt in Qe.renderer)At(Xt);ve.renderer=Dt}(),Qe.tokenizer&&function(){var Dt=en.defaults.tokenizer||new xr,At=function(pr){var Pn=Dt[pr];Dt[pr]=function(){for(var bn=arguments.length,Qn=new Array(bn),xn=0;xn<bn;xn++)Qn[xn]=arguments[xn];var wi=Qe.tokenizer[pr].apply(Dt,Qn);return!1===wi&&(wi=Pn.apply(Dt,Qn)),wi}};for(var Xt in Qe.tokenizer)At(Xt);ve.tokenizer=Dt}(),Qe.walkTokens){var wt=en.defaults.walkTokens;ve.walkTokens=function(Dt){Qe.walkTokens.call(it,Dt),wt&&wt(Dt)}}lt&&(ve.extensions=Be),en.setOptions(ve)})},en.walkTokens=function(it,ot){for(var ve,ut=function(){var lt=ve.value;switch(ot(lt),lt.type){case"table":for(var wt,Qe=xt(lt.tokens.header);!(wt=Qe()).done;)en.walkTokens(wt.value,ot);for(var Xt,At=xt(lt.tokens.cells);!(Xt=At()).done;)for(var Pn,pr=xt(Xt.value);!(Pn=pr()).done;)en.walkTokens(Pn.value,ot);break;case"list":en.walkTokens(lt.items,ot);break;default:en.defaults.extensions&&en.defaults.extensions.childTokens&&en.defaults.extensions.childTokens[lt.type]?en.defaults.extensions.childTokens[lt.type].forEach(function(Qn){en.walkTokens(lt[Qn],ot)}):lt.tokens&&en.walkTokens(lt.tokens,ot)}},pe=xt(it);!(ve=pe()).done;)ut()},en.parseInline=function(it,ot){if(null==it)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof it)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(it)+", string expected");ot=Mo({},en.defaults,ot||{}),vs(ot);try{var ut=Xn.lexInline(it,ot);return ot.walkTokens&&en.walkTokens(ut,ot.walkTokens),kr.parseInline(ut,ot)}catch(pe){if(pe.message+="\nPlease report this to https://github.com/markedjs/marked.",ot.silent)return"<p>An error occurred:</p><pre>"+Tc(pe.message+"",!0)+"</pre>";throw pe}},en.Parser=kr,en.parser=kr.parse,en.Renderer=bs,en.TextRenderer=Ao,en.Lexer=Xn,en.lexer=Xn.lex,en.Tokenizer=xr,en.Slugger=Ks,en.parse=en,en}()},369:(Vt,rt,tt)=>{var gt=tt(284),J=tt(830);function xt(){this.clear()}xt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},xt.prototype.enqueue=function(dt){return this.items.push(dt),++this.size},xt.prototype.dequeue=function(){if(this.size){var dt=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,dt}},xt.prototype.peek=function(){if(this.size)return this.items[this.offset]},xt.prototype.forEach=function(dt,Y){Y=arguments.length>1?Y:this;for(var Te=this.offset,fe=0,q=this.items.length;Te<q;Te++,fe++)dt.call(Y,this.items[Te],fe,this)},xt.prototype.toArray=function(){return this.items.slice(this.offset)},xt.prototype.values=function(){var dt=this.items,Y=this.offset;return new gt(function(){if(Y>=dt.length)return{done:!0};var Te=dt[Y];return Y++,{value:Te,done:!1}})},xt.prototype.entries=function(){var dt=this.items,Y=this.offset,Te=0;return new gt(function(){if(Y>=dt.length)return{done:!0};var fe=dt[Y];return Y++,{value:[Te++,fe],done:!1}})},"undefined"!=typeof Symbol&&(xt.prototype[Symbol.iterator]=xt.prototype.values),xt.prototype.toString=function(){return this.toArray().join(",")},xt.prototype.toJSON=function(){return this.toArray()},xt.prototype.inspect=function(){var dt=this.toArray();return Object.defineProperty(dt,"constructor",{value:xt,enumerable:!1}),dt},"undefined"!=typeof Symbol&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=xt.prototype.inspect),xt.from=function(dt){var Y=new xt;return J(dt,function(Te){Y.enqueue(Te)}),Y},xt.of=function(){return xt.from(arguments)},Vt.exports=xt},830:Vt=>{var rt="undefined"!=typeof ArrayBuffer,tt="undefined"!=typeof Symbol;function gt(J,xt){var dt,Y,Te,fe,q;if(!J)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof xt)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(J)||rt&&ArrayBuffer.isView(J)||"string"==typeof J||"[object Arguments]"===J.toString())for(Te=0,fe=J.length;Te<fe;Te++)xt(J[Te],Te);else if("function"!=typeof J.forEach)if(tt&&Symbol.iterator in J&&"function"!=typeof J.next&&(J=J[Symbol.iterator]()),"function"!=typeof J.next)for(Y in J)J.hasOwnProperty(Y)&&xt(J[Y],Y);else for(dt=J,Te=0;!0!==(q=dt.next()).done;)xt(q.value,Te),Te++;else J.forEach(xt)}gt.forEachWithNullKeys=function(J,xt){var dt,Y,Te,fe,q;if(!J)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if("function"!=typeof xt)throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(J)||rt&&ArrayBuffer.isView(J)||"string"==typeof J||"[object Arguments]"===J.toString())for(Te=0,fe=J.length;Te<fe;Te++)xt(J[Te],null);else if(J instanceof Set)J.forEach(function(H){xt(H,null)});else if("function"!=typeof J.forEach)if(tt&&Symbol.iterator in J&&"function"!=typeof J.next&&(J=J[Symbol.iterator]()),"function"!=typeof J.next)for(Y in J)J.hasOwnProperty(Y)&&xt(J[Y],Y);else for(dt=J,Te=0;!0!==(q=dt.next()).done;)xt(q.value,null),Te++;else J.forEach(xt)},Vt.exports=gt},284:Vt=>{function rt(tt){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:tt}),this.done=!1}rt.prototype.next=function(){if(this.done)return{done:!0};var tt=this._next();return tt.done&&(this.done=!0),tt},"undefined"!=typeof Symbol&&(rt.prototype[Symbol.iterator]=function(){return this}),rt.of=function(){var tt=arguments,gt=tt.length,J=0;return new rt(function(){return J>=gt?{done:!0}:{done:!1,value:tt[J++]}})},rt.empty=function(){var tt=new rt(null);return tt.done=!0,tt},rt.is=function(tt){return tt instanceof rt||"object"==typeof tt&&null!==tt&&"function"==typeof tt.next},Vt.exports=rt},310:(Vt,rt,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.isMobile=function(){return void 0!==J.window.orientation},rt.default=function(fe){if(!fe&&!(0,xt.default)())return"Node";if((0,dt.default)(fe))return"Electron";var q="undefined"!=typeof navigator?navigator:{},H=fe||q.userAgent||"";if(H.indexOf("Edge")>-1)return"Edge";var B=-1!==H.indexOf("MSIE "),se=-1!==H.indexOf("Trident/");return B||se?"IE":J.window.chrome?"Chrome":J.window.safari?"Safari":J.window.mozInnerScreenX?"Firefox":"Unknown"};var J=tt(151),xt=gt(tt(602)),dt=gt(tt(344))},151:(Vt,rt,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.console=rt.process=rt.document=rt.global=rt.window=rt.self=void 0;var J=gt(tt(321)),xt={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,J.default)(process))&&process};rt.self=xt.self||xt.window||xt.global,rt.window=xt.window||xt.self||xt.global,rt.global=xt.global||xt.self||xt.window,rt.document=xt.document||{},rt.process=xt.process||{};var H=console;rt.console=H},761:(Vt,rt,tt)=>{"use strict";var J=tt(948),xt=tt(321);Object.defineProperty(rt,"CO",{enumerable:!0,get:function(){return dt.global}}),Object.defineProperty(rt,"jU",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(rt,"qs",{enumerable:!0,get:function(){return Te.default}});var dt=tt(151),Y=H(tt(602)),Te=H(tt(310));J(tt(344));function q(B){if("function"!=typeof WeakMap)return null;var se=new WeakMap,W=new WeakMap;return(q=function(D){return D?W:se})(B)}function H(B,se){if(!se&&B&&B.__esModule)return B;if(null===B||"object"!==xt(B)&&"function"!=typeof B)return{default:B};var W=q(se);if(W&&W.has(B))return W.get(B);var E={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in B)if("default"!==P&&Object.prototype.hasOwnProperty.call(B,P)){var T=D?Object.getOwnPropertyDescriptor(B,P):null;T&&(T.get||T.set)?Object.defineProperty(E,P,T):E[P]=B[P]}return E.default=B,W&&W.set(B,E),E}},602:(Vt,rt,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=dt,rt.isBrowserMainThread=function(){return dt()&&"undefined"!=typeof document};var J=gt(tt(321)),xt=gt(tt(344));function dt(){return!("object"===("undefined"==typeof process?"undefined":(0,J.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,xt.default)()}},344:(Vt,rt,tt)=>{"use strict";var gt=tt(948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(dt){if("undefined"!=typeof window&&"object"===(0,J.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,J.default)(process.versions)&&Boolean(process.versions.electron))return!0;var Y="object"===("undefined"==typeof navigator?"undefined":(0,J.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,Te=dt||Y;return!!(Te&&Te.indexOf("Electron")>=0)};var J=gt(tt(321))},991:function(Vt,rt,tt){"use strict";var gt=this&&this.__createBinding||(Object.create?function(xt,dt,Y,Te){void 0===Te&&(Te=Y),Object.defineProperty(xt,Te,{enumerable:!0,get:function(){return dt[Y]}})}:function(xt,dt,Y,Te){void 0===Te&&(Te=Y),xt[Te]=dt[Y]}),J=this&&this.__exportStar||function(xt,dt){for(var Y in xt)"default"!==Y&&!Object.prototype.hasOwnProperty.call(dt,Y)&&gt(dt,xt,Y)};Object.defineProperty(rt,"__esModule",{value:!0}),J(tt(180),rt),J(tt(103),rt),J(tt(965),rt),J(tt(595),rt),J(tt(417),rt),J(tt(451),rt),J(tt(735),rt)},180:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.BlankNode=void 0,rt.BlankNode=class{constructor(J){this.termType="BlankNode",this.value=J}equals(J){return!!J&&"BlankNode"===J.termType&&J.value===this.value}}},103:(Vt,rt,tt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.DataFactory=void 0;const gt=tt(180),J=tt(965),xt=tt(595),dt=tt(417),Y=tt(451),Te=tt(735);let fe=0;rt.DataFactory=class{constructor(B){this.blankNodeCounter=0,this.blankNodePrefix=(B=B||{}).blankNodePrefix||`df_${fe++}_`}namedNode(B){return new dt.NamedNode(B)}blankNode(B){return new gt.BlankNode(B||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(B,se){return new xt.Literal(B,se)}variable(B){return new Te.Variable(B)}defaultGraph(){return J.DefaultGraph.INSTANCE}quad(B,se,W,E){return new Y.Quad(B,se,W,E||this.defaultGraph())}fromTerm(B){switch(B.termType){case"NamedNode":return this.namedNode(B.value);case"BlankNode":return this.blankNode(B.value);case"Literal":return B.language?this.literal(B.value,B.language):B.datatype.equals(xt.Literal.XSD_STRING)?this.literal(B.value):this.literal(B.value,this.fromTerm(B.datatype));case"Variable":return this.variable(B.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(B.subject),this.fromTerm(B.predicate),this.fromTerm(B.object),this.fromTerm(B.graph))}}fromQuad(B){return this.fromTerm(B)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},965:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.DefaultGraph=void 0;class tt{constructor(){this.termType="DefaultGraph",this.value=""}equals(J){return!!J&&"DefaultGraph"===J.termType}}rt.DefaultGraph=tt,tt.INSTANCE=new tt},595:(Vt,rt,tt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Literal=void 0;const gt=tt(417);class J{constructor(dt,Y){this.termType="Literal",this.value=dt,"string"==typeof Y?(this.language=Y,this.datatype=J.RDF_LANGUAGE_STRING):Y?(this.language="",this.datatype=Y):(this.language="",this.datatype=J.XSD_STRING)}equals(dt){return!!dt&&"Literal"===dt.termType&&dt.value===this.value&&dt.language===this.language&&dt.datatype.equals(this.datatype)}}rt.Literal=J,J.RDF_LANGUAGE_STRING=new gt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),J.XSD_STRING=new gt.NamedNode("http://www.w3.org/2001/XMLSchema#string")},417:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.NamedNode=void 0,rt.NamedNode=class{constructor(J){this.termType="NamedNode",this.value=J}equals(J){return!!J&&"NamedNode"===J.termType&&J.value===this.value}}},451:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Quad=void 0,rt.Quad=class{constructor(J,xt,dt,Y){this.termType="Quad",this.value="",this.subject=J,this.predicate=xt,this.object=dt,this.graph=Y}equals(J){return!!J&&("Quad"===J.termType||!J.termType)&&this.subject.equals(J.subject)&&this.predicate.equals(J.predicate)&&this.object.equals(J.object)&&this.graph.equals(J.graph)}}},735:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Variable=void 0,rt.Variable=class{constructor(J){this.termType="Variable",this.value=J}equals(J){return!!J&&"Variable"===J.termType&&J.value===this.value}}},609:function(Vt,rt,tt){"use strict";var gt=this&&this.__createBinding||(Object.create?function(E,D,P,T){void 0===T&&(T=P),Object.defineProperty(E,T,{enumerable:!0,get:function(){return D[P]}})}:function(E,D,P,T){void 0===T&&(T=P),E[T]=D[P]}),J=this&&this.__exportStar||function(E,D){for(var P in E)"default"!==P&&!Object.prototype.hasOwnProperty.call(D,P)&&gt(D,E,P)};Object.defineProperty(rt,"__esModule",{value:!0}),rt.getSupportedJavaScriptPrimitives=rt.getSupportedRdfDatatypes=rt.getTermRaw=rt.toRdf=rt.fromRdf=void 0;const xt=tt(991),dt=tt(938),Y=tt(60);J(tt(938),rt),J(tt(871),rt),J(tt(60),rt);const Te=new xt.DataFactory,fe=new Y.Translator;function q(E,D){return fe.fromRdf(E,D)}fe.registerHandler(new dt.TypeHandlerString,dt.TypeHandlerString.TYPES.map(E=>Te.namedNode(E)),["string"]),fe.registerHandler(new dt.TypeHandlerBoolean,[dt.TypeHandlerBoolean.TYPE].map(E=>Te.namedNode(E)),["boolean"]),fe.registerHandler(new dt.TypeHandlerNumberDouble,dt.TypeHandlerNumberDouble.TYPES.map(E=>Te.namedNode(E)),["number"]),fe.registerHandler(new dt.TypeHandlerNumberInteger,dt.TypeHandlerNumberInteger.TYPES.map(E=>Te.namedNode(E)),["number"]),fe.registerHandler(new dt.TypeHandlerDate,dt.TypeHandlerDate.TYPES.map(E=>Te.namedNode(E)),["object"]),rt.fromRdf=q,rt.toRdf=function(E,D){return D&&"namedNode"in D&&(D={dataFactory:D}),(D=D||{})&&!D.dataFactory&&(D.dataFactory=Te),fe.toRdf(E,D)},rt.getTermRaw=function(E,D){return"Literal"===E.termType?q(E,D):E.value},rt.getSupportedRdfDatatypes=function(){return fe.getSupportedRdfDatatypes()},rt.getSupportedJavaScriptPrimitives=function(){return fe.getSupportedJavaScriptPrimitives()}},871:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0})},60:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Translator=void 0,rt.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(J){throw new Error(`Invalid RDF ${J.datatype.value} value: '${J.value}'`)}registerHandler(J,xt,dt){for(const Y of xt)this.supportedRdfDatatypes.push(Y),this.fromRdfHandlers[Y.value]=J;for(const Y of dt){let Te=this.toRdfHandlers[Y];Te||(this.toRdfHandlers[Y]=Te=[]),Te.push(J)}}fromRdf(J,xt){const dt=this.fromRdfHandlers[J.datatype.value];return dt?dt.fromRdf(J,xt):J.value}toRdf(J,xt){const dt=this.toRdfHandlers[typeof J];if(dt)for(const Y of dt){const Te=Y.toRdf(J,xt);if(Te)return Te}throw new Error(`Invalid JavaScript value: '${J}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},727:(Vt,rt,tt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerBoolean=void 0;const gt=tt(60);class J{fromRdf(dt,Y){switch(dt.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return Y&&gt.Translator.incorrectRdfDataType(dt),!1}toRdf(dt,{datatype:Y,dataFactory:Te}){return Te.literal(dt?"true":"false",Y||Te.namedNode(J.TYPE))}}rt.TypeHandlerBoolean=J,J.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},525:(Vt,rt,tt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerDate=void 0;const gt=tt(60);class J{fromRdf(dt,Y){switch(Y&&!dt.value.match(J.VALIDATORS[dt.datatype.value.substr(33,dt.datatype.value.length)])&&gt.Translator.incorrectRdfDataType(dt),dt.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(dt.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const Te=dt.value.split("-");return new Date(0,parseInt(Te[0],10)-1,parseInt(Te[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(dt.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(dt.value+"-01");default:return new Date(dt.value)}}toRdf(dt,{datatype:Y,dataFactory:Te}){if(Y=Y||Te.namedNode(J.TYPES[0]),!(dt instanceof Date))return null;const fe=dt;let q;switch(Y.value){case"http://www.w3.org/2001/XMLSchema#gDay":q=String(fe.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":q=fe.getUTCMonth()+1+"-"+fe.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":q=String(fe.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":q=fe.getUTCFullYear()+"-"+(fe.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":q=fe.toISOString().replace(/T.*$/,"");break;default:q=fe.toISOString()}return Te.literal(q,Y)}}rt.TypeHandlerDate=J,J.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],J.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},554:(Vt,rt,tt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerNumberDouble=void 0;const gt=tt(60);class J{fromRdf(dt,Y){const Te=parseFloat(dt.value);return Y&&isNaN(Te)&&gt.Translator.incorrectRdfDataType(dt),Te}toRdf(dt,{datatype:Y,dataFactory:Te}){return Y=Y||Te.namedNode(J.TYPES[0]),isNaN(dt)?Te.literal("NaN",Y):isFinite(dt)?dt%1==0?null:Te.literal(dt.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Y):Te.literal(dt>0?"INF":"-INF",Y)}}rt.TypeHandlerNumberDouble=J,J.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},750:(Vt,rt,tt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerNumberInteger=void 0;const gt=tt(60);class J{fromRdf(dt,Y){const Te=parseInt(dt.value,10);return Y&&(isNaN(Te)||dt.value.indexOf(".")>=0)&&gt.Translator.incorrectRdfDataType(dt),Te}toRdf(dt,{datatype:Y,dataFactory:Te}){return Te.literal(String(dt),Y||Te.namedNode(dt<=J.MAX_INT&&dt>=J.MIN_INT?J.TYPES[0]:J.TYPES[1]))}}rt.TypeHandlerNumberInteger=J,J.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],J.MAX_INT=2147483647,J.MIN_INT=-2147483648},608:(Vt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerString=void 0;class tt{fromRdf(J){return J.value}toRdf(J,{datatype:xt,dataFactory:dt}){return dt.literal(J,xt)}}rt.TypeHandlerString=tt,tt.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},938:function(Vt,rt,tt){"use strict";var gt=this&&this.__createBinding||(Object.create?function(xt,dt,Y,Te){void 0===Te&&(Te=Y),Object.defineProperty(xt,Te,{enumerable:!0,get:function(){return dt[Y]}})}:function(xt,dt,Y,Te){void 0===Te&&(Te=Y),xt[Te]=dt[Y]}),J=this&&this.__exportStar||function(xt,dt){for(var Y in xt)"default"!==Y&&!Object.prototype.hasOwnProperty.call(dt,Y)&&gt(dt,xt,Y)};Object.defineProperty(rt,"__esModule",{value:!0}),J(tt(727),rt),J(tt(525),rt),J(tt(554),rt),J(tt(750),rt),J(tt(608),rt)},626:(Vt,rt,tt)=>{"use strict";var gt={};tt.r(gt),tt.d(gt,{decode:()=>nMe,encode:()=>rMe});var J={};tt.r(J),tt.d(J,{decode:()=>cMe,encode:()=>lMe});var xt={};tt.r(xt),tt.d(xt,{decode:()=>uMe,encode:()=>dMe});var dt={};function Y(n){return"function"==typeof n}tt.r(dt),tt.d(dt,{decode:()=>hMe,encode:()=>fMe});let Te=!1;const fe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Te&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Te=n},get useDeprecatedSynchronousErrorHandling(){return Te}};function q(n){setTimeout(()=>{throw n},0)}const H={closed:!0,next(n){},error(n){if(fe.useDeprecatedSynchronousErrorHandling)throw n;q(n)},complete(){}},B=Array.isArray||(n=>n&&"number"==typeof n.length);function se(n){return null!==n&&"object"==typeof n}const E=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class D{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof D)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Y(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof E?P(o.errors):[o]}}if(B(s)){let o=-1,a=s.length;for(;++o<a;){const c=s[o];if(se(c))try{c.unsubscribe()}catch(l){e=e||[],l instanceof E?e=e.concat(P(l.errors)):e.push(l)}}}if(e)throw new E(e)}add(e){let t=e;if(!e)return D.EMPTY;switch(typeof e){case"function":t=new D(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof D)){const s=t;t=new D,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof D){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}var n;function P(n){return n.reduce((e,t)=>e.concat(t instanceof E?t.errors:t),[])}D.EMPTY=((n=new D).closed=!0,n);const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class v extends D{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=H;break;case 1:if(!e){this.destination=H;break}if("object"==typeof e){e instanceof v?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new C(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new C(this,e,t,r)}}[T](){return this}static create(e,t,r){const i=new v(e,t,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class C extends v{constructor(e,t,r,i){super(),this._parentSubscriber=e;let s,o=this;Y(t)?s=t:t&&(s=t.next,r=t.error,i=t.complete,t!==H&&(o=Object.create(t),Y(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;fe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=fe;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):q(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;q(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);fe.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),fe.useDeprecatedSynchronousErrorHandling)throw r;q(r)}}__tryOrSetError(e,t,r){if(!fe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return fe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(q(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const O="function"==typeof Symbol&&Symbol.observable||"@@observable";function G(n){return n}let L=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof v)return n;if(n[T])return n[T]()}return n||e||t?new v(n,e,t):new v(H)}(t,r,i);if(o.add(s?s.call(o,this.source):this.source||fe.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),fe.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){fe.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof v?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=Q(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[O](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?G:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=Q(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Q(n){if(n||(n=fe.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const z=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class ie extends D{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class de extends v{constructor(e){super(e),this.destination=e}}let te=(()=>{class n extends L{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[T](){return new de(this)}lift(t){const r=new oe(this,this);return r.operator=t,r}next(t){if(this.closed)throw new z;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(t)}}error(t){if(this.closed)throw new z;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new z;this.isStopped=!0;const{observers:t}=this,r=t.length,i=t.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new z;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new z;return this.hasError?(t.error(this.thrownError),D.EMPTY):this.isStopped?(t.complete(),D.EMPTY):(this.observers.push(t),new ie(this,t))}asObservable(){const t=new L;return t.source=this,t}}return n.create=(e,t)=>new oe(e,t),n})();class oe extends te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):D.EMPTY}}function Ae(n){return n&&"function"==typeof n.schedule}function me(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new ne(n,e))}}class ne{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new be(e,this.project,this.thisArg))}}class be extends v{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Re=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},Ze="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Le=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ce(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Ne=n=>{if(n&&"function"==typeof n[O])return(n=>e=>{const t=n[O]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Le(n))return Re(n);if(Ce(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,q),e))(n);if(n&&"function"==typeof n[Ze])return(n=>e=>{const t=n[Ze]();for(;;){let r;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${se(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function Ve(n,e){return new L(t=>{const r=new D;let i=0;return r.add(e.schedule(function(){i!==n.length?(t.next(n[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function Fe(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[O]}(n))return function(n,e){return new L(t=>{const r=new D;return r.add(e.schedule(()=>{const i=n[O]();r.add(i.subscribe({next(s){r.add(e.schedule(()=>t.next(s)))},error(s){r.add(e.schedule(()=>t.error(s)))},complete(){r.add(e.schedule(()=>t.complete()))}}))})),r})}(n,e);if(Ce(n))return function(n,e){return new L(t=>{const r=new D;return r.add(e.schedule(()=>n.then(i=>{r.add(e.schedule(()=>{t.next(i),r.add(e.schedule(()=>t.complete()))}))},i=>{r.add(e.schedule(()=>t.error(i)))}))),r})}(n,e);if(Le(n))return Ve(n,e);if(function(n){return n&&"function"==typeof n[Ze]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new L(t=>{const r=new D;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=n[Ze](),r.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=i.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),r})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof L?n:new L(Ne(n))}class Et extends v{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ge extends v{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function N(n,e){if(e.closed)return;if(n instanceof L)return n.subscribe(e);let t;try{t=Ne(n)(e)}catch(r){e.error(r)}return t}function V(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((i,s)=>Fe(n(i,s)).pipe(me((o,a)=>e(i,o,s,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new Pe(n,t)))}class Pe{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Xe(e,this.project,this.concurrent))}}class Xe extends ge{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new Et(this),r=this.destination;r.add(t);const i=N(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Rt(n=Number.POSITIVE_INFINITY){return V(G,n)}function In(n,e){return e?Ve(n,e):new L(Re(n))}function kn(...n){let e=Number.POSITIVE_INFINITY,t=null,r=n[n.length-1];return Ae(r)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof r&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof L?n[0]:Rt(e)(In(n,t))}function Xn(){return function(e){return e.lift(new kr(e))}}class kr{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const i=new xr(e,r),s=t.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class xr extends v{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class bs extends L{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new D,e.add(this.source.subscribe(new Ks(this.getSubject(),this))),e.closed&&(this._connection=null,e=D.EMPTY)),e}refCount(){return Xn()(this)}}const Ao=(()=>{const n=bs.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Ks extends de{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Tc(n,e){return function(r){let i;if(i="function"==typeof n?n:function(){return n},"function"==typeof e)return r.lift(new su(i,e));const s=Object.create(r,Ao);return s.source=r,s.subjectFactory=i,s}}class su{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:r}=this,i=this.subjectFactory(),s=r(i).subscribe(e);return s.add(t.subscribe(i)),s}}function Ac(){return new te}function oo(){return n=>Xn()(Tc(Ac)(n))}function en(n){for(let e in n)if(n[e]===en)return e;throw Error("Could not find renamed property on target object.")}function dl(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function it(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(it).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ot(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ut=en({__forward_ref__:en});function pe(n){return n.__forward_ref__=pe,n.toString=function(){return it(this())},n}function ve(n){return Be(n)?n():n}function Be(n){return"function"==typeof n&&n.hasOwnProperty(ut)&&n.__forward_ref__===pe}class Qe extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function At(n){return"string"==typeof n?n:null==n?"":String(n)}function Xt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():At(n)}function bn(n,e){const t=e?` in ${e}`:"";throw new Qe("201",`No provider for ${Xt(n)} found${t}`)}function Z(n,e){null==n&&function(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function We(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function vn(n){return ao(n,sa)||ao(n,Io)}function ao(n,e){return n.hasOwnProperty(e)?n[e]:null}function ou(n){return n&&(n.hasOwnProperty(cs)||n.hasOwnProperty(hd))?n[cs]:null}const sa=en({\u0275prov:en}),cs=en({\u0275inj:en}),Io=en({ngInjectableDef:en}),hd=en({ngInjectorDef:en});var Sn=(()=>((Sn=Sn||{})[Sn.Default=0]="Default",Sn[Sn.Host=1]="Host",Sn[Sn.Self=2]="Self",Sn[Sn.SkipSelf=4]="SkipSelf",Sn[Sn.Optional=8]="Optional",Sn))();let oa;function Ic(n){const e=oa;return oa=n,e}function Of(n,e,t){const r=vn(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Sn.Optional?null:void 0!==e?e:void bn(it(n),"Injector")}function xe(n){return{toString:n}.toString()}var Ge=(()=>((Ge=Ge||{})[Ge.OnPush=0]="OnPush",Ge[Ge.Default=1]="Default",Ge))(),Wt=(()=>((Wt=Wt||{})[Wt.Emulated=0]="Emulated",Wt[Wt.None=2]="None",Wt[Wt.ShadowDom=3]="ShadowDom",Wt))();const gr="undefined"!=typeof globalThis&&globalThis,ls="undefined"!=typeof window&&window,Cs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,co="undefined"!=typeof global&&global,hr=gr||co||ls||Cs,Nf={},_i=[],Zm=en({\u0275cmp:en}),Av=en({\u0275dir:en}),ng=en({\u0275pipe:en}),SS=en({\u0275mod:en}),vR=en({\u0275loc:en}),cu=en({\u0275fac:en}),rg=en({__NG_ELEMENT_ID__:en});let wR=0;function wn(n){return xe(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||_i,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Wt.Emulated,id:"c",styles:n.styles||_i,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=wR++,r.inputs=AS(n.inputs,t),r.outputs=AS(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(DS):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(xS):null,r})}function DS(n){return Zr(n)||function(n){return n[Av]||null}(n)}function xS(n){return function(n){return n[ng]||null}(n)}const TS={};function hn(n){return xe(()=>{const e={type:n.type,bootstrap:n.bootstrap||_i,declarations:n.declarations||_i,imports:n.imports||_i,exports:n.exports||_i,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(TS[n.id]=n.type),e})}function AS(n,e){if(null==n)return Nf;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Lt=wn;function Ro(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Zr(n){return n[Zm]||null}function xa(n,e){const t=n[SS]||null;if(!t&&!0===e)throw new Error(`Type ${it(n)} does not have '\u0275mod' property.`);return t}function Za(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ja(n){return Array.isArray(n)&&!0===n[1]}function Rv(n){return 0!=(8&n.flags)}function Lf(n){return 2==(2&n.flags)}function Bf(n){return 1==(1&n.flags)}function Nc(n){return null!==n.template}function MS(n){return 0!=(512&n[2])}function gd(n,e){return n.hasOwnProperty(cu)?n[cu]:null}class Fv{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ai(){return OS}function OS(n){return n.type.prototype.ngOnChanges&&(n.setInput=MR),AR}function AR(){const n=st(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Nf)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function MR(n,e,t,r){const i=st(n)||function(n,e){return n[lg]=e}(n,{previous:Nf,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],c=o[a];s[a]=new Fv(c&&c.currentValue,e,o===Nf),n[r]=e}ai.ngInherit=!0;const lg="__ngSimpleChanges__";function st(n){return n[lg]||null}let ci;function Mi(n){return!!n.listen}const vh={createRenderer:(n,e)=>void 0!==ci?ci:"undefined"!=typeof document?document:void 0};function $i(n){for(;Array.isArray(n);)n=n[0];return n}function ug(n,e){return $i(e[n])}function Wo(n,e){return $i(e[n.index])}function Bv(n,e){return n.data[e]}function Vf(n,e){return n[e]}function No(n,e){const t=e[n];return Za(t)?t:t[0]}function du(n){return 4==(4&n[2])}function jf(n){return 128==(128&n[2])}function Fc(n,e){return null==e?null:n[e]}function Vv(n){n[18]=0}function t_(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Vn={lFrame:Eh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function PS(){return Vn.bindingsEnabled}function Bt(){return Vn.lFrame.lView}function Tr(){return Vn.lFrame.tView}function es(n){return Vn.lFrame.contextLView=n,n[8]}function ks(){let n=jv();for(;null!==n&&64===n.type;)n=n.parent;return n}function jv(){return Vn.lFrame.currentTNode}function pl(n,e){const t=Vn.lFrame;t.currentTNode=n,t.isParent=e}function hs(){return Vn.lFrame.isParent}function Xs(){Vn.lFrame.isParent=!1}function fg(){return Vn.isInCheckNoChangesMode}function r_(n){Vn.isInCheckNoChangesMode=n}function uo(){const n=Vn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function kc(){return Vn.lFrame.bindingIndex++}function Aa(n){const e=Vn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Uf(n,e){const t=Vn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uv(e)}function Uv(n){Vn.lFrame.currentDirectiveIndex=n}function FS(){return Vn.lFrame.currentQueryIndex}function zv(n){Vn.lFrame.currentQueryIndex=n}function s_(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Hf(n,e,t){if(t&Sn.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Sn.Host||(i=s_(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Vn.lFrame=Se();return r.currentTNode=e,r.lView=n,!0}function mg(n){const e=Se(),t=n[1];Vn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Se(){const n=Vn.lFrame,e=null===n?null:n.child;return null===e?Eh(n):e}function Eh(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _g(){const n=Vn.lFrame;return Vn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ma=_g;function yr(){const n=_g();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qo(){return Vn.lFrame.selectedIndex}function la(n){Vn.lFrame.selectedIndex=n}function ts(){const n=Vn.lFrame;return Bv(n.tView,n.selectedIndex)}function o_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function a_(n,e,t){gl(n,e,3,t)}function c_(n,e,t,r){(3&n[2])===t&&gl(n,e,t,r)}function $v(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function gl(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(zR(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function zR(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class yg{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function l_(n,e,t){const r=Mi(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],c=t[i++];r?n.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=t[++i];Wv(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function kS(n){return 3===n||4===n||6===n}function Wv(n){return 64===n.charCodeAt(0)}function bg(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||qv(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function qv(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function LS(n){return-1!==n}function zf(n){return 32767&n}function ml(n,e){let t=function(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let $f=!0;function u_(n){const e=$f;return $f=n,e}let Kv=0;function Po(n,e){const t=d_(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Xv(r.data,n),Xv(e,null),Xv(r.blueprint,null));const i=vg(n,e),s=n.injectorIndex;if(LS(i)){const o=zf(i),a=ml(i,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Xv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function d_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function vg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function _d(n,e,t){!function(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(rg)&&(r=t[rg]),null==r&&(r=t[rg]=Kv++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Qv(n,e,t){if(t&Sn.Optional)return n;bn(e,"NodeInjector")}function VS(n,e,t,r){if(t&Sn.Optional&&void 0===r&&(r=null),0==(t&(Sn.Self|Sn.Host))){const i=n[9],s=Ic(void 0);try{return i?i.get(e,r,t&Sn.Optional):Of(e,r,t&Sn.Optional)}finally{Ic(s)}}return Qv(r,e,t)}function wg(n,e,t,r=Sn.Default,i){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(rg)?n[rg]:void 0;return"number"==typeof e?e>=0?255&e:US:e}(t);if("function"==typeof s){if(!Hf(e,n,r))return r&Sn.Host?Qv(i,t,r):VS(e,t,r,i);try{const o=s(r);if(null!=o||r&Sn.Optional)return o;bn(t)}finally{Ma()}}else if("number"==typeof s){let o=null,a=d_(n,e),c=-1,l=r&Sn.Host?e[16][6]:null;for((-1===a||r&Sn.SkipSelf)&&(c=-1===a?vg(n,e):e[a+8],-1!==c&&Eg(r,!1)?(o=e[1],a=zf(c),e=ml(c,e)):a=-1);-1!==a;){const u=e[1];if(h_(s,a,u.data)){const h=ho(a,e,t,o,r,l);if(h!==jS)return h}c=e[a+8],-1!==c&&Eg(r,e[1].data[a+8]===l)&&h_(s,a,e)?(o=u,a=zf(c),e=ml(c,e)):a=-1}}}return VS(e,t,r,i)}const jS={};function US(){return new tc(ks(),Bt())}function ho(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=Gf(a,o,t,null==r?Lf(a)&&$f:r!=o&&0!=(3&a.type),i&Sn.Host&&s===a);return null!==u?Wf(e,o,u,a):jS}function Gf(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,f=i?a+u:n.directiveEnd;for(let g=r?a:a+u;g<f;g++){const m=o[g];if(g<c&&t===m||g>=c&&m.type===t)return g}if(i){const g=o[c];if(g&&Nc(g)&&g.type===t)return c}return null}function Wf(n,e,t,r){let i=n[t];const s=e.data;if(function(n){return n instanceof yg}(i)){const o=i;o.resolving&&function(n,e){throw new Qe("200",`Circular dependency in DI detected for ${n}`)}(Xt(s[t]));const a=u_(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ic(o.injectImpl):null;Hf(n,r,Sn.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=OS(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Ic(c),u_(a),o.resolving=!1,Ma()}}return i}function h_(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Eg(n,e){return!(n&Sn.Self||n&Sn.Host&&e)}class tc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return wg(this._tNode,this._lView,e,void 0,t)}}function ui(n){return xe(()=>{const e=n.prototype.constructor,t=e[cu]||fo(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[cu]||fo(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function fo(n){return Be(n)?()=>{const e=fo(ve(n));return e&&e()}:gd(n)}const Yf="__parameters__";function Vc(n,e,t){return xe(()=>{const r=function(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(Yf)?c[Yf]:Object.defineProperty(c,Yf,{value:[]})[Yf];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class $t{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=We({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function rc(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),rc(r,e)):e!==n&&e.push(r)}return e}function ic(n,e){n.forEach(t=>Array.isArray(t)?ic(t,e):e(t))}function Sg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ia(n,e,t){let r=po(n,e);return r>=0?n[1|r]=t:(r=~r,function(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function r0(n,e){const t=po(n,e);if(t>=0)return n[1|t]}function po(n,e){return function(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Ah={},__="__NG_DI_FLAG__",wd="ngTempTokenPath",Ed=/\n/gm,bl="__source",y_=en({provide:String,useValue:en});let Mh;function Qf(n){const e=Mh;return Mh=n,e}function iO(n,e=Sn.Default){if(void 0===Mh)throw new Error("inject() must be called from an injection context");return null===Mh?Of(n,void 0,e):Mh.get(n,e&Sn.Optional?null:void 0,e)}function Oe(n,e=Sn.Default){return(oa||iO)(ve(n),e)}const Cd=Oe;function Ih(n){const e=[];for(let t=0;t<n.length;t++){const r=ve(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,s=Sn.Default;for(let o=0;o<r.length;o++){const a=r[o],c=qS(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(Oe(i,s))}else e.push(Oe(r))}return e}function Zf(n,e){return n[__]=e,n.prototype[__]=e,n}function qS(n){return n[__]}function Yo(n,e,t,r){const i=n[wd];throw e[bl]&&i.unshift(e[bl]),n.message=function(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=it(e);if(Array.isArray(e))i=e.map(it).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):it(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Ed,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[wd]=null,n}const Jf=Zf(Vc("Inject",n=>({token:n})),-1),Ds=Zf(Vc("Optional"),8),vl=Zf(Vc("SkipSelf"),4);function Fo(n){return n instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}const w0="__ngContext__";function go(n,e){n[w0]=e}function E0(n){const e=function(n){return n[w0]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function I_(n){return n.ngOriginalError}function AO(n,...e){n.error(...e)}class cc{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=this._findContext(e),i=function(n){return n&&n.ngErrorLogger||AO}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(I_(e)):null}_findOriginalError(e){let t=e&&I_(e);for(;t&&I_(t);)t=I_(t);return t||null}}const vD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(hr))();function El(n){return n instanceof Function?n():n}var Na=(()=>((Na=Na||{})[Na.Important=1]="Important",Na[Na.DashCase=2]="DashCase",Na))();function T0(n,e){return undefined(n,e)}function Rg(n){const e=n[3];return Ja(e)?e[3]:e}function sp(n){return DD(n[13])}function M0(n){return DD(n[4])}function DD(n){for(;null!==n&&!Ja(n);)n=n[4];return n}function op(n,e,t,r,i){if(null!=r){let s,o=!1;Ja(r)?s=r:Za(r)&&(o=!0,r=r[0]);const a=$i(r);0===n&&null!==t?null==i?ID(e,t,a):Cl(e,t,a,i||null,!0):1===n&&null!==t?Cl(e,t,a,i||null,!0):2===n?function(n,e,t){const r=N_(n,e);r&&function(n,e,t,r){Mi(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,r,i){const s=t[7];s!==$i(t)&&op(e,n,r,s,i);for(let a=10;a<t.length;a++){const c=t[a];ap(c[1],c,n,e,r,s)}}(e,n,s,t,i)}}function R0(n,e,t){return Mi(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function TD(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,t_(i,-1)),t.splice(r,1)}function O0(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&TD(i,r),e>0&&(n[t-1][4]=r[4]);const s=fu(n,10+e);!function(n,e){ap(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function N0(n,e){if(!(256&e[2])){const t=e[11];Mi(t)&&t.destroyNode&&ap(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return O_(n[1],n);for(;e;){let t=null;if(Za(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Za(e)&&O_(e[1],e),e=e[3];null===e&&(e=n),Za(e)&&O_(e[1],e),t=e&&e[4]}e=t}}(e)}}function O_(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof yg)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):$i(e[o]),c=r[i=t[s+2]],l=t[s+3];"boolean"==typeof l?a.removeEventListener(t[s],c,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&Mi(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Ja(e[3])){t!==e[3]&&TD(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function AD(n,e,t){return function(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Wt.None||i===Wt.Emulated)return null}return Wo(r,t)}(n,e.parent,t)}function Cl(n,e,t,r,i){Mi(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function ID(n,e,t){Mi(n)?n.appendChild(e,t):e.appendChild(t)}function RD(n,e,t,r,i){null!==r?Cl(n,e,t,r,i):ID(n,e,t)}function N_(n,e){return Mi(n)?n.parentNode(e):e.parentNode}function OD(n,e,t){return PD(n,e,t)}let PD=function(n,e,t){return 40&n.type?Wo(n,t):null};function P_(n,e,t,r){const i=AD(n,r,e),s=e[11],a=OD(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)RD(s,i,t[c],a,!1);else RD(s,i,t,a,!1)}function Ph(n,e){if(null!==e){const t=e.type;if(3&t)return Wo(e,n);if(4&t)return F_(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Ph(n,r);{const i=n[e.index];return Ja(i)?F_(-1,i):$i(i)}}if(32&t)return T0(e,n)()||$i(n[e.index]);{const r=kD(n,e);return null!==r?Array.isArray(r)?r[0]:Ph(Rg(n[16]),r):Ph(n,e.next)}}return null}function kD(n,e){return null!==e?n[16][6].projection[e.projection]:null}function F_(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Ph(r,i)}return e[7]}function Og(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&go($i(a),r),t.flags|=4),64!=(64&t.flags))if(8&c)Og(n,e,t.child,r,i,s,!1),op(e,n,i,a,s);else if(32&c){const l=T0(t,r);let u;for(;u=l();)op(e,n,i,u,s);op(e,n,i,a,s)}else 16&c?k0(n,e,r,t,i,s):op(e,n,i,a,s);t=o?t.projectionNext:t.next}}function ap(n,e,t,r,i,s){Og(t,r,n.firstChild,e,i,s,!1)}function k0(n,e,t,r,i,s){const o=t[16],c=o[6].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)op(e,n,i,c[l],s);else Og(n,e,c,o[3],i,s,!0)}function VD(n,e,t){Mi(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function L0(n,e,t){Mi(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Ng(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const jD="ng-template";function JO(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Ng(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function k_(n){return 4===n.type&&n.value!==jD}function UD(n,e,t){return e===(4!==n.type||t?n.value:jD)}function eN(n,e,t){let r=4;const i=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(kS(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!UD(n,c,t)||""===c&&1===e.length){if(Uc(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!JO(n.attrs,l,t)){if(Uc(r))return!1;o=!0}continue}const h=tN(8&r?"class":c,i,k_(n),t);if(-1===h){if(Uc(r))return!1;o=!0;continue}if(""!==l){let f;f=h>s?"":i[h+1].toLowerCase();const g=8&r?f:null;if(g&&-1!==Ng(g,l,0)||2&r&&l!==f){if(Uc(r))return!1;o=!0}}}}else{if(!o&&!Uc(r)&&!Uc(c))return!1;if(o&&Uc(c))continue;o=!1,r=c|1&r}}return Uc(r)||o}function Uc(n){return 0==(1&n)}function tN(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function HD(n,e,t=!1){for(let r=0;r<e.length;r++)if(eN(n,e[r],t))return!0;return!1}function sN(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function zD(n,e){return n?":not("+e.trim()+")":e}function oN(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Uc(o)&&(e+=zD(s,i),i=""),r=o,s=s||!Uc(r);t++}return""!==i&&(e+=zD(s,i)),e}const Mn={};function Qt(n){$D(Tr(),Bt(),qo()+n,fg())}function $D(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&a_(e,s,t)}else{const s=n.preOrderHooks;null!==s&&c_(e,s,0,t)}la(t)}function Sl(n,e){return n<<17|e<<2}function Rn(n){return n>>17&32767}function Gi(n){return 2|n}function yu(n){return(131068&n)>>2}function Dl(n,e){return-131069&n|e<<2}function V0(n){return 1|n}function JD(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];zv(i),o.contentQueries(2,e[s],s)}}}function Fg(n,e,t,r,i,s,o,a,c,l){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,Vv(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=c||n&&n[12]||null,u[9]=l||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function lp(n,e,t,r,i){let s=n.data[e];if(null===s)s=function(n,e,t,r,i){const s=jv(),o=hs(),c=n.data[e]=function(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,r,i),Vn.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function(){const n=Vn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return pl(s,!0),s}function up(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function kg(n,e,t){mg(e);try{const r=n.viewQuery;null!==r&&tw(1,r,t);const i=n.template;null!==i&&ex(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&JD(n,e),n.staticViewQueries&&tw(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)kN(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,yr()}}function dp(n,e,t,r){const i=e[2];if(256==(256&i))return;mg(e);const s=fg();try{Vv(e),function(n){Vn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ex(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const l=n.preOrderCheckHooks;null!==l&&a_(e,l,null)}else{const l=n.preOrderHooks;null!==l&&c_(e,l,0,null),$v(e,0)}if(function(n){for(let e=sp(n);null!==e;e=M0(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&t_(s,1),i[2]|=1024}}}(e),function(n){for(let e=sp(n);null!==e;e=M0(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];jf(r)&&dp(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&JD(n,e),!s)if(o){const l=n.contentCheckHooks;null!==l&&a_(e,l)}else{const l=n.contentHooks;null!==l&&c_(e,l,1),$v(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)la(~i);else{const s=i,o=t[++r],a=t[++r];Uf(o,s),a(2,e[s])}}}finally{la(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)FN(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&tw(2,c,r),!s)if(o){const l=n.viewCheckHooks;null!==l&&a_(e,l)}else{const l=n.viewHooks;null!==l&&c_(e,l,2),$v(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,t_(e[3],-1))}finally{yr()}}function bN(n,e,t,r){const i=e[10],s=!fg(),o=du(e);try{s&&!o&&i.begin&&i.begin(),o&&kg(n,e,r),dp(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function ex(n,e,t,r,i){const s=qo(),o=2&r;try{la(-1),o&&e.length>20&&$D(n,e,20,fg()),t(r,i)}finally{la(s)}}function Lg(n,e,t){!PS()||(function(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Po(t,e),go(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=Nc(c);l&&IN(e,t,c);const u=Wf(e,n,a,t);go(u,e),null!==o&&RN(0,a-i,u,c,0,o),l&&(No(t.index,e)[8]=u)}}(n,e,t,Wo(t,e)),128==(128&t.flags)&&function(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=Vn.lFrame.currentDirectiveIndex;try{la(o);for(let c=r;c<i;c++){const l=n.data[c],u=e[c];Uv(c),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&ux(l,u)}}finally{la(-1),Uv(a)}}(n,e,t))}function W0(n,e,t=Wo){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function j_(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=U_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function U_(n,e,t,r,i,s,o,a,c,l){const u=20+r,h=u+i,f=function(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Mn);return t}(u,h),g="function"==typeof l?l():l;return f[1]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1}}function rx(n,e,t,r){const i=px(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&z_(n).push(r,i.length-1))}function ix(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Pa(n,e,t,r,i,s,o,a){const c=Wo(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(gx(n,t,u,r,i),Lf(e)&&function(n,e){const t=No(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,Mi(s)?s.setProperty(c,r,i):Wv(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function q0(n,e,t,r){let i=!1;if(PS()){const s=function(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];HD(t,o.selectors,!1)&&(i||(i=[]),_d(Po(t,e),n,o.type),Nc(o)?(dx(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,Y0(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const h=s[u];h.providersResolver&&h.providersResolver(h)}let a=!1,c=!1,l=up(n,e,s.length,null);for(let u=0;u<s.length;u++){const h=s[u];t.mergedAttrs=bg(t.mergedAttrs,h.hostAttrs),K0(n,t,e,l,h),MN(l,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const f=h.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}!function(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<r;l++){const u=i[l],h=u.inputs,f=null===s||k_(e)?null:ON(h,s);o.push(f),a=ix(h,l,a),c=ix(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}(n,t)}o&&function(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new Qe("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=bg(t.mergedAttrs,t.attrs),i}function lx(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(r,i,o)}}function ux(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function dx(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function MN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Nc(e)&&(t[""]=n)}}function Y0(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function K0(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=gd(i.type)),o=new yg(s,Nc(i),null);n.blueprint[r]=o,t[r]=o,lx(n,e,0,r,up(n,t,i.hostVars,Mn),i)}function IN(n,e,t){const r=Wo(e,n),i=j_(t),s=n[10],o=H_(n,Fg(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function Tl(n,e,t,r,i,s){const o=Wo(n,e);!function(n,e,t,r,i,s,o){if(null==s)Mi(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?At(s):o(s,r||"",i);Mi(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function RN(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],h=o[c++];null!==a?r.setInput(t,h,l,u):t[u]=h}}}function ON(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function hx(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function FN(n,e){const t=No(e,n);if(jf(t)){const r=t[1];80&t[2]?dp(r,t,r.template,t[8]):t[5]>0&&Q0(t)}}function Q0(n){for(let r=sp(n);null!==r;r=M0(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];dp(o,s,o.template,s[8])}else s[5]>0&&Q0(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=No(t[r],n);jf(i)&&i[5]>0&&Q0(i)}}function kN(n,e){const t=No(e,n),r=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),kg(r,t,t[8])}function H_(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Z0(n){for(;n;){n[2]|=64;const e=Rg(n);if(MS(n)&&!e)return n;n=e}return null}function ew(n,e,t){const r=e[10];r.begin&&r.begin();try{dp(n,e,n.template,t)}catch(i){throw rw(e,i),i}finally{r.end&&r.end()}}function fx(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=E0(t),i=r[1];bN(i,r,i.template,t)}}(n[8])}function tw(n,e,t){zv(0),e(n,t)}const UN=(()=>Promise.resolve(null))();function px(n){return n[7]||(n[7]=[])}function z_(n){return n.cleanup||(n.cleanup=[])}function rw(n,e){const t=n[9],r=t?t.get(cc,null):null;r&&r.handleError(e)}function gx(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function bu(n,e,t){const r=ug(e,n);!function(n,e,t){Mi(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function $_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=ot(i,a):2==s&&(r=ot(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const fp=new $t("INJECTOR",-1);class Qo{get(e,t=Ah){if(t===Ah){const r=new Error(`NullInjectorError: No provider for ${it(e)}!`);throw r.name="NullInjectorError",r}return t}}const Fh=new $t("Set Injector scope."),Bg={},zN={};let sw;function mx(){return void 0===sw&&(sw=new Qo),sw}function _x(n,e=null,t=null,r){return new aw(n,t,e||mx(),r)}class aw{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ic(t,a=>this.processProvider(a,e,t)),ic([e],a=>this.processInjectorType(a,[],s)),this.records.set(fp,kh(void 0,this));const o=this.records.get(Fh);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:it(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Ah,r=Sn.Default){this.assertNotDestroyed();const i=Qf(this),s=Ic(void 0);try{if(!(r&Sn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof $t}(e)&&vn(e);a=c&&this.injectableDefInScope(c)?kh(cw(e),Bg):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Sn.Self?mx():this.parent).get(e,t=r&Sn.Optional&&t===Ah?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[wd]=o[wd]||[]).unshift(it(e)),i)throw o;return Yo(o,e,"R3InjectorError",this.source)}throw o}finally{Ic(s),Qf(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(it(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,r){if(!(e=ve(e)))return!1;let i=ou(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=ou(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{ic(i.imports,h=>{this.processInjectorType(h,t,r)&&(void 0===u&&(u=[]),u.push(h))})}finally{}if(void 0!==u)for(let h=0;h<u.length;h++){const{ngModule:f,providers:g}=u[h];ic(g,m=>this.processProvider(m,f,g||_i))}}this.injectorDefTypes.add(o);const c=gd(o)||(()=>new o);this.records.set(o,kh(c,Bg));const l=i.providers;if(null!=l&&!a){const u=e;ic(l,h=>this.processProvider(h,u,l))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Ad(e=ve(e))?e:ve(e&&e.provide);const s=function(n,e,t){return bx(n)?kh(void 0,n.useValue):kh(yx(n),Bg)}(e);if(Ad(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=kh(void 0,Bg,!0),o.factory=()=>Ih(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===Bg&&(t.value=zN,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ve(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function cw(n){const e=vn(n),t=null!==e?e.factory:gd(n);if(null!==t)return t;if(n instanceof $t)throw new Error(`Token ${it(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const r=bd(e,"?");throw new Error(`Can't resolve all parameters for ${it(n)}: (${r.join(", ")}).`)}const t=function(n){const e=n&&(n[sa]||n[Io]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function yx(n,e,t){let r;if(Ad(n)){const i=ve(n);return gd(i)||cw(i)}if(bx(n))r=()=>ve(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ih(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))r=()=>Oe(ve(n.useExisting));else{const i=ve(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return gd(i)||cw(i);r=()=>new i(...Ih(n.deps))}return r}function kh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bx(n){return null!==n&&"object"==typeof n&&y_ in n}function Ad(n){return"function"==typeof n}const vx=function(n,e,t){return function(n,e=null,t=null,r){const i=_x(n,e,t,r);return i._resolveInjectorDefTypes(),i}({name:t},e,n,t)};class Wn{static create(e,t){return Array.isArray(e)?vx(e,t,""):vx(e.providers,e.parent,e.name||"")}}function Dce(n,e){o_(E0(n)[1],ks())}function On(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Nc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=rP(n.inputs),o.declaredInputs=rP(n.declaredInputs),o.outputs=rP(n.outputs);const a=i.hostBindings;a&&Mce(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&Tce(n,c),l&&Ace(n,l),dl(n.inputs,i.inputs),dl(n.declaredInputs,i.declaredInputs),dl(n.outputs,i.outputs),Nc(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===On&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=bg(i.hostAttrs,t=bg(t,i.hostAttrs))}}(r)}function rP(n){return n===Nf?{}:n===_i?[]:n}function Tce(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ace(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function Mce(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}Wn.THROW_IF_NOT_FOUND=Ah,Wn.NULL=new Qo,Wn.\u0275prov=We({token:Wn,providedIn:"any",factory:()=>Oe(fp)}),Wn.__NG_ELEMENT_ID__=-1;let Dx=null;function G_(){if(!Dx){const n=hr.Symbol;if(n&&n.iterator)Dx=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Dx=r)}}}return Dx}class wu{constructor(e){this.wrapped=e}static wrap(e){return new wu(e)}static unwrap(e){return wu.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof wu}}function fw(n){return!!iP(n)&&(Array.isArray(n)||!(n instanceof Map)&&G_()in n)}function iP(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Id(n,e,t){return n[e]=t}function fa(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function di(n,e,t,r){const i=Bt();return fa(i,kc(),e)&&(Tr(),Tl(ts(),i,n,e,t,r)),di}function Br(n,e,t,r,i,s,o,a){const c=Bt(),l=Tr(),u=n+20,h=l.firstCreatePass?function(n,e,t,r,i,s,o,a,c){const l=e.consts,u=lp(e,n,4,o||null,Fc(l,a));q0(e,t,u,Fc(l,c)),o_(e,u);const h=u.tViews=U_(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,i,s,o):l.data[u];pl(h,!1);const f=c[11].createComment("");P_(l,c,f,h),go(f,c),H_(c,c[u]=hx(f,c,f,h)),Bf(h)&&Lg(l,c,h),null!=o&&W0(c,h,a)}function ty(n){return Vf(Vn.lFrame.contextLView,20+n)}function Me(n,e=Sn.Default){const t=Bt();return null===t?Oe(n,e):wg(ks(),t,ve(n),e)}function an(n,e,t){const r=Bt();return fa(r,kc(),e)&&Pa(Tr(),ts(),r,n,e,r[11],t,!1),an}function lP(n,e,t,r,i){const o=i?"class":"style";gx(n,t,e.inputs[o],o,r)}function Ft(n,e,t,r){const i=Bt(),s=Tr(),o=20+n,a=i[11],c=i[o]=R0(a,e,Vn.lFrame.currentNamespace),l=s.firstCreatePass?function(n,e,t,r,i,s,o){const a=e.consts,l=lp(e,n,2,i,Fc(a,s));return q0(e,t,l,Fc(a,o)),null!==l.attrs&&$_(l,l.attrs,!1),null!==l.mergedAttrs&&$_(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,0,e,t,r):s.data[o];pl(l,!0);const u=l.mergedAttrs;null!==u&&l_(a,c,u);const h=l.classes;null!==h&&L0(a,c,h);const f=l.styles;null!==f&&VD(a,c,f),64!=(64&l.flags)&&P_(s,i,c,l),0===Vn.lFrame.elementDepthCount&&go(c,i),Vn.lFrame.elementDepthCount++,Bf(l)&&(Lg(s,i,l),function(n,e,t){if(Rv(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,l,i)),null!==r&&W0(i,l)}function kt(){let n=ks();hs()?Xs():(n=n.parent,pl(n,!1));const e=n;Vn.lFrame.elementDepthCount--;const t=Tr();t.firstCreatePass&&(o_(t,n),Rv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&lP(t,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&lP(t,e,Bt(),e.stylesWithoutHost,!1)}function zr(n,e,t,r){Ft(n,e,t,r),kt()}function Eu(){return Bt()}function gw(n){return!!n&&"function"==typeof n.then}function n4(n){return!!n&&"function"==typeof n.subscribe}const Ax=n4;function zn(n,e,t,r){const i=Bt(),s=Tr(),o=ks();return function(n,e,t,r,i,s,o,a){const c=Bf(r),u=n.firstCreatePass&&z_(n),h=e[8],f=px(e);let g=!0;if(3&r.type||a){const _=Wo(r,e),R=a?a(_):_,M=f.length,ee=a?_e=>a($i(_e[r.index])):r.index;if(Mi(t)){let _e=null;if(!a&&c&&(_e=function(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==_e)(_e.__ngLastListenerFn__||_e).__ngNextListenerFn__=s,_e.__ngLastListenerFn__=s,g=!1;else{s=uP(r,e,h,s,!1);const Ie=t.listen(R,i,s);f.push(s,Ie),u&&u.push(i,ee,M,M+1)}}else s=uP(r,e,h,s,!0),R.addEventListener(i,s,o),f.push(s),u&&u.push(i,ee,M,o)}else s=uP(r,e,h,s,!1);const m=r.outputs;let b;if(g&&null!==m&&(b=m[i])){const _=b.length;if(_)for(let R=0;R<_;R+=2){const Ue=e[b[R]][b[R+1]].subscribe(s),at=f.length;f.push(s,Ue),u&&u.push(i,r.index,at,-(at+1))}}}(s,i,i[11],o,n,e,!!t,r),zn}function i4(n,e,t,r){try{return!1!==t(r)}catch(i){return rw(n,i),!1}}function uP(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?No(n.index,e):e;0==(32&e[2])&&Z0(a);let c=i4(e,0,r,o),l=s.__ngNextListenerFn__;for(;l;)c=i4(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Vr(n=1){return function(n){return(Vn.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Vn.lFrame.contextLView))[8]}(n)}function lle(n,e){let t=null;const r=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?HD(n,s,!0):sN(r,s))return i}else t=i}return t}function f4(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Rn(s):yu(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];hle(n[a],e)&&(c=!0,n[a+1]=r?V0(u):Gi(u)),a=r?Rn(u):yu(u)}c&&(n[t+1]=r?Gi(s):V0(s))}function hle(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&po(n,e)>=0}const _o={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function p4(n){return n.substring(_o.key,_o.keyEnd)}function g4(n,e){const t=_o.textEnd;return t===e?-1:(e=_o.keyEnd=function(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,_o.key=e,t),sy(n,e,t))}function sy(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function $r(n,e){return function(n,e,t,r){const i=Bt(),s=Tr(),o=Aa(2);s.firstUpdatePass&&w4(s,n,o,r),e!==Mn&&fa(i,o,e)&&C4(s,s.data[qo()],i,i[11],n,i[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=it(Fo(n)))),n}(e,t),r,o)}(n,e,null,!0),$r}function Rd(n){!function(n,e,t,r){const i=Tr(),s=Aa(2);i.firstUpdatePass&&w4(i,null,s,r);const o=Bt();if(t!==Mn&&fa(o,s,t)){const a=i.data[qo()];if(D4(a,r)&&!v4(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=ot(c,t||"")),lP(i,a,o,t,r)}else!function(n,e,t,r,i,s,o,a){i===Mn&&(i=_i);let c=0,l=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=c<i.length?i[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let b,m=null;u===h?(c+=2,l+=2,f!==g&&(m=h,b=g)):null===h||null!==u&&u<h?(c+=2,m=u):(l+=2,m=h,b=g),null!==m&&C4(n,e,t,r,m,b,o,a),u=c<i.length?i[c]:null,h=l<s.length?s[l]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(n,e,t){if(null==t||""===t)return _i;const r=[],i=Fo(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(Ia,Od,n,!0)}function Od(n,e){for(let t=function(n){return function(n){_o.key=0,_o.keyEnd=0,_o.value=0,_o.valueEnd=0,_o.textEnd=n.length}(n),g4(n,sy(n,0,_o.textEnd))}(e);t>=0;t=g4(e,t))Ia(n,p4(e),!0)}function v4(n,e){return e>=n.expandoStartIndex}function w4(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[qo()],o=v4(n,t);D4(s,r)&&null===e&&!o&&(e=!1),e=function(n,e,t,r){const i=function(n){const e=Vn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=_w(t=hP(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=hP(i,n,e,t,r),null===s){let c=function(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==yu(r))return n[Rn(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=hP(null,n,e,c[1],r),c=_w(c,e.attrs,r),function(n,e,t,r){n[Rn(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=_w(r,n[s].hostAttrs,t);return _w(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Rn(o),c=yu(o);n[r]=t;let u,l=!1;if(Array.isArray(t)){const h=t;u=h[1],(null===u||po(h,u)>0)&&(l=!0)}else u=t;if(i)if(0!==c){const f=Rn(n[a+1]);n[r+1]=Sl(f,a),0!==f&&(n[f+1]=Dl(n[f+1],r)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Sl(a,0),0!==a&&(n[a+1]=Dl(n[a+1],r)),a=r;else n[r+1]=Sl(c,0),0===a?a=r:n[c+1]=Dl(n[c+1],r),c=r;l&&(n[r+1]=Gi(n[r+1])),f4(n,u,r,!0),f4(n,u,r,!1),function(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&po(s,e)>=0&&(t[r+1]=V0(t[r+1]))}(e,u,n,r,s),o=Sl(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function hP(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=_w(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function _w(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ia(n,o,!!t||e[++s]))}return void 0===n?null:n}function C4(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Rx(function(n){return 1==(1&n)}(l)?S4(c,e,t,i,yu(l),o):void 0)||(Rx(s)||function(n){return 2==(2&n)}(l)&&(s=S4(c,null,t,i,a,o)),function(n,e,t,r,i){const s=Mi(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:Na.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=Na.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,ug(qo(),t),i,s))}function S4(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let f=t[i+1];f===Mn&&(f=h?_i:void 0);let g=h?r0(f,r):u===r?f:void 0;if(l&&!Rx(g)&&(g=r0(c,r)),Rx(g)&&(a=g,o))return a;const m=n[i+1];i=o?Rn(m):yu(m)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=r0(c,r))}return a}function Rx(n){return void 0!==n}function D4(n,e){return 0!=(n.flags&(e?16:32))}function Gr(n,e=""){const t=Bt(),r=Tr(),i=n+20,s=r.firstCreatePass?lp(r,i,1,e,null):r.data[i],o=t[i]=function(n,e){return Mi(n)?n.createText(e):n.createTextNode(e)}(t[11],e);P_(r,t,o,s),pl(s,!1)}function yo(n){return Nd("",n,""),yo}function Nd(n,e,t){const r=Bt(),i=function(n,e,t,r){return fa(n,kc(),t)?e+At(t)+r:Mn}(r,n,e,t);return i!==Mn&&bu(r,qo(),i),Nd}function Lh(n,e,t){const r=Bt();return fa(r,kc(),e)&&Pa(Tr(),ts(),r,n,e,r[11],t,!0),Lh}const jg=void 0;var Wle=["en",[["a","p"],["AM","PM"],jg],[["AM","PM"],jg,jg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jg,"{1} 'at' {0}",jg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let oy={};function z4(n){return n in oy||(oy[n]=hr.ng&&hr.ng.common&&hr.ng.common.locales&&hr.ng.common.locales[n]),oy[n]}var un=(()=>((un=un||{})[un.LocaleId=0]="LocaleId",un[un.DayPeriodsFormat=1]="DayPeriodsFormat",un[un.DayPeriodsStandalone=2]="DayPeriodsStandalone",un[un.DaysFormat=3]="DaysFormat",un[un.DaysStandalone=4]="DaysStandalone",un[un.MonthsFormat=5]="MonthsFormat",un[un.MonthsStandalone=6]="MonthsStandalone",un[un.Eras=7]="Eras",un[un.FirstDayOfWeek=8]="FirstDayOfWeek",un[un.WeekendRange=9]="WeekendRange",un[un.DateFormat=10]="DateFormat",un[un.TimeFormat=11]="TimeFormat",un[un.DateTimeFormat=12]="DateTimeFormat",un[un.NumberSymbols=13]="NumberSymbols",un[un.NumberFormats=14]="NumberFormats",un[un.CurrencyCode=15]="CurrencyCode",un[un.CurrencySymbol=16]="CurrencySymbol",un[un.CurrencyName=17]="CurrencyName",un[un.Currencies=18]="Currencies",un[un.Directionality=19]="Directionality",un[un.PluralCase=20]="PluralCase",un[un.ExtraData=21]="ExtraData",un))();const Nx="en-US";let $4=Nx;function pP(n){Z(n,"Expected localeId to be defined"),"string"==typeof n&&($4=n.toLowerCase().replace(/_/g,"-"))}function _P(n,e,t,r,i){if(n=ve(n),Array.isArray(n))for(let s=0;s<n.length;s++)_P(n[s],e,t,r,i);else{const s=Tr(),o=Bt();let a=Ad(n)?n:ve(n.provide),c=yx(n);const l=ks(),u=1048575&l.providerIndexes,h=l.directiveStart,f=l.providerIndexes>>20;if(Ad(n)||!n.multi){const g=new yg(c,i,Me),m=bP(a,e,i?u:u+f,h);-1===m?(_d(Po(l,o),s,a),yP(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(g),o.push(g)):(t[m]=g,o[m]=g)}else{const g=bP(a,e,u+f,h),m=bP(a,e,u,u+f),b=g>=0&&t[g],_=m>=0&&t[m];if(i&&!_||!i&&!b){_d(Po(l,o),s,a);const R=function(n,e,t,r,i){const s=new yg(n,t,Me);return s.multi=[],s.index=e,s.componentProviders=0,pz(s,i,r&&!t),s}(i?zue:Hue,t.length,i,r,c);!i&&_&&(t[m].providerFactory=R),yP(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(R),o.push(R)}else yP(s,n,g>-1?g:m,pz(t[i?m:g],c,!i&&r));!i&&r&&_&&t[m].componentProviders++}}}function yP(n,e,t,r){const i=Ad(e);if(i||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const c=a.indexOf(t);-1===c?a.push(t,[r,o]):a[c+1].push(r,o)}else a.push(t,o)}}}function pz(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bP(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Hue(n,e,t,r){return vP(this.multi,[])}function zue(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Wf(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),vP(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],vP(i,s);return s}function vP(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function tr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function(n,e,t){const r=Tr();if(r.firstCreatePass){const i=Nc(n);_P(t,r.data,r.blueprint,i,!0),_P(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class gz{}const _z="ngComponent";class Wue{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${it(n)}. Did you add it to @NgModule.entryComponents?`);return e[_z]=n,e}(e)}}class Il{}function Bx(...n){}function cy(n,e){return new Dn(Wo(n,e))}Il.NULL=new Wue;const Kue=function(){return cy(ks(),Bt())};let Dn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Kue,n})();function yz(n){return n instanceof Dn?n.nativeElement:n}class Ug{}let EP=(()=>{class n{}return n.\u0275prov=We({token:n,providedIn:"root",factory:()=>null}),n})();class Vh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bz=new Vh("12.2.5");class vz{constructor(){}supports(e){return fw(e)}create(e){return new tde(e)}}const ede=(n,e)=>e;class tde{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ede}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<Ez(r,i,s)?t:r,a=Ez(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<l&&(s[f]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!fw(e))throw new Error(`Error trying to diff '${it(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[G_()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new nde(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new wz),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wz),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class nde{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rde{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class wz{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new rde,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ez(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Cz{constructor(){}supports(e){return e instanceof Map||iP(e)}create(){return new ide}}class ide{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||iP(e)))throw new Error(`Error trying to diff '${it(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new sde(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class sde{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sz(){return new ly([new vz])}let ly=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Sz()),deps:[[n,new vl,new Ds]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=We({token:n,providedIn:"root",factory:Sz}),n})();function Dz(){return new uy([new Cz])}let uy=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Dz()),deps:[[n,new vl,new Ds]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=We({token:n,providedIn:"root",factory:Dz}),n})();function Vx(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push($i(s)),Ja(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&Vx(c[1],c,l,r)}const o=t.type;if(8&o)Vx(n,e,t.child,r);else if(32&o){const a=T0(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=kD(e,t);if(Array.isArray(a))r.push(...a);else{const c=Rg(e[16]);Vx(c[1],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Ew{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Vx(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ja(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(O0(e,r),fu(t,r))}this._attachedToViewContainer=!1}N0(this._lView[1],this._lView)}onDestroy(e){rx(this._lView[1],this._lView,null,e)}markForCheck(){Z0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ew(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){r_(!0);try{ew(n,e,t)}finally{r_(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){ap(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class ade extends Ew{constructor(e){super(e),this._view=e}detectChanges(){fx(this._view)}checkNoChanges(){!function(n){r_(!0);try{fx(n)}finally{r_(!1)}}(this._view)}get context(){return null}}const lde=function(n){return function(n,e,t){if(Lf(n)&&!t){const r=No(n.index,e);return new Ew(r,r)}return 47&n.type?new Ew(e[16],e):null}(ks(),Bt(),16==(16&n))};let Bs=(()=>{class n{}return n.__NG_ELEMENT_ID__=lde,n})();const hde=[new Cz],pde=new ly([new vz]),gde=new uy(hde),_de=function(){return jx(ks(),Bt())};let ka=(()=>{class n{}return n.__NG_ELEMENT_ID__=_de,n})();const yde=ka,bde=class extends yde{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Fg(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),kg(t,r,e),new Ew(r)}};function jx(n,e){return 4&n.type?new bde(e,n,cy(n,e)):null}class Pd{}const Ede=function(){return Mz(ks(),Bt())};let bo=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ede,n})();const Sde=bo,Tz=class extends Sde{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return cy(this._hostTNode,this._hostLView)}get injector(){return new tc(this._hostTNode,this._hostLView)}get parentInjector(){const e=vg(this._hostTNode,this._hostLView);if(LS(e)){const t=ml(e,this._hostLView),r=zf(e);return new tc(t[1].data[r+8],t)}return new tc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Az(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=r||this.parentInjector;if(!s&&null==e.ngModule&&o){const c=o.get(Pd,null);c&&(s=c)}const a=e.create(o,i,void 0,s);return this.insert(a.hostView,t),a}insert(e,t){const r=e._lView,i=r[1];if(function(n){return Ja(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=r[3],f=new Tz(h,h[6],h[3]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],Sg(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=F_(s,o),c=r[11],l=N_(c,o[7]);return null!==l&&function(n,e,t,r,i,s){r[0]=i,r[6]=e,ap(n,r,t,1,i,s)}(i,o[6],c,r,l,a),e.attachToViewContainerRef(),Sg(CP(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Az(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=O0(this._lContainer,t);r&&(fu(CP(this._lContainer),t),N0(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=O0(this._lContainer,t);return r&&null!=fu(CP(this._lContainer),t)?new Ew(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Az(n){return n[8]}function CP(n){return n[8]||(n[8]=[])}function Mz(n,e){let t;const r=e[n.index];if(Ja(r))t=r;else{let i;if(8&n.type)i=$i(r);else{const s=e[11];i=s.createComment("");const o=Wo(n,e);Cl(s,N_(s,o),i,function(n,e){return Mi(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=hx(r,e,i,n),H_(e,t)}return new Tz(t,n,e)}const py={};class Kz extends Il{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Zr(e);return new Qz(t,this.ngModule)}}function Xz(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const vhe=new $t("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vD});class Qz extends gz{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(oN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Xz(this.componentDef.inputs)}get outputs(){return Xz(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function(n,e){return{get:(t,r,i)=>{const s=n.get(t,py,i);return s!==py||r===py?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(Ug,vh),a=s.get(EP,null),c=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?function(n,e,t){if(Mi(n))return n.selectRootElement(e,t===Wt.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(c,r,this.componentDef.encapsulation):R0(o.createRenderer(null,this.componentDef),l,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,f=function(n,e){return{components:[],scheduler:n||vD,clean:UN,playerHandler:e||null,flags:0}}(),g=U_(0,null,null,1,0,null,null,null,null,null),m=Fg(null,g,f,h,null,null,o,c,a,s);let b,_;mg(m);try{const R=function(n,e,t,r,i,s){const o=t[1];t[20]=n;const c=lp(o,20,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&($_(c,l,!0),null!==n&&(l_(i,n,l),null!==c.classes&&L0(i,n,c.classes),null!==c.styles&&VD(i,n,c.styles)));const u=r.createRenderer(n,e),h=Fg(t,j_(e),null,e.onPush?64:16,t[20],c,r,u,s||null,null);return o.firstCreatePass&&(_d(Po(c,t),o,e.type),dx(o,c),Y0(c,t.length,1)),H_(t,h),t[20]=h}(u,this.componentDef,m,o,c);if(u)if(r)l_(c,u,["ng-version",bz.full]);else{const{attrs:M,classes:ee}=function(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Uc(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);M&&l_(c,u,M),ee&&ee.length>0&&L0(c,u,ee.join(" "))}if(_=Bv(g,20),void 0!==t){const M=_.projection=[];for(let ee=0;ee<this.ngContentSelectors.length;ee++){const _e=t[ee];M.push(null!=_e?Array.from(_e):null)}}b=function(n,e,t,r,i){const s=t[1],o=function(n,e,t){const r=ks();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),K0(n,r,e,up(n,e,1,null),t));const i=Wf(e,n,r.directiveStart,r);go(i,e);const s=Wo(r,e);return s&&go(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(c=>c(o,e)),e.contentQueries){const c=ks();e.contentQueries(1,o,c.directiveStart)}const a=ks();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(la(a.index),lx(t[1],a,0,a.directiveStart,a.directiveEnd,e),ux(e,o)),o}(R,this.componentDef,m,f,[Dce]),kg(g,m,null)}finally{yr()}return new Che(this.componentType,b,cy(_,m),m,_)}}class Che extends class{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new ade(i),this.componentType=e}get injector(){return new tc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const gy=new Map;class xhe extends Pd{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Kz(this);const r=xa(e),i=function(n){return n[vR]||null}(e);i&&pP(i),this._bootstrapComponents=El(r.bootstrap),this._r3Injector=_x(e,t,[{provide:Pd,useValue:this},{provide:Il,useValue:this.componentFactoryResolver}],it(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Wn.THROW_IF_NOT_FOUND,r=Sn.Default){return e===Wn||e===Pd||e===fp?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class kP extends class{}{constructor(e){super(),this.moduleType=e,null!==xa(e)&&function(n){const e=new Set;!function t(r){const i=xa(r,!0),s=i.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${it(e)} vs ${it(e.name)}`)}(s,gy.get(s),r),gy.set(s,r));const o=El(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new xhe(this.moduleType,e)}}function Gx(n,e,t){const r=uo()+n,i=Bt();return i[r]===Mn?Id(i,r,t?e.call(t):e()):function(n,e){return n[e]}(i,r)}function t6(n,e,t,r,i,s){const o=e+t;return fa(n,o,i)?Id(n,o+1,s?r.call(s,i):r(i)):function(n,e){const t=n[e];return t===Mn?void 0:t}(n,o+1)}function Nl(n,e){const t=Tr();let r;const i=n+20;t.firstCreatePass?(r=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}throw new Qe("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=gd(r.type)),o=Ic(Me);try{const a=u_(!1),c=s();return u_(a),function(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Bt(),i,c),c}finally{Ic(o)}}function Pl(n,e,t){const r=n+20,i=Bt(),s=Vf(i,r);return function(n,e){wu.isWrapped(e)&&(e=wu.unwrap(e),n[Vn.lFrame.bindingIndex]=Mn);return e}(i,function(n,e){return n[1].data[e].pure}(i,r)?t6(i,uo(),e,s.transform,t,s):s.transform(t))}function LP(n){return e=>{setTimeout(n,void 0,e)}}const gn=class extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,c=t||(()=>null),l=r;if(e&&"object"==typeof e){const h=e;a=null===(i=h.next)||void 0===i?void 0:i.bind(h),c=null===(s=h.error)||void 0===s?void 0:s.bind(h),l=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(c=LP(c),a&&(a=LP(a)),l&&(l=LP(l)));const u=super.subscribe({next:a,error:c,complete:l});return e instanceof D&&e.add(u),u}};function Uhe(){return this._results[G_()]()}class $g{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=G_(),r=$g.prototype;r[t]||(r[t]=Uhe)}get changes(){return this._changes||(this._changes=new gn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=rc(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class BP{constructor(e){this.queryList=e,this.matches=null}clone(){return new BP(this.queryList)}setDirty(){this.queryList.setDirty()}}class VP{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new VP(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==u6(e,t).matches&&this.queries[t].setDirty()}}class o6{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class jP{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new jP(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class UP{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new UP(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,$he(t,s)),this.matchTNodeWithReadOption(e,t,Gf(t,e,s,!1,!1))}else r===ka?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Dn||i===bo||i===ka&&4&t.type)this.addMatch(t.index,-2);else{const s=Gf(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function $he(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Whe(n,e,t,r){return-1===t?function(n,e){return 11&n.type?cy(n,e):4&n.type?jx(n,e):null}(e,n):-2===t?function(n,e,t){return t===Dn?cy(e,n):t===ka?jx(e,n):t===bo?Mz(e,n):void 0}(n,e,r):Wf(n,n[1],t,e)}function a6(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:Whe(e,s[l],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function HP(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=a6(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let h=10;h<u.length;h++){const f=u[h];f[17]===f[3]&&HP(f[1],f,l,r)}if(null!==u[9]){const h=u[9];for(let f=0;f<h.length;f++){const g=h[f];HP(g[1],g,l,r)}}}}}return r}function Ar(n){const e=Bt(),t=Tr(),r=FS();zv(r+1);const i=u6(t,r);if(n.dirty&&du(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?HP(t,e,r,[]):a6(t,e,i,r);n.reset(s,yz),n.notifyOnChanges()}return!0}return!1}function ns(n,e,t){const r=Tr();r.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new jP),n.queries.track(new UP(e,t))}(r,new o6(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function(n,e,t){const r=new $g(4==(4&t));rx(n,e,r,r.destroy),null===e[19]&&(e[19]=new VP),e[19].queries.push(new BP(r))}(r,Bt(),e)}function Mr(){return function(n,e){return n[19].queries[e].queryList}(Bt(),FS())}function u6(n,e){return n.queries.getByIndex(e)}const Gg=new $t("Application Initializer");let _y=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Bx,this.reject=Bx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(gw(s))t.push(s);else if(Ax(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Oe(Gg,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Pw=new $t("AppId"),Cfe={provide:Pw,useFactory:function(){return`${YP()}${YP()}${YP()}`},deps:[]};function YP(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const A6=new $t("Platform Initializer"),Fd=new $t("Platform ID"),Yx=new $t("appBootstrapListener");let Kx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const jh=new $t("LocaleId"),M6=new $t("DefaultCurrencyCode");class Dfe{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const KP=function(n){return new kP(n)},xfe=KP,Tfe=function(n){return Promise.resolve(KP(n))},I6=function(n){const e=KP(n),r=El(xa(n).declarations).reduce((i,s)=>{const o=Zr(s);return o&&i.push(new Qz(o)),i},[]);return new Dfe(e,r)},Afe=I6,Mfe=function(n){return Promise.resolve(I6(n))};let Wg=(()=>{class n{constructor(){this.compileModuleSync=xfe,this.compileModuleAsync=Tfe,this.compileModuleAndAllComponentsSync=Afe,this.compileModuleAndAllComponentsAsync=Mfe}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const R6=new $t("compilerOptions"),Rfe=(()=>Promise.resolve(0))();function XP(n){"undefined"==typeof Zone?Rfe.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class En{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gn(!1),this.onMicrotaskEmpty=new gn(!1),this.onStable=new gn(!1),this.onError=new gn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let n=hr.requestAnimationFrame,e=hr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(hr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ZP(n),n.isCheckStableRunning=!0,QP(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ZP(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return O6(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),N6(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return O6(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),N6(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,ZP(n),QP(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!En.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(En.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Nfe,Bx,Bx);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Nfe={};function QP(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ZP(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function O6(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function N6(n){n._nesting--,QP(n)}class kfe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gn,this.onMicrotaskEmpty=new gn,this.onStable=new gn,this.onError=new gn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let JP=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{En.assertNotInAngularZone(),XP(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())XP(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Oe(En))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),P6=(()=>{class n{constructor(){this._applications=new Map,eF.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return eF.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class Lfe{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let eF=new Lfe,F6=!0,k6=!1;function pc(){return k6=!0,F6}let Au;const L6=new $t("AllowMultipleToken");function B6(n,e,t=[]){const r=`Platform: ${e}`,i=new $t(r);return(s=[])=>{let o=nF();if(!o||o.injector.get(L6,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:Fh,useValue:"platform"});!function(n){if(Au&&!Au.destroyed&&!Au.injector.get(L6,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Au=n.get(V6);const e=n.get(A6,null);e&&e.forEach(t=>t())}(Wn.create({providers:a,name:r}))}return function(n){const e=nF();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function nF(){return Au&&!Au.destroyed?Au:null}let V6=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function(n,e){let t;return t="noop"===n?new kfe:("zone.js"===n?void 0:n)||new En({enableLongStackTrace:pc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),c=[{provide:En,useValue:a}];return a.run(()=>{const l=Wn.create({providers:c,parent:this.injector,name:t.moduleType.name}),u=t.create(l),h=u.injector.get(cc,null);if(!h)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const f=a.onError.subscribe({next:g=>{h.handleError(g)}});u.onDestroy(()=>{rF(this._modules,u),f.unsubscribe()})}),function(n,e,t){try{const r=t();return gw(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(h,a,()=>{const f=u.injector.get(_y);return f.runInitializers(),f.donePromise.then(()=>(pP(u.injector.get(jh,Nx)||Nx),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const i=j6({},r);return function(n,e,t){const r=new kP(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(gp);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${it(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Oe(Wn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function j6(n,e){return Array.isArray(e)?e.reduce(j6,n):Object.assign(Object.assign({},n),e)}let gp=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new L(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),c=new L(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{En.assertNotInAngularZone(),XP(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{En.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=kn(a,c.pipe(oo()))}bootstrap(t,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=t instanceof gz?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Pd),a=i.create(Wn.NULL,[],r||i.selector,s),c=a.location.nativeElement,l=a.injector.get(JP,null),u=l&&a.injector.get(P6);return l&&u&&u.registerApplication(c,l),a.onDestroy(()=>{this.detachView(a.hostView),rF(this.components,a),u&&u.unregisterApplication(c)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;rF(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yx,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Oe(En),Oe(Wn),Oe(cc),Oe(Il),Oe(_y))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function rF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const upe=B6(null,"core",[{provide:Fd,useValue:"unknown"},{provide:V6,deps:[Wn]},{provide:P6,deps:[]},{provide:Kx,deps:[]}]),gpe=[{provide:gp,useClass:gp,deps:[En,Wn,cc,Il,_y]},{provide:vhe,deps:[En],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:_y,useClass:_y,deps:[[new Ds,Gg]]},{provide:Wg,useClass:Wg,deps:[]},Cfe,{provide:ly,useFactory:function(){return pde},deps:[]},{provide:uy,useFactory:function(){return gde},deps:[]},{provide:jh,useFactory:function(n){return pP(n=n||"undefined"!=typeof $localize&&$localize.locale||Nx),n},deps:[[new Jf(jh),new Ds,new vl]]},{provide:M6,useValue:"USD"}];let _pe=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Oe(gp))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:gpe}),n})(),aT=null;function kd(){return aT}const pn=new $t("DocumentToken");var Qs=(()=>((Qs=Qs||{})[Qs.Zero=0]="Zero",Qs[Qs.One=1]="One",Qs[Qs.Two=2]="Two",Qs[Qs.Few=3]="Few",Qs[Qs.Many=4]="Many",Qs[Qs.Other=5]="Other",Qs))();const Mge=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=z4(e);if(t)return t;const r=e.split("-")[0];if(t=z4(r),t)return t;if("en"===r)return Wle;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[un.PluralCase]};class _T{}let ime=(()=>{class n extends _T{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Mge(r||this.locale)(t)){case Qs.Zero:return"zero";case Qs.One:return"one";case Qs.Two:return"two";case Qs.Few:return"few";case Qs.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(Oe(jh))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function T5(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class ome{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _p=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,o)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new ome(null,this._ngForOf,-1,-1),null===o?void 0:o),c=new A5(i,a);r.push(c)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const c=new A5(i,a);r.push(c)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Me(bo),Me(ka),Me(ly))},n.\u0275dir=Lt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class A5{constructor(e,t){this.record=e,this.view=t}}let $h=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cme,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){M5("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){M5("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Me(bo),Me(ka))},n.\u0275dir=Lt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cme{constructor(){this.$implicit=null,this.ngIf=null}}function M5(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${it(e)}'.`)}class hme{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class fme{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const pme=new fme,gme=new hme;let bT=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(gw(t))return pme;if(n4(t))return gme;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${it(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(Me(Bs,16))},n.\u0275pipe=Ro({name:"async",type:n,pure:!1}),n})(),Ts=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[{provide:_T,useClass:ime}]}),n})();const F5="browser";function Xg(n){return n===F5}class B5{}class OF extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){aT||(aT=n)}(new OF)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Uw=Uw||document.querySelector("base"),Uw?Uw.getAttribute("href"):null);return null==t?null:function(n){vT=vT||document.createElement("a"),vT.setAttribute("href",n);const e=vT.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Uw=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return T5(document.cookie,e)}}let vT,Uw=null;const V5=new $t("TRANSITION_ID"),jme=[{provide:Gg,useFactory:function(n,e,t){return()=>{t.get(_y).donePromise.then(()=>{const r=kd(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[V5,pn,Wn],multi:!0}];class NF{static init(){!function(n){eF=n}(new NF)}addToWindow(e){hr.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},hr.getAllAngularTestabilities=()=>e.getAllTestabilities(),hr.getAllAngularRootElements=()=>e.getAllRootElements(),hr.frameworkStabilizers||(hr.frameworkStabilizers=[]),hr.frameworkStabilizers.push(r=>{const i=hr.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?kd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ume=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Hw=new $t("EventManagerPlugins");let ET=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Oe(Hw),Oe(En))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class PF{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=kd().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let U5=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),zw=(()=>{class n extends U5{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(H5),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(H5))}}return n.\u0275fac=function(t){return new(t||n)(Oe(pn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function H5(n){kd().remove(n)}const FF={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kF=/%COMP%/g;function CT(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?CT(n,i,t):(i=i.replace(kF,n),t.push(i))}return t}function G5(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ST=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new LF(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Wt.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new n_e(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Wt.ShadowDom:return new r_e(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=CT(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Oe(ET),Oe(zw),Oe(Pw))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class LF{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(FF[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=FF[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=FF[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Na.DashCase|Na.Important)?e.style.setProperty(t,r,i&Na.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Na.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,G5(r)):this.eventManager.addEventListener(e,t,G5(r))}}class n_e extends LF{constructor(e,t,r,i){super(e),this.component=r;const s=CT(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(kF,n)}(i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(kF,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class r_e extends LF{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=CT(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let i_e=(()=>{class n extends PF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Oe(pn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Y5=["alt","control","meta","shift"],d_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K5={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},h_e={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let f_e=(()=>{class n extends PF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(Y5.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&K5.hasOwnProperty(e)&&(e=K5[e]))}return d_e[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Y5.forEach(s=>{s!=i&&h_e[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(Oe(pn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const w_e=B6(upe,"browser",[{provide:Fd,useValue:F5},{provide:A6,useValue:function(){OF.makeCurrent(),NF.init()},multi:!0},{provide:pn,useFactory:function(){return function(n){ci=n}(document),document},deps:[]}]),E_e=[[],{provide:Fh,useValue:"root"},{provide:cc,useFactory:function(){return new cc},deps:[]},{provide:Hw,useClass:i_e,multi:!0,deps:[pn,En,Fd]},{provide:Hw,useClass:f_e,multi:!0,deps:[pn]},[],{provide:ST,useClass:ST,deps:[ET,zw,Pw]},{provide:Ug,useExisting:ST},{provide:U5,useExisting:zw},{provide:zw,useClass:zw,deps:[pn]},{provide:JP,useClass:JP,deps:[En]},{provide:ET,useClass:ET,deps:[Hw,En]},{provide:B5,useClass:Ume,deps:[]},[]];let jF=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Pw,useValue:t.appId},{provide:V5,useExisting:Pw},jme]}}}return n.\u0275fac=function(t){return new(t||n)(Oe(n,12))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:E_e,imports:[Ts,_pe]}),n})();"undefined"!=typeof window&&window;class I_e extends D{constructor(e,t){super()}schedule(e,t=0){return this}}class DT extends I_e{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let Q5=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,i){return new this.SchedulerAction(this,t).schedule(i,r)}}return n.now=()=>Date.now(),n})();class Nu extends Q5{constructor(e,t=Q5.now){super(e,()=>Nu.delegate&&Nu.delegate!==this?Nu.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return Nu.delegate&&Nu.delegate!==this?Nu.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const N_e=new class extends Nu{}(class extends DT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),Ld=new L(n=>n.complete());function $w(n){return n?function(n){return new L(e=>n.schedule(()=>e.complete()))}(n):Ld}function rn(...n){let e=n[n.length-1];return Ae(e)?(n.pop(),Ve(n,e)):In(n)}function Ey(n,e){return new L(e?t=>e.schedule(F_e,0,{error:n,subscriber:t}):t=>t.error(n))}function F_e({error:n,subscriber:e}){e.error(n)}class mc{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return rn(this.value);case"E":return Ey(this.error);case"C":return $w()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new mc("N",e):mc.undefinedValueNotification}static createError(e){return new mc("E",void 0,e)}static createComplete(){return mc.completeNotification}}mc.completeNotification=new mc("C"),mc.undefinedValueNotification=new mc("N",void 0);class xT extends v{constructor(e,t,r=0){super(e),this.scheduler=t,this.delay=r}static dispatch(e){const{notification:t,destination:r}=e;t.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(xT.dispatch,this.delay,new L_e(e,this.destination)))}_next(e){this.scheduleMessage(mc.createNext(e))}_error(e){this.scheduleMessage(mc.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(mc.createComplete()),this.unsubscribe()}}class L_e{constructor(e,t){this.notification=e,this.destination=t}}class Zg extends te{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new B_e(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;let o;if(this.closed)throw new z;if(this.isStopped||this.hasError?o=D.EMPTY:(this.observers.push(e),o=new ie(this,e)),i&&e.add(e=new xT(e,i)),t)for(let a=0;a<s&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||N_e).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,s=i.length;let o=0;for(;o<s&&!(e-i[o].time<r);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&i.splice(0,o),i}}class B_e{constructor(e,t){this.time=e,this.value=t}}function As(n,e){return"function"==typeof e?t=>t.pipe(As((r,i)=>Fe(n(r,i)).pipe(me((s,o)=>e(r,s,i,o))))):t=>t.lift(new V_e(n))}class V_e{constructor(e){this.project=e}call(e,t){return t.subscribe(new j_e(e,this.project))}}class j_e extends ge{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Et(this),i=this.destination;i.add(r),this.innerSubscription=N(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const TT={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if("undefined"==typeof window)return TT.schedule(n,0);if(void 0===window.requestAnimationFrame)return TT.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let HF;function X_e(n,e,t){let r=t;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((i,s)=>!("*"===i||!function(n,e){if(!HF){const t=Element.prototype;HF=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&HF.call(n,e)}(n,i)||(r=s,0))),r}class Z_e{constructor(e,t){this.componentFactory=t.get(Il).resolveComponentFactory(e)}create(e){return new J_e(this.componentFactory,e)}}class J_e{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Zg(1),this.events=this.eventEmitters.pipe(As(r=>kn(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(En),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=TT.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?function(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Wn.create({providers:[],parent:this.injector}),r=function(n,e){const t=n.childNodes,r=e.map(()=>[]);let i=-1;e.some((s,o)=>"*"===s&&(i=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],c=X_e(a,e,i);-1!==c&&r[c].push(a)}return r}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,r,e),this.viewChangeDetectorRef=this.componentRef.injector.get(Bs),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(gp).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:r,templateName:i})=>e.instance[r].pipe(me(o=>({name:i,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=TT.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[e];if(r)return void(r.currentValue=t);const i=this.unchangedInputs.has(e),s=i?void 0:this.getInputValue(e);this.inputChanges[e]=new Fv(s,t,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class eye extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}const nye={initialConfig:{},parse:{},rename:{}};class rye{constructor(e,t){this.configState=e,this.storedChanges={},this.options=Object.assign(Object.assign({},nye),t)}addChanges(e){this.storedChanges=Object.assign(Object.assign({},this.storedChanges),e)}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:r,options:{initialConfig:i}}=this,s=r.snapshot,o=Object.assign(Object.assign(Object.assign({},i),s),t);for(const[a,c]of Object.entries(e))this.processChange(a,c,o);r.setConfig(o)}processChange(e,t,r){var i,s;const{options:{parse:o,rename:a}}=this,c=null!==(i=a[e])&&void 0!==i?i:e,l=t.currentValue,u=null!==(s=o[e])&&void 0!==s?s:o[c];if(null==l)delete r[c];else if(u)try{r[c]=u(l)}catch(h){console.warn(`Failed to parse ${e} = ${l}`,h.message)}else r[c]=l}}let iye=(()=>{class n{constructor(t,r,i={}){this.configState=t,this.cdr=r,this.options=i,this.initialized=!1,this.configManager=new rye(this.configState,this.options)}ngOnInit(){var t;this._init=setTimeout(()=>this.initialize(),null!==(t=this.options.initialDelay)&&void 0!==t?t:0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}}return n.\u0275fac=function(t){!function(){throw new Error("invalid")}()},n.\u0275dir=Lt({type:n,features:[ai]}),n})();const zF={boolean:n=>"false"!=`${n}`,json:n=>"string"==typeof n?JSON.parse(n):n,function:n=>{if("function"!=typeof n)throw new Error("Expected a javascript function");return n}};var $F;const Jg={production:!0,disableDbWorker:!0,acceptableViewerDomains:["https://portal.hubmapconsortium.org","https://portal.test.hubmapconsortium.org"],organNodes:["http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0002049"],dbOptions:{ccfOwlUrl:"https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"",hubmapPortalUrl:"",hubmapDataUrl:"",hubmapAssetsUrl:"",hubmapToken:null!==($F=localStorage.getItem("HUBMAP_TOKEN"))&&void 0!==$F?$F:"",useRemoteApi:!1,remoteApiEndpoint:"https://ccf-api--staging.herokuapp.com/v1"},googleAnalyticsToken:"G-ERNVZ1Q4KE"};function Ms(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function J5(n,e){return function(t,r){e(t,r,n)}}function Pu(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function vi(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function n$(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function WF(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||n$()}const r$="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",MT=WF();class cye{constructor(e,t,r="sessionStorage"){this.storage=function(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(e){return null}}(r),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function qF(n,e,t,r=600){const i=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>r&&(t=Math.min(t,r/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}const i$={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function s$(n){return"string"==typeof n?i$[n.toUpperCase()]||i$.WHITE:n}function IT(n,e){if(!n)throw new Error(e||"Assertion failed")}const Fu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},Gw=Fu.window||Fu.self||Fu.global,o$=Fu.process||{};function Cy(){let n;if(MT&&Gw.performance)n=Gw.performance.now();else if(o$.hrtime){const e=o$.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}console;const Sy={debug:MT&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},gye={enabled:!0,level:0};function Ll(){}const a$={},c$={once:!0};function mye(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}let YF=(()=>{class n{constructor({id:t}={id:""}){this.id=t,this.VERSION=r$,this._startTs=Cy(),this._deltaTs=Cy(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new cye("__probe-".concat(this.id,"__"),gye),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,e=["constructor"]){const t=Object.getPrototypeOf(n),r=Object.getOwnPropertyNames(t);for(const i of r)"function"==typeof n[i]&&(e.find(s=>i===s)||(n[i]=n[i].bind(n)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Cy()-this._startTs).toPrecision(10))}getDelta(){return Number((Cy()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}assert(t,r){IT(t,r)}warn(t){return this._getLogFunction(0,t,Sy.warn,arguments,c$)}error(t){return this._getLogFunction(0,t,Sy.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Sy.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Sy.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){return this._getLogFunction(t,r,Sy.debug||Sy.info,arguments,c$)}table(t,r,i){return r?this._getLogFunction(t,r,console.table||Ll,i&&[i],{tag:mye(r)}):Ll}image({logLevel:t,priority:r,image:i,message:s="",scale:o=1}){return this._shouldLog(t||r)?MT?function({image:n,message:e="",scale:t=1}){if("string"==typeof n){const i=new Image;return i.onload=()=>{const s=qF(i,e,t);console.log(...s)},i.src=n,Ll}const r=n.nodeName||"";if("img"===r.toLowerCase())return console.log(...qF(n,e,t)),Ll;if("canvas"===r.toLowerCase()){const i=new Image;return i.onload=()=>console.log(...qF(i,e,t)),i.src=n.toDataURL(),Ll}return Ll}({image:i,message:s,scale:o}):function({image:n,message:e="",scale:t=1}){let r=null;try{r=tt(307)}catch(i){}return r?()=>r(n,{fit:"box",width:"".concat(Math.round(80*t),"%")}).then(i=>console.log(i)):Ll}({image:i,message:s,scale:o}):Ll}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Ll)}group(t,r,i={collapsed:!1}){i=u$({logLevel:t,message:r,opts:i});const{collapsed:s}=i;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r,i={}){return this.group(t,r,Object.assign({},i,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Ll)}withGroup(t,r,i){this.group(t,r)();try{i()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=l$(t)}_getLogFunction(t,r,i,s=[],o){if(this._shouldLog(t)){o=u$({logLevel:t,message:r,args:s,opts:o}),IT(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Cy();const a=o.tag||o.message;if(o.once){if(a$[a])return Ll;a$[a]=Cy()}return r=function(n,e,t){if("string"==typeof e){const r=t.time?function(n,e=8){const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function(n,e,t){return!MT&&"string"==typeof n&&(e&&(e=s$(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=s$(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(r,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),i.bind(console,r,...o.args)}return Ll}}return n.VERSION=r$,n})();function l$(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return IT(Number.isFinite(e)&&e>=0),e}function u$(n){const{logLevel:e,message:t}=n;n.logLevel=l$(e);const r=n.args?Array.from(n.args):[];for(;r.length&&r.shift()!==t;);switch(n.args=r,typeof e){case"string":case"function":void 0!==t&&r.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const i=typeof n.message;return IT("string"===i||"object"===i),Object.assign(n,n.opts)}const ti=new YF({id:"deck"}),Xr={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Xr,"IDENTITY",{get:()=>ti.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const Bd={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},d$={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},mn=new YF({id:"luma.gl"});function Va(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function RT(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function Ir(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function OT(n){return Va(RT(n),"Invalid WebGLRenderingContext"),n}function ja(n){return Va(Ir(n),"Requires WebGL2"),n}var Yi=tt(761);const Ww={};const qw=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new n.VertexAttrib(t);this.attribs[r]=i}this.maxAttrib=0};(qw.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const em=function(e){const t=this;this.gl=e,function(n){const e=n.getError;n.getError=function(){let r;do{r=e.apply(n),0!==r&&(Ww[r]=!0)}while(0!==r);for(r in Ww)if(Ww[r])return delete Ww[r],parseInt(r,10);return 0}}(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,u){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=t.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=u,f.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{Yi.CO.console&&Yi.CO.console.log&&Yi.CO.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};em.prototype.VERTEX_ARRAY_BINDING_OES=34229,em.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new qw(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},em.prototype.createVertexArrayOES=function(){const e=new qw(this);return this.vertexArrayObjects.push(e),e},em.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},em.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof qw&&e.hasBeenBound&&e.ext===this)},em.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function(n,e){Ww[n]=!0,void 0!==e&&function(n){Yi.CO.console&&Yi.CO.console.error&&Yi.CO.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],u=i?i.attribs[c]:null;if((!i||l.enabled!==u.enabled)&&(l.enabled?r.enableVertexAttribArray.call(t,c):r.disableVertexAttribArray.call(t,c)),l.enabled){let h=!1;(!i||l.buffer!==u.buffer)&&(o!==l.buffer&&(r.bindBuffer.call(t,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==u.cached)&&r.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(t,34962,this.currentArrayBuffer)};const h$="OES_element_index",f$="WEBGL_draw_buffers",p$="WEBGL_debug_renderer_info",Fi=n=>Ir(n)?void 0:0,Lye={3074:n=>Ir(n)?void 0:36064,35723:n=>Ir(n)?void 0:4352,35977:Fi,32937:Fi,36795:(n,e)=>{const t=Ir(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(p$);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(p$);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Fi,35071:Fi,37447:Fi,36063:(n,e)=>{if(!Ir(n)){const t=n.getExtension(f$);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Fi,35374:Fi,35377:Fi,34852:n=>{if(!Ir(n)){const e=n.getExtension(f$);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(h$)?2147483647:65535,33001:n=>n.getExtension(h$)?16777216:65535,33e3:n=>16777216,37157:Fi,35373:Fi,35657:Fi,36183:Fi,37137:Fi,34045:Fi,35978:Fi,35979:Fi,35968:Fi,35376:Fi,35375:Fi,35659:Fi,37154:Fi,35371:Fi,35658:Fi,35076:Fi,35077:Fi,35380:Fi},g$="ANGLE_instanced_arrays",m$={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Va(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[g$]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Va(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Va(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Va(!1)},deleteQuery:()=>{Va(!1)},beginQuery:()=>{Va(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},KF={readBuffer:(n,e,t)=>{Ir(n)&&e(t)},getVertexAttrib:(n,e,t,r)=>{const{webgl2:i,ext:s}=function(n,e){return{webgl2:Ir(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(r){case 35069:o=!!i&&void 0;break;case 35070:o=i||s?void 0:0}return void 0!==o?o:e(t,r)},getProgramParameter:(n,e,t,r)=>{if(!Ir(n))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,r)},getInternalformatParameter:(n,e,t,r,i)=>{if(!Ir(n))switch(i){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,r,i)},getTexParameter(n,e,t,r){switch(r){case 34046:const{extensions:i}=n.luma,s=i.EXT_texture_filter_anisotropic;r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,r)},getParameter:function(n,e,t){const r=Lye[t],i="function"==typeof r?r(n,e,t):r;return void 0!==i?i:e(t)},hint:(n,e,t,r)=>e(t,r)};function Xye(n,{extension:e,target:t,target2:r}){const i=m$[e];Va(i);const{meta:s={}}=i,{suffix:o=""}=s,a=n.getExtension(e);for(const c of Object.keys(i)){const l=`${c}${o}`;let u=null;"meta"===c||"function"==typeof n[c]||(a&&"function"==typeof a[l]?u=(...h)=>a[l](...h):"function"==typeof i[c]&&(u=i[c].bind(t))),u&&(t[c]=u,r[c]=u)}}("undefined"!=typeof global?global:window).polyfillContext=function(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const t=n.getExtension;n.getExtension=function(i){return t.call(this,i)||("OES_vertex_array_object"!==i?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new em(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&Xye(n,{extension:t,target:n.luma,target2:n})}(n,m$),function(n,{target:e,target2:t}){Object.keys(KF).forEach(r=>{if("function"==typeof KF[r]){const i=n[r]?n[r].bind(n):()=>{},s=KF[r].bind(null,n,i);e[r]=s,t[r]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const XF={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},bp=(n,e,t)=>e?n.enable(t):n.disable(t),_$=(n,e,t)=>n.hint(t,e),zc=(n,e,t)=>n.pixelStorei(t,e);function Yw(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const Jye={3042:bp,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:bp,2885:(n,e)=>n.cullFace(e),2929:bp,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:bp,35723:_$,36006:(n,e)=>{const t=Ir(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:_$,2849:(n,e)=>n.lineWidth(e),32823:bp,32824:"polygonOffset",10752:"polygonOffset",35977:bp,32938:"sampleCoverage",32939:"sampleCoverage",3089:bp,3088:(n,e)=>n.scissor(...e),2960:bp,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:zc,3317:zc,37440:zc,37441:zc,37443:zc,3330:zc,3332:zc,3331:zc,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:zc,32878:zc,3316:zc,3315:zc,32877:zc,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=Yw(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=Yw(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=Yw(e)?e:[e,e];const[t,r]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,r)},stencilFunc:(n,e)=>{e=Yw(e)&&3===e.length?[...e,...e]:e;const[t,r,i,s,o,a]=e;n.stencilFuncSeparate(1028,t,r,i),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=Yw(e)&&3===e.length?[...e,...e]:e;const[t,r,i,s,o,a]=e;n.stencilOpSeparate(1028,t,r,i),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function Is(n,e,t){return void 0!==e[n]?e[n]:t[n]}const ebe={blendEquation:(n,e,t)=>n.blendEquationSeparate(Is(32777,e,t),Is(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Is(32969,e,t),Is(32968,e,t),Is(32971,e,t),Is(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Is(32824,e,t),Is(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Is(32938,e,t),Is(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Is(2962,e,t),Is(2967,e,t),Is(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Is(34816,e,t),Is(36003,e,t),Is(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Is(2964,e,t),Is(2965,e,t),Is(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Is(34817,e,t),Is(34818,e,t),Is(34819,e,t))},y$={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,r,i)=>n({32773:new Float32Array([e,t,r,i])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,r,i)=>n({32969:e,32968:t,32971:r,32970:i}),clearColor:(n,e,t,r,i)=>n({3106:new Float32Array([e,t,r,i])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,r,i)=>n({3107:[e,t,r,i]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,r,i)=>n({3088:new Int32Array([e,t,r,i])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,r)=>n({2962:e,2967:t,2963:r,34816:e,36003:t,36004:r}),stencilFuncSeparate:(n,e,t,r,i)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(n,e,t,r)=>n({2964:e,2965:t,2966:r,34817:e,34818:t,34819:r}),stencilOpSeparate:(n,e,t,r,i)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(n,e,t,r,i)=>n({2978:[e,t,r,i]})},Vd=(n,e)=>n.isEnabled(e),b$={3042:Vd,2884:Vd,2929:Vd,3024:Vd,32823:Vd,32926:Vd,32928:Vd,3089:Vd,2960:Vd,35977:Vd};function v$(n){for(const e in n)return!1;return!0}function tbe(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),r=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&r&&n.length===e.length){for(let i=0;i<n.length;++i)if(n[i]!==e[i])return!1;return!0}return!1}function w$(n,e){const t=n[e].bind(n);n[e]=function(...i){const s=i[0];return s in n.state.cache||(n.state.cache[s]=t(...i)),n.state.enable?n.state.cache[s]:t(...i)},Object.defineProperty(n[e],"name",{value:`${e}-from-cache`,configurable:!1})}function nbe(n,e,t){const r=n[e].bind(n);n[e]=function(...s){const{valueChanged:o,oldValue:a}=t(n.state._updateCache,...s);return o&&r(...s),a},Object.defineProperty(n[e],"name",{value:`${e}-to-cache`,configurable:!1})}class ibe{constructor(e,{copyState:t=!1,log:r=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(n,e){if("number"==typeof(e=e||XF)){const i=e,s=b$[i];return s?s(n,i):n.getParameter(i)}const t=Array.isArray(e)?e:Object.keys(e),r={};for(const i of t){const s=b$[i];r[i]=s?s(n,Number(i)):n.getParameter(Number(i))}return r}(e):Object.assign({},XF),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){Va(this.stateStack.length>0),Gh(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let r,t=!1;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Va(void 0!==s);const o=e[s],a=this.cache[s];tbe(o,a)||(t=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:r}}}function E$(n,e={}){const{enable:t=!0,copyState:r}=e;if(Va(void 0!==r),!n.state){const i="undefined"!=typeof global?global:window,{polyfillContext:s}=i;s&&s(n),n.state=new ibe(n,{copyState:r}),function(n){const e=n.useProgram.bind(n);n.useProgram=function(r){n.state.program!==r&&(e(r),n.state.program=r)}}(n);for(const o in y$)nbe(n,o,y$[o]);w$(n,"getParameter"),w$(n,"isEnabled")}return n.state.enable=t,n}function C$(n){Va(n.state),n.state.pop()}function Gh(n,e){if(Va(RT(n),"setParameters requires a WebGL context"),v$(e))return;const t={};for(const i in e){const s=Number(i),o=Jye[i];o&&("string"==typeof o?t[o]=!0:o(n,e[i],s))}const r=n.state&&n.state.cache;if(r)for(const i in t)ebe[i](n,e,r)}function ku(n,e,t){if(v$(e))return t(n);const{nocatch:r=!0}=e;let i;if(function(n){n.state||E$(n,{copyState:!1}),n.state.push()}(n),Gh(n,e),r)i=t(n),C$(n);else try{i=t(n)}finally{C$(n)}return i}function Dy(n){const{luma:e}=n;if(n.canvas&&e){const{clientWidth:t}=e.canvasSizeInfo;return t?n.drawingBufferWidth/t:1}return 1}function QF(n,e,t=!0){return function(n,e,t,r,i){const s=S$(n[0],e,t);let o=D$(n[1],e,r,i),a=S$(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=D$(n[1]+1,e,r,i),i?(a=0===a?a:a+1,l=o,o=a):l=a===r-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,Dy(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function S$(n,e,t){return Math.min(Math.round(n*e),t-1)}function D$(n,e,t,r){return r?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const ZF=(0,Yi.jU)(),ube=ZF&&"undefined"!=typeof document,x$={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function T$(n={}){Va(ZF,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},x$,n);const{width:e,height:t}=n;function r(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let i;n.onError=r;const{canvas:s}=n,o=function({canvas:n,width:e=800,height:t=600,onError:r}){let i;return"string"==typeof n?(ube&&"complete"===document.readyState||r(`createGLContext called on canvas '${n}' before page was loaded`),i=document.getElementById(n)):n?i=n:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(t)?`${t}px`:"100%",document.body.insertBefore(i,document.body.firstChild)),i}({canvas:s,width:e,height:t,onError:r});return i=function(n,e){const{onError:t}=e;let r=null;const i=c=>r=c.statusMessage||r;n.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${r||"Unknown error"}`)}(o,n),i?(i=JF(i,n),function(n){const e=Ir(n)?"WebGL2":"WebGL1",t=function(n){const e=n.getParameter(7936),t=n.getParameter(7937),r=n.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&n.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&n.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);mn.info(1,`${e}${n.debug?" debug":""} context ${t?`(${t.vendor},${t.renderer})`:""}`)()}(i),i):null}function JF(n,e={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},x$,e);const{manageState:t,debug:r}=e;return t&&E$(n,{copyState:!1,log:(...i)=>mn.log(1,...i)()}),ZF&&r&&(Yi.CO.makeDebugContext?(n=Yi.CO.makeDebugContext(n,e),mn.level=Math.max(mn.level,1)):mn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function A$(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class M${constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=A$(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(A$()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class ek{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:r}=e;return this.stats[t]||(this.stats[t]=e instanceof M$?e:new M$(t,r)),this.stats[t]}}const Kw="8.5.7",tm=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new ek({id:e})),this.stats.get(e)}};if(Yi.CO.luma&&Yi.CO.luma.VERSION!==Kw)throw new Error(`luma.gl - multiple VERSIONs detected: ${Yi.CO.luma.VERSION} vs 8.5.7`);function on(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function tk(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const r=n[e=e.replace(/^.*\./,"")];return on(void 0!==r,`Accessing undefined constant GL.${e}`),r}function vp(n,e){e=Number(e);for(const t in n)if(n[t]===e)return`GL.${t}`;return String(e)}Yi.CO.luma||((0,Yi.jU)()&&mn.log(1,"luma.gl 8.5.7 - set luma.log.level=1 (or higher) to trace rendering")(),Yi.CO.luma=Yi.CO.luma||{VERSION:Kw,version:Kw,log:mn,stats:tm,globals:{modules:{},nodeIO:{}}});const nk={};function jd(n="id"){return nk[n]=nk[n]||1,`${n}-${nk[n]++}`}function I$(n){return on("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function xy(n){let e=!0;for(const t in n){e=!1;break}return e}function R$(n,e,t,r){const i=`See luma.gl ${t} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);r.forEach(o=>{s.methodName||(s[o]=()=>{throw mn.removed(`Calling removed method ${e}.${o}: `,i)(),new Error(o)})})}const Ty="Resource subclass must define virtual methods";class Wh{constructor(e,t={}){OT(e);const{id:r,userData:i={}}=t;this.gl=e,this.gl2=e,this.id=r||jd(this.constructor.name),this.userData=i,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(r=>r.delete()),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){on(e=tk(this.gl,e));const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=Ir(this.gl);if("webgl2"in i&&!s||"extension"in i&&!this.gl.getExtension(i.extension)){const a=i.webgl1,c="webgl2"in i?i.webgl2:i.webgl1;return s?c:a}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:r}=e,i=this.constructor.PARAMETERS||{},s=Ir(this.gl),o={},a=t||Object.keys(i);for(const c of a){const l=i[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=r?vp(this.gl,c):c;o[h]=this.getParameter(c,e),r&&"GLenum"===l.type&&(o[h]=vp(this.gl,o[h]))}}return o}setParameter(e,t){on(e=tk(this.gl,e));const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=Ir(this.gl);if("webgl2"in i&&!s||"extension"in i&&!this.gl.getExtension(i.extension))throw new Error("Parameter not available on this platform");"GLenum"===i.type&&(t=tk(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,r){return R$(this,e,t,r)}initialize(e){}_createHandle(){throw new Error(Ty)}_deleteHandle(){throw new Error(Ty)}_bindHandle(e){throw new Error(Ty)}_getOptsFromHandle(){throw new Error(Ty)}_getParameter(e,t){throw new Error(Ty)}_setParameter(e,t){throw new Error(Ty)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this.constructor.name,t=tm.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this.constructor.name;tm.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this.constructor.name){const r=tm.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){const t=tm.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function rk(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Xw(n,{clamped:e=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Ebe({data:n,width:e,height:t}){const r=Math.round(e/2),i=Math.round(t/2),s=new Uint8Array(r*i*4);for(let o=0;o<i;o++)for(let a=0;a<r;a++)for(let c=0;c<4;c++)s[4*(o*r+a)+c]=n[4*(2*o*e+2*a)+c];return{data:s,width:r,height:i}}function ik(n,e,t){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=t;for(const a in r)a in e&&mn.removed(`${n}.${a}`,r[a]?`${n}.${r[a]}`:"N/A")();for(const a in i)a in e&&mn.deprecated(`${n}.${a}`,`${n}.${i[a]}`)();let o=null;for(const a in s)if(a in e){const c=s[a];mn.deprecated(`${n}.${a}`,`${n}.${c}`)(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Cbe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Sbe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class _c{static getBytesPerElement(e){return Xw(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return on(e.size),Xw(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new _c(...[Cbe,...e])}constructor(...e){e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return _c.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return _c.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=ik("Accessor",e,Sbe)).type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const N$={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Dbe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:N$},xbe={removedProps:N$};class Di extends Wh{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/_c.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/_c.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=ik("Buffer",e,Dbe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=ik("Buffer",e,xbe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new _c(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;on(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==i||void 0!==s?(ja(this.gl),this.gl.bufferSubData(this.target,r,t,i,s)):this.gl.bufferSubData(o,r,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:r=0,size:i}){const{gl:s}=this;return ja(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,t,r,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:r=0,length:i=0}={}){ja(this.gl);const s=Xw(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=r;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,i||o),l=a+c);const u=Math.min(o,c);return on((i=i||u)<=u),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,r,i),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:r=0,size:i}={}){return 35345===e||35982===e?void 0!==i?this.gl.bindBufferRange(e,t,this.handle,r,i):(on(0===r),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,r=e.byteLength+t){on(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,t,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,10),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=rk(e);return on(s),this.setAccessor(new _c(this.accessor,{type:s})),this}_setByteLength(e,t=this.usage){on(e>=0),this._trackDeallocatedMemory();let r=e;0===e&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,t),this.gl.bindBuffer(i,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const r=e/Xw(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new _c(this.accessor,{type:rk(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return mn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return mn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return mn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return mn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _c(this.accessor,e),this}}const sk={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},P$={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},F$={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Mbe=[9729,9728],k$=Yi.CO.WebGLBuffer||function(){};class Ay extends Wh{static isSupported(e,t={}){const{format:r,linearFiltering:i}=t;let s=!0;return r&&(s=s&&function(n,e){const t=sk[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const r=Ir(n)&&t.gl2||t.gl1;return"string"==typeof r?n.getExtension(r):r}(e,r),s=s&&(!i||function(n,e){const t=sk[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,r))),s}constructor(e,t){const{id:r=jd("texture"),handle:i,target:s}=t;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then(M=>this.initialize(Object.assign({},e,{pixels:M,data:M}))),this;const r="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(r&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u}=e;t||(t=i);let{width:h,height:f,dataFormat:g,type:m,compressed:b=!1,mipmaps:_=!0}=e;const{depth:R=0}=e;return({width:h,height:f,compressed:b,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:b,data:t,width:h,height:f})),this.width=h,this.height=f,this.depth=R,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),_&&this._isNPOT()&&(mn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),_=!1,this._updateForNPOT(c)),this.mipmaps=_,this.setImageData({data:t,width:h,height:f,depth:R,format:s,type:m,dataFormat:g,border:o,mipmaps:_,parameters:l,compressed:b}),_&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),r&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:r=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(e={}){return this._isNPOT()?(mn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ku(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;l||(l=r),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:l,width:h,height:f}));const{gl:b}=this;b.bindTexture(this.target,this.handle);let R,_=null;return({data:l,dataType:_}=this._getDataType({data:l,compressed:m})),ku(this.gl,c,()=>{switch(_){case"null":b.texImage2D(t,i,s,h,f,o,g,u,l);break;case"typed-array":b.texImage2D(t,i,s,h,f,o,g,u,l,a);break;case"buffer":R=ja(b),R.bindBuffer(35052,l.handle||l),R.texImage2D(t,i,s,h,f,o,g,u,a),R.bindBuffer(35052,null);break;case"browser-object":Ir(b)?b.texImage2D(t,i,s,h,f,o,g,u,l):b.texImage2D(t,i,s,g,u,l);break;case"compressed":for(const[M,ee]of l.entries())b.compressedTexImage2D(t,M,ee.format,ee.width,ee.height,o,ee.data);break;default:on(!1,"Unknown image data type")}}),this._trackAllocatedMemory(l&&l.byteLength?l.byteLength:this.width*this.height*(P$[this.dataFormat]||4)*(F$[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:r=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:c=0,format:l=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:g=0,border:m=this.border,parameters:b={}}){if(({type:u,dataFormat:h,compressed:f,width:o,height:a}=this._deduceParameters({format:l,type:u,dataFormat:h,compressed:f,data:r,width:o,height:a})),on(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=t),r&&r.data){const _=r;r=_.data,o=_.shape[0],a=_.shape[1]}r instanceof Di&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),ku(this.gl,b,()=>{if(f)this.gl.compressedTexSubImage2D(e,c,i,s,o,a,l,r);else if(null===r)this.gl.texSubImage2D(e,c,i,s,o,a,h,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,c,i,s,o,a,h,u,r,g);else if(r instanceof k$){const _=ja(this.gl);_.bindBuffer(35052,r),_.texSubImage2D(e,c,i,s,o,a,h,u,g),_.bindBuffer(35052,null)}else Ir(this.gl)?ja(this.gl).texSubImage2D(e,c,i,s,o,a,h,u,r):this.gl.texSubImage2D(e,c,i,s,h,u,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return mn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Di?{data:e.handle,dataType:"buffer"}:e instanceof k$?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:c}=e;const l=sk[t];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:i,height:s}=this._deduceImageSize(r,i,s)),{dataFormat:o,type:a,compressed:c,width:i,height:s,format:t,data:r}}_deduceImageSize(e,t,r){let i;return i="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:r}:{width:t>=0?t:1,height:r>=0?r:1},on(i,"Could not deduced texture size"),on(void 0===t||i.width===t,"Deduced texture width does not match supplied width"),on(void 0===r||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:on(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(Ir(this.gl)||!this.width||!this.height||I$(this.width)&&I$(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Mbe.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function Ibe(n,e){return on("string"==typeof n),n=""+n,new Promise((t,r)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>r(new Error(`Could not load image ${n}.`)),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=n}catch(i){r(i)}})}class $c extends Ay{static isSupported(e,t){return Ay.isSupported(e,t)}constructor(e,t={}){OT(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:Ibe(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const nm="EXT_color_buffer_float",L$={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:nm,bpp:2},33327:{gl2:nm,bpp:4},34842:{gl2:nm,bpp:8},33326:{gl2:nm,bpp:4},33328:{gl2:nm,bpp:8},34836:{gl2:nm,bpp:16},35898:{gl2:nm,bpp:4}};class My extends Wh{static isSupported(e,{format:t}={format:null}){return!t||function(n,e,t){const r=t[e];if(!r)return!1;const i=Ir(n)&&r.gl2||r.gl1;return"string"==typeof i?n.getExtension(i):i}(e,t,L$)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:r=1,samples:i=0}){return on(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&Ir(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,t,r):this.gl.renderbufferStorage(36161,e,t,r),this.format=e,this.width=t,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*L$[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const H$="clear: bad arguments";function ak(n,{framebuffer:e=null,color:t=null,depth:r=null,stencil:i=null}={}){const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),r&&(o|=256,!0!==r&&(s.clearDepth=r)),i&&(o|=1024,!0!==r&&(s.clearStencil=r)),on(0!==o,H$),ku(n,s,()=>{n.clear(o)})}function z$(n,e,t,r,i,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,i)}function fr(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(c){z$(s,r,i,o,a,"next",c)}function a(c){z$(s,r,i,o,a,"throw",c)}o(void 0)})}}const ck=[34069,34070,34071,34072,34073,34074];let Lbe=(()=>{class n extends Ay{constructor(t,r={}){OT(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(t={}){const{mipmaps:r=!0,parameters:i={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(i)}),this}subImage({face:t,data:r,x:i=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:t,data:r,x:i,y:s,mipmapLevel:o})}setCubeMapImageData({width:t,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:c=5121}){var l=this;return fr(function*(){const{gl:u}=l,h=i||s,f=yield Promise.all(ck.map(g=>{const m=h[g];return Promise.all(Array.isArray(m)?m:[m])}));l.bind(),ck.forEach((g,m)=>{f[m].length>1&&!1!==l.opts.mipmaps&&mn.warn(`${l.id} has mipmap and multiple LODs.`)(),f[m].forEach((b,_)=>{t&&r?u.texImage2D(g,_,a,t,r,o,a,c,b):u.texImage2D(g,_,a,a,c,b)})}),l.unbind()})()}setImageDataForFace(t){const{face:r,width:i,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},t,{face:r,data:g,pixels:g}))):this.width||this.height?h.texImage2D(r,0,l,i,s,c,l,u,f):h.texImage2D(r,0,l,l,u,f),this}}return n.FACES=ck,n})();class Bbe extends Ay{static isSupported(e){return Ir(e)}constructor(e,t={}){ja(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:r,height:i,depth:s=1,border:o=0,format:a,type:c=5121,offset:l=0,data:u,parameters:h={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ku(this.gl,h,()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,t,r,i,s,o,a,c,u),u instanceof Di&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,t,r,i,s,o,a,c,l))}),this._trackAllocatedMemory(u&&u.byteLength?u.byteLength:this.width*this.height*this.depth*(P$[this.dataFormat]||4)*(F$[this.type]||1),"Texture"),this.loaded=!0,this}}function jbe(n,e){const{gl:t,width:r,height:i,id:s}=n;return new wo(t,Object.assign({},e,{id:`framebuffer-for-${s}`,width:r,height:i,attachments:{36064:n}}))}function NT(n,e={}){const{sourceX:t=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:h}=function(n){return n instanceof wo?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:jbe(n),deleteFramebuffer:!0}}(n);on(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,c=c||u.height,36064===s&&null===g&&(s=1028),on(m[s]),l=l||m[s].type,o=function(n,e,t,r,i){if(n)return n;return new(Xw(e=e||5121,{clamped:!1}))(r*i*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return on(!1),0}}(t))}(o,l,i,a,c),l=l||rk(o);const b=f.bindFramebuffer(36160,g);return f.readPixels(t,r,a,c,i,l,o),f.bindFramebuffer(36160,b||null),h&&u.delete(),o}function lk(n,{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}={}){let r=NT(n,{sourceAttachment:e}),{width:i,height:s}=n;for(;s>t;)({data:r,width:i,height:s}=Ebe({data:r,width:i,height:s}));!function({data:n,width:e,height:t,bytesPerPixel:r=4,temp:i}){const s=e*r;i=i||new Uint8Array(s);for(let o=0;o<t/2;++o){const a=o*s,c=(t-o-1)*s;i.set(n.subarray(a,a+s)),n.copyWithin(a,c,c+s),n.set(i,c)}}({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),c=a.createImageData(i,s);return c.data.set(r),a.putImageData(c,0,0),o.toDataURL()}const G$="Multiple render targets not supported";class wo extends Wh{static isSupported(e,t={}){const{colorBufferFloat:r,colorBufferHalfFloat:i}=t;let s=!0;return r&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new wo(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=ja(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=ja(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:r=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:c,drawBuffers:l}){if(on(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,r)for(const u in r){const h=r[u];(Array.isArray(h)?h[0]:h).resize({width:e,height:t})}else r=this._createDefaultAttachments(i,s,o,e,t);this.update({clearAttachments:!0,attachments:r,readBuffer:c,drawBuffers:l}),r&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),r&&this._setDrawBuffers(r),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:t,height:r}=e;if(null===this.handle)return on(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&mn.log(2,`Resizing framebuffer ${this.id} to ${t}x${r}`)();for(const i in this.attachments)this.attachments[i].resize({width:t,height:r});return this.width=t,this.height=r,this}attach(e,{clearAttachments:t=!1,resizeAttachments:r=!0}={}){const i={};t&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){on(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=i[a];let l=c;if(l)if(l instanceof My)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[u,h=0,f=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);r&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function(n){return(wo.STATUS||{})[n]||`Framebuffer error ${n}`}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}clear(e={}){const{color:t,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||r||i)&&ak(this.gl,{color:t,depth:r,stencil:i}),s.forEach((a,c)=>{!function(n,{framebuffer:e=null,buffer:t=6144,drawBuffer:r=0,value:i=[0,0,0,0]}={}){ja(n),ku(n,{framebuffer:e},()=>{switch(t){case 6144:switch(i.constructor){case Int32Array:n.clearBufferiv(t,r,i);break;case Uint32Array:n.clearBufferuiv(t,r,i);break;case Float32Array:default:n.clearBufferfv(t,r,i)}break;case 6145:n.clearBufferfv(6145,0,[i]);break;case 6146:n.clearBufferiv(6146,0,[i]);break;case 34041:const[s,o]=i;n.clearBufferfi(34041,0,s,o);break;default:on(!1,H$)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return mn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return mn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return mn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return mn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return mn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return mn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:r=0,width:i,height:s}){const o=ja(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===t&&0===r&&void 0===i&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,r,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,r){let i=this._getAttachmentParameterFallback(t);return null===i&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=vp(this.gl,i)),i}getAttachmentParameters(e=36064,t,r=this.constructor.ATTACHMENT_PARAMETERS||[]){const i={};for(const s of r)i[t?vp(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return i}getParameters(e=!0){const t=Object.keys(this.attachments),r={};for(const i of t){const s=Number(i);r[e?vp(this.gl,s):s]=this.getAttachmentParameters(s,e)}return r}show(){return"undefined"!=typeof window&&window.open(lk(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>mn.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const r=lk(this,{targetMaxHeight:100});return mn.image({logLevel:e,message:t,image:r},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new $c(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&r?(o=o||{},o[33306]=new My(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new My(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&on(!1),o}_unattach(e){const t=this.attachments[e];!t||(t instanceof My?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:r,level:i}){const{gl:s}=this;switch(s.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:ja(s).framebufferTextureLayer(36160,e,t.target,i,r);break;case 34067:const a=function(n){return n<34069?n+34069:n}(r);s.framebufferTexture2D(36160,e,a,t.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,t.handle,i);break;default:on(!1,"Illegal texture type")}s.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=function(n){return Ir(n)?n:null}(this.gl);t?t.readBuffer(e):on(36064===e||1029===e,G$),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,r=ja(t);if(r)r.drawBuffers(e);else{const i=t.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):on(1===e.length&&(36064===e[0]||1029===e[0]),G$)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in W$)void 0===n.luma.caps[e]&&(n.luma.caps[e]=Y$(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}wo.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const W$={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const e=new $c(n,{format:6408,type:5126,dataFormat:6408}),t=new wo(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=t.getStatus();return e.delete(),t.delete(),36053===r},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function uk(n,e){return q$(n,e)}function q$(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>Y$(n,t))}function Y$(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function(n,e){const t=W$[e];let r;on(t,e);const i=Ir(n)&&t[1]||t[0];if("function"==typeof i)r=i(n);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&Boolean(n.getExtension(s))}else"string"==typeof i?r=Boolean(n.getExtension(i)):"boolean"==typeof i?r=i:on(!1);return r}(n,e)),n.luma.caps[e]||mn.log(2,`Feature: ${e} not supported`)(),n.luma.caps[e]}class dk{constructor(e,t){this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:r}=this.source,{size:i}=t;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=t.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return ht(ht({},this.source.getAccessor()),this.opts)}}const Zw=new class{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,t,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=i||e&&e.constructor||Float32Array,u=t*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let h;c&&(h=c*r+s);const f=this._allocate(l,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,t,r,i){let s=Math.max(Math.ceil(t*this.props.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return r&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:r}=e,{byteLength:i}=r,s=t.findIndex(o=>o.byteLength>=i);s<0?t.push(r):(s>0||t.length<this.props.poolSize)&&t.splice(s,0,r),t.length>this.props.poolSize&&t.shift()}},Zbe=(Math,1/180*Math.PI),Ki={};function eve(n,{precision:e=Ki.precision||4}={}){return n=function(n){return Math.round(n/Ki.EPSILON)*Ki.EPSILON}(n),`${parseFloat(n.toPrecision(e))}`}function wp(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function qh(n,e,t){if(wp(n)){t=t||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let r=0;r<t.length&&r<n.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}function K$(n){return function(n,e){return qh(n,t=>t*Zbe,void 0)}(n)}function rm(n,e,t){return qh(n,r=>Math.max(e,Math.min(t,r)))}function PT(n,e,t){return wp(n)?n.map((r,i)=>PT(r,e[i],t)):t*e+(1-t)*n}function Jw(n,e,t){const r=Ki.EPSILON;t&&(Ki.EPSILON=t);try{if(n===e)return!0;if(wp(n)&&wp(e)){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!Jw(n[i],e[i]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=Ki.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{Ki.EPSILON=r}}function Yh(n,e){if(!n)throw new Error(`math.gl assertion ${e}`)}Ki.EPSILON=1e-12,Ki.debug=!1,Ki.precision=4,Ki.printTypes=!1,Ki.printDegrees=!1,Ki.printRowMajor=!0;class hk extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return Yh(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}to(e){return e===this?this:wp(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Ki)}formatString(e){let t="";for(let r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+eve(this[r],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!Jw(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,r){void 0===r&&(r=t,t=e,e=this);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(t[i]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}add(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=t[r];return this.check()}subtract(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=t[r];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Ki.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function Zo(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function FT(n,e,t=""){if(Ki.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error(`math.gl: ${t} some fields set to invalid numbers'`);return n}const X$={};function fk(n,e){X$[n]||(X$[n]=!0,console.warn(`${n} has been removed in version ${e}, see upgrade guide for more information`))}class ave extends hk{get ELEMENTS(){return Yh(!1),0}copy(e){return Yh(!1),this}get x(){return this[0]}set x(e){this[0]=Zo(e)}get y(){return this[1]}set y(e){this[1]=Zo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];t+=i*i}return Zo(t)}dot(e){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return Zo(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=t[r];return this.check()}divide(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Yh(e>=0&&e<this.ELEMENTS,"index is out of range"),Zo(this[e])}setComponent(e,t){return Yh(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var Li=1e-6,yc="undefined"!=typeof Float32Array?Float32Array:Array;function Q$(){var n=new yc(3);return yc!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Z$(n,e,t){var r=new yc(3);return r[0]=n,r[1]=e,r[2]=t,r}function J$(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function kT(n,e,t){var r=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return n[0]=i*c-s*a,n[1]=s*o-r*c,n[2]=r*a-i*o,n}function eG(n,e,t){var r=e[0],i=e[1],s=e[2],o=t[3]*r+t[7]*i+t[11]*s+t[15];return n[0]=(t[0]*r+t[4]*i+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*r+t[5]*i+t[9]*s+t[13])/o,n[2]=(t[2]*r+t[6]*i+t[10]*s+t[14])/o,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function tG(n,e,t){const r=e[0],i=e[1],s=e[2],o=t[3]*r+t[7]*i+t[11]*s||1;return n[0]=(t[0]*r+t[4]*i+t[8]*s)/o,n[1]=(t[1]*r+t[5]*i+t[9]*s)/o,n[2]=(t[2]*r+t[6]*i+t[10]*s)/o,n}Q$();const pk=[0,0,0],nG={};class _a extends ave{static get ZERO(){return nG.ZERO=nG.ZERO||Object.freeze(new _a(0,0,0,0))}constructor(e=0,t=0,r=0){super(-0,-0,-0),1===arguments.length&&wp(e)?this.copy(e):(Ki.debug&&(Zo(e),Zo(t),Zo(r)),this[0]=e,this[1]=t,this[2]=r)}set(e,t,r){return this[0]=e,this[1]=t,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Ki.debug&&(Zo(e.x),Zo(e.y),Zo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Zo(e)}angle(e){return function(n,e){var t=n[0],r=n[1],i=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+r*r+i*i)*Math.sqrt(s*s+o*o+a*a),h=u&&J$(n,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return kT(this,this,e),this.check()}rotateX({radians:e,origin:t=pk}){return function(n,e,t,r){var i=[],s=[];i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=pk}){return function(n,e,t,r){var i=[],s=[];i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=pk}){return function(n,e,t,r){var i=[],s=[];i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return eG(this,this,e),this.check()}transformAsVector(e){return tG(this,this,e),this.check()}transformByMatrix3(e){return function(n,e,t){var r=e[0],i=e[1],s=e[2];n[0]=r*t[0]+i*t[3]+s*t[6],n[1]=r*t[1]+i*t[4]+s*t[7],n[2]=r*t[2]+i*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const r=e[0],i=e[1];n[0]=t[0]*r+t[2]*i,n[1]=t[1]*r+t[3]*i,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(n,e,t){var r=t[0],i=t[1],s=t[2],a=e[0],c=e[1],l=e[2],u=i*l-s*c,h=s*a-r*l,f=r*c-i*a,g=i*f-s*h,m=s*u-r*f,b=r*h-i*u,_=2*t[3];h*=_,f*=_,m*=2,b*=2,n[0]=a+(u*=_)+(g*=2),n[1]=c+h+m,n[2]=l+f+b}(this,this,e),this.check()}}const rG=new _a;function Iy(n,e,t,r){rG.set(n,e,t);const i=rG.len();return{distance:r/i,normal:new _a(-n/i,-e/i,-t/i)}}function Mve(n){return n-Math.fround(n)}let tE;function gk(n,{size:e=1,startIndex:t=0,endIndex:r}){Number.isFinite(r)||(r=n.length);const i=(r-t)/e;tE=Zw.allocate(tE,i,{type:Float32Array,size:2*e});let s=t,o=0;for(;s<r;){for(let a=0;a<e;a++){const c=n[s++];tE[o+a]=c,tE[o+a+e]=Mve(c)}o+=2*e}return tE.subarray(0,i*e*2)}function LT(n){return n.stride||n.size*n.bytesPerElement}function iG(n,e){e.offset&&ti.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=LT(n),s=("vertexOffset"in e?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return Kn(ht({},e),{offset:s,stride:t})}function Lu(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}const sG=[],oG=[];function aG(n,e=0,t=1/0){let r=sG;const i={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?r=n:n.length>0&&(oG.length=n.length,r=oG):r=sG,(e>0||Number.isFinite(t))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,t),i.index=e-1),{iterable:r,objectInfo:i}}function cG(n){return n&&n[Symbol.asyncIterator]}function mk(n,e=(()=>!0)){return Array.isArray(n)?lG(n,e,[]):e(n)?[n]:[]}function lG(n,e,t){let r=-1;for(;++r<n.length;){const i=n[r];Array.isArray(i)?lG(i,e,t):e(i)&&t.push(i)}return t}function Nve({target:n,source:e,start:t=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=t;o<i;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const Pve=[],BT=[[0,1/0]];function _k({source:n,target:e,start:t=0,end:r,size:i,getData:s}){const o=n.length,a=(r=r||e.length)-t;if(o>a)return void e.set(n.subarray(0,a),t);if(e.set(n,t),!s)return;let c=o;for(;c<a;){const l=s(c,n);for(let u=0;u<i;u++)e[t+c]=l[u]||0,c++}}const Lve={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function uG(n,e){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",ht(ht(ht({},Lve[n.type]),e),n)):null}function dG(n,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function hG(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function fG(n){n.push(n.shift())}function yk(n,e){const{doublePrecision:t,settings:r,value:i,size:s}=n,o=t&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function pG({buffer:n,numInstances:e,attribute:t,fromLength:r,fromStartIndices:i,getData:s=(o=>o)}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,c=t.byteOffset,l=t.startIndices,u=i&&l,h=yk(t,e),f=t.state.constant;if(!u&&r>=h)return;const g=f?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!f){const R=s;s=(M,ee)=>t._normalizeConstant(R(M,ee))}const m=f?(R,M)=>s(g,M):(R,M)=>s(g.subarray(R,R+a),M),b=n.getData({length:r}),_=new Float32Array(h);(function({source:n,target:e,size:t,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return _k({source:n,target:e,size:t,getData:r}),e;let o=0,a=0;const c=r&&((u,h)=>r(u+a,h)),l=Math.min(i.length,s.length);for(let u=1;u<l;u++){const h=i[u]*t,f=s[u]*t;_k({source:n.subarray(o,h),target:e,start:a,end:f,size:t,getData:c}),o=h,a=f}a<e.length&&_k({source:[],target:e,start:a,size:t,getData:c})})({source:b,target:_,sourceStartIndices:i,targetStartIndices:l,size:a,getData:m}),n.byteLength<_.byteLength+c&&n.reallocate(_.byteLength+c),n.subData({data:_,offset:c})}class bk extends class{constructor(e,t){this.gl=e,this.id=t.id,this.size=t.size;const r=t.logicalType||t.type,i=5130===r;let{defaultValue:s}=t;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),t.defaultValue=s;let o=r;i?o=5126:!o&&t.isIndexed?o=e&&uk(e,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),t.logicalType=r,t.type=o;let a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&!1===t.fp64&&(a=Float32Array),t.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Di(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*LT(e):0}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Zw.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=function(n,e){const t=iG(n,e);return{high:t,low:Kn(ht({},t),{offset:t.offset+4*n.size})}}(this.getAccessor(),t||{});return r[e]=new dk(this,s.high),r["".concat(e,"64Low")]=i?new dk(this,s.low):new Float32Array(this.size),r}if(t){const r=iG(this.getAccessor(),t);return{[e]:new dk(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}setData(e){const{state:t}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof Di&&(e={buffer:e});const r=ht(ht({},this.settings),e);if(t.bufferAccessor=r,e.constant){let i=e.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this._normalizeConstant(i)),t.constant&&this._areValuesEqual(i,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=i}else if(e.buffer){const i=e.buffer;t.externalBuffer=i,t.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;r.type=e.type||i.accessor.type,r.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=LT(r)}else if(e.value){this._checkExternalBuffer(e);let i=e.value;t.externalBuffer=null,t.constant=!1,this.value=i,r.bytesPerElement=i.BYTES_PER_ELEMENT,r.stride=LT(r);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&i instanceof Float64Array&&(i=gk(i,r));const a=i.byteLength+o+2*r.stride;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:i,offset:o}),r.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){const{value:t}=this,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?gk(t,{size:this.size,startIndex:r,endIndex:i}):t.subarray(r,i),offset:r*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:t=!1}){const{state:r}=this,i=r.allocatedValue,s=Zw.allocate(i,e+1,{size:this.size,type:this.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&i&&o.subData({data:i instanceof Float64Array?gk(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!e.constant&&t){const r=this.defaultType;let i=!1;if(this.doublePrecision&&(i=t.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof r)&&this.settings.normalized&&!("normalized"in e)&&ti.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return t[r]=e,t;if(!e)return t[r]=i[0],t;switch(s){case 4:t[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)t[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}}{constructor(e,t={}){super(e,t);const{transition:r=!1,noAlloc:i=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:c=null}=t;Object.assign(this.settings,{transition:r,noAlloc:i,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:BT,startIndices:c}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,r=this.settings.transition;return uG(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],r)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:r=0,endRow:i=1/0}=t;this.state.updateRanges=function(n,e){if(n===BT||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],r=n.length;let i=0;for(let s=0;s<r;s++){const o=n[s];o[1]<e[0]?(t.push(o),i=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(i,0,e),t}(this.state.updateRanges,[r,i])}else this.state.updateRanges=BT}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Pve}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:t,settings:r}=this;return!r.noAlloc&&!!r.update&&(super.allocate({numInstances:e,copy:t.updateRanges!==BT}),!0)}updateBuffer({numInstances:e,data:t,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,u]of s)o.call(i,this,{data:t,startRow:l,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else for(const[l,u]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:r,settings:i}=this;return e?!i.noAlloc&&(r.binaryValue===e?(this.clearNeedsUpdate(),!0):(r.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),i.transform||t!==this.startIndices?(Lu(ArrayBuffer.isView(e.value),"invalid ".concat(i.accessor)),r.binaryAccessor=function(n,{size:e,stride:t,offset:r,startIndices:i,nested:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:e,c=r?r/o:0,l=Math.floor((n.length-c)/a);return(u,{index:h,target:f})=>{if(!i){const _=h*a+c;for(let R=0;R<e;R++)f[R]=n[_+R];return f}const g=i[h],m=i[h+1]||l;let b;if(s){b=new Array(m-g);for(let _=g;_<m;_++){const R=_*a+c;f=new Array(e);for(let M=0;M<e;M++)f[M]=n[R+M];b[_-g]=f}}else if(a===e)b=n.subarray(g*e+c,m*e+c);else{b=new n.constructor((m-g)*e);let _=0;for(let R=g;R<m;R++){const M=R*a+c;for(let ee=0;ee<e;ee++)b[_++]=n[M+ee]}}return b}}(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:e.size&&e.size!==this.size}),!1):(this.clearNeedsUpdate(),this.setData(e),!0))):(r.binaryValue=null,r.binaryAccessor=null,!1)}getVertexOffset(e){const{startIndices:t}=this;return(t?t[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const r in e)Object.assign(t,super.getShaderAttributes(r,e[r]));return t}_autoUpdater(e,{data:t,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=c.binaryAccessor||("function"==typeof f?f:s[f]);Lu("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let b=e.getVertexOffset(r);const{iterable:_,objectInfo:R}=aG(t,r,i);for(const M of _){R.index++;let ee=m(M,R);if(g&&(ee=g.call(this,ee)),h){const _e=(R.index<h.length-1?h[R.index+1]:o)-h[R.index];if(ee&&Array.isArray(ee[0])){let Ie=b;for(const Ue of ee)e._normalizeValue(Ue,l,Ie),Ie+=u}else ee&&ee.length>u?l.set(ee,b):(e._normalizeValue(ee,R.target,0),Nve({target:l,source:R.target,start:b,count:_e}));b+=_e*u}else e._normalizeValue(ee,l,b),b+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let r=!0;switch(t){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}let vk={};function ya(n){ti.level>0&&vk[n]&&vk[n].call(...arguments)}function Gc(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const gG="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",jve=`#version 300 es\n${gG}`;function mG(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[r,i,s]=t;return e.includes(r)&&i&&s?{qualifier:r,type:i,name:s.split(";")[0]}:null}function _G(n={}){const{version:e=100,input:t,inputType:r,output:i}=n;if(!t)return 300===e?jve:e>300?`#version ${e}\n${gG}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,e){switch(e){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return Gc(!1),null}}(t,r);return e>=300?`#version ${e} ${300===e?"es":""}\nin ${r} ${t};\nout vec4 ${i};\nvoid main() {\n  ${i} = ${s};\n}`:`varying ${r} ${t};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class yG extends Wh{static isSupported(e){return Ir(e)}constructor(e,t={}){ja(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,xy(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(t);return r<0?(this.unused[e]=i,mn.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,r,i;return e instanceof Di?i=e:(i=e.buffer,r=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==r)&&(t=t||0,r=r||i.byteLength-t),{buffer:i,byteOffset:t,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,r=0,i){const s=t&&t.handle;return s&&void 0!==i?this.gl.bindBufferRange(35982,e,s,r,i):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class $ve{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=t;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],r=e?t[e]:null;return r?r instanceof Di?r:r.buffer:null}getData(e={}){const{varyingName:t}=e,r=this.getBuffer(t);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&on(Ir(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in t&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if("string"==typeof s){const o=t[s],{byteLength:a,usage:c,accessor:l}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:c,accessor:l})}}return r}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:r})}_setupTransformFeedback(e,{model:t}){const{program:r}=t;e.transformFeedback=new yG(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:t,feedbackBuffers:r})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];t[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],on(r[s]instanceof Di)}return{sourceBuffers:t,feedbackBuffers:r}}_createNewBuffer(e,t){const r=new Di(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}function bG(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const r=parseInt(t[1],10);Number.isFinite(r)&&(e=r)}return e}const nE="vs",qve={[nE]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},VT="__LUMA_INJECT_DECLARATIONS__",vG=/void\s+main\s*\([^)]*\)\s*\{\n?/,wG=/}\n?[^{}]*$/,Ek=[];function EG(n,e,t,r=!1){const i=e===nE;for(const s in t){const o=t[s];o.sort((c,l)=>c.order-l.order),Ek.length=o.length;for(let c=0,l=o.length;c<l;++c)Ek[c]=o[c].injection;const a=`${Ek.join("\n")}\n`;switch(s){case"vs:#decl":i&&(n=n.replace(VT,a));break;case"vs:#main-start":i&&(n=n.replace(vG,c=>c+a));break;case"vs:#main-end":i&&(n=n.replace(wG,c=>a+c));break;case"fs:#decl":i||(n=n.replace(VT,a));break;case"fs:#main-start":i||(n=n.replace(vG,c=>c+a));break;case"fs:#main-end":i||(n=n.replace(wG,c=>a+c));break;default:n=n.replace(s,c=>c+a)}}return n=n.replace(VT,""),r&&(n=n.replace(/\}\s*$/,s=>s+qve[e])),n}function Ck(n){const e={};return Gc(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const r in t)e[r]=e[r]?`${e[r]}\n${t[r]}`:t[r]}),e}const Yve={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},jT="transform_uSize_",CG="transform_position";const n0e={10241:9728,10240:9728,10242:33071,10243:33071};class i0e{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=r[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function({sourceTextureMap:n,targetTextureVarying:e,targetTexture:t}){const r={};let i,s;e&&(({width:i,height:s}=t),r[`${jT}${e}`]=[i,s]);for(const o in n)({width:i,height:s}=n[o]),r[`${jT}${o}`]=[i,s];return r}({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],r=NT(t);if(!e)return r;const i=r.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Gc(!1),null}}(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let c=0;c<r.length;c+=4)for(let l=0;l<s;l++)o[a++]=r[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:r}=e;if(r instanceof $c)return r;const i=t[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Di(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:t,targetTexture:r})}}_updateBinding(e,t){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new wo(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const r in t)t[r].setParameters(n0e)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function(n,e){on(n instanceof $c||n instanceof Lbe||n instanceof Bbe);const t=n.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u}=n;return new t(r,Object.assign({width:i,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u},{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}}))}(e);return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function({vs:n,sourceTextureMap:e,targetTextureVarying:t,targetTexture:r}){let s=Object.keys(e).length,o=null;const a={};let c=n,l={};if(s>0||t){const u=c.split("\n"),h=u.slice();if(u.forEach((f,g,m)=>{if(s>0){const b=function(n,e){const t={},r=function(n){return mG(n,["attribute","in"])}(n);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:c,uniformDeclerations:l}=function(n){const e=`transform_uSampler_${n}`,t=`${jT}${n}`;return{samplerName:e,sizeName:t,uniformDeclerations:`  uniform sampler2D ${e};\n  uniform vec2 ${t};`}}(s),h=`  ${i} ${s} = transform_getInput(${a}, ${c}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Gc(!1),null}}(i)};\n`;return t[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:t}}return null}(f,e);if(b){const{updatedLine:_,inject:R}=b;h[g]=_,l=Ck([l,R]),Object.assign(a,b.samplerTextureMap),s--}}t&&!o&&(o=function(n,e){const t=mG(n,["varying","out"]);return t&&t.name===e?t.type:null}(f,t))}),t){on(r);const f=`${jT}${t}`;l=Ck([l,{"vs:#decl":`uniform vec2 ${f};\n`,"vs:#main-start":`     vec2 ${CG} = transform_getPos(${f});\n     gl_Position = vec4(${CG}, 0, 1.);\n`}])}c=h.join("\n")}return{vs:c,targetTextureType:o,inject:l,samplerTextureMap:a}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),l=Ck([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:i,fs:e._fs||_G({version:bG(i),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Yve].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}const Sk={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function o0e(n){let e=SG(n);return"object"===e?n?"type"in n?Object.assign({},n,Sk[n.type]):"value"in n?(e=SG(n.value),Object.assign({type:e},n,Sk[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},Sk[e])}function SG(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class Dk{constructor({name:e,vs:t,fs:r,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:c={},inject:l={},vertexShader:u,fragmentShader:h}){Gc("string"==typeof e),this.name=e,this.vs=t||u,this.fs=r||h,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=c,this.injections=function(n){const e={vs:{},fs:{}};for(const t in n){let r=n[t];const i=t.slice(0,2);"string"==typeof r&&(r={order:0,injection:r}),e[i][t]=r}return e}(l),s&&(this.uniforms=function(n){const e={};for(const t in n){const i=o0e(n[t]);e[t]=i}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Gc(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?t.deprecated(r.old,r.new)():t.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}_defaultGetUniforms(e={}){const t={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Gc(s.validate(e[i],s),`${this.name}: invalid ${i}`),t[i]=e[i]):t[i]=s.value}return t}}function u0e(n){return function(n){const e={},t={};return xk({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((r,i)=>t[i]-t[r]).map(r=>e[r])}(xG(n))}function xk({modules:n,level:e,moduleMap:t,moduleDepth:r}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const i of n)t[i.name]=i,(void 0===r[i.name]||r[i.name]<e)&&(r[i.name]=e);for(const i of n)i.dependencies&&xk({modules:i.dependencies,level:e+1,moduleMap:t,moduleDepth:r})}function xG(n,e){return n.map(t=>(t instanceof Dk||(Gc("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${t}' and use it directly.`),Gc(t.name,"shader module has no name"),(t=new Dk(t)).dependencies=xG(t.dependencies)),t))}const Tk={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},im={};function y0e(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/Apple/i)||e.match(/Apple/i)?"APPLE":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN"}Object.keys(Tk).forEach(n=>{im[n]=n});const Ak={};function TG(n,e,t={}){const r=Tk[e];if(Gc(r,e),!function(n={}){const e="undefined"!=typeof window&&window.navigator||{},t=n.userAgent||e.userAgent||"",r=-1!==t.indexOf("MSIE "),i=-1!==t.indexOf("Trident/");return r||i}(t))return!0;if(e in Ak)return Ak[e];const o=`#extension GL_${r[0]} : ${t.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),Ak[e]=c,c}function UT(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function(n,e){const t=Tk[e];Gc(t,e);const r=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&t[1]||t[0],i="string"==typeof r?Boolean(n.getExtension(r)):r;return Gc(!1===i||!0===i),i}(n,t))}function Ry(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const AG=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],E0e=[...AG,[Ry("attribute"),"in $1"],[Ry("varying"),"out $1"]],C0e=[...AG,[Ry("varying"),"in $1"]],MG=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],S0e=[...MG,[Ry("in"),"attribute $1"],[Ry("out"),"varying $1"]],D0e=[...MG,[Ry("in"),"varying $1"]],Mk="gl_FragColor",Ik=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,x0e=/void\s+main\s*\([^)]*\)\s*\{\n?/;function HT(n,e){for(const[t,r]of e)n=n.replace(t,r);return n}const I0e=`\n\n${VT}\n\n`,IG={[nE]:"vertex",fs:"fragment"};function RG(n,{id:e,source:t,type:r,modules:i,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:c=!1,prologue:l=!0,log:u}){Gc("string"==typeof t,"shader source must be a string");const h=r===nE,f=t.split("\n");let g=100,m="",b=t;0===f[0].indexOf("#version ")?(g=300,m=f[0],b=f.slice(1).join("\n")):m=`#version ${g}`;const _={};i.forEach(Ue=>{Object.assign(_,Ue.getDefines())}),Object.assign(_,s);let R=l?`${m}\n${function({id:n,source:e,type:t}){return n&&"string"==typeof n&&-1===e.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${IG[t]}\n\n`:""}({id:e,source:t,type:r})}\n${function({type:n}){return`\n#define SHADER_TYPE_${IG[n].toUpperCase()}\n`}({type:r})}\n${function(n){switch(function(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:y0e(t,r),vendor:t,renderer:r,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n"}}(n)}\n${function(n,e,t){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return UT(n,im.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),UT(n,im.GLSL_DERIVATIVES)&&TG(n,im.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),UT(n,im.GLSL_FRAG_DATA)&&TG(n,im.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),UT(n,im.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(n)}\n${function(n={}){let e=0,t="";for(const r in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const i=n[r];(i||Number.isFinite(i))&&(t+=`#define ${r.toUpperCase()} ${n[r]}\n`)}return 0===e&&(t+="\n"),t}(_)}\n${h?"":"precision highp float;\n\n"}\n`:`${m}\n`;const M=function(n){const e={vs:{},fs:{}};return n.forEach(t=>{let r;"string"!=typeof t?(r=t,t=r.hook):r={},t=t.trim();const[i,s]=t.split(":"),o=t.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}(o),ee={},_e={},Ie={};for(const Ue in a){const at="string"==typeof a[Ue]?{injection:a[Ue],order:0}:a[Ue],St=Ue.match(/^(v|f)s:(#)?([\w-]+)$/);if(St){const Ot=St[3];St[2]?"decl"===Ot?_e[Ue]=[at]:Ie[Ue]=[at]:ee[Ue]=[at]}else Ie[Ue]=[at]}for(const Ue of i){u&&Ue.checkDeprecations(b,u),R+=Ue.getModuleSource(r,g);const St=Ue.injections[r];for(const Tt in St){const Ot=Tt.match(/^(v|f)s:#([\w-]+)$/);if(Ot){const tn="decl"===Ot[2]?_e:Ie;tn[Tt]=tn[Tt]||[],tn[Tt].push(St[Tt])}else ee[Tt]=ee[Tt]||[],ee[Tt].push(St[Tt])}}return R+=I0e,R=EG(R,r,_e),R+=function(n,e){let t="";for(const r in n){const i=n[r];if(t+=`void ${i.signature} {\n`,i.header&&(t+=`  ${i.header}`),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)t+=`  ${o.injection}\n`}i.footer&&(t+=`  ${i.footer}`),t+="}\n"}return t}(M[r],ee),R+=b,R=EG(R,r,Ie),R=function(n,e,t){switch(e){case 300:return t?HT(n,E0e):function(n){const e=(n=HT(n,C0e)).match(Ik);if(e){const t=e[1];n=n.replace(new RegExp(`\\b${Mk}\\b`,"g"),t)}else{const t="fragmentColor";n=n.replace(x0e,r=>`out vec4 ${t};\n${r}`).replace(new RegExp(`\\b${Mk}\\b`,"g"),t)}return n}(n);case 100:return t?HT(n,S0e):function(n){const e=(n=HT(n,D0e)).match(Ik);if(e){const t=e[1];n=n.replace(Ik,"").replace(new RegExp(`\\b${t}\\b`,"g"),Mk)}return n}(n);default:throw new Error(`unknown GLSL version ${e}`)}}(R,c?100:g,h),R}function N0e(n){return function(t){const r={};for(const i of n){const s=i.getUniforms(t,r);Object.assign(r,s)}return r}}const V0e={5126:Xi.bind(null,"uniform1fv",Wc,1,ba),35664:Xi.bind(null,"uniform2fv",Wc,2,ba),35665:Xi.bind(null,"uniform3fv",Wc,3,ba),35666:Xi.bind(null,"uniform4fv",Wc,4,ba),5124:Xi.bind(null,"uniform1iv",Ep,1,ba),35667:Xi.bind(null,"uniform2iv",Ep,2,ba),35668:Xi.bind(null,"uniform3iv",Ep,3,ba),35669:Xi.bind(null,"uniform4iv",Ep,4,ba),35670:Xi.bind(null,"uniform1iv",Ep,1,ba),35671:Xi.bind(null,"uniform2iv",Ep,2,ba),35672:Xi.bind(null,"uniform3iv",Ep,3,ba),35673:Xi.bind(null,"uniform4iv",Ep,4,ba),35674:Xi.bind(null,"uniformMatrix2fv",Wc,4,Kh),35675:Xi.bind(null,"uniformMatrix3fv",Wc,9,Kh),35676:Xi.bind(null,"uniformMatrix4fv",Wc,16,Kh),35678:Jo,35680:Jo,5125:Xi.bind(null,"uniform1uiv",zT,1,ba),36294:Xi.bind(null,"uniform2uiv",zT,2,ba),36295:Xi.bind(null,"uniform3uiv",zT,3,ba),36296:Xi.bind(null,"uniform4uiv",zT,4,ba),35685:Xi.bind(null,"uniformMatrix2x3fv",Wc,6,Kh),35686:Xi.bind(null,"uniformMatrix2x4fv",Wc,8,Kh),35687:Xi.bind(null,"uniformMatrix3x2fv",Wc,6,Kh),35688:Xi.bind(null,"uniformMatrix3x4fv",Wc,12,Kh),35689:Xi.bind(null,"uniformMatrix4x2fv",Wc,8,Kh),35690:Xi.bind(null,"uniformMatrix4x3fv",Wc,12,Kh),35678:Jo,35680:Jo,35679:Jo,35682:Jo,36289:Jo,36292:Jo,36293:Jo,36298:Jo,36299:Jo,36300:Jo,36303:Jo,36306:Jo,36307:Jo,36308:Jo,36311:Jo},j0e={},U0e={},H0e={},OG=[0];function Rk(n,e,t,r){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(OG[0]=n,n=OG);const i=n.length;if(i%e&&mn.warn(`Uniform size should be multiples of ${e}`,n)(),n instanceof t)return n;let s=r[i];s||(s=new t(i),r[i]=s);for(let o=0;o<i;o++)s[o]=n[o];return s}function Wc(n,e){return Rk(n,e,Float32Array,j0e)}function Ep(n,e){return Rk(n,e,Int32Array,U0e)}function zT(n,e){return Rk(n,e,Uint32Array,H0e)}function NG(n,e,t){const r=V0e[t.type];if(!r)throw new Error(`Unknown GLSL uniform type ${t.type}`);return r().bind(null,n,e)}function z0e(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function G0e(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Ay||n instanceof My)||n instanceof wo&&Boolean(n.texture)}function W0e(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const r=n[e];for(let i=0,s=t.length;i<s;++i)r[i]=t[i]}else n[e]=t.slice();else n[e]=t}function Jo(){let n=null;return(e,t,r)=>{const i=n!==r;return i&&(e.uniform1i(t,r),n=r),i}}function Xi(n,e,t,r){let i=null,s=null;return(o,a,c)=>{const l=e(c,t),u=l.length;let h=!1;if(null===i)i=new Float32Array(u),s=u,h=!0;else{on(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(l[f]!==i[f]){h=!0;break}}return h&&(r(o,n,a,l),i.set(l)),h}}function ba(n,e,t,r){n[e](t,r)}function Kh(n,e,t,r){n[e](t,!1,r)}function $T(n,e="unnamed"){const r=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return r?r[1]:e}function FG(n,e){let t="";for(let r=0;r<e.length;r++){const i=e[r];if((n[r+3]||n[r+2]||n[r+1])&&(t+=`${i}\n`,n[r+1])){const s=n[r+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0;t+=kG(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,c)}}return t}function kG(n,e){let t="";for(let r=0;r<e;++r)t+=" ";return`${t}${n}`}class rE extends Wh{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return on(!1),"unknown"}}constructor(e,t){OT(e),on("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:$T(t.source,null)||t.id||jd(`unnamed ${rE.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=$T(e,null);t&&(this.id=jd(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${rE.getTypeName(this.shaderType)}:${this.id}`}getName(){return $T(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=function(n,e,t,r){const i=n.split(/\r?\n/),s={},o={},a=r||$T(e)||"(unnamed)",c=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)} shader ${a}`;for(let u=0;u<i.length;u++){const h=i[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error(`GLSL compilation error in ${c}: ${n}`);"WARNING"!==g?s[m]=h:o[m]=h}const l=function(n,e=1,t=": "){const r=n.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e);return kG(a,i-a.length)+t+s})}(e);return{shaderName:c,errors:FG(s,l),warnings:FG(o,l)}}(r,this.source,this.shaderType,this.id);throw mn.error(`GLSL compilation errors in ${i}\n${s}`)(),mn.warn(`GLSL compilation warnings in ${i}\n${o}`)(),new Error(`GLSL compilation errors in ${i}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Ok extends rE{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Nk extends rE{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Eo=5126,iE=5124,sE=5125,Pk={[Eo]:[Eo,1,"float"],35664:[Eo,2,"vec2"],35665:[Eo,3,"vec3"],35666:[Eo,4,"vec4"],[iE]:[iE,1,"int"],35667:[iE,2,"ivec2"],35668:[iE,3,"ivec3"],35669:[iE,4,"ivec4"],[sE]:[sE,1,"uint"],36294:[sE,2,"uvec2"],36295:[sE,3,"uvec3"],36296:[sE,4,"uvec4"],35670:[Eo,1,"bool"],35671:[Eo,2,"bvec2"],35672:[Eo,3,"bvec3"],35673:[Eo,4,"bvec4"],35674:[Eo,8,"mat2"],35685:[Eo,8,"mat2x3"],35686:[Eo,8,"mat2x4"],35675:[Eo,12,"mat3"],35687:[Eo,12,"mat3x2"],35688:[Eo,12,"mat3x4"],35676:[Eo,16,"mat4"],35689:[Eo,16,"mat4x2"],35690:[Eo,16,"mat4x3"]};function HG(n){const e=Pk[n];if(!e)return null;const[t,r]=e;return{type:t,components:r}}function zG(n,e){switch(n){case 5120:case 5121:case 5122:case 5123:n=Eo}for(const t in Pk){const[r,i,s]=Pk[t];if(r===n&&i===e)return{glType:t,name:s}}return null}class xwe{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,r=t.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,i),c=t.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!Ir(t))return;const r=t.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,t,r,i){const{type:s,components:o}=HG(r),a={type:s,size:i*o};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new _c(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,r){/instance/i.test(t)&&(r.divisor=1)}_addVarying(e,t,r,i){const{type:s,components:o}=HG(r),c={location:e,name:t,accessor:new _c({type:s,size:i*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const Twe=35981,Awe=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class GG extends Wh{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",Awe),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:r,fs:i,varyings:s,bufferMode:o=Twe}=e;return this.hash=t||"",this.vs="string"==typeof r?new Ok(this.gl,{id:`${e.id}-vs`,source:r}):r,this.fs="string"==typeof i?new Nk(this.gl,{id:`${e.id}-fs`,source:i}):i,on(this.vs instanceof Ok),on(this.fs instanceof Nk),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(ja(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new xwe(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:r,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:c=5123,instanceCount:l=0,isInstanced:u=l>0,vertexArray:h=null,transformFeedback:f,framebuffer:g,parameters:m={},uniforms:b,samplers:_}){if((b||_)&&(mn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(b||{})),mn.priority>=e){const R=g?g.id:"default",M=`mode=${vp(this.gl,t)} verts=${r} instances=${l} indexType=${vp(this.gl,c)} isInstanced=${u} isIndexed=${a} Framebuffer=${R}`;mn.log(e,M)()}return on(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===l||(h.bindForDraw(r,l,()=>{if(void 0!==g&&(m=Object.assign({},m,{framebuffer:g})),f){const R=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return on(!1),0}}(t);f.begin(R)}this._bindTextures(),ku(this.gl,m,()=>{a&&u?this.gl2.drawElementsInstanced(t,r,c,i,l):a&&Ir(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(t,s,o,r,c,i):a?this.gl.drawElements(t,r,c,i):u?this.gl2.drawArraysInstanced(t,i,r,l):this.gl.drawArrays(t,i,r)}),f&&f.end()}),0))}setUniforms(e={}){mn.priority>=2&&function(n,e,t){for(const r in n){const i=n[r];if((!t||Boolean(t[r]))&&!G0e(i))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${r}`,i),new Error(`${e} Bad uniform ${r}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const r=e[t],i=this._uniformSetters[t];if(i){let s=r,o=!1;if(s instanceof wo&&(s=s.texture),s instanceof Ay)if(o=this.uniforms[t]!==r,o){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=i;a.bind(c),s=c,this._textureUniforms[t]=a}else s=i.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(i(s)||o)&&W0e(this.uniforms,t,r)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const r=this._textureUniforms[t];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),r={};for(const i of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Ok({handle:i});break;case 35632:r.fs=new Nk({handle:i})}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=jd(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),mn.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),mn.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||mn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const r=this.gl.getActiveUniform(this.handle,t),{name:i}=z0e(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=NG(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,`${i}[${o}]`),this._uniformSetters[`${i}[${o}]`]=NG(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class oE{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new oE(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(t),h=this._getHash(r),f=l.map(ee=>this._getHash(ee.name)).sort(),g=o.map(ee=>this._getHash(ee)),m=Object.keys(i).sort(),b=Object.keys(s).sort(),_=[],R=[];for(const ee of m)_.push(this._getHash(ee)),_.push(this._getHash(i[ee]));for(const ee of b)R.push(this._getHash(ee)),R.push(this._getHash(s[ee]));const M=`${u}/${h}D${_.join("/")}M${f.join("/")}I${R.join("/")}V${g.join("/")}H${this.stateHash}B${a}${c?"T":""}`;if(!this._programCache[M]){const ee=function(n,e){const{vs:t,fs:r}=e,i=u0e(e.modules||[]);return{gl:n,vs:RG(n,Object.assign({},e,{source:t,type:nE,modules:i})),fs:RG(n,Object.assign({},e,{source:r,type:"fs",modules:i})),getUniforms:N0e(i)}}(this.gl,{vs:t,fs:r,modules:l,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[M]=new GG(this.gl,{hash:M,vs:ee.vs,fs:ee.fs,varyings:o,bufferMode:a}),this._getUniforms[M]=ee.getUniforms||(_e=>{}),this._useCounts[M]=0}return this._useCounts[M]++,this._programCache[M]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;t[i++]=a,r[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;r[c]||(t[i++]=a,r[c]=!0)}return t.length=i,t}}let WT=null;class qc extends Wh{static isSupported(e,t={}){return!t.constantAttributeZero||Ir(e)||"Chrome"===function(n){if(!WF())return"Node";if(n$(n))return"Electron";const t=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const r=-1!==t.indexOf("MSIE "),i=-1!==t.indexOf("Trident/");return r||i?"IE":Gw.chrome?"Chrome":Gw.safari?"Safari":Gw.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new qc(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return qc.MAX_ATTRIBUTES=qc.MAX_ATTRIBUTES||e.getParameter(34921),qc.MAX_ATTRIBUTES}static setConstant(e,t,r){switch(r.constructor){case Float32Array:qc._setConstantFloatArray(e,t,r);break;case Int32Array:qc._setConstantIntArray(e,t,r);break;case Uint32Array:qc._setConstantUintArray(e,t,r);break;default:on(!1)}}constructor(e,t={}){super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return qc.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return on(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);const{size:i,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:u}=r,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),l?(on(Ir(h)),f.vertexAttribIPointer(e,i,s,o,a)):h.vertexAttribPointer(e,i,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e,t=!0){return!t&&0===e&&!qc.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const r=this._normalizeConstantArrayValue(t),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Di(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=function(n,e){return new n(function(n){return(!WT||WT.byteLength<n)&&(WT=new ArrayBuffer(n)),WT}(n.BYTES_PER_ELEMENT*e),0,e)}(t.constructor,s);(function({target:n,source:e,start:t=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=t;o<i;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s)})({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}static _setConstantFloatArray(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:on(!1)}}static _setConstantIntArray(e,t,r){switch(on(Ir(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:on(!1)}}static _setConstantUintArray(e,t,r){switch(on(Ir(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:on(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return on(Number.isFinite(t)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(t,e);default:return this.gl.getVertexAttrib(t,e)}})}}const Fwe=/^(.+)__LOCATION_([0-9]+)$/,kwe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Lwe{constructor(e,t={}){this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new qc(e),R$(this,"VertexArray","v6.0",kwe),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,r={}){if(34963===t.target)return this.setElementBuffer(t,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,r);return i>=0&&(this.values[i]=t,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,s)),this}setConstant(e,t,r={}){const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r));return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[i]=t,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Di(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Di&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Di&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),i=r()}),i}_resolveLocationAndAccessor(e,t,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,mn.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const u=_c.resolve(c.accessor,this.accessors[o]||{},r,i),{size:h,type:f}=u;return on(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const r=Fwe.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,t){if(t instanceof Di)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Di)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Di))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const r=Math.max(0|e,0|t);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,t){if(qc.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,t){qc.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const r=this.values[t],i=this.accessors[t];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof Di){const a=r;if(o){const c=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(e=null,t={}){return mn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function aE(n,e={}){const{isInteger:r=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,e){const{maxElts:t=16,size:r=1}=e;let i="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(i+=","+(o%r==0?" ":"")),i+=aE(n[o],e);return`${i}${n.length>t?"...":"]"}`}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return r?"0":"0.";if(r||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const i=n.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function WG(n,e,t,r){const{gl:i}=n;if(!e)return{[r]:"null","Format ":"N/A"};let l,u,h,s="NOT PROVIDED",o=1,a=0,c=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Di){const f=e,{data:g,changed:m}=f.getDebugData();let b;return u=m?"*":"",h=g,c=f.byteLength,a=c/g.BYTES_PER_ELEMENT/o,t?b=`${t.divisor>0?"I ":"P "} ${a} (x${o}=${c} bytes ${vp(i,s)})`:(l=!0,b=`${c} bytes`),{[r]:`${u}${aE(h,{size:o,isInteger:l})}`,"Format ":b}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[r]:`${aE(h,{size:o,isInteger:l})} (constant)`,"Format ":`${o}x${s} (constant)`}}function jwe(n,e){const{type:t,size:r}=e,i=zG(t,r);return i?`${n} (${i.name})`:n}function qG({header:n="Uniforms",program:e,uniforms:t,undefinedOnly:r=!1}){on(e);const s=".*Matrix",a={},c=Object.keys(e._uniformSetters).sort();let l=0;for(const f of c)!f.match(".*_.*")&&!f.match(s)&&Fk({table:a,header:n,uniforms:t,uniformName:f,undefinedOnly:r})&&l++;for(const f of c)f.match(s)&&Fk({table:a,header:n,uniforms:t,uniformName:f,undefinedOnly:r})&&l++;for(const f of c)a[f]||Fk({table:a,header:n,uniforms:t,uniformName:f,undefinedOnly:r})&&l++;let u=0;const h={};if(!r)for(const f in t){const g=t[f];a[f]||(u++,h[f]={Type:`NOT USED: ${g}`,[n]:aE(g)})}return{table:a,count:l,unusedTable:h,unusedCount:u}}function Fk({table:n,header:e,uniforms:t,uniformName:r,undefinedOnly:i}){const s=t[r],o=function(n){return null!=n}(s);return!(i&&o||(n[r]={[e]:o?aE(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function YG(n){const{type:e,size:t}=n.accessor,r=zG(e,t);return r?`${r.name} ${n.name}`:n.name}const zwe={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Gwe(n,e){const{attributeMap:t=zwe}=e||{};return t&&t[n]||n}function Wwe(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}on(Number.isFinite(e.size),`attribute ${n} needs size`)}const KG=()=>{},Kwe={};class qT{constructor(e,t={}){const{id:r=jd("model")}=t;on(RT(e)),this.id=r,this.gl=e,this.id=t.id||jd("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||oE.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},on(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return on(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return on(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,e,t){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Gwe(s,undefined);if("indices"===s)i=o;else if(o.constant)r[a]=o.value;else{const c=o.value,l=ht({},o);delete l.value,r[a]=[new Di(n,c),l],Wwe(s,l)}}if(i){const s=i.value||i;on(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Di(n,{data:s,target:34963}),o]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(xy(e))return this;const t={};for(const r in e){const i=e[r];t[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return ak(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(i),mn.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&mn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:b,instanceCount:_}=this,{onBeforeRender:R=KG,onAfterRender:M=KG}=this.props;R(),this.program.setUniforms(this.uniforms);const ee=this.program.draw(Object.assign(Kwe,e,{logPriority:l,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:b,instanceCount:_,offset:h?g:0}));return M(),mn.priority>=2&&this._logDrawCallEnd(l,c,r),ee}transform(e={}){const{discard:t=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),t&&(s=Object.assign({},s,{35977:t})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return mn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;t=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}on(t instanceof GG,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Lwe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Di&&t.delete()}}_setAnimationProps(e){this.animated&&on(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(xy(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new yG(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),mn.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:mn.level<=2})(),e}_logDrawCallEnd(e,t,r,i){if(void 0===e)return;const s=function({vertexArray:n,header:e="Attributes"}){if(!n.configuration)return{};const t={};n.elements&&(t.ELEMENT_ARRAY_BUFFER=WG(n,n.elements,null,e));const r=n.values;for(const i in r){const s=n._getAttributeInfo(i);if(s){let o=`${i}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${i}: ${jwe(s.name,a)}`),t[o]=WG(n,r[i],a,e)}}return t}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=qG({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:l,count:u}=qG({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&mn.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&mn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(n){const e={},t=`Accessors for ${n.id}`;for(const r of n.attributeInfos)r&&(e[`in ${YG(r)}`]={[t]:JSON.stringify(r.accessor)});for(const r of n.varyingInfos)r&&(e[`out ${YG(r)}`]={[t]:JSON.stringify(r.accessor)});return e}(this.vertexArray.configuration);mn.table(e,s)(),mn.table(e,o)(),mn.table(e+1,h)(),i&&i.log({logLevel:2,message:`Rendered to ${i.id}`}),mn.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class kk{static isSupported(e){return Ir(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:r}=this;e&&e.delete(),t&&t.delete(),r&&r.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,r=this._updateDrawOptions(e);t&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t)e=e||r.swap();on(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t)r.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new qT(t,Object.assign({},e,{fs:e.fs||_G({version:bG(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)t=i.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(n){return!(xy(n.feedbackBuffers)&&xy(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new $ve(e,t)),function(n){return!(xy(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new i0e(e,t)),on(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)t=Object.assign(t,i.getDrawOptions(t));return t}}function KT(){}const Zwe={onStart:KT,onUpdate:KT,onInterrupt:KT,onEnd:KT};class cE{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=ht(ht({},Zwe),e),this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const oEe={interpolation:class{constructor({gl:e,attribute:t,timeline:r}){this.gl=e,this.type="interpolation",this.transition=new cE(r),this.attribute=t,this.attributeInTransition=new bk(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function(n,e){const t=hG(e.size);return new kk(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const i={byteLength:0,usage:35050};this.buffers=[new Di(e,i),new Di(e,i)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();const{buffers:i,attribute:s}=this;fG(i);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)pG(ht({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=yk(s,t),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:dG(0,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{time:t,settings:{duration:r,easing:i}}=this.transition,s=i(t/r);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},spring:class{constructor({gl:e,attribute:t,timeline:r}){this.gl=e,this.type="spring",this.transition=new cE(r),this.attribute=t,this.attributeInTransition=new bk(e,Kn(ht({},t.settings),{normalized:!1})),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function(n){return new $c(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(n,e){return new wo(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(n,e,t){const r=hG(e.size);return new kk(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(e,t,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Di(e,i),new Di(e,i),new Di(e,i)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:i,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)pG(ht({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=yk(s,t),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:dG(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:r,transition:i}=this;return!!i.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.settings.stiffness,damping:i.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),fG(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),NT(r)[0]>0||i.end(),!0)}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}};class aEe{constructor(e,{id:t,timeline:r}){this.id=t,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=kk.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(t);!o||this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(t))&&this._removeTransition(i)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const r=this.transitions[t];r.inProgress&&(e[t]=r.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported)return void ti.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();i&&this._removeTransition(e);const o=oEe[r.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(ti.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const XG="attributeManager.invalidate";class fEe{constructor(e,{id:t="attribute-manager",stats:r,timeline:i}={}){this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new aEe(e,{id:"".concat(t,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,t){this._add(e,t)}addInstanced(e,t){this._add(e,t,{instanced:1})}remove(e){for(let t=0;t<e.length;t++){const r=e[t];void 0!==this.attributes[r]&&(this.attributes[r].delete(),delete this.attributes[r])}}invalidate(e,t){const r=this._invalidateTrigger(e,t);ya(XG,this,e,r)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);ya(XG,this,"all")}update({data:e,numInstances:t,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}={}){let c=!1;ya("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const u=this.attributes[l],h=u.settings.accessor;u.startIndices=r,s[l]&&ti.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(o[l])||u.setBinaryValue(o[h],e.startIndices)||!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:t,data:e,props:s,context:a})),this.needsRedraw|=u.needsRedraw()}c&&ya("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:r}=this,i=ht({},r.getAttributes());for(const s in t){const o=t[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const r={};for(const i in e)t[i]||Object.assign(r,e[i].getShaderAttributes());return r}getAccessors(){return this.updateTriggers}_add(e,t,r={}){t&&ti.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],r);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,r){const i=Kn(ht({},t),{id:e,isIndexed:t.isIndexed||t.elements||!1,constant:t.constant||!1,size:(t.elements?1:t.size)||1,value:t.value||null,divisor:t.instanced||r.instanced?1:t.divisor||0});return new bk(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:r}=e;ya("attribute.updateStart",t),t.allocate(r)&&ya("attribute.allocate",t,r),t.updateBuffer(e)&&(this.needsRedraw=!0,ya("attribute.updateEnd",t,r))}}function ZG(n,e,t,r,i){const s=e-n;return(t-e)*i+-s*r+s+e}function JG(n,e){if(Array.isArray(n)){let t=0;for(let r=0;r<n.length;r++){const i=n[r]-e[r];t+=i*i}return Math.sqrt(t)}return Math.abs(n-e)}const _Ee={interpolation:class extends cE{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=PT(t,r,o)}},spring:class extends cE{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function(n,e,t,r,i){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=ZG(n[o],e[o],t[o],r,i);return s}return ZG(n,e,t,r,i)}(s,o,t,r,i);const c=JG(a,t),l=JG(a,o);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class yEe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,r,i){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(i=uG(i)))return;const o=_Ee[i.type];if(!o)return void ti.error("unsupported transition type '".concat(i.type,"'"))();const a=new o(this.timeline);a.start(Kn(ht({},i),{fromValue:t,toValue:r})),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,r]of this.transitions)r.update(),e[t]=r.value,r.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}const XT={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},{COMPONENT:bEe}=XT;function EEe(n,e){if(!n.transitions)return null;const t={},r=Bk(n);for(const i in n.transitions){const s=r[i],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&Lk(n[i],e[i],s)&&(t[i]=!0)}return t}function e7({newProps:n,oldProps:e,ignoreProps:t={},propTypes:r={},triggerName:i="props"}={}){if(e===n)return null;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(i," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=Lk(n[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=Lk(n[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return null}function Lk(n,e,t){let r=t&&t.equal;return r&&!r(n,e,t)||!r&&(r=n&&e&&n.equals,r&&!r.call(n,e))?"changed deeply":r||e===n?null:"changed shallowly"}function DEe(n,e){if(null===e)return"oldProps is null, initial diff";const t=e.extensions,{extensions:r}=n;if(r===t)return!1;if(r.length!==t.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(t[i]))return!0;return!1}function t7(n,e,t){let r=n.updateTriggers[t];r=null==r?{}:r;let i=e.updateTriggers[t];return i=null==i?{}:i,e7({oldProps:i,newProps:r,triggerName:t})}function Bk(n){const e=n[bEe],t=e&&e.constructor;return t?t._propTypes:{}}function REe(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}return!1}function QT(n){let t,e={};return r=>{for(const i in r)if(!REe(r[i],e[i])){t=n(r),e=r;break}return t}}function OEe(n,e){if(!e)return n;const t=ht(ht({},n),e);if("defines"in e&&(t.defines=ht(ht({},n.defines),e.defines)),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(r=>"project64"===r.name))){const r=t.modules.findIndex(i=>"project32"===i.name);r>=0&&t.modules.splice(r,1)}if("inject"in e)if(n.inject){const r=ht({},n.inject);for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];t.inject=r}else t.inject=e.inject;return t}function ZT(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],b=e[13],_=e[14],R=e[15],M=t*a-r*o,ee=t*c-i*o,_e=t*l-s*o,Ie=r*c-i*a,Ue=r*l-s*a,at=i*l-s*c,St=u*b-h*m,Tt=u*_-f*m,Ot=u*R-g*m,qt=h*_-f*b,tn=h*R-g*b,bt=f*R-g*_,Ct=M*bt-ee*tn+_e*qt+Ie*Ot-Ue*Tt+at*St;return Ct?(n[0]=(a*bt-c*tn+l*qt)*(Ct=1/Ct),n[1]=(i*tn-r*bt-s*qt)*Ct,n[2]=(b*at-_*Ue+R*Ie)*Ct,n[3]=(f*Ue-h*at-g*Ie)*Ct,n[4]=(c*Ot-o*bt-l*Tt)*Ct,n[5]=(t*bt-i*Ot+s*Tt)*Ct,n[6]=(_*_e-m*at-R*ee)*Ct,n[7]=(u*at-f*_e+g*ee)*Ct,n[8]=(o*tn-a*Ot+l*St)*Ct,n[9]=(r*Ot-t*tn-s*St)*Ct,n[10]=(m*Ue-b*_e+R*M)*Ct,n[11]=(h*_e-u*Ue-g*M)*Ct,n[12]=(a*Tt-o*qt-c*St)*Ct,n[13]=(t*qt-r*Tt+i*St)*Ct,n[14]=(b*ee-m*Ie-_*M)*Ct,n[15]=(u*Ie-h*ee+f*M)*Ct,n):null}function Ud(n,e,t){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],b=e[12],_=e[13],R=e[14],M=e[15],ee=t[0],_e=t[1],Ie=t[2],Ue=t[3];return n[0]=ee*r+_e*a+Ie*h+Ue*b,n[1]=ee*i+_e*c+Ie*f+Ue*_,n[2]=ee*s+_e*l+Ie*g+Ue*R,n[3]=ee*o+_e*u+Ie*m+Ue*M,n[4]=(ee=t[4])*r+(_e=t[5])*a+(Ie=t[6])*h+(Ue=t[7])*b,n[5]=ee*i+_e*c+Ie*f+Ue*_,n[6]=ee*s+_e*l+Ie*g+Ue*R,n[7]=ee*o+_e*u+Ie*m+Ue*M,n[8]=(ee=t[8])*r+(_e=t[9])*a+(Ie=t[10])*h+(Ue=t[11])*b,n[9]=ee*i+_e*c+Ie*f+Ue*_,n[10]=ee*s+_e*l+Ie*g+Ue*R,n[11]=ee*o+_e*u+Ie*m+Ue*M,n[12]=(ee=t[12])*r+(_e=t[13])*a+(Ie=t[14])*h+(Ue=t[15])*b,n[13]=ee*i+_e*c+Ie*f+Ue*_,n[14]=ee*s+_e*l+Ie*g+Ue*R,n[15]=ee*o+_e*u+Ie*m+Ue*M,n}function lE(n,e,t){var o,a,c,l,u,h,f,g,m,b,_,R,r=t[0],i=t[1],s=t[2];return e===n?(n[12]=e[0]*r+e[4]*i+e[8]*s+e[12],n[13]=e[1]*r+e[5]*i+e[9]*s+e[13],n[14]=e[2]*r+e[6]*i+e[10]*s+e[14],n[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],b=e[9],_=e[10],R=e[11],n[0]=o=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=u,n[5]=h,n[6]=f,n[7]=g,n[8]=m,n[9]=b,n[10]=_,n[11]=R,n[12]=o*r+u*i+m*s+e[12],n[13]=a*r+h*i+b*s+e[13],n[14]=c*r+f*i+_*s+e[14],n[15]=l*r+g*i+R*s+e[15]),n}function uE(n,e,t){var r=t[0],i=t[1],s=t[2];return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[7]=e[7]*i,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function n7(n,e,t){var r=Math.sin(t),i=Math.cos(t),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*i+l*r,n[5]=o*i+u*r,n[6]=a*i+h*r,n[7]=c*i+f*r,n[8]=l*i-s*r,n[9]=u*i-o*r,n[10]=h*i-a*r,n[11]=f*i-c*r,n}function r7(n,e,t){var r=Math.sin(t),i=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*i+l*r,n[1]=o*i+u*r,n[2]=a*i+h*r,n[3]=c*i+f*r,n[4]=l*i-s*r,n[5]=u*i-o*r,n[6]=h*i-a*r,n[7]=f*i-c*r,n}function i7(n,e,t,r,i){var o,s=1/Math.tan(e/2);return n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=i&&i!==1/0?(n[10]=(i+r)*(o=1/(r-i)),n[14]=2*i*r*o):(n[10]=-1,n[14]=-2*r),n}function s7(n,e){var t=n[0],r=n[1],i=n[2],s=n[3],o=n[4],a=n[5],c=n[6],l=n[7],u=n[8],h=n[9],f=n[10],g=n[11],m=n[12],b=n[13],_=n[14],R=n[15],M=e[0],ee=e[1],_e=e[2],Ie=e[3],Ue=e[4],at=e[5],St=e[6],Tt=e[7],Ot=e[8],qt=e[9],tn=e[10],bt=e[11],Ct=e[12],zt=e[13],ft=e[14],Zt=e[15];return Math.abs(t-M)<=Li*Math.max(1,Math.abs(t),Math.abs(M))&&Math.abs(r-ee)<=Li*Math.max(1,Math.abs(r),Math.abs(ee))&&Math.abs(i-_e)<=Li*Math.max(1,Math.abs(i),Math.abs(_e))&&Math.abs(s-Ie)<=Li*Math.max(1,Math.abs(s),Math.abs(Ie))&&Math.abs(o-Ue)<=Li*Math.max(1,Math.abs(o),Math.abs(Ue))&&Math.abs(a-at)<=Li*Math.max(1,Math.abs(a),Math.abs(at))&&Math.abs(c-St)<=Li*Math.max(1,Math.abs(c),Math.abs(St))&&Math.abs(l-Tt)<=Li*Math.max(1,Math.abs(l),Math.abs(Tt))&&Math.abs(u-Ot)<=Li*Math.max(1,Math.abs(u),Math.abs(Ot))&&Math.abs(h-qt)<=Li*Math.max(1,Math.abs(h),Math.abs(qt))&&Math.abs(f-tn)<=Li*Math.max(1,Math.abs(f),Math.abs(tn))&&Math.abs(g-bt)<=Li*Math.max(1,Math.abs(g),Math.abs(bt))&&Math.abs(m-Ct)<=Li*Math.max(1,Math.abs(m),Math.abs(Ct))&&Math.abs(b-zt)<=Li*Math.max(1,Math.abs(b),Math.abs(zt))&&Math.abs(_-ft)<=Li*Math.max(1,Math.abs(_),Math.abs(ft))&&Math.abs(R-Zt)<=Li*Math.max(1,Math.abs(R),Math.abs(Zt))}function o7(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function JT(n,e,t){var r=e[0],i=e[1],s=e[2],o=e[3];return n[0]=t[0]*r+t[4]*i+t[8]*s+t[12]*o,n[1]=t[1]*r+t[5]*i+t[9]*s+t[13]*o,n[2]=t[2]*r+t[6]*i+t[10]*s+t[14]*o,n[3]=t[3]*r+t[7]*i+t[11]*s+t[15]*o,n}!function(){var n=new yc(4);yc!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();const a7=[0,0,0,0],iCe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],sCe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],oCe=[0,0,0],aCe=[0,0,0],cCe=QT(function({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function(n,e,t){const{viewMatrixUncentered:r,projectionMatrix:i}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=a7,c=a7,l=n.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=c7(n,e,t);return f&&(c=n.projectPosition(u||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=JT([],c,o),s=r||s,o=Ud([],i,s),o=Ud([],o,iCe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(n,t,r),u=n.getDistanceScales(),h=[n.width*e,n.height*e],f=n.projectionMatrix.transform([0,0,-n.focalDistance,1])[3]||1,g={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:oCe,project_uScale:n.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(l){const m=n.getDistanceScales(l);switch(t){case Xr.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case Xr.LNGLAT:case Xr.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case Xr.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function c7(n,e,t=aCe){let i,r=t,s=!0;switch(i=e===Xr.LNGLAT_OFFSETS||e===Xr.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Bd.WEB_MERCATOR:(e===Xr.LNGLAT||e===Xr.CARTESIAN)&&(s=!1);break;case Bd.WEB_MERCATOR_AUTO_OFFSET:e===Xr.LNGLAT?r=i:e===Xr.CARTESIAN&&(r=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],i=n.unprojectPosition(r),r[0]-=t[0],r[1]-=t[1],r[2]-=t[2]);break;case Bd.IDENTITY:r=n.position.map(Math.fround);break;case Bd.GLOBE:s=!1,i=null;break;default:s=!1}return r[2]=r[2]||0,{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}class hCe extends hk{get ELEMENTS(){return Yh(!1),0}get RANK(){return Yh(!1),0}toString(){let e="[";if(Ki.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,r){return this[t*this.RANK+e]=Zo(r),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)t[i]=this[r+i];return t}setColumn(e,t){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=t[i];return this}}function ky(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function Vk(n,e){return n[0]=-e[0],n[1]=-e[1],n}function l7(n,e,t,r){var i=e[0],s=e[1];return n[0]=i+r*(t[0]-i),n[1]=s+r*(t[1]-s),n}!function(){var n=new yc(2);yc!=Float32Array&&(n[0]=0,n[1]=0)}();const u7=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),gCe=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),mCe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Ly={};class Zn extends hCe{static get IDENTITY(){return Ly.IDENTITY=Ly.IDENTITY||Object.freeze(new Zn(u7)),Ly.IDENTITY}static get ZERO(){return Ly.ZERO=Ly.ZERO||Object.freeze(new Zn(gCe)),Ly.ZERO}get INDICES(){return mCe}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,r,i,s,o,a,c,l,u,h,f,g,m,b,_){return this[0]=e,this[1]=t,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=b,this[15]=_,this.check()}setRowMajor(e,t,r,i,s,o,a,c,l,u,h,f,g,m,b,_){return this[0]=e,this[1]=s,this[2]=l,this[3]=g,this[4]=t,this[5]=o,this[6]=u,this[7]=m,this[8]=r,this[9]=a,this[10]=h,this[11]=b,this[12]=i,this[13]=c,this[14]=f,this[15]=_,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(u7)}fromQuaternion(e){return function(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=t+t,a=r+r,c=i+i,l=t*o,u=r*o,h=r*a,f=i*o,g=i*a,m=i*c,b=s*o,_=s*a,R=s*c;n[0]=1-h-m,n[1]=u+R,n[2]=f-_,n[3]=0,n[4]=u-R,n[5]=1-l-m,n[6]=g+b,n[7]=0,n[8]=f+_,n[9]=g-b,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:r,top:i,near:s,far:o}){return o===1/0?Zn._computeInfinitePerspectiveOffCenter(this,e,t,r,i,s):function(n,e,t,r,i,s,o){var a=1/(t-e),c=1/(i-r),l=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(i+r)*c,n[10]=(o+s)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*l,n[15]=0}(this,e,t,r,i,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,r,i,s,o){const c=2*o/(s-i),l=(r+t)/(r-t),u=(s+i)/(s-i),g=-2*o;return e[0]=2*o/(r-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,t,r){return 1===arguments.length&&({eye:e,center:t,up:r}=e),function(n,e,t,r){var i,s,o,a,c,l,u,h,f,g,m=e[0],b=e[1],_=e[2],R=r[0],M=r[1],ee=r[2],_e=t[0],Ie=t[1],Ue=t[2];Math.abs(m-_e)<Li&&Math.abs(b-Ie)<Li&&Math.abs(_-Ue)<Li?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=m-_e,h=b-Ie,f=_-Ue,i=M*(f*=g=1/Math.hypot(u,h,f))-ee*(h*=g),s=ee*(u*=g)-R*f,o=R*h-M*u,(g=Math.hypot(i,s,o))?(i*=g=1/g,s*=g,o*=g):(i=0,s=0,o=0),a=h*o-f*s,c=f*i-u*o,l=u*s-h*i,(g=Math.hypot(a,c,l))?(a*=g=1/g,c*=g,l*=g):(a=0,c=0,l=0),n[0]=i,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=c,n[6]=h,n[7]=0,n[8]=o,n[9]=l,n[10]=f,n[11]=0,n[12]=-(i*m+s*b+o*_),n[13]=-(a*m+c*b+l*_),n[14]=-(u*m+h*b+f*_),n[15]=1)}(this,e,t=t||[0,0,0],r=r||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:r,top:i,near:s=.1,far:o=500}){return function(n,e,t,r,i,s,o){var a=1/(e-t),c=1/(r-i),l=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(i+r)*c,n[14]=(o+s)*l,n[15]=1}(this,e,t,r,i,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:r=1,near:i=.1,far:s=500}){if(e>2*Math.PI)throw Error("radians");const a=r*Math.tan(e/2),c=a*t;return(new Zn).ortho({left:-c,right:c,bottom:-a,top:a,near:i,far:s})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return i7(this,e,r,i,s),this.check()}determinant(){return function(n){var e=n[0],t=n[1],r=n[2],i=n[3],s=n[4],o=n[5],a=n[6],c=n[7],l=n[8],u=n[9],h=n[10],f=n[11],g=n[12],m=n[13],b=n[14],_=n[15];return(e*o-t*s)*(h*_-f*b)-(e*a-r*s)*(u*_-f*m)+(e*c-i*s)*(u*b-h*m)+(t*a-r*o)*(l*_-f*g)-(t*c-i*o)*(l*b-h*g)+(r*c-i*a)*(l*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const r=this.getScale(t||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const r=this.getScale(t||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function(n,e){if(n===e){var t=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=r,n[9]=s,n[11]=e[14],n[12]=i,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return ZT(this,this),this.check()}multiplyLeft(e){return Ud(this,e,this),this.check()}multiplyRight(e){return Ud(this,this,e),this.check()}rotateX(e){return n7(this,this,e),this.check()}rotateY(e){return function(n,e,t){var r=Math.sin(t),i=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],f=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*i-l*r,n[1]=o*i-u*r,n[2]=a*i-h*r,n[3]=c*i-f*r,n[8]=s*r+l*i,n[9]=o*r+u*i,n[10]=a*r+h*i,n[11]=c*r+f*i}(this,this,e),this.check()}rotateZ(e){return r7(this,this,e),this.check()}rotateXYZ([e,t,r]){return this.rotateX(e).rotateY(t).rotateZ(r)}rotateAxis(e,t){return function(n,e,t,r){var c,l,u,h,f,g,m,b,_,R,M,ee,_e,Ie,Ue,at,St,Tt,Ot,qt,tn,bt,Ct,zt,i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o);a<Li||(i*=a=1/a,s*=a,o*=a,c=Math.sin(t),l=Math.cos(t),f=e[1],g=e[2],m=e[3],_=e[5],R=e[6],M=e[7],_e=e[9],Ie=e[10],Ue=e[11],Ot=i*s*(u=1-l)-o*c,qt=s*s*u+l,tn=o*s*u+i*c,bt=i*o*u+s*c,Ct=s*o*u-i*c,zt=o*o*u+l,n[0]=(h=e[0])*(at=i*i*u+l)+(b=e[4])*(St=s*i*u+o*c)+(ee=e[8])*(Tt=o*i*u-s*c),n[1]=f*at+_*St+_e*Tt,n[2]=g*at+R*St+Ie*Tt,n[3]=m*at+M*St+Ue*Tt,n[4]=h*Ot+b*qt+ee*tn,n[5]=f*Ot+_*qt+_e*tn,n[6]=g*Ot+R*qt+Ie*tn,n[7]=m*Ot+M*qt+Ue*tn,n[8]=h*bt+b*Ct+ee*zt,n[9]=f*bt+_*Ct+_e*zt,n[10]=g*bt+R*Ct+Ie*zt,n[11]=m*bt+M*Ct+Ue*zt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?uE(this,this,e):uE(this,this,[e,e,e]),this.check()}translate(e){return lE(this,this,e),this.check()}transform(e,t){return 4===e.length?(FT(t=JT(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:r}=e;switch(r){case 2:t=function(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[4]*i+t[12],n[1]=t[1]*r+t[5]*i+t[13],n}(t||[-0,-0],e,this);break;case 3:t=eG(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return FT(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=function(n,e,t){const r=e[0],i=e[1],s=t[3]*r+t[7]*i||1;return n[0]=(t[0]*r+t[4]*i)/s,n[1]=(t[1]*r+t[5]*i)/s,n}(t||[-0,-0],e,this);break;case 3:t=tG(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return FT(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,r){return this.identity().translate([e,t,r])}transformPoint(e,t){return fk("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return fk("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return fk("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function By(n,e){const t=JT([],e,n);return o7(t,t,1/t[3]),t}function d7(n,e){const t=n%e;return t<0?e+t:t}const jk=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function Xh(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Bu=Math.PI,h7=Bu/4,Vu=Bu/180,Uk=180/Bu,Hk=4003e4;function Vy([n,e]){return Xh(Number.isFinite(n)),Xh(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude"),[512*(n*Vu+Bu)/(2*Bu),512*(Bu+Math.log(Math.tan(h7+e*Vu*.5)))/(2*Bu)]}function Cp([n,e]){const t=n/512*(2*Bu)-Bu,r=2*(Math.atan(Math.exp(e/512*(2*Bu)-Bu))-h7);return[t*Uk,r*Uk]}function t1({latitude:n,longitude:e,highPrecision:t=!1}){Xh(Number.isFinite(n)&&Number.isFinite(e));const r={},s=Math.cos(n*Vu),o=512/360,a=o/s,c=512/Hk/s;if(r.unitsPerMeter=[c,c,c],r.metersPerUnit=[1/c,1/c,1/c],r.unitsPerDegree=[o,a,c],r.degreesPerUnit=[1/o,1/a,1/c],t){const l=Vu*Math.tan(n*Vu)/s,h=512/Hk*l,f=h/a*c;r.unitsPerDegree2=[0,o*l/2,h],r.unitsPerMeter2=[f,0,f]}return r}function p7(n,e){const[t,r,i]=n,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=t1({longitude:t,latitude:r,highPrecision:!0}),u=Vy(n);u[0]+=s*(c[0]+l[0]*o),u[1]+=o*(c[1]+l[1]*o);const h=Cp(u),f=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],f]:h}function g7({height:n,pitch:e,bearing:t,altitude:r,scale:i,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return lE(o,o,[0,0,-r]),n7(o,o,-e*Vu),r7(o,o,t*Vu),uE(o,o,[i/=n,i,i]),s&&lE(o,o,function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),o}function m7({width:n,height:e,fovy:t=n1(1.5),altitude:r,pitch:i=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==r&&(t=n1(r));const a=.5*t*Vu,c=_7(t),l=i*Vu,u=Math.sin(a)*c/Math.sin(Math.min(Math.max(Math.PI/2-l-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/e,focalDistance:c,near:s,far:(Math.sin(l)*u+c)*o}}function n1(n){return 2*Math.atan(.5/n)*Uk}function _7(n){return.5/Math.tan(.5*n*Vu)}function zk(n,e){const[t,r,i=0]=n;return Xh(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(i)),By(e,[t,r,i,1])}function sm(n,e,t=0){const[r,i,s]=n;if(Xh(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return By(e,[r,i,s,1]);const o=By(e,[r,i,0,1]),a=By(e,[r,i,1,1]),c=o[2],l=a[2];return l7([],o,a,c===l?0:((t||0)-c)/(l-c))}function y7({width:n,height:e,bounds:t,minExtent:r=0,maxZoom:i=24,padding:s=0,offset:o=[0,0]}){const[[a,c],[l,u]]=t;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:Xh(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const h=new r1({width:n,height:e,longitude:0,latitude:0,zoom:0}),f=h.project([a,u]),g=h.project([l,c]),m=[Math.max(Math.abs(g[0]-f[0]),r),Math.max(Math.abs(g[1]-f[1]),r)],b=[n-s.left-s.right-2*Math.abs(o[0]),e-s.top-s.bottom-2*Math.abs(o[1])];Xh(b[0]>0&&b[1]>0);const _=b[0]/m[0],R=b[1]/m[1],Ie=h.unproject([(g[0]+f[0])/2+(s.right-s.left)/2/_,(g[1]+f[1])/2+(s.bottom-s.top)/2/R]),Ue=Math.min(i,h.zoom+jk(Math.abs(Math.min(_,R))));return Xh(Number.isFinite(Ue)),{longitude:Ie[0],latitude:Ie[1],zoom:Ue}}const b7=Math.PI/180;function v7(n,e=0){const{width:t,height:r,unproject:i}=n,s={targetZ:e},o=i([0,r],s),a=i([t,r],s);let c,l;return(n.fovy?.5*n.fovy*b7:Math.atan(.5/n.altitude))>(90-n.pitch)*b7-.01?(c=w7(n,0,e),l=w7(n,t,e)):(c=i([0,0],s),l=i([t,0],s)),[o,a,l,c]}function w7(n,e,t){const{pixelUnprojectionMatrix:r}=n,i=By(r,[e,0,1,1]),s=By(r,[e,n.height,1,1]),l=Cp(l7([],i,s,(t*n.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2])));return l[2]=t,l}class r1{constructor({width:e,height:t,latitude:r=0,longitude:i=0,zoom:s=0,pitch:o=0,bearing:a=0,altitude:c=null,fovy:l=null,position:u=null,nearZMultiplier:h=.02,farZMultiplier:f=1.01}={width:1,height:1}){e=e||1,t=t||1,null===l&&null===c?l=n1(c=1.5):null===l?l=n1(c):null===c&&(c=_7(l));const g=function(n){return Math.pow(2,n)}(s);c=Math.max(.75,c);const m=t1({longitude:i,latitude:r}),b=Vy([i,r]);b[2]=0,u&&function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2]}(b,b,function(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}([],u,m.unitsPerMeter)),this.projectionMatrix=function({width:n,height:e,pitch:t,altitude:r,fovy:i,nearZMultiplier:s,farZMultiplier:o}){const{fov:a,aspect:c,near:l,far:u}=m7({width:n,height:e,altitude:r,fovy:i,pitch:t,nearZMultiplier:s,farZMultiplier:o});return i7([],a,c,l,u)}({width:e,height:t,pitch:o,fovy:l,nearZMultiplier:h,farZMultiplier:f}),this.viewMatrix=g7({height:t,scale:g,center:b,pitch:o,bearing:a,altitude:c}),this.width=e,this.height=t,this.scale=g,this.latitude=r,this.longitude=i,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=c,this.fovy=l,this.center=b,this.meterOffset=u||[0,0,0],this.distanceScales=m,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:e,height:t,projectionMatrix:r,viewMatrix:i}=this,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ud(s,s,r),Ud(s,s,i),this.viewProjectionMatrix=s;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];uE(o,o,[e/2,-t/2,1]),lE(o,o,[1,-1,0]),Ud(o,o,s);const a=ZT([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}equals(e){return e instanceof r1&&e.width===this.width&&e.height===this.height&&s7(e.projectionMatrix,this.projectionMatrix)&&s7(e.viewMatrix,this.viewMatrix)}project(e,{topLeft:t=!0}={}){const i=zk(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=i,a=t?o:this.height-o;return 2===e.length?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:t=!0,targetZ:r}={}){const[i,s,o]=e,l=sm([i,t?s:this.height-s,o],this.pixelUnprojectionMatrix,r&&r*this.distanceScales.unitsPerMeter[2]),[u,h,f]=this.unprojectPosition(l);return Number.isFinite(o)?[u,h,f]:Number.isFinite(r)?[u,h,r]:[u,h]}projectPosition(e){const[t,r]=Vy(e);return[t,r,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,r]=Cp(e);return[t,r,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){return Vy(e)}unprojectFlat(e){return Cp(e)}getMapCenterByLngLatPosition({lngLat:e,pos:t}){const r=sm(t,this.pixelUnprojectionMatrix),s=ky([],Vy(e),Vk([],r));return Cp(ky([],this.center,s))}getLocationAtPoint({lngLat:e,pos:t}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:t})}fitBounds(e,t={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=y7(Object.assign({width:r,height:i,bounds:e},t));return new r1({width:r,height:i,longitude:s,latitude:o,zoom:a})}getBounds(e){const t=this.getBoundingRegion(e),r=Math.min(...t.map(a=>a[0])),i=Math.max(...t.map(a=>a[0]));return[[r,Math.min(...t.map(a=>a[1]))],[i,Math.max(...t.map(a=>a[1]))]]}getBoundingRegion(e={}){return v7(this,e.z||0)}}const SCe=Math.PI/180,DCe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$k=[0,0,0],TCe={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};let jy=(()=>{class n{constructor(t={}){const{id:r=null,x:i=0,y:s=0,width:o=1,height:a=1}=t;this.id=r||this.constructor.displayName||"viewport",this.x=i,this.y=s,this.width=o||1,this.height=a||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Bd.WEB_MERCATOR:Bd.WEB_MERCATOR_AUTO_OFFSET:Bd.IDENTITY}equals(t){return t instanceof n&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Jw(t.projectionMatrix,this.projectionMatrix)&&Jw(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:r=!0}={}){const s=zk(this.projectPosition(t),this.pixelProjectionMatrix),[o,a]=s,c=r?a:this.height-a;return 2===t.length?[o,c]:[o,c,s[2]]}unproject(t,{topLeft:r=!0,targetZ:i}={}){const[s,o,a]=t,u=sm([s,r?o:this.height-o,a],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[h,f,g]=this.unprojectPosition(u);return Number.isFinite(a)?[h,f,g]:Number.isFinite(i)?[h,f,i]:[h,f]}projectPosition(t){const[r,i]=this.projectFlat(t);return[r,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[r,i]=this.unprojectFlat(t);return[r,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return this.isGeospatial?Vy(t):t}unprojectFlat(t){return this.isGeospatial?Cp(t):t}getBounds(t={}){const r={targetZ:t.z||0},i=this.unproject([0,0],r),s=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(i[0],s[0],o[0],a[0]),Math.min(i[1],s[1],o[1],a[1]),Math.max(i[0],s[0],o[0],a[0]),Math.max(i[1],s[1],o[1],a[1])]}getDistanceScales(t=null){return t?t1({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:i=1,height:s=1}){return t<this.x+this.width&&this.x<t+i&&r<this.y+this.height&&this.y<r+s}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){const e={};return e.left=Iy(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),e.right=Iy(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),e.bottom=Iy(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),e.top=Iy(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),e.near=Iy(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),e.far=Iy(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),e}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(t,r){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:t,fovyRadians:r,aspect:i,focalDistance:s,near:o,far:a}){return t?(new Zn).orthographic({fovy:r,aspect:i,focalDistance:s,near:o,far:a}):(new Zn).perspective({fovy:r,aspect:i,near:o,far:a})}_initViewMatrix(t){const{viewMatrix:r=DCe,longitude:i=null,latitude:s=null,zoom:o=null,position:a=null,modelMatrix:c=null,focalDistance:l=1,distanceScales:u=null}=t;this.isGeospatial=Number.isFinite(s)&&Number.isFinite(i),this.zoom=o,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){Xh(Number.isFinite(n));const e=Math.cos(n*Vu);return function(n){return jk(n)}(Hk*e)-9}({latitude:s})+Math.log2(l):0);const h=Math.pow(2,this.zoom);this.scale=h,this.distanceScales=this.isGeospatial?t1({latitude:s,longitude:i}):u||TCe,this.focalDistance=l,this.distanceScales.metersPerUnit=new _a(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new _a(this.distanceScales.unitsPerMeter),this.position=$k,this.meterOffset=$k,a&&(this.position=a,this.modelMatrix=c,this.meterOffset=c?c.transformVector(a):a),this.isGeospatial?(this.longitude=i,this.latitude=s,this.center=this._getCenterInWorld({longitude:i,latitude:s})):this.center=a?this.projectPosition(a):[0,0,0],this.viewMatrixUncentered=r,this.viewMatrix=(new Zn).multiplyRight(this.viewMatrixUncentered).translate(new _a(this.center||$k).negate())}_getCenterInWorld({longitude:t,latitude:r}){const{meterOffset:i,distanceScales:s}=this,o=new _a(this.projectPosition([t,r,0]));if(i){const a=new _a(i).scale(s.unitsPerMeter);o.add(a)}return o}_initProjectionMatrix(t){const{projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,focalDistance:l=1}=t;this.projectionMatrix=r||this._createProjectionMatrix({orthographic:i,fovyRadians:s||o*SCe,aspect:this.width/this.height,focalDistance:l,near:a,far:c})}_initPixelMatrices(){const t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ud(t,t,this.projectionMatrix),Ud(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=ZT([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];uE(r,r,[this.width/2,-this.height/2,1]),lE(r,r,[1,-1,0]),Ud(i,r,this.viewProjectionMatrix),this.pixelProjectionMatrix=i,this.viewportMatrix=r,this.pixelUnprojectionMatrix=ZT([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ti.warn("Pixel project matrix not invertible")()}}return n.displayName="Viewport",n})(),x7=(()=>{class n extends jy{constructor(t={}){const{latitude:r=0,longitude:i=0,zoom:s=11,pitch:o=0,bearing:a=0,nearZMultiplier:c=.1,farZMultiplier:l=1.01,orthographic:u=!1,repeat:h=!1,worldOffset:f=0}=t;let{width:g,height:m,altitude:b=1.5}=t;const _=Math.pow(2,s);g=g||1,m=m||1,b=Math.max(.75,b);const{fov:R,aspect:M,focalDistance:ee,near:_e,far:Ie}=m7({width:g,height:m,pitch:o,altitude:b,nearZMultiplier:c,farZMultiplier:l});let Ue=g7({height:m,pitch:o,bearing:a,scale:_,altitude:b});f&&(Ue=(new Zn).translate([512*f,0,0]).multiplyLeft(Ue)),super(Kn(ht({},t),{width:g,height:m,viewMatrix:Ue,longitude:i,latitude:r,zoom:s,orthographic:u,fovyRadians:R,aspect:M,focalDistance:ee,near:_e,far:Ie})),this.latitude=r,this.longitude=i,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=b,this.orthographic=u,this._subViewports=h?[]:null,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),i=Math.ceil((t[2]-180)/360);for(let s=r;s<=i;s++){const o=s?new n(Kn(ht({},this),{worldOffset:s})):this;this._subViewports.push(o)}}return this._subViewports}addMetersToLngLat(t,r){return p7(t,r)}panByPosition(t,r){const i=sm(r,this.pixelUnprojectionMatrix),o=ky([],this.projectFlat(t),Vk([],i)),a=ky([],this.center,o),[c,l]=this.unprojectFlat(a);return{longitude:c,latitude:l}}getBounds(t={}){const r=v7(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:i,height:s}=this,{longitude:o,latitude:a,zoom:c}=y7(ht({width:i,height:s,bounds:t},r));return new n({width:i,height:s,longitude:o,latitude:a,zoom:c})}}return n.displayName="WebMercatorViewport",n})();function Gk(n,e,t=!1){const r=e.projectPosition(n);if(t&&e instanceof x7){const[i,s,o=0]=n,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function T7(n,{viewport:e,modelMatrix:t,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,c=0]=n;switch(t&&([o,a,c]=JT([],[o,a,c,1],t)),r){case Xr.LNGLAT:return Gk([o,a,c],e,s);case Xr.LNGLAT_OFFSETS:return Gk([o+i[0],a+i[1],c+(i[2]||0)],e,s);case Xr.METER_OFFSETS:return Gk(p7(i,[o,a,c]),e,s);case Xr.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],c+i[2]]:e.projectPosition([o,a,c])}}const ICe={10241:9987,10240:9729,10242:33071,10243:33071},Wk={},NCe={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>Boolean(n)===Boolean(e)},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||fE(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>qk(n,e)},accessor:{validate(n,e){const t=s1(n);return"function"===t||t===s1(e.value)},equal:(n,e,t)=>"function"==typeof e||qk(n,e)},array:{validate:(n,e)=>e.optional&&!n||fE(n),equal:(n,e,t)=>t.compare?qk(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:r}=t?t.props:{};return r&&n?r(n):n}},image:{transform:(n,e,t)=>function(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof $c)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let r=null;e.compressed&&(r={10241:e.data.length>1?9985:9729});const i=new $c(t,Kn(ht({},e),{parameters:ht(ht(ht({},ICe),r),n.props.textureParameters)}));return Wk[i.id]=!0,i}(t,n),release:n=>{!function(n){!n||!(n instanceof $c)||Wk[n.id]&&(n.delete(),delete Wk[n.id])}(n)}}};function qk(n,e){if(n===e)return!0;if(!fE(n)||!fE(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function FCe(n,e){switch(s1(e)){case"object":return hE(n,e);case"array":return hE(n,{type:"array",value:e,compare:!1});case"boolean":return hE(n,{type:"boolean",value:e});case"number":return hE(n,{type:"number",value:e});case"function":return hE(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function hE(n,e){return"type"in e?ht(ht({name:n},NCe[e.type]),e):"value"in e?ht({name:n,type:s1(e.value)},e):{name:n,type:"object",value:e}}function fE(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function s1(n){return fE(n)?"array":null===n?"null":typeof n}const{COMPONENT:Yk,ASYNC_ORIGINAL:o1,ASYNC_RESOLVED:pE,ASYNC_DEFAULTS:a1}=XT;function kCe(){const n=this,e=A7(n.constructor),t=Object.create(e);t[Yk]=n,t[o1]={},t[pE]={};for(let r=0;r<arguments.length;++r){const i=arguments[r];for(const s in i)t[s]=i[s]}return Object.freeze(t),t}function A7(n){return c1(n,"_mergedDefaultProps")||(function(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),r=A7(t),s=function(n){const e={},t={},r={};for(const[i,s]of Object.entries(n))if(s&&s.deprecatedFor)r[i]=Array.isArray(s.deprecatedFor)?s.deprecatedFor:[s.deprecatedFor];else{const o=FCe(i,s);e[i]=o,t[i]=o.value}return{propTypes:e,defaultProps:t,deprecatedProps:r}}(c1(n,"defaultProps")||{}),o=function(n,e,t){const r=Object.create(null);Object.assign(r,e,n);const i=function(n){const e=c1(n,"layerName")||c1(n,"componentName");return e||ti.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(s.defaultProps,r,n),a=ht(ht({},t._propTypes),s.propTypes);!function(n,e){const t={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(t[o]=a,r[o]=UCe(o))}n[a1]=t,n[o1]={},Object.defineProperties(n,r)}(o,a);const c=ht(ht({},t._deprecatedProps),s.deprecatedProps);(function(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(t);for(const s of e[t])M7(this,s)||(this[s]=r);ti.deprecated(i,e[t].join("/"))()}})})(o,c),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function UCe(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||cG(e)?this[o1][n]=e:this[pE][n]=e},get(){if(this[pE]){if(n in this[pE])return this[pE][n]||this[a1][n];if(n in this[o1]){const e=this[Yk]&&this[Yk].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[a1][n]}}return this[a1][n]}}}function M7(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function c1(n,e){return M7(n,e)&&n[e]}function Kk(n){var e;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(e=n[Symbol.asyncIterator]),null==e&&Symbol.iterator&&(e=n[Symbol.iterator])),null==e&&(e=n["@@asyncIterator"]),null==e&&(e=n["@@iterator"]),null==e)throw new TypeError("Object is not async iterable");return e.call(n)}const{ASYNC_ORIGINAL:zCe,ASYNC_RESOLVED:$Ce,ASYNC_DEFAULTS:GCe}=XT,WCe=Object.freeze({});class I7{constructor(e=null){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=WCe,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}freezeAsyncOldProps(){if(!this.oldAsyncProps){this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[$Ce]||{},r=e[zCe]||e,i=e[GCe]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var r;const i=null===(r=this.layer)||void 0===r?void 0:r.props.fetch;i&&(t=i(t,{propName:e,layer:this.layer}))}if(t instanceof Promise)return void this._watchPromise(e,t);if(cG(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_didAsyncInputValueChange(e,t){const r=this.asyncProps[e];return t!==r.resolvedValue&&t!==r.lastValue&&(r.lastValue=t,!0)}_setPropValue(e,t){const r=this.asyncProps[e];t=this._postProcessValue(r,t),r.resolvedValue=t,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount}_setAsyncPropValue(e,t,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&void 0!==t&&(this.freezeAsyncOldProps(),i.resolvedValue=t,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const r=this.asyncProps[e];r.pendingLoadCount++;const i=r.pendingLoadCount;t.then(s=>{var o;s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i);const a=null===(o=this.layer)||void 0===o?void 0:o.props.onDataLoad;"data"===e&&a&&a(s,{propName:e,layer:this.layer})}).catch(s=>{var o;null===(o=this.layer)||void 0===o||o.raiseError(s,"loading ".concat(e," of ").concat(this.layer))})}_resolveAsyncIterable(e,t){var r=this;return fr(function*(){var i;"data"!==e&&r._setPropValue(e,t);const s=r.asyncProps[e];s.pendingLoadCount++;const o=s.pendingLoadCount;let a=[],c=0;var h,l=!0,u=!1;try{for(var g,m,f=Kk(t);l=(g=yield f.next()).done,m=yield g.value,!l;l=!0){const _=m,{dataTransform:R}=r.component?r.component.props:{};a=R?R(_,a):a.concat(_),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:c,endRow:a.length}]}),c=a.length,r._setAsyncPropValue(e,a,o)}}catch(_){u=!0,h=_}finally{try{!l&&null!=f.return&&(yield f.return())}finally{if(u)throw h}}const b=null===(i=r.layer)||void 0===i?void 0:i.props.onDataLoad;b&&b(a,{propName:e,layer:r.layer})})()}_postProcessValue(e,t){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(t,r,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}const{ASYNC_ORIGINAL:R7,ASYNC_RESOLVED:O7,ASYNC_DEFAULTS:qCe}=XT,YCe={};let KCe=0,XCe=(()=>{class n{constructor(){this.props=kCe.apply(this,arguments),this.id=this.props.id,this.count=KCe++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}clone(t){const{props:r}=this,i={};for(const s in r[qCe])s in r[O7]?i[s]=r[O7][s]:s in r[R7]&&(i[s]=r[R7][s]);return new this.constructor(ht(ht(ht({},r),i),t))}get stats(){return this.internalState.stats}_initState(){this.internalState=new I7({})}}return n.componentName="Component",n.defaultProps=YCe,n})();class QCe extends I7{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.model=null,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}}const ju=n=>"function"==typeof n,Sp=n=>null!==n&&"object"==typeof n,P7=n=>Sp(n)&&n.constructor==={}.constructor,ZCe=n=>n&&"function"==typeof n[Symbol.iterator],JCe=n=>n&&"function"==typeof n[Symbol.asyncIterator],gE=n=>"undefined"!=typeof Response&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,Uy=n=>"undefined"!=typeof Blob&&n instanceof Blob,F7=n=>(n=>"undefined"!=typeof ReadableStream&&n instanceof ReadableStream||Sp(n)&&ju(n.tee)&&ju(n.cancel)&&ju(n.getReader))(n)||(n=>Sp(n)&&ju(n.read)&&ju(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function om(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function Xk(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function Qk(n){var e,t;let r;return om(n,"null loader"),om(Xk(n),"invalid loader"),Array.isArray(n)&&(r=n[1],n=Kn(ht({},n=n[0]),{options:ht(ht({},n.options),r)})),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const Hd={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Zk=Hd.global||Hd.self||Hd.window||{},sSe="object"!=typeof process||"[object process]"!==String(process)||process.browser,k7="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);k7&&parseFloat(k7[1]);const eL={};function oSe(n){for(const e in eL)n.startsWith(e)&&(n=n.replace(e,eL[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n=`${n}`),n}const aSe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,cSe=/^([-\w.]+\/[-\w.+]+)/;function lSe(n){const e=cSe.exec(n);return e?e[1]:n}function L7(n){const e=aSe.exec(n);return e?e[1]:""}const uSe=/\?.*/;function l1(n){if(gE(n)){const e=tL(n.url||"");return{url:e,type:lSe(n.headers.get("content-type")||"")||L7(e)}}return Uy(n)?{url:tL(n.name||""),type:n.type||""}:"string"==typeof n?{url:tL(n),type:L7(n)}:{url:"",type:""}}function dSe(n){return gE(n)?n.headers["content-length"]||-1:Uy(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function tL(n){return n.replace(uSe,"")}function B7(n){return nL.apply(this,arguments)}function nL(){return(nL=fr(function*(n){if(gE(n))return n;const e={},t=dSe(n);t>=0&&(e["content-length"]=String(t));const{url:r,type:i}=l1(n);i&&(e["content-type"]=i);const s=yield pSe(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:r}),o})).apply(this,arguments)}function hSe(n){return rL.apply(this,arguments)}function rL(){return(rL=fr(function*(n){if(!n.ok){const e=yield fSe(n);throw new Error(e)}})).apply(this,arguments)}function fSe(n){return iL.apply(this,arguments)}function iL(){return(iL=fr(function*(n){let e=`Failed to fetch resource ${n.url} (${n.status}): `;try{const t=n.headers.get("Content-Type");let r=n.statusText;t.includes("application/json")&&(r+=` ${yield n.text()}`),e+=r,e=e.length>60?`${e.slice(60)}...`:e}catch(t){}return e})).apply(this,arguments)}function pSe(n){return sL.apply(this,arguments)}function sL(){return(sL=fr(function*(n){if("string"==typeof n)return`data:,${n.slice(0,5)}`;if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},i.readAsDataURL(t)})}return n instanceof ArrayBuffer?`data:base64,${gSe(n.slice(0,5))}`:null})).apply(this,arguments)}function gSe(n){let e="";const t=new Uint8Array(n);for(let r=0;r<t.byteLength;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function V7(n,e){return oL.apply(this,arguments)}function oL(){return(oL=fr(function*(n,e){if("string"==typeof n){n=oSe(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(t=e.fetch),yield fetch(n,t)}return yield B7(n)})).apply(this,arguments)}function Jn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const j7=new YF({id:"loaders.gl"});class mSe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const U7={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){Jn(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},ySe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function aL(){Zk.loaders=Zk.loaders||{};const{loaders:n}=Zk;return n._state=n._state||{},n._state}const cL=()=>{const n=aL();return n.globalOptions=n.globalOptions||ht({},U7),n.globalOptions};function bSe(n,e,t,r){return t=t||[],function(n,e){z7(n,null,U7,ySe,e);for(const t of e)z7(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function(n,e,t){const i=ht({},n.options||{});return function(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(i,t),null===i.log&&(i.log=new mSe),G7(i,cL()),G7(i,e),i}(e,n,r)}function H7(n,e){const t=cL(),r=n||t;return"function"==typeof r.fetch?r.fetch:Sp(r.fetch)?i=>V7(i,r):null!=e&&e.fetch?null==e?void 0:e.fetch:V7}function z7(n,e,t,r,i){const s=e||"Top level",o=e?`${e}.`:"";for(const a in n){const c=!e&&Sp(n[a]),l="baseUri"===a&&!e,u="workerUrl"===a&&e;if(!(a in t)&&!l&&!u)if(a in r)j7.warn(`${s} loader option '${o}${a}' no longer supported, use '${r[a]}'`)();else if(!c){const h=wSe(a,i);j7.warn(`${s} loader option '${o}${a}' not recognized. ${h}`)()}}}function wSe(n,e){const t=n.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(n===s)return`Did you mean '${i.id}.${s}'?`;const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(r=r||`Did you mean '${i.id}.${s}'?`)}return r}function G7(n,e){for(const t in e)t in e&&(n[t]=P7(e[t])&&P7(n[t])?ht(ht({},n[t]),e[t]):e[t])}function zd(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}function SSe(n,e="3.0.12"){return zd(n,"no worker provided"),!(!e||!n.version)}const $d={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},DSe=$d.global||$d.self||$d.window||{},lL="object"!=typeof process||"[object process]"!==String(process)||process.browser,uL="function"==typeof importScripts,xSe="undefined"!=typeof window&&void 0!==window.orientation,W7="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),dL=(W7&&parseFloat(W7[1]),new Map);function q7(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function Y7(n,e=!0,t){const r=t||new Set;if(n)if(K7(n))r.add(n);else if(K7(n.buffer))r.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const i in n)Y7(n[i],e,r);return void 0===t?Array.from(r):[]}function K7(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}const hL=()=>{};class X7{static isSupported(){return"undefined"!=typeof Worker}constructor(e){Jn(this,"name",void 0),Jn(this,"source",void 0),Jn(this,"url",void 0),Jn(this,"terminated",!1),Jn(this,"worker",void 0),Jn(this,"onMessage",void 0),Jn(this,"onError",void 0),Jn(this,"_loadableURL","");const{name:t,source:r,url:i}=e;zd(r||i),this.name=t,this.source=r,this.url=i,this.onMessage=hL,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=hL,this.onError=hL,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||Y7(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=function(n){zd(n.source&&!n.url||!n.source&&n.url);let e=dL.get(n.source||n.url);return e||(n.url&&(e=function(n){return n.startsWith("http")?q7(function(n){return`try {\n  importScripts('${n}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}(n)):n}(n.url),dL.set(n.url,e)),n.source&&(e=q7(n.source),dL.set(n.source,e))),zd(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}}class ISe{constructor(e,t){Jn(this,"name",void 0),Jn(this,"workerThread",void 0),Jn(this,"isRunning",void 0),Jn(this,"result",void 0),Jn(this,"_resolve",void 0),Jn(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){zd(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){zd(this.isRunning),this.isRunning=!1,this._reject(e)}}class RSe{constructor(e){Jn(this,"name","unnamed"),Jn(this,"source",void 0),Jn(this,"url",void 0),Jn(this,"maxConcurrency",1),Jn(this,"maxMobileConcurrency",1),Jn(this,"onDebug",()=>{}),Jn(this,"reuseWorkers",!0),Jn(this,"props",{}),Jn(this,"jobQueue",[]),Jn(this,"idleQueue",[]),Jn(this,"count",0),Jn(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=ht(ht({},this.props),e),void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=((i,s,o)=>i.done(o)),r=((i,s)=>i.error(s))){var i=this;return fr(function*(){const s=new Promise(o=>(i.jobQueue.push({name:e,onMessage:t,onError:r,onStart:o}),i));return i._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return fr(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const r=e.jobQueue.shift();if(r){e.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:e.jobQueue.length});const i=new ISe(r.name,t);t.onMessage=s=>r.onMessage(i,s.type,s.payload),t.onError=s=>r.onError(i,s),r.onStart(i);try{yield i.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new X7({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return xSe?this.maxMobileConcurrency:this.maxConcurrency}}const OSe={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class Qh{static isSupported(){return X7.isSupported()}static getWorkerFarm(e={}){return Qh._workerFarm=Qh._workerFarm||new Qh({}),Qh._workerFarm.setProps(e),Qh._workerFarm}constructor(e){Jn(this,"props",void 0),Jn(this,"workerPools",new Map),this.props=ht({},OSe),this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props=ht(ht({},this.props),e);for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:r,url:i}=e;let s=this.workerPools.get(t);return s||(s=new RSe({name:t,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}function PSe(n,e={}){const r=`${n.id}-worker.js`;let i=(e[n.id]||{}).workerUrl;if("test"===e._workerType&&(i=`modules/${n.module}/dist/${r}`),!i){let s=n.version;"latest"===s&&(s="latest"),i=`https://unpkg.com/@loaders.gl/${n.module}${s?`@${s}`:""}/dist/${r}`}return zd(i),i}function FSe(n,e){return!!Qh.isSupported()&&n.worker&&(null==e?void 0:e.worker)}function kSe(n,e,t,r,i){return fL.apply(this,arguments)}function fL(){return(fL=fr(function*(n,e,t,r,i){const s=n.id,o=PSe(n,t),c=Qh.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t));const l=yield c.startJob("process-on-worker",LSe.bind(null,i));return l.postMessage("process",{input:e,options:t}),yield(yield l.result).result})).apply(this,arguments)}function LSe(n,e,t,r){return pL.apply(this,arguments)}function pL(){return(pL=fr(function*(n,e,t,r){switch(t){case"done":e.done(r);break;case"error":e.error(r.error);break;case"process":const{id:i,input:s,options:o}=r;try{const a=yield n(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:c})}break;default:console.warn(`parse-with-worker unknown message ${t}`)}})).apply(this,arguments)}Jn(Qh,"_workerFarm",void 0);var Z7=tt(521);function J7(n){if(function(n){return n&&"object"==typeof n&&n.isBuffer}(n)&&(n=function(n){return Z7.toArrayBuffer?Z7.toArrayBuffer(n):n}(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function USe(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(t);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}function eW(n,e,t){const r=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(r).buffer}function HSe(n){return mL.apply(this,arguments)}function mL(){return(mL=fr(function*(n){const e=[];var i,t=!0,r=!1;try{for(var o,a,s=Kk(n);t=(o=yield s.next()).done,a=yield o.value,!t;t=!0)e.push(a)}catch(c){r=!0,i=c}finally{try{!t&&null!=s.return&&(yield s.return())}finally{if(r)throw i}}return USe(...e)})).apply(this,arguments)}const GSe=262144;function tW(n){this.wrapped=n}function mE(n){return new tW(n)}function _E(n){var e,t;function i(o,a){try{var c=n[o](a),l=c.value,u=l instanceof tW;Promise.resolve(u?l.wrapped:l).then(function(h){u?i("return"===o?"return":"next",h):s(c.done?"return":"normal",h)},function(h){i("throw",h)})}catch(h){s("throw",h)}}function s(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(o,a){return new Promise(function(c,l){var u={key:o,arg:a,resolve:c,reject:l,next:null};t?t=t.next=u:(e=t=u,i(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function yL(n){return function(){return new _E(n.apply(this,arguments))}}function bL(){return(bL=yL(function*(n,e){const t=(null==e?void 0:e.chunkSize)||1048576;let r=0;for(;r<n.size;){const i=r+t,s=yield mE(n.slice(r,i).arrayBuffer());r=i,yield s}})).apply(this,arguments)}function nW(n,e){return sSe?function(n,e){return vL.apply(this,arguments)}(n,e):function(n,e){return wL.apply(this,arguments)}(n,e)}function vL(){return(vL=yL(function*(n,e){const t=n.getReader();let r;try{for(;;){const i=r||t.read();null!=e&&e._streamReadAhead&&(r=t.read());const{done:s,value:o}=yield mE(i);if(s)return;yield J7(o)}}catch(i){t.releaseLock()}})).apply(this,arguments)}function wL(){return(wL=yL(function*(n,e){var i,t=!0,r=!1;try{for(var o,a,s=Kk(n);t=(o=yield mE(s.next())).done,a=yield mE(o.value),!t;t=!0)yield J7(a)}catch(c){r=!0,i=c}finally{try{!t&&null!=s.return&&(yield mE(s.return()))}finally{if(r)throw i}}})).apply(this,arguments)}function QSe(n,e){if("string"==typeof n)return function*(n,e){const t=(null==e?void 0:e.chunkSize)||262144;let r=0;const i=new TextEncoder;for(;r<n.length;){const s=Math.min(n.length-r,t),o=n.slice(r,r+s);r+=s,yield i.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*(n,e={}){const{chunkSize:t=GSe}=e;let r=0;for(;r<n.byteLength;){const i=Math.min(n.byteLength-r,t),s=new ArrayBuffer(i),o=new Uint8Array(n,r,i);new Uint8Array(s).set(o),r+=i,yield s}}(n,e);if(Uy(n))return function(n,e){return bL.apply(this,arguments)}(n,e);if(F7(n))return nW(n,e);if(gE(n))return nW(n.body,e);throw new Error("makeIterator")}_E.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},_E.prototype.next=function(n){return this._invoke("next",n)},_E.prototype.throw=function(n){return this._invoke("throw",n)},_E.prototype.return=function(n){return this._invoke("return",n)};const EL="Cannot convert supplied data type";function ZSe(n,e,t){if(e.text&&"string"==typeof n)return n;if((n=>n&&"object"==typeof n&&n.isBuffer)(n)&&(n=n.buffer),n instanceof ArrayBuffer){const r=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let r=n.buffer;const i=n.byteLength||n.length;return(0!==n.byteOffset||i!==r.byteLength)&&(r=r.slice(n.byteOffset,n.byteOffset+i)),r}throw new Error(EL)}function JSe(n,e,t){return CL.apply(this,arguments)}function CL(){return(CL=fr(function*(n,e,t){const r=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||r)return ZSe(n,e);if(Uy(n)&&(n=yield B7(n)),gE(n)){const i=n;return yield hSe(i),e.binary?yield i.arrayBuffer():yield i.text()}if(F7(n)&&(n=QSe(n,t)),ZCe(n)||JCe(n))return HSe(n);throw new Error(EL)})).apply(this,arguments)}function tDe(n,e,t=null){if(t)return t;const r=ht({fetch:H7(e,n)},n);return Array.isArray(r.loaders)||(r.loaders=null),r}function nDe(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...r]:r}return t&&t.length?t:null}const rW=()=>{const n=aL();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function iW(n){const e=rW();n=Array.isArray(n)?n:[n];for(const t of n){const r=Qk(t);e.find(i=>r===i)||e.unshift(r)}}const iDe=/\.([^.]+)$/;function sDe(n){return xL.apply(this,arguments)}function xL(){return(xL=fr(function*(n,e=[],t,r){if(!oW(n))return null;let i=sW(n,e,Kn(ht({},t),{nothrow:!0}),r);if(i)return i;if(Uy(n)&&(i=sW(n=yield n.slice(0,10).arrayBuffer(),e,t,r)),!(i||null!=t&&t.nothrow))throw new Error(aW(n));return i})).apply(this,arguments)}function sW(n,e=[],t,r){if(!oW(n))return null;if(e&&!Array.isArray(e))return Qk(e);let i=[];e&&(i=i.concat(e)),null!=t&&t.ignoreRegisteredLoaders||i.push(...rW()),function(n){for(const e of n)Qk(e)}(i);const s=function(n,e,t,r){const{url:i,type:s}=l1(n),o=i||(null==r?void 0:r.url);let a=null;return null!=t&&t.mimeType&&(a=TL(e,null==t?void 0:t.mimeType)),a=a||function(n,e){const t=e&&iDe.exec(e),r=t&&t[1];return r?function(n,e){e=e.toLowerCase();for(const t of n)for(const r of t.extensions)if(r.toLowerCase()===e)return t;return null}(n,r):null}(e,o),a=a||TL(e,s),a=a||function(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(dDe(e,t))return t}else if(ArrayBuffer.isView(e)){if(cW(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&cW(e,0,t))return t;return null}(e,n),a=a||TL(e,null==t?void 0:t.fallbackMimeType),a}(n,i,t,r);if(!(s||null!=t&&t.nothrow))throw new Error(aW(n));return s}function oW(n){return!(n instanceof Response&&204===n.status)}function aW(n){const{url:e,type:t}=l1(n);let r="No valid loader found";return n&&(r+=` data: "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?AL(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?AL(n,0,e):""}(n)}", contentType: "${t}"`),e&&(r+=` url: ${e}`),r}function TL(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e===`application/x.${t.id}`)return t;return null}function dDe(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>n.startsWith(r))}function cW(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(i=>function(n,e,t,r){if(r instanceof ArrayBuffer)return function(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const r=new Uint8Array(n),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(r,n,r.byteLength);switch(typeof r){case"function":return r(n,t);case"string":return r===AL(n,e,r.length);default:return!1}}(n,e,t,i))}function AL(n,e,t){if(n.byteLength<e+t)return"";const r=new DataView(n);let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}function u1(n,e,t,r){return ML.apply(this,arguments)}function ML(){return(ML=fr(function*(n,e,t,r){zd(!r||"object"==typeof r),e&&!Array.isArray(e)&&!Xk(e)&&(r=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:i}=l1(n),o=nDe(e,r),a=yield sDe(n,o,t);return a?(r=tDe({url:i,parse:u1,loaders:o},t=bSe(t,a,o,i),r),yield pDe(a,n,t,r)):null})).apply(this,arguments)}function pDe(n,e,t,r){return IL.apply(this,arguments)}function IL(){return(IL=fr(function*(n,e,t,r){if(SSe(n),e=yield JSe(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,r,n);if(FSe(n,t))return yield kSe(n,e,t,r,u1);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,r,n);if(n.parse)return yield n.parse(e,t,r,n);throw zd(!n.parseSync),new Error(`${n.id} loader - no parser found and worker is disabled`)})).apply(this,arguments)}function d1(n,e,t,r){return RL.apply(this,arguments)}function RL(){return(RL=fr(function*(n,e,t,r){!Array.isArray(e)&&!Xk(e)&&(t=e,e=void 0);const i=H7(t);let s=n;return"string"==typeof n&&(s=yield i(n)),Uy(n)&&(s=yield i(n)),yield u1(s,e,t)})).apply(this,arguments)}const lW=Hi(2,24)-1,vDe=Object.freeze([]),wDe=QT(({oldViewport:n,viewport:e})=>n.equals(e));let Gd=new Uint8ClampedArray(0);const EDe={data:{type:"data",value:vDe,async:!0},dataComparator:null,_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=t.context;var a;i=i||t.getLoadOptions(),r=r||t.props.loaders,s&&(i=Kn(ht({},i),{fetch:Kn(ht({},null===(a=i)||void 0===a?void 0:a.fetch),{signal:s})}));let c=o.contains(n);return!c&&!i&&(o.add({resourceId:n,data:d1(n,r),persistent:!1}),c=!0),c?o.subscribe({resourceId:n,onChange:l=>t.internalState.reloadAsyncProp(e,l),consumerId:t.id,requestId:e}):d1(n,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Xr.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};let OL=(()=>{class n extends XCe{toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}raiseError(t,r){var i,s,o,a;r&&(t.message="".concat(r,": ").concat(t.message)),(null===(i=(s=this.props).onError)||void 0===i?void 0:i.call(s,t))||null===(o=this.context)||void 0===o||null===(a=o.onError)||void 0===a||a.call(o,t,this)}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(t=!0){this.internalState&&(this.internalState.needsRedraw=t)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(t){const{viewport:r}=this.context,i=T7(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,o,a]=zk(i,r.pixelProjectionMatrix);return 2===t.length?[s,o]:[s,o,a]}unproject(t){const{viewport:r}=this.context;return r.unproject(t)}projectPosition(t){return function(n,e){const{viewport:t,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(n){const e=ht({},n);let{coordinateSystem:t}=n;const{viewport:r,coordinateOrigin:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return t===Xr.DEFAULT&&(t=r.isGeospatial?Xr.LNGLAT:Xr.CARTESIAN),void 0===s&&(e.fromCoordinateSystem=t),void 0===o&&(e.fromCoordinateOrigin=i),e.coordinateSystem=t,e}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=c7(t,r,i),h=T7(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(h,h,t.projectPosition(c||l));return h}(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===Xr.DEFAULT||t===Xr.LNGLAT||t===Xr.CARTESIAN}onHover(t,r){return!!this.props.onHover&&this.props.onHover(t,r)}onClick(t,r){return!!this.props.onClick&&this.props.onClick(t,r)}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){Lu(t instanceof Uint8Array);const[r,i,s]=t;return r+256*i+65536*s-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(t){for(const r of this.props.extensions)t=OEe(t,r.getShaders.call(this,r));return t}shouldUpdateState({changeFlags:s}){return s.propsOrDataChanged}updateState({oldProps:t,props:r,changeFlags:s}){const o=this.getAttributeManager();if(s.dataChanged&&o){const{dataChanged:l}=s;if(Array.isArray(l))for(const u of l)o.invalidateAll(u);else o.invalidateAll()}const c=r.highlightedObjectIndex>=0||r.pickable;if((t.highlightedObjectIndex>=0||t.pickable)!==c&&o){const{pickingColors:l,instancePickingColors:u}=o.attributes,h=l||u;h&&(c&&h.constant&&(h.constant=!1,o.invalidate(h.id)),!h.value&&!c&&(h.constant=!0,h.value=[0,0,0]))}}finalizeState(){for(const r of this.getModels())r.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}activateViewport(t){const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!wDe({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all",r=""){const i=this.getAttributeManager();!i||("all"===t?i.invalidateAll():i.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(t){const r=this.getAttributeManager();if(!r)return;const i=this.getNumInstances(t),s=this.getStartIndices(t);r.update({data:t.data,numInstances:i,startIndices:s,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this,ignoreUnknownAttributes:!0});const o=r.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),i=Object.create(this.props);for(const s in r)Object.defineProperty(i,s,{value:r[s]});return i}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const i=Math.floor(Gd.length/3);if(this.internalState.usesPickingColorCache=!0,i<r){r>lW&&ti.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Gd=Zw.allocate(Gd,r,{size:3,copy:!0,maxCount:Math.max(r,lW)});const s=Math.floor(Gd.length/3),o=[];for(let a=i;a<s;a++)this.encodePickingColor(a,o),Gd[3*a+0]=o[0],Gd[3*a+1]=o[1],Gd[3*a+2]=o[2]}t.value=Gd.subarray(0,3*r)}_setModelAttributes(t,r){const o=this.getAttributeManager().getShaderAttributes(r,t.userData.excludeAttributes||{});t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s.getVertexOffset(t),a=s.getVertexOffset(t+1);s.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,i=t||r;this.internalState.usesPickingColorCache&&i.value.buffer!==Gd.buffer&&(i.value=Gd.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0})}getNumInstances(t){return void 0!==(t=t||this.props).numInstances?t.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(t.data)}getStartIndices(t){return void 0!==(t=t||this.props).startIndices?t.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){ya("layer.initialize",this),this._initState(),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const t=this.needsUpdate();ya("layer.update",this,t),t&&this._updateState()}_updateState(){const t=this.props,r=this.context.viewport,i=this._updateUniformTransition();this.internalState.propsInTransition=i,this.context.viewport=this.internalState.viewport||r,this.props=i;try{const s=this._getUpdateParams(),o=this.getModels();if(this.context.gl)this.updateState(s);else try{this.updateState(s)}catch(c){}for(const c of this.props.extensions)c.updateState.call(this,s,c);const a=this.getModels()[0]!==o[0];this._updateModules(s,a),this.isComposite?this._renderLayers(s):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=r,this.props=t,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){ya("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}drawLayer({moduleParameters:t=null,uniforms:r={},parameters:i={}}){this._updateAttributeTransition();const s=this.props;this.props=this.internalState.propsInTransition||s;const{opacity:o}=this.props;r.opacity=Math.pow(o,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,c=a&&a(r)||[0,0];Gh(this.context.gl,{polygonOffset:c}),ku(this.context.gl,i,()=>{const l={moduleParameters:t,uniforms:r,parameters:i,context:this.context};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=s}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(t){const{changeFlags:r}=this.internalState;for(const s in t)if(t[s]){let o=!1;switch(s){case"dataChanged":Array.isArray(r[s])&&(r[s]=Array.isArray(t[s])?r[s].concat(t[s]):t[s],o=!0);default:r[s]||(r[s]=t[s],o=!0)}o&&ya("layer.changeFlag",this,s,t)}const i=r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged;r.propsOrDataChanged=i,r.somethingChanged=i||t.viewportChanged||t.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(t,r){const i=function(n,e){const t=e7({newProps:n,oldProps:e,propTypes:Bk(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(n,e){if(null===e)return"oldProps is null, initial diff";let t=null;const{dataComparator:r,_dataDiff:i}=n;return r?r(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&i&&(t=i(n.data,e.data)||t),t}(n,e);let i=!1;return r||(i=function(n,e){if(null===e)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&t7(n,e,"all"))return{all:!0};const t={};let r=!1;for(const i in n.updateTriggers)"all"!==i&&t7(n,e,i)&&(t[i]=!0,r=t);return r}(n,e)),{dataChanged:r,propsChanged:t,updateTriggersChanged:i,extensionsChanged:DEe(n,e),transitionsChanged:EEe(n,e)}}(t,r);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged)this.internalState.uniformTransitions.add(s,r[s],t[s],t.transitions[s]);return this.setChangeFlags(i)}validateProps(){!function(n){const e=Bk(n);for(const t in e){const r=e[t],{validate:i}=r;if(i&&!i(n[t],r))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}updateAutoHighlight(t){this.props.autoHighlight&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:i}=this.props;t.picked&&"function"==typeof i&&(r.pickingHighlightColor=i(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_updateModules({props:t,oldProps:r},i){const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=t;if(i||r.autoHighlight!==s||r.highlightedObjectIndex!==o||r.highlightColor!==a){const c={};s||(c.pickingSelectedColor=null),Array.isArray(a)&&(c.pickingHighlightColor=a),Number.isInteger(o)&&(c.pickingSelectedColor=o>=0?this.encodePickingColor(o):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const i=this.getAttributeManager(),s=i&&i.getNeedsRedraw(t);return r=r||s,r}_getAttributeManager(){return new fEe(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){Lu(!this.internalState&&!this.state),Lu(isFinite(this.props.coordinateSystem));const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new QCe({attributeManager:t,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ti.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new yEe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(t){ya("layer.matched",this,this===t);const{state:r,internalState:i}=t;this!==t&&(this.internalState=i,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}return n.layerName="Layer",n.defaultProps=EDe,n})(),SDe=(()=>{class n extends OL{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}renderLayers(){return null}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:i}=this.props;return i&&i[t]&&i[t].type||r}getSubLayerRow(t,r,i){return t.__source={parent:this,object:r,index:i},t}getSubLayerAccessor(t){if("function"==typeof t){const r={data:this.props.data,target:[]};return(i,s)=>i&&i.__source?(r.index=i.__source.index,t(i.__source.object,r)):t(i,s)}return t}getSubLayerProps(t={}){const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:b,extensions:_,fetch:R,_subLayerProps:M}=this.props,ee={opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:b,extensions:_,fetch:R},_e=M&&M[t.id],Ie=_e&&_e.updateTriggers,Ue=t.id||"sublayer";if(_e){const at=this.constructor._propTypes,St=t.type?t.type._propTypes:{};for(const Tt in _e){const Ot=St[Tt]||at[Tt];Ot&&"accessor"===Ot.type&&(_e[Tt]=this.getSubLayerAccessor(_e[Tt]))}}Object.assign(ee,t,_e),ee.id="".concat(this.props.id,"-").concat(Ue),ee.updateTriggers=ht(ht({all:this.props.updateTriggers.all},t.updateTriggers),Ie);for(const at of _){const St=at.getSubLayerProps.call(this,at);St&&Object.assign(ee,St,{updateTriggers:Object.assign(ee.updateTriggers,St.updateTriggers)})}return ee}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_renderLayers(){let{subLayers:t}=this.internalState;const r=!t||this.needsUpdate();r&&(t=this.renderLayers(),t=mk(t,Boolean),this.internalState.subLayers=t),ya("compositeLayer.renderLayers",this,r,t);for(const i of t)i.parent=this}}return n.layerName="CompositeLayer",n})();const DDe=/([0-9]+\.?[0-9]*)(%|px)/;function h1(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=n.match(DDe);if(e&&e.length>=3){const t="%"===e[2],r=parseFloat(e[1]);return{position:t?r/100:r,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function f1(n,e){return n.relative?Math.round(n.position*e):n.position}function yE(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const r=n[t],i=e[t];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&yE(r,i)))return!1}return!0}class NL{constructor(e={}){const{id:t=null,x:r=0,y:i=0,width:s="100%",height:o="100%",projectionMatrix:a=null,fovy:c=50,near:l=.1,far:u=1e3,modelMatrix:h=null,viewportInstance:f=null,type:g=jy}=e;Lu(!f||f instanceof jy),this.viewportInstance=f,this.id=t||this.constructor.displayName||"view",this.type=g,this.props=Kn(ht({},e),{id:this.id,projectionMatrix:a,fovy:c,near:l,far:u,modelMatrix:h}),this._parseDimensions({x:r,y:i,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):yE(this.props,e.props))}makeViewport({width:e,height:t,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:t});return this._getViewport(r,i)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t=ht({},e);for(const r in this.props.viewState)"id"!==r&&(t[r]=this.props.viewState[r]);return t}return e}getDimensions({width:e,height:t}){return{x:f1(this._x,e),y:f1(this._y,t),width:f1(this._width,e),height:f1(this._height,t)}}_getControllerProps(e){let t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),ht(ht({},e),t)):null}_getViewport(e,t){const{type:r}=this;return new r(ht(ht(ht({},e),this.props),t))}_parseDimensions({x:e,y:t,width:r,height:i}){this._x=h1(e),this._y=h1(t),this._width=h1(r),this._height=h1(i)}}const bE=()=>{},uW={transitionEasing:n=>n,transitionInterruption:1,onTransitionStart:bE,onTransitionInterrupt:bE,onTransitionEnd:bE};class xDe{constructor(e,t={}){this.ControllerState=e,this.props=ht(ht({},uW),t),this.propsInTransition=null,this.transition=new cE(t.timeline),this.onViewStateChange=t.onViewStateChange||bE,this.onStateChange=t.onStateChange||bE,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const r=this.props;if(e=ht(ht({},uW),e),this.props=e,this._shouldIgnoreViewportChange(r,e))return t;if(this._isTransitionEnabled(e)){const{interruption:i,endProps:s}=this.transition.settings,o=ht(ht({},r),2===i?s:this.propsInTransition||r);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:r}=e;return(t>0||"auto"===t)&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const r=new this.ControllerState(e),i=new this.ControllerState(t).shortestPathFrom(r),{transitionInterpolator:s}=t,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=t.transitionInterpolator.initializeProps(e,i);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(t)}}_onTransitionUpdate(e){const{time:t,settings:{interpolator:r,startProps:i,endProps:s,duration:o,easing:a}}=e,c=a(t/o),l=r.interpolateProps(i,s,c);this.propsInTransition=new this.ControllerState(ht(ht({},this.props),l)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}const dW=["longitude","latitude","zoom","bearing","pitch"],ADe=["longitude","latitude","zoom"];class hW extends class{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:t,extract:r,required:i}=e;this._propsToCompare=t,this._propsToExtract=r,this._requiredProps=i}arePropsEqual(e,t){for(const r of this._propsToCompare||Object.keys(t))if(!(r in e)||!(r in t)||!Jw(e[r],t[r]))return!1;return!0}initializeProps(e,t){let r;if(this._propsToExtract){const i={},s={};for(const o of this._propsToExtract)i[o]=e[o],s[o]=t[o];r={start:i,end:s}}else r={start:e,end:t};return this._checkRequiredProps(r.start),this._checkRequiredProps(r.end),r}interpolateProps(e,t,r){return t}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(t=>{const r=e[t];Lu(Number.isFinite(r)||Array.isArray(r),"".concat(t," is required for transition"))})}}{constructor(e={}){super((Array.isArray(e)?e:e.transitionProps)||{compare:dW,extract:dW,required:ADe}),this.opts=e}initializeProps(e,t){const r=super.initializeProps(e,t),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(t),c=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return r}interpolateProps(e,t,r){const i={};for(const s of this._propsToExtract)i[s]=PT(e[s]||0,t[s]||0,r);if(t.aroundPosition){const s=this.opts.makeViewport(ht(ht({},t),i));Object.assign(i,s.panByPosition(t.aroundPosition,PT(e.around,t.around,r)))}return i}}const Dp={transitionDuration:0},MDe={transitionDuration:300,transitionEasing:n=>n,transitionInterruption:1},g1=n=>1-(1-n)*(1-n),Hy_WHEEL=["wheel"],Hy_PAN=["panstart","panmove","panend"],Hy_PINCH=["pinchstart","pinchmove","pinchend"],Hy_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Hy_DOUBLE_TAP=["doubletap"],Hy_KEYBOARD=["keydown"];class PL{constructor(e,t={}){this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new xDe(e,Kn(ht({},t),{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));const r=this.linearTransitionProps;this._transition=r&&Kn(ht({},MDe),{transitionInterpolator:new hW({transitionProps:r})}),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:t}=this;this.controllerState=new t(ht(ht({makeViewport:this.makeViewport},this.controllerStateProps),this._state));const r=this._eventStartBlocked;switch(e.type){case"panstart":return!r&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!r&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!r&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:t,y:r}=this.controllerStateProps,{offsetCenter:i}=e;return[i.x-t,i.y-r]}isPointInBounds(e,t){const{width:r,height:i}=this.controllerStateProps;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:t}=e;!0===t&&(t=300),this.inertia=t;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=Boolean(this.onViewStateChange);this.toggleEvents(Hy_WHEEL,u&&r),this.toggleEvents(Hy_PAN,u&&(i||s)),this.toggleEvents(Hy_PINCH,u&&(a||c)),this.toggleEvents(Hy_TRIPLE_PAN,u&&c),this.toggleEvents(Hy_DOUBLE_TAP,u&&o),this.toggleEvents(Hy_KEYBOARD,u&&l),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(r=>{this._events[r]!==t&&(this._events[r]=t,t?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,t={},r={}){const i=ht(ht({},e.getViewportProps()),t),s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||"pan"===this.dragMode)&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:t});return this._panMove=r,this.updateViewport(i,Dp,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),r=this.controllerState.pan({pos:t});return this.updateViewport(r,Dp,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const r=this.getCenter(e),s=this.controllerState.pan({pos:[r[0]+e.velocityX*t/2,r[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,Kn(ht({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:g1}),{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),r=this.controllerState.rotate({pos:t});return this.updateViewport(r,Dp,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const r=this.getCenter(e),s=this.controllerState.rotate({pos:[r[0]+e.velocityX*t/2,r[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,Kn(ht({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:g1}),{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,Kn(ht({},this._getTransitionProps({around:t})),{transitionDuration:i?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const r=this.controllerState.rotateStart({pos:t});return this.updateViewport(r,Dp,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const r=this.controllerState.rotate({pos:t});return this.updateViewport(r,Dp,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,Kn(ht({},this._getTransitionProps()),{transitionDuration:t,transitionEasing:g1}),{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const r=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(r,Dp,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);t=t.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;t=t.rotate({deltaAngleX:this._startPinchRotation-r})}return this.updateViewport(t,Dp,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t,_lastPinchEvent:r}=this;if(this.touchZoom&&t&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),c=Math.pow(2,o+a*t/2);s=s.zoom({pos:i,scale:c}).zoomEnd(),this.updateViewport(s,Kn(ht({},this._getTransitionProps({around:i})),{transitionDuration:t,transitionEasing:g1}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:t,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{_transition:t}=this;return t?e?Kn(ht({},t),{transitionInterpolator:new hW(Kn(ht({},e),{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):t:Dp}}class fW{constructor(e){this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const xp_target=[0,0,0];class m1 extends fW{constructor({makeViewport:e,width:t,height:r,rotationX:i=0,rotationOrbit:s=0,target:o=xp_target,zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-(1/0),maxZoom:h=Infinity,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:b,startZoomPosition:_,startZoom:R}){super({width:t,height:r,rotationX:i,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:h}),this._state={startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:b,startZoomPosition:_,startZoom:R},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const r=this._state.startPanPosition||t;if(!r)return this;const s=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:c}=this._viewportProps;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let l;if(e){let u=(e[0]-i[0])/a;(s<-90||s>90)&&(u*=-1),l={rotationX:s+(e[1]-i[1])/c*180,rotationOrbit:o+180*u}}else l={rotationX:s+r,rotationOrbit:o+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),r=ht({},this._viewportProps),{rotationOrbit:i}=r;return Math.abs(i-t.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:r}){const{zoom:i}=this._viewportProps;let{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=i,o=this._unproject(t)||this._unproject(e));const a=this._calculateNewZoom({scale:r,startZoom:s}),c=this.makeViewport(Kn(ht({},this._viewportProps),{zoom:a}));return this._getUpdatedState(ht({zoom:a},c.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:r,minZoom:i}=this._viewportProps;return Number.isFinite(t)||(t=this._viewportProps.zoom),rm(t+Math.log2(e),i,r)}_panFromCenter(e){const{width:t,height:r,target:i}=this._viewportProps;return this.pan({startPosition:i,pos:[t/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new m1(ht(ht(ht({},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:r,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=rm(i,r,t),e.rotationX=rm(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function(n,e){const t=n%360;return t<0?360+t:t}(a+180)-180),e}}class RDe extends PL{constructor(e){super(m1,e)}get linearTransitionProps(){return["target","zoom","rotationX","rotationOrbit"]}}class ODe extends PL{constructor(e){e.dragMode=e.dragMode||"pan",super(m1,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const NDe=(new Zn).lookAt({eye:[0,0,1]});function PDe({width:n,height:e,near:t,far:r}){return n=n||1,e=e||1,(new Zn).ortho({left:-n/2,right:n/2,bottom:-e/2,top:e/2,near:t,far:r})}class FDe extends jy{constructor(e){const{width:t,height:r,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:c=!0}=e,l=Math.pow(2,o);super(Kn(ht({},e),{longitude:null,position:a,viewMatrix:NDe.clone().scale([l,l*(c?-1:1),l]),projectionMatrix:PDe({width:t,height:r,near:i,far:s}),zoom:o}))}panByPosition(e,t){const i=ky([],e,Vk([],sm(t,this.pixelUnprojectionMatrix)));return{target:ky([],this.center,i)}}}let kDe=(()=>{class n extends NL{constructor(t){super(Kn(ht({},t),{type:FDe}))}get controller(){return this._getControllerProps({type:ODe})}}return n.displayName="OrthographicView",n})();const _1=Math.PI/180;function LDe({height:n,fovy:e,orbitAxis:t,rotationX:r,rotationOrbit:i,zoom:s}){const o=.5/Math.tan(e*_1/2),a="Z"===t?[0,0,1]:[0,1,0],c="Z"===t?[0,-o,0]:[0,0,o],l=(new Zn).lookAt({eye:c,up:a});l.rotateX(r*_1),"Z"===t?l.rotateZ(i*_1):l.rotateY(i*_1);const u=Math.pow(2,s)/(n||1);return l.scale(u),l}class BDe extends jy{constructor(e){const{height:t,fovy:r,orbitAxis:i,target:s=[0,0,0],rotationX:o=0,rotationOrbit:a=0,zoom:c=0}=e;super(Kn(ht({},e),{longitude:null,viewMatrix:LDe({height:t,fovy:r,orbitAxis:i,rotationX:o,rotationOrbit:a,zoom:c}),fovy:r,position:s,zoom:c})),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[r,i,s=this.projectedCenter[2]]=e,o=t?i:this.height-i,[a,c,l]=sm([r,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const r=this.project(e);return{target:this.unproject([this.width/2+r[0]-t[0],this.height/2+r[1]-t[1],this.projectedCenter[2]])}}}let VDe=(()=>{class n extends NL{constructor(t={}){const{orbitAxis:r="Z"}=t;super(Kn(ht({},t),{orbitAxis:r,type:BDe}))}get controller(){return this._getControllerProps({type:RDe})}}return n.displayName="OrbitView",n})();const jDe=[255,255,255],UDe=1;let HDe=0;class pW{constructor(e={}){const{color:t=jDe}=e,{intensity:r=UDe}=e;this.id=e.id||"ambient-".concat(HDe++),this.color=t,this.intensity=r,this.type="ambient"}}const zDe=[255,255,255],$De=1,GDe=[0,0,-1];let WDe=0;class gW{constructor(e={}){const{color:t=zDe}=e,{intensity:r=$De}=e,{direction:i=GDe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(WDe++),this.color=t,this.intensity=r,this.type="directional",this.direction=new _a(i).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class mW{constructor(e={}){const{id:t="effect"}=e;this.id=t,this.props=ht({},e)}preRender(){}getModuleParameters(){}cleanup(){}}class FL extends class{constructor(e,t={}){const{id:r="pass"}=t;this.id=r,this.gl=e,this.props=ht({},t)}setProps(e){Object.assign(this.props,e)}render(){}cleanup(){}}{render(e){return Gh(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{viewports:t,views:r,onViewportActive:i,clearCanvas:s=!0}=e;e.pass=e.pass||"unknown";const o=this.gl;s&&function(n){Gh(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(o);const a=[];for(const c of t){const l=c.viewport||c,u=r&&r[l.id];i(l);const h=this._getDrawLayerParams(l,e);e.view=u;const f=l.subViewports||[l];for(const g of f){e.viewport=g;const m=this._drawLayersInViewport(o,e,h);a.push(m)}}return a}_getDrawLayerParams(e,{layers:t,pass:r,layerFilter:i,effects:s,moduleParameters:o}){const a=[],c=_W(),l={viewport:e,isPicking:r.startsWith("picking"),renderPass:r};for(let u=0;u<t.length;u++){const h=t[u],f=this._shouldDrawLayer(h,l,i),m={shouldDrawLayer:f,layerRenderIndex:c(h,f)};f&&(m.moduleParameters=this._getModuleParameters(h,s,r,o),m.layerParameters=this.getLayerParameters(h,u)),a[u]=m}return a}_drawLayersInViewport(e,{layers:t,pass:r,viewport:i,view:s},o){const a=function(n,{viewport:e}){const t=n.canvas?n.canvas.clientHeight||n.canvas.height:100,r=e,i=Dy(n);return[r.x*i,(t-r.y-r.height)*i,r.width*i,r.height*i]}(e,{viewport:i});if(s&&s.props.clear){const l=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;ku(e,{scissorTest:!0,scissor:a},()=>ak(e,l))}const c={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Gh(e,{viewport:a});for(let l=0;l<t.length;l++){const u=t[l],{shouldDrawLayer:h,layerRenderIndex:f,moduleParameters:g,layerParameters:m}=o[l];if(h&&u.props.pickable&&c.pickableCount++,u.isComposite)c.compositeCount++;else if(h){c.visibleCount++,g.viewport=i;try{u.drawLayer({moduleParameters:g,uniforms:{layerIndex:f},parameters:m})}catch(b){u.raiseError(b,"drawing ".concat(u," to ").concat(r))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t){return e.props.parameters}_shouldDrawLayer(e,t,r){if(!this.shouldDrawLayer(e)||!e.props.visible||(t.layer=e,r&&!r(t)))return!1;let s=e.parent;for(;s;){if(!s.filterSubLayer(t))return!1;t.layer=s,s=s.parent}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,r,i){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Dy(this.gl)});if(t)for(const o of t)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,t),i)}}function _W(n=0,e={}){const t={},r=(i,s)=>{const o=i.props._offset,a=i.id,c=i.parent&&i.parent.id;let l;if(c&&!(c in e)&&r(i.parent,!1),c in t){const u=t[c]=t[c]||_W(e[c],e);l=u(i,s),t[a]=u}else Number.isFinite(o)?(l=o+(e[c]||0),t[a]=null):l=n;return s&&l>=n&&(n=l+1),e[a]=l,l};return r}class XDe extends FL{constructor(e,t){super(e,t),this.shadowMap=new $c(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new My(e,{format:33189,width:1,height:1}),this.fbo=new wo(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;ku(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Dy(this.gl),s=r.width*i,o=r.height*i;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render(Kn(ht({},e),{target:t,pass:"shadow"}))})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const ZDe=Object.keys(Xr).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Xr[n],";")).join(""),JDe=Object.keys(Bd).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(Bd[n],";")).join(""),exe="".concat(ZDe,"\n").concat(JDe,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n"),txe={},kL={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:exe,getUniforms:function(n=txe){return n.viewport?function({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:r=Xr.DEFAULT,coordinateOrigin:i,autoWrapLongitude:s=!1}={}){r===Xr.DEFAULT&&(r=n.isGeospatial?Xr.LNGLAT:Xr.CARTESIAN);const o=cCe({viewport:n,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||sCe,o}(n):{}}},sxe=QT(function({viewport:n,center:e}){return new Zn(n.viewProjectionMatrix).invert().transform(e)}),oxe=QT(function({viewport:n,shadowMatrices:e}){const t=[],r=n.pixelUnprojectionMatrix,i=n.isGeospatial?void 0:1,s=[[0,0,i],[n.width,0,i],[0,n.height,i],[n.width,n.height,i],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function(n,e){const[t,r,i]=n,s=sm([t,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}(o,r));for(const o of e){const a=o.clone().translate(new _a(n.center).negate()),c=s.map(u=>a.transform(u)),l=(new Zn).ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});t.push(l.multiplyRight(o))}return t}),axe=[0,0,0,1],cxe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],LL={name:"shadow",dependencies:[kL],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>{if(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0){const{shadowEnabled:t=!0}=n;return t&&n.shadowMatrices&&n.shadowMatrices.length>0?function(n={},e={}){const t={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||axe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=sxe({viewport:n.viewport,center:e.project_uCenter}),i=[],s=oxe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let o=0;o<n.shadowMatrices.length;o++){const a=s[o],c=a.clone().translate(new _a(n.viewport.center).negate());e.project_uCoordinateSystem===Xr.LNGLAT&&e.project_uProjectionMode===Bd.WEB_MERCATOR?(s[o]=c,i[o]=r):(s[o]=a.clone().multiplyRight(cxe),i[o]=c.transform(r))}for(let o=0;o<s.length;o++)t["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],t["shadow_uProjectCenters[".concat(o,"]")]=i[o],t["shadow_uShadowMap".concat(o)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[o]:n.dummyShadowMap;return t}(n,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},fxe={color:[255,255,255],intensity:1},yW=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],pxe=[0,0,0,200/255];class BL extends mW{constructor(e){super(e),this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=pxe,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const t in e){const r=e[t];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=oE.getDefaultProgramManager(e),LL&&this.programManager.addDefaultModule(LL)),this.dummyShadowMap||(this.dummyShadowMap=new $c(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(LL),this.programManager=null)}_createLightMatrix(){const e=[];for(const t of this.directionalLights){const r=(new Zn).lookAt({eye:new _a(t.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const r=new XDe(e);this.shadowPasses[t]=r,this.shadowMaps[t]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:r}=this;!e&&0===t.length&&0===r.length&&(this.ambientLight=new pW(fxe),this.directionalLights.push(new gW(yW[0]),new gW(yW[1])))}}let gxe=1,mxe=1;class bW{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=gxe++,a={time:0,delay:t,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,r]of this.animations)r.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const i of t)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const r=mxe++;return this.animations.set(r,{animation:e,channel:t}),e.setTime(this.getTime(t)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const r=t-e.delay;r>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}class _xe{constructor(e,t,r){this.id=e,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const r=++this._loadCount;let i=e;"string"==typeof e&&(i=d1(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class yxe{constructor({gl:e,protocol:t}){this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(t,r):(s=new _xe(e,t,this._context),this._resources[e]=s),s.persistent=i}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const r in t){const i=t[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),r&&(o[t]=a,a.onChange=i,a.resource=r,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const bxe=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},kL],vxe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function wxe(n){const e=oE.getDefaultProgramManager(n);for(const t of bxe)e.addDefaultModule(t);for(const t of vxe)e.addShaderHook(t);return e}const Sxe=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class Dxe{constructor(e,{deck:t,stats:r,viewport:i,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new yxe({gl:e,protocol:"deck://"}),this.context=Kn(ht({},Sxe),{layerManager:this,gl:e,deck:t,programManager:e&&wxe(e),stats:r||new ek({id:"deck.gl"}),viewport:i||new jy({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new bW,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);t=t||i}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(t=>e.find(r=>0===t.id.indexOf(r))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){ya("layerManager.setLayers",this,t,e),this.lastRenderedLayers=e,e=mk(e,Boolean);for(const r of e)r.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return ya("layerManager.activateViewport",this,e),e&&(this.context.viewport=e),this}_handleError(e,t,r){r.raiseError(t,"".concat(e," of ").concat(r))}_updateLayers(e,t){const r={};for(const o of e)r[o.id]?ti.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(t,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,t,r){for(const i of e){i.context=this.context;const s=t[i.id];null===s&&ti.warn("Multiple new layers with same id ".concat(i.id))(),t[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite&&i.getSubLayers()}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,t,r)}}_finalizeOldLayers(e){for(const t in e){const r=e[t];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class xxe{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return"string"==typeof e?this.views.find(t=>t.id===e):e}getViewState(e){const t=this.getView(e),r=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,t){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=mk(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!yE(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ti.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(t)}_createController(e,t){return new(0,t.type)(ht({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height})},t))}_updateController(e,t,r,i){let s=e.controller;return s?(s=Kn(ht(ht(ht({},t),e.props),s),{id:e.id,x:r.x,y:r.y,width:r.width,height:r.height}),i?i.setProps(s):i=this._createController(e,s),i):null}_rebuildViewports(){const{width:e,height:t,views:r}=this,i=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=r.length;o--;){const a=r[o],c=this.getViewState(a),l=a.makeViewport({width:e,height:t,viewState:c});let u=i[a.id];a.controller&&!u&&(s=!0),(s||!a.controller)&&u&&(u.finalize(),u=null),this.controllers[a.id]=this._updateController(a,c,l,u),this._viewports.unshift(l)}for(const o in i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((r,i)=>!e[i].equals(t[i]))}}class Axe extends fW{constructor({makeViewport:e,width:t,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,maxZoom:u=20,minZoom:h=0,maxPitch:f=60,minPitch:g=0,startPanLngLat:m,startZoomLngLat:b,startRotatePos:_,startBearing:R,startPitch:M,startZoom:ee,normalize:_e}={}){Lu(Number.isFinite(s)),Lu(Number.isFinite(i)),Lu(Number.isFinite(o)),super({width:t,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:u,minZoom:h,maxPitch:f,minPitch:g,normalize:_e}),this._state={startPanLngLat:m,startZoomLngLat:b,startRotatePos:_,startBearing:R,startPitch:M,startZoom:ee},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const r=this._state.startPanLngLat||this._unproject(t);if(!r)return this;const s=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this._state;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return a=e?this._calculateNewPitchAndBearing(Kn(ht({},this._getRotationParams(e,i)),{startBearing:s,startPitch:o})):{bearing:s+t,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:t,scale:r}){let{startZoom:i,startZoomLngLat:s}=this._state;Number.isFinite(i)||(i=this._viewportProps.zoom,s=this._unproject(t)||this._unproject(e));const o=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport(Kn(ht({},this._viewportProps),{zoom:o}));return this._getUpdatedState(ht({zoom:o},a.panByPosition(s,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),r=ht({},this._viewportProps),{bearing:i,longitude:s}=r;return Math.abs(i-t.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-t.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}_zoomFromCenter(e){const{width:t,height:r}=this._viewportProps;return this.zoom({pos:[t/2,r/2],scale:e})}_panFromCenter(e){const{width:t,height:r}=this._viewportProps;return this.pan({startPos:[t/2,r/2],pos:[t/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor(ht(ht(ht({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:t,minZoom:r,zoom:i}=e;e.zoom=rm(i,r,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=rm(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function({width:n,height:e,longitude:t,latitude:r,zoom:i,pitch:s=0,bearing:o=0}){(t<-180||t>180)&&(t=d7(t+180,360)-180),(o<-180||o>180)&&(o=d7(o+180,360)-180);const a=jk(e/512);if(i<=a)i=a,r=0;else{const c=e/2/Math.pow(2,i),l=Cp([0,c])[1];if(r<l)r=l;else{const u=Cp([0,512-c])[1];r>u&&(r=u)}}return{width:n,height:e,longitude:t,latitude:r,zoom:i,pitch:s,bearing:o}}(e)),e}_unproject(e){const t=this.makeViewport(this._viewportProps);return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:r,minZoom:i}=this._viewportProps;return rm(t+Math.log2(e),i,r)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:t,startBearing:r,startPitch:i}){t=rm(t,-1,1);const{minPitch:s,maxPitch:o}=this._viewportProps;let c=i;return t>0?c=i+t*(o-i):t<0&&(c=i-t*(s-i)),{pitch:c,bearing:r+180*e}}_getRotationParams(e,t){const r=e[0]-t[0],i=e[1]-t[1],s=e[1],o=t[1],{width:a,height:c}=this._viewportProps,l=r/a;let u=0;return i>0?Math.abs(c-o)>5&&(u=i/(o-c)*1.2):i<0&&o>5&&(u=1-s/o),u=Math.min(1,Math.max(-1,u)),{deltaScaleX:l,deltaScaleY:u}}}class Mxe extends PL{constructor(e){e.dragMode=e.dragMode||"pan",super(Axe,e)}setProps(e){const t=this.controllerStateProps;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState(ht(ht({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch"]}}let Ixe=(()=>{class n extends NL{constructor(t){super(Kn(ht({},t),{type:x7}))}get controller(){return this._getControllerProps({type:Mxe})}}return n.displayName="MapView",n})();const Rxe=new BL;class Oxe{constructor(){this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!yE(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._createInternalEffects()}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}_createInternalEffects(){this._internalEffects=this.effects.slice(),this.effects.some(e=>e instanceof BL)||this._internalEffects.push(Rxe)}}class Nxe extends FL{}const wW={blendFunc:[1,0,32771,0],blendEquation:32774};class EW extends FL{render(e){e.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(e)):(this.useAlpha=!1,super.render(e))}_drawPickingBuffer({layers:e,layerFilter:t,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:u},pass:h="picking",redrawReason:f,pickZ:g}){const m=this.gl;return this.pickZ=g,ku(m,Kn(ht({scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},wW),{blend:!g}),()=>{super.render({target:o,layers:e,layerFilter:t,views:r,viewports:i,onViewportActive:s,pass:h,redrawReason:f})})}shouldDrawLayer(e){return e.props.pickable}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t){const r=this.pickZ?{blend:!1}:Kn(ht({},wW),{blend:!0,blendColor:[0,0,0,this.useAlpha?(t+1)/255:1]});return ht(ht({},e.props.parameters),r)}}class Fxe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Nxe(e),this.pickLayersPass=new EW(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||wo.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=t.render(Kn(ht({},e),{target:r}));this._postRender(e.effects,e),this.renderCount++,ya("deckRenderer.renderLayers",this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let r=null;for(const i of e)i.preRender(this.gl,t),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new wo(this.gl),new wo(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=t.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const kxe={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Lxe({pickedColors:n,layers:e,deviceX:t,deviceY:r,deviceRadius:i,deviceRect:s}){if(n){const{x:o,y:a,width:c,height:l}=s;let u=i*i,h=-1,f=0;for(let g=0;g<l;g++){const m=g+a-r,b=m*m;if(b>u)f+=4*c;else for(let _=0;_<c;_++){if(n[f+3]-1>=0){const M=_+o-t,ee=M*M+b;ee<=u&&(u=ee,h=f)}f+=4}}if(h>=0){const g=n[h+3]-1,m=n.slice(h,h+4),b=e[g];if(b){const _=b.decodePickingColor(m),R=Math.floor(h/4/c);return{pickedColor:m,pickedLayer:b,pickedObjectIndex:_,pickedX:o+(h/4-R*c),pickedY:a+R}}ti.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return kxe}function CW({pickInfo:n,mode:e,viewports:t,layerFilter:r,pixelRatio:i,x:s,y:o,z:a}){const c=n&&n.pickedLayer,u=function(n,e,t){for(let r=n.length-1;r>=0;r--){const i=n[r];if(i.containsPixel(e)&&(!t||t(i)))return i}return n[0]}(t,{x:s,y:o},r&&c&&(f=>r({layer:c,viewport:f,isPicking:!0,renderPass:"picking:".concat(e)}))),h=u&&u.unproject([s-u.x,o-u.y],{targetZ:a});return{color:null,layer:null,viewport:u,index:-1,picked:!1,x:s,y:o,pixel:[s,o],coordinate:h,devicePixel:n&&[n.pickedX,n.pickedY],pixelRatio:i}}function Vxe(n){const{pickInfo:e,lastPickedInfo:t,mode:r,layers:i}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===r){const h=t.index,f=t.layerId,g=o&&o.props.id;if(g!==f||a!==h){if(g!==f){const m=i.find(b=>b.props.id===f);m&&c.unshift(m)}t.layerId=g,t.index=a,t.info=null}}const l=CW(n),u=new Map;return u.set(null,l),c.forEach(h=>{let f=ht({},l);h===o&&(f.color=s,f.index=a,f.picked=!0),f=SW({layer:h,info:f,mode:r}),h===o&&"hover"===r&&(t.info=f),u.set(f.layer.id,f),"hover"===r&&f.layer.updateAutoHighlight(f)}),u}function SW({layer:n,info:e,mode:t}){for(;n&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:r}),n=n.parent}return e}class Uxe{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new EW(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?r.find(f=>f.id===o):null,l=a&&i.find(f=>f.id===a)||i[0],u=l&&l.unproject([e-l.x,t-l.y]),h={x:e,y:t,viewport:l,coordinate:u,layer:c};return c?ht(ht({},s),h):Object.assign(h,{color:null,object:null,index:-1})}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new wo(e),wo.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new wo(e),this.depthFBO.attach({36064:new $c(e,{format:Ir(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(r=>r.isPickable()&&!r.isComposite);return t.length>255?(ti.warn("Too many pickable layers, only picking the first 255")(),t.slice(0,255)):t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u}){if(!(e=this._getPickable(e)))return{result:[],emptyInfo:CW({viewports:r,x:i,y:s})};this._resizeBuffer();const h=Dy(this.gl),f=QF(this.gl,[i,s],!0),g=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],m=Math.round(o*h),{width:b,height:_}=this.pickingFBO,R=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:b,deviceHeight:_});let M;const ee=[],_e={};for(let Ie=0;Ie<a;Ie++){const at=Lxe({pickedColors:R&&this._drawAndSample({layers:e,views:t,viewports:r,onViewportActive:u,deviceRect:R,pass:"picking:".concat(c),redrawReason:c}),layers:e,deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:R});let St;if(at.pickedLayer&&l&&this.depthFBO&&(St=this._drawAndSample({layers:[at.pickedLayer],views:t,viewports:r,onViewportActive:u,deviceRect:{x:at.pickedX,y:at.pickedY,width:1,height:1},pass:"picking:".concat(c),redrawReason:"pick-z",pickZ:!0})[0]*r[0].distanceScales.metersPerUnit[2]+r[0].position[2]),at.pickedColor&&Ie+1<a){const Tt=at.pickedColor[3]-1;_e[Tt]=!0,e[Tt].disablePickingIndex(at.pickedObjectIndex)}M=Vxe({pickInfo:at,lastPickedInfo:this.lastPickedInfo,mode:c,layers:e,layerFilter:this.layerFilter,viewports:r,x:i,y:s,z:St,pixelRatio:h});for(const Tt of M.values())Tt.layer&&ee.push(Tt);if(!at.pickedColor)break}for(const Ie in _e)e[Ie].restorePickingColors();return{result:ee,emptyInfo:M&&M.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u}){if(!(e=this._getPickable(e)))return[];this._resizeBuffer();const h=Dy(this.gl),f=QF(this.gl,[i,s],!0),g=f.x,m=f.y+f.height,b=QF(this.gl,[i+o,s+a],!0),R=b.y,_e=function({pickedColors:n,layers:e}){const t=new Map;if(n)for(let r=0;r<n.length;r+=4){const i=n[r+3]-1;if(i>=0){const s=n.slice(r,r+4),o=s.join(",");if(!t.has(o)){const a=e[i];a?t.set(o,{pickedColor:s,pickedLayer:a,pickedObjectIndex:a.decodePickingColor(s)}):ti.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}({pickedColors:this._drawAndSample({layers:e,views:t,viewports:r,onViewportActive:u,deviceRect:{x:g,y:R,width:b.x+b.width-g,height:m-R},pass:"picking:".concat(c),redrawReason:c}),layers:e}),Ie=new Map,Ue=Number.isFinite(l);for(let at=0;at<_e.length&&!(Ue&&Ie.size>=l);at++){const St=_e[at];let Tt={color:St.pickedColor,layer:null,index:St.pickedObjectIndex,picked:!0,x:i,y:s,width:o,height:a,pixelRatio:h};Tt=SW({layer:St.pickedLayer,info:Tt,mode:c}),Ie.has(Tt.object)||Ie.set(Tt.object,Tt)}return Array.from(Ie.values())}_drawAndSample({layers:e,views:t,viewports:r,onViewportActive:i,deviceRect:s,pass:o,redrawReason:a,pickZ:c}){if(e.length<1)return null;const l=c?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:r,onViewportActive:i,pickingFBO:l,deviceRect:s,pass:o,redrawReason:a,pickZ:c});const{x:u,y:h,width:f,height:g}=s,m=new(c?Float32Array:Uint8Array)(f*g*4);return NT(l,{sourceX:u,sourceY:h,sourceWidth:f,sourceHeight:g,target:m}),m}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,t-r),c=Math.min(i,e+r+1)-o,l=Math.min(s,t+r+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const Hxe={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class zxe{constructor(e){const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Hxe),t.appendChild(this.el)),this.isVisible=!1}setTooltip(e,t,r){const i=this.el;if("string"==typeof e)i.innerText=e;else{if(!e)return this.isVisible=!1,void(i.style.display="none");"text"in e&&(i.innerText=e.text),"html"in e&&(i.innerHTML=e.html),"className"in e&&(i.className=e.className),Object.assign(i.style,e.style)}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(t,"px, ").concat(r,"px)")}remove(){this.el&&this.el.remove()}}function DW(n,e){if(!n)throw new Error(e)}const Wd={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},xW=Wd.global||Wd.self||Wd.window,Gxe="object"!=typeof process||"[object process]"!==String(process)||process.browser,TW="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Wxe}=(TW&&parseFloat(TW[1]),xW),VL="undefined"!=typeof Image,jL="undefined"!=typeof ImageBitmap,qxe=Boolean(Wxe),UL=!!Gxe||qxe;function AW(n){const e=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}function MW(n){switch(AW(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}const Xxe=/^data:image\/svg\+xml/,Qxe=/\.svg((\?|#).*)?$/;function HL(n){return n&&(Xxe.test(n)||Qxe.test(n))}function Zxe(n,e){if(HL(e)){let r=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return RW(n,e)}function RW(n,e){if(HL(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function OW(n,e,t){return zL.apply(this,arguments)}function zL(){return(zL=fr(function*(n,e,t){const r=Zxe(n,t),i=self.URL||self.webkitURL,s="string"!=typeof r&&i.createObjectURL(r);try{return yield Jxe(s||r,e)}finally{s&&i.revokeObjectURL(s)}})).apply(this,arguments)}function Jxe(n,e){return $L.apply(this,arguments)}function $L(){return($L=fr(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((r,i)=>{try{t.onload=()=>r(t),t.onerror=s=>i(new Error(`Could not load image ${n}: ${s}`))}catch(s){i(s)}})})).apply(this,arguments)}const eTe={};let NW=!0;function tTe(n,e,t){return GL.apply(this,arguments)}function GL(){return(GL=fr(function*(n,e,t){let r;r=HL(t)?yield OW(n,e,t):RW(n,t);const i=e&&e.imagebitmap;return yield nTe(r,i)})).apply(this,arguments)}function nTe(n){return WL.apply(this,arguments)}function WL(){return(WL=fr(function*(n,e=null){if((rTe(e)||!NW)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),NW=!1}return yield createImageBitmap(n)})).apply(this,arguments)}function rTe(n){for(const e in n||eTe)return!1;return!0}const qd=!1,vE=!0;function qL(n){const e=wE(n);return function(n){const e=wE(n);return e.byteLength>=24&&2303741511===e.getUint32(0,qd)?{mimeType:"image/png",width:e.getUint32(16,qd),height:e.getUint32(20,qd)}:null}(e)||function(n){const e=wE(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,qd)&&255===e.getUint8(2)))return null;const{tableMarkers:r,sofMarkers:i}=function(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,qd);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,qd),width:e.getUint16(s+7,qd)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,qd)}return null}(e)||function(n){const e=wE(n);return e.byteLength>=10&&1195984440===e.getUint32(0,qd)?{mimeType:"image/gif",width:e.getUint16(6,vE),height:e.getUint16(8,vE)}:null}(e)||function(n){const e=wE(n);return e.byteLength>=14&&16973===e.getUint16(0,qd)&&e.getUint32(2,vE)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,vE),height:e.getUint32(22,vE)}:null}(e)}function wE(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function lTe(n,e){const{mimeType:t}=qL(n)||{},{_parseImageNode:r}=xW;return DW(r),r(n,t,e)}function YL(){return(YL=fr(function*(n,e,t){const i=((e=e||{}).image||{}).type||"auto",{url:s}=t||{};let a;switch(dTe(i)){case"imagebitmap":a=yield tTe(n,e,s);break;case"image":a=yield OW(n,e,s);break;case"data":a=yield lTe(n,e);break;default:DW(!1)}return"data"===i&&(a=MW(a)),a})).apply(this,arguments)}function dTe(n){switch(n){case"auto":case"data":return function(){if(jL)return"imagebitmap";if(VL)return"image";if(UL)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return jL||VL||UL;case"imagebitmap":return jL;case"image":return VL;case"data":return UL;default:throw new Error(`@loaders.gl/images: image ${n} not supported in this environment`)}}(n),n}}const PW={id:"image",module:"images",name:"Images",version:"3.0.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,e,t){return YL.apply(this,arguments)},tests:[n=>Boolean(qL(new DataView(n)))],options:{image:{type:"auto",decode:!0}}},fTe={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},EE="8.5.8",y1=Yi.CO.deck&&Yi.CO.deck.VERSION;if(y1&&y1!==EE)throw new Error("deck.gl - multiple versions detected: ".concat(y1," vs ").concat(EE));y1||(ti.log(1,"deck.gl ".concat(EE))(),Yi.CO.deck=Object.assign(Yi.CO.deck||{},{VERSION:EE,version:EE,log:ti,_registerLoggers:function(n){vk=n}}),iW([fTe,[PW,{imagebitmap:{premultiplyAlpha:"none"}}]]));const pTe=Yi.CO.deck;class b1 extends Wh{static isSupported(e,t=[]){const r=Ir(e),i=q$(e,"TIMER_QUERY");let s=r||i;for(const o of t)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:on(!1)}return s}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):t++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return b1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const FW=(0,Yi.jU)()&&"undefined"!=typeof document;let STe=0;class DTe{constructor(e={}){const{onCreateContext:t=(_=>T$(_)),onAddHTML:r=null,onInitialize:i=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=tm.get("animation-loop-"+STe++)}=e;let{useDevicePixels:b=!0}=e;"useDevicePixelRatio"in e&&(mn.deprecated("useDevicePixelRatio","useDevicePixels")(),b=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:b}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return on("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=b1.isSupported(this.gl,["timers"])?new b1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),!1!==r&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return fr(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const r=document.getElementById(e);return r?Number(r.value):t}setViewParameters(){return mn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=FW?new Promise((e,t)=>{FW&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?JF(this.props.gl,e):this.onCreateContext(e),!RT(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){Gh(n,XF)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const r=this.props.onAddHTML(t);r&&(t.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&t>0&&(r=e/t),{width:e,height:t,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,e={}){if(n.canvas)return void function(n,e,t){let r="width"in t?t.width:n.canvas.clientWidth,i="height"in t?t.height:n.canvas.clientHeight;(!r||!i)&&(mn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=n.canvas.width||1,i=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),c=Math.floor(i*o);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(mn.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/r,n.drawingBufferHeight/i),n.canvas.width=Math.floor(r*o),n.canvas.height=Math.floor(i*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}(n,function(n){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels),e);const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new wo(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var xTe=tt(524),v1=tt.n(xTe);const TTe={mousedown:1,mousemove:2,mouseup:4};(function(n){const e=n.prototype.handler;n.prototype.handler=function(r){const i=this.store;r.button>0&&"pointerdown"===r.type&&(function(n,e){for(let t=0;t<n.length;t++)if(n[t].pointerId===r.pointerId)return!0;return!1}(i)||i.push(r)),e.call(this,r)}})(v1().PointerEventInput),function(n){n.prototype.handler=function(t){let r=TTe[t.type];1&r&&t.button>=0&&(this.pressed=!0),2&r&&0===t.which&&(r=4),this.pressed&&(4&r&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(v1().MouseInput);const RTe=v1().Manager,Yd=v1(),OTe=Yd?[[Yd.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Yd.Rotate,{enable:!1}],[Yd.Pinch,{enable:!1}],[Yd.Swipe,{enable:!1}],[Yd.Pan,{threshold:0,enable:!1}],[Yd.Press,{enable:!1}],[Yd.Tap,{event:"doubletap",taps:2,enable:!1}],[Yd.Tap,{event:"anytap",enable:!1}],[Yd.Tap,{enable:!1}]]:null,BW={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},NTe={doubletap:["tap"]},PTe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},XL={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},FTe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},VW={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},kTe="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",zy="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let jW=!1;try{const n={get passive(){return jW=!0,!0}};zy.addEventListener("test",n,n),zy.removeEventListener("test",n,n)}catch(n){}const LTe=-1!==kTe.indexOf("firefox"),{WHEEL_EVENTS:BTe}=XL,HW=4.000244140625;class UTe{constructor(e,t,r={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.events=BTe.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,!!jW&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;zy.WheelEvent&&(LTe&&e.deltaMode===zy.WheelEvent.DOM_DELTA_PIXEL&&(t/=zy.devicePixelRatio),e.deltaMode===zy.WheelEvent.DOM_DELTA_LINE&&(t*=40));const r={x:e.clientX,y:e.clientY};0!==t&&t%HW==0&&(t=Math.floor(t/HW)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,r)}_onWheel(e,t,r){this.callback({type:"wheel",center:r,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:HTe}=XL,zW="pointermove",$W="pointerover",GW="pointerout",WW="pointerleave";class zTe{constructor(e,t,r={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=HTe.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===zW&&(this.enableMoveEvent=t),e===$W&&(this.enableOverEvent=t),e===GW&&(this.enableOutEvent=t),e===WW&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:$W,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:GW,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:WW,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:zW,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:$Te}=XL,qW="keydown";class GTe{constructor(e,t,r={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=$Te.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=r.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===qW&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:qW,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}const KW="contextmenu";class WTe{constructor(e,t,r={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===KW&&(this.options.enable=t)}handleEvent(e){!this.options.enable||this.callback({type:KW,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const qTe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},XW={srcElement:"root",priority:0};class s1e{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;r&&("object"!=typeof r||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},XW,r):XW;let c=a.get(r.srcElement);c||(c=[],a.set(r.srcElement,c));const l={type:e,handler:t,srcElement:r.srcElement,priority:r.priority};i&&(l.once=!0),s&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;let u=c.length-1;for(;u>=0&&!(c[u].priority>=l.priority);)u--;c.splice(u+1,0,l)}remove(e,t){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===t){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let r=e.srcEvent.target;for(;r&&r!==t.rootElement;){if(this._emit(t,r),t.handled)return;r=r.parentNode}this._emit(t,"root")}_emit(e,t){const r=this.handlersByElement.get(t);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let c=0;c<r.length;c++){const{type:l,handler:u,once:h}=r[c];if(u(Object.assign({},e,{type:l,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(r[c]),i)break}for(let c=0;c<a.length;c++){const{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(n){const e=qTe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:r,which:i}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===i,o=2===i,a=3===i):2===e?(s=Boolean(1&t),o=Boolean(4&t),a=Boolean(2&t)):1===e&&(s=0===r,o=1===r,a=2===r),{leftButton:s,middleButton:o,rightButton:a}}(e),function(n,e){const{srcEvent:t}=n;if(!n.center&&!Number.isFinite(t.clientX))return null;const r=n.center||{x:t.clientX,y:t.clientY},i=e.getBoundingClientRect();return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(r.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}(e,t),{handled:!1,rootElement:t})}}const o1e={events:null,recognizers:null,recognizerOptions:{},Manager:RTe,touchAction:"none",tabIndex:0};class a1e{constructor(e=null,t={}){this.options=Object.assign({},o1e,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:r}=t;r&&this.on(r)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||OTe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(BW).forEach(i=>{const s=this.manager.get(i);s&&BW[i].forEach(o=>{s.recognizeWith(o)})});for(const i in t.recognizerOptions){const s=this.manager.get(i);if(s){const o=t.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new UTe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new zTe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new GTe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new WTe(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,r){this._addEventHandler(e,t,r,!1)}once(e,t,r){this._addEventHandler(e,t,r,!0)}watch(e,t,r){this._addEventHandler(e,t,r,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==t){i.set({enable:t});const s=NTe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);t?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,r,i,s){if("string"!=typeof e){r=t;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,c=VW[e]||e;let l=a.get(c);l||(l=new s1e(this),a.set(c,l),l.recognizerName=FTe[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,t,r,i,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,s=r.get(VW[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of r.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:t}=e,r=PTe[t.type];r&&this.manager.emit(r,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function cm(){}const QW={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:cm,onResize:cm,onViewStateChange:cm,onInteractionStateChange:cm,onBeforeRender:cm,onAfterRender:cm,onLoad:cm,onError:(n,e)=>ti.error(n)(),_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",debug:!1,drawPickingColors:!1};class E1{constructor(e){e=ht(ht({},QW),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&ti.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,Yi.qs)()&&ti.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new ek({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Zw.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ti.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ti.removed("onLayerClick","onClick")(),e.initialViewState&&!yE(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||r||i||s||o,t}redraw(e){if(!this.layerManager)return;const t=e||this.needsRedraw({clearRedrawFlags:!0});!t||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,r){const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(t).timeStart();const s=this.deckPicker[e](ht({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport},r));return i.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),Lu(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;let{width:t,height:r}=e;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(r||0===r)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.position="absolute",this.canvas.style.height=r)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:t}=this;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const t=e.clientWidth||e.width,r=e.clientHeight||e.height;return(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,!0)}_createAnimationLoop(e){const{width:t,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u,autoResizeDrawingBuffer:h}=e;return new DTe({width:t,height:r,useDevicePixels:u,autoResizeDrawingBuffer:h,autoResizeViewport:!1,gl:i,onCreateContext:f=>T$(Kn(ht(ht({},s),f),{canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()})),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Ixe({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const r=e.offsetCenter;if(!r)return;t.x=r.x,t.y=r.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e,t.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=t.length>0;let i=r,s=!1;for(const o of t)i=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip){const o=this.props.getTooltip(i);this.tooltip.setTooltip(o,i.x,i.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,JF(e,{enable:!0,copyState:!0})),this.tooltip=new zxe(this.canvas),Gh(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new bW;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new a1e(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in d$)this.eventManager.on(i,this._onEvent);this.viewManager=new xxe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new Dxe(e,{deck:this,stats:this.stats,viewport:r,timeline:t}),this.effectManager=new Oxe,this.deckRenderer=new Fxe(e),this.deckPicker=new Uxe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:r}=this.layerManager.context;Gh(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers(ht({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ti.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=Kn(ht({},this.viewState),{[e.viewId]:t}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const t=d$[e.type],r=e.offsetCenter;if(!t||!r)return;const i=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:i,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[t.handler]||o.props[t.handler]),c=this.props[t.handler];let l=!1;a&&(l=a.call(o,s,e)),!l&&c&&c(s,e)}_onPointerDown(e){const t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const r=tm.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}E1.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(mW)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},E1.defaultProps=QW,E1.VERSION=pTe.VERSION;const ZW={name:"project32",dependencies:[kL],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},JW="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",u1e={lightSources:{}};function JL({color:n=[0,0,0],intensity:e=1}={}){return n.map(t=>t*e/255)}const e2={name:"lights",vs:JW,fs:JW,getUniforms:function e9(n=u1e){if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:r}=n.lightSources||{};return e||t&&t.length>0||r&&r.length>0?Object.assign({},function({ambientLight:n,pointLights:e=[],directionalLights:t=[]}){const r={};return r["lighting_uAmbientLight.color"]=n?JL(n):[0,0,0],e.forEach((i,s)=>{r[`lighting_uPointLight[${s}].color`]=JL(i),r[`lighting_uPointLight[${s}].position`]=i.position,r[`lighting_uPointLight[${s}].attenuation`]=i.attenuation||[1,0,0]}),r.lighting_uPointLightCount=e.length,t.forEach((i,s)=>{r[`lighting_uDirectionalLight[${s}].color`]=JL(i),r[`lighting_uDirectionalLight[${s}].direction`]=i.direction}),r.lighting_uDirectionalLightCount=t.length,r}({ambientLight:e,pointLights:t,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return e9({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},h1e={};const p1e={name:"phong-lighting",dependencies:[e2],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=h1e){if(!("material"in n))return{};const{material:e}=n;return e?function(n){const{ambient:e=.35,diffuse:t=.6,shininess:r=32,specularColor:i=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},m1e={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},r9=ht({inject:{"vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  // for picking depth values\n  picking_setPickingAttribute(geometry.position.z);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=m1e){const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,r=>r/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=Boolean(n.pickingActive),e.picking_uAttribute=Boolean(n.pickingAttribute)),e}}),i9={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class C1{static get DRAW_MODE(){return i9}constructor(e={}){const{id:t=jd("geometry"),drawMode:r=i9.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|r,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?ht({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,on(ArrayBuffer.isView(i.value),`${this._print(r)}: must be typed array or object with value as typed array`),("POSITION"===r||"positions"===r)&&!i.size&&(i.size=3),"indices"===r?(on(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(r=Math.min(r,o.length/a))}return on(Number.isFinite(r)),r}}const t2=Math.PI/180,S1=new Float32Array(16),s9=new Float32Array(12);function o9(n,e,t){const r=e[0]*t2,i=e[1]*t2,s=e[2]*t2,o=Math.sin(s),a=Math.sin(r),c=Math.sin(i),l=Math.cos(s),u=Math.cos(r),h=Math.cos(i),f=t[0],g=t[1],m=t[2];n[0]=f*h*u,n[1]=f*c*u,n[2]=f*-a,n[3]=g*(-c*l+h*a*o),n[4]=g*(h*l+c*a*o),n[5]=g*u*o,n[6]=m*(c*o+h*a*l),n[7]=m*(-h*o+c*a*l),n[8]=m*u*l}function a9(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const c9={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:r,getOrientation:i,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,u=Array.isArray(s),h=Array.isArray(i),f=Array.isArray(o),g=l||!c&&Boolean(a(r[0]));n.constant=g?l:h&&u&&f;const m=n.value;if(n.constant){let b;g?(S1.set(a),b=a9(S1)):(b=s9,o9(b,i,s),b.set(o,9)),n.value=new Float32Array(b)}else{let b=e*n.size;const{iterable:_,objectInfo:R}=aG(r,e,t);for(const M of _){let ee;R.index++,g?(S1.set(l?a:a(M,R)),ee=a9(S1)):(ee=s9,o9(ee,h?i:i(M,R),u?s:s(M,R)),ee.set(f?o:o(M,R),9)),m[b++]=ee[0],m[b++]=ee[1],m[b++]=ee[2],m[b++]=ee[3],m[b++]=ee[4],m[b++]=ee[5],m[b++]=ee[6],m[b++]=ee[7],m[b++]=ee[8],m[b++]=ee[9],m[b++]=ee[10],m[b++]=ee[11]}}}};function l9(n,e){return e===Xr.CARTESIAN||e===Xr.METER_OFFSETS||e===Xr.DEFAULT&&!n.isGeospatial}function u9(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),ti.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function v1e(n,e){if(n.attributes)return u9(n.attributes,e),n instanceof C1?n:new C1(n);if(n.positions||n.POSITION)return u9(n,e),new C1({attributes:n});throw Error("Invalid mesh")}const w1e={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};let E1e=(()=>{class n extends OL{getShaders(){const t=!Ir(this.context.gl),r={};return uk(this.context.gl,"GLSL_DERIVATIVES")&&(r.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[ZW,p1e,r9],transpileToGLSL100:t,defines:r})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:c9}),this.setState({emptyTexture:new $c(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState({props:t,oldProps:r,changeFlags:i}){if(super.updateState({props:t,oldProps:r,changeFlags:i}),t.mesh!==r.mesh||i.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==r.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(){super.finalizeState(),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;const{viewport:r}=this.context,{sizeScale:i,coordinateSystem:s,_instanced:o}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:i,composeModelMatrix:!o||l9(r,s),flatShading:!this.state.hasNormals}).draw()}getModel(t){const r=new qT(this.context.gl,Kn(ht({},this.getShaders()),{id:this.props.id,geometry:v1e(t,this.props._useMeshColors),isInstanced:!0})),{texture:i}=this.props,{emptyTexture:s}=this.state;return r.setUniforms({sampler:i||s,hasTexture:Boolean(i)}),r}setTexture(t){const{emptyTexture:r,model:i}=this.state;null==i||i.setUniforms({sampler:t||r,hasTexture:Boolean(t)})}}return n.layerName="SimpleMeshLayer",n.defaultProps=w1e,n})();const d9={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[e2]};class $y{constructor(e={}){const{id:t}=e;this.id=t||jd(this.constructor.name),this.display=!0,this.position=new _a,this.rotation=new _a,this.scale=new _a(1,1,1),this.matrix=new Zn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return on(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return on(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return on(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e,t=!0){t?this.matrix.copy(e):this.matrix=e}setMatrixComponents({position:e,rotation:t,scale:r,update:i=!0}){return e&&this.setPosition(e),t&&this.setRotation(t),r&&this.setScale(r),i&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(r),this}update(e={}){const{position:t,rotation:r,scale:i}=e;return t&&this.setPosition(t),r&&this.setRotation(r),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(e,t){on(e),t=t||this.matrix;const r=new Zn(e).multiplyRight(t),i=r.invert(),s=i.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class CE extends $y{constructor(e={}){e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;mn.assert(t.every(r=>r instanceof $y),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(...e){for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(e){const t=this.children,r=t.indexOf(e);return r>-1&&t.splice(r,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e,{worldMatrix:t=new Zn}={}){const r=new Zn(t).multiplyRight(this.matrix);for(const i of this.children)i instanceof CE?i.traverse(e,{worldMatrix:r}):e(i,{worldMatrix:r})}}function h9(){var n=new yc(4);return yc!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function f9(n,e,t){t*=.5;var r=Math.sin(t);return n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=Math.cos(t),n}function p9(n,e,t){var r=e[0],i=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return n[0]=r*u+o*a+i*l-s*c,n[1]=i*u+o*c+s*a-r*l,n[2]=s*u+o*l+r*c-i*a,n[3]=o*u-r*a-i*c-s*l,n}var m9=o7,L1e=function(){var n=Q$(),e=Z$(1,0,0),t=Z$(0,1,0);return function(r,i,s){var o=J$(i,s);return o<-.999999?(kT(n,e,i),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&kT(n,t,i),function(n,e){var t=e[0],r=e[1],i=e[2],s=t*t+r*r+i*i;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),f9(r,n,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(kT(n,i,s),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=1+o,function(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=t*t+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=r*o,n[2]=i*o,n[3]=s*o,n}(r,r))}}();h9(),h9(),function(){var n=new yc(9);yc!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const B1e=[0,0,0,1],j1e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U1e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function b9(n){if(!n._animation){const e=U1e[n.componentType],t=j1e[n.type],r=t*n.count,{buffer:i,byteOffset:s}=n.bufferView.data,o=new e(i,s+(n.byteOffset||0),r);if(1===t)n._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=t)a.push(Array.from(o.slice(c,c+t)));n._animation=a}}return n._animation}const H1e=new Zn,n2=new class extends hk{constructor(e=0,t=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,r,i){return this[0]=e,this[1]=t,this[2]=r,this[3]=i,this.check()}fromMatrix3(e){return function(n,e){var r,t=e[0]+e[4]+e[8];if(t>0)r=Math.sqrt(t+1),n[3]=.5*r,n[0]=(e[5]-e[7])*(r=.5/r),n[1]=(e[6]-e[2])*r,n[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*s+s]-e[3*o+o]+1),n[i]=.5*r,n[3]=(e[3*s+o]-e[3*o+s])*(r=.5/r),n[s]=(e[3*s+i]+e[3*i+s])*r,n[o]=(e[3*o+i]+e[3*i+o])*r}}(this,e),this.check()}identity(){return function(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return f9(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Zo(e)}get y(){return this[1]}set y(e){this[1]=Zo(e)}get z(){return this[2]}set z(e){this[2]=Zo(e)}get w(){return this[3]}set w(e){this[3]=Zo(e)}len(){return function(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function(n){var e=n[0],t=n[1],r=n[2],i=n[3];return e*e+t*t+r*r+i*i}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return L1e(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function(n,e){var t=e[0],r=e[1],i=e[2];n[0]=t,n[1]=r,n[2]=i,n[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i))}(this,this),this.check()}conjugate(){return function(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=t*t+r*r+i*i+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-r*a,n[2]=-i*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,r){return function(n,e,t,r){var i=e[0],s=e[1],o=e[2],a=e[3];n[0]=i+r*(t[0]-i),n[1]=s+r*(t[1]-s),n[2]=o+r*(t[2]-o),n[3]=a+r*(t[3]-a)}(this,e,t,r),this.check()}multiplyRight(e,t){return Yh(!t),p9(this,this,e),this.check()}multiplyLeft(e,t){return Yh(!t),p9(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(n,e,t){t*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=r*c+o*a,n[1]=i*c+s*a,n[2]=s*c-i*a,n[3]=o*c-r*a}(this,this,e),this.check()}rotateY(e){return function(n,e,t){t*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=r*c-s*a,n[1]=i*c+o*a,n[2]=s*c+r*a,n[3]=o*c-i*a}(this,this,e),this.check()}rotateZ(e){return function(n,e,t){t*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=r*c+i*a,n[1]=i*c-r*a,n[2]=s*c+o*a,n[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return m9(this,this,e),this.check()}slerp(e,t,r){switch(arguments.length){case 1:({start:e=B1e,target:t,ratio:r}=arguments[0]);break;case 2:[t,r]=arguments,e=this}return function(n,e,t,r){var f,g,m,b,_,i=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],h=t[3];(g=i*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>Li?(f=Math.acos(g),m=Math.sin(f),b=Math.sin((1-r)*f)/m,_=Math.sin(r*f)/m):(b=1-r,_=r),n[0]=b*i+_*c,n[1]=b*s+_*l,n[2]=b*o+_*u,n[3]=b*a+_*h}(this,e,t,r),this.check()}transformVector4(e,t=e){return function(n,e,t){var r=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=l*r+a*s-c*i,h=l*i+c*r-o*s,f=l*s+o*i-a*r,g=-o*r-a*i-c*s;n[0]=u*l+g*-o+h*-c-f*-a,n[1]=h*l+g*-a+f*-o-u*-c,n[2]=f*l+g*-c+u*-a-h*-o,n[3]=e[3]}(t,e,this),FT(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}};class Y1e{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const r=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:i,target:s,path:o})=>{(function(n,{input:e,interpolation:t,output:r},i,s){const a=n%e[e.length-1],c=e.findIndex(f=>f>=a),l=Math.max(0,c-1);if(!Array.isArray(i[s]))switch(s){case"translation":i[s]=[0,0,0];break;case"rotation":i[s]=[0,0,0,1];break;case"scale":i[s]=[1,1,1];break;default:mn.warn(`Bad animation path ${s}`)()}on(i[s].length===r[l].length);const u=e[l],h=e[c];switch(t){case"STEP":!function(n,e,t){for(let r=0;r<t.length;r++)n[e][r]=t[r]}(i,s,r[l]);break;case"LINEAR":h>u&&function(n,e,t,r,i){if("rotation"===e){n2.slerp({start:t,target:r,ratio:i});for(let s=0;s<n2.length;s++)n[e][s]=n2[s]}else for(let s=0;s<t.length;s++)n[e][s]=i*r[s]+(1-i)*t[s]}(i,s,r[l],r[c],(a-u)/(h-u));break;case"CUBICSPLINE":h>u&&function(n,e,{p0:t,outTangent0:r,inTangent1:i,p1:s,tDiff:o,ratio:a}){for(let c=0;c<n[e].length;c++){const l=r[c]*o,u=i[c]*o;n[e][c]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*t[c]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*l+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[c]+(Math.pow(a,3)-Math.pow(a,2))*u}}(i,s,{p0:r[3*l+1],outTangent0:r[3*l+2],inTangent1:r[3*c+0],p1:r[3*c+1],tDiff:h-u,ratio:(a-u)/(h-u)});break;default:mn.warn(`Interpolation ${t} not supported`)()}})(r,i,s,o),function(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=H1e.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class K1e{constructor(e){this.animations=e.animations.map((t,r)=>{const i=t.name||`Animation-${r}`,s=t.samplers.map(({input:a,interpolation:c="LINEAR",output:l})=>({input:b9(e.accessors[a]),interpolation:c,output:b9(e.accessors[l])})),o=t.channels.map(({sampler:a,target:c})=>({sampler:s[a],target:e.nodes[c.node],path:c.path}));return new Y1e({name:i,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class X1e extends $y{constructor(e,t={}){super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof qT?(this.model=e,this._setModelNodeProps(t)):this.model=new qT(e,t),this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(...e){return this.model.draw(...e)}setUniforms(...e){return this.model.setUniforms(...e),this}setAttributes(...e){return this.model.setAttributes(...e),this}updateModuleSettings(...e){return this.model.updateModuleSettings(...e),this}_setModelNodeProps(e){this.model.setProps(e)}}class Q1e{constructor(e,{attributes:t,material:r,pbrDebug:i,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},uk(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(t.NORMAL,"HAS_NORMALS"),this.defineIfPresent(t.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(t.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t,r=null){const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new $c(this.gl,ht({id:e.name||e.id,parameters:ht(ht({},e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[t]=c,this.defineIfPresent(r,r),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:r=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,r]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(mn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function v9(n,e){return Ir(n)?`#version 300 es\n${e}`:e}const tAe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nAe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class rAe{constructor(e,t={}){this.gl=e,this.options=Object.assign({},nAe,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(r=>this.createScene(r))}createAnimator(){return Array.isArray(this.gltf.animations)?new K1e(this.gltf):null}createScene(e){const r=(e.nodes||[]).map(s=>this.createNode(s));return new CE({id:e.name||e.id,children:r})}createNode(e){if(!e._node){const r=(e.children||[]).map(s=>this.createNode(s));e.mesh&&r.push(this.createMesh(e.mesh));const i=new CE({id:e.name||e.id,children:r});if(e.matrix)i.setMatrix(e.matrix);else{if(i.matrix.identity(),e.translation&&i.matrix.translate(e.translation),e.rotation){const s=(new Zn).fromQuaternion(e.rotation);i.matrix.multiplyRight(s)}e.scale&&i.matrix.scale(e.scale)}e._node=i}return e._node}createMesh(e){if(!e._mesh){const r=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),i=new CE({id:e.name||e.id,children:r});e._mesh=i}return e._mesh}getVertexCount(e){mn.warn("getVertexCount() not found")()}createPrimitive(e,t,r){return function(n,e){const{id:t,drawMode:r,vertexCount:i,attributes:s,modelOptions:o}=e,a=new Q1e(n,e);mn.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(u=>u.buffer));const l=new X1e(n,Object.assign({id:t,drawMode:r,vertexCount:i,modules:[d9],defines:a.defines,parameters:a.parameters,vs:v9(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:v9(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c},o));return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||`${r.name||r.id}-primitive-${t}`,drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=this.createAccessor(e[i],this.createBuffer(e[i],this.gl.ARRAY_BUFFER))}),t&&(r.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),mn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:r})(),r}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:r}=e;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[t]||(r.lumaBuffers[t]=new Di(this.gl,{id:`from-${r.id}`,data:r.data||e.value,target:t})),r.lumaBuffers[t]}createAccessor(e,t){return new _c({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:tAe[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function w9(n,e,t){if(n.byteLength<=e+t)return"";const r=new DataView(n);let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}function Yc(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function E9(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const r=e.baseUri||e.uri;if(!r)throw new Error(`'baseUri' must be provided to resolve relative url ${n}`);return r.substr(0,r.lastIndexOf("/")+1)+n}function C9(n,e,t){const r=n.bufferViews[t];Yc(r);const s=e[r.buffer];return Yc(s),new Uint8Array(s.arrayBuffer,(r.byteOffset||0)+s.byteOffset,r.byteLength)}const S9={name:"Draco",id:"draco",module:"draco",version:"3.0.12",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class Gy{constructor(e,t){Jn(this,"fields",void 0),Jn(this,"metadata",void 0),function(n,e){if(!n)throw new Error("loader assertion failed.")}(Array.isArray(e)),function(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const i of e)t[i]=!0;const r=this.fields.filter(i=>t[i.name]);return new Gy(r,this.metadata)}selectAt(...e){const t=e.map(r=>this.fields[r]).filter(Boolean);return new Gy(t,this.metadata)}assign(e){let t,r=this.metadata;if(e instanceof Gy){const o=e;t=o.fields,r=D9(D9(new Map,this.metadata),o.metadata)}else t=e;const i=Object.create(null);for(const o of this.fields)i[o.name]=o;for(const o of t)i[o.name]=o;const s=Object.values(i);return new Gy(s,r)}}function D9(n,e){return new Map([...n||new Map,...e||new Map])}let rs,x9,T9,A9,M9,I9,R9,O9;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(rs||(rs={}));class r2{static isNull(e){return e&&e.typeId===rs.Null}static isInt(e){return e&&e.typeId===rs.Int}static isFloat(e){return e&&e.typeId===rs.Float}static isBinary(e){return e&&e.typeId===rs.Binary}static isUtf8(e){return e&&e.typeId===rs.Utf8}static isBool(e){return e&&e.typeId===rs.Bool}static isDecimal(e){return e&&e.typeId===rs.Decimal}static isDate(e){return e&&e.typeId===rs.Date}static isTime(e){return e&&e.typeId===rs.Time}static isTimestamp(e){return e&&e.typeId===rs.Timestamp}static isInterval(e){return e&&e.typeId===rs.Interval}static isList(e){return e&&e.typeId===rs.List}static isStruct(e){return e&&e.typeId===rs.Struct}static isUnion(e){return e&&e.typeId===rs.Union}static isFixedSizeBinary(e){return e&&e.typeId===rs.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===rs.FixedSizeList}static isMap(e){return e&&e.typeId===rs.Map}static isDictionary(e){return e&&e.typeId===rs.Dictionary}get typeId(){return rs.NONE}compareTo(e){return this===e}}Symbol,Symbol,x9=Symbol.toStringTag;class Wy extends r2{constructor(e,t){super(),Jn(this,"isSigned",void 0),Jn(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return rs.Int}get[x9](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class fAe extends Wy{constructor(){super(!0,8)}}class pAe extends Wy{constructor(){super(!0,16)}}class gAe extends Wy{constructor(){super(!0,32)}}class mAe extends Wy{constructor(){super(!1,8)}}class _Ae extends Wy{constructor(){super(!1,16)}}class yAe extends Wy{constructor(){super(!1,32)}}T9=Symbol.toStringTag;class N9 extends r2{constructor(e){super(),Jn(this,"precision",void 0),this.precision=e}get typeId(){return rs.Float}get[T9](){return"Float"}toString(){return`Float${this.precision}`}}class bAe extends N9{constructor(){super(32)}}class vAe extends N9{constructor(){super(64)}}Symbol,Symbol,A9=Symbol.toStringTag,M9=Symbol.toStringTag,I9=Symbol.toStringTag,R9=Symbol.toStringTag,O9=Symbol.toStringTag;class wAe extends r2{constructor(e,t){super(),Jn(this,"listSize",void 0),Jn(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return rs.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[O9](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}class x1{constructor(e,t,r=!1,i=new Map){Jn(this,"name",void 0),Jn(this,"type",void 0),Jn(this,"nullable",void 0),Jn(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=r,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new x1(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?`, metadata: ${this.metadata}`:""}`}}function P9(n,e,t){const r=t?F9(t.metadata):void 0,i=function(n){switch(n.constructor){case Int8Array:return new fAe;case Uint8Array:return new mAe;case Int16Array:return new pAe;case Uint16Array:return new _Ae;case Int32Array:return new gAe;case Uint32Array:return new yAe;case Float32Array:return new bAe;case Float64Array:return new vAe;default:throw new Error("array type not supported")}}(e.value);return new x1(n,new wAe(e.size,new x1("value",i)),!1,r)}function F9(n){const e=new Map;for(const t in n)e.set(`${t}.string`,JSON.stringify(n[t]));return e}const k9={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},DAe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class TAe{constructor(e){Jn(this,"draco",void 0),Jn(this,"decoder",void 0),Jn(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const i=this.decoder.GetEncodedGeometryType(r),s=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(i){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(r,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(r,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f=`DRACO decompression failed: ${o.error_msg()}`;throw new Error(f)}const a=this._getDracoLoaderData(s,i,t),c=this._getMeshData(s,a,t),l=function(n){let e=1/0,t=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const u=a[l],h=a[l+1],f=a[l+2];e=u<e?u:e,t=h<t?h:t,r=f<r?f:r,i=u>i?u:i,s=h>s?h:s,o=f>o?f:o}return[[e,t,r],[i,s,o]]}(c.attributes),u=function(n,e,t){const r=F9(e.metadata),i=[],s=function(n){const e={};for(const t in n){const r=n[t];e[r.name||"undefined"]=r}return e}(e.attributes);for(const o in n){const c=P9(o,n[o],s[o]);i.push(c)}if(t){const o=P9("indices",t);i.push(o)}return new Gy(i,r)}(c.attributes,a,c.indices);return Kn(ht({loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l}},c),{schema:u})}finally{this.draco.destroy(r),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,r){const i=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,r);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:i,attributes:s}}_getDracoAttributes(e,t){const r={};for(let i=0;i<e.num_attributes();i++){const s=this.decoder.GetAttribute(e,i),o=this._getAttributeMetadata(e,i);r[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:i,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(r[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,t);c&&(r[s.unique_id()].octahedron_transform=c)}return r}_getMeshData(e,t,r){const i=this._getMeshAttributes(t,e,r);if(!i.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:i}}_getMeshAttributes(e,t,r){const i={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,r);s.name=o;const{value:a,size:c}=this._getAttributeValues(t,s);i[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return i}_getTriangleListIndices(e){const r=3*e.num_faces(),i=4*r,s=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(e,i,s),new Uint32Array(this.draco.HEAPF32.buffer,s,r).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(n){const e=n.size(),t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=n.GetValue(r);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const r=DAe[t.data_type],i=t.num_components,o=e.num_points()*i,a=o*r.BYTES_PER_ELEMENT,c=function(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,r);let l;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,u),l=new r(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:l,size:i}}_deduceAttributeName(e,t){const r=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===r)return o;const i=e.attribute_type;for(const o in k9)if(this.draco[o]===i)return k9[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:`CUSTOM_ATTRIBUTE_${r}`}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const r=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},r=this.metadataQuerier.NumEntries(e);for(let i=0;i<r;i++){const s=this.metadataQuerier.GetEntryName(e,i);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,r);const i=function(n){const e=n.size(),t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=n.GetValue(r);return t}(r);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:i}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:r=[]}=e,i=[...t,...r];for(const s of i)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:r=[]}=t,i=e.attribute_type();if(r.map(o=>this.decoder[o]).includes(i)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:r=[]}=t,i=e.attribute_type();if(r.map(o=>this.decoder[o]).includes(i)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}var T1=tt(125);const c2={};function l2(n){return u2.apply(this,arguments)}function u2(){return(u2=fr(function*(n,e=null,t={}){return e&&(n=OAe(n,e,t)),c2[n]=c2[n]||NAe(n),yield c2[n]})).apply(this,arguments)}function OAe(n,e,t){if(n.startsWith("http"))return n;const r=t.modules||{};return r[n]?r[n]:lL?t.CDN?(zd(t.CDN.startsWith("http")),`${t.CDN}/${e}@3.0.12/dist/libs/${n}`):uL?`../src/libs/${n}`:`modules/${e}/src/libs/${n}`:`modules/${e}/dist/libs/${n}`}function NAe(n){return d2.apply(this,arguments)}function d2(){return(d2=fr(function*(n){return n.endsWith("wasm")?yield(yield fetch(n)).arrayBuffer():lL?uL?importScripts(n):PAe(yield(yield fetch(n)).text(),n):T1.requireFromFile&&(yield T1.requireFromFile(n))})).apply(this,arguments)}function PAe(n,e){if(!lL)return T1.requireFromString&&T1.requireFromString(n,e);if(uL)return eval.call(DSe,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch(r){t.text=n}return document.body.appendChild(t),null}const FAe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.js",kAe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_wasm_wrapper.js",LAe="https://www.gstatic.com/draco/versioned/decoders/1.4.1/draco_decoder.wasm";let SE;function VAe(n){return h2.apply(this,arguments)}function h2(){return(h2=fr(function*(n){const e=n.modules||{};return SE=e.draco3d?SE||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):SE||jAe(n),yield SE})).apply(this,arguments)}function jAe(n){return p2.apply(this,arguments)}function p2(){return(p2=fr(function*(n){let e,t;switch(n.draco&&n.draco.decoderType){case"js":e=yield l2(FAe,"draco",n);break;case"wasm":default:[e,t]=yield Promise.all([yield l2(kAe,"draco",n),yield l2(LAe,"draco",n)])}return e=e||globalThis.DracoDecoderModule,yield UAe(e,t)})).apply(this,arguments)}function UAe(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(r=>{n(Kn(ht({},t),{onModuleLoaded:i=>r({draco:i})}))})}const m2=Kn(ht({},S9),{parse:function(n,e){return _2.apply(this,arguments)}});function _2(){return(_2=fr(function*(n,e){const{draco:t}=yield VAe(e),r=new TAe(t);try{return r.parseSync(n,null==e?void 0:e.draco)}finally{r.destroy()}})).apply(this,arguments)}function xE(n,e){return om(n>=0),om(e>0),n+(e-1)&~(e-1)}function $Ae(n,e,t){let r;return r=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(r,t),t+xE(r.byteLength,4)}const L9=["SCALAR","VEC2","VEC3","VEC4"],GAe=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],WAe=new Map(GAe),qAe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YAe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},KAe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function B9(n){return L9[n-1]||L9[0]}function V9(n){const e=WAe.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function j9(n,e){const t=KAe[n.componentType],r=qAe[n.type],s=n.count*r,o=n.count*r*YAe[n.componentType];return Yc(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const XAe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class Ap{constructor(e){Jn(this,"gltf",void 0),Jn(this,"sourceBuffers",void 0),Jn(this,"byteLength",void 0),this.gltf=e||{json:ht({},XAe),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(i=>i===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(r=>r===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const r=this.json[e]&&this.json[e][t];if(!r)throw new Error(`glTF file error: Could not find ${e}[${t}]`);return r}getTypedArrayForBufferView(e){e=this.getBufferView(e);const r=this.gltf.buffers[e.buffer];return Yc(r),new Uint8Array(r.arrayBuffer,(e.byteOffset||0)+r.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),i=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=j9(e,t);return new s(i,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),i=this.getBuffer(t.buffer).data;return new Uint8Array(i,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,r){return e.extensions=e.extensions||{},e.extensions[t]=r,this.registerUsedExtension(t),this}setObjectExtension(e,t,r){(e.extensions||{})[t]=r}removeObjectExtension(e,t){const r=e.extensions||{},i=r[t];return delete r[t],i}addExtension(e,t={}){return Yc(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Yc(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:r}=e;this.json.nodes=this.json.nodes||[];const i={mesh:t};return r&&(i.matrix=r),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:r,material:i,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(r){const c=this._addIndices(r);a.primitives[0].indices=c}return Number.isFinite(i)&&(a.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(e,t){const r=qL(e),i=t||(null==r?void 0:r.mimeType),o={bufferView:this.addBufferView(e),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Yc(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const r={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=xE(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}addAccessor(e,t){const r={bufferView:e,type:B9(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const r=this.addBufferView(e);let i={min:t.min,max:t.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:V9(e),count:Math.round(e.length/t.size),min:i.min,max:i.max};return this.addAccessor(r,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,r={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const r=this.byteLength,i=new ArrayBuffer(r),s=new Uint8Array(i);let o=0;for(const a of this.sourceBuffers||[])o=$Ae(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]}_removeStringFromArray(e,t){let r=!0;for(;r;){const i=e.indexOf(t);i>-1?e.splice(i,1):r=!1}}_addAttributes(e={}){const t={};for(const r in e){const i=e[r],s=this._getGltfAttributeName(r),o=this.addBinaryBuffer(i.value,i);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const r={min:null,max:null};if(e.length<t)return r;r.min=[],r.max=[];const i=e.subarray(0,t);for(const s of i)r.min.push(s),r.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)r.min[0+o]=Math.min(r.min[0+o],e[s+o]),r.max[0+o]=Math.max(r.max[0+o],e[s+o]);return r}}const U9="KHR_binary_glTF",TE="KHR_draco_mesh_compression",qy="KHR_lights_punctual",M1="KHR_materials_unlit",I1="KHR_techniques_webgl";function JAe(n){const e={};for(const t in n){const r=n[t];if("indices"!==t){const i=H9(r);e[t]=i}}return e}function H9(n){const{buffer:e,size:t,count:r}=function(n){let e=n,t=1,r=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),r=e.length/t),{buffer:e,size:t,count:r}}(n);return{value:e,size:t,byteOffset:0,count:r,type:B9(t),componentType:V9(e)}}function nMe(n,e,t){return y2.apply(this,arguments)}function y2(){return(y2=fr(function*(n,e,t){var r;if(null==e||null===(r=e.gltf)||void 0===r||!r.decompressMeshes)return;const i=new Ap(n),s=[];for(const o of aMe(i))i.getObjectExtension(o,TE)&&s.push(iMe(i,o,e,t));yield Promise.all(s),i.removeExtension(TE)})).apply(this,arguments)}function rMe(n,e={}){const t=new Ap(n);for(const r of t.json.meshes||[])sMe(r),t.addRequiredExtension(TE)}function iMe(n,e,t,r){return b2.apply(this,arguments)}function b2(){return(b2=fr(function*(n,e,t,r){const i=n.getObjectExtension(e,TE);if(!i)return;const s=n.getTypedArrayForBufferView(i.bufferView),o=eW(s.buffer,s.byteOffset),{parse:a}=r,c=ht({},t);delete c["3d-tiles"];const l=yield a(o,m2,c,r),u=JAe(l.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=n.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,l.indices&&(e.indices=H9(l.indices)),oMe(e)})).apply(this,arguments)}function sMe(n,e,t=4,r,i){var s;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=r.DracoWriter.encodeSync({attributes:n}),a=null==i||null===(s=i.parseSync)||void 0===s?void 0:s.call(i,{attributes:n}),c=r._addFauxAttributes(a.attributes),l=r.addBufferView(o);return{primitives:[{attributes:c,mode:t,extensions:{[TE]:{bufferView:l,attributes:c}}}]}}function oMe(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*aMe(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}function cMe(n){return v2.apply(this,arguments)}function v2(){return(v2=fr(function*(n){const e=new Ap(n),{json:t}=e;e.removeExtension(M1);for(const r of t.materials||[])r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,M1)})).apply(this,arguments)}function lMe(n){const e=new Ap(n),{json:t}=e;if(e.materials)for(const r of t.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,M1,{}),e.addExtension(M1))}function uMe(n){return w2.apply(this,arguments)}function w2(){return(w2=fr(function*(n){const e=new Ap(n),{json:t}=e,r=e.getExtension(qy);r&&(e.json.lights=r.lights,e.removeExtension(qy));for(const i of t.nodes||[]){const s=e.getObjectExtension(i,qy);s&&(i.light=s.light),e.removeObjectExtension(i,qy)}})).apply(this,arguments)}function dMe(n){return E2.apply(this,arguments)}function E2(){return(E2=fr(function*(n){const e=new Ap(n),{json:t}=e;if(t.lights){const r=e.addExtension(qy);Yc(!r.lights),r.lights=t.lights,delete t.lights}if(e.json.lights){for(const r of e.json.lights)e.addObjectExtension(r.node,qy,r);delete e.json.lights}})).apply(this,arguments)}function hMe(n){return C2.apply(this,arguments)}function C2(){return(C2=fr(function*(n){const e=new Ap(n),{json:t}=e,r=e.getExtension(I1);if(r){const i=pMe(r,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,I1);o&&(s.technique=Object.assign({},o,i[o.technique]),s.technique.values=gMe(s.technique,e)),e.removeObjectExtension(s,I1)}e.removeExtension(I1)}})).apply(this,arguments)}function fMe(n,e){return S2.apply(this,arguments)}function S2(){return(S2=fr(function*(n,e){})).apply(this,arguments)}function pMe(n,e){const{programs:t=[],shaders:r=[],techniques:i=[]}=n,s=new TextDecoder;return r.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=r[o.fragmentShader],o.vertexShader=r[o.vertexShader]}),i.forEach(o=>{o.program=t[o.program]}),i}function gMe(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(r=>{n.uniforms[r].value&&!(r in t)&&(t[r]=n.uniforms[r].value)}),Object.keys(t).forEach(r=>{"object"==typeof t[r]&&void 0!==t[r].index&&(t[r].texture=e.getTexture(t[r].index))}),t}const z9={KHR_draco_mesh_compression:gt,KHR_materials_unlit:J,KHR_lights_punctual:xt,KHR_techniques_webgl:dt};function mMe(n){return D2.apply(this,arguments)}function D2(){return(D2=fr(function*(n,e={},t){for(const i in z9){var r;const s=(null==e||null===(r=e.gltf)||void 0===r?void 0:r.excludeExtensions)||{};i in s&&!s[i]||(yield z9[i].decode(n,e,t))}})).apply(this,arguments)}const $9={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},yMe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class bMe{constructor(e){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}normalize(e,t){this.json=e.json;const r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn(`glTF: Unknown version ${r.asset.version}`)}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),function(n){const e=new Ap(n),{json:t}=e;for(const r of t.images||[]){const i=e.removeObjectExtension(r,U9);i&&Object.assign(r,i)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(U9)}(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in $9)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const r=e[t];if(r&&!Array.isArray(r)){e[t]=[];for(const i in r){const s=r[i];s.id=s.id||i;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][i]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in $9)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:r,indices:i,material:s}=t;for(const o in r)r[o]=this._convertIdToIndex(r[o],"accessor");i&&(t.indices=this._convertIdToIndex(i,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn(`gltf v1: json doesn't contain attribute ${t}`),e[t]=[]);for(const r of e[t])for(const i in r){const o=this._convertIdToIndex(r[i],i);r[i]=o}}_convertIdToIndex(e,t){const r=yMe[t];if(r in this.idToIndexMap){const i=this.idToIndexMap[r][e];if(!Number.isFinite(i))throw new Error(`gltf v1: failed to resolve ${t} with id ${e}`);return i}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const t of e.materials){t.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const r=t.values&&t.values.tex,i=e.textures.findIndex(s=>s.id===r);-1!==i&&(t.pbrMetallicRoughness.baseColorTexture={index:i})}}}function vMe(n,e={}){return(new bMe).normalize(n,e)}const wMe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},EMe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Bl={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},CMe={magFilter:Bl.TEXTURE_MAG_FILTER,minFilter:Bl.TEXTURE_MIN_FILTER,wrapS:Bl.TEXTURE_WRAP_S,wrapT:Bl.TEXTURE_WRAP_T},SMe={[Bl.TEXTURE_MAG_FILTER]:Bl.LINEAR,[Bl.TEXTURE_MIN_FILTER]:Bl.NEAREST_MIPMAP_LINEAR,[Bl.TEXTURE_WRAP_S]:Bl.REPEAT,[Bl.TEXTURE_WRAP_]:Bl.REPEAT};class TMe{postProcess(e,t={}){const{json:r,buffers:i=[],images:s=[],baseUri:o=""}=e;return Yc(r),this.baseUri=o,this.json=r,this.buffers=i,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((r,i)=>this._resolveBufferView(r,i))),e.images&&(e.images=e.images.map((r,i)=>this._resolveImage(r,i))),e.samplers&&(e.samplers=e.samplers.map((r,i)=>this._resolveSampler(r,i))),e.textures&&(e.textures=e.textures.map((r,i)=>this._resolveTexture(r,i))),e.accessors&&(e.accessors=e.accessors.map((r,i)=>this._resolveAccessor(r,i))),e.materials&&(e.materials=e.materials.map((r,i)=>this._resolveMaterial(r,i))),e.meshes&&(e.meshes=e.meshes.map((r,i)=>this._resolveMesh(r,i))),e.nodes&&(e.nodes=e.nodes.map((r,i)=>this._resolveNode(r,i))),e.skins&&(e.skins=e.skins.map((r,i)=>this._resolveSkin(r,i))),e.scenes&&(e.scenes=e.scenes.map((r,i)=>this._resolveScene(r,i))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const r=this.json[e]&&this.json[e][t];return r||console.warn(`glTF file error: Could not find ${e}[${t}]`),r}_resolveScene(e,t){return e.id=e.id||`scene-${t}`,e.nodes=(e.nodes||[]).map(r=>this.getNode(r)),e}_resolveNode(e,t){return e.id=e.id||`node-${t}`,e.children&&(e.children=e.children.map(r=>this.getNode(r))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((r,i)=>{const s=this.getMesh(i);return r.id=s.id,r.primitives=r.primitives.concat(s.primitives),r},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||`skin-${t}`,e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||`mesh-${t}`,e.primitives&&(e.primitives=e.primitives.map(r=>{const i=(r=ht({},r)).attributes;r.attributes={};for(const s in i)r.attributes[s]=this.getAccessor(i[s]);return void 0!==r.indices&&(r.indices=this.getAccessor(r.indices)),void 0!==r.material&&(r.material=this.getMaterial(r.material)),r})),e}_resolveMaterial(e,t){if(e.id=e.id||`material-${t}`,e.normalTexture&&(e.normalTexture=ht({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=ht({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=ht({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=ht({},e.pbrMetallicRoughness);const r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=ht({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=ht({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||`accessor-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function(n){return EMe[n]}(e.componentType),e.components=function(n){return wMe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const r=e.bufferView.buffer,{ArrayType:i,byteLength:s}=j9(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+r.byteOffset,a=r.arrayBuffer.slice(o,o+s);e.value=new i(a)}return e}_resolveTexture(e,t){return e.id=e.id||`texture-${t}`,e.sampler="sampler"in e?this.getSampler(e.sampler):SMe,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||`sampler-${t}`,e.parameters={};for(const r in e){const i=this._enumSamplerParameter(r);void 0!==i&&(e.parameters[i]=e[r])}return e}_enumSamplerParameter(e){return CMe[e]}_resolveImage(e,t){e.id=e.id||`image-${t}`,void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const r=this.images[t];return r&&(e.image=r),e}_resolveBufferView(e,t){e.id=e.id||`bufferView-${t}`;const r=e.buffer;e.buffer=this.buffers[r];let s=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),e.data=new Uint8Array(this.buffers[r].arrayBuffer,s,e.byteLength),e}_resolveCamera(e,t){return e.id=e.id||`camera-${t}`,e}}function AMe(n,e){return(new TMe).postProcess(n,e)}const G9=1735152710,Yy=!0;function T2(n,e,t,r){const i=new Uint8Array(e.buffer,t,r),o=new TextDecoder("utf8").decode(i);return n.json=JSON.parse(o),xE(r,4)}function A2(n,e,t,r){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:r,arrayBuffer:e.buffer}),xE(r,4)}function jMe(n,e){return M2.apply(this,arguments)}function M2(){return(M2=fr(function*(n,e,t=0,r,i){var s,o,a,c;UMe(n,e,t,r),vMe(n,{normalize:null==r||null===(s=r.gltf)||void 0===s?void 0:s.normalize});const l=[];if(null!=r&&null!==(o=r.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield HMe(n,r,i)),null!=r&&null!==(a=r.gltf)&&void 0!==a&&a.loadImages){const h=zMe(n,r,i);l.push(h)}const u=mMe(n,r,i);return l.push(u),yield Promise.all(l),null!=r&&null!==(c=r.gltf)&&void 0!==c&&c.postProcess?AMe(n,r):n})).apply(this,arguments)}function UMe(n,e,t,r){if(r.uri&&(n.baseUri=r.uri),e instanceof ArrayBuffer&&!function(n,e=0,t={}){const r=new DataView(n),{magic:i=G9}=t,s=r.getUint32(e,!1);return s===i||s===G9}(e,t,r)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function(n){try{return JSON.parse(n)}catch(e){throw new Error(`Failed to parse JSON from data starting with "${function(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?w9(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?w9(n,0,e):""}(n)}"`)}}(e);else if(e instanceof ArrayBuffer){const o={};t=function(n,e,t=0,r={}){const i=new DataView(e),s=function(n,e=0){return`${String.fromCharCode(n.getUint8(e+0))}${String.fromCharCode(n.getUint8(e+1))}${String.fromCharCode(n.getUint8(e+2))}${String.fromCharCode(n.getUint8(e+3))}`}(i,t+0),o=i.getUint32(t+4,Yy),a=i.getUint32(t+8,Yy);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=12,n.version){case 1:return function(n,e,t){om(n.header.byteLength>20);const r=e.getUint32(t+0,Yy),i=e.getUint32(t+4,Yy);return t+=8,om(0===i),T2(n,e,t,r),(t+=r)+A2(n,e,t,n.header.byteLength)}(n,i,t);case 2:return function(n,e,t,r){return om(n.header.byteLength>20),function(n,e,t,r){for(;t+8<=n.header.byteLength;){const i=e.getUint32(t+0,Yy),s=e.getUint32(t+4,Yy);switch(t+=8,s){case 1313821514:T2(n,e,t,i);break;case 5130562:A2(n,e,t,i);break;case 0:r.strict||T2(n,e,t,i);break;case 1:r.strict||A2(n,e,t,i)}t+=xE(i,4)}}(n,e,t,{}),t+n.header.byteLength}(n,i,t);default:throw new Error(`Invalid GLB version ${n.version}. Only supports v1 and v2.`)}}(o,e,t,r.glb),Yc("glTF"===o.type,`Invalid GLB magic string ${o.type}`),n._glb=o,n.json=o.json}else Yc(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function HMe(n,e,t){return I2.apply(this,arguments)}function I2(){return(I2=fr(function*(n,e,t){for(let s=0;s<n.json.buffers.length;++s){const o=n.json.buffers[s];if(o.uri){var r,i;const{fetch:a}=t;Yc(a);const c=E9(o.uri,e),l=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,c),u=yield null==l||null===(i=l.arrayBuffer)||void 0===i?void 0:i.call(l);n.buffers[s]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete o.uri}}})).apply(this,arguments)}function zMe(n,e,t){return R2.apply(this,arguments)}function R2(){return(R2=fr(function*(n,e,t){const r=n.json.images||[],i=[];for(let s=0;s<r.length;++s)i.push($Me(n,r[s],s,e,t));return yield Promise.all(i)})).apply(this,arguments)}function $Me(n,e,t,r,i){return O2.apply(this,arguments)}function O2(){return(O2=fr(function*(n,e,t,r,i){const{fetch:s,parse:o}=i;let a;if(e.uri){const l=E9(e.uri,r);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=C9(n.json,n.buffers,e.bufferView);a=eW(l.buffer,l.byteOffset,l.byteLength)}Yc(a,"glTF image has no data");const c=yield o(a,PW,{},i);n.images[t]=c})).apply(this,arguments)}const Ky={name:"glTF",id:"gltf",module:"gltf",version:"3.0.12",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return N2.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function N2(){return(N2=fr(function*(n,e={},t){(e=ht(ht({},Ky.options),e)).gltf=ht(ht({},Ky.options.gltf),e.gltf);const{byteOffset:r=0}=e;return yield jMe({},n,r,e,t)})).apply(this,arguments)}function P2(){return(P2=fr(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(r=>{Object.values(r.model.getUniforms()).forEach(i=>{!1===i.loaded&&e.push(i)})})}),yield qMe(()=>e.some(t=>!t.loaded))})).apply(this,arguments)}function qMe(n){return F2.apply(this,arguments)}function F2(){return(F2=fr(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))})).apply(this,arguments)}const W9=[255,255,255,255],XMe={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:W9},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Ky]};let QMe=(()=>{class n extends OL{getShaders(){const t=[ZW,r9];return"pbr"===this.props._lighting&&t.push(d9),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:W9,transition:!0},instanceModelMatrix:c9})}updateState(t){super.updateState(t);const{props:r,oldProps:i}=t;r.scenegraph!==i.scenegraph?this._updateScenegraph(r):r._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,r._animations)}finalizeState(){super.finalizeState(),this._deleteScenegraph()}_updateScenegraph(t){const{gl:r}=this.context;let i=null;if(t.scenegraph instanceof $y)i={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){const c=t.scenegraph,l=function(n,e,t){const r=new rAe(n,t);return{scenes:r.instantiate(e),animator:r.createAnimator()}}(r,c,this._getModelOptions());i=ht({gltf:c},l),function(n){return P2.apply(this,arguments)}(l).then(()=>this.setNeedsRedraw())}else t.scenegraph&&(ti.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=t.scenegraph);const s={layer:this,gl:r},o=t.getScene(i,s),a=t.getAnimator(i,s);o instanceof $y?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,a,t._animations),this.setState({scenegraph:o,animator:a})):null!==o&&ti.warn("invalid scenegraph:",o)()}_applyAllAttributes(t){if(this.state.attributesAvailable){const r=this.getAttributeManager().getAttributes();t.traverse(i=>{this._setModelAttributes(i.model,r)})}}_applyAnimationsProp(t,r,i){if(!t||!r||!i)return;const s=r.getAnimations();Object.keys(i).sort().forEach(o=>{const a=i[o];if("*"===o)s.forEach(c=>{Object.assign(c,a)});else if(Number.isFinite(Number(o))){const c=Number(o);c>=0&&c<s.length?Object.assign(s[c],a):ti.warn("animation ".concat(o," not found"))()}else{const c=s.find(({name:l})=>l===o);c?Object.assign(c,a):ti.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){const{scenegraph:t}=this.state;t instanceof $y&&t.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:t}=this.props;let r=null;return t&&(r="function"==typeof t?t({gl:this.context.gl,layer:this}):t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:r,modelOptions:ht({isInstanced:!0,transpileToGLSL100:!Ir(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(r=>{this._setModelAttributes(r.model,t)})}draw({moduleParameters:t=null,parameters:r={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:s}=this.context,{sizeScale:o,sizeMinPixels:a,sizeMaxPixels:c,opacity:l,coordinateSystem:u}=this.props,h=this.getNumInstances();this.state.scenegraph.traverse((f,{worldMatrix:g})=>{f.model.setInstanceCount(h),f.updateModuleSettings(t),f.draw({parameters:r,uniforms:{sizeScale:o,opacity:l,sizeMinPixels:a,sizeMaxPixels:c,composeModelMatrix:l9(s,u),sceneModelMatrix:g,u_Camera:f.model.getUniforms().project_uCameraPosition}})})}}return n.layerName="ScenegraphLayer",n.defaultProps=XMe,n})();const ZMe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),JMe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),eIe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),tIe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),nIe={POSITION:{size:3,value:new Float32Array(JMe)},NORMAL:{size:3,value:new Float32Array(eIe)},TEXCOORD_0:{size:2,value:new Float32Array(tIe)}};class rIe extends C1{constructor(e={}){const{id:t=jd("cube-geometry")}=e;super(Kn(ht({},e),{id:t,indices:{size:1,value:new Uint16Array(ZMe)},attributes:ht(ht({},nIe),e.attributes)}))}}class Kd{constructor(e=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e=new le){const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t=new le){const r=this.elements,i=e.x,s=e.y,o=e.z;return t.x=r[0]*i+r[1]*s+r[2]*o,t.y=r[3]*i+r[4]*s+r[5]*o,t.z=r[6]*i+r[7]*s+r[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t=new Kd){const r=this.elements,i=e.elements,s=t.elements,o=r[0],a=r[1],c=r[2],l=r[3],u=r[4],h=r[5],f=r[6],g=r[7],m=r[8],b=i[0],_=i[1],R=i[2],M=i[3],ee=i[4],_e=i[5],Ie=i[6],Ue=i[7],at=i[8];return s[0]=o*b+a*M+c*Ie,s[1]=o*_+a*ee+c*Ue,s[2]=o*R+a*_e+c*at,s[3]=l*b+u*M+h*Ie,s[4]=l*_+u*ee+h*Ue,s[5]=l*R+u*_e+h*at,s[6]=f*b+g*M+m*Ie,s[7]=f*_+g*ee+m*Ue,s[8]=f*R+g*_e+m*at,t}scale(e,t=new Kd){const r=this.elements,i=t.elements;for(let s=0;3!==s;s++)i[3*s+0]=e.x*r[3*s+0],i[3*s+1]=e.y*r[3*s+1],i[3*s+2]=e.z*r[3*s+2];return t}solve(e,t=new le){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let u,f;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--c);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t}e(e,t,r){if(void 0===r)return this.elements[t+3*e];this.elements[t+3*e]=r}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let r=0;r<9;r++)e+=this.elements[r]+",";return e}reverse(e=new Kd){const i=iIe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)i[s+6*o]=this.elements[s+3*o];i[3]=1,i[9]=0,i[15]=0,i[4]=0,i[10]=1,i[16]=0,i[5]=0,i[11]=0,i[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===i[s+6*s])for(o=s+1;o<c;o++)if(0!==i[s+6*o]){l=6;do{h=6-l,i[h+6*s]+=i[h+6*o]}while(--l);break}if(0!==i[s+6*s])for(o=s+1;o<c;o++){const f=i[s+6*o]/i[s+6*s];l=6;do{h=6-l,i[h+6*o]=h<=s?0:i[h+6*o]-i[h+6*s]*f}while(--l)}}while(--a);s=2;do{o=s-1;do{const f=i[s+6*o]/i[s+6*s];l=6;do{h=6-l,i[h+6*o]=i[h+6*o]-i[h+6*s]*f}while(--l)}while(o--)}while(--s);s=2;do{const f=1/i[s+6*s];l=6;do{h=6-l,i[h+6*s]=i[h+6*s]*f}while(--l)}while(s--);s=2;do{o=2;do{if(h=i[3+o+6*s],isNaN(h)||h===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,r=e.y,i=e.z,s=e.w,o=t+t,a=r+r,c=i+i,l=t*o,u=t*a,h=t*c,f=r*a,g=r*c,m=i*c,b=s*o,_=s*a,R=s*c,M=this.elements;return M[0]=1-(f+m),M[1]=u-R,M[2]=h+_,M[3]=u+R,M[4]=1-(l+m),M[5]=g-b,M[6]=h-_,M[7]=g+b,M[8]=1-(l+f),this}transpose(e=new Kd){const t=this.elements,r=e.elements;let i;return r[0]=t[0],r[4]=t[4],r[8]=t[8],i=t[1],r[1]=t[3],r[3]=i,i=t[2],r[2]=t[6],r[6]=i,i=t[5],r[5]=t[7],r[7]=i,e}}const iIe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class le{constructor(e=0,t=0,r=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=r}cross(e,t=new le){const r=e.x,i=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return t.x=a*s-c*i,t.y=c*r-o*s,t.z=o*i-a*r,t}set(e,t,r){return this.x=e,this.y=t,this.z=r,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new le(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new le(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Kd([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,r=this.z,i=Math.sqrt(e*e+t*t+r*r);if(i>0){const s=1/i;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return i}unit(e=new le){const t=this.x,r=this.y,i=this.z;let s=Math.sqrt(t*t+r*r+i*i);return s>0?(s=1/s,e.x=t*s,e.y=r*s,e.z=i*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,r=this.z;return Math.sqrt(e*e+t*t+r*r)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-r)*(o-r)+(a-i)*(a-i))}distanceSquared(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-r)*(o-r)+(a-i)*(a-i)}scale(e,t=new le){const i=this.y,s=this.z;return t.x=e*this.x,t.y=e*i,t.z=e*s,t}vmul(e,t=new le){return t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,r=new le){return r.x=this.x+e*t.x,r.y=this.y+e*t.y,r.z=this.z+e*t.z,r}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e=new le){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const r=this.length();if(r>0){const i=sIe,s=1/r;i.set(this.x*s,this.y*s,this.z*s);const o=oIe;Math.abs(i.x)<.9?(o.set(1,0,0),i.cross(o,e)):(o.set(0,1,0),i.cross(o,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,r){const i=this.x,s=this.y,o=this.z;r.x=i+(e.x-i)*t,r.y=s+(e.y-s)*t,r.z=o+(e.z-o)*t}almostEquals(e,t=1e-6){return!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e=1e-6){return!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(q9),q9.almostEquals(e,t)}clone(){return new le(this.x,this.y,this.z)}}le.ZERO=void 0,le.UNIT_X=void 0,le.UNIT_Y=void 0,le.UNIT_Z=void 0,le.ZERO=new le(0,0,0),le.UNIT_X=new le(1,0,0),le.UNIT_Y=new le(0,1,0),le.UNIT_Z=new le(0,0,1);const sIe=new le,oIe=new le,q9=new le;class Ri{constructor(e={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new le,this.upperBound=new le,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,r,i){const s=this.lowerBound,o=this.upperBound,a=r;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,Y9),l=Y9),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),i&&(s.x-=i,s.y-=i,s.z-=i,o.x+=i,o.y+=i,o.z+=i),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new Ri).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,r=this.upperBound,i=e.lowerBound,s=e.upperBound;return(i.x<=r.x&&r.x<=s.x||t.x<=s.x&&s.x<=r.x)&&(i.y<=r.y&&r.y<=s.y||t.y<=s.y&&s.y<=r.y)&&(i.z<=r.z&&r.z<=s.z||t.z<=s.z&&s.z<=r.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,r=this.upperBound,i=e.lowerBound,s=e.upperBound;return t.x<=i.x&&r.x>=s.x&&t.y<=i.y&&r.y>=s.y&&t.z<=i.z&&r.z>=s.z}getCorners(e,t,r,i,s,o,a,c){const l=this.lowerBound,u=this.upperBound;e.copy(l),t.set(u.x,l.y,l.z),r.set(u.x,u.y,l.z),i.set(l.x,u.y,u.z),s.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,t){const r=K9;this.getCorners(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);for(let f=0;8!==f;f++){const g=r[f];e.pointToLocal(g,g)}return t.setFromPoints(r)}toWorldFrame(e,t){const r=K9;this.getCorners(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);for(let f=0;8!==f;f++){const g=r[f];e.pointToWorld(g,g)}return t.setFromPoints(r)}overlapsRay(e){const{direction:t,from:r}=e,i=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-r.x)*i,c=(this.upperBound.x-r.x)*i,l=(this.lowerBound.y-r.y)*s,u=(this.upperBound.y-r.y)*s,h=(this.lowerBound.z-r.z)*o,f=(this.upperBound.z-r.z)*o,g=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(h,f));return!(m<0||g>m)}}const Y9=new le,K9=[new le,new le,new le,new le,new le,new le,new le,new le];class js{constructor(e=0,t=0,r=0,i=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=e,this.y=t,this.z=r,this.w=i}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const r=Math.sin(.5*t);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(.5*t),this}toAxisAngle(e=new le){this.normalize();const t=2*Math.acos(this.w),r=Math.sqrt(1-this.w*this.w);return r<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/r,e.y=this.y/r,e.z=this.z/r),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const r=cIe;e.tangents(r,lIe),this.setFromAxisAngle(r,Math.PI)}else{const r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Hi(e.length(),2)*Hi(t.length(),2))+e.dot(t),this.normalize()}return this}mult(e,t=new js){const r=this.x,i=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return t.x=r*u+o*a+i*l-s*c,t.y=i*u+o*c+s*a-r*l,t.z=s*u+o*l+r*c-i*a,t.w=o*u-r*a-i*c-s*l,t}inverse(e=new js){const t=this.x,r=this.y,i=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+r*r+i*i+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e=new js){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t=new le){const r=e.x,i=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,u=l*r+a*s-c*i,h=l*i+c*r-o*s,f=l*s+o*i-a*r,g=-o*r-a*i-c*s;return t.x=u*l+g*-o+h*-c-f*-a,t.y=h*l+g*-a+f*-o-u*-c,t.z=f*l+g*-c+u*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t="YZX"){let r,i,s;const o=this.x,a=this.y,c=this.z,l=this.w;switch(t){case"YZX":const u=o*a+c*l;if(u>.499&&(r=2*Math.atan2(o,l),i=Math.PI/2,s=0),u<-.499&&(r=-2*Math.atan2(o,l),i=-Math.PI/2,s=0),void 0===r){const h=o*o,g=c*c;r=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*g),i=Math.asin(2*u),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*g)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=r,e.z=i,e.x=s}setFromEuler(e,t,r,i="XYZ"){const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(r/2),c=Math.sin(e/2),l=Math.sin(t/2),u=Math.sin(r/2);return"XYZ"===i?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"YXZ"===i?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"ZXY"===i?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"ZYX"===i?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"YZX"===i?(this.x=c*o*a+s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a-c*l*u):"XZY"===i&&(this.x=c*o*a-s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a+c*l*u),this}clone(){return new js(this.x,this.y,this.z,this.w)}slerp(e,t,r=new js){const i=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,b,_,c=e.x,l=e.y,u=e.z,h=e.w;return g=i*c+s*l+o*u+a*h,g<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),b=Math.sin((1-t)*f)/m,_=Math.sin(t*f)/m):(b=1-t,_=t),r.x=b*i+_*c,r.y=b*s+_*l,r.z=b*o+_*u,r.w=b*a+_*h,r}integrate(e,t,r,i=new js){const s=e.x*r.x,o=e.y*r.y,a=e.z*r.z,c=this.x,l=this.y,u=this.z,h=this.w,f=.5*t;return i.x+=f*(s*h+o*u-a*l),i.y+=f*(o*h+a*c-s*u),i.z+=f*(a*h+s*l-o*c),i.w+=f*(-s*c-o*l-a*u),i}}const cIe=new le,lIe=new le,uIe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let _n=(()=>{class n{constructor(t={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,r){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,r,i,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=uIe,n})();class ni{constructor(e={}){this.position=void 0,this.quaternion=void 0,this.position=new le,this.quaternion=new js,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return ni.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return ni.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,r,i=new le){return r.vsub(e,i),t.conjugate(Q9),Q9.vmult(i,i),i}static pointToWorldFrame(e,t,r,i=new le){return t.vmult(r,i),i.vadd(e,i),i}static vectorToWorldFrame(e,t,r=new le){return e.vmult(t,r),r}static vectorToLocalFrame(e,t,r,i=new le){return t.w*=-1,t.vmult(r,i),t.w*=-1,i}}const Q9=new js;class lm extends _n{constructor(e={}){const{vertices:t=[],faces:r=[],normals:i=[],axes:s,boundingSphereRadius:o}=e;super({type:_n.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=t,this.faces=r,this.faceNormals=i,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,r=this.uniqueEdges;r.length=0;const i=new le;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){t[o[c]].vsub(t[o[(c+1)%a]],i),i.normalize();let u=!1;for(let h=0;h!==r.length;h++)if(r[h].almostEquals(i)||r[h].almostEquals(i)){u=!0;break}u||r.push(i.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let i=0;i<this.faces[e].length;i++)if(!this.vertices[this.faces[e][i]])throw new Error("Vertex "+this.faces[e][i]+" not found!");const t=this.faceNormals[e]||new le;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(".faceNormals["+e+"] = Vec3("+t.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let i=0;i<this.faces[e].length;i++)console.warn(".vertices["+this.faces[e][i]+"] = Vec3("+this.vertices[this.faces[e][i]].toString()+")")}}}getFaceNormal(e,t){const r=this.faces[e];lm.computeNormal(this.vertices[r[0]],this.vertices[r[1]],this.vertices[r[2]],t)}static computeNormal(e,t,r,i){const s=new le,o=new le;t.vsub(e,o),r.vsub(t,s),s.cross(o,i),i.isZero()||i.normalize()}clipAgainstHull(e,t,r,i,s,o,a,c,l){const u=new le;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<r.faces.length;m++){u.copy(r.faceNormals[m]),s.vmult(u,u);const b=u.dot(o);b>f&&(f=b,h=m)}const g=[];for(let m=0;m<r.faces[h].length;m++){const b=r.vertices[r.faces[h][m]],_=new le;_.copy(b),s.vmult(_,_),i.vadd(_,_),g.push(_)}h>=0&&this.clipFaceAgainstHull(o,e,t,g,a,c,l)}findSeparatingAxis(e,t,r,i,s,o,a,c){const l=new le,u=new le,h=new le,f=new le,g=new le,m=new le;let b=Number.MAX_VALUE;const _=this;if(_.uniqueAxes)for(let R=0;R!==_.uniqueAxes.length;R++){r.vmult(_.uniqueAxes[R],l);const M=_.testSepAxis(l,e,t,r,i,s);if(!1===M)return!1;M<b&&(b=M,o.copy(l))}else{const R=a?a.length:_.faces.length;for(let M=0;M<R;M++){l.copy(_.faceNormals[a?a[M]:M]),r.vmult(l,l);const _e=_.testSepAxis(l,e,t,r,i,s);if(!1===_e)return!1;_e<b&&(b=_e,o.copy(l))}}if(e.uniqueAxes)for(let R=0;R!==e.uniqueAxes.length;R++){s.vmult(e.uniqueAxes[R],u);const M=_.testSepAxis(u,e,t,r,i,s);if(!1===M)return!1;M<b&&(b=M,o.copy(u))}else{const R=c?c.length:e.faces.length;for(let M=0;M<R;M++){u.copy(e.faceNormals[c?c[M]:M]),s.vmult(u,u);const _e=_.testSepAxis(u,e,t,r,i,s);if(!1===_e)return!1;_e<b&&(b=_e,o.copy(u))}}for(let R=0;R!==_.uniqueEdges.length;R++){r.vmult(_.uniqueEdges[R],f);for(let M=0;M!==e.uniqueEdges.length;M++)if(s.vmult(e.uniqueEdges[M],g),f.cross(g,m),!m.almostZero()){m.normalize();const ee=_.testSepAxis(m,e,t,r,i,s);if(!1===ee)return!1;ee<b&&(b=ee,o.copy(m))}}return i.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,r,i,s,o){lm.project(this,e,r,i,k2),lm.project(t,e,s,o,L2);const c=k2[0],l=k2[1],u=L2[0],h=L2[1];if(c<h||u<l)return!1;const f=c-h,g=u-l;return f<g?f:g}calculateLocalInertia(e,t){const r=new le,i=new le;this.computeLocalAABB(i,r);const s=r.x-i.x,o=r.y-i.y,a=r.z-i.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,r,i,s,o,a){const c=new le,l=new le,u=new le,h=new le,f=new le,g=new le,m=new le,b=new le,_=this,M=i,ee=[];let _e=-1,Ie=Number.MAX_VALUE;for(let Ot=0;Ot<_.faces.length;Ot++){c.copy(_.faceNormals[Ot]),r.vmult(c,c);const qt=c.dot(e);qt<Ie&&(Ie=qt,_e=Ot)}if(_e<0)return;const Ue=_.faces[_e];Ue.connectedFaces=[];for(let Ot=0;Ot<_.faces.length;Ot++)for(let qt=0;qt<_.faces[Ot].length;qt++)-1!==Ue.indexOf(_.faces[Ot][qt])&&Ot!==_e&&-1===Ue.connectedFaces.indexOf(Ot)&&Ue.connectedFaces.push(Ot);const at=Ue.length;for(let Ot=0;Ot<at;Ot++){const qt=_.vertices[Ue[Ot]];qt.vsub(_.vertices[Ue[(Ot+1)%at]],l),u.copy(l),r.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[_e]),r.vmult(h,h),t.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(qt),r.vmult(g,g),t.vadd(g,g);const bt=Ue.connectedFaces[Ot];m.copy(this.faceNormals[bt]);const Ct=this.getPlaneConstantOfFace(bt);b.copy(m),r.vmult(b,b);const zt=Ct-b.dot(t);for(this.clipFaceAgainstPlane(M,ee,b,zt);M.length;)M.shift();for(;ee.length;)M.push(ee.shift())}m.copy(this.faceNormals[_e]);const St=this.getPlaneConstantOfFace(_e);b.copy(m),r.vmult(b,b);const Tt=St-b.dot(t);for(let Ot=0;Ot<M.length;Ot++){let qt=b.dot(M[Ot])+Tt;if(qt<=s&&(console.log("clamped: depth="+qt+" to minDist="+s),qt=s),qt<=o){const tn=M[Ot];qt<=1e-6&&a.push({point:tn,normal:b,depth:qt})}}}clipFaceAgainstPlane(e,t,r,i){let s,o;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];s=r.dot(c)+i;for(let u=0;u<a;u++){if(l=e[u],o=r.dot(l)+i,s<0)if(o<0){const h=new le;h.copy(l),t.push(h)}else{const h=new le;c.lerp(l,s/(s-o),h),t.push(h)}else if(o<0){const h=new le;c.lerp(l,s/(s-o),h),t.push(h),t.push(l)}c=l,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new le);const r=this.vertices,i=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(r[s],i[s]),e.vadd(i[s],i[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const r=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let i=0;i<this.vertices.length;i++){const s=r[i];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new le);const r=this.faceNormals,i=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(r[s],i[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let r=0;r!==t.length;r++){const i=t[r].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,r,i){const s=this.vertices;let o,a,c,l,u,h,f=new le;for(let g=0;g<s.length;g++){f.copy(s[g]),t.vmult(f,f),e.vadd(f,f);const m=f;(void 0===o||m.x<o)&&(o=m.x),(void 0===l||m.x>l)&&(l=m.x),(void 0===a||m.y<a)&&(a=m.y),(void 0===u||m.y>u)&&(u=m.y),(void 0===c||m.z<c)&&(c=m.z),(void 0===h||m.z>h)&&(h=m.z)}r.set(o,a,c),i.set(l,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e=new le){const t=this.vertices;for(let r=0;r<t.length;r++)e.vadd(t[r],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const r=this.vertices.length,i=this.vertices;if(t){for(let s=0;s<r;s++){const o=i[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<r;s++){const o=i[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,r=this.faces,i=this.faceNormals,s=new le;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=i[o];const c=t[r[o][0]],l=new le;e.vsub(c,l);const u=a.dot(l),h=new le;s.vsub(c,h);const f=a.dot(h);if(u<0&&f>0||u>0&&f<0)return!1}return-1}static project(e,t,r,i,s){const o=e.vertices.length,a=dIe;let c=0,l=0;const u=hIe,h=e.vertices;u.setZero(),ni.vectorToLocalFrame(r,i,t,a),ni.pointToLocalFrame(r,i,u,u);const f=u.dot(a);l=c=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>c&&(c=m),m<l&&(l=m)}if(l-=f,c-=f,l>c){const g=l;l=c,c=g}s[0]=c,s[1]=l}}const k2=[],L2=[],dIe=new le,hIe=new le;class O1 extends _n{constructor(e){super({type:_n.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,r=this.halfExtents.z,i=le,s=[new i(-e,-t,-r),new i(e,-t,-r),new i(e,t,-r),new i(-e,t,-r),new i(-e,-t,r),new i(e,-t,r),new i(e,t,r),new i(-e,t,r)],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],c=new lm({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t=new le){return O1.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,r){const i=e;r.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),r.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),r.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}getSideNormals(e,t){const r=e,i=this.halfExtents;if(r[0].set(i.x,0,0),r[1].set(0,i.y,0),r[2].set(0,0,i.z),r[3].set(-i.x,0,0),r[4].set(0,-i.y,0),r[5].set(0,0,-i.z),void 0!==t)for(let s=0;s!==r.length;s++)t.vmult(r[s],r[s]);return r}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,r){const i=this.halfExtents,s=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]];for(let o=0;o<s.length;o++)Mp.set(s[o][0],s[o][1],s[o][2]),t.vmult(Mp,Mp),e.vadd(Mp,Mp),r(Mp.x,Mp.y,Mp.z)}calculateWorldAABB(e,t,r,i){const s=this.halfExtents;Xd[0].set(s.x,s.y,s.z),Xd[1].set(-s.x,s.y,s.z),Xd[2].set(-s.x,-s.y,s.z),Xd[3].set(-s.x,-s.y,-s.z),Xd[4].set(s.x,-s.y,-s.z),Xd[5].set(s.x,s.y,-s.z),Xd[6].set(-s.x,s.y,-s.z),Xd[7].set(s.x,-s.y,s.z);const o=Xd[0];t.vmult(o,o),e.vadd(o,o),i.copy(o),r.copy(o);for(let a=1;a<8;a++){const c=Xd[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,u=c.y,h=c.z;l>i.x&&(i.x=l),u>i.y&&(i.y=u),h>i.z&&(i.z=h),l<r.x&&(r.x=l),u<r.y&&(r.y=u),h<r.z&&(r.z=h)}}}const Mp=new le,Xd=[new le,new le,new le,new le,new le,new le,new le,new le];class yn extends class{constructor(){this._listeners=void 0}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;return void 0===r[e]&&(r[e]=[]),r[e].includes(t)||r[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return!(void 0===r[e]||!r[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const r=this._listeners;if(void 0===r[e])return this;const i=r[e].indexOf(t);return-1!==i&&r[e].splice(i,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const r=this._listeners[e.type];if(void 0!==r){e.target=this;for(let i=0,s=r.length;i<s;i++)r[i].call(this,e)}return this}}{constructor(e={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=yn.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new le,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new le,this.previousPosition=new le,this.interpolatedPosition=new le,this.initPosition=new le,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new le,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new le,this.force=new le;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?yn.STATIC:yn.DYNAMIC,typeof e.type==typeof yn.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=yn.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new le,this.quaternion=new js,this.initQuaternion=new js,this.previousQuaternion=new js,this.interpolatedQuaternion=new js,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new le,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new le,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new le,this.invInertia=new le,this.invInertiaWorld=new Kd,this.invMassSolve=0,this.invInertiaSolve=new le,this.invInertiaWorldSolve=new Kd,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new le(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new le(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Ri,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new le,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=yn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===yn.SLEEPING&&this.dispatchEvent(yn.wakeupEvent)}sleep(){this.sleepState=yn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,r=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),i=Hi(this.sleepSpeedLimit,2);t===yn.AWAKE&&r<i?(this.sleepState=yn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(yn.sleepyEvent)):t===yn.SLEEPY&&r>i?this.wakeUp():t===yn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(yn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===yn.SLEEPING||this.type===yn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t=new le){return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t=new le){return this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t}addShape(e,t,r){const i=new le,s=new js;return t&&i.copy(t),r&&s.copy(r),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,r=e.length;let i=0;for(let s=0;s!==r;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),c=o.boundingSphereRadius;a+c>i&&(i=a+c)}this.boundingRadius=i}updateAABB(){const e=this.shapes,t=this.shapeOffsets,r=this.shapeOrientations,i=e.length,s=fIe,o=pIe,a=this.quaternion,c=this.aabb,l=gIe;for(let u=0;u!==i;u++){const h=e[u];a.vmult(t[u],s),s.vadd(this.position,s),a.mult(r[u],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===u?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const r=mIe,i=_Ie;r.setRotationFromQuaternion(this.quaternion),r.transpose(i),r.scale(t,r),r.mmult(i,this.invInertiaWorld)}}applyForce(e,t=new le){if(this.type!==yn.DYNAMIC)return;this.sleepState===yn.SLEEPING&&this.wakeUp();const r=yIe;t.cross(e,r),this.force.vadd(e,this.force),this.torque.vadd(r,this.torque)}applyLocalForce(e,t=new le){if(this.type!==yn.DYNAMIC)return;const r=bIe,i=vIe;this.vectorToWorldFrame(e,r),this.vectorToWorldFrame(t,i),this.applyForce(r,i)}applyTorque(e){this.type===yn.DYNAMIC&&(this.sleepState===yn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t=new le){if(this.type!==yn.DYNAMIC)return;this.sleepState===yn.SLEEPING&&this.wakeUp();const r=t,i=wIe;i.copy(e),i.scale(this.invMass,i),this.velocity.vadd(i,this.velocity);const s=EIe;r.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t=new le){if(this.type!==yn.DYNAMIC)return;const r=CIe,i=SIe;this.vectorToWorldFrame(e,r),this.vectorToWorldFrame(t,i),this.applyImpulse(r,i)}updateMassProperties(){const e=DIe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,r=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),O1.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!r?1/t.x:0,t.y>0&&!r?1/t.y:0,t.z>0&&!r?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const r=new le;return e.vsub(this.position,r),this.angularVelocity.cross(r,t),this.velocity.vadd(t,t),t}integrate(e,t,r){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==yn.DYNAMIC&&this.type!==yn.KINEMATIC||this.sleepState===yn.SLEEPING)return;const i=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;i.x+=a.x*g*f.x,i.y+=a.y*g*f.y,i.z+=a.z*g*f.z;const m=h.elements,b=this.angularFactor,_=c.x*b.x,R=c.y*b.y,M=c.z*b.z;s.x+=e*(m[0]*_+m[1]*R+m[2]*M),s.y+=e*(m[3]*_+m[4]*R+m[5]*M),s.z+=e*(m[6]*_+m[7]*R+m[8]*M),o.x+=i.x*e,o.y+=i.y*e,o.z+=i.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(r?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}yn.idCounter=0,yn.COLLIDE_EVENT_NAME="collide",yn.DYNAMIC=1,yn.STATIC=2,yn.KINEMATIC=4,yn.AWAKE=0,yn.SLEEPY=1,yn.SLEEPING=2,yn.wakeupEvent={type:"wakeup"},yn.sleepyEvent={type:"sleepy"},yn.sleepEvent={type:"sleep"};const fIe=new le,pIe=new js,gIe=new Ri,mIe=new Kd,_Ie=new Kd,yIe=new le,bIe=new le,vIe=new le,wIe=new le,EIe=new le,CIe=new le,SIe=new le,DIe=new le;new le,new le;class N1{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new le,this.rayToWorld=new le,this.hitNormalWorld=new le,this.hitPointWorld=new le,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,r,i,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(r),this.hitPointWorld.copy(i),this.shape=s,this.body=o,this.distance=a}}let Z9,J9,eq,tq,nq,rq,iq;Z9=_n.types.SPHERE,J9=_n.types.PLANE,eq=_n.types.BOX,tq=_n.types.CYLINDER,nq=_n.types.CONVEXPOLYHEDRON,rq=_n.types.HEIGHTFIELD,iq=_n.types.TRIMESH;class Js{get[Z9](){return this._intersectSphere}get[J9](){return this._intersectPlane}get[eq](){return this._intersectBox}get[tq](){return this._intersectConvex}get[nq](){return this._intersectConvex}get[rq](){return this._intersectHeightfield}get[iq](){return this._intersectTrimesh}constructor(e=new le,t=new le){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=e.clone(),this.to=t.clone(),this.direction=new le,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Js.ANY,this.result=new N1,this.hasHit=!1,this.callback=r=>{}}intersectWorld(e,t){return this.mode=t.mode||Js.ANY,this.result=t.result||new N1,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(sq),U2.length=0,e.broadphase.aabbQuery(e,sq,U2),this.intersectBodies(U2),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const r=this.checkCollisionResponse;if(r&&!e.collisionResponse||0==(this.collisionFilterGroup&e.collisionFilterMask)||0==(e.collisionFilterGroup&this.collisionFilterMask))return;const i=OIe,s=NIe;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!r||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],i),i.vadd(e.position,i),this.intersectShape(c,s,i,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let r=0,i=e.length;!this.result.shouldStop&&r<i;r++)this.intersectBody(e[r])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,r,i){if(function(n,e,t){t.vsub(n,um);const r=um.dot(e);return e.scale(r,F1),F1.vadd(n,F1),t.distanceTo(F1)}(this.from,this.direction,r)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,r,i,e)}_intersectBox(e,t,r,i,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,r,i,s)}_intersectPlane(e,t,r,i,s){const o=this.from,a=this.to,c=this.direction,l=new le(0,0,1);t.vmult(l,l);const u=new le;o.vsub(r,u);const h=u.dot(l);if(a.vsub(r,u),h*u.dot(l)>0||o.distanceTo(a)<h)return;const g=l.dot(c);if(Math.abs(g)<this.precision)return;const m=new le,b=new le,_=new le;o.vsub(r,m);const R=-l.dot(m)/g;c.scale(R,b),o.vadd(b,_),this.reportIntersection(l,_,s,i,-1)}getAABB(e){const{lowerBound:t,upperBound:r}=e,i=this.to,s=this.from;t.x=Math.min(i.x,s.x),t.y=Math.min(i.y,s.y),t.z=Math.min(i.z,s.z),r.x=Math.max(i.x,s.x),r.y=Math.max(i.y,s.y),r.z=Math.max(i.z,s.z)}_intersectHeightfield(e,t,r,i,s){const o=PIe;o.from.copy(this.from),o.to.copy(this.to),ni.pointToLocalFrame(r,t,o.from,o.from),ni.pointToLocalFrame(r,t,o.to,o.to),o.updateDirection();const a=FIe;let c,l,u,h;c=l=0,u=h=e.data.length-1;const f=new Ri;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=c;g<u;g++)for(let m=l;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),ni.pointToWorldFrame(r,t,e.pillarOffset,P1),this._intersectConvex(e.pillarConvex,t,P1,i,s,oq),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),ni.pointToWorldFrame(r,t,e.pillarOffset,P1),this._intersectConvex(e.pillarConvex,t,P1,i,s,oq)}}}_intersectSphere(e,t,r,i,s){const o=this.from,a=this.to,c=e.radius,l=Hi(a.x-o.x,2)+Hi(a.y-o.y,2)+Hi(a.z-o.z,2),u=2*((a.x-o.x)*(o.x-r.x)+(a.y-o.y)*(o.y-r.y)+(a.z-o.z)*(o.z-r.z)),h=Hi(o.x-r.x,2)+Hi(o.y-r.y,2)+Hi(o.z-r.z,2)-Hi(c,2),f=Hi(u,2)-4*l*h,g=kIe,m=LIe;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(r,m),m.normalize(),this.reportIntersection(m,g,s,i,-1);else{const b=(-u-Math.sqrt(f))/(2*l),_=(-u+Math.sqrt(f))/(2*l);if(b>=0&&b<=1&&(o.lerp(a,b,g),g.vsub(r,m),m.normalize(),this.reportIntersection(m,g,s,i,-1)),this.result.shouldStop)return;_>=0&&_<=1&&(o.lerp(a,_,g),g.vsub(r,m),m.normalize(),this.reportIntersection(m,g,s,i,-1))}}_intersectConvex(e,t,r,i,s,o){const a=BIe,c=aq,l=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,_=m.distanceTo(this.to),R=l?l.length:u.length,M=this.result;for(let ee=0;!M.shouldStop&&ee<R;ee++){const _e=l?l[ee]:ee,Ie=u[_e],Ue=f[_e],at=t,St=r;c.copy(h[Ie[0]]),at.vmult(c,c),c.vadd(St,c),c.vsub(m,c),at.vmult(Ue,a);const Tt=g.dot(a);if(Math.abs(Tt)<this.precision)continue;const Ot=a.dot(c)/Tt;if(!(Ot<0)){g.scale(Ot,bc),bc.vadd(m,bc),Uu.copy(h[Ie[0]]),at.vmult(Uu,Uu),St.vadd(Uu,Uu);for(let qt=1;!M.shouldStop&&qt<Ie.length-1;qt++){Qd.copy(h[Ie[qt]]),Zd.copy(h[Ie[qt+1]]),at.vmult(Qd,Qd),at.vmult(Zd,Zd),St.vadd(Qd,Qd),St.vadd(Zd,Zd);const tn=bc.distanceTo(m);!Js.pointInTriangle(bc,Uu,Qd,Zd)&&!Js.pointInTriangle(bc,Qd,Uu,Zd)||tn>_||this.reportIntersection(a,bc,s,i,_e)}}}}_intersectTrimesh(e,t,r,i,s,o){const a=VIe,c=GIe,l=WIe,u=aq,h=jIe,f=UIe,g=HIe,m=$Ie,b=zIe,_=e.indices,R=this.from,M=this.to,ee=this.direction;l.position.copy(r),l.quaternion.copy(t),ni.vectorToLocalFrame(r,t,ee,h),ni.pointToLocalFrame(r,t,R,f),ni.pointToLocalFrame(r,t,M,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const _e=f.distanceSquared(g);e.tree.rayQuery(this,l,c);for(let Ie=0,Ue=c.length;!this.result.shouldStop&&Ie!==Ue;Ie++){const at=c[Ie];e.getNormal(at,a),e.getVertex(_[3*at],Uu),Uu.vsub(f,u);const St=h.dot(a),Tt=a.dot(u)/St;if(Tt<0)continue;h.scale(Tt,bc),bc.vadd(f,bc),e.getVertex(_[3*at+1],Qd),e.getVertex(_[3*at+2],Zd);const Ot=bc.distanceSquared(f);!Js.pointInTriangle(bc,Qd,Uu,Zd)&&!Js.pointInTriangle(bc,Uu,Qd,Zd)||Ot>_e||(ni.vectorToWorldFrame(t,a,b),ni.pointToWorldFrame(r,t,bc,m),this.reportIntersection(b,m,s,i,at))}c.length=0}reportIntersection(e,t,r,i,s){const o=this.from,a=this.to,c=o.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=void 0!==s?s:-1,this.mode){case Js.ALL:this.hasHit=!0,l.set(o,a,e,t,r,i,c),l.hasHit=!0,this.callback(l);break;case Js.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,r,i,c));break;case Js.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,r,i,c),l.shouldStop=!0}}static pointInTriangle(e,t,r,i){i.vsub(t,um),r.vsub(t,AE),e.vsub(t,H2);const s=um.dot(um),o=um.dot(AE),a=um.dot(H2),c=AE.dot(AE),l=AE.dot(H2);let u,h;return(u=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&u+h<s*c-o*o}}Js.CLOSEST=1,Js.ANY=2,Js.ALL=4;const sq=new Ri,U2=[],AE=new le,H2=new le,OIe=new le,NIe=new js,bc=new le,Uu=new le,Qd=new le,Zd=new le,oq={faceList:[0]},P1=new le,PIe=new Js,FIe=[],kIe=new le,LIe=new le,BIe=new le,aq=new le,VIe=new le,jIe=new le,UIe=new le,HIe=new le,zIe=new le,$Ie=new le;new Ri;const GIe=[],WIe=new ni,um=new le,F1=new le;let Eq,Cq,Sq,Dq,xq,Tq,Aq,Mq,Iq,Rq,Oq,Nq,Pq,Fq,kq,Lq,Bq,Vq,jq,Uq,Hq,zq,$q,Gq,Wq;new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new Js,new le,new le,new le(1,0,0),new le(0,1,0),new le(0,0,1),new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new Ri,new le,new Ri,new le,new le,new le,new le,new le,new le,new le,new Ri,new le,new ni,new Ri;const Qi={sphereSphere:_n.types.SPHERE,spherePlane:_n.types.SPHERE|_n.types.PLANE,boxBox:_n.types.BOX|_n.types.BOX,sphereBox:_n.types.SPHERE|_n.types.BOX,planeBox:_n.types.PLANE|_n.types.BOX,convexConvex:_n.types.CONVEXPOLYHEDRON,sphereConvex:_n.types.SPHERE|_n.types.CONVEXPOLYHEDRON,planeConvex:_n.types.PLANE|_n.types.CONVEXPOLYHEDRON,boxConvex:_n.types.BOX|_n.types.CONVEXPOLYHEDRON,sphereHeightfield:_n.types.SPHERE|_n.types.HEIGHTFIELD,boxHeightfield:_n.types.BOX|_n.types.HEIGHTFIELD,convexHeightfield:_n.types.CONVEXPOLYHEDRON|_n.types.HEIGHTFIELD,sphereParticle:_n.types.PARTICLE|_n.types.SPHERE,planeParticle:_n.types.PLANE|_n.types.PARTICLE,boxParticle:_n.types.BOX|_n.types.PARTICLE,convexParticle:_n.types.PARTICLE|_n.types.CONVEXPOLYHEDRON,cylinderCylinder:_n.types.CYLINDER,sphereCylinder:_n.types.SPHERE|_n.types.CYLINDER,planeCylinder:_n.types.PLANE|_n.types.CYLINDER,boxCylinder:_n.types.BOX|_n.types.CYLINDER,convexCylinder:_n.types.CONVEXPOLYHEDRON|_n.types.CYLINDER,heightfieldCylinder:_n.types.HEIGHTFIELD|_n.types.CYLINDER,particleCylinder:_n.types.PARTICLE|_n.types.CYLINDER,sphereTrimesh:_n.types.SPHERE|_n.types.TRIMESH,planeTrimesh:_n.types.PLANE|_n.types.TRIMESH};Eq=Qi.sphereSphere,Cq=Qi.spherePlane,Sq=Qi.boxBox,Dq=Qi.sphereBox,xq=Qi.planeBox,Tq=Qi.convexConvex,Aq=Qi.sphereConvex,Mq=Qi.planeConvex,Iq=Qi.boxConvex,Rq=Qi.sphereHeightfield,Oq=Qi.boxHeightfield,Nq=Qi.convexHeightfield,Pq=Qi.sphereParticle,Fq=Qi.planeParticle,kq=Qi.boxParticle,Lq=Qi.convexParticle,Bq=Qi.cylinderCylinder,Vq=Qi.sphereCylinder,jq=Qi.planeCylinder,Uq=Qi.boxCylinder,Hq=Qi.convexCylinder,zq=Qi.heightfieldCylinder,$q=Qi.particleCylinder,Gq=Qi.sphereTrimesh,Wq=Qi.planeTrimesh,new le,new le,new le,new le,new le,new js,new js,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new Ri,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new js,new le,new le,new le,new le,new le,new le,new le,new le,new Ri,new Js;const Uo=globalThis.performance||{};if(!Uo.now){let n=Date.now();Uo.timing&&Uo.timing.navigationStart&&(n=Uo.timing.navigationStart),Uo.now=()=>Date.now()-n}var pm=tt(517);class is extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new z;return this._value}next(e){super.next(this._value=e)}}function Jy(n,e,t){e||(e=new Zn(Zn.IDENTITY));const r=new Zn(Zn.IDENTITY);if(!n)return!0;if(n.matrix)r.copy(n.matrix);else{if(r.identity(),n.translation&&r.translate(n.translation),n.rotation){const s=new Zn(Zn.IDENTITY).fromQuaternion(n.rotation);r.multiplyRight(s)}n.scale&&r.scale(n.scale)}const i=new Zn(e).multiplyRight(r);if(!1===t(n,i,e))return!1;for(const s of n.nodes||n.children||[])if(!1===Jy(s,i,t))return!1;return!0}function Zq(){iW([S9,Ky])}function Jq(n,e){const t=e.nodes.find(r=>r.name===n);if(t){let r=!1;for(const i of e.scenes)r||Jy(i,new Zn(Zn.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,r=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function G2(n,e){return vi(this,void 0,void 0,function*(){const t=n.scenegraph;let r;r=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const i=yield u1(r,Ky,{DracoLoader:m2,gltf:{decompressMeshes:!0,postProcess:!0}});return Jq(n.scenegraphNode,i)})}function qNe(n,e){return vi(this,void 0,void 0,function*(){return Jq(n,yield e)})}function W2(n,e,t){if(e&&0!==e.length)return new E1e(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Xr.CARTESIAN,data:e,mesh:new rIe,wireframe:!1,getTransformMatrix:r=>r.transformMatrix,getColor:r=>r.color||[255,255,255,229.5]},t))}let KNe=(()=>{class n extends SDe{initializeState(){const{data:t}=this.props;this.setState({data:null!=t?t:[],zoomOpacity:.8,doCollisions:!1}),Zq()}renderLayers(){const t=this.state,r=t.data.filter(c=>!c.scenegraph&&!c.wireframe&&c.unpickable),i=t.data.filter(c=>!c.scenegraph&&!c.wireframe&&!c.unpickable),s=t.data.filter(c=>!c.scenegraph&&c.wireframe),o=t.data.filter(c=>!!c.scenegraph);t.doCollisions&&function(n){vi(this,void 0,void 0,function*(){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&!o.wireframe).map(o=>{const a=new Zn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new Ri({lowerBound:new le(...c.map((u,h)=>Math.min(u,l[h]))),upperBound:new le(...l.map((u,h)=>Math.max(u,c[h])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield d1(o.scenegraph,Ky,{DracoLoader:m2,decompress:!0,postProcess:!0});for(const c of a.scenes)Jy(c,new Zn(o.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new Ri({lowerBound:new le(...f.map((m,b)=>Math.min(m,g[b]))),upperBound:new le(...g.map((m,b)=>Math.max(m,f[b])))}),gltf:a})}return!0})}const r=[],i=[];for(const o of e){const a=[];for(const c of t)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?r.push({"@id":o.entityId,name:o.name,hits:a}):i.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:r,sad:i,maxHits:Math.max(...r.map(o=>o.hits.length))});const s=[];for(const o of r){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),r})}(t.data);const a={};for(const c of o)c.scenegraph&&c.scenegraphNode&&!Object.prototype.hasOwnProperty.call(a,c.scenegraph)&&(a[c.scenegraph]=G2({scenegraph:c.scenegraph},n.gltfCache));return[W2("cubes",r,{wireframe:!1,pickable:!1}),W2("pickableCubes",i,{wireframe:!1,pickable:!0}),W2("wireframes",s,{wireframe:!0,pickable:!1}),...o.map(c=>{var l;return new QMe({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:void 0!==c.opacity?c.opacity:1,pickable:!c.unpickable,coordinateSystem:Xr.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?qNe(c.scenegraphNode,a[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:null!==(l=c.color)&&void 0!==l?l:[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}})})].filter(c=>!!c)}getPickingInfo(t){return t.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function eY(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),eY(t,e);return e}let QNe=(()=>{class n{constructor(t){var r,i,s,o,a;this.deckProps=t,this.bodyUILayer=new KNe({}),this.nodeClickSubject=new te,this.nodeHoverStartSubject=new te,this.nodeHoverStopSubject=new te,this.sceneRotationSubject=new is([0,0]),this.nodeDragStartSubject=new te,this.nodeDragSubject=new te,this.nodeDragEndSubject=new te,this.nodeClick$=this.nodeClickSubject.pipe(oo()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(oo()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(oo()),this.sceneRotation$=this.sceneRotationSubject.pipe(oo()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(oo()),this.nodeDrag$=this.nodeDragSubject.pipe(oo()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(oo());const c=Object.assign(Object.assign({},t),{views:["orthographic"===t.camera?new kDe({flipY:!1,near:-1e3}):new VDe({orbitAxis:"Y"})],controller:void 0===t.interactive||t.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:l=>{var u;return null!==(u=this.cursor)&&void 0!==u?u:l.isDragging?"grabbing":"grab"}});t.legacyLighting&&(c.effects=[new BL({ambientLight:new pW({color:[255,255,255],intensity:10})})]),this.deck=new E1(c),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(r=t.minRotationX)&&void 0!==r?r:-15,maxRotationX:null!==(i=t.maxRotationX)&&void 0!==i?i:15,target:null!==(s=t.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=t.rotation)&&void 0!==o?o:0,zoom:null!==(a=t.zoom)&&void 0!==a?a:9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return vi(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if((null==t?void 0:t.length)>0){let r=this.bodyUILayer.state.zoomOpacity,i=!1;for(const s of t)s.zoomToOnLoad&&(this.zoomTo(s),i=!0);r=i?.05:r,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,r):this.bodyUILayer.setState({data:t,zoomOpacity:r})}}debugSceneNodeProcessing(t,r){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new Zn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,e,t){return vi(this,void 0,void 0,function*(){Zq();const r=yield G2({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"}),i={},s=[];for(const o of r.scenes)Jy(o,e=new Zn(e||Zn.IDENTITY),(a,c)=>{const l={"@id":a.name||a.id,"@type":"ProcessedNode",transformMatrix:new Zn(c),wireframe:!0,node:a};if(s.push({"@id":`GLTF:${l["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:l["@id"],transformMatrix:new Zn(e||Zn.IDENTITY),tooltip:a.name||a.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:a}),a.mesh&&a.mesh.primitives&&a.mesh.primitives.length>0)for(const u of a.mesh.primitives)if(u.attributes.POSITION&&u.attributes.POSITION.min){const h=c.transformAsPoint(u.attributes.POSITION.min,[]),f=c.transformAsPoint(u.attributes.POSITION.max,[]);l.bbox=new Ri({lowerBound:new le(...h.map((g,m)=>Math.min(g,f[m]))),upperBound:new le(...f.map((g,m)=>Math.max(g,h[m])))})}return i[l["@id"]]=l,!0});for(const o of Object.values(i).filter(a=>!a.bbox)){for(const a of eY(o.node).map(c=>i[c]).filter(c=>c.bbox))o.bbox?o.bbox.extend(a.bbox):o.bbox=a.bbox.clone();o.bbox||delete i[o["@id"]]}for(const o of Object.values(i)){const a=o.bbox.lowerBound,u=(o.size=o.bbox.upperBound.clone().vsub(a)).clone().vmul(new le(.5,.5,.5)),h=o.center=a.clone().vadd(u);o.transformMatrix=new Zn(Zn.IDENTITY).translate(h.toArray()).scale(u.toArray())}for(const o of s)i[o["@id"]]=o;return i})})(i,s).then(o=>{console.log("results",o),console.log("data",t),(t=t.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:r})})}zoomTo(t){const r=new Zn(t.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:r.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:r}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object&&t.object["@id"]?r!==t.object&&(r&&this.nodeHoverStopSubject.next(r),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):r&&(this.nodeHoverStopSubject.next(r),this.lastHovered=void 0)}_onClick(t,r){var i,s;t.picked&&t.object&&t.object["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:null!==(s=null===(i=null==r?void 0:r.srcEvent)||void 0===i?void 0:i.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(t){var r;if(null===(r=t.interactionState)||void 0===r?void 0:r.isZooming){const i=this.bodyUILayer.state,s=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==s&&this.bodyUILayer.setState({data:i.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},t.viewState)}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,r){this._dragEvent(t,r,this.nodeDragStartSubject)}_onDrag(t,r){this._dragEvent(t,r,this.nodeDragSubject)}_onDragEnd(t,r){this._dragEvent(t,r,this.nodeDragEndSubject)}_dragEvent(t,r,i){var s;(null===(s=null==t?void 0:t.object)||void 0===s?void 0:s["@id"])&&i.next({node:t.object,info:t,e:r})}}return Ms([pm.ZP],n.prototype,"_onHover",null),Ms([pm.ZP],n.prototype,"_onClick",null),Ms([pm.ZP],n.prototype,"_onViewStateChange",null),Ms([pm.ZP],n.prototype,"_onDragStart",null),Ms([pm.ZP],n.prototype,"_onDrag",null),Ms([pm.ZP],n.prototype,"_onDragEnd",null),n})();function JNe(n,e){return n===e}function ePe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const r=e.length;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function tY(n,e=JNe){let t=null,r=null;function i(){return ePe(e,t,arguments)||(r=n.apply(null,arguments)),t=arguments,r}return i.reset=function(){t=null,r=null},i}const nPe=tY(function(){const n=nF();if(!n)return!1;const e=n.injector.get(R6,null);return!!e&&e.some(r=>(r&&r.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let q2=(()=>{class n{constructor(){this.bootstrap$=new Zg(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Y2=new $t("INITIAL_STATE_TOKEN");let rPe=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const nY=new $t("Internals.StateContextFactory"),rY=new $t("Internals.StateFactory");function PE(...n){if(1===n.length){const e=n[0];if(B(e))return H1(e,null);if(se(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return H1(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return H1(n=1===n.length&&B(n[0])?n[0]:n,null).pipe(me(t=>e(...t)))}return H1(n,null)}function H1(n,e){return new L(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=Fe(n[a]);let l=!1;t.add(c.subscribe({next:u=>{l||(l=!0,o++),i[a]=u},error:u=>t.error(u),complete:()=>{s++,(s===r||!l)&&(o===r&&t.next(e?e.reduce((u,h,f)=>(u[h]=i[f],u),{}):i),t.complete())}}))}})}function hi(n,e){return function(r){return r.lift(new iPe(n,e))}}class iPe{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new sPe(e,this.predicate,this.thisArg))}}class sPe extends v{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Kc(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,o,s=0,a=!1,c=!1;return function(u){let h;s++,!i||a?(a=!1,i=new Zg(n,e,r),h=i.subscribe(this),o=u.subscribe({next(f){i.next(f)},error(f){a=!0,i.error(f)},complete(){c=!0,o=void 0,i.complete()}}),c&&(o=void 0)):h=i.subscribe(this),this.add(()=>{s--,h.unsubscribe(),h=void 0,o&&!c&&t&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const iY=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function gs(n){return e=>0===n?$w():e.lift(new aPe(n))}class aPe{constructor(e){if(this.total=e,this.total<0)throw new iY}call(e,t){return t.subscribe(new cPe(e,this.total))}}class cPe extends v{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function sY(n,e){return e?t=>t.pipe(sY((r,i)=>Fe(n(r,i)).pipe(me((s,o)=>e(r,s,i,o))))):t=>t.lift(new lPe(n))}class lPe{constructor(e){this.project=e}call(e,t){return t.subscribe(new uPe(e,this.project))}}class uPe extends ge{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new Et(this),r=this.destination;r.add(t);const i=N(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function z1(n=null){return e=>e.lift(new dPe(n))}class dPe{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new hPe(e,this.defaultValue))}}class hPe extends v{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Hu(n){return function(t){const r=new fPe(n),i=t.lift(r);return r.caught=i}}class fPe{constructor(e){this.selector=e}call(e,t){return t.subscribe(new pPe(e,this.selector,this.caught))}}class pPe extends ge{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const r=new Et(this);this.add(r);const i=N(t,r);i!==r&&this.add(i)}}}function Us(n){return e=>e.lift(new gPe(n))}class gPe{constructor(e){this.notifier=e}call(e,t){const r=new mPe(e),i=N(this.notifier,new Et(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class mPe extends ge{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Ip(){}function Oi(n,e,t){return function(i){return i.lift(new _Pe(n,e,t))}}class _Pe{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new yPe(e,this.nextOrObserver,this.error,this.complete))}}class yPe extends v{constructor(e,t,r,i){super(e),this._tapNext=Ip,this._tapError=Ip,this._tapComplete=Ip,this._tapError=r||Ip,this._tapComplete=i||Ip,Y(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Ip,this._tapError=t.error||Ip,this._tapComplete=t.complete||Ip)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function sf(n,e){return t=>t.lift(new bPe(n,e))}class bPe{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new vPe(e,this.compare,this.keySelector))}}class vPe extends v{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}const Xc={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,e,t)=>`State name '${n}' from ${e} already exists in ${t}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let oY=(()=>{class n{constructor(t,r){this._ngZone=t,this._platformId=r,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return function(n){return"server"===n}(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return En.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return En.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof En||console.warn(Xc.ZONE_WARNING())}}return n.\u0275fac=function(t){return new(t||n)(Oe(En),Oe(Fd))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const aY=new $t("ROOT_STATE_TOKEN"),cY=new $t("FEATURE_STATE_TOKEN"),lY=new $t("NGXS_PLUGINS"),uY=new $t("NG_TEST_MODE"),dY=new $t("NG_DEV_MODE"),of="NGXS_META",hY="NGXS_OPTIONS_META";let gm=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=oY}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class wPe{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}}const fY=new $t("NGXS_EXECUTION_STRATEGY");function mm(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const pY=(n,e,t)=>{n=Object.assign({},n);const r=e.split("."),i=r.length-1;return r.reduce((s,o,a)=>(s[o]=a===i?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},$1=(n,e)=>e.split(".").reduce((t,r)=>t&&t[r],n),X2=n=>n&&"object"==typeof n&&!Array.isArray(n),Q2=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(X2(n)&&X2(t))for(const r in t)X2(t[r])?(n[r]||Object.assign(n,{[r]:{}}),Q2(n[r],t[r])):Object.assign(n,{[r]:t[r]});return Q2(n,...e)};function FE(n){return n[of]}function mY(n,e){const t=$1(e.currentAppState,n.path),r=$1(e.newAppState,n.path);return new wPe(t,r,!n.isInitialised)}function MPe(...n){return function(n,e,t=OPe){const r=function(n){return n.reduce((e,t)=>(e[mm(t)]=!0,e),{})}(n),i=e&&function(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function(n,e){return hi(t=>{const r=mm(t.action);return n[r]&&(!e||e[t.status])})}(r,i),t())}}(n,["DISPATCHED"])}function OPe(){return me(n=>n.action)}function G1(n){return e=>new L(t=>e.subscribe({next(r){n.leave(()=>t.next(r))},error(r){n.leave(()=>t.error(r))},complete(){n.leave(()=>t.complete())}}))}let W1=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(fY))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class FPe extends te{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let q1=(()=>{class n extends FPe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ui(n)))(r||n)}}(),n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),kPe=(()=>{class n extends L{constructor(t,r){super(i=>{const s=t.pipe(G1(r)).subscribe({next:o=>i.next(o),error:o=>i.error(o),complete:()=>i.complete()});i.add(s)})}}return n.\u0275fac=function(t){return new(t||n)(Oe(q1),Oe(W1))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const _Y=n=>(...e)=>n.shift()(...e,(...r)=>_Y(n)(...r));let Y1=(()=>{class n extends is{constructor(){super({})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),tB=(()=>{class n{constructor(t,r){this._parentManager=t,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}}return n.\u0275fac=function(t){return new(t||n)(Oe(n,12),Oe(lY,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),nB=(()=>{class n extends te{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ui(n)))(r||n)}}(),n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),yY=(()=>{class n{constructor(t,r,i,s,o,a){this._injector=t,this._actions=r,this._actionResults=i,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){const r=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return r.subscribe({error:i=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(cc),this._errorHandler.handleError(i)}catch(s){}})}),r.pipe(G1(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?rn(this._stateStream.getValue()):PE(t.map(r=>this.dispatchSingle(r))):this.dispatchSingle(t)}dispatchSingle(t){if(!mm(t))return Ey(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const i=this._stateStream.getValue();return _Y([...this._pluginManager.plugins,(o,a)=>{o!==i&&this._stateStream.next(o);const c=this.getActionResultStream(a);return c.subscribe(l=>this._actions.next(l)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(c)}])(i,t).pipe(Kc())}getActionResultStream(t){return this._actionResults.pipe(hi(r=>r.action===t&&"DISPATCHED"!==r.status),gs(1),Kc())}createDispatchObservable(t){return t.pipe(sY(r=>{switch(r.status){case"SUCCESSFUL":return rn(this._stateStream.getValue());case"ERRORED":return Ey(r.error);default:return Ld}})).pipe(Kc())}}return n.\u0275fac=function(t){return new(t||n)(Oe(Wn),Oe(q1),Oe(nB),Oe(tB),Oe(Y1),Oe(W1))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const bY=n=>{Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(r){t.call(n,r)&&(!e||"caller"!==r&&"callee"!==r&&"arguments"!==r)&&null!==n[r]&&("object"==typeof n[r]||"function"==typeof n[r])&&!Object.isFrozen(n[r])&&bY(n[r])}),n};let vY=(()=>{class n{constructor(t,r){this.isDevMode=t,this.isTestMode=r}}return n.\u0275fac=function(t){return new(t||n)(Oe(dY),Oe(uY))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),wY=(()=>{class n{constructor(t,r){this._host=t,this._config=r}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(Xc.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(Xc.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(t){return new(t||n)(Oe(vY),Oe(gm))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),tb=(()=>{class n{constructor(t,r,i,s){this._stateStream=t,this._dispatcher=r,this._config=i,s.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:r=>{const i=bY(r);return t.setState(i)},dispatch:r=>t.dispatch(r)}}setStateToTheCurrentWithNew(t){const r=this.getRootStateOperations(),i=r.getState();r.setState(Object.assign({},i,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(Oe(Y1),Oe(yY),Oe(gm),Oe(wY))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),K1=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const r=this._internalStateOperations.getRootStateOperations();function i(c){return $1(c,t.path)}function s(c,l){const u=pY(c,t.path,l),h=t.instance;if(h.ngxsOnChanges){const f=mY(t,{currentAppState:c,newAppState:u});h.ngxsOnChanges(f)}return r.setState(u),u}function o(c,l){return s(c,l(i(c)))}return{getState:()=>i(r.getState()),patchState:c=>o(r.getState(),function(n){return e=>{if(Array.isArray(n))throw new Error(Xc.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(Xc.PATCHING_PRIMITIVE());const t=Object.assign({},e);for(const r in n)t[r]=n[r];return t}}(c)),setState(c){const l=r.getState();return function(c){return"function"==typeof c}(c)?o(l,c):s(l,c)},dispatch:c=>r.dispatch(c)}}}return n.\u0275fac=function(t){return new(t||n)(Oe(tb))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class X1{static stateNameErrorMessage(e){return Xc.STATE_NAME(e)}static checkCorrectStateName(e){if(!e)throw new Error(Xc.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}static checkStateNameIsUnique(e,t){const i=this.getValidStateMeta(e).name,s=t[i];if(s&&s!==e)throw new Error(Xc.STATE_UNIQUE(i,e.name,s.name));return i}static getValidStateMeta(e){const t=FE(e);if(!t)throw new Error(Xc.STATE_DECORATOR());return t}}X1.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let nb=(()=>{class n{constructor(t,r,i,s,o,a,c){this._injector=t,this._config=r,this._parentFactory=i,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=tY(()=>{const l=this;function u(f){const g=l.statePaths[f];return g?function(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(n){const e=n.slice();return t=>e.reduce((r,i)=>r&&r[i],t)}(n):function(n){const e=n;let t="store."+e[0],r=0;const i=e.length;let s=t;for(;++r<i;)s=s+" && "+(t=t+"."+e[r]);return new Function("store","return "+s+";")}(n)}(g.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign({},l._config.selectorOptions,f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let r={};return r=Array.isArray(t)?t.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,r}static checkStatesAreValid(t){t.forEach(X1.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){n.checkStatesAreValid(t);const{newStates:r}=this.addToStatesMap(t);if(!r.length)return[];const i=function(n){const e=t=>{const r=n.find(i=>i===t);if(!r)throw new Error(`Child state not found: ${t}. \r\nYou may have forgotten to add states to module`);return r[of].name};return n.reduce((t,r)=>{const{name:i,children:s}=r[of];return t[i]=(s||[]).map(e),t},{})}(r),s=function(n){const e=[],t={},r=(i,s=[])=>{Array.isArray(s)||(s=[]),s.push(i),t[i]=!0,n[i].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${i}': ${s.join(" -> ")}`);t[o]||r(o,s.slice(0))}),e.indexOf(i)<0&&e.push(i)};return Object.keys(n).forEach(i=>r(i)),e.reverse()}(i),o=function(n,e={}){const t=(r,i)=>{for(const s in r)if(r.hasOwnProperty(s)&&r[s].indexOf(i)>=0){const o=t(r,s);return null!==o?`${o}.${s}`:s}return null};for(const r in n)if(n.hasOwnProperty(r)){const i=t(n,r);e[r]=i?`${i}.${r}`:r}return e}(i),a=function(n){return n.reduce((e,t)=>(e[t[of].name]=t,e),{})}(r),c=[];for(const l of s){const u=a[l],h=o[l],f=u[of];this.addRuntimeInfoToMeta(f,h);const g={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:n.cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(g),this.states.push(g)}return c}addAndReturnDefaults(t){const i=this.add(t||[]);return{defaults:i.reduce((o,a)=>pY(o,a.path,a.defaults),{}),states:i}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(hi(t=>"DISPATCHED"===t.status),V(({action:t})=>this.invokeActions(this._actions,t).pipe(me(()=>({action:t,status:"SUCCESSFUL"})),z1({action:t,status:"CANCELED"}),Hu(r=>rn({action:t,status:"ERRORED",error:r}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,r){const i=mm(r),s=[];for(const o of this.states){const a=o.actions[i];if(a)for(const c of a){const l=this._stateContextFactory.createStateContext(o);try{let u=o.instance[c.fn](l,r);u instanceof Promise&&(u=Fe(u)),u instanceof L?(u=u.pipe(z1({})),c.options.cancelUncompleted&&(u=u.pipe(Us(t.pipe(MPe(r)))))):u=rn({}).pipe(Kc()),s.push(u)}catch(u){s.push(Ey(u))}}}return s.length||s.push(rn({})),PE(s)}addToStatesMap(t){const r=[],i=this.statesByName;for(const s of t){const o=X1.checkStateNameIsUnique(s,i);!i[o]&&(r.push(s),i[o]=s)}return{newStates:r}}addRuntimeInfoToMeta(t,r){this.statePaths[t.name]=r,t.path=r}hasBeenMountedAndBootstrapped(t,r){const i=void 0!==$1(this._initialState,r);return this.statesByName[t]&&i}}return n.\u0275fac=function(t){return new(t||n)(Oe(Wn),Oe(gm),Oe(n,12),Oe(q1),Oe(nB),Oe(K1),Oe(Y2,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),rB=(()=>{class n{constructor(t,r,i){this.internalStateOperations=t,this.stateContextFactory=r,this.bootstrapper=i}ngxsBootstrap(t,r){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(hi(()=>!!r),Oi(()=>this.invokeInit(r.states)),V(()=>this.bootstrapper.appBootstrapped$),hi(i=>!!i)).subscribe(()=>this.invokeBootstrap(r.states))}invokeInit(t){for(const r of t){const i=r.instance;if(i.ngxsOnChanges){const a=mY(r,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});i.ngxsOnChanges(a)}i.ngxsOnInit&&i.ngxsOnInit(this.getStateContext(r)),r.isInitialised=!0}}invokeBootstrap(t){for(const r of t){const i=r.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this.getStateContext(r))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(tb),Oe(K1),Oe(q2))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();let Rp=(()=>{class n{constructor(t,r,i,s,o,a){this._stateStream=t,this._internalStateOperations=r,this._config=i,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const r=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(me(r),Hu(i=>{const{suppressErrors:s}=this._config.selectorOptions;return i instanceof TypeError&&s?rn(void 0):Ey(i)}),sf(),G1(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(gs(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(G1(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return function(n){const e=function(n){return n.NGXS_SELECTOR_META}(n)||FE(n);return e&&e.makeRootSelector||(()=>n)}(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const r=this._stateStream.value;if(!r||0===Object.keys(r).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(Oe(Y1),Oe(tb),Oe(gm),Oe(W1),Oe(nb),Oe(Y2,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),kE=(()=>{class n{constructor(t,r){n.store=t,n.config=r}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(Oe(Rp),Oe(gm))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class zPe{static get type(){return"@@INIT"}}class $Pe{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}const Z1=new Zg(1);let WPe=(()=>{class n{constructor(t,r,i,s,o=[],a){!function(){try{const n=window.ng,t=!(n.probe&&n.coreTokens)&&pc();Z1.next(t)}catch(n){Z1.next(!1)}finally{Z1.complete()}}();const c=t.addAndReturnDefaults(o);r.setStateToTheCurrentWithNew(c),t.connectActionHandlers(),a.ngxsBootstrap(new zPe,c)}}return n.\u0275fac=function(t){return new(t||n)(Oe(nb),Oe(tb),Oe(Rp),Oe(kE),Oe(aY,8),Oe(rB))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})(),qPe=(()=>{class n{constructor(t,r,i,s=[],o){const a=n.flattenStates(s),c=i.addAndReturnDefaults(a);c.states.length&&(r.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new $Pe(c.defaults),c))}static flattenStates(t=[]){return t.reduce((r,i)=>r.concat(i),[])}}return n.\u0275fac=function(t){return new(t||n)(Oe(Rp),Oe(tb),Oe(nb),Oe(cY,8),Oe(rB))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})();class vc{static forRoot(e=[],t={}){return{ngModule:WPe,providers:[nb,K1,kPe,q1,q2,wY,vY,rB,yY,nB,tb,W1,Rp,Y1,kE,tB,...e,...vc.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:qPe,providers:[nb,tB,...e,{provide:cY,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:uY,useValue:nPe},{provide:dY,useValue:pc},{provide:fY,useClass:t.executionStrategy||oY},{provide:aY,useValue:e},{provide:vc.ROOT_OPTIONS,useValue:t},{provide:gm,useFactory:vc.ngxsConfigFactory,deps:[vc.ROOT_OPTIONS]},{provide:Yx,useFactory:vc.appBootstrapListenerFactory,multi:!0,deps:[q2]},{provide:Y2,useFactory:vc.getInitialState},{provide:nY,useExisting:K1},{provide:rY,useExisting:nb}]}static ngxsConfigFactory(e){return Q2(new gm,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return rPe.pop()}}function KPe(n){return r=>{!function(n){Z1.subscribe(e=>{e&&(n.\u0275prov||console.warn(Xc.UNDECORATED_STATE_IN_IVY(n.name)))})}(r);const i=r,s=function(n){if(!n.hasOwnProperty(of)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,of,{value:e})}return FE(n)}(i),o=Object.getPrototypeOf(i),a=function(r){return Object.assign({},r[hY]||{},n)}(o);(function(r){const{meta:i,inheritedStateClass:s,optionsWithInheritance:o}=r,{children:a,defaults:c,name:l}=o,u="string"==typeof l?l:l&&l.getName()||null;X1.checkCorrectStateName(u),s.hasOwnProperty(of)&&(i.actions=Object.assign({},i.actions,(s[of]||{}).actions)),i.children=a,i.defaults=c,i.name=u})({meta:s,inheritedStateClass:o,optionsWithInheritance:a}),i[hY]=a}}vc.\u0275fac=function(e){return new(e||vc)},vc.\u0275mod=hn({type:vc}),vc.\u0275inj=vt({}),vc.ROOT_OPTIONS=new $t("ROOT_OPTIONS");const Qc=new $t("NgValueAccessor"),uA=new Nu(DT);class rke{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new ike(e,this.dueTime,this.scheduler))}}class ike extends v{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ske,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function ske(n){n.debouncedNext()}class oke{constructor(e){this.total=e}call(e,t){return t.subscribe(new ake(e,this.total))}}class ake extends v{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function fi(n){return null!=n&&"false"!=`${n}`}function Zc(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function cf(n){return n instanceof Dn?n.nativeElement:n}let MB;try{MB="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){MB=!1}let GE,IB,pi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Xg(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!MB)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Oe(Fd))},n.\u0275prov=We({factory:function(){return new n(Oe(Fd))},token:n,providedIn:"root"}),n})(),$E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})();function sb(n){return function(){if(null==GE&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>GE=!0}))}finally{GE=GE||!1}return GE}()?n:!!n.capture}function bm(n){return n.composedPath?n.composedPath()[0]:n.target}let RB=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({factory:function(){return new n},token:n,providedIn:"root"}),n})(),NK=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=cf(t);return new L(i=>{const o=this._observeElement(r).subscribe(i);return()=>{o.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new te,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Oe(RB))},n.\u0275prov=We({factory:function(){return new n(Oe(RB))},token:n,providedIn:"root"}),n})(),PK=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new gn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=fi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Zc(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(n,e=uA){return t=>t.lift(new rke(n,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(Me(NK),Me(Dn),Me(En))},n.\u0275dir=Lt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),OB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[RB]}),n})();function GK(n){return 0===n.offsetX&&0===n.offsetY}function WK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const qK=new $t("cdk-input-modality-detector-options"),Nke={ignoreKeys:[18,17,224,91,16]},ob=sb({passive:!0,capture:!0});let KK=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new is(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,c;(null===(c=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===c?void 0:c.some(l=>l===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=bm(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(GK(o)?"keyboard":"mouse"),this._mostRecentTarget=bm(o))},this._onTouchstart=o=>{WK(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=bm(o))},this._options=Object.assign(Object.assign({},Nke),s),this.modalityDetected=this._modality.pipe(function(n){return e=>e.lift(new oke(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(sf()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,ob),i.addEventListener("mousedown",this._onMousedown,ob),i.addEventListener("touchstart",this._onTouchstart,ob)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,ob),document.removeEventListener("mousedown",this._onMousedown,ob),document.removeEventListener("touchstart",this._onTouchstart,ob))}}return n.\u0275fac=function(t){return new(t||n)(Oe(pi),Oe(En),Oe(pn),Oe(qK,8))},n.\u0275prov=We({factory:function(){return new n(Oe(pi),Oe(En),Oe(pn),Oe(qK,8))},token:n,providedIn:"root"}),n})();const ZK=new $t("cdk-focus-monitor-default-options"),mA=sb({passive:!0,capture:!0});let lf=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new te,this._rootNodeFocusAndBlurListener=a=>{const c=bm(a),l="focus"===a.type?this._onFocus:this._onBlur;for(let u=c;u;u=u.parentElement)l.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,r=!1){const i=cf(t);if(!this._platform.isBrowser||1!==i.nodeType)return rn(null);const s=function(n){if(function(){if(null==IB){const n="undefined"!=typeof document?document.head:null;IB=!(!n||!n.createShadowRoot&&!n.attachShadow)}return IB}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new te,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=cf(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=cf(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,r,i){i?t.classList.add(r):t.classList.remove(r)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){this._toggleClass(t,"cdk-focused",!!r),this._toggleClass(t,"cdk-touch-focused","touch"===r),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(t,"cdk-mouse-focused","mouse"===r),this._toggleClass(t,"cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=bm(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Us(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(Oe(En),Oe(pi),Oe(KK),Oe(pn,8),Oe(ZK,8))},n.\u0275prov=We({factory:function(){return new n(Oe(En),Oe(pi),Oe(KK),Oe(pn,8),Oe(ZK,8))},token:n,providedIn:"root"}),n})();const JK="cdk-high-contrast-black-on-white",eX="cdk-high-contrast-white-on-black",PB="cdk-high-contrast-active";let tX=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(PB),t.remove(JK),t.remove(eX),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(PB),t.add(JK)):2===r&&(t.add(PB),t.add(eX))}}}return n.\u0275fac=function(t){return new(t||n)(Oe(pi),Oe(pn))},n.\u0275prov=We({factory:function(){return new n(Oe(pi),Oe(pn))},token:n,providedIn:"root"}),n})(),qE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})();const rX=new Vh("12.2.5");function oX(n){Promise.resolve(null).then(n)}class cb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){oX(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function cX(){return"undefined"!=typeof window&&void 0!==window.document}function kB(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let jB=(n,e)=>!1,UB=(n,e)=>!1,dX=(n,e,t)=>[];const hX=kB();(hX||"undefined"!=typeof Element)&&(jB=cX()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),UB=(()=>{if(hX||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):UB}})(),dX=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let vm=null,fX=!1;function HB(n){vm||(vm=("undefined"!=typeof document?document.body:null)||{},fX=!!vm.style&&"WebkitAppearance"in vm.style);let e=!0;return vm.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in vm.style,!e&&fX&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in vm.style)),e}const zB=UB,$B=jB,GB=dX;let gX=(()=>{class n{validateStyleProperty(t){return HB(t)}matchesElement(t,r){return zB(t,r)}containsElement(t,r){return $B(t,r)}query(t,r,i){return GB(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new cb(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class _A{}_A.NOOP=new gX;function bX(n,e,t){return t?e+":"+t+";":""}function vX(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=bX(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=bX(0,qke(t),n.style[t]));n.setAttribute("style",e)}function th(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=XB(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),kB()&&vX(n))}function Em(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=XB(t);n.style[r]=""}),kB()&&vX(n))}const Wke=/-+([a-z0-9])/g;function XB(n){return n.replace(Wke,(...e)=>e[1].toUpperCase())}function qke(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class db{constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=db.initialStylesByElement.get(e);i||db.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&th(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(th(this._element,this._initialStyles),this._endStyles&&(th(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(db.initialStylesByElement.delete(this._element),this._startStyles&&(Em(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Em(this._element,this._endStyles),this._endStyles=null),th(this._element,this._initialStyles),this._state=3)}}db.initialStylesByElement=new WeakMap;const $u=new $t("AnimationModuleType"),iQ=new Vh("12.2.5"),p2e=new $t("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Sm,Vi=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checkIsEnabled(t){return!(!pc()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&iQ.full!==rX.full&&console.warn("The Angular Material version ("+iQ.full+") does not match the Angular CDK version ("+rX.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(Oe(tX),Oe(p2e,8),Oe(pn))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[qE],qE]}),n})();function kA(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=fi(e)}}}function XE(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function h3(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fi(e)}}}function f3(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Zc(t):this.defaultTabIndex}}}try{Sm="undefined"!=typeof Intl}catch(n){Sm=!1}class T2e{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const aQ={enterDuration:225,exitDuration:150},p3=sb({passive:!0}),cQ=["mousedown","touchstart"],lQ=["mouseup","mouseleave","touchend","touchcancel"];class M2e{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=cf(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},aQ),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(u),u.style.transform="scale(1)";const h=new T2e(this,u,r);return h.state=0,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const f=h===this._mostRecentTransientRipple;h.state=1,!r.persistent&&(!f||!this._isPointerDown)&&h.fadeOut()},l),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},aQ),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=cf(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(cQ))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(lQ),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=GK(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!WK(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,p3)})})}_removeTriggerEvents(){this._triggerElement&&(cQ.forEach(e=>{this._triggerElement.removeEventListener(e,this,p3)}),this._pointerUpEventsRegistered&&lQ.forEach(e=>{this._triggerElement.removeEventListener(e,this,p3)}))}}const O2e=new $t("mat-ripple-global-options");let hb=(()=>{class n{constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new M2e(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(Me(Dn),Me(En),Me(pi),Me(O2e,8),Me($u,8))},n.\u0275dir=Lt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&$r("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),BA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[Vi,$E],Vi]}),n})();function ff(n,e,t,r){return Y(t)&&(r=t,t=void 0),r?ff(n,e,t).pipe(me(i=>B(i)?r(...i):r(i))):new L(i=>{pQ(n,e,function(o){i.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},i,t)})}function pQ(n,e,t,r,i){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,i),s=()=>o.removeEventListener(e,t,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)pQ(n[o],e,t,r,i)}r.add(s)}new class extends Nu{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,s=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends DT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let q2e=1;const Y2e=Promise.resolve(),jA={};function gQ(n){return n in jA&&(delete jA[n],!0)}const mQ={setImmediate(n){const e=q2e++;return jA[e]=!0,Y2e.then(()=>gQ(e)&&n()),e},clearImmediate(n){gQ(n)}};new class extends Nu{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,s=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends DT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=mQ.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(mQ.clearImmediate(t),e.scheduled=void 0)}});function ZE(n){return!!n&&(n instanceof L||"function"==typeof n.lift&&"function"==typeof n.subscribe)}function HA(...n){return Rt(1)(rn(...n))}"undefined"!=typeof window&&window;class m3e{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new E3(e,this.delay,this.scheduler))}}class E3 extends v{constructor(e,t,r){super(e),this.delay=t,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,r=t.queue,i=e.scheduler,s=e.destination;for(;r.length>0&&r[0].time-i.now()<=0;)r.shift().notification.observe(s);if(r.length>0){const o=Math.max(0,r[0].time-i.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(E3.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,r=new _3e(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(mc.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(mc.createComplete()),this.unsubscribe()}}class _3e{constructor(e,t){this.time=e,this.notification=t}}function XQ(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return t=>me(function(n,e){return r=>{let i=r;for(let s=0;s<e;s++){const o=null!=i?i[n[s]]:void 0;if(void 0===o)return;i=o}return i}}(n,e))(t)}tt(266);class oVe{constructor(e){this.callback=e}call(e,t){return t.subscribe(new aVe(e,this.callback))}}class aVe extends v{constructor(e,t){super(e),this.add(new D(t))}}class aZ{}class cZ{}class pf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof pf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new pf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class cVe{encodeKey(e){return lZ(e)}encodeValue(e){return lZ(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const uVe=/%(\d[a-f0-9])/gi,dVe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function lZ(n){return encodeURIComponent(n).replace(uVe,(e,t)=>{var r;return null!==(r=dVe[t])&&void 0!==r?r:e})}function uZ(n){return`${n}`}class Bp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cVe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Bp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(uZ(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(uZ(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class hVe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function dZ(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function hZ(n){return"undefined"!=typeof Blob&&n instanceof Blob}function fZ(n){return"undefined"!=typeof FormData&&n instanceof FormData}class eC{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new pf),this.context||(this.context=new hVe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Bp,this.urlWithParams=t}serializeBody(){return null===this.body?null:dZ(this.body)||hZ(this.body)||fZ(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fZ(this.body)?null:hZ(this.body)?this.body.type||null:dZ(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new eC(r,i,o,{params:u,headers:l,context:h,reportProgress:c,responseType:s,withCredentials:a})}}var to=(()=>((to=to||{})[to.Sent=0]="Sent",to[to.UploadProgress=1]="UploadProgress",to[to.ResponseHeader=2]="ResponseHeader",to[to.DownloadProgress=3]="DownloadProgress",to[to.Response=4]="Response",to[to.User=5]="User",to))();class S3{constructor(e,t=200,r="OK"){this.headers=e.headers||new pf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class D3 extends S3{constructor(e={}){super(e),this.type=to.ResponseHeader}clone(e={}){return new D3({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class KA extends S3{constructor(e={}){super(e),this.type=to.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new KA({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class pZ extends S3{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function x3(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let yb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof eC)s=t;else{let c,l;c=i.headers instanceof pf?i.headers:new pf(i.headers),i.params&&(l=i.params instanceof Bp?i.params:new Bp({fromObject:i.params})),s=new eC(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=rn(s).pipe(function(n,e){return V(n,e,1)}(c=>this.handler.handle(c)));if(t instanceof eC||"events"===i.observe)return o;const a=o.pipe(hi(c=>c instanceof KA));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(me(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(me(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(me(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(me(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Bp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,x3(i,r))}post(t,r,i={}){return this.request("POST",t,x3(i,r))}put(t,r,i={}){return this.request("PUT",t,x3(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Oe(aZ))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class gZ{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const mZ=new $t("HTTP_INTERCEPTORS");let gVe=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const mVe=/^\)\]\}',?\n/;let _Z=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new L(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((g,m)=>i.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&i.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();i.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=1223===i.status?204:i.status,m=i.statusText||"OK",b=new pf(i.getAllResponseHeaders()),_=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return o=new D3({headers:b,status:g,statusText:m,url:_}),o},c=()=>{let{headers:g,status:m,statusText:b,url:_}=a(),R=null;204!==m&&(R=void 0===i.response?i.responseText:i.response),0===m&&(m=R?200:0);let M=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof R){const ee=R;R=R.replace(mVe,"");try{R=""!==R?JSON.parse(R):null}catch(_e){R=ee,M&&(M=!1,R={error:_e,text:R})}}M?(r.next(new KA({body:R,headers:g,status:m,statusText:b,url:_||void 0})),r.complete()):r.error(new pZ({error:R,headers:g,status:m,statusText:b,url:_||void 0}))},l=g=>{const{url:m}=a(),b=new pZ({error:g,status:i.status||0,statusText:i.statusText||"Unknown Error",url:m||void 0});r.error(b)};let u=!1;const h=g=>{u||(r.next(a()),u=!0);let m={type:to.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===t.responseType&&!!i.responseText&&(m.partialText=i.responseText),r.next(m)},f=g=>{let m={type:to.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),r.next(m)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),t.reportProgress&&(i.addEventListener("progress",h),null!==s&&i.upload&&i.upload.addEventListener("progress",f)),i.send(s),r.next({type:to.Sent}),()=>{i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),t.reportProgress&&(i.removeEventListener("progress",h),null!==s&&i.upload&&i.upload.removeEventListener("progress",f)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Oe(B5))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const T3=new $t("XSRF_COOKIE_NAME"),A3=new $t("XSRF_HEADER_NAME");class yZ{}let yVe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=T5(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Oe(pn),Oe(Fd),Oe(T3))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),M3=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(yZ),Oe(A3))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),bVe=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(mZ,[]);this.chain=r.reduceRight((i,s)=>new gZ(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(cZ),Oe(Wn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),vVe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:M3,useClass:gVe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:T3,useValue:t.cookieName}:[],t.headerName?{provide:A3,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[M3,{provide:mZ,useExisting:M3,multi:!0},{provide:yZ,useClass:yVe},{provide:T3,useValue:"XSRF-TOKEN"},{provide:A3,useValue:"X-XSRF-TOKEN"}]}),n})(),bZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[yb,{provide:aZ,useClass:bVe},_Z,{provide:cZ,useExisting:_Z}],imports:[[vVe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function rC(n){return!0===n}function tl(n){return null==n}function nl(n){return!tl(n)}function V3(n){return Boolean(n)}function WZ(n){return tl(n)?n:JSON.parse(JSON.stringify(n))}tt(478),Object.create(Error.prototype),new $t("SECURITY_CONTEXT");const sM=n=>{const t=n instanceof Date;if("object"!=typeof n||null===n||t)return n;Object.freeze(n);const i="function"==typeof n,s=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(o=>{s.call(n,o)&&(!i||"caller"!==o&&"callee"!==o&&"arguments"!==o)&&null!==n[o]&&("object"==typeof n[o]||"function"==typeof n[o])&&!Object.isFrozen(n[o])&&sM(n[o])}),n};function qZ(n){return nl(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}const XZ="NGXS_DATA_META",U3="NGXS_META",QZ="NGXS_ARGUMENT_REGISTRY_META";let ZZ=(()=>{class n{constructor(t){this.sequence$=new is(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(Oe(Rp,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function iC(n){return n[XZ]}let rl=(()=>{class n{constructor(t,r,i){n.store=t.get(Rp),n.ngZone=t.get(En),n.factory=r,n.context=i,n.computed=t.get(ZZ)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(t){return new(t||n)(Oe(Wn),Oe(rY),Oe(nY))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class zs{constructor(){zs.statesCachedMeta.clear()}static createStateContext(e){return rl.context.createStateContext(e)}static ensureMappedState(e){if(tl(rl.factory)||tl(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(nl(e.name)?zs.statesCachedMeta.get(e.name):null)||zs.ensureMeta(e)}static getRepositoryByInstance(e){var t;const i=null!==(t=iC(zs.getStateClassByInstance(e)))&&void 0!==t?t:null;if(tl(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(null!=e?e:{}).constructor}static clearMetaByInstance(e){const t=zs.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const r={},i=Array.from(e);for(let s=0;s<i.length;s++){const o=null==t?void 0:t.getPayloadTypeByIndex(s);nl(o)&&(r[o]=i[s])}return Object.keys(r).length>0?r:null}static createAction(e,t,r){const i=zs.createPayload(t,r);return new(function(n){return class{constructor(t){t&&Object.keys(t).forEach(r=>{this[r]=t[r]})}static get type(){return n}}}(e.type))(i)}static ensureMeta(e){var t;const r=nl(e.name)?null===(t=rl.factory.states)||void 0===t?void 0:t.find(i=>i.name===e.name):null;return nl(r)&&nl(e.name)&&zs.statesCachedMeta.set(e.name,r),r}}zs.statesCachedMeta=new Map,zs.\u0275fac=function(e){return new(e||zs)},zs.\u0275prov=We({token:zs,factory:zs.\u0275fac}),new Zg(1);class mUe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${nl(null==e?void 0:e.constructor)?e.constructor.name:e} to PlainObject`)}}function JZ(n){var e;return null!==(e=n.NGXS_OPTIONS_META)&&void 0!==e?e:{name:""}}function eJ(n){var e;const t=JZ(n),r=null!==(e=t.children)&&void 0!==e?e:[],s=WZ(void 0===t.defaults?{}:t.defaults);if(r.length){if(qZ(s))return function(n,e){return e.reduce((t,r)=>{const i=JZ(r);if(function(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(i.name))throw new Error("State name not provided in class");return t[i.name.toString()]=eJ(r),t},null!=n?n:{})}(s,r);throw new mUe(s)}return s}function nJ(n){var e;return null!==(e=n.__NGXS_COMPUTED_OPTION__)&&void 0!==e?e:null}function rJ(){var n,e;return null!==(e=null===(n=null==rl?void 0:rl.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==e?e:0}function vUe(n){let e=!1;return ZE(n)&&(e=!0),e}function H3(n){return n[QZ]}class wUe extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class EUe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){var t;return null!==(t=this.payloadMap.get(e))&&void 0!==t?t:null}getArgumentNameByIndex(e){var t;return null!==(t=this.argumentMap.get(e))&&void 0!==t?t:null}createPayloadType(e,t,r){this.checkDuplicateName(e,t),this.payloadMap.set(r,e),this.payloadMap.set(e,e)}createArgumentName(e,t,r){this.checkDuplicateName(e,t),this.argumentMap.set(r,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(V3(this.argumentMap.has(e))||V3(this.payloadMap.has(e)))throw new wUe(e,t)}}function AUe(n){return{enumerable:!0,configurable:!0,get(){const e=iC(n),t=zs.ensureMappedState(e.stateMeta);return zs.createStateContext(t)}}}function iJ(){return(n,e,t)=>{!function(n,e){if(!function(n,e){var t;let r=n,i=!1;if(qZ(r))for(;null!==r;){if(rC(null==r?void 0:r.hasOwnProperty(e))){i=!!(null===(t=Object.getOwnPropertyDescriptor(r,e))||void 0===t?void 0:t.get);break}r=Object.getPrototypeOf(r)}return i}(n,null==e?void 0:e.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const r=t.get;return t.get=function(...i){const s=function(n){return tl(nJ(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),nJ(n)}(this),o=null==s?void 0:s.get(r);if(rC(null==o?void 0:o.isObservable))return null==o?void 0:o.value;if(tl(o)||o.sequenceId!==rJ()){s.delete(r);const c=r.apply(this,i);return s.set(r,{value:c,sequenceId:rJ(),isObservable:vUe(c)}),c}return o.value},t}}const PUe={cancelUncompleted:!0,insideZone:!1};function z3(n=PUe){return(e,t,r)=>{!function(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(e,r);const i=r.value,s=t.toString();return r.value=function(...o){const a=this;let c=null;const l=zs.getRepositoryByInstance(a),u=l.operations;let h=u[s];const f=l.stateMeta,g=H3(i);if(tl(h)){const M=function(n){var e,t,r;return null!==(r=null===(t=null===(e=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===e?void 0:e[0])||void 0===t?void 0:t.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==r?r:[]}(i),ee=function(n){const{statePath:e,argumentsNames:t,methodName:r,argumentRegistry:i}=n;let s="";for(let o=0;o<t.length;o++)nl(null==i?void 0:i.getArgumentNameByIndex(o))?s+=null==i?void 0:i.getArgumentNameByIndex(o):nl(null==i?void 0:i.getPayloadTypeByIndex(o))?s+=null==i?void 0:i.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${r}(${s})`}({statePath:f.path,methodName:s,argumentsNames:M,argumentRegistry:g});h=u[s]={type:ee,options:{cancelUncompleted:n.cancelUncompleted}},f.actions[h.type]=[{type:h.type,options:h.options,fn:h.type}]}zs.ensureMappedState(f).instance[h.type]=()=>{var M;return rC(n.insideZone)?null===(M=rl.ngZone)||void 0===M||M.run(()=>{c=i.apply(a,o)}):c=i.apply(a,o),ZE(c)?rn(null).pipe(me(()=>c)):c};const _=zs.createAction(h,o,g),R=rl.store.dispatch(_);return ZE(c)?function(n,e){return PE([n,e]).pipe(me(t=>t.pop()))}(R,c):c},r}}function sJ(n){return(e,t,r)=>{const i=n.trim();if(!i)throw new Error("Payload name should be initialized");(function(n,e){const t=n[e];return tl(H3(t))&&Object.defineProperties(t,{[QZ]:{enumerable:!0,configurable:!0,value:new EUe}}),H3(t)})(e,t).createPayloadType(i,t,r)}}function kUe(){return n=>{const e=function(n){if(function(n){return!V3(n)}(n.hasOwnProperty(U3))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,U3,{value:e})}return function(n){var e;return null===(e=n)||void 0===e?void 0:e[U3]}(n)}(n);if(tl(e.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,e){(function(n){var e;const t=null!==(e=iC(n))&&void 0!==e?e:null;return(tl(t)||(null==t?void 0:t.stateClass)!==n)&&function(n){Object.defineProperty(n,XZ,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),iC(n)}(n)).stateMeta=e}(n,e),function(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>WZ(t)},context:AUe(n)})}(n,e,eJ(n)),function(n){var e,t;const r=iC(n),i=null!==(t=null===(e=null==r?void 0:r.stateMeta)||void 0===e?void 0:e.name)&&void 0!==t?t:null;if(nl(i)){const s=`__${i}__selector`;Object.defineProperties(n.prototype,{[s]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(nl(this[s]))return this[s];if(tl(rl.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[s]=rl.store.select(n).pipe(me(o=>pc()?sM(o):o),Kc({refCount:!0,bufferSize:1})),this[s]}}})}}(n)}}let BUe=(()=>{class n{constructor(){this.browserStorageEvents$=new te,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){var i;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(i=this.ngxsDataDoCheck)||void 0===i||i.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var r;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}markAsDirtyAfterReset(){var r;this.dirty=!0,null===(r=this.ngxsDataAfterReset)||void 0===r||r.call(this)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),VUe=(()=>{class n extends BUe{get snapshot(){return function(n){return pc()?sM(n):n}(this.getState())}get ctx(){return function(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>pc()?sM(n.getState()):n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}})}(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ui(n)))(r||n)}}(),n.\u0275prov=We({token:n,factory:n.\u0275fac}),Ms([iJ(),Pu("design:type",Object),Pu("design:paramtypes",[])],n.prototype,"snapshot",null),Ms([z3(),J5(0,sJ("patchValue")),Pu("design:type",Function),Pu("design:paramtypes",[Object]),Pu("design:returntype",void 0)],n.prototype,"patchState",null),Ms([z3(),J5(0,sJ("stateValue")),Pu("design:type",Function),Pu("design:paramtypes",[Object]),Pu("design:returntype",void 0)],n.prototype,"setState",null),Ms([z3(),Pu("design:type",Function),Pu("design:paramtypes",[]),Pu("design:returntype",void 0)],n.prototype,"reset",null),n})(),hee=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Lt({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const Sb=new $t("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),fV=new $t("ngx-window",{providedIn:"root",factory:()=>function(n){return Xg(n)?window:null}(Cd(Fd))}),o4e=new $t("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(Cd(fV))}),pV=new $t("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Cd(fV),Cd(o4e))});let CM=(()=>{class n{constructor(t,r,i){this.settings=t,this._document=r,this._gtag=i}get document(){return this._document}throw(t){(this.settings.enableTracing||pc())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((r,[i,s])=>Object.defineProperty(r,i,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(r=>void 0!==r))}catch(r){this.throw(r)}}event(t,r,i,s,o){try{const a=new Map;r&&a.set("event_category",r),i&&a.set("event_label",i),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const c=this.toKeyValue(a);c?this.gtag("event",t,c):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,r,i,s){try{const o=new Map([["page_path",t]]);r&&o.set("page_title",r),(i||this.document)&&o.set("page_location",i||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,r,i,s,o){try{const a=new Map([["screen_name",t],["app_name",r]]);i&&a.set("app_id",i),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(r){this.throw(r)}}exception(t,r){try{const i=new Map;t&&i.set("description",t),r&&i.set("fatal",r),this.toKeyValue(i)?this.gtag("event","exception",this.toKeyValue(i)):this.gtag("event","exception")}catch(i){this.throw(i)}}}return n.\u0275fac=function(t){return new(t||n)(Oe(Sb),Oe(pn),Oe(pV))},n.\u0275prov=We({factory:function(){return new n(Oe(Sb),Oe(pn),Oe(pV))},token:n,providedIn:"root"}),n})(),fee=(()=>{class n{constructor(t,r,i,s){this.gaCategoryDirective=t,this.gaService=r,this.settings=i,this.el=s,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=ff(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){(pc()||this.settings.enableTracing)&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(Me(hee,8),Me(CM),Me(Sb),Me(Dn))},n.\u0275dir=Lt({type:n,selectors:[["","gaEvent",""]],inputs:{gaBind:"gaBind",gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent"},exportAs:["gaEvent"]}),n})();const c4e={provide:Gg,multi:!0,useFactory:function(n,e,t){return()=>vi(this,void 0,void 0,function*(){var r;if(!n.trackingCode)return void(pc()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(pc()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||pc()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(r=null==n?void 0:n.initCommands)&&void 0!==r?r:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[Sb,pV,pn]};new $t("ngx-google-analytics-routing-settings",{factory:()=>({})});let SM=(()=>{class n{static forRoot(t,r=[],i,s,o){return{ngModule:n,providers:[{provide:Sb,useValue:{trackingCode:t,initCommands:r,uri:i,enableTracing:s,nonce:o}},c4e]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[]]}),n})(),DM=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new Zg(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),h4e=(()=>{class n{constructor(t,r,{trackingCode:i}){this.window=r,this.subscriptions=new D,this.token=i,this.subscriptions.add(t.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(DM),Oe(fV),Oe(Sb))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const f4e=new $t("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),mee=[DM,h4e,(()=>{class n{constructor(t,r){this.key=r,this.subscriptions=new D;try{this.storage=localStorage}catch(i){}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(i=>this.saveConsent(i)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){var t,r;const i=null===(r=null===(t=this.storage)||void 0===t?void 0:t.getItem)||void 0===r?void 0:r.call(t,this.key);if(null==i)return"not-set";const s=i.trim().toLowerCase();switch(s){case"given":case"rescinded":return s;default:return"not-set"}}saveConsent(t){var r,i;null===(i=null===(r=this.storage)||void 0===r?void 0:r.setItem)||void 0===i||i.call(r,this.key,t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(DM),Oe(f4e))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})()];function g4e(n){return Object.entries(n).reduce((e,[t,r])=>(null!=r&&(e[t]=`${r}`),e),{})}let _4e=(()=>{class n{static forRoot(t){const{providers:r=[]}=SM.forRoot(t.gaToken,function(n){const{appName:e,projectName:t,developmentMode:r}=n;return[{command:"set",values:[g4e({appName:e,projectName:t,developmentMode:r})]}]}(t));return{ngModule:n,providers:r}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[...mee,{provide:Gg,multi:!0,useFactory:()=>()=>{},deps:mee}],imports:[[SM]]}),n})();const w4e=(n,e)=>JSON.stringify(n)===JSON.stringify(e),E4e=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Wu={storageStrategy:class extends class{}{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,r){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},C4e=new te;function _f(n={}){return function(e,t,r){const i=n.cacheKey||e.constructor.name+"#"+t,s=r.value;if(r&&r.value){let o=n.storageStrategy?new n.storageStrategy:new Wu.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(i,this)),i,this)),kn(C4e.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:$w()).subscribe(u=>{o.removeAll(i,this),a.length=0}),n.cacheResolver=n.cacheResolver||Wu.cacheResolver||w4e,n.cacheHasher=n.cacheHasher||Wu.cacheHasher||E4e,r.value=function(...u){const h=o.getAll(i,this);let f=n.cacheHasher(u),g=h.find(b=>n.cacheResolver(b.parameters,f));const m=a.find(b=>n.cacheResolver(b.parameters,f));if((n.maxAge||Wu.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(n.maxAge||Wu.maxAge)?(o.remove?o.remove(h.indexOf(g),g,i,this):o.removeAtIndex(h.indexOf(g),i,this),g=null):(n.slidingExpiration||Wu.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,i,this):o.updateAtIndex(h.indexOf(g),g,i,this))),g){const b=rn(g.response);return n.async?b.pipe(function(n,e=uA){const r=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-e.now():Math.abs(n);return i=>i.lift(new m3e(r,e))}(0)):b}if(m)return m.response;{const b=s.call(this,...u).pipe(function(n){return e=>e.lift(new oVe(n))}(()=>{const _=a.find(R=>n.cacheResolver(R.parameters,f));a.splice(a.indexOf(_),1)}),Oi(_=>{(!n.shouldCacheDecider||n.shouldCacheDecider(_))&&((!(n.maxCacheCount||Wu.maxCacheCount)||1===(n.maxCacheCount||Wu.maxCacheCount)||(n.maxCacheCount||Wu.maxCacheCount)&&(n.maxCacheCount||Wu.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],i,this):o.removeAtIndex(0,i,this)),o.add({parameters:f,response:_,created:n.maxAge||Wu.maxAge?new Date:null},i,this))}),function(n,e,t,r){const s=new Zg(1,void 0,r);return o=>Tc(()=>s,undefined)(o)}(),Xn());return a.push({parameters:f,response:b,created:new Date}),b}}}return r}}function gV(n){return"function"==typeof n}let mV=!1;const qu={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else mV&&console.log("RxJS: Back to a better error behavior. Thank you. <3");mV=n},get useDeprecatedSynchronousErrorHandling(){return mV}};function Db(n){setTimeout(()=>{throw n},0)}const xM={closed:!0,next(n){},error(n){if(qu.useDeprecatedSynchronousErrorHandling)throw n;Db(n)},complete(){}},S4e=Array.isArray||(n=>n&&"number"==typeof n.length);function _ee(n){return null!==n&&"object"==typeof n}const TM=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class $s{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof $s)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(gV(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof TM?yee(o.errors):[o]}}if(S4e(s)){let o=-1,a=s.length;for(;++o<a;){const c=s[o];if(_ee(c))try{c.unsubscribe()}catch(l){e=e||[],l instanceof TM?e=e.concat(yee(l.errors)):e.push(l)}}}if(e)throw new TM(e)}add(e){let t=e;if(!e)return $s.EMPTY;switch(typeof e){case"function":t=new $s(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof $s)){const s=t;t=new $s,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof $s){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}function yee(n){return n.reduce((e,t)=>e.concat(t instanceof TM?t.errors:t),[])}$s.EMPTY=function(n){return n.closed=!0,n}(new $s);const AM="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Ec extends $s{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=xM;break;case 1:if(!e){this.destination=xM;break}if("object"==typeof e){e instanceof Ec?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new bee(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new bee(this,e,t,r)}}[AM](){return this}static create(e,t,r){const i=new Ec(e,t,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class bee extends Ec{constructor(e,t,r,i){super(),this._parentSubscriber=e;let s,o=this;gV(t)?s=t:t&&(s=t.next,r=t.error,i=t.complete,t!==xM&&(o=Object.create(t),gV(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;qu.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=qu;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):Db(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;Db(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);qu.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),qu.useDeprecatedSynchronousErrorHandling)throw r;Db(r)}}__tryOrSetError(e,t,r){if(!qu.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return qu.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(Db(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const pC="function"==typeof Symbol&&Symbol.observable||"@@observable";function vee(n){return n}let za=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof Ec)return n;if(n[AM])return n[AM]()}return n||e||t?new Ec(n,e,t):new Ec(xM)}(t,r,i);if(o.add(s?s.call(o,this.source):this.source||qu.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),qu.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){qu.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof Ec?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=Eee(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[pC](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?vee:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=Eee(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Eee(n){if(n||(n=qu.Promise||Promise),!n)throw new Error("no Promise impl found");return n}Object.create(Error.prototype);function mC(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new A4e(n,e))}}class A4e{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new M4e(e,this.project,this.thisArg))}}class M4e extends Ec{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const xee=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},MM="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Tee=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Aee(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Mee=n=>{if(n&&"function"==typeof n[pC])return(n=>e=>{const t=n[pC]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Tee(n))return xee(n);if(Aee(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Db),e))(n);if(n&&"function"==typeof n[MM])return(n=>e=>{const t=n[MM]();for(;;){let r;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${_ee(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function yV(n,e){return new za(t=>{const r=new $s;let i=0;return r.add(e.schedule(function(){i!==n.length?(t.next(n[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}class U4e extends Ec{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class H4e extends Ec{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function bV(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(bV((i,s)=>function(n,e){return n instanceof za?n:new za(Mee(n))}(n(i,s)).pipe(mC((o,a)=>e(i,o,s,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new $4e(n,t)))}class $4e{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new G4e(e,this.project,this.concurrent))}}class G4e extends H4e{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new U4e(this),r=this.destination;r.add(t);const i=function(n,e){if(e.closed)return;if(n instanceof za)return n.subscribe(e);let t;try{t=Mee(n)(e)}catch(r){e.error(r)}return t}(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function gi(n){for(let e in n)if(n[e]===gi)return e;throw Error("Could not find renamed property on target object.")}function Dr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Dr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}const ize=gi({__forward_ref__:gi});function EV(n){return n.__forward_ref__=EV,n.toString=function(){return Dr(this())},n}function Nn(n){return function(n){return"function"==typeof n&&n.hasOwnProperty(ize)&&n.__forward_ref__===EV}(n)?n():n}Error;function ss(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jp(n){return{providers:n.providers||[],imports:n.imports||[]}}var $n=(()=>(($n=$n||{})[$n.Default=0]="Default",$n[$n.Host=1]="Host",$n[$n.Self=2]="Self",$n[$n.SkipSelf=4]="SkipSelf",$n[$n.Optional=8]="Optional",$n))();"undefined"!=typeof globalThis&&globalThis,"undefined"!=typeof window&&window,"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,"undefined"!=typeof global&&global;const xi=[],Uee={};function Tb(n){return function(n){return{toString:n}.toString()}(()=>{const e={type:n.type,bootstrap:n.bootstrap||xi,declarations:n.declarations||xi,imports:n.imports||xi,exports:n.exports||xi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Uee[n.id]=n.type),e})}function T6e(n,e=$n.Default){throw new Error("inject() must be called from an injection context")}function Ur(n,e=$n.Default){return T6e(Nn(n),e)}Symbol;class $Qe{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new GQe(e,this.predicate,this.thisArg))}}class GQe extends Ec{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}class Bae{}class mh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof mh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new mh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof mh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class WQe{encodeKey(e){return jae(e)}encodeValue(e){return jae(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YQe=/%(\d[a-f0-9])/gi,KQe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function jae(n){return encodeURIComponent(n).replace(YQe,(e,t)=>{var r;return null!==(r=KQe[t])&&void 0!==r?r:e})}function Uae(n){return`${n}`}class To{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new WQe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new To({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Uae(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Uae(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class iu{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Hae(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function zae(n){return"undefined"!=typeof Blob&&n instanceof Blob}function $ae(n){return"undefined"!=typeof FormData&&n instanceof FormData}class bS{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new mh),this.context||(this.context=new iu),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new To,this.urlWithParams=t}serializeBody(){return null===this.body?null:Hae(this.body)||zae(this.body)||$ae(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof To?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$ae(this.body)?null:zae(this.body)?this.body.type||null:Hae(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof To?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new bS(r,i,o,{params:u,headers:l,context:h,reportProgress:c,responseType:s,withCredentials:a})}}var so=(()=>((so=so||{})[so.Sent=0]="Sent",so[so.UploadProgress=1]="UploadProgress",so[so.ResponseHeader=2]="ResponseHeader",so[so.DownloadProgress=3]="DownloadProgress",so[so.Response=4]="Response",so[so.User=5]="User",so))();class cR extends class{constructor(e,t=200,r="OK"){this.headers=e.headers||new mh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=so.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cR({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function xH(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let lR=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof bS)s=t;else{let c,l;c=i.headers instanceof mh?i.headers:new mh(i.headers),i.params&&(l=i.params instanceof To?i.params:new To({fromObject:i.params})),s=new bS(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=function(...n){let e=n[n.length-1];return function(n){return n&&"function"==typeof n.schedule}(e)?(n.pop(),yV(n,e)):function(n,e){return e?yV(n,e):new za(xee(n))}(n)}(s).pipe(function(n,e){return bV(n,void 0,1)}(c=>this.handler.handle(c)));if(t instanceof bS||"events"===i.observe)return o;const a=o.pipe(function(n,e){return function(r){return r.lift(new $Qe(n,undefined))}}(c=>c instanceof cR));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(mC(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(mC(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(mC(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(mC(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new To).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,xH(i,r))}post(t,r,i={}){return this.request("POST",t,xH(i,r))}put(t,r,i={}){return this.request("PUT",t,xH(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Ur(Bae))},n.\u0275prov=ss({token:n,factory:n.\u0275fac}),n})();class iZe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Xae=new class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ss({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}("basePath");class vS{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(r=>this.isJsonMime(r));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(r=>this.isJsonMime(r));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}}let Qae=(()=>{class n{constructor(t,r,i){this.httpClient=t,this.basePath="/v1",this.defaultHeaders=new mh,this.configuration=new vS,i&&(this.configuration=i),"string"!=typeof this.configuration.basePath&&("string"!=typeof r&&(r=this.basePath),this.configuration.basePath=r),this.encoder=this.configuration.encoder||new iZe}addToHttpParams(t,r,i){return"object"!=typeof r||r instanceof Date?this.addToHttpParamsRecursive(t,r,i):this.addToHttpParamsRecursive(t,r)}addToHttpParamsRecursive(t,r,i){if(null==r)return t;if("object"==typeof r)if(Array.isArray(r))r.forEach(s=>t=this.addToHttpParamsRecursive(t,s,i));else if(r instanceof Date){if(null==i)throw Error("key may not be null if value is Date");t=t.append(i,r.toISOString().substr(0,10))}else Object.keys(r).forEach(s=>t=this.addToHttpParamsRecursive(t,r[s],null!=i?`${i}.${s}`:s));else{if(null==i)throw Error("key may not be null if value is not object or array");t=t.append(i,r)}return t}aggregateResults(t,r="body",i=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.providers,g=t.sex,m=t.technologies,b=t.token;let _=new To({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),h&&h.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"ontology-terms")}),f&&f.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"technologies")}),null!=b&&(_=this.addToHttpParams(_,b,"token"));let R=this.defaultHeaders,M=s&&s.httpHeaderAccept;void 0===M&&(M=this.configuration.selectHeaderAccept(["application/json"])),void 0!==M&&(R=R.set("Accept",M));let ee=s&&s.context;void 0===ee&&(ee=new iu);let _e="json";return M&&(_e=M.startsWith("text")?"text":this.configuration.isJsonMime(M)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:ee,params:_,responseType:_e,withCredentials:this.configuration.withCredentials,headers:R,observe:r,reportProgress:i})}gtexRuiLocations(t,r="body",i=!1,s){const o=t.cache;let a=new To({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new iu);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:r,reportProgress:i})}hubmapRuiLocations(t,r="body",i=!1,s){const o=t.cache,a=t.token;let c=new To({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new iu);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:r,reportProgress:i})}ontologyTermOccurences(t,r="body",i=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.providers,g=t.sex,m=t.technologies,b=t.token;let _=new To({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),h&&h.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"ontology-terms")}),f&&f.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"technologies")}),null!=b&&(_=this.addToHttpParams(_,b,"token"));let R=this.defaultHeaders,M=s&&s.httpHeaderAccept;void 0===M&&(M=this.configuration.selectHeaderAccept(["application/json"])),void 0!==M&&(R=R.set("Accept",M));let ee=s&&s.context;void 0===ee&&(ee=new iu);let _e="json";return M&&(_e=M.startsWith("text")?"text":this.configuration.isJsonMime(M)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:ee,params:_,responseType:_e,withCredentials:this.configuration.withCredentials,headers:R,observe:r,reportProgress:i})}ontologyTreeModel(t,r="body",i=!1,s){const o=t.cache,a=t.token;let c=new To({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new iu);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:r,reportProgress:i})}providerNames(t,r="body",i=!1,s){const o=t.cache,a=t.token;let c=new To({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new iu);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:r,reportProgress:i})}referenceOrganScene(t,r="body",i=!1,s){const o=t.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,c=t.ageRange,l=t.bmi,u=t.bmiRange,h=t.cache,f=t.ontologyTerms,g=t.providers,m=t.sex,b=t.technologies,_=t.token;let R=new To({encoder:this.encoder});null!=a&&(R=this.addToHttpParams(R,a,"age")),null!=c&&(R=this.addToHttpParams(R,c,"age-range")),null!=l&&(R=this.addToHttpParams(R,l,"bmi")),null!=u&&(R=this.addToHttpParams(R,u,"bmi-range")),null!=h&&(R=this.addToHttpParams(R,h,"cache")),f&&f.forEach(Ue=>{R=this.addToHttpParams(R,Ue,"ontology-terms")}),null!=o&&(R=this.addToHttpParams(R,o,"organ-iri")),g&&g.forEach(Ue=>{R=this.addToHttpParams(R,Ue,"providers")}),null!=m&&(R=this.addToHttpParams(R,m,"sex")),b&&b.forEach(Ue=>{R=this.addToHttpParams(R,Ue,"technologies")}),null!=_&&(R=this.addToHttpParams(R,_,"token"));let M=this.defaultHeaders,ee=s&&s.httpHeaderAccept;void 0===ee&&(ee=this.configuration.selectHeaderAccept(["application/json"])),void 0!==ee&&(M=M.set("Accept",ee));let _e=s&&s.context;void 0===_e&&(_e=new iu);let Ie="json";return ee&&(Ie=ee.startsWith("text")?"text":this.configuration.isJsonMime(ee)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:_e,params:R,responseType:Ie,withCredentials:this.configuration.withCredentials,headers:M,observe:r,reportProgress:i})}referenceOrgans(t,r="body",i=!1,s){const o=t.cache,a=t.token;let c=new To({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new iu);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:r,reportProgress:i})}scene(t,r="body",i=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.providers,g=t.sex,m=t.technologies,b=t.token;let _=new To({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),h&&h.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"ontology-terms")}),f&&f.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"technologies")}),null!=b&&(_=this.addToHttpParams(_,b,"token"));let R=this.defaultHeaders,M=s&&s.httpHeaderAccept;void 0===M&&(M=this.configuration.selectHeaderAccept(["application/json"])),void 0!==M&&(R=R.set("Accept",M));let ee=s&&s.context;void 0===ee&&(ee=new iu);let _e="json";return M&&(_e=M.startsWith("text")?"text":this.configuration.isJsonMime(M)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:ee,params:_,responseType:_e,withCredentials:this.configuration.withCredentials,headers:R,observe:r,reportProgress:i})}technologyNames(t,r="body",i=!1,s){const o=t.cache,a=t.token;let c=new To({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new iu);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:r,reportProgress:i})}tissueBlocks(t,r="body",i=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,h=t.ontologyTerms,f=t.providers,g=t.sex,m=t.technologies,b=t.token;let _=new To({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),h&&h.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"ontology-terms")}),f&&f.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(Ie=>{_=this.addToHttpParams(_,Ie,"technologies")}),null!=b&&(_=this.addToHttpParams(_,b,"token"));let R=this.defaultHeaders,M=s&&s.httpHeaderAccept;void 0===M&&(M=this.configuration.selectHeaderAccept(["application/json"])),void 0!==M&&(R=R.set("Accept",M));let ee=s&&s.context;void 0===ee&&(ee=new iu);let _e="json";return M&&(_e=M.startsWith("text")?"text":this.configuration.isJsonMime(M)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:ee,params:_,responseType:_e,withCredentials:this.configuration.withCredentials,headers:R,observe:r,reportProgress:i})}}return n.\u0275fac=function(t){return new(t||n)(Ur(lR),Ur(Xae,8),Ur(vS,8))},n.\u0275prov=ss({factory:function(){return new n(Ur(lR),Ur(Xae,8),Ur(vS,8))},token:n,providedIn:"root"}),n})(),sZe=(()=>{class n{constructor(t,r){if(t)throw new Error("CcfApiModule is already loaded. Import in your base AppModule only.");if(!r)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static forRoot(t){return{ngModule:n,providers:[{provide:vS,useFactory:t}]}}}return n.\u0275fac=function(t){return new(t||n)(Ur(n,12),Ur(lR,8))},n.\u0275mod=Tb({type:n}),n.\u0275inj=jp({providers:[],imports:[[]]}),n})();function _h(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let IH;function dd(){return IH||(IH=function(n,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise(t=>{const r=()=>indexedDB.databases().finally(t);e=setInterval(r,100),r()}).finally(()=>clearInterval(e))}().then(()=>{const r=indexedDB.open("keyval-store");return r.onupgradeneeded=()=>r.result.createObjectStore(e),_h(r)});return(r,i)=>t.then(s=>i(s.transaction(e,r).objectStore(e)))}(0,"keyval")),IH}function Zae(n,e=dd()){return e("readonly",t=>_h(t.get(n)))}var ri=tt(440),dZe=tt(698),hZe=tt(445),fZe=tt.n(hZe),Rr=tt(815),tg=tt(609);const si=ri.Util.prefixes({ccf:"http://purl.org/ccf/latest/ccf.owl#",entity:"http://purl.org/ccf/latest/ccf-entity.owl#",fma:"http://purl.obolibrary.org/obo/FMA_",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/"},ri.DataFactory),Jae={x:si("rdf"),type:si("rdf")("type")},Cv={x:si("rdfs"),label:si("rdfs")("label"),comment:si("rdfs")("comment"),isDefinedBy:si("rdfs")("isDefinedBy"),seeAlso:si("rdfs")("seeAlso")},Or={x:si("entity"),id:si("entity")("id"),label:Cv.label,description:Cv.comment,link:Cv.seeAlso,sex:si("entity")("sex"),age:si("entity")("age"),bmi:si("entity")("bmi"),Male:ri.DataFactory.literal("Male"),Female:ri.DataFactory.literal("Female"),consortiumName:si("entity")("consortium_name"),providerName:si("entity")("provider_name"),providerUUID:si("entity")("provider_uuid"),donor:si("entity")("has_donor"),sections:si("entity")("has_tissue_section"),datasets:si("entity")("has_dataset"),sampleType:si("entity")("sample_type"),TissueBlock:ri.DataFactory.literal("Tissue Block"),TissueSection:ri.DataFactory.literal("Tissue Section"),NonStandard:ri.DataFactory.literal("Non-standard"),sectionCount:si("entity")("section_count"),sectionSize:si("entity")("section_size"),sectionUnits:si("entity")("section_units"),sectionNumber:si("entity")("section_number"),spatialEntity:si("entity")("has_spatial_entity"),ontologyTerms:si("entity")("has_ontology_term"),technology:si("entity")("technology"),thumbnail:si("entity")("has_thumbnail")},Fn=si("ccf"),Ni={x:Fn,ontologyNode:{label:Fn("ccf_preferred_label"),parent:Fn("ccf_part_of"),children:Fn("ccf_part_of"),rui_rank:Fn("ccf_rui_rank"),synonymLabels:ri.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},spatial:{Female:Fn("VHFemale"),Male:Fn("VHMale"),BothSexes:Fn("VHBothSexes"),FemaleOrgans:Fn("VHFemaleOrgans"),MaleOrgans:Fn("VHMaleOrgans")},SpatialObjectReference:Fn("SpatialObjectReference"),SpatialEntity:Fn("SpatialEntity"),SpatialPlacement:Fn("SpatialPlacement"),spatialObjectReference:{file:Fn("has_object_file"),file_format:Fn("has_object_file_format"),file_subpath:Fn("has_object_file_subpath")},extractionSet:{label:Cv.label,rui_rank:Fn("ccf_rui_rank")},spatialEntity:{label:Cv.label,comment:Cv.comment,creator:si("dc")("creator"),creator_first_name:Fn("creator_first_name"),creator_last_name:Fn("creator_last_name"),creator_orcid:Fn("creator_orcid"),creation_date:Fn("creation_date"),updated_date:Fn("updated_date"),ccf_annotations:Fn("ccf_annotation"),representation_of:Fn("ccf_representation_of"),reference_organ:Fn("anatomical_structure_of"),extraction_set_for:Fn("extraction_set_for"),extraction_set:Fn("extraction_site_for"),sex:Fn("has_sex"),side:Fn("has_side"),rui_rank:Fn("ccf_rui_rank"),slice_thickness:Fn("ccf_slice_thickness"),slice_count:Fn("ccf_slice_count"),x_dimension:Fn("has_x_dimension"),y_dimension:Fn("has_y_dimension"),z_dimension:Fn("has_z_dimension"),dimension_units:Fn("has_dimension_units"),object:Fn("has_object_reference")},spatialPlacement:{source:Fn("has_placement_source"),target:Fn("has_placement_target"),placement_date:Fn("has_placement_date"),x_scaling:Fn("has_x_scaling"),y_scaling:Fn("has_y_scaling"),z_scaling:Fn("has_z_scaling"),scaling_units:Fn("has_scaling_units"),x_rotation:Fn("has_x_rotation"),y_rotation:Fn("has_y_rotation"),z_rotation:Fn("has_z_rotation"),w_rotation:Fn("has_theta_rotation"),rotation_order:Fn("has_rotation_order"),rotation_units:Fn("has_rotation_units"),x_translation:Fn("has_x_translation"),y_translation:Fn("has_y_translation"),z_translation:Fn("has_z_translation"),translation_units:Fn("has_translation_units")}},mr={x:si("uberon")},wS={x:si("fma")},ece=(si("lmha"),{body:mr.x("0013702"),respiratory_system:mr.x("0001004"),colon:mr.x("0001155"),left_lung:mr.x("0002168"),right_lung:mr.x("0002167"),left_bronchus:mr.x("0002178"),right_bronchus:mr.x("0002177"),kidney:mr.x("0002113"),ureter:mr.x("0000056"),eye:mr.x("0000970"),fallopian_tube:mr.x("0003889"),knee:mr.x("0001465"),ovary:mr.x("0000992"),trachea:mr.x("0003126"),aorta:mr.x("0000947"),blood:mr.x("0000178"),bone_marrow:mr.x("0002371"),male_reproductive_system:mr.x("0000079"),lymph_node:mr.x("0000029"),blood_vasculature:mr.x("0004537"),brain:mr.x("0000955"),eye_left:mr.x("0004548"),eye_right:wS.x("54449"),fallopian_tube_left:mr.x("0001303"),fallopian_tube_right:mr.x("0001302"),heart:mr.x("0000948"),kidney_left:mr.x("0004538"),kidney_right:mr.x("0004539"),knee_left:wS.x("24978"),knee_right:wS.x("24977"),large_intestine:mr.x("0000059"),liver:mr.x("0002107"),lungs:mr.x("0002048"),mesenteric_lymph_node:mr.x("0002509"),ovary_left:wS.x("7214"),ovary_right:wS.x("7213"),pancreas:mr.x("0001264"),pelvis:mr.x("0001270"),prostate_gland:mr.x("0002367"),skin:mr.x("0002097"),small_intestine:mr.x("0002108"),spleen:mr.x("0002106"),thymus:mr.x("0002370"),ureter_left:mr.x("0001223"),ureter_right:mr.x("0001222"),urinary_bladder:mr.x("0001255"),uterus:mr.x("0000995")});function OH(n){const e={};return Object.entries(n).forEach(([t,r])=>{e[r.id]=t}),e}const uR={spatialObjectReference:OH(Ni.spatialObjectReference),spatialEntity:OH(Ni.spatialEntity),spatialPlacement:OH(Ni.spatialPlacement)};function dR(n,e,t,r){const i={"@id":e,"@type":t};return n.some(s=>{const o=r[s.predicate.id];if(o){const a="Literal"===s.object.termType?(0,tg.fromRdf)(s.object):s.object.id;(0,Rr.set)(i,o,a)}return!1},ri.DataFactory.namedNode(e),null,null,null),i}const mZe=(0,Rr.memoize)(function(n,e){return dR(n,e,"SpatialObjectReference",uR.spatialObjectReference)},(n,e)=>e),tce=(0,Rr.memoize)(function(n,e){const t=dR(n,e,"ExtractionSet",uR.spatialEntity);return t.extractionSites=(0,Rr.sortBy)(n.getSubjects(Ni.spatialEntity.extraction_set,e,null).map(r=>Qm(n,r.id)),["rui_rank"]),t},(n,e)=>e),bZe=(0,Rr.memoize)(function(n,e){return(0,Rr.sortBy)(n.getSubjects(Ni.spatialEntity.extraction_set_for,e,null).map(t=>tce(n,t.id)),["rui_rank"])},(n,e)=>e),wZe=(0,Rr.memoize)(function(n,e){return(0,Rr.sortBy)(n.getSubjects(Ni.spatialEntity.reference_organ,e,null).map(t=>Qm(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])},(n,e)=>e),CZe=(0,Rr.memoize)(function(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(Qm(n,t.subject.id))},null,Ni.spatialEntity.reference_organ,null,null),(0,Rr.sortBy)(e,["rui_rank"])}),Qm=(0,Rr.memoize)(function(n,e){const t=dR(n,e,"SpatialEntity",uR.spatialEntity);return t.object&&(t.object=mZe(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,Ni.spatialEntity.ccf_annotations,null).map(r=>r.id)),n.forSubjects(r=>t.entityId=r.id,Or.spatialEntity,e,null),t},(n,e)=>e),xZe=(0,Rr.memoize)(function(n,e){const t=dR(n,e,"SpatialPlacement",uR.spatialPlacement);return t.source&&(t.source=Qm(n,t.source)),t.target&&(t.target=Qm(n,t.target)),t},(n,e)=>e),AZe=(0,Rr.memoize)(function(n,e){const t=n.getObjects(ri.DataFactory.namedNode(e),Or.spatialEntity,null);if(t.length>0)return Qm(n,t[0].id)},(n,e)=>e);function MZe(n,e){const t=e;let r;switch(t.translation_units){case"centimeter":r=.01;break;case"millimeter":r=.001;break;case"meter":default:r=1}const i=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*r),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(K$),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(i).rotateXYZ(s).scale(o)}class nce{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new dZe.DirectedGraph;const e=this.db.store;e.forSubjects(r=>{this.addNode(r.id,"SpatialObjectReference")},Jae.type,Ni.SpatialObjectReference,null),e.forSubjects(r=>{this.addNode(r.id,"SpatialEntity")},Jae.type,Ni.SpatialEntity,null);const t={};e.some(r=>(t[r.subject.id]=r.object.id,!1),null,Ni.spatialPlacement.source,null,null),e.some(r=>{const i=t[r.subject.id];return i&&this.addEdge(r.subject.id,i,r.object.id,"SpatialPlacement"),!1},null,Ni.spatialPlacement.target,null,null)}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,r,i){this.graph.mergeDirectedEdge(t,r,{type:i,id:e})}getTransformationMatrix(e,t){if(e===t)return new Zn(Zn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const r=this.db.store,i=new Zn(Zn.IDENTITY),s=fZe()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s){if(o){const c=this.graph.getEdgeAttribute(a,o,"id");MZe(i,xZe(r,c))}o=a}return i}}}class rce{constructor(e){this.db=e}getSpatialEntity(e){return Qm(this.db.store,e)}getExtractionSets(e){return bZe(this.db.store,e)}getExtractionSet(e){return tce(this.db.store,e)}getAnatomicalStructures(e){return wZe(this.db.store,e)}getReferenceOrgans(){return CZe(this.db.store)}getReferenceBody(e){let t;switch(null==e?void 0:e.sex){case"Male":t=Ni.spatial.Male.id;break;case"Female":t=Ni.spatial.Female.id;break;case"Both":default:t=Ni.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(null==e?void 0:e.sex){case"Male":t=t.filter(r=>"Male"===r.sex);break;case"Female":t=t.filter(r=>"Female"===r.sex)}return(null==e?void 0:e.debug)&&(t=t.map(r=>[[r],this.getAnatomicalStructures(r["@id"])]).reduce((r,[i,s])=>r.concat(s.length>0?s:i),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e),r=[];let i=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,t,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void r.push(a):a})];return r.length>0&&(i=[...r,...i]),(null==e?void 0:e.debug)&&(i=i.concat([this.getSceneNode(this.getSpatialEntity(Ni.x("VHRightKidney").id),t,{color:[0,0,255,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(Ni.x("VHLeftKidney").id),t,{color:[255,0,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(Ni.x("VHSpleenCC1").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(Ni.x("VHSpleenCC2").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(Ni.x("VHSpleenCC3").id),t,{color:[0,255,0,127.5],wireframe:!0})])),i.filter(s=>void 0!==s)}getReferenceOrganScene(e,t){var r,i;const s=null!==(r=void 0!==(null==t?void 0:t.sex))&&void 0!==r&&r,o=this.getReferenceOrgans().filter(a=>a.representation_of===e&&(!s||a.sex===(null==t?void 0:t.sex)));if(o.length>0){const a=o[0],l=this.getSceneNode(a,a,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===a.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),u=(null!==(i=this.db.getSpatialEntities(t))&&void 0!==i?i:[]).map(h=>this.getSceneNode(h,a,{color:[255,255,255,229.5]}));return[l].concat(u).filter(h=>void 0!==h)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(r=>this.getSceneNode(r,t,{color:[255,255,255,229.5]})).filter(r=>void 0!==r)}getSceneNode(e,t,r={}){var i,s,o,a;const c=null===(s=null===(i=null==e?void 0:e.object)||void 0===i?void 0:i.file_format)||void 0===s?void 0:s.startsWith("model/gltf");let u=this.db.graph.getTransformationMatrix(c&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(u){if(c)u=new Zn(Zn.IDENTITY).rotateX(K$(90)).multiplyLeft(u);else{let h;switch(e.dimension_units){case"centimeter":h=.01;break;case"millimeter":h=.001;break;case"meter":default:h=1}const f=[e.x_dimension,e.y_dimension,e.z_dimension].map(g=>g*h/2);u.scale(f)}return Object.assign({"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:c?null===(o=e.object)||void 0===o?void 0:o.file:void 0,scenegraphNode:c?null===(a=e.object)||void 0===a?void 0:a.file_subpath:void 0,transformMatrix:u,tooltip:e.label},r)}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const hR="https://entity.api.hubmapconsortium.org/entities/",ice=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),IZe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},fR={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford"},Yt=function(){const n={};return Object.entries(ece).forEach(([e,t])=>n[e]=t.id),n}(),OZe={AO:[Yt.body,Yt.heart,Yt.aorta],BL:[Yt.body,Yt.urinary_bladder],BD:[Yt.body,Yt.pelvis,Yt.blood],BM:[Yt.body,Yt.pelvis,Yt.bone_marrow],BR:[Yt.body,Yt.brain],LB:[Yt.body,Yt.respiratory_system,Yt.lungs,Yt.left_bronchus],RB:[Yt.body,Yt.respiratory_system,Yt.lungs,Yt.right_bronchus],LE:[Yt.body,Yt.eye,Yt.eye_left],RE:[Yt.body,Yt.eye,Yt.eye_right],LF:[Yt.body,Yt.fallopian_tube,Yt.fallopian_tube_left],RF:[Yt.body,Yt.fallopian_tube,Yt.fallopian_tube_right],HT:[Yt.body,Yt.heart],LK:[Yt.body,Yt.kidney,Yt.kidney_left],RK:[Yt.body,Yt.kidney,Yt.kidney_right],LI:[Yt.body,Yt.large_intestine,Yt.colon],LV:[Yt.body,Yt.liver],LL:[Yt.body,Yt.respiratory_system,Yt.lungs,Yt.left_lung],LN:[Yt.body,Yt.knee,Yt.knee_left],RL:[Yt.body,Yt.respiratory_system,Yt.lungs,Yt.right_lung],RN:[Yt.body,Yt.knee,Yt.knee_right],LY:[Yt.body,Yt.lymph_node,Yt.mesenteric_lymph_node],LO:[Yt.body,Yt.ovary,Yt.ovary_left],RO:[Yt.body,Yt.ovary,Yt.ovary_right],PA:[Yt.body,Yt.pancreas],PL:[Yt.body],SI:[Yt.body,Yt.small_intestine],SK:[Yt.body,Yt.skin],SP:[Yt.body,Yt.spleen],ST:[Yt.body],TH:[Yt.body,Yt.thymus],TR:[Yt.body,Yt.respiratory_system,Yt.lungs,Yt.trachea],UR:[Yt.body,Yt.ureter],UT:[Yt.body,Yt.uterus],OT:[Yt.body]},sce={"@base":"http://purl.org/ccf/latest/ccf-entity.owl#","@vocab":"http://purl.org/ccf/latest/ccf-entity.owl#",ccf:"http://purl.org/ccf/latest/ccf.owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",label:"rdfs:label",description:"rdfs:comment",link:{"@id":"rdfs:seeAlso","@type":"@id"},samples:{"@reverse":"has_donor"},sections:{"@id":"has_tissue_section","@type":"@id"},datasets:{"@id":"has_dataset","@type":"@id"},rui_location:{"@id":"has_spatial_entity","@type":"@id"},ontologyTerms:{"@id":"has_ontology_term","@type":"@id"},thumbnail:{"@id":"has_thumbnail"}};class FZe{constructor(e,t="",r="",i){var s,o;if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const l=this.data.descendants||[],u=(this.data.ancestors||[]).find(Ue=>"Donor"===Ue.entity_type);this.donor=this.getDonor(u,r);const h=this.getRuiLocation(e,this.donor);h?this.rui_location=h:this.bad=!0;const f=new Date(e.last_modified_timestamp).toLocaleDateString(),g=fR[e.group_uuid]||e.group_name,m=e.created_by_user_displayname;this["@id"]=hR+e.uuid,this.label=`Registered ${f}, ${m}, ${g}`,this.link=`${r}browse/sample/${e.uuid}`;const b={},_=[];this.sections=_;const R=[];this.datasets=R;for(const Ue of l.filter(at=>"Sample"===at.entity_type)){const at=this.getSection(Ue,e,r);b[Ue.submission_id]=at,_.push(at),at.section_number=null!==(s=at.section_number)&&void 0!==s?s:_.length}for(const Ue of l)if("Dataset"===Ue.entity_type){const at=this.getDataset(Ue,t,r,i),St=(0,Rr.get)(Ue,["ingest_metadata","metadata","tissue_id"]);b[St]?null===(o=b[St].datasets)||void 0===o||o.push(at):R.push(at)}const M=null!=h?h:{},ee=`${M.x_dimension} x ${M.y_dimension} x ${M.z_dimension} ${M.dimension_units}`;this.section_count=M.slice_count||_.length;const _e=parseFloat((M.slice_thickness||(M.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=_e;const Ie=M.dimension_units||"millimeter";this.section_units=Ie,this.description=`${ee}, ${_e} ${Ie}, ${e.specimen_type}, ${this.section_count} Sections`,_.forEach((Ue,at)=>{Ue.description=`${M.x_dimension} x ${M.y_dimension} x ${_e} ${Ie}, ${_e} ${Ie}, ${Ue.description}`,Ue.section_number=at+1})}getSection(e,t,r){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":hR+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${fR[e.group_uuid]||e.group_name}`,description:`${t.specimen_type}`,link:`${r}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",r="",i){var s;const o=new Date(e.last_modified_timestamp).toLocaleDateString(),a=fR[e.group_uuid]||e.group_name,c=e.created_by_user_displayname,l=[...e.data_types,(0,Rr.get)(e,["ingest_metadata","metadata","assay_type"],"")],u=l.join("|").toLowerCase();let h,f="assets/icons/ico-unknown.svg";return-1!==u.indexOf("10x")?(h="10x",f="assets/icons/ico-bulk-10x.svg"):-1!==u.indexOf("af")?(h="AF",f="assets/icons/ico-spatial-af.svg"):-1!==u.indexOf("codex")?(h="CODEX",f="assets/icons/ico-spatial-codex.svg"):-1!==u.indexOf("imc")?(h="IMC",f="assets/icons/ico-spatial-imc.svg"):-1!==u.indexOf("lc")&&-1===u.indexOf("af")?(h="LC",f="assets/icons/ico-bulk-lc.svg"):h=-1!==u.indexOf("maldi")?"MALDI":-1!==u.indexOf("pas")?"PAS":"OTHER",f=null!==(s=this.getDatasetThumbnail(e,t,i))&&void 0!==s?s:f,{"@id":hR+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${c}, ${a}`,description:`Data/Assay Types: ${l.join(", ")}`,link:`${r}browse/dataset/${e.uuid}`,technology:h,thumbnail:f}}getDatasetThumbnail(e,t,r){if(e.thumbnail_file){const i=e.thumbnail_file;return`${t}/${i.file_uuid}/${i.filename}`+(r?`?token=${r}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,Rr.get)(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>ice.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${t}/${e.uuid}/${s.rel_path}`+(r?`?token=${r}`:""));if(i.length>0){const s=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(ice.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=IZe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e,t){const r=(e.description||"").toLowerCase();let i;r.includes("female")?i="Female":r.includes("male")&&(i="Male");const s=r.match(/age ([0-9]+)/);let o,a;s&&(o=(0,Rr.toNumber)(s[1]));for(const f of(0,Rr.get)(e,"metadata.organ_donor_data",[]))"Feminine gender"===f.preferred_term||"Female"===f.preferred_term?i="Female":"Masculine gender"===f.preferred_term||"Male"===f.preferred_term?i="Male":"Current chronological age"===f.preferred_term||"Age"===f.preferred_term?o=(0,Rr.toNumber)(f.data_value):"Body mass index"===f.preferred_term&&(a=(0,Rr.toNumber)(f.data_value));let c="";i&&o&&(c+=`${i}, Age ${o}`,a&&(c+=`, BMI ${a.toFixed(1)}`));const l=new Date(e.last_modified_timestamp).toLocaleDateString(),u=fR[e.group_uuid]||e.group_name;return{"@id":hR+e.uuid,"@type":"Donor",label:c,description:`Entered ${l}, ${e.created_by_user_displayname}, ${u}`,link:`${t}browse/donor/${e.uuid}`,age:o,sex:i,bmi:a,consortium_name:"HuBMAP",provider_name:u,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){var r;const s=(e.ancestors||[]).find(l=>"Sample"===l.entity_type&&"organ"===l.specimen_type),o=OZe[null==s?void 0:s.organ]||[Yt.body];let a,c=e.rui_location;if(c&&("string"==typeof c&&(c=JSON.parse(c)),c.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):c["@id"]&&(a=c)),a){a.ccf_annotations=o.concat(a.ccf_annotations||[]);const l=null!==(r=(0,Rr.get)(a,["placement","target"]))&&void 0!==r?r:"";l.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")&&(0,Rr.set)(a,["placement","target"],l.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")),("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===l||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===l)&&(0,Rr.set)(a,["placement","target"],"Male"===t.sex?l.replace("#VH","#VHM")+"_Patch":l.replace("#VH","#VHF")+"_Patch")}return a}getTissueBlock(){return(0,Rr.omit)(Object.assign({},this),["data","bad","donor"])}toJsonLd(){return Object.assign(Object.assign({},this.donor),{samples:[this.getTissueBlock()]})}}const LZe=["uuid","entity_type","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","ancestors","descendants","rui_location","specimen_type"],BZe={exists:{field:"rui_location"}};function oce(n,e,t){return JSON.stringify({version:!0,from:n,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:null!=t?t:BZe,_source:{includes:LZe}})}function NH(n,e){return vi(this,void 0,void 0,function*(){try{const t=yield fetch(n,e);return t.ok?yield t.json():void 0}catch(t){return}})}function ace(n,e,t,r,i="",s=""){return vi(this,void 0,void 0,function*(){let o;if("static"===e?o=yield NH(n):"search-api"===e&&(o=yield function(n,e,t){return vi(this,void 0,void 0,function*(){const i=function(n){const e=new Headers;return e.append("Content-type","application/json"),n&&e.append("Authorization",`Bearer ${n}`),e}(e),s=oce(0,50,t),o=yield NH(n,{method:"POST",headers:i,body:s});if(!o)return;const a=o.hits.total.value;if(a<=50)return o;const c=[];for(let h=50;h<a;h+=50)c.push(NH(n,{method:"POST",headers:i,body:oce(h,50,t)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const u=l.map(h=>h.hits.hits);return Object.assign(Object.assign({},o),{hits:Object.assign(Object.assign({},o.hits),{hits:o.hits.hits.concat(...u)})})})}(n,r,t)),o)return function(n,e="",t="",r,i=!1){const o={},a=(0,Rr.get)(n,"hits.hits",[]).map(l=>(0,Rr.get)(l,"_source",{})).map(l=>new FZe(l,e,t,r).toJsonLd());for(const l of a){const u=l["@id"];o[u]?o[u].samples.push(l.samples[0]):o[u]=l}const c=Object.values(o);return i&&(function(n){let e=[],t=0;for(const r of n.filter(i=>i.samples.length>1)){const i=r.samples;for(let s=0;s<i.length;s++){const o=i[s]["@id"];e=e.concat(i[s].datasets);for(const a of i[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<i.length;a++)i[a].sections.find(l=>l["@id"]===o)&&(i[s].deleteMe=!0,t++)}r.samples=i.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(c),console.log(c.map(l=>Object.assign({"@context":sce},l)))),{"@context":sce,"@graph":c}}(o,i,s,r);console.warn(`Unable to load ${n} as HuBMAP Data`)})}function pR(n,e,t){var r;const i=new Map,s=new Set;n.some(c=>{var l;return e.has(c.subject.id)&&(s.add(c.object.id),i.has(c.object.id)?null===(l=i.get(c.object.id))||void 0===l||l.push(c.subject.id):i.set(c.object.id,[c.subject.id])),!1},null,Or.donor,null,null);const o=t(s),a=new Set;for(const c of o)for(const l of null!==(r=i.get(c))&&void 0!==r?r:[])a.add(l);return a}function ES(n,e){return t=>n.has(t.id)?e.add(t.id):void 0}const nJe={[Ni.ontologyNode.label.id]:"label",[Ni.ontologyNode.parent.id]:"parent",[Ni.ontologyNode.synonymLabels.id]:"synonymLabels"};function rJe(n,e){const t=ri.DataFactory.namedNode(e),r={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""};return n.some(i=>{const s=nJe[i.predicate.id];if(s){const o="Literal"===i.object.termType?(0,tg.fromRdf)(i.object):i.object.id;"synonymLabels"===s?r.synonymLabels.push(o):(0,Rr.set)(r,s,o)}return!1},t,null,null,null),r.children=n.getSubjects(Ni.ontologyNode.children,t,null).map(i=>i.id),r}const gR={[Or.label.id]:"label",[Or.description.id]:"description",[Or.link.id]:"link"},sJe=Object.assign(Object.assign({},gR),{[Or.providerName.id]:"providerName"}),oJe=Object.assign(Object.assign({},gR),{[Or.technology.id]:"technology",[Or.thumbnail.id]:"thumbnail"}),aJe=Object.assign(Object.assign({},gR),{[Or.sampleType.id]:"sampleType",[Or.sectionNumber.id]:"sectionNumber",[Or.datasets.id]:"datasets"}),cJe=Object.assign(Object.assign({},gR),{[Or.sampleType.id]:"sampleType",[Or.sectionCount.id]:"sectionCount",[Or.sectionSize.id]:"sectionSize",[Or.sectionUnits.id]:"sectionUnits",[Or.donor.id]:"donor",[Or.spatialEntity.id]:"spatialEntityId",[Or.sections.id]:"sections",[Or.datasets.id]:"datasets"}),uJe=(0,Rr.memoize)(function(n,e){const t={"@id":e,"@type":"Donor"};return n.some(r=>{const i=sJe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,tg.fromRdf)(r.object):r.object.id;(0,Rr.set)(t,i,s)}return!1},ri.DataFactory.namedNode(e),null,null,null),t},(n,e)=>e);function cce(n,e){const t={"@id":e,"@type":"Dataset"};return n.some(r=>{const i=oJe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,tg.fromRdf)(r.object):r.object.id;(0,Rr.set)(t,i,s)}return!1},ri.DataFactory.namedNode(e),null,null,null),t}const fJe=(0,Rr.memoize)(function(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};return n.some(r=>{const i=cJe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,tg.fromRdf)(r.object):r.object.id;if("sections"===i){const o=function(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};return n.some(r=>{const i=aJe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,tg.fromRdf)(r.object):r.object.id;if("datasets"===i){const o=cce(n,s);t[i].push(o)}else(0,Rr.set)(t,i,s)}return!1},ri.DataFactory.namedNode(e),null,null,null),t}(n,s);t[i].push(o)}else if("datasets"===i){const o=cce(n,s);t[i].push(o)}else"donor"===i?t[i]=uJe(n,s):(0,Rr.set)(t,i,s)}return!1},ri.DataFactory.namedNode(e),null,null,null),t},(n,e)=>e),pJe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class gJe{constructor(e=pJe){this.options=e,this.store=new ri.Store(void 0,{factory:ri.DataFactory}),this.graph=new nce(this),this.scene=new rce(this)}connect(e,t=!1){return vi(this,void 0,void 0,function*(){return e&&(this.options=e),this.initializing||(this.initializing=t?this.cachedConnect():this.doConnect()),yield this.initializing,this.store.size>0})}cachedConnect(){return vi(this,void 0,void 0,function*(){const e=(new Date).getTime(),t="ccf-database.last_modified",r="ccf-database",i=yield Zae(t).catch(()=>{});let s;i&&e-new Date(+i).getTime()>36e5?yield function(n,e=dd()){return e("readwrite",t=>(n.forEach(r=>t.delete(r)),_h(t.transaction)))}([r,t]).catch(()=>{}):s=yield Zae(r).catch(()=>{}),s?yield this.deserialize(s):(yield this.doConnect(),function(n,e=dd()){return e("readwrite",t=>(n.forEach(r=>t.put(r[1],r[0])),_h(t.transaction)))}([[r,this.serialize()],[t,""+e]]).catch(()=>{}))})}doConnect(){var e,t;return vi(this,void 0,void 0,function*(){const r=[],i=null!==(t=null===(e=this.options.dataSources)||void 0===e?void 0:e.concat())&&void 0!==t?t:[],s=this.options.ccfOwlUrl;if(s.startsWith("{"))this.store=(0,ri.deserializeN3Store)(s,ri.DataFactory);else if(s.endsWith(".n3store.json")){const o=yield fetch(s).then(a=>a.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(this.store=(0,ri.deserializeN3Store)(o,ri.DataFactory))}else(null==s?void 0:s.length)>0&&i.push(s);this.options.hubmapDataUrl&&(this.options.hubmapDataUrl.endsWith("jsonld")?i.push(this.options.hubmapDataUrl):r.push(ace(this.options.hubmapDataUrl,this.options.hubmapDataService,this.options.hubmapQuery,this.options.hubmapToken,this.options.hubmapAssetsUrl,this.options.hubmapPortalUrl).then(o=>{if(o)return this.addDataSources([o])}))),r.push(this.addDataSources(i)),yield Promise.all(r),yield this.synchronize()})}addDataSources(e,t){return vi(this,void 0,void 0,function*(){const r=null!=t?t:this.store;return yield Promise.all(e.map(i=>vi(this,void 0,void 0,function*(){"string"==typeof i?i.endsWith("jsonld")?yield(0,ri.addJsonLdToStore)(i,r):i.endsWith("n3")?yield(0,ri.addN3ToStore)(i,r):i.endsWith("rdf")||i.endsWith("owl")||i.endsWith("xml")?yield(0,ri.addRdfXmlToStore)(i,r):yield(0,ri.addJsonLdToStore)(i,r):yield(0,ri.addJsonLdToStore)(i,r)}))),this})}synchronize(){return vi(this,void 0,void 0,function*(){return yield new Promise(e=>{setTimeout(e,500)}),this.graph.createGraph(),this})}serialize(){return(0,ri.serializeN3Store)(this.store)}deserialize(e){return vi(this,void 0,void 0,function*(){this.store=(0,ri.deserializeN3Store)(e,ri.DataFactory),this.graph=new nce(this),this.scene=new rce(this),yield new Promise(t=>{setTimeout(t,10)})})}getIds(e={}){return function(n,e){var t,r,i,s,o;let a=function(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),Or.spatialEntity,null,null),e}(n);if(a.size>0&&(a=function(n,e,t=!0){const r=new Set;if(n.forSubjects(ES(e,r),Or.spatialEntity,null,null),!t){const i=new Set;return e.forEach(s=>r.has(s)?void 0:i.add(s)),i}return r}(n,a)),a.size>0&&("Male"===e.sex||"Female"===e.sex)){const c=e.sex;a=pR(n,a,l=>function(n,e,t){const r=new Set;return n.forSubjects(ES(e,r),Or.sex,Or[t],null),r}(n,l,c))}if(a.size>0&&(null===(t=e.tmc)||void 0===t?void 0:t.length)>0&&(a=pR(n,a,c=>function(n,e,t){const r=new Set;for(const i of t){const s=ri.DataFactory.literal(i);n.forSubjects(ES(e,r),Or.providerName,s,null)}return r}(n,c,e.tmc))),a.size>0&&(null===(r=e.technologies)||void 0===r?void 0:r.length)>0&&(a=function(n,e,t){var r;const i=new Map,s=new Set,o=new Set;n.some(l=>(e.has(l.subject.id)&&o.add(l.object.id),!1),null,Or.sections,null,null),n.some(l=>{var u;return(e.has(l.subject.id)||o.has(l.subject.id))&&(s.add(l.object.id),i.has(l.object.id)?null===(u=i.get(l.object.id))||void 0===u||u.push(l.subject.id):i.set(l.object.id,[l.subject.id])),!1},null,Or.datasets,null,null);const a=t(s),c=new Set;for(const l of a)for(const u of null!==(r=i.get(l))&&void 0!==r?r:[])c.add(u);return c}(n,a,c=>function(n,e,t){const r=new Set;for(const i of t){const s=ri.DataFactory.literal(i);n.forSubjects(ES(e,r),Or.technology,s,null)}return r}(n,c,e.technologies))),a.size>0&&(null===(i=e.ontologyTerms)||void 0===i?void 0:i.length)>0&&(a=function(n,e,t){var r;const i=new Map,s=new Set;n.some(c=>{var l;return e.has(c.subject.id)&&(s.add(c.object.id),i.has(c.object.id)?null===(l=i.get(c.object.id))||void 0===l||l.push(c.subject.id):i.set(c.object.id,[c.subject.id])),!1},null,Or.spatialEntity,null,null);const o=t(s),a=new Set;for(const c of o)for(const l of null!==(r=i.get(c))&&void 0!==r?r:[])a.add(l);return a}(n,a,c=>function(n,e,t){const r=new Set;for(const i of t){const s=ri.DataFactory.namedNode(i);n.forSubjects(ES(e,r),Ni.spatialEntity.ccf_annotations,s,null)}return r}(n,c,e.ontologyTerms))),a.size>0&&2===(null===(s=e.ageRange)||void 0===s?void 0:s.length)&&(0,Rr.isFinite)(e.ageRange[0])&&(0,Rr.isFinite)(e.ageRange[1])){const c=Math.max(...e.ageRange),l=Math.min(...e.ageRange);1===l&&110===c||(a=pR(n,a,u=>function(n,e,t,r){const i=new Set;return n.some(s=>{if(e.has(s.subject.id)){const o=(0,tg.fromRdf)(s.object);o>=t&&o<=r&&i.add(s.subject.id)}return!1},null,Or.age,null,null),i}(n,u,l,c)))}if(a.size>0&&2===(null===(o=e.bmiRange)||void 0===o?void 0:o.length)&&(0,Rr.isFinite)(e.bmiRange[0])&&(0,Rr.isFinite)(e.bmiRange[1])){const c=Math.max(...e.bmiRange),l=Math.min(...e.bmiRange);13===l&&83===c||(a=pR(n,a,u=>function(n,e,t,r){const i=new Set;return n.some(s=>{if(e.has(s.subject.id)){const o=(0,tg.fromRdf)(s.object);o>=t&&o<=r&&i.add(s.subject.id)}return!1},null,Or.bmi,null,null),i}(n,u,l,c)))}return a}(this.store,e)}get(e){return this.store.getQuads(ri.DataFactory.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>AZe(this.store,t))}getDatasetTechnologyNames(){return vi(this,void 0,void 0,function*(){return function(n){const e=new Set;return n.some(t=>(e.add(t.object.value),!1),null,Or.technology,null,null),Array.from(e).sort()}(this.store)})}getProviderNames(){return vi(this,void 0,void 0,function*(){return function(n){const e=new Set;return n.some(t=>(e.add(t.object.value),!1),null,Or.providerName,null,null),Array.from(e).sort()}(this.store)})}getTissueBlockResults(e){return vi(this,void 0,void 0,function*(){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>fJe(this.store,t))})}getAggregateResults(e){return vi(this,void 0,void 0,function*(){return function(n,e){const t=new Set;e.some(c=>(n.has(c.subject.id)&&t.add(c.object.id),!1),null,Or.donor,null,null);const r=new Set;e.some(c=>(t.has(c.subject.id)&&r.add(c.object.id),!1),null,Or.providerUUID,null,null);const i=new Set;e.forSubjects(c=>{n.has(c.id)&&i.add(c.id)},Or.spatialEntity,null,null);const s=new Set;e.some(c=>(i.has(c.subject.id)&&s.add(c.object.id),!1),null,Or.sections,null,null);const o=new Set;return e.some(c=>{const l=c.subject;return(i.has(l.id)||s.has(l.id))&&o.add(c.object.id),!1},null,Or.datasets,null,null),Object.entries({"Tissue Data Providers":r.size,Donors:t.size,"Tissue Blocks":i.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(this.getIds(e),this.store)})}getOntologyTermOccurences(e){return vi(this,void 0,void 0,function*(){return function(n,e){const t=new Map;e.some(i=>(n.has(i.subject.id)&&(t.has(i.object.id)?t.get(i.object.id).push(i.subject.id):t.set(i.object.id,[i.subject.id])),!1),null,Or.spatialEntity,null,null);const r={};return e.some(i=>{var s,o;if(t.has(i.subject.id)){const a=null!==(o=null===(s=t.get(i.subject.id))||void 0===s?void 0:s.length)&&void 0!==o?o:0;r[i.object.id]=a+(r[i.object.id]||0)}return!1},null,Ni.spatialEntity.ccf_annotations,null,null),r}(this.getIds(e),this.store)})}getOntologyTreeModel(){return vi(this,void 0,void 0,function*(){return function(n){const e={root:ece.body.id,nodes:{}},t=new Set;n.some(r=>(t.add(r.subject.id),t.add(r.predicate.id),!1),null,Ni.ontologyNode.parent,null,null);for(const r of t)e.nodes[r]=rJe(n,r);return e}(this.store)})}getReferenceOrgans(){return vi(this,void 0,void 0,function*(){return this.scene.getReferenceOrgans()})}getScene(e){return vi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getScene(e)})}getReferenceOrganScene(e,t){return vi(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getReferenceOrganScene(e,t)})}}const mJe=["bodyCanvas"];let _Je=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new gn,this.nodeDrag=new gn,this.nodeClick=new gn,this.nodeHoverStart=new gn,this.nodeHoverStop=new gn,this.initialized=new gn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){var r;this._scene=t,null===(r=this.bodyUI)||void 0===r||r.setScene(t)}get rotation(){return this._rotation}set rotation(t){var r;this._rotation=t,null===(r=this.bodyUI)||void 0===r||r.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){var r;this._rotationX=t,null===(r=this.bodyUI)||void 0===r||r.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){var r;this._zoom=t,null===(r=this.bodyUI)||void 0===r||r.setZoom(t)}get target(){return this._target}set target(t){var r;this._target=t,null===(r=this.bodyUI)||void 0===r||r.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,r={x:48,y:48}){if(this.bodyCanvas){const{width:i,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((i-r.x)/o/t.x),Math.log2((s-r.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t;return vi(this,void 0,void 0,function*(){const r=this.bodyCanvas.nativeElement,i=new QNe({id:"body-ui",canvas:r,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});r.addEventListener("contextmenu",s=>s.preventDefault()),yield i.initialize(),this.bodyUI=i,window.bodyUI=i,(null===(t=this.scene)||void 0===t?void 0:t.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))],this.initialized.emit()})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=wn({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(t,r){if(1&t&&ns(mJe,5,Dn),2&t){let i;Ar(i=Mr())&&(r.bodyCanvas=i.first)}},hostVars:2,hostBindings:function(t,r){2&t&&Rd(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(t,r){1&t&&zr(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),yJe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[Ts]]}),n})();new $t("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const uce=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_54449"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/FMA_24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/FMA_7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/FMA_7213"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));uce.filter(n=>!0!==n.disabled);let Sv=(()=>{let n=class extends VUe{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(hi(n=>null!=n),Kc(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(XQ(...t),sf(),Kc(1))}getOption(...t){const r=this.getPathKey(t);if(this.optionCache.has(r))return this.optionCache.get(r);const i=this.config$.pipe(XQ(...t),sf(),Kc(1));return this.optionCache.set(r,i),i}getPathKey(t){return`${t.length}:${t.join(".")}`}};return n.\u0275fac=function(){let e;return function(r){return(e||(e=ui(n)))(r||n)}}(),n.\u0275prov=We({token:n,factory:n.\u0275fac}),Ms([iJ()],n.prototype,"config$",null),n=Ms([kUe(),KPe({name:"globalConfig",defaults:null})],n),n})();!function(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();class dce extends class{getProviderNames(){return this.forwardCall("getProviderNames")}getDatasetTechnologyNames(){return this.forwardCall("getDatasetTechnologyNames")}getOntologyTreeModel(){return this.forwardCall("getOntologyTreeModel")}getReferenceOrgans(){return this.forwardCall("getReferenceOrgans")}getTissueBlockResults(e){return this.forwardCall("getTissueBlockResults",e)}getAggregateResults(e){return this.forwardCall("getAggregateResults",e)}getOntologyTermOccurences(e){return this.forwardCall("getOntologyTermOccurences",e)}getScene(e){return this.forwardCall("getScene",e)}getReferenceOrganScene(e,t){return this.forwardCall("getReferenceOrganScene",e,t)}}{forwardCall(e,...t){return this.impl$.pipe(As(r=>r[e](...t)))}}let hce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const PH=new te,mR={cacheBusterObserver:PH},CS={cacheBusterObserver:PH,maxCacheCount:4};function fce(n,e,t){return n?{min:n[0]>=e?n[0]:void 0,max:n[1]<=t?n[1]:void 0}:void 0}function pce(n){return n.map(e=>{var t;return Object.assign(Object.assign({},e),{transformMatrix:new Zn(null!==(t=e.transformMatrix)&&void 0!==t?t:[])})})}let XJe=(()=>{class n{constructor(t,r){this.api=t,this.globalConfig=r,r.getOption("hubmapToken").subscribe(PH)}getProviderNames(){return this.doRequest(t=>this.api.providerNames(t))}getDatasetTechnologyNames(){return this.doRequest(t=>this.api.technologyNames(t))}getOntologyTreeModel(){return this.doRequest(t=>this.api.ontologyTreeModel(t),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(t=>this.api.referenceOrgans(t),void 0,{},n=>n)}getTissueBlockResults(t){return this.doRequest(r=>this.api.tissueBlocks(r),t,{},n=>n)}getAggregateResults(t){return this.doRequest(r=>this.api.aggregateResults(r),t)}getOntologyTermOccurences(t){return this.doRequest(r=>this.api.ontologyTermOccurences(r),t)}getScene(t){return this.doRequest(r=>this.api.scene(r),t,{},pce)}getReferenceOrganScene(t,r){return this.doRequest(i=>this.api.referenceOrganScene(i),r,{organIri:t},pce)}doRequest(t,r,i,s){const{api:o,globalConfig:a}=this,c=Object.assign(Object.assign({},function(n){var e,t;return{age:fce(null==n?void 0:n.ageRange,1,110),bmi:fce(null==n?void 0:n.bmiRange,13,83),sex:null===(t=null===(e=null==n?void 0:n.sex)||void 0===e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e),ontologyTerms:null==n?void 0:n.ontologyTerms,providers:null==n?void 0:n.tmc,technologies:null==n?void 0:n.technologies}}(r)),i);return a.getOption("remoteApiEndpoint").pipe(gs(1),Oi(l=>o.configuration.basePath=l),As(()=>t(c)),me(l=>s?s(l):l))}}return n.\u0275fac=function(t){return new(t||n)(Oe(Qae),Oe(Sv))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),Ms([_f(mR)],n.prototype,"getProviderNames",null),Ms([_f(mR)],n.prototype,"getDatasetTechnologyNames",null),Ms([_f(mR)],n.prototype,"getOntologyTreeModel",null),Ms([_f(mR)],n.prototype,"getReferenceOrgans",null),Ms([_f(CS)],n.prototype,"getTissueBlockResults",null),Ms([_f(CS)],n.prototype,"getAggregateResults",null),Ms([_f(CS)],n.prototype,"getOntologyTermOccurences",null),Ms([_f(CS)],n.prototype,"getScene",null),Ms([_f(CS)],n.prototype,"getReferenceOrganScene",null),n})(),QJe=(()=>{class n extends dce{constructor(t){super(),this.impl$=this.database$=t.config$.pipe(r=>r,hi(r=>Object.keys(r).length>0),As(r=>function(n,e){return new L(t=>{let r,i;try{r=n()}catch(a){return void t.error(a)}try{i=e(r)}catch(a){return void t.error(a)}const o=(i?Fe(i):Ld).subscribe(t);return()=>{o.unsubscribe(),r&&r.unsubscribe()}})}(()=>this.createDatabase(r),i=>this.connectDatabase(i,r))),me(r=>r.database),Kc(1))}connectDatabase(t,r){return vi(this,void 0,void 0,function*(){const i=!pc();return yield t.database.connect(r,i),t})}}return n.\u0275fac=function(t){return new(t||n)(Oe(Sv))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),ZJe=(()=>{class n extends QJe{createDatabase(t){return{database:new gJe(t),unsubscribe:()=>{}}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ui(n)))(r||n)}}(),n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JJe=(()=>{class n extends dce{constructor(t,r){super(),this.impl$=t.config$.pipe(i=>i,me(i=>this.selectToken(i)),sf(),me(i=>r.get(i)),Kc(1))}}return n.\u0275fac=function(t){return new(t||n)(Oe(Sv),Oe(Wn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),eet=(()=>{class n{constructor(t){this.source=t,this.organs=uce}getOrganInfo(t,r,i="Female"){let s=this.organs.find(a=>a.id===t);if(!s)return rn(void 0);const o=s.organ;return s.disabled&&(s=this.organs.find(a=>!a.disabled&&a.organ===o)),(null==s?void 0:s.side)&&r&&s.side!==r&&(s=this.organs.find(a=>!a.disabled&&a.organ===o&&a.side===r)),rn(s)}getOrgan(t,r="Both"){return this.source.getReferenceOrgans().pipe(me(i=>i.find(s=>s.representation_of===t.id&&("Both"===r||s.sex===r))))}getOrganScene(t,r="Female"){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:r}):rn([])}getOrganStats(t,r="Female"){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:r}):rn([])}getBlocks(t,r="Female"){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:r}):rn([])}}return n.\u0275fac=function(t){return new(t||n)(Oe(hce))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tet=["thumbContainer"],net=["toggleBar"],ret=["input"],iet=function(n){return{enterDuration:n}},set=["*"],oet=new $t("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let aet=0;const cet={provide:Qc,useExisting:pe(()=>gce),multi:!0};class uet{constructor(e,t){this.source=e,this.checked=t}}const det=f3(XE(h3(kA(class{constructor(n){this._elementRef=n}}))));let gce=(()=>{class n extends det{constructor(t,r,i,s,o,a){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=o,this._onChange=c=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++aet,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new gn,this.toggleChange=new gn,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(t){this._required=fi(t)}get checked(){return this._checked}set checked(t){this._checked=fi(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new uet(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(Me(Dn),Me(lf),Me(Bs),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(kS(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(ks(),n)}("tabindex"),Me(oet),Me($u,8))},n.\u0275cmp=wn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&(ns(tet,5),ns(net,5),ns(ret,5)),2&t){let i;Ar(i=Mr())&&(r._thumbEl=i.first),Ar(i=Mr())&&(r._thumbBarEl=i.first),Ar(i=Mr())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,r){2&t&&(Lh("id",r.id),di("tabindex",r.disabled?null:-1)("aria-label",null)("aria-labelledby",null),$r("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[tr([cet]),On],ngContentSelectors:set,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,r){if(1&t&&(function(n){const e=Bt()[16][6];if(!e.projection){const r=e.projection=bd(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?lle(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),Ft(0,"label",0,1),Ft(2,"div",2,3),Ft(4,"input",4,5),zn("change",function(s){return r._onChangeEvent(s)})("click",function(s){return r._onInputClick(s)}),kt(),Ft(6,"div",6,7),zr(8,"div",8),Ft(9,"div",9),zr(10,"div",10),kt(),kt(),kt(),Ft(11,"span",11,12),zn("cdkObserveContent",function(){return r._onLabelTextChange()}),Ft(13,"span",13),Gr(14,"\xa0"),kt(),function(n,e=0,t){const r=Bt(),i=Tr(),s=lp(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),Xs(),64!=(64&s.flags)&&function(n,e,t){k0(e[11],0,e,t,AD(n,t,e),OD(t.parent||e[6],t,e))}(i,r,s)}(15),kt(),kt()),2&t){const i=ty(1),s=ty(12);di("for",r.inputId),Qt(2),$r("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),Qt(2),an("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),di("name",r.name)("aria-checked",r.checked.toString())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Qt(5),an("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function(n,e,t,r){return t6(Bt(),uo(),n,e,t,r)}(18,iet,r._noopAnimations?0:150))}},directives:[hb,PK],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),mce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})(),pet=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[mce,BA,Vi,OB],mce,Vi]}),n})(),get=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new gn}get left(){const{value:t,labels:r}=this;return t!==r[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=wn({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(t,r){2&t&&Rd(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],[1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(t,r){if(1&t){const i=Eu();Ft(0,"span",0),zn("click",function(){es(i);const o=ty(3);return r.left||o.toggle(),r.updateToggle(!0)}),Gr(1),kt(),Ft(2,"mat-slide-toggle",1,2),zn("change",function(o){return r.updateToggle(!o.checked)}),kt(),Ft(4,"span",0),zn("click",function(){es(i);const o=ty(3);return r.left&&o.toggle(),r.updateToggle(!1)}),Gr(5),kt()}2&t&&($r("disabled",r.disabled)("highlighted",r.left),Qt(1),yo(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Qt(1),an("disabled",r.disabled)("checked",!r.left),Qt(2),$r("disabled",r.disabled)("highlighted",!r.left),Qt(1),yo(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},directives:[gce],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mat-slide-toggle-bar{background-color:#43476580}[_nghost-%COMP%]     .slider .mat-slide-toggle-thumb{background-color:#434765}"],changeDetection:0}),n})();const met=["bodyUI"],_et=function(){return["Male","Female"]},yet=function(){return["Left","Right"]};let bet=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new gn,this.sideChange=new gn}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){var t,r,i,s;const o=new Set(null!==(r=null===(t=this.filter)||void 0===t?void 0:t.tmc)&&void 0!==r?r:[]);this.filteredBlocks=null!==(s=null===(i=this.blocks)||void 0===i?void 0:i.filter(a=>o.has(a.donor.providerName)).map(a=>a["@id"]))&&void 0!==s?s:[],this.bodyUI.scene=this.bodyUI.scene.map(a=>{var c;return Object.assign(Object.assign({},a),{color:a.entityId&&this.highlightedNodeId===a["@id"]?[30,136,229,255]:this.filteredBlocks.includes(null!==(c=a.entityId)&&void 0!==c?c:"")?[173,255,47,229.5]:[255,255,255,229.5]})})}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:r}=this;if(r){const{x_dimension:i,y_dimension:s,z_dimension:o}=r;t.rotation=t.rotationX=0,t.bounds={x:1.25*i/1e3,y:1.25*s/1e3,z:1.25*o/1e3},t.target=[i/1e3/2,s/1e3/2,o/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"]}}return n.\u0275fac=function(t){return new(t||n)(Me(CM))},n.\u0275cmp=wn({type:n,selectors:[["ccf-organ"]],viewQuery:function(t,r){if(1&t&&ns(met,7),2&t){let i;Ar(i=Mr())&&(r.bodyUI=i.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[ai],decls:5,vars:10,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick","initialized"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","hidden","valueChange"]],template:function(t,r){1&t&&(Ft(0,"ccf-body-ui",0,1),zn("nodeClick",function(s){return r.nodeClicked(s)})("initialized",function(){return r.zoomToFitOrgan()}),kt(),Ft(2,"div",2),Ft(3,"ccf-slide-toggle",3),zn("valueChange",function(s){return r.updateSex(s)}),kt(),Ft(4,"ccf-slide-toggle",3),zn("valueChange",function(s){return r.updateSide(s)}),kt(),kt()),2&t&&(an("scene",r.scene)("interactive",!0),Qt(3),an("labels",Gx(8,_et))("value",r.sex)("hidden",!r.sex),Qt(1),an("labels",Gx(9,yet))("value",r.side)("hidden",!r.side))},directives:[_Je,get],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),n})();function vet(n,e){if(1&n&&(Ft(0,"div",3),Ft(1,"div",4),Gr(2),kt(),Ft(3,"div",5),Gr(4),kt(),kt()),2&n){const t=e.$implicit;Qt(2),yo(t.count),Qt(2),yo(t.label)}}let wet=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=wn({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(t,r){1&t&&(Ft(0,"div",0),Ft(1,"div",1),Gr(2),kt(),Br(3,vet,5,2,"div",2),kt()),2&t&&(Qt(2),Nd(" ",r.statsLabel," "),Qt(1),an("ngForOf",r.stats))},directives:[_p],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),n})();function Eet(n,e){if(1&n){const t=Eu();Ft(0,"div",6),Ft(1,"div",7),Ft(2,"div",8),Gr(3),kt(),Ft(4,"div",9),zn("click",function(){const s=es(t).$implicit;return Vr().goToURL(s.buttonUrl)}),Gr(5),kt(),kt(),kt()}if(2&n){const t=e.$implicit;Qt(3),yo(t.body),Qt(1),an("gaLabel",t.buttonUrl),Qt(1),Nd(" ",t.buttonTitle,"")}}function Cet(n,e){if(1&n){const t=Eu();Ft(0,"div",10),zn("click",function(){const s=es(t).$implicit;return Vr().goToURL(s.buttonUrl)}),Gr(1),kt()}if(2&n){const t=e.$implicit;an("gaLabel",t.buttonUrl),Qt(1),yo(t.buttonTitle)}}let Det=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the CCF Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the CCF Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"CCF Portal",buttonUrl:"https://hubmapconsortium.github.io/ccf/"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.biorxiv.org/content/10.1101/2021.05.31.446440v2"}]}goToURL(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=wn({type:n,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(t,r){1&t&&(Ft(0,"div",0),Br(1,Eet,6,3,"div",1),kt(),Ft(2,"div",2),Ft(3,"div",3),Gr(4,"Common Coordinate Framework (CCF) Deep Dive"),kt(),Ft(5,"div",4),Br(6,Cet,2,2,"div",5),kt(),kt()),2&t&&(Qt(1),an("ngForOf",r.linkCards),Qt(5),an("ngForOf",r.deepDives))},directives:[hee,_p,fee],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),n})();const xet=["left"],Tet=["right"],Aet=function(){return[]},Met=[{color:[0,0,0,0],opacity:.001}];let Iet=(()=>{class n{constructor(t,r,i){this.ga=r,this.configState=i,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(me(s=>({tmc:s}))),this.latestConfig={},this.organInfo$=i.config$.pipe(Oi(s=>this.latestConfig=s),As(s=>{var o,a,c;return t.getOrganInfo(null!==(o=s.organIri)&&void 0!==o?o:"",null===(c=null===(a=s.side)||void 0===a?void 0:a.toLowerCase)||void 0===c?void 0:c.call(a),s.sex)}),Oi(s=>this.logOrganLookup(s)),Oi(s=>this.latestOrganInfo=s),Kc(1)),this.organ$=this.organInfo$.pipe(As(s=>s?t.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):rn(void 0)),Oi(s=>{var o;if(s&&this.latestOrganInfo){const a=(null===(o=this.latestOrganInfo)||void 0===o?void 0:o.hasSex)?s.sex:void 0;a!==this.latestConfig.sex&&this.updateInput("sex",a),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),Kc(1)),this.scene$=this.organ$.pipe(As(s=>s&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,s.sex):rn(Met))),this.stats$=this.organ$.pipe(As(s=>s&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,s.sex):rn([]))),this.statsLabel$=this.organ$.pipe(me(s=>this.makeStatsLabel(this.latestOrganInfo,null==s?void 0:s.sex)),function(...n){const e=n[n.length-1];return Ae(e)?(n.pop(),t=>HA(n,t,e)):t=>HA(n,t)}("Loading...")),this.blocks$=this.organ$.pipe(As(s=>s&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,s.sex):rn([])))}ngAfterViewInit(){const{left:t,right:r}=this;t.nativeElement.style.height=`${r.nativeElement.offsetHeight}px`}updateInput(t,r){this.configState.patchConfig({[t]:r})}makeStatsLabel(t,r){let i=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const s=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;i=[r,t.organ,s]}return i.filter(s=>!!s).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}}return n.\u0275fac=function(t){return new(t||n)(Me(eet),Me(CM),Me(Sv))},n.\u0275cmp=wn({type:n,selectors:[["ccf-root"]],viewQuery:function(t,r){if(1&t&&(ns(xet,7,Dn),ns(Tet,7,Dn)),2&t){let i;Ar(i=Mr())&&(r.left=i.first),Ar(i=Mr())&&(r.right=i.first)}},decls:16,vars:25,consts:[[1,"container"],[1,"left"],["left",""],[3,"blocks","filter","sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(t,r){if(1&t&&(Ft(0,"div",0),Ft(1,"div",1,2),Ft(3,"ccf-organ",3),zn("sexChange",function(s){return r.updateInput("sex",s)})("sideChange",function(s){return r.updateInput("side",s)}),Nl(4,"async"),Nl(5,"async"),Nl(6,"async"),Nl(7,"async"),Nl(8,"async"),Nl(9,"async"),kt(),kt(),Ft(10,"div",4,5),zr(12,"ccf-stats-list",6),Nl(13,"async"),Nl(14,"async"),zr(15,"ccf-link-cards"),kt(),kt()),2&t){let i;Qt(3),an("blocks",Pl(4,8,r.blocks$))("filter",Pl(5,10,r.filter$))("sex",Pl(6,12,r.sex$))("side",Pl(7,14,r.side$))("organ",Pl(8,16,r.organ$))("scene",null!==(i=Pl(9,18,r.scene$))&&void 0!==i?i:Gx(24,Aet)),Qt(9),an("statsLabel",Pl(13,20,r.statsLabel$))("stats",Pl(14,22,r.stats$))}},directives:[bet,wet,Det],pipes:[bT],styles:[".container[_ngcontent-%COMP%]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),n})();function Ret(n,e){1&n&&zr(0,"ccf-root")}function Oet(n){const e=r=>"string"==typeof r,t=r=>Array.isArray(r)&&r.every(e);if("string"==typeof n){const r=zF.json(n);if(t(r))return r}else if(t(n))return n;throw new Error("Invalid data sources")}function Net(n){const e=r=>"string"==typeof r,t=r=>Array.isArray(r)&&r.every(e);if("string"==typeof n){if(!(null==n?void 0:n.startsWith("[")))return[n];{const r=zF.json(n);if(t(r))return r}}else if(t(n))return n;throw new Error("Invalid data sources")}let Pet=(()=>{class n extends iye{constructor(t,r){super(t,r,{initialDelay:10,initialConfig:Object.assign(Object.assign({},Jg.dbOptions),globalThis.dbOptions),parse:{dataSources:Oet,highlightProviders:Net,useRemoteApi:zF.boolean}}),this.sex="Female",this.side="Left"}}return n.\u0275fac=function(t){return new(t||n)(Me(Sv),Me(Bs))},n.\u0275cmp=wn({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",hubmapDataService:"hubmapDataService",hubmapDataUrl:"hubmapDataUrl",hubmapAssetUrl:"hubmapAssetUrl",hubmapToken:"hubmapToken",hubmapPortalUrl:"hubmapPortalUrl",useRemoteApi:"useRemoteApi",remoteApiEndpoint:"remoteApiEndpoint"},features:[On],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&Br(0,Ret,1,0,"ccf-root",0),2&t&&an("ngIf",r.initialized)},directives:[$h,Iet],encapsulation:2,changeDetection:0}),n})(),Fet=(()=>{class n extends JJe{selectToken(t){return t.useRemoteApi&&t.remoteApiEndpoint?XJe:ZJe}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=ui(n)))(r||n)}}(),n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ket=(()=>{class n{constructor(t,r){this.accessor=t,this.injector=r}static forRoot(t=[]){return{ngModule:n,providers:[zs,rl,ZZ,...t]}}}return n.\u0275fac=function(t){return new(t||n)(Oe(zs,2),Oe(rl,2))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})();const _R=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class Vet{constructor(e,t,r){this.action=e,this.store=t,this.logWriter=r}dispatched(e){const t=mm(this.action),r=function(n){return _R(n.getHours(),2)+":"+_R(n.getMinutes(),2)+":"+_R(n.getSeconds(),2)+"."+_R(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${r}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(i=>e[i]).filter(i=>void 0!==i)}}class jet{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch(r){console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch(e){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,r){this.isIE()?this.logger.log(e,r):this.logger.log("%c "+e,t,r)}isIE(){const e="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const r=e.indexOf("MSIE "),i=e.indexOf("Trident/");return(r>-1||i>-1)&&(t=!0),t}}const _ce=new $t("NGXS_LOGGER_PLUGIN_OPTIONS");let Uet=(()=>{class n{constructor(t,r){this._options=t,this._injector=r}handle(t,r,i){if(this._options.disabled||!this._options.filter(r,t))return i(t,r);this._logWriter=this._logWriter||new jet(this._options),this._store=this._store||this._injector.get(Rp);const s=new Vet(r,this._store,this._logWriter);return s.dispatched(t),i(t,r).pipe(Oi(o=>{s.completed(o)}),Hu(o=>{throw s.errored(o),o}))}}return n.\u0275fac=function(t){return new(t||n)(Oe(_ce),Oe(Wn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const yce=new $t("LOGGER_USER_OPTIONS");function Het(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let zet=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:lY,useClass:Uet,multi:!0},{provide:yce,useValue:t},{provide:_ce,useFactory:Het,deps:[yce]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({}),n})();const $et=[Sv];let Get=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[ket.forRoot(),vc.forRoot($et,{developmentMode:!Jg.production}),zet.forRoot({disabled:Jg.production})]]}),n})(),Wet=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}}return n.\u0275fac=function(t){return new(t||n)(Oe(n,12))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[{provide:hce,useExisting:Fet}],imports:[[bZ,_4e.forRoot({gaToken:Jg.googleAnalyticsToken,appName:"organ-info",projectName:"ccf",developmentMode:!Jg.production}),sZe.forRoot(()=>new vS({basePath:Jg.dbOptions.remoteApiEndpoint})),Get]]}),n})(),qet=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[Ts,pet]]}),n})(),Yet=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[Ts,yJe,qet]]}),n})(),Ket=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[Ts,SM]]}),n})(),Xet=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({imports:[[Ts]]}),n})(),Qet=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function(n,e){const t=function(n,e){return e.get(Il).resolveComponentFactory(n).inputs}(n,e.injector),r=e.strategyFactory||new Z_e(n,e.injector),i=function(n){const e={};return n.forEach(({propName:t,templateName:r})=>{e[function(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(r)]=t}),e}(t);class s extends eye{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=r.create(this.injector||e.injector);t.forEach(({propName:c})=>{if(!this.hasOwnProperty(c))return;const l=this[c];delete this[c],a.setInputValue(c,l)})}return this._ngElementStrategy}attributeChangedCallback(a,c,l,u){this.ngElementStrategy.setInputValue(i[a],l)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=function(n,e,t){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(c)})}}return s.observedAttributes=Object.keys(i),t.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(Pet,{injector:this.injector});customElements.define("ccf-organ-info",t)}}return n.\u0275fac=function(t){return new(t||n)(Oe(Wn))},n.\u0275mod=hn({type:n}),n.\u0275inj=vt({providers:[],imports:[[jF,Wet,Ket,Xet,Yet]]}),n})();Jg.production&&function(){if(k6)throw new Error("Cannot enable prod mode after platform setup.");F6=!1}(),w_e().bootstrapModule(Qet).catch(n=>console.error(n))},52:Vt=>{function rt(gt,J,xt,dt,Y,Te,fe){try{var q=gt[Te](fe),H=q.value}catch(B){return void xt(B)}q.done?J(H):Promise.resolve(H).then(dt,Y)}Vt.exports=function(gt){return function(){var J=this,xt=arguments;return new Promise(function(dt,Y){var Te=gt.apply(J,xt);function fe(H){rt(Te,dt,Y,fe,q,"next",H)}function q(H){rt(Te,dt,Y,fe,q,"throw",H)}fe(void 0)})}},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0},948:Vt=>{Vt.exports=function(tt){return tt&&tt.__esModule?tt:{default:tt}},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0},321:Vt=>{function rt(tt){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(Vt.exports=rt=function(J){return typeof J},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0):(Vt.exports=rt=function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0),rt(tt)}Vt.exports=rt,Vt.exports.default=Vt.exports,Vt.exports.__esModule=!0},82:Vt=>{function rt(tt){return Promise.resolve().then(()=>{var gt=new Error("Cannot find module '"+tt+"'");throw gt.code="MODULE_NOT_FOUND",gt})}rt.keys=()=>[],rt.resolve=rt,rt.id=82,Vt.exports=rt},521:()=>{},125:()=>{},307:()=>{}},Vt=>{Vt(Vt.s=626)}]);