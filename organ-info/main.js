var NPe=Object.defineProperty,kPe=Object.defineProperties,FPe=Object.getOwnPropertyDescriptors,$C=Object.getOwnPropertySymbols,o9=Object.prototype.hasOwnProperty,a9=Object.prototype.propertyIsEnumerable,Ii=Math.pow,l9=(jt,rt,Ke)=>rt in jt?NPe(jt,rt,{enumerable:!0,configurable:!0,writable:!0,value:Ke}):jt[rt]=Ke,Ls=(jt,rt)=>{for(var Ke in rt||(rt={}))o9.call(rt,Ke)&&l9(jt,Ke,rt[Ke]);if($C)for(var Ke of $C(rt))a9.call(rt,Ke)&&l9(jt,Ke,rt[Ke]);return jt},Qf=(jt,rt)=>kPe(jt,FPe(rt)),u9=(jt,rt)=>{var Ke={};for(var gt in jt)o9.call(jt,gt)&&rt.indexOf(gt)<0&&(Ke[gt]=jt[gt]);if(null!=jt&&$C)for(var gt of $C(jt))rt.indexOf(gt)<0&&a9.call(jt,gt)&&(Ke[gt]=jt[gt]);return Ke};(self.webpackChunkccf_ui=self.webpackChunkccf_ui||[]).push([[179],{1440:(jt,rt,Ke)=>{var gt=Ke(1052).default;jt.exports=function Q(xe,me,Y){function z(K,E){if(!me[K]){if(!xe[K]){if(F)return F(K,!0);var O=new Error("Cannot find module '"+K+"'");throw O.code="MODULE_NOT_FOUND",O}var T=me[K]={exports:{}};xe[K][0].call(T.exports,function(v){return z(xe[K][1][v]||v)},T,T.exports,Q,xe,me,Y)}return me[K].exports}for(var F=void 0,se=0;se<Y.length;se++)z(Y[se]);return z}({1:[function(Q,xe,me){var Y,z;Y=this,z=function(Y,z,F,se,K){"use strict";function D(Se,Re,He,Xe){return new(He||(He=Promise))(function(W,J){function we(At){try{ke(Xe.next(At))}catch(pt){J(pt)}}function ce(At){try{ke(Xe.throw(At))}catch(pt){J(pt)}}function ke(At){At.done?W(At.value):function(W){return W instanceof He?W:new He(function(J){J(W)})}(At.value).then(we,ce)}ke((Xe=Xe.apply(Se,Re||[])).next())})}function B(Se,Re){var Xe,ze,W,J,He={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return J={next:we(0),throw:we(1),return:we(2)},"function"==typeof Symbol&&(J[Symbol.iterator]=function(){return this}),J;function we(ke){return function(At){return function(ke){if(Xe)throw new TypeError("Generator is already executing.");for(;He;)try{if(Xe=1,ze&&(W=2&ke[0]?ze.return:ke[0]?ze.throw||((W=ze.return)&&W.call(ze),0):ze.next)&&!(W=W.call(ze,ke[1])).done)return W;switch(ze=0,W&&(ke=[2&ke[0],W.value]),ke[0]){case 0:case 1:W=ke;break;case 4:return He.label++,{value:ke[1],done:!1};case 5:He.label++,ze=ke[1],ke=[0];continue;case 7:ke=He.ops.pop(),He.trys.pop();continue;default:if(!(W=(W=He.trys).length>0&&W[W.length-1])&&(6===ke[0]||2===ke[0])){He=0;continue}if(3===ke[0]&&(!W||ke[1]>W[0]&&ke[1]<W[3])){He.label=ke[1];break}if(6===ke[0]&&He.label<W[1]){He.label=W[1],W=ke;break}if(W&&He.label<W[2]){He.label=W[2],He.ops.push(ke);break}W[2]&&He.ops.pop(),He.trys.pop();continue}ke=Re.call(Se,He)}catch(At){ke=[6,At],ze=0}finally{Xe=W=0}if(5&ke[0])throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}([ke,At])}}}function Ze(Se){var Re=Se.length,He=0;return new K.Readable({objectMode:!0,read:function(){this.push(He<Re?Se[He++]:null)}})}Y.addJsonLdToStore=function(Se,Re){return D(this,void 0,void 0,function(){var He,Xe,ze;return B(this,function(W){switch(W.label){case 0:return"string"!=typeof Se?[3,4]:[4,fetch(Se,{redirect:"follow"})];case 1:return(Xe=W.sent()).ok?[4,Xe.json()]:[3,3];case 2:He=W.sent(),W.label=3;case 3:return[3,5];case 4:He=Se,W.label=5;case 5:return He?[4,z.toRDF(He)]:[3,7];case 6:ze=W.sent(),Re.import(Ze(ze)),W.label=7;case 7:return[2,Re]}})})},Y.addN3ToStore=function(Se,Re){return D(this,void 0,void 0,function(){var He,Xe,ze;return B(this,function(W){switch(W.label){case 0:return"string"==typeof Se&&(null==Se?void 0:Se.startsWith("http"))?[4,fetch(Se,{redirect:"follow"})]:[3,4];case 1:return(Xe=W.sent()).ok?[4,Xe.text()]:[3,3];case 2:He=W.sent(),W.label=3;case 3:return[3,5];case 4:He=Se,W.label=5;case 5:return He&&(ze=new F.Parser({format:"n3"}).parse(He),Re.import(Ze(ze))),[2,Re]}})})},Y.addRdfXmlToStore=function(Se,Re){return D(this,void 0,void 0,function(){var He,Xe,ze,W;return B(this,function(J){switch(J.label){case 0:return"string"==typeof Se&&(null==Se?void 0:Se.startsWith("http"))?[4,fetch(Se,{redirect:"follow"})]:[3,4];case 1:return(Xe=J.sent()).ok?[4,Xe.text()]:[3,3];case 2:He=J.sent(),J.label=3;case 3:return[3,5];case 4:He=Se,J.label=5;case 5:return He?(ze=new se.RdfXmlParser({dataFactory:F.DataFactory,strict:!0}),W=new Promise(function(we){ze.once("end",function(){return we(Re)})}),Re.import(ze),ze.write(He),ze.end(),[2,W]):[2,Re]}})})},Y.arrayToStream=Ze,Y.deserializeN3Store=function(Se,Re){var He=JSON.parse(Se),Xe=new F.Store;return Object.assign(Xe,He,{_factory:null!=Re?Re:F.DataFactory}),Xe},Y.serializeN3Store=function(Se){var Re=Object.assign({},Se);return delete Re._factory,JSON.stringify(Re)},Y.streamToArray=function(Se){return new Promise(function(Re,He){var Xe=[];Se.on("data",function(ze){Xe.push(ze)}).once("end",function(){Re(Xe)}).once("error",function(ze){He(ze)})})},Object.keys(F).forEach(function(Se){"default"!==Se&&!Y.hasOwnProperty(Se)&&Object.defineProperty(Y,Se,{enumerable:!0,get:function(){return F[Se]}})}),Object.defineProperty(Y,"__esModule",{value:!0})},"object"==typeof me&&void 0!==xe?z(me,Q("jsonld"),Q("n3"),Q("rdfxml-streaming-parser"),Q("readable-stream")):z((Y="undefined"!=typeof globalThis?globalThis:Y||self).tripleStoreUtils={},Y.jsonld,Y.n3,Y.rdfxmlStreamingParser,Y.readablestream)},{jsonld:26,n3:43,"rdfxml-streaming-parser":64,"readable-stream":81}],2:[function(Q,xe,me){"use strict";me.byteLength=function(B){var I=A(B),Z=I[1];return 3*(I[0]+Z)/4-Z},me.toByteArray=function(B){var I,U,q=A(B),Z=q[0],M=q[1],N=new F(function(B,I,q){return 3*(I+q)/4-q}(0,Z,M)),ee=0,C=M>0?Z-4:Z;for(U=0;U<C;U+=4)I=z[B.charCodeAt(U)]<<18|z[B.charCodeAt(U+1)]<<12|z[B.charCodeAt(U+2)]<<6|z[B.charCodeAt(U+3)],N[ee++]=I>>16&255,N[ee++]=I>>8&255,N[ee++]=255&I;return 2===M&&(I=z[B.charCodeAt(U)]<<2|z[B.charCodeAt(U+1)]>>4,N[ee++]=255&I),1===M&&(I=z[B.charCodeAt(U)]<<10|z[B.charCodeAt(U+1)]<<4|z[B.charCodeAt(U+2)]>>2,N[ee++]=I>>8&255,N[ee++]=255&I),N},me.fromByteArray=function(B){for(var I,q=B.length,Z=q%3,M=[],N=16383,ee=0,C=q-Z;ee<C;ee+=N)M.push(S(B,ee,ee+N>C?C:ee+N));return 1===Z?M.push(Y[(I=B[q-1])>>2]+Y[I<<4&63]+"=="):2===Z&&M.push(Y[(I=(B[q-2]<<8)+B[q-1])>>10]+Y[I>>4&63]+Y[I<<2&63]+"="),M.join("")};for(var Y=[],z=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=0,E=se.length;K<E;++K)Y[K]=se[K],z[se.charCodeAt(K)]=K;function A(B){var I=B.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var q=B.indexOf("=");return-1===q&&(q=I),[q,q===I?0:4-q%4]}function y(B){return Y[B>>18&63]+Y[B>>12&63]+Y[B>>6&63]+Y[63&B]}function S(B,I,q){for(var M=[],N=I;N<q;N+=3)M.push(y((B[N]<<16&16711680)+(B[N+1]<<8&65280)+(255&B[N+2])));return M.join("")}z["-".charCodeAt(0)]=62,z["_".charCodeAt(0)]=63},{}],3:[function(Q,xe,me){},{}],4:[function(Q,xe,me){var Y=Q("buffer"),z=Y.Buffer;function F(K,E){for(var A in K)E[A]=K[A]}function se(K,E,A){return z(K,E,A)}z.from&&z.alloc&&z.allocUnsafe&&z.allocUnsafeSlow?xe.exports=Y:(F(Y,me),me.Buffer=se),F(z,se),se.from=function(K,E,A){if("number"==typeof K)throw new TypeError("Argument must not be a number");return z(K,E,A)},se.alloc=function(K,E,A){if("number"!=typeof K)throw new TypeError("Argument must be a number");var O=z(K);return void 0!==E?"string"==typeof A?O.fill(E,A):O.fill(E):O.fill(0),O},se.allocUnsafe=function(K){if("number"!=typeof K)throw new TypeError("Argument must be a number");return z(K)},se.allocUnsafeSlow=function(K){if("number"!=typeof K)throw new TypeError("Argument must be a number");return Y.SlowBuffer(K)}},{buffer:6}],5:[function(Q,xe,me){"use strict";var Y=Q("safe-buffer").Buffer,z=Y.isEncoding||function(M){switch((M=""+M)&&M.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function K(M){var N;switch(this.encoding=function(M){var N=function(M){if(!M)return"utf8";for(var N;;)switch(M){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return M;default:if(N)return;M=(""+M).toLowerCase(),N=!0}}(M);if("string"!=typeof N&&(Y.isEncoding===z||!z(M)))throw new Error("Unknown encoding: "+M);return N||M}(M),this.encoding){case"utf16le":this.text=S,this.end=D,N=4;break;case"utf8":this.fillLast=T,N=4;break;case"base64":this.text=B,this.end=I,N=3;break;default:return this.write=q,void(this.end=Z)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Y.allocUnsafe(N)}function E(M){return M<=127?0:M>>5==6?2:M>>4==14?3:M>>3==30?4:M>>6==2?-1:-2}function T(M){var N=this.lastTotal-this.lastNeed,ee=function(M,N,ee){if(128!=(192&N[0]))return M.lastNeed=0,"\ufffd";if(M.lastNeed>1&&N.length>1){if(128!=(192&N[1]))return M.lastNeed=1,"\ufffd";if(M.lastNeed>2&&N.length>2&&128!=(192&N[2]))return M.lastNeed=2,"\ufffd"}}(this,M);return void 0!==ee?ee:this.lastNeed<=M.length?(M.copy(this.lastChar,N,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(M.copy(this.lastChar,N,0,M.length),void(this.lastNeed-=M.length))}function S(M,N){if((M.length-N)%2==0){var ee=M.toString("utf16le",N);if(ee){var C=ee.charCodeAt(ee.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1],ee.slice(0,-1)}return ee}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=M[M.length-1],M.toString("utf16le",N,M.length-1)}function D(M){var N=M&&M.length?this.write(M):"";return this.lastNeed?N+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):N}function B(M,N){var ee=(M.length-N)%3;return 0===ee?M.toString("base64",N):(this.lastNeed=3-ee,this.lastTotal=3,1===ee?this.lastChar[0]=M[M.length-1]:(this.lastChar[0]=M[M.length-2],this.lastChar[1]=M[M.length-1]),M.toString("base64",N,M.length-ee))}function I(M){var N=M&&M.length?this.write(M):"";return this.lastNeed?N+this.lastChar.toString("base64",0,3-this.lastNeed):N}function q(M){return M.toString(this.encoding)}function Z(M){return M&&M.length?this.write(M):""}me.StringDecoder=K,K.prototype.write=function(M){if(0===M.length)return"";var N,ee;if(this.lastNeed){if(void 0===(N=this.fillLast(M)))return"";ee=this.lastNeed,this.lastNeed=0}else ee=0;return ee<M.length?N?N+this.text(M,ee):this.text(M,ee):N||""},K.prototype.end=function(M){var N=M&&M.length?this.write(M):"";return this.lastNeed?N+"\ufffd":N},K.prototype.text=function(M,N){var ee=function(M,N,ee){var C=N.length-1;if(C<ee)return 0;var U=E(N[C]);return U>=0?(U>0&&(M.lastNeed=U-1),U):--C<ee||-2===U?0:(U=E(N[C]))>=0?(U>0&&(M.lastNeed=U-2),U):--C<ee||-2===U?0:(U=E(N[C]))>=0?(U>0&&(2===U?U=0:M.lastNeed=U-3),U):0}(this,M,N);if(!this.lastNeed)return M.toString("utf8",N);this.lastTotal=ee;var C=M.length-(ee-this.lastNeed);return M.copy(this.lastChar,0,C),M.toString("utf8",N,C)},K.prototype.fillLast=function(M){if(this.lastNeed<=M.length)return M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);M.copy(this.lastChar,this.lastTotal-this.lastNeed,0,M.length),this.lastNeed-=M.length}},{"safe-buffer":4}],6:[function(Q,xe,me){(function(Y){(function(){"use strict";var z=Q("base64-js"),F=Q("ieee754");me.Buffer=A,me.SlowBuffer=function(j){return+j!=j&&(j=0),A.alloc(+j)},me.INSPECT_MAX_BYTES=50;var se=2147483647;function E(j){if(j>se)throw new RangeError('The value "'+j+'" is invalid for option "size"');var R=new Uint8Array(j);return R.__proto__=A.prototype,R}function A(j,R,L){if("number"==typeof j){if("string"==typeof R)throw new TypeError('The "string" argument must be of type string. Received type number');return y(j)}return O(j,R,L)}function O(j,R,L){if("string"==typeof j)return function(j,R){if(("string"!=typeof R||""===R)&&(R="utf8"),!A.isEncoding(R))throw new TypeError("Unknown encoding: "+R);var L=0|M(j,R),Pe=E(L),et=Pe.write(j,R);return et!==L&&(Pe=Pe.slice(0,et)),Pe}(j,R);if(ArrayBuffer.isView(j))return D(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(pt(j,ArrayBuffer)||j&&pt(j.buffer,ArrayBuffer))return function(j,R,L){if(R<0||j.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<R+(L||0))throw new RangeError('"length" is outside of buffer bounds');var Pe;return(Pe=void 0===R&&void 0===L?new Uint8Array(j):void 0===L?new Uint8Array(j,R):new Uint8Array(j,R,L)).__proto__=A.prototype,Pe}(j,R,L);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var Pe=j.valueOf&&j.valueOf();if(null!=Pe&&Pe!==j)return A.from(Pe,R,L);var et=function(j){if(A.isBuffer(j)){var R=0|q(j.length),L=E(R);return 0===L.length||j.copy(L,0,0,R),L}return void 0!==j.length?"number"!=typeof j.length||ye(j.length)?E(0):D(j):"Buffer"===j.type&&Array.isArray(j.data)?D(j.data):void 0}(j);if(et)return et;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return A.from(j[Symbol.toPrimitive]("string"),R,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function T(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function y(j){return T(j),E(j<0?0:0|q(j))}function D(j){for(var R=j.length<0?0:0|q(j.length),L=E(R),Pe=0;Pe<R;Pe+=1)L[Pe]=255&j[Pe];return L}function q(j){if(j>=se)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+se.toString(16)+" bytes");return 0|j}function M(j,R){if(A.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||pt(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var L=j.length,Pe=arguments.length>2&&!0===arguments[2];if(!Pe&&0===L)return 0;for(var et=!1;;)switch(R){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return J(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*L;case"hex":return L>>>1;case"base64":return ke(j).length;default:if(et)return Pe?-1:J(j).length;R=(""+R).toLowerCase(),et=!0}}function N(j,R,L){var Pe=!1;if((void 0===R||R<0)&&(R=0),R>this.length||((void 0===L||L>this.length)&&(L=this.length),L<=0)||(L>>>=0)<=(R>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return Je(this,R,L);case"utf8":case"utf-8":return ge(this,R,L);case"ascii":return Ze(this,R,L);case"latin1":case"binary":return We(this,R,L);case"base64":return X(this,R,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ye(this,R,L);default:if(Pe)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),Pe=!0}}function ee(j,R,L){var Pe=j[R];j[R]=j[L],j[L]=Pe}function C(j,R,L,Pe,et){if(0===j.length)return-1;if("string"==typeof L?(Pe=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),ye(L=+L)&&(L=et?0:j.length-1),L<0&&(L=j.length+L),L>=j.length){if(et)return-1;L=j.length-1}else if(L<0){if(!et)return-1;L=0}if("string"==typeof R&&(R=A.from(R,Pe)),A.isBuffer(R))return 0===R.length?-1:U(j,R,L,Pe,et);if("number"==typeof R)return R&=255,"function"==typeof Uint8Array.prototype.indexOf?et?Uint8Array.prototype.indexOf.call(j,R,L):Uint8Array.prototype.lastIndexOf.call(j,R,L):U(j,[R],L,Pe,et);throw new TypeError("val must be string, number or Buffer")}function U(j,R,L,Pe,et){var $n,wt=1,Ot=j.length,Mn=R.length;if(void 0!==Pe&&("ucs2"===(Pe=String(Pe).toLowerCase())||"ucs-2"===Pe||"utf16le"===Pe||"utf-16le"===Pe)){if(j.length<2||R.length<2)return-1;wt=2,Ot/=2,Mn/=2,L/=2}function kn(Bs,ds){return 1===wt?Bs[ds]:Bs.readUInt16BE(ds*wt)}if(et){var br=-1;for($n=L;$n<Ot;$n++)if(kn(j,$n)===kn(R,-1===br?0:$n-br)){if(-1===br&&(br=$n),$n-br+1===Mn)return br*wt}else-1!==br&&($n-=$n-br),br=-1}else for(L+Mn>Ot&&(L=Ot-Mn),$n=L;$n>=0;$n--){for(var hr=!0,Hi=0;Hi<Mn;Hi++)if(kn(j,$n+Hi)!==kn(R,Hi)){hr=!1;break}if(hr)return $n}return-1}function re(j,R,L,Pe){L=Number(L)||0;var et=j.length-L;Pe?(Pe=Number(Pe))>et&&(Pe=et):Pe=et;var wt=R.length;Pe>wt/2&&(Pe=wt/2);for(var Ot=0;Ot<Pe;++Ot){var Mn=parseInt(R.substr(2*Ot,2),16);if(ye(Mn))return Ot;j[L+Ot]=Mn}return Ot}function de(j,R,L,Pe){return At(J(R,j.length-L),j,L,Pe)}function G(j,R,L,Pe){return At(function(j){for(var R=[],L=0;L<j.length;++L)R.push(255&j.charCodeAt(L));return R}(R),j,L,Pe)}function $(j,R,L,Pe){return G(j,R,L,Pe)}function pe(j,R,L,Pe){return At(ke(R),j,L,Pe)}function ue(j,R,L,Pe){return At(function(j,R){for(var L,Pe,wt=[],Ot=0;Ot<j.length&&!((R-=2)<0);++Ot)Pe=(L=j.charCodeAt(Ot))>>8,wt.push(L%256),wt.push(Pe);return wt}(R,j.length-L),j,L,Pe)}function X(j,R,L){return z.fromByteArray(0===R&&L===j.length?j:j.slice(R,L))}function ge(j,R,L){L=Math.min(j.length,L);for(var Pe=[],et=R;et<L;){var kn,$n,br,hr,wt=j[et],Ot=null,Mn=wt>239?4:wt>223?3:wt>191?2:1;if(et+Mn<=L)switch(Mn){case 1:wt<128&&(Ot=wt);break;case 2:128==(192&(kn=j[et+1]))&&(hr=(31&wt)<<6|63&kn)>127&&(Ot=hr);break;case 3:$n=j[et+2],128==(192&(kn=j[et+1]))&&128==(192&$n)&&(hr=(15&wt)<<12|(63&kn)<<6|63&$n)>2047&&(hr<55296||hr>57343)&&(Ot=hr);break;case 4:$n=j[et+2],br=j[et+3],128==(192&(kn=j[et+1]))&&128==(192&$n)&&128==(192&br)&&(hr=(15&wt)<<18|(63&kn)<<12|(63&$n)<<6|63&br)>65535&&hr<1114112&&(Ot=hr)}null===Ot?(Ot=65533,Mn=1):Ot>65535&&(Pe.push((Ot-=65536)>>>10&1023|55296),Ot=56320|1023&Ot),Pe.push(Ot),et+=Mn}return function(j){var R=j.length;if(R<=4096)return String.fromCharCode.apply(String,j);for(var L="",Pe=0;Pe<R;)L+=String.fromCharCode.apply(String,j.slice(Pe,Pe+=4096));return L}(Pe)}me.kMaxLength=se,!(A.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(R){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&A[Symbol.species]===A&&Object.defineProperty(A,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),A.poolSize=8192,A.from=function(j,R,L){return O(j,R,L)},A.prototype.__proto__=Uint8Array.prototype,A.__proto__=Uint8Array,A.alloc=function(j,R,L){return function(j,R,L){return T(j),j<=0?E(j):void 0!==R?"string"==typeof L?E(j).fill(R,L):E(j).fill(R):E(j)}(j,R,L)},A.allocUnsafe=function(j){return y(j)},A.allocUnsafeSlow=function(j){return y(j)},A.isBuffer=function(R){return null!=R&&!0===R._isBuffer&&R!==A.prototype},A.compare=function(R,L){if(pt(R,Uint8Array)&&(R=A.from(R,R.offset,R.byteLength)),pt(L,Uint8Array)&&(L=A.from(L,L.offset,L.byteLength)),!A.isBuffer(R)||!A.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===L)return 0;for(var Pe=R.length,et=L.length,wt=0,Ot=Math.min(Pe,et);wt<Ot;++wt)if(R[wt]!==L[wt]){Pe=R[wt],et=L[wt];break}return Pe<et?-1:et<Pe?1:0},A.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(R,L){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(0===R.length)return A.alloc(0);var Pe;if(void 0===L)for(L=0,Pe=0;Pe<R.length;++Pe)L+=R[Pe].length;var et=A.allocUnsafe(L),wt=0;for(Pe=0;Pe<R.length;++Pe){var Ot=R[Pe];if(pt(Ot,Uint8Array)&&(Ot=A.from(Ot)),!A.isBuffer(Ot))throw new TypeError('"list" argument must be an Array of Buffers');Ot.copy(et,wt),wt+=Ot.length}return et},A.byteLength=M,A.prototype._isBuffer=!0,A.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<R;L+=2)ee(this,L,L+1);return this},A.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<R;L+=4)ee(this,L,L+3),ee(this,L+1,L+2);return this},A.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<R;L+=8)ee(this,L,L+7),ee(this,L+1,L+6),ee(this,L+2,L+5),ee(this,L+3,L+4);return this},A.prototype.toLocaleString=A.prototype.toString=function(){var R=this.length;return 0===R?"":0===arguments.length?ge(this,0,R):N.apply(this,arguments)},A.prototype.equals=function(R){if(!A.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||0===A.compare(this,R)},A.prototype.inspect=function(){var R="",L=me.INSPECT_MAX_BYTES;return R=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(R+=" ... "),"<Buffer "+R+">"},A.prototype.compare=function(R,L,Pe,et,wt){if(pt(R,Uint8Array)&&(R=A.from(R,R.offset,R.byteLength)),!A.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(void 0===L&&(L=0),void 0===Pe&&(Pe=R?R.length:0),void 0===et&&(et=0),void 0===wt&&(wt=this.length),L<0||Pe>R.length||et<0||wt>this.length)throw new RangeError("out of range index");if(et>=wt&&L>=Pe)return 0;if(et>=wt)return-1;if(L>=Pe)return 1;if(this===R)return 0;for(var Ot=(wt>>>=0)-(et>>>=0),Mn=(Pe>>>=0)-(L>>>=0),kn=Math.min(Ot,Mn),$n=this.slice(et,wt),br=R.slice(L,Pe),hr=0;hr<kn;++hr)if($n[hr]!==br[hr]){Ot=$n[hr],Mn=br[hr];break}return Ot<Mn?-1:Mn<Ot?1:0},A.prototype.includes=function(R,L,Pe){return-1!==this.indexOf(R,L,Pe)},A.prototype.indexOf=function(R,L,Pe){return C(this,R,L,Pe,!0)},A.prototype.lastIndexOf=function(R,L,Pe){return C(this,R,L,Pe,!1)},A.prototype.write=function(R,L,Pe,et){if(void 0===L)et="utf8",Pe=this.length,L=0;else if(void 0===Pe&&"string"==typeof L)et=L,Pe=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(Pe)?(Pe>>>=0,void 0===et&&(et="utf8")):(et=Pe,Pe=void 0)}var wt=this.length-L;if((void 0===Pe||Pe>wt)&&(Pe=wt),R.length>0&&(Pe<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");et||(et="utf8");for(var Ot=!1;;)switch(et){case"hex":return re(this,R,L,Pe);case"utf8":case"utf-8":return de(this,R,L,Pe);case"ascii":return G(this,R,L,Pe);case"latin1":case"binary":return $(this,R,L,Pe);case"base64":return pe(this,R,L,Pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,R,L,Pe);default:if(Ot)throw new TypeError("Unknown encoding: "+et);et=(""+et).toLowerCase(),Ot=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ze(j,R,L){var Pe="";L=Math.min(j.length,L);for(var et=R;et<L;++et)Pe+=String.fromCharCode(127&j[et]);return Pe}function We(j,R,L){var Pe="";L=Math.min(j.length,L);for(var et=R;et<L;++et)Pe+=String.fromCharCode(j[et]);return Pe}function Je(j,R,L){var Pe=j.length;(!R||R<0)&&(R=0),(!L||L<0||L>Pe)&&(L=Pe);for(var et="",wt=R;wt<L;++wt)et+=W(j[wt]);return et}function Ye(j,R,L){for(var Pe=j.slice(R,L),et="",wt=0;wt<Pe.length;wt+=2)et+=String.fromCharCode(Pe[wt]+256*Pe[wt+1]);return et}function Ve(j,R,L){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+R>L)throw new RangeError("Trying to access beyond buffer length")}function Le(j,R,L,Pe,et,wt){if(!A.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>et||R<wt)throw new RangeError('"value" argument is out of bounds');if(L+Pe>j.length)throw new RangeError("Index out of range")}function Se(j,R,L,Pe,et,wt){if(L+Pe>j.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function Re(j,R,L,Pe,et){return R=+R,L>>>=0,et||Se(j,0,L,4),F.write(j,R,L,Pe,23,4),L+4}function He(j,R,L,Pe,et){return R=+R,L>>>=0,et||Se(j,0,L,8),F.write(j,R,L,Pe,52,8),L+8}A.prototype.slice=function(R,L){var Pe=this.length;(R=~~R)<0?(R+=Pe)<0&&(R=0):R>Pe&&(R=Pe),(L=void 0===L?Pe:~~L)<0?(L+=Pe)<0&&(L=0):L>Pe&&(L=Pe),L<R&&(L=R);var et=this.subarray(R,L);return et.__proto__=A.prototype,et},A.prototype.readUIntLE=function(R,L,Pe){R>>>=0,L>>>=0,Pe||Ve(R,L,this.length);for(var et=this[R],wt=1,Ot=0;++Ot<L&&(wt*=256);)et+=this[R+Ot]*wt;return et},A.prototype.readUIntBE=function(R,L,Pe){R>>>=0,L>>>=0,Pe||Ve(R,L,this.length);for(var et=this[R+--L],wt=1;L>0&&(wt*=256);)et+=this[R+--L]*wt;return et},A.prototype.readUInt8=function(R,L){return R>>>=0,L||Ve(R,1,this.length),this[R]},A.prototype.readUInt16LE=function(R,L){return R>>>=0,L||Ve(R,2,this.length),this[R]|this[R+1]<<8},A.prototype.readUInt16BE=function(R,L){return R>>>=0,L||Ve(R,2,this.length),this[R]<<8|this[R+1]},A.prototype.readUInt32LE=function(R,L){return R>>>=0,L||Ve(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},A.prototype.readUInt32BE=function(R,L){return R>>>=0,L||Ve(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},A.prototype.readIntLE=function(R,L,Pe){R>>>=0,L>>>=0,Pe||Ve(R,L,this.length);for(var et=this[R],wt=1,Ot=0;++Ot<L&&(wt*=256);)et+=this[R+Ot]*wt;return et>=(wt*=128)&&(et-=Math.pow(2,8*L)),et},A.prototype.readIntBE=function(R,L,Pe){R>>>=0,L>>>=0,Pe||Ve(R,L,this.length);for(var et=L,wt=1,Ot=this[R+--et];et>0&&(wt*=256);)Ot+=this[R+--et]*wt;return Ot>=(wt*=128)&&(Ot-=Math.pow(2,8*L)),Ot},A.prototype.readInt8=function(R,L){return R>>>=0,L||Ve(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},A.prototype.readInt16LE=function(R,L){R>>>=0,L||Ve(R,2,this.length);var Pe=this[R]|this[R+1]<<8;return 32768&Pe?4294901760|Pe:Pe},A.prototype.readInt16BE=function(R,L){R>>>=0,L||Ve(R,2,this.length);var Pe=this[R+1]|this[R]<<8;return 32768&Pe?4294901760|Pe:Pe},A.prototype.readInt32LE=function(R,L){return R>>>=0,L||Ve(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},A.prototype.readInt32BE=function(R,L){return R>>>=0,L||Ve(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},A.prototype.readFloatLE=function(R,L){return R>>>=0,L||Ve(R,4,this.length),F.read(this,R,!0,23,4)},A.prototype.readFloatBE=function(R,L){return R>>>=0,L||Ve(R,4,this.length),F.read(this,R,!1,23,4)},A.prototype.readDoubleLE=function(R,L){return R>>>=0,L||Ve(R,8,this.length),F.read(this,R,!0,52,8)},A.prototype.readDoubleBE=function(R,L){return R>>>=0,L||Ve(R,8,this.length),F.read(this,R,!1,52,8)},A.prototype.writeUIntLE=function(R,L,Pe,et){R=+R,L>>>=0,Pe>>>=0,et||Le(this,R,L,Pe,Math.pow(2,8*Pe)-1,0);var Ot=1,Mn=0;for(this[L]=255&R;++Mn<Pe&&(Ot*=256);)this[L+Mn]=R/Ot&255;return L+Pe},A.prototype.writeUIntBE=function(R,L,Pe,et){R=+R,L>>>=0,Pe>>>=0,et||Le(this,R,L,Pe,Math.pow(2,8*Pe)-1,0);var Ot=Pe-1,Mn=1;for(this[L+Ot]=255&R;--Ot>=0&&(Mn*=256);)this[L+Ot]=R/Mn&255;return L+Pe},A.prototype.writeUInt8=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,1,255,0),this[L]=255&R,L+1},A.prototype.writeUInt16LE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,2,65535,0),this[L]=255&R,this[L+1]=R>>>8,L+2},A.prototype.writeUInt16BE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,2,65535,0),this[L]=R>>>8,this[L+1]=255&R,L+2},A.prototype.writeUInt32LE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,4,4294967295,0),this[L+3]=R>>>24,this[L+2]=R>>>16,this[L+1]=R>>>8,this[L]=255&R,L+4},A.prototype.writeUInt32BE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,4,4294967295,0),this[L]=R>>>24,this[L+1]=R>>>16,this[L+2]=R>>>8,this[L+3]=255&R,L+4},A.prototype.writeIntLE=function(R,L,Pe,et){if(R=+R,L>>>=0,!et){var wt=Math.pow(2,8*Pe-1);Le(this,R,L,Pe,wt-1,-wt)}var Ot=0,Mn=1,kn=0;for(this[L]=255&R;++Ot<Pe&&(Mn*=256);)R<0&&0===kn&&0!==this[L+Ot-1]&&(kn=1),this[L+Ot]=(R/Mn>>0)-kn&255;return L+Pe},A.prototype.writeIntBE=function(R,L,Pe,et){if(R=+R,L>>>=0,!et){var wt=Math.pow(2,8*Pe-1);Le(this,R,L,Pe,wt-1,-wt)}var Ot=Pe-1,Mn=1,kn=0;for(this[L+Ot]=255&R;--Ot>=0&&(Mn*=256);)R<0&&0===kn&&0!==this[L+Ot+1]&&(kn=1),this[L+Ot]=(R/Mn>>0)-kn&255;return L+Pe},A.prototype.writeInt8=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,1,127,-128),R<0&&(R=255+R+1),this[L]=255&R,L+1},A.prototype.writeInt16LE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,2,32767,-32768),this[L]=255&R,this[L+1]=R>>>8,L+2},A.prototype.writeInt16BE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,2,32767,-32768),this[L]=R>>>8,this[L+1]=255&R,L+2},A.prototype.writeInt32LE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,4,2147483647,-2147483648),this[L]=255&R,this[L+1]=R>>>8,this[L+2]=R>>>16,this[L+3]=R>>>24,L+4},A.prototype.writeInt32BE=function(R,L,Pe){return R=+R,L>>>=0,Pe||Le(this,R,L,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[L]=R>>>24,this[L+1]=R>>>16,this[L+2]=R>>>8,this[L+3]=255&R,L+4},A.prototype.writeFloatLE=function(R,L,Pe){return Re(this,R,L,!0,Pe)},A.prototype.writeFloatBE=function(R,L,Pe){return Re(this,R,L,!1,Pe)},A.prototype.writeDoubleLE=function(R,L,Pe){return He(this,R,L,!0,Pe)},A.prototype.writeDoubleBE=function(R,L,Pe){return He(this,R,L,!1,Pe)},A.prototype.copy=function(R,L,Pe,et){if(!A.isBuffer(R))throw new TypeError("argument should be a Buffer");if(Pe||(Pe=0),!et&&0!==et&&(et=this.length),L>=R.length&&(L=R.length),L||(L=0),et>0&&et<Pe&&(et=Pe),et===Pe||0===R.length||0===this.length)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(Pe<0||Pe>=this.length)throw new RangeError("Index out of range");if(et<0)throw new RangeError("sourceEnd out of bounds");et>this.length&&(et=this.length),R.length-L<et-Pe&&(et=R.length-L+Pe);var wt=et-Pe;if(this===R&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(L,Pe,et);else if(this===R&&Pe<L&&L<et)for(var Ot=wt-1;Ot>=0;--Ot)R[Ot+L]=this[Ot+Pe];else Uint8Array.prototype.set.call(R,this.subarray(Pe,et),L);return wt},A.prototype.fill=function(R,L,Pe,et){if("string"==typeof R){if("string"==typeof L?(et=L,L=0,Pe=this.length):"string"==typeof Pe&&(et=Pe,Pe=this.length),void 0!==et&&"string"!=typeof et)throw new TypeError("encoding must be a string");if("string"==typeof et&&!A.isEncoding(et))throw new TypeError("Unknown encoding: "+et);if(1===R.length){var wt=R.charCodeAt(0);("utf8"===et&&wt<128||"latin1"===et)&&(R=wt)}}else"number"==typeof R&&(R&=255);if(L<0||this.length<L||this.length<Pe)throw new RangeError("Out of range index");if(Pe<=L)return this;var Ot;if(L>>>=0,Pe=void 0===Pe?this.length:Pe>>>0,R||(R=0),"number"==typeof R)for(Ot=L;Ot<Pe;++Ot)this[Ot]=R;else{var Mn=A.isBuffer(R)?R:A.from(R,et),kn=Mn.length;if(0===kn)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(Ot=0;Ot<Pe-L;++Ot)this[Ot+L]=Mn[Ot%kn]}return this};var Xe=/[^+/0-9A-Za-z-_]/g;function W(j){return j<16?"0"+j.toString(16):j.toString(16)}function J(j,R){R=R||1/0;for(var L,Pe=j.length,et=null,wt=[],Ot=0;Ot<Pe;++Ot){if((L=j.charCodeAt(Ot))>55295&&L<57344){if(!et){if(L>56319){(R-=3)>-1&&wt.push(239,191,189);continue}if(Ot+1===Pe){(R-=3)>-1&&wt.push(239,191,189);continue}et=L;continue}if(L<56320){(R-=3)>-1&&wt.push(239,191,189),et=L;continue}L=65536+(et-55296<<10|L-56320)}else et&&(R-=3)>-1&&wt.push(239,191,189);if(et=null,L<128){if((R-=1)<0)break;wt.push(L)}else if(L<2048){if((R-=2)<0)break;wt.push(L>>6|192,63&L|128)}else if(L<65536){if((R-=3)<0)break;wt.push(L>>12|224,L>>6&63|128,63&L|128)}else{if(!(L<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;wt.push(L>>18|240,L>>12&63|128,L>>6&63|128,63&L|128)}}return wt}function ke(j){return z.toByteArray(function(j){if((j=(j=j.split("=")[0]).trim().replace(Xe,"")).length<2)return"";for(;j.length%4!=0;)j+="=";return j}(j))}function At(j,R,L,Pe){for(var et=0;et<Pe&&!(et+L>=R.length||et>=j.length);++et)R[et+L]=j[et];return et}function pt(j,R){return j instanceof R||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===R.name}function ye(j){return j!=j}}).call(this)}).call(this,Q("buffer").Buffer)},{"base64-js":2,buffer:6,ieee754:9}],7:[function(Q,xe,me){"use strict";xe.exports=function Y(z){return null===z||"object"!=typeof z||null!=z.toJSON?JSON.stringify(z):Array.isArray(z)?"["+z.reduce((F,se,K)=>F+(0===K?"":",")+Y(void 0===se||"symbol"==typeof se?null:se),"")+"]":"{"+Object.keys(z).sort().reduce((F,se,K)=>void 0===z[se]||"symbol"==typeof z[se]?F:F+(0===F.length?"":",")+Y(se)+":"+Y(z[se]),"")+"}"}},{}],8:[function(Q,xe,me){"use strict";var F,Y="object"==typeof Reflect?Reflect:null,z=Y&&"function"==typeof Y.apply?Y.apply:function(U,re,de){return Function.prototype.apply.call(U,re,de)};F=Y&&"function"==typeof Y.ownKeys?Y.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var K=Number.isNaN||function(U){return U!=U};function E(){E.init.call(this)}xe.exports=E,xe.exports.once=function(C,U){return new Promise(function(re,de){function G(pe){C.removeListener(U,$),de(pe)}function $(){"function"==typeof C.removeListener&&C.removeListener("error",G),re([].slice.call(arguments))}ee(C,U,$,{once:!0}),"error"!==U&&function(C,U,re){"function"==typeof C.on&&ee(C,"error",U,re)}(C,G,{once:!0})})},E.EventEmitter=E,E.prototype._events=void 0,E.prototype._eventsCount=0,E.prototype._maxListeners=void 0;var A=10;function O(C){if("function"!=typeof C)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function T(C){return void 0===C._maxListeners?E.defaultMaxListeners:C._maxListeners}function v(C,U,re,de){var G,$,pe;if(O(re),void 0===($=C._events)?($=C._events=Object.create(null),C._eventsCount=0):(void 0!==$.newListener&&(C.emit("newListener",U,re.listener?re.listener:re),$=C._events),pe=$[U]),void 0===pe)pe=$[U]=re,++C._eventsCount;else if("function"==typeof pe?pe=$[U]=de?[re,pe]:[pe,re]:de?pe.unshift(re):pe.push(re),(G=T(C))>0&&pe.length>G&&!pe.warned){pe.warned=!0;var ue=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");ue.name="MaxListenersExceededWarning",ue.emitter=C,ue.type=U,ue.count=pe.length,function(C){console&&console.warn&&console.warn(C)}(ue)}return C}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(C,U,re){var de={fired:!1,wrapFn:void 0,target:C,type:U,listener:re},G=y.bind(de);return G.listener=re,de.wrapFn=G,G}function D(C,U,re){var de=C._events;if(void 0===de)return[];var G=de[U];return void 0===G?[]:"function"==typeof G?re?[G.listener||G]:[G]:re?function(C){for(var U=new Array(C.length),re=0;re<U.length;++re)U[re]=C[re].listener||C[re];return U}(G):I(G,G.length)}function B(C){var U=this._events;if(void 0!==U){var re=U[C];if("function"==typeof re)return 1;if(void 0!==re)return re.length}return 0}function I(C,U){for(var re=new Array(U),de=0;de<U;++de)re[de]=C[de];return re}function ee(C,U,re,de){if("function"==typeof C.on)de.once?C.once(U,re):C.on(U,re);else{if("function"!=typeof C.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(U,function G($){de.once&&C.removeEventListener(U,G),re($)})}}Object.defineProperty(E,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(C){if("number"!=typeof C||C<0||K(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");A=C}}),E.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},E.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||K(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},E.prototype.getMaxListeners=function(){return T(this)},E.prototype.emit=function(U){for(var re=[],de=1;de<arguments.length;de++)re.push(arguments[de]);var G="error"===U,$=this._events;if(void 0!==$)G=G&&void 0===$.error;else if(!G)return!1;if(G){var pe;if(re.length>0&&(pe=re[0]),pe instanceof Error)throw pe;var ue=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw ue.context=pe,ue}var X=$[U];if(void 0===X)return!1;if("function"==typeof X)z(X,this,re);else{var ge=X.length,De=I(X,ge);for(de=0;de<ge;++de)z(De[de],this,re)}return!0},E.prototype.on=E.prototype.addListener=function(U,re){return v(this,U,re,!1)},E.prototype.prependListener=function(U,re){return v(this,U,re,!0)},E.prototype.once=function(U,re){return O(re),this.on(U,S(this,U,re)),this},E.prototype.prependOnceListener=function(U,re){return O(re),this.prependListener(U,S(this,U,re)),this},E.prototype.off=E.prototype.removeListener=function(U,re){var de,G,$,pe,ue;if(O(re),void 0===(G=this._events))return this;if(void 0===(de=G[U]))return this;if(de===re||de.listener===re)0==--this._eventsCount?this._events=Object.create(null):(delete G[U],G.removeListener&&this.emit("removeListener",U,de.listener||re));else if("function"!=typeof de){for($=-1,pe=de.length-1;pe>=0;pe--)if(de[pe]===re||de[pe].listener===re){ue=de[pe].listener,$=pe;break}if($<0)return this;0===$?de.shift():function(C,U){for(;U+1<C.length;U++)C[U]=C[U+1];C.pop()}(de,$),1===de.length&&(G[U]=de[0]),void 0!==G.removeListener&&this.emit("removeListener",U,ue||re)}return this},E.prototype.removeAllListeners=function(U){var re,de,G;if(void 0===(de=this._events))return this;if(void 0===de.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==de[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete de[U]),this;if(0===arguments.length){var pe,$=Object.keys(de);for(G=0;G<$.length;++G)"removeListener"!==(pe=$[G])&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(re=de[U]))this.removeListener(U,re);else if(void 0!==re)for(G=re.length-1;G>=0;G--)this.removeListener(U,re[G]);return this},E.prototype.listeners=function(U){return D(this,U,!0)},E.prototype.rawListeners=function(U){return D(this,U,!1)},E.listenerCount=function(C,U){return"function"==typeof C.listenerCount?C.listenerCount(U):B.call(C,U)},E.prototype.listenerCount=B,E.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]}},{}],9:[function(Q,xe,me){me.read=function(Y,z,F,se,K){var E,A,O=8*K-se-1,T=(1<<O)-1,v=T>>1,y=-7,S=F?K-1:0,D=F?-1:1,B=Y[z+S];for(S+=D,E=B&(1<<-y)-1,B>>=-y,y+=O;y>0;E=256*E+Y[z+S],S+=D,y-=8);for(A=E&(1<<-y)-1,E>>=-y,y+=se;y>0;A=256*A+Y[z+S],S+=D,y-=8);if(0===E)E=1-v;else{if(E===T)return A?NaN:1/0*(B?-1:1);A+=Math.pow(2,se),E-=v}return(B?-1:1)*A*Math.pow(2,E-se)},me.write=function(Y,z,F,se,K,E){var A,O,T,v=8*E-K-1,y=(1<<v)-1,S=y>>1,D=23===K?Math.pow(2,-24)-Math.pow(2,-77):0,B=se?0:E-1,I=se?1:-1,q=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(O=isNaN(z)?1:0,A=y):(A=Math.floor(Math.log(z)/Math.LN2),z*(T=Math.pow(2,-A))<1&&(A--,T*=2),(z+=A+S>=1?D/T:D*Math.pow(2,1-S))*T>=2&&(A++,T/=2),A+S>=y?(O=0,A=y):A+S>=1?(O=(z*T-1)*Math.pow(2,K),A+=S):(O=z*Math.pow(2,S-1)*Math.pow(2,K),A=0));K>=8;Y[F+B]=255&O,B+=I,O/=256,K-=8);for(A=A<<K|O,v+=K;v>0;Y[F+B]=255&A,B+=I,A/=256,v-=8);Y[F+B-I]|=128*q}},{}],10:[function(Q,xe,me){xe.exports="function"==typeof Object.create?function(z,F){F&&(z.super_=F,z.prototype=Object.create(F.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:function(z,F){if(F){z.super_=F;var se=function(){};se.prototype=F.prototype,z.prototype=new se,z.prototype.constructor=z}}},{}],11:[function(Q,xe,me){"use strict";const{isArray:Y,isObject:z,isString:F}=Q("./types"),{asArray:se}=Q("./util"),{prependBase:K}=Q("./url"),E=Q("./JsonLdError"),A=Q("./ResolvedContext");function T(y){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:y})}function v({context:y,base:S}){if(!y)return;const D=y["@context"];if(F(D))y["@context"]=K(S,D);else if(Y(D))for(let B=0;B<D.length;++B){const I=D[B];F(I)?D[B]=K(S,I):z(I)&&v({context:{"@context":I},base:S})}else if(z(D))for(const B in D)v({context:D[B],base:S})}xe.exports=class{constructor({sharedCache:S}){this.perOpCache=new Map,this.sharedCache=S}resolve({activeCtx:S,context:D,documentLoader:B,base:I,cycles:q=new Set}){var Z=this;return gt(function*(){D&&z(D)&&D["@context"]&&(D=D["@context"]),D=se(D);const M=[];for(const N of D){if(F(N)){let U=Z._get(N);U||(U=yield Z._resolveRemoteContext({activeCtx:S,url:N,documentLoader:B,base:I,cycles:q})),Y(U)?M.push(...U):M.push(U);continue}if(null===N){M.push(new A({document:null}));continue}z(N)||T(D);const ee=JSON.stringify(N);let C=Z._get(ee);C||(C=new A({document:N}),Z._cacheResolvedContext({key:ee,resolved:C,tag:"static"})),M.push(C)}return M})()}_get(S){let D=this.perOpCache.get(S);if(!D){const B=this.sharedCache.get(S);B&&(D=B.get("static"),D&&this.perOpCache.set(S,D))}return D}_cacheResolvedContext({key:S,resolved:D,tag:B}){if(this.perOpCache.set(S,D),void 0!==B){let I=this.sharedCache.get(S);I||(I=new Map,this.sharedCache.set(S,I)),I.set(B,D)}return D}_resolveRemoteContext({activeCtx:S,url:D,documentLoader:B,base:I,cycles:q}){var Z=this;return gt(function*(){D=K(I,D);const{context:M,remoteDoc:N}=yield Z._fetchContext({activeCtx:S,url:D,documentLoader:B,cycles:q});v({context:M,base:I=N.documentUrl||D});const ee=yield Z.resolve({activeCtx:S,context:M,documentLoader:B,base:I,cycles:q});return Z._cacheResolvedContext({key:D,resolved:ee,tag:N.tag}),ee})()}_fetchContext({activeCtx:S,url:D,documentLoader:B,cycles:I}){return gt(function*(){if(I.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===S.processingMode?"loading remote context failed":"context overflow",max:10});if(I.has(D))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===S.processingMode?"recursive context inclusion":"context overflow",url:D});let q,Z;I.add(D);try{Z=yield B(D),q=Z.document||null,F(q)&&(q=JSON.parse(q))}catch(M){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:D,cause:M})}if(!z(q))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:D});return q="@context"in q?{"@context":q["@context"]}:{"@context":{}},Z.contextUrl&&(Y(q["@context"])||(q["@context"]=[q["@context"]]),q["@context"].push(Z.contextUrl)),{context:q,remoteDoc:Z}})()}}},{"./JsonLdError":12,"./ResolvedContext":16,"./types":30,"./url":31,"./util":32}],12:[function(Q,xe,me){"use strict";xe.exports=class extends Error{constructor(z="An unspecified JSON-LD error occurred.",F="jsonld.Error",se={}){super(z),this.name=F,this.message=z,this.details=se}}},{}],13:[function(Q,xe,me){"use strict";xe.exports=Y=>{class z{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(z,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(z.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:z}),z.compact=function(F,se){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Y.compact(F,se)},z.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Y.expand(F)},z.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Y.flatten(F)},z}},{}],14:[function(Q,xe,me){"use strict";xe.exports=Q("rdf-canonize").NQuads},{"rdf-canonize":46}],15:[function(Q,xe,me){"use strict";xe.exports=class{constructor(){this._requests={}}wrapLoader(z){const F=this;return F._loader=z,function(){return F.add.apply(F,arguments)}}add(z){var F=this;return gt(function*(){let se=F._requests[z];if(se)return Promise.resolve(se);se=F._requests[z]=F._loader(z);try{return yield se}finally{delete F._requests[z]}})()}}},{}],16:[function(Q,xe,me){"use strict";const Y=Q("lru-cache");xe.exports=class{constructor({document:se}){this.document=se,this.cache=new Y({max:10})}getProcessed(se){return this.cache.get(se)}setProcessed(se,K){this.cache.set(se,K)}}},{"lru-cache":33}],17:[function(Q,xe,me){"use strict";const Y=Q("./JsonLdError"),{isArray:z,isObject:F,isString:se,isUndefined:K}=Q("./types"),{isList:E,isValue:A,isGraph:O,isSimpleGraph:T,isSubjectReference:v}=Q("./graphTypes"),{expandIri:y,getContextValue:S,isKeyword:D,process:B,processingMode:I}=Q("./context"),{removeBase:q,prependBase:Z}=Q("./url"),{addValue:M,asArray:N,compareShortestLeast:ee}=Q("./util"),C={};function re(de,G,$){if("@nest"!==y(de,G,{vocab:!0},$))throw new Y("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}xe.exports=C,C.compact=function(){var de=gt(function*({activeCtx:G,activeProperty:$=null,element:pe,options:ue={},compactionMap:X=(()=>{})}){if(z(pe)){let De=[];for(let je=0;je<pe.length;++je){let Ze=yield C.compact({activeCtx:G,activeProperty:$,element:pe[je],options:ue,compactionMap:X});null===Ze&&(Ze=yield X({unmappedValue:pe[je],activeCtx:G,activeProperty:$,parent:pe,index:je,options:ue}),void 0===Ze)||De.push(Ze)}return ue.compactArrays&&1===De.length&&0===(S(G,$,"@container")||[]).length&&(De=De[0]),De}const ge=S(G,$,"@context");if(K(ge)||(G=yield B({activeCtx:G,localCtx:ge,propagate:!0,overrideProtected:!0,options:ue})),F(pe)){if(ue.link&&"@id"in pe&&ue.link.hasOwnProperty(pe["@id"])){const Le=ue.link[pe["@id"]];for(let Se=0;Se<Le.length;++Se)if(Le[Se].expanded===pe)return Le[Se].compacted}if(A(pe)||v(pe)){const Le=C.compactValue({activeCtx:G,activeProperty:$,value:pe,options:ue});return ue.link&&v(pe)&&(ue.link.hasOwnProperty(pe["@id"])||(ue.link[pe["@id"]]=[]),ue.link[pe["@id"]].push({expanded:pe,compacted:Le})),Le}if(E(pe)&&(S(G,$,"@container")||[]).includes("@list"))return C.compact({activeCtx:G,activeProperty:$,element:pe["@list"],options:ue,compactionMap:X});const De="@reverse"===$,je={},Ze=G;!A(pe)&&!v(pe)&&(G=G.revertToPreviousContext());const We=S(Ze,$,"@context");K(We)||(G=yield B({activeCtx:G,localCtx:We,propagate:!0,overrideProtected:!0,options:ue})),ue.link&&"@id"in pe&&(ue.link.hasOwnProperty(pe["@id"])||(ue.link[pe["@id"]]=[]),ue.link[pe["@id"]].push({expanded:pe,compacted:je}));let Je=pe["@type"]||[];Je.length>1&&(Je=Array.from(Je).sort());const Ye=G;for(const Le of Je){const Se=C.compactIri({activeCtx:Ye,iri:Le,relativeTo:{vocab:!0}}),Re=S(Ze,Se,"@context");K(Re)||(G=yield B({activeCtx:G,localCtx:Re,options:ue,propagate:!1}))}const Ve=Object.keys(pe).sort();for(const Le of Ve){const Se=pe[Le];if("@id"!==Le)if("@type"!==Le)if("@reverse"!==Le)if("@preserve"!==Le)if("@index"!==Le)if("@graph"!==Le&&"@list"!==Le&&"@included"!==Le&&D(Le)){const Re=C.compactIri({activeCtx:G,iri:Le,relativeTo:{vocab:!0}});M(je,Re,Se)}else{if(!z(Se))throw new Y("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Se.length){const Re=C.compactIri({activeCtx:G,iri:Le,value:Se,relativeTo:{vocab:!0},reverse:De}),He=G.mappings.has(Re)?G.mappings.get(Re)["@nest"]:null;let Xe=je;He&&(re(G,He,ue),F(je[He])||(je[He]={}),Xe=je[He]),M(Xe,Re,Se,{propertyIsArray:!0})}for(const Re of Se){const He=C.compactIri({activeCtx:G,iri:Le,value:Re,relativeTo:{vocab:!0},reverse:De}),Xe=G.mappings.has(He)?G.mappings.get(He)["@nest"]:null;let ze=je;Xe&&(re(G,Xe,ue),F(je[Xe])||(je[Xe]={}),ze=je[Xe]);const W=S(G,He,"@container")||[],J=O(Re),we=E(Re);let ce;we?ce=Re["@list"]:J&&(ce=Re["@graph"]);let ke=yield C.compact({activeCtx:G,activeProperty:He,element:we||J?ce:Re,options:ue,compactionMap:X});if(we){if(z(ke)||(ke=[ke]),W.includes("@list")){M(ze,He,ke,{valueIsArray:!0,allowDuplicate:!0});continue}ke={[C.compactIri({activeCtx:G,iri:"@list",relativeTo:{vocab:!0}})]:ke},"@index"in Re&&(ke[C.compactIri({activeCtx:G,iri:"@index",relativeTo:{vocab:!0}})]=Re["@index"])}if(J)if(W.includes("@graph")&&(W.includes("@id")||W.includes("@index")&&T(Re))){let At;ze.hasOwnProperty(He)?At=ze[He]:ze[He]=At={};const pt=(W.includes("@id")?Re["@id"]:Re["@index"])||C.compactIri({activeCtx:G,iri:"@none",relativeTo:{vocab:!0}});M(At,pt,ke,{propertyIsArray:!ue.compactArrays||W.includes("@set")})}else W.includes("@graph")&&T(Re)?(z(ke)&&ke.length>1&&(ke={"@included":ke}),M(ze,He,ke,{propertyIsArray:!ue.compactArrays||W.includes("@set")})):(z(ke)&&1===ke.length&&ue.compactArrays&&(ke=ke[0]),ke={[C.compactIri({activeCtx:G,iri:"@graph",relativeTo:{vocab:!0}})]:ke},"@id"in Re&&(ke[C.compactIri({activeCtx:G,iri:"@id",relativeTo:{vocab:!0}})]=Re["@id"]),"@index"in Re&&(ke[C.compactIri({activeCtx:G,iri:"@index",relativeTo:{vocab:!0}})]=Re["@index"]),M(ze,He,ke,{propertyIsArray:!ue.compactArrays||W.includes("@set")}));else if(W.includes("@language")||W.includes("@index")||W.includes("@id")||W.includes("@type")){let At,pt;if(ze.hasOwnProperty(He)?At=ze[He]:ze[He]=At={},W.includes("@language"))A(ke)&&(ke=ke["@value"]),pt=Re["@language"];else if(W.includes("@index")){const ye=S(G,He,"@index")||"@index",j=C.compactIri({activeCtx:G,iri:ye,relativeTo:{vocab:!0}});if("@index"===ye)pt=Re["@index"],delete ke[j];else{let R;if([pt,...R]=N(ke[ye]||[]),se(pt))switch(R.length){case 0:delete ke[ye];break;case 1:ke[ye]=R[0];break;default:ke[ye]=R}else pt=null}}else if(W.includes("@id")){const ye=C.compactIri({activeCtx:G,iri:"@id",relativeTo:{vocab:!0}});pt=ke[ye],delete ke[ye]}else if(W.includes("@type")){const ye=C.compactIri({activeCtx:G,iri:"@type",relativeTo:{vocab:!0}});let j;switch([pt,...j]=N(ke[ye]||[]),j.length){case 0:delete ke[ye];break;case 1:ke[ye]=j[0];break;default:ke[ye]=j}1===Object.keys(ke).length&&"@id"in Re&&(ke=yield C.compact({activeCtx:G,activeProperty:He,element:{"@id":Re["@id"]},options:ue,compactionMap:X}))}pt||(pt=C.compactIri({activeCtx:G,iri:"@none",relativeTo:{vocab:!0}})),M(At,pt,ke,{propertyIsArray:W.includes("@set")})}else{const At=!ue.compactArrays||W.includes("@set")||W.includes("@list")||z(ke)&&0===ke.length||"@list"===Le||"@graph"===Le;M(ze,He,ke,{propertyIsArray:At})}}}else{if((S(G,$,"@container")||[]).includes("@index"))continue;const He=C.compactIri({activeCtx:G,iri:Le,relativeTo:{vocab:!0}});M(je,He,Se)}else{const Re=yield C.compact({activeCtx:G,activeProperty:$,element:Se,options:ue,compactionMap:X});z(Re)&&0===Re.length||M(je,Le,Re)}else{const Re=yield C.compact({activeCtx:G,activeProperty:"@reverse",element:Se,options:ue,compactionMap:X});for(const He in Re)if(G.mappings.has(He)&&G.mappings.get(He).reverse){const Xe=Re[He],W=(S(G,He,"@container")||[]).includes("@set")||!ue.compactArrays;M(je,He,Xe,{propertyIsArray:W}),delete Re[He]}if(Object.keys(Re).length>0){const He=C.compactIri({activeCtx:G,iri:Le,relativeTo:{vocab:!0}});M(je,He,Re)}}else{let Re=N(Se).map(J=>C.compactIri({activeCtx:Ze,iri:J,relativeTo:{vocab:!0}}));1===Re.length&&(Re=Re[0]);const He=C.compactIri({activeCtx:G,iri:"@type",relativeTo:{vocab:!0}}),W=(S(G,He,"@container")||[]).includes("@set")&&I(G,1.1)||z(Re)&&0===Se.length;M(je,He,Re,{propertyIsArray:W})}else{let Re=N(Se).map(Xe=>C.compactIri({activeCtx:G,iri:Xe,relativeTo:{vocab:!1},base:ue.base}));1===Re.length&&(Re=Re[0]),je[C.compactIri({activeCtx:G,iri:"@id",relativeTo:{vocab:!0}})]=Re}}return je}return pe});return function(G){return de.apply(this,arguments)}}(),C.compactIri=({activeCtx:de,iri:G,value:$=null,relativeTo:pe={vocab:!1},reverse:ue=!1,base:X=null})=>{if(null===G)return G;de.isPropertyTermScoped&&de.previousContext&&(de=de.previousContext);const ge=de.getInverse();if(D(G)&&G in ge&&"@none"in ge[G]&&"@type"in ge[G]["@none"]&&"@none"in ge[G]["@none"]["@type"])return ge[G]["@none"]["@type"]["@none"];if(pe.vocab&&G in ge){const Je=de["@language"]||"@none",Ye=[];F($)&&"@index"in $&&!("@graph"in $)&&Ye.push("@index","@index@set"),F($)&&"@preserve"in $&&($=$["@preserve"][0]),O($)?("@index"in $&&Ye.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in $&&Ye.push("@graph@id","@graph@id@set"),Ye.push("@graph","@graph@set","@set"),"@index"in $||Ye.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in $||Ye.push("@graph@id","@graph@id@set")):F($)&&!A($)&&Ye.push("@id","@id@set","@type","@set@type");let Ve="@language",Le="@null";if(ue)Ve="@type",Le="@reverse",Ye.push("@set");else if(E($)){"@index"in $||Ye.push("@list");const Re=$["@list"];if(0===Re.length)Ve="@any",Le="@none";else{let He=0===Re.length?Je:null,Xe=null;for(let ze=0;ze<Re.length;++ze){const W=Re[ze];let J="@none",we="@none";if(A(W)?"@direction"in W?J=`${(W["@language"]||"").toLowerCase()}_${W["@direction"]}`:"@language"in W?J=W["@language"].toLowerCase():"@type"in W?we=W["@type"]:J="@null":we="@id",null===He?He=J:J!==He&&A(W)&&(He="@none"),null===Xe?Xe=we:we!==Xe&&(Xe="@none"),"@none"===He&&"@none"===Xe)break}He=He||"@none",Xe=Xe||"@none","@none"!==Xe?(Ve="@type",Le=Xe):Le=He}}else{if(A($))if("@language"in $&&!("@index"in $)){Ye.push("@language","@language@set"),Le=$["@language"];const Re=$["@direction"];Re&&(Le=`${Le}_${Re}`)}else"@direction"in $&&!("@index"in $)?Le=`_${$["@direction"]}`:"@type"in $&&(Ve="@type",Le=$["@type"]);else Ve="@type",Le="@id";Ye.push("@set")}Ye.push("@none"),F($)&&!("@index"in $)&&Ye.push("@index","@index@set"),A($)&&1===Object.keys($).length&&Ye.push("@language","@language@set");const Se=function(de,G,$,pe,ue,X){null===X&&(X="@null");const ge=[];if(("@id"===X||"@reverse"===X)&&F($)&&"@id"in $){"@reverse"===X&&ge.push("@reverse");const je=C.compactIri({activeCtx:de,iri:$["@id"],relativeTo:{vocab:!0}});de.mappings.has(je)&&de.mappings.get(je)&&de.mappings.get(je)["@id"]===$["@id"]?ge.push.apply(ge,["@vocab","@id"]):ge.push.apply(ge,["@id","@vocab"])}else{ge.push(X);const je=ge.find(Ze=>Ze.includes("_"));je&&ge.push(je.replace(/^[^_]+_/,"_"))}ge.push("@none");const De=de.inverse[G];for(const je of pe){if(!(je in De))continue;const Ze=De[je][ue];for(const We of ge)if(We in Ze)return Ze[We]}return null}(de,G,$,Ye,Ve,Le);if(null!==Se)return Se}if(pe.vocab&&"@vocab"in de){const Je=de["@vocab"];if(0===G.indexOf(Je)&&G!==Je){const Ye=G.substr(Je.length);if(!de.mappings.has(Ye))return Ye}}let De=null;const je=[];let Ze=de.fastCurieMap;const We=G.length-1;for(let Je=0;Je<We&&G[Je]in Ze;++Je)Ze=Ze[G[Je]],""in Ze&&je.push(Ze[""][0]);for(let Je=je.length-1;Je>=0;--Je){const Ye=je[Je],Ve=Ye.terms;for(const Le of Ve){const Se=Le+":"+G.substr(Ye.iri.length);de.mappings.get(Le)._prefix&&(!de.mappings.has(Se)||null===$&&de.mappings.get(Se)["@id"]===G)&&(null===De||ee(Se,De)<0)&&(De=Se)}}if(null!==De)return De;for(const[Je,Ye]of de.mappings)if(Ye&&Ye._prefix&&G.startsWith(Je+":"))throw new Y(`Absolute IRI "${G}" confused with prefix "${Je}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:de});return pe.vocab?G:"@base"in de?de["@base"]?q(Z(X,de["@base"]),G):G:q(X,G)},C.compactValue=({activeCtx:de,activeProperty:G,value:$,options:pe})=>{if(A($)){const De=S(de,G,"@type"),je=S(de,G,"@language"),Ze=S(de,G,"@direction"),We=S(de,G,"@container")||[],Je="@index"in $&&!We.includes("@index");if(!Je&&"@none"!==De&&($["@type"]===De||"@language"in $&&$["@language"]===je&&"@direction"in $&&$["@direction"]===Ze||"@language"in $&&$["@language"]===je||"@direction"in $&&$["@direction"]===Ze))return $["@value"];const Ye=Object.keys($).length,Ve=1===Ye||2===Ye&&"@index"in $&&!Je,Le="@language"in de,Se=se($["@value"]),Re=de.mappings.has(G)&&null===de.mappings.get(G)["@language"];if(Ve&&"@none"!==De&&(!Le||!Se||Re))return $["@value"];const He={};return Je&&(He[C.compactIri({activeCtx:de,iri:"@index",relativeTo:{vocab:!0}})]=$["@index"]),"@type"in $?He[C.compactIri({activeCtx:de,iri:"@type",relativeTo:{vocab:!0}})]=C.compactIri({activeCtx:de,iri:$["@type"],relativeTo:{vocab:!0}}):"@language"in $&&(He[C.compactIri({activeCtx:de,iri:"@language",relativeTo:{vocab:!0}})]=$["@language"]),"@direction"in $&&(He[C.compactIri({activeCtx:de,iri:"@direction",relativeTo:{vocab:!0}})]=$["@direction"]),He[C.compactIri({activeCtx:de,iri:"@value",relativeTo:{vocab:!0}})]=$["@value"],He}const ue=y(de,G,{vocab:!0},pe),X=S(de,G,"@type"),ge=C.compactIri({activeCtx:de,iri:$["@id"],relativeTo:{vocab:"@vocab"===X},base:pe.base});return"@id"===X||"@vocab"===X||"@graph"===ue?ge:{[C.compactIri({activeCtx:de,iri:"@id",relativeTo:{vocab:!0}})]:ge}}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],18:[function(Q,xe,me){"use strict";const Y="http://www.w3.org/1999/02/22-rdf-syntax-ns#",z="http://www.w3.org/2001/XMLSchema#";xe.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Y,RDF_LIST:Y+"List",RDF_FIRST:Y+"first",RDF_REST:Y+"rest",RDF_NIL:Y+"nil",RDF_TYPE:Y+"type",RDF_PLAIN_LITERAL:Y+"PlainLiteral",RDF_XML_LITERAL:Y+"XMLLiteral",RDF_JSON_LITERAL:Y+"JSON",RDF_OBJECT:Y+"object",RDF_LANGSTRING:Y+"langString",XSD:z,XSD_BOOLEAN:z+"boolean",XSD_DOUBLE:z+"double",XSD_INTEGER:z+"integer",XSD_STRING:z+"string"}},{}],19:[function(Q,xe,me){"use strict";const Y=Q("./util"),z=Q("./JsonLdError"),{isArray:F,isObject:se,isString:K,isUndefined:E}=Q("./types"),{isAbsolute:A,isRelative:O,prependBase:T}=Q("./url"),{asArray:v,compareShortestLeast:y}=Q("./util"),S=new Map,B=/^@[a-zA-Z]+$/,I={};function q(M,N,ee,C,U,re){if(null===N||!K(N)||I.isKeyword(N))return N;if(N.match(B))return null;if(C&&C.hasOwnProperty(N)&&!0!==U.get(N)&&I.createTermDefinition({activeCtx:M,localCtx:C,term:N,defined:U,options:re}),(ee=ee||{}).vocab){const G=M.mappings.get(N);if(null===G)return null;if(se(G)&&"@id"in G)return G["@id"]}const de=N.indexOf(":");if(de>0){const G=N.substr(0,de),$=N.substr(de+1);if("_"===G||0===$.indexOf("//"))return N;C&&C.hasOwnProperty(G)&&I.createTermDefinition({activeCtx:M,localCtx:C,term:G,defined:U,options:re});const pe=M.mappings.get(G);if(pe&&pe._prefix)return pe["@id"]+$;if(A(N))return N}if(ee.vocab&&"@vocab"in M)return M["@vocab"]+N;if(ee.base&&"@base"in M){if(M["@base"])return T(T(re.base,M["@base"]),N)}else if(ee.base)return T(re.base,N);return N}function Z(M,N){if(!M||"object"!=typeof M||!N||"object"!=typeof N)return M===N;const ee=Array.isArray(M);if(ee!==Array.isArray(N))return!1;if(ee){if(M.length!==N.length)return!1;for(let re=0;re<M.length;++re)if(!Z(M[re],N[re]))return!1;return!0}const C=Object.keys(M),U=Object.keys(N);if(C.length!==U.length)return!1;for(const re in M){let de=M[re],G=N[re];if("@container"===re&&Array.isArray(de)&&Array.isArray(G)&&(de=de.slice().sort(),G=G.slice().sort()),!Z(de,G))return!1}return!0}xe.exports=I,I.process=function(){var M=gt(function*({activeCtx:N,localCtx:ee,options:C,propagate:U=!0,overrideProtected:re=!1,cycles:de=new Set}){if(se(ee)&&"@context"in ee&&F(ee["@context"])&&(ee=ee["@context"]),0===v(ee).length)return N;const $=yield C.contextResolver.resolve({activeCtx:N,context:ee,documentLoader:C.documentLoader,base:C.base});se($[0].document)&&"boolean"==typeof $[0].document["@propagate"]&&(U=$[0].document["@propagate"]);let pe=N;!U&&!pe.previousContext&&(pe=pe.clone(),pe.previousContext=N);for(const ue of $){let{document:X}=ue;if(N=pe,null===X){if(!re&&0!==Object.keys(N.protected).length){const je=C&&C.protectedMode||"error";if("error"===je)throw new z("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===je){console.warn("WARNING: invalid context nullification");const Ze=ue.getProcessed(N);if(Ze){pe=N=Ze;continue}const We=N;pe=N=I.getInitialContext(C).clone();for(const[Je,Ye]of Object.entries(We.protected))Ye&&(N.mappings[Je]=Y.clone(We.mappings[Je]));N.protected=Y.clone(We.protected),ue.setProcessed(We,pe);continue}throw new z("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:ee,protectedMode:je})}pe=N=I.getInitialContext(C).clone();continue}const ge=ue.getProcessed(N);if(ge){pe=N=ge;continue}if(se(X)&&"@context"in X&&(X=X["@context"]),!se(X))throw new z("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:X});pe=pe.clone();const De=new Map;if("@version"in X){if(1.1!==X["@version"])throw new z("Unsupported JSON-LD version: "+X["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:X});if(N.processingMode&&"json-ld-1.0"===N.processingMode)throw new z("@version: "+X["@version"]+" not compatible with "+N.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:X});pe.processingMode="json-ld-1.1",pe["@version"]=X["@version"],De.set("@version",!0)}if(pe.processingMode=pe.processingMode||N.processingMode,"@base"in X){let je=X["@base"];if(null!==je&&!A(je)){if(!O(je))throw new z('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:X});je=T(pe["@base"],je)}pe["@base"]=je,De.set("@base",!0)}if("@vocab"in X){const je=X["@vocab"];if(null===je)delete pe["@vocab"];else{if(!K(je))throw new z('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:X});if(!A(je)&&I.processingMode(pe,1))throw new z('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:X});pe["@vocab"]=q(pe,je,{vocab:!0,base:!0},void 0,void 0,C)}De.set("@vocab",!0)}if("@language"in X){const je=X["@language"];if(null===je)delete pe["@language"];else{if(!K(je))throw new z('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:X});pe["@language"]=je.toLowerCase()}De.set("@language",!0)}if("@direction"in X){const je=X["@direction"];if("json-ld-1.0"===N.processingMode)throw new z("Invalid JSON-LD syntax; @direction not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:X});if(null===je)delete pe["@direction"];else{if("ltr"!==je&&"rtl"!==je)throw new z('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:X});pe["@direction"]=je}De.set("@direction",!0)}if("@propagate"in X){const je=X["@propagate"];if("json-ld-1.0"===N.processingMode)throw new z("Invalid JSON-LD syntax; @propagate not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:X});if("boolean"!=typeof je)throw new z("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:ee});De.set("@propagate",!0)}if("@import"in X){const je=X["@import"];if("json-ld-1.0"===N.processingMode)throw new z("Invalid JSON-LD syntax; @import not compatible with "+N.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:X});if(!K(je))throw new z("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:ee});const Ze=yield C.contextResolver.resolve({activeCtx:N,context:je,documentLoader:C.documentLoader,base:C.base});if(1!==Ze.length)throw new z("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:ee});const We=Ze[0].getProcessed(N);if(We)X=We;else{const Je=Ze[0].document;if("@import"in Je)throw new z("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:ee});for(const Ye in Je)X.hasOwnProperty(Ye)||(X[Ye]=Je[Ye]);Ze[0].setProcessed(N,X)}De.set("@import",!0)}De.set("@protected",X["@protected"]||!1);for(const je in X)if(I.createTermDefinition({activeCtx:pe,localCtx:X,term:je,defined:De,options:C,overrideProtected:re}),se(X[je])&&"@context"in X[je]){const Ze=X[je]["@context"];let We=!0;if(K(Ze)){const Je=T(C.base,Ze);de.has(Je)?We=!1:de.add(Je)}if(We)try{yield I.process({activeCtx:pe.clone(),localCtx:X[je]["@context"],overrideProtected:!0,options:C,cycles:de})}catch(Je){throw new z("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:X[je]["@context"],term:je})}}ue.setProcessed(N,pe)}return pe});return function(N){return M.apply(this,arguments)}}(),I.createTermDefinition=({activeCtx:M,localCtx:N,term:ee,defined:C,options:U,overrideProtected:re=!1})=>{if(C.has(ee)){if(C.get(ee))return;throw new z("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:N,term:ee})}let de;if(C.set(ee,!1),N.hasOwnProperty(ee)&&(de=N[ee]),"@type"===ee&&se(de)&&"@set"===(de["@container"]||"@set")&&I.processingMode(M,1.1)){const De=["@container","@id","@protected"],je=Object.keys(de);if(0===je.length||je.some(Ze=>!De.includes(Ze)))throw new z("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:N,term:ee})}else{if(I.isKeyword(ee))throw new z("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:N,term:ee});if(ee.match(B))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:ee});if(""===ee)throw new z("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:N})}const G=M.mappings.get(ee);M.mappings.has(ee)&&M.mappings.delete(ee);let $=!1;if((K(de)||null===de)&&($=!0,de={"@id":de}),!se(de))throw new z("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:N});const pe={};M.mappings.set(ee,pe),pe.reverse=!1;const ue=["@container","@id","@language","@reverse","@type"];I.processingMode(M,1.1)&&ue.push("@context","@direction","@index","@nest","@prefix","@protected");for(const De in de)if(!ue.includes(De))throw new z("Invalid JSON-LD syntax; a term definition must not contain "+De,"jsonld.SyntaxError",{code:"invalid term definition",context:N});const X=ee.indexOf(":");if(pe._termHasColon=X>0,"@reverse"in de){if("@id"in de)throw new z("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:N});if("@nest"in de)throw new z("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:N});const De=de["@reverse"];if(!K(De))throw new z("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});if(!I.isKeyword(De)&&De.match(B))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:De}),void(G?M.mappings.set(ee,G):M.mappings.delete(ee));const je=q(M,De,{vocab:!0,base:!1},N,C,U);if(!A(je))throw new z("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});pe["@id"]=je,pe.reverse=!0}else if("@id"in de){let De=de["@id"];if(De&&!K(De))throw new z("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});if(null===De)pe["@id"]=null;else{if(!I.isKeyword(De)&&De.match(B))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:De}),void(G?M.mappings.set(ee,G):M.mappings.delete(ee));if(De!==ee){if(De=q(M,De,{vocab:!0,base:!1},N,C,U),!A(De)&&!I.isKeyword(De))throw new z("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});if(ee.match(/(?::[^:])|\//)&&q(M,ee,{vocab:!0,base:!1},N,new Map(C).set(ee,!0),U)!==De)throw new z("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N});pe["@id"]=De,pe._prefix=$&&!pe._termHasColon&&De.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in pe))if(pe._termHasColon){const De=ee.substr(0,X);if(N.hasOwnProperty(De)&&I.createTermDefinition({activeCtx:M,localCtx:N,term:De,defined:C,options:U}),M.mappings.has(De)){const je=ee.substr(X+1);pe["@id"]=M.mappings.get(De)["@id"]+je}else pe["@id"]=ee}else if("@type"===ee)pe["@id"]=ee;else{if(!("@vocab"in M))throw new z("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:N,term:ee});pe["@id"]=M["@vocab"]+ee}if((!0===de["@protected"]||!0===C.get("@protected")&&!1!==de["@protected"])&&(M.protected[ee]=!0,pe.protected=!0),C.set(ee,!0),"@type"in de){let De=de["@type"];if(!K(De))throw new z("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:N});if("@json"===De||"@none"===De){if(I.processingMode(M,1))throw new z(`Invalid JSON-LD syntax; an @context @type value must not be "${De}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:N})}else if("@id"!==De&&"@vocab"!==De){if(De=q(M,De,{vocab:!0,base:!1},N,C,U),!A(De))throw new z("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:N});if(0===De.indexOf("_:"))throw new z("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:N})}pe["@type"]=De}if("@container"in de){const De=K(de["@container"])?[de["@container"]]:de["@container"]||[],je=["@list","@set","@index","@language"];let Ze=!0;const We=De.includes("@set");if(I.processingMode(M,1.1)){if(je.push("@graph","@id","@type"),De.includes("@list")){if(1!==De.length)throw new z("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:N})}else if(De.includes("@graph")){if(De.some(Je=>"@graph"!==Je&&"@id"!==Je&&"@index"!==Je&&"@set"!==Je))throw new z("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:N})}else Ze&=De.length<=(We?2:1);if(De.includes("@type")&&(pe["@type"]=pe["@type"]||"@id",!["@id","@vocab"].includes(pe["@type"])))throw new z("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:N})}else Ze&=!F(de["@container"]),Ze&=De.length<=1;if(Ze&=De.every(Je=>je.includes(Je)),Ze&=!(We&&De.includes("@list")),!Ze)throw new z("Invalid JSON-LD syntax; @context @container value must be one of the following: "+je.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:N});if(pe.reverse&&!De.every(Je=>["@index","@set"].includes(Je)))throw new z("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:N});pe["@container"]=De}if("@index"in de){if(!("@container"in de)||!pe["@container"].includes("@index"))throw new z(`Invalid JSON-LD syntax; @index without @index in @container: "${de["@index"]}" on term "${ee}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:N});if(!K(de["@index"])||0===de["@index"].indexOf("@"))throw new z(`Invalid JSON-LD syntax; @index must expand to an IRI: "${de["@index"]}" on term "${ee}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:N});pe["@index"]=de["@index"]}if("@context"in de&&(pe["@context"]=de["@context"]),"@language"in de&&!("@type"in de)){let De=de["@language"];if(null!==De&&!K(De))throw new z("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:N});null!==De&&(De=De.toLowerCase()),pe["@language"]=De}if("@prefix"in de){if(ee.match(/:|\//))throw new z("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:N});if(I.isKeyword(pe["@id"]))throw new z("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:N});if("boolean"!=typeof de["@prefix"])throw new z("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:N});pe._prefix=!0===de["@prefix"]}if("@direction"in de){const De=de["@direction"];if(null!==De&&"ltr"!==De&&"rtl"!==De)throw new z('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:N});pe["@direction"]=De}if("@nest"in de){const De=de["@nest"];if(!K(De)||"@nest"!==De&&0===De.indexOf("@"))throw new z("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:N});pe["@nest"]=De}const ge=pe["@id"];if("@context"===ge||"@preserve"===ge)throw new z("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:N});if(G&&G.protected&&!re&&(M.protected[ee]=!0,pe.protected=!0,!Z(G,pe))){const De=U&&U.protectedMode||"error";if("error"===De)throw new z(`Invalid JSON-LD syntax; tried to redefine "${ee}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:N,term:ee});if("warn"===De)return void console.warn("WARNING: protected term redefinition",{term:ee});throw new z("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:N,term:ee,protectedMode:De})}},I.expandIri=(M,N,ee,C)=>q(M,N,ee,void 0,void 0,C),I.getInitialContext=M=>{const N=JSON.stringify({processingMode:M.processingMode}),ee=S.get(N);if(ee)return ee;const C={processingMode:M.processingMode,mappings:new Map,inverse:null,getInverse:function(){const pe=this;if(pe.inverse)return pe.inverse;const ue=pe.inverse={},X=pe.fastCurieMap={},ge={},De=(pe["@language"]||"@none").toLowerCase(),je=pe["@direction"],Ze=pe.mappings,We=[...Ze.keys()].sort(y);for(const Je of We){const Ye=Ze.get(Je);if(null===Ye)continue;let Ve=Ye["@container"]||"@none";if(Ve=[].concat(Ve).sort().join(""),null===Ye["@id"])continue;const Le=v(Ye["@id"]);for(const Se of Le){let Re=ue[Se];const He=I.isKeyword(Se);if(Re)!He&&!Ye._termHasColon&&ge[Se].push(Je);else if(ue[Se]=Re={},!He&&!Ye._termHasColon){ge[Se]=[Je];const Xe={iri:Se,terms:ge[Se]};Se[0]in X?X[Se[0]].push(Xe):X[Se[0]]=[Xe]}if(Re[Ve]||(Re[Ve]={"@language":{},"@type":{},"@any":{}}),Re=Re[Ve],de(Je,Re["@any"],"@none"),Ye.reverse)de(Je,Re["@type"],"@reverse");else if("@none"===Ye["@type"])de(Je,Re["@any"],"@none"),de(Je,Re["@language"],"@none"),de(Je,Re["@type"],"@none");else if("@type"in Ye)de(Je,Re["@type"],Ye["@type"]);else if("@language"in Ye&&"@direction"in Ye){const Xe=Ye["@language"],ze=Ye["@direction"];de(Je,Re["@language"],Xe&&ze?`${Xe}_${ze}`.toLowerCase():Xe?Xe.toLowerCase():ze?`_${ze}`:"@null")}else"@language"in Ye?de(Je,Re["@language"],(Ye["@language"]||"@null").toLowerCase()):"@direction"in Ye?de(Je,Re["@language"],Ye["@direction"]?`_${Ye["@direction"]}`:"@none"):je?(de(Je,Re["@language"],`_${je}`),de(Je,Re["@language"],"@none"),de(Je,Re["@type"],"@none")):(de(Je,Re["@language"],De),de(Je,Re["@language"],"@none"),de(Je,Re["@type"],"@none"))}}for(const Je in X)re(X,Je,1);return ue},clone:function(){const pe={};return pe.mappings=Y.clone(this.mappings),pe.clone=this.clone,pe.inverse=null,pe.getInverse=this.getInverse,pe.protected=Y.clone(this.protected),this.previousContext&&(pe.previousContext=this.previousContext.clone()),pe.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(pe["@base"]=this["@base"]),"@language"in this&&(pe["@language"]=this["@language"]),"@vocab"in this&&(pe["@vocab"]=this["@vocab"]),pe},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===S.size&&S.clear(),S.set(N,C),C;function re(pe,ue,X){const ge=pe[ue],De=pe[ue]={};let je,Ze;for(const We of ge)je=We.iri,Ze=X>=je.length?"":je[X],Ze in De?De[Ze].push(We):De[Ze]=[We];for(const We in De)""!==We&&re(De,We,X+1)}function de(pe,ue,X){ue.hasOwnProperty(X)||(ue[X]=pe)}},I.getContextValue=(M,N,ee)=>{if(null===N)return"@context"===ee?void 0:null;if(M.mappings.has(N)){const C=M.mappings.get(N);if(E(ee))return C;if(C.hasOwnProperty(ee))return C[ee]}return"@language"===ee&&ee in M||"@direction"===ee&&ee in M?M[ee]:"@context"!==ee?null:void 0},I.processingMode=(M,N)=>N.toString()>="1.1"?!M.processingMode||M.processingMode>="json-ld-"+N.toString():"json-ld-1.0"===M.processingMode,I.isKeyword=M=>{if(!K(M)||"@"!==M[0])return!1;switch(M){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":12,"./types":30,"./url":31,"./util":32}],20:[function(Q,xe,me){"use strict";const{parseLinkHeader:Y,buildHeaders:z}=Q("../util"),{LINK_HEADER_CONTEXT:F}=Q("../constants"),se=Q("../JsonLdError"),K=Q("../RequestQueue"),{prependBase:E}=Q("../url"),A=/(^|(\r\n))link:/i;function O(T,v,y){const S=new(T=T||XMLHttpRequest);return new Promise((D,B)=>{S.onload=()=>D(S),S.onerror=I=>B(I),S.open("GET",v,!0);for(const I in y)S.setRequestHeader(I,y[I]);S.send()})}xe.exports=({secure:T,headers:v={},xhr:y}={headers:{}})=>{return v=z(v),(new K).wrapLoader(D);function D(I){return B.apply(this,arguments)}function B(){return(B=gt(function*(I){if(0!==I.indexOf("http:")&&0!==I.indexOf("https:"))throw new se('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:I});if(T&&0!==I.indexOf("https"))throw new se('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:I});let q;try{q=yield O(y,I,v)}catch(C){throw new se("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:I,cause:C})}if(q.status>=400)throw new se("URL could not be dereferenced: "+q.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:I,httpStatusCode:q.status});let Z={contextUrl:null,documentUrl:I,document:q.response},M=null;const N=q.getResponseHeader("Content-Type");let ee;if(A.test(q.getAllResponseHeaders())&&(ee=q.getResponseHeader("Link")),ee&&"application/ld+json"!==N){const C=Y(ee),U=C[F];if(Array.isArray(U))throw new se("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:I});U&&(Z.contextUrl=U.target),M=C.alternate,M&&"application/ld+json"==M.type&&!(N||"").match(/^application\/(\w*\+)?json$/)&&(Z=yield D(E(I,M.target)))}return Z})).apply(this,arguments)}}},{"../JsonLdError":12,"../RequestQueue":15,"../constants":18,"../url":31,"../util":32}],21:[function(Q,xe,me){"use strict";const Y=Q("./JsonLdError"),{isArray:z,isObject:F,isEmptyObject:se,isString:K,isUndefined:E}=Q("./types"),{isList:A,isValue:O,isGraph:T,isSubject:v}=Q("./graphTypes"),{expandIri:y,getContextValue:S,isKeyword:D,process:B,processingMode:I}=Q("./context"),{isAbsolute:q}=Q("./url"),{addValue:Z,asArray:M,getValues:N,validateTypeValue:ee}=Q("./util"),C={};xe.exports=C;const U=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function re(X){return de.apply(this,arguments)}function de(){return(de=gt(function*({activeCtx:X,activeProperty:ge,expandedActiveProperty:De,element:je,expandedParent:Ze,options:We={},insideList:Je,typeKey:Ye,typeScopedContext:Ve,expansionMap:Le}){const Se=Object.keys(je).sort(),Re=[];let He;const Xe=je[Ye]&&"@json"===y(X,z(je[Ye])?je[Ye][0]:je[Ye],{vocab:!0},We);for(const ze of Se){let J,W=je[ze];if("@context"===ze)continue;let we=y(X,ze,{vocab:!0},We);if((null===we||!q(we)&&!D(we))&&(we=Le({unmappedProperty:ze,activeCtx:X,activeProperty:ge,parent:je,options:We,insideList:Je,value:W,expandedParent:Ze}),void 0===we))continue;if(D(we)){if("@reverse"===De)throw new Y("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:W});if(we in Ze&&"@included"!==we&&"@type"!==we)throw new Y("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:we})}if("@id"===we){if(!K(W)){if(!We.isFrame)throw new Y('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:W});if(F(W)){if(!se(W))throw new Y('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:W})}else{if(!z(W))throw new Y('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:W});if(!W.every(pt=>K(pt)))throw new Y('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:W})}}Z(Ze,"@id",M(W).map(pt=>K(pt)?y(X,pt,{base:!0},We):pt),{propertyIsArray:We.isFrame});continue}if("@type"===we){F(W)&&(W=Object.fromEntries(Object.entries(W).map(([pt,ye])=>[y(Ve,pt,{vocab:!0}),M(ye).map(j=>y(Ve,j,{base:!0,vocab:!0}))]))),ee(W,We.isFrame),Z(Ze,"@type",M(W).map(pt=>K(pt)?y(Ve,pt,{base:!0,vocab:!0},We):pt),{propertyIsArray:We.isFrame});continue}if("@included"===we&&I(X,1.1)){const pt=M(yield C.expand({activeCtx:X,activeProperty:ge,element:W,options:We,expansionMap:Le}));if(!pt.every(ye=>v(ye)))throw new Y("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:W});Z(Ze,"@included",pt,{propertyIsArray:!0});continue}if("@graph"===we&&!F(W)&&!z(W))throw new Y('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:W});if("@value"===we){He=W,Xe&&I(X,1.1)?Ze["@value"]=W:Z(Ze,"@value",W,{propertyIsArray:We.isFrame});continue}if("@language"===we){if(null===W)continue;if(!K(W)&&!We.isFrame)throw new Y('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:W});W=M(W).map(pt=>K(pt)?pt.toLowerCase():pt);for(const pt of W)K(pt)&&!pt.match(U)&&console.warn(`@language must be valid BCP47: ${pt}`);Z(Ze,"@language",W,{propertyIsArray:We.isFrame});continue}if("@direction"===we){if(!K(W)&&!We.isFrame)throw new Y('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:W});W=M(W);for(const pt of W)if(K(pt)&&"ltr"!==pt&&"rtl"!==pt)throw new Y('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:W});Z(Ze,"@direction",W,{propertyIsArray:We.isFrame});continue}if("@index"===we){if(!K(W))throw new Y('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:W});Z(Ze,"@index",W);continue}if("@reverse"===we){if(!F(W))throw new Y('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:W});if(J=yield C.expand({activeCtx:X,activeProperty:"@reverse",element:W,options:We,expansionMap:Le}),"@reverse"in J)for(const ye in J["@reverse"])Z(Ze,ye,J["@reverse"][ye],{propertyIsArray:!0});let pt=Ze["@reverse"]||null;for(const ye in J){if("@reverse"===ye)continue;null===pt&&(pt=Ze["@reverse"]={}),Z(pt,ye,[],{propertyIsArray:!0});const j=J[ye];for(let R=0;R<j.length;++R){const L=j[R];if(O(L)||A(L))throw new Y('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:J});Z(pt,ye,L,{propertyIsArray:!0})}}continue}if("@nest"===we){Re.push(ze);continue}let ce=X;const ke=S(X,ze,"@context");E(ke)||(ce=yield B({activeCtx:X,localCtx:ke,propagate:!0,overrideProtected:!0,options:We}));const At=S(ce,ze,"@container")||[];if(At.includes("@language")&&F(W))J=$(ce,W,S(ce,ze,"@direction"),We);else if(At.includes("@index")&&F(W)){const pt=At.includes("@graph"),ye=S(ce,ze,"@index")||"@index",j="@index"!==ye&&y(X,ye,{vocab:!0},We);J=yield pe({activeCtx:ce,options:We,activeProperty:ze,value:W,expansionMap:Le,asGraph:pt,indexKey:ye,propertyIndex:j})}else if(At.includes("@id")&&F(W)){const pt=At.includes("@graph");J=yield pe({activeCtx:ce,options:We,activeProperty:ze,value:W,expansionMap:Le,asGraph:pt,indexKey:"@id"})}else if(At.includes("@type")&&F(W))J=yield pe({activeCtx:ce.revertToPreviousContext(),options:We,activeProperty:ze,value:W,expansionMap:Le,asGraph:!1,indexKey:"@type"});else{const pt="@list"===we;if(pt||"@set"===we){let ye=ge;pt&&"@graph"===De&&(ye=null),J=yield C.expand({activeCtx:ce,activeProperty:ye,element:W,options:We,insideList:pt,expansionMap:Le})}else J="@json"===S(X,ze,"@type")?{"@type":"@json","@value":W}:yield C.expand({activeCtx:ce,activeProperty:ze,element:W,options:We,insideList:!1,expansionMap:Le})}if(null!==J||"@value"===we||(J=Le({unmappedValue:W,expandedProperty:we,activeCtx:ce,activeProperty:ge,parent:je,options:We,insideList:Je,key:ze,expandedParent:Ze}),void 0!==J)){if("@list"!==we&&!A(J)&&At.includes("@list")&&(J={"@list":M(J)}),At.includes("@graph")&&!At.some(pt=>"@id"===pt||"@index"===pt)&&(J=M(J).map(pt=>({"@graph":M(pt)}))),ce.mappings.has(ze)&&ce.mappings.get(ze).reverse){const pt=Ze["@reverse"]=Ze["@reverse"]||{};J=M(J);for(let ye=0;ye<J.length;++ye){const j=J[ye];if(O(j)||A(j))throw new Y('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:J});Z(pt,we,j,{propertyIsArray:!0})}continue}Z(Ze,we,J,{propertyIsArray:!0})}}if("@value"in Ze&&("@json"!==Ze["@type"]||!I(X,1.1))&&(F(He)||z(He))&&!We.isFrame)throw new Y('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:He});for(const ze of Re){const W=z(je[ze])?je[ze]:[je[ze]];for(const J of W){if(!F(J)||Object.keys(J).some(we=>"@value"===y(X,we,{vocab:!0},We)))throw new Y("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:J});yield re({activeCtx:X,activeProperty:ge,expandedActiveProperty:De,element:J,expandedParent:Ze,options:We,insideList:Je,typeScopedContext:Ve,typeKey:Ye,expansionMap:Le})}}})).apply(this,arguments)}function G({activeCtx:X,activeProperty:ge,value:De,options:je}){if(null==De)return null;const Ze=y(X,ge,{vocab:!0},je);if("@id"===Ze)return y(X,De,{base:!0},je);if("@type"===Ze)return y(X,De,{vocab:!0,base:!0},je);const We=S(X,ge,"@type");if(("@id"===We||"@graph"===Ze)&&K(De))return{"@id":y(X,De,{base:!0},je)};if("@vocab"===We&&K(De))return{"@id":y(X,De,{vocab:!0,base:!0},je)};if(D(Ze))return De;const Je={};if(We&&!["@id","@vocab","@none"].includes(We))Je["@type"]=We;else if(K(De)){const Ye=S(X,ge,"@language");null!==Ye&&(Je["@language"]=Ye);const Ve=S(X,ge,"@direction");null!==Ve&&(Je["@direction"]=Ve)}return["boolean","number","string"].includes(typeof De)||(De=De.toString()),Je["@value"]=De,Je}function $(X,ge,De,je){const Ze=[],We=Object.keys(ge).sort();for(const Je of We){const Ye=y(X,Je,{vocab:!0},je);let Ve=ge[Je];z(Ve)||(Ve=[Ve]);for(const Le of Ve){if(null===Le)continue;if(!K(Le))throw new Y("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ge});const Se={"@value":Le};"@none"!==Ye&&(Se["@language"]=Je.toLowerCase()),De&&(Se["@direction"]=De),Ze.push(Se)}}return Ze}function pe(X){return ue.apply(this,arguments)}function ue(){return(ue=gt(function*({activeCtx:X,options:ge,activeProperty:De,value:je,expansionMap:Ze,asGraph:We,indexKey:Je,propertyIndex:Ye}){const Ve=[],Le=Object.keys(je).sort(),Se="@type"===Je;for(let Re of Le){if(Se){const ze=S(X,Re,"@context");E(ze)||(X=yield B({activeCtx:X,localCtx:ze,propagate:!1,options:ge}))}let Xe,He=je[Re];z(He)||(He=[He]),He=yield C.expand({activeCtx:X,activeProperty:De,element:He,options:ge,insideList:!1,insideIndex:!0,expansionMap:Ze}),Xe=Ye?"@none"===Re?"@none":G({activeCtx:X,activeProperty:Je,value:Re,options:ge}):y(X,Re,{vocab:!0},ge),"@id"===Je?Re=y(X,Re,{base:!0},ge):Se&&(Re=Xe);for(let ze of He){if(We&&!T(ze)&&(ze={"@graph":[ze]}),"@type"===Je)"@none"===Xe||(ze["@type"]=ze["@type"]?[Re].concat(ze["@type"]):[Re]);else{if(O(ze)&&!["@language","@type","@index"].includes(Je))throw new Y(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${Je}".`,"jsonld.SyntaxError",{code:"invalid value object",value:ze});Ye?"@none"!==Xe&&Z(ze,Ye,Xe,{propertyIsArray:!0,prependValue:!0}):"@none"!==Xe&&!(Je in ze)&&(ze[Je]=Re)}Ve.push(ze)}}return Ve})).apply(this,arguments)}C.expand=function(){var X=gt(function*({activeCtx:ge,activeProperty:De=null,element:je,options:Ze={},insideList:We=!1,insideIndex:Je=!1,typeScopedContext:Ye=null,expansionMap:Ve=(()=>{})}){if(null==je)return null;if("@default"===De&&(Ze=Object.assign({},Ze,{isFrame:!1})),!z(je)&&!F(je)){if(!We&&(null===De||"@graph"===y(ge,De,{vocab:!0},Ze))){const J=yield Ve({unmappedValue:je,activeCtx:ge,activeProperty:De,options:Ze,insideList:We});return void 0===J?null:J}return G({activeCtx:ge,activeProperty:De,value:je,options:Ze})}if(z(je)){let J=[];const we=S(ge,De,"@container")||[];We=We||we.includes("@list");for(let ce=0;ce<je.length;++ce){let ke=yield C.expand({activeCtx:ge,activeProperty:De,element:je[ce],options:Ze,expansionMap:Ve,insideIndex:Je,typeScopedContext:Ye});We&&z(ke)&&(ke={"@list":ke}),(null!==ke||(ke=yield Ve({unmappedValue:je[ce],activeCtx:ge,activeProperty:De,parent:je,index:ce,options:Ze,expandedParent:J,insideList:We}),void 0!==ke))&&(z(ke)?J=J.concat(ke):J.push(ke))}return J}const Le=y(ge,De,{vocab:!0},Ze),Se=S(ge,De,"@context");Ye=Ye||(ge.previousContext?ge:null);let Re=Object.keys(je).sort(),He=!Je;if(He&&Ye&&Re.length<=2&&!Re.includes("@context"))for(const J of Re){const we=y(Ye,J,{vocab:!0},Ze);if("@value"===we){He=!1,ge=Ye;break}if("@id"===we&&1===Re.length){He=!1;break}}He&&(ge=ge.revertToPreviousContext()),E(Se)||(ge=yield B({activeCtx:ge,localCtx:Se,propagate:!0,overrideProtected:!0,options:Ze})),"@context"in je&&(ge=yield B({activeCtx:ge,localCtx:je["@context"],options:Ze})),Ye=ge;let Xe=null;for(const J of Re)if("@type"===y(ge,J,{vocab:!0},Ze)){Xe=Xe||J;const ce=je[J],ke=Array.isArray(ce)?ce.length>1?ce.slice().sort():ce:[ce];for(const At of ke){const pt=S(Ye,At,"@context");E(pt)||(ge=yield B({activeCtx:ge,localCtx:pt,options:Ze,propagate:!1}))}}let ze={};yield re({activeCtx:ge,activeProperty:De,expandedActiveProperty:Le,element:je,expandedParent:ze,options:Ze,insideList:We,typeKey:Xe,typeScopedContext:Ye,expansionMap:Ve}),Re=Object.keys(ze);let W=Re.length;if("@value"in ze){if("@type"in ze&&("@language"in ze||"@direction"in ze))throw new Y('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ze});let J=W-1;if("@type"in ze&&(J-=1),"@index"in ze&&(J-=1),"@language"in ze&&(J-=1),"@direction"in ze&&(J-=1),0!==J)throw new Y('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:ze});const we=null===ze["@value"]?[]:M(ze["@value"]),ce=N(ze,"@type");if(!I(ge,1.1)||!ce.includes("@json")||1!==ce.length)if(0===we.length){const ke=yield Ve({unmappedValue:ze,activeCtx:ge,activeProperty:De,element:je,options:Ze,insideList:We});ze=void 0!==ke?ke:null}else{if(!we.every(ke=>K(ke)||se(ke))&&"@language"in ze)throw new Y("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:ze});if(!ce.every(ke=>q(ke)&&!(K(ke)&&0===ke.indexOf("_:"))||se(ke)))throw new Y('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:ze})}}else if("@type"in ze&&!z(ze["@type"]))ze["@type"]=[ze["@type"]];else if("@set"in ze||"@list"in ze){if(W>1&&(2!==W||!("@index"in ze)))throw new Y('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:ze});"@set"in ze&&(ze=ze["@set"],Re=Object.keys(ze),W=Re.length)}else if(1===W&&"@language"in ze){const J=yield Ve(ze,{unmappedValue:ze,activeCtx:ge,activeProperty:De,element:je,options:Ze,insideList:We});ze=void 0!==J?J:null}if(F(ze)&&!Ze.keepFreeFloatingNodes&&!We&&(null===De||"@graph"===Le)&&(0===W||"@value"in ze||"@list"in ze||1===W&&"@id"in ze)){const J=yield Ve({unmappedValue:ze,activeCtx:ge,activeProperty:De,element:je,options:Ze,insideList:We});ze=void 0!==J?J:null}return ze});return function(ge){return X.apply(this,arguments)}}()},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./url":31,"./util":32}],22:[function(Q,xe,me){"use strict";const{isSubjectReference:Y}=Q("./graphTypes"),{createMergedNodeMap:z}=Q("./nodeMap"),F={};xe.exports=F,F.flatten=se=>{const K=z(se),E=[],A=Object.keys(K).sort();for(let O=0;O<A.length;++O){const T=K[A[O]];Y(T)||E.push(T)}return E}},{"./graphTypes":25,"./nodeMap":27}],23:[function(Q,xe,me){"use strict";const{isKeyword:Y}=Q("./context"),z=Q("./graphTypes"),F=Q("./types"),se=Q("./util"),K=Q("./url"),E=Q("./JsonLdError"),{createNodeMap:A,mergeNodeMapGraphs:O}=Q("./nodeMap"),T={};function v(C){const U={};for(const re in C)void 0!==C[re]&&(U["@"+re]=[C[re]]);return[U]}function y(C,U,re){for(let de=re.length-1;de>=0;--de){const G=re[de];if(G.graph===U&&G.subject["@id"]===C["@id"])return!0}return!1}function S(C,U,re){const de="@"+re;let G=de in C?C[de][0]:U[re];if("embed"===re)if(!0===G)G="@once";else if(!1===G)G="@never";else if("@always"!==G&&"@never"!==G&&"@link"!==G&&"@first"!==G&&"@last"!==G&&"@once"!==G)throw new E("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:C});return G}function D(C){if(!F.isArray(C)||1!==C.length||!F.isObject(C[0]))throw new E("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:C});if("@id"in C[0])for(const U of se.asArray(C[0]["@id"]))if(!F.isObject(U)&&!K.isAbsolute(U)||F.isString(U)&&0===U.indexOf("_:"))throw new E("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:C});if("@type"in C[0])for(const U of se.asArray(C[0]["@type"]))if(!F.isObject(U)&&!K.isAbsolute(U)||F.isString(U)&&0===U.indexOf("_:"))throw new E("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:C})}function I(C,U,re,de){let G=!0,$=!1;for(const pe in re){let ue=!1;const X=se.getValues(U,pe),ge=0===se.getValues(re,pe).length;if("@id"===pe){if(F.isEmptyObject(re["@id"][0]||{})?ue=!0:re["@id"].length>=0&&(ue=re["@id"].includes(X[0])),!de.requireAll)return ue}else if("@type"===pe){if(G=!1,ge){if(X.length>0)return!1;ue=!0}else if(1===re["@type"].length&&F.isEmptyObject(re["@type"][0]))ue=X.length>0;else for(const De of re["@type"])ue=!(!F.isObject(De)||!("@default"in De))||ue||X.some(je=>je===De);if(!de.requireAll)return ue}else{if(Y(pe))continue;{const De=se.getValues(re,pe)[0];let je=!1;if(De&&(D([De]),je="@default"in De),G=!1,0===X.length&&je)continue;if(X.length>0&&ge)return!1;if(void 0===De){if(X.length>0)return!1;ue=!0}else if(z.isList(De)){const Ze=De["@list"][0];if(z.isList(X[0])){const We=X[0]["@list"];z.isValue(Ze)?ue=We.some(Je=>ee(Ze,Je)):(z.isSubject(Ze)||z.isSubjectReference(Ze))&&(ue=We.some(Je=>N(C,Ze,Je,de)))}}else ue=z.isValue(De)?X.some(Ze=>ee(De,Ze)):z.isSubjectReference(De)?X.some(Ze=>N(C,De,Ze,de)):!!F.isObject(De)&&X.length>0}}if(!ue&&de.requireAll)return!1;$=$||ue}return G||$}function q(C,U){const re=C.uniqueEmbeds[C.graph],de=re[U],G=de.parent,$=de.property,pe={"@id":U};if(F.isArray(G)){for(let X=0;X<G.length;++X)if(se.compareValues(G[X],pe)){G[X]=pe;break}}else{const X=F.isArray(G[$]);se.removeValue(G,$,pe,{propertyIsArray:X}),se.addValue(G,$,pe,{propertyIsArray:X})}const ue=X=>{const ge=Object.keys(re);for(const De of ge)De in re&&F.isObject(re[De].parent)&&re[De].parent["@id"]===X&&(delete re[De],ue(De))};ue(U)}function Z(C,U){if(F.isArray(C))return C.map(re=>Z(re,U));if(F.isObject(C)){if("@preserve"in C)return C["@preserve"][0];if(z.isValue(C))return C;if(z.isList(C))return C["@list"]=Z(C["@list"],U),C;if("@id"in C){const re=C["@id"];if(U.link.hasOwnProperty(re)){const de=U.link[re].indexOf(C);if(-1!==de)return U.link[re][de];U.link[re].push(C)}else U.link[re]=[C]}for(const re in C)"@id"===re&&U.bnodesToClear.includes(C[re])?delete C["@id"]:C[re]=Z(C[re],U)}return C}function M(C,U,re){F.isObject(C)?se.addValue(C,U,re,{propertyIsArray:!0}):C.push(re)}function N(C,U,re,de){if(!("@id"in re))return!1;const G=C.subjects[re["@id"]];return G&&I(C,G,U,de)}function ee(C,U){const re=U["@value"],de=U["@type"],G=U["@language"],$=C["@value"]?F.isArray(C["@value"])?C["@value"]:[C["@value"]]:[],pe=C["@type"]?F.isArray(C["@type"])?C["@type"]:[C["@type"]]:[],ue=C["@language"]?F.isArray(C["@language"])?C["@language"]:[C["@language"]]:[];return 0===$.length&&0===pe.length&&0===ue.length||!(!$.includes(re)&&!F.isEmptyObject($[0])||!(!de&&0===pe.length||pe.includes(de)||de&&F.isEmptyObject(pe[0]))||!(!G&&0===ue.length||ue.includes(G)||G&&F.isEmptyObject(ue[0])))}xe.exports=T,T.frameMergedOrDefault=(C,U,re)=>{const de={options:re,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},G=new se.IdentifierIssuer("_:b");A(C,de.graphMap,"@default",G),re.merged&&(de.graphMap["@merged"]=O(de.graphMap),de.graph="@merged"),de.subjects=de.graphMap[de.graph];const $=[];return T.frame(de,Object.keys(de.subjects).sort(),U,$),re.pruneBlankNodeIdentifiers&&(re.bnodesToClear=Object.keys(de.bnodeMap).filter(pe=>1===de.bnodeMap[pe].length)),re.link={},Z($,re)},T.frame=(C,U,re,de,G=null)=>{D(re);const $=C.options,pe={embed:S(re=re[0],$,"embed"),explicit:S(re,$,"explicit"),requireAll:S(re,$,"requireAll")};C.link.hasOwnProperty(C.graph)||(C.link[C.graph]={});const ue=C.link[C.graph],X=function(C,U,re,de){const G={};for(const $ of U){const pe=C.graphMap[C.graph][$];I(C,pe,re,de)&&(G[$]=pe)}return G}(C,U,re,pe),ge=Object.keys(X).sort();for(const De of ge){const je=X[De];if(null===G?C.uniqueEmbeds={[C.graph]:{}}:C.uniqueEmbeds[C.graph]=C.uniqueEmbeds[C.graph]||{},"@link"===pe.embed&&De in ue){M(de,G,ue[De]);continue}const Ze={"@id":De};if(0===De.indexOf("_:")&&se.addValue(C.bnodeMap,De,Ze,{propertyIsArray:!0}),ue[De]=Ze,("@first"===pe.embed||"@last"===pe.embed)&&C.is11)throw new E("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:re});if(C.embedded||!C.uniqueEmbeds[C.graph].hasOwnProperty(De)){if(C.embedded&&("@never"===pe.embed||y(je,C.graph,C.subjectStack))){M(de,G,Ze);continue}if(C.embedded&&("@first"==pe.embed||"@once"==pe.embed)&&C.uniqueEmbeds[C.graph].hasOwnProperty(De)){M(de,G,Ze);continue}if("@last"===pe.embed&&De in C.uniqueEmbeds[C.graph]&&q(C,De),C.uniqueEmbeds[C.graph][De]={parent:de,property:G},C.subjectStack.push({subject:je,graph:C.graph}),De in C.graphMap){let We=!1,Je=null;"@graph"in re?(Je=re["@graph"][0],We=!("@merged"===De||"@default"===De),F.isObject(Je)||(Je={})):(We="@merged"!==C.graph,Je={}),We&&T.frame(Qf(Ls({},C),{graph:De,embedded:!1}),Object.keys(C.graphMap[De]).sort(),[Je],Ze,"@graph")}"@included"in re&&T.frame(Qf(Ls({},C),{embedded:!1}),U,re["@included"],Ze,"@included");for(const We of Object.keys(je).sort())if(Y(We)){if(Ze[We]=se.clone(je[We]),"@type"===We)for(const Je of je["@type"])0===Je.indexOf("_:")&&se.addValue(C.bnodeMap,Je,Ze,{propertyIsArray:!0})}else if(!pe.explicit||We in re)for(const Je of je[We]){const Ye=We in re?re[We]:v(pe);if(z.isList(Je)){const Ve=re[We]&&re[We][0]&&re[We][0]["@list"]?re[We][0]["@list"]:v(pe),Le={"@list":[]};M(Ze,We,Le);const Se=Je["@list"];for(const Re of Se)z.isSubjectReference(Re)?T.frame(Qf(Ls({},C),{embedded:!0}),[Re["@id"]],Ve,Le,"@list"):M(Le,"@list",se.clone(Re))}else z.isSubjectReference(Je)?T.frame(Qf(Ls({},C),{embedded:!0}),[Je["@id"]],Ye,Ze,We):ee(Ye[0],Je)&&M(Ze,We,se.clone(Je))}for(const We of Object.keys(re).sort()){if("@type"===We){if(!F.isObject(re[We][0])||!("@default"in re[We][0]))continue}else if(Y(We))continue;const Je=re[We][0]||{};if(!S(Je,$,"omitDefault")&&!(We in Ze)){let Ve="@null";"@default"in Je&&(Ve=se.clone(Je["@default"])),F.isArray(Ve)||(Ve=[Ve]),Ze[We]=[{"@preserve":Ve}]}}for(const We of Object.keys(re["@reverse"]||{}).sort()){const Je=re["@reverse"][We];for(const Ye of Object.keys(C.subjects))se.getValues(C.subjects[Ye],We).some(Le=>Le["@id"]===De)&&(Ze["@reverse"]=Ze["@reverse"]||{},se.addValue(Ze["@reverse"],We,[],{propertyIsArray:!0}),T.frame(Qf(Ls({},C),{embedded:!0}),[Ye],Je,Ze["@reverse"][We],G))}M(de,G,Ze),C.subjectStack.pop()}}},T.cleanupNull=(C,U)=>{if(F.isArray(C))return C.map(de=>T.cleanupNull(de,U)).filter(de=>de);if("@null"===C)return null;if(F.isObject(C)){if("@id"in C){const re=C["@id"];if(U.link.hasOwnProperty(re)){const de=U.link[re].indexOf(C);if(-1!==de)return U.link[re][de];U.link[re].push(C)}else U.link[re]=[C]}for(const re in C)C[re]=T.cleanupNull(C[re],U)}return C}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32}],24:[function(Q,xe,me){"use strict";const Y=Q("./JsonLdError"),z=Q("./graphTypes"),F=Q("./types"),se=Q("./util"),{RDF_LIST:K,RDF_FIRST:E,RDF_REST:A,RDF_NIL:O,RDF_TYPE:T,RDF_JSON_LITERAL:v,XSD_BOOLEAN:y,XSD_DOUBLE:S,XSD_INTEGER:D,XSD_STRING:B}=Q("./constants"),I=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,q={};function Z(M,N,ee){if(M.termType.endsWith("Node"))return{"@id":M.value};const C={"@value":M.value};if(M.language)C["@language"]=M.language;else{let U=M.datatype.value;if(U||(U=B),U===v){U="@json";try{C["@value"]=JSON.parse(C["@value"])}catch(re){throw new Y("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:C["@value"],cause:re})}}if(N){if(U===y)"true"===C["@value"]?C["@value"]=!0:"false"===C["@value"]&&(C["@value"]=!1);else if(F.isNumeric(C["@value"]))if(U===D){const re=parseInt(C["@value"],10);re.toFixed(0)===C["@value"]&&(C["@value"]=re)}else U===S&&(C["@value"]=parseFloat(C["@value"]));[y,D,S,B].includes(U)||(C["@type"]=U)}else if("i18n-datatype"===ee&&U.startsWith("https://www.w3.org/ns/i18n#")){const[,re,de]=U.split(/[#_]/);re.length>0&&(C["@language"]=re,re.match(I)||console.warn(`@language must be valid BCP47: ${re}`)),C["@direction"]=de}else U!==B&&(C["@type"]=U)}return C}xe.exports=q,q.fromRDF=function(){var M=gt(function*(N,{useRdfType:ee=!1,useNativeTypes:C=!1,rdfDirection:U=null}){const re={},de={"@default":re},G={};for(const ue of N){const X="DefaultGraph"===ue.graph.termType?"@default":ue.graph.value;X in de||(de[X]={}),"@default"!==X&&!(X in re)&&(re[X]={"@id":X});const ge=de[X],De=ue.subject.value,je=ue.predicate.value,Ze=ue.object;De in ge||(ge[De]={"@id":De});const We=ge[De],Je=Ze.termType.endsWith("Node");if(Je&&!(Ze.value in ge)&&(ge[Ze.value]={"@id":Ze.value}),je===T&&!ee&&Je){se.addValue(We,"@type",Ze.value,{propertyIsArray:!0});continue}const Ye=Z(Ze,C,U);if(se.addValue(We,je,Ye,{propertyIsArray:!0}),Je)if(Ze.value===O){const Ve=ge[Ze.value];"usages"in Ve||(Ve.usages=[]),Ve.usages.push({node:We,property:je,value:Ye})}else G[Ze.value]=!(Ze.value in G)&&{node:We,property:je,value:Ye}}for(const ue in de){const X=de[ue];if(!(O in X))continue;const ge=X[O];if(ge.usages){for(let De of ge.usages){let je=De.node,Ze=De.property,We=De.value;const Je=[],Ye=[];let Ve=Object.keys(je).length;for(;Ze===A&&F.isObject(G[je["@id"]])&&F.isArray(je[E])&&1===je[E].length&&F.isArray(je[A])&&1===je[A].length&&(3===Ve||4===Ve&&F.isArray(je["@type"])&&1===je["@type"].length&&je["@type"][0]===K)&&(Je.push(je[E][0]),Ye.push(je["@id"]),De=G[je["@id"]],je=De.node,Ze=De.property,We=De.value,Ve=Object.keys(je).length,z.isBlankNode(je)););delete We["@id"],We["@list"]=Je.reverse();for(const Le of Ye)delete X[Le]}delete ge.usages}}const $=[],pe=Object.keys(re).sort();for(const ue of pe){const X=re[ue];if(ue in de){const ge=X["@graph"]=[],De=de[ue],je=Object.keys(De).sort();for(const Ze of je){const We=De[Ze];z.isSubjectReference(We)||ge.push(We)}}z.isSubjectReference(X)||$.push(X)}return $});return function(N,ee){return M.apply(this,arguments)}}()},{"./JsonLdError":12,"./constants":18,"./graphTypes":25,"./types":30,"./util":32}],25:[function(Q,xe,me){"use strict";const Y=Q("./types"),z={};xe.exports=z,z.isSubject=F=>!(!Y.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),z.isSubjectReference=F=>Y.isObject(F)&&1===Object.keys(F).length&&"@id"in F,z.isValue=F=>Y.isObject(F)&&"@value"in F,z.isList=F=>Y.isObject(F)&&"@list"in F,z.isGraph=F=>Y.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(se=>"@id"!==se&&"@index"!==se).length,z.isSimpleGraph=F=>z.isGraph(F)&&!("@id"in F),z.isBlankNode=F=>!!Y.isObject(F)&&("@id"in F?0===F["@id"].indexOf("_:"):0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F))},{"./types":30}],26:[function(Q,xe,me){const Y=Q("rdf-canonize"),z=Q("./platform"),F=Q("./util"),se=Q("./ContextResolver"),K=F.IdentifierIssuer,E=Q("./JsonLdError"),A=Q("lru-cache"),O=Q("./NQuads"),{expand:T}=Q("./expand"),{flatten:v}=Q("./flatten"),{fromRDF:y}=Q("./fromRdf"),{toRDF:S}=Q("./toRdf"),{frameMergedOrDefault:D,cleanupNull:B}=Q("./frame"),{isArray:I,isObject:q,isString:Z}=Q("./types"),{isSubjectReference:M}=Q("./graphTypes"),{expandIri:N,getInitialContext:ee,process:C,processingMode:U}=Q("./context"),{compact:re,compactIri:de}=Q("./compact"),{createNodeMap:G,createMergedNodeMap:$,mergeNodeMaps:pe}=Q("./nodeMap"),ue=function(ge){const De={},Ze=new A({max:100});function We(Je,Le){var Se=Le,{documentLoader:Ye=ge.documentLoader}=Se,Ve=u9(Se,["documentLoader"]);return Object.assign({},{documentLoader:Ye},Ve,Je)}return ge.compact=function(){var Je=gt(function*(Ye,Ve,Le){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===Ve)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===Ye)return null;let Se;(Le=We(Le,{base:Z(Ye)?Ye:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new K("_:b"),contextResolver:new se({sharedCache:Ze})})).link&&(Le.skipExpansion=!0),Le.compactToRelative||delete Le.base,Se=Le.skipExpansion?Ye:yield ge.expand(Ye,Le);const Re=yield ge.processContext(ee(Le),Ve,Le);let He=yield re({activeCtx:Re,element:Se,options:Le,compactionMap:Le.compactionMap});Le.compactArrays&&!Le.graph&&I(He)?1===He.length?He=He[0]:0===He.length&&(He={}):Le.graph&&q(He)&&(He=[He]),q(Ve)&&"@context"in Ve&&(Ve=Ve["@context"]),Ve=F.clone(Ve),I(Ve)||(Ve=[Ve]);const Xe=Ve;Ve=[];for(let W=0;W<Xe.length;++W)(!q(Xe[W])||Object.keys(Xe[W]).length>0)&&Ve.push(Xe[W]);const ze=Ve.length>0;if(1===Ve.length&&(Ve=Ve[0]),I(He)){const W=de({activeCtx:Re,iri:"@graph",relativeTo:{vocab:!0}}),J=He;He={},ze&&(He["@context"]=Ve),He[W]=J}else if(q(He)&&ze){const W=He;He={"@context":Ve};for(const J in W)He[J]=W[J]}return He});return function(Ye,Ve,Le){return Je.apply(this,arguments)}}(),ge.expand=function(){var Je=gt(function*(Ye,Ve){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(Ve=We(Ve,{keepFreeFloatingNodes:!1,contextResolver:new se({sharedCache:Ze})})).expansionMap&&(Ve.expansionMap=void 0);const Le={},Se=[];if("expandContext"in Ve){const ze=F.clone(Ve.expandContext);Le.expandContext=q(ze)&&"@context"in ze?ze:{"@context":ze},Se.push(Le.expandContext)}let Re;if(Z(Ye)){const ze=yield ge.get(Ye,Ve);Re=ze.documentUrl,Le.input=ze.document,ze.contextUrl&&(Le.remoteContext={"@context":ze.contextUrl},Se.push(Le.remoteContext))}else Le.input=F.clone(Ye);"base"in Ve||(Ve.base=Re||"");let He=ee(Ve);for(const ze of Se)He=yield C({activeCtx:He,localCtx:ze,options:Ve});let Xe=yield T({activeCtx:He,element:Le.input,options:Ve,expansionMap:Ve.expansionMap});return q(Xe)&&"@graph"in Xe&&1===Object.keys(Xe).length?Xe=Xe["@graph"]:null===Xe&&(Xe=[]),I(Xe)||(Xe=[Xe]),Xe});return function(Ye,Ve){return Je.apply(this,arguments)}}(),ge.flatten=function(){var Je=gt(function*(Ye,Ve,Le){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");Ve="function"==typeof Ve?null:Ve||null,Le=We(Le,{base:Z(Ye)?Ye:"",contextResolver:new se({sharedCache:Ze})});const Se=yield ge.expand(Ye,Le),Re=v(Se);return null===Ve?Re:(Le.graph=!0,Le.skipExpansion=!0,yield ge.compact(Re,Ve,Le))});return function(Ye,Ve,Le){return Je.apply(this,arguments)}}(),ge.frame=function(){var Je=gt(function*(Ye,Ve,Le){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Le=We(Le,{base:Z(Ye)?Ye:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new se({sharedCache:Ze})}),Z(Ve)){const ce=yield ge.get(Ve,Le);if(Ve=ce.document,ce.contextUrl){let ke=Ve["@context"];ke?I(ke)?ke.push(ce.contextUrl):ke=[ke,ce.contextUrl]:ke=ce.contextUrl,Ve["@context"]=ke}}const Se=Ve&&Ve["@context"]||{},Re=yield ge.processContext(ee(Le),Se,Le);Le.hasOwnProperty("omitGraph")||(Le.omitGraph=U(Re,1.1)),Le.hasOwnProperty("pruneBlankNodeIdentifiers")||(Le.pruneBlankNodeIdentifiers=U(Re,1.1));const He=yield ge.expand(Ye,Le),Xe=Ls({},Le);Xe.isFrame=!0,Xe.keepFreeFloatingNodes=!0;const ze=yield ge.expand(Ve,Xe),W=Object.keys(Ve).map(ce=>N(Re,ce,{vocab:!0}));Xe.merged=!W.includes("@graph"),Xe.is11=U(Re,1.1);const J=D(He,ze,Xe);Xe.graph=!Le.omitGraph,Xe.skipExpansion=!0,Xe.link={},Xe.framing=!0;let we=yield ge.compact(J,Se,Xe);return Xe.link={},we=B(we,Xe),we});return function(Ye,Ve,Le){return Je.apply(this,arguments)}}(),ge.link=function(){var Je=gt(function*(Ye,Ve,Le){const Se={};return Ve&&(Se["@context"]=Ve),Se["@embed"]="@link",ge.frame(Ye,Se,Le)});return function(Ye,Ve,Le){return Je.apply(this,arguments)}}(),ge.normalize=ge.canonize=function(){var Je=gt(function*(Ye,Ve){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(Ve=We(Ve,{base:Z(Ye)?Ye:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new se({sharedCache:Ze})}))){if("application/n-quads"!==Ve.inputFormat&&"application/nquads"!==Ve.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const Re=O.parse(Ye);return Y.canonize(Re,Ve)}const Le=Ls({},Ve);delete Le.format,Le.produceGeneralizedRdf=!1;const Se=yield ge.toRDF(Ye,Le);return Y.canonize(Se,Ve)});return function(Ye,Ve){return Je.apply(this,arguments)}}(),ge.fromRDF=function(){var Je=gt(function*(Ye,Ve){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Ve=We(Ve,{format:Z(Ye)?"application/n-quads":void 0});const{format:Le}=Ve;let{rdfParser:Se}=Ve;if(Le){if(Se=Se||De[Le],!Se)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:Le})}else Se=()=>Ye;const Re=yield Se(Ye);return y(Re,Ve)});return function(Ye,Ve){return Je.apply(this,arguments)}}(),ge.toRDF=function(){var Je=gt(function*(Ye,Ve){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Le;Le=(Ve=We(Ve,{base:Z(Ye)?Ye:"",skipExpansion:!1,contextResolver:new se({sharedCache:Ze})})).skipExpansion?Ye:yield ge.expand(Ye,Ve);const Se=S(Le,Ve);if(Ve.format){if("application/n-quads"===Ve.format||"application/nquads"===Ve.format)return O.serialize(Se);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:Ve.format})}return Se});return function(Ye,Ve){return Je.apply(this,arguments)}}(),ge.createNodeMap=function(){var Je=gt(function*(Ye,Ve){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Ve=We(Ve,{base:Z(Ye)?Ye:"",contextResolver:new se({sharedCache:Ze})});const Le=yield ge.expand(Ye,Ve);return $(Le,Ve)});return function(Ye,Ve){return Je.apply(this,arguments)}}(),ge.merge=function(){var Je=gt(function*(Ye,Ve,Le){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!I(Ye))throw new TypeError('Could not merge, "docs" must be an array.');Ve="function"==typeof Ve?null:Ve||null,Le=We(Le,{contextResolver:new se({sharedCache:Ze})});const Se=yield Promise.all(Ye.map(ce=>{const ke=Ls({},Le);return ge.expand(ce,ke)}));let Re=!0;"mergeNodes"in Le&&(Re=Le.mergeNodes);const He=Le.issuer||new K("_:b"),Xe={"@default":{}};for(let ce=0;ce<Se.length;++ce){const ke=F.relabelBlankNodes(Se[ce],{issuer:new K("_:b"+ce+"-")}),At=Re||0===ce?Xe:{"@default":{}};if(G(ke,At,"@default",He),At!==Xe)for(const pt in At){const ye=At[pt];if(!(pt in Xe)){Xe[pt]=ye;continue}const j=Xe[pt];for(const R in ye)R in j||(j[R]=ye[R])}}const ze=pe(Xe),W=[],J=Object.keys(ze).sort();for(let ce=0;ce<J.length;++ce){const ke=ze[J[ce]];M(ke)||W.push(ke)}return null===Ve?W:(Le.graph=!0,Le.skipExpansion=!0,yield ge.compact(W,Ve,Le))});return function(Ye,Ve,Le){return Je.apply(this,arguments)}}(),Object.defineProperty(ge,"documentLoader",{get:()=>ge._documentLoader,set:Je=>ge._documentLoader=Je}),ge.documentLoader=function(){var Je=gt(function*(Ye){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:Ye})});return function(Ye){return Je.apply(this,arguments)}}(),ge.get=function(){var Je=gt(function*(Ye,Ve){let Le;Le="function"==typeof Ve.documentLoader?Ve.documentLoader:ge.documentLoader;const Se=yield Le(Ye);try{if(!Se.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");Z(Se.document)&&(Se.document=JSON.parse(Se.document))}catch(Re){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Re,remoteDoc:Se})}return Se});return function(Ye,Ve){return Je.apply(this,arguments)}}(),ge.processContext=function(){var Je=gt(function*(Ye,Ve,Le){return Le=We(Le,{base:"",contextResolver:new se({sharedCache:Ze})}),null===Ve?ee(Le):(Ve=F.clone(Ve),q(Ve)&&"@context"in Ve||(Ve={"@context":Ve}),C({activeCtx:Ye,localCtx:Ve,options:Le}))});return function(Ye,Ve,Le){return Je.apply(this,arguments)}}(),ge.getContextValue=Q("./context").getContextValue,ge.documentLoaders={},ge.useDocumentLoader=function(Je){if(!(Je in ge.documentLoaders))throw new E('Unknown document loader type: "'+Je+'"',"jsonld.UnknownDocumentLoader",{type:Je});ge.documentLoader=ge.documentLoaders[Je].apply(ge,Array.prototype.slice.call(arguments,1))},ge.registerRDFParser=function(Je,Ye){De[Je]=Ye},ge.unregisterRDFParser=function(Je){delete De[Je]},ge.registerRDFParser("application/n-quads",O.parse),ge.registerRDFParser("application/nquads",O.parse),ge.url=Q("./url"),ge.util=F,Object.assign(ge,F),ge.promises=ge,ge.RequestQueue=Q("./RequestQueue"),ge.JsonLdProcessor=Q("./JsonLdProcessor")(ge),z.setupGlobals(ge),z.setupDocumentLoaders(ge),ge},X=function(){return ue(function(){return X()})};ue(X),xe.exports=X},{"./ContextResolver":11,"./JsonLdError":12,"./JsonLdProcessor":13,"./NQuads":14,"./RequestQueue":15,"./compact":17,"./context":19,"./expand":21,"./flatten":22,"./frame":23,"./fromRdf":24,"./graphTypes":25,"./nodeMap":27,"./platform":28,"./toRdf":29,"./types":30,"./url":31,"./util":32,"lru-cache":33,"rdf-canonize":46}],27:[function(Q,xe,me){"use strict";const{isKeyword:Y}=Q("./context"),z=Q("./graphTypes"),F=Q("./types"),se=Q("./util"),K=Q("./JsonLdError"),E={};xe.exports=E,E.createMergedNodeMap=(A,O)=>{const T=(O=O||{}).issuer||new se.IdentifierIssuer("_:b"),v={"@default":{}};return E.createNodeMap(A,v,"@default",T),E.mergeNodeMaps(v)},E.createNodeMap=(A,O,T,v,y,S)=>{if(F.isArray(A)){for(const q of A)E.createNodeMap(q,O,T,v,void 0,S);return}if(!F.isObject(A))return void(S&&S.push(A));if(z.isValue(A)){if("@type"in A){let q=A["@type"];0===q.indexOf("_:")&&(A["@type"]=q=v.getId(q))}return void(S&&S.push(A))}if(S&&z.isList(A)){const q=[];return E.createNodeMap(A["@list"],O,T,v,y,q),void S.push({"@list":q})}if("@type"in A){const q=A["@type"];for(const Z of q)0===Z.indexOf("_:")&&v.getId(Z)}F.isUndefined(y)&&(y=z.isBlankNode(A)?v.getId(A["@id"]):A["@id"]),S&&S.push({"@id":y});const D=O[T],B=D[y]=D[y]||{};B["@id"]=y;const I=Object.keys(A).sort();for(let q of I){if("@id"===q)continue;if("@reverse"===q){const M={"@id":y},N=A["@reverse"];for(const ee in N){const C=N[ee];for(const U of C){let re=U["@id"];z.isBlankNode(U)&&(re=v.getId(re)),E.createNodeMap(U,O,T,v,re),se.addValue(D[re],ee,M,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===q){y in O||(O[y]={}),E.createNodeMap(A[q],O,y,v);continue}if("@included"===q){E.createNodeMap(A[q],O,T,v);continue}if("@type"!==q&&Y(q)){if("@index"===q&&q in B&&(A[q]!==B[q]||A[q]["@id"]!==B[q]["@id"]))throw new K("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:B});B[q]=A[q];continue}const Z=A[q];if(0===q.indexOf("_:")&&(q=v.getId(q)),0!==Z.length)for(let M of Z)if("@type"===q&&(M=0===M.indexOf("_:")?v.getId(M):M),z.isSubject(M)||z.isSubjectReference(M)){if("@id"in M&&!M["@id"])continue;const N=z.isBlankNode(M)?v.getId(M["@id"]):M["@id"];se.addValue(B,q,{"@id":N},{propertyIsArray:!0,allowDuplicate:!1}),E.createNodeMap(M,O,T,v,N)}else if(z.isValue(M))se.addValue(B,q,M,{propertyIsArray:!0,allowDuplicate:!1});else if(z.isList(M)){const N=[];E.createNodeMap(M["@list"],O,T,v,y,N),M={"@list":N},se.addValue(B,q,M,{propertyIsArray:!0,allowDuplicate:!1})}else E.createNodeMap(M,O,T,v,y),se.addValue(B,q,M,{propertyIsArray:!0,allowDuplicate:!1});else se.addValue(B,q,[],{propertyIsArray:!0})}},E.mergeNodeMapGraphs=A=>{const O={};for(const T of Object.keys(A).sort())for(const v of Object.keys(A[T]).sort()){const y=A[T][v];v in O||(O[v]={"@id":v});const S=O[v];for(const D of Object.keys(y).sort())if(Y(D)&&"@type"!==D)S[D]=se.clone(y[D]);else for(const B of y[D])se.addValue(S,D,se.clone(B),{propertyIsArray:!0,allowDuplicate:!1})}return O},E.mergeNodeMaps=A=>{const O=A["@default"],T=Object.keys(A).sort();for(const v of T){if("@default"===v)continue;const y=A[v];let S=O[v];S?"@graph"in S||(S["@graph"]=[]):O[v]=S={"@id":v,"@graph":[]};const D=S["@graph"];for(const B of Object.keys(y).sort()){const I=y[B];z.isSubjectReference(I)||D.push(I)}}return O}},{"./JsonLdError":12,"./context":19,"./graphTypes":25,"./types":30,"./util":32}],28:[function(Q,xe,me){"use strict";const Y=Q("./documentLoaders/xhr"),z={};xe.exports=z,z.setupDocumentLoaders=function(F){"undefined"!=typeof XMLHttpRequest&&(F.documentLoaders.xhr=Y,F.useDocumentLoader("xhr"))},z.setupGlobals=function(F){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:F.JsonLdProcessor})}},{"./documentLoaders/xhr":20}],29:[function(Q,xe,me){"use strict";const{createNodeMap:Y}=Q("./nodeMap"),{isKeyword:z}=Q("./context"),F=Q("./graphTypes"),se=Q("canonicalize"),K=Q("./types"),E=Q("./util"),{RDF_FIRST:A,RDF_REST:O,RDF_NIL:T,RDF_TYPE:v,RDF_JSON_LITERAL:y,RDF_LANGSTRING:S,XSD_BOOLEAN:D,XSD_DOUBLE:B,XSD_INTEGER:I,XSD_STRING:q}=Q("./constants"),{isAbsolute:Z}=Q("./url"),M={};function N(U,re,de,G,$){const pe=Object.keys(re).sort();for(const ue of pe){const X=re[ue],ge=Object.keys(X).sort();for(let De of ge){const je=X[De];if("@type"===De)De=v;else if(z(De))continue;for(const Ze of je){const We={termType:ue.startsWith("_:")?"BlankNode":"NamedNode",value:ue};if(!Z(ue))continue;const Je={termType:De.startsWith("_:")?"BlankNode":"NamedNode",value:De};if(!Z(De)||"BlankNode"===Je.termType&&!$.produceGeneralizedRdf)continue;const Ye=C(Ze,G,U,de,$.rdfDirection);Ye&&U.push({subject:We,predicate:Je,object:Ye,graph:de})}}}}function C(U,re,de,G,$){const pe={};if(F.isValue(U)){pe.termType="Literal",pe.value=void 0,pe.datatype={termType:"NamedNode"};let ue=U["@value"];const X=U["@type"]||null;"@json"===X?(pe.value=se(ue),pe.datatype.value=y):K.isBoolean(ue)?(pe.value=ue.toString(),pe.datatype.value=X||D):K.isDouble(ue)||X===B?(K.isDouble(ue)||(ue=parseFloat(ue)),pe.value=ue.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),pe.datatype.value=X||B):K.isNumber(ue)?(pe.value=ue.toFixed(0),pe.datatype.value=X||I):"i18n-datatype"===$&&"@direction"in U?(pe.datatype.value="https://www.w3.org/ns/i18n#"+(U["@language"]||"")+`_${U["@direction"]}`,pe.value=ue):"@language"in U?(pe.value=ue,pe.datatype.value=X||S,pe.language=U["@language"]):(pe.value=ue,pe.datatype.value=X||q)}else if(F.isList(U)){const ue=function(U,re,de,G,$){const pe={termType:"NamedNode",value:A},ue={termType:"NamedNode",value:O},X={termType:"NamedNode",value:T},ge=U.pop(),De=ge?{termType:"BlankNode",value:re.getId()}:X;let je=De;for(const Ze of U){const We=C(Ze,re,de,G,$),Je={termType:"BlankNode",value:re.getId()};de.push({subject:je,predicate:pe,object:We,graph:G}),de.push({subject:je,predicate:ue,object:Je,graph:G}),je=Je}if(ge){const Ze=C(ge,re,de,G,$);de.push({subject:je,predicate:pe,object:Ze,graph:G}),de.push({subject:je,predicate:ue,object:X,graph:G})}return De}(U["@list"],re,de,G,$);pe.termType=ue.termType,pe.value=ue.value}else{const ue=K.isObject(U)?U["@id"]:U;pe.termType=ue.startsWith("_:")?"BlankNode":"NamedNode",pe.value=ue}return"NamedNode"!==pe.termType||Z(pe.value)?pe:null}xe.exports=M,M.toRDF=(U,re)=>{const de=new E.IdentifierIssuer("_:b"),G={"@default":{}};Y(U,G,"@default",de);const $=[],pe=Object.keys(G).sort();for(const ue of pe){let X;if("@default"===ue)X={termType:"DefaultGraph",value:""};else{if(!Z(ue))continue;X=ue.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},X.value=ue}N($,G[ue],X,de,re)}return $}},{"./constants":18,"./context":19,"./graphTypes":25,"./nodeMap":27,"./types":30,"./url":31,"./util":32,canonicalize:7}],30:[function(Q,xe,me){"use strict";const Y={};xe.exports=Y,Y.isArray=Array.isArray,Y.isBoolean=z=>"boolean"==typeof z||"[object Boolean]"===Object.prototype.toString.call(z),Y.isDouble=z=>Y.isNumber(z)&&(-1!==String(z).indexOf(".")||Math.abs(z)>=1e21),Y.isEmptyObject=z=>Y.isObject(z)&&0===Object.keys(z).length,Y.isNumber=z=>"number"==typeof z||"[object Number]"===Object.prototype.toString.call(z),Y.isNumeric=z=>!isNaN(parseFloat(z))&&isFinite(z),Y.isObject=z=>"[object Object]"===Object.prototype.toString.call(z),Y.isString=z=>"string"==typeof z||"[object String]"===Object.prototype.toString.call(z),Y.isUndefined=z=>void 0===z},{}],31:[function(Q,xe,me){"use strict";const Y=Q("./types"),z={};xe.exports=z,z.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},z.parse=(se,K)=>{const E={},A=z.parsers[K||"full"],O=A.regex.exec(se);let T=A.keys.length;for(;T--;)E[A.keys[T]]=void 0===O[T]?null:O[T];return("https"===E.scheme&&"443"===E.port||"http"===E.scheme&&"80"===E.port)&&(E.href=E.href.replace(":"+E.port,""),E.authority=E.authority.replace(":"+E.port,""),E.port=null),E.normalizedPath=z.removeDotSegments(E.path),E},z.prependBase=(se,K)=>{if(null===se||z.isAbsolute(K))return K;(!se||Y.isString(se))&&(se=z.parse(se||""));const E=z.parse(K),A={protocol:se.protocol||""};if(null!==E.authority)A.authority=E.authority,A.path=E.path,A.query=E.query;else if(A.authority=se.authority,""===E.path)A.path=se.path,A.query=null!==E.query?E.query:se.query;else{if(0===E.path.indexOf("/"))A.path=E.path;else{let T=se.path;T=T.substr(0,T.lastIndexOf("/")+1),(T.length>0||se.authority)&&"/"!==T.substr(-1)&&(T+="/"),T+=E.path,A.path=T}A.query=E.query}""!==E.path&&(A.path=z.removeDotSegments(A.path));let O=A.protocol;return null!==A.authority&&(O+="//"+A.authority),O+=A.path,null!==A.query&&(O+="?"+A.query),null!==E.fragment&&(O+="#"+E.fragment),""===O&&(O="./"),O},z.removeBase=(se,K)=>{if(null===se)return K;(!se||Y.isString(se))&&(se=z.parse(se||""));let E="";if(""!==se.href?E+=(se.protocol||"")+"//"+(se.authority||""):K.indexOf("//")&&(E+="//"),0!==K.indexOf(E))return K;const A=z.parse(K.substr(E.length)),O=se.normalizedPath.split("/"),T=A.normalizedPath.split("/"),v=A.fragment||A.query?0:1;for(;O.length>0&&T.length>v&&O[0]===T[0];)O.shift(),T.shift();let y="";if(O.length>0){O.pop();for(let S=0;S<O.length;++S)y+="../"}return y+=T.join("/"),null!==A.query&&(y+="?"+A.query),null!==A.fragment&&(y+="#"+A.fragment),""===y&&(y="./"),y},z.removeDotSegments=se=>{if(0===se.length)return"";const K=se.split("/"),E=[];for(;K.length>0;){const A=K.shift(),O=0===K.length;"."!==A?".."!==A?E.push(A):(E.pop(),O&&E.push("")):O&&E.push("")}return"/"===se[0]&&E.length>0&&""!==E[0]&&E.unshift(""),1===E.length&&""===E[0]?"/":E.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;z.isAbsolute=se=>Y.isString(se)&&F.test(se),z.isRelative=se=>Y.isString(se)},{"./types":30}],32:[function(Q,xe,me){"use strict";const Y=Q("./graphTypes"),z=Q("./types"),F=Q("rdf-canonize").IdentifierIssuer,se=Q("./JsonLdError"),K=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,A=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,O_headers={accept:"application/ld+json, application/json"},T={};function v(y,S){if(z.isArray(S))for(let D=0;D<S.length;++D)S[D]=v(y,S[D]);else if(Y.isList(S))S["@list"]=v(y,S["@list"]);else if(z.isObject(S)){Y.isBlankNode(S)&&(S["@id"]=y.getId(S["@id"]));const D=Object.keys(S).sort();for(let B=0;B<D.length;++B){const I=D[B];"@id"!==I&&(S[I]=v(y,S[I]))}}return S}xe.exports=T,T.IdentifierIssuer=F,T.clone=function(y){if(y&&"object"==typeof y){let S;if(z.isArray(y)){S=[];for(let D=0;D<y.length;++D)S[D]=T.clone(y[D])}else if(y instanceof Map){S=new Map;for(const[D,B]of y)S.set(D,T.clone(B))}else if(y instanceof Set){S=new Set;for(const D of y)S.add(T.clone(D))}else if(z.isObject(y)){S={};for(const D in y)S[D]=T.clone(y[D])}else S=y.toString();return S}return y},T.asArray=function(y){return Array.isArray(y)?y:[y]},T.buildHeaders=(y={})=>{if(Object.keys(y).some(D=>"accept"===D.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+O_headers.accept+'" is supported.');return Object.assign({Accept:O_headers.accept},y)},T.parseLinkHeader=y=>{const S={},D=y.match(K);for(let B=0;B<D.length;++B){let I=D[B].match(E);if(!I)continue;const q={target:I[1]},Z=I[2];for(;I=A.exec(Z);)q[I[1]]=void 0===I[2]?I[3]:I[2];const M=q.rel||"";Array.isArray(S[M])?S[M].push(q):S[M]=S.hasOwnProperty(M)?[S[M],q]:q}return S},T.validateTypeValue=(y,S)=>{if(!(z.isString(y)||z.isArray(y)&&y.every(D=>z.isString(D)))){if(S&&z.isObject(y))switch(Object.keys(y).length){case 0:return;case 1:if("@default"in y&&T.asArray(y["@default"]).every(D=>z.isString(D)))return}throw new se('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:y})}},T.hasProperty=(y,S)=>{if(y.hasOwnProperty(S)){const D=y[S];return!z.isArray(D)||D.length>0}return!1},T.hasValue=(y,S,D)=>{if(T.hasProperty(y,S)){let B=y[S];const I=Y.isList(B);if(z.isArray(B)||I){I&&(B=B["@list"]);for(let q=0;q<B.length;++q)if(T.compareValues(D,B[q]))return!0}else if(!z.isArray(D))return T.compareValues(D,B)}return!1},T.addValue=(y,S,D,B)=>{if("propertyIsArray"in(B=B||{})||(B.propertyIsArray=!1),"valueIsArray"in B||(B.valueIsArray=!1),"allowDuplicate"in B||(B.allowDuplicate=!0),"prependValue"in B||(B.prependValue=!1),B.valueIsArray)y[S]=D;else if(z.isArray(D)){0===D.length&&B.propertyIsArray&&!y.hasOwnProperty(S)&&(y[S]=[]),B.prependValue&&(D=D.concat(y[S]),y[S]=[]);for(let I=0;I<D.length;++I)T.addValue(y,S,D[I],B)}else if(y.hasOwnProperty(S)){const I=!B.allowDuplicate&&T.hasValue(y,S,D);!z.isArray(y[S])&&(!I||B.propertyIsArray)&&(y[S]=[y[S]]),I||(B.prependValue?y[S].unshift(D):y[S].push(D))}else y[S]=B.propertyIsArray?[D]:D},T.getValues=(y,S)=>[].concat(y[S]||[]),T.removeProperty=(y,S)=>{delete y[S]},T.removeValue=(y,S,D,B)=>{"propertyIsArray"in(B=B||{})||(B.propertyIsArray=!1);const I=T.getValues(y,S).filter(q=>!T.compareValues(q,D));0===I.length?T.removeProperty(y,S):y[S]=1!==I.length||B.propertyIsArray?I:I[0]},T.relabelBlankNodes=(y,S)=>v((S=S||{}).issuer||new F("_:b"),y),T.compareValues=(y,S)=>!!(y===S||Y.isValue(y)&&Y.isValue(S)&&y["@value"]===S["@value"]&&y["@type"]===S["@type"]&&y["@language"]===S["@language"]&&y["@index"]===S["@index"])||!!(z.isObject(y)&&"@id"in y&&z.isObject(S)&&"@id"in S)&&y["@id"]===S["@id"],T.compareShortestLeast=(y,S)=>y.length<S.length?-1:S.length<y.length?1:y===S?0:y<S?-1:1},{"./JsonLdError":12,"./graphTypes":25,"./types":30,"rdf-canonize":46}],33:[function(Q,xe,me){"use strict";const Y=Q("yallist"),z=Symbol("max"),F=Symbol("length"),se=Symbol("lengthCalculator"),K=Symbol("allowStale"),E=Symbol("maxAge"),A=Symbol("dispose"),O=Symbol("noDisposeOnSet"),T=Symbol("lruList"),v=Symbol("cache"),y=Symbol("updateAgeOnGet"),S=()=>1;const B=(ee,C,U)=>{const re=ee[v].get(C);if(re){const de=re.value;if(I(ee,de)){if(Z(ee,re),!ee[K])return}else U&&(ee[y]&&(re.value.now=Date.now()),ee[T].unshiftNode(re));return de.value}},I=(ee,C)=>{if(!C||!C.maxAge&&!ee[E])return!1;const U=Date.now()-C.now;return C.maxAge?U>C.maxAge:ee[E]&&U>ee[E]},q=ee=>{if(ee[F]>ee[z])for(let C=ee[T].tail;ee[F]>ee[z]&&null!==C;){const U=C.prev;Z(ee,C),C=U}},Z=(ee,C)=>{if(C){const U=C.value;ee[A]&&ee[A](U.key,U.value),ee[F]-=U.length,ee[v].delete(U.key),ee[T].removeNode(C)}};class M{constructor(C,U,re,de,G){this.key=C,this.value=U,this.length=re,this.now=de,this.maxAge=G||0}}const N=(ee,C,U,re)=>{let de=U.value;I(ee,de)&&(Z(ee,U),ee[K]||(de=void 0)),de&&C.call(re,de.value,de.key,ee)};xe.exports=class{constructor(C){if("number"==typeof C&&(C={max:C}),C||(C={}),C.max&&("number"!=typeof C.max||C.max<0))throw new TypeError("max must be a non-negative number");this[z]=C.max||1/0;const re=C.length||S;if(this[se]="function"!=typeof re?S:re,this[K]=C.stale||!1,C.maxAge&&"number"!=typeof C.maxAge)throw new TypeError("maxAge must be a number");this[E]=C.maxAge||0,this[A]=C.dispose,this[O]=C.noDisposeOnSet||!1,this[y]=C.updateAgeOnGet||!1,this.reset()}set max(C){if("number"!=typeof C||C<0)throw new TypeError("max must be a non-negative number");this[z]=C||1/0,q(this)}get max(){return this[z]}set allowStale(C){this[K]=!!C}get allowStale(){return this[K]}set maxAge(C){if("number"!=typeof C)throw new TypeError("maxAge must be a non-negative number");this[E]=C,q(this)}get maxAge(){return this[E]}set lengthCalculator(C){"function"!=typeof C&&(C=S),C!==this[se]&&(this[se]=C,this[F]=0,this[T].forEach(U=>{U.length=this[se](U.value,U.key),this[F]+=U.length})),q(this)}get lengthCalculator(){return this[se]}get length(){return this[F]}get itemCount(){return this[T].length}rforEach(C,U){U=U||this;for(let re=this[T].tail;null!==re;){const de=re.prev;N(this,C,re,U),re=de}}forEach(C,U){U=U||this;for(let re=this[T].head;null!==re;){const de=re.next;N(this,C,re,U),re=de}}keys(){return this[T].toArray().map(C=>C.key)}values(){return this[T].toArray().map(C=>C.value)}reset(){this[A]&&this[T]&&this[T].length&&this[T].forEach(C=>this[A](C.key,C.value)),this[v]=new Map,this[T]=new Y,this[F]=0}dump(){return this[T].map(C=>!I(this,C)&&{k:C.key,v:C.value,e:C.now+(C.maxAge||0)}).toArray().filter(C=>C)}dumpLru(){return this[T]}set(C,U,re){if((re=re||this[E])&&"number"!=typeof re)throw new TypeError("maxAge must be a number");const de=re?Date.now():0,G=this[se](U,C);if(this[v].has(C)){if(G>this[z])return Z(this,this[v].get(C)),!1;const ue=this[v].get(C).value;return this[A]&&(this[O]||this[A](C,ue.value)),ue.now=de,ue.maxAge=re,ue.value=U,this[F]+=G-ue.length,ue.length=G,this.get(C),q(this),!0}const $=new M(C,U,G,de,re);return $.length>this[z]?(this[A]&&this[A](C,U),!1):(this[F]+=$.length,this[T].unshift($),this[v].set(C,this[T].head),q(this),!0)}has(C){if(!this[v].has(C))return!1;const U=this[v].get(C).value;return!I(this,U)}get(C){return B(this,C,!0)}peek(C){return B(this,C,!1)}pop(){const C=this[T].tail;return C?(Z(this,C),C.value):null}del(C){Z(this,this[v].get(C))}load(C){this.reset();const U=Date.now();for(let re=C.length-1;re>=0;re--){const de=C[re],G=de.e||0;if(0===G)this.set(de.k,de.v);else{const $=G-U;$>0&&this.set(de.k,de.v,$)}}}prune(){this[v].forEach((C,U)=>B(this,U,!1))}}},{yallist:92}],34:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;const Y="http://www.w3.org/1999/02/22-rdf-syntax-ns#",z="http://www.w3.org/2001/XMLSchema#",F="http://www.w3.org/2000/10/swap/";me.default={xsd:{decimal:`${z}decimal`,boolean:`${z}boolean`,double:`${z}double`,integer:`${z}integer`,string:`${z}string`},rdf:{type:`${Y}type`,nil:`${Y}nil`,first:`${Y}first`,rest:`${Y}rest`,langString:`${Y}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${F}reify#forSome`,forAll:`${F}reify#forAll`},log:{implies:`${F}log#implies`}}},{}],35:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.termFromId=function M(X,ge){if(ge=ge||v,!X)return ge.defaultGraph();switch(X[0]){case"?":return ge.variable(X.substr(1));case"_":return ge.blankNode(X.substr(2));case'"':if(ge===v)return new B(X);if('"'===X[X.length-1])return ge.literal(X.substr(1,X.length-2));const De=X.lastIndexOf('"',X.length-1);return ge.literal(X.substr(1,De-1),"@"===X[De+1]?X.substr(De+2):ge.namedNode(X.substr(De+3)));case"<":const je=T.exec(X);return ge.quad(M(U(je[1]),ge),M(U(je[2]),ge),M(U(je[3]),ge),je[4]&&M(U(je[4]),ge));default:return ge.namedNode(X)}},me.termToId=function N(X){if("string"==typeof X)return X;if(X instanceof S&&"Quad"!==X.termType)return X.id;if(!X)return E.id;switch(X.termType){case"NamedNode":return X.value;case"BlankNode":return`_:${X.value}`;case"Variable":return`?${X.value}`;case"DefaultGraph":return"";case"Literal":return`"${X.value}"${X.language?`@${X.language}`:X.datatype&&X.datatype.value!==K.string?`^^${X.datatype.value}`:""}`;case"Quad":return`<<${C(N(X.subject))} ${C(N(X.predicate))} ${C(N(X.object))}${(0,z.isDefaultGraph)(X.graph)?"":` ${N(X.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${X.termType}`)}},me.escapeQuotes=C,me.unescapeQuotes=U,me.Triple=me.Quad=me.DefaultGraph=me.Variable=me.BlankNode=me.Literal=me.NamedNode=me.Term=me.default=void 0;var X,Y=(X=Q("./IRIs"))&&X.__esModule?X:{default:X},z=Q("./N3Util");const{rdf:se,xsd:K}=Y.default;let E,A=0;const O=/^"(.*".*)(?="[^"]*$)/,T=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,v={namedNode:function(X){return new D(X)},blankNode:function(X){return new I(X||"n3-"+A++)},variable:function(X){return new q(X)},literal:function(X,ge){if("string"==typeof ge)return new B(`"${X}"@${ge.toLowerCase()}`);let De=ge?ge.value:"";return""===De&&("boolean"==typeof X?De=K.boolean:"number"==typeof X&&(Number.isFinite(X)?De=Number.isInteger(X)?K.integer:K.double:(De=K.double,Number.isNaN(X)||(X=X>0?"INF":"-INF")))),new B(""===De||De===K.string?`"${X}"`:`"${X}"^^${De}`)},defaultGraph:function(){return E},quad:ue,triple:ue};me.default=v;class S{constructor(ge){this.id=ge}get value(){return this.id}equals(ge){return ge instanceof S?this.id===ge.id:!!ge&&this.termType===ge.termType&&this.value===ge.value}toJSON(){return{termType:this.termType,value:this.value}}}me.Term=S;class D extends S{get termType(){return"NamedNode"}}me.NamedNode=D;class B extends S{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const ge=this.id;let De=ge.lastIndexOf('"')+1;return De<ge.length&&"@"===ge[De++]?ge.substr(De).toLowerCase():""}get datatype(){return new D(this.datatypeString)}get datatypeString(){const ge=this.id,De=ge.lastIndexOf('"')+1,je=De<ge.length?ge[De]:"";return"^"===je?ge.substr(De+2):"@"!==je?K.string:se.langString}equals(ge){return ge instanceof B?this.id===ge.id:!!ge&&!!ge.datatype&&this.termType===ge.termType&&this.value===ge.value&&this.language===ge.language&&this.datatype.value===ge.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}me.Literal=B;class I extends S{constructor(ge){super(`_:${ge}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}me.BlankNode=I;class q extends S{constructor(ge){super(`?${ge}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}me.Variable=q;class Z extends S{constructor(){return super(""),E||this}get termType(){return"DefaultGraph"}equals(ge){return this===ge||!!ge&&this.termType===ge.termType}}me.DefaultGraph=Z,E=new Z;class ee extends S{constructor(ge,De,je,Ze){super(""),this._subject=ge,this._predicate=De,this._object=je,this._graph=Ze||E}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(ge){return!!ge&&this._subject.equals(ge.subject)&&this._predicate.equals(ge.predicate)&&this._object.equals(ge.object)&&this._graph.equals(ge.graph)}}function C(X){return X.replace(O,(ge,De)=>`"${De.replace(/"/g,'""')}`)}function U(X){return X.replace(O,(ge,De)=>`"${De.replace(/""/g,'"')}`)}function ue(X,ge,De,je){return new ee(X,ge,De,je)}me.Triple=me.Quad=ee},{"./IRIs":34,"./N3Util":41}],36:[function(Q,xe,me){(function(Y){(function(){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var z=se(Q("./IRIs")),F=se(Q("queue-microtask"));function se(S){return S&&S.__esModule?S:{default:S}}const{xsd:K}=z.default,E=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,A={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},O=/[\x00-\x20<>\\"\{\}\|\^\`]/,T={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},v=/$0^/;me.default=class{constructor(D){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(D=D||{}).lineMode){this._n3Mode=!1;for(const B in this)!(B in T)&&this[B]instanceof RegExp&&(this[B]=v)}else this._n3Mode=!1!==D.n3;this._comments=!!D.comments,this._literalClosingPos=0}_tokenizeToEnd(D,B){let I=this._input;const q=this._comments;for(;;){let M,N;for(;M=this._newline.exec(I);)q&&(N=this._comment.exec(M[0]))&&D(null,{line:this._line,type:"comment",value:N[1],prefix:""}),I=I.substr(M[0].length,I.length),this._line++;if(!M&&(M=this._whitespace.exec(I))&&(I=I.substr(M[0].length,I.length)),this._endOfFile.test(I))return B&&(q&&(N=this._comment.exec(I))&&D(null,{line:this._line,type:"comment",value:N[1],prefix:""}),D(I=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=I;const ee=this._line,C=I[0];let U="",re="",de="",G=null,$=0,pe=!1;switch(C){case"^":if(I.length<3)break;if("^"!==I[1]){this._n3Mode&&($=1,U="^");break}if(this._previousMarker="^^",I=I.substr(2),"<"!==I[0]){pe=!0;break}case"<":if(G=this._unescapedIri.exec(I))U="IRI",re=G[1];else if(G=this._iri.exec(I)){if(re=this._unescape(G[1]),null===re||O.test(re))return Z(this);U="IRI"}else I.length>1&&"<"===I[1]?(U="<<",$=2):this._n3Mode&&I.length>1&&"="===I[1]&&(U="inverse",$=2,re=">");break;case">":I.length>1&&">"===I[1]&&(U=">>",$=2);break;case"_":((G=this._blank.exec(I))||B&&(G=this._blank.exec(`${I} `)))&&(U="blank",de="_",re=G[1]);break;case'"':if(G=this._simpleQuotedString.exec(I))re=G[1];else if(({value:re,matchLength:$}=this._parseLiteral(I)),null===re)return Z(this);(null!==G||0!==$)&&(U="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(G=this._simpleApostropheString.exec(I))re=G[1];else if(({value:re,matchLength:$}=this._parseLiteral(I)),null===re)return Z(this);(null!==G||0!==$)&&(U="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(G=this._variable.exec(I))&&(U="var",re=G[0]);break;case"@":"literal"===this._previousMarker&&(G=this._langcode.exec(I))?(U="langcode",re=G[1]):(G=this._keyword.exec(I))&&(U=G[0]);break;case".":if(1===I.length?B:I[1]<"0"||I[1]>"9"){U=".",$=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(G=this._number.exec(I)||B&&(G=this._number.exec(`${I} `)))&&(U="literal",re=G[0],de="string"==typeof G[1]?K.double:"string"==typeof G[2]?K.decimal:K.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(G=this._sparqlKeyword.exec(I))?U=G[0].toUpperCase():pe=!0;break;case"f":case"t":(G=this._boolean.exec(I))?(U="literal",re=G[0],de=K.boolean):pe=!0;break;case"a":(G=this._shortPredicates.exec(I))?(U="abbreviation",re="a"):pe=!0;break;case"=":this._n3Mode&&I.length>1&&(U="abbreviation",">"!==I[1]?($=1,re="="):($=2,re=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||($=1,U=C);break;default:pe=!0}if(pe&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(G=this._prefix.exec(I))?((G=this._prefixed.exec(I))||B&&(G=this._prefixed.exec(`${I} `)))&&(U="prefixed",de=G[1]||"",re=this._unescape(G[2])):(U="prefix",re=G[1]||"")),"^^"===this._previousMarker)switch(U){case"prefixed":U="type";break;case"IRI":U="typeIRI";break;default:U=""}if(!U)return B||!/^'''|^"""/.test(I)&&/\n|\r/.test(I)?Z(this):this._input=I;const ue={line:ee,type:U,value:re,prefix:de};D(null,ue),this.previousToken=ue,this._previousMarker=U,I=I.substr($||G[0].length,I.length)}function Z(M){D(M._syntaxError(/^\S*/.exec(I)[0]))}}_unescape(D){let B=!1;const I=D.replace(E,(q,Z,M,N)=>{if("string"==typeof Z)return String.fromCharCode(Number.parseInt(Z,16));if("string"==typeof M){let ee=Number.parseInt(M,16);return ee<=65535?String.fromCharCode(Number.parseInt(M,16)):String.fromCharCode(55296+((ee-=65536)>>10),56320+(1023&ee))}return N in A?A[N]:(B=!0,"")});return B?null:I}_parseLiteral(D){if(D.length>=3){const B=D.match(/^(?:"""|"|'''|'|)/)[0],I=B.length;let q=Math.max(this._literalClosingPos,I);for(;(q=D.indexOf(B,q))>0;){let Z=0;for(;"\\"===D[q-Z-1];)Z++;if(Z%2==0){const M=D.substring(I,q),N=M.split(/\r\n|\r|\n/).length-1,ee=q+I;if(1===I&&0!==N||3===I&&this._lineMode)break;return this._line+=N,{value:this._unescape(M),matchLength:ee}}q++}this._literalClosingPos=D.length-I+1}return{value:"",matchLength:0}}_syntaxError(D){this._input=null;const B=new Error(`Unexpected "${D}" on line ${this._line}.`);return B.context={token:void 0,line:this._line,previousToken:this.previousToken},B}_readStartingBom(D){return D.startsWith("\ufeff")?D.substr(1):D}tokenize(D,B){if(this._line=1,"string"==typeof D){if(this._input=this._readStartingBom(D),"function"!=typeof B){const I=[];let q;if(this._tokenizeToEnd((Z,M)=>Z?q=Z:I.push(M),!0),q)throw q;return I}(0,F.default)(()=>this._tokenizeToEnd(B,!0))}else this._pendingBuffer=null,"function"==typeof D.setEncoding&&D.setEncoding("utf8"),D.on("data",I=>{null!==this._input&&0!==I.length&&(this._pendingBuffer&&(I=Y.concat([this._pendingBuffer,I]),this._pendingBuffer=null),128&I[I.length-1]?this._pendingBuffer=I:(void 0===this._input?this._input=this._readStartingBom("string"==typeof I?I:I.toString()):this._input+=I,this._tokenizeToEnd(B,!1)))}),D.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(B,!0)}),D.on("error",B)}}}).call(this)}).call(this,Q("buffer").Buffer)},{"./IRIs":34,buffer:6,"queue-microtask":45}],37:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var Y=se(Q("./N3Lexer")),z=se(Q("./N3DataFactory")),F=se(Q("./IRIs"));function se(T){return T&&T.__esModule?T:{default:T}}let K=0;class E{constructor(v){this._contextStack=[],this._graph=null,this._setBase((v=v||{}).baseIRI),v.factory&&O(this,v.factory);const y="string"==typeof v.format?v.format.match(/\w*$/)[0].toLowerCase():"",S=/turtle/.test(y),D=/trig/.test(y),B=/triple/.test(y),I=/quad/.test(y),q=this._n3Mode=/n3/.test(y),Z=B||I;(this._supportsNamedGraphs=!(S||q))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(S||D||B||q),this._supportsRDFStar=""===y||/star|\*$/.test(y),Z&&(this._resolveRelativeIRI=M=>null),this._blankNodePrefix="string"!=typeof v.blankNodePrefix?"":v.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=v.lexer||new Y.default({lineMode:Z,n3:q}),this._explicitQuantifiers=!!v.explicitQuantifiers}static _resetBlankNodePrefix(){K=0}_setBase(v){if(v){const y=v.indexOf("#");y>=0&&(v=v.substr(0,y)),this._base=v,this._basePath=v.indexOf("/")<0?v:v.replace(/[^\/?]*(?:\?.*)?$/,""),v=v.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=v[0],this._baseScheme=v[1]}else this._base="",this._basePath=""}_saveContext(v,y,S,D,B){const I=this._n3Mode;this._contextStack.push({subject:S,predicate:D,object:B,graph:y,type:v,inverse:!!I&&this._inversePredicate,blankPrefix:I?this._prefixes._:"",quantified:I?this._quantified:null}),I&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const v=this._contextStack.pop(),y=this._n3Mode;this._subject=v.subject,this._predicate=v.predicate,this._object=v.object,this._graph=v.graph,y&&(this._inversePredicate=v.inverse,this._prefixes._=v.blankPrefix,this._quantified=v.quantified)}_readInTopContext(v){switch(v.type){case"eof":return null!==this._graph?this._error("Unclosed graph",v):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(v)}}_readEntity(v,y){let S;switch(v.type){case"IRI":case"typeIRI":const D=this._resolveIRI(v.value);if(null===D)return this._error("Invalid IRI",v);S=this._namedNode(D);break;case"type":case"prefixed":const B=this._prefixes[v.prefix];if(void 0===B)return this._error(`Undefined prefix "${v.prefix}:"`,v);S=this._namedNode(B+v.value);break;case"blank":S=this._blankNode(this._prefixes[v.prefix]+v.value);break;case"var":S=this._variable(v.value.substr(1));break;default:return this._error(`Expected entity but got ${v.type}`,v)}return!y&&this._n3Mode&&S.id in this._quantified&&(S=this._quantified[S.id]),S}_readSubject(v){switch(this._predicate=null,v.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",v);case"}":return this._readPunctuation(v);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',v);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',v);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",v);if(0===v.prefix.length)return this._literalValue=v.value,this._completeSubjectLiteral;this._subject=this._literal(v.value,this._namedNode(v.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",v);default:if(void 0===(this._subject=this._readEntity(v)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(v){const y=v.type;switch(y){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[v.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${y}`,v):(this._subject=null,"]"===y?this._readBlankNodeTail(v):this._readPunctuation(v));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",v);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",v);default:if(void 0===(this._predicate=this._readEntity(v)))return}return this._readObject}_readObject(v){switch(v.type){case"literal":if(0===v.prefix.length)return this._literalValue=v.value,this._readDataTypeOrLang;this._object=this._literal(v.value,this._namedNode(v.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",v);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",v);default:if(void 0===(this._object=this._readEntity(v)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(v){return"{"===v.type?this._readGraph(v):this._readPredicate(v)}_readGraph(v){return"{"!==v.type?this._error(`Expected graph but got ${v.type}`,v):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(v){return"]"===v.type?(this._subject=null,this._readBlankNodeTail(v)):(this._predicate=null,this._readPredicate(v))}_readBlankNodeTail(v){if("]"!==v.type)return this._readBlankNodePunctuation(v);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const y=null===this._predicate;return this._restoreContext(),null===this._object?y?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()}_readPredicateAfterBlank(v){switch(v.type){case".":case"}":return this._subject=null,this._readPunctuation(v);default:return this._readPredicate(v)}}_readListItem(v){let y=null,S=null,D=this._readListItem;const B=this._subject,I=this._contextStack,q=I[I.length-1];switch(v.type){case"[":this._saveContext("blank",this._graph,S=this._blankNode(),this.RDF_FIRST,this._subject=y=this._blankNode()),D=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,S=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==I.length&&"list"===I[I.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(D=this._readPredicate,this._subject===this.RDF_NIL)return D}else if(D=this._getContextEndReader(),this._object===this.RDF_NIL)return D;S=this.RDF_NIL;break;case"literal":0===v.prefix.length?(this._literalValue=v.value,D=this._readListItemDataTypeOrLang):(y=this._literal(v.value,this._namedNode(v.prefix)),D=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",v);default:if(void 0===(y=this._readEntity(v)))return}if(null===S&&(this._subject=S=this._blankNode()),null===B?null===q.predicate?q.subject=S:q.object=S:this._emit(B,this.RDF_REST,S,this._graph),null!==y){if(this._n3Mode&&("IRI"===v.type||"prefixed"===v.type))return this._saveContext("item",this._graph,S,this.RDF_FIRST,y),this._subject=y,this._predicate=null,this._getPathReader(this._readListItem);this._emit(S,this.RDF_FIRST,y,this._graph)}return D}_readDataTypeOrLang(v){return this._completeObjectLiteral(v,!1)}_readListItemDataTypeOrLang(v){return this._completeObjectLiteral(v,!0)}_completeLiteral(v){let y=this._literal(this._literalValue);switch(v.type){case"type":case"typeIRI":const S=this._readEntity(v);if(void 0===S)return;y=this._literal(this._literalValue,S),v=null;break;case"langcode":y=this._literal(this._literalValue,v.value),v=null}return{token:v,literal:y}}_completeSubjectLiteral(v){return this._subject=this._completeLiteral(v).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(v,y){const S=this._completeLiteral(v);if(S)return this._object=S.literal,y&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===S.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(S.token))}_readFormulaTail(v){return"}"!==v.type?this._readPunctuation(v):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(v){let y,S=this._graph;const D=this._subject,B=this._inversePredicate;switch(v.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",v);if(this._n3Mode)return this._readFormulaTail(v);this._graph=null;case".":this._subject=null,y=this._contextStack.length?this._readSubject:this._readInTopContext,B&&(this._inversePredicate=!1);break;case";":y=this._readPredicate;break;case",":y=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(S=this._readEntity(v))){y=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,v)}if(null!==D){const I=this._predicate,q=this._object;B?this._emit(q,I,D,S):this._emit(D,I,q,S)}return y}_readBlankNodePunctuation(v){let y;switch(v.type){case";":y=this._readPredicate;break;case",":y=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,v)}return this._emit(this._subject,this._predicate,this._object,this._graph),y}_readQuadPunctuation(v){return"."!==v.type?this._error("Expected dot to follow quad",v):this._readInTopContext}_readPrefix(v){return"prefix"!==v.type?this._error("Expected prefix to follow @prefix",v):(this._prefix=v.value,this._readPrefixIRI)}_readPrefixIRI(v){if("IRI"!==v.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,v);const y=this._readEntity(v);return this._prefixes[this._prefix]=y.value,this._prefixCallback(this._prefix,y),this._readDeclarationPunctuation}_readBaseIRI(v){const y="IRI"===v.type&&this._resolveIRI(v.value);return y?(this._setBase(y),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",v)}_readNamedGraphLabel(v){switch(v.type){case"IRI":case"blank":case"prefixed":return this._readSubject(v),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",v)}}_readNamedGraphBlankLabel(v){return"]"!==v.type?this._error("Invalid graph label",v):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(v){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(v)):"."!==v.type?this._error("Expected declaration to end with a dot",v):this._readInTopContext}_readQuantifierList(v){let y;switch(v.type){case"IRI":case"prefixed":if(void 0!==(y=this._readEntity(v,!0)))break;default:return this._error(`Unexpected ${v.type}`,v)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,y,this.QUANTIFIERS_GRAPH)):this._quantified[y.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(v){return","===v.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(v))}_getPathReader(v){return this._afterPath=v,this._readPath}_readPath(v){switch(v.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const y=this._contextStack,S=y.length&&y[y.length-1];if(S&&"item"===S.type){const D=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,D,this._graph)}return this._afterPath(v)}}_readForwardPath(v){let y,S;const D=this._blankNode();if(void 0!==(S=this._readEntity(v)))return null===this._predicate?(y=this._subject,this._subject=D):(y=this._object,this._object=D),this._emit(y,S,D,this._graph),this._readPath}_readBackwardPath(v){const y=this._blankNode();let S,D;if(void 0!==(S=this._readEntity(v)))return null===this._predicate?(D=this._subject,this._subject=y):(D=this._object,this._object=y),this._emit(y,S,D,this._graph),this._readPath}_readRDFStarTailOrGraph(v){return">>"!==v.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(v))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,v):this._readRDFStarTail(v)}_readRDFStarTail(v){if(">>"!==v.type)return this._error(`Expected >> but got ${v.type}`,v);const y=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=y,this._readPredicate):(this._object=y,this._getContextEndReader())}_getContextEndReader(){const v=this._contextStack;if(!v.length)return this._readPunctuation;switch(v[v.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(v,y,S,D){this._callback(null,this._quad(v,y,S,D||this.DEFAULTGRAPH))}_error(v,y){const S=new Error(`${v} on line ${y.line}.`);S.context={token:y,line:y.line,previousToken:this._lexer.previousToken},this._callback(S),this._callback=A}_resolveIRI(v){return/^[a-z][a-z0-9+.-]*:/i.test(v)?v:this._resolveRelativeIRI(v)}_resolveRelativeIRI(v){if(!v.length)return this._base;switch(v[0]){case"#":return this._base+v;case"?":return this._base.replace(/(?:\?.*)?$/,v);case"/":return("/"===v[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(v);default:return/^[^/:]*:/.test(v)?null:this._removeDotSegments(this._basePath+v)}}_removeDotSegments(v){if(!/(^|\/)\.\.?($|[/#?])/.test(v))return v;const y=v.length;let S="",D=-1,B=-1,I=0,q="/";for(;D<y;){switch(q){case":":if(B<0&&"/"===v[++D]&&"/"===v[++D])for(;(B=D+1)<y&&"/"!==v[B];)D=B;break;case"?":case"#":D=y;break;case"/":if("."===v[D+1])switch(q=v[1+ ++D],q){case"/":S+=v.substring(I,D-1),I=D+1;break;case void 0:case"?":case"#":return S+v.substring(I,D)+v.substr(D+1);case".":if(q=v[1+ ++D],void 0===q||"/"===q||"?"===q||"#"===q){if(S+=v.substring(I,D-2),(I=S.lastIndexOf("/"))>=B&&(S=S.substr(0,I)),"/"!==q)return`${S}/${v.substr(D+1)}`;I=D+1}}}q=v[++D]}return S+v.substring(I)}parse(v,y,S){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${K++}_`,this._prefixCallback=S||A,this._inversePredicate=!1,this._quantified=Object.create(null),!y){const D=[];let B;if(this._callback=(I,q)=>{I?B=I:q&&D.push(q)},this._lexer.tokenize(v).every(I=>this._readCallback=this._readCallback(I)),B)throw B;return D}this._callback=y,this._lexer.tokenize(v,(D,B)=>{null!==D?(this._callback(D),this._callback=A):this._readCallback&&(this._readCallback=this._readCallback(B))})}}function A(){}function O(T,v){const y=v.namedNode;T._namedNode=y,T._blankNode=v.blankNode,T._literal=v.literal,T._variable=v.variable,T._quad=v.quad,T.DEFAULTGRAPH=v.defaultGraph(),T.RDF_FIRST=y(F.default.rdf.first),T.RDF_REST=y(F.default.rdf.rest),T.RDF_NIL=y(F.default.rdf.nil),T.N3_FORALL=y(F.default.r.forAll),T.N3_FORSOME=y(F.default.r.forSome),T.ABBREVIATIONS={a:y(F.default.rdf.type),"=":y(F.default.owl.sameAs),">":y(F.default.log.implies)},T.QUANTIFIERS_GRAPH=y("urn:n3:quantifiers")}me.default=E,O(E.prototype,z.default)},{"./IRIs":34,"./N3DataFactory":35,"./N3Lexer":36}],38:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var v,Y=function(v,y){if(!y&&v&&v.__esModule)return v;if(null===v||"object"!=typeof v&&"function"!=typeof v)return{default:v};var S=K(y);if(S&&S.has(v))return S.get(v);var D={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in v)if("default"!==I&&Object.prototype.hasOwnProperty.call(v,I)){var q=B?Object.getOwnPropertyDescriptor(v,I):null;q&&(q.get||q.set)?Object.defineProperty(D,I,q):D[I]=v[I]}return D.default=v,S&&S.set(v,D),D}(Q("./N3DataFactory")),z=Q("readable-stream"),F=(v=Q("./IRIs"))&&v.__esModule?v:{default:v};function K(v){if("function"!=typeof WeakMap)return null;var y=new WeakMap,S=new WeakMap;return(K=function(D){return D?S:y})(v)}class A{constructor(y,S){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!S&&y&&!y[0]&&(S=y,y=null),this._factory=(S=S||{}).factory||Y.default,y&&this.addQuads(y)}get size(){let y=this._size;if(null!==y)return y;y=0;const S=this._graphs;let D,B;for(const I in S)for(const q in D=S[I].subjects)for(const Z in B=D[q])y+=Object.keys(B[Z]).length;return this._size=y}_addToIndex(y,S,D,B){const I=y[S]||(y[S]={}),q=I[D]||(I[D]={}),Z=B in q;return Z||(q[B]=null),!Z}_removeFromIndex(y,S,D,B){const I=y[S],q=I[D];delete q[B];for(const Z in q)return;delete I[D];for(const Z in I)return;delete y[S]}_findInIndex(y,S,D,B,I,q,Z,M,N,ee){let C,U,re;const G=!S+!D+!B>1?Object.keys(this._ids):this._entities;S&&((C=y,y={})[S]=C[S]);for(const $ in y){const pe=G[$];if(U=y[$]){D&&((C=U,U={})[D]=C[D]);for(const ue in U){const X=G[ue];if(re=U[ue]){const ge=B?B in re?[B]:[]:Object.keys(re);for(let De=0;De<ge.length;De++){const je={subject:null,predicate:null,object:null};je[I]=(0,Y.termFromId)(pe,this._factory),je[q]=(0,Y.termFromId)(X,this._factory),je[Z]=(0,Y.termFromId)(G[ge[De]],this._factory);const Ze=this._factory.quad(je.subject,je.predicate,je.object,(0,Y.termFromId)(M,this._factory));if(ee)ee.push(Ze);else if(N(Ze))return!0}}}}}return ee}_loop(y,S){for(const D in y)S(D)}_loopByKey0(y,S,D){let B,I;if(B=y[S])for(I in B)D(I)}_loopByKey1(y,S,D){let B,I;for(B in y)I=y[B],I[S]&&D(B)}_loopBy2Keys(y,S,D,B){let I,q,Z;if((I=y[S])&&(q=I[D]))for(Z in q)B(Z)}_countInIndex(y,S,D,B){let q,Z,M,I=0;S&&((q=y,y={})[S]=q[S]);for(const N in y)if(Z=y[N]){D&&((q=Z,Z={})[D]=q[D]);for(const ee in Z)(M=Z[ee])&&(B?B in M&&I++:I+=Object.keys(M).length)}return I}_getGraphs(y){if(!O(y))return this._graphs;const S={};return S[y]=this._graphs[y],S}_uniqueEntities(y){const S=Object.create(null);return D=>{D in S||(S[D]=!0,y((0,Y.termFromId)(this._entities[D],this._factory)))}}add(y){return this.addQuad(y),this}addQuad(y,S,D,B){S||(B=y.graph,D=y.object,S=y.predicate,y=y.subject),y=(0,Y.termToId)(y),S=(0,Y.termToId)(S),D=(0,Y.termToId)(D),B=(0,Y.termToId)(B);let I=this._graphs[B];I||(I=this._graphs[B]={subjects:{},predicates:{},objects:{}},Object.freeze(I));const q=this._ids,Z=this._entities;y=q[y]||(q[Z[++this._id]=y]=this._id),S=q[S]||(q[Z[++this._id]=S]=this._id),D=q[D]||(q[Z[++this._id]=D]=this._id);const M=this._addToIndex(I.subjects,y,S,D);return this._addToIndex(I.predicates,S,D,y),this._addToIndex(I.objects,D,y,S),this._size=null,M}addQuads(y){for(let S=0;S<y.length;S++)this.addQuad(y[S])}delete(y){return this.removeQuad(y),this}has(y){return 0!==this.getQuads(y.subject,y.predicate,y.object,y.graph).length}import(y){return y.on("data",S=>{this.addQuad(S)}),y}removeQuad(y,S,D,B){S||(B=y.graph,D=y.object,S=y.predicate,y=y.subject),y=(0,Y.termToId)(y),S=(0,Y.termToId)(S),D=(0,Y.termToId)(D),B=(0,Y.termToId)(B);const I=this._ids,q=this._graphs;let Z,M,N;if(!((y=I[y])&&(S=I[S])&&(D=I[D])&&(Z=q[B])&&(M=Z.subjects[y])&&(N=M[S])&&D in N))return!1;for(y in this._removeFromIndex(Z.subjects,y,S,D),this._removeFromIndex(Z.predicates,S,D,y),this._removeFromIndex(Z.objects,D,y,S),null!==this._size&&this._size--,Z.subjects)return!0;return delete q[B],!0}removeQuads(y){for(let S=0;S<y.length;S++)this.removeQuad(y[S])}remove(y){return y.on("data",S=>{this.removeQuad(S)}),y}removeMatches(y,S,D,B){const I=new z.Readable({objectMode:!0});return I._read=()=>{for(const q of this.getQuads(y,S,D,B))I.push(q);I.push(null)},this.remove(I)}deleteGraph(y){return this.removeMatches(null,null,null,y)}getQuads(y,S,D,B){y=y&&(0,Y.termToId)(y),S=S&&(0,Y.termToId)(S),D=D&&(0,Y.termToId)(D),B=B&&(0,Y.termToId)(B);const I=[],q=this._getGraphs(B),Z=this._ids;let M,N,ee,C;if(O(y)&&!(N=Z[y])||O(S)&&!(ee=Z[S])||O(D)&&!(C=Z[D]))return I;for(const U in q)(M=q[U])&&(N?C?this._findInIndex(M.objects,C,N,ee,"object","subject","predicate",U,null,I):this._findInIndex(M.subjects,N,ee,null,"subject","predicate","object",U,null,I):ee?this._findInIndex(M.predicates,ee,C,null,"predicate","object","subject",U,null,I):C?this._findInIndex(M.objects,C,null,null,"object","subject","predicate",U,null,I):this._findInIndex(M.subjects,null,null,null,"subject","predicate","object",U,null,I));return I}match(y,S,D,B){return new T(this,y,S,D,B)}countQuads(y,S,D,B){y=y&&(0,Y.termToId)(y),S=S&&(0,Y.termToId)(S),D=D&&(0,Y.termToId)(D),B=B&&(0,Y.termToId)(B);const I=this._getGraphs(B),q=this._ids;let M,N,ee,C,Z=0;if(O(y)&&!(N=q[y])||O(S)&&!(ee=q[S])||O(D)&&!(C=q[D]))return 0;for(const U in I)(M=I[U])&&(Z+=y?D?this._countInIndex(M.objects,C,N,ee):this._countInIndex(M.subjects,N,ee,C):S?this._countInIndex(M.predicates,ee,C,N):this._countInIndex(M.objects,C,N,ee));return Z}forEach(y,S,D,B,I){this.some(q=>(y(q),!1),S,D,B,I)}every(y,S,D,B,I){let q=!1;const Z=!this.some(M=>(q=!0,!y(M)),S,D,B,I);return q&&Z}some(y,S,D,B,I){S=S&&(0,Y.termToId)(S),D=D&&(0,Y.termToId)(D),B=B&&(0,Y.termToId)(B),I=I&&(0,Y.termToId)(I);const q=this._getGraphs(I),Z=this._ids;let M,N,ee,C;if(O(S)&&!(N=Z[S])||O(D)&&!(ee=Z[D])||O(B)&&!(C=Z[B]))return!1;for(const U in q)if(M=q[U])if(N){if(C){if(this._findInIndex(M.objects,C,N,ee,"object","subject","predicate",U,y,null))return!0}else if(this._findInIndex(M.subjects,N,ee,null,"subject","predicate","object",U,y,null))return!0}else if(ee){if(this._findInIndex(M.predicates,ee,C,null,"predicate","object","subject",U,y,null))return!0}else if(C){if(this._findInIndex(M.objects,C,null,null,"object","subject","predicate",U,y,null))return!0}else if(this._findInIndex(M.subjects,null,null,null,"subject","predicate","object",U,y,null))return!0;return!1}getSubjects(y,S,D){const B=[];return this.forSubjects(I=>{B.push(I)},y,S,D),B}forSubjects(y,S,D,B){S=S&&(0,Y.termToId)(S),D=D&&(0,Y.termToId)(D),B=B&&(0,Y.termToId)(B);const I=this._ids,q=this._getGraphs(B);let Z,M,N;if(y=this._uniqueEntities(y),!(O(S)&&!(M=I[S])||O(D)&&!(N=I[D])))for(B in q)(Z=q[B])&&(M?N?this._loopBy2Keys(Z.predicates,M,N,y):this._loopByKey1(Z.subjects,M,y):N?this._loopByKey0(Z.objects,N,y):this._loop(Z.subjects,y))}getPredicates(y,S,D){const B=[];return this.forPredicates(I=>{B.push(I)},y,S,D),B}forPredicates(y,S,D,B){S=S&&(0,Y.termToId)(S),D=D&&(0,Y.termToId)(D),B=B&&(0,Y.termToId)(B);const I=this._ids,q=this._getGraphs(B);let Z,M,N;if(y=this._uniqueEntities(y),!(O(S)&&!(M=I[S])||O(D)&&!(N=I[D])))for(B in q)(Z=q[B])&&(M?N?this._loopBy2Keys(Z.objects,N,M,y):this._loopByKey0(Z.subjects,M,y):N?this._loopByKey1(Z.predicates,N,y):this._loop(Z.predicates,y))}getObjects(y,S,D){const B=[];return this.forObjects(I=>{B.push(I)},y,S,D),B}forObjects(y,S,D,B){S=S&&(0,Y.termToId)(S),D=D&&(0,Y.termToId)(D),B=B&&(0,Y.termToId)(B);const I=this._ids,q=this._getGraphs(B);let Z,M,N;if(y=this._uniqueEntities(y),!(O(S)&&!(M=I[S])||O(D)&&!(N=I[D])))for(B in q)(Z=q[B])&&(M?N?this._loopBy2Keys(Z.subjects,M,N,y):this._loopByKey1(Z.objects,M,y):N?this._loopByKey0(Z.predicates,N,y):this._loop(Z.objects,y))}getGraphs(y,S,D){const B=[];return this.forGraphs(I=>{B.push(I)},y,S,D),B}forGraphs(y,S,D,B){for(const I in this._graphs)this.some(q=>(y(q.graph),!0),S,D,B,I)}createBlankNode(y){let S,D;if(y)for(S=y=`_:${y}`,D=1;this._ids[S];)S=y+D++;else do{S="_:b"+this._blankNodeIndex++}while(this._ids[S]);return this._ids[S]=++this._id,this._entities[this._id]=S,this._factory.blankNode(S.substr(2))}extractLists({remove:y=!1,ignoreErrors:S=!1}={}){const D={},B=S?()=>!0:(Z,M)=>{throw new Error(`${Z.value} ${M}`)},I=this.getQuads(null,F.default.rdf.rest,F.default.rdf.nil,null),q=y?[...I]:[];return I.forEach(Z=>{const M=[];let ee,C,N=!1;const U=Z.graph;let re=Z.subject;for(;re&&!N;){const de=this.getQuads(null,null,re,null),G=this.getQuads(re,null,null,null);let $,pe=null,ue=null,X=null;for(let ge=0;ge<G.length&&!N;ge++)$=G[ge],$.graph.equals(U)?ee?N=B(re,"has non-list arcs out"):$.predicate.value===F.default.rdf.first?pe?N=B(re,"has multiple rdf:first arcs"):q.push(pe=$):$.predicate.value===F.default.rdf.rest?ue?N=B(re,"has multiple rdf:rest arcs"):q.push(ue=$):de.length?N=B(re,"can't be subject and object"):(ee=$,C="subject"):N=B(re,"not confined to single graph");for(let ge=0;ge<de.length&&!N;++ge)$=de[ge],ee?N=B(re,"can't have coreferences"):$.predicate.value===F.default.rdf.rest?X?N=B(re,"has incoming rdf:rest arcs"):X=$:(ee=$,C="object");pe?M.unshift(pe.object):N=B(re,"has no list head"),re=X&&X.subject}N?y=!1:ee&&(D[ee[C].value]=M)}),y&&this.removeQuads(q),D}*[Symbol.iterator](){yield*this.getQuads()}}function O(v){return"string"==typeof v||v instanceof String}me.default=A;class T extends z.Readable{constructor(y,S,D,B,I){super({objectMode:!0}),Object.assign(this,{n3Store:y,subject:S,predicate:D,object:B,graph:I})}get filtered(){if(!this._filtered){const{n3Store:y,graph:S,object:D,predicate:B,subject:I}=this,q=y.getQuads(I,B,D,S);this._filtered=new A(q,{factory:y._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const y of this.filtered.getQuads())this.push(y);this.push(null)}add(y){return this.filtered.add(y)}delete(y){return this.filtered.delete(y)}has(y){return this.filtered.has(y)}match(y,S,D,B){return new T(this.filtered,y,S,D,B)}*[Symbol.iterator](){yield*this.filtered.getQuads()}}},{"./IRIs":34,"./N3DataFactory":35,"readable-stream":81}],39:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var K,Y=(K=Q("./N3Parser"))&&K.__esModule?K:{default:K},z=Q("readable-stream");me.default=class extends z.Transform{constructor(E){let O,T;super({decodeStrings:!0}),this._readableState.objectMode=!0,new Y.default(E).parse({on:(v,y)=>{switch(v){case"data":O=y;break;case"end":T=y}}},(v,y)=>{v&&this.emit("error",v)||y&&this.push(y)},(v,y)=>{this.emit("prefix",v,y)}),this._transform=(v,y,S)=>{O(v),S()},this._flush=v=>{T(),v()}}import(E){return E.on("data",A=>{this.write(A)}),E.on("end",()=>{this.end()}),E.on("error",A=>{this.emit("error",A)}),this}}},{"./N3Parser":37,"readable-stream":81}],40:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var K,Y=Q("readable-stream"),z=(K=Q("./N3Writer"))&&K.__esModule?K:{default:K};me.default=class extends Y.Transform{constructor(E){super({encoding:"utf8",writableObjectMode:!0});const A=this._writer=new z.default({write:(O,T,v)=>{this.push(O),v&&v()},end:O=>{this.push(null),O&&O()}},E);this._transform=(O,T,v)=>{A.addQuad(O,v)},this._flush=O=>{A.end(O)}}import(E){return E.on("data",A=>{this.write(A)}),E.on("end",()=>{this.end()}),E.on("error",A=>{this.emit("error",A)}),E.on("prefix",(A,O)=>{this._writer.addPrefix(A,O)}),this}}},{"./N3Writer":42,"readable-stream":81}],41:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.isNamedNode=function(y){return!!y&&"NamedNode"===y.termType},me.isBlankNode=function(y){return!!y&&"BlankNode"===y.termType},me.isLiteral=function(y){return!!y&&"Literal"===y.termType},me.isVariable=function(y){return!!y&&"Variable"===y.termType},me.isDefaultGraph=A,me.inDefaultGraph=function(y){return A(y.graph)},me.prefix=function(y,S){return v({"":y},S)("")},me.prefixes=v;var y,Y=(y=Q("./N3DataFactory"))&&y.__esModule?y:{default:y};function A(y){return!!y&&"DefaultGraph"===y.termType}function v(y,S){const D=Object.create(null);for(const I in y)B(I,y[I]);function B(I,q){if("string"==typeof q){const Z=Object.create(null);D[I]=M=>Z[M]||(Z[M]=S.namedNode(q+M))}else if(!(I in D))throw new Error(`Unknown prefix: ${I}`);return D[I]}return S=S||Y.default,B}},{"./N3DataFactory":35}],42:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;var q,Y=(q=Q("./IRIs"))&&q.__esModule?q:{default:q},z=function(q,Z){if(!Z&&q&&q.__esModule)return q;if(null===q||"object"!=typeof q&&"function"!=typeof q)return{default:q};var M=se(Z);if(M&&M.has(q))return M.get(q);var N={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in q)if("default"!==C&&Object.prototype.hasOwnProperty.call(q,C)){var U=ee?Object.getOwnPropertyDescriptor(q,C):null;U&&(U.get||U.set)?Object.defineProperty(N,C,U):N[C]=q[C]}return N.default=q,M&&M.set(q,N),N}(Q("./N3DataFactory")),F=Q("./N3Util");function se(q){if("function"!=typeof WeakMap)return null;var Z=new WeakMap,M=new WeakMap;return(se=function(N){return N?M:Z})(q)}const A=z.default.defaultGraph(),{rdf:O,xsd:T}=Y.default,v=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,y=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,S={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class D extends z.Term{equals(){return!1}}function I(q){let Z=S[q];return void 0===Z&&(1===q.length?(Z=q.charCodeAt(0).toString(16),Z="\\u0000".substr(0,6-Z.length)+Z):(Z=(1024*(q.charCodeAt(0)-55296)+q.charCodeAt(1)+9216).toString(16),Z="\\U00000000".substr(0,10-Z.length)+Z)),Z}me.default=class{constructor(Z,M){if(this._prefixRegex=/$0^/,Z&&"function"!=typeof Z.write&&(M=Z,Z=null),this._lists=(M=M||{}).lists,Z)this._outputStream=Z,this._endStream=void 0===M.end||!!M.end;else{let N="";this._outputStream={write(ee,C,U){N+=ee,U&&U()},end:ee=>{ee&&ee(null,N)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(M.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=A,this._baseIRI=M.baseIRI,this._prefixIRIs=Object.create(null),M.prefixes&&this.addPrefixes(M.prefixes))}get _inDefaultGraph(){return A.equals(this._graph)}_write(Z,M){this._outputStream.write(Z,"utf8",M)}_writeQuad(Z,M,N,ee,C){try{ee.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(A.equals(ee)?"":`${this._encodeIriOrBlank(ee)} {\n`)),this._graph=ee,this._subject=null),Z.equals(this._subject)?M.equals(this._predicate)?this._write(`, ${this._encodeObject(N)}`,C):this._write(`;\n    ${this._encodePredicate(this._predicate=M)} ${this._encodeObject(N)}`,C):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=Z)} ${this._encodePredicate(this._predicate=M)} ${this._encodeObject(N)}`,C)}catch(U){C&&C(U)}}_writeQuadLine(Z,M,N,ee,C){delete this._prefixMatch,this._write(this.quadToString(Z,M,N,ee),C)}quadToString(Z,M,N,ee){return`${this._encodeSubject(Z)} ${this._encodeIriOrBlank(M)} ${this._encodeObject(N)}${ee&&ee.value?` ${this._encodeIriOrBlank(ee)} .\n`:" .\n"}`}quadsToString(Z){return Z.map(M=>this.quadToString(M.subject,M.predicate,M.object,M.graph)).join("")}_encodeSubject(Z){return"Quad"===Z.termType?this._encodeQuad(Z):this._encodeIriOrBlank(Z)}_encodeIriOrBlank(Z){if("NamedNode"!==Z.termType)return this._lists&&Z.value in this._lists&&(Z=this.list(this._lists[Z.value])),"id"in Z?Z.id:`_:${Z.value}`;let M=Z.value;this._baseIRI&&M.startsWith(this._baseIRI)&&(M=M.substr(this._baseIRI.length)),v.test(M)&&(M=M.replace(y,I));const N=this._prefixRegex.exec(M);return N?N[1]?this._prefixIRIs[N[1]]+N[2]:M:`<${M}>`}_encodeLiteral(Z){let M=Z.value;if(v.test(M)&&(M=M.replace(y,I)),Z.language)return`"${M}"@${Z.language}`;if(this._lineMode){if(Z.datatype.value===T.string)return`"${M}"`}else switch(Z.datatype.value){case T.string:return`"${M}"`;case T.boolean:if("true"===M||"false"===M)return M;break;case T.integer:if(/^[+-]?\d+$/.test(M))return M;break;case T.decimal:if(/^[+-]?\d*\.\d+$/.test(M))return M;break;case T.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(M))return M}return`"${M}"^^${this._encodeIriOrBlank(Z.datatype)}`}_encodePredicate(Z){return Z.value===O.type?"a":this._encodeIriOrBlank(Z)}_encodeObject(Z){switch(Z.termType){case"Quad":return this._encodeQuad(Z);case"Literal":return this._encodeLiteral(Z);default:return this._encodeIriOrBlank(Z)}}_encodeQuad({subject:Z,predicate:M,object:N,graph:ee}){return`<<${this._encodeSubject(Z)} ${this._encodePredicate(M)} ${this._encodeObject(N)}${(0,F.isDefaultGraph)(ee)?"":` ${this._encodeIriOrBlank(ee)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(Z,M,N,ee,C){void 0===N?this._writeQuad(Z.subject,Z.predicate,Z.object,Z.graph,M):"function"==typeof ee?this._writeQuad(Z,M,N,A,ee):this._writeQuad(Z,M,N,ee||A,C)}addQuads(Z){for(let M=0;M<Z.length;M++)this.addQuad(Z[M])}addPrefix(Z,M,N){const ee={};ee[Z]=M,this.addPrefixes(ee,N)}addPrefixes(Z,M){if(!this._prefixIRIs)return M&&M();let N=!1;for(let ee in Z){let C=Z[ee];"string"!=typeof C&&(C=C.value),N=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[C]=ee+=":",this._write(`@prefix ${ee} <${C}>.\n`)}if(N){let ee="",C="";for(const U in this._prefixIRIs)ee+=ee?`|${U}`:U,C+=(C?"|":"")+this._prefixIRIs[U];ee=ee.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${C})[^/]*$|^(${ee})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(N?"\n":"",M)}blank(Z,M){let ee,C,N=Z;switch(void 0===Z?N=[]:Z.termType?N=[{predicate:Z,object:M}]:"length"in Z||(N=[Z]),C=N.length){case 0:return new D("[]");case 1:if(ee=N[0],!(ee.object instanceof D))return new D(`[ ${this._encodePredicate(ee.predicate)} ${this._encodeObject(ee.object)} ]`);default:let U="[";for(let re=0;re<C;re++)ee=N[re],ee.predicate.equals(Z)?U+=`, ${this._encodeObject(ee.object)}`:(U+=`${(re?";\n  ":"\n  ")+this._encodePredicate(ee.predicate)} ${this._encodeObject(ee.object)}`,Z=ee.predicate);return new D(`${U}\n]`)}}list(Z){const M=Z&&Z.length||0,N=new Array(M);for(let ee=0;ee<M;ee++)N[ee]=this._encodeObject(Z[ee]);return new D(`(${N.join(" ")})`)}end(Z){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let M=Z&&((N,ee)=>{M=null,Z(N,ee)});if(this._endStream)try{return this._outputStream.end(M)}catch(N){}M&&M()}}},{"./IRIs":34,"./N3DataFactory":35,"./N3Util":41}],43:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),Object.defineProperty(me,"Lexer",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(me,"Parser",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(me,"Writer",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(me,"Store",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(me,"StreamParser",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(me,"StreamWriter",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(me,"DataFactory",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(me,"Term",{enumerable:!0,get:function(){return O.Term}}),Object.defineProperty(me,"NamedNode",{enumerable:!0,get:function(){return O.NamedNode}}),Object.defineProperty(me,"Literal",{enumerable:!0,get:function(){return O.Literal}}),Object.defineProperty(me,"BlankNode",{enumerable:!0,get:function(){return O.BlankNode}}),Object.defineProperty(me,"Variable",{enumerable:!0,get:function(){return O.Variable}}),Object.defineProperty(me,"DefaultGraph",{enumerable:!0,get:function(){return O.DefaultGraph}}),Object.defineProperty(me,"Quad",{enumerable:!0,get:function(){return O.Quad}}),Object.defineProperty(me,"Triple",{enumerable:!0,get:function(){return O.Triple}}),Object.defineProperty(me,"termFromId",{enumerable:!0,get:function(){return O.termFromId}}),Object.defineProperty(me,"termToId",{enumerable:!0,get:function(){return O.termToId}}),me.Util=void 0;var Y=y(Q("./N3Lexer")),z=y(Q("./N3Parser")),F=y(Q("./N3Writer")),se=y(Q("./N3Store")),K=y(Q("./N3StreamParser")),E=y(Q("./N3StreamWriter")),A=v(Q("./N3Util"));me.Util=A;var O=v(Q("./N3DataFactory"));function T(S){if("function"!=typeof WeakMap)return null;var D=new WeakMap,B=new WeakMap;return(T=function(I){return I?B:D})(S)}function v(S,D){if(!D&&S&&S.__esModule)return S;if(null===S||"object"!=typeof S&&"function"!=typeof S)return{default:S};var B=T(D);if(B&&B.has(S))return B.get(S);var I={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in S)if("default"!==Z&&Object.prototype.hasOwnProperty.call(S,Z)){var M=q?Object.getOwnPropertyDescriptor(S,Z):null;M&&(M.get||M.set)?Object.defineProperty(I,Z,M):I[Z]=S[Z]}return I.default=S,B&&B.set(S,I),I}function y(S){return S&&S.__esModule?S:{default:S}}},{"./N3DataFactory":35,"./N3Lexer":36,"./N3Parser":37,"./N3Store":38,"./N3StreamParser":39,"./N3StreamWriter":40,"./N3Util":41,"./N3Writer":42}],44:[function(Q,xe,me){var z,F,Y=xe.exports={};function se(){throw new Error("setTimeout has not been defined")}function K(){throw new Error("clearTimeout has not been defined")}function E(q){if(z===setTimeout)return setTimeout(q,0);if((z===se||!z)&&setTimeout)return z=setTimeout,setTimeout(q,0);try{return z(q,0)}catch(Z){try{return z.call(null,q,0)}catch(M){return z.call(this,q,0)}}}!function(){try{z="function"==typeof setTimeout?setTimeout:se}catch(q){z=se}try{F="function"==typeof clearTimeout?clearTimeout:K}catch(q){F=K}}();var v,O=[],T=!1,y=-1;function S(){!T||!v||(T=!1,v.length?O=v.concat(O):y=-1,O.length&&D())}function D(){if(!T){var q=E(S);T=!0;for(var Z=O.length;Z;){for(v=O,O=[];++y<Z;)v&&v[y].run();y=-1,Z=O.length}v=null,T=!1,function(q){if(F===clearTimeout)return clearTimeout(q);if((F===K||!F)&&clearTimeout)return F=clearTimeout,clearTimeout(q);try{F(q)}catch(Z){try{return F.call(null,q)}catch(M){return F.call(this,q)}}}(q)}}function B(q,Z){this.fun=q,this.array=Z}function I(){}Y.nextTick=function(q){var Z=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)Z[M-1]=arguments[M];O.push(new B(q,Z)),1===O.length&&!T&&E(D)},B.prototype.run=function(){this.fun.apply(null,this.array)},Y.title="browser",Y.browser=!0,Y.env={},Y.argv=[],Y.version="",Y.versions={},Y.on=I,Y.addListener=I,Y.once=I,Y.off=I,Y.removeListener=I,Y.removeAllListeners=I,Y.emit=I,Y.prependListener=I,Y.prependOnceListener=I,Y.listeners=function(q){return[]},Y.binding=function(q){throw new Error("process.binding is not supported")},Y.cwd=function(){return"/"},Y.chdir=function(q){throw new Error("process.chdir is not supported")},Y.umask=function(){return 0}},{}],45:[function(Q,xe,me){(function(Y){(function(){let z;xe.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:Y):F=>(z||(z=Promise.resolve())).then(F).catch(se=>setTimeout(()=>{throw se},0))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(Q,xe,me){xe.exports=Q("./lib")},{"./lib":55}],47:[function(Q,xe,me){"use strict";xe.exports=class c9{constructor(z,F=new Map,se=0){this.prefix=z,this._existing=F,this.counter=se}clone(){const{prefix:z,_existing:F,counter:se}=this;return new c9(z,new Map(F),se)}getId(z){const F=z&&this._existing.get(z);if(F)return F;const se=this.prefix+this.counter;return this.counter++,z&&this._existing.set(z,se),se}hasId(z){return this._existing.has(z)}getOldIds(){return[...this._existing.keys()]}}},{}],48:[function(Q,xe,me){"use strict";Q("setimmediate");const Y=self.crypto||self.msCrypto;xe.exports=class{constructor(F){if(!Y||!Y.subtle)throw new Error("crypto.subtle not found.");if("sha256"===F)this.algorithm={name:"SHA-256"};else{if("sha1"!==F)throw new Error(`Unsupport algorithm "${F}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(F){this._content+=F}digest(){var F=this;return gt(function*(){const se=(new TextEncoder).encode(F._content),K=new Uint8Array(yield Y.subtle.digest(F.algorithm,se));let E="";for(let A=0;A<K.length;++A)E+=K[A].toString(16).padStart(2,"0");return E})()}}},{setimmediate:86}],49:[function(Q,xe,me){"use strict";const F="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",se="http://www.w3.org/2001/XMLSchema#string",K="NamedNode",E="BlankNode",A="Literal",O="DefaultGraph",T={};function v(I,q){return I.subject.termType===q.subject.termType&&I.object.termType===q.object.termType&&I.subject.value===q.subject.value&&I.predicate.value===q.predicate.value&&I.object.value===q.object.value&&(I.object.termType!==A||I.object.datatype.termType===q.object.datatype.termType&&I.object.language===q.object.language&&I.object.datatype.value===q.object.datatype.value)}(()=>{const $="[ \\t]*";T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^"+$+"$"),T.quad=new RegExp("^"+$+'(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))'+$+"$")})(),xe.exports=class PN{static parse(q){const Z=[],M={},N=q.split(T.eoln);let ee=0;for(const C of N){if(ee++,T.empty.test(C))continue;const U=C.match(T.quad);if(null===U)throw new Error("N-Quads parse error on line "+ee+".");const re={subject:null,predicate:null,object:null,graph:null};if(re.subject=void 0!==U[1]?{termType:K,value:U[1]}:{termType:E,value:U[2]},re.predicate={termType:K,value:U[3]},void 0!==U[4]?re.object={termType:K,value:U[4]}:void 0!==U[5]?re.object={termType:E,value:U[5]}:(re.object={termType:A,value:void 0,datatype:{termType:K}},void 0!==U[7]?re.object.datatype.value=U[7]:void 0!==U[8]?(re.object.datatype.value=F,re.object.language=U[8]):re.object.datatype.value=se,re.object.value=U[6].replace(D,function(q,Z,M,N){if(Z)switch(Z){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(M)return String.fromCharCode(parseInt(M,16));if(N)throw new Error("Unsupported U escape")})),re.graph=void 0!==U[9]?{termType:K,value:U[9]}:void 0!==U[10]?{termType:E,value:U[10]}:{termType:O,value:""},re.graph.value in M){let de=!0;const G=M[re.graph.value];for(const $ of G)if(v($,re)){de=!1;break}de&&(G.push(re),Z.push(re))}else M[re.graph.value]=[re],Z.push(re)}return Z}static serialize(q){Array.isArray(q)||(q=PN.legacyDatasetToQuads(q));const Z=[];for(const M of q)Z.push(PN.serializeQuad(M));return Z.sort().join("")}static serializeQuad(q){const Z=q.subject,N=q.object,ee=q.graph;let C="";return C+=Z.termType===K?`<${Z.value}>`:`${Z.value}`,C+=` <${q.predicate.value}> `,N.termType===K?C+=`<${N.value}>`:N.termType===E?C+=N.value:(C+=`"${I=N.value,I.replace(y,function(q){switch(q){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,N.datatype.value===F?N.language&&(C+=`@${N.language}`):N.datatype.value!==se&&(C+=`^^<${N.datatype.value}>`)),ee.termType===K?C+=` <${ee.value}>`:ee.termType===E&&(C+=` ${ee.value}`),C+=" .\n",C;var I}static legacyDatasetToQuads(q){const Z=[],M={"blank node":E,IRI:K,literal:A};for(const N in q)q[N].forEach(C=>{const U={};for(const re in C){const de=C[re],G={termType:M[de.type],value:de.value};G.termType===A&&(G.datatype={termType:K},"datatype"in de&&(G.datatype.value=de.datatype),"language"in de?("datatype"in de||(G.datatype.value=F),G.language=de.language):"datatype"in de||(G.datatype.value=se)),U[re]=G}U.graph="@default"===N?{termType:O,value:""}:{termType:N.startsWith("_:")?E:K,value:N},Z.push(U)});return Z}};const y=/["\\\n\r]/g;const D=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],50:[function(Q,xe,me){"use strict";xe.exports=class{constructor(z){this.current=z.sort(),this.done=!1,this.dir=new Map;for(let F=0;F<z.length;++F)this.dir.set(z[F],!0)}hasNext(){return!this.done}next(){const{current:z,dir:F}=this,se=z.slice();let K=null,E=0;const A=z.length;for(let O=0;O<A;++O){const T=z[O],v=F.get(T);(null===K||T>K)&&(v&&O>0&&T>z[O-1]||!v&&O<A-1&&T>z[O+1])&&(K=T,E=O)}if(null===K)this.done=!0;else{const O=F.get(K)?E-1:E+1;z[E]=z[O],z[O]=K;for(const T of z)T>K&&F.set(T,!F.get(T))}return se}}},{}],51:[function(Q,xe,me){(function(Y){(function(){"use strict";const z=Q("./IdentifierIssuer"),F=Q("./MessageDigest"),se=Q("./Permuter"),K=Q("./NQuads");function E(A,O){return A.hash<O.hash?-1:A.hash>O.hash?1:0}xe.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new z("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(O){var T=this;return gt(function*(){T.quads=O;for(const q of O)T._addBlankNodeQuadInfo({quad:q,component:q.subject}),T._addBlankNodeQuadInfo({quad:q,component:q.object}),T._addBlankNodeQuadInfo({quad:q,component:q.graph});const v=new Map,y=[...T.blankNodeInfo.keys()];let S=0;for(const q of y)++S%100==0&&(yield T._yield()),yield T._hashAndTrackBlankNode({id:q,hashToBlankNodes:v});const D=[...v.keys()].sort(),B=[];for(const q of D){const Z=v.get(q);Z.length>1?B.push(Z):T.canonicalIssuer.getId(Z[0])}for(const q of B){const Z=[];for(const M of q){if(T.canonicalIssuer.hasId(M))continue;const N=new z("_:b");N.getId(M);const ee=yield T.hashNDegreeQuads(M,N);Z.push(ee)}Z.sort(E);for(const M of Z){const N=M.issuer.getOldIds();for(const ee of N)T.canonicalIssuer.getId(ee)}}const I=[];for(const q of T.quads){const Z=Ls({},q);Z.subject=T._useCanonicalId({component:Z.subject}),Z.object=T._useCanonicalId({component:Z.object}),Z.graph=T._useCanonicalId({component:Z.graph}),I.push(K.serializeQuad(Z))}return I.sort(),I.join("")})()}hashFirstDegreeQuads(O){var T=this;return gt(function*(){const v=[],y=T.blankNodeInfo.get(O),S=y.quads;for(const B of S){const I={subject:null,predicate:B.predicate,object:null,graph:null};I.subject=T.modifyFirstDegreeComponent(O,B.subject,"subject"),I.object=T.modifyFirstDegreeComponent(O,B.object,"object"),I.graph=T.modifyFirstDegreeComponent(O,B.graph,"graph"),v.push(K.serializeQuad(I))}v.sort();const D=new F(T.hashAlgorithm);for(const B of v)D.update(B);return y.hash=yield D.digest(),y.hash})()}hashRelatedBlankNode(O,T,v,y){var S=this;return gt(function*(){let D;D=S.canonicalIssuer.hasId(O)?S.canonicalIssuer.getId(O):v.hasId(O)?v.getId(O):S.blankNodeInfo.get(O).hash;const B=new F(S.hashAlgorithm);return B.update(y),"g"!==y&&B.update(S.getRelatedPredicate(T)),B.update(D),B.digest()})()}hashNDegreeQuads(O,T){var v=this;return gt(function*(){const y=new F(v.hashAlgorithm),S=yield v.createHashToRelated(O,T),D=[...S.keys()].sort();for(const B of D){y.update(B);let q,I="";const Z=new se(S.get(B));let M=0;for(;Z.hasNext();){const N=Z.next();++M%3==0&&(yield v._yield());let ee=T.clone(),C="";const U=[];let re=!1;for(const de of N)if(v.canonicalIssuer.hasId(de)?C+=v.canonicalIssuer.getId(de):(ee.hasId(de)||U.push(de),C+=ee.getId(de)),0!==I.length&&C>I){re=!0;break}if(!re){for(const de of U){const G=yield v.hashNDegreeQuads(de,ee);if(C+=ee.getId(de),C+=`<${G.hash}>`,ee=G.issuer,0!==I.length&&C>I){re=!0;break}}re||(0===I.length||C<I)&&(I=C,q=ee)}}y.update(I),T=q}return{hash:yield y.digest(),issuer:T}})()}modifyFirstDegreeComponent(O,T){return"BlankNode"!==T.termType?T:{termType:"BlankNode",value:T.value===O?"_:a":"_:z"}}getRelatedPredicate(O){return`<${O.predicate.value}>`}createHashToRelated(O,T){var v=this;return gt(function*(){const y=new Map,S=v.blankNodeInfo.get(O).quads;let D=0;for(const B of S)++D%100==0&&(yield v._yield()),yield Promise.all([v._addRelatedBlankNodeHash({quad:B,component:B.subject,position:"s",id:O,issuer:T,hashToRelated:y}),v._addRelatedBlankNodeHash({quad:B,component:B.object,position:"o",id:O,issuer:T,hashToRelated:y}),v._addRelatedBlankNodeHash({quad:B,component:B.graph,position:"g",id:O,issuer:T,hashToRelated:y})]);return y})()}_hashAndTrackBlankNode({id:O,hashToBlankNodes:T}){var v=this;return gt(function*(){const y=yield v.hashFirstDegreeQuads(O),S=T.get(y);S?S.push(O):T.set(y,[O])})()}_addBlankNodeQuadInfo({quad:O,component:T}){if("BlankNode"!==T.termType)return;const v=T.value,y=this.blankNodeInfo.get(v);y?y.quads.add(O):this.blankNodeInfo.set(v,{quads:new Set([O]),hash:null})}_addRelatedBlankNodeHash({quad:O,component:T,position:v,id:y,issuer:S,hashToRelated:D}){var B=this;return gt(function*(){if("BlankNode"!==T.termType||T.value===y)return;const I=T.value,q=yield B.hashRelatedBlankNode(I,O,S,v),Z=D.get(q);Z?Z.push(I):D.set(q,[I])})()}_useCanonicalId({component:O}){return"BlankNode"!==O.termType||O.value.startsWith(this.canonicalIssuer.prefix)?O:{termType:"BlankNode",value:this.canonicalIssuer.getId(O.value)}}_yield(){return gt(function*(){return new Promise(O=>Y(O))})()}}}).call(this)}).call(this,Q("timers").setImmediate)},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50,timers:89}],52:[function(Q,xe,me){"use strict";const Y=Q("./IdentifierIssuer"),z=Q("./MessageDigest"),F=Q("./Permuter"),se=Q("./NQuads");function K(E,A){return E.hash<A.hash?-1:E.hash>A.hash?1:0}xe.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Y("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(A){this.quads=A;for(const D of A)this._addBlankNodeQuadInfo({quad:D,component:D.subject}),this._addBlankNodeQuadInfo({quad:D,component:D.object}),this._addBlankNodeQuadInfo({quad:D,component:D.graph});const O=new Map,T=[...this.blankNodeInfo.keys()];for(const D of T)this._hashAndTrackBlankNode({id:D,hashToBlankNodes:O});const v=[...O.keys()].sort(),y=[];for(const D of v){const B=O.get(D);B.length>1?y.push(B):this.canonicalIssuer.getId(B[0])}for(const D of y){const B=[];for(const I of D){if(this.canonicalIssuer.hasId(I))continue;const q=new Y("_:b");q.getId(I);const Z=this.hashNDegreeQuads(I,q);B.push(Z)}B.sort(K);for(const I of B){const q=I.issuer.getOldIds();for(const Z of q)this.canonicalIssuer.getId(Z)}}const S=[];for(const D of this.quads){const B=Ls({},D);B.subject=this._useCanonicalId({component:B.subject}),B.object=this._useCanonicalId({component:B.object}),B.graph=this._useCanonicalId({component:B.graph}),S.push(se.serializeQuad(B))}return S.sort(),S.join("")}hashFirstDegreeQuads(A){const O=[],T=this.blankNodeInfo.get(A),v=T.quads;for(const S of v){const D={subject:null,predicate:S.predicate,object:null,graph:null};D.subject=this.modifyFirstDegreeComponent(A,S.subject,"subject"),D.object=this.modifyFirstDegreeComponent(A,S.object,"object"),D.graph=this.modifyFirstDegreeComponent(A,S.graph,"graph"),O.push(se.serializeQuad(D))}O.sort();const y=new z(this.hashAlgorithm);for(const S of O)y.update(S);return T.hash=y.digest(),T.hash}hashRelatedBlankNode(A,O,T,v){let y;y=this.canonicalIssuer.hasId(A)?this.canonicalIssuer.getId(A):T.hasId(A)?T.getId(A):this.blankNodeInfo.get(A).hash;const S=new z(this.hashAlgorithm);return S.update(v),"g"!==v&&S.update(this.getRelatedPredicate(O)),S.update(y),S.digest()}hashNDegreeQuads(A,O){const T=new z(this.hashAlgorithm),v=this.createHashToRelated(A,O),y=[...v.keys()].sort();for(const S of y){T.update(S);let B,D="";const I=new F(v.get(S));for(;I.hasNext();){const q=I.next();let Z=O.clone(),M="";const N=[];let ee=!1;for(const C of q)if(this.canonicalIssuer.hasId(C)?M+=this.canonicalIssuer.getId(C):(Z.hasId(C)||N.push(C),M+=Z.getId(C)),0!==D.length&&M>D){ee=!0;break}if(!ee){for(const C of N){const U=this.hashNDegreeQuads(C,Z);if(M+=Z.getId(C),M+=`<${U.hash}>`,Z=U.issuer,0!==D.length&&M>D){ee=!0;break}}ee||(0===D.length||M<D)&&(D=M,B=Z)}}T.update(D),O=B}return{hash:T.digest(),issuer:O}}modifyFirstDegreeComponent(A,O){return"BlankNode"!==O.termType?O:{termType:"BlankNode",value:O.value===A?"_:a":"_:z"}}getRelatedPredicate(A){return`<${A.predicate.value}>`}createHashToRelated(A,O){const T=new Map,v=this.blankNodeInfo.get(A).quads;for(const y of v)this._addRelatedBlankNodeHash({quad:y,component:y.subject,position:"s",id:A,issuer:O,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:y,component:y.object,position:"o",id:A,issuer:O,hashToRelated:T}),this._addRelatedBlankNodeHash({quad:y,component:y.graph,position:"g",id:A,issuer:O,hashToRelated:T});return T}_hashAndTrackBlankNode({id:A,hashToBlankNodes:O}){const T=this.hashFirstDegreeQuads(A),v=O.get(T);v?v.push(A):O.set(T,[A])}_addBlankNodeQuadInfo({quad:A,component:O}){if("BlankNode"!==O.termType)return;const T=O.value,v=this.blankNodeInfo.get(T);v?v.quads.add(A):this.blankNodeInfo.set(T,{quads:new Set([A]),hash:null})}_addRelatedBlankNodeHash({quad:A,component:O,position:T,id:v,issuer:y,hashToRelated:S}){if("BlankNode"!==O.termType||O.value===v)return;const D=O.value,B=this.hashRelatedBlankNode(D,A,y,T),I=S.get(B);I?I.push(D):S.set(B,[D])}_useCanonicalId({component:A}){return"BlankNode"!==A.termType||A.value.startsWith(this.canonicalIssuer.prefix)?A:{termType:"BlankNode",value:this.canonicalIssuer.getId(A.value)}}}},{"./IdentifierIssuer":47,"./MessageDigest":48,"./NQuads":49,"./Permuter":50}],53:[function(Q,xe,me){"use strict";const Y=Q("./URDNA2015");xe.exports=class extends Y{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,se,K){return"BlankNode"!==se.termType?se:"graph"===K?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:se.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,se){var K=this;return gt(function*(){const E=new Map,A=K.blankNodeInfo.get(F).quads;let O=0;for(const T of A){let v,y;if("BlankNode"===T.subject.termType&&T.subject.value!==F)y=T.subject.value,v="p";else{if("BlankNode"!==T.object.termType||T.object.value===F)continue;y=T.object.value,v="r"}++O%100==0&&(yield K._yield());const S=yield K.hashRelatedBlankNode(y,T,se,v),D=E.get(S);D?D.push(y):E.set(S,[y])}return E})()}}},{"./URDNA2015":51}],54:[function(Q,xe,me){"use strict";const Y=Q("./URDNA2015Sync");xe.exports=class extends Y{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,se,K){return"BlankNode"!==se.termType?se:"graph"===K?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:se.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,se){const K=new Map,E=this.blankNodeInfo.get(F).quads;for(const A of E){let O,T;if("BlankNode"===A.subject.termType&&A.subject.value!==F)T=A.subject.value,O="p";else{if("BlankNode"!==A.object.termType||A.object.value===F)continue;T=A.object.value,O="r"}const v=this.hashRelatedBlankNode(T,A,se,O),y=K.get(v);y?y.push(T):K.set(v,[T])}return K}}},{"./URDNA2015Sync":52}],55:[function(Q,xe,me){"use strict";const Y=Q("./URDNA2015"),z=Q("./URGNA2012"),F=Q("./URDNA2015Sync"),se=Q("./URGNA2012Sync");let K;try{K=Q("rdf-canonize-native")}catch(A){}const E={};xe.exports=E,E.NQuads=Q("./NQuads"),E.IdentifierIssuer=Q("./IdentifierIssuer"),E._rdfCanonizeNative=function(A){return A&&(K=A),K},E.canonize=function(){var A=gt(function*(O,T){if(Array.isArray(O)||(O=E.NQuads.legacyDatasetToQuads(O)),T.useNative){if(!K)throw new Error("rdf-canonize-native not available");return new Promise((v,y)=>K.canonize(O,T,(S,D)=>S?y(S):v(D)))}if("URDNA2015"===T.algorithm)return new Y(T).main(O);if("URGNA2012"===T.algorithm)return new z(T).main(O);throw"algorithm"in T?new Error("Invalid RDF Dataset Canonicalization algorithm: "+T.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(O,T){return A.apply(this,arguments)}}(),E._canonizeSync=function(A,O){if(Array.isArray(A)||(A=E.NQuads.legacyDatasetToQuads(A)),O.useNative){if(K)return K.canonizeSync(A,O);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===O.algorithm)return new F(O).main(A);if("URGNA2012"===O.algorithm)return new se(O).main(A);throw"algorithm"in O?new Error("Invalid RDF Dataset Canonicalization algorithm: "+O.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":47,"./NQuads":49,"./URDNA2015":51,"./URDNA2015Sync":52,"./URGNA2012":53,"./URGNA2012Sync":54,"rdf-canonize-native":3}],56:[function(Q,xe,me){"use strict";var Y=this&&this.__createBinding||(Object.create?function(F,se,K,E){void 0===E&&(E=K),Object.defineProperty(F,E,{enumerable:!0,get:function(){return se[K]}})}:function(F,se,K,E){void 0===E&&(E=K),F[E]=se[K]}),z=this&&this.__exportStar||function(F,se){for(var K in F)"default"!==K&&!Object.prototype.hasOwnProperty.call(se,K)&&Y(se,F,K)};Object.defineProperty(me,"__esModule",{value:!0}),z(Q("./lib/BlankNode"),me),z(Q("./lib/DataFactory"),me),z(Q("./lib/DefaultGraph"),me),z(Q("./lib/Literal"),me),z(Q("./lib/NamedNode"),me),z(Q("./lib/Quad"),me),z(Q("./lib/Variable"),me)},{"./lib/BlankNode":57,"./lib/DataFactory":58,"./lib/DefaultGraph":59,"./lib/Literal":60,"./lib/NamedNode":61,"./lib/Quad":62,"./lib/Variable":63}],57:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BlankNode=void 0;me.BlankNode=class{constructor(F){this.termType="BlankNode",this.value=F}equals(F){return!!F&&"BlankNode"===F.termType&&F.value===this.value}}},{}],58:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.DataFactory=void 0;const Y=Q("./BlankNode"),z=Q("./DefaultGraph"),F=Q("./Literal"),se=Q("./NamedNode"),K=Q("./Quad"),E=Q("./Variable");let A=0;me.DataFactory=class{constructor(v){this.blankNodeCounter=0,this.blankNodePrefix=(v=v||{}).blankNodePrefix||`df_${A++}_`}namedNode(v){return new se.NamedNode(v)}blankNode(v){return new Y.BlankNode(v||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(v,y){return new F.Literal(v,y)}variable(v){return new E.Variable(v)}defaultGraph(){return z.DefaultGraph.INSTANCE}quad(v,y,S,D){return new K.Quad(v,y,S,D||this.defaultGraph())}fromTerm(v){switch(v.termType){case"NamedNode":return this.namedNode(v.value);case"BlankNode":return this.blankNode(v.value);case"Literal":return v.language?this.literal(v.value,v.language):v.datatype.equals(F.Literal.XSD_STRING)?this.literal(v.value):this.literal(v.value,this.fromTerm(v.datatype));case"Variable":return this.variable(v.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(v.subject),this.fromTerm(v.predicate),this.fromTerm(v.object),this.fromTerm(v.graph))}}fromQuad(v){return this.fromTerm(v)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},{"./BlankNode":57,"./DefaultGraph":59,"./Literal":60,"./NamedNode":61,"./Quad":62,"./Variable":63}],59:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.DefaultGraph=void 0;class Y{constructor(){this.termType="DefaultGraph",this.value=""}equals(F){return!!F&&"DefaultGraph"===F.termType}}me.DefaultGraph=Y,Y.INSTANCE=new Y},{}],60:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Literal=void 0;const Y=Q("./NamedNode");class z{constructor(se,K){this.termType="Literal",this.value=se,"string"==typeof K?(this.language=K,this.datatype=z.RDF_LANGUAGE_STRING):K?(this.language="",this.datatype=K):(this.language="",this.datatype=z.XSD_STRING)}equals(se){return!!se&&"Literal"===se.termType&&se.value===this.value&&se.language===this.language&&se.datatype.equals(this.datatype)}}me.Literal=z,z.RDF_LANGUAGE_STRING=new Y.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),z.XSD_STRING=new Y.NamedNode("http://www.w3.org/2001/XMLSchema#string")},{"./NamedNode":61}],61:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.NamedNode=void 0;me.NamedNode=class{constructor(F){this.termType="NamedNode",this.value=F}equals(F){return!!F&&"NamedNode"===F.termType&&F.value===this.value}}},{}],62:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Quad=void 0;me.Quad=class{constructor(F,se,K,E){this.termType="Quad",this.value="",this.subject=F,this.predicate=se,this.object=K,this.graph=E}equals(F){return!!F&&("Quad"===F.termType||!F.termType)&&this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)&&this.graph.equals(F.graph)}}},{}],63:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Variable=void 0;me.Variable=class{constructor(F){this.termType="Variable",this.value=F}equals(F){return!!F&&"Variable"===F.termType&&F.value===this.value}}},{}],64:[function(Q,xe,me){"use strict";var Y=this&&this.__createBinding||(Object.create?function(F,se,K,E){void 0===E&&(E=K),Object.defineProperty(F,E,{enumerable:!0,get:function(){return se[K]}})}:function(F,se,K,E){void 0===E&&(E=K),F[E]=se[K]}),z=this&&this.__exportStar||function(F,se){for(var K in F)"default"!==K&&!Object.prototype.hasOwnProperty.call(se,K)&&Y(se,F,K)};Object.defineProperty(me,"__esModule",{value:!0}),z(Q("./lib/RdfXmlParser"),me)},{"./lib/RdfXmlParser":66}],65:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ParseError=void 0;class Y extends Error{constructor(F,se){const K=F.saxStream._parser;super(F.trackPosition?`Line ${K.line+1} column ${K.column+1}: ${se}`:se)}}me.ParseError=Y},{}],66:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ParseType=me.RdfXmlParser=void 0;const Y=Q("relative-to-absolute-iri"),z=Q("sax"),F=Q("stream"),se=Q("./ParseError"),K=Q("rdf-data-factory");class E extends F.Transform{constructor(T){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},T&&(Object.assign(this,T),this.options=T),this.dataFactory||(this.dataFactory=new K.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.saxStream=z.createStream(this.strict,{xmlns:!1,position:this.trackPosition}),this.strict||(this.saxStream._parser.looseCase="toString"),this.attachSaxListeners()}static parseNamespace(T,v){const y={};let S=!1;for(const B in T.attributes)B.startsWith("xmlns")&&(5===B.length?(S=!0,y[""]=T.attributes[B]):":"===B.charAt(5)&&(S=!0,y[B.substr(6)]=T.attributes[B]));const D=v&&v.ns?v.ns:[E.DEFAULT_NS];return S?D.concat([y]):D}static expandPrefixedTerm(T,v,y){const S=T.indexOf(":");let D,B;S>=0?(D=T.substr(0,S),B=T.substr(S+1)):(D="",B=T);let I=null,q=null;for(let Z=v.length-1;Z>=0;Z--){const M=v[Z][D];if(M){I=M;break}q||(q=v[Z][""])}if(!I){if(D&&"xmlns"!==D)throw new se.ParseError(y,`The prefix '${D}' in term '${T}' was not bound.`);I=q||""}return{prefix:D,local:B,uri:I}}static isValidIri(T){return E.IRI_REGEX.test(T)}import(T){const v=new F.PassThrough({readableObjectMode:!0});T.on("error",S=>y.emit("error",S)),T.on("data",S=>v.push(S)),T.on("end",()=>v.push(null));const y=v.pipe(new E(this.options));return y}_transform(T,v,y){try{this.saxStream.write(T,v)}catch(S){return y(S)}y()}newParseError(T){return new se.ParseError(this,T)}valueToUri(T,v){return this.uriToNamedNode(Y.resolve(T,v.baseIRI))}uriToNamedNode(T){if(!E.isValidIri(T))throw this.newParseError(`Invalid URI: ${T}`);return this.dataFactory.namedNode(T)}validateNcname(T){if(!E.NCNAME_MATCHER.test(T))throw this.newParseError(`Not a valid NCName: ${T}`)}attachSaxListeners(){this.saxStream.on("error",T=>this.emit("error",T)),this.saxStream.on("opentag",this.onTag.bind(this)),this.saxStream.on("text",this.onText.bind(this)),this.saxStream.on("closetag",this.onCloseTag.bind(this)),this.saxStream.on("doctype",this.onDoctype.bind(this))}onTag(T){const v=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let y=A.RESOURCE;if(v&&(v.hadChildren=!0,y=v.childrenParseType),v&&v.childrenStringTags){const D=T.name;let B="";for(const M in T.attributes)B+=` ${M}="${T.attributes[M]}"`;v.childrenStringTags.push(`<${D}${B}>`);const Z={childrenStringTags:v.childrenStringTags};return Z.childrenStringEmitClosingTag=`</${D}>`,void this.activeTagStack.push(Z)}const S={};v?(S.language=v.language,S.baseIRI=v.baseIRI):S.baseIRI=this.baseIRI,this.activeTagStack.push(S),S.ns=E.parseNamespace(T,v),y===A.RESOURCE?this.onTagResource(T,S,v,!v):this.onTagProperty(T,S,v)}onTagResource(T,v,y,S){const D=E.expandPrefixedTerm(T.name,v.ns,this);v.childrenParseType=A.PROPERTY;let B=!0;if(D.uri===E.RDF){if(!S&&E.FORBIDDEN_NODE_ELEMENTS.indexOf(D.local)>=0)throw this.newParseError(`Illegal node element name: ${D.local}`);switch(D.local){case"RDF":v.childrenParseType=A.RESOURCE;case"Description":B=!1}}const I=[],q=[];let Z=null,M=!1,N=!1,ee=null;for(const C in T.attributes){const U=T.attributes[C],re=E.expandPrefixedTerm(C,v.ns,this);if(y&&re.uri===E.RDF)switch(re.local){case"about":if(Z)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${U} and ${Z} where found.`);Z=U;continue;case"ID":if(Z)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${U} and ${Z} where found.`);this.validateNcname(U),Z="#"+U,M=!0;continue;case"nodeID":if(Z)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${U} and ${Z} where found.`);this.validateNcname(U),Z=U,N=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":ee=U;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(re.uri===E.XML){if("lang"===re.local){v.language=""===U?null:U.toLowerCase();continue}if("base"===re.local){v.baseIRI=Y.resolve(U,v.baseIRI);continue}}"xml"!==re.prefix&&re.uri&&(I.push(this.uriToNamedNode(re.uri+re.local)),q.push(U))}if(null!==Z&&(v.subject=N?this.dataFactory.blankNode(Z):this.valueToUri(Z,v),M&&this.claimNodeId(v.subject)),v.subject||(v.subject=this.dataFactory.blankNode()),B){const C=this.uriToNamedNode(D.uri+D.local);this.emitTriple(v.subject,this.dataFactory.namedNode(E.RDF+"type"),C,y?y.reifiedStatementId:null)}if(y){if(y.predicate)if(y.childrenCollectionSubject){const C=this.dataFactory.blankNode();this.emitTriple(y.childrenCollectionSubject,y.childrenCollectionPredicate,C,y.reifiedStatementId),this.emitTriple(C,this.dataFactory.namedNode(E.RDF+"first"),v.subject,v.reifiedStatementId),y.childrenCollectionSubject=C,y.childrenCollectionPredicate=this.dataFactory.namedNode(E.RDF+"rest")}else{this.emitTriple(y.subject,y.predicate,v.subject,y.reifiedStatementId);for(let C=0;C<y.predicateSubPredicates.length;C++)this.emitTriple(v.subject,y.predicateSubPredicates[C],y.predicateSubObjects[C],null);y.predicateSubPredicates=[],y.predicateSubObjects=[],y.predicateEmitted=!0}for(let C=0;C<I.length;C++){const U=this.dataFactory.literal(q[C],v.datatype||v.language);this.emitTriple(v.subject,I[C],U,y.reifiedStatementId)}ee&&this.emitTriple(v.subject,this.dataFactory.namedNode(E.RDF+"type"),this.uriToNamedNode(ee),null)}}onTagProperty(T,v,y){const S=E.expandPrefixedTerm(T.name,v.ns,this);if(v.childrenParseType=A.RESOURCE,v.subject=y.subject,S.uri===E.RDF&&"li"===S.local?(y.listItemCounter||(y.listItemCounter=1),v.predicate=this.uriToNamedNode(S.uri+"_"+y.listItemCounter++)):v.predicate=this.uriToNamedNode(S.uri+S.local),S.uri===E.RDF&&E.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(S.local)>=0)throw this.newParseError(`Illegal property element name: ${S.local}`);v.predicateSubPredicates=[],v.predicateSubObjects=[];let D=!1,B=!1,I=null,q=!0;const Z=[],M=[];for(const N in T.attributes){const ee=T.attributes[N],C=E.expandPrefixedTerm(N,v.ns,this);if(C.uri===E.RDF)switch(C.local){case"resource":if(I)throw this.newParseError(`Found both rdf:resource (${ee}) and rdf:nodeID (${I}).`);if(D)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${ee})`);v.hadChildren=!0,I=ee,q=!1;continue;case"datatype":if(B)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${ee}).`);if(D)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${ee})`);v.datatype=this.valueToUri(ee,v);continue;case"nodeID":if(B)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${ee}).`);if(v.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${ee}).`);if(D)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${ee})`);this.validateNcname(ee),v.hadChildren=!0,I=ee,q=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(B)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(v.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${v.datatype.value})`);if(I)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${I})`);if("Resource"===ee){D=!0,v.childrenParseType=A.PROPERTY;const U=this.dataFactory.blankNode();this.emitTriple(v.subject,v.predicate,U,v.reifiedStatementId),v.subject=U,v.predicate=null}else"Collection"===ee?(D=!0,v.hadChildren=!0,v.childrenCollectionSubject=v.subject,v.childrenCollectionPredicate=v.predicate,q=!1):"Literal"===ee&&(D=!0,v.childrenTagsToString=!0,v.childrenStringTags=[]);continue;case"ID":this.validateNcname(ee),v.reifiedStatementId=this.valueToUri("#"+ee,v),this.claimNodeId(v.reifiedStatementId);continue}else if(C.uri===E.XML&&"lang"===C.local){v.language=""===ee?null:ee.toLowerCase();continue}if("xml"!==C.prefix&&"xmlns"!==C.prefix&&C.uri){if(D||v.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${ee}`);v.hadChildren=!0,B=!0,Z.push(this.uriToNamedNode(C.uri+C.local)),M.push(this.dataFactory.literal(ee,v.datatype||v.language))}}if(null!==I){const N=v.subject;v.subject=q?this.dataFactory.blankNode(I):this.valueToUri(I,v),this.emitTriple(N,v.predicate,v.subject,v.reifiedStatementId);for(let ee=0;ee<Z.length;ee++)this.emitTriple(v.subject,Z[ee],M[ee],null);v.predicateEmitted=!0}else q&&(v.predicateSubPredicates=Z,v.predicateSubObjects=M,v.predicateEmitted=!1)}emitTriple(T,v,y,S){this.push(this.dataFactory.quad(T,v,y,this.defaultGraph)),S&&(this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"type"),this.dataFactory.namedNode(E.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"subject"),T,this.defaultGraph)),this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"predicate"),v,this.defaultGraph)),this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"object"),y,this.defaultGraph)))}claimNodeId(T){if(!this.allowDuplicateRdfIds){if(this.nodeIds[T.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${T.value}'.`);this.nodeIds[T.value]=!0}}onText(T){const v=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;v&&(v.childrenStringTags?v.childrenStringTags.push(T):v.predicate&&(v.text=T))}onCloseTag(){const T=this.activeTagStack.pop();if(T.childrenStringEmitClosingTag&&T.childrenStringTags.push(T.childrenStringEmitClosingTag),T.childrenTagsToString&&(T.datatype=this.dataFactory.namedNode(E.RDF+"XMLLiteral"),T.text=T.childrenStringTags.join(""),T.hadChildren=!1),T.childrenCollectionSubject)this.emitTriple(T.childrenCollectionSubject,T.childrenCollectionPredicate,this.dataFactory.namedNode(E.RDF+"nil"),T.reifiedStatementId);else if(T.predicate)if(T.hadChildren||T.childrenParseType===A.PROPERTY){if(!T.predicateEmitted){const v=this.dataFactory.blankNode();this.emitTriple(T.subject,T.predicate,v,T.reifiedStatementId);for(let y=0;y<T.predicateSubPredicates.length;y++)this.emitTriple(v,T.predicateSubPredicates[y],T.predicateSubObjects[y],null)}}else this.emitTriple(T.subject,T.predicate,this.dataFactory.literal(T.text||"",T.datatype||T.language),T.reifiedStatementId)}onDoctype(T){T.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(v,y,S)=>(this.saxStream._parser.ENTITIES[y]=S,""))}}var A,O;me.RdfXmlParser=E,E.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*):[^ "<>{}|\\\[\]`]*$/,E.MIME_TYPE="application/rdf+xml",E.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",E.XML="http://www.w3.org/XML/1998/namespace",E.XMLNS="http://www.w3.org/2000/xmlns/",E.DEFAULT_NS={xml:E.XML},E.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],E.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],E.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,(O=A=me.ParseType||(me.ParseType={}))[O.RESOURCE=0]="RESOURCE",O[O.PROPERTY=1]="PROPERTY"},{"./ParseError":65,"rdf-data-factory":56,"relative-to-absolute-iri":82,sax:85,stream:87}],67:[function(Q,xe,me){"use strict";var z={};function F(O,T,v){v||(v=Error);var S=function(D){function B(I,q,Z){return D.call(this,function(D,B,I){return"string"==typeof T?T:T(D,B,I)}(I,q,Z))||this}return function(O,T){O.prototype=Object.create(T.prototype),O.prototype.constructor=O,O.__proto__=T}(B,D),B}(v);S.prototype.name=v.name,S.prototype.code=O,z[O]=S}function se(O,T){if(Array.isArray(O)){var v=O.length;return O=O.map(function(y){return String(y)}),v>2?"one of ".concat(T," ").concat(O.slice(0,v-1).join(", "),", or ")+O[v-1]:2===v?"one of ".concat(T," ").concat(O[0]," or ").concat(O[1]):"of ".concat(T," ").concat(O[0])}return"of ".concat(T," ").concat(String(O))}F("ERR_INVALID_OPT_VALUE",function(O,T){return'The value "'+T+'" is invalid for option "'+O+'"'},TypeError),F("ERR_INVALID_ARG_TYPE",function(O,T,v){var y,S;if("string"==typeof T&&function(O,T,v){return O.substr(!v||v<0?0:+v,T.length)===T}(T,"not ")?(y="must not be",T=T.replace(/^not /,"")):y="must be",function(O,T,v){return(void 0===v||v>O.length)&&(v=O.length),O.substring(v-T.length,v)===T}(O," argument"))S="The ".concat(O," ").concat(y," ").concat(se(T,"type"));else{var D=function(O,T,v){return"number"!=typeof v&&(v=0),!(v+T.length>O.length)&&-1!==O.indexOf(T,v)}(O,".")?"property":"argument";S='The "'.concat(O,'" ').concat(D," ").concat(y," ").concat(se(T,"type"))}return S+". Received type ".concat(typeof v)},TypeError),F("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),F("ERR_METHOD_NOT_IMPLEMENTED",function(O){return"The "+O+" method is not implemented"}),F("ERR_STREAM_PREMATURE_CLOSE","Premature close"),F("ERR_STREAM_DESTROYED",function(O){return"Cannot call "+O+" after a stream was destroyed"}),F("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),F("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),F("ERR_STREAM_WRITE_AFTER_END","write after end"),F("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),F("ERR_UNKNOWN_ENCODING",function(O){return"Unknown encoding: "+O},TypeError),F("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),xe.exports.codes=z},{}],68:[function(Q,xe,me){(function(Y){(function(){"use strict";var z=Object.keys||function(y){var S=[];for(var D in y)S.push(D);return S};xe.exports=O;var F=Q("./_stream_readable"),se=Q("./_stream_writable");Q("inherits")(O,F);for(var K=z(se.prototype),E=0;E<K.length;E++){var A=K[E];O.prototype[A]||(O.prototype[A]=se.prototype[A])}function O(y){if(!(this instanceof O))return new O(y);F.call(this,y),se.call(this,y),this.allowHalfOpen=!0,y&&(!1===y.readable&&(this.readable=!1),!1===y.writable&&(this.writable=!1),!1===y.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||Y.nextTick(v,this)}function v(y){y.end()}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(S){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})}).call(this)}).call(this,Q("_process"))},{"./_stream_readable":70,"./_stream_writable":72,_process:44,inherits:10}],69:[function(Q,xe,me){"use strict";xe.exports=z;var Y=Q("./_stream_transform");function z(F){if(!(this instanceof z))return new z(F);Y.call(this,F)}Q("inherits")(z,Y),z.prototype._transform=function(F,se,K){K(null,F)}},{"./_stream_transform":71,inherits:10}],70:[function(Q,xe,me){(function(Y,z){(function(){"use strict";var F;xe.exports=X,X.ReadableState=ue,Q("events");var K=function(j,R){return j.listeners(R).length},E=Q("./internal/streams/stream"),A=Q("buffer").Buffer,O=z.Uint8Array||function(){};var S,y=Q("util");S=y&&y.debuglog?y.debuglog("stream"):function(){};var U,re,de,D=Q("./internal/streams/buffer_list"),B=Q("./internal/streams/destroy"),q=Q("./internal/streams/state").getHighWaterMark,Z=Q("../errors").codes,M=Z.ERR_INVALID_ARG_TYPE,N=Z.ERR_STREAM_PUSH_AFTER_EOF,ee=Z.ERR_METHOD_NOT_IMPLEMENTED,C=Z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Q("inherits")(X,E);var G=B.errorOrDestroy,$=["error","close","destroy","pause","resume"];function ue(ye,j,R){F=F||Q("./_stream_duplex"),"boolean"!=typeof R&&(R=j instanceof F),this.objectMode=!!(ye=ye||{}).objectMode,R&&(this.objectMode=this.objectMode||!!ye.readableObjectMode),this.highWaterMark=q(this,ye,"readableHighWaterMark",R),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ye.emitClose,this.autoDestroy=!!ye.autoDestroy,this.destroyed=!1,this.defaultEncoding=ye.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ye.encoding&&(U||(U=Q("string_decoder/").StringDecoder),this.decoder=new U(ye.encoding),this.encoding=ye.encoding)}function X(ye){if(F=F||Q("./_stream_duplex"),!(this instanceof X))return new X(ye);this._readableState=new ue(ye,this,this instanceof F),this.readable=!0,ye&&("function"==typeof ye.read&&(this._read=ye.read),"function"==typeof ye.destroy&&(this._destroy=ye.destroy)),E.call(this)}function ge(ye,j,R,L,Pe){S("readableAddChunk",j);var wt,et=ye._readableState;if(null===j)et.reading=!1,function(ye,j){if(S("onEofChunk"),!j.ended){if(j.decoder){var R=j.decoder.end();R&&R.length&&(j.buffer.push(R),j.length+=j.objectMode?1:R.length)}j.ended=!0,j.sync?Ve(ye):(j.needReadable=!1,j.emittedReadable||(j.emittedReadable=!0,Le(ye)))}}(ye,et);else if(Pe||(wt=function(ye,j){var R;return!function(ye){return A.isBuffer(ye)||ye instanceof O}(j)&&"string"!=typeof j&&void 0!==j&&!ye.objectMode&&(R=new M("chunk",["string","Buffer","Uint8Array"],j)),R}(et,j)),wt)G(ye,wt);else if(et.objectMode||j&&j.length>0)if("string"!=typeof j&&!et.objectMode&&Object.getPrototypeOf(j)!==A.prototype&&(j=function(ye){return A.from(ye)}(j)),L)et.endEmitted?G(ye,new C):De(ye,et,j,!0);else if(et.ended)G(ye,new N);else{if(et.destroyed)return!1;et.reading=!1,et.decoder&&!R?(j=et.decoder.write(j),et.objectMode||0!==j.length?De(ye,et,j,!1):Se(ye,et)):De(ye,et,j,!1)}else L||(et.reading=!1,Se(ye,et));return!et.ended&&(et.length<et.highWaterMark||0===et.length)}function De(ye,j,R,L){j.flowing&&0===j.length&&!j.sync?(j.awaitDrain=0,ye.emit("data",R)):(j.length+=j.objectMode?1:R.length,L?j.buffer.unshift(R):j.buffer.push(R),j.needReadable&&Ve(ye)),Se(ye,j)}Object.defineProperty(X.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){!this._readableState||(this._readableState.destroyed=j)}}),X.prototype.destroy=B.destroy,X.prototype._undestroy=B.undestroy,X.prototype._destroy=function(ye,j){j(ye)},X.prototype.push=function(ye,j){var L,R=this._readableState;return R.objectMode?L=!0:"string"==typeof ye&&((j=j||R.defaultEncoding)!==R.encoding&&(ye=A.from(ye,j),j=""),L=!0),ge(this,ye,j,!1,L)},X.prototype.unshift=function(ye){return ge(this,ye,null,!0,!1)},X.prototype.isPaused=function(){return!1===this._readableState.flowing},X.prototype.setEncoding=function(ye){U||(U=Q("string_decoder/").StringDecoder);var j=new U(ye);this._readableState.decoder=j,this._readableState.encoding=this._readableState.decoder.encoding;for(var R=this._readableState.buffer.head,L="";null!==R;)L+=j.write(R.data),R=R.next;return this._readableState.buffer.clear(),""!==L&&this._readableState.buffer.push(L),this._readableState.length=L.length,this};var Ze=1073741824;function Je(ye,j){return ye<=0||0===j.length&&j.ended?0:j.objectMode?1:ye!=ye?j.flowing&&j.length?j.buffer.head.data.length:j.length:(ye>j.highWaterMark&&(j.highWaterMark=function(ye){return ye>=Ze?ye=Ze:(ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++),ye}(ye)),ye<=j.length?ye:j.ended?j.length:(j.needReadable=!0,0))}function Ve(ye){var j=ye._readableState;S("emitReadable",j.needReadable,j.emittedReadable),j.needReadable=!1,j.emittedReadable||(S("emitReadable",j.flowing),j.emittedReadable=!0,Y.nextTick(Le,ye))}function Le(ye){var j=ye._readableState;S("emitReadable_",j.destroyed,j.length,j.ended),!j.destroyed&&(j.length||j.ended)&&(ye.emit("readable"),j.emittedReadable=!1),j.needReadable=!j.flowing&&!j.ended&&j.length<=j.highWaterMark,we(ye)}function Se(ye,j){j.readingMore||(j.readingMore=!0,Y.nextTick(Re,ye,j))}function Re(ye,j){for(;!j.reading&&!j.ended&&(j.length<j.highWaterMark||j.flowing&&0===j.length);){var R=j.length;if(S("maybeReadMore read 0"),ye.read(0),R===j.length)break}j.readingMore=!1}function Xe(ye){var j=ye._readableState;j.readableListening=ye.listenerCount("readable")>0,j.resumeScheduled&&!j.paused?j.flowing=!0:ye.listenerCount("data")>0&&ye.resume()}function ze(ye){S("readable nexttick read 0"),ye.read(0)}function J(ye,j){S("resume",j.reading),j.reading||ye.read(0),j.resumeScheduled=!1,ye.emit("resume"),we(ye),j.flowing&&!j.reading&&ye.read(0)}function we(ye){var j=ye._readableState;for(S("flow",j.flowing);j.flowing&&null!==ye.read(););}function ce(ye,j){return 0===j.length?null:(j.objectMode?R=j.buffer.shift():!ye||ye>=j.length?(R=j.decoder?j.buffer.join(""):1===j.buffer.length?j.buffer.first():j.buffer.concat(j.length),j.buffer.clear()):R=j.buffer.consume(ye,j.decoder),R);var R}function ke(ye){var j=ye._readableState;S("endReadable",j.endEmitted),j.endEmitted||(j.ended=!0,Y.nextTick(At,j,ye))}function At(ye,j){if(S("endReadableNT",ye.endEmitted,ye.length),!ye.endEmitted&&0===ye.length&&(ye.endEmitted=!0,j.readable=!1,j.emit("end"),ye.autoDestroy)){var R=j._writableState;(!R||R.autoDestroy&&R.finished)&&j.destroy()}}function pt(ye,j){for(var R=0,L=ye.length;R<L;R++)if(ye[R]===j)return R;return-1}X.prototype.read=function(ye){S("read",ye),ye=parseInt(ye,10);var j=this._readableState,R=ye;if(0!==ye&&(j.emittedReadable=!1),0===ye&&j.needReadable&&((0!==j.highWaterMark?j.length>=j.highWaterMark:j.length>0)||j.ended))return S("read: emitReadable",j.length,j.ended),0===j.length&&j.ended?ke(this):Ve(this),null;if(0===(ye=Je(ye,j))&&j.ended)return 0===j.length&&ke(this),null;var Pe,L=j.needReadable;return S("need readable",L),(0===j.length||j.length-ye<j.highWaterMark)&&S("length less than watermark",L=!0),j.ended||j.reading?S("reading or ended",L=!1):L&&(S("do read"),j.reading=!0,j.sync=!0,0===j.length&&(j.needReadable=!0),this._read(j.highWaterMark),j.sync=!1,j.reading||(ye=Je(R,j))),null===(Pe=ye>0?ce(ye,j):null)?(j.needReadable=j.length<=j.highWaterMark,ye=0):(j.length-=ye,j.awaitDrain=0),0===j.length&&(j.ended||(j.needReadable=!0),R!==ye&&j.ended&&ke(this)),null!==Pe&&this.emit("data",Pe),Pe},X.prototype._read=function(ye){G(this,new ee("_read()"))},X.prototype.pipe=function(ye,j){var R=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=ye;break;case 1:L.pipes=[L.pipes,ye];break;default:L.pipes.push(ye)}L.pipesCount+=1,S("pipe count=%d opts=%j",L.pipesCount,j);var et=j&&!1===j.end||ye===Y.stdout||ye===Y.stderr?ds:Ot;function wt(js,Gi){S("onunpipe"),js===R&&Gi&&!1===Gi.hasUnpiped&&(Gi.hasUnpiped=!0,S("cleanup"),ye.removeListener("close",Hi),ye.removeListener("finish",Bs),ye.removeListener("drain",Mn),ye.removeListener("error",hr),ye.removeListener("unpipe",wt),R.removeListener("end",Ot),R.removeListener("end",ds),R.removeListener("data",br),kn=!0,L.awaitDrain&&(!ye._writableState||ye._writableState.needDrain)&&Mn())}function Ot(){S("onend"),ye.end()}L.endEmitted?Y.nextTick(et):R.once("end",et),ye.on("unpipe",wt);var Mn=function(ye){return function(){var R=ye._readableState;S("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,0===R.awaitDrain&&K(ye,"data")&&(R.flowing=!0,we(ye))}}(R);ye.on("drain",Mn);var kn=!1;function br(js){S("ondata");var Gi=ye.write(js);S("dest.write",Gi),!1===Gi&&((1===L.pipesCount&&L.pipes===ye||L.pipesCount>1&&-1!==pt(L.pipes,ye))&&!kn&&(S("false write response, pause",L.awaitDrain),L.awaitDrain++),R.pause())}function hr(js){S("onerror",js),ds(),ye.removeListener("error",hr),0===K(ye,"error")&&G(ye,js)}function Hi(){ye.removeListener("finish",Bs),ds()}function Bs(){S("onfinish"),ye.removeListener("close",Hi),ds()}function ds(){S("unpipe"),R.unpipe(ye)}return R.on("data",br),function(ye,j,R){if("function"==typeof ye.prependListener)return ye.prependListener(j,R);ye._events&&ye._events[j]?Array.isArray(ye._events[j])?ye._events[j].unshift(R):ye._events[j]=[R,ye._events[j]]:ye.on(j,R)}(ye,"error",hr),ye.once("close",Hi),ye.once("finish",Bs),ye.emit("pipe",R),L.flowing||(S("pipe resume"),R.resume()),ye},X.prototype.unpipe=function(ye){var j=this._readableState,R={hasUnpiped:!1};if(0===j.pipesCount)return this;if(1===j.pipesCount)return ye&&ye!==j.pipes||(ye||(ye=j.pipes),j.pipes=null,j.pipesCount=0,j.flowing=!1,ye&&ye.emit("unpipe",this,R)),this;if(!ye){var L=j.pipes,Pe=j.pipesCount;j.pipes=null,j.pipesCount=0,j.flowing=!1;for(var et=0;et<Pe;et++)L[et].emit("unpipe",this,{hasUnpiped:!1});return this}var wt=pt(j.pipes,ye);return-1===wt||(j.pipes.splice(wt,1),j.pipesCount-=1,1===j.pipesCount&&(j.pipes=j.pipes[0]),ye.emit("unpipe",this,R)),this},X.prototype.addListener=X.prototype.on=function(ye,j){var R=E.prototype.on.call(this,ye,j),L=this._readableState;return"data"===ye?(L.readableListening=this.listenerCount("readable")>0,!1!==L.flowing&&this.resume()):"readable"===ye&&!L.endEmitted&&!L.readableListening&&(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,S("on readable",L.length,L.reading),L.length?Ve(this):L.reading||Y.nextTick(ze,this)),R},X.prototype.removeListener=function(ye,j){var R=E.prototype.removeListener.call(this,ye,j);return"readable"===ye&&Y.nextTick(Xe,this),R},X.prototype.removeAllListeners=function(ye){var j=E.prototype.removeAllListeners.apply(this,arguments);return("readable"===ye||void 0===ye)&&Y.nextTick(Xe,this),j},X.prototype.resume=function(){var ye=this._readableState;return ye.flowing||(S("resume"),ye.flowing=!ye.readableListening,function(ye,j){j.resumeScheduled||(j.resumeScheduled=!0,Y.nextTick(J,ye,j))}(this,ye)),ye.paused=!1,this},X.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},X.prototype.wrap=function(ye){var j=this,R=this._readableState,L=!1;for(var Pe in ye.on("end",function(){if(S("wrapped end"),R.decoder&&!R.ended){var wt=R.decoder.end();wt&&wt.length&&j.push(wt)}j.push(null)}),ye.on("data",function(wt){S("wrapped data"),R.decoder&&(wt=R.decoder.write(wt)),R.objectMode&&null==wt||!(R.objectMode||wt&&wt.length)||j.push(wt)||(L=!0,ye.pause())}),ye)void 0===this[Pe]&&"function"==typeof ye[Pe]&&(this[Pe]=function(Ot){return function(){return ye[Ot].apply(ye,arguments)}}(Pe));for(var et=0;et<$.length;et++)ye.on($[et],this.emit.bind(this,$[et]));return this._read=function(wt){S("wrapped _read",wt),L&&(L=!1,ye.resume())},this},"function"==typeof Symbol&&(X.prototype[Symbol.asyncIterator]=function(){return void 0===re&&(re=Q("./internal/streams/async_iterator")),re(this)}),Object.defineProperty(X.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(X.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(X.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),X._fromList=ce,Object.defineProperty(X.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(X.from=function(ye,j){return void 0===de&&(de=Q("./internal/streams/from")),de(X,ye,j)})}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/async_iterator":73,"./internal/streams/buffer_list":74,"./internal/streams/destroy":75,"./internal/streams/from":77,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,events:8,inherits:10,"string_decoder/":88,util:3}],71:[function(Q,xe,me){"use strict";xe.exports=O;var Y=Q("../errors").codes,z=Y.ERR_METHOD_NOT_IMPLEMENTED,F=Y.ERR_MULTIPLE_CALLBACK,se=Y.ERR_TRANSFORM_ALREADY_TRANSFORMING,K=Y.ERR_TRANSFORM_WITH_LENGTH_0,E=Q("./_stream_duplex");function A(y,S){var D=this._transformState;D.transforming=!1;var B=D.writecb;if(null===B)return this.emit("error",new F);D.writechunk=null,D.writecb=null,null!=S&&this.push(S),B(y);var I=this._readableState;I.reading=!1,(I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}function O(y){if(!(this instanceof O))return new O(y);E.call(this,y),this._transformState={afterTransform:A.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&("function"==typeof y.transform&&(this._transform=y.transform),"function"==typeof y.flush&&(this._flush=y.flush)),this.on("prefinish",T)}function T(){var y=this;"function"!=typeof this._flush||this._readableState.destroyed?v(this,null,null):this._flush(function(S,D){v(y,S,D)})}function v(y,S,D){if(S)return y.emit("error",S);if(null!=D&&y.push(D),y._writableState.length)throw new K;if(y._transformState.transforming)throw new se;return y.push(null)}Q("inherits")(O,E),O.prototype.push=function(y,S){return this._transformState.needTransform=!1,E.prototype.push.call(this,y,S)},O.prototype._transform=function(y,S,D){D(new z("_transform()"))},O.prototype._write=function(y,S,D){var B=this._transformState;if(B.writecb=D,B.writechunk=y,B.writeencoding=S,!B.transforming){var I=this._readableState;(B.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},O.prototype._read=function(y){var S=this._transformState;null===S.writechunk||S.transforming?S.needTransform=!0:(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform))},O.prototype._destroy=function(y,S){E.prototype._destroy.call(this,y,function(D){S(D)})}},{"../errors":67,"./_stream_duplex":68,inherits:10}],72:[function(Q,xe,me){(function(Y,z){(function(){"use strict";function se(we){var ce=this;this.next=null,this.entry=null,this.finish=function(){!function(we,ce,ke){var At=we.entry;for(we.entry=null;At;){var pt=At.callback;ce.pendingcb--,pt(ke),At=At.next}ce.corkedRequestsFree.next=we}(ce,we)}}var K;xe.exports=ue,ue.WritableState=$;var E={deprecate:Q("util-deprecate")},A=Q("./internal/streams/stream"),O=Q("buffer").Buffer,T=z.Uint8Array||function(){};var pe,S=Q("./internal/streams/destroy"),B=Q("./internal/streams/state").getHighWaterMark,I=Q("../errors").codes,q=I.ERR_INVALID_ARG_TYPE,Z=I.ERR_METHOD_NOT_IMPLEMENTED,M=I.ERR_MULTIPLE_CALLBACK,N=I.ERR_STREAM_CANNOT_PIPE,ee=I.ERR_STREAM_DESTROYED,C=I.ERR_STREAM_NULL_VALUES,U=I.ERR_STREAM_WRITE_AFTER_END,re=I.ERR_UNKNOWN_ENCODING,de=S.errorOrDestroy;function G(){}function $(we,ce,ke){K=K||Q("./_stream_duplex"),"boolean"!=typeof ke&&(ke=ce instanceof K),this.objectMode=!!(we=we||{}).objectMode,ke&&(this.objectMode=this.objectMode||!!we.writableObjectMode),this.highWaterMark=B(this,we,"writableHighWaterMark",ke),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===we.decodeStrings),this.defaultEncoding=we.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pt){!function(we,ce){var ke=we._writableState,At=ke.sync,pt=ke.writecb;if("function"!=typeof pt)throw new M;if(function(we){we.writing=!1,we.writecb=null,we.length-=we.writelen,we.writelen=0}(ke),ce)!function(we,ce,ke,At,pt){--ce.pendingcb,ke?(Y.nextTick(pt,At),Y.nextTick(ze,we,ce),we._writableState.errorEmitted=!0,de(we,At)):(pt(At),we._writableState.errorEmitted=!0,de(we,At),ze(we,ce))}(we,ke,At,ce,pt);else{var ye=Re(ke)||we.destroyed;!ye&&!ke.corked&&!ke.bufferProcessing&&ke.bufferedRequest&&Se(we,ke),At?Y.nextTick(Ve,we,ke,ye,pt):Ve(we,ke,ye,pt)}}(ce,pt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==we.emitClose,this.autoDestroy=!!we.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new se(this)}function ue(we){var ce=this instanceof(K=K||Q("./_stream_duplex"));if(!ce&&!pe.call(ue,this))return new ue(we);this._writableState=new $(we,this,ce),this.writable=!0,we&&("function"==typeof we.write&&(this._write=we.write),"function"==typeof we.writev&&(this._writev=we.writev),"function"==typeof we.destroy&&(this._destroy=we.destroy),"function"==typeof we.final&&(this._final=we.final)),A.call(this)}function je(we,ce,ke,At,pt,ye){if(!ke){var j=function(we,ce,ke){return!we.objectMode&&!1!==we.decodeStrings&&"string"==typeof ce&&(ce=O.from(ce,ke)),ce}(ce,At,pt);At!==j&&(ke=!0,pt="buffer",At=j)}var R=ce.objectMode?1:At.length;ce.length+=R;var L=ce.length<ce.highWaterMark;if(L||(ce.needDrain=!0),ce.writing||ce.corked){var Pe=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:At,encoding:pt,isBuf:ke,callback:ye,next:null},Pe?Pe.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else Ze(we,ce,!1,R,At,pt,ye);return L}function Ze(we,ce,ke,At,pt,ye,j){ce.writelen=At,ce.writecb=j,ce.writing=!0,ce.sync=!0,ce.destroyed?ce.onwrite(new ee("write")):ke?we._writev(pt,ce.onwrite):we._write(pt,ye,ce.onwrite),ce.sync=!1}function Ve(we,ce,ke,At){ke||function(we,ce){0===ce.length&&ce.needDrain&&(ce.needDrain=!1,we.emit("drain"))}(we,ce),ce.pendingcb--,At(),ze(we,ce)}function Se(we,ce){ce.bufferProcessing=!0;var ke=ce.bufferedRequest;if(we._writev&&ke&&ke.next){var pt=new Array(ce.bufferedRequestCount),ye=ce.corkedRequestsFree;ye.entry=ke;for(var j=0,R=!0;ke;)pt[j]=ke,ke.isBuf||(R=!1),ke=ke.next,j+=1;pt.allBuffers=R,Ze(we,ce,!0,ce.length,pt,"",ye.finish),ce.pendingcb++,ce.lastBufferedRequest=null,ye.next?(ce.corkedRequestsFree=ye.next,ye.next=null):ce.corkedRequestsFree=new se(ce),ce.bufferedRequestCount=0}else{for(;ke;){var L=ke.chunk;if(Ze(we,ce,!1,ce.objectMode?1:L.length,L,ke.encoding,ke.callback),ke=ke.next,ce.bufferedRequestCount--,ce.writing)break}null===ke&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=ke,ce.bufferProcessing=!1}function Re(we){return we.ending&&0===we.length&&null===we.bufferedRequest&&!we.finished&&!we.writing}function He(we,ce){we._final(function(ke){ce.pendingcb--,ke&&de(we,ke),ce.prefinished=!0,we.emit("prefinish"),ze(we,ce)})}function ze(we,ce){var ke=Re(ce);if(ke&&(function(we,ce){!ce.prefinished&&!ce.finalCalled&&("function"!=typeof we._final||ce.destroyed?(ce.prefinished=!0,we.emit("prefinish")):(ce.pendingcb++,ce.finalCalled=!0,Y.nextTick(He,we,ce)))}(we,ce),0===ce.pendingcb&&(ce.finished=!0,we.emit("finish"),ce.autoDestroy))){var At=we._readableState;(!At||At.autoDestroy&&At.endEmitted)&&we.destroy()}return ke}Q("inherits")(ue,A),$.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,ke=[];ce;)ke.push(ce),ce=ce.next;return ke},function(){try{Object.defineProperty($.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(we){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(pe=Function.prototype[Symbol.hasInstance],Object.defineProperty(ue,Symbol.hasInstance,{value:function(ce){return!!pe.call(this,ce)||this===ue&&ce&&ce._writableState instanceof $}})):pe=function(ce){return ce instanceof this},ue.prototype.pipe=function(){de(this,new N)},ue.prototype.write=function(we,ce,ke){var At=this._writableState,pt=!1,ye=!At.objectMode&&function(we){return O.isBuffer(we)||we instanceof T}(we);return ye&&!O.isBuffer(we)&&(we=function(we){return O.from(we)}(we)),"function"==typeof ce&&(ke=ce,ce=null),ye?ce="buffer":ce||(ce=At.defaultEncoding),"function"!=typeof ke&&(ke=G),At.ending?function(we,ce){var ke=new U;de(we,ke),Y.nextTick(ce,ke)}(this,ke):(ye||function(we,ce,ke,At){var pt;return null===ke?pt=new C:"string"!=typeof ke&&!ce.objectMode&&(pt=new q("chunk",["string","Buffer"],ke)),!pt||(de(we,pt),Y.nextTick(At,pt),!1)}(this,At,we,ke))&&(At.pendingcb++,pt=je(this,At,ye,we,ce,ke)),pt},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){var we=this._writableState;we.corked&&(we.corked--,!we.writing&&!we.corked&&!we.bufferProcessing&&we.bufferedRequest&&Se(this,we))},ue.prototype.setDefaultEncoding=function(ce){if("string"==typeof ce&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new re(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(ue.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ue.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ue.prototype._write=function(we,ce,ke){ke(new Z("_write()"))},ue.prototype._writev=null,ue.prototype.end=function(we,ce,ke){var At=this._writableState;return"function"==typeof we?(ke=we,we=null,ce=null):"function"==typeof ce&&(ke=ce,ce=null),null!=we&&this.write(we,ce),At.corked&&(At.corked=1,this.uncork()),At.ending||function(we,ce,ke){ce.ending=!0,ze(we,ce),ke&&(ce.finished?Y.nextTick(ke):we.once("finish",ke)),ce.ended=!0,we.writable=!1}(this,At,ke),this},Object.defineProperty(ue.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ue.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ce){!this._writableState||(this._writableState.destroyed=ce)}}),ue.prototype.destroy=S.destroy,ue.prototype._undestroy=S.undestroy,ue.prototype._destroy=function(we,ce){ce(we)}}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":67,"./_stream_duplex":68,"./internal/streams/destroy":75,"./internal/streams/state":79,"./internal/streams/stream":80,_process:44,buffer:6,inherits:10,"util-deprecate":90}],73:[function(Q,xe,me){(function(Y){(function(){"use strict";var z;function F(N,ee,C){return ee in N?Object.defineProperty(N,ee,{value:C,enumerable:!0,configurable:!0,writable:!0}):N[ee]=C,N}var se=Q("./end-of-stream"),K=Symbol("lastResolve"),E=Symbol("lastReject"),A=Symbol("error"),O=Symbol("ended"),T=Symbol("lastPromise"),v=Symbol("handlePromise"),y=Symbol("stream");function S(N,ee){return{value:N,done:ee}}function D(N){var ee=N[K];if(null!==ee){var C=N[y].read();null!==C&&(N[T]=null,N[K]=null,N[E]=null,ee(S(C,!1)))}}function B(N){Y.nextTick(D,N)}var q=Object.getPrototypeOf(function(){}),Z=Object.setPrototypeOf((F(z={get stream(){return this[y]},next:function(){var ee=this,C=this[A];if(null!==C)return Promise.reject(C);if(this[O])return Promise.resolve(S(void 0,!0));if(this[y].destroyed)return new Promise(function(G,$){Y.nextTick(function(){ee[A]?$(ee[A]):G(S(void 0,!0))})});var re,U=this[T];if(U)re=new Promise(function(N,ee){return function(C,U){N.then(function(){ee[O]?C(S(void 0,!0)):ee[v](C,U)},U)}}(U,this));else{var de=this[y].read();if(null!==de)return Promise.resolve(S(de,!1));re=new Promise(this[v])}return this[T]=re,re}},Symbol.asyncIterator,function(){return this}),F(z,"return",function(){var ee=this;return new Promise(function(C,U){ee[y].destroy(null,function(re){re?U(re):C(S(void 0,!0))})})}),z),q);xe.exports=function(ee){var C,U=Object.create(Z,(F(C={},y,{value:ee,writable:!0}),F(C,K,{value:null,writable:!0}),F(C,E,{value:null,writable:!0}),F(C,A,{value:null,writable:!0}),F(C,O,{value:ee._readableState.endEmitted,writable:!0}),F(C,v,{value:function(de,G){var $=U[y].read();$?(U[T]=null,U[K]=null,U[E]=null,de(S($,!1))):(U[K]=de,U[E]=G)},writable:!0}),C));return U[T]=null,se(ee,function(re){if(re&&"ERR_STREAM_PREMATURE_CLOSE"!==re.code){var de=U[E];return null!==de&&(U[T]=null,U[K]=null,U[E]=null,de(re)),void(U[A]=re)}var G=U[K];null!==G&&(U[T]=null,U[K]=null,U[E]=null,G(S(void 0,!0))),U[O]=!0}),ee.on("readable",B.bind(null,U)),U}}).call(this)}).call(this,Q("_process"))},{"./end-of-stream":76,_process:44}],74:[function(Q,xe,me){"use strict";function Y(D,B){var I=Object.keys(D);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(D);B&&(q=q.filter(function(Z){return Object.getOwnPropertyDescriptor(D,Z).enumerable})),I.push.apply(I,q)}return I}function F(D,B,I){return B in D?Object.defineProperty(D,B,{value:I,enumerable:!0,configurable:!0,writable:!0}):D[B]=I,D}function K(D,B){for(var I=0;I<B.length;I++){var q=B[I];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(D,q.key,q)}}var O=Q("buffer").Buffer,v=Q("util").inspect,y=v&&v.custom||"inspect";function S(D,B,I){O.prototype.copy.call(D,B,I)}xe.exports=function(){function D(){(function(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}return function(D,B,I){B&&K(D.prototype,B),I&&K(D,I)}(D,[{key:"push",value:function(I){var q={data:I,next:null};this.length>0?this.tail.next=q:this.head=q,this.tail=q,++this.length}},{key:"unshift",value:function(I){var q={data:I,next:this.head};0===this.length&&(this.tail=q),this.head=q,++this.length}},{key:"shift",value:function(){if(0!==this.length){var I=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(0===this.length)return"";for(var q=this.head,Z=""+q.data;q=q.next;)Z+=I+q.data;return Z}},{key:"concat",value:function(I){if(0===this.length)return O.alloc(0);for(var q=O.allocUnsafe(I>>>0),Z=this.head,M=0;Z;)S(Z.data,q,M),M+=Z.data.length,Z=Z.next;return q}},{key:"consume",value:function(I,q){var Z;return I<this.head.data.length?(Z=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):Z=I===this.head.data.length?this.shift():q?this._getString(I):this._getBuffer(I),Z}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var q=this.head,Z=1,M=q.data;for(I-=M.length;q=q.next;){var N=q.data,ee=I>N.length?N.length:I;if(M+=ee===N.length?N:N.slice(0,I),0==(I-=ee)){ee===N.length?(++Z,this.head=q.next?q.next:this.tail=null):(this.head=q,q.data=N.slice(ee));break}++Z}return this.length-=Z,M}},{key:"_getBuffer",value:function(I){var q=O.allocUnsafe(I),Z=this.head,M=1;for(Z.data.copy(q),I-=Z.data.length;Z=Z.next;){var N=Z.data,ee=I>N.length?N.length:I;if(N.copy(q,q.length-I,0,ee),0==(I-=ee)){ee===N.length?(++M,this.head=Z.next?Z.next:this.tail=null):(this.head=Z,Z.data=N.slice(ee));break}++M}return this.length-=M,q}},{key:y,value:function(I,q){return v(this,function(D){for(var B=1;B<arguments.length;B++){var I=null!=arguments[B]?arguments[B]:{};B%2?Y(Object(I),!0).forEach(function(q){F(D,q,I[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(I)):Y(Object(I)).forEach(function(q){Object.defineProperty(D,q,Object.getOwnPropertyDescriptor(I,q))})}return D}({},q,{depth:0,customInspect:!1}))}}]),D}()},{buffer:6,util:3}],75:[function(Q,xe,me){(function(Y){(function(){"use strict";function F(O,T){E(O,T),se(O)}function se(O){O._writableState&&!O._writableState.emitClose||O._readableState&&!O._readableState.emitClose||O.emit("close")}function E(O,T){O.emit("error",T)}xe.exports={destroy:function(O,T){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(T?T(O):O&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Y.nextTick(E,this,O)):Y.nextTick(E,this,O)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(O||null,function(D){!T&&D?v._writableState?v._writableState.errorEmitted?Y.nextTick(se,v):(v._writableState.errorEmitted=!0,Y.nextTick(F,v,D)):Y.nextTick(F,v,D):T?(Y.nextTick(se,v),T(D)):Y.nextTick(se,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(O,T){var v=O._readableState,y=O._writableState;v&&v.autoDestroy||y&&y.autoDestroy?O.destroy(T):O.emit("error",T)}}}).call(this)}).call(this,Q("_process"))},{_process:44}],76:[function(Q,xe,me){"use strict";var Y=Q("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function F(){}xe.exports=function K(E,A,O){if("function"==typeof A)return K(E,null,A);A||(A={}),O=function(E){var A=!1;return function(){if(!A){A=!0;for(var O=arguments.length,T=new Array(O),v=0;v<O;v++)T[v]=arguments[v];E.apply(this,T)}}}(O||F);var T=A.readable||!1!==A.readable&&E.readable,v=A.writable||!1!==A.writable&&E.writable,y=function(){E.writable||D()},S=E._writableState&&E._writableState.finished,D=function(){v=!1,S=!0,T||O.call(E)},B=E._readableState&&E._readableState.endEmitted,I=function(){T=!1,B=!0,v||O.call(E)},q=function(ee){O.call(E,ee)},Z=function(){var ee;return T&&!B?((!E._readableState||!E._readableState.ended)&&(ee=new Y),O.call(E,ee)):v&&!S?((!E._writableState||!E._writableState.ended)&&(ee=new Y),O.call(E,ee)):void 0},M=function(){E.req.on("finish",D)};return function(E){return E.setHeader&&"function"==typeof E.abort}(E)?(E.on("complete",D),E.on("abort",Z),E.req?M():E.on("request",M)):v&&!E._writableState&&(E.on("end",y),E.on("close",y)),E.on("end",I),E.on("finish",D),!1!==A.error&&E.on("error",q),E.on("close",Z),function(){E.removeListener("complete",D),E.removeListener("abort",Z),E.removeListener("request",M),E.req&&E.req.removeListener("finish",D),E.removeListener("end",y),E.removeListener("close",y),E.removeListener("finish",D),E.removeListener("end",I),E.removeListener("error",q),E.removeListener("close",Z)}}},{"../../../errors":67}],77:[function(Q,xe,me){xe.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],78:[function(Q,xe,me){"use strict";var Y;var F=Q("../../../errors").codes,se=F.ERR_MISSING_ARGS,K=F.ERR_STREAM_DESTROYED;function E(D){if(D)throw D}function O(D,B,I,q){q=function(D){var B=!1;return function(){B||(B=!0,D.apply(void 0,arguments))}}(q);var Z=!1;D.on("close",function(){Z=!0}),void 0===Y&&(Y=Q("./end-of-stream")),Y(D,{readable:B,writable:I},function(N){if(N)return q(N);Z=!0,q()});var M=!1;return function(N){if(!Z&&!M){if(M=!0,function(D){return D.setHeader&&"function"==typeof D.abort}(D))return D.abort();if("function"==typeof D.destroy)return D.destroy();q(N||new K("pipe"))}}}function T(D){D()}function v(D,B){return D.pipe(B)}function y(D){return D.length&&"function"==typeof D[D.length-1]?D.pop():E}xe.exports=function(){for(var D=arguments.length,B=new Array(D),I=0;I<D;I++)B[I]=arguments[I];var q=y(B);if(Array.isArray(B[0])&&(B=B[0]),B.length<2)throw new se("streams");var Z,M=B.map(function(N,ee){var C=ee<B.length-1;return O(N,C,ee>0,function(re){Z||(Z=re),re&&M.forEach(T),!C&&(M.forEach(T),q(Z))})});return B.reduce(v)}},{"../../../errors":67,"./end-of-stream":76}],79:[function(Q,xe,me){"use strict";var Y=Q("../../../errors").codes.ERR_INVALID_OPT_VALUE;xe.exports={getHighWaterMark:function(se,K,E,A){var O=function(se,K,E){return null!=se.highWaterMark?se.highWaterMark:K?se[E]:null}(K,A,E);if(null!=O){if(!isFinite(O)||Math.floor(O)!==O||O<0)throw new Y(A?E:"highWaterMark",O);return Math.floor(O)}return se.objectMode?16:16384}}},{"../../../errors":67}],80:[function(Q,xe,me){xe.exports=Q("events").EventEmitter},{events:8}],81:[function(Q,xe,me){(me=xe.exports=Q("./lib/_stream_readable.js")).Stream=me,me.Readable=me,me.Writable=Q("./lib/_stream_writable.js"),me.Duplex=Q("./lib/_stream_duplex.js"),me.Transform=Q("./lib/_stream_transform.js"),me.PassThrough=Q("./lib/_stream_passthrough.js"),me.finished=Q("./lib/internal/streams/end-of-stream.js"),me.pipeline=Q("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":68,"./lib/_stream_passthrough.js":69,"./lib/_stream_readable.js":70,"./lib/_stream_transform.js":71,"./lib/_stream_writable.js":72,"./lib/internal/streams/end-of-stream.js":76,"./lib/internal/streams/pipeline.js":78}],82:[function(Q,xe,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),function(z){for(var F in z)me.hasOwnProperty(F)||(me[F]=z[F])}(Q("./lib/Resolve"))},{"./lib/Resolve":83}],83:[function(Q,xe,me){"use strict";function z(K){const E=[];let A=0;for(;A<K.length;)switch(K[A]){case"/":if("."===K[A+1])if("."===K[A+2]){if(!se(K[A+3])){E.push([]),A++;break}E.pop(),K[A+3]||E.push([]),A+=3}else{if(!se(K[A+2])){E.push([]),A++;break}K[A+2]||E.push([]),A+=2}else E.push([]),A++;break;case"#":case"?":E.length||E.push([]),E[E.length-1].push(K.substr(A)),A=K.length;break;default:E.length||E.push([]),E[E.length-1].push(K[A]),A++}return"/"+E.map(O=>O.join("")).join("/")}function F(K,E){let A=E+1;E>=0?"/"===K[E+1]&&"/"===K[E+2]&&(A=E+3):"/"===K[0]&&"/"===K[1]&&(A=2);const O=K.indexOf("/",A);return O<0?K:K.substr(0,O)+z(K.substr(O))}function se(K){return!K||"#"===K||"?"===K||"/"===K}Object.defineProperty(me,"__esModule",{value:!0}),me.resolve=function(K,E){const A=(E=E||"").indexOf("#");if(A>0&&(E=E.substr(0,A)),!K.length){if(E.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${E}' for value '${K}'`);return E}if(K.startsWith("?")){const B=E.indexOf("?");return B>0&&(E=E.substr(0,B)),E+K}if(K.startsWith("#"))return E+K;if(!E.length){const B=K.indexOf(":");if(B<0)throw new Error(`Found invalid relative IRI '${K}' for a missing baseIRI`);return F(K,B)}const O=K.indexOf(":");if(O>=0)return F(K,O);const T=E.indexOf(":");if(T<0)throw new Error(`Found invalid baseIRI '${E}' for value '${K}'`);const v=E.substr(0,T+1);if(0===K.indexOf("//"))return v+F(K,O);let y;if(E.indexOf("//",T)===T+1){if(y=E.indexOf("/",T+3),y<0)return E.length>T+3?E+"/"+F(K,O):v+F(K,O)}else if(y=E.indexOf("/",T+1),y<0)return v+F(K,O);if(0===K.indexOf("/"))return E.substr(0,y)+z(K);let S=E.substr(y);const D=S.lastIndexOf("/");return D>=0&&D<S.length-1&&(S=S.substr(0,D+1),"."===K[0]&&"."!==K[1]&&"/"!==K[1]&&K[2]&&(K=K.substr(1))),K=z(K=S+K),E.substr(0,y)+K},me.removeDotSegments=z,me.removeDotSegmentsOfPath=F},{}],84:[function(Q,xe,me){var Y=Q("buffer"),z=Y.Buffer;function F(K,E){for(var A in K)E[A]=K[A]}function se(K,E,A){return z(K,E,A)}z.from&&z.alloc&&z.allocUnsafe&&z.allocUnsafeSlow?xe.exports=Y:(F(Y,me),me.Buffer=se),se.prototype=Object.create(z.prototype),F(z,se),se.from=function(K,E,A){if("number"==typeof K)throw new TypeError("Argument must not be a number");return z(K,E,A)},se.alloc=function(K,E,A){if("number"!=typeof K)throw new TypeError("Argument must be a number");var O=z(K);return void 0!==E?"string"==typeof A?O.fill(E,A):O.fill(E):O.fill(0),O},se.allocUnsafe=function(K){if("number"!=typeof K)throw new TypeError("Argument must be a number");return z(K)},se.allocUnsafeSlow=function(K){if("number"!=typeof K)throw new TypeError("Argument must be a number");return Y.SlowBuffer(K)}},{buffer:6}],85:[function(Q,xe,me){(function(Y){(function(){!function(z){z.parser=function(W,J){return new se(W,J)},z.SAXParser=se,z.SAXStream=y,z.createStream=function(W,J){return new y(W,J)},z.MAX_BUFFER_LENGTH=65536;var O,F=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function se(W,J){if(!(this instanceof se))return new se(W,J);var we=this;(function(W){for(var J=0,we=F.length;J<we;J++)W[F[J]]=""})(we),we.q=we.c="",we.bufferCheckPosition=z.MAX_BUFFER_LENGTH,we.opt=J||{},we.opt.lowercase=we.opt.lowercase||we.opt.lowercasetags,we.looseCase=we.opt.lowercase?"toLowerCase":"toUpperCase",we.tags=[],we.closed=we.closedRoot=we.sawRoot=!1,we.tag=we.error=null,we.strict=!!W,we.noscript=!(!W&&!we.opt.noscript),we.state=$.BEGIN,we.strictEntities=we.opt.strictEntities,we.ENTITIES=Object.create(we.strictEntities?z.XML_ENTITIES:z.ENTITIES),we.attribList=[],we.opt.xmlns&&(we.ns=Object.create(q)),we.trackPosition=!1!==we.opt.position,we.trackPosition&&(we.position=we.line=we.column=0),ue(we,"onready")}z.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(W){function J(){}return J.prototype=W,new J}),Object.keys||(Object.keys=function(W){var J=[];for(var we in W)W.hasOwnProperty(we)&&J.push(we);return J}),se.prototype={end:function(){Ze(this)},write:function(W){var J=this;if(this.error)throw this.error;if(J.closed)return je(J,"Cannot write after close. Assign an onready handler.");if(null===W)return Ze(J);"object"==typeof W&&(W=W.toString());for(var we=0,ce="";ce=Xe(W,we++),J.c=ce,ce;)switch(J.trackPosition&&(J.position++,"\n"===ce?(J.line++,J.column=0):J.column++),J.state){case $.BEGIN:if(J.state=$.BEGIN_WHITESPACE,"\ufeff"===ce)continue;He(J,ce);continue;case $.BEGIN_WHITESPACE:He(J,ce);continue;case $.TEXT:if(J.sawRoot&&!J.closedRoot){for(var ke=we-1;ce&&"<"!==ce&&"&"!==ce;)(ce=Xe(W,we++))&&J.trackPosition&&(J.position++,"\n"===ce?(J.line++,J.column=0):J.column++);J.textNode+=W.substring(ke,we-1)}"<"!==ce||J.sawRoot&&J.closedRoot&&!J.strict?(!C(ce)&&(!J.sawRoot||J.closedRoot)&&We(J,"Text data outside of root node."),"&"===ce?J.state=$.TEXT_ENTITY:J.textNode+=ce):(J.state=$.OPEN_WAKA,J.startTagPosition=J.position);continue;case $.SCRIPT:"<"===ce?J.state=$.SCRIPT_ENDING:J.script+=ce;continue;case $.SCRIPT_ENDING:"/"===ce?J.state=$.CLOSE_TAG:(J.script+="<"+ce,J.state=$.SCRIPT);continue;case $.OPEN_WAKA:"!"===ce?(J.state=$.SGML_DECL,J.sgmlDecl=""):C(ce)||(de(Z,ce)?(J.state=$.OPEN_TAG,J.tagName=ce):"/"===ce?(J.state=$.CLOSE_TAG,J.tagName=""):"?"===ce?(J.state=$.PROC_INST,J.procInstName=J.procInstBody=""):(We(J,"Unencoded <"),J.startTagPosition+1<J.position&&(ce=new Array(J.position-J.startTagPosition).join(" ")+ce),J.textNode+="<"+ce,J.state=$.TEXT));continue;case $.SGML_DECL:"[CDATA["===(J.sgmlDecl+ce).toUpperCase()?(X(J,"onopencdata"),J.state=$.CDATA,J.sgmlDecl="",J.cdata=""):J.sgmlDecl+ce==="--"?(J.state=$.COMMENT,J.comment="",J.sgmlDecl=""):"DOCTYPE"===(J.sgmlDecl+ce).toUpperCase()?(J.state=$.DOCTYPE,(J.doctype||J.sawRoot)&&We(J,"Inappropriately located doctype declaration"),J.doctype="",J.sgmlDecl=""):">"===ce?(X(J,"onsgmldeclaration",J.sgmlDecl),J.sgmlDecl="",J.state=$.TEXT):(U(ce)&&(J.state=$.SGML_DECL_QUOTED),J.sgmlDecl+=ce);continue;case $.SGML_DECL_QUOTED:ce===J.q&&(J.state=$.SGML_DECL,J.q=""),J.sgmlDecl+=ce;continue;case $.DOCTYPE:">"===ce?(J.state=$.TEXT,X(J,"ondoctype",J.doctype),J.doctype=!0):(J.doctype+=ce,"["===ce?J.state=$.DOCTYPE_DTD:U(ce)&&(J.state=$.DOCTYPE_QUOTED,J.q=ce));continue;case $.DOCTYPE_QUOTED:J.doctype+=ce,ce===J.q&&(J.q="",J.state=$.DOCTYPE);continue;case $.DOCTYPE_DTD:J.doctype+=ce,"]"===ce?J.state=$.DOCTYPE:U(ce)&&(J.state=$.DOCTYPE_DTD_QUOTED,J.q=ce);continue;case $.DOCTYPE_DTD_QUOTED:J.doctype+=ce,ce===J.q&&(J.state=$.DOCTYPE_DTD,J.q="");continue;case $.COMMENT:"-"===ce?J.state=$.COMMENT_ENDING:J.comment+=ce;continue;case $.COMMENT_ENDING:"-"===ce?(J.state=$.COMMENT_ENDED,J.comment=De(J.opt,J.comment),J.comment&&X(J,"oncomment",J.comment),J.comment=""):(J.comment+="-"+ce,J.state=$.COMMENT);continue;case $.COMMENT_ENDED:">"!==ce?(We(J,"Malformed comment"),J.comment+="--"+ce,J.state=$.COMMENT):J.state=$.TEXT;continue;case $.CDATA:"]"===ce?J.state=$.CDATA_ENDING:J.cdata+=ce;continue;case $.CDATA_ENDING:"]"===ce?J.state=$.CDATA_ENDING_2:(J.cdata+="]"+ce,J.state=$.CDATA);continue;case $.CDATA_ENDING_2:">"===ce?(J.cdata&&X(J,"oncdata",J.cdata),X(J,"onclosecdata"),J.cdata="",J.state=$.TEXT):"]"===ce?J.cdata+="]":(J.cdata+="]]"+ce,J.state=$.CDATA);continue;case $.PROC_INST:"?"===ce?J.state=$.PROC_INST_ENDING:C(ce)?J.state=$.PROC_INST_BODY:J.procInstName+=ce;continue;case $.PROC_INST_BODY:if(!J.procInstBody&&C(ce))continue;"?"===ce?J.state=$.PROC_INST_ENDING:J.procInstBody+=ce;continue;case $.PROC_INST_ENDING:">"===ce?(X(J,"onprocessinginstruction",{name:J.procInstName,body:J.procInstBody}),J.procInstName=J.procInstBody="",J.state=$.TEXT):(J.procInstBody+="?"+ce,J.state=$.PROC_INST_BODY);continue;case $.OPEN_TAG:de(M,ce)?J.tagName+=ce:(Je(J),">"===ce?Le(J):"/"===ce?J.state=$.OPEN_TAG_SLASH:(C(ce)||We(J,"Invalid character in tag name"),J.state=$.ATTRIB));continue;case $.OPEN_TAG_SLASH:">"===ce?(Le(J,!0),Se(J)):(We(J,"Forward-slash in opening tag not followed by >"),J.state=$.ATTRIB);continue;case $.ATTRIB:if(C(ce))continue;">"===ce?Le(J):"/"===ce?J.state=$.OPEN_TAG_SLASH:de(Z,ce)?(J.attribName=ce,J.attribValue="",J.state=$.ATTRIB_NAME):We(J,"Invalid attribute name");continue;case $.ATTRIB_NAME:"="===ce?J.state=$.ATTRIB_VALUE:">"===ce?(We(J,"Attribute without value"),J.attribValue=J.attribName,Ve(J),Le(J)):C(ce)?J.state=$.ATTRIB_NAME_SAW_WHITE:de(M,ce)?J.attribName+=ce:We(J,"Invalid attribute name");continue;case $.ATTRIB_NAME_SAW_WHITE:if("="===ce)J.state=$.ATTRIB_VALUE;else{if(C(ce))continue;We(J,"Attribute without value"),J.tag.attributes[J.attribName]="",J.attribValue="",X(J,"onattribute",{name:J.attribName,value:""}),J.attribName="",">"===ce?Le(J):de(Z,ce)?(J.attribName=ce,J.state=$.ATTRIB_NAME):(We(J,"Invalid attribute name"),J.state=$.ATTRIB)}continue;case $.ATTRIB_VALUE:if(C(ce))continue;U(ce)?(J.q=ce,J.state=$.ATTRIB_VALUE_QUOTED):(We(J,"Unquoted attribute value"),J.state=$.ATTRIB_VALUE_UNQUOTED,J.attribValue=ce);continue;case $.ATTRIB_VALUE_QUOTED:if(ce!==J.q){"&"===ce?J.state=$.ATTRIB_VALUE_ENTITY_Q:J.attribValue+=ce;continue}Ve(J),J.q="",J.state=$.ATTRIB_VALUE_CLOSED;continue;case $.ATTRIB_VALUE_CLOSED:C(ce)?J.state=$.ATTRIB:">"===ce?Le(J):"/"===ce?J.state=$.OPEN_TAG_SLASH:de(Z,ce)?(We(J,"No whitespace between attributes"),J.attribName=ce,J.attribValue="",J.state=$.ATTRIB_NAME):We(J,"Invalid attribute name");continue;case $.ATTRIB_VALUE_UNQUOTED:if(!re(ce)){"&"===ce?J.state=$.ATTRIB_VALUE_ENTITY_U:J.attribValue+=ce;continue}Ve(J),">"===ce?Le(J):J.state=$.ATTRIB;continue;case $.CLOSE_TAG:if(J.tagName)">"===ce?Se(J):de(M,ce)?J.tagName+=ce:J.script?(J.script+="</"+J.tagName,J.tagName="",J.state=$.SCRIPT):(C(ce)||We(J,"Invalid tagname in closing tag"),J.state=$.CLOSE_TAG_SAW_WHITE);else{if(C(ce))continue;G(Z,ce)?J.script?(J.script+="</"+ce,J.state=$.SCRIPT):We(J,"Invalid tagname in closing tag."):J.tagName=ce}continue;case $.CLOSE_TAG_SAW_WHITE:if(C(ce))continue;">"===ce?Se(J):We(J,"Invalid characters in closing tag");continue;case $.TEXT_ENTITY:case $.ATTRIB_VALUE_ENTITY_Q:case $.ATTRIB_VALUE_ENTITY_U:var pt,ye;switch(J.state){case $.TEXT_ENTITY:pt=$.TEXT,ye="textNode";break;case $.ATTRIB_VALUE_ENTITY_Q:pt=$.ATTRIB_VALUE_QUOTED,ye="attribValue";break;case $.ATTRIB_VALUE_ENTITY_U:pt=$.ATTRIB_VALUE_UNQUOTED,ye="attribValue"}";"===ce?(J[ye]+=Re(J),J.entity="",J.state=pt):de(J.entity.length?ee:N,ce)?J.entity+=ce:(We(J,"Invalid character in entity name"),J[ye]+="&"+J.entity+ce,J.entity="",J.state=pt);continue;default:throw new Error(J,"Unknown state: "+J.state)}return J.position>=J.bufferCheckPosition&&function(W){for(var J=Math.max(z.MAX_BUFFER_LENGTH,10),we=0,ce=0,ke=F.length;ce<ke;ce++){var At=W[F[ce]].length;if(At>J)switch(F[ce]){case"textNode":ge(W);break;case"cdata":X(W,"oncdata",W.cdata),W.cdata="";break;case"script":X(W,"onscript",W.script),W.script="";break;default:je(W,"Max buffer length exceeded: "+F[ce])}we=Math.max(we,At)}W.bufferCheckPosition=z.MAX_BUFFER_LENGTH-we+W.position}(J),J},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(W){ge(W),""!==W.cdata&&(X(W,"oncdata",W.cdata),W.cdata=""),""!==W.script&&(X(W,"onscript",W.script),W.script="")}(this)}};try{O=Q("stream").Stream}catch(W){O=function(){}}var T=z.EVENTS.filter(function(W){return"error"!==W&&"end"!==W});function y(W,J){if(!(this instanceof y))return new y(W,J);O.apply(this),this._parser=new se(W,J),this.writable=!0,this.readable=!0;var we=this;this._parser.onend=function(){we.emit("end")},this._parser.onerror=function(ce){we.emit("error",ce),we._parser.error=null},this._decoder=null,T.forEach(function(ce){Object.defineProperty(we,"on"+ce,{get:function(){return we._parser["on"+ce]},set:function(ke){if(!ke)return we.removeAllListeners(ce),we._parser["on"+ce]=ke,ke;we.on(ce,ke)},enumerable:!0,configurable:!1})})}(y.prototype=Object.create(O.prototype,{constructor:{value:y}})).write=function(W){if("function"==typeof Y&&"function"==typeof Y.isBuffer&&Y.isBuffer(W)){if(!this._decoder){var J=Q("string_decoder").StringDecoder;this._decoder=new J("utf8")}W=this._decoder.write(W)}return this._parser.write(W.toString()),this.emit("data",W),!0},y.prototype.end=function(W){return W&&W.length&&this.write(W),this._parser.end(),!0},y.prototype.on=function(W,J){var we=this;return!we._parser["on"+W]&&-1!==T.indexOf(W)&&(we._parser["on"+W]=function(){var ce=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);ce.splice(0,0,W),we.emit.apply(we,ce)}),O.prototype.on.call(we,W,J)};var B="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",q={xml:B,xmlns:I},Z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function C(W){return" "===W||"\n"===W||"\r"===W||"\t"===W}function U(W){return'"'===W||"'"===W}function re(W){return">"===W||C(W)}function de(W,J){return W.test(J)}function G(W,J){return!de(W,J)}var W,J,we,$=0;for(var pe in z.STATE={BEGIN:$++,BEGIN_WHITESPACE:$++,TEXT:$++,TEXT_ENTITY:$++,OPEN_WAKA:$++,SGML_DECL:$++,SGML_DECL_QUOTED:$++,DOCTYPE:$++,DOCTYPE_QUOTED:$++,DOCTYPE_DTD:$++,DOCTYPE_DTD_QUOTED:$++,COMMENT_STARTING:$++,COMMENT:$++,COMMENT_ENDING:$++,COMMENT_ENDED:$++,CDATA:$++,CDATA_ENDING:$++,CDATA_ENDING_2:$++,PROC_INST:$++,PROC_INST_BODY:$++,PROC_INST_ENDING:$++,OPEN_TAG:$++,OPEN_TAG_SLASH:$++,ATTRIB:$++,ATTRIB_NAME:$++,ATTRIB_NAME_SAW_WHITE:$++,ATTRIB_VALUE:$++,ATTRIB_VALUE_QUOTED:$++,ATTRIB_VALUE_CLOSED:$++,ATTRIB_VALUE_UNQUOTED:$++,ATTRIB_VALUE_ENTITY_Q:$++,ATTRIB_VALUE_ENTITY_U:$++,CLOSE_TAG:$++,CLOSE_TAG_SAW_WHITE:$++,SCRIPT:$++,SCRIPT_ENDING:$++},z.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},z.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(z.ENTITIES).forEach(function(W){var J=z.ENTITIES[W],we="number"==typeof J?String.fromCharCode(J):J;z.ENTITIES[W]=we}),z.STATE)z.STATE[z.STATE[pe]]=pe;function ue(W,J,we){W[J]&&W[J](we)}function X(W,J,we){W.textNode&&ge(W),ue(W,J,we)}function ge(W){W.textNode=De(W.opt,W.textNode),W.textNode&&ue(W,"ontext",W.textNode),W.textNode=""}function De(W,J){return W.trim&&(J=J.trim()),W.normalize&&(J=J.replace(/\s+/g," ")),J}function je(W,J){return ge(W),W.trackPosition&&(J+="\nLine: "+W.line+"\nColumn: "+W.column+"\nChar: "+W.c),J=new Error(J),W.error=J,ue(W,"onerror",J),W}function Ze(W){return W.sawRoot&&!W.closedRoot&&We(W,"Unclosed root tag"),W.state!==$.BEGIN&&W.state!==$.BEGIN_WHITESPACE&&W.state!==$.TEXT&&je(W,"Unexpected end"),ge(W),W.c="",W.closed=!0,ue(W,"onend"),se.call(W,W.strict,W.opt),W}function We(W,J){if("object"!=typeof W||!(W instanceof se))throw new Error("bad call to strictFail");W.strict&&je(W,J)}function Je(W){W.strict||(W.tagName=W.tagName[W.looseCase]());var J=W.tags[W.tags.length-1]||W,we=W.tag={name:W.tagName,attributes:{}};W.opt.xmlns&&(we.ns=J.ns),W.attribList.length=0,X(W,"onopentagstart",we)}function Ye(W,J){var ce=W.indexOf(":")<0?["",W]:W.split(":"),ke=ce[0],At=ce[1];return J&&"xmlns"===W&&(ke="xmlns",At=""),{prefix:ke,local:At}}function Ve(W){if(W.strict||(W.attribName=W.attribName[W.looseCase]()),-1!==W.attribList.indexOf(W.attribName)||W.tag.attributes.hasOwnProperty(W.attribName))W.attribName=W.attribValue="";else{if(W.opt.xmlns){var J=Ye(W.attribName,!0),ce=J.local;if("xmlns"===J.prefix)if("xml"===ce&&W.attribValue!==B)We(W,"xml: prefix must be bound to "+B+"\nActual: "+W.attribValue);else if("xmlns"===ce&&W.attribValue!==I)We(W,"xmlns: prefix must be bound to "+I+"\nActual: "+W.attribValue);else{var ke=W.tag,At=W.tags[W.tags.length-1]||W;ke.ns===At.ns&&(ke.ns=Object.create(At.ns)),ke.ns[ce]=W.attribValue}W.attribList.push([W.attribName,W.attribValue])}else W.tag.attributes[W.attribName]=W.attribValue,X(W,"onattribute",{name:W.attribName,value:W.attribValue});W.attribName=W.attribValue=""}}function Le(W,J){if(W.opt.xmlns){var we=W.tag,ce=Ye(W.tagName);we.prefix=ce.prefix,we.local=ce.local,we.uri=we.ns[ce.prefix]||"",we.prefix&&!we.uri&&(We(W,"Unbound namespace prefix: "+JSON.stringify(W.tagName)),we.uri=ce.prefix),we.ns&&(W.tags[W.tags.length-1]||W).ns!==we.ns&&Object.keys(we.ns).forEach(function(Mn){X(W,"onopennamespace",{prefix:Mn,uri:we.ns[Mn]})});for(var At=0,pt=W.attribList.length;At<pt;At++){var ye=W.attribList[At],j=ye[0],R=ye[1],L=Ye(j,!0),Pe=L.prefix,wt=""===Pe?"":we.ns[Pe]||"",Ot={name:j,value:R,prefix:Pe,local:L.local,uri:wt};Pe&&"xmlns"!==Pe&&!wt&&(We(W,"Unbound namespace prefix: "+JSON.stringify(Pe)),Ot.uri=Pe),W.tag.attributes[j]=Ot,X(W,"onattribute",Ot)}W.attribList.length=0}W.tag.isSelfClosing=!!J,W.sawRoot=!0,W.tags.push(W.tag),X(W,"onopentag",W.tag),J||(W.state=W.noscript||"script"!==W.tagName.toLowerCase()?$.TEXT:$.SCRIPT,W.tag=null,W.tagName=""),W.attribName=W.attribValue="",W.attribList.length=0}function Se(W){if(!W.tagName)return We(W,"Weird empty close tag."),W.textNode+="</>",void(W.state=$.TEXT);if(W.script){if("script"!==W.tagName)return W.script+="</"+W.tagName+">",W.tagName="",void(W.state=$.SCRIPT);X(W,"onscript",W.script),W.script=""}var J=W.tags.length,we=W.tagName;W.strict||(we=we[W.looseCase]());for(var ce=we;J--&&W.tags[J].name!==ce;)We(W,"Unexpected close tag");if(J<0)return We(W,"Unmatched closing tag: "+W.tagName),W.textNode+="</"+W.tagName+">",void(W.state=$.TEXT);W.tagName=we;for(var At=W.tags.length;At-- >J;){var pt=W.tag=W.tags.pop();W.tagName=W.tag.name,X(W,"onclosetag",W.tagName);var ye={};for(var j in pt.ns)ye[j]=pt.ns[j];W.opt.xmlns&&pt.ns!==(W.tags[W.tags.length-1]||W).ns&&Object.keys(pt.ns).forEach(function(L){X(W,"onclosenamespace",{prefix:L,uri:pt.ns[L]})})}0===J&&(W.closedRoot=!0),W.tagName=W.attribValue=W.attribName="",W.attribList.length=0,W.state=$.TEXT}function Re(W){var ce,J=W.entity,we=J.toLowerCase(),ke="";return W.ENTITIES[J]?W.ENTITIES[J]:W.ENTITIES[we]?W.ENTITIES[we]:("#"===(J=we).charAt(0)&&("x"===J.charAt(1)?(J=J.slice(2),ke=(ce=parseInt(J,16)).toString(16)):(J=J.slice(1),ke=(ce=parseInt(J,10)).toString(10))),J=J.replace(/^0+/,""),isNaN(ce)||ke.toLowerCase()!==J?(We(W,"Invalid character entity"),"&"+W.entity+";"):String.fromCodePoint(ce))}function He(W,J){"<"===J?(W.state=$.OPEN_WAKA,W.startTagPosition=W.position):C(J)||(We(W,"Non-whitespace before first tag."),W.textNode=J,W.state=$.TEXT)}function Xe(W,J){var we="";return J<W.length&&(we=W.charAt(J)),we}$=z.STATE,String.fromCodePoint||(W=String.fromCharCode,J=Math.floor,we=function(){var ce=16384,ke=[],ye=-1,j=arguments.length;if(!j)return"";for(var R="";++ye<j;){var L=Number(arguments[ye]);if(!isFinite(L)||L<0||L>1114111||J(L)!==L)throw RangeError("Invalid code point: "+L);L<=65535?ke.push(L):ke.push(55296+((L-=65536)>>10),L%1024+56320),(ye+1===j||ke.length>ce)&&(R+=W.apply(null,ke),ke.length=0)}return R},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:we,configurable:!0,writable:!0}):String.fromCodePoint=we)}(void 0===me?this.sax={}:me)}).call(this)}).call(this,Q("buffer").Buffer)},{buffer:6,stream:87,string_decoder:5}],86:[function(Q,xe,me){(function(Y,z){(function(){!function(F,se){"use strict";if(!F.setImmediate){var T,K=1,E={},A=!1,O=F.document,ee=Object.getPrototypeOf&&Object.getPrototypeOf(F);ee=ee&&ee.setTimeout?ee:F,"[object process]"==={}.toString.call(F.process)?T=function(C){Y.nextTick(function(){D(C)})}:function(){if(F.postMessage&&!F.importScripts){var C=!0,U=F.onmessage;return F.onmessage=function(){C=!1},F.postMessage("","*"),F.onmessage=U,C}}()?(C="setImmediate$"+Math.random()+"$",U=function(re){re.source===F&&"string"==typeof re.data&&0===re.data.indexOf(C)&&D(+re.data.slice(C.length))},F.addEventListener?F.addEventListener("message",U,!1):F.attachEvent("onmessage",U),T=function(re){F.postMessage(C+re,"*")}):F.MessageChannel?function(){var C=new MessageChannel;C.port1.onmessage=function(U){D(U.data)},T=function(U){C.port2.postMessage(U)}}():O&&"onreadystatechange"in O.createElement("script")?function(){var C=O.documentElement;T=function(U){var re=O.createElement("script");re.onreadystatechange=function(){D(U),re.onreadystatechange=null,C.removeChild(re),re=null},C.appendChild(re)}}():T=function(C){setTimeout(D,0,C)},ee.setImmediate=function(C){"function"!=typeof C&&(C=new Function(""+C));for(var U=new Array(arguments.length-1),re=0;re<U.length;re++)U[re]=arguments[re+1];return E[K]={callback:C,args:U},T(K),K++},ee.clearImmediate=y}var C,U;function y(C){delete E[C]}function D(C){if(A)setTimeout(D,0,C);else{var U=E[C];if(U){A=!0;try{!function(C){var U=C.callback,re=C.args;switch(re.length){case 0:U();break;case 1:U(re[0]);break;case 2:U(re[0],re[1]);break;case 3:U(re[0],re[1],re[2]);break;default:U.apply(void 0,re)}}(U)}finally{y(C),A=!1}}}}}("undefined"==typeof self?void 0===z?this:z:self)}).call(this)}).call(this,Q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:44}],87:[function(Q,xe,me){xe.exports=F;var Y=Q("events").EventEmitter;function F(){Y.call(this)}Q("inherits")(F,Y),F.Readable=Q("readable-stream/lib/_stream_readable.js"),F.Writable=Q("readable-stream/lib/_stream_writable.js"),F.Duplex=Q("readable-stream/lib/_stream_duplex.js"),F.Transform=Q("readable-stream/lib/_stream_transform.js"),F.PassThrough=Q("readable-stream/lib/_stream_passthrough.js"),F.finished=Q("readable-stream/lib/internal/streams/end-of-stream.js"),F.pipeline=Q("readable-stream/lib/internal/streams/pipeline.js"),F.Stream=F,F.prototype.pipe=function(se,K){var E=this;function A(B){se.writable&&!1===se.write(B)&&E.pause&&E.pause()}function O(){E.readable&&E.resume&&E.resume()}E.on("data",A),se.on("drain",O),!se._isStdio&&(!K||!1!==K.end)&&(E.on("end",v),E.on("close",y));var T=!1;function v(){T||(T=!0,se.end())}function y(){T||(T=!0,"function"==typeof se.destroy&&se.destroy())}function S(B){if(D(),0===Y.listenerCount(this,"error"))throw B}function D(){E.removeListener("data",A),se.removeListener("drain",O),E.removeListener("end",v),E.removeListener("close",y),E.removeListener("error",S),se.removeListener("error",S),E.removeListener("end",D),E.removeListener("close",D),se.removeListener("close",D)}return E.on("error",S),se.on("error",S),E.on("end",D),E.on("close",D),se.on("close",D),se.emit("pipe",E),se}},{events:8,inherits:10,"readable-stream/lib/_stream_duplex.js":68,"readable-stream/lib/_stream_passthrough.js":69,"readable-stream/lib/_stream_readable.js":70,"readable-stream/lib/_stream_transform.js":71,"readable-stream/lib/_stream_writable.js":72,"readable-stream/lib/internal/streams/end-of-stream.js":76,"readable-stream/lib/internal/streams/pipeline.js":78}],88:[function(Q,xe,me){arguments[4][5][0].apply(me,arguments)},{dup:5,"safe-buffer":84}],89:[function(Q,xe,me){(function(Y,z){(function(){var F=Q("process/browser.js").nextTick,se=Function.prototype.apply,K=Array.prototype.slice,E={},A=0;function O(T,v){this._id=T,this._clearFn=v}me.setTimeout=function(){return new O(se.call(setTimeout,window,arguments),clearTimeout)},me.setInterval=function(){return new O(se.call(setInterval,window,arguments),clearInterval)},me.clearTimeout=me.clearInterval=function(T){T.close()},O.prototype.unref=O.prototype.ref=function(){},O.prototype.close=function(){this._clearFn.call(window,this._id)},me.enroll=function(T,v){clearTimeout(T._idleTimeoutId),T._idleTimeout=v},me.unenroll=function(T){clearTimeout(T._idleTimeoutId),T._idleTimeout=-1},me._unrefActive=me.active=function(T){clearTimeout(T._idleTimeoutId);var v=T._idleTimeout;v>=0&&(T._idleTimeoutId=setTimeout(function(){T._onTimeout&&T._onTimeout()},v))},me.setImmediate="function"==typeof Y?Y:function(T){var v=A++,y=!(arguments.length<2)&&K.call(arguments,1);return E[v]=!0,F(function(){E[v]&&(y?T.apply(null,y):T.call(null),me.clearImmediate(v))}),v},me.clearImmediate="function"==typeof z?z:function(T){delete E[T]}}).call(this)}).call(this,Q("timers").setImmediate,Q("timers").clearImmediate)},{"process/browser.js":44,timers:89}],90:[function(Q,xe,me){(function(Y){(function(){function F(se){try{if(!Y.localStorage)return!1}catch(E){return!1}var K=Y.localStorage[se];return null!=K&&"true"===String(K).toLowerCase()}xe.exports=function(se,K){if(F("noDeprecation"))return se;var E=!1;return function(){if(!E){if(F("throwDeprecation"))throw new Error(K);F("traceDeprecation")?console.trace(K):console.warn(K),E=!0}return se.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(Q,xe,me){"use strict";xe.exports=function(Y){Y.prototype[Symbol.iterator]=function*(){for(let z=this.head;z;z=z.next)yield z.value}}},{}],92:[function(Q,xe,me){"use strict";function Y(E){var A=this;if(A instanceof Y||(A=new Y),A.tail=null,A.head=null,A.length=0,E&&"function"==typeof E.forEach)E.forEach(function(v){A.push(v)});else if(arguments.length>0)for(var O=0,T=arguments.length;O<T;O++)A.push(arguments[O]);return A}function z(E,A,O){var T=A===E.head?new K(O,null,A,E):new K(O,A,A.next,E);return null===T.next&&(E.tail=T),null===T.prev&&(E.head=T),E.length++,T}function F(E,A){E.tail=new K(A,E.tail,null,E),E.head||(E.head=E.tail),E.length++}function se(E,A){E.head=new K(A,null,E.head,E),E.tail||(E.tail=E.head),E.length++}function K(E,A,O,T){if(!(this instanceof K))return new K(E,A,O,T);this.list=T,this.value=E,A?(A.next=this,this.prev=A):this.prev=null,O?(O.prev=this,this.next=O):this.next=null}xe.exports=Y,Y.Node=K,Y.create=Y,Y.prototype.removeNode=function(E){if(E.list!==this)throw new Error("removing node which does not belong to this list");var A=E.next,O=E.prev;return A&&(A.prev=O),O&&(O.next=A),E===this.head&&(this.head=A),E===this.tail&&(this.tail=O),E.list.length--,E.next=null,E.prev=null,E.list=null,A},Y.prototype.unshiftNode=function(E){if(E!==this.head){E.list&&E.list.removeNode(E);var A=this.head;E.list=this,E.next=A,A&&(A.prev=E),this.head=E,this.tail||(this.tail=E),this.length++}},Y.prototype.pushNode=function(E){if(E!==this.tail){E.list&&E.list.removeNode(E);var A=this.tail;E.list=this,E.prev=A,A&&(A.next=E),this.tail=E,this.head||(this.head=E),this.length++}},Y.prototype.push=function(){for(var E=0,A=arguments.length;E<A;E++)F(this,arguments[E]);return this.length},Y.prototype.unshift=function(){for(var E=0,A=arguments.length;E<A;E++)se(this,arguments[E]);return this.length},Y.prototype.pop=function(){if(this.tail){var E=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,E}},Y.prototype.shift=function(){if(this.head){var E=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,E}},Y.prototype.forEach=function(E,A){A=A||this;for(var O=this.head,T=0;null!==O;T++)E.call(A,O.value,T,this),O=O.next},Y.prototype.forEachReverse=function(E,A){A=A||this;for(var O=this.tail,T=this.length-1;null!==O;T--)E.call(A,O.value,T,this),O=O.prev},Y.prototype.get=function(E){for(var A=0,O=this.head;null!==O&&A<E;A++)O=O.next;if(A===E&&null!==O)return O.value},Y.prototype.getReverse=function(E){for(var A=0,O=this.tail;null!==O&&A<E;A++)O=O.prev;if(A===E&&null!==O)return O.value},Y.prototype.map=function(E,A){A=A||this;for(var O=new Y,T=this.head;null!==T;)O.push(E.call(A,T.value,this)),T=T.next;return O},Y.prototype.mapReverse=function(E,A){A=A||this;for(var O=new Y,T=this.tail;null!==T;)O.push(E.call(A,T.value,this)),T=T.prev;return O},Y.prototype.reduce=function(E,A){var O,T=this.head;if(arguments.length>1)O=A;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");T=this.head.next,O=this.head.value}for(var v=0;null!==T;v++)O=E(O,T.value,v),T=T.next;return O},Y.prototype.reduceReverse=function(E,A){var O,T=this.tail;if(arguments.length>1)O=A;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");T=this.tail.prev,O=this.tail.value}for(var v=this.length-1;null!==T;v--)O=E(O,T.value,v),T=T.prev;return O},Y.prototype.toArray=function(){for(var E=new Array(this.length),A=0,O=this.head;null!==O;A++)E[A]=O.value,O=O.next;return E},Y.prototype.toArrayReverse=function(){for(var E=new Array(this.length),A=0,O=this.tail;null!==O;A++)E[A]=O.value,O=O.prev;return E},Y.prototype.slice=function(E,A){(A=A||this.length)<0&&(A+=this.length),(E=E||0)<0&&(E+=this.length);var O=new Y;if(A<E||A<0)return O;E<0&&(E=0),A>this.length&&(A=this.length);for(var T=0,v=this.head;null!==v&&T<E;T++)v=v.next;for(;null!==v&&T<A;T++,v=v.next)O.push(v.value);return O},Y.prototype.sliceReverse=function(E,A){(A=A||this.length)<0&&(A+=this.length),(E=E||0)<0&&(E+=this.length);var O=new Y;if(A<E||A<0)return O;E<0&&(E=0),A>this.length&&(A=this.length);for(var T=this.length,v=this.tail;null!==v&&T>A;T--)v=v.prev;for(;null!==v&&T>E;T--,v=v.prev)O.push(v.value);return O},Y.prototype.splice=function(E,A,...O){E>this.length&&(E=this.length-1),E<0&&(E=this.length+E);for(var T=0,v=this.head;null!==v&&T<E;T++)v=v.next;var y=[];for(T=0;v&&T<A;T++)y.push(v.value),v=this.removeNode(v);for(null===v&&(v=this.tail),v!==this.head&&v!==this.tail&&(v=v.prev),T=0;T<O.length;T++)v=z(this,v,O[T]);return y},Y.prototype.reverse=function(){for(var E=this.head,A=this.tail,O=E;null!==O;O=O.prev){var T=O.prev;O.prev=O.next,O.next=T}return this.head=A,this.tail=E,this};try{Q("./iterator.js")(Y)}catch(E){}},{"./iterator.js":91}]},{},[1])(1)},322:jt=>{jt.exports=function(Ke,gt){var te=gt.length;if(0!==te){var Et=Ke.length;Ke.length+=te;for(var dt=0;dt<te;dt++)Ke[Et+dt]=gt[dt]}}},4517:(jt,rt)=>{"use strict";var gt=(()=>{return(Et=gt||(gt={})).typeOfFunction="function",Et.boolTrue=!0,gt;var Et})();function te(Et,dt,Q){if(!Q||typeof Q.value!==gt.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+dt+"> is not a method!");return{configurable:gt.boolTrue,get:function(){var xe=Q.value.bind(this);return Object.defineProperty(this,dt,{value:xe,configurable:gt.boolTrue,writable:gt.boolTrue}),xe}}}rt.ak=te,rt.ZP=te},7266:(jt,rt,Ke)=>{jt.exports={ResizeSensor:Ke(9835),ElementQueries:Ke(4845)}},4845:function(jt,rt,Ke){"use strict";var gt,te,Et;"undefined"!=typeof window&&window,te=[Ke(9835)],void 0!==(Et="function"==typeof(gt=function(dt){var Q=function(){var me,Y={},z=[];function F(M){M||(M=document.documentElement);var N=window.getComputedStyle(M,null).fontSize;return parseFloat(N)||16}function K(M,N){var ee=N.split(/\d/),C=ee[ee.length-1];switch(N=parseFloat(N),C){case"px":return N;case"em":return N*F(M);case"rem":return N*F();case"vw":return N*document.documentElement.clientWidth/100;case"vh":return N*document.documentElement.clientHeight/100;case"vmin":case"vmax":var U=document.documentElement.clientWidth/100,re=document.documentElement.clientHeight/100;return N*(0,Math["vmin"===C?"min":"max"])(U,re);default:return N}}function E(M,N){this.element=M;var ee,C,U,re,de,G,$,pe,ue=["min-width","min-height","max-width","max-height"];this.call=function(){for(ee in U=function(M){if(!M.getBoundingClientRect)return{width:M.offsetWidth,height:M.offsetHeight};var N=M.getBoundingClientRect();return{width:Math.round(N.width),height:Math.round(N.height)}}(this.element),G={},Y[N])!Y[N].hasOwnProperty(ee)||(re=K(this.element,(C=Y[N][ee]).value),de="width"===C.property?U.width:U.height,$="","min"===C.mode&&de>=re&&($+=C.value),"max"===C.mode&&de<=re&&($+=C.value),G[pe=C.mode+"-"+C.property]||(G[pe]=""),$&&-1===(" "+G[pe]+" ").indexOf(" "+$+" ")&&(G[pe]+=" "+$));for(var X in ue)!ue.hasOwnProperty(X)||(G[ue[X]]?this.element.setAttribute(ue[X],G[ue[X]].substr(1)):this.element.removeAttribute(ue[X]))}}function A(M,N){M.elementQueriesSetupInformation||(M.elementQueriesSetupInformation=new E(M,N)),M.elementQueriesSensor||(M.elementQueriesSensor=new dt(M,function(){M.elementQueriesSetupInformation.call()}))}function O(M,N,ee,C){if(void 0===Y[M]){Y[M]=[];var U=z.length;me.innerHTML+="\n"+M+" {animation: 0.1s element-queries;}",me.innerHTML+="\n"+M+" > .resize-sensor {min-width: "+U+"px;}",z.push(M)}Y[M].push({mode:N,property:ee,value:C})}function T(M){var N;if(document.querySelectorAll&&(N=M?M.querySelectorAll.bind(M):document.querySelectorAll.bind(document)),!N&&"undefined"!=typeof $$&&(N=$$),!N&&"undefined"!=typeof jQuery&&(N=jQuery),!N)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return N}function y(M){var N=[],ee=[],C=[],U=0,re=-1,de=[];for(var G in M.children)if(M.children.hasOwnProperty(G)&&M.children[G].tagName&&"img"===M.children[G].tagName.toLowerCase()){N.push(M.children[G]);var $=M.children[G].getAttribute("min-width")||M.children[G].getAttribute("data-min-width"),pe=M.children[G].getAttribute("data-src")||M.children[G].getAttribute("url");C.push(pe),ee.push({minWidth:$}),$?M.children[G].style.display="none":(U=N.length-1,M.children[G].style.display="block")}function X(){var De,ge=!1;for(De in N)!N.hasOwnProperty(De)||ee[De].minWidth&&M.offsetWidth>ee[De].minWidth&&(ge=De);if(ge||(ge=U),re!==ge)if(de[ge])N[re].style.display="none",N[ge].style.display="block",re=ge;else{var je=new Image;je.onload=function(){N[ge].src=C[ge],N[re].style.display="none",N[ge].style.display="block",de[ge]=!0,re=ge},je.src=C[ge]}else N[ge].src=C[ge]}re=U,M.resizeSensorInstance=new dt(M,X),X()}var D=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,B=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function I(M){var N,ee,C,U;for(M=M.replace(/'/g,'"');null!==(N=D.exec(M));)for(ee=N[1]+N[3],C=N[2];null!==(U=B.exec(C));)O(ee,U[1],U[2],U[3])}function q(M){var N="";if(M)if("string"==typeof M)(-1!==(M=M.toLowerCase()).indexOf("min-width")||-1!==M.indexOf("max-width"))&&I(M);else for(var ee=0,C=M.length;ee<C;ee++)1===M[ee].type?(-1!==(N=M[ee].selectorText||M[ee].cssText).indexOf("min-height")||-1!==N.indexOf("max-height")||-1!==N.indexOf("min-width")||-1!==N.indexOf("max-width"))&&I(N):4===M[ee].type?q(M[ee].cssRules||M[ee].rules):3===M[ee].type&&M[ee].styleSheet.hasOwnProperty("cssRules")&&q(M[ee].styleSheet.cssRules)}var Z=!1;this.init=function(){var M="animationstart";void 0!==document.documentElement.style.webkitAnimationName?M="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?M="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(M="oanimationstart"),document.body.addEventListener(M,function(C){var U=C.target,re=U&&window.getComputedStyle(U,null),de=re&&re.getPropertyValue("animation-name");if(de&&-1!==de.indexOf("element-queries")){U.elementQueriesSensor=new dt(U,function(){U.elementQueriesSetupInformation&&U.elementQueriesSetupInformation.call()});var pe=window.getComputedStyle(U.resizeSensor,null).getPropertyValue("min-width");pe=parseInt(pe.replace("px","")),A(C.target,z[pe])}}),Z||((me=document.createElement("style")).type="text/css",me.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",me.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(me),Z=!0);for(var N=0,ee=document.styleSheets.length;N<ee;N++)try{document.styleSheets[N].href&&0===document.styleSheets[N].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[N].href),q(document.styleSheets[N].cssRules||document.styleSheets[N].rules||document.styleSheets[N].cssText)}catch(C){}!function(){for(var N=T()("[data-responsive-image],[responsive-image]"),ee=0,C=N.length;ee<C;ee++)y(N[ee])}()},this.findElementQueriesElements=function(M){!function(M){var N=T(M);for(var ee in Y)if(Y.hasOwnProperty(ee))for(var C=N(ee,M),U=0,re=C.length;U<re;U++)A(C[U],ee)}(M)},this.update=function(){this.init()}};Q.update=function(){Q.instance.update()},Q.detach=function(me){me.elementQueriesSetupInformation?(me.elementQueriesSensor.detach(),delete me.elementQueriesSetupInformation,delete me.elementQueriesSensor):me.resizeSensorInstance&&(me.resizeSensorInstance.detach(),delete me.resizeSensorInstance)},Q.init=function(){Q.instance||(Q.instance=new Q),Q.instance.init()};return Q.findElementQueriesElements=function(me){Q.instance.findElementQueriesElements(me)},Q.listen=function(){!function(me){if(document.addEventListener)document.addEventListener("DOMContentLoaded",me,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var Y=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(me(),clearInterval(Y))},10);else window.onload=me}(Q.init)},Q})?gt.apply(rt,te):gt)&&(jt.exports=Et)},9835:function(jt,rt,Ke){"use strict";var gt,te;"undefined"!=typeof window&&window,void 0!==(te="function"==typeof(gt=function(){if("undefined"==typeof window)return null;var Et="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),dt=Et.requestAnimationFrame||Et.mozRequestAnimationFrame||Et.webkitRequestAnimationFrame||function(se){return Et.setTimeout(se,20)},Q=Et.cancelAnimationFrame||Et.mozCancelAnimationFrame||Et.webkitCancelAnimationFrame||function(se){Et.clearTimeout(se)};function xe(se,K){var E=Object.prototype.toString.call(se),A="[object Array]"===E||"[object NodeList]"===E||"[object HTMLCollection]"===E||"[object Object]"===E||"undefined"!=typeof jQuery&&se instanceof jQuery||"undefined"!=typeof Elements&&se instanceof Elements,O=0,T=se.length;if(A)for(;O<T;O++)K(se[O]);else K(se)}function me(se){if(!se.getBoundingClientRect)return{width:se.offsetWidth,height:se.offsetHeight};var K=se.getBoundingClientRect();return{width:Math.round(K.width),height:Math.round(K.height)}}function Y(se,K){Object.keys(K).forEach(function(E){se.style[E]=K[E]})}var z=function(se,K){var E=0;function A(){var v,y,T=[];this.add=function(S){T.push(S)},this.call=function(S){for(v=0,y=T.length;v<y;v++)T[v].call(this,S)},this.remove=function(S){var D=[];for(v=0,y=T.length;v<y;v++)T[v]!==S&&D.push(T[v]);T=D},this.length=function(){return T.length}}function O(T,v){if(T){if(T.resizedAttached)return void T.resizedAttached.add(v);T.resizedAttached=new A,T.resizedAttached.add(v),T.resizeSensor=document.createElement("div"),T.resizeSensor.dir="ltr",T.resizeSensor.className="resize-sensor";var y={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},S={position:"absolute",left:"0px",top:"0px",transition:"0s"};Y(T.resizeSensor,y);var D=document.createElement("div");D.className="resize-sensor-expand",Y(D,y);var B=document.createElement("div");Y(B,S),D.appendChild(B);var I=document.createElement("div");I.className="resize-sensor-shrink",Y(I,y);var q=document.createElement("div");Y(q,S),Y(q,{width:"200%",height:"200%"}),I.appendChild(q),T.resizeSensor.appendChild(D),T.resizeSensor.appendChild(I),T.appendChild(T.resizeSensor);var Z=window.getComputedStyle(T),M=Z?Z.getPropertyValue("position"):null;"absolute"!==M&&"relative"!==M&&"fixed"!==M&&"sticky"!==M&&(T.style.position="relative");var N=!1,ee=0,C=me(T),U=0,re=0,de=!0;E=0;var $=function(){if(de){if(0===T.offsetWidth&&0===T.offsetHeight)return void(E||(E=dt(function(){E=0,$()})));de=!1}var ge,De;De=T.offsetHeight,B.style.width=(ge=T.offsetWidth)+10+"px",B.style.height=De+10+"px",D.scrollLeft=ge+10,D.scrollTop=De+10,I.scrollLeft=ge+10,I.scrollTop=De+10};T.resizeSensor.resetSensor=$;var pe=function(){ee=0,N&&(U=C.width,re=C.height,T.resizedAttached&&T.resizedAttached.call(C))},ue=function(){C=me(T),(N=C.width!==U||C.height!==re)&&!ee&&(ee=dt(pe)),$()},X=function(ge,De,je){ge.attachEvent?ge.attachEvent("on"+De,je):ge.addEventListener(De,je)};X(D,"scroll",ue),X(I,"scroll",ue),E=dt(function(){E=0,$()})}}xe(se,function(T){O(T,K)}),this.detach=function(T){E||(Q(E),E=0),z.detach(se,T)},this.reset=function(){se.resizeSensor.resetSensor()}};if(z.reset=function(se){xe(se,function(K){K.resizeSensor.resetSensor()})},z.detach=function(se,K){xe(se,function(E){!E||E.resizedAttached&&"function"==typeof K&&(E.resizedAttached.remove(K),E.resizedAttached.length())||E.resizeSensor&&(E.contains(E.resizeSensor)&&E.removeChild(E.resizeSensor),delete E.resizeSensor,delete E.resizedAttached)})},"undefined"!=typeof MutationObserver){var F=new MutationObserver(function(se){for(var K in se)if(se.hasOwnProperty(K))for(var E=se[K].addedNodes,A=0;A<E.length;A++)E[A].resizeSensor&&z.reset(E[A])});document.addEventListener("DOMContentLoaded",function(se){F.observe(document.body,{childList:!0,subtree:!0})})}return z})?gt.call(rt,Ke,rt,jt):gt)&&(jt.exports=te)},7445:(jt,rt,Ke)=>{var gt=Ke(3910),te=Ke(9369),Et=Ke(322);function dt(se,K,E){if(!gt(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!se.hasNode(K))throw new Error('graphology-shortest-path: the "'+K+'" source node does not exist in the given graph.');if(!se.hasNode(E))throw new Error('graphology-shortest-path: the "'+E+'" target node does not exist in the given graph.');if((K=""+K)==(E=""+E))return[K];var A=se.inboundNeighbors.bind(se),O=se.outboundNeighbors.bind(se),T={},v={};T[K]=null,v[E]=null;var D,B,I,q,Z,M,N,ee,y=[K],S=[E],C=!1;e:for(;y.length&&S.length;)if(y.length<=S.length){for(D=y,y=[],Z=0,N=D.length;Z<N;Z++)for(M=0,ee=(I=O(B=D[Z])).length;M<ee;M++)if((q=I[M])in T||(y.push(q),T[q]=B),q in v){C=!0;break e}}else for(D=S,S=[],Z=0,N=D.length;Z<N;Z++)for(B=D[Z],I=A(B),M=0,ee=I.length;M<ee;M++)if(q=I[M],q in v||(S.push(q),v[q]=B),q in T){C=!0;break e}if(!C)return null;for(var U=[];q;)U.unshift(q),q=T[q];for(q=v[U[U.length-1]];q;)U.push(q),q=v[q];return U.length?U:null}function Q(se,K){if(!gt(se))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!se.hasNode(K))throw new Error('graphology-shortest-path: the "'+K+'" source node does not exist in the given graph.');var O,T,v,y,S,D,E={},A={};for(E[K=""+K]=!0,A[K]=[K];Object.keys(E).length;)for(v in O=E,E={},O)for(S=0,D=(T=se.outboundNeighbors(v)).length;S<D;S++)A[y=T[S]]||(A[y]=A[v].concat(y),E[y]=!0);return A}function xe(se,K,E){if(!gt(K))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!K.hasNode(E))throw new Error('graphology-shortest-path: the "'+E+'" source node does not exist in the given graph.');E=""+E;var A=new Set,O={},T=0;O[E]=0;for(var y,S,D,v=[E];0!==v.length;){var B=[];for(y=0,S=v.length;y<S;y++)!A.has(D=v[y])&&(A.add(D),Et(B,K[se](D)),O[D]=T);T++,v=B}return O}var me=xe.bind(null,"outboundNeighbors"),Y=xe.bind(null,"neighbors");function z(se,K,E){return arguments.length<3?Q(se,K):dt(se,K,E)}z.bidirectional=dt,z.singleSource=Q,z.singleSourceLength=me,z.undirectedSingleSourceLength=Y,z.brandes=function(se,K){K=""+K;var v,y,S,D,B,I,q,Z,M,E=[],A={},O={},T=se.nodes();for(I=0,Z=T.length;I<Z;I++)A[D=T[I]]=[],O[D]=0;var N={};O[K]=1,N[K]=0;for(var ee=te.of(K);ee.size;)for(D=ee.dequeue(),E.push(D),v=N[D],y=O[D],q=0,M=(S=se.outboundNeighbors(D)).length;q<M;q++)(B=S[q])in N||(ee.enqueue(B),N[B]=v+1),N[B]===v+1&&(O[B]+=y,A[B].push(D));return[E,A,O]},jt.exports=z},3910:jt=>{jt.exports=function(Ke){return null!==Ke&&"object"==typeof Ke&&"function"==typeof Ke.addUndirectedEdgeWithKey&&"function"==typeof Ke.dropNode&&"boolean"==typeof Ke.multi}},698:function(jt){jt.exports=function(){"use strict";function rt(ie){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he})(ie)}function Ke(ie,he){ie.prototype=Object.create(he.prototype),ie.prototype.constructor=ie,te(ie,he)}function gt(ie){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(he){return he.__proto__||Object.getPrototypeOf(he)})(ie)}function te(ie,he){return(te=Object.setPrototypeOf||function(oe,x){return oe.__proto__=x,oe})(ie,he)}function Et(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ie){return!1}}function dt(ie,he,oe){return(dt=Et()?Reflect.construct:function(x,k,ne){var Ee=[null];Ee.push.apply(Ee,k);var Fe=new(Function.bind.apply(x,Ee));return ne&&te(Fe,ne.prototype),Fe}).apply(null,arguments)}function Q(ie){var he="function"==typeof Map?new Map:void 0;return(Q=function(oe){if(null===oe||-1===Function.toString.call(oe).indexOf("[native code]"))return oe;if("function"!=typeof oe)throw new TypeError("Super expression must either be null or a function");if(void 0!==he){if(he.has(oe))return he.get(oe);he.set(oe,k)}function k(){return dt(oe,arguments,gt(this).constructor)}return k.prototype=Object.create(oe.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),te(k,oe)})(ie)}function xe(ie){if(void 0===ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie}var me=function(){for(var ie=arguments[0],he=1,oe=arguments.length;he<oe;he++)if(arguments[he])for(var x in arguments[he])ie[x]=arguments[he][x];return ie};function Y(ie,he,oe,x){var k=ie._nodes.get(he),ne=null;return k?ne="mixed"===x?k.out&&k.out[oe]||k.undirected&&k.undirected[oe]:"directed"===x?k.out&&k.out[oe]:k.undirected&&k.undirected[oe]:ne}function z(ie){return null!==ie&&"object"===rt(ie)&&"function"==typeof ie.addUndirectedEdgeWithKey&&"function"==typeof ie.dropNode}function F(ie){return"object"===rt(ie)&&null!==ie&&ie.constructor===Object}function se(ie){var he;for(he in ie)return!1;return!0}function K(ie,he,oe){Object.defineProperty(ie,he,{enumerable:!1,configurable:!1,writable:!0,value:oe})}function E(ie,he,oe){var x={enumerable:!0,configurable:!0};"function"==typeof oe?x.get=oe:(x.value=oe,x.writable=!1),Object.defineProperty(ie,he,x)}function A(ie){return!(!F(ie)||ie.attributes&&!Array.isArray(ie.attributes))}"function"==typeof Object.assign&&(me=Object.assign);var O,T={exports:{}},v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(ie,he,oe){return Function.prototype.apply.call(ie,he,oe)};O=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(ie){return Object.getOwnPropertyNames(ie).concat(Object.getOwnPropertySymbols(ie))}:function(ie){return Object.getOwnPropertyNames(ie)};var S=Number.isNaN||function(ie){return ie!=ie};function D(){D.init.call(this)}T.exports=D,T.exports.once=function(ie,he){return new Promise(function(oe,x){function k(Ee){ie.removeListener(he,ne),x(Ee)}function ne(){"function"==typeof ie.removeListener&&ie.removeListener("error",k),oe([].slice.call(arguments))}var Ee;re(ie,he,ne,{once:!0}),"error"!==he&&("function"==typeof(Ee=ie).on&&re(Ee,"error",k,{once:!0}))})},D.EventEmitter=D,D.prototype._events=void 0,D.prototype._eventsCount=0,D.prototype._maxListeners=void 0;var B=10;function I(ie){if("function"!=typeof ie)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ie)}function q(ie){return void 0===ie._maxListeners?D.defaultMaxListeners:ie._maxListeners}function Z(ie,he,oe,x){var k,ne,Ee;if(I(oe),void 0===(ne=ie._events)?(ne=ie._events=Object.create(null),ie._eventsCount=0):(void 0!==ne.newListener&&(ie.emit("newListener",he,oe.listener?oe.listener:oe),ne=ie._events),Ee=ne[he]),void 0===Ee)Ee=ne[he]=oe,++ie._eventsCount;else if("function"==typeof Ee?Ee=ne[he]=x?[oe,Ee]:[Ee,oe]:x?Ee.unshift(oe):Ee.push(oe),(k=q(ie))>0&&Ee.length>k&&!Ee.warned){Ee.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+Ee.length+" "+String(he)+" listeners added. Use emitter.setMaxListeners() to increase limit");nt.name="MaxListenersExceededWarning",nt.emitter=ie,nt.type=he,nt.count=Ee.length,console&&console.warn&&console.warn(nt)}return ie}function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(ie,he,oe){var x={fired:!1,wrapFn:void 0,target:ie,type:he,listener:oe},k=M.bind(x);return k.listener=oe,x.wrapFn=k,k}function ee(ie,he,oe){var x=ie._events;if(void 0===x)return[];var k=x[he];return void 0===k?[]:"function"==typeof k?oe?[k.listener||k]:[k]:oe?function(ne){for(var Ee=new Array(ne.length),Fe=0;Fe<Ee.length;++Fe)Ee[Fe]=ne[Fe].listener||ne[Fe];return Ee}(k):U(k,k.length)}function C(ie){var he=this._events;if(void 0!==he){var oe=he[ie];if("function"==typeof oe)return 1;if(void 0!==oe)return oe.length}return 0}function U(ie,he){for(var oe=new Array(he),x=0;x<he;++x)oe[x]=ie[x];return oe}function re(ie,he,oe,x){if("function"==typeof ie.on)x.once?ie.once(he,oe):ie.on(he,oe);else{if("function"!=typeof ie.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ie);ie.addEventListener(he,function k(ne){x.once&&ie.removeEventListener(he,k),oe(ne)})}}function de(ie){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:ie}),this.done=!1}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(ie){if("number"!=typeof ie||ie<0||S(ie))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ie+".");B=ie}}),D.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},D.prototype.setMaxListeners=function(ie){if("number"!=typeof ie||ie<0||S(ie))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ie+".");return this._maxListeners=ie,this},D.prototype.getMaxListeners=function(){return q(this)},D.prototype.emit=function(ie){for(var he=[],oe=1;oe<arguments.length;oe++)he.push(arguments[oe]);var x="error"===ie,k=this._events;if(void 0!==k)x=x&&void 0===k.error;else if(!x)return!1;if(x){var ne;if(he.length>0&&(ne=he[0]),ne instanceof Error)throw ne;var Ee=new Error("Unhandled error."+(ne?" ("+ne.message+")":""));throw Ee.context=ne,Ee}var Fe=k[ie];if(void 0===Fe)return!1;if("function"==typeof Fe)y(Fe,this,he);else{var nt=Fe.length,It=U(Fe,nt);for(oe=0;oe<nt;++oe)y(It[oe],this,he)}return!0},D.prototype.on=D.prototype.addListener=function(ie,he){return Z(this,ie,he,!1)},D.prototype.prependListener=function(ie,he){return Z(this,ie,he,!0)},D.prototype.once=function(ie,he){return I(he),this.on(ie,N(this,ie,he)),this},D.prototype.prependOnceListener=function(ie,he){return I(he),this.prependListener(ie,N(this,ie,he)),this},D.prototype.off=D.prototype.removeListener=function(ie,he){var oe,x,k,ne,Ee;if(I(he),void 0===(x=this._events))return this;if(void 0===(oe=x[ie]))return this;if(oe===he||oe.listener===he)0==--this._eventsCount?this._events=Object.create(null):(delete x[ie],x.removeListener&&this.emit("removeListener",ie,oe.listener||he));else if("function"!=typeof oe){for(k=-1,ne=oe.length-1;ne>=0;ne--)if(oe[ne]===he||oe[ne].listener===he){Ee=oe[ne].listener,k=ne;break}if(k<0)return this;0===k?oe.shift():function(Fe,nt){for(;nt+1<Fe.length;nt++)Fe[nt]=Fe[nt+1];Fe.pop()}(oe,k),1===oe.length&&(x[ie]=oe[0]),void 0!==x.removeListener&&this.emit("removeListener",ie,Ee||he)}return this},D.prototype.removeAllListeners=function(ie){var he,oe,x;if(void 0===(oe=this._events))return this;if(void 0===oe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==oe[ie]&&(0==--this._eventsCount?this._events=Object.create(null):delete oe[ie]),this;if(0===arguments.length){var k,ne=Object.keys(oe);for(x=0;x<ne.length;++x)"removeListener"!==(k=ne[x])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(he=oe[ie]))this.removeListener(ie,he);else if(void 0!==he)for(x=he.length-1;x>=0;x--)this.removeListener(ie,he[x]);return this},D.prototype.listeners=function(ie){return ee(this,ie,!0)},D.prototype.rawListeners=function(ie){return ee(this,ie,!1)},D.listenerCount=function(ie,he){return"function"==typeof ie.listenerCount?ie.listenerCount(he):C.call(ie,he)},D.prototype.listenerCount=C,D.prototype.eventNames=function(){return this._eventsCount>0?O(this._events):[]},de.prototype.next=function(){if(this.done)return{done:!0};var ie=this._next();return ie.done&&(this.done=!0),ie},"undefined"!=typeof Symbol&&(de.prototype[Symbol.iterator]=function(){return this}),de.of=function(){var ie=arguments,he=ie.length,oe=0;return new de(function(){return oe>=he?{done:!0}:{done:!1,value:ie[oe++]}})},de.empty=function(){var ie=new de(null);return ie.done=!0,ie},de.is=function(ie){return ie instanceof de||"object"==typeof ie&&null!==ie&&"function"==typeof ie.next};var G=de,$=function(ie,he){for(var oe,x=arguments.length>1?he:1/0,k=x!==1/0?new Array(x):[],ne=0;;){if(ne===x)return k;if((oe=ie.next()).done)return ne!==he?k.slice(0,ne):k;k[ne++]=oe.value}},pe=function(ie){function he(oe,x){var k;return(k=ie.call(this)||this).name="GraphError",k.message=oe||"",k.data=x||{},k}return Ke(he,ie),he}(Q(Error)),ue=function(ie){function he(oe,x){var k;return(k=ie.call(this,oe,x)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(xe(k),he.prototype.constructor),k}return Ke(he,ie),he}(pe),X=function(ie){function he(oe,x){var k;return(k=ie.call(this,oe,x)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(xe(k),he.prototype.constructor),k}return Ke(he,ie),he}(pe),ge=function(ie){function he(oe,x){var k;return(k=ie.call(this,oe,x)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(xe(k),he.prototype.constructor),k}return Ke(he,ie),he}(pe);function De(ie,he){this.key=ie,this.attributes=he,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function je(ie,he){this.key=ie,this.attributes=he,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function Ze(ie,he){this.key=ie,this.attributes=he,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function We(ie,he,oe,x,k,ne){this.key=he,this.attributes=ne,this.undirected=ie,this.source=x,this.target=k,this.generatedKey=oe}function Je(ie,he,oe,x,k,ne,Ee){var Fe,nt,It="out",qe="in";if(he&&(It=qe="undirected"),ie.multi){if(void 0===(nt=(Fe=ne[It])[k])&&(nt=new Set,Fe[k]=nt),nt.add(oe),x===k&&he)return;void 0===(Fe=Ee[qe])[x]&&(Fe[x]=nt)}else{if(ne[It][k]=oe,x===k&&he)return;Ee[qe][x]=oe}}function Ye(ie,he,oe){var x=ie.multi,k=oe.source,ne=oe.target,Ee=k.key,Fe=ne.key,nt=k[he?"undirected":"out"],It=he?"undirected":"in";if(Fe in nt)if(x){var qe=nt[Fe];1===qe.size?(delete nt[Fe],delete ne[It][Ee]):qe.delete(oe)}else delete nt[Fe];x||delete ne[It][Ee]}je.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},Ze.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};var Ve=[{name:function(ie){return"get".concat(ie,"Attribute")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k){var ne;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,Fe=""+k;if(k=arguments[2],!(ne=Y(this,Ee,Fe,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(Fe,'").'))}else if(!(ne=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==oe&&ne.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return ne.attributes[k]}}},{name:function(ie){return"get".concat(ie,"Attributes")},attacher:function(ie,he,oe){ie.prototype[he]=function(x){var k;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var ne=""+x,Ee=""+arguments[1];if(!(k=Y(this,ne,Ee,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(ne,'" - "').concat(Ee,'").'))}else if(!(k=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==oe&&k.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return k.attributes}}},{name:function(ie){return"has".concat(ie,"Attribute")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k){var ne;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,Fe=""+k;if(k=arguments[2],!(ne=Y(this,Ee,Fe,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(Fe,'").'))}else if(!(ne=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==oe&&ne.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return ne.attributes.hasOwnProperty(k)}}},{name:function(ie){return"set".concat(ie,"Attribute")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k,ne){var Ee;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+x,nt=""+k;if(k=arguments[2],ne=arguments[3],!(Ee=Y(this,Fe,nt,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(nt,'").'))}else if(!(Ee=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==oe&&Ee.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return Ee.attributes[k]=ne,this.emit("edgeAttributesUpdated",{key:Ee.key,type:"set",attributes:Ee.attributes,name:k}),this}}},{name:function(ie){return"update".concat(ie,"Attribute")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k,ne){var Ee;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Fe=""+x,nt=""+k;if(k=arguments[2],ne=arguments[3],!(Ee=Y(this,Fe,nt,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Fe,'" - "').concat(nt,'").'))}else if(!(Ee=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("function"!=typeof ne)throw new ue("Graph.".concat(he,": updater should be a function."));if("mixed"!==oe&&Ee.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return Ee.attributes[k]=ne(Ee.attributes[k]),this.emit("edgeAttributesUpdated",{key:Ee.key,type:"set",attributes:Ee.attributes,name:k}),this}}},{name:function(ie){return"remove".concat(ie,"Attribute")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k){var ne;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,Fe=""+k;if(k=arguments[2],!(ne=Y(this,Ee,Fe,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(Fe,'").'))}else if(!(ne=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if("mixed"!==oe&&ne.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return delete ne.attributes[k],this.emit("edgeAttributesUpdated",{key:ne.key,type:"remove",attributes:ne.attributes,name:k}),this}}},{name:function(ie){return"replace".concat(ie,"Attributes")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k){var ne;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,Fe=""+k;if(k=arguments[2],!(ne=Y(this,Ee,Fe,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(Fe,'").'))}else if(!(ne=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if(!F(k))throw new ue("Graph.".concat(he,": provided attributes are not a plain object."));if("mixed"!==oe&&ne.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return ne.attributes=k,this.emit("edgeAttributesUpdated",{key:ne.key,type:"replace",attributes:ne.attributes}),this}}},{name:function(ie){return"merge".concat(ie,"Attributes")},attacher:function(ie,he,oe){ie.prototype[he]=function(x,k){var ne;if("mixed"!==this.type&&"mixed"!==oe&&oe!==this.type)throw new ge("Graph.".concat(he,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ge("Graph.".concat(he,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Ee=""+x,Fe=""+k;if(k=arguments[2],!(ne=Y(this,Ee,Fe,oe)))throw new X("Graph.".concat(he,': could not find an edge for the given path ("').concat(Ee,'" - "').concat(Fe,'").'))}else if(!(ne=this._edges.get(x=""+x)))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" edge in the graph.'));if(!F(k))throw new ue("Graph.".concat(he,": provided attributes are not a plain object."));if("mixed"!==oe&&ne.undirected!==("undirected"===oe))throw new X("Graph.".concat(he,': could not find the "').concat(x,'" ').concat(oe," edge in the graph."));return me(ne.attributes,k),this.emit("edgeAttributesUpdated",{key:ne.key,type:"merge",attributes:ne.attributes,data:k}),this}}}],Le=G,Se=function(){var ie,he=arguments,oe=-1;return new Le(function x(){if(!ie){if(++oe>=he.length)return{done:!0};ie=he[oe]}var k=ie.next();return k.done?(ie=null,x()):k})},Re=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function He(ie,he){for(var oe in he)ie.push(he[oe].key)}function Xe(ie,he){for(var oe in he)he[oe].forEach(function(x){return ie.push(x.key)})}function ze(ie,he,oe){for(var x in ie)if(x!==oe){var k=ie[x];he(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey)}}function W(ie,he,oe){for(var x in ie)x!==oe&&ie[x].forEach(function(k){return he(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey)})}function J(ie,he,oe){for(var x in ie)if(x!==oe){var k=ie[x];if(he(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey))return!0}return!1}function we(ie,he,oe){var x,k,ne,Ee,Fe;for(var nt in ie)if(nt!==oe)for(x=ie[nt].values();!0!==(k=x.next()).done;)if(Ee=(ne=k.value).source,he(ne.key,ne.attributes,Ee.key,(Fe=ne.target).key,Ee.attributes,Fe.attributes,ne.undirected,ne.generatedKey))return!0;return!1}function ce(ie,he){var oe=Object.keys(ie),x=oe.length,k=null,ne=0;return new G(function Ee(){var Fe;if(k){var nt=k.next();if(nt.done)return k=null,ne++,Ee();Fe=nt.value}else{if(ne>=x)return{done:!0};var It=oe[ne];if(It===he)return ne++,Ee();if((Fe=ie[It])instanceof Set)return k=Fe.values(),Ee();ne++}return{done:!1,value:[Fe.key,Fe.attributes,Fe.source.key,Fe.target.key,Fe.source.attributes,Fe.target.attributes]}})}function ke(ie,he,oe){var x=he[oe];x&&ie.push(x.key)}function At(ie,he,oe){var x=he[oe];x&&x.forEach(function(k){return ie.push(k.key)})}function pt(ie,he,oe){var x=ie[he];if(x){var k=x.source,ne=x.target;oe(x.key,x.attributes,k.key,ne.key,k.attributes,ne.attributes,x.undirected,x.generatedKey)}}function ye(ie,he,oe){var x=ie[he];x&&x.forEach(function(k){return oe(k.key,k.attributes,k.source.key,k.target.key,k.source.attributes,k.target.attributes,k.undirected,k.generatedKey)})}function j(ie,he,oe){var x=ie[he];if(x){var k=x.source,ne=x.target;return oe(x.key,x.attributes,k.key,ne.key,k.attributes,ne.attributes,x.undirected,x.generatedKey)}}function R(ie,he,oe){var x=ie[he];if(x){for(var k,ne,Ee=x.values();!0!==(k=Ee.next()).done;)if(oe((ne=k.value).key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes,ne.undirected,ne.generatedKey))return!0;return!1}}function L(ie,he){var oe=ie[he];if(oe instanceof Set){var x=oe.values();return new G(function(){var k=x.next();if(k.done)return k;var ne=k.value;return{done:!1,value:[ne.key,ne.attributes,ne.source.key,ne.target.key,ne.source.attributes,ne.target.attributes]}})}return G.of([oe.key,oe.attributes,oe.source.key,oe.target.key,oe.source.attributes,oe.target.attributes])}function Pe(ie,he){if(0===ie.size)return[];if("mixed"===he||he===ie.type)return"function"==typeof Array.from?Array.from(ie._edges.keys()):$(ie._edges.keys(),ie._edges.size);for(var oe,x,ne=new Array("undirected"===he?ie.undirectedSize:ie.directedSize),Ee="undirected"===he,Fe=ie._edges.values(),nt=0;!0!==(oe=Fe.next()).done;)(x=oe.value).undirected===Ee&&(ne[nt++]=x.key);return ne}function et(ie,he,oe){if(0!==ie.size)for(var x,k,ne="mixed"!==he&&he!==ie.type,Ee="undirected"===he,Fe=ie._edges.values();!0!==(x=Fe.next()).done;)if(k=x.value,!ne||k.undirected===Ee){var Wt=k.source,Tt=k.target;oe(k.key,k.attributes,Wt.key,Tt.key,Wt.attributes,Tt.attributes,k.undirected,k.generatedKey)}}function wt(ie,he,oe){if(0!==ie.size)for(var x,k,ne="mixed"!==he&&he!==ie.type,Ee="undirected"===he,Fe=ie._edges.values();!0!==(x=Fe.next()).done;)if(k=x.value,!ne||k.undirected===Ee){var Wt=k.source,Tt=k.target;if(oe(k.key,k.attributes,Wt.key,Tt.key,Wt.attributes,Tt.attributes,k.undirected,k.generatedKey))break}}function Ot(ie,he){if(0===ie.size)return G.empty();var oe="mixed"!==he&&he!==ie.type,x="undirected"===he,k=ie._edges.values();return new G(function(){for(var ne,Ee;;){if((ne=k.next()).done)return ne;if(Ee=ne.value,!oe||Ee.undirected===x)break}return{value:[Ee.key,Ee.attributes,Ee.source.key,Ee.target.key,Ee.source.attributes,Ee.target.attributes],done:!1}})}function Mn(ie,he,oe,x){var k=[],ne=ie?Xe:He;return"undirected"!==he&&("out"!==oe&&ne(k,x.in),"in"!==oe&&ne(k,x.out),!oe&&x.directedSelfLoops>0&&k.splice(k.lastIndexOf(x.key),1)),"directed"!==he&&ne(k,x.undirected),k}function kn(ie,he,oe,x,k){var ne=ie?W:ze;"undirected"!==he&&("out"!==oe&&ne(x.in,k),"in"!==oe&&ne(x.out,k,oe?null:x.key)),"directed"!==he&&ne(x.undirected,k)}function $n(ie,he,oe,x,k){var ne=ie?we:J;"undirected"!==he&&("out"!==oe&&ne(x.in,k)||"in"!==oe&&ne(x.out,k,oe?null:x.key))||"directed"===he||ne(x.undirected,k)}function br(ie,he,oe){var x=G.empty();return"undirected"!==ie&&("out"!==he&&void 0!==oe.in&&(x=Se(x,ce(oe.in))),"in"!==he&&void 0!==oe.out&&(x=Se(x,ce(oe.out,he?null:oe.key)))),"directed"!==ie&&void 0!==oe.undirected&&(x=Se(x,ce(oe.undirected))),x}function hr(ie,he,oe,x,k){var ne=he?At:ke,Ee=[];return"undirected"!==ie&&(void 0!==x.in&&"out"!==oe&&ne(Ee,x.in,k),void 0!==x.out&&"in"!==oe&&ne(Ee,x.out,k),!oe&&x.directedSelfLoops>0&&Ee.splice(Ee.lastIndexOf(x.key),1)),"directed"!==ie&&void 0!==x.undirected&&ne(Ee,x.undirected,k),Ee}function Hi(ie,he,oe,x,k,ne){var Ee=he?ye:pt;"undirected"!==ie&&(void 0!==x.in&&"out"!==oe&&Ee(x.in,k,ne),x.key!==k&&void 0!==x.out&&"in"!==oe&&Ee(x.out,k,ne)),"directed"!==ie&&void 0!==x.undirected&&Ee(x.undirected,k,ne)}function Bs(ie,he,oe,x,k,ne){var Ee=he?R:j;"undirected"!==ie&&(void 0!==x.in&&"out"!==oe&&Ee(x.in,k,ne)||x.key!==k&&void 0!==x.out&&"in"!==oe&&Ee(x.out,k,ne,oe?null:x.key))||"directed"===ie||void 0===x.undirected||Ee(x.undirected,k,ne)}function ds(ie,he,oe,x){var k=G.empty();return"undirected"!==ie&&(void 0!==oe.in&&"out"!==he&&x in oe.in&&(k=Se(k,L(oe.in,x))),void 0!==oe.out&&"in"!==he&&x in oe.out&&(k=Se(k,L(oe.out,x)))),"directed"!==ie&&void 0!==oe.undirected&&x in oe.undirected&&(k=Se(k,L(oe.undirected,x))),k}var js=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Gi(ie,he){if(void 0!==he)for(var oe in he)ie.add(oe)}function Ka(ie,he,oe){if("mixed"!==ie){if("undirected"===ie)return Object.keys(oe.undirected);if("string"==typeof he)return Object.keys(oe[he])}var x=new Set;return"undirected"!==ie&&("out"!==he&&Gi(x,oe.in),"in"!==he&&Gi(x,oe.out)),"directed"!==ie&&Gi(x,oe.undirected),$(x.values(),x.size)}function xl(ie,he,oe){for(var x in he){var k=he[x];k instanceof Set&&(k=k.values().next().value);var ne=k.source,Fe=ne===ie?k.target:ne;oe(Fe.key,Fe.attributes)}}function ya(ie,he,oe,x){for(var k in oe){var ne=oe[k];ne instanceof Set&&(ne=ne.values().next().value);var Ee=ne.source,nt=Ee===he?ne.target:Ee;ie.has(nt.key)||(ie.add(nt.key),x(nt.key,nt.attributes))}}function bs(ie,he,oe){for(var x in he){var k=he[x];k instanceof Set&&(k=k.values().next().value);var ne=k.source,Fe=ne===ie?k.target:ne;if(oe(Fe.key,Fe.attributes))return!0}return!1}function Jt(ie,he,oe,x){for(var k in oe){var ne=oe[k];ne instanceof Set&&(ne=ne.values().next().value);var Ee=ne.source,nt=Ee===he?ne.target:Ee;if(!ie.has(nt.key)&&(ie.add(nt.key),x(nt.key,nt.attributes)))return!0}return!1}function Xa(ie,he){var oe=Object.keys(he),x=oe.length,k=0;return new G(function(){if(k>=x)return{done:!0};var ne=he[oe[k++]];ne instanceof Set&&(ne=ne.values().next().value);var Ee=ne.source,nt=Ee===ie?ne.target:Ee;return{done:!1,value:[nt.key,nt.attributes]}})}function it(ie,he,oe){var x=Object.keys(oe),k=x.length,ne=0;return new G(function Ee(){if(ne>=k)return{done:!0};var Fe=oe[x[ne++]];Fe instanceof Set&&(Fe=Fe.values().next().value);var nt=Fe.source,qe=nt===he?Fe.target:nt;return ie.has(qe.key)?Ee():(ie.add(qe.key),{done:!1,value:[qe.key,qe.attributes]})})}function at(ie,he,oe,x,k){var ne=ie._nodes.get(x);if("undirected"!==he){if("out"!==oe&&void 0!==ne.in)for(var Ee in ne.in)if(Ee===k)return!0;if("in"!==oe&&void 0!==ne.out)for(var Fe in ne.out)if(Fe===k)return!0}if("directed"!==he&&void 0!==ne.undirected)for(var nt in ne.undirected)if(nt===k)return!0;return!1}function Be(ie,he,oe){for(var x,k,ne,Ee,Fe,nt,It,qe=he._nodes.values(),Wt=he.type;!0!==(x=qe.next()).done;){if(k=x.value,"undirected"!==Wt)for(ne in Ee=k.out)if(nt=(Fe=Ee[ne]).target,It=oe(k.key,nt.key,k.attributes,nt.attributes,Fe.key,Fe.attributes,Fe.undirected,Fe.generatedKey),ie&&It)return;if("directed"!==Wt)for(ne in Ee=k.undirected)if((nt=(Fe=Ee[ne]).target).key!==ne&&(nt=Fe.source),It=oe(k.key,nt.key,k.attributes,nt.attributes,Fe.key,Fe.attributes,Fe.undirected,Fe.generatedKey),ie&&It)return}}function ct(ie,he,oe){for(var x,k,ne,Ee,Fe,nt,It,qe,Wt,Tt=he._nodes.values(),gn=he.type;!0!==(x=Tt.next()).done;){if(k=x.value,"undirected"!==gn)for(ne in nt=k.out)for(Ee=nt[ne].values();!0!==(Fe=Ee.next()).done;)if(qe=(It=Fe.value).target,Wt=oe(k.key,qe.key,k.attributes,qe.attributes,It.key,It.attributes,It.undirected,It.generatedKey),ie&&Wt)return;if("directed"!==gn)for(ne in nt=k.undirected)for(Ee=nt[ne].values();!0!==(Fe=Ee.next()).done;)if((qe=(It=Fe.value).target).key!==ne&&(qe=It.source),Wt=oe(k.key,qe.key,k.attributes,qe.attributes,It.key,It.attributes,It.undirected,It.generatedKey),ie&&Wt)return}}function tt(ie,he){var oe={key:ie};return se(he.attributes)||(oe.attributes=me({},he.attributes)),oe}function St(ie,he){var oe={source:he.source.key,target:he.target.key};return he.generatedKey||(oe.key=ie),se(he.attributes)||(oe.attributes=me({},he.attributes)),he.undirected&&(oe.undirected=!0),oe}function xt(ie){return F(ie)?"key"in ie?!("attributes"in ie)||F(ie.attributes)&&null!==ie.attributes?null:"invalid-attributes":"no-key":"not-object"}function Dt(ie){return F(ie)?"source"in ie?"target"in ie?!("attributes"in ie)||F(ie.attributes)&&null!==ie.attributes?"undirected"in ie&&"boolean"!=typeof ie.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object"}var Qt=new Set(["directed","undirected","mixed"]),zn=new Set(["domain","_events","_eventsCount","_maxListeners"]),nr={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function On(ie,he,oe){var x=new ie.NodeDataClass(he,oe);return ie._nodes.set(he,x),ie.emit("nodeAdded",{key:he,attributes:oe}),x}function pn(ie,he,oe,x,k,ne,Ee,Fe){if(!x&&"undirected"===ie.type)throw new ge("Graph.".concat(he,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(x&&"directed"===ie.type)throw new ge("Graph.".concat(he,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Fe&&!F(Fe))throw new ue("Graph.".concat(he,': invalid attributes. Expecting an object but got "').concat(Fe,'"'));if(ne=""+ne,Ee=""+Ee,Fe=Fe||{},!ie.allowSelfLoops&&ne===Ee)throw new ge("Graph.".concat(he,': source & target are the same ("').concat(ne,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var nt=ie._nodes.get(ne),It=ie._nodes.get(Ee);if(!nt)throw new X("Graph.".concat(he,': source node "').concat(ne,'" not found.'));if(!It)throw new X("Graph.".concat(he,': target node "').concat(Ee,'" not found.'));var qe={key:null,undirected:x,source:ne,target:Ee,attributes:Fe};if(oe&&(k=ie._edgeKeyGenerator(qe)),ie._edges.has(k=""+k))throw new ge("Graph.".concat(he,': the "').concat(k,'" edge already exists in the graph.'));if(!ie.multi&&(x?void 0!==nt.undirected[Ee]:void 0!==nt.out[Ee]))throw new ge("Graph.".concat(he,': an edge linking "').concat(ne,'" to "').concat(Ee,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Wt=new We(x,k,oe,nt,It,Fe);return ie._edges.set(k,Wt),ne===Ee?x?(nt.undirectedSelfLoops++,ie._undirectedSelfLoopCount++):(nt.directedSelfLoops++,ie._directedSelfLoopCount++):x?(nt.undirectedDegree++,It.undirectedDegree++):(nt.outDegree++,It.inDegree++),Je(ie,x,Wt,ne,Ee,nt,It),x?ie._undirectedSize++:ie._directedSize++,qe.key=k,ie.emit("edgeAdded",qe),k}function Gn(ie,he,oe,x,k,ne,Ee,Fe,nt){if(!x&&"undirected"===ie.type)throw new ge("Graph.".concat(he,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(x&&"directed"===ie.type)throw new ge("Graph.".concat(he,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Fe)if(nt){if("function"!=typeof Fe)throw new ue("Graph.".concat(he,': invalid updater function. Expecting a function but got "').concat(Fe,'"'))}else if(!F(Fe))throw new ue("Graph.".concat(he,': invalid attributes. Expecting an object but got "').concat(Fe,'"'));var It;if(ne=""+ne,Ee=""+Ee,nt&&(It=Fe,Fe=void 0),!ie.allowSelfLoops&&ne===Ee)throw new ge("Graph.".concat(he,': source & target are the same ("').concat(ne,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var qe,Wt,Tt=ie._nodes.get(ne),gn=ie._nodes.get(Ee);if(!oe&&(qe=ie._edges.get(k))){if(qe.source.key!==ne||qe.target.key!==Ee||x&&(qe.source.key!==Ee||qe.target.key!==ne))throw new ge("Graph.".concat(he,': inconsistency detected when attempting to merge the "').concat(k,'" edge with "').concat(ne,'" source & "').concat(Ee,'" target vs. ("').concat(qe.source.key,'", "').concat(qe.target.key,'").'));Wt=qe}if(Wt||ie.multi||!Tt||(Wt=x?Tt.undirected[Ee]:Tt.out[Ee]),Wt)return(nt?It:Fe)?(nt?(Wt.attributes=It(Wt.attributes),ie.emit("edgeAttributesUpdated",{type:"replace",key:Wt.key,attributes:Wt.attributes})):(me(Wt.attributes,Fe),ie.emit("edgeAttributesUpdated",{type:"merge",key:Wt.key,attributes:Wt.attributes,data:Fe})),Wt.key):Wt.key;Fe=Fe||{},nt&&It&&(Fe=It(Fe));var Wi={key:null,undirected:x,source:ne,target:Ee,attributes:Fe};if(oe&&(k=ie._edgeKeyGenerator(Wi)),ie._edges.has(k=""+k))throw new ge("Graph.".concat(he,': the "').concat(k,'" edge already exists in the graph.'));return Tt||(Tt=On(ie,ne,{}),ne===Ee&&(gn=Tt)),gn||(gn=On(ie,Ee,{})),qe=new We(x,k,oe,Tt,gn,Fe),ie._edges.set(k,qe),ne===Ee?x?(Tt.undirectedSelfLoops++,ie._undirectedSelfLoopCount++):(Tt.directedSelfLoops++,ie._directedSelfLoopCount++):x?(Tt.undirectedDegree++,gn.undirectedDegree++):(Tt.outDegree++,gn.inDegree++),Je(ie,x,qe,ne,Ee,Tt,gn),x?ie._undirectedSize++:ie._directedSize++,Wi.key=k,ie.emit("edgeAdded",Wi),k}var ie,An=function(ie){function he(x){var k;if(k=ie.call(this)||this,(x=me({},nr,x)).edgeKeyGenerator&&"function"!=typeof x.edgeKeyGenerator)throw new ue("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(x.edgeKeyGenerator,'".'));if("boolean"!=typeof x.multi)throw new ue("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(x.multi,'".'));if(!Qt.has(x.type))throw new ue('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(x.type,'".'));if("boolean"!=typeof x.allowSelfLoops)throw new ue("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(x.allowSelfLoops,'".'));var ne,Ee="mixed"===x.type?De:"directed"===x.type?je:Ze;return K(xe(k),"NodeDataClass",Ee),K(xe(k),"_attributes",{}),K(xe(k),"_nodes",new Map),K(xe(k),"_edges",new Map),K(xe(k),"_directedSize",0),K(xe(k),"_undirectedSize",0),K(xe(k),"_directedSelfLoopCount",0),K(xe(k),"_undirectedSelfLoopCount",0),K(xe(k),"_edgeKeyGenerator",x.edgeKeyGenerator||(ne=0,function(){return ne++})),K(xe(k),"_options",x),zn.forEach(function(Fe){return K(xe(k),Fe,k[Fe])}),E(xe(k),"order",function(){return k._nodes.size}),E(xe(k),"size",function(){return k._edges.size}),E(xe(k),"directedSize",function(){return k._directedSize}),E(xe(k),"undirectedSize",function(){return k._undirectedSize}),E(xe(k),"selfLoopCount",function(){return k._directedSelfLoopCount+k._undirectedSelfLoopCount}),E(xe(k),"directedSelfLoopCount",function(){return k._directedSelfLoopCount}),E(xe(k),"undirectedSelfLoopCount",function(){return k._undirectedSelfLoopCount}),E(xe(k),"multi",k._options.multi),E(xe(k),"type",k._options.type),E(xe(k),"allowSelfLoops",k._options.allowSelfLoops),E(xe(k),"implementation",function(){return"graphology"}),k}Ke(he,ie);var oe=he.prototype;return oe.hasNode=function(x){return this._nodes.has(""+x)},oe.hasDirectedEdge=function(x,k){if("undirected"===this.type)return!1;if(1===arguments.length){var Ee=this._edges.get(""+x);return!!Ee&&!Ee.undirected}if(2===arguments.length){k=""+k;var Fe=this._nodes.get(x=""+x);if(!Fe)return!1;var nt=Fe.out[k];return!(!nt||this.multi&&!nt.size)}throw new ue("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},oe.hasUndirectedEdge=function(x,k){if("directed"===this.type)return!1;if(1===arguments.length){var Ee=this._edges.get(""+x);return!!Ee&&Ee.undirected}if(2===arguments.length){k=""+k;var Fe=this._nodes.get(x=""+x);if(!Fe)return!1;var nt=Fe.undirected[k];return!(!nt||this.multi&&!nt.size)}throw new ue("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},oe.hasEdge=function(x,k){if(1===arguments.length)return this._edges.has(""+x);if(2===arguments.length){k=""+k;var Ee=this._nodes.get(x=""+x);if(!Ee)return!1;var Fe=void 0!==Ee.out&&Ee.out[k];return Fe||(Fe=void 0!==Ee.undirected&&Ee.undirected[k]),!(!Fe||this.multi&&!Fe.size)}throw new ue("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},oe.directedEdge=function(x,k){if("undirected"!==this.type){if(x=""+x,k=""+k,this.multi)throw new ge("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var ne=this._nodes.get(x);if(!ne)throw new X('Graph.directedEdge: could not find the "'.concat(x,'" source node in the graph.'));if(!this._nodes.has(k))throw new X('Graph.directedEdge: could not find the "'.concat(k,'" target node in the graph.'));var Ee=ne.out&&ne.out[k]||void 0;return Ee?Ee.key:void 0}},oe.undirectedEdge=function(x,k){if("directed"!==this.type){if(x=""+x,k=""+k,this.multi)throw new ge("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var ne=this._nodes.get(x);if(!ne)throw new X('Graph.undirectedEdge: could not find the "'.concat(x,'" source node in the graph.'));if(!this._nodes.has(k))throw new X('Graph.undirectedEdge: could not find the "'.concat(k,'" target node in the graph.'));var Ee=ne.undirected&&ne.undirected[k]||void 0;return Ee?Ee.key:void 0}},oe.edge=function(x,k){if(this.multi)throw new ge("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");k=""+k;var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.edge: could not find the "'.concat(x,'" source node in the graph.'));if(!this._nodes.has(k))throw new X('Graph.edge: could not find the "'.concat(k,'" target node in the graph.'));var Ee=ne.out&&ne.out[k]||ne.undirected&&ne.undirected[k]||void 0;if(Ee)return Ee.key},oe.inDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new ue('Graph.inDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.inDegree: could not find the "'.concat(x,'" node in the graph.'));return"undirected"===this.type?0:ne.inDegree+(k?ne.directedSelfLoops:0)},oe.outDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new ue('Graph.outDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.outDegree: could not find the "'.concat(x,'" node in the graph.'));return"undirected"===this.type?0:ne.outDegree+(k?ne.directedSelfLoops:0)},oe.directedDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new ue('Graph.directedDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.directedDegree: could not find the "'.concat(x,'" node in the graph.'));if("undirected"===this.type)return 0;var Ee=k?ne.directedSelfLoops:0;return ne.inDegree+Ee+(ne.outDegree+Ee)},oe.undirectedDegree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new ue('Graph.undirectedDegree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.undirectedDegree: could not find the "'.concat(x,'" node in the graph.'));return"directed"===this.type?0:ne.undirectedDegree+2*(k?ne.undirectedSelfLoops:0)},oe.degree=function(x){var k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof k)throw new ue('Graph.degree: Expecting a boolean but got "'.concat(k,'" for the second parameter (allowing self-loops to be counted).'));var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.degree: could not find the "'.concat(x,'" node in the graph.'));var Ee=0,Fe=0;return"directed"!==this.type&&(k&&(Fe=ne.undirectedSelfLoops),Ee+=ne.undirectedDegree+2*Fe),"undirected"!==this.type&&(k&&(Fe=ne.directedSelfLoops),Ee+=ne.inDegree+ne.outDegree+2*Fe),Ee},oe.source=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.source: could not find the "'.concat(x,'" edge in the graph.'));return k.source.key},oe.target=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.target: could not find the "'.concat(x,'" edge in the graph.'));return k.target.key},oe.extremities=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.extremities: could not find the "'.concat(x,'" edge in the graph.'));return[k.source.key,k.target.key]},oe.opposite=function(x,k){x=""+x;var ne=this._edges.get(k=""+k);if(!ne)throw new X('Graph.opposite: could not find the "'.concat(k,'" edge in the graph.'));var Ee=ne.source.key,Fe=ne.target.key;if(x!==Ee&&x!==Fe)throw new X('Graph.opposite: the "'.concat(x,'" node is not attached to the "').concat(k,'" edge (').concat(Ee,", ").concat(Fe,")."));return x===Ee?Fe:Ee},oe.hasExtremity=function(x,k){k=""+k;var ne=this._edges.get(x=""+x);if(!ne)throw new X('Graph.hasExtremity: could not find the "'.concat(x,'" edge in the graph.'));return ne.source.key===k||ne.target.key===k},oe.isUndirected=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.isUndirected: could not find the "'.concat(x,'" edge in the graph.'));return k.undirected},oe.isDirected=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.isDirected: could not find the "'.concat(x,'" edge in the graph.'));return!k.undirected},oe.isSelfLoop=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.isSelfLoop: could not find the "'.concat(x,'" edge in the graph.'));return k.source===k.target},oe.hasGeneratedKey=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.hasGeneratedKey: could not find the "'.concat(x,'" edge in the graph.'));return k.generatedKey},oe.addNode=function(x,k){return function(ne,Ee,Fe){if(Fe&&!F(Fe))throw new ue('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Fe,'"'));if(Fe=Fe||{},ne._nodes.has(Ee=""+Ee))throw new ge('Graph.addNode: the "'.concat(Ee,'" node already exist in the graph.'));var nt=new ne.NodeDataClass(Ee,Fe);return ne._nodes.set(Ee,nt),ne.emit("nodeAdded",{key:Ee,attributes:Fe}),nt}(this,x,k).key},oe.mergeNode=function(x,k){if(k&&!F(k))throw new ue('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(k,'"'));k=k||{};var ne=this._nodes.get(x=""+x);return ne?(k&&(me(ne.attributes,k),this.emit("nodeAttributesUpdated",{type:"merge",key:x,attributes:ne.attributes,data:k})),x):(ne=new this.NodeDataClass(x,k),this._nodes.set(x,ne),this.emit("nodeAdded",{key:x,attributes:k}),x)},oe.updateNode=function(x,k){if(k&&"function"!=typeof k)throw new ue('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(k,'"'));var ne=this._nodes.get(x=""+x);if(ne)return k&&(ne.attributes=k(ne.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:x,attributes:ne.attributes})),x;var Fe=k?k({}):{};return ne=new this.NodeDataClass(x,Fe),this._nodes.set(x,ne),this.emit("nodeAdded",{key:x,attributes:Fe}),x},oe.dropNode=function(x){var k=this,ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.dropNode: could not find the "'.concat(x,'" node in the graph.'));this.forEachEdge(x,function(Ee){k.dropEdge(Ee)}),this._nodes.delete(x),this.emit("nodeDropped",{key:x,attributes:ne.attributes})},oe.dropEdge=function(x){var k;if(arguments.length>1){var ne=""+arguments[0],Ee=""+arguments[1];if(!(k=Y(this,ne,Ee,this.type)))throw new X('Graph.dropEdge: could not find the "'.concat(ne,'" -> "').concat(Ee,'" edge in the graph.'))}else if(!(k=this._edges.get(x=""+x)))throw new X('Graph.dropEdge: could not find the "'.concat(x,'" edge in the graph.'));this._edges.delete(k.key);var nt=k.source,It=k.target,qe=k.attributes,Wt=k.undirected;return nt===It?Wt?(nt.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(nt.directedSelfLoops--,this._directedSelfLoopCount--):Wt?(nt.undirectedDegree--,It.undirectedDegree--):(nt.outDegree--,It.inDegree--),Ye(this,Wt,k),Wt?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:x,attributes:qe,source:nt.key,target:It.key,undirected:Wt}),this},oe.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},oe.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},oe.getAttribute=function(x){return this._attributes[x]},oe.getAttributes=function(){return this._attributes},oe.hasAttribute=function(x){return this._attributes.hasOwnProperty(x)},oe.setAttribute=function(x,k){return this._attributes[x]=k,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:x}),this},oe.updateAttribute=function(x,k){if("function"!=typeof k)throw new ue("Graph.updateAttribute: updater should be a function.");return this._attributes[x]=k(this._attributes[x]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:x}),this},oe.removeAttribute=function(x){return delete this._attributes[x],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:x}),this},oe.replaceAttributes=function(x){if(!F(x))throw new ue("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=x,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},oe.mergeAttributes=function(x){if(!F(x))throw new ue("Graph.mergeAttributes: provided attributes are not a plain object.");return me(this._attributes,x),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:x}),this},oe.getNodeAttribute=function(x,k){var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.getNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));return ne.attributes[k]},oe.getNodeAttributes=function(x){var k=this._nodes.get(x=""+x);if(!k)throw new X('Graph.getNodeAttributes: could not find the "'.concat(x,'" node in the graph.'));return k.attributes},oe.hasNodeAttribute=function(x,k){var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.hasNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));return ne.attributes.hasOwnProperty(k)},oe.setNodeAttribute=function(x,k,ne){var Ee=this._nodes.get(x=""+x);if(!Ee)throw new X('Graph.setNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));if(arguments.length<3)throw new ue("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return Ee.attributes[k]=ne,this.emit("nodeAttributesUpdated",{key:x,type:"set",attributes:Ee.attributes,name:k}),this},oe.updateNodeAttribute=function(x,k,ne){var Ee=this._nodes.get(x=""+x);if(!Ee)throw new X('Graph.updateNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));if(arguments.length<3)throw new ue("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof ne)throw new ue("Graph.updateAttribute: updater should be a function.");var Fe=Ee.attributes,nt=ne(Fe[k]);return Fe[k]=nt,this.emit("nodeAttributesUpdated",{key:x,type:"set",attributes:Ee.attributes,name:k}),this},oe.removeNodeAttribute=function(x,k){var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.hasNodeAttribute: could not find the "'.concat(x,'" node in the graph.'));return delete ne.attributes[k],this.emit("nodeAttributesUpdated",{key:x,type:"remove",attributes:ne.attributes,name:k}),this},oe.replaceNodeAttributes=function(x,k){var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.replaceNodeAttributes: could not find the "'.concat(x,'" node in the graph.'));if(!F(k))throw new ue("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return ne.attributes=k,this.emit("nodeAttributesUpdated",{key:x,type:"replace",attributes:ne.attributes}),this},oe.mergeNodeAttributes=function(x,k){var ne=this._nodes.get(x=""+x);if(!ne)throw new X('Graph.mergeNodeAttributes: could not find the "'.concat(x,'" node in the graph.'));if(!F(k))throw new ue("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return me(ne.attributes,k),this.emit("nodeAttributesUpdated",{key:x,type:"merge",attributes:ne.attributes,data:k}),this},oe.updateEachNodeAttributes=function(x,k){if("function"!=typeof x)throw new ue("Graph.updateEachNodeAttributes: expecting an updater function.");if(k&&!A(k))throw new ue("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ne,Ee,Fe=this._nodes.values();!0!==(ne=Fe.next()).done;)(Ee=ne.value).attributes=x(Ee.key,Ee.attributes);this.emit("eachNodeAttributesUpdated",{hints:k||null})},oe.updateEachEdgeAttributes=function(x,k){if("function"!=typeof x)throw new ue("Graph.updateEachEdgeAttributes: expecting an updater function.");if(k&&!A(k))throw new ue("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var ne,Ee,Fe=this._edges.values();!0!==(ne=Fe.next()).done;)(Ee=ne.value).attributes=x(Ee.key,Ee.attributes);this.emit("eachEdgeAttributesUpdated",{hints:k||null})},oe.forEach=function(x){if("function"!=typeof x)throw new ue("Graph.forEach: expecting a callback.");this.multi?ct(!1,this,x):Be(!1,this,x)},oe.forEachUntil=function(x){if("function"!=typeof x)throw new ue("Graph.forEach: expecting a callback.");this.multi?ct(!0,this,x):Be(!0,this,x)},oe.adjacency=function(){return this.multi?(nt=(x=this)._nodes.values(),It=x.type,qe="outer",Wt=null,new G(function Tt(){var gn;if("outer"===qe)return!0===(gn=nt.next()).done?gn:(k=gn.value,qe="directed",Tt());if("directed"===qe)return"undirected"===It?(qe="undirected",Tt()):(Ee=k.out,ne=Object.keys(k.out),Fe=0,qe="inner-directed",Tt());if("undirected"===qe){if("directed"===It)return qe="outer",Tt();Ee=k.undirected,ne=Object.keys(k.undirected),Fe=0,qe="inner-undirected"}if(!Wt&&Fe>=ne.length)return qe="inner-undirected"===qe?"outer":"undirected",Tt();if(!Wt){var ws=ne[Fe++];return Wt=Ee[ws].values(),Tt()}if((gn=Wt.next()).done)return Wt=null,Tt();var Wi=gn.value,Zs=Wi.target;return"inner-undirected"===qe&&Zs.key===k.key&&(Zs=Wi.source),{done:!1,value:[k.key,Zs.key,k.attributes,Zs.attributes,Wi.key,Wi.attributes]}})):(Dl=(Tt=this)._nodes.values(),ho=Tt.type,ki="outer",new G(function Vs(){var mu;if("outer"===ki)return!0===(mu=Dl.next()).done?mu:(gn=mu.value,ki="directed",Vs());if("directed"===ki)return"undirected"===ho?(ki="undirected",Vs()):(Wi=gn.out,ws=Object.keys(gn.out),Zs=0,ki="inner-directed",Vs());if("undirected"===ki){if("directed"===ho)return ki="outer",Vs();Wi=gn.undirected,ws=Object.keys(gn.undirected),Zs=0,ki="inner-undirected"}if(Zs>=ws.length)return ki="inner-undirected"===ki?"outer":"undirected",Vs();var En=ws[Zs++],fo=Wi[En],Ml=fo.target;return"inner-undirected"===ki&&Ml.key===gn.key&&(Ml=fo.source),{done:!1,value:[gn.key,Ml.key,gn.attributes,Ml.attributes,fo.key,fo.attributes]}}));var Tt,gn,ws,Wi,Zs,Dl,ho,ki,x,k,ne,Ee,Fe,nt,It,qe,Wt},oe.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):$(this._nodes.keys(),this._nodes.size)},oe.forEachNode=function(x){if("function"!=typeof x)throw new ue("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(k,ne){x(ne,k.attributes)})},oe.forEachNodeUntil=function(x){if("function"!=typeof x)throw new ue("Graph.forEachNode: expecting a callback.");for(var k,ne,Ee=this._nodes.values();!0!==(k=Ee.next())&&!x((ne=k.value).key,ne.attributes););},oe.nodeEntries=function(){var x=this._nodes.values();return new G(function(){var k=x.next();if(k.done)return k;var ne=k.value;return{value:[ne.key,ne.attributes],done:!1}})},oe.exportNode=function(x){var k=this._nodes.get(x=""+x);if(!k)throw new X('Graph.exportNode: could not find the "'.concat(x,'" node in the graph.'));return tt(x,k)},oe.exportEdge=function(x){var k=this._edges.get(x=""+x);if(!k)throw new X('Graph.exportEdge: could not find the "'.concat(x,'" edge in the graph.'));return St(x,k)},oe.export=function(){var x=new Array(this._nodes.size),k=0;this._nodes.forEach(function(Ee,Fe){x[k++]=tt(Fe,Ee)});var ne=new Array(this._edges.size);return k=0,this._edges.forEach(function(Ee,Fe){ne[k++]=St(Fe,Ee)}),{attributes:this.getAttributes(),nodes:x,edges:ne,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},oe.importNode=function(x){var k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ne=xt(x);if(ne){if("not-object"===ne)throw new ue('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===ne)throw new ue("Graph.importNode: no key provided.");if("invalid-attributes"===ne)throw new ue("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var Ee=x.key,Fe=x.attributes,nt=void 0===Fe?{}:Fe;return k?this.mergeNode(Ee,nt):this.addNode(Ee,nt),this},oe.importEdge=function(x){var k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ne=Dt(x);if(ne){if("not-object"===ne)throw new ue('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===ne)throw new ue("Graph.importEdge: missing souce.");if("no-target"===ne)throw new ue("Graph.importEdge: missing target.");if("invalid-attributes"===ne)throw new ue("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===ne)throw new ue("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var Ee=x.source,Fe=x.target,nt=x.attributes,It=void 0===nt?{}:nt,qe=x.undirected,Wt=void 0!==qe&&qe;return"key"in x?(k?Wt?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Wt?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,x.key,Ee,Fe,It):(k?Wt?this.mergeUndirectedEdge:this.mergeDirectedEdge:Wt?this.addUndirectedEdge:this.addDirectedEdge).call(this,Ee,Fe,It),this},oe.import=function(x){var k,ne,Ee,Fe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(z(x))return this.import(x.export(),Fe),this;if(!F(x))throw new ue("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(x.attributes){if(!F(x.attributes))throw new ue("Graph.import: invalid attributes. Expecting a plain object.");Fe?this.mergeAttributes(x.attributes):this.replaceAttributes(x.attributes)}if(x.nodes){if(Ee=x.nodes,!Array.isArray(Ee))throw new ue("Graph.import: invalid nodes. Expecting an array.");for(k=0,ne=Ee.length;k<ne;k++)this.importNode(Ee[k],Fe)}if(x.edges){if(Ee=x.edges,!Array.isArray(Ee))throw new ue("Graph.import: invalid edges. Expecting an array.");for(k=0,ne=Ee.length;k<ne;k++)this.importEdge(Ee[k],Fe)}return this},oe.nullCopy=function(x){return new he(me({},this._options,x))},oe.emptyCopy=function(x){var k=this.nullCopy(x);return this._nodes.forEach(function(ne,Ee){var Fe=me({},ne.attributes);ne=new k.NodeDataClass(Ee,Fe),k._nodes.set(Ee,ne)}),k},oe.copy=function(){var x=new he(this._options);return x.import(this),x},oe.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(x){return x.upgradeToMixed()}),this._options.type="mixed",E(this,"type",this._options.type),K(this,"NodeDataClass",De)),this},oe.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,E(this,"multi",!0),(x=this)._nodes.forEach(function(k,ne){if(k.out)for(var Ee in k.out){var Fe=new Set;Fe.add(k.out[Ee]),k.out[Ee]=Fe,x._nodes.get(Ee).in[ne]=Fe}if(k.undirected)for(var nt in k.undirected)if(!(nt>ne)){var It=new Set;It.add(k.undirected[nt]),k.undirected[nt]=It,x._nodes.get(nt).undirected[ne]=It}})),this;var x},oe.clearIndex=function(){return this._nodes.forEach(function(x){void 0!==x.in&&(x.in={},x.out={}),void 0!==x.undirected&&(x.undirected={})}),this},oe.toJSON=function(){return this.export()},oe.toString=function(){return"[object Graph]"},oe.inspect=function(){var x=this,k={};this._nodes.forEach(function(It,qe){k[qe]=It.attributes});var ne={},Ee={};this._edges.forEach(function(It,qe){var Wt=It.undirected?"--":"->",Tt="",gn="(".concat(It.source.key,")").concat(Wt,"(").concat(It.target.key,")");It.generatedKey?x.multi&&(void 0===Ee[gn]?Ee[gn]=0:Ee[gn]++,Tt+="".concat(Ee[gn],". ")):Tt+="[".concat(qe,"]: "),ne[Tt+=gn]=It.attributes});var Fe={};for(var nt in this)this.hasOwnProperty(nt)&&!zn.has(nt)&&"function"!=typeof this[nt]&&(Fe[nt]=this[nt]);return Fe.attributes=this._attributes,Fe.nodes=k,Fe.edges=ne,K(Fe,"constructor",this.constructor),Fe},he}(T.exports.EventEmitter);"undefined"!=typeof Symbol&&(An.prototype[Symbol.for("nodejs.util.inspect.custom")]=An.prototype.inspect),[{name:function(ie){return"".concat(ie,"Edge")},generateKey:!0},{name:function(ie){return"".concat(ie,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(ie){return"".concat(ie,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(ie){return"".concat(ie,"EdgeWithKey")}},{name:function(ie){return"".concat(ie,"DirectedEdgeWithKey")},type:"directed"},{name:function(ie){return"".concat(ie,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(ie){["add","merge","update"].forEach(function(he){var oe=ie.name(he),x="add"===he?pn:Gn;An.prototype[oe]=ie.generateKey?function(k,ne,Ee){return x(this,oe,!0,"undirected"===(ie.type||this.type),null,k,ne,Ee,"update"===he)}:function(k,ne,Ee,Fe){return x(this,oe,!1,"undirected"===(ie.type||this.type),k,ne,Ee,Fe,"update"===he)}})}),"undefined"!=typeof Symbol&&(An.prototype[Symbol.iterator]=An.prototype.adjacency),ie=An,Ve.forEach(function(he){var oe=he.name,x=he.attacher;x(ie,oe("Edge"),"mixed"),x(ie,oe("DirectedEdge"),"directed"),x(ie,oe("UndirectedEdge"),"undirected")}),function(ie){Re.forEach(function(he){var x,k,ne,Ee;ne=(x=he).type,Ee=x.direction,ie.prototype[k=x.name]=function(Fe,nt){if("mixed"!==ne&&"mixed"!==this.type&&ne!==this.type)return[];if(!arguments.length)return Pe(this,ne);if(1===arguments.length){var It=this._nodes.get(Fe=""+Fe);if(void 0===It)throw new X("Graph.".concat(k,': could not find the "').concat(Fe,'" node in the graph.'));return Mn(this.multi,"mixed"===ne?this.type:ne,Ee,It)}if(2===arguments.length){nt=""+nt;var qe=this._nodes.get(Fe=""+Fe);if(!qe)throw new X("Graph.".concat(k,':  could not find the "').concat(Fe,'" source node in the graph.'));if(!this._nodes.has(nt))throw new X("Graph.".concat(k,':  could not find the "').concat(nt,'" target node in the graph.'));return hr(ne,this.multi,Ee,qe,nt)}throw new ue("Graph.".concat(k,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(oe,x){var k=x.name,ne=x.type,Ee=x.direction,Fe="forEach"+k[0].toUpperCase()+k.slice(1,-1);oe.prototype[Fe]=function(nt,It,qe){if("mixed"===ne||"mixed"===this.type||ne===this.type){if(1===arguments.length)return et(this,ne,qe=nt);if(2===arguments.length){qe=It;var Wt=this._nodes.get(nt=""+nt);if(void 0===Wt)throw new X("Graph.".concat(Fe,': could not find the "').concat(nt,'" node in the graph.'));return kn(this.multi,"mixed"===ne?this.type:ne,Ee,Wt,qe)}if(3===arguments.length){It=""+It;var Tt=this._nodes.get(nt=""+nt);if(!Tt)throw new X("Graph.".concat(Fe,':  could not find the "').concat(nt,'" source node in the graph.'));if(!this._nodes.has(It))throw new X("Graph.".concat(Fe,':  could not find the "').concat(It,'" target node in the graph.'));return Hi(ne,this.multi,Ee,Tt,It,qe)}throw new ue("Graph.".concat(Fe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ie,he),function(oe,x){var k=x.name,ne=x.type,Ee=x.direction,Fe="forEach"+k[0].toUpperCase()+k.slice(1,-1)+"Until";oe.prototype[Fe]=function(nt,It,qe){if("mixed"===ne||"mixed"===this.type||ne===this.type){if(1===arguments.length)return wt(this,ne,qe=nt);if(2===arguments.length){qe=It;var Wt=this._nodes.get(nt=""+nt);if(void 0===Wt)throw new X("Graph.".concat(Fe,': could not find the "').concat(nt,'" node in the graph.'));return $n(this.multi,"mixed"===ne?this.type:ne,Ee,Wt,qe)}if(3===arguments.length){It=""+It;var Tt=this._nodes.get(nt=""+nt);if(!Tt)throw new X("Graph.".concat(Fe,':  could not find the "').concat(nt,'" source node in the graph.'));if(!this._nodes.has(It))throw new X("Graph.".concat(Fe,':  could not find the "').concat(It,'" target node in the graph.'));return Bs(ne,this.multi,Ee,Tt,It,qe)}throw new ue("Graph.".concat(Fe,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}}}(ie,he),function(oe,x){var ne=x.type,Ee=x.direction,Fe=x.name.slice(0,-1)+"Entries";oe.prototype[Fe]=function(nt,It){if("mixed"!==ne&&"mixed"!==this.type&&ne!==this.type)return G.empty();if(!arguments.length)return Ot(this,ne);if(1===arguments.length){var qe=this._nodes.get(nt=""+nt);if(!qe)throw new X("Graph.".concat(Fe,': could not find the "').concat(nt,'" node in the graph.'));return br(ne,Ee,qe)}if(2===arguments.length){It=""+It;var Wt=this._nodes.get(nt=""+nt);if(!Wt)throw new X("Graph.".concat(Fe,':  could not find the "').concat(nt,'" source node in the graph.'));if(!this._nodes.has(It))throw new X("Graph.".concat(Fe,':  could not find the "').concat(It,'" target node in the graph.'));return ds(ne,Ee,Wt,It)}throw new ue("Graph.".concat(Fe,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(ie,he)})}(An),function(ie){js.forEach(function(he){var x,k,ne,Ee;ne=(x=he).type,Ee=x.direction,ie.prototype[k=x.name]=function(Fe){if("mixed"!==ne&&"mixed"!==this.type&&ne!==this.type)return[];if(2===arguments.length){var nt=""+arguments[0],It=""+arguments[1];if(!this._nodes.has(nt))throw new X("Graph.".concat(k,': could not find the "').concat(nt,'" node in the graph.'));if(!this._nodes.has(It))throw new X("Graph.".concat(k,': could not find the "').concat(It,'" node in the graph.'));return at(this,ne,Ee,nt,It)}if(1===arguments.length){var qe=this._nodes.get(Fe=""+Fe);if(void 0===qe)throw new X("Graph.".concat(k,': could not find the "').concat(Fe,'" node in the graph.'));return Ka("mixed"===ne?this.type:ne,Ee,qe)}throw new ue("Graph.".concat(k,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."))},function(ie,he){var oe=he.name,x=he.type,k=he.direction,ne="forEach"+oe[0].toUpperCase()+oe.slice(1,-1);ie.prototype[ne]=function(Ee,Fe){if("mixed"===x||"mixed"===this.type||x===this.type){var nt=this._nodes.get(Ee=""+Ee);if(void 0===nt)throw new X("Graph.".concat(ne,': could not find the "').concat(Ee,'" node in the graph.'));!function(It,qe,Wt,Tt){if("mixed"!==It){if("undirected"===It)return xl(Wt,Wt.undirected,Tt);if("string"==typeof qe)return xl(Wt,Wt[qe],Tt)}var gn=new Set;"undirected"!==It&&("out"!==qe&&ya(gn,Wt,Wt.in,Tt),"in"!==qe&&ya(gn,Wt,Wt.out,Tt)),"directed"!==It&&ya(gn,Wt,Wt.undirected,Tt)}("mixed"===x?this.type:x,k,nt,Fe)}}}(ie,he),function(ie,he){var oe=he.name,x=he.type,k=he.direction,ne="forEach"+oe[0].toUpperCase()+oe.slice(1,-1)+"Until";ie.prototype[ne]=function(Ee,Fe){if("mixed"===x||"mixed"===this.type||x===this.type){var nt=this._nodes.get(Ee=""+Ee);if(void 0===nt)throw new X("Graph.".concat(ne,': could not find the "').concat(Ee,'" node in the graph.'));!function(It,qe,Wt,Tt){if("mixed"!==It){if("undirected"===It)return bs(Wt,Wt.undirected,Tt);if("string"==typeof qe)return bs(Wt,Wt[qe],Tt)}var gn=new Set;"undirected"!==It&&("out"!==qe&&Jt(gn,Wt,Wt.in,Tt)||"in"!==qe&&Jt(gn,Wt,Wt.out,Tt))||"directed"===It||Jt(gn,Wt,Wt.undirected,Tt)}("mixed"===x?this.type:x,k,nt,Fe)}}}(ie,he),function(ie,he){var x=he.type,k=he.direction,ne=he.name.slice(0,-1)+"Entries";ie.prototype[ne]=function(Ee){if("mixed"!==x&&"mixed"!==this.type&&x!==this.type)return G.empty();var Fe=this._nodes.get(Ee=""+Ee);if(void 0===Fe)throw new X("Graph.".concat(ne,': could not find the "').concat(Ee,'" node in the graph.'));return function(nt,It,qe){if("mixed"!==nt){if("undirected"===nt)return Xa(qe,qe.undirected);if("string"==typeof It)return Xa(qe,qe[It])}var Wt=G.empty(),Tt=new Set;return"undirected"!==nt&&("out"!==It&&(Wt=Se(Wt,it(Tt,qe,qe.in))),"in"!==It&&(Wt=Se(Wt,it(Tt,qe,qe.out)))),"directed"!==nt&&(Wt=Se(Wt,it(Tt,qe,qe.undirected))),Wt}("mixed"===x?this.type:x,k,Fe)}}(ie,he)})}(An);var Jr=function(ie){function he(oe){var x=me({type:"directed"},oe);if("multi"in x&&!1!==x.multi)throw new ue("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==x.type)throw new ue('DirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return ie.call(this,x)||this}return Ke(he,ie),he}(An),ei=function(ie){function he(oe){var x=me({type:"undirected"},oe);if("multi"in x&&!1!==x.multi)throw new ue("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==x.type)throw new ue('UndirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return ie.call(this,x)||this}return Ke(he,ie),he}(An),qn=function(ie){function he(oe){var x=me({multi:!0},oe);if("multi"in x&&!0!==x.multi)throw new ue("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return ie.call(this,x)||this}return Ke(he,ie),he}(An),Lr=function(ie){function he(oe){var x=me({type:"directed",multi:!0},oe);if("multi"in x&&!0!==x.multi)throw new ue("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==x.type)throw new ue('MultiDirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return ie.call(this,x)||this}return Ke(he,ie),he}(An),va=function(ie){function he(oe){var x=me({type:"undirected",multi:!0},oe);if("multi"in x&&!0!==x.multi)throw new ue("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==x.type)throw new ue('MultiUndirectedGraph.from: inconsistent "'+x.type+'" type in given options!');return ie.call(this,x)||this}return Ke(he,ie),he}(An);function $i(ie){ie.from=function(he,oe){var x=me({},he.options,oe),k=new ie(x);return k.import(he),k}}return $i(An),$i(Jr),$i(ei),$i(qn),$i(Lr),$i(va),An.Graph=An,An.DirectedGraph=Jr,An.UndirectedGraph=ei,An.MultiGraph=qn,An.MultiDirectedGraph=Lr,An.MultiUndirectedGraph=va,An.InvalidArgumentsGraphError=ue,An.NotFoundGraphError=X,An.UsageGraphError=ge,An}()},1524:(jt,rt,Ke)=>{var gt;!function(te,Et,dt,Q){"use strict";var T,xe=["","webkit","Moz","MS","ms","o"],me=Et.createElement("div"),z=Math.round,F=Math.abs,se=Date.now;function K(ve,Te,$e){return setTimeout(D(ve,$e),Te)}function E(ve,Te,$e){return!!Array.isArray(ve)&&(A(ve,$e[Te],$e),!0)}function A(ve,Te,$e){var yt;if(ve)if(ve.forEach)ve.forEach(Te,$e);else if(ve.length!==Q)for(yt=0;yt<ve.length;)Te.call($e,ve[yt],yt,ve),yt++;else for(yt in ve)ve.hasOwnProperty(yt)&&Te.call($e,ve[yt],yt,ve)}function O(ve,Te,$e){var yt="DEPRECATED METHOD: "+Te+"\n"+$e+" AT \n";return function(){var Ht=new Error("get-stack-trace"),Kt=Ht&&Ht.stack?Ht.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",rr=te.console&&(te.console.warn||te.console.log);return rr&&rr.call(te.console,yt,Kt),ve.apply(this,arguments)}}T="function"!=typeof Object.assign?function(Te){if(Te===Q||null===Te)throw new TypeError("Cannot convert undefined or null to object");for(var $e=Object(Te),yt=1;yt<arguments.length;yt++){var Ht=arguments[yt];if(Ht!==Q&&null!==Ht)for(var Kt in Ht)Ht.hasOwnProperty(Kt)&&($e[Kt]=Ht[Kt])}return $e}:Object.assign;var v=O(function(Te,$e,yt){for(var Ht=Object.keys($e),Kt=0;Kt<Ht.length;)(!yt||yt&&Te[Ht[Kt]]===Q)&&(Te[Ht[Kt]]=$e[Ht[Kt]]),Kt++;return Te},"extend","Use `assign`."),y=O(function(Te,$e){return v(Te,$e,!0)},"merge","Use `assign`.");function S(ve,Te,$e){var Ht,yt=Te.prototype;(Ht=ve.prototype=Object.create(yt)).constructor=ve,Ht._super=yt,$e&&T(Ht,$e)}function D(ve,Te){return function(){return ve.apply(Te,arguments)}}function B(ve,Te){return"function"==typeof ve?ve.apply(Te&&Te[0]||Q,Te):ve}function I(ve,Te){return ve===Q?Te:ve}function q(ve,Te,$e){A(ee(Te),function(yt){ve.addEventListener(yt,$e,!1)})}function Z(ve,Te,$e){A(ee(Te),function(yt){ve.removeEventListener(yt,$e,!1)})}function M(ve,Te){for(;ve;){if(ve==Te)return!0;ve=ve.parentNode}return!1}function N(ve,Te){return ve.indexOf(Te)>-1}function ee(ve){return ve.trim().split(/\s+/g)}function C(ve,Te,$e){if(ve.indexOf&&!$e)return ve.indexOf(Te);for(var yt=0;yt<ve.length;){if($e&&ve[yt][$e]==Te||!$e&&ve[yt]===Te)return yt;yt++}return-1}function U(ve){return Array.prototype.slice.call(ve,0)}function re(ve,Te,$e){for(var yt=[],Ht=[],Kt=0;Kt<ve.length;){var rr=Te?ve[Kt][Te]:ve[Kt];C(Ht,rr)<0&&yt.push(ve[Kt]),Ht[Kt]=rr,Kt++}return $e&&(yt=Te?yt.sort(function(qi,Es){return qi[Te]>Es[Te]}):yt.sort()),yt}function de(ve,Te){for(var $e,yt,Ht=Te[0].toUpperCase()+Te.slice(1),Kt=0;Kt<xe.length;){if((yt=($e=xe[Kt])?$e+Ht:Te)in ve)return yt;Kt++}return Q}var G=1;function pe(ve){var Te=ve.ownerDocument||ve;return Te.defaultView||Te.parentWindow||te}var X="ontouchstart"in te,ge=de(te,"PointerEvent")!==Q,De=X&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),je="touch",We="mouse",At=["x","y"],pt=["clientX","clientY"];function ye(ve,Te){var $e=this;this.manager=ve,this.callback=Te,this.element=ve.element,this.target=ve.options.inputTarget,this.domHandler=function(yt){B(ve.options.enable,[ve])&&$e.handler(yt)},this.init()}function R(ve,Te,$e){var yt=$e.pointers.length,Ht=$e.changedPointers.length,Kt=1&Te&&yt-Ht==0,rr=12&Te&&yt-Ht==0;$e.isFirst=!!Kt,$e.isFinal=!!rr,Kt&&(ve.session={}),$e.eventType=Te,function(ve,Te){var $e=ve.session,yt=Te.pointers,Ht=yt.length;$e.firstInput||($e.firstInput=wt(Te)),Ht>1&&!$e.firstMultiple?$e.firstMultiple=wt(Te):1===Ht&&($e.firstMultiple=!1);var Kt=$e.firstInput,rr=$e.firstMultiple,Fi=rr?rr.center:Kt.center,qi=Te.center=Ot(yt);Te.timeStamp=se(),Te.deltaTime=Te.timeStamp-Kt.timeStamp,Te.angle=br(Fi,qi),Te.distance=$n(Fi,qi),function(ve,Te){var $e=Te.center,yt=ve.offsetDelta||{},Ht=ve.prevDelta||{},Kt=ve.prevInput||{};(1===Te.eventType||4===Kt.eventType)&&(Ht=ve.prevDelta={x:Kt.deltaX||0,y:Kt.deltaY||0},yt=ve.offsetDelta={x:$e.x,y:$e.y}),Te.deltaX=Ht.x+($e.x-yt.x),Te.deltaY=Ht.y+($e.y-yt.y)}($e,Te),Te.offsetDirection=kn(Te.deltaX,Te.deltaY);var Es=Mn(Te.deltaTime,Te.deltaX,Te.deltaY);Te.overallVelocityX=Es.x,Te.overallVelocityY=Es.y,Te.overallVelocity=F(Es.x)>F(Es.y)?Es.x:Es.y,Te.scale=rr?function(ve,Te){return $n(Te[0],Te[1],pt)/$n(ve[0],ve[1],pt)}(rr.pointers,yt):1,Te.rotation=rr?function(ve,Te){return br(Te[1],Te[0],pt)+br(ve[1],ve[0],pt)}(rr.pointers,yt):0,Te.maxPointers=$e.prevInput?Te.pointers.length>$e.prevInput.maxPointers?Te.pointers.length:$e.prevInput.maxPointers:Te.pointers.length,function(ve,Te){var Ht,Kt,rr,Fi,$e=ve.lastInterval||Te,yt=Te.timeStamp-$e.timeStamp;if(8!=Te.eventType&&(yt>25||$e.velocity===Q)){var qi=Te.deltaX-$e.deltaX,Es=Te.deltaY-$e.deltaY,tr=Mn(yt,qi,Es);Kt=tr.x,rr=tr.y,Ht=F(tr.x)>F(tr.y)?tr.x:tr.y,Fi=kn(qi,Es),ve.lastInterval=Te}else Ht=$e.velocity,Kt=$e.velocityX,rr=$e.velocityY,Fi=$e.direction;Te.velocity=Ht,Te.velocityX=Kt,Te.velocityY=rr,Te.direction=Fi}($e,Te);var tr=ve.element;M(Te.srcEvent.target,tr)&&(tr=Te.srcEvent.target),Te.target=tr}(ve,$e),ve.emit("hammer.input",$e),ve.recognize($e),ve.session.prevInput=$e}function wt(ve){for(var Te=[],$e=0;$e<ve.pointers.length;)Te[$e]={clientX:z(ve.pointers[$e].clientX),clientY:z(ve.pointers[$e].clientY)},$e++;return{timeStamp:se(),pointers:Te,center:Ot(Te),deltaX:ve.deltaX,deltaY:ve.deltaY}}function Ot(ve){var Te=ve.length;if(1===Te)return{x:z(ve[0].clientX),y:z(ve[0].clientY)};for(var $e=0,yt=0,Ht=0;Ht<Te;)$e+=ve[Ht].clientX,yt+=ve[Ht].clientY,Ht++;return{x:z($e/Te),y:z(yt/Te)}}function Mn(ve,Te,$e){return{x:Te/ve||0,y:$e/ve||0}}function kn(ve,Te){return ve===Te?1:F(ve)>=F(Te)?ve<0?2:4:Te<0?8:16}function $n(ve,Te,$e){$e||($e=At);var yt=Te[$e[0]]-ve[$e[0]],Ht=Te[$e[1]]-ve[$e[1]];return Math.sqrt(yt*yt+Ht*Ht)}function br(ve,Te,$e){return $e||($e=At),180*Math.atan2(Te[$e[1]]-ve[$e[1]],Te[$e[0]]-ve[$e[0]])/Math.PI}ye.prototype={handler:function(){},init:function(){this.evEl&&q(this.element,this.evEl,this.domHandler),this.evTarget&&q(this.target,this.evTarget,this.domHandler),this.evWin&&q(pe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Z(this.element,this.evEl,this.domHandler),this.evTarget&&Z(this.target,this.evTarget,this.domHandler),this.evWin&&Z(pe(this.element),this.evWin,this.domHandler)}};var Bs={mousedown:1,mousemove:2,mouseup:4},ds="mousedown",js="mousemove mouseup";function Gi(){this.evEl=ds,this.evWin=js,this.pressed=!1,ye.apply(this,arguments)}S(Gi,ye,{handler:function(Te){var $e=Bs[Te.type];1&$e&&0===Te.button&&(this.pressed=!0),2&$e&&1!==Te.which&&($e=4),this.pressed&&(4&$e&&(this.pressed=!1),this.callback(this.manager,$e,{pointers:[Te],changedPointers:[Te],pointerType:We,srcEvent:Te}))}});var Ka={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},xl={2:je,3:"pen",4:We,5:"kinect"},ya="pointerdown",bs="pointermove pointerup pointercancel";function Jt(){this.evEl=ya,this.evWin=bs,ye.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}te.MSPointerEvent&&!te.PointerEvent&&(ya="MSPointerDown",bs="MSPointerMove MSPointerUp MSPointerCancel"),S(Jt,ye,{handler:function(Te){var $e=this.store,yt=!1,Ht=Te.type.toLowerCase().replace("ms",""),Kt=Ka[Ht],rr=xl[Te.pointerType]||Te.pointerType,Fi=rr==je,qi=C($e,Te.pointerId,"pointerId");1&Kt&&(0===Te.button||Fi)?qi<0&&($e.push(Te),qi=$e.length-1):12&Kt&&(yt=!0),!(qi<0)&&($e[qi]=Te,this.callback(this.manager,Kt,{pointers:$e,changedPointers:[Te],pointerType:rr,srcEvent:Te}),yt&&$e.splice(qi,1))}});var Xa={touchstart:1,touchmove:2,touchend:4,touchcancel:8},it="touchstart",at="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=it,this.evWin=at,this.started=!1,ye.apply(this,arguments)}function _e(ve,Te){var $e=U(ve.touches),yt=U(ve.changedTouches);return 12&Te&&($e=re($e.concat(yt),"identifier",!0)),[$e,yt]}S(ht,ye,{handler:function(Te){var $e=Xa[Te.type];if(1===$e&&(this.started=!0),this.started){var yt=_e.call(this,Te,$e);12&$e&&yt[0].length-yt[1].length==0&&(this.started=!1),this.callback(this.manager,$e,{pointers:yt[0],changedPointers:yt[1],pointerType:je,srcEvent:Te})}}});var be={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Be="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=Be,this.targetIds={},ye.apply(this,arguments)}function tt(ve,Te){var $e=U(ve.touches),yt=this.targetIds;if(3&Te&&1===$e.length)return yt[$e[0].identifier]=!0,[$e,$e];var Ht,Kt,rr=U(ve.changedTouches),Fi=[],qi=this.target;if(Kt=$e.filter(function(Es){return M(Es.target,qi)}),1===Te)for(Ht=0;Ht<Kt.length;)yt[Kt[Ht].identifier]=!0,Ht++;for(Ht=0;Ht<rr.length;)yt[rr[Ht].identifier]&&Fi.push(rr[Ht]),12&Te&&delete yt[rr[Ht].identifier],Ht++;return Fi.length?[re(Kt.concat(Fi),"identifier",!0),Fi]:void 0}function Dt(){ye.apply(this,arguments);var ve=D(this.handler,this);this.touch=new ct(this.manager,ve),this.mouse=new Gi(this.manager,ve),this.primaryTouch=null,this.lastTouches=[]}function Qt(ve,Te){1&ve?(this.primaryTouch=Te.changedPointers[0].identifier,zn.call(this,Te)):12&ve&&zn.call(this,Te)}function zn(ve){var Te=ve.changedPointers[0];if(Te.identifier===this.primaryTouch){var $e={x:Te.clientX,y:Te.clientY};this.lastTouches.push($e);var yt=this.lastTouches;setTimeout(function(){var Kt=yt.indexOf($e);Kt>-1&&yt.splice(Kt,1)},2500)}}function nr(ve){for(var Te=ve.srcEvent.clientX,$e=ve.srcEvent.clientY,yt=0;yt<this.lastTouches.length;yt++){var Ht=this.lastTouches[yt],Kt=Math.abs(Te-Ht.x),rr=Math.abs($e-Ht.y);if(Kt<=25&&rr<=25)return!0}return!1}S(ct,ye,{handler:function(Te){var $e=be[Te.type],yt=tt.call(this,Te,$e);!yt||this.callback(this.manager,$e,{pointers:yt[0],changedPointers:yt[1],pointerType:je,srcEvent:Te})}}),S(Dt,ye,{handler:function(Te,$e,yt){var Kt=yt.pointerType==We;if(!(Kt&&yt.sourceCapabilities&&yt.sourceCapabilities.firesTouchEvents)){if(yt.pointerType==je)Qt.call(this,$e,yt);else if(Kt&&nr.call(this,yt))return;this.callback(Te,$e,yt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var On=de(me.style,"touchAction"),pn=On!==Q,Gn="compute",Jr="manipulation",ei="none",qn="pan-x",Lr="pan-y",va=function(){if(!pn)return!1;var ve={},Te=te.CSS&&te.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function($e){ve[$e]=!Te||te.CSS.supports("touch-action",$e)}),ve}();function $i(ve,Te){this.manager=ve,this.set(Te)}function It(ve){this.options=T({},this.defaults,ve||{}),this.id=G++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function qe(ve){return 16&ve?"cancel":8&ve?"end":4&ve?"move":2&ve?"start":""}function Wt(ve){return 16==ve?"down":8==ve?"up":2==ve?"left":4==ve?"right":""}function Tt(ve,Te){var $e=Te.manager;return $e?$e.get(ve):ve}function gn(){It.apply(this,arguments)}function ws(){gn.apply(this,arguments),this.pX=null,this.pY=null}function Wi(){gn.apply(this,arguments)}function Zs(){It.apply(this,arguments),this._timer=null,this._input=null}function Dl(){gn.apply(this,arguments)}function ho(){gn.apply(this,arguments)}function ki(){It.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Vs(ve,Te){return(Te=Te||{}).recognizers=I(Te.recognizers,Vs.defaults.preset),new fo(ve,Te)}function fo(ve,Te){this.options=T({},Vs.defaults,Te||{}),this.options.inputTarget=this.options.inputTarget||ve,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ve,this.input=function(ve){return new(ve.options.inputClass||(ge?Jt:De?ct:X?Dt:Gi))(ve,R)}(this),this.touchAction=new $i(this,this.options.touchAction),Ml(this,!0),A(this.options.recognizers,function($e){var yt=this.add(new $e[0]($e[1]));$e[2]&&yt.recognizeWith($e[2]),$e[3]&&yt.requireFailure($e[3])},this)}function Ml(ve,Te){var yt,$e=ve.element;$e.style&&(A(ve.options.cssProps,function(Ht,Kt){yt=de($e.style,Kt),Te?(ve.oldCssProps[yt]=$e.style[yt],$e.style[yt]=Ht):$e.style[yt]=ve.oldCssProps[yt]||""}),Te||(ve.oldCssProps={}))}$i.prototype={set:function(ve){ve==Gn&&(ve=this.compute()),pn&&this.manager.element.style&&va[ve]&&(this.manager.element.style[On]=ve),this.actions=ve.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ve=[];return A(this.manager.recognizers,function(Te){B(Te.options.enable,[Te])&&(ve=ve.concat(Te.getTouchAction()))}),function(ve){if(N(ve,ei))return ei;var Te=N(ve,qn),$e=N(ve,Lr);return Te&&$e?ei:Te||$e?Te?qn:Lr:N(ve,Jr)?Jr:"auto"}(ve.join(" "))},preventDefaults:function(ve){var Te=ve.srcEvent,$e=ve.offsetDirection;if(!this.manager.session.prevented){var yt=this.actions,Ht=N(yt,ei)&&!va[ei],Kt=N(yt,Lr)&&!va[Lr],rr=N(yt,qn)&&!va[qn];if(Ht&&1===ve.pointers.length&&ve.distance<2&&ve.deltaTime<250)return;return rr&&Kt||!(Ht||Kt&&6&$e||rr&&24&$e)?void 0:this.preventSrc(Te)}Te.preventDefault()},preventSrc:function(ve){this.manager.session.prevented=!0,ve.preventDefault()}},It.prototype={defaults:{},set:function(ve){return T(this.options,ve),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ve){if(E(ve,"recognizeWith",this))return this;var Te=this.simultaneous;return Te[(ve=Tt(ve,this)).id]||(Te[ve.id]=ve,ve.recognizeWith(this)),this},dropRecognizeWith:function(ve){return E(ve,"dropRecognizeWith",this)||(ve=Tt(ve,this),delete this.simultaneous[ve.id]),this},requireFailure:function(ve){if(E(ve,"requireFailure",this))return this;var Te=this.requireFail;return-1===C(Te,ve=Tt(ve,this))&&(Te.push(ve),ve.requireFailure(this)),this},dropRequireFailure:function(ve){if(E(ve,"dropRequireFailure",this))return this;ve=Tt(ve,this);var Te=C(this.requireFail,ve);return Te>-1&&this.requireFail.splice(Te,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ve){return!!this.simultaneous[ve.id]},emit:function(ve){var Te=this,$e=this.state;function yt(Ht){Te.manager.emit(Ht,ve)}$e<8&&yt(Te.options.event+qe($e)),yt(Te.options.event),ve.additionalEvent&&yt(ve.additionalEvent),$e>=8&&yt(Te.options.event+qe($e))},tryEmit:function(ve){if(this.canEmit())return this.emit(ve);this.state=32},canEmit:function(){for(var ve=0;ve<this.requireFail.length;){if(!(33&this.requireFail[ve].state))return!1;ve++}return!0},recognize:function(ve){var Te=T({},ve);if(!B(this.options.enable,[this,Te]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(Te),30&this.state&&this.tryEmit(Te)},process:function(ve){},getTouchAction:function(){},reset:function(){}},S(gn,It,{defaults:{pointers:1},attrTest:function(ve){var Te=this.options.pointers;return 0===Te||ve.pointers.length===Te},process:function(ve){var Te=this.state,$e=ve.eventType,yt=6&Te,Ht=this.attrTest(ve);return yt&&(8&$e||!Ht)?16|Te:yt||Ht?4&$e?8|Te:2&Te?4|Te:2:32}}),S(ws,gn,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var ve=this.options.direction,Te=[];return 6&ve&&Te.push(Lr),24&ve&&Te.push(qn),Te},directionTest:function(ve){var Te=this.options,$e=!0,yt=ve.distance,Ht=ve.direction,Kt=ve.deltaX,rr=ve.deltaY;return Ht&Te.direction||(6&Te.direction?(Ht=0===Kt?1:Kt<0?2:4,$e=Kt!=this.pX,yt=Math.abs(ve.deltaX)):(Ht=0===rr?1:rr<0?8:16,$e=rr!=this.pY,yt=Math.abs(ve.deltaY))),ve.direction=Ht,$e&&yt>Te.threshold&&Ht&Te.direction},attrTest:function(ve){return gn.prototype.attrTest.call(this,ve)&&(2&this.state||!(2&this.state)&&this.directionTest(ve))},emit:function(ve){this.pX=ve.deltaX,this.pY=ve.deltaY;var Te=Wt(ve.direction);Te&&(ve.additionalEvent=this.options.event+Te),this._super.emit.call(this,ve)}}),S(Wi,gn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(ve){return this._super.attrTest.call(this,ve)&&(Math.abs(ve.scale-1)>this.options.threshold||2&this.state)},emit:function(ve){1!==ve.scale&&(ve.additionalEvent=this.options.event+(ve.scale<1?"in":"out")),this._super.emit.call(this,ve)}}),S(Zs,It,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(ve){var Te=this.options,$e=ve.pointers.length===Te.pointers,yt=ve.distance<Te.threshold,Ht=ve.deltaTime>Te.time;if(this._input=ve,!yt||!$e||12&ve.eventType&&!Ht)this.reset();else if(1&ve.eventType)this.reset(),this._timer=K(function(){this.state=8,this.tryEmit()},Te.time,this);else if(4&ve.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(ve){8===this.state&&(ve&&4&ve.eventType?this.manager.emit(this.options.event+"up",ve):(this._input.timeStamp=se(),this.manager.emit(this.options.event,this._input)))}}),S(Dl,gn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(ve){return this._super.attrTest.call(this,ve)&&(Math.abs(ve.rotation)>this.options.threshold||2&this.state)}}),S(ho,gn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ws.prototype.getTouchAction.call(this)},attrTest:function(ve){var $e,Te=this.options.direction;return 30&Te?$e=ve.overallVelocity:6&Te?$e=ve.overallVelocityX:24&Te&&($e=ve.overallVelocityY),this._super.attrTest.call(this,ve)&&Te&ve.offsetDirection&&ve.distance>this.options.threshold&&ve.maxPointers==this.options.pointers&&F($e)>this.options.velocity&&4&ve.eventType},emit:function(ve){var Te=Wt(ve.offsetDirection);Te&&this.manager.emit(this.options.event+Te,ve),this.manager.emit(this.options.event,ve)}}),S(ki,It,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Jr]},process:function(ve){var Te=this.options,$e=ve.pointers.length===Te.pointers,yt=ve.distance<Te.threshold,Ht=ve.deltaTime<Te.time;if(this.reset(),1&ve.eventType&&0===this.count)return this.failTimeout();if(yt&&Ht&&$e){if(4!=ve.eventType)return this.failTimeout();var Kt=!this.pTime||ve.timeStamp-this.pTime<Te.interval,rr=!this.pCenter||$n(this.pCenter,ve.center)<Te.posThreshold;if(this.pTime=ve.timeStamp,this.pCenter=ve.center,rr&&Kt?this.count+=1:this.count=1,this._input=ve,0==this.count%Te.taps)return this.hasRequireFailures()?(this._timer=K(function(){this.state=8,this.tryEmit()},Te.interval,this),2):8}return 32},failTimeout:function(){return this._timer=K(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Vs.VERSION="2.0.7",Vs.defaults={domEvents:!1,touchAction:Gn,enable:!0,inputTarget:null,inputClass:null,preset:[[Dl,{enable:!1}],[Wi,{enable:!1},["rotate"]],[ho,{direction:6}],[ws,{direction:6},["swipe"]],[ki],[ki,{event:"doubletap",taps:2},["tap"]],[Zs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},fo.prototype={set:function(ve){return T(this.options,ve),ve.touchAction&&this.touchAction.update(),ve.inputTarget&&(this.input.destroy(),this.input.target=ve.inputTarget,this.input.init()),this},stop:function(ve){this.session.stopped=ve?2:1},recognize:function(ve){var Te=this.session;if(!Te.stopped){this.touchAction.preventDefaults(ve);var $e,yt=this.recognizers,Ht=Te.curRecognizer;(!Ht||Ht&&8&Ht.state)&&(Ht=Te.curRecognizer=null);for(var Kt=0;Kt<yt.length;)$e=yt[Kt],2===Te.stopped||Ht&&$e!=Ht&&!$e.canRecognizeWith(Ht)?$e.reset():$e.recognize(ve),!Ht&&14&$e.state&&(Ht=Te.curRecognizer=$e),Kt++}},get:function(ve){if(ve instanceof It)return ve;for(var Te=this.recognizers,$e=0;$e<Te.length;$e++)if(Te[$e].options.event==ve)return Te[$e];return null},add:function(ve){if(E(ve,"add",this))return this;var Te=this.get(ve.options.event);return Te&&this.remove(Te),this.recognizers.push(ve),ve.manager=this,this.touchAction.update(),ve},remove:function(ve){if(E(ve,"remove",this))return this;if(ve=this.get(ve)){var Te=this.recognizers,$e=C(Te,ve);-1!==$e&&(Te.splice($e,1),this.touchAction.update())}return this},on:function(ve,Te){if(ve!==Q&&Te!==Q){var $e=this.handlers;return A(ee(ve),function(yt){$e[yt]=$e[yt]||[],$e[yt].push(Te)}),this}},off:function(ve,Te){if(ve!==Q){var $e=this.handlers;return A(ee(ve),function(yt){Te?$e[yt]&&$e[yt].splice(C($e[yt],Te),1):delete $e[yt]}),this}},emit:function(ve,Te){this.options.domEvents&&function(ve,Te){var $e=Et.createEvent("Event");$e.initEvent(ve,!0,!0),$e.gesture=Te,Te.target.dispatchEvent($e)}(ve,Te);var $e=this.handlers[ve]&&this.handlers[ve].slice();if($e&&$e.length){Te.type=ve,Te.preventDefault=function(){Te.srcEvent.preventDefault()};for(var yt=0;yt<$e.length;)$e[yt](Te),yt++}},destroy:function(){this.element&&Ml(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},T(Vs,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:fo,Input:ye,TouchAction:$i,TouchInput:ct,MouseInput:Gi,PointerEventInput:Jt,TouchMouseInput:Dt,SingleTouchInput:ht,Recognizer:It,AttrRecognizer:gn,Tap:ki,Pan:ws,Swipe:ho,Pinch:Wi,Rotate:Dl,Press:Zs,on:q,off:Z,each:A,merge:y,extend:v,assign:T,inherit:S,bindFn:D,prefixed:de}),(void 0!==te?te:"undefined"!=typeof self?self:{}).Hammer=Vs,(gt=function(){return Vs}.call(rt,Ke,rt,jt))!==Q&&(jt.exports=gt)}(window,document)},3815:function(jt,rt,Ke){var gt;jt=Ke.nmd(jt),function(){var te,xe="Expected a function",Y="__lodash_hash_undefined__",F="__lodash_placeholder__",B=32,q=128,$=1/0,pe=9007199254740991,X=NaN,ge=4294967295,Ze=[["ary",q],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",B],["partialRight",64],["rearg",256]],We="[object Arguments]",Je="[object Array]",Ve="[object Boolean]",Le="[object Date]",Re="[object Error]",He="[object Function]",Xe="[object GeneratorFunction]",ze="[object Map]",W="[object Number]",we="[object Object]",ce="[object Promise]",At="[object RegExp]",pt="[object Set]",ye="[object String]",j="[object Symbol]",L="[object WeakMap]",et="[object ArrayBuffer]",wt="[object DataView]",Ot="[object Float32Array]",Mn="[object Float64Array]",kn="[object Int8Array]",$n="[object Int16Array]",br="[object Int32Array]",hr="[object Uint8Array]",Hi="[object Uint8ClampedArray]",Bs="[object Uint16Array]",ds="[object Uint32Array]",js=/\b__p \+= '';/g,Gi=/\b(__p \+=) '' \+/g,Ka=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xl=/&(?:amp|lt|gt|quot|#39);/g,ya=/[&<>"']/g,bs=RegExp(xl.source),Jt=RegExp(ya.source),Xa=/<%-([\s\S]+?)%>/g,it=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,ht=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_e=/^\w*$/,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,ct=RegExp(Be.source),tt=/^\s+/,St=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,Qt=/,? & /,zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nr=/[()=,{}\[\]\/\s]/,On=/\\(\\)?/g,pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gn=/\w*$/,An=/^[-+]0x[0-9a-f]+$/i,Jr=/^0b[01]+$/i,ei=/^\[object .+?Constructor\]$/,qn=/^0o[0-7]+$/i,Lr=/^(?:0|[1-9]\d*)$/,va=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$i=/($^)/,ie=/['\n\r\u2028\u2029\\]/g,he="\\ud800-\\udfff",ne="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Fe="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="A-Z\\xc0-\\xd6\\xd8-\\xde",gn="\\ufe0e\\ufe0f",ws="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zs="["+he+"]",Dl="["+ws+"]",ho="["+ne+"]",ki="\\d+",Vs="["+Ee+"]",mu="["+Fe+"]",En="[^"+he+ws+ki+Ee+Fe+Tt+"]",fo="\\ud83c[\\udffb-\\udfff]",ba="[^"+he+"]",cd="(?:\\ud83c[\\udde6-\\uddff]){2}",ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="["+Tt+"]",yt="(?:"+mu+"|"+En+")",Ht="(?:"+Te+"|"+En+")",Kt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",rr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Fi="(?:"+ho+"|"+fo+")?",qi="["+gn+"]?",WC=qi+Fi+"(?:\\u200d(?:"+[ba,cd,ve].join("|")+")"+qi+Fi+")*",dd="(?:"+[Vs,cd,ve].join("|")+")"+WC,qr="(?:"+[ba+ho+"?",ho,cd,ve,Zs].join("|")+")",Zf=RegExp("['\u2019]","g"),Pm=RegExp(ho,"g"),yh=RegExp(fo+"(?="+fo+")|"+qr+WC,"g"),Cb=RegExp([Te+"?"+mu+"+"+Kt+"(?="+[Dl,Te,"$"].join("|")+")",Ht+"+"+rr+"(?="+[Dl,Te+yt,"$"].join("|")+")",Te+"?"+yt+"+"+Kt,Te+"+"+rr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ki,dd].join("|"),"g"),qC=RegExp("[\\u200d"+he+ne+gn+"]"),Il=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],YC=-1,bn={};bn[Ot]=bn[Mn]=bn[kn]=bn[$n]=bn[br]=bn[hr]=bn[Hi]=bn[Bs]=bn[ds]=!0,bn[We]=bn[Je]=bn[et]=bn[Ve]=bn[wt]=bn[Le]=bn[Re]=bn[He]=bn[ze]=bn[W]=bn[we]=bn[At]=bn[pt]=bn[ye]=bn[L]=!1;var ti={};ti[We]=ti[Je]=ti[et]=ti[wt]=ti[Ve]=ti[Le]=ti[Ot]=ti[Mn]=ti[kn]=ti[$n]=ti[br]=ti[ze]=ti[W]=ti[we]=ti[At]=ti[pt]=ti[ye]=ti[j]=ti[hr]=ti[Hi]=ti[Bs]=ti[ds]=!0,ti[Re]=ti[He]=ti[L]=!1;var un={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},KC=parseFloat,Db=parseInt,Ut="object"==typeof global&&global&&global.Object===Object&&global,Us="object"==typeof self&&self&&self.Object===Object&&self,Rr=Ut||Us||Function("return this")(),Ol=rt&&!rt.nodeType&&rt,wa=Ol&&jt&&!jt.nodeType&&jt,Do=wa&&wa.exports===Ol,Nm=Do&&Ut.process,_i=function(){try{return wa&&wa.require&&wa.require("util").types||Nm&&Nm.binding&&Nm.binding("util")}catch(Mt){}}(),tn=_i&&_i.isArrayBuffer,ir=_i&&_i.isDate,ii=_i&&_i.isMap,po=_i&&_i.isRegExp,_u=_i&&_i.isSet,Ji=_i&&_i.isTypedArray;function es(ot,Mt,bt){switch(bt.length){case 0:return ot.call(Mt);case 1:return ot.call(Mt,bt[0]);case 2:return ot.call(Mt,bt[0],bt[1]);case 3:return ot.call(Mt,bt[0],bt[1],bt[2])}return ot.apply(Mt,bt)}function Li(ot,Mt,bt,ln){for(var xn=-1,Dr=null==ot?0:ot.length;++xn<Dr;){var Yi=ot[xn];Mt(ln,Yi,bt(Yi),ot)}return ln}function zs(ot,Mt){for(var bt=-1,ln=null==ot?0:ot.length;++bt<ln&&!1!==Mt(ot[bt],bt,ot););return ot}function hd(ot,Mt){for(var bt=null==ot?0:ot.length;bt--&&!1!==Mt(ot[bt],bt,ot););return ot}function Jn(ot,Mt){for(var bt=-1,ln=null==ot?0:ot.length;++bt<ln;)if(!Mt(ot[bt],bt,ot))return!1;return!0}function Ea(ot,Mt){for(var bt=-1,ln=null==ot?0:ot.length,xn=0,Dr=[];++bt<ln;){var Yi=ot[bt];Mt(Yi,bt,ot)&&(Dr[xn++]=Yi)}return Dr}function Rl(ot,Mt){return!(null==ot||!ot.length)&&Qa(ot,Mt,0)>-1}function bh(ot,Mt,bt){for(var ln=-1,xn=null==ot?0:ot.length;++ln<xn;)if(bt(Mt,ot[ln]))return!0;return!1}function Br(ot,Mt){for(var bt=-1,ln=null==ot?0:ot.length,xn=Array(ln);++bt<ln;)xn[bt]=Mt(ot[bt],bt,ot);return xn}function Bi(ot,Mt){for(var bt=-1,ln=Mt.length,xn=ot.length;++bt<ln;)ot[xn+bt]=Mt[bt];return ot}function cc(ot,Mt,bt,ln){var xn=-1,Dr=null==ot?0:ot.length;for(ln&&Dr&&(bt=ot[++xn]);++xn<Dr;)bt=Mt(bt,ot[xn],xn,ot);return bt}function fd(ot,Mt,bt,ln){var xn=null==ot?0:ot.length;for(ln&&xn&&(bt=ot[--xn]);xn--;)bt=Mt(bt,ot[xn],xn,ot);return bt}function Mo(ot,Mt){for(var bt=-1,ln=null==ot?0:ot.length;++bt<ln;)if(Mt(ot[bt],bt,ot))return!0;return!1}var ni=km("length");function wh(ot,Mt,bt){var ln;return bt(ot,function(xn,Dr,Yi){if(Mt(xn,Dr,Yi))return ln=Dr,!1}),ln}function pd(ot,Mt,bt,ln){for(var xn=ot.length,Dr=bt+(ln?1:-1);ln?Dr--:++Dr<xn;)if(Mt(ot[Dr],Dr,ot))return Dr;return-1}function Qa(ot,Mt,bt){return Mt==Mt?function(ot,Mt,bt){for(var ln=bt-1,xn=ot.length;++ln<xn;)if(ot[ln]===Mt)return ln;return-1}(ot,Mt,bt):pd(ot,yu,bt)}function Jf(ot,Mt,bt,ln){for(var xn=bt-1,Dr=ot.length;++xn<Dr;)if(ln(ot[xn],Mt))return xn;return-1}function yu(ot){return ot!=ot}function Ss(ot,Mt){var bt=null==ot?0:ot.length;return bt?gd(ot,Mt)/bt:X}function km(ot){return function(Mt){return null==Mt?te:Mt[ot]}}function qo(ot){return function(Mt){return null==ot?te:ot[Mt]}}function Yo(ot,Mt,bt,ln,xn){return xn(ot,function(Dr,Yi,Vr){bt=ln?(ln=!1,Dr):Mt(bt,Dr,Yi,Vr)}),bt}function gd(ot,Mt){for(var bt,ln=-1,xn=ot.length;++ln<xn;){var Dr=Mt(ot[ln]);Dr!==te&&(bt=bt===te?Dr:bt+Dr)}return bt}function md(ot,Mt){for(var bt=-1,ln=Array(ot);++bt<ot;)ln[bt]=Mt(bt);return ln}function Mb(ot){return ot&&ot.slice(0,vu(ot)+1).replace(tt,"")}function Ko(ot){return function(Mt){return ot(Mt)}}function Lm(ot,Mt){return Br(Mt,function(bt){return ot[bt]})}function Eh(ot,Mt){return ot.has(Mt)}function ZC(ot,Mt){for(var bt=-1,ln=ot.length;++bt<ln&&Qa(Mt,ot[bt],0)>-1;);return bt}function JC(ot,Mt){for(var bt=ot.length;bt--&&Qa(Mt,ot[bt],0)>-1;);return bt}function kN(ot,Mt){for(var bt=ot.length,ln=0;bt--;)ot[bt]===Mt&&++ln;return ln}var FN=qo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),LN=qo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function BN(ot){return"\\"+un[ot]}function Sh(ot){return qC.test(ot)}function Ib(ot){var Mt=-1,bt=Array(ot.size);return ot.forEach(function(ln,xn){bt[++Mt]=[xn,ln]}),bt}function eA(ot,Mt){return function(bt){return ot(Mt(bt))}}function dc(ot,Mt){for(var bt=-1,ln=ot.length,xn=0,Dr=[];++bt<ln;){var Yi=ot[bt];(Yi===Mt||Yi===F)&&(ot[bt]=F,Dr[xn++]=bt)}return Dr}function Bm(ot){var Mt=-1,bt=Array(ot.size);return ot.forEach(function(ln){bt[++Mt]=ln}),bt}function Ch(ot){return Sh(ot)?function(ot){for(var Mt=yh.lastIndex=0;yh.test(ot);)++Mt;return Mt}(ot):ni(ot)}function Za(ot){return Sh(ot)?function(ot){return ot.match(yh)||[]}(ot):function(ot){return ot.split("")}(ot)}function vu(ot){for(var Mt=ot.length;Mt--&&St.test(ot.charAt(Mt)););return Mt}var ep=qo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ah=function ot(Mt){var d,bt=(Mt=null==Mt?Rr:Ah.defaults(Rr.Object(),Mt,Ah.pick(Rr,vh))).Array,ln=Mt.Date,xn=Mt.Error,Dr=Mt.Function,Yi=Mt.Math,Vr=Mt.Object,Vm=Mt.RegExp,Um=Mt.String,Ca=Mt.TypeError,si=bt.prototype,hc=Vr.prototype,tp=Mt["__core-js_shared__"],yi=Dr.prototype.toString,Ur=hc.hasOwnProperty,GN=0,Th=(d=/[^.]+$/.exec(tp&&tp.keys&&tp.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",Js=hc.toString,rA=yi.call(Vr),zm=Rr._,_d=Vm("^"+yi.call(Ur).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hs=Do?Mt.Buffer:te,Pl=Mt.Symbol,yd=Mt.Uint8Array,Pb=Hs?Hs.allocUnsafe:te,Aa=eA(Vr.getPrototypeOf,Vr),Hm=Vr.create,np=hc.propertyIsEnumerable,Bn=si.splice,iA=Pl?Pl.isConcatSpreadable:te,xh=Pl?Pl.iterator:te,fc=Pl?Pl.toStringTag:te,rp=function(){try{var d=Mu(Vr,"defineProperty");return d({},"",{}),d}catch(f){}}(),Nb=Mt.clearTimeout!==Rr.clearTimeout&&Mt.clearTimeout,sA=ln&&ln.now!==Rr.Date.now&&ln.now,oA=Mt.setTimeout!==Rr.setTimeout&&Mt.setTimeout,Vt=Yi.ceil,fr=Yi.floor,Xo=Vr.getOwnPropertySymbols,ts=Hs?Hs.isBuffer:te,Gm=Mt.isFinite,Dh=si.join,Ja=eA(Vr.keys,Vr),ji=Yi.max,hs=Yi.min,$N=ln.now,aA=Mt.parseInt,Mh=Yi.random,ip=si.reverse,Cs=Mu(Mt,"DataView"),go=Mu(Mt,"Map"),sp=Mu(Mt,"Promise"),Ta=Mu(Mt,"Set"),Io=Mu(Mt,"WeakMap"),Ih=Mu(Vr,"create"),Oh=Io&&new Io,vd={},lA=Ac(Cs),$m=Ac(go),Wm=Ac(sp),kb=Ac(Ta),qm=Ac(Io),op=Pl?Pl.prototype:te,bd=op?op.valueOf:te,Rh=op?op.toString:te;function Ce(d){if(wi(d)&&!In(d)&&!(d instanceof sr)){if(d instanceof Oo)return d;if(Ur.call(d,"__wrapped__"))return Ip(d)}return new Oo(d)}var pc=function(){function d(){}return function(f){if(!bi(f))return{};if(Hm)return Hm(f);d.prototype=f;var _=new d;return d.prototype=te,_}}();function Ph(){}function Oo(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=te}function sr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function mo(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var P=d[f];this.set(P[0],P[1])}}function Nl(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var P=d[f];this.set(P[0],P[1])}}function el(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var P=d[f];this.set(P[0],P[1])}}function xa(d){var f=-1,_=null==d?0:d.length;for(this.__data__=new el;++f<_;)this.add(d[f])}function Da(d){var f=this.__data__=new Nl(d);this.size=f.size}function kh(d,f){var _=In(d),P=!_&&ul(d),ae=!_&&!P&&cl(d),Ae=!_&&!P&&!ae&&Xh(d),Ge=_||P||ae||Ae,Qe=Ge?md(d.length,Um):[],lt=Qe.length;for(var Pt in d)(f||Ur.call(d,Pt))&&(!Ge||!("length"==Pt||ae&&("offset"==Pt||"parent"==Pt)||Ae&&("buffer"==Pt||"byteLength"==Pt||"byteOffset"==Pt)||No(Pt,lt)))&&Qe.push(Pt);return Qe}function Qm(d){var f=d.length;return f?d[kl(0,f-1)]:te}function Lb(d,f){return kd(to(d),gc(f,0,d.length))}function wd(d){return kd(to(d))}function Zm(d,f,_){(_!==te&&!Dn(d[f],_)||_===te&&!(f in d))&&nl(d,f,_)}function tl(d,f,_){var P=d[f];(!Ur.call(d,f)||!Dn(P,_)||_===te&&!(f in d))&&nl(d,f,_)}function Ed(d,f){for(var _=d.length;_--;)if(Dn(d[_][0],f))return _;return-1}function dp(d,f,_,P){return Eu(d,function(ae,Ae,Ge){f(P,ae,_(ae),Ge)}),P}function bA(d,f){return d&&Ia(f,Ms(f),d)}function nl(d,f,_){"__proto__"==f&&rp?rp(d,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[f]=_}function Jm(d,f){for(var _=-1,P=f.length,ae=bt(P),Ae=null==d;++_<P;)ae[_]=Ae?te:Jh(d,f[_]);return ae}function gc(d,f,_){return d==d&&(_!==te&&(d=d<=_?d:_),f!==te&&(d=d>=f?d:f)),d}function Gs(d,f,_,P,ae,Ae){var Ge,Qe=1&f,lt=2&f,Pt=4&f;if(_&&(Ge=ae?_(d,P,ae,Ae):_(d)),Ge!==te)return Ge;if(!bi(d))return d;var Nt=In(d);if(Nt){if(Ge=function(d){var f=d.length,_=new d.constructor(f);return f&&"string"==typeof d[0]&&Ur.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!Qe)return to(d,Ge)}else{var zt=Ws(d),en=zt==He||zt==Xe;if(cl(d))return vp(d,Qe);if(zt==we||zt==We||en&&!ae){if(Ge=lt||en?{}:a0(d),!Qe)return lt?function(d,f){return Ia(d,r0(d),f)}(d,function(d,f){return d&&Ia(f,ro(f),d)}(Ge,d)):function(d,f){return Ia(d,g_(d),f)}(d,bA(Ge,d))}else{if(!ti[zt])return ae?d:{};Ge=function(d,f,_){var P=d.constructor;switch(f){case et:return wc(d);case Ve:case Le:return new P(+d);case wt:return function(d,f){var _=f?wc(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case Ot:case Mn:case kn:case $n:case br:case hr:case Hi:case Bs:case ds:return c_(d,_);case ze:return new P;case W:case ye:return new P(d);case At:return function(d){var f=new d.constructor(d.source,Gn.exec(d));return f.lastIndex=d.lastIndex,f}(d);case pt:return new P;case j:return function(d){return bd?Vr(bd.call(d)):{}}(d)}}(d,zt,Qe)}}Ae||(Ae=new Da);var wn=Ae.get(d);if(wn)return wn;Ae.set(d,Ge),VT(d)?d.forEach(function(jn){Ge.add(Gs(jn,f,_,jn,d,Ae))}):FT(d)&&d.forEach(function(jn,lr){Ge.set(lr,Gs(jn,f,_,lr,d,Ae))});var ar=Nt?te:(Pt?lt?f_:jl:lt?ro:Ms)(d);return zs(ar||d,function(jn,lr){ar&&(jn=d[lr=jn]),tl(Ge,lr,Gs(jn,f,_,lr,d,Ae))}),Ge}function hp(d,f,_){var P=_.length;if(null==d)return!P;for(d=Vr(d);P--;){var ae=_[P],Ge=d[ae];if(Ge===te&&!(ae in d)||!(0,f[ae])(Ge))return!1}return!0}function Fh(d,f,_){if("function"!=typeof d)throw new Ca(xe);return Hh(function(){d.apply(te,_)},f)}function wu(d,f,_,P){var ae=-1,Ae=Rl,Ge=!0,Qe=d.length,lt=[],Pt=f.length;if(!Qe)return lt;_&&(f=Br(f,Ko(_))),P?(Ae=bh,Ge=!1):f.length>=200&&(Ae=Eh,Ge=!1,f=new xa(f));e:for(;++ae<Qe;){var Nt=d[ae],zt=null==_?Nt:_(Nt);if(Nt=P||0!==Nt?Nt:0,Ge&&zt==zt){for(var en=Pt;en--;)if(f[en]===zt)continue e;lt.push(Nt)}else Ae(f,zt,P)||lt.push(Nt)}return lt}Ce.templateSettings={escape:Xa,evaluate:it,interpolate:at,variable:"",imports:{_:Ce}},(Ce.prototype=Ph.prototype).constructor=Ce,(Oo.prototype=pc(Ph.prototype)).constructor=Oo,(sr.prototype=pc(Ph.prototype)).constructor=sr,mo.prototype.clear=function(){this.__data__=Ih?Ih(null):{},this.size=0},mo.prototype.delete=function(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f},mo.prototype.get=function(d){var f=this.__data__;if(Ih){var _=f[d];return _===Y?te:_}return Ur.call(f,d)?f[d]:te},mo.prototype.has=function(d){var f=this.__data__;return Ih?f[d]!==te:Ur.call(f,d)},mo.prototype.set=function(d,f){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=Ih&&f===te?Y:f,this},Nl.prototype.clear=function(){this.__data__=[],this.size=0},Nl.prototype.delete=function(d){var f=this.__data__,_=Ed(f,d);return!(_<0||(_==f.length-1?f.pop():Bn.call(f,_,1),--this.size,0))},Nl.prototype.get=function(d){var f=this.__data__,_=Ed(f,d);return _<0?te:f[_][1]},Nl.prototype.has=function(d){return Ed(this.__data__,d)>-1},Nl.prototype.set=function(d,f){var _=this.__data__,P=Ed(_,d);return P<0?(++this.size,_.push([d,f])):_[P][1]=f,this},el.prototype.clear=function(){this.size=0,this.__data__={hash:new mo,map:new(go||Nl),string:new mo}},el.prototype.delete=function(d){var f=$s(this,d).delete(d);return this.size-=f?1:0,f},el.prototype.get=function(d){return $s(this,d).get(d)},el.prototype.has=function(d){return $s(this,d).has(d)},el.prototype.set=function(d,f){var _=$s(this,d),P=_.size;return _.set(d,f),this.size+=_.size==P?0:1,this},xa.prototype.add=xa.prototype.push=function(d){return this.__data__.set(d,Y),this},xa.prototype.has=function(d){return this.__data__.has(d)},Da.prototype.clear=function(){this.__data__=new Nl,this.size=0},Da.prototype.delete=function(d){var f=this.__data__,_=f.delete(d);return this.size=f.size,_},Da.prototype.get=function(d){return this.__data__.get(d)},Da.prototype.has=function(d){return this.__data__.has(d)},Da.prototype.set=function(d,f){var _=this.__data__;if(_ instanceof Nl){var P=_.__data__;if(!go||P.length<199)return P.push([d,f]),this.size=++_.size,this;_=this.__data__=new el(P)}return _.set(d,f),this.size=_.size,this};var Eu=sl(rl),t_=sl(fp,!0);function jb(d,f){var _=!0;return Eu(d,function(P,ae,Ae){return _=!!f(P,ae,Ae)}),_}function Lh(d,f,_){for(var P=-1,ae=d.length;++P<ae;){var Ae=d[P],Ge=f(Ae);if(null!=Ge&&(Qe===te?Ge==Ge&&!aa(Ge):_(Ge,Qe)))var Qe=Ge,lt=Ae}return lt}function Ub(d,f){var _=[];return Eu(d,function(P,ae,Ae){f(P,ae,Ae)&&_.push(P)}),_}function As(d,f,_,P,ae){var Ae=-1,Ge=d.length;for(_||(_=BA),ae||(ae=[]);++Ae<Ge;){var Qe=d[Ae];f>0&&_(Qe)?f>1?As(Qe,f-1,_,P,ae):Bi(ae,Qe):P||(ae[ae.length]=Qe)}return ae}var Sd=Yb(),Cd=Yb(!0);function rl(d,f){return d&&Sd(d,f,Ms)}function fp(d,f){return d&&Cd(d,f,Ms)}function Bh(d,f){return Ea(f,function(_){return oa(d[_])})}function Qo(d,f){for(var _=0,P=(f=Tu(f,d)).length;null!=d&&_<P;)d=d[er(f[_++])];return _&&_==P?d:te}function Xr(d,f,_){var P=f(d);return In(d)?P:Bi(P,_(d))}function Ts(d){return null==d?d===te?"[object Undefined]":"[object Null]":fc&&fc in Vr(d)?function(d){var f=Ur.call(d,fc),_=d[fc];try{d[fc]=te;var P=!0}catch(Ae){}var ae=Js.call(d);return P&&(f?d[fc]=_:delete d[fc]),ae}(d):function(d){return Js.call(d)}(d)}function Zo(d,f){return d>f}function Ad(d,f){return null!=d&&Ur.call(d,f)}function Td(d,f){return null!=d&&f in Vr(d)}function mc(d,f,_){for(var P=_?bh:Rl,ae=d[0].length,Ae=d.length,Ge=Ae,Qe=bt(Ae),lt=1/0,Pt=[];Ge--;){var Nt=d[Ge];Ge&&f&&(Nt=Br(Nt,Ko(f))),lt=hs(Nt.length,lt),Qe[Ge]=!_&&(f||ae>=120&&Nt.length>=120)?new xa(Ge&&Nt):te}Nt=d[0];var zt=-1,en=Qe[0];e:for(;++zt<ae&&Pt.length<lt;){var wn=Nt[zt],Fn=f?f(wn):wn;if(wn=_||0!==wn?wn:0,!(en?Eh(en,Fn):P(Pt,Fn,_))){for(Ge=Ae;--Ge;){var ar=Qe[Ge];if(!(ar?Eh(ar,Fn):P(d[Ge],Fn,_)))continue e}en&&en.push(Fn),Pt.push(wn)}}return Pt}function Ma(d,f,_){var P=null==(d=v_(d,f=Tu(f,d)))?d:d[er(ra(f))];return null==P?te:es(P,d,_)}function wA(d){return wi(d)&&Ts(d)==We}function pp(d,f,_,P,ae){return d===f||(null==d||null==f||!wi(d)&&!wi(f)?d!=d&&f!=f:function(d,f,_,P,ae,Ae){var Ge=In(d),Qe=In(f),lt=Ge?Je:Ws(d),Pt=Qe?Je:Ws(f),Nt=(lt=lt==We?we:lt)==we,zt=(Pt=Pt==We?we:Pt)==we,en=lt==Pt;if(en&&cl(d)){if(!cl(f))return!1;Ge=!0,Nt=!1}if(en&&!Nt)return Ae||(Ae=new Da),Ge||Xh(d)?Ap(d,f,_,P,ae,Ae):function(d,f,_,P,ae,Ae,Ge){switch(_){case wt:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case et:return!(d.byteLength!=f.byteLength||!Ae(new yd(d),new yd(f)));case Ve:case Le:case W:return Dn(+d,+f);case Re:return d.name==f.name&&d.message==f.message;case At:case ye:return d==f+"";case ze:var Qe=Ib;case pt:if(Qe||(Qe=Bm),d.size!=f.size&&!(1&P))return!1;var Pt=Ge.get(d);if(Pt)return Pt==f;P|=2,Ge.set(d,f);var Nt=Ap(Qe(d),Qe(f),P,ae,Ae,Ge);return Ge.delete(d),Nt;case j:if(bd)return bd.call(d)==bd.call(f)}return!1}(d,f,lt,_,P,ae,Ae);if(!(1&_)){var wn=Nt&&Ur.call(d,"__wrapped__"),Fn=zt&&Ur.call(f,"__wrapped__");if(wn||Fn){var ar=wn?d.value():d,jn=Fn?f.value():f;return Ae||(Ae=new Da),ae(ar,jn,_,P,Ae)}}return!!en&&(Ae||(Ae=new Da),function(d,f,_,P,ae,Ae){var Ge=1&_,Qe=jl(d),lt=Qe.length;if(lt!=jl(f).length&&!Ge)return!1;for(var zt=lt;zt--;){var en=Qe[zt];if(!(Ge?en in f:Ur.call(f,en)))return!1}var wn=Ae.get(d),Fn=Ae.get(f);if(wn&&Fn)return wn==f&&Fn==d;var ar=!0;Ae.set(d,f),Ae.set(f,d);for(var jn=Ge;++zt<lt;){var lr=d[en=Qe[zt]],wr=f[en];if(P)var vo=Ge?P(wr,lr,en,f,d,Ae):P(lr,wr,en,d,f,Ae);if(!(vo===te?lr===wr||ae(lr,wr,_,P,Ae):vo)){ar=!1;break}jn||(jn="constructor"==en)}if(ar&&!jn){var Ys=d.constructor,la=f.constructor;Ys!=la&&"constructor"in d&&"constructor"in f&&!("function"==typeof Ys&&Ys instanceof Ys&&"function"==typeof la&&la instanceof la)&&(ar=!1)}return Ae.delete(d),Ae.delete(f),ar}(d,f,_,P,ae,Ae))}(d,f,_,P,pp,ae))}function r_(d,f,_,P){var ae=_.length,Ae=ae,Ge=!P;if(null==d)return!Ae;for(d=Vr(d);ae--;){var Qe=_[ae];if(Ge&&Qe[2]?Qe[1]!==d[Qe[0]]:!(Qe[0]in d))return!1}for(;++ae<Ae;){var lt=(Qe=_[ae])[0],Pt=d[lt],Nt=Qe[1];if(Ge&&Qe[2]){if(Pt===te&&!(lt in d))return!1}else{var zt=new Da;if(P)var en=P(Pt,Nt,lt,d,f,zt);if(!(en===te?pp(Nt,Pt,3,P,zt):en))return!1}}return!0}function i_(d){return!(!bi(d)||function(d){return!!Th&&Th in d}(d))&&(oa(d)?_d:ei).test(Ac(d))}function CA(d){return"function"==typeof d?d:null==d?io:"object"==typeof d?In(d)?Dd(d[0],d[1]):TA(d):Dc(d)}function zb(d){if(!Dp(d))return Ja(d);var f=[];for(var _ in Vr(d))Ur.call(d,_)&&"constructor"!=_&&f.push(_);return f}function Hb(d,f){return d<f}function AA(d,f){var _=-1,P=_o(d)?bt(d.length):[];return Eu(d,function(ae,Ae,Ge){P[++_]=f(ae,Ae,Ge)}),P}function TA(d){var f=ta(d);return 1==f.length&&f[0][2]?VA(f[0][0],f[0][1]):function(_){return _===d||r_(_,d,f)}}function Dd(d,f){return na(d)&&jA(f)?VA(er(d),f):function(_){var P=Jh(_,d);return P===te&&P===f?Up(_,d):pp(f,P,3)}}function s_(d,f,_,P,ae){d!==f&&Sd(f,function(Ae,Ge){if(ae||(ae=new Da),bi(Ae))!function(d,f,_,P,ae,Ae,Ge){var Qe=b_(d,_),lt=b_(f,_),Pt=Ge.get(lt);if(Pt)Zm(d,_,Pt);else{var Nt=Ae?Ae(Qe,lt,_+"",d,f,Ge):te,zt=Nt===te;if(zt){var en=In(lt),wn=!en&&cl(lt),Fn=!en&&!wn&&Xh(lt);Nt=lt,en||wn||Fn?In(Qe)?Nt=Qe:vi(Qe)?Nt=to(Qe):wn?(zt=!1,Nt=vp(lt,!0)):Fn?(zt=!1,Nt=c_(lt,!0)):Nt=[]:Vp(lt)||ul(lt)?(Nt=Qe,ul(Qe)?Nt=J0(Qe):(!bi(Qe)||oa(Qe))&&(Nt=a0(lt))):zt=!1}zt&&(Ge.set(lt,Nt),ae(Nt,lt,P,Ae,Ge),Ge.delete(lt)),Zm(d,_,Nt)}}(d,f,Ge,_,s_,P,ae);else{var Qe=P?P(b_(d,Ge),Ae,Ge+"",d,f,ae):te;Qe===te&&(Qe=Ae),Zm(d,Ge,Qe)}},ro)}function _c(d,f){var _=d.length;if(_)return No(f+=f<0?_:0,_)?d[f]:te}function jh(d,f,_){f=f.length?Br(f,function(Ae){return In(Ae)?function(Ge){return Qo(Ge,1===Ae.length?Ae[0]:Ae)}:Ae}):[io];var P=-1;return f=Br(f,Ko(Nn())),function(ot,Mt){var bt=ot.length;for(ot.sort(function(Ae,Ge){return function(d,f,_){for(var P=-1,ae=d.criteria,Ae=f.criteria,Ge=ae.length,Qe=_.length;++P<Ge;){var lt=xu(ae[P],Ae[P]);if(lt)return P>=Qe?lt:lt*("desc"==_[P]?-1:1)}return d.index-f.index}(Ae,Ge,_)});bt--;)ot[bt]=ot[bt].value;return ot}(AA(d,function(Ae,Ge,Qe){return{criteria:Br(f,function(Pt){return Pt(Ae)}),index:++P,value:Ae}}))}function Gb(d,f,_){for(var P=-1,ae=f.length,Ae={};++P<ae;){var Ge=f[P],Qe=Qo(d,Ge);_(Qe,Ge)&&mp(Ae,Tu(Ge,d),Qe)}return Ae}function ea(d,f,_,P){var ae=P?Jf:Qa,Ae=-1,Ge=f.length,Qe=d;for(d===f&&(f=to(f)),_&&(Qe=Br(d,Ko(_)));++Ae<Ge;)for(var lt=0,Pt=f[Ae],Nt=_?_(Pt):Pt;(lt=ae(Qe,Nt,lt,P))>-1;)Qe!==d&&Bn.call(Qe,lt,1),Bn.call(d,lt,1);return d}function Vh(d,f){for(var _=d?f.length:0,P=_-1;_--;){var ae=f[_];if(_==P||ae!==Ae){var Ae=ae;No(ae)?Bn.call(d,ae,1):yc(d,ae)}}return d}function kl(d,f){return d+fr(Mh()*(f-d+1))}function gp(d,f){var _="";if(!d||f<1||f>pe)return _;do{f%2&&(_+=d),(f=fr(f/2))&&(d+=d)}while(f);return _}function or(d,f){return Mp(UA(d,f,io),d+"")}function xA(d){return Qm(Gd(d))}function ek(d,f){var _=Gd(d);return kd(_,gc(f,0,_.length))}function mp(d,f,_,P){if(!bi(d))return d;for(var ae=-1,Ae=(f=Tu(f,d)).length,Ge=Ae-1,Qe=d;null!=Qe&&++ae<Ae;){var lt=er(f[ae]),Pt=_;if("__proto__"===lt||"constructor"===lt||"prototype"===lt)return d;if(ae!=Ge){var Nt=Qe[lt];(Pt=P?P(Nt,lt,Qe):te)===te&&(Pt=bi(Nt)?Nt:No(f[ae+1])?[]:{})}tl(Qe,lt,Pt),Qe=Qe[lt]}return d}var o_=Oh?function(d,f){return Oh.set(d,f),d}:io,Ro=rp?function(d,f){return rp(d,"toString",{configurable:!0,enumerable:!1,value:ay(f),writable:!0})}:io;function a_(d){return kd(Gd(d))}function xs(d,f,_){var P=-1,ae=d.length;f<0&&(f=-f>ae?0:ae+f),(_=_>ae?ae:_)<0&&(_+=ae),ae=f>_?0:_-f>>>0,f>>>=0;for(var Ae=bt(ae);++P<ae;)Ae[P]=d[P+f];return Ae}function tk(d,f){var _;return Eu(d,function(P,ae,Ae){return!(_=f(P,ae,Ae))}),!!_}function Uh(d,f,_){var P=0,ae=null==d?P:d.length;if("number"==typeof f&&f==f&&ae<=2147483647){for(;P<ae;){var Ae=P+ae>>>1,Ge=d[Ae];null!==Ge&&!aa(Ge)&&(_?Ge<=f:Ge<f)?P=Ae+1:ae=Ae}return ae}return l_(d,f,io,_)}function l_(d,f,_,P){var ae=0,Ae=null==d?0:d.length;if(0===Ae)return 0;for(var Ge=(f=_(f))!=f,Qe=null===f,lt=aa(f),Pt=f===te;ae<Ae;){var Nt=fr((ae+Ae)/2),zt=_(d[Nt]),en=zt!==te,wn=null===zt,Fn=zt==zt,ar=aa(zt);if(Ge)var jn=P||Fn;else jn=Pt?Fn&&(P||en):Qe?Fn&&en&&(P||!wn):lt?Fn&&en&&!wn&&(P||!ar):!wn&&!ar&&(P?zt<=f:zt<f);jn?ae=Nt+1:Ae=Nt}return hs(Ae,4294967294)}function $b(d,f){for(var _=-1,P=d.length,ae=0,Ae=[];++_<P;){var Ge=d[_],Qe=f?f(Ge):Ge;if(!_||!Dn(Qe,lt)){var lt=Qe;Ae[ae++]=0===Ge?0:Ge}}return Ae}function Wb(d){return"number"==typeof d?d:aa(d)?X:+d}function Po(d){if("string"==typeof d)return d;if(In(d))return Br(d,Po)+"";if(aa(d))return Rh?Rh.call(d):"";var f=d+"";return"0"==f&&1/d==-$?"-0":f}function Cu(d,f,_){var P=-1,ae=Rl,Ae=d.length,Ge=!0,Qe=[],lt=Qe;if(_)Ge=!1,ae=bh;else if(Ae>=200){var Pt=f?null:h_(d);if(Pt)return Bm(Pt);Ge=!1,ae=Eh,lt=new xa}else lt=f?[]:Qe;e:for(;++P<Ae;){var Nt=d[P],zt=f?f(Nt):Nt;if(Nt=_||0!==Nt?Nt:0,Ge&&zt==zt){for(var en=lt.length;en--;)if(lt[en]===zt)continue e;f&&lt.push(zt),Qe.push(Nt)}else ae(lt,zt,_)||(lt!==Qe&&lt.push(zt),Qe.push(Nt))}return Qe}function yc(d,f){return null==(d=v_(d,f=Tu(f,d)))||delete d[er(ra(f))]}function _p(d,f,_,P){return mp(d,f,_(Qo(d,f)),P)}function vc(d,f,_,P){for(var ae=d.length,Ae=P?ae:-1;(P?Ae--:++Ae<ae)&&f(d[Ae],Ae,d););return _?xs(d,P?0:Ae,P?Ae+1:ae):xs(d,P?Ae+1:0,P?ae:Ae)}function DA(d,f){var _=d;return _ instanceof sr&&(_=_.value()),cc(f,function(P,ae){return ae.func.apply(ae.thisArg,Bi([P],ae.args))},_)}function bc(d,f,_){var P=d.length;if(P<2)return P?Cu(d[0]):[];for(var ae=-1,Ae=bt(P);++ae<P;)for(var Ge=d[ae],Qe=-1;++Qe<P;)Qe!=ae&&(Ae[ae]=wu(Ae[ae]||Ge,d[Qe],f,_));return Cu(As(Ae,1),f,_)}function yp(d,f,_){for(var P=-1,ae=d.length,Ae=f.length,Ge={};++P<ae;)_(Ge,d[P],P<Ae?f[P]:te);return Ge}function Au(d){return vi(d)?d:[]}function u_(d){return"function"==typeof d?d:io}function Tu(d,f){return In(d)?d:na(d,f)?[d]:d0(Pr(d))}var MA=or;function il(d,f,_){var P=d.length;return _=_===te?P:_,!f&&_>=P?d:xs(d,f,_)}var IA=Nb||function(d){return Rr.clearTimeout(d)};function vp(d,f){if(f)return d.slice();var _=d.length,P=Pb?Pb(_):new d.constructor(_);return d.copy(P),P}function wc(d){var f=new d.constructor(d.byteLength);return new yd(f).set(new yd(d)),f}function c_(d,f){var _=f?wc(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function xu(d,f){if(d!==f){var _=d!==te,P=null===d,ae=d==d,Ae=aa(d),Ge=f!==te,Qe=null===f,lt=f==f,Pt=aa(f);if(!Qe&&!Pt&&!Ae&&d>f||Ae&&Ge&&lt&&!Qe&&!Pt||P&&Ge&&lt||!_&&lt||!ae)return 1;if(!P&&!Ae&&!Pt&&d<f||Pt&&_&&ae&&!P&&!Ae||Qe&&_&&ae||!Ge&&ae||!lt)return-1}return 0}function Id(d,f,_,P){for(var ae=-1,Ae=d.length,Ge=_.length,Qe=-1,lt=f.length,Pt=ji(Ae-Ge,0),Nt=bt(lt+Pt),zt=!P;++Qe<lt;)Nt[Qe]=f[Qe];for(;++ae<Ge;)(zt||ae<Ae)&&(Nt[_[ae]]=d[ae]);for(;Pt--;)Nt[Qe++]=d[ae++];return Nt}function qb(d,f,_,P){for(var ae=-1,Ae=d.length,Ge=-1,Qe=_.length,lt=-1,Pt=f.length,Nt=ji(Ae-Qe,0),zt=bt(Nt+Pt),en=!P;++ae<Nt;)zt[ae]=d[ae];for(var wn=ae;++lt<Pt;)zt[wn+lt]=f[lt];for(;++Ge<Qe;)(en||ae<Ae)&&(zt[wn+_[Ge]]=d[ae++]);return zt}function to(d,f){var _=-1,P=d.length;for(f||(f=bt(P));++_<P;)f[_]=d[_];return f}function Ia(d,f,_,P){var ae=!_;_||(_={});for(var Ae=-1,Ge=f.length;++Ae<Ge;){var Qe=f[Ae],lt=P?P(_[Qe],d[Qe],Qe,_,d):te;lt===te&&(lt=d[Qe]),ae?nl(_,Qe,lt):tl(_,Qe,lt)}return _}function Ki(d,f){return function(_,P){var ae=In(_)?Li:dp,Ae=f?f():{};return ae(_,d,Nn(P,2),Ae)}}function Fl(d){return or(function(f,_){var P=-1,ae=_.length,Ae=ae>1?_[ae-1]:te,Ge=ae>2?_[2]:te;for(Ae=d.length>3&&"function"==typeof Ae?(ae--,Ae):te,Ge&&qs(_[0],_[1],Ge)&&(Ae=ae<3?te:Ae,ae=1),f=Vr(f);++P<ae;){var Qe=_[P];Qe&&d(f,Qe,P,Ae)}return f})}function sl(d,f){return function(_,P){if(null==_)return _;if(!_o(_))return d(_,P);for(var ae=_.length,Ae=f?ae:-1,Ge=Vr(_);(f?Ae--:++Ae<ae)&&!1!==P(Ge[Ae],Ae,Ge););return _}}function Yb(d){return function(f,_,P){for(var ae=-1,Ae=Vr(f),Ge=P(f),Qe=Ge.length;Qe--;){var lt=Ge[d?Qe:++ae];if(!1===_(Ae[lt],lt,Ae))break}return f}}function bp(d){return function(f){var _=Sh(f=Pr(f))?Za(f):te,P=_?_[0]:f.charAt(0),ae=_?il(_,1).join(""):f.slice(1);return P[d]()+ae}}function Ll(d){return function(f){return cc(sy(Z_(f).replace(Zf,"")),d,"")}}function Rd(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=pc(d.prototype),P=d.apply(_,f);return bi(P)?P:_}}function Xb(d){return function(f,_,P){var ae=Vr(f);if(!_o(f)){var Ae=Nn(_,3);f=Ms(f),_=function(Qe){return Ae(ae[Qe],Qe,ae)}}var Ge=d(f,_,P);return Ge>-1?ae[Ae?f[Ge]:Ge]:te}}function Sc(d){return ol(function(f){var _=f.length,P=_,ae=Oo.prototype.thru;for(d&&f.reverse();P--;){var Ae=f[P];if("function"!=typeof Ae)throw new Ca(xe);if(ae&&!Ge&&"wrapper"==Tp(Ae))var Ge=new Oo([],!0)}for(P=Ge?P:_;++P<_;){var Qe=Tp(Ae=f[P]),lt="wrapper"==Qe?p_(Ae):te;Ge=lt&&xp(lt[0])&&424==lt[1]&&!lt[4].length&&1==lt[9]?Ge[Tp(lt[0])].apply(Ge,lt[3]):1==Ae.length&&xp(Ae)?Ge[Qe]():Ge.thru(Ae)}return function(){var Pt=arguments,Nt=Pt[0];if(Ge&&1==Pt.length&&In(Nt))return Ge.plant(Nt).value();for(var zt=0,en=_?f[zt].apply(this,Pt):Nt;++zt<_;)en=f[zt].call(this,en);return en}})}function Du(d,f,_,P,ae,Ae,Ge,Qe,lt,Pt){var Nt=f&q,zt=1&f,en=2&f,wn=24&f,Fn=512&f,ar=en?te:Rd(d);return function jn(){for(var lr=arguments.length,wr=bt(lr),vo=lr;vo--;)wr[vo]=arguments[vo];if(wn)var Ys=Nd(jn),la=kN(wr,Ys);if(P&&(wr=Id(wr,P,ae,wn)),Ae&&(wr=qb(wr,Ae,Ge,wn)),lr-=la,wn&&lr<Pt){var Nr=dc(wr,Ys);return Jb(d,f,Du,jn.placeholder,_,wr,Nr,Qe,lt,Pt-lr)}var fl=zt?_:this,Pu=en?fl[d]:d;return lr=wr.length,Qe?wr=zA(wr,Qe):Fn&&lr>1&&wr.reverse(),Nt&&lt<lr&&(wr.length=lt),this&&this!==Rr&&this instanceof jn&&(Pu=ar||Rd(Pu)),Pu.apply(fl,wr)}}function Qb(d,f){return function(_,P){return function(d,f,_,P){return rl(d,function(ae,Ae,Ge){f(P,_(ae),Ae,Ge)}),P}(_,d,f(P),{})}}function d_(d,f){return function(_,P){var ae;if(_===te&&P===te)return f;if(_!==te&&(ae=_),P!==te){if(ae===te)return P;"string"==typeof _||"string"==typeof P?(_=Po(_),P=Po(P)):(_=Wb(_),P=Wb(P)),ae=d(_,P)}return ae}}function wp(d){return ol(function(f){return f=Br(f,Ko(Nn())),or(function(_){var P=this;return d(f,function(ae){return es(ae,P,_)})})})}function Ep(d,f){var _=(f=f===te?" ":Po(f)).length;if(_<2)return _?gp(f,d):f;var P=gp(f,Vt(d/Ch(f)));return Sh(f)?il(Za(P),0,d).join(""):P.slice(0,d)}function Zb(d){return function(f,_,P){return P&&"number"!=typeof P&&qs(f,_,P)&&(_=P=te),f=dl(f),_===te?(_=f,f=0):_=dl(_),function(d,f,_,P){for(var ae=-1,Ae=ji(Vt((f-d)/(_||1)),0),Ge=bt(Ae);Ae--;)Ge[P?Ae:++ae]=d,d+=_;return Ge}(f,_,P=P===te?f<_?1:-1:dl(P),d)}}function Sp(d){return function(f,_){return"string"==typeof f&&"string"==typeof _||(f=yo(f),_=yo(_)),d(f,_)}}function Jb(d,f,_,P,ae,Ae,Ge,Qe,lt,Pt){var Nt=8&f;f|=Nt?B:64,4&(f&=~(Nt?64:B))||(f&=-4);var ar=[d,f,ae,Nt?Ae:te,Nt?Ge:te,Nt?te:Ae,Nt?te:Ge,Qe,lt,Pt],jn=_.apply(te,ar);return xp(d)&&c0(jn,ar),jn.placeholder=P,Gh(jn,d,f)}function Pd(d){var f=Yi[d];return function(_,P){if(_=yo(_),(P=null==P?0:hs(Qn(P),292))&&Gm(_)){var ae=(Pr(_)+"e").split("e");return+((ae=(Pr(f(ae[0]+"e"+(+ae[1]+P)))+"e").split("e"))[0]+"e"+(+ae[1]-P))}return f(_)}}var h_=Ta&&1/Bm(new Ta([,-0]))[1]==$?function(d){return new Ta(d)}:cy;function Cc(d){return function(f){var _=Ws(f);return _==ze?Ib(f):_==pt?function(ot){var Mt=-1,bt=Array(ot.size);return ot.forEach(function(ln){bt[++Mt]=[ln,ln]}),bt}(f):function(ot,Mt){return Br(Mt,function(bt){return[bt,ot[bt]]})}(f,d(f))}}function Bl(d,f,_,P,ae,Ae,Ge,Qe){var lt=2&f;if(!lt&&"function"!=typeof d)throw new Ca(xe);var Pt=P?P.length:0;if(Pt||(f&=-97,P=ae=te),Ge=Ge===te?Ge:ji(Qn(Ge),0),Qe=Qe===te?Qe:Qn(Qe),Pt-=ae?ae.length:0,64&f){var Nt=P,zt=ae;P=ae=te}var en=lt?te:p_(d),wn=[d,f,_,P,ae,Nt,zt,Ae,Ge,Qe];if(en&&function(d,f){var _=d[1],P=f[1],ae=_|P;if(!(ae<131||(P==q&&8==_||P==q&&256==_&&d[7].length<=f[8]||384==P&&f[7].length<=f[8]&&8==_)))return d;1&P&&(d[2]=f[2],ae|=1&_?0:4);var Qe=f[3];if(Qe){var lt=d[3];d[3]=lt?Id(lt,Qe,f[4]):Qe,d[4]=lt?dc(d[3],F):f[4]}(Qe=f[5])&&(d[5]=(lt=d[5])?qb(lt,Qe,f[6]):Qe,d[6]=lt?dc(d[5],F):f[6]),(Qe=f[7])&&(d[7]=Qe),P&q&&(d[8]=null==d[8]?f[8]:hs(d[8],f[8])),null==d[9]&&(d[9]=f[9]),d[0]=f[0],d[1]=ae}(wn,en),d=wn[0],f=wn[1],_=wn[2],P=wn[3],ae=wn[4],!(Qe=wn[9]=wn[9]===te?lt?0:d.length:ji(wn[9]-Pt,0))&&24&f&&(f&=-25),f&&1!=f)Fn=8==f||16==f?function(d,f,_){var P=Rd(d);return function ae(){for(var Ae=arguments.length,Ge=bt(Ae),Qe=Ae,lt=Nd(ae);Qe--;)Ge[Qe]=arguments[Qe];var Pt=Ae<3&&Ge[0]!==lt&&Ge[Ae-1]!==lt?[]:dc(Ge,lt);return(Ae-=Pt.length)<_?Jb(d,f,Du,ae.placeholder,te,Ge,Pt,te,te,_-Ae):es(this&&this!==Rr&&this instanceof ae?P:d,this,Ge)}}(d,f,Qe):f!=B&&33!=f||ae.length?Du.apply(te,wn):function(d,f,_,P){var ae=1&f,Ae=Rd(d);return function Ge(){for(var Qe=-1,lt=arguments.length,Pt=-1,Nt=P.length,zt=bt(Nt+lt),en=this&&this!==Rr&&this instanceof Ge?Ae:d;++Pt<Nt;)zt[Pt]=P[Pt];for(;lt--;)zt[Pt++]=arguments[++Qe];return es(en,ae?_:this,zt)}}(d,f,_,P);else var Fn=function(d,f,_){var P=1&f,ae=Rd(d);return function Ae(){return(this&&this!==Rr&&this instanceof Ae?ae:d).apply(P?_:this,arguments)}}(d,f,_);return Gh((en?o_:c0)(Fn,wn),d,f)}function e0(d,f,_,P){return d===te||Dn(d,hc[_])&&!Ur.call(P,_)?f:d}function PA(d,f,_,P,ae,Ae){return bi(d)&&bi(f)&&(Ae.set(f,d),s_(d,f,te,PA,Ae),Ae.delete(f)),d}function Cp(d){return Vp(d)?te:d}function Ap(d,f,_,P,ae,Ae){var Ge=1&_,Qe=d.length,lt=f.length;if(Qe!=lt&&!(Ge&&lt>Qe))return!1;var Pt=Ae.get(d),Nt=Ae.get(f);if(Pt&&Nt)return Pt==f&&Nt==d;var zt=-1,en=!0,wn=2&_?new xa:te;for(Ae.set(d,f),Ae.set(f,d);++zt<Qe;){var Fn=d[zt],ar=f[zt];if(P)var jn=Ge?P(ar,Fn,zt,f,d,Ae):P(Fn,ar,zt,d,f,Ae);if(jn!==te){if(jn)continue;en=!1;break}if(wn){if(!Mo(f,function(lr,wr){if(!Eh(wn,wr)&&(Fn===lr||ae(Fn,lr,_,P,Ae)))return wn.push(wr)})){en=!1;break}}else if(Fn!==ar&&!ae(Fn,ar,_,P,Ae)){en=!1;break}}return Ae.delete(d),Ae.delete(f),en}function ol(d){return Mp(UA(d,te,Ds),d+"")}function jl(d){return Xr(d,Ms,g_)}function f_(d){return Xr(d,ro,r0)}var p_=Oh?function(d){return Oh.get(d)}:cy;function Tp(d){for(var f=d.name+"",_=vd[f],P=Ur.call(vd,f)?_.length:0;P--;){var ae=_[P],Ae=ae.func;if(null==Ae||Ae==d)return ae.name}return f}function Nd(d){return(Ur.call(Ce,"placeholder")?Ce:d).placeholder}function Nn(){var d=Ce.iteratee||xc;return d=d===xc?CA:d,arguments.length?d(arguments[0],arguments[1]):d}function $s(d,f){var _=d.__data__;return function(d){var f=typeof d;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==d:null===d}(f)?_["string"==typeof f?"string":"hash"]:_.map}function ta(d){for(var f=Ms(d),_=f.length;_--;){var P=f[_],ae=d[P];f[_]=[P,ae,jA(ae)]}return f}function Mu(d,f){var _=function(ot,Mt){return null==ot?te:ot[Mt]}(d,f);return i_(_)?_:te}var g_=Xo?function(d){return null==d?[]:(d=Vr(d),Ea(Xo(d),function(f){return np.call(d,f)}))}:Ru,r0=Xo?function(d){for(var f=[];d;)Bi(f,g_(d)),d=Aa(d);return f}:Ru,Ws=Ts;function o0(d,f,_){for(var P=-1,ae=(f=Tu(f,d)).length,Ae=!1;++P<ae;){var Ge=er(f[P]);if(!(Ae=null!=d&&_(d,Ge)))break;d=d[Ge]}return Ae||++P!=ae?Ae:!!(ae=null==d?0:d.length)&&H_(ae)&&No(Ge,ae)&&(In(d)||ul(d))}function a0(d){return"function"!=typeof d.constructor||Dp(d)?{}:pc(Aa(d))}function BA(d){return In(d)||ul(d)||!!(iA&&d&&d[iA])}function No(d,f){var _=typeof d;return!!(f=null==f?pe:f)&&("number"==_||"symbol"!=_&&Lr.test(d))&&d>-1&&d%1==0&&d<f}function qs(d,f,_){if(!bi(_))return!1;var P=typeof f;return!!("number"==P?_o(_)&&No(f,_.length):"string"==P&&f in _)&&Dn(_[f],d)}function na(d,f){if(In(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!aa(d))||_e.test(d)||!ht.test(d)||null!=f&&d in Vr(f)}function xp(d){var f=Tp(d),_=Ce[f];if("function"!=typeof _||!(f in sr.prototype))return!1;if(d===_)return!0;var P=p_(_);return!!P&&d===P[0]}(Cs&&Ws(new Cs(new ArrayBuffer(1)))!=wt||go&&Ws(new go)!=ze||sp&&Ws(sp.resolve())!=ce||Ta&&Ws(new Ta)!=pt||Io&&Ws(new Io)!=L)&&(Ws=function(d){var f=Ts(d),_=f==we?d.constructor:te,P=_?Ac(_):"";if(P)switch(P){case lA:return wt;case $m:return ze;case Wm:return ce;case kb:return pt;case qm:return L}return f});var u0=tp?oa:hy;function Dp(d){var f=d&&d.constructor;return d===("function"==typeof f&&f.prototype||hc)}function jA(d){return d==d&&!bi(d)}function VA(d,f){return function(_){return null!=_&&_[d]===f&&(f!==te||d in Vr(_))}}function UA(d,f,_){return f=ji(f===te?d.length-1:f,0),function(){for(var P=arguments,ae=-1,Ae=ji(P.length-f,0),Ge=bt(Ae);++ae<Ae;)Ge[ae]=P[f+ae];ae=-1;for(var Qe=bt(f+1);++ae<f;)Qe[ae]=P[ae];return Qe[f]=_(Ge),es(d,this,Qe)}}function v_(d,f){return f.length<2?d:Qo(d,xs(f,0,-1))}function zA(d,f){for(var _=d.length,P=hs(f.length,_),ae=to(d);P--;){var Ae=f[P];d[P]=No(Ae,_)?ae[Ae]:te}return d}function b_(d,f){if(("constructor"!==f||"function"!=typeof d[f])&&"__proto__"!=f)return d[f]}var c0=w_(o_),Hh=oA||function(d,f){return Rr.setTimeout(d,f)},Mp=w_(Ro);function Gh(d,f,_){var P=f+"";return Mp(d,function(d,f){var _=f.length;if(!_)return d;var P=_-1;return f[P]=(_>1?"& ":"")+f[P],f=f.join(_>2?", ":" "),d.replace(xt,"{\n/* [wrapped with "+f+"] */\n")}(P,function(d,f){return zs(Ze,function(_){var P="_."+_[0];f&_[1]&&!Rl(d,P)&&d.push(P)}),d.sort()}(function(d){var f=d.match(Dt);return f?f[1].split(Qt):[]}(P),_)))}function w_(d){var f=0,_=0;return function(){var P=$N(),ae=16-(P-_);if(_=P,ae>0){if(++f>=800)return arguments[0]}else f=0;return d.apply(te,arguments)}}function kd(d,f){var _=-1,P=d.length,ae=P-1;for(f=f===te?P:f;++_<f;){var Ae=kl(_,ae),Ge=d[Ae];d[Ae]=d[_],d[_]=Ge}return d.length=f,d}var f,_,d0=(f=Kh(function(d){var f=[];return 46===d.charCodeAt(0)&&f.push(""),d.replace(be,function(_,P,ae,Ae){f.push(ae?Ae.replace(On,"$1"):P||_)}),f},function(P){return 500===_.size&&_.clear(),P}),_=f.cache,f);function er(d){if("string"==typeof d||aa(d))return d;var f=d+"";return"0"==f&&1/d==-$?"-0":f}function Ac(d){if(null!=d){try{return yi.call(d)}catch(f){}try{return d+""}catch(f){}}return""}function Ip(d){if(d instanceof sr)return d.clone();var f=new Oo(d.__wrapped__,d.__chain__);return f.__actions__=to(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}var WA=or(function(d,f){return vi(d)?wu(d,As(f,1,vi,!0)):[]}),qA=or(function(d,f){var _=ra(f);return vi(_)&&(_=te),vi(d)?wu(d,As(f,1,vi,!0),Nn(_,2)):[]}),YA=or(function(d,f){var _=ra(f);return vi(_)&&(_=te),vi(d)?wu(d,As(f,1,vi,!0),te,_):[]});function S_(d,f,_){var P=null==d?0:d.length;if(!P)return-1;var ae=null==_?0:Qn(_);return ae<0&&(ae=ji(P+ae,0)),pd(d,Nn(f,3),ae)}function C_(d,f,_){var P=null==d?0:d.length;if(!P)return-1;var ae=P-1;return _!==te&&(ae=Qn(_),ae=_<0?ji(P+ae,0):hs(ae,P-1)),pd(d,Nn(f,3),ae,!0)}function Ds(d){return null!=d&&d.length?As(d,1):[]}function f0(d){return d&&d.length?d[0]:te}var g0=or(function(d){var f=Br(d,Au);return f.length&&f[0]===d[0]?mc(f):[]}),QA=or(function(d){var f=ra(d),_=Br(d,Au);return f===ra(_)?f=te:_.pop(),_.length&&_[0]===d[0]?mc(_,Nn(f,2)):[]}),m0=or(function(d){var f=ra(d),_=Br(d,Au);return(f="function"==typeof f?f:te)&&_.pop(),_.length&&_[0]===d[0]?mc(_,te,f):[]});function ra(d){var f=null==d?0:d.length;return f?d[f-1]:te}var T_=or(x_);function x_(d,f){return d&&d.length&&f&&f.length?ea(d,f):d}var y0=ol(function(d,f){var _=null==d?0:d.length,P=Jm(d,f);return Vh(d,Br(f,function(ae){return No(ae,_)?+ae:ae}).sort(xu)),P});function D_(d){return null==d?d:ip.call(d)}var w0=or(function(d){return Cu(As(d,1,vi,!0))}),uT=or(function(d){var f=ra(d);return vi(f)&&(f=te),Cu(As(d,1,vi,!0),Nn(f,2))}),cT=or(function(d){var f=ra(d);return f="function"==typeof f?f:te,Cu(As(d,1,vi,!0),te,f)});function E0(d){if(!d||!d.length)return[];var f=0;return d=Ea(d,function(_){if(vi(_))return f=ji(_.length,f),!0}),md(f,function(_){return Br(d,km(_))})}function hT(d,f){if(!d||!d.length)return[];var _=E0(d);return null==f?_:Br(_,function(P){return es(f,te,P)})}var S0=or(function(d,f){return vi(d)?wu(d,f):[]}),ck=or(function(d){return bc(Ea(d,vi))}),ko=or(function(d){var f=ra(d);return vi(f)&&(f=te),bc(Ea(d,vi),Nn(f,2))}),M_=or(function(d){var f=ra(d);return f="function"==typeof f?f:te,bc(Ea(d,vi),te,f)}),I_=or(E0),qh=or(function(d){var f=d.length,_=f>1?d[f-1]:te;return _="function"==typeof _?(d.pop(),_):te,hT(d,_)});function O_(d){var f=Ce(d);return f.__chain__=!0,f}function Ld(d,f){return f(d)}var R_=ol(function(d){var f=d.length,_=f?d[0]:0,P=this.__wrapped__,ae=function(Ae){return Jm(Ae,d)};return!(f>1||this.__actions__.length)&&P instanceof sr&&No(_)?((P=P.slice(_,+_+(f?1:0))).__actions__.push({func:Ld,args:[ae],thisArg:te}),new Oo(P,this.__chain__).thru(function(Ae){return f&&!Ae.length&&Ae.push(te),Ae})):this.thru(ae)}),gT=Ki(function(d,f,_){Ur.call(d,_)?++d[_]:nl(d,_,1)}),yT=Xb(S_),vT=Xb(C_);function F_(d,f){return(In(d)?zs:Eu)(d,Nn(f,3))}function Pp(d,f){return(In(d)?hd:t_)(d,Nn(f,3))}var wT=Ki(function(d,f,_){Ur.call(d,_)?d[_].push(f):nl(d,_,[f])}),M0=or(function(d,f,_){var P=-1,ae="function"==typeof f,Ae=_o(d)?bt(d.length):[];return Eu(d,function(Ge){Ae[++P]=ae?es(f,Ge,_):Ma(Ge,f,_)}),Ae}),I0=Ki(function(d,f,_){nl(d,_,f)});function ll(d,f){return(In(d)?Br:AA)(d,Nn(f,3))}var R0=Ki(function(d,f,_){d[_?0:1].push(f)},function(){return[[],[]]}),kp=or(function(d,f){if(null==d)return[];var _=f.length;return _>1&&qs(d,f[0],f[1])?f=[]:_>2&&qs(f[0],f[1],f[2])&&(f=[f[0]]),jh(d,As(f,1),[])}),Tc=sA||function(){return Rr.Date.now()};function Fp(d,f,_){return f=_?te:f,Bl(d,q,te,te,te,te,f=d&&null==f?d.length:f)}function B_(d,f){var _;if("function"!=typeof f)throw new Ca(xe);return d=Qn(d),function(){return--d>0&&(_=f.apply(this,arguments)),d<=1&&(f=te),_}}var Yh=or(function(d,f,_){var P=1;if(_.length){var ae=dc(_,Nd(Yh));P|=B}return Bl(d,P,f,_,ae)}),jd=or(function(d,f,_){var P=3;if(_.length){var ae=dc(_,Nd(jd));P|=B}return Bl(f,P,d,_,ae)});function j0(d,f,_){var P,ae,Ae,Ge,Qe,lt,Pt=0,Nt=!1,zt=!1,en=!0;if("function"!=typeof d)throw new Ca(xe);function wn(Nr){var fl=P,Pu=ae;return P=ae=te,Pt=Nr,Ge=d.apply(Pu,fl)}function Fn(Nr){return Pt=Nr,Qe=Hh(lr,f),Nt?wn(Nr):Ge}function jn(Nr){var fl=Nr-lt;return lt===te||fl>=f||fl<0||zt&&Nr-Pt>=Ae}function lr(){var Nr=Tc();if(jn(Nr))return wr(Nr);Qe=Hh(lr,function(Nr){var Ix=f-(Nr-lt);return zt?hs(Ix,Ae-(Nr-Pt)):Ix}(Nr))}function wr(Nr){return Qe=te,en&&P?wn(Nr):(P=ae=te,Ge)}function la(){var Nr=Tc(),fl=jn(Nr);if(P=arguments,ae=this,lt=Nr,fl){if(Qe===te)return Fn(lt);if(zt)return IA(Qe),Qe=Hh(lr,f),wn(lt)}return Qe===te&&(Qe=Hh(lr,f)),Ge}return f=yo(f)||0,bi(_)&&(Nt=!!_.leading,Ae=(zt="maxWait"in _)?ji(yo(_.maxWait)||0,f):Ae,en="trailing"in _?!!_.trailing:en),la.cancel=function(){Qe!==te&&IA(Qe),Pt=0,P=lt=ae=Qe=te},la.flush=function(){return Qe===te?Ge:wr(Tc())},la}var AT=or(function(d,f){return Fh(d,1,f)}),V0=or(function(d,f,_){return Fh(d,yo(f)||0,_)});function Kh(d,f){if("function"!=typeof d||null!=f&&"function"!=typeof f)throw new Ca(xe);var _=function(){var P=arguments,ae=f?f.apply(this,P):P[0],Ae=_.cache;if(Ae.has(ae))return Ae.get(ae);var Ge=d.apply(this,P);return _.cache=Ae.set(ae,Ge)||Ae,Ge};return _.cache=new(Kh.Cache||el),_}function U_(d){if("function"!=typeof d)throw new Ca(xe);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}Kh.Cache=el;var TT=MA(function(d,f){var _=(f=1==f.length&&In(f[0])?Br(f[0],Ko(Nn())):Br(As(f,1),Ko(Nn()))).length;return or(function(P){for(var ae=-1,Ae=hs(P.length,_);++ae<Ae;)P[ae]=f[ae].call(this,P[ae]);return es(d,this,P)})}),Lp=or(function(d,f){var _=dc(f,Nd(Lp));return Bl(d,B,te,f,_)}),z0=or(function(d,f){var _=dc(f,Nd(z0));return Bl(d,64,te,f,_)}),xT=ol(function(d,f){return Bl(d,256,te,te,te,f)});function Dn(d,f){return d===f||d!=d&&f!=f}var Zt=Sp(Zo),$0=Sp(function(d,f){return d>=f}),ul=wA(function(){return arguments}())?wA:function(d){return wi(d)&&Ur.call(d,"callee")&&!np.call(d,"callee")},In=bt.isArray,W0=tn?Ko(tn):function(d){return wi(d)&&Ts(d)==et};function _o(d){return null!=d&&H_(d.length)&&!oa(d)}function vi(d){return wi(d)&&_o(d)}var cl=ts||hy,q0=ir?Ko(ir):function(d){return wi(d)&&Ts(d)==Le};function Ra(d){if(!wi(d))return!1;var f=Ts(d);return f==Re||"[object DOMException]"==f||"string"==typeof d.message&&"string"==typeof d.name&&!Vp(d)}function oa(d){if(!bi(d))return!1;var f=Ts(d);return f==He||f==Xe||"[object AsyncFunction]"==f||"[object Proxy]"==f}function jp(d){return"number"==typeof d&&d==Qn(d)}function H_(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=pe}function bi(d){var f=typeof d;return null!=d&&("object"==f||"function"==f)}function wi(d){return null!=d&&"object"==typeof d}var FT=ii?Ko(ii):function(d){return wi(d)&&Ws(d)==ze};function jT(d){return"number"==typeof d||wi(d)&&Ts(d)==W}function Vp(d){if(!wi(d)||Ts(d)!=we)return!1;var f=Aa(d);if(null===f)return!0;var _=Ur.call(f,"constructor")&&f.constructor;return"function"==typeof _&&_ instanceof _&&yi.call(_)==rA}var Q0=po?Ko(po):function(d){return wi(d)&&Ts(d)==At},VT=_u?Ko(_u):function(d){return wi(d)&&Ws(d)==pt};function $_(d){return"string"==typeof d||!In(d)&&wi(d)&&Ts(d)==ye}function aa(d){return"symbol"==typeof d||wi(d)&&Ts(d)==j}var Xh=Ji?Ko(Ji):function(d){return wi(d)&&H_(d.length)&&!!bn[Ts(d)]},Iu=Sp(Hb),W_=Sp(function(d,f){return d<=f});function Z0(d){if(!d)return[];if(_o(d))return $_(d)?Za(d):to(d);if(xh&&d[xh])return function(ot){for(var Mt,bt=[];!(Mt=ot.next()).done;)bt.push(Mt.value);return bt}(d[xh]());var f=Ws(d);return(f==ze?Ib:f==pt?Bm:Gd)(d)}function dl(d){return d?(d=yo(d))===$||d===-$?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function Qn(d){var f=dl(d),_=f%1;return f==f?_?f-_:f:0}function q_(d){return d?gc(Qn(d),0,ge):0}function yo(d){if("number"==typeof d)return d;if(aa(d))return X;if(bi(d)){var f="function"==typeof d.valueOf?d.valueOf():d;d=bi(f)?f+"":f}if("string"!=typeof d)return 0===d?d:+d;d=Mb(d);var _=Jr.test(d);return _||qn.test(d)?Db(d.slice(2),_?2:8):An.test(d)?X:+d}function J0(d){return Ia(d,ro(d))}function Pr(d){return null==d?"":Po(d)}var UT=Fl(function(d,f){if(Dp(f)||_o(f))Ia(f,Ms(f),d);else for(var _ in f)Ur.call(f,_)&&tl(d,_,f[_])}),zT=Fl(function(d,f){Ia(f,ro(f),d)}),Vd=Fl(function(d,f,_,P){Ia(f,ro(f),d,P)}),HT=Fl(function(d,f,_,P){Ia(f,Ms(f),d,P)}),ew=ol(Jm),$T=or(function(d,f){d=Vr(d);var _=-1,P=f.length,ae=P>2?f[2]:te;for(ae&&qs(f[0],f[1],ae)&&(P=1);++_<P;)for(var Ae=f[_],Ge=ro(Ae),Qe=-1,lt=Ge.length;++Qe<lt;){var Pt=Ge[Qe],Nt=d[Pt];(Nt===te||Dn(Nt,hc[Pt])&&!Ur.call(d,Pt))&&(d[Pt]=Ae[Pt])}return d}),Qh=or(function(d){return d.push(te,PA),es(ow,te,d)});function Jh(d,f,_){var P=null==d?te:Qo(d,f);return P===te?_:P}function Up(d,f){return null!=d&&o0(d,f,Td)}var zp=Qb(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=Js.call(f)),d[f]=_},ay(io)),qT=Qb(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=Js.call(f)),Ur.call(d,f)?d[f].push(_):d[f]=[_]},Nn),rw=or(Ma);function Ms(d){return _o(d)?kh(d):zb(d)}function ro(d){return _o(d)?kh(d,!0):function(d){if(!bi(d))return function(d){var f=[];if(null!=d)for(var _ in Vr(d))f.push(_);return f}(d);var f=Dp(d),_=[];for(var P in d)"constructor"==P&&(f||!Ur.call(d,P))||_.push(P);return _}(d)}var sw=Fl(function(d,f,_){s_(d,f,_)}),ow=Fl(function(d,f,_,P){s_(d,f,_,P)}),XT=ol(function(d,f){var _={};if(null==d)return _;var P=!1;f=Br(f,function(Ae){return Ae=Tu(Ae,d),P||(P=Ae.length>1),Ae}),Ia(d,f_(d),_),P&&(_=Gs(_,7,Cp));for(var ae=f.length;ae--;)yc(_,f[ae]);return _}),QT=ol(function(d,f){return null==d?{}:function(d,f){return Gb(d,f,function(_,P){return Up(d,P)})}(d,f)});function aw(d,f){if(null==d)return{};var _=Br(f_(d),function(P){return[P]});return f=Nn(f),Gb(d,_,function(P,ae){return f(P,ae[0])})}var ZT=Cc(Ms),uw=Cc(ro);function Gd(d){return null==d?[]:Lm(d,Ms(d))}var rx=Ll(function(d,f,_){return f=f.toLowerCase(),d+(_?Q_(f):f)});function Q_(d){return Gp(Pr(d).toLowerCase())}function Z_(d){return(d=Pr(d))&&d.replace(va,FN).replace(Pm,"")}var sx=Ll(function(d,f,_){return d+(_?"-":"")+f.toLowerCase()}),ox=Ll(function(d,f,_){return d+(_?" ":"")+f.toLowerCase()}),wk=bp("toLowerCase"),dx=Ll(function(d,f,_){return d+(_?"_":"")+f.toLowerCase()}),ty=Ll(function(d,f,_){return d+(_?" ":"")+Gp(f)}),gw=Ll(function(d,f,_){return d+(_?" ":"")+f.toUpperCase()}),Gp=bp("toUpperCase");function sy(d,f,_){return d=Pr(d),(f=_?te:f)===te?function(ot){return Il.test(ot)}(d)?function(ot){return ot.match(Cb)||[]}(d):function(ot){return ot.match(zn)||[]}(d):d.match(f)||[]}var oy=or(function(d,f){try{return es(d,te,f)}catch(_){return Ra(_)?_:new xn(_)}}),mw=ol(function(d,f){return zs(f,function(_){_=er(_),nl(d,_,Yh(d[_],d))}),d});function ay(d){return function(){return d}}var Sk=Sc(),$d=Sc(!0);function io(d){return d}function xc(d){return CA("function"==typeof d?d:Gs(d,1))}var ly=or(function(d,f){return function(_){return Ma(_,d,f)}}),_w=or(function(d,f){return function(_){return Ma(d,_,f)}});function uy(d,f,_){var P=Ms(f),ae=Bh(f,P);null==_&&(!bi(f)||!ae.length&&P.length)&&(_=f,f=d,d=this,ae=Bh(f,Ms(f)));var Ae=!(bi(_)&&"chain"in _&&!_.chain),Ge=oa(d);return zs(ae,function(Qe){var lt=f[Qe];d[Qe]=lt,Ge&&(d.prototype[Qe]=function(){var Pt=this.__chain__;if(Ae||Pt){var Nt=d(this.__wrapped__),zt=Nt.__actions__=to(this.__actions__);return zt.push({func:lt,args:arguments,thisArg:d}),Nt.__chain__=Pt,Nt}return lt.apply(d,Bi([this.value()],arguments))})}),d}function cy(){}var yx=wp(Br),vx=wp(Jn),vw=wp(Mo);function Dc(d){return na(d)?km(er(d)):function(d){return function(f){return Qo(f,d)}}(d)}var bx=Zb(),wx=Zb(!0);function Ru(){return[]}function hy(){return!1}var Wn=d_(function(d,f){return d+f},0),fy=Pd("ceil"),Ak=d_(function(d,f){return d/f},1),zl=Pd("floor"),Sw=d_(function(d,f){return d*f},1),Cw=Pd("round"),Aw=d_(function(d,f){return d-f},0);return Ce.after=function(d,f){if("function"!=typeof f)throw new Ca(xe);return d=Qn(d),function(){if(--d<1)return f.apply(this,arguments)}},Ce.ary=Fp,Ce.assign=UT,Ce.assignIn=zT,Ce.assignInWith=Vd,Ce.assignWith=HT,Ce.at=ew,Ce.before=B_,Ce.bind=Yh,Ce.bindAll=mw,Ce.bindKey=jd,Ce.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return In(d)?d:[d]},Ce.chain=O_,Ce.chunk=function(d,f,_){f=(_?qs(d,f,_):f===te)?1:ji(Qn(f),0);var P=null==d?0:d.length;if(!P||f<1)return[];for(var ae=0,Ae=0,Ge=bt(Vt(P/f));ae<P;)Ge[Ae++]=xs(d,ae,ae+=f);return Ge},Ce.compact=function(d){for(var f=-1,_=null==d?0:d.length,P=0,ae=[];++f<_;){var Ae=d[f];Ae&&(ae[P++]=Ae)}return ae},Ce.concat=function(){var d=arguments.length;if(!d)return[];for(var f=bt(d-1),_=arguments[0],P=d;P--;)f[P-1]=arguments[P];return Bi(In(_)?to(_):[_],As(f,1))},Ce.cond=function(d){var f=null==d?0:d.length,_=Nn();return d=f?Br(d,function(P){if("function"!=typeof P[1])throw new Ca(xe);return[_(P[0]),P[1]]}):[],or(function(P){for(var ae=-1;++ae<f;){var Ae=d[ae];if(es(Ae[0],this,P))return es(Ae[1],this,P)}})},Ce.conforms=function(d){return function(d){var f=Ms(d);return function(_){return hp(_,d,f)}}(Gs(d,1))},Ce.constant=ay,Ce.countBy=gT,Ce.create=function(d,f){var _=pc(d);return null==f?_:bA(_,f)},Ce.curry=function B0(d,f,_){var P=Bl(d,8,te,te,te,te,te,f=_?te:f);return P.placeholder=B0.placeholder,P},Ce.curryRight=function j_(d,f,_){var P=Bl(d,16,te,te,te,te,te,f=_?te:f);return P.placeholder=j_.placeholder,P},Ce.debounce=j0,Ce.defaults=$T,Ce.defaultsDeep=Qh,Ce.defer=AT,Ce.delay=V0,Ce.difference=WA,Ce.differenceBy=qA,Ce.differenceWith=YA,Ce.drop=function(d,f,_){var P=null==d?0:d.length;return P?xs(d,(f=_||f===te?1:Qn(f))<0?0:f,P):[]},Ce.dropRight=function(d,f,_){var P=null==d?0:d.length;return P?xs(d,0,(f=P-(f=_||f===te?1:Qn(f)))<0?0:f):[]},Ce.dropRightWhile=function(d,f){return d&&d.length?vc(d,Nn(f,3),!0,!0):[]},Ce.dropWhile=function(d,f){return d&&d.length?vc(d,Nn(f,3),!0):[]},Ce.fill=function(d,f,_,P){var ae=null==d?0:d.length;return ae?(_&&"number"!=typeof _&&qs(d,f,_)&&(_=0,P=ae),function(d,f,_,P){var ae=d.length;for((_=Qn(_))<0&&(_=-_>ae?0:ae+_),(P=P===te||P>ae?ae:Qn(P))<0&&(P+=ae),P=_>P?0:q_(P);_<P;)d[_++]=f;return d}(d,f,_,P)):[]},Ce.filter=function(d,f){return(In(d)?Ea:Ub)(d,Nn(f,3))},Ce.flatMap=function(d,f){return As(ll(d,f),1)},Ce.flatMapDeep=function(d,f){return As(ll(d,f),$)},Ce.flatMapDepth=function(d,f,_){return _=_===te?1:Qn(_),As(ll(d,f),_)},Ce.flatten=Ds,Ce.flattenDeep=function(d){return null!=d&&d.length?As(d,$):[]},Ce.flattenDepth=function(d,f){return null!=d&&d.length?As(d,f=f===te?1:Qn(f)):[]},Ce.flip=function(d){return Bl(d,512)},Ce.flow=Sk,Ce.flowRight=$d,Ce.fromPairs=function(d){for(var f=-1,_=null==d?0:d.length,P={};++f<_;){var ae=d[f];P[ae[0]]=ae[1]}return P},Ce.functions=function(d){return null==d?[]:Bh(d,Ms(d))},Ce.functionsIn=function(d){return null==d?[]:Bh(d,ro(d))},Ce.groupBy=wT,Ce.initial=function(d){return null!=d&&d.length?xs(d,0,-1):[]},Ce.intersection=g0,Ce.intersectionBy=QA,Ce.intersectionWith=m0,Ce.invert=zp,Ce.invertBy=qT,Ce.invokeMap=M0,Ce.iteratee=xc,Ce.keyBy=I0,Ce.keys=Ms,Ce.keysIn=ro,Ce.map=ll,Ce.mapKeys=function(d,f){var _={};return f=Nn(f,3),rl(d,function(P,ae,Ae){nl(_,f(P,ae,Ae),P)}),_},Ce.mapValues=function(d,f){var _={};return f=Nn(f,3),rl(d,function(P,ae,Ae){nl(_,ae,f(P,ae,Ae))}),_},Ce.matches=function(d){return TA(Gs(d,1))},Ce.matchesProperty=function(d,f){return Dd(d,Gs(f,1))},Ce.memoize=Kh,Ce.merge=sw,Ce.mergeWith=ow,Ce.method=ly,Ce.methodOf=_w,Ce.mixin=uy,Ce.negate=U_,Ce.nthArg=function(d){return d=Qn(d),or(function(f){return _c(f,d)})},Ce.omit=XT,Ce.omitBy=function(d,f){return aw(d,U_(Nn(f)))},Ce.once=function(d){return B_(2,d)},Ce.orderBy=function(d,f,_,P){return null==d?[]:(In(f)||(f=null==f?[]:[f]),In(_=P?te:_)||(_=null==_?[]:[_]),jh(d,f,_))},Ce.over=yx,Ce.overArgs=TT,Ce.overEvery=vx,Ce.overSome=vw,Ce.partial=Lp,Ce.partialRight=z0,Ce.partition=R0,Ce.pick=QT,Ce.pickBy=aw,Ce.property=Dc,Ce.propertyOf=function(d){return function(f){return null==d?te:Qo(d,f)}},Ce.pull=T_,Ce.pullAll=x_,Ce.pullAllBy=function(d,f,_){return d&&d.length&&f&&f.length?ea(d,f,Nn(_,2)):d},Ce.pullAllWith=function(d,f,_){return d&&d.length&&f&&f.length?ea(d,f,te,_):d},Ce.pullAt=y0,Ce.range=bx,Ce.rangeRight=wx,Ce.rearg=xT,Ce.reject=function(d,f){return(In(d)?Ea:Ub)(d,U_(Nn(f,3)))},Ce.remove=function(d,f){var _=[];if(!d||!d.length)return _;var P=-1,ae=[],Ae=d.length;for(f=Nn(f,3);++P<Ae;){var Ge=d[P];f(Ge,P,d)&&(_.push(Ge),ae.push(P))}return Vh(d,ae),_},Ce.rest=function(d,f){if("function"!=typeof d)throw new Ca(xe);return or(d,f=f===te?f:Qn(f))},Ce.reverse=D_,Ce.sampleSize=function(d,f,_){return f=(_?qs(d,f,_):f===te)?1:Qn(f),(In(d)?Lb:ek)(d,f)},Ce.set=function(d,f,_){return null==d?d:mp(d,f,_)},Ce.setWith=function(d,f,_,P){return P="function"==typeof P?P:te,null==d?d:mp(d,f,_,P)},Ce.shuffle=function(d){return(In(d)?wd:a_)(d)},Ce.slice=function(d,f,_){var P=null==d?0:d.length;return P?(_&&"number"!=typeof _&&qs(d,f,_)?(f=0,_=P):(f=null==f?0:Qn(f),_=_===te?P:Qn(_)),xs(d,f,_)):[]},Ce.sortBy=kp,Ce.sortedUniq=function(d){return d&&d.length?$b(d):[]},Ce.sortedUniqBy=function(d,f){return d&&d.length?$b(d,Nn(f,2)):[]},Ce.split=function(d,f,_){return _&&"number"!=typeof _&&qs(d,f,_)&&(f=_=te),(_=_===te?ge:_>>>0)?(d=Pr(d))&&("string"==typeof f||null!=f&&!Q0(f))&&!(f=Po(f))&&Sh(d)?il(Za(d),0,_):d.split(f,_):[]},Ce.spread=function(d,f){if("function"!=typeof d)throw new Ca(xe);return f=null==f?0:ji(Qn(f),0),or(function(_){var P=_[f],ae=il(_,0,f);return P&&Bi(ae,P),es(d,this,ae)})},Ce.tail=function(d){var f=null==d?0:d.length;return f?xs(d,1,f):[]},Ce.take=function(d,f,_){return d&&d.length?xs(d,0,(f=_||f===te?1:Qn(f))<0?0:f):[]},Ce.takeRight=function(d,f,_){var P=null==d?0:d.length;return P?xs(d,(f=P-(f=_||f===te?1:Qn(f)))<0?0:f,P):[]},Ce.takeRightWhile=function(d,f){return d&&d.length?vc(d,Nn(f,3),!1,!0):[]},Ce.takeWhile=function(d,f){return d&&d.length?vc(d,Nn(f,3)):[]},Ce.tap=function(d,f){return f(d),d},Ce.throttle=function(d,f,_){var P=!0,ae=!0;if("function"!=typeof d)throw new Ca(xe);return bi(_)&&(P="leading"in _?!!_.leading:P,ae="trailing"in _?!!_.trailing:ae),j0(d,f,{leading:P,maxWait:f,trailing:ae})},Ce.thru=Ld,Ce.toArray=Z0,Ce.toPairs=ZT,Ce.toPairsIn=uw,Ce.toPath=function(d){return In(d)?Br(d,er):aa(d)?[d]:to(d0(Pr(d)))},Ce.toPlainObject=J0,Ce.transform=function(d,f,_){var P=In(d),ae=P||cl(d)||Xh(d);if(f=Nn(f,4),null==_){var Ae=d&&d.constructor;_=ae?P?new Ae:[]:bi(d)&&oa(Ae)?pc(Aa(d)):{}}return(ae?zs:rl)(d,function(Ge,Qe,lt){return f(_,Ge,Qe,lt)}),_},Ce.unary=function(d){return Fp(d,1)},Ce.union=w0,Ce.unionBy=uT,Ce.unionWith=cT,Ce.uniq=function(d){return d&&d.length?Cu(d):[]},Ce.uniqBy=function(d,f){return d&&d.length?Cu(d,Nn(f,2)):[]},Ce.uniqWith=function(d,f){return f="function"==typeof f?f:te,d&&d.length?Cu(d,te,f):[]},Ce.unset=function(d,f){return null==d||yc(d,f)},Ce.unzip=E0,Ce.unzipWith=hT,Ce.update=function(d,f,_){return null==d?d:_p(d,f,u_(_))},Ce.updateWith=function(d,f,_,P){return P="function"==typeof P?P:te,null==d?d:_p(d,f,u_(_),P)},Ce.values=Gd,Ce.valuesIn=function(d){return null==d?[]:Lm(d,ro(d))},Ce.without=S0,Ce.words=sy,Ce.wrap=function(d,f){return Lp(u_(f),d)},Ce.xor=ck,Ce.xorBy=ko,Ce.xorWith=M_,Ce.zip=I_,Ce.zipObject=function(d,f){return yp(d||[],f||[],tl)},Ce.zipObjectDeep=function(d,f){return yp(d||[],f||[],mp)},Ce.zipWith=qh,Ce.entries=ZT,Ce.entriesIn=uw,Ce.extend=zT,Ce.extendWith=Vd,uy(Ce,Ce),Ce.add=Wn,Ce.attempt=oy,Ce.camelCase=rx,Ce.capitalize=Q_,Ce.ceil=fy,Ce.clamp=function(d,f,_){return _===te&&(_=f,f=te),_!==te&&(_=(_=yo(_))==_?_:0),f!==te&&(f=(f=yo(f))==f?f:0),gc(yo(d),f,_)},Ce.clone=function(d){return Gs(d,4)},Ce.cloneDeep=function(d){return Gs(d,5)},Ce.cloneDeepWith=function(d,f){return Gs(d,5,f="function"==typeof f?f:te)},Ce.cloneWith=function(d,f){return Gs(d,4,f="function"==typeof f?f:te)},Ce.conformsTo=function(d,f){return null==f||hp(d,f,Ms(f))},Ce.deburr=Z_,Ce.defaultTo=function(d,f){return null==d||d!=d?f:d},Ce.divide=Ak,Ce.endsWith=function(d,f,_){d=Pr(d),f=Po(f);var P=d.length,ae=_=_===te?P:gc(Qn(_),0,P);return(_-=f.length)>=0&&d.slice(_,ae)==f},Ce.eq=Dn,Ce.escape=function(d){return(d=Pr(d))&&Jt.test(d)?d.replace(ya,LN):d},Ce.escapeRegExp=function(d){return(d=Pr(d))&&ct.test(d)?d.replace(Be,"\\$&"):d},Ce.every=function(d,f,_){var P=In(d)?Jn:jb;return _&&qs(d,f,_)&&(f=te),P(d,Nn(f,3))},Ce.find=yT,Ce.findIndex=S_,Ce.findKey=function(d,f){return wh(d,Nn(f,3),rl)},Ce.findLast=vT,Ce.findLastIndex=C_,Ce.findLastKey=function(d,f){return wh(d,Nn(f,3),fp)},Ce.floor=zl,Ce.forEach=F_,Ce.forEachRight=Pp,Ce.forIn=function(d,f){return null==d?d:Sd(d,Nn(f,3),ro)},Ce.forInRight=function(d,f){return null==d?d:Cd(d,Nn(f,3),ro)},Ce.forOwn=function(d,f){return d&&rl(d,Nn(f,3))},Ce.forOwnRight=function(d,f){return d&&fp(d,Nn(f,3))},Ce.get=Jh,Ce.gt=Zt,Ce.gte=$0,Ce.has=function(d,f){return null!=d&&o0(d,f,Ad)},Ce.hasIn=Up,Ce.head=f0,Ce.identity=io,Ce.includes=function(d,f,_,P){d=_o(d)?d:Gd(d),_=_&&!P?Qn(_):0;var ae=d.length;return _<0&&(_=ji(ae+_,0)),$_(d)?_<=ae&&d.indexOf(f,_)>-1:!!ae&&Qa(d,f,_)>-1},Ce.indexOf=function(d,f,_){var P=null==d?0:d.length;if(!P)return-1;var ae=null==_?0:Qn(_);return ae<0&&(ae=ji(P+ae,0)),Qa(d,f,ae)},Ce.inRange=function(d,f,_){return f=dl(f),_===te?(_=f,f=0):_=dl(_),function(d,f,_){return d>=hs(f,_)&&d<ji(f,_)}(d=yo(d),f,_)},Ce.invoke=rw,Ce.isArguments=ul,Ce.isArray=In,Ce.isArrayBuffer=W0,Ce.isArrayLike=_o,Ce.isArrayLikeObject=vi,Ce.isBoolean=function(d){return!0===d||!1===d||wi(d)&&Ts(d)==Ve},Ce.isBuffer=cl,Ce.isDate=q0,Ce.isElement=function(d){return wi(d)&&1===d.nodeType&&!Vp(d)},Ce.isEmpty=function(d){if(null==d)return!0;if(_o(d)&&(In(d)||"string"==typeof d||"function"==typeof d.splice||cl(d)||Xh(d)||ul(d)))return!d.length;var f=Ws(d);if(f==ze||f==pt)return!d.size;if(Dp(d))return!zb(d).length;for(var _ in d)if(Ur.call(d,_))return!1;return!0},Ce.isEqual=function(d,f){return pp(d,f)},Ce.isEqualWith=function(d,f,_){var P=(_="function"==typeof _?_:te)?_(d,f):te;return P===te?pp(d,f,te,_):!!P},Ce.isError=Ra,Ce.isFinite=function(d){return"number"==typeof d&&Gm(d)},Ce.isFunction=oa,Ce.isInteger=jp,Ce.isLength=H_,Ce.isMap=FT,Ce.isMatch=function(d,f){return d===f||r_(d,f,ta(f))},Ce.isMatchWith=function(d,f,_){return _="function"==typeof _?_:te,r_(d,f,ta(f),_)},Ce.isNaN=function(d){return jT(d)&&d!=+d},Ce.isNative=function(d){if(u0(d))throw new xn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return i_(d)},Ce.isNil=function(d){return null==d},Ce.isNull=function(d){return null===d},Ce.isNumber=jT,Ce.isObject=bi,Ce.isObjectLike=wi,Ce.isPlainObject=Vp,Ce.isRegExp=Q0,Ce.isSafeInteger=function(d){return jp(d)&&d>=-pe&&d<=pe},Ce.isSet=VT,Ce.isString=$_,Ce.isSymbol=aa,Ce.isTypedArray=Xh,Ce.isUndefined=function(d){return d===te},Ce.isWeakMap=function(d){return wi(d)&&Ws(d)==L},Ce.isWeakSet=function(d){return wi(d)&&"[object WeakSet]"==Ts(d)},Ce.join=function(d,f){return null==d?"":Dh.call(d,f)},Ce.kebabCase=sx,Ce.last=ra,Ce.lastIndexOf=function(d,f,_){var P=null==d?0:d.length;if(!P)return-1;var ae=P;return _!==te&&(ae=(ae=Qn(_))<0?ji(P+ae,0):hs(ae,P-1)),f==f?function(ot,Mt,bt){for(var ln=bt+1;ln--;)if(ot[ln]===Mt)return ln;return ln}(d,f,ae):pd(d,yu,ae,!0)},Ce.lowerCase=ox,Ce.lowerFirst=wk,Ce.lt=Iu,Ce.lte=W_,Ce.max=function(d){return d&&d.length?Lh(d,io,Zo):te},Ce.maxBy=function(d,f){return d&&d.length?Lh(d,Nn(f,2),Zo):te},Ce.mean=function(d){return Ss(d,io)},Ce.meanBy=function(d,f){return Ss(d,Nn(f,2))},Ce.min=function(d){return d&&d.length?Lh(d,io,Hb):te},Ce.minBy=function(d,f){return d&&d.length?Lh(d,Nn(f,2),Hb):te},Ce.stubArray=Ru,Ce.stubFalse=hy,Ce.stubObject=function(){return{}},Ce.stubString=function(){return""},Ce.stubTrue=function(){return!0},Ce.multiply=Sw,Ce.nth=function(d,f){return d&&d.length?_c(d,Qn(f)):te},Ce.noConflict=function(){return Rr._===this&&(Rr._=zm),this},Ce.noop=cy,Ce.now=Tc,Ce.pad=function(d,f,_){d=Pr(d);var P=(f=Qn(f))?Ch(d):0;if(!f||P>=f)return d;var ae=(f-P)/2;return Ep(fr(ae),_)+d+Ep(Vt(ae),_)},Ce.padEnd=function(d,f,_){d=Pr(d);var P=(f=Qn(f))?Ch(d):0;return f&&P<f?d+Ep(f-P,_):d},Ce.padStart=function(d,f,_){d=Pr(d);var P=(f=Qn(f))?Ch(d):0;return f&&P<f?Ep(f-P,_)+d:d},Ce.parseInt=function(d,f,_){return _||null==f?f=0:f&&(f=+f),aA(Pr(d).replace(tt,""),f||0)},Ce.random=function(d,f,_){if(_&&"boolean"!=typeof _&&qs(d,f,_)&&(f=_=te),_===te&&("boolean"==typeof f?(_=f,f=te):"boolean"==typeof d&&(_=d,d=te)),d===te&&f===te?(d=0,f=1):(d=dl(d),f===te?(f=d,d=0):f=dl(f)),d>f){var P=d;d=f,f=P}if(_||d%1||f%1){var ae=Mh();return hs(d+ae*(f-d+KC("1e-"+((ae+"").length-1))),f)}return kl(d,f)},Ce.reduce=function(d,f,_){var P=In(d)?cc:Yo,ae=arguments.length<3;return P(d,Nn(f,4),_,ae,Eu)},Ce.reduceRight=function(d,f,_){var P=In(d)?fd:Yo,ae=arguments.length<3;return P(d,Nn(f,4),_,ae,t_)},Ce.repeat=function(d,f,_){return f=(_?qs(d,f,_):f===te)?1:Qn(f),gp(Pr(d),f)},Ce.replace=function(){var d=arguments,f=Pr(d[0]);return d.length<3?f:f.replace(d[1],d[2])},Ce.result=function(d,f,_){var P=-1,ae=(f=Tu(f,d)).length;for(ae||(ae=1,d=te);++P<ae;){var Ae=null==d?te:d[er(f[P])];Ae===te&&(P=ae,Ae=_),d=oa(Ae)?Ae.call(d):Ae}return d},Ce.round=Cw,Ce.runInContext=ot,Ce.sample=function(d){return(In(d)?Qm:xA)(d)},Ce.size=function(d){if(null==d)return 0;if(_o(d))return $_(d)?Ch(d):d.length;var f=Ws(d);return f==ze||f==pt?d.size:zb(d).length},Ce.snakeCase=dx,Ce.some=function(d,f,_){var P=In(d)?Mo:tk;return _&&qs(d,f,_)&&(f=te),P(d,Nn(f,3))},Ce.sortedIndex=function(d,f){return Uh(d,f)},Ce.sortedIndexBy=function(d,f,_){return l_(d,f,Nn(_,2))},Ce.sortedIndexOf=function(d,f){var _=null==d?0:d.length;if(_){var P=Uh(d,f);if(P<_&&Dn(d[P],f))return P}return-1},Ce.sortedLastIndex=function(d,f){return Uh(d,f,!0)},Ce.sortedLastIndexBy=function(d,f,_){return l_(d,f,Nn(_,2),!0)},Ce.sortedLastIndexOf=function(d,f){if(null!=d&&d.length){var P=Uh(d,f,!0)-1;if(Dn(d[P],f))return P}return-1},Ce.startCase=ty,Ce.startsWith=function(d,f,_){return d=Pr(d),_=null==_?0:gc(Qn(_),0,d.length),f=Po(f),d.slice(_,_+f.length)==f},Ce.subtract=Aw,Ce.sum=function(d){return d&&d.length?gd(d,io):0},Ce.sumBy=function(d,f){return d&&d.length?gd(d,Nn(f,2)):0},Ce.template=function(d,f,_){var P=Ce.templateSettings;_&&qs(d,f,_)&&(f=te),d=Pr(d),f=Vd({},f,P,e0);var Qe,lt,ae=Vd({},f.imports,P.imports,e0),Ae=Ms(ae),Ge=Lm(ae,Ae),Pt=0,Nt=f.interpolate||$i,zt="__p += '",en=Vm((f.escape||$i).source+"|"+Nt.source+"|"+(Nt===at?pn:$i).source+"|"+(f.evaluate||$i).source+"|$","g"),wn="//# sourceURL="+(Ur.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++YC+"]")+"\n";d.replace(en,function(jn,lr,wr,vo,Ys,la){return wr||(wr=vo),zt+=d.slice(Pt,la).replace(ie,BN),lr&&(Qe=!0,zt+="' +\n__e("+lr+") +\n'"),Ys&&(lt=!0,zt+="';\n"+Ys+";\n__p += '"),wr&&(zt+="' +\n((__t = ("+wr+")) == null ? '' : __t) +\n'"),Pt=la+jn.length,jn}),zt+="';\n";var Fn=Ur.call(f,"variable")&&f.variable;if(Fn){if(nr.test(Fn))throw new xn("Invalid `variable` option passed into `_.template`")}else zt="with (obj) {\n"+zt+"\n}\n";zt=(lt?zt.replace(js,""):zt).replace(Gi,"$1").replace(Ka,"$1;"),zt="function("+(Fn||"obj")+") {\n"+(Fn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Qe?", __e = _.escape":"")+(lt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+zt+"return __p\n}";var ar=oy(function(){return Dr(Ae,wn+"return "+zt).apply(te,Ge)});if(ar.source=zt,Ra(ar))throw ar;return ar},Ce.times=function(d,f){if((d=Qn(d))<1||d>pe)return[];var _=ge,P=hs(d,ge);f=Nn(f),d-=ge;for(var ae=md(P,f);++_<d;)f(_);return ae},Ce.toFinite=dl,Ce.toInteger=Qn,Ce.toLength=q_,Ce.toLower=function(d){return Pr(d).toLowerCase()},Ce.toNumber=yo,Ce.toSafeInteger=function(d){return d?gc(Qn(d),-pe,pe):0===d?d:0},Ce.toString=Pr,Ce.toUpper=function(d){return Pr(d).toUpperCase()},Ce.trim=function(d,f,_){if((d=Pr(d))&&(_||f===te))return Mb(d);if(!d||!(f=Po(f)))return d;var P=Za(d),ae=Za(f);return il(P,ZC(P,ae),JC(P,ae)+1).join("")},Ce.trimEnd=function(d,f,_){if((d=Pr(d))&&(_||f===te))return d.slice(0,vu(d)+1);if(!d||!(f=Po(f)))return d;var P=Za(d);return il(P,0,JC(P,Za(f))+1).join("")},Ce.trimStart=function(d,f,_){if((d=Pr(d))&&(_||f===te))return d.replace(tt,"");if(!d||!(f=Po(f)))return d;var P=Za(d);return il(P,ZC(P,Za(f))).join("")},Ce.truncate=function(d,f){var _=30,P="...";if(bi(f)){var ae="separator"in f?f.separator:ae;_="length"in f?Qn(f.length):_,P="omission"in f?Po(f.omission):P}var Ae=(d=Pr(d)).length;if(Sh(d)){var Ge=Za(d);Ae=Ge.length}if(_>=Ae)return d;var Qe=_-Ch(P);if(Qe<1)return P;var lt=Ge?il(Ge,0,Qe).join(""):d.slice(0,Qe);if(ae===te)return lt+P;if(Ge&&(Qe+=lt.length-Qe),Q0(ae)){if(d.slice(Qe).search(ae)){var Pt,Nt=lt;for(ae.global||(ae=Vm(ae.source,Pr(Gn.exec(ae))+"g")),ae.lastIndex=0;Pt=ae.exec(Nt);)var zt=Pt.index;lt=lt.slice(0,zt===te?Qe:zt)}}else if(d.indexOf(Po(ae),Qe)!=Qe){var en=lt.lastIndexOf(ae);en>-1&&(lt=lt.slice(0,en))}return lt+P},Ce.unescape=function(d){return(d=Pr(d))&&bs.test(d)?d.replace(xl,ep):d},Ce.uniqueId=function(d){var f=++GN;return Pr(d)+f},Ce.upperCase=gw,Ce.upperFirst=Gp,Ce.each=F_,Ce.eachRight=Pp,Ce.first=f0,uy(Ce,function(){var d={};return rl(Ce,function(f,_){Ur.call(Ce.prototype,_)||(d[_]=f)}),d}(),{chain:!1}),Ce.VERSION="4.17.21",zs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Ce[d].placeholder=Ce}),zs(["drop","take"],function(d,f){sr.prototype[d]=function(_){_=_===te?1:ji(Qn(_),0);var P=this.__filtered__&&!f?new sr(this):this.clone();return P.__filtered__?P.__takeCount__=hs(_,P.__takeCount__):P.__views__.push({size:hs(_,ge),type:d+(P.__dir__<0?"Right":"")}),P},sr.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),zs(["filter","map","takeWhile"],function(d,f){var _=f+1,P=1==_||3==_;sr.prototype[d]=function(ae){var Ae=this.clone();return Ae.__iteratees__.push({iteratee:Nn(ae,3),type:_}),Ae.__filtered__=Ae.__filtered__||P,Ae}}),zs(["head","last"],function(d,f){var _="take"+(f?"Right":"");sr.prototype[d]=function(){return this[_](1).value()[0]}}),zs(["initial","tail"],function(d,f){var _="drop"+(f?"":"Right");sr.prototype[d]=function(){return this.__filtered__?new sr(this):this[_](1)}}),sr.prototype.compact=function(){return this.filter(io)},sr.prototype.find=function(d){return this.filter(d).head()},sr.prototype.findLast=function(d){return this.reverse().find(d)},sr.prototype.invokeMap=or(function(d,f){return"function"==typeof d?new sr(this):this.map(function(_){return Ma(_,d,f)})}),sr.prototype.reject=function(d){return this.filter(U_(Nn(d)))},sr.prototype.slice=function(d,f){d=Qn(d);var _=this;return _.__filtered__&&(d>0||f<0)?new sr(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),f!==te&&(_=(f=Qn(f))<0?_.dropRight(-f):_.take(f-d)),_)},sr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},sr.prototype.toArray=function(){return this.take(ge)},rl(sr.prototype,function(d,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),P=/^(?:head|last)$/.test(f),ae=Ce[P?"take"+("last"==f?"Right":""):f],Ae=P||/^find/.test(f);!ae||(Ce.prototype[f]=function(){var Ge=this.__wrapped__,Qe=P?[1]:arguments,lt=Ge instanceof sr,Pt=Qe[0],Nt=lt||In(Ge),zt=function(lr){var wr=ae.apply(Ce,Bi([lr],Qe));return P&&en?wr[0]:wr};Nt&&_&&"function"==typeof Pt&&1!=Pt.length&&(lt=Nt=!1);var en=this.__chain__,wn=!!this.__actions__.length,Fn=Ae&&!en,ar=lt&&!wn;if(!Ae&&Nt){Ge=ar?Ge:new sr(this);var jn=d.apply(Ge,Qe);return jn.__actions__.push({func:Ld,args:[zt],thisArg:te}),new Oo(jn,en)}return Fn&&ar?d.apply(this,Qe):(jn=this.thru(zt),Fn?P?jn.value()[0]:jn.value():jn)})}),zs(["pop","push","shift","sort","splice","unshift"],function(d){var f=si[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",P=/^(?:pop|shift)$/.test(d);Ce.prototype[d]=function(){var ae=arguments;if(P&&!this.__chain__){var Ae=this.value();return f.apply(In(Ae)?Ae:[],ae)}return this[_](function(Ge){return f.apply(In(Ge)?Ge:[],ae)})}}),rl(sr.prototype,function(d,f){var _=Ce[f];if(_){var P=_.name+"";Ur.call(vd,P)||(vd[P]=[]),vd[P].push({name:f,func:_})}}),vd[Du(te,2).name]=[{name:"wrapper",func:te}],sr.prototype.clone=function(){var d=new sr(this.__wrapped__);return d.__actions__=to(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=to(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=to(this.__views__),d},sr.prototype.reverse=function(){if(this.__filtered__){var d=new sr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},sr.prototype.value=function(){var d=this.__wrapped__.value(),f=this.__dir__,_=In(d),P=f<0,ae=_?d.length:0,Ae=function(d,f,_){for(var P=-1,ae=_.length;++P<ae;){var Ae=_[P],Ge=Ae.size;switch(Ae.type){case"drop":d+=Ge;break;case"dropRight":f-=Ge;break;case"take":f=hs(f,d+Ge);break;case"takeRight":d=ji(d,f-Ge)}}return{start:d,end:f}}(0,ae,this.__views__),Ge=Ae.start,Qe=Ae.end,lt=Qe-Ge,Pt=P?Qe:Ge-1,Nt=this.__iteratees__,zt=Nt.length,en=0,wn=hs(lt,this.__takeCount__);if(!_||!P&&ae==lt&&wn==lt)return DA(d,this.__actions__);var Fn=[];e:for(;lt--&&en<wn;){for(var ar=-1,jn=d[Pt+=f];++ar<zt;){var lr=Nt[ar],vo=lr.type,Ys=(0,lr.iteratee)(jn);if(2==vo)jn=Ys;else if(!Ys){if(1==vo)continue e;break e}}Fn[en++]=jn}return Fn},Ce.prototype.at=R_,Ce.prototype.chain=function(){return O_(this)},Ce.prototype.commit=function(){return new Oo(this.value(),this.__chain__)},Ce.prototype.next=function(){this.__values__===te&&(this.__values__=Z0(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?te:this.__values__[this.__index__++]}},Ce.prototype.plant=function(d){for(var f,_=this;_ instanceof Ph;){var P=Ip(_);P.__index__=0,P.__values__=te,f?ae.__wrapped__=P:f=P;var ae=P;_=_.__wrapped__}return ae.__wrapped__=d,f},Ce.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof sr){var f=d;return this.__actions__.length&&(f=new sr(this)),(f=f.reverse()).__actions__.push({func:Ld,args:[D_],thisArg:te}),new Oo(f,this.__chain__)}return this.thru(D_)},Ce.prototype.toJSON=Ce.prototype.valueOf=Ce.prototype.value=function(){return DA(this.__wrapped__,this.__actions__)},Ce.prototype.first=Ce.prototype.head,xh&&(Ce.prototype[xh]=function(){return this}),Ce}();Rr._=Ah,(gt=function(){return Ah}.call(rt,Ke,rt,jt))!==te&&(jt.exports=gt)}.call(this)},5478:function(jt){jt.exports=function(){"use strict";function rt(it,at){for(var ht=0;ht<at.length;ht++){var _e=at[ht];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(it,_e.key,_e)}}function te(it,at){(null==at||at>it.length)&&(at=it.length);for(var ht=0,_e=new Array(at);ht<at;ht++)_e[ht]=it[ht];return _e}function Et(it,at){var ht="undefined"!=typeof Symbol&&it[Symbol.iterator]||it["@@iterator"];if(ht)return(ht=ht.call(it)).next.bind(ht);if(Array.isArray(it)||(ht=function(it,at){if(it){if("string"==typeof it)return te(it,at);var ht=Object.prototype.toString.call(it).slice(8,-1);if("Object"===ht&&it.constructor&&(ht=it.constructor.name),"Map"===ht||"Set"===ht)return Array.from(it);if("Arguments"===ht||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return te(it,at)}}(it))||at&&it&&"number"==typeof it.length){ht&&(it=ht);var _e=0;return function(){return _e>=it.length?{done:!0}:{done:!1,value:it[_e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var dt={exports:{}};function Q(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}dt.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Q,changeDefaults:function(it){dt.exports.defaults=it}};var me=/[&<>"']/,Y=/[&<>"']/g,z=/[<>"']|&(?!#?\w+;)/,F=/[<>"']|&(?!#?\w+;)/g,se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},K=function(at){return se[at]};var A=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function O(it){return it.replace(A,function(at,ht){return"colon"===(ht=ht.toLowerCase())?":":"#"===ht.charAt(0)?"x"===ht.charAt(1)?String.fromCharCode(parseInt(ht.substring(2),16)):String.fromCharCode(+ht.substring(1)):""})}var T=/(^|[^\[])\^/g;var y=/[^\w:]/g,S=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var B={},I=/^[^:]+:\/*[^/]*$/,q=/^([^:]+:)[\s\S]*$/,Z=/^([^:]+:\/*[^/]*)[\s\S]*$/;function M(it,at){B[" "+it]||(B[" "+it]=I.test(it)?it+"/":U(it,"/",!0));var ht=-1===(it=B[" "+it]).indexOf(":");return"//"===at.substring(0,2)?ht?at:it.replace(q,"$1")+at:"/"===at.charAt(0)?ht?at:it.replace(Z,"$1")+at:it+at}function U(it,at,ht){var _e=it.length;if(0===_e)return"";for(var be=0;be<_e;){var Be=it.charAt(_e-be-1);if(Be!==at||ht){if(Be===at||!ht)break;be++}else be++}return it.substr(0,_e-be)}var $_escape=function(it,at){if(at){if(me.test(it))return it.replace(Y,K)}else if(z.test(it))return it.replace(F,K);return it},$_unescape=O,$_edit=function(it,at){it=it.source||it,at=at||"";var ht={replace:function(be,Be){return Be=(Be=Be.source||Be).replace(T,"$1"),it=it.replace(be,Be),ht},getRegex:function(){return new RegExp(it,at)}};return ht},$_cleanUrl=function(it,at,ht){if(it){var _e;try{_e=decodeURIComponent(O(ht)).replace(y,"").toLowerCase()}catch(be){return null}if(0===_e.indexOf("javascript:")||0===_e.indexOf("vbscript:")||0===_e.indexOf("data:"))return null}at&&!S.test(ht)&&(ht=M(at,ht));try{ht=encodeURI(ht).replace(/%25/g,"%")}catch(be){return null}return ht},$_noopTest={exec:function(){}},$_merge=function(it){for(var ht,_e,at=1;at<arguments.length;at++)for(_e in ht=arguments[at])Object.prototype.hasOwnProperty.call(ht,_e)&&(it[_e]=ht[_e]);return it},$_checkSanitizeDeprecation=function(it){it&&it.sanitize&&!it.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},$_repeatString=function(it,at){if(at<1)return"";for(var ht="";at>1;)1&at&&(ht+=it),at>>=1,it+=it;return ht+it},pe=dt.exports.defaults,ue=U,X=function(it,at){var _e=it.replace(/\|/g,function(Be,ct,tt){for(var St=!1,xt=ct;--xt>=0&&"\\"===tt[xt];)St=!St;return St?"|":" |"}).split(/ \|/),be=0;if(_e.length>at)_e.splice(at);else for(;_e.length<at;)_e.push("");for(;be<_e.length;be++)_e[be]=_e[be].trim().replace(/\\\|/g,"|");return _e},ge=$_escape,De=function(it,at){if(-1===it.indexOf(at[1]))return-1;for(var ht=it.length,_e=0,be=0;be<ht;be++)if("\\"===it[be])be++;else if(it[be]===at[0])_e++;else if(it[be]===at[1]&&--_e<0)return be;return-1};function je(it,at,ht){var _e=at.href,be=at.title?ge(at.title):null,Be=it[1].replace(/\\([\[\]])/g,"$1");return"!"!==it[0].charAt(0)?{type:"link",raw:ht,href:_e,title:be,text:Be}:{type:"image",raw:ht,href:_e,title:be,text:ge(Be)}}var We=function(){function it(ht){this.options=ht||pe}var at=it.prototype;return at.space=function(_e){var be=this.rules.block.newline.exec(_e);if(be)return be[0].length>1?{type:"space",raw:be[0]}:{raw:"\n"}},at.code=function(_e){var be=this.rules.block.code.exec(_e);if(be){var Be=be[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:be[0],codeBlockStyle:"indented",text:this.options.pedantic?Be:ue(Be,"\n")}}},at.fences=function(_e){var be=this.rules.block.fences.exec(_e);if(be){var Be=be[0],ct=function(it,at){var ht=it.match(/^(\s+)(?:```)/);if(null===ht)return at;var _e=ht[1];return at.split("\n").map(function(be){var Be=be.match(/^\s+/);return null===Be?be:Be[0].length>=_e.length?be.slice(_e.length):be}).join("\n")}(Be,be[3]||"");return{type:"code",raw:Be,lang:be[2]?be[2].trim():be[2],text:ct}}},at.heading=function(_e){var be=this.rules.block.heading.exec(_e);if(be){var Be=be[2].trim();if(/#$/.test(Be)){var ct=ue(Be,"#");(this.options.pedantic||!ct||/ $/.test(ct))&&(Be=ct.trim())}return{type:"heading",raw:be[0],depth:be[1].length,text:Be}}},at.nptable=function(_e){var be=this.rules.block.nptable.exec(_e);if(be){var Be={type:"table",header:X(be[1].replace(/^ *| *\| *$/g,"")),align:be[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:be[3]?be[3].replace(/\n$/,"").split("\n"):[],raw:be[0]};if(Be.header.length===Be.align.length){var tt,ct=Be.align.length;for(tt=0;tt<ct;tt++)Be.align[tt]=/^ *-+: *$/.test(Be.align[tt])?"right":/^ *:-+: *$/.test(Be.align[tt])?"center":/^ *:-+ *$/.test(Be.align[tt])?"left":null;for(ct=Be.cells.length,tt=0;tt<ct;tt++)Be.cells[tt]=X(Be.cells[tt],Be.header.length);return Be}}},at.hr=function(_e){var be=this.rules.block.hr.exec(_e);if(be)return{type:"hr",raw:be[0]}},at.blockquote=function(_e){var be=this.rules.block.blockquote.exec(_e);if(be){var Be=be[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:be[0],text:Be}}},at.list=function(_e){var be=this.rules.block.list.exec(_e);if(be){var Qt,zn,nr,On,pn,Gn,An,Jr,ei,Be=be[0],ct=be[2],tt=ct.length>1,St={type:"list",raw:Be,ordered:tt,start:tt?+ct.slice(0,-1):"",loose:!1,items:[]},xt=be[0].match(this.rules.block.item),Dt=!1,qn=xt.length;nr=this.rules.block.listItemStart.exec(xt[0]);for(var Lr=0;Lr<qn;Lr++){if(Be=Qt=xt[Lr],this.options.pedantic||(ei=Qt.match(new RegExp("\\n\\s*\\n {0,"+(nr[0].length-1)+"}\\S")))&&(pn=Qt.length-ei.index+xt.slice(Lr+1).join("\n").length,St.raw=St.raw.substring(0,St.raw.length-pn),Be=Qt=Qt.substring(0,ei.index),qn=Lr+1),Lr!==qn-1){if(On=this.rules.block.listItemStart.exec(xt[Lr+1]),this.options.pedantic?On[1].length>nr[1].length:On[1].length>=nr[0].length||On[1].length>3){xt.splice(Lr,2,xt[Lr]+(!this.options.pedantic&&On[1].length<nr[0].length&&!xt[Lr].match(/\n$/)?"":"\n")+xt[Lr+1]),Lr--,qn--;continue}(!this.options.pedantic||this.options.smartLists?On[2][On[2].length-1]!==ct[ct.length-1]:tt===(1===On[2].length))&&(pn=xt.slice(Lr+1).join("\n").length,St.raw=St.raw.substring(0,St.raw.length-pn),Lr=qn-1),nr=On}zn=Qt.length,~(Qt=Qt.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(zn-=Qt.length,Qt=Qt.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+zn+"}","gm"),"")),Qt=ue(Qt,"\n"),Lr!==qn-1&&(Be+="\n"),Gn=Dt||/\n\n(?!\s*$)/.test(Be),Lr!==qn-1&&(Dt="\n\n"===Be.slice(-2),Gn||(Gn=Dt)),Gn&&(St.loose=!0),this.options.gfm&&(Jr=void 0,(An=/^\[[ xX]\] /.test(Qt))&&(Jr=" "!==Qt[1],Qt=Qt.replace(/^\[[ xX]\] +/,""))),St.items.push({type:"list_item",raw:Be,task:An,checked:Jr,loose:Gn,text:Qt})}return St}},at.html=function(_e){var be=this.rules.block.html.exec(_e);if(be)return{type:this.options.sanitize?"paragraph":"html",raw:be[0],pre:!this.options.sanitizer&&("pre"===be[1]||"script"===be[1]||"style"===be[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(be[0]):ge(be[0]):be[0]}},at.def=function(_e){var be=this.rules.block.def.exec(_e);if(be)return be[3]&&(be[3]=be[3].substring(1,be[3].length-1)),{type:"def",tag:be[1].toLowerCase().replace(/\s+/g," "),raw:be[0],href:be[2],title:be[3]}},at.table=function(_e){var be=this.rules.block.table.exec(_e);if(be){var Be={type:"table",header:X(be[1].replace(/^ *| *\| *$/g,"")),align:be[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:be[3]?be[3].replace(/\n$/,"").split("\n"):[]};if(Be.header.length===Be.align.length){Be.raw=be[0];var tt,ct=Be.align.length;for(tt=0;tt<ct;tt++)Be.align[tt]=/^ *-+: *$/.test(Be.align[tt])?"right":/^ *:-+: *$/.test(Be.align[tt])?"center":/^ *:-+ *$/.test(Be.align[tt])?"left":null;for(ct=Be.cells.length,tt=0;tt<ct;tt++)Be.cells[tt]=X(Be.cells[tt].replace(/^ *\| *| *\| *$/g,""),Be.header.length);return Be}}},at.lheading=function(_e){var be=this.rules.block.lheading.exec(_e);if(be)return{type:"heading",raw:be[0],depth:"="===be[2].charAt(0)?1:2,text:be[1]}},at.paragraph=function(_e){var be=this.rules.block.paragraph.exec(_e);if(be)return{type:"paragraph",raw:be[0],text:"\n"===be[1].charAt(be[1].length-1)?be[1].slice(0,-1):be[1]}},at.text=function(_e){var be=this.rules.block.text.exec(_e);if(be)return{type:"text",raw:be[0],text:be[0]}},at.escape=function(_e){var be=this.rules.inline.escape.exec(_e);if(be)return{type:"escape",raw:be[0],text:ge(be[1])}},at.tag=function(_e,be,Be){var ct=this.rules.inline.tag.exec(_e);if(ct)return!be&&/^<a /i.test(ct[0])?be=!0:be&&/^<\/a>/i.test(ct[0])&&(be=!1),!Be&&/^<(pre|code|kbd|script)(\s|>)/i.test(ct[0])?Be=!0:Be&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ct[0])&&(Be=!1),{type:this.options.sanitize?"text":"html",raw:ct[0],inLink:be,inRawBlock:Be,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ct[0]):ge(ct[0]):ct[0]}},at.link=function(_e){var be=this.rules.inline.link.exec(_e);if(be){var Be=be[2].trim();if(!this.options.pedantic&&/^</.test(Be)){if(!/>$/.test(Be))return;var ct=ue(Be.slice(0,-1),"\\");if((Be.length-ct.length)%2==0)return}else{var tt=De(be[2],"()");if(tt>-1){var xt=(0===be[0].indexOf("!")?5:4)+be[1].length+tt;be[2]=be[2].substring(0,tt),be[0]=be[0].substring(0,xt).trim(),be[3]=""}}var Dt=be[2],Qt="";if(this.options.pedantic){var zn=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Dt);zn&&(Dt=zn[1],Qt=zn[3])}else Qt=be[3]?be[3].slice(1,-1):"";return Dt=Dt.trim(),/^</.test(Dt)&&(Dt=this.options.pedantic&&!/>$/.test(Be)?Dt.slice(1):Dt.slice(1,-1)),je(be,{href:Dt&&Dt.replace(this.rules.inline._escapes,"$1"),title:Qt&&Qt.replace(this.rules.inline._escapes,"$1")},be[0])}},at.reflink=function(_e,be){var Be;if((Be=this.rules.inline.reflink.exec(_e))||(Be=this.rules.inline.nolink.exec(_e))){var ct=(Be[2]||Be[1]).replace(/\s+/g," ");if(!(ct=be[ct.toLowerCase()])||!ct.href){var tt=Be[0].charAt(0);return{type:"text",raw:tt,text:tt}}return je(Be,ct,Be[0])}},at.emStrong=function(_e,be,Be){void 0===Be&&(Be="");var ct=this.rules.inline.emStrong.lDelim.exec(_e);if(ct&&(!ct[3]||!Be.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var tt=ct[1]||ct[2]||"";if(!tt||tt&&(""===Be||this.rules.inline.punctuation.exec(Be))){var xt,Dt,St=ct[0].length-1,Qt=St,zn=0,nr="*"===ct[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(nr.lastIndex=0,be=be.slice(-1*_e.length+St);null!=(ct=nr.exec(be));)if(xt=ct[1]||ct[2]||ct[3]||ct[4]||ct[5]||ct[6]){if(Dt=xt.length,ct[3]||ct[4]){Qt+=Dt;continue}if((ct[5]||ct[6])&&St%3&&!((St+Dt)%3)){zn+=Dt;continue}if(!((Qt-=Dt)>0))return Dt=Math.min(Dt,Dt+Qt+zn),Math.min(St,Dt)%2?{type:"em",raw:_e.slice(0,St+ct.index+Dt+1),text:_e.slice(1,St+ct.index+Dt)}:{type:"strong",raw:_e.slice(0,St+ct.index+Dt+1),text:_e.slice(2,St+ct.index+Dt-1)}}}}},at.codespan=function(_e){var be=this.rules.inline.code.exec(_e);if(be){var Be=be[2].replace(/\n/g," "),ct=/[^ ]/.test(Be),tt=/^ /.test(Be)&&/ $/.test(Be);return ct&&tt&&(Be=Be.substring(1,Be.length-1)),Be=ge(Be,!0),{type:"codespan",raw:be[0],text:Be}}},at.br=function(_e){var be=this.rules.inline.br.exec(_e);if(be)return{type:"br",raw:be[0]}},at.del=function(_e){var be=this.rules.inline.del.exec(_e);if(be)return{type:"del",raw:be[0],text:be[2]}},at.autolink=function(_e,be){var ct,tt,Be=this.rules.inline.autolink.exec(_e);if(Be)return tt="@"===Be[2]?"mailto:"+(ct=ge(this.options.mangle?be(Be[1]):Be[1])):ct=ge(Be[1]),{type:"link",raw:Be[0],text:ct,href:tt,tokens:[{type:"text",raw:ct,text:ct}]}},at.url=function(_e,be){var Be;if(Be=this.rules.inline.url.exec(_e)){var ct,tt;if("@"===Be[2])tt="mailto:"+(ct=ge(this.options.mangle?be(Be[0]):Be[0]));else{var St;do{St=Be[0],Be[0]=this.rules.inline._backpedal.exec(Be[0])[0]}while(St!==Be[0]);ct=ge(Be[0]),tt="www."===Be[1]?"http://"+ct:ct}return{type:"link",raw:Be[0],text:ct,href:tt,tokens:[{type:"text",raw:ct,text:ct}]}}},at.inlineText=function(_e,be,Be){var tt,ct=this.rules.inline.text.exec(_e);if(ct)return tt=be?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ct[0]):ge(ct[0]):ct[0]:ge(this.options.smartypants?Be(ct[0]):ct[0]),{type:"text",raw:ct[0],text:tt}},it}(),Je=$_noopTest,Ye=$_edit,Ve=$_merge,Le={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Je,table:Je,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Le.def=Ye(Le.def).replace("label",Le._label).replace("title",Le._title).getRegex(),Le.bullet=/(?:[*+-]|\d{1,9}[.)])/,Le.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,Le.item=Ye(Le.item,"gm").replace(/bull/g,Le.bullet).getRegex(),Le.listItemStart=Ye(/^( *)(bull) */).replace("bull",Le.bullet).getRegex(),Le.list=Ye(Le.list).replace(/bull/g,Le.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Le.def.source+")").getRegex(),Le._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Le._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Le.html=Ye(Le.html,"i").replace("comment",Le._comment).replace("tag",Le._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Le.paragraph=Ye(Le._paragraph).replace("hr",Le.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Le._tag).getRegex(),Le.blockquote=Ye(Le.blockquote).replace("paragraph",Le.paragraph).getRegex(),Le.normal=Ve({},Le),Le.gfm=Ve({},Le.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Le.gfm.nptable=Ye(Le.gfm.nptable).replace("hr",Le.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Le._tag).getRegex(),Le.gfm.table=Ye(Le.gfm.table).replace("hr",Le.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Le._tag).getRegex(),Le.pedantic=Ve({},Le.normal,{html:Ye("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Le._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Je,paragraph:Ye(Le.normal._paragraph).replace("hr",Le.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Le.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Se={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Je,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Je,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Se.punctuation=Ye(Se.punctuation).replace(/punctuation/g,Se._punctuation).getRegex(),Se.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Se.escapedEmSt=/\\\*|\\_/g,Se._comment=Ye(Le._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Se.emStrong.lDelim=Ye(Se.emStrong.lDelim).replace(/punct/g,Se._punctuation).getRegex(),Se.emStrong.rDelimAst=Ye(Se.emStrong.rDelimAst,"g").replace(/punct/g,Se._punctuation).getRegex(),Se.emStrong.rDelimUnd=Ye(Se.emStrong.rDelimUnd,"g").replace(/punct/g,Se._punctuation).getRegex(),Se._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Se._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Se._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Se.autolink=Ye(Se.autolink).replace("scheme",Se._scheme).replace("email",Se._email).getRegex(),Se._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Se.tag=Ye(Se.tag).replace("comment",Se._comment).replace("attribute",Se._attribute).getRegex(),Se._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Se._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Se._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Se.link=Ye(Se.link).replace("label",Se._label).replace("href",Se._href).replace("title",Se._title).getRegex(),Se.reflink=Ye(Se.reflink).replace("label",Se._label).getRegex(),Se.reflinkSearch=Ye(Se.reflinkSearch,"g").replace("reflink",Se.reflink).replace("nolink",Se.nolink).getRegex(),Se.normal=Ve({},Se),Se.pedantic=Ve({},Se.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ye(/^!?\[(label)\]\((.*?)\)/).replace("label",Se._label).getRegex(),reflink:Ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Se._label).getRegex()}),Se.gfm=Ve({},Se.normal,{escape:Ye(Se.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Se.gfm.url=Ye(Se.gfm.url,"i").replace("email",Se.gfm._extended_email).getRegex(),Se.breaks=Ve({},Se.gfm,{br:Ye(Se.br).replace("{2,}","*").getRegex(),text:Ye(Se.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Re={block:Le,inline:Se},He=We,Xe=dt.exports.defaults,ze=Re.block,W=Re.inline,J=$_repeatString;function we(it){return it.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ce(it){var ht,_e,at="",be=it.length;for(ht=0;ht<be;ht++)_e=it.charCodeAt(ht),Math.random()>.5&&(_e="x"+_e.toString(16)),at+="&#"+_e+";";return at}var ke=function(){function it(ht){this.tokens=[],this.tokens.links=Object.create(null),this.options=ht||Xe,this.options.tokenizer=this.options.tokenizer||new He,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var _e={block:ze.normal,inline:W.normal};this.options.pedantic?(_e.block=ze.pedantic,_e.inline=W.pedantic):this.options.gfm&&(_e.block=ze.gfm,_e.inline=this.options.breaks?W.breaks:W.gfm),this.tokenizer.rules=_e}it.lex=function(_e,be){return new it(be).lex(_e)},it.lexInline=function(_e,be){return new it(be).inlineTokens(_e)};var at=it.prototype;return at.lex=function(_e){return _e=_e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(_e,this.tokens,!0),this.inline(this.tokens),this.tokens},at.blockTokens=function(_e,be,Be){var tt,St,xt,Dt,Qt,zn,ct=this;for(void 0===be&&(be=[]),void 0===Be&&(Be=!0),this.options.pedantic&&(_e=_e.replace(/^ +$/gm,""));_e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(On){return!!(tt=On.call(ct,_e,be))&&(_e=_e.substring(tt.raw.length),be.push(tt),!0)}))){if(tt=this.tokenizer.space(_e)){_e=_e.substring(tt.raw.length),tt.type&&be.push(tt);continue}if(tt=this.tokenizer.code(_e)){_e=_e.substring(tt.raw.length),(Dt=be[be.length-1])&&"paragraph"===Dt.type?(Dt.raw+="\n"+tt.raw,Dt.text+="\n"+tt.text):be.push(tt);continue}if(tt=this.tokenizer.fences(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(tt=this.tokenizer.heading(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(tt=this.tokenizer.nptable(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(tt=this.tokenizer.hr(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(tt=this.tokenizer.blockquote(_e)){_e=_e.substring(tt.raw.length),tt.tokens=this.blockTokens(tt.text,[],Be),be.push(tt);continue}if(tt=this.tokenizer.list(_e)){for(_e=_e.substring(tt.raw.length),xt=tt.items.length,St=0;St<xt;St++)tt.items[St].tokens=this.blockTokens(tt.items[St].text,[],!1);be.push(tt);continue}if(tt=this.tokenizer.html(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(Be&&(tt=this.tokenizer.def(_e))){_e=_e.substring(tt.raw.length),this.tokens.links[tt.tag]||(this.tokens.links[tt.tag]={href:tt.href,title:tt.title});continue}if(tt=this.tokenizer.table(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(tt=this.tokenizer.lheading(_e)){_e=_e.substring(tt.raw.length),be.push(tt);continue}if(Qt=_e,this.options.extensions&&this.options.extensions.startBlock&&function(){var On=1/0,pn=_e.slice(1),Gn=void 0;ct.options.extensions.startBlock.forEach(function(An){"number"==typeof(Gn=An.call(this,pn))&&Gn>=0&&(On=Math.min(On,Gn))}),On<1/0&&On>=0&&(Qt=_e.substring(0,On+1))}(),Be&&(tt=this.tokenizer.paragraph(Qt))){Dt=be[be.length-1],zn&&"paragraph"===Dt.type?(Dt.raw+="\n"+tt.raw,Dt.text+="\n"+tt.text):be.push(tt),zn=Qt.length!==_e.length,_e=_e.substring(tt.raw.length);continue}if(tt=this.tokenizer.text(_e)){_e=_e.substring(tt.raw.length),(Dt=be[be.length-1])&&"text"===Dt.type?(Dt.raw+="\n"+tt.raw,Dt.text+="\n"+tt.text):be.push(tt);continue}if(_e){var nr="Infinite loop on byte: "+_e.charCodeAt(0);if(this.options.silent){console.error(nr);break}throw new Error(nr)}}return be},at.inline=function(_e){var be,Be,ct,tt,St,xt,Dt=_e.length;for(be=0;be<Dt;be++)switch(xt=_e[be],xt.type){case"paragraph":case"text":case"heading":xt.tokens=[],this.inlineTokens(xt.text,xt.tokens);break;case"table":for(xt.tokens={header:[],cells:[]},tt=xt.header.length,Be=0;Be<tt;Be++)xt.tokens.header[Be]=[],this.inlineTokens(xt.header[Be],xt.tokens.header[Be]);for(tt=xt.cells.length,Be=0;Be<tt;Be++)for(St=xt.cells[Be],xt.tokens.cells[Be]=[],ct=0;ct<St.length;ct++)xt.tokens.cells[Be][ct]=[],this.inlineTokens(St[ct],xt.tokens.cells[Be][ct]);break;case"blockquote":this.inline(xt.tokens);break;case"list":for(tt=xt.items.length,Be=0;Be<tt;Be++)this.inline(xt.items[Be].tokens)}return _e},at.inlineTokens=function(_e,be,Be,ct){var tt=this;void 0===be&&(be=[]),void 0===Be&&(Be=!1),void 0===ct&&(ct=!1);var St,xt,Dt,zn,nr,On,Qt=_e;if(this.tokens.links){var pn=Object.keys(this.tokens.links);if(pn.length>0)for(;null!=(zn=this.tokenizer.rules.inline.reflinkSearch.exec(Qt));)pn.includes(zn[0].slice(zn[0].lastIndexOf("[")+1,-1))&&(Qt=Qt.slice(0,zn.index)+"["+J("a",zn[0].length-2)+"]"+Qt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(zn=this.tokenizer.rules.inline.blockSkip.exec(Qt));)Qt=Qt.slice(0,zn.index)+"["+J("a",zn[0].length-2)+"]"+Qt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(zn=this.tokenizer.rules.inline.escapedEmSt.exec(Qt));)Qt=Qt.slice(0,zn.index)+"++"+Qt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;_e;)if(nr||(On=""),nr=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(An){return!!(St=An.call(tt,_e,be))&&(_e=_e.substring(St.raw.length),be.push(St),!0)}))){if(St=this.tokenizer.escape(_e)){_e=_e.substring(St.raw.length),be.push(St);continue}if(St=this.tokenizer.tag(_e,Be,ct)){_e=_e.substring(St.raw.length),Be=St.inLink,ct=St.inRawBlock,(xt=be[be.length-1])&&"text"===St.type&&"text"===xt.type?(xt.raw+=St.raw,xt.text+=St.text):be.push(St);continue}if(St=this.tokenizer.link(_e)){_e=_e.substring(St.raw.length),"link"===St.type&&(St.tokens=this.inlineTokens(St.text,[],!0,ct)),be.push(St);continue}if(St=this.tokenizer.reflink(_e,this.tokens.links)){_e=_e.substring(St.raw.length),xt=be[be.length-1],"link"===St.type?(St.tokens=this.inlineTokens(St.text,[],!0,ct),be.push(St)):xt&&"text"===St.type&&"text"===xt.type?(xt.raw+=St.raw,xt.text+=St.text):be.push(St);continue}if(St=this.tokenizer.emStrong(_e,Qt,On)){_e=_e.substring(St.raw.length),St.tokens=this.inlineTokens(St.text,[],Be,ct),be.push(St);continue}if(St=this.tokenizer.codespan(_e)){_e=_e.substring(St.raw.length),be.push(St);continue}if(St=this.tokenizer.br(_e)){_e=_e.substring(St.raw.length),be.push(St);continue}if(St=this.tokenizer.del(_e)){_e=_e.substring(St.raw.length),St.tokens=this.inlineTokens(St.text,[],Be,ct),be.push(St);continue}if(St=this.tokenizer.autolink(_e,ce)){_e=_e.substring(St.raw.length),be.push(St);continue}if(!Be&&(St=this.tokenizer.url(_e,ce))){_e=_e.substring(St.raw.length),be.push(St);continue}if(Dt=_e,this.options.extensions&&this.options.extensions.startInline&&function(){var An=1/0,Jr=_e.slice(1),ei=void 0;tt.options.extensions.startInline.forEach(function(qn){"number"==typeof(ei=qn.call(this,Jr))&&ei>=0&&(An=Math.min(An,ei))}),An<1/0&&An>=0&&(Dt=_e.substring(0,An+1))}(),St=this.tokenizer.inlineText(Dt,ct,we)){_e=_e.substring(St.raw.length),"_"!==St.raw.slice(-1)&&(On=St.raw.slice(-1)),nr=!0,(xt=be[be.length-1])&&"text"===xt.type?(xt.raw+=St.raw,xt.text+=St.text):be.push(St);continue}if(_e){var Gn="Infinite loop on byte: "+_e.charCodeAt(0);if(this.options.silent){console.error(Gn);break}throw new Error(Gn)}}return be},function(it,at,ht){at&&rt(it.prototype,at),ht&&rt(it,ht)}(it,null,[{key:"rules",get:function(){return{block:ze,inline:W}}}]),it}(),At=dt.exports.defaults,pt=$_cleanUrl,ye=$_escape,j=function(){function it(ht){this.options=ht||At}var at=it.prototype;return at.code=function(_e,be,Be){var ct=(be||"").match(/\S*/)[0];if(this.options.highlight){var tt=this.options.highlight(_e,ct);null!=tt&&tt!==_e&&(Be=!0,_e=tt)}return _e=_e.replace(/\n$/,"")+"\n",ct?'<pre><code class="'+this.options.langPrefix+ye(ct,!0)+'">'+(Be?_e:ye(_e,!0))+"</code></pre>\n":"<pre><code>"+(Be?_e:ye(_e,!0))+"</code></pre>\n"},at.blockquote=function(_e){return"<blockquote>\n"+_e+"</blockquote>\n"},at.html=function(_e){return _e},at.heading=function(_e,be,Be,ct){return this.options.headerIds?"<h"+be+' id="'+this.options.headerPrefix+ct.slug(Be)+'">'+_e+"</h"+be+">\n":"<h"+be+">"+_e+"</h"+be+">\n"},at.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},at.list=function(_e,be,Be){var ct=be?"ol":"ul";return"<"+ct+(be&&1!==Be?' start="'+Be+'"':"")+">\n"+_e+"</"+ct+">\n"},at.listitem=function(_e){return"<li>"+_e+"</li>\n"},at.checkbox=function(_e){return"<input "+(_e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},at.paragraph=function(_e){return"<p>"+_e+"</p>\n"},at.table=function(_e,be){return be&&(be="<tbody>"+be+"</tbody>"),"<table>\n<thead>\n"+_e+"</thead>\n"+be+"</table>\n"},at.tablerow=function(_e){return"<tr>\n"+_e+"</tr>\n"},at.tablecell=function(_e,be){var Be=be.header?"th":"td";return(be.align?"<"+Be+' align="'+be.align+'">':"<"+Be+">")+_e+"</"+Be+">\n"},at.strong=function(_e){return"<strong>"+_e+"</strong>"},at.em=function(_e){return"<em>"+_e+"</em>"},at.codespan=function(_e){return"<code>"+_e+"</code>"},at.br=function(){return this.options.xhtml?"<br/>":"<br>"},at.del=function(_e){return"<del>"+_e+"</del>"},at.link=function(_e,be,Be){if(null===(_e=pt(this.options.sanitize,this.options.baseUrl,_e)))return Be;var ct='<a href="'+ye(_e)+'"';return be&&(ct+=' title="'+be+'"'),ct+">"+Be+"</a>"},at.image=function(_e,be,Be){if(null===(_e=pt(this.options.sanitize,this.options.baseUrl,_e)))return Be;var ct='<img src="'+_e+'" alt="'+Be+'"';return be&&(ct+=' title="'+be+'"'),ct+(this.options.xhtml?"/>":">")},at.text=function(_e){return _e},it}(),R=function(){function it(){}var at=it.prototype;return at.strong=function(_e){return _e},at.em=function(_e){return _e},at.codespan=function(_e){return _e},at.del=function(_e){return _e},at.html=function(_e){return _e},at.text=function(_e){return _e},at.link=function(_e,be,Be){return""+Be},at.image=function(_e,be,Be){return""+Be},at.br=function(){return""},it}(),L=function(){function it(){this.seen={}}var at=it.prototype;return at.serialize=function(_e){return _e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},at.getNextSafeSlug=function(_e,be){var Be=_e,ct=0;if(this.seen.hasOwnProperty(Be)){ct=this.seen[_e];do{Be=_e+"-"+ ++ct}while(this.seen.hasOwnProperty(Be))}return be||(this.seen[_e]=ct,this.seen[Be]=0),Be},at.slug=function(_e,be){void 0===be&&(be={});var Be=this.serialize(_e);return this.getNextSafeSlug(Be,be.dryrun)},it}(),Pe=j,et=R,wt=L,Ot=dt.exports.defaults,Mn=$_unescape,$n=ke,br=function(){function it(ht){this.options=ht||Ot,this.options.renderer=this.options.renderer||new Pe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new et,this.slugger=new wt}it.parse=function(_e,be){return new it(be).parse(_e)},it.parseInline=function(_e,be){return new it(be).parseInline(_e)};var at=it.prototype;return at.parse=function(_e,be){void 0===be&&(be=!0);var ct,tt,St,xt,Dt,Qt,zn,nr,On,pn,Gn,An,Jr,ei,qn,Lr,va,$i,ie,Be="",he=_e.length;for(ct=0;ct<he;ct++)if(pn=_e[ct],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[pn.type]&&(!1!==(ie=this.options.extensions.renderers[pn.type].call(this,pn))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(pn.type)))Be+=ie||"";else switch(pn.type){case"space":continue;case"hr":Be+=this.renderer.hr();continue;case"heading":Be+=this.renderer.heading(this.parseInline(pn.tokens),pn.depth,Mn(this.parseInline(pn.tokens,this.textRenderer)),this.slugger);continue;case"code":Be+=this.renderer.code(pn.text,pn.lang,pn.escaped);continue;case"table":for(nr="",zn="",xt=pn.header.length,tt=0;tt<xt;tt++)zn+=this.renderer.tablecell(this.parseInline(pn.tokens.header[tt]),{header:!0,align:pn.align[tt]});for(nr+=this.renderer.tablerow(zn),On="",xt=pn.cells.length,tt=0;tt<xt;tt++){for(zn="",Dt=(Qt=pn.tokens.cells[tt]).length,St=0;St<Dt;St++)zn+=this.renderer.tablecell(this.parseInline(Qt[St]),{header:!1,align:pn.align[St]});On+=this.renderer.tablerow(zn)}Be+=this.renderer.table(nr,On);continue;case"blockquote":On=this.parse(pn.tokens),Be+=this.renderer.blockquote(On);continue;case"list":for(Gn=pn.ordered,An=pn.start,Jr=pn.loose,xt=pn.items.length,On="",tt=0;tt<xt;tt++)Lr=(qn=pn.items[tt]).checked,va=qn.task,ei="",qn.task&&($i=this.renderer.checkbox(Lr),Jr?qn.tokens.length>0&&"text"===qn.tokens[0].type?(qn.tokens[0].text=$i+" "+qn.tokens[0].text,qn.tokens[0].tokens&&qn.tokens[0].tokens.length>0&&"text"===qn.tokens[0].tokens[0].type&&(qn.tokens[0].tokens[0].text=$i+" "+qn.tokens[0].tokens[0].text)):qn.tokens.unshift({type:"text",text:$i}):ei+=$i),ei+=this.parse(qn.tokens,Jr),On+=this.renderer.listitem(ei,va,Lr);Be+=this.renderer.list(On,Gn,An);continue;case"html":Be+=this.renderer.html(pn.text);continue;case"paragraph":Be+=this.renderer.paragraph(this.parseInline(pn.tokens));continue;case"text":for(On=pn.tokens?this.parseInline(pn.tokens):pn.text;ct+1<he&&"text"===_e[ct+1].type;)On+="\n"+((pn=_e[++ct]).tokens?this.parseInline(pn.tokens):pn.text);Be+=be?this.renderer.paragraph(On):On;continue;default:var oe='Token with "'+pn.type+'" type was not found.';if(this.options.silent)return void console.error(oe);throw new Error(oe)}return Be},at.parseInline=function(_e,be){be=be||this.renderer;var ct,tt,St,Be="",xt=_e.length;for(ct=0;ct<xt;ct++)if(tt=_e[ct],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[tt.type]&&(!1!==(St=this.options.extensions.renderers[tt.type].call(this,tt))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(tt.type)))Be+=St||"";else switch(tt.type){case"escape":Be+=be.text(tt.text);break;case"html":Be+=be.html(tt.text);break;case"link":Be+=be.link(tt.href,tt.title,this.parseInline(tt.tokens,be));break;case"image":Be+=be.image(tt.href,tt.title,tt.text);break;case"strong":Be+=be.strong(this.parseInline(tt.tokens,be));break;case"em":Be+=be.em(this.parseInline(tt.tokens,be));break;case"codespan":Be+=be.codespan(tt.text);break;case"br":Be+=be.br();break;case"del":Be+=be.del(this.parseInline(tt.tokens,be));break;case"text":Be+=be.text(tt.text);break;default:var Dt='Token with "'+tt.type+'" type was not found.';if(this.options.silent)return void console.error(Dt);throw new Error(Dt)}return Be},it}(),hr=We,Hi=j,Bs=R,ds=L,js=$_merge,Gi=$_checkSanitizeDeprecation,Ka=$_escape,xl=dt.exports.getDefaults,ya=dt.exports.changeDefaults,bs=dt.exports.defaults;function Jt(it,at,ht){if(null==it)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof it)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(it)+", string expected");if("function"==typeof at&&(ht=at,at=null),at=js({},Jt.defaults,at||{}),Gi(at),ht){var be,_e=at.highlight;try{be=$n.lex(it,at)}catch(St){return ht(St)}var Be=function(xt){var Dt;if(!xt)try{at.walkTokens&&Jt.walkTokens(be,at.walkTokens),Dt=br.parse(be,at)}catch(Qt){xt=Qt}return at.highlight=_e,xt?ht(xt):ht(null,Dt)};if(!_e||_e.length<3||(delete at.highlight,!be.length))return Be();var ct=0;return Jt.walkTokens(be,function(St){"code"===St.type&&(ct++,setTimeout(function(){_e(St.text,St.lang,function(xt,Dt){if(xt)return Be(xt);null!=Dt&&Dt!==St.text&&(St.text=Dt,St.escaped=!0),0==--ct&&Be()})},0))}),void(0===ct&&Be())}try{var tt=$n.lex(it,at);return at.walkTokens&&Jt.walkTokens(tt,at.walkTokens),br.parse(tt,at)}catch(St){if(St.message+="\nPlease report this to https://github.com/markedjs/marked.",at.silent)return"<p>An error occurred:</p><pre>"+Ka(St.message+"",!0)+"</pre>";throw St}}return Jt.options=Jt.setOptions=function(it){return js(Jt.defaults,it),ya(Jt.defaults),Jt},Jt.getDefaults=xl,Jt.defaults=bs,Jt.use=function(){for(var it=this,at=arguments.length,ht=new Array(at),_e=0;_e<at;_e++)ht[_e]=arguments[_e];var ct,be=js.apply(void 0,[{}].concat(ht)),Be=Jt.defaults.extensions||{renderers:{},childTokens:{}};ht.forEach(function(tt){if(tt.extensions&&(ct=!0,tt.extensions.forEach(function(xt){if(!xt.name)throw new Error("extension name required");if(xt.renderer){var Dt=Be.renderers?Be.renderers[xt.name]:null;Be.renderers[xt.name]=Dt?function(){for(var Qt=arguments.length,zn=new Array(Qt),nr=0;nr<Qt;nr++)zn[nr]=arguments[nr];var On=xt.renderer.apply(this,zn);return!1===On&&(On=Dt.apply(this,zn)),On}:xt.renderer}if(xt.tokenizer){if(!xt.level||"block"!==xt.level&&"inline"!==xt.level)throw new Error("extension level must be 'block' or 'inline'");Be[xt.level]?Be[xt.level].unshift(xt.tokenizer):Be[xt.level]=[xt.tokenizer],xt.start&&("block"===xt.level?Be.startBlock?Be.startBlock.push(xt.start):Be.startBlock=[xt.start]:"inline"===xt.level&&(Be.startInline?Be.startInline.push(xt.start):Be.startInline=[xt.start]))}xt.childTokens&&(Be.childTokens[xt.name]=xt.childTokens)})),tt.renderer&&function(){var xt=Jt.defaults.renderer||new Hi,Dt=function(nr){var On=xt[nr];xt[nr]=function(){for(var pn=arguments.length,Gn=new Array(pn),An=0;An<pn;An++)Gn[An]=arguments[An];var Jr=tt.renderer[nr].apply(xt,Gn);return!1===Jr&&(Jr=On.apply(xt,Gn)),Jr}};for(var Qt in tt.renderer)Dt(Qt);be.renderer=xt}(),tt.tokenizer&&function(){var xt=Jt.defaults.tokenizer||new hr,Dt=function(nr){var On=xt[nr];xt[nr]=function(){for(var pn=arguments.length,Gn=new Array(pn),An=0;An<pn;An++)Gn[An]=arguments[An];var Jr=tt.tokenizer[nr].apply(xt,Gn);return!1===Jr&&(Jr=On.apply(xt,Gn)),Jr}};for(var Qt in tt.tokenizer)Dt(Qt);be.tokenizer=xt}(),tt.walkTokens){var St=Jt.defaults.walkTokens;be.walkTokens=function(xt){tt.walkTokens.call(it,xt),St&&St(xt)}}ct&&(be.extensions=Be),Jt.setOptions(be)})},Jt.walkTokens=function(it,at){for(var be,ht=function(){var ct=be.value;switch(at(ct),ct.type){case"table":for(var St,tt=Et(ct.tokens.header);!(St=tt()).done;)Jt.walkTokens(St.value,at);for(var Qt,Dt=Et(ct.tokens.cells);!(Qt=Dt()).done;)for(var On,nr=Et(Qt.value);!(On=nr()).done;)Jt.walkTokens(On.value,at);break;case"list":Jt.walkTokens(ct.items,at);break;default:Jt.defaults.extensions&&Jt.defaults.extensions.childTokens&&Jt.defaults.extensions.childTokens[ct.type]?Jt.defaults.extensions.childTokens[ct.type].forEach(function(Gn){Jt.walkTokens(ct[Gn],at)}):ct.tokens&&Jt.walkTokens(ct.tokens,at)}},_e=Et(it);!(be=_e()).done;)ht()},Jt.parseInline=function(it,at){if(null==it)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof it)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(it)+", string expected");at=js({},Jt.defaults,at||{}),Gi(at);try{var ht=$n.lexInline(it,at);return at.walkTokens&&Jt.walkTokens(ht,at.walkTokens),br.parseInline(ht,at)}catch(_e){if(_e.message+="\nPlease report this to https://github.com/markedjs/marked.",at.silent)return"<p>An error occurred:</p><pre>"+Ka(_e.message+"",!0)+"</pre>";throw _e}},Jt.Parser=br,Jt.parser=br.parse,Jt.Renderer=Hi,Jt.TextRenderer=Bs,Jt.Lexer=$n,Jt.lexer=$n.lex,Jt.Tokenizer=hr,Jt.Slugger=ds,Jt.parse=Jt,Jt}()},9369:(jt,rt,Ke)=>{var gt=Ke(6284),te=Ke(7830);function Et(){this.clear()}Et.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},Et.prototype.enqueue=function(dt){return this.items.push(dt),++this.size},Et.prototype.dequeue=function(){if(this.size){var dt=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,dt}},Et.prototype.peek=function(){if(this.size)return this.items[this.offset]},Et.prototype.forEach=function(dt,Q){Q=arguments.length>1?Q:this;for(var xe=this.offset,me=0,Y=this.items.length;xe<Y;xe++,me++)dt.call(Q,this.items[xe],me,this)},Et.prototype.toArray=function(){return this.items.slice(this.offset)},Et.prototype.values=function(){var dt=this.items,Q=this.offset;return new gt(function(){if(Q>=dt.length)return{done:!0};var xe=dt[Q];return Q++,{value:xe,done:!1}})},Et.prototype.entries=function(){var dt=this.items,Q=this.offset,xe=0;return new gt(function(){if(Q>=dt.length)return{done:!0};var me=dt[Q];return Q++,{value:[xe++,me],done:!1}})},"undefined"!=typeof Symbol&&(Et.prototype[Symbol.iterator]=Et.prototype.values),Et.prototype.toString=function(){return this.toArray().join(",")},Et.prototype.toJSON=function(){return this.toArray()},Et.prototype.inspect=function(){var dt=this.toArray();return Object.defineProperty(dt,"constructor",{value:Et,enumerable:!1}),dt},"undefined"!=typeof Symbol&&(Et.prototype[Symbol.for("nodejs.util.inspect.custom")]=Et.prototype.inspect),Et.from=function(dt){var Q=new Et;return te(dt,function(xe){Q.enqueue(xe)}),Q},Et.of=function(){return Et.from(arguments)},jt.exports=Et},7830:jt=>{var rt="undefined"!=typeof ArrayBuffer,Ke="undefined"!=typeof Symbol;function gt(te,Et){var dt,Q,xe,me,Y;if(!te)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof Et)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(te)||rt&&ArrayBuffer.isView(te)||"string"==typeof te||"[object Arguments]"===te.toString())for(xe=0,me=te.length;xe<me;xe++)Et(te[xe],xe);else if("function"!=typeof te.forEach)if(Ke&&Symbol.iterator in te&&"function"!=typeof te.next&&(te=te[Symbol.iterator]()),"function"!=typeof te.next)for(Q in te)te.hasOwnProperty(Q)&&Et(te[Q],Q);else for(dt=te,xe=0;!0!==(Y=dt.next()).done;)Et(Y.value,xe),xe++;else te.forEach(Et)}gt.forEachWithNullKeys=function(te,Et){var dt,Q,xe,me,Y;if(!te)throw new Error("obliterator/forEachWithNullKeys: invalid iterable.");if("function"!=typeof Et)throw new Error("obliterator/forEachWithNullKeys: expecting a callback.");if(Array.isArray(te)||rt&&ArrayBuffer.isView(te)||"string"==typeof te||"[object Arguments]"===te.toString())for(xe=0,me=te.length;xe<me;xe++)Et(te[xe],null);else if(te instanceof Set)te.forEach(function(z){Et(z,null)});else if("function"!=typeof te.forEach)if(Ke&&Symbol.iterator in te&&"function"!=typeof te.next&&(te=te[Symbol.iterator]()),"function"!=typeof te.next)for(Q in te)te.hasOwnProperty(Q)&&Et(te[Q],Q);else for(dt=te,xe=0;!0!==(Y=dt.next()).done;)Et(Y.value,null),xe++;else te.forEach(Et)},jt.exports=gt},6284:jt=>{function rt(Ke){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:Ke}),this.done=!1}rt.prototype.next=function(){if(this.done)return{done:!0};var Ke=this._next();return Ke.done&&(this.done=!0),Ke},"undefined"!=typeof Symbol&&(rt.prototype[Symbol.iterator]=function(){return this}),rt.of=function(){var Ke=arguments,gt=Ke.length,te=0;return new rt(function(){return te>=gt?{done:!0}:{done:!1,value:Ke[te++]}})},rt.empty=function(){var Ke=new rt(null);return Ke.done=!0,Ke},rt.is=function(Ke){return Ke instanceof rt||"object"==typeof Ke&&null!==Ke&&"function"==typeof Ke.next},jt.exports=rt},7310:(jt,rt,Ke)=>{"use strict";var gt=Ke(1948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.isMobile=function(){return void 0!==te.window.orientation},rt.default=function(me){if(!me&&!(0,Et.default)())return"Node";if((0,dt.default)(me))return"Electron";var Y="undefined"!=typeof navigator?navigator:{},z=me||Y.userAgent||"";if(z.indexOf("Edge")>-1)return"Edge";var F=-1!==z.indexOf("MSIE "),se=-1!==z.indexOf("Trident/");return F||se?"IE":te.window.chrome?"Chrome":te.window.safari?"Safari":te.window.mozInnerScreenX?"Firefox":"Unknown"};var te=Ke(1151),Et=gt(Ke(1602)),dt=gt(Ke(2344))},1151:(jt,rt,Ke)=>{"use strict";var gt=Ke(1948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.console=rt.process=rt.document=rt.global=rt.window=rt.self=void 0;var te=gt(Ke(4321)),Et={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"===("undefined"==typeof process?"undefined":(0,te.default)(process))&&process};rt.self=Et.self||Et.window||Et.global,rt.window=Et.window||Et.self||Et.global,rt.global=Et.global||Et.self||Et.window,rt.document=Et.document||{},rt.process=Et.process||{};var z=console;rt.console=z},4761:(jt,rt,Ke)=>{"use strict";var te=Ke(1948),Et=Ke(4321);Object.defineProperty(rt,"CO",{enumerable:!0,get:function(){return dt.global}}),Object.defineProperty(rt,"jU",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(rt,"qs",{enumerable:!0,get:function(){return xe.default}});var dt=Ke(1151),Q=z(Ke(1602)),xe=z(Ke(7310));te(Ke(2344));function Y(F){if("function"!=typeof WeakMap)return null;var se=new WeakMap,K=new WeakMap;return(Y=function(A){return A?K:se})(F)}function z(F,se){if(!se&&F&&F.__esModule)return F;if(null===F||"object"!==Et(F)&&"function"!=typeof F)return{default:F};var K=Y(se);if(K&&K.has(F))return K.get(F);var E={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in F)if("default"!==O&&Object.prototype.hasOwnProperty.call(F,O)){var T=A?Object.getOwnPropertyDescriptor(F,O):null;T&&(T.get||T.set)?Object.defineProperty(E,O,T):E[O]=F[O]}return E.default=F,K&&K.set(F,E),E}},1602:(jt,rt,Ke)=>{"use strict";var gt=Ke(1948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=dt,rt.isBrowserMainThread=function(){return dt()&&"undefined"!=typeof document};var te=gt(Ke(4321)),Et=gt(Ke(2344));function dt(){return!("object"===("undefined"==typeof process?"undefined":(0,te.default)(process))&&"[object process]"===String(process)&&!process.browser)||(0,Et.default)()}},2344:(jt,rt,Ke)=>{"use strict";var gt=Ke(1948);Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(dt){if("undefined"!=typeof window&&"object"===(0,te.default)(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===(0,te.default)(process.versions)&&Boolean(process.versions.electron))return!0;var Q="object"===("undefined"==typeof navigator?"undefined":(0,te.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,xe=dt||Q;return!!(xe&&xe.indexOf("Electron")>=0)};var te=gt(Ke(4321))},6991:function(jt,rt,Ke){"use strict";var gt=this&&this.__createBinding||(Object.create?function(Et,dt,Q,xe){void 0===xe&&(xe=Q),Object.defineProperty(Et,xe,{enumerable:!0,get:function(){return dt[Q]}})}:function(Et,dt,Q,xe){void 0===xe&&(xe=Q),Et[xe]=dt[Q]}),te=this&&this.__exportStar||function(Et,dt){for(var Q in Et)"default"!==Q&&!Object.prototype.hasOwnProperty.call(dt,Q)&&gt(dt,Et,Q)};Object.defineProperty(rt,"__esModule",{value:!0}),te(Ke(4180),rt),te(Ke(5103),rt),te(Ke(8965),rt),te(Ke(2595),rt),te(Ke(2417),rt),te(Ke(2451),rt),te(Ke(7735),rt)},4180:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.BlankNode=void 0,rt.BlankNode=class{constructor(te){this.termType="BlankNode",this.value=te}equals(te){return!!te&&"BlankNode"===te.termType&&te.value===this.value}}},5103:(jt,rt,Ke)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.DataFactory=void 0;const gt=Ke(4180),te=Ke(8965),Et=Ke(2595),dt=Ke(2417),Q=Ke(2451),xe=Ke(7735);let me=0;rt.DataFactory=class{constructor(F){this.blankNodeCounter=0,this.blankNodePrefix=(F=F||{}).blankNodePrefix||`df_${me++}_`}namedNode(F){return new dt.NamedNode(F)}blankNode(F){return new gt.BlankNode(F||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(F,se){return new Et.Literal(F,se)}variable(F){return new xe.Variable(F)}defaultGraph(){return te.DefaultGraph.INSTANCE}quad(F,se,K,E){return new Q.Quad(F,se,K,E||this.defaultGraph())}fromTerm(F){switch(F.termType){case"NamedNode":return this.namedNode(F.value);case"BlankNode":return this.blankNode(F.value);case"Literal":return F.language?this.literal(F.value,F.language):F.datatype.equals(Et.Literal.XSD_STRING)?this.literal(F.value):this.literal(F.value,this.fromTerm(F.datatype));case"Variable":return this.variable(F.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(F.subject),this.fromTerm(F.predicate),this.fromTerm(F.object),this.fromTerm(F.graph))}}fromQuad(F){return this.fromTerm(F)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},8965:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.DefaultGraph=void 0;class Ke{constructor(){this.termType="DefaultGraph",this.value=""}equals(te){return!!te&&"DefaultGraph"===te.termType}}rt.DefaultGraph=Ke,Ke.INSTANCE=new Ke},2595:(jt,rt,Ke)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Literal=void 0;const gt=Ke(2417);class te{constructor(dt,Q){this.termType="Literal",this.value=dt,"string"==typeof Q?(this.language=Q,this.datatype=te.RDF_LANGUAGE_STRING):Q?(this.language="",this.datatype=Q):(this.language="",this.datatype=te.XSD_STRING)}equals(dt){return!!dt&&"Literal"===dt.termType&&dt.value===this.value&&dt.language===this.language&&dt.datatype.equals(this.datatype)}}rt.Literal=te,te.RDF_LANGUAGE_STRING=new gt.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),te.XSD_STRING=new gt.NamedNode("http://www.w3.org/2001/XMLSchema#string")},2417:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.NamedNode=void 0,rt.NamedNode=class{constructor(te){this.termType="NamedNode",this.value=te}equals(te){return!!te&&"NamedNode"===te.termType&&te.value===this.value}}},2451:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Quad=void 0,rt.Quad=class{constructor(te,Et,dt,Q){this.termType="Quad",this.value="",this.subject=te,this.predicate=Et,this.object=dt,this.graph=Q}equals(te){return!!te&&("Quad"===te.termType||!te.termType)&&this.subject.equals(te.subject)&&this.predicate.equals(te.predicate)&&this.object.equals(te.object)&&this.graph.equals(te.graph)}}},7735:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Variable=void 0,rt.Variable=class{constructor(te){this.termType="Variable",this.value=te}equals(te){return!!te&&"Variable"===te.termType&&te.value===this.value}}},1609:function(jt,rt,Ke){"use strict";var gt=this&&this.__createBinding||(Object.create?function(E,A,O,T){void 0===T&&(T=O),Object.defineProperty(E,T,{enumerable:!0,get:function(){return A[O]}})}:function(E,A,O,T){void 0===T&&(T=O),E[T]=A[O]}),te=this&&this.__exportStar||function(E,A){for(var O in E)"default"!==O&&!Object.prototype.hasOwnProperty.call(A,O)&&gt(A,E,O)};Object.defineProperty(rt,"__esModule",{value:!0}),rt.getSupportedJavaScriptPrimitives=rt.getSupportedRdfDatatypes=rt.getTermRaw=rt.toRdf=rt.fromRdf=void 0;const Et=Ke(6991),dt=Ke(9938),Q=Ke(6060);te(Ke(9938),rt),te(Ke(8871),rt),te(Ke(6060),rt);const xe=new Et.DataFactory,me=new Q.Translator;function Y(E,A){return me.fromRdf(E,A)}me.registerHandler(new dt.TypeHandlerString,dt.TypeHandlerString.TYPES.map(E=>xe.namedNode(E)),["string"]),me.registerHandler(new dt.TypeHandlerBoolean,[dt.TypeHandlerBoolean.TYPE].map(E=>xe.namedNode(E)),["boolean"]),me.registerHandler(new dt.TypeHandlerNumberDouble,dt.TypeHandlerNumberDouble.TYPES.map(E=>xe.namedNode(E)),["number"]),me.registerHandler(new dt.TypeHandlerNumberInteger,dt.TypeHandlerNumberInteger.TYPES.map(E=>xe.namedNode(E)),["number"]),me.registerHandler(new dt.TypeHandlerDate,dt.TypeHandlerDate.TYPES.map(E=>xe.namedNode(E)),["object"]),rt.fromRdf=Y,rt.toRdf=function(E,A){return A&&"namedNode"in A&&(A={dataFactory:A}),(A=A||{})&&!A.dataFactory&&(A.dataFactory=xe),me.toRdf(E,A)},rt.getTermRaw=function(E,A){return"Literal"===E.termType?Y(E,A):E.value},rt.getSupportedRdfDatatypes=function(){return me.getSupportedRdfDatatypes()},rt.getSupportedJavaScriptPrimitives=function(){return me.getSupportedJavaScriptPrimitives()}},8871:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0})},6060:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.Translator=void 0,rt.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(te){throw new Error(`Invalid RDF ${te.datatype.value} value: '${te.value}'`)}registerHandler(te,Et,dt){for(const Q of Et)this.supportedRdfDatatypes.push(Q),this.fromRdfHandlers[Q.value]=te;for(const Q of dt){let xe=this.toRdfHandlers[Q];xe||(this.toRdfHandlers[Q]=xe=[]),xe.push(te)}}fromRdf(te,Et){const dt=this.fromRdfHandlers[te.datatype.value];return dt?dt.fromRdf(te,Et):te.value}toRdf(te,Et){const dt=this.toRdfHandlers[typeof te];if(dt)for(const Q of dt){const xe=Q.toRdf(te,Et);if(xe)return xe}throw new Error(`Invalid JavaScript value: '${te}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},727:(jt,rt,Ke)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerBoolean=void 0;const gt=Ke(6060);class te{fromRdf(dt,Q){switch(dt.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return Q&&gt.Translator.incorrectRdfDataType(dt),!1}toRdf(dt,{datatype:Q,dataFactory:xe}){return xe.literal(dt?"true":"false",Q||xe.namedNode(te.TYPE))}}rt.TypeHandlerBoolean=te,te.TYPE="http://www.w3.org/2001/XMLSchema#boolean"},2525:(jt,rt,Ke)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerDate=void 0;const gt=Ke(6060);class te{fromRdf(dt,Q){switch(Q&&!dt.value.match(te.VALIDATORS[dt.datatype.value.substr(33,dt.datatype.value.length)])&&gt.Translator.incorrectRdfDataType(dt),dt.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(dt.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const xe=dt.value.split("-");return new Date(0,parseInt(xe[0],10)-1,parseInt(xe[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(dt.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(dt.value+"-01");default:return new Date(dt.value)}}toRdf(dt,{datatype:Q,dataFactory:xe}){if(Q=Q||xe.namedNode(te.TYPES[0]),!(dt instanceof Date))return null;const me=dt;let Y;switch(Q.value){case"http://www.w3.org/2001/XMLSchema#gDay":Y=String(me.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":Y=me.getUTCMonth()+1+"-"+me.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":Y=String(me.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":Y=me.getUTCFullYear()+"-"+(me.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":Y=me.toISOString().replace(/T.*$/,"");break;default:Y=me.toISOString()}return xe.literal(Y,Q)}}rt.TypeHandlerDate=te,te.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],te.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/}},8554:(jt,rt,Ke)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerNumberDouble=void 0;const gt=Ke(6060);class te{fromRdf(dt,Q){const xe=parseFloat(dt.value);return Q&&isNaN(xe)&&gt.Translator.incorrectRdfDataType(dt),xe}toRdf(dt,{datatype:Q,dataFactory:xe}){return Q=Q||xe.namedNode(te.TYPES[0]),isNaN(dt)?xe.literal("NaN",Q):isFinite(dt)?dt%1==0?null:xe.literal(dt.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Q):xe.literal(dt>0?"INF":"-INF",Q)}}rt.TypeHandlerNumberDouble=te,te.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"]},7750:(jt,rt,Ke)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerNumberInteger=void 0;const gt=Ke(6060);class te{fromRdf(dt,Q){const xe=parseInt(dt.value,10);return Q&&(isNaN(xe)||dt.value.indexOf(".")>=0)&&gt.Translator.incorrectRdfDataType(dt),xe}toRdf(dt,{datatype:Q,dataFactory:xe}){return xe.literal(String(dt),Q||xe.namedNode(dt<=te.MAX_INT&&dt>=te.MIN_INT?te.TYPES[0]:te.TYPES[1]))}}rt.TypeHandlerNumberInteger=te,te.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],te.MAX_INT=2147483647,te.MIN_INT=-2147483648},4608:(jt,rt)=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0}),rt.TypeHandlerString=void 0;class Ke{fromRdf(te){return te.value}toRdf(te,{datatype:Et,dataFactory:dt}){return dt.literal(te,Et)}}rt.TypeHandlerString=Ke,Ke.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"]},9938:function(jt,rt,Ke){"use strict";var gt=this&&this.__createBinding||(Object.create?function(Et,dt,Q,xe){void 0===xe&&(xe=Q),Object.defineProperty(Et,xe,{enumerable:!0,get:function(){return dt[Q]}})}:function(Et,dt,Q,xe){void 0===xe&&(xe=Q),Et[xe]=dt[Q]}),te=this&&this.__exportStar||function(Et,dt){for(var Q in Et)"default"!==Q&&!Object.prototype.hasOwnProperty.call(dt,Q)&&gt(dt,Et,Q)};Object.defineProperty(rt,"__esModule",{value:!0}),te(Ke(727),rt),te(Ke(2525),rt),te(Ke(8554),rt),te(Ke(7750),rt),te(Ke(4608),rt)},7941:jt=>{var rt=function(Ke){"use strict";var Et,gt=Object.prototype,te=gt.hasOwnProperty,dt="function"==typeof Symbol?Symbol:{},Q=dt.iterator||"@@iterator",xe=dt.asyncIterator||"@@asyncIterator",me=dt.toStringTag||"@@toStringTag";function Y(G,$,pe){return Object.defineProperty(G,$,{value:pe,enumerable:!0,configurable:!0,writable:!0}),G[$]}try{Y({},"")}catch(G){Y=function($,pe,ue){return $[pe]=ue}}function z(G,$,pe,ue){var ge=Object.create(($&&$.prototype instanceof T?$:T).prototype),De=new U(ue||[]);return ge._invoke=function(G,$,pe){var ue=se;return function(ge,De){if(ue===E)throw new Error("Generator is already running");if(ue===A){if("throw"===ge)throw De;return de()}for(pe.method=ge,pe.arg=De;;){var je=pe.delegate;if(je){var Ze=N(je,pe);if(Ze){if(Ze===O)continue;return Ze}}if("next"===pe.method)pe.sent=pe._sent=pe.arg;else if("throw"===pe.method){if(ue===se)throw ue=A,pe.arg;pe.dispatchException(pe.arg)}else"return"===pe.method&&pe.abrupt("return",pe.arg);ue=E;var We=F(G,$,pe);if("normal"===We.type){if(ue=pe.done?A:K,We.arg===O)continue;return{value:We.arg,done:pe.done}}"throw"===We.type&&(ue=A,pe.method="throw",pe.arg=We.arg)}}}(G,pe,De),ge}function F(G,$,pe){try{return{type:"normal",arg:G.call($,pe)}}catch(ue){return{type:"throw",arg:ue}}}Ke.wrap=z;var se="suspendedStart",K="suspendedYield",E="executing",A="completed",O={};function T(){}function v(){}function y(){}var S={};Y(S,Q,function(){return this});var D=Object.getPrototypeOf,B=D&&D(D(re([])));B&&B!==gt&&te.call(B,Q)&&(S=B);var I=y.prototype=T.prototype=Object.create(S);function q(G){["next","throw","return"].forEach(function($){Y(G,$,function(pe){return this._invoke($,pe)})})}function Z(G,$){function pe(ge,De,je,Ze){var We=F(G[ge],G,De);if("throw"!==We.type){var Je=We.arg,Ye=Je.value;return Ye&&"object"==typeof Ye&&te.call(Ye,"__await")?$.resolve(Ye.__await).then(function(Ve){pe("next",Ve,je,Ze)},function(Ve){pe("throw",Ve,je,Ze)}):$.resolve(Ye).then(function(Ve){Je.value=Ve,je(Je)},function(Ve){return pe("throw",Ve,je,Ze)})}Ze(We.arg)}var ue;this._invoke=function(ge,De){function je(){return new $(function(Ze,We){pe(ge,De,Ze,We)})}return ue=ue?ue.then(je,je):je()}}function N(G,$){var pe=G.iterator[$.method];if(pe===Et){if($.delegate=null,"throw"===$.method){if(G.iterator.return&&($.method="return",$.arg=Et,N(G,$),"throw"===$.method))return O;$.method="throw",$.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var ue=F(pe,G.iterator,$.arg);if("throw"===ue.type)return $.method="throw",$.arg=ue.arg,$.delegate=null,O;var X=ue.arg;return X?X.done?($[G.resultName]=X.value,$.next=G.nextLoc,"return"!==$.method&&($.method="next",$.arg=Et),$.delegate=null,O):X:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,O)}function ee(G){var $={tryLoc:G[0]};1 in G&&($.catchLoc=G[1]),2 in G&&($.finallyLoc=G[2],$.afterLoc=G[3]),this.tryEntries.push($)}function C(G){var $=G.completion||{};$.type="normal",delete $.arg,G.completion=$}function U(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(ee,this),this.reset(!0)}function re(G){if(G){var $=G[Q];if($)return $.call(G);if("function"==typeof G.next)return G;if(!isNaN(G.length)){var pe=-1,ue=function X(){for(;++pe<G.length;)if(te.call(G,pe))return X.value=G[pe],X.done=!1,X;return X.value=Et,X.done=!0,X};return ue.next=ue}}return{next:de}}function de(){return{value:Et,done:!0}}return v.prototype=y,Y(I,"constructor",y),Y(y,"constructor",v),v.displayName=Y(y,me,"GeneratorFunction"),Ke.isGeneratorFunction=function(G){var $="function"==typeof G&&G.constructor;return!!$&&($===v||"GeneratorFunction"===($.displayName||$.name))},Ke.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,y):(G.__proto__=y,Y(G,me,"GeneratorFunction")),G.prototype=Object.create(I),G},Ke.awrap=function(G){return{__await:G}},q(Z.prototype),Y(Z.prototype,xe,function(){return this}),Ke.AsyncIterator=Z,Ke.async=function(G,$,pe,ue,X){void 0===X&&(X=Promise);var ge=new Z(z(G,$,pe,ue),X);return Ke.isGeneratorFunction($)?ge:ge.next().then(function(De){return De.done?De.value:ge.next()})},q(I),Y(I,me,"Generator"),Y(I,Q,function(){return this}),Y(I,"toString",function(){return"[object Generator]"}),Ke.keys=function(G){var $=[];for(var pe in G)$.push(pe);return $.reverse(),function ue(){for(;$.length;){var X=$.pop();if(X in G)return ue.value=X,ue.done=!1,ue}return ue.done=!0,ue}},Ke.values=re,U.prototype={constructor:U,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=Et,this.done=!1,this.delegate=null,this.method="next",this.arg=Et,this.tryEntries.forEach(C),!G)for(var $ in this)"t"===$.charAt(0)&&te.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=Et)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if("throw"===$.type)throw $.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var $=this;function pe(Ze,We){return ge.type="throw",ge.arg=G,$.next=Ze,We&&($.method="next",$.arg=Et),!!We}for(var ue=this.tryEntries.length-1;ue>=0;--ue){var X=this.tryEntries[ue],ge=X.completion;if("root"===X.tryLoc)return pe("end");if(X.tryLoc<=this.prev){var De=te.call(X,"catchLoc"),je=te.call(X,"finallyLoc");if(De&&je){if(this.prev<X.catchLoc)return pe(X.catchLoc,!0);if(this.prev<X.finallyLoc)return pe(X.finallyLoc)}else if(De){if(this.prev<X.catchLoc)return pe(X.catchLoc,!0)}else{if(!je)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return pe(X.finallyLoc)}}}},abrupt:function(G,$){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ue=this.tryEntries[pe];if(ue.tryLoc<=this.prev&&te.call(ue,"finallyLoc")&&this.prev<ue.finallyLoc){var X=ue;break}}X&&("break"===G||"continue"===G)&&X.tryLoc<=$&&$<=X.finallyLoc&&(X=null);var ge=X?X.completion:{};return ge.type=G,ge.arg=$,X?(this.method="next",this.next=X.finallyLoc,O):this.complete(ge)},complete:function(G,$){if("throw"===G.type)throw G.arg;return"break"===G.type||"continue"===G.type?this.next=G.arg:"return"===G.type?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):"normal"===G.type&&$&&(this.next=$),O},finish:function(G){for(var $=this.tryEntries.length-1;$>=0;--$){var pe=this.tryEntries[$];if(pe.finallyLoc===G)return this.complete(pe.completion,pe.afterLoc),C(pe),O}},catch:function(G){for(var $=this.tryEntries.length-1;$>=0;--$){var pe=this.tryEntries[$];if(pe.tryLoc===G){var ue=pe.completion;if("throw"===ue.type){var X=ue.arg;C(pe)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(G,$,pe){return this.delegate={iterator:re(G),resultName:$,nextLoc:pe},"next"===this.method&&(this.arg=Et),O}},Ke}(jt.exports);try{regeneratorRuntime=rt}catch(Ke){"object"==typeof globalThis?globalThis.regeneratorRuntime=rt:Function("r","regeneratorRuntime = r")(rt)}},3470:(jt,rt,Ke)=>{"use strict";var gt={};Ke.r(gt),Ke.d(gt,{decode:()=>Uye,encode:()=>zye});var te={};Ke.r(te),Ke.d(te,{decode:()=>qye,encode:()=>Yye});var Et={};Ke.r(Et),Ke.d(Et,{decode:()=>Xye,encode:()=>Qye});var dt={};function Q(n){return"function"==typeof n}Ke.r(dt),Ke.d(dt,{decode:()=>eve,encode:()=>tve});let xe=!1;const me={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else xe&&console.log("RxJS: Back to a better error behavior. Thank you. <3");xe=n},get useDeprecatedSynchronousErrorHandling(){return xe}};function Y(n){setTimeout(()=>{throw n},0)}const z={closed:!0,next(n){},error(n){if(me.useDeprecatedSynchronousErrorHandling)throw n;Y(n)},complete(){}},F=Array.isArray||(n=>n&&"number"==typeof n.length);function se(n){return null!==n&&"object"==typeof n}const E=(()=>{function n(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n})();class A{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof A)t.remove(this);else if(null!==t)for(let o=0;o<t.length;++o)t[o].remove(this);if(Q(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof E?O(o.errors):[o]}}if(F(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(se(l))try{l.unsubscribe()}catch(u){e=e||[],u instanceof E?e=e.concat(O(u.errors)):e.push(u)}}}if(e)throw new E(e)}add(e){let t=e;if(!e)return A.EMPTY;switch(typeof e){case"function":t=new A(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof A)){const s=t;t=new A,t._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof A){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}var n;function O(n){return n.reduce((e,t)=>e.concat(t instanceof E?t.errors:t),[])}A.EMPTY=((n=new A).closed=!0,n);const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class y extends A{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=z;break;case 1:if(!e){this.destination=z;break}if("object"==typeof e){e instanceof y?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new S(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new S(this,e,t,r)}}[T](){return this}static create(e,t,r){const i=new y(e,t,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class S extends y{constructor(e,t,r,i){super(),this._parentSubscriber=e;let s,o=this;Q(t)?s=t:t&&(s=t.next,r=t.error,i=t.complete,t!==z&&(o=Object.create(t),Q(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;me.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=me;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):Y(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;Y(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);me.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),me.useDeprecatedSynchronousErrorHandling)throw r;Y(r)}}__tryOrSetError(e,t,r){if(!me.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(i){return me.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(Y(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const I="function"==typeof Symbol&&Symbol.observable||"@@observable";function q(n){return n}let N=(()=>{class n{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const{operator:s}=this,o=function(n,e,t){if(n){if(n instanceof y)return n;if(n[T])return n[T]()}return n||e||t?new y(n,e,t):new y(z)}(t,r,i);if(o.add(s?s.call(o,this.source):this.source||me.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),me.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){me.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function(n){for(;n;){const{closed:e,destination:t,isStopped:r}=n;if(e||r)return!1;n=t&&t instanceof y?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=ee(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,i)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[I](){return this}pipe(...t){return 0===t.length?this:function(n){return 0===n.length?q:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=ee(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ee(n){if(n||(n=me.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const U=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class re extends A{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class de extends y{constructor(e){super(e),this.destination=e}}let G=(()=>{class n extends N{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[T](){return new de(this)}lift(t){const r=new $(this,this);return r.operator=t,r}next(t){if(this.closed)throw new U;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(t)}}error(t){if(this.closed)throw new U;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(t);this.observers.length=0}complete(){if(this.closed)throw new U;this.isStopped=!0;const{observers:t}=this,r=t.length,i=t.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new U;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new U;return this.hasError?(t.error(this.thrownError),A.EMPTY):this.isStopped?(t.complete(),A.EMPTY):(this.observers.push(t),new re(this,t))}asObservable(){const t=new N;return t.source=this,t}}return n.create=(e,t)=>new $(e,t),n})();class $ extends G{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):A.EMPTY}}function pe(n){return n&&"function"==typeof n.schedule}function ue(n,e){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new X(n,e))}}class X{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new ge(e,this.project,this.thisArg))}}class ge extends y{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const De=n=>e=>{for(let t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()},We="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Le=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Se(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Re=n=>{if(n&&"function"==typeof n[I])return(n=>e=>{const t=n[I]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)})(n);if(Le(n))return De(n);if(Se(n))return(n=>e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Y),e))(n);if(n&&"function"==typeof n[We])return(n=>e=>{const t=n[We]();for(;;){let r;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e})(n);{const t=`You provided ${se(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}};function ze(n,e){return new N(t=>{const r=new A;let i=0;return r.add(e.schedule(function(){i!==n.length?(t.next(n[i++]),t.closed||r.add(this.schedule())):t.complete()})),r})}function ke(n,e){return e?function(n,e){if(null!=n){if(function(n){return n&&"function"==typeof n[I]}(n))return function(n,e){return new N(t=>{const r=new A;return r.add(e.schedule(()=>{const i=n[I]();r.add(i.subscribe({next(s){r.add(e.schedule(()=>t.next(s)))},error(s){r.add(e.schedule(()=>t.error(s)))},complete(){r.add(e.schedule(()=>t.complete()))}}))})),r})}(n,e);if(Se(n))return function(n,e){return new N(t=>{const r=new A;return r.add(e.schedule(()=>n.then(i=>{r.add(e.schedule(()=>{t.next(i),r.add(e.schedule(()=>t.complete()))}))},i=>{r.add(e.schedule(()=>t.error(i)))}))),r})}(n,e);if(Le(n))return ze(n,e);if(function(n){return n&&"function"==typeof n[We]}(n)||"string"==typeof n)return function(n,e){if(!n)throw new Error("Iterable cannot be null");return new N(t=>{const r=new A;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=n[We](),r.add(e.schedule(function(){if(t.closed)return;let s,o;try{const a=i.next();s=a.value,o=a.done}catch(a){return void t.error(a)}o?t.complete():(t.next(s),this.schedule())}))})),r})}(n,e)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,e):n instanceof N?n:new N(Re(n))}class At extends y{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ye extends y{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function R(n,e){if(e.closed)return;if(n instanceof N)return n.subscribe(e);let t;try{t=Re(n)(e)}catch(r){e.error(r)}return t}function L(n,e,t=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(L((i,s)=>ke(n(i,s)).pipe(ue((o,a)=>e(i,o,s,a))),t)):("number"==typeof e&&(t=e),r=>r.lift(new Pe(n,t)))}class Pe{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new et(e,this.project,this.concurrent))}}class et extends ye{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}_innerSub(e){const t=new At(this),r=this.destination;r.add(t);const i=R(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ot(n=Number.POSITIVE_INFINITY){return L(q,n)}function Mn(n,e){return e?ze(n,e):new N(De(n))}function kn(...n){let e=Number.POSITIVE_INFINITY,t=null,r=n[n.length-1];return pe(r)?(t=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(e=n.pop())):"number"==typeof r&&(e=n.pop()),null===t&&1===n.length&&n[0]instanceof N?n[0]:Ot(e)(Mn(n,t))}function $n(){return function(e){return e.lift(new br(e))}}class br{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const i=new hr(e,r),s=t.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class hr extends y{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class Hi extends N{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new A,e.add(this.source.subscribe(new ds(this.getSubject(),this))),e.closed&&(this._connection=null,e=A.EMPTY)),e}refCount(){return $n()(this)}}const Bs=(()=>{const n=Hi.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class ds extends de{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}class xl{constructor(e,t){this.subjectFactory=e,this.selector=t}call(e,t){const{selector:r}=this,i=this.subjectFactory(),s=r(i).subscribe(e);return s.add(t.subscribe(i)),s}}function ya(){return new G}function bs(){return n=>$n()(function(n,e){return function(r){let i;if(i="function"==typeof n?n:function(){return n},"function"==typeof e)return r.lift(new xl(i,e));const s=Object.create(r,Bs);return s.source=r,s.subjectFactory=i,s}}(ya)(n))}function Jt(n){for(let e in n)if(n[e]===Jt)return e;throw Error("Could not find renamed property on target object.")}function Xa(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function it(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(it).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function at(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ht=Jt({__forward_ref__:Jt});function _e(n){return n.__forward_ref__=_e,n.toString=function(){return it(this())},n}function be(n){return Be(n)?n():n}function Be(n){return"function"==typeof n&&n.hasOwnProperty(ht)&&n.__forward_ref__===_e}class tt extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function Dt(n){return"string"==typeof n?n:null==n?"":String(n)}function Qt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Dt(n)}function pn(n,e){const t=e?` in ${e}`:"";throw new tt("201",`No provider for ${Qt(n)} found${t}`)}function ne(n,e){null==n&&function(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function gn(n){return ws(n,ho)||ws(n,Vs)}function ws(n,e){return n.hasOwnProperty(e)?n[e]:null}function Dl(n){return n&&(n.hasOwnProperty(ki)||n.hasOwnProperty(mu))?n[ki]:null}const ho=Jt({\u0275prov:Jt}),ki=Jt({\u0275inj:Jt}),Vs=Jt({ngInjectableDef:Jt}),mu=Jt({ngInjectorDef:Jt});var En=(()=>((En=En||{})[En.Default=0]="Default",En[En.Host=1]="Host",En[En.Self=2]="Self",En[En.SkipSelf=4]="SkipSelf",En[En.Optional=8]="Optional",En))();let fo;function ba(n){const e=fo;return fo=n,e}function cd(n,e,t){const r=gn(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&En.Optional?null:void 0!==e?e:void pn(it(n),"Injector")}function Te(n){return{toString:n}.toString()}var $e=(()=>(($e=$e||{})[$e.OnPush=0]="OnPush",$e[$e.Default=1]="Default",$e))(),Kt=(()=>((Kt=Kt||{})[Kt.Emulated=0]="Emulated",Kt[Kt.None=2]="None",Kt[Kt.ShadowDom=3]="ShadowDom",Kt))();const rr="undefined"!=typeof globalThis&&globalThis,Fi="undefined"!=typeof window&&window,qi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Es="undefined"!=typeof global&&global,tr=rr||Es||Fi||qi,dd={},qr=[],Zf=Jt({\u0275cmp:Jt}),Pm=Jt({\u0275dir:Jt}),yh=Jt({\u0275pipe:Jt}),Cb=Jt({\u0275mod:Jt}),qC=Jt({\u0275loc:Jt}),Il=Jt({\u0275fac:Jt}),vh=Jt({__NG_ELEMENT_ID__:Jt});let YC=0;function bn(n){return Te(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$e.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||qr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Kt.Emulated,id:"c",styles:n.styles||qr,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=YC++,r.inputs=Db(n.inputs,t),r.outputs=Db(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Ab):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(Tb):null,r})}function Ab(n){return Rr(n)||function(n){return n[Pm]||null}(n)}function Tb(n){return function(n){return n[yh]||null}(n)}const xb={};function un(n){return Te(()=>{const e={type:n.type,bootstrap:n.bootstrap||qr,declarations:n.declarations||qr,imports:n.imports||qr,exports:n.exports||qr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(xb[n.id]=n.type),e})}function Db(n,e){if(null==n)return dd;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Ut=bn;function Us(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Rr(n){return n[Zf]||null}function Do(n,e){const t=n[Cb]||null;if(!t&&!0===e)throw new Error(`Type ${it(n)} does not have '\u0275mod' property.`);return t}function qo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Yo(n){return Array.isArray(n)&&!0===n[1]}function Fm(n){return 0!=(8&n.flags)}function gd(n){return 2==(2&n.flags)}function md(n){return 1==(1&n.flags)}function Sa(n){return null!==n.template}function Mb(n){return 0!=(512&n[2])}function vu(n,e){return n.hasOwnProperty(Il)?n[Il]:null}class ep{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function jr(){return Rb}function Rb(n){return n.type.prototype.ngOnChanges&&(n.setInput=nA),tA}function tA(){const n=ot(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===dd)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nA(n,e,t,r){const i=ot(n)||function(n,e){return n[Ah]=e}(n,{previous:dd,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new ep(l&&l.currentValue,e,o===dd),n[r]=e}jr.ngInherit=!0;const Ah="__ngSimpleChanges__";function ot(n){return n[Ah]||null}let Vr;function si(n){return!!n.listen}const hc={createRenderer:(n,e)=>void 0!==Vr?Vr:"undefined"!=typeof document?document:void 0};function yi(n){for(;Array.isArray(n);)n=n[0];return n}function Th(n,e){return yi(e[n])}function Js(n,e){return yi(e[n.index])}function zm(n,e){return n.data[e]}function _d(n,e){return n[e]}function Hs(n,e){const t=e[n];return qo(t)?t:t[0]}function Pl(n){return 4==(4&n[2])}function yd(n){return 128==(128&n[2])}function Aa(n,e){return null==e?null:n[e]}function Hm(n){n[18]=0}function np(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Bn={lFrame:pc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Nb(){return Bn.bindingsEnabled}function Vt(){return Bn.lFrame.lView}function fr(){return Bn.lFrame.tView}function Xo(n){return Bn.lFrame.contextLView=n,n[8]}function ts(){let n=Gm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Gm(){return Bn.lFrame.currentTNode}function Ja(n,e){const t=Bn.lFrame;t.currentTNode=n,t.isParent=e}function ji(){return Bn.lFrame.isParent}function hs(){Bn.lFrame.isParent=!1}function Mh(){return Bn.isInCheckNoChangesMode}function ip(n){Bn.isInCheckNoChangesMode=n}function Cs(){const n=Bn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ta(){return Bn.lFrame.bindingIndex++}function Io(n){const e=Bn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function vd(n,e){const t=Bn.lFrame;t.bindingIndex=t.bindingRootIndex=n,$m(e)}function $m(n){Bn.lFrame.currentDirectiveIndex=n}function kb(){return Bn.lFrame.currentQueryIndex}function qm(n){Bn.lFrame.currentQueryIndex=n}function op(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function bd(n,e,t){if(t&En.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&En.Host||(i=op(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Bn.lFrame=Ce();return r.currentTNode=e,r.lView=n,!0}function Rh(n){const e=Ce(),t=n[1];Bn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ce(){const n=Bn.lFrame,e=null===n?null:n.child;return null===e?pc(n):e}function pc(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ph(){const n=Bn.lFrame;return Bn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Oo=Ph;function sr(){const n=Ph();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function eo(){return Bn.lFrame.selectedIndex}function mo(n){Bn.lFrame.selectedIndex=n}function Oi(){const n=Bn.lFrame;return zm(n.tView,n.selectedIndex)}function ap(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),u&&((n.viewHooks||(n.viewHooks=[])).push(t,u),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,u)),null!=c&&(n.destroyHooks||(n.destroyHooks=[])).push(t,c)}}function lp(n,e,t){el(n,e,3,t)}function up(n,e,t,r){(3&n[2])===t&&el(n,e,t,r)}function Ym(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function el(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(mA(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function mA(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Nh{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function cp(n,e,t){const r=si(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];Xm(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Fb(n){return 3===n||4===n||6===n}function Xm(n){return 64===n.charCodeAt(0)}function kh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Qm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Qm(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function Lb(n){return-1!==n}function wd(n){return 32767&n}function tl(n,e){let t=function(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Ed=!0;function dp(n){const e=Ed;return Ed=n,e}let Jm=0;function Gs(n,e){const t=hp(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,e_(r.data,n),e_(e,null),e_(r.blueprint,null));const i=Fh(n,e),s=n.injectorIndex;if(Lb(i)){const o=wd(i),a=tl(i,e),l=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function e_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hp(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Fh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function wu(n,e,t){!function(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(vh)&&(r=t[vh]),null==r&&(r=t[vh]=Jm++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function t_(n,e,t){if(t&En.Optional)return n;pn(e,"NodeInjector")}function jb(n,e,t,r){if(t&En.Optional&&void 0===r&&(r=null),0==(t&(En.Self|En.Host))){const i=n[9],s=ba(void 0);try{return i?i.get(e,r,t&En.Optional):cd(e,r,t&En.Optional)}finally{ba(s)}}return t_(r,e,t)}function Lh(n,e,t,r=En.Default,i){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(vh)?n[vh]:void 0;return"number"==typeof e?e>=0?255&e:Ub:e}(t);if("function"==typeof s){if(!bd(e,n,r))return r&En.Host?t_(i,t,r):jb(e,t,r,i);try{const o=s(r);if(null!=o||r&En.Optional)return o;pn(t)}finally{Oo()}}else if("number"==typeof s){let o=null,a=hp(n,e),l=-1,u=r&En.Host?e[16][6]:null;for((-1===a||r&En.SkipSelf)&&(l=-1===a?Fh(n,e):e[a+8],-1!==l&&Bh(r,!1)?(o=e[1],a=wd(l),e=tl(l,e)):a=-1);-1!==a;){const c=e[1];if(fp(s,a,c.data)){const h=As(a,e,t,o,r,u);if(h!==Vb)return h}l=e[a+8],-1!==l&&Bh(r,e[1].data[a+8]===u)&&fp(s,a,e)?(o=c,a=wd(l),e=tl(l,e)):a=-1}}}return jb(e,t,r,i)}const Vb={};function Ub(){return new Qo(ts(),Vt())}function As(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],c=Sd(a,o,t,null==r?gd(a)&&Ed:r!=o&&0!=(3&a.type),i&En.Host&&s===a);return null!==c?Cd(e,o,c,a):Vb}function Sd(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,c=s>>20,p=i?a+c:n.directiveEnd;for(let g=r?a:a+c;g<p;g++){const m=o[g];if(g<l&&t===m||g>=l&&m.type===t)return g}if(i){const g=o[l];if(g&&Sa(g)&&g.type===t)return l}return null}function Cd(n,e,t,r){let i=n[t];const s=e.data;if(function(n){return n instanceof Nh}(i)){const o=i;o.resolving&&function(n,e){throw new tt("200",`Circular dependency in DI detected for ${n}`)}(Qt(s[t]));const a=dp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ba(o.injectImpl):null;bd(n,r,En.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Rb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&ba(l),dp(a),o.resolving=!1,Oo()}}return i}function fp(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Bh(n,e){return!(n&En.Self||n&En.Host&&e)}class Qo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Lh(this._tNode,this._lView,e,void 0,t)}}function Xr(n){return Te(()=>{const e=n.prototype.constructor,t=e[Il]||Ts(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Il]||Ts(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ts(n){return Be(n)?()=>{const e=Ts(be(n));return e&&e()}:vu(n)}const Td="__parameters__";function Ma(n,e,t){return Te(()=>{const r=function(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const h=l.hasOwnProperty(Td)?l[Td]:Object.defineProperty(l,Td,{value:[]})[Td];for(;h.length<=c;)h.push(null);return(h[c]=h[c]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Gt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=qe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Jo(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Jo(r,e)):e!==n&&e.push(r)}return e}function ea(n,e){n.forEach(t=>Array.isArray(t)?ea(t,e):e(t))}function Vh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function kl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Su(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ro(n,e,t){let r=xs(n,e);return r>=0?n[1|r]=t:(r=~r,function(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function a_(n,e){const t=xs(n,e);if(t>=0)return n[1|t]}function xs(n,e){return function(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const bc={},yp="__NG_DI_FLAG__",Au="ngTempTokenPath",Tu=/\n/gm,il="__source",vp=Jt({provide:String,useValue:Jt});let wc;function Md(n){const e=wc;return wc=n,e}function OA(n,e=En.Default){if(void 0===wc)throw new Error("inject() must be called from an injection context");return null===wc?cd(n,void 0,e):wc.get(n,e&En.Optional?null:void 0,e)}function Ne(n,e=En.Default){return(fo||OA)(be(n),e)}const xu=Ne;function Ec(n){const e=[];for(let t=0;t<n.length;t++){const r=be(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,s=En.Default;for(let o=0;o<r.length;o++){const a=r[o],l=qb(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Ne(i,s))}else e.push(Ne(r))}return e}function Id(n,e){return n[yp]=e,n.prototype[yp]=e,n}function qb(n){return n[yp]}function to(n,e,t,r){const i=n[Au];throw e[il]&&i.unshift(e[il]),n.message=function(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=it(e);if(Array.isArray(e))i=e.map(it).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):it(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Tu,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Au]=null,n}const Od=Id(Ma("Inject",n=>({token:n})),-1),Ki=Id(Ma("Optional"),8),sl=Id(Ma("SkipSelf"),4);function $s(n){return n instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}const C_="__ngContext__";function Ds(n,e){n[C_]=e}function A_(n){const e=function(n){return n[C_]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Op(n){return n.ngOriginalError}function tT(n,...e){n.error(...e)}class ia{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=this._findContext(e),i=function(n){return n&&n.ngErrorLogger||tT}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(n){return n.ngDebugContext}(e)||this._findContext(Op(e)):null}_findOriginalError(e){let t=e&&Op(e);for(;t&&Op(t);)t=Op(t);return t||null}}const w0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(tr))();function al(n){return n instanceof Function?n():n}var ko=(()=>((ko=ko||{})[ko.Important=1]="Important",ko[ko.DashCase=2]="DashCase",ko))();function I_(n,e){return undefined(n,e)}function qh(n){const e=n[3];return Yo(e)?e[3]:e}function Ld(n){return T0(n[13])}function R_(n){return T0(n[4])}function T0(n){for(;null!==n&&!Yo(n);)n=n[4];return n}function Bd(n,e,t,r,i){if(null!=r){let s,o=!1;Yo(r)?s=r:qo(r)&&(o=!0,r=r[0]);const a=yi(r);0===n&&null!==t?null==i?O0(e,t,a):ll(e,t,a,i||null,!0):1===n&&null!==t?ll(e,t,a,i||null,!0):2===n?function(n,e,t){const r=Np(n,e);r&&function(n,e,t,r){si(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,r,i){const s=t[7];s!==yi(t)&&Bd(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];jd(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function N_(n,e,t){return si(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function D0(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,np(i,-1)),t.splice(r,1)}function k_(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&D0(i,r),e>0&&(n[t-1][4]=r[4]);const s=kl(n,10+e);!function(n,e){jd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function F_(n,e){if(!(256&e[2])){const t=e[11];si(t)&&t.destroyNode&&jd(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Pp(n[1],n);for(;e;){let t=null;if(qo(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)qo(e)&&Pp(e[1],e),e=e[3];null===e&&(e=n),qo(e)&&Pp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Pp(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Nh)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):yi(e[o]),l=r[i=t[s+2]],u=t[s+3];"boolean"==typeof u?a.removeEventListener(t[s],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&si(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Yo(e[3])){t!==e[3]&&D0(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function M0(n,e,t){return function(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Kt.None||i===Kt.Emulated)return null}return Js(r,t)}(n,e.parent,t)}function ll(n,e,t,r,i){si(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function O0(n,e,t){si(n)?n.appendChild(e,t):e.appendChild(t)}function R0(n,e,t,r,i){null!==r?ll(n,e,t,r,i):O0(n,e,t)}function Np(n,e){return si(n)?n.parentNode(e):e.parentNode}function P0(n,e,t){return k0(n,e,t)}let k0=function(n,e,t){return 40&n.type?Js(n,t):null};function kp(n,e,t,r){const i=M0(n,r,e),s=e[11],a=P0(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)R0(s,i,t[l],a,!1);else R0(s,i,t,a,!1)}function Tc(n,e){if(null!==e){const t=e.type;if(3&t)return Js(e,n);if(4&t)return Fp(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Tc(n,r);{const i=n[e.index];return Yo(i)?Fp(-1,i):yi(i)}}if(32&t)return I_(e,n)()||yi(n[e.index]);{const r=L0(n,e);return null!==r?Array.isArray(r)?r[0]:Tc(qh(n[16]),r):Tc(n,e.next)}}return null}function L0(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Fp(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Tc(r,i)}return e[7]}function Yh(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ds(yi(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Yh(n,e,t.child,r,i,s,!1),Bd(e,n,i,a,s);else if(32&l){const u=I_(t,r);let c;for(;c=u();)Bd(e,n,i,c,s);Bd(e,n,i,a,s)}else 16&l?j_(n,e,r,t,i,s):Bd(e,n,i,a,s);t=o?t.projectionNext:t.next}}function jd(n,e,t,r,i,s){Yh(t,r,n.firstChild,e,i,s,!1)}function j_(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Bd(e,n,i,l[u],s);else Yh(n,e,l,o[3],i,s,!0)}function V0(n,e,t){si(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function V_(n,e,t){si(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Kh(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const U0="ng-template";function TT(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Kh(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Lp(n){return 4===n.type&&n.value!==U0}function z0(n,e,t){return e===(4!==n.type||t?n.value:U0)}function xT(n,e,t){let r=4;const i=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(Fb(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!z0(n,l,t)||""===l&&1===e.length){if(Oa(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!TT(n.attrs,u,t)){if(Oa(r))return!1;o=!0}continue}const h=DT(8&r?"class":l,i,Lp(n),t);if(-1===h){if(Oa(r))return!1;o=!0;continue}if(""!==u){let p;p=h>s?"":i[h+1].toLowerCase();const g=8&r?p:null;if(g&&-1!==Kh(g,u,0)||2&r&&u!==p){if(Oa(r))return!1;o=!0}}}}else{if(!o&&!Oa(r)&&!Oa(l))return!1;if(o&&Oa(l))continue;o=!1,r=l|1&r}}return Oa(r)||o}function Oa(n){return 0==(1&n)}function DT(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function H0(n,e,t=!1){for(let r=0;r<e.length;r++)if(xT(n,e[r],t))return!0;return!1}function RT(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function G0(n,e){return n?":not("+e.trim()+")":e}function PT(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Oa(o)&&(e+=G0(s,i),i=""),r=o,s=s||!Oa(r);t++}return""!==i&&(e+=G0(s,i)),e}const Dn={};function Zt(n){$0(fr(),Vt(),eo()+n,Mh())}function $0(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&lp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&up(e,s,0,t)}mo(t)}function ul(n,e){return n<<17|e<<2}function In(n){return n>>17&32767}function vi(n){return 2|n}function Vl(n){return(131068&n)>>2}function cl(n,e){return-131069&n|e<<2}function z_(n){return 1|n}function ew(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];qm(i),o.contentQueries(2,e[s],s)}}}function Qh(n,e,t,r,i,s,o,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,Hm(c),c[3]=c[15]=n,c[8]=t,c[10]=o||n&&n[10],c[11]=a||n&&n[11],c[12]=l||n&&n[12]||null,c[9]=u||n&&n[9]||null,c[6]=s,c[16]=2==e.type?n[16]:c,c}function Ud(n,e,t,r,i){let s=n.data[e];if(null===s)s=function(n,e,t,r,i){const s=Gm(),o=ji(),l=n.data[e]=function(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),Bn.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function(){const n=Bn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ja(s,!0),s}function zd(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zh(n,e,t){Rh(e);try{const r=n.viewQuery;null!==r&&iy(1,r,t);const i=n.template;null!==i&&tw(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ew(n,e),n.staticViewQueries&&iy(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)cx(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,sr()}}function Hd(n,e,t,r){const i=e[2];if(256==(256&i))return;Rh(e);const s=Mh();try{Hm(e),function(n){Bn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&tw(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const u=n.preOrderCheckHooks;null!==u&&lp(e,u,null)}else{const u=n.preOrderHooks;null!==u&&up(e,u,0,null),Ym(e,0)}if(function(n){for(let e=Ld(n);null!==e;e=R_(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&np(s,1),i[2]|=1024}}}(e),function(n){for(let e=Ld(n);null!==e;e=R_(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];yd(r)&&Hd(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&ew(n,e),!s)if(o){const u=n.contentCheckHooks;null!==u&&lp(e,u)}else{const u=n.contentHooks;null!==u&&up(e,u,1),Ym(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)mo(~i);else{const s=i,o=t[++r],a=t[++r];vd(o,s),a(2,e[s])}}}finally{mo(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)ux(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&iy(2,l,r),!s)if(o){const u=n.viewCheckHooks;null!==u&&lp(e,u)}else{const u=n.viewHooks;null!==u&&up(e,u,2),Ym(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,np(e[3],-1))}finally{sr()}}function WT(n,e,t,r){const i=e[10],s=!Mh(),o=Pl(e);try{s&&!o&&i.begin&&i.begin(),o&&Zh(n,e,r),Hd(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function tw(n,e,t,r,i){const s=eo(),o=2&r;try{mo(-1),o&&e.length>20&&$0(n,e,20,Mh()),t(r,i)}finally{mo(s)}}function Jh(n,e,t){!Nb()||(function(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Gs(t,e),Ds(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],u=Sa(l);u&&ix(e,t,l);const c=Cd(e,n,a,t);Ds(c,e),null!==o&&sx(0,a-i,c,l,0,o),u&&(Hs(t.index,e)[8]=c)}}(n,e,t,Js(t,e)),128==(128&t.flags)&&function(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=Bn.lFrame.currentDirectiveIndex;try{mo(o);for(let l=r;l<i;l++){const u=n.data[l],c=e[l];$m(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&dw(u,c)}}finally{mo(-1),$m(a)}}(n,e,t))}function K_(n,e,t=Js){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Up(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=zp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function zp(n,e,t,r,i,s,o,a,l,u){const c=20+r,h=c+i,p=function(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dn);return t}(c,h),g="function"==typeof u?u():u;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function iw(n,e,t,r){const i=gw(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&Gp(n).push(r,i.length-1))}function sw(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Fo(n,e,t,r,i,s,o,a){const l=Js(e,t);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(mw(n,t,c,r,i),gd(e)&&function(n,e){const t=Hs(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,si(s)?s.setProperty(l,r,i):Xm(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function X_(n,e,t,r){let i=!1;if(Nb()){const s=function(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];H0(t,o.selectors,!1)&&(i||(i=[]),wu(Gs(t,e),n,o.type),Sa(o)?(hw(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,Q_(t,n.data.length,s.length);for(let c=0;c<s.length;c++){const h=s[c];h.providersResolver&&h.providersResolver(h)}let a=!1,l=!1,u=zd(n,e,s.length,null);for(let c=0;c<s.length;c++){const h=s[c];t.mergedAttrs=kh(t.mergedAttrs,h.hostAttrs),Z_(n,t,e,u,h),rx(u,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const p=h.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),u++}!function(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let u=e.directiveStart;u<r;u++){const c=i[u],h=c.inputs,p=null===s||Lp(e)?null:ox(h,s);o.push(p),a=sw(h,u,a),l=sw(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new tt("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=kh(t.mergedAttrs,t.attrs),i}function cw(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function dw(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function hw(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function rx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Sa(e)&&(t[""]=n)}}function Q_(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Z_(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=vu(i.type)),o=new Nh(s,Sa(i),null);n.blueprint[r]=o,t[r]=o,cw(n,e,0,r,zd(n,t,i.hostVars,Dn),i)}function ix(n,e,t){const r=Js(e,n),i=Up(t),s=n[10],o=Hp(n,Qh(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function hl(n,e,t,r,i,s){const o=Js(n,e);!function(n,e,t,r,i,s,o){if(null==s)si(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?Dt(s):o(s,r||"",i);si(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function sx(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],h=o[l++];null!==a?r.setInput(t,h,u,c):t[c]=h}}}function ox(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function fw(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function ux(n,e){const t=Hs(e,n);if(yd(t)){const r=t[1];80&t[2]?Hd(r,t,r.template,t[8]):t[5]>0&&ey(t)}}function ey(n){for(let r=Ld(n);null!==r;r=R_(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Hd(o,s,o.template,s[8])}else s[5]>0&&ey(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Hs(t[r],n);yd(i)&&i[5]>0&&ey(i)}}function cx(n,e){const t=Hs(e,n),r=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Zh(r,t,t[8])}function Hp(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function ty(n){for(;n;){n[2]|=64;const e=qh(n);if(Mb(n)&&!e)return n;n=e}return null}function ry(n,e,t){const r=e[10];r.begin&&r.begin();try{Hd(n,e,n.template,t)}catch(i){throw oy(e,i),i}finally{r.end&&r.end()}}function pw(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=A_(t),i=r[1];WT(i,r,i.template,t)}}(n[8])}function iy(n,e,t){qm(0),e(n,t)}const gx=(()=>Promise.resolve(null))();function gw(n){return n[7]||(n[7]=[])}function Gp(n){return n.cleanup||(n.cleanup=[])}function oy(n,e){const t=n[9],r=t?t.get(ia,null):null;r&&r.handleError(e)}function mw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],u=n.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Ul(n,e,t){const r=Th(e,n);!function(n,e,t){si(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function $p(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=at(i,a):2==s&&(r=at(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const $d=new Gt("INJECTOR",-1);class io{get(e,t=bc){if(t===bc){const r=new Error(`NullInjectorError: No provider for ${it(e)}!`);throw r.name="NullInjectorError",r}return t}}const xc=new Gt("Set Injector scope."),ef={},_x={};let ly;function _w(){return void 0===ly&&(ly=new io),ly}function yw(n,e=null,t=null,r){return new cy(n,t,e||_w(),r)}class cy{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ea(t,a=>this.processProvider(a,e,t)),ea([e],a=>this.processInjectorType(a,[],s)),this.records.set($d,Dc(void 0,this));const o=this.records.get(xc);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:it(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=bc,r=En.Default){this.assertNotDestroyed();const i=Md(this),s=ba(void 0);try{if(!(r&En.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Gt}(e)&&gn(e);a=l&&this.injectableDefInScope(l)?Dc(dy(e),ef):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&En.Self?_w():this.parent).get(e,t=r&En.Optional&&t===bc?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Au]=o[Au]||[]).unshift(it(e)),i)throw o;return to(o,e,"R3InjectorError",this.source)}throw o}finally{ba(s),Md(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(it(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,r){if(!(e=be(e)))return!1;let i=Dl(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=Dl(s)),null==i)return!1;if(null!=i.imports&&!a){let c;r.push(o);try{ea(i.imports,h=>{this.processInjectorType(h,t,r)&&(void 0===c&&(c=[]),c.push(h))})}finally{}if(void 0!==c)for(let h=0;h<c.length;h++){const{ngModule:p,providers:g}=c[h];ea(g,m=>this.processProvider(m,p,g||qr))}}this.injectorDefTypes.add(o);const l=vu(o)||(()=>new o);this.records.set(o,Dc(l,ef));const u=i.providers;if(null!=u&&!a){const c=e;ea(u,h=>this.processProvider(h,c,u))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Ru(e=be(e))?e:be(e&&e.provide);const s=function(n,e,t){return bw(n)?Dc(void 0,n.useValue):Dc(vw(n),ef)}(e);if(Ru(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Dc(void 0,ef,!0),o.factory=()=>Ec(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===ef&&(t.value=_x,t.value=t.factory()),"object"==typeof t.value&&t.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=be(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function dy(n){const e=gn(n),t=null!==e?e.factory:vu(n);if(null!==t)return t;if(n instanceof Gt)throw new Error(`Token ${it(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const r=Su(e,"?");throw new Error(`Can't resolve all parameters for ${it(n)}: (${r.join(", ")}).`)}const t=function(n){const e=n&&(n[ho]||n[Vs]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function vw(n,e,t){let r;if(Ru(n)){const i=be(n);return vu(i)||dy(i)}if(bw(n))r=()=>be(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ec(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))r=()=>Ne(be(n.useExisting));else{const i=be(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return vu(i)||dy(i);r=()=>new i(...Ec(n.deps))}return r}function Dc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bw(n){return null!==n&&"object"==typeof n&&vp in n}function Ru(n){return"function"==typeof n}const ww=function(n,e,t){return function(n,e=null,t=null,r){const i=yw(n,e,t,r);return i._resolveInjectorDefTypes(),i}({name:t},e,n,t)};class Wn{static create(e,t){return Array.isArray(e)?ww(e,t,""):ww(e.providers,e.parent,e.name||"")}}function d9(n,e){ap(A_(n)[1],ts())}function Rn(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Sa(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Ox(n.inputs),o.declaredInputs=Ox(n.declaredInputs),o.outputs=Ox(n.outputs);const a=i.hostBindings;a&&g9(n,a);const l=i.viewQuery,u=i.contentQueries;if(l&&f9(n,l),u&&p9(n,u),Xa(n.inputs,i.inputs),Xa(n.declaredInputs,i.declaredInputs),Xa(n.outputs,i.outputs),Sa(i)&&i.data.animation){const c=n.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Rn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=kh(i.hostAttrs,t=kh(t,i.hostAttrs))}}(r)}function Ox(n){return n===dd?{}:n===qr?[]:n}function f9(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function p9(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function g9(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}Wn.THROW_IF_NOT_FOUND=bc,Wn.NULL=new io,Wn.\u0275prov=qe({token:Wn,providedIn:"any",factory:()=>Ne($d)}),Wn.__NG_ELEMENT_ID__=-1;let Tw=null;function Wp(){if(!Tw){const n=tr.Symbol;if(n&&n.iterator)Tw=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Tw=r)}}}return Tw}class Hl{constructor(e){this.wrapped=e}static wrap(e){return new Hl(e)}static unwrap(e){return Hl.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Hl}}function my(n){return!!Rx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Wp()in n)}function Rx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Nu(n,e,t){return n[e]=t}function bo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function zr(n,e,t,r){const i=Vt();return bo(i,Ta(),e)&&(fr(),hl(Oi(),i,n,e,t,r)),zr}function Mr(n,e,t,r,i,s,o,a){const l=Vt(),u=fr(),c=n+20,h=u.firstCreatePass?function(n,e,t,r,i,s,o,a,l){const u=e.consts,c=Ud(e,n,4,o||null,Aa(u,a));X_(e,t,c,Aa(u,l)),ap(e,c);const h=c.tViews=zp(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,t,r,i,s,o):u.data[c];Ja(h,!1);const p=l[11].createComment("");kp(u,l,p,h),Ds(p,l),Hp(l,l[c]=fw(p,l,p,h)),md(h)&&Jh(u,l,h),null!=o&&K_(l,h,a)}function ng(n){return _d(Bn.lFrame.contextLView,20+n)}function Ie(n,e=En.Default){const t=Vt();return null===t?Ne(n,e):Lh(ts(),t,be(n),e)}function an(n,e,t){const r=Vt();return bo(r,Ta(),e)&&Fo(fr(),Oi(),r,n,e,r[11],t,!1),an}function Lx(n,e,t,r,i){const o=i?"class":"style";mw(n,t,e.inputs[o],o,r)}function Ft(n,e,t,r){const i=Vt(),s=fr(),o=20+n,a=i[11],l=i[o]=N_(a,e,Bn.lFrame.currentNamespace),u=s.firstCreatePass?function(n,e,t,r,i,s,o){const a=e.consts,u=Ud(e,n,2,i,Aa(a,s));return X_(e,t,u,Aa(a,o)),null!==u.attrs&&$p(u,u.attrs,!1),null!==u.mergedAttrs&&$p(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,t,r):s.data[o];Ja(u,!0);const c=u.mergedAttrs;null!==c&&cp(a,l,c);const h=u.classes;null!==h&&V_(a,l,h);const p=u.styles;null!==p&&V0(a,l,p),64!=(64&u.flags)&&kp(s,i,l,u),0===Bn.lFrame.elementDepthCount&&Ds(l,i),Bn.lFrame.elementDepthCount++,md(u)&&(Jh(s,i,u),function(n,e,t){if(Fm(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,u,i)),null!==r&&K_(i,u)}function Lt(){let n=ts();ji()?hs():(n=n.parent,Ja(n,!1));const e=n;Bn.lFrame.elementDepthCount--;const t=fr();t.firstCreatePass&&(ap(t,n),Fm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&Lx(t,e,Vt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&Lx(t,e,Vt(),e.stylesWithoutHost,!1)}function xr(n,e,t,r){Ft(n,e,t,r),Lt()}function Mc(){return Vt()}function yy(n){return!!n&&"function"==typeof n.then}function Zk(n){return!!n&&"function"==typeof n.subscribe}const Mw=Zk;function Un(n,e,t,r){const i=Vt(),s=fr(),o=ts();return function(n,e,t,r,i,s,o,a){const l=md(r),c=n.firstCreatePass&&Gp(n),h=e[8],p=gw(e);let g=!0;if(3&r.type||a){const w=Js(r,e),H=a?a(w):w,V=p.length,fe=a?Me=>a(yi(Me[r.index])):r.index;if(si(t)){let Me=null;if(!a&&l&&(Me=function(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=s,Me.__ngLastListenerFn__=s,g=!1;else{s=Bx(r,e,h,s,!1);const Oe=t.listen(H,i,s);p.push(s,Oe),c&&c.push(i,fe,V,V+1)}}else s=Bx(r,e,h,s,!0),H.addEventListener(i,s,o),p.push(s),c&&c.push(i,fe,V,o)}else s=Bx(r,e,h,s,!1);const m=r.outputs;let b;if(g&&null!==m&&(b=m[i])){const w=b.length;if(w)for(let H=0;H<w;H+=2){const Ue=e[b[H]][b[H+1]].subscribe(s),st=p.length;p.push(s,Ue),c&&c.push(i,r.index,st,-(st+1))}}}(s,i,i[11],o,n,e,!!t,r),Un}function eF(n,e,t,r){try{return!1!==t(r)}catch(i){return oy(n,i),!1}}function Bx(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?Hs(n.index,e):e;0==(32&e[2])&&ty(a);let l=eF(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)l=eF(e,0,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Ei(n=1){return function(n){return(Bn.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Bn.lFrame.contextLView))[8]}(n)}function X9(n,e){let t=null;const r=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?H0(n,s,!0):RT(r,s))return i}else t=i}return t}function uF(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?In(s):Vl(s),l=!1;for(;0!==a&&(!1===l||o);){const c=n[a+1];J9(n[a],e)&&(l=!0,n[a+1]=r?z_(c):vi(c)),a=r?In(c):Vl(c)}l&&(n[t+1]=r?vi(s):z_(s))}function J9(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&xs(n,e)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cF(n){return n.substring(Is.key,Is.keyEnd)}function dF(n,e){const t=Is.textEnd;return t===e?-1:(e=Is.keyEnd=function(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Is.key=e,t),og(n,e,t))}function og(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Cr(n,e){return function(n,e,t,r){const i=Vt(),s=fr(),o=Io(2);s.firstUpdatePass&&_F(s,n,o,r),e!==Dn&&bo(i,o,e)&&vF(s,s.data[eo()],i,i[11],n,i[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=it($s(n)))),n}(e,t),r,o)}(n,e,null,!0),Cr}function ku(n){!function(n,e,t,r){const i=fr(),s=Io(2);i.firstUpdatePass&&_F(i,null,s,r);const o=Vt();if(t!==Dn&&bo(o,s,t)){const a=i.data[eo()];if(wF(a,r)&&!mF(i,s)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=at(l,t||"")),Lx(i,a,o,t,r)}else!function(n,e,t,r,i,s,o,a){i===Dn&&(i=qr);let l=0,u=0,c=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==c||null!==h;){const p=l<i.length?i[l+1]:void 0,g=u<s.length?s[u+1]:void 0;let b,m=null;c===h?(l+=2,u+=2,p!==g&&(m=h,b=g)):null===h||null!==c&&c<h?(l+=2,m=c):(u+=2,m=h,b=g),null!==m&&vF(n,e,t,r,m,b,o,a),c=l<i.length?i[l]:null,h=u<s.length?s[u]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(n,e,t){if(null==t||""===t)return qr;const r=[],i=$s(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(Ro,Fu,n,!0)}function Fu(n,e){for(let t=function(n){return function(n){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=n.length}(n),dF(n,og(n,0,Is.textEnd))}(e);t>=0;t=dF(e,t))Ro(n,cF(e),!0)}function mF(n,e){return e>=n.expandoStartIndex}function _F(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[eo()],o=mF(n,t);wF(s,r)&&null===e&&!o&&(e=!1),e=function(n,e,t,r){const i=function(n){const e=Bn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=by(t=Vx(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Vx(i,n,e,t,r),null===s){let l=function(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Vl(r))return n[In(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Vx(null,n,e,l[1],r),l=by(l,e.attrs,r),function(n,e,t,r){n[In(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=by(r,n[s].hostAttrs,t);return by(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=In(o),l=Vl(o);n[r]=t;let c,u=!1;if(Array.isArray(t)){const h=t;c=h[1],(null===c||xs(h,c)>0)&&(u=!0)}else c=t;if(i)if(0!==l){const p=In(n[a+1]);n[r+1]=ul(p,a),0!==p&&(n[p+1]=cl(n[p+1],r)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=ul(a,0),0!==a&&(n[a+1]=cl(n[a+1],r)),a=r;else n[r+1]=ul(l,0),0===a?a=r:n[l+1]=cl(n[l+1],r),l=r;u&&(n[r+1]=vi(n[r+1])),uF(n,c,r,!0),uF(n,c,r,!1),function(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&xs(s,e)>=0&&(t[r+1]=z_(t[r+1]))}(e,c,n,r,s),o=ul(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function Vx(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=by(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function by(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ro(n,o,!!t||e[++s]))}return void 0===n?null:n}function vF(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1];Rw(function(n){return 1==(1&n)}(u)?bF(l,e,t,i,Vl(u),o):void 0)||(Rw(s)||function(n){return 2==(2&n)}(u)&&(s=bF(l,null,t,i,a,o)),function(n,e,t,r,i){const s=si(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:ko.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=ko.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Th(eo(),t),i,s))}function bF(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],u=Array.isArray(l),c=u?l[1]:l,h=null===c;let p=t[i+1];p===Dn&&(p=h?qr:void 0);let g=h?a_(p,r):c===r?p:void 0;if(u&&!Rw(g)&&(g=a_(l,r)),Rw(g)&&(a=g,o))return a;const m=n[i+1];i=o?In(m):Vl(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=a_(l,r))}return a}function Rw(n){return void 0!==n}function wF(n,e){return 0!=(n.flags&(e?16:32))}function Ar(n,e=""){const t=Vt(),r=fr(),i=n+20,s=r.firstCreatePass?Ud(r,i,1,e,null):r.data[i],o=t[i]=function(n,e){return si(n)?n.createText(e):n.createTextNode(e)}(t[11],e);kp(r,t,o,s),Ja(s,!1)}function Os(n){return Lu("",n,""),Os}function Lu(n,e,t){const r=Vt(),i=function(n,e,t,r){return bo(n,Ta(),t)?e+Dt(t)+r:Dn}(r,n,e,t);return i!==Dn&&Ul(r,eo(),i),Lu}function Ic(n,e,t){const r=Vt();return bo(r,Ta(),e)&&Fo(fr(),Oi(),r,n,e,r[11],t,!0),Ic}const nf=void 0;var Pq=["en",[["a","p"],["AM","PM"],nf],[["AM","PM"],nf,nf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nf,"{1} 'at' {0}",nf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let ag={};function jF(n){return n in ag||(ag[n]=tr.ng&&tr.ng.common&&tr.ng.common.locales&&tr.ng.common.locales[n]),ag[n]}var sn=(()=>((sn=sn||{})[sn.LocaleId=0]="LocaleId",sn[sn.DayPeriodsFormat=1]="DayPeriodsFormat",sn[sn.DayPeriodsStandalone=2]="DayPeriodsStandalone",sn[sn.DaysFormat=3]="DaysFormat",sn[sn.DaysStandalone=4]="DaysStandalone",sn[sn.MonthsFormat=5]="MonthsFormat",sn[sn.MonthsStandalone=6]="MonthsStandalone",sn[sn.Eras=7]="Eras",sn[sn.FirstDayOfWeek=8]="FirstDayOfWeek",sn[sn.WeekendRange=9]="WeekendRange",sn[sn.DateFormat=10]="DateFormat",sn[sn.TimeFormat=11]="TimeFormat",sn[sn.DateTimeFormat=12]="DateTimeFormat",sn[sn.NumberSymbols=13]="NumberSymbols",sn[sn.NumberFormats=14]="NumberFormats",sn[sn.CurrencyCode=15]="CurrencyCode",sn[sn.CurrencySymbol=16]="CurrencySymbol",sn[sn.CurrencyName=17]="CurrencyName",sn[sn.Currencies=18]="Currencies",sn[sn.Directionality=19]="Directionality",sn[sn.PluralCase=20]="PluralCase",sn[sn.ExtraData=21]="ExtraData",sn))();const Nw="en-US";let VF=Nw;function zx(n){ne(n,"Expected localeId to be defined"),"string"==typeof n&&(VF=n.toLowerCase().replace(/_/g,"-"))}function $x(n,e,t,r,i){if(n=be(n),Array.isArray(n))for(let s=0;s<n.length;s++)$x(n[s],e,t,r,i);else{const s=fr(),o=Vt();let a=Ru(n)?n:be(n.provide),l=vw(n);const u=ts(),c=1048575&u.providerIndexes,h=u.directiveStart,p=u.providerIndexes>>20;if(Ru(n)||!n.multi){const g=new Nh(l,i,Ie),m=qx(a,e,i?c:c+p,h);-1===m?(wu(Gs(u,o),s,a),Wx(s,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(g),o.push(g)):(t[m]=g,o[m]=g)}else{const g=qx(a,e,c+p,h),m=qx(a,e,c,c+p),b=g>=0&&t[g],w=m>=0&&t[m];if(i&&!w||!i&&!b){wu(Gs(u,o),s,a);const H=function(n,e,t,r,i){const s=new Nh(n,t,Ie);return s.multi=[],s.index=e,s.componentProviders=0,cL(s,i,r&&!t),s}(i?IY:MY,t.length,i,r,l);!i&&w&&(t[m].providerFactory=H),Wx(s,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(H),o.push(H)}else Wx(s,n,g>-1?g:m,cL(t[i?m:g],l,!i&&r));!i&&r&&w&&t[m].componentProviders++}}}function Wx(n,e,t,r){const i=Ru(e);if(i||function(n){return!!n.useClass}(e)){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const a=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=a.indexOf(t);-1===l?a.push(t,[r,o]):a[l+1].push(r,o)}else a.push(t,o)}}}function cL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function qx(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function MY(n,e,t,r){return Yx(this.multi,[])}function IY(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Cd(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),Yx(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Yx(i,s);return s}function Yx(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Yn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function(n,e,t){const r=fr();if(r.firstCreatePass){const i=Sa(n);$x(t,r.data,r.blueprint,i,!0),$x(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class dL{}const fL="ngComponent";class PY{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${it(n)}. Did you add it to @NgModule.entryComponents?`);return e[fL]=n,e}(e)}}class gl{}function jw(...n){}function ug(n,e){return new Cn(Js(n,e))}gl.NULL=new PY;const FY=function(){return ug(ts(),Vt())};let Cn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=FY,n})();function pL(n){return n instanceof Cn?n.nativeElement:n}class rf{}let Xx=(()=>{class n{}return n.\u0275prov=qe({token:n,providedIn:"root",factory:()=>null}),n})();class Rc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const gL=new Rc("12.2.5");class mL{constructor(){}supports(e){return my(e)}create(e){return new zY(e)}}const UY=(n,e)=>e;class zY{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||UY}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<yL(r,i,s)?t:r,a=yL(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let p=0;p<u;p++){const g=p<s.length?s[p]:s[p]=0,m=g+p;c<=m&&m<u&&(s[p]=g+1)}s[o.previousIndex]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!my(e))throw new Error(`Error trying to diff '${it(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Wp()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new HY(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new _L),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _L),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class HY{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GY{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class _L{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new GY,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yL(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class vL{constructor(){}supports(e){return e instanceof Map||Rx(e)}create(){return new $Y}}class $Y{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Rx(e)))throw new Error(`Error trying to diff '${it(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new WY(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class WY{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bL(){return new cg([new mL])}let cg=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||bL()),deps:[[n,new sl,new Ki]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=qe({token:n,providedIn:"root",factory:bL}),n})();function wL(){return new dg([new vL])}let dg=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wL()),deps:[[n,new sl,new Ki]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=qe({token:n,providedIn:"root",factory:wL}),n})();function Vw(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(yi(s)),Yo(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1].firstChild;null!==u&&Vw(l[1],l,u,r)}const o=t.type;if(8&o)Vw(n,e,t.child,r);else if(32&o){const a=I_(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=L0(e,t);if(Array.isArray(a))r.push(...a);else{const l=qh(e[16]);Vw(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Ay{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Vw(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Yo(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(k_(e,r),kl(t,r))}this._attachedToViewContainer=!1}F_(this._lView[1],this._lView)}onDestroy(e){iw(this._lView[1],this._lView,null,e)}markForCheck(){ty(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ry(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){ip(!0);try{ry(n,e,t)}finally{ip(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,e){jd(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class YY extends Ay{constructor(e){super(e),this._view=e}detectChanges(){pw(this._view)}checkNoChanges(){!function(n){ip(!0);try{pw(n)}finally{ip(!1)}}(this._view)}get context(){return null}}const XY=function(n){return function(n,e,t){if(gd(n)&&!t){const r=Hs(n.index,e);return new Ay(r,r)}return 47&n.type?new Ay(e[16],e):null}(ts(),Vt(),16==(16&n))};let fs=(()=>{class n{}return n.__NG_ELEMENT_ID__=XY,n})();const JY=[new vL],tK=new cg([new mL]),nK=new dg(JY),iK=function(){return Uw(ts(),Vt())};let Bo=(()=>{class n{}return n.__NG_ELEMENT_ID__=iK,n})();const sK=Bo,oK=class extends sK{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Qh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),Zh(t,r,e),new Ay(r)}};function Uw(n,e){return 4&n.type?new oK(e,n,ug(n,e)):null}class Bu{}const uK=function(){return AL(ts(),Vt())};let Rs=(()=>{class n{}return n.__NG_ELEMENT_ID__=uK,n})();const dK=Rs,SL=class extends dK{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ug(this._hostTNode,this._hostLView)}get injector(){return new Qo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Fh(this._hostTNode,this._hostLView);if(Lb(e)){const t=tl(e,this._hostLView),r=wd(e);return new Qo(t[1].data[r+8],t)}return new Qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=CL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=r||this.parentInjector;if(!s&&null==e.ngModule&&o){const l=o.get(Bu,null);l&&(s=l)}const a=e.create(o,i,void 0,s);return this.insert(a.hostView,t),a}insert(e,t){const r=e._lView,i=r[1];if(function(n){return Yo(n[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const h=r[3],p=new SL(h,h[6],h[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],Vh(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=Fp(s,o),l=r[11],u=Np(l,o[7]);return null!==u&&function(n,e,t,r,i,s){r[0]=i,r[6]=e,jd(n,r,t,1,i,s)}(i,o[6],l,r,u,a),e.attachToViewContainerRef(),Vh(Qx(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=CL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=k_(this._lContainer,t);r&&(kl(Qx(this._lContainer),t),F_(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=k_(this._lContainer,t);return r&&null!=kl(Qx(this._lContainer),t)?new Ay(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function CL(n){return n[8]}function Qx(n){return n[8]||(n[8]=[])}function AL(n,e){let t;const r=e[n.index];if(Yo(r))t=r;else{let i;if(8&n.type)i=yi(r);else{const s=e[11];i=s.createComment("");const o=Js(n,e);ll(s,Np(s,o),i,function(n,e){return si(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=fw(r,e,i,n),Hp(e,t)}return new SL(t,n,e)}const gg={};class $L extends gl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Rr(e);return new qL(t,this.ngModule)}}function WL(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const aX=new Gt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>w0});class qL extends dL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function(n){return n.map(PT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return WL(this.componentDef.inputs)}get outputs(){return WL(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function(n,e){return{get:(t,r,i)=>{const s=n.get(t,gg,i);return s!==gg||r===gg?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(rf,hc),a=s.get(Xx,null),l=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=r?function(n,e,t){if(si(n))return n.selectRootElement(e,t===Kt.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):N_(o.createRenderer(null,this.componentDef),u,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),h=this.componentDef.onPush?576:528,p=function(n,e){return{components:[],scheduler:n||w0,clean:gx,playerHandler:e||null,flags:0}}(),g=zp(0,null,null,1,0,null,null,null,null,null),m=Qh(null,g,p,h,null,null,o,l,a,s);let b,w;Rh(m);try{const H=function(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=Ud(o,20,2,"#host",null),u=l.mergedAttrs=e.hostAttrs;null!==u&&($p(l,u,!0),null!==n&&(cp(i,n,u),null!==l.classes&&V_(i,n,l.classes),null!==l.styles&&V0(i,n,l.styles)));const c=r.createRenderer(n,e),h=Qh(t,Up(e),null,e.onPush?64:16,t[20],l,r,c,s||null,null);return o.firstCreatePass&&(wu(Gs(l,t),o,e.type),hw(o,l),Q_(l,t.length,1)),Hp(t,h),t[20]=h}(c,this.componentDef,m,o,l);if(c)if(r)cp(l,c,["ng-version",gL.full]);else{const{attrs:V,classes:fe}=function(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Oa(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);V&&cp(l,c,V),fe&&fe.length>0&&V_(l,c,fe.join(" "))}if(w=zm(g,20),void 0!==t){const V=w.projection=[];for(let fe=0;fe<this.ngContentSelectors.length;fe++){const Me=t[fe];V.push(null!=Me?Array.from(Me):null)}}b=function(n,e,t,r,i){const s=t[1],o=function(n,e,t){const r=ts();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Z_(n,r,e,zd(n,e,1,null),t));const i=Cd(e,n,r.directiveStart,r);Ds(i,e);const s=Js(r,e);return s&&Ds(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=ts();e.contentQueries(1,o,l.directiveStart)}const a=ts();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(mo(a.index),cw(t[1],a,0,a.directiveStart,a.directiveEnd,e),dw(e,o)),o}(H,this.componentDef,m,p,[d9]),Zh(g,m,null)}finally{sr()}return new cX(this.componentType,b,ug(w,m),m,w)}}class cX extends class{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new YY(i),this.componentType=e}get injector(){return new Qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const mg=new Map;class fX extends Bu{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $L(this);const r=Do(e),i=function(n){return n[qC]||null}(e);i&&zx(i),this._bootstrapComponents=al(r.bootstrap),this._r3Injector=yw(e,t,[{provide:Bu,useValue:this},{provide:gl,useValue:this.componentFactoryResolver}],it(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Wn.THROW_IF_NOT_FOUND,r=En.Default){return e===Wn||e===Bu||e===$d?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class cD extends class{}{constructor(e){super(),this.moduleType=e,null!==Do(e)&&function(n){const e=new Set;!function t(r){const i=Do(r,!0),s=i.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${it(e)} vs ${it(e.name)}`)}(s,mg.get(s),r),mg.set(s,r));const o=al(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new fX(this.moduleType,e)}}function Ww(n,e,t){const r=Cs()+n,i=Vt();return i[r]===Dn?Nu(i,r,t?e.call(t):e()):function(n,e){return n[e]}(i,r)}function QL(n,e,t,r,i,s){const o=e+t;return bo(n,o,i)?Nu(n,o+1,s?r.call(s,i):r(i)):function(n,e){const t=n[e];return t===Dn?void 0:t}(n,o+1)}function qd(n,e){const t=fr();let r;const i=n+20;t.firstCreatePass?(r=function(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}throw new tt("302",`The pipe '${n}' could not be found!`)}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=vu(r.type)),o=ba(Ie);try{const a=dp(!1),l=s();return dp(a),function(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,Vt(),i,l),l}finally{ba(o)}}function Yd(n,e,t){const r=n+20,i=Vt(),s=_d(i,r);return function(n,e){Hl.isWrapped(e)&&(e=Hl.unwrap(e),n[Bn.lFrame.bindingIndex]=Dn);return e}(i,function(n,e){return n[1].data[e].pure}(i,r)?QL(i,Cs(),e,s.transform,t,s):s.transform(t))}function dD(n){return e=>{setTimeout(n,void 0,e)}}const mn=class extends G{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,l=t||(()=>null),u=r;if(e&&"object"==typeof e){const h=e;a=null===(i=h.next)||void 0===i?void 0:i.bind(h),l=null===(s=h.error)||void 0===s?void 0:s.bind(h),u=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(l=dD(l),a&&(a=dD(a)),u&&(u=dD(u)));const c=super.subscribe({next:a,error:l,complete:u});return e instanceof A&&e.add(c),c}};function DX(){return this._results[Wp()]()}class af{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Wp(),r=af.prototype;r[t]||(r[t]=DX)}get changes(){return this._changes||(this._changes=new mn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Jo(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class hD{constructor(e){this.queryList=e,this.matches=null}clone(){return new hD(this.queryList)}setDirty(){this.queryList.setDirty()}}class fD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new fD(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==a2(e,t).matches&&this.queries[t].setDirty()}}class n2{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class pD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new pD(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class gD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new gD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,OX(t,s)),this.matchTNodeWithReadOption(e,t,Sd(t,e,s,!1,!1))}else r===Bo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Sd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Cn||i===Rs||i===Bo&&4&t.type)this.addMatch(t.index,-2);else{const s=Sd(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function OX(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function PX(n,e,t,r){return-1===t?function(n,e){return 11&n.type?ug(n,e):4&n.type?Uw(n,e):null}(e,n):-2===t?function(n,e,t){return t===Cn?ug(e,n):t===Bo?Uw(e,n):t===Rs?AL(e,n):void 0}(n,e,r):Cd(n,n[1],t,e)}function r2(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const u=o[l];a.push(u<0?null:PX(e,s[u],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function mD(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=r2(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const u=s[a+1],c=e[-l];for(let h=10;h<c.length;h++){const p=c[h];p[17]===p[3]&&mD(p[1],p,u,r)}if(null!==c[9]){const h=c[9];for(let p=0;p<h.length;p++){const g=h[p];mD(g[1],g,u,r)}}}}}return r}function pr(n){const e=Vt(),t=fr(),r=kb();qm(r+1);const i=a2(t,r);if(n.dirty&&Pl(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?mD(t,e,r,[]):r2(t,e,i,r);n.reset(s,pL),n.notifyOnChanges()}return!0}return!1}function Ri(n,e,t){const r=fr();r.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new pD),n.queries.track(new gD(e,t))}(r,new n2(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function(n,e,t){const r=new af(4==(4&t));iw(n,e,r,r.destroy),null===e[19]&&(e[19]=new fD),e[19].queries.push(new hD(r))}(r,Vt(),e)}function gr(){return function(n,e){return n[19].queries[e].queryList}(Vt(),kb())}function a2(n,e){return n.queries.getByIndex(e)}const yg=new Gt("Application Initializer");let vg=(()=>{class n{constructor(t){this.appInits=t,this.resolve=jw,this.reject=jw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(yy(s))t.push(s);else if(Mw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Ne(yg,8))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const Ly=new Gt("AppId"),cQ={provide:Ly,useFactory:function(){return`${ED()}${ED()}${ED()}`},deps:[]};function ED(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const A2=new Gt("Platform Initializer"),ju=new Gt("Platform ID"),Kw=new Gt("appBootstrapListener");let Xw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const Pc=new Gt("LocaleId"),T2=new Gt("DefaultCurrencyCode");class hQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const SD=function(n){return new cD(n)},fQ=SD,pQ=function(n){return Promise.resolve(SD(n))},x2=function(n){const e=SD(n),r=al(Do(n).declarations).reduce((i,s)=>{const o=Rr(s);return o&&i.push(new qL(o)),i},[]);return new hQ(e,r)},gQ=x2,mQ=function(n){return Promise.resolve(x2(n))};let lf=(()=>{class n{constructor(){this.compileModuleSync=fQ,this.compileModuleAsync=pQ,this.compileModuleAndAllComponentsSync=gQ,this.compileModuleAndAllComponentsAsync=mQ}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const D2=new Gt("compilerOptions"),yQ=(()=>Promise.resolve(0))();function CD(n){"undefined"==typeof Zone?yQ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class vn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mn(!1),this.onMicrotaskEmpty=new mn(!1),this.onStable=new mn(!1),this.onError=new mn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let n=tr.requestAnimationFrame,e=tr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(tr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,TD(n),n.isCheckStableRunning=!0,AD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),TD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return M2(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),I2(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return M2(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),I2(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,TD(n),AD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,bQ,jw,jw);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const bQ={};function AD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function TD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function M2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function I2(n){n._nesting--,AD(n)}class SQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mn,this.onMicrotaskEmpty=new mn,this.onStable=new mn,this.onError=new mn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let xD=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vn.assertNotInAngularZone(),CD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())CD(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Ne(vn))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),O2=(()=>{class n{constructor(){this._applications=new Map,DD.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return DD.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class CQ{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let DD=new CQ,R2=!0,P2=!1;function Pa(){return P2=!0,R2}let Kl;const N2=new Gt("AllowMultipleToken");function k2(n,e,t=[]){const r=`Platform: ${e}`,i=new Gt(r);return(s=[])=>{let o=ID();if(!o||o.injector.get(N2,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:xc,useValue:"platform"});!function(n){if(Kl&&!Kl.destroyed&&!Kl.injector.get(N2,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Kl=n.get(F2);const e=n.get(A2,null);e&&e.forEach(t=>t())}(Wn.create({providers:a,name:r}))}return function(n){const e=ID();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ID(){return Kl&&!Kl.destroyed?Kl:null}let F2=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function(n,e){let t;return t="noop"===n?new SQ:("zone.js"===n?void 0:n)||new vn({enableLongStackTrace:Pa(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:vn,useValue:a}];return a.run(()=>{const u=Wn.create({providers:l,parent:this.injector,name:t.moduleType.name}),c=t.create(u),h=c.injector.get(ia,null);if(!h)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const p=a.onError.subscribe({next:g=>{h.handleError(g)}});c.onDestroy(()=>{OD(this._modules,c),p.unsubscribe()})}),function(n,e,t){try{const r=t();return yy(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(h,a,()=>{const p=c.injector.get(vg);return p.runInitializers(),p.donePromise.then(()=>(zx(c.injector.get(Pc,Nw)||Nw),this._moduleDoBootstrap(c),c))})})}bootstrapModule(t,r=[]){const i=L2({},r);return function(n,e,t){const r=new cD(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Kd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${it(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Ne(Wn))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();function L2(n,e){return Array.isArray(e)?e.reduce(L2,n):Object.assign(Object.assign({},n),e)}let Kd=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new N(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),l=new N(u=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{vn.assertNotInAngularZone(),CD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{vn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{c.unsubscribe(),h.unsubscribe()}});this.isStable=kn(a,l.pipe(bs()))}bootstrap(t,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=t instanceof dL?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Bu),a=i.create(Wn.NULL,[],r||i.selector,s),l=a.location.nativeElement,u=a.injector.get(xD,null),c=u&&a.injector.get(O2);return u&&c&&c.registerApplication(l,u),a.onDestroy(()=>{this.detachView(a.hostView),OD(this.components,a),c&&c.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;OD(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Kw,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Ne(vn),Ne(Wn),Ne(ia),Ne(gl),Ne(vg))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();function OD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const QQ=k2(null,"core",[{provide:ju,useValue:"unknown"},{provide:F2,deps:[Wn]},{provide:O2,deps:[]},{provide:Xw,deps:[]}]),nZ=[{provide:Kd,useClass:Kd,deps:[vn,Wn,ia,gl,vg]},{provide:aX,deps:[vn],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:vg,useClass:vg,deps:[[new Ki,yg]]},{provide:lf,useClass:lf,deps:[]},cQ,{provide:cg,useFactory:function(){return tK},deps:[]},{provide:dg,useFactory:function(){return nK},deps:[]},{provide:Pc,useFactory:function(n){return zx(n=n||"undefined"!=typeof $localize&&$localize.locale||Nw),n},deps:[[new Od(Pc),new Ki,new sl]]},{provide:T2,useValue:"USD"}];let iZ=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Ne(Kd))},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({providers:nZ}),n})(),lE=null;function Vu(){return lE}const cn=new Gt("DocumentToken");let df=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({factory:rJ,token:n,providedIn:"platform"}),n})();function rJ(){return Ne(h3)}let h3=(()=>{class n extends df{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vu().getBaseHref(this._doc)}onPopState(t){const r=Vu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Vu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){f3()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){f3()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Ne(cn))},n.\u0275prov=qe({factory:sJ,token:n,providedIn:"platform"}),n})();function f3(){return!!window.history.pushState}function sJ(){return new h3(Ne(cn))}function kc(n){return n&&"?"!==n[0]?"?"+n:n}let hf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({factory:oJ,token:n,providedIn:"root"}),n})();function oJ(n){const e=Ne(cn).location;return new g3(Ne(df),e&&e.origin||"")}const qD=new Gt("appBaseHref");let g3=(()=>{class n extends hf{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return function(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+kc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+kc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+kc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Ne(df),Ne(qD,8))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();var ps=(()=>((ps=ps||{})[ps.Zero=0]="Zero",ps[ps.One=1]="One",ps[ps.Two=2]="Two",ps[ps.Few=3]="Few",ps[ps.Many=4]="Many",ps[ps.Other=5]="Other",ps))();const mJ=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=jF(e);if(t)return t;const r=e.split("-")[0];if(t=jF(r),t)return t;if("en"===r)return Pq;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[sn.PluralCase]};class yE{}let $J=(()=>{class n extends yE{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(mJ(r||this.locale)(t)){case ps.Zero:return"zero";case ps.One:return"one";case ps.Two:return"two";case ps.Few:return"few";case ps.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(Ne(Pc))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class qJ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qd=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,o)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new qJ(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new T3(i,a);r.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new T3(i,a);r.push(l)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ie(Rs),Ie(Bo),Ie(cg))},n.\u0275dir=Ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class T3{constructor(e,t){this.record=e,this.view=t}}class JJ{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class eee{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const tee=new eee,nee=new JJ;let bE=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(yy(t))return tee;if(Zk(t))return nee;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${it(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(Ie(fs,16))},n.\u0275pipe=Us({name:"async",type:n,pure:!1}),n})(),Qi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({providers:[{provide:yE,useClass:$J}]}),n})();const P3="browser";function ff(n){return n===P3}class oM extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){lE||(lE=n)}(new oM)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Gy=Gy||document.querySelector("base"),Gy?Gy.getAttribute("href"):null);return null==t?null:function(n){wE=wE||document.createElement("a"),wE.setAttribute("href",n);const e=wE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gy=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let wE,Gy=null;const L3=new Gt("TRANSITION_ID"),xee=[{provide:yg,useFactory:function(n,e,t){return()=>{t.get(vg).donePromise.then(()=>{const r=Vu(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[L3,cn,Wn],multi:!0}];class aM{static init(){!function(n){DD=n}(new aM)}addToWindow(e){tr.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},tr.getAllAngularTestabilities=()=>e.getAllTestabilities(),tr.getAllAngularRootElements=()=>e.getAllRootElements(),tr.frameworkStabilizers||(tr.frameworkStabilizers=[]),tr.frameworkStabilizers.push(r=>{const i=tr.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?Vu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Dee=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const $y=new Gt("EventManagerPlugins");let SE=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Ne($y),Ne(vn))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class lM{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Vu().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let j3=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),Wy=(()=>{class n extends j3{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(V3),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(V3))}}return n.\u0275fac=function(t){return new(t||n)(Ne(cn))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();function V3(n){Vu().remove(n)}const uM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},cM=/%COMP%/g;function CE(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?CE(n,i,t):(i=i.replace(cM,n),t.push(i))}return t}function H3(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let AE=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new dM(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Kt.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Hee(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Kt.ShadowDom:return new Gee(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=CE(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Ne(SE),Ne(Wy),Ne(Ly))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class dM{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(uM[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=uM[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=uM[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ko.DashCase|ko.Important)?e.style.setProperty(t,r,i&ko.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ko.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,H3(r)):this.eventManager.addEventListener(e,t,H3(r))}}class Hee extends dM{constructor(e,t,r,i){super(e),this.component=r;const s=CE(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(cM,n)}(i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(cM,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Gee extends dM{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=CE(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let $ee=(()=>{class n extends lM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Ne(cn))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const W3=["alt","control","meta","shift"],Zee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Jee={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ete=(()=>{class n extends lM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vu().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(W3.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&q3.hasOwnProperty(e)&&(e=q3[e]))}return Zee[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),W3.forEach(s=>{s!=i&&Jee[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(Ne(cn))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const lte=k2(QQ,"browser",[{provide:ju,useValue:P3},{provide:A2,useValue:function(){oM.makeCurrent(),aM.init()},multi:!0},{provide:cn,useFactory:function(){return function(n){Vr=n}(document),document},deps:[]}]),ute=[[],{provide:xc,useValue:"root"},{provide:ia,useFactory:function(){return new ia},deps:[]},{provide:$y,useClass:$ee,multi:!0,deps:[cn,vn,ju]},{provide:$y,useClass:ete,multi:!0,deps:[cn]},[],{provide:AE,useClass:AE,deps:[SE,Wy,Ly]},{provide:rf,useExisting:AE},{provide:j3,useExisting:Wy},{provide:Wy,useClass:Wy,deps:[cn]},{provide:xD,useClass:xD,deps:[vn]},{provide:SE,useClass:SE,deps:[$y,vn]},{provide:class{},useClass:Dee,deps:[]},[]];let pM=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ly,useValue:t.appId},{provide:L3,useExisting:Ly},xee]}}}return n.\u0275fac=function(t){return new(t||n)(Ne(n,12))},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({providers:ute,imports:[Qi,iZ]}),n})();"undefined"!=typeof window&&window;class _te extends A{constructor(e,t){super()}schedule(e,t=0){return this}}class TE extends _te{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let K3=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,i){return new this.SchedulerAction(this,t).schedule(i,r)}}return n.now=()=>Date.now(),n})();class eu extends K3{constructor(e,t=K3.now){super(e,()=>eu.delegate&&eu.delegate!==this?eu.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return eu.delegate&&eu.delegate!==this?eu.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const bte=new class extends eu{}(class extends TE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),Uu=new N(n=>n.complete());function xE(n){return n?function(n){return new N(e=>n.schedule(()=>e.complete()))}(n):Uu}function on(...n){let e=n[n.length-1];return pe(e)?(n.pop(),ze(n,e)):Mn(n)}function Sg(n,e){return new N(e?t=>e.schedule(Ete,0,{error:n,subscriber:t}):t=>t.error(n))}function Ete({error:n,subscriber:e}){e.error(n)}class da{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return on(this.value);case"E":return Sg(this.error);case"C":return xE()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new da("N",e):da.undefinedValueNotification}static createError(e){return new da("E",void 0,e)}static createComplete(){return da.completeNotification}}da.completeNotification=new da("C"),da.undefinedValueNotification=new da("N",void 0);class DE extends y{constructor(e,t,r=0){super(e),this.scheduler=t,this.delay=r}static dispatch(e){const{notification:t,destination:r}=e;t.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(DE.dispatch,this.delay,new Cte(e,this.destination)))}_next(e){this.scheduleMessage(da.createNext(e))}_error(e){this.scheduleMessage(da.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(da.createComplete()),this.unsubscribe()}}class Cte{constructor(e,t){this.notification=e,this.destination=t}}class Cg extends G{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Ate(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;let o;if(this.closed)throw new U;if(this.isStopped||this.hasError?o=A.EMPTY:(this.observers.push(e),o=new re(this,e)),i&&e.add(e=new DE(e,i)),t)for(let a=0;a<s&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||bte).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,s=i.length;let o=0;for(;o<s&&!(e-i[o].time<r);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&i.splice(0,o),i}}class Ate{constructor(e,t){this.time=e,this.value=t}}function Si(n,e){return"function"==typeof e?t=>t.pipe(Si((r,i)=>ke(n(r,i)).pipe(ue((s,o)=>e(r,s,i,o))))):t=>t.lift(new Tte(n))}class Tte{constructor(e){this.project=e}call(e,t){return t.subscribe(new xte(e,this.project))}}class xte extends ye{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new At(this),i=this.destination;i.add(r),this.innerSubscription=R(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const ME={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if("undefined"==typeof window)return ME.schedule(n,0);if(void 0===window.requestAnimationFrame)return ME.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let mM;function Lte(n,e,t){let r=t;return function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((i,s)=>!("*"===i||!function(n,e){if(!mM){const t=Element.prototype;mM=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&mM.call(n,e)}(n,i)||(r=s,0))),r}class jte{constructor(e,t){this.componentFactory=t.get(gl).resolveComponentFactory(e)}create(e){return new Vte(this.componentFactory,e)}}class Vte{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Cg(1),this.events=this.eventEmitters.pipe(Si(r=>kn(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(vn),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=ME.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t){this.runInZone(()=>{null!==this.componentRef?function(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=Wn.create({providers:[],parent:this.injector}),r=function(n,e){const t=n.childNodes,r=e.map(()=>[]);let i=-1;e.some((s,o)=>"*"===s&&(i=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Lte(a,e,i);-1!==l&&r[l].push(a)}return r}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,r,e),this.viewChangeDetectorRef=this.componentRef.injector.get(fs),this.implementsOnChanges=function(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Kd).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e))}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:r,templateName:i})=>e.instance[r].pipe(ue(o=>({name:i,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=ME.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[e];if(r)return void(r.currentValue=t);const i=this.unchangedInputs.has(e),s=i?void 0:this.getInputValue(e);this.inputChanges[e]=new ep(s,t,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Ute extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function Lc(n,e,t,r){return Q(t)&&(r=t,t=void 0),r?Lc(n,e,t).pipe(ue(i=>F(i)?r(...i):r(i))):new N(i=>{X3(n,e,function(o){i.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},i,t)})}function X3(n,e,t,r,i){let s;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const o=n;n.addEventListener(e,t,i),s=()=>o.removeEventListener(e,t,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const o=n;n.on(e,t),s=()=>o.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const o=n;n.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let o=0,a=n.length;o<a;o++)X3(n[o],e,t,r,i)}r.add(s)}function Na(n,e,t,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Ci(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}class Pi extends G{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new U;return this._value}next(e){super.next(this._value=e)}}class tB extends y{notifyNext(e,t,r,i,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Yte extends y{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function nB(n,e,t,r,i=new Yte(n,t,r)){if(!i.closed)return e instanceof N?e.subscribe(i):Re(e)(i)}function RE(...n){return Ot(1)(on(...n))}Object.create(Error.prototype);const sB=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Qr(n){return e=>0===n?xE():e.lift(new Qte(n))}class Qte{constructor(e){if(this.total=e,this.total<0)throw new sB}call(e,t){return t.subscribe(new Zte(e,this.total))}}class Zte extends y{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Zr(n,e){return function(r){return r.lift(new tne(n,e))}}class tne{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new nne(e,this.predicate,this.thisArg))}}class nne extends y{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Hu(n){return function(t){const r=new rne(n),i=t.lift(r);return r.caught=i}}class rne{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ine(e,this.selector,this.caught))}}class ine extends ye{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(s){return void super.error(s)}this._unsubscribeAndRecycle();const r=new At(this);this.add(r);const i=R(t,r);i!==r&&this.add(i)}}}function NE(n=null){return e=>e.lift(new cne(n))}class cne{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new dne(e,this.defaultValue))}}class dne extends y{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function eh(){}function is(n,e,t){return function(i){return i.lift(new fne(n,e,t))}}class fne{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new pne(e,this.nextOrObserver,this.error,this.complete))}}class pne extends y{constructor(e,t,r,i){super(e),this._tapNext=eh,this._tapError=eh,this._tapComplete=eh,this._tapError=r||eh,this._tapComplete=i||eh,Q(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||eh,this._tapError=t.error||eh,this._tapComplete=t.complete||eh)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class wie{constructor(e){this.total=e}call(e,t){return t.subscribe(new Eie(e,this.total))}}class Eie extends y{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}let lj=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ut({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const nv=new Gt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),uj=new Gt("ngx-window",{providedIn:"root",factory:()=>function(n){return ff(n)?window:null}(xu(ju))}),Aie=new Gt("ngx-data-layer",{providedIn:"root",factory:()=>function(n){return n?n.dataLayer=n.dataLayer||[]:null}(xu(uj))}),zM=new Gt("ngx-gtag-fn",{providedIn:"root",factory:()=>function(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(xu(uj),xu(Aie))});let QE=(()=>{class n{constructor(t,r,i){this.settings=t,this._document=r,this._gtag=i}get document(){return this._document}throw(t){(this.settings.enableTracing||Pa())&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((r,[i,s])=>Object.defineProperty(r,i,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(r=>void 0!==r))}catch(r){this.throw(r)}}event(t,r,i,s,o){try{const a=new Map;r&&a.set("event_category",r),i&&a.set("event_label",i),s&&a.set("value",s),void 0!==o&&a.set("interaction",o);const l=this.toKeyValue(a);l?this.gtag("event",t,l):this.gtag("event",t)}catch(a){this.throw(a)}}pageView(t,r,i,s){try{const o=new Map([["page_path",t]]);r&&o.set("page_title",r),(i||this.document)&&o.set("page_location",i||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,r,i,s,o){try{const a=new Map([["screen_name",t],["app_name",r]]);i&&a.set("app_id",i),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(r){this.throw(r)}}exception(t,r){try{const i=new Map;t&&i.set("description",t),r&&i.set("fatal",r),this.toKeyValue(i)?this.gtag("event","exception",this.toKeyValue(i)):this.gtag("event","exception")}catch(i){this.throw(i)}}}return n.\u0275fac=function(t){return new(t||n)(Ne(nv),Ne(cn),Ne(zM))},n.\u0275prov=qe({factory:function(){return new n(Ne(nv),Ne(cn),Ne(zM))},token:n,providedIn:"root"}),n})(),cj=(()=>{class n{constructor(t,r,i,s){this.gaCategoryDirective=t,this.gaService=r,this.settings=i,this.el=s,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=Lc(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){(Pa()||this.settings.enableTracing)&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(Ie(lj,8),Ie(QE),Ie(nv),Ie(Cn))},n.\u0275dir=Ut({type:n,selectors:[["","gaEvent",""]],inputs:{gaBind:"gaBind",gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent"},exportAs:["gaEvent"]}),n})();const xie={provide:yg,multi:!0,useFactory:function(n,e,t){return()=>Ci(this,void 0,void 0,function*(){var r;if(!n.trackingCode)return void(Pa()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(Pa()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||Pa()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=null!==(r=null==n?void 0:n.initCommands)&&void 0!==r?r:[],n.initCommands.find(o=>"config"===o.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(o=>"js"===o.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const o of n.initCommands)e(o.command,...o.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[nv,zM,cn]};new Gt("ngx-google-analytics-routing-settings",{factory:()=>({})});let ZE=(()=>{class n{static forRoot(t,r=[],i,s,o){return{ngModule:n,providers:[{provide:nv,useValue:{trackingCode:t,initCommands:r,uri:i,enableTracing:s,nonce:o}},xie]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[]]}),n})();function Oie(n){return Object.entries(n).reduce((e,[t,r])=>(null!=r&&(e[t]=`${r}`),e),{})}let Pie=(()=>{class n{static forRoot(t){const{providers:r=[]}=ZE.forRoot(t.gaToken,function(n){const{appName:e,projectName:t,developmentMode:r}=n;return[{command:"set",values:[Oie({appName:e,projectName:t,developmentMode:r})]}]}(t));return{ngModule:n,providers:r}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[ZE]]}),n})();const Og={production:!0,disableDbWorker:!0,acceptableViewerDomains:["https://portal.hubmapconsortium.org","https://portal.test.hubmapconsortium.org"],organNodes:["http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0002049"],dbOptions:{ccfOwlUrl:"https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")||""},googleAnalyticsToken:"G-ERNVZ1Q4KE"};function Vc(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,o,s=0,a=!1,l=!1;return function(c){let h;s++,!i||a?(a=!1,i=new Cg(n,e,r),h=i.subscribe(this),o=c.subscribe({next(p){i.next(p)},error(p){a=!0,i.error(p)},complete(){l=!0,o=void 0,i.complete()}}),l&&(o=void 0)):h=i.subscribe(this),this.add(()=>{s--,h.unsubscribe(),h=void 0,o&&!l&&t&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function rv(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new kie(n,t))}}class kie{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Fie(e,this.observables,this.project))}}class Fie extends tB{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let s=0;s<i;s++)this.toRespond.push(s);for(let s=0;s<i;s++)this.add(nB(this,t[s],void 0,s))}notifyNext(e,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const s=i.indexOf(r);-1!==s&&i.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function fj(n){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function HM(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||fj()}const pj="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",JE=HM();class Bie{constructor(e,t,r="sessionStorage"){this.storage=function(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(e){return null}}(r),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function GM(n,e,t,r=600){const i=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>r&&(t=Math.min(t,r/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}const gj={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function mj(n){return"string"==typeof n?gj[n.toUpperCase()]||gj.WHITE:n}function eS(n,e){if(!n)throw new Error(e||"Assertion failed")}const nu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},iv=nu.window||nu.self||nu.global,_j=nu.process||{};function Rg(){let n;if(JE&&iv.performance)n=iv.performance.now();else if(_j.hrtime){const e=_j.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}console;const Pg={debug:JE&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},$ie={enabled:!0,level:0};function wl(){}const yj={},vj={once:!0};function Wie(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}let bj=(()=>{class n{constructor({id:t}={id:""}){this.id=t,this.VERSION=pj,this._startTs=Rg(),this._deltaTs=Rg(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new Bie("__probe-".concat(this.id,"__"),$ie),this.userData={},this.timeStamp("".concat(this.id," started")),function(n,e=["constructor"]){const t=Object.getPrototypeOf(n),r=Object.getOwnPropertyNames(t);for(const i of r)"function"==typeof n[i]&&(e.find(s=>i===s)||(n[i]=n[i].bind(n)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Rg()-this._startTs).toPrecision(10))}getDelta(){return Number((Rg()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}assert(t,r){eS(t,r)}warn(t){return this._getLogFunction(0,t,Pg.warn,arguments,vj)}error(t){return this._getLogFunction(0,t,Pg.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Pg.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Pg.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){return this._getLogFunction(t,r,Pg.debug||Pg.info,arguments,vj)}table(t,r,i){return r?this._getLogFunction(t,r,console.table||wl,i&&[i],{tag:Wie(r)}):wl}image({logLevel:t,priority:r,image:i,message:s="",scale:o=1}){return this._shouldLog(t||r)?JE?function({image:n,message:e="",scale:t=1}){if("string"==typeof n){const i=new Image;return i.onload=()=>{const s=GM(i,e,t);console.log(...s)},i.src=n,wl}const r=n.nodeName||"";if("img"===r.toLowerCase())return console.log(...GM(n,e,t)),wl;if("canvas"===r.toLowerCase()){const i=new Image;return i.onload=()=>console.log(...GM(i,e,t)),i.src=n.toDataURL(),wl}return wl}({image:i,message:s,scale:o}):function({image:n,message:e="",scale:t=1}){let r=null;try{r=Ke(5307)}catch(i){}return r?()=>r(n,{fit:"box",width:"".concat(Math.round(80*t),"%")}).then(i=>console.log(i)):wl}({image:i,message:s,scale:o}):wl}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||wl)}group(t,r,i={collapsed:!1}){i=Ej({logLevel:t,message:r,opts:i});const{collapsed:s}=i;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r,i={}){return this.group(t,r,Object.assign({},i,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||wl)}withGroup(t,r,i){this.group(t,r)();try{i()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=wj(t)}_getLogFunction(t,r,i,s=[],o){if(this._shouldLog(t)){o=Ej({logLevel:t,message:r,args:s,opts:o}),eS(i=i||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Rg();const a=o.tag||o.message;if(o.once){if(yj[a])return wl;yj[a]=Rg()}return r=function(n,e,t){if("string"==typeof e){const r=t.time?function(n,e=8){const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function(n,e,t){return!JE&&"string"==typeof n&&(e&&(e=mj(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=mj(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(r,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,o.message,o),i.bind(console,r,...o.args)}return wl}}return n.VERSION=pj,n})();function wj(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return eS(Number.isFinite(e)&&e>=0),e}function Ej(n){const{logLevel:e,message:t}=n;n.logLevel=wj(e);const r=n.args?Array.from(n.args):[];for(;r.length&&r.shift()!==t;);switch(n.args=r,typeof e){case"string":case"function":void 0!==t&&r.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const i=typeof n.message;return eS("string"===i||"object"===i),Object.assign(n,n.opts)}const Ir=new bj({id:"deck"});var Or={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Or,"IDENTITY",{get:function(){return Ir.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var Wu={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Sj={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function _n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Cj(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Sn(n,e,t){return e&&Cj(n.prototype,e),t&&Cj(n,t),n}function Tn(n){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function oo(n,e,t){return(oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(i,s,o){var a=function(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=Tn(n)););return n}(i,s);if(a){var l=Object.getOwnPropertyDescriptor(a,s);return l.get?l.get.call(o):l.value}})(n,e,t||n)}function $M(n,e){return($M=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(n,e)}function Ai(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&$M(n,e)}function di(n){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Aj(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ss(n,e){return!e||"object"!==di(e)&&"function"!=typeof e?Aj(n):e}function WM(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Tj(n,e){if(n){if("string"==typeof n)return WM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WM(n,e)}}function os(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,r=[],i=!0,s=!1;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(l){s=!0,a=l}finally{try{!i&&null!=t.return&&t.return()}finally{if(s)throw a}}return r}}(n,e)||Tj(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const dn=new bj({id:"luma.gl"});function zo(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function tS(n){return"undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&Number.isFinite(n._version))}function mr(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}function nS(n){return zo(tS(n),"Invalid WebGLRenderingContext"),n}function Ho(n){return zo(mr(n),"Requires WebGL2"),n}var Ti=Ke(4761);const sv={};const ov=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new n.VertexAttrib(t);this.attribs[r]=i}this.maxAttrib=0};(ov.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const bf=function(e){const t=this;this.gl=e,function(n){const e=n.getError;n.getError=function(){let r;do{r=e.apply(n),0!==r&&(sv[r]=!0)}while(0!==r);for(r in sv)if(sv[r])return delete sv[r],parseInt(r,10);return 0}}(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,u,c){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const p=h.attribs[s];return p.buffer=t.currentArrayBuffer,p.size=o,p.type=a,p.normalized=l,p.stride=u,p.offset=c,p.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{Ti.CO.console&&Ti.CO.console.log&&Ti.CO.console.log("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};bf.prototype.VERTEX_ARRAY_BINDING_OES=34229,bf.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new ov(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},bf.prototype.createVertexArrayOES=function(){const e=new ov(this);return this.vertexArrayObjects.push(e),e},bf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},bf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof ov&&e.hasBeenBound&&e.ext===this)},bf.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function(n,e){sv[n]=!0,void 0!==e&&function(n){Ti.CO.console&&Ti.CO.console.error&&Ti.CO.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const u=s.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?r.enableVertexAttribArray.call(t,l):r.disableVertexAttribArray.call(t,l)),u.enabled){let h=!1;(!i||u.buffer!==c.buffer)&&(o!==u.buffer&&(r.bindBuffer.call(t,34962,u.buffer),o=u.buffer),h=!0),(h||u.cached!==c.cached)&&r.vertexAttribPointer.call(t,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(t,34962,this.currentArrayBuffer)};const xj="OES_element_index",Dj="WEBGL_draw_buffers",Mj="WEBGL_debug_renderer_info",hi=n=>mr(n)?void 0:0,_se={3074:n=>mr(n)?void 0:36064,35723:n=>mr(n)?void 0:4352,35977:hi,32937:hi,36795:(n,e)=>{const t=mr(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},37445:(n,e)=>{const t=n.getExtension(Mj);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},37446:(n,e)=>{const t=n.getExtension(Mj);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},34047:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:hi,35071:hi,37447:hi,36063:(n,e)=>{if(!mr(n)){const t=n.getExtension(Dj);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:hi,35374:hi,35377:hi,34852:n=>{if(!mr(n)){const e=n.getExtension(Dj);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(xj)?2147483647:65535,33001:n=>n.getExtension(xj)?16777216:65535,33e3:n=>16777216,37157:hi,35373:hi,35657:hi,36183:hi,37137:hi,34045:hi,35978:hi,35979:hi,35968:hi,35376:hi,35375:hi,35659:hi,37154:hi,35371:hi,35658:hi,35076:hi,35077:hi,35380:hi},Ij="ANGLE_instanced_arrays",Oj={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{zo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Ij]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){zo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{zo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{zo(!1)},deleteQuery:()=>{zo(!1)},beginQuery:()=>{zo(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},qM={readBuffer:(n,e,t)=>{mr(n)&&e(t)},getVertexAttrib:(n,e,t,r)=>{const{webgl2:i,ext:s}=function(n,e){return{webgl2:mr(n),ext:n.getExtension("ANGLE_instanced_arrays")}}(n);let o;switch(r){case 35069:o=!!i&&void 0;break;case 35070:o=i||s?void 0:0}return void 0!==o?o:e(t,r)},getProgramParameter:(n,e,t,r)=>{if(!mr(n))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,r)},getInternalformatParameter:(n,e,t,r,i)=>{if(!mr(n))switch(i){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,r,i)},getTexParameter(n,e,t,r){switch(r){case 34046:const{extensions:i}=n.luma,s=i.EXT_texture_filter_anisotropic;r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,r)},getParameter:function(n,e,t){const r=_se[t],i="function"==typeof r?r(n,e,t):r;return void 0!==i?i:e(t)},hint:(n,e,t,r)=>e(t,r)};function Ise(n,{extension:e,target:t,target2:r}){const i=Oj[e];zo(i);const{meta:s={}}=i,{suffix:o=""}=s,a=n.getExtension(e);for(const l of Object.keys(i)){const u=`${l}${o}`;let c=null;"meta"===l||"function"==typeof n[l]||(a&&"function"==typeof a[u]?c=(...h)=>a[u](...h):"function"==typeof i[l]&&(c=i[l].bind(t))),c&&(t[l]=c,r[l]=c)}}("undefined"!=typeof global?global:window).polyfillContext=function(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const t=n.getExtension;n.getExtension=function(i){return t.call(this,i)||("OES_vertex_array_object"!==i?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new bf(this)),this.__OESVertexArrayObject))}}(n),function(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&Ise(n,{extension:t,target:n.luma,target2:n})}(n,Oj),function(n,{target:e,target2:t}){Object.keys(qM).forEach(r=>{if("function"==typeof qM[r]){const i=n[r]?n[r].bind(n):()=>{},s=qM[r].bind(null,n,i);e[r]=s,t[r]=s}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const YM={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},nh=(n,e,t)=>e?n.enable(t):n.disable(t),Rj=(n,e,t)=>n.hint(t,e),ka=(n,e,t)=>n.pixelStorei(t,e);function av(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const Pse={3042:nh,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:nh,2885:(n,e)=>n.cullFace(e),2929:nh,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:nh,35723:Rj,36006:(n,e)=>{const t=mr(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:Rj,2849:(n,e)=>n.lineWidth(e),32823:nh,32824:"polygonOffset",10752:"polygonOffset",35977:nh,32938:"sampleCoverage",32939:"sampleCoverage",3089:nh,3088:(n,e)=>n.scissor(...e),2960:nh,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:ka,3317:ka,37440:ka,37441:ka,37443:ka,3330:ka,3332:ka,3331:ka,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:ka,32878:ka,3316:ka,3315:ka,32877:ka,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=av(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=av(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=av(e)?e:[e,e];const[t,r]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,r)},stencilFunc:(n,e)=>{e=av(e)&&3===e.length?[...e,...e]:e;const[t,r,i,s,o,a]=e;n.stencilFuncSeparate(1028,t,r,i),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=av(e)&&3===e.length?[...e,...e]:e;const[t,r,i,s,o,a]=e;n.stencilOpSeparate(1028,t,r,i),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function Zi(n,e,t){return void 0!==e[n]?e[n]:t[n]}const Nse={blendEquation:(n,e,t)=>n.blendEquationSeparate(Zi(32777,e,t),Zi(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Zi(32969,e,t),Zi(32968,e,t),Zi(32971,e,t),Zi(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Zi(32824,e,t),Zi(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Zi(32938,e,t),Zi(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Zi(2962,e,t),Zi(2967,e,t),Zi(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Zi(34816,e,t),Zi(36003,e,t),Zi(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Zi(2964,e,t),Zi(2965,e,t),Zi(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Zi(34817,e,t),Zi(34818,e,t),Zi(34819,e,t))},Pj={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,r,i)=>n({32773:new Float32Array([e,t,r,i])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,r,i)=>n({32969:e,32968:t,32971:r,32970:i}),clearColor:(n,e,t,r,i)=>n({3106:new Float32Array([e,t,r,i])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,r,i)=>n({3107:[e,t,r,i]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,r,i)=>n({3088:new Int32Array([e,t,r,i])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,r)=>n({2962:e,2967:t,2963:r,34816:e,36003:t,36004:r}),stencilFuncSeparate:(n,e,t,r,i)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(n,e,t,r)=>n({2964:e,2965:t,2966:r,34817:e,34818:t,34819:r}),stencilOpSeparate:(n,e,t,r,i)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(n,e,t,r,i)=>n({2978:[e,t,r,i]})},qu=(n,e)=>n.isEnabled(e),Nj={3042:qu,2884:qu,2929:qu,3024:qu,32823:qu,32926:qu,32928:qu,3089:qu,2960:qu,35977:qu};function kj(n){for(const e in n)return!1;return!0}function kse(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),r=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&r&&n.length===e.length){for(let i=0;i<n.length;++i)if(n[i]!==e[i])return!1;return!0}return!1}function Fj(n,e){const t=n[e].bind(n);n[e]=function(...i){const s=i[0];return s in n.state.cache||(n.state.cache[s]=t(...i)),n.state.enable?n.state.cache[s]:t(...i)},Object.defineProperty(n[e],"name",{value:`${e}-from-cache`,configurable:!1})}function Fse(n,e,t){const r=n[e].bind(n);n[e]=function(...s){const{valueChanged:o,oldValue:a}=t(n.state._updateCache,...s);return o&&r(...s),a},Object.defineProperty(n[e],"name",{value:`${e}-to-cache`,configurable:!1})}class Bse{constructor(e,{copyState:t=!1,log:r=(()=>{})}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function(n,e){if("number"==typeof(e=e||YM)){const i=e,s=Nj[i];return s?s(n,i):n.getParameter(i)}const t=Array.isArray(e)?e:Object.keys(e),r={};for(const i of t){const s=Nj[i];r[i]=s?s(n,Number(i)):n.getParameter(Number(i))}return r}(e):Object.assign({},YM),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){zo(this.stateStack.length>0),Uc(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let r,t=!1;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){zo(void 0!==s);const o=e[s],a=this.cache[s];kse(o,a)||(t=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:r}}}function Lj(n,e={}){const{enable:t=!0,copyState:r}=e;if(zo(void 0!==r),!n.state){const i="undefined"!=typeof global?global:window,{polyfillContext:s}=i;s&&s(n),n.state=new Bse(n,{copyState:r}),function(n){const e=n.useProgram.bind(n);n.useProgram=function(r){n.state.program!==r&&(e(r),n.state.program=r)}}(n);for(const o in Pj)Fse(n,o,Pj[o]);Fj(n,"getParameter"),Fj(n,"isEnabled")}return n.state.enable=t,n}function Bj(n){zo(n.state),n.state.pop()}function Uc(n,e){if(zo(tS(n),"setParameters requires a WebGL context"),kj(e))return;const t={};for(const i in e){const s=Number(i),o=Pse[i];o&&("string"==typeof o?t[o]=!0:o(n,e[i],s))}const r=n.state&&n.state.cache;if(r)for(const i in t)Nse[i](n,e,r)}function ru(n,e,t){if(kj(e))return t(n);const{nocatch:r=!0}=e;let i;if(function(n){n.state||Lj(n,{copyState:!1}),n.state.push()}(n),Uc(n,e),r)i=t(n),Bj(n);else try{i=t(n)}finally{Bj(n)}return i}function Ng(n){const{luma:e}=n;if(n.canvas&&e){const{clientWidth:t}=e.canvasSizeInfo;return t?n.drawingBufferWidth/t:1}return 1}function KM(n,e,t=!0){return function(n,e,t,r,i){const s=jj(n[0],e,t);let o=Vj(n[1],e,r,i),a=jj(n[0]+1,e,t);const l=a===t-1?a:a-1;let u;return a=Vj(n[1]+1,e,r,i),i?(a=0===a?a:a+1,u=o,o=a):u=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(u-o+1,1)}}(e,Ng(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function jj(n,e,t){return Math.min(Math.round(n*e),t-1)}function Vj(n,e,t,r){return r?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const XM=(0,Ti.jU)(),Gse=XM&&"undefined"!=typeof document,Uj={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function zj(n={}){zo(XM,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},Uj,n);const{width:e,height:t}=n;function r(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let i;n.onError=r;const{canvas:s}=n,o=function({canvas:n,width:e=800,height:t=600,onError:r}){let i;return"string"==typeof n?(Gse&&"complete"===document.readyState||r(`createGLContext called on canvas '${n}' before page was loaded`),i=document.getElementById(n)):n?i=n:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(t)?`${t}px`:"100%",document.body.insertBefore(i,document.body.firstChild)),i}({canvas:s,width:e,height:t,onError:r});return i=function(n,e){const{onError:t}=e;let r=null;const i=l=>r=l.statusMessage||r;n.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${r||"Unknown error"}`)}(o,n),i?(i=QM(i,n),function(n){const e=mr(n)?"WebGL2":"WebGL1",t=function(n){const e=n.getParameter(7936),t=n.getParameter(7937),r=n.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&n.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&n.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n);dn.info(1,`${e}${n.debug?" debug":""} context ${t?`(${t.vendor},${t.renderer})`:""}`)()}(i),i):null}function QM(n,e={}){if(!n||n._instrumented)return n;n._version=n._version||function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},Uj,e);const{manageState:t,debug:r}=e;return t&&Lj(n,{copyState:!1,log:(...i)=>dn.log(1,...i)()}),XM&&r&&(Ti.CO.makeDebugContext?(n=Ti.CO.makeDebugContext(n,e),dn.level=Math.max(dn.level,1)):dn.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function Hj(){let n;if("undefined"!=typeof window&&window.performance)n=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class Gj{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Hj(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Hj()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class ZM{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:r}=e;return this.stats[t]||(this.stats[t]=e instanceof Gj?e:new Gj(t,r)),this.stats[t]}}const lv="8.5.7",wf=new class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new ZM({id:e})),this.stats.get(e)}};if(Ti.CO.luma&&Ti.CO.luma.VERSION!==lv)throw new Error(`luma.gl - multiple VERSIONs detected: ${Ti.CO.luma.VERSION} vs 8.5.7`);function nn(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function JM(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const r=n[e=e.replace(/^.*\./,"")];return nn(void 0!==r,`Accessing undefined constant GL.${e}`),r}function rh(n,e){e=Number(e);for(const t in n)if(n[t]===e)return`GL.${t}`;return String(e)}Ti.CO.luma||((0,Ti.jU)()&&dn.log(1,"luma.gl 8.5.7 - set luma.log.level=1 (or higher) to trace rendering")(),Ti.CO.luma=Ti.CO.luma||{VERSION:lv,version:lv,log:dn,stats:wf,globals:{modules:{},nodeIO:{}}});const eI={};function Yu(n="id"){return eI[n]=eI[n]||1,`${n}-${eI[n]++}`}function $j(n){return nn("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function kg(n){let e=!0;for(const t in n){e=!1;break}return e}function Wj(n,e,t,r){const i=`See luma.gl ${t} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(n);r.forEach(o=>{s.methodName||(s[o]=()=>{throw dn.removed(`Calling removed method ${e}.${o}: `,i)(),new Error(o)})})}const Fg="Resource subclass must define virtual methods";class zc{constructor(e,t={}){nS(e);const{id:r,userData:i={}}=t;this.gl=e,this.gl2=e,this.id=r||Yu(this.constructor.name),this.userData=i,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(r=>r.delete()),this}bind(e=this.handle){if("function"!=typeof e)return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e,t={}){nn(e=JM(this.gl,e));const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=mr(this.gl);if("webgl2"in i&&!s||"extension"in i&&!this.gl.getExtension(i.extension)){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,t)}getParameters(e={}){const{parameters:t,keys:r}=e,i=this.constructor.PARAMETERS||{},s=mr(this.gl),o={},a=t||Object.keys(i);for(const l of a){const u=i[l];if(u&&(!("webgl2"in u)||s)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const h=r?rh(this.gl,l):l;o[h]=this.getParameter(l,e),r&&"GLenum"===u.type&&(o[h]=rh(this.gl,o[h]))}}return o}setParameter(e,t){nn(e=JM(this.gl,e));const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=mr(this.gl);if("webgl2"in i&&!s||"extension"in i&&!this.gl.getExtension(i.extension))throw new Error("Parameter not available on this platform");"GLenum"===i.type&&(t=JM(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,r){return Wj(this,e,t,r)}initialize(e){}_createHandle(){throw new Error(Fg)}_deleteHandle(){throw new Error(Fg)}_bindHandle(e){throw new Error(Fg)}_getOptsFromHandle(){throw new Error(Fg)}_getParameter(e,t){throw new Error(Fg)}_setParameter(e,t){throw new Error(Fg)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this.constructor.name,t=wf.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this.constructor.name;wf.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,t=this.constructor.name){const r=wf.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get(`${t} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){const t=wf.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}function tI(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function uv(n,{clamped:e=!0}={}){switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function noe({data:n,width:e,height:t}){const r=Math.round(e/2),i=Math.round(t/2),s=new Uint8Array(r*i*4);for(let o=0;o<i;o++)for(let a=0;a<r;a++)for(let l=0;l<4;l++)s[4*(o*r+a)+l]=n[4*(2*o*e+2*a)+l];return{data:s,width:r,height:i}}function nI(n,e,t){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=t;for(const a in r)a in e&&dn.removed(`${n}.${a}`,r[a]?`${n}.${r[a]}`:"N/A")();for(const a in i)a in e&&dn.deprecated(`${n}.${a}`,`${n}.${i[a]}`)();let o=null;for(const a in s)if(a in e){const l=s[a];dn.deprecated(`${n}.${a}`,`${n}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const roe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},ioe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class fa{static getBytesPerElement(e){return uv(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return nn(e.size),uv(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new fa(...[roe,...e])}constructor(...e){e.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return fa.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return fa.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=nI("Accessor",e,ioe)).type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const Yj={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},soe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Yj},ooe={removedProps:Yj};class ri extends zc{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/fa.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/fa.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=nI("Buffer",e,soe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=nI("Buffer",e,ooe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new fa(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;nn(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==i||void 0!==s?(Ho(this.gl),this.gl.bufferSubData(this.target,r,t,i,s)):this.gl.bufferSubData(o,r,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData({sourceBuffer:e,readOffset:t=0,writeOffset:r=0,size:i}){const{gl:s}=this;return Ho(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,t,r,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:t=0,dstOffset:r=0,length:i=0}={}){Ho(this.gl);const s=uv(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=r;let l,u;e?(u=e.length,l=u-a):(l=Math.min(o,i||o),u=a+l);const c=Math.min(o,l);return nn((i=i||c)<=c),e=e||new s(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,r,i),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:r=0,size:i}={}){return 35345===e||35982===e?void 0!==i?this.gl.bindBufferRange(e,t,this.handle,r,i):(nn(0===r),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:t=this.accessor&&this.accessor.index}={}){return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,t=0,r=e.byteLength+t){nn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,t,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,10),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=tI(e);return nn(s),this.setAccessor(new fa(this.accessor,{type:s})),this}_setByteLength(e,t=this.usage){nn(e>=0),this._trackDeallocatedMemory();let r=e;0===e&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,t),this.gl.bindBuffer(i,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const r=e/uv(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new fa(this.accessor,{type:tI(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return dn.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return dn.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return dn.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return dn.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new fa(this.accessor,e),this}}const rI={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Kj={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Xj={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},uoe=[9729,9728],Qj=Ti.CO.WebGLBuffer||function(){};class Lg extends zc{static isSupported(e,t={}){const{format:r,linearFiltering:i}=t;let s=!0;return r&&(s=s&&function(n,e){const t=rI[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const r=mr(n)&&t.gl2||t.gl1;return"string"==typeof r?n.getExtension(r):r}(e,r),s=s&&(!i||function(n,e){const t=rI[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,r))),s}constructor(e,t){const{id:r=Yu("texture"),handle:i,target:s}=t;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let t=e.data;if(t instanceof Promise)return t.then(V=>this.initialize(Object.assign({},e,{pixels:V,data:V}))),this;const r="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(r&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c}=e;t||(t=i);let{width:h,height:p,dataFormat:g,type:m,compressed:b=!1,mipmaps:w=!0}=e;const{depth:H=0}=e;return({width:h,height:p,compressed:b,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:b,data:t,width:h,height:p})),this.width=h,this.height=p,this.depth=H,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),w&&this._isNPOT()&&(dn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),w=!1,this._updateForNPOT(l)),this.mipmaps=w,this.setImageData({data:t,width:h,height:p,depth:H,format:s,type:m,dataFormat:g,border:o,mipmaps:w,parameters:u,compressed:b}),w&&this.generateMipmap(),this.setParameters(l),a&&(this.data=t),r&&(this._video={video:t,parameters:l,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:t,mipmaps:r=!1}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(e={}){return this._isNPOT()?(dn.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ru(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:u=null,type:c=this.type,width:h=this.width,height:p=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;u||(u=r),({type:c,dataFormat:g,compressed:m,width:h,height:p}=this._deduceParameters({format:s,type:c,dataFormat:g,compressed:m,data:u,width:h,height:p}));const{gl:b}=this;b.bindTexture(this.target,this.handle);let H,w=null;return({data:u,dataType:w}=this._getDataType({data:u,compressed:m})),ru(this.gl,l,()=>{switch(w){case"null":b.texImage2D(t,i,s,h,p,o,g,c,u);break;case"typed-array":b.texImage2D(t,i,s,h,p,o,g,c,u,a);break;case"buffer":H=Ho(b),H.bindBuffer(35052,u.handle||u),H.texImage2D(t,i,s,h,p,o,g,c,a),H.bindBuffer(35052,null);break;case"browser-object":mr(b)?b.texImage2D(t,i,s,h,p,o,g,c,u):b.texImage2D(t,i,s,g,c,u);break;case"compressed":for(const[V,fe]of u.entries())b.compressedTexImage2D(t,V,fe.format,fe.width,fe.height,o,fe.data);break;default:nn(!1,"Unknown image data type")}}),this._trackAllocatedMemory(u&&u.byteLength?u.byteLength:this.width*this.height*(Kj[this.dataFormat]||4)*(Xj[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:r=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:u=this.format,type:c=this.type,dataFormat:h=this.dataFormat,compressed:p=!1,offset:g=0,border:m=this.border,parameters:b={}}){if(({type:c,dataFormat:h,compressed:p,width:o,height:a}=this._deduceParameters({format:u,type:c,dataFormat:h,compressed:p,data:r,width:o,height:a})),nn(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=t),r&&r.data){const w=r;r=w.data,o=w.shape[0],a=w.shape[1]}r instanceof ri&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),ru(this.gl,b,()=>{if(p)this.gl.compressedTexSubImage2D(e,l,i,s,o,a,u,r);else if(null===r)this.gl.texSubImage2D(e,l,i,s,o,a,h,c,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,s,o,a,h,c,r,g);else if(r instanceof Qj){const w=Ho(this.gl);w.bindBuffer(35052,r),w.texSubImage2D(e,l,i,s,o,a,h,c,g),w.bindBuffer(35052,null)}else mr(this.gl)?Ho(this.gl).texSubImage2D(e,l,i,s,o,a,h,c,r):this.gl.texSubImage2D(e,l,i,s,h,c,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return dn.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof ri?{data:e.handle,dataType:"buffer"}:e instanceof Qj?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const u=rI[t];return o=o||u&&u.dataFormat,a=a||u&&u.types[0],l=l||u&&u.compressed,({width:i,height:s}=this._deduceImageSize(r,i,s)),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:t,data:r}}_deduceImageSize(e,t,r){let i;return i="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:r}:{width:t>=0?t:1,height:r>=0?r:1},nn(i,"Could not deduced texture size"),nn(void 0===t||i.width===t,"Deduced texture width does not match supplied width"),nn(void 0===r||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:nn(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(mr(this.gl)||!this.width||!this.height||$j(this.width)&&$j(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===uoe.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function coe(n,e){return nn("string"==typeof n),n=""+n,new Promise((t,r)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>r(new Error(`Could not load image ${n}.`)),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=n}catch(i){r(i)}})}class Fa extends Lg{static isSupported(e,t){return Lg.isSupported(e,t)}constructor(e,t={}){nS(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:coe(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Ef="EXT_color_buffer_float",Zj={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Ef,bpp:2},33327:{gl2:Ef,bpp:4},34842:{gl2:Ef,bpp:8},33326:{gl2:Ef,bpp:4},33328:{gl2:Ef,bpp:8},34836:{gl2:Ef,bpp:16},35898:{gl2:Ef,bpp:4}};class Bg extends zc{static isSupported(e,{format:t}={format:null}){return!t||function(n,e,t){const r=t[e];if(!r)return!1;const i=mr(n)&&r.gl2||r.gl1;return"string"==typeof i?n.getExtension(i):i}(e,t,Zj)}static getSamplesForFormat(e,{format:t}){return e.getInternalformatParameter(36161,t,32937)}constructor(e,t={}){super(e,t),this.initialize(t),Object.seal(this)}initialize({format:e,width:t=1,height:r=1,samples:i=0}){return nn(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&mr(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,t,r):this.gl.renderbufferStorage(36161,e,t,r),this.format=e,this.width=t,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Zj[this.format].bpp),this}resize({width:e,height:t}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const rV="clear: bad arguments";function sI(n,{framebuffer:e=null,color:t=null,depth:r=null,stencil:i=null}={}){const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),r&&(o|=256,!0!==r&&(s.clearDepth=r)),i&&(o|=1024,!0!==r&&(s.clearStencil=r)),nn(0!==o,rV),ru(n,s,()=>{n.clear(o)})}function iV(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(u){return void t(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function cr(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){iV(s,r,i,o,a,"next",l)}function a(l){iV(s,r,i,o,a,"throw",l)}o(void 0)})}}const oI=[34069,34070,34071,34072,34073,34074];let _oe=(()=>{class n extends Lg{constructor(t,r={}){nS(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(t={}){const{mipmaps:r=!0,parameters:i={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(i)}),this}subImage({face:t,data:r,x:i=0,y:s=0,mipmapLevel:o=0}){return this._subImage({target:t,data:r,x:i,y:s,mipmapLevel:o})}setCubeMapImageData({width:t,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}){var u=this;return cr(function*(){const{gl:c}=u,h=i||s,p=yield Promise.all(oI.map(g=>{const m=h[g];return Promise.all(Array.isArray(m)?m:[m])}));u.bind(),oI.forEach((g,m)=>{p[m].length>1&&!1!==u.opts.mipmaps&&dn.warn(`${u.id} has mipmap and multiple LODs.`)(),p[m].forEach((b,w)=>{t&&r?c.texImage2D(g,w,a,t,r,o,a,l,b):c.texImage2D(g,w,a,a,l,b)})}),u.unbind()})()}setImageDataForFace(t){const{face:r,width:i,height:s,pixels:o,data:a,border:l=0,format:u=6408,type:c=5121}=t,{gl:h}=this,p=o||a;return this.bind(),p instanceof Promise?p.then(g=>this.setImageDataForFace(Object.assign({},t,{face:r,data:g,pixels:g}))):this.width||this.height?h.texImage2D(r,0,u,i,s,l,u,c,p):h.texImage2D(r,0,u,u,c,p),this}}return n.FACES=oI,n})();class yoe extends Lg{static isSupported(e){return mr(e)}constructor(e,t={}){Ho(e),super(e,t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1})),this.initialize(t),Object.seal(this)}setImageData({level:e=0,dataFormat:t=6408,width:r,height:i,depth:s=1,border:o=0,format:a,type:l=5121,offset:u=0,data:c,parameters:h={}}){return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ru(this.gl,h,()=>{ArrayBuffer.isView(c)&&this.gl.texImage3D(this.target,e,t,r,i,s,o,a,l,c),c instanceof ri&&(this.gl.bindBuffer(35052,c.handle),this.gl.texImage3D(this.target,e,t,r,i,s,o,a,l,u))}),this._trackAllocatedMemory(c&&c.byteLength?c.byteLength:this.width*this.height*this.depth*(Kj[this.dataFormat]||4)*(Xj[this.type]||1),"Texture"),this.loaded=!0,this}}function boe(n,e){const{gl:t,width:r,height:i,id:s}=n;return new Ns(t,Object.assign({},e,{id:`framebuffer-for-${s}`,width:r,height:i,attachments:{36064:n}}))}function rS(n,e={}){const{sourceX:t=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:u}=e;const{framebuffer:c,deleteFramebuffer:h}=function(n){return n instanceof Ns?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:boe(n),deleteFramebuffer:!0}}(n);nn(c);const{gl:p,handle:g,attachments:m}=c;a=a||c.width,l=l||c.height,36064===s&&null===g&&(s=1028),nn(m[s]),u=u||m[s].type,o=function(n,e,t,r,i){if(n)return n;return new(uv(e=e||5121,{clamped:!1}))(r*i*function(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return nn(!1),0}}(t))}(o,u,i,a,l),u=u||tI(o);const b=p.bindFramebuffer(36160,g);return p.readPixels(t,r,a,l,i,u,o),p.bindFramebuffer(36160,b||null),h&&c.delete(),o}function aI(n,{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}={}){let r=rS(n,{sourceAttachment:e}),{width:i,height:s}=n;for(;s>t;)({data:r,width:i,height:s}=noe({data:r,width:i,height:s}));!function({data:n,width:e,height:t,bytesPerPixel:r=4,temp:i}){const s=e*r;i=i||new Uint8Array(s);for(let o=0;o<t/2;++o){const a=o*s,l=(t-o-1)*s;i.set(n.subarray(a,a+s)),n.copyWithin(a,l,l+s),n.set(i,l)}}({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}const sV="Multiple render targets not supported";class Ns extends zc{static isSupported(e,t={}){const{colorBufferFloat:r,colorBufferHalfFloat:i}=t;let s=!0;return r&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Ns(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ho(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ho(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,t={}){super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:t=1,attachments:r=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:u}){if(nn(e>=0&&t>=0,"Width and height need to be integers"),this.width=e,this.height=t,r)for(const c in r){const h=r[c];(Array.isArray(h)?h[0]:h).resize({width:e,height:t})}else r=this._createDefaultAttachments(i,s,o,e,t);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:t,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return t&&this._setReadBuffer(t),r&&this._setDrawBuffers(r),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:t,height:r}=e;if(null===this.handle)return nn(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&dn.log(2,`Resizing framebuffer ${this.id} to ${t}x${r}`)();for(const i in this.attachments)this.attachments[i].resize({width:t,height:r});return this.width=t,this.height=r,this}attach(e,{clearAttachments:t=!1,resizeAttachments:r=!0}={}){const i={};t&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){nn(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let u=l;if(u)if(u instanceof Bg)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(l)){const[c,h=0,p=0]=l;u=c,this._attachTexture({attachment:a,texture:c,layer:h,level:p})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});else this._unattach(a);r&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function(n){return(Ns.STATUS||{})[n]||`Framebuffer error ${n}`}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}clear(e={}){const{color:t,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||r||i)&&sI(this.gl,{color:t,depth:r,stencil:i}),s.forEach((a,l)=>{!function(n,{framebuffer:e=null,buffer:t=6144,drawBuffer:r=0,value:i=[0,0,0,0]}={}){Ho(n),ru(n,{framebuffer:e},()=>{switch(t){case 6144:switch(i.constructor){case Int32Array:n.clearBufferiv(t,r,i);break;case Uint32Array:n.clearBufferuiv(t,r,i);break;case Float32Array:default:n.clearBufferfv(t,r,i)}break;case 6145:n.clearBufferfv(6145,0,[i]);break;case 6146:n.clearBufferiv(6146,0,[i]);break;case 34041:const[s,o]=i;n.clearBufferfi(34041,0,s,o);break;default:nn(!1,rV)}})}(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return dn.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return dn.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return dn.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return dn.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return dn.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return dn.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:t=0,y:r=0,width:i,height:s}){const o=Ho(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===t&&0===r&&void 0===i&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,t,r,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,t,r){let i=this._getAttachmentParameterFallback(t);return null===i&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=rh(this.gl,i)),i}getAttachmentParameters(e=36064,t,r=this.constructor.ATTACHMENT_PARAMETERS||[]){const i={};for(const s of r)i[t?rh(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return i}getParameters(e=!0){const t=Object.keys(this.attachments),r={};for(const i of t){const s=Number(i);r[e?rh(this.gl,s):s]=this.getAttachmentParameters(s,e)}return r}show(){return"undefined"!=typeof window&&window.open(aI(this),"luma-debug-texture"),this}log(e=0,t=""){if(e>dn.level||"undefined"==typeof window)return this;t=t||`Framebuffer ${this.id}`;const r=aI(this,{targetMaxHeight:100});return dn.image({logLevel:e,message:t,image:r},t)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new Fa(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&r?(o=o||{},o[33306]=new Bg(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new Bg(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&nn(!1),o}_unattach(e){const t=this.attachments[e];!t||(t instanceof Bg?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:t}){const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,t.handle),this.attachments[e]=t}_attachTexture({attachment:e=36064,texture:t,layer:r,level:i}){const{gl:s}=this;switch(s.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:Ho(s).framebufferTextureLayer(36160,e,t.target,i,r);break;case 34067:const a=function(n){return n<34069?n+34069:n}(r);s.framebufferTexture2D(36160,e,a,t.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,t.handle,i);break;default:nn(!1,"Illegal texture type")}s.bindTexture(t.target,null),this.attachments[e]=t}_setReadBuffer(e){const t=function(n){return mr(n)?n:null}(this.gl);t?t.readBuffer(e):nn(36064===e||1029===e,sV),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,r=Ho(t);if(r)r.drawBuffers(e);else{const i=t.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):nn(1===e.length&&(36064===e[0]||1029===e[0]),sV)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in oV)void 0===n.luma.caps[e]&&(n.luma.caps[e]=lV(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Ns.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const oV={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(n){const e=new Fa(n,{format:6408,type:5126,dataFormat:6408}),t=new Ns(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=t.getStatus();return e.delete(),t.delete(),36053===r},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function lI(n,e){return aV(n,e)}function aV(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>lV(n,t))}function lV(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function(n,e){const t=oV[e];let r;nn(t,e);const i=mr(n)&&t[1]||t[0];if("function"==typeof i)r=i(n);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&Boolean(n.getExtension(s))}else"string"==typeof i?r=Boolean(n.getExtension(i)):"boolean"==typeof i?r=i:nn(!1);return r}(n,e)),n.luma.caps[e]||dn.log(2,`Feature: ${e} not supported`)(),n.luma.caps[e]}function uV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cV(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?uV(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var uI=function(){function n(e,t){_n(this,n),this.opts=t,this.source=e}return Sn(n,[{key:"getValue",value:function(){var t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];var i=this.source.value,s=r.size,o=i;if(i&&i.length!==s){o=new Float32Array(s);for(var a=r.elementOffset||0,l=0;l<s;++l)o[l]=i[a+l]}return o}},{key:"getAccessor",value:function(){return cV(cV({},this.source.getAccessor()),this.opts)}},{key:"value",get:function(){return this.source.value}}]),n}();const dv=new(function(){function n(e){_n(this,n),this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}return Sn(n,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"allocate",value:function(t,r,i){var H,s=i.size,o=void 0===s?1:s,l=i.padding,u=void 0===l?0:l,c=i.copy,h=void 0!==c&&c,p=i.initialize,g=void 0!==p&&p,m=i.maxCount,b=i.type||t&&t.constructor||Float32Array,w=r*o+u;if(ArrayBuffer.isView(t)){if(w<=t.length)return t;if(w*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new b(t.buffer,0,w)}m&&(H=m*o+u);var V=this._allocate(b,w,g,H);return t&&h?V.set(t):g||V.fill(0,0,4),this._release(t),V}},{key:"release",value:function(t){this._release(t)}},{key:"_allocate",value:function(t,r,i,s){var o=Math.max(Math.ceil(r*this.props.overAlloc),1);o>s&&(o=s);var a=this._pool,l=t.BYTES_PER_ELEMENT*o,u=a.findIndex(function(h){return h.byteLength>=l});if(u>=0){var c=new t(a.splice(u,1)[0],0,o);return i&&c.fill(0),c}return new t(o)}},{key:"_release",value:function(t){if(ArrayBuffer.isView(t)){var r=this._pool,i=t.buffer,s=i.byteLength,o=r.findIndex(function(a){return a.byteLength>=s});o<0?r.push(i):(o>0||r.length<this.props.poolSize)&&r.splice(o,0,i),r.length>this.props.poolSize&&r.shift()}}}]),n}()),Roe=(Math,1/180*Math.PI),ai={};function Noe(n,{precision:e=ai.precision||4}={}){return n=function(n){return Math.round(n/ai.EPSILON)*ai.EPSILON}(n),`${parseFloat(n.toPrecision(e))}`}function Hc(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Gc(n,e,t){if(Hc(n)){t=t||function(n){return n.clone?n.clone():new Array(n.length)}(n);for(let r=0;r<t.length&&r<n.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}function dV(n){return function(n,e){return Gc(n,t=>t*Roe,void 0)}(n)}function Sf(n,e,t){return Gc(n,r=>Math.max(e,Math.min(t,r)))}function iS(n,e,t){return Hc(n)?n.map((r,i)=>iS(r,e[i],t)):t*e+(1-t)*n}function hv(n,e,t){const r=ai.EPSILON;t&&(ai.EPSILON=t);try{if(n===e)return!0;if(Hc(n)&&Hc(e)){if(n.length!==e.length)return!1;for(let i=0;i<n.length;++i)if(!hv(n[i],e[i]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):!(!Number.isFinite(n)||!Number.isFinite(e))&&Math.abs(n-e)<=ai.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{ai.EPSILON=r}}function $c(n,e){if(!n)throw new Error(`math.gl assertion ${e}`)}ai.EPSILON=1e-12,ai.debug=!1,ai.precision=4,ai.printTypes=!1,ai.printDegrees=!1,ai.printRowMajor=!0;class cI extends(function(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){get ELEMENTS(){return $c(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,t=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}to(e){return e===this?this:Hc(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],t=0){for(let r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(ai)}formatString(e){let t="";for(let r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+Noe(this[r],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!hv(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,r){void 0===r&&(r=t,t=e,e=this);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(t[i]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}add(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=t[r];return this.check()}subtract(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=t[r];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(ai.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}}function as(n){if(!Number.isFinite(n))throw new Error(`Invalid number ${n}`);return n}function sS(n,e,t=""){if(ai.debug&&!function(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error(`math.gl: ${t} some fields set to invalid numbers'`);return n}const hV={};function dI(n,e){hV[n]||(hV[n]=!0,console.warn(`${n} has been removed in version ${e}, see upgrade guide for more information`))}class fV extends cI{get ELEMENTS(){return $c(!1),0}copy(e){return $c(!1),this}get x(){return this[0]}set x(e){this[0]=as(e)}get y(){return this[1]}set y(e){this[1]=as(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];t+=i*i}return as(t)}dot(e){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return as(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=t[r];return this.check()}divide(...e){for(const t of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return $c(e>=0&&e<this.ELEMENTS,"index is out of range"),as(this[e])}setComponent(e,t){return $c(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var pi=1e-6,pa="undefined"!=typeof Float32Array?Float32Array:Array;function pV(){var n=new pa(3);return pa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function gV(n,e,t){var r=new pa(3);return r[0]=n,r[1]=e,r[2]=t,r}function mV(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function oS(n,e,t){var r=e[0],i=e[1],s=e[2],o=t[0],a=t[1],l=t[2];return n[0]=i*l-s*a,n[1]=s*o-r*l,n[2]=r*a-i*o,n}function _V(n,e,t){var r=e[0],i=e[1],s=e[2],o=t[3]*r+t[7]*i+t[11]*s+t[15];return n[0]=(t[0]*r+t[4]*i+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*r+t[5]*i+t[9]*s+t[13])/o,n[2]=(t[2]*r+t[6]*i+t[10]*s+t[14])/o,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function yV(n,e,t){const r=e[0],i=e[1],s=t[3]*r+t[7]*i||1;return n[0]=(t[0]*r+t[4]*i)/s,n[1]=(t[1]*r+t[5]*i)/s,n}function vV(n,e,t){const r=e[0],i=e[1],s=e[2],o=t[3]*r+t[7]*i+t[11]*s||1;return n[0]=(t[0]*r+t[4]*i+t[8]*s)/o,n[1]=(t[1]*r+t[5]*i+t[9]*s)/o,n[2]=(t[2]*r+t[6]*i+t[10]*s)/o,n}pV();const hI=[0,0,0],bV={};class Co extends fV{static get ZERO(){return bV.ZERO=bV.ZERO||Object.freeze(new Co(0,0,0,0))}constructor(e=0,t=0,r=0){super(-0,-0,-0),1===arguments.length&&Hc(e)?this.copy(e):(ai.debug&&(as(e),as(t),as(r)),this[0]=e,this[1]=t,this[2]=r)}set(e,t,r){return this[0]=e,this[1]=t,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return ai.debug&&(as(e.x),as(e.y),as(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=as(e)}angle(e){return function(n,e){var t=n[0],r=n[1],i=n[2],s=e[0],o=e[1],a=e[2],c=Math.sqrt(t*t+r*r+i*i)*Math.sqrt(s*s+o*o+a*a),h=c&&mV(n,e)/c;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return oS(this,this,e),this.check()}rotateX({radians:e,origin:t=hI}){return function(n,e,t,r){var i=[],s=[];i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=hI}){return function(n,e,t,r){var i=[],s=[];i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=hI}){return function(n,e,t,r){var i=[],s=[];i[0]=e[0]-t[0],i[1]=e[1]-t[1],i[2]=e[2]-t[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return _V(this,this,e),this.check()}transformAsVector(e){return vV(this,this,e),this.check()}transformByMatrix3(e){return function(n,e,t){var r=e[0],i=e[1],s=e[2];n[0]=r*t[0]+i*t[3]+s*t[6],n[1]=r*t[1]+i*t[4]+s*t[7],n[2]=r*t[2]+i*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){const r=e[0],i=e[1];n[0]=t[0]*r+t[2]*i,n[1]=t[1]*r+t[3]*i,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function(n,e,t){var r=t[0],i=t[1],s=t[2],a=e[0],l=e[1],u=e[2],c=i*u-s*l,h=s*a-r*u,p=r*l-i*a,g=i*p-s*h,m=s*c-r*p,b=r*h-i*c,w=2*t[3];h*=w,p*=w,m*=2,b*=2,n[0]=a+(c*=w)+(g*=2),n[1]=l+h+m,n[2]=u+p+b}(this,this,e),this.check()}}var pv,wV=new Co;function jg(n,e,t,r){wV.set(n,e,t);var i=wV.len();return{distance:r/i,normal:new Co(-n/i,-e/i,-t/i)}}function aae(n){return n-Math.fround(n)}function fI(n,e){var t=e.size,r=void 0===t?1:t,i=e.startIndex,s=void 0===i?0:i,o=e.endIndex;Number.isFinite(o)||(o=n.length);var a=(o-s)/r;pv=dv.allocate(pv,a,{type:Float32Array,size:2*r});for(var l=s,u=0;l<o;){for(var c=0;c<r;c++){var h=n[l++];pv[u+c]=h,pv[u+c+r]=aae(h)}u+=2*r}return pv.subarray(0,a*r*2)}function EV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vg(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?EV(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function aS(n){return n.stride||n.size*n.bytesPerElement}function SV(n,e){e.offset&&Ir.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var t=aS(n),s=("vertexOffset"in e?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return Vg(Vg({},e),{},{offset:s,stride:t})}var uae=function(){function n(e,t){_n(this,n),this.gl=e,this.id=t.id,this.size=t.size;var r=t.logicalType||t.type,i=5130===r,s=t.defaultValue;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),t.defaultValue=s;var o=r;i?o=5126:!o&&t.isIndexed?o=e&&lI(e,"ELEMENT_INDEX_UINT32")?5125:5123:o||(o=5126),t.logicalType=r,t.type=o;var a=function(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&!1===t.fp64&&(a=Float32Array),t.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=t,this.state={externalBuffer:null,bufferAccessor:t,allocatedValue:null,constant:!1},this._buffer=null,this.setData(t)}return Sn(n,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),dv.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(t,r){if(this.doublePrecision){var i={},s=this.value instanceof Float64Array,o=function(n,e){var t=SV(n,e);return{high:t,low:Vg(Vg({},t),{},{offset:t.offset+4*n.size})}}(this.getAccessor(),r||{});return i[t]=new uI(this,o.high),i["".concat(t,"64Low")]=s?new uI(this,o.low):new Float32Array(this.size),i}if(r){var a=SV(this.getAccessor(),r);return Ln({},t,new uI(this,a))}return Ln({},t,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(t){var r=this.state;ArrayBuffer.isView(t)?t={value:t}:t instanceof ri&&(t={buffer:t});var i=Vg(Vg({},this.settings),t);if(r.bufferAccessor=i,t.constant){var s=t.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this._normalizeConstant(s)),r.constant&&this._areValuesEqual(s,this.value))return!1;r.externalBuffer=null,r.constant=!0,this.value=s}else if(t.buffer){var a=t.buffer;r.externalBuffer=a,r.constant=!1,this.value=t.value;var l=t.value instanceof Float64Array;i.type=t.type||a.accessor.type,i.bytesPerElement=a.accessor.BYTES_PER_ELEMENT*(l?2:1),i.stride=aS(i)}else if(t.value){this._checkExternalBuffer(t);var u=t.value;r.externalBuffer=null,r.constant=!1,this.value=u,i.bytesPerElement=u.BYTES_PER_ELEMENT,i.stride=aS(i);var c=this.buffer,h=this.byteOffset;this.doublePrecision&&u instanceof Float64Array&&(u=fI(u,i));var p=u.byteLength+h+2*i.stride;c.byteLength<p&&c.reallocate(p),c.setAccessor(null),c.subData({data:u,offset:h}),i.type=t.type||c.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.value,i=t.startOffset,s=void 0===i?0:i,o=t.endOffset;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?fI(r,{size:this.size,startIndex:s,endIndex:o}):r.subarray(s,o),offset:s*r.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(t){var i=t.copy,s=void 0!==i&&i,o=this.state,a=o.allocatedValue,l=dv.allocate(a,t.numInstances+1,{size:this.size,type:this.defaultType,copy:s});this.value=l;var u=this.buffer,c=this.byteOffset;return u.byteLength<l.byteLength+c&&(u.reallocate(l.byteLength+c),s&&a&&u.subData({data:a instanceof Float64Array?fI(a,this):a,offset:c})),o.allocatedValue=l,o.constant=!1,o.externalBuffer=null,o.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(t){var r=t.value;if(!t.constant&&r){var i=this.defaultType,s=!1;if(this.doublePrecision&&(s=r.BYTES_PER_ELEMENT<4),s)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof i)&&this.settings.normalized&&!("normalized"in t)&&Ir.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(function(r){return(r+128)/255*2-1});case 5122:return new Float32Array(t).map(function(r){return(r+32768)/65535*2-1});case 5121:return new Float32Array(t).map(function(r){return r/255});case 5123:return new Float32Array(t).map(function(r){return r/65535});default:return t}}},{key:"_normalizeValue",value:function(t,r,i){var s=this.settings,o=s.defaultValue,a=s.size;if(Number.isFinite(t))return r[i]=t,r;if(!t)return r[i]=o[0],r;switch(a){case 4:r[i+3]=Number.isFinite(t[3])?t[3]:o[3];case 3:r[i+2]=Number.isFinite(t[2])?t[2]:o[2];case 2:r[i+1]=Number.isFinite(t[1])?t[1]:o[1];case 1:r[i+0]=Number.isFinite(t[0])?t[0]:o[0];break;default:for(var l=a;--l>=0;)r[i+l]=Number.isFinite(t[l])?t[l]:o[l]}return r}},{key:"_areValuesEqual",value:function(t,r){if(!t||!r)return!1;for(var i=this.size,s=0;s<i;s++)if(t[s]!==r[s])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var t=this.settings;this._buffer=new ri(this.gl,{id:this.id,target:t.isIndexed?34963:34962,accessor:{type:t.type}})}return this._buffer}},{key:"byteOffset",get:function(){var t=this.getAccessor();return t.vertexOffset?t.vertexOffset*aS(t):0}}]),n}();function ms(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}var CV=[],AV=[];function TV(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=CV,i={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?r=n:n.length>0&&(AV.length=n.length,r=AV):r=CV,(e>0||Number.isFinite(t))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,t),i.index=e-1),{iterable:r,objectInfo:i}}function xV(n){return n&&n[Symbol.asyncIterator]}function cae(n,e){var t=e.size,r=e.stride,i=e.offset,s=e.startIndices,o=e.nested,a=n.BYTES_PER_ELEMENT,l=r?r/a:t,u=i?i/a:0,c=Math.floor((n.length-u)/l);return function(h,p){var g=p.index,m=p.target;if(!s){for(var b=g*l+u,w=0;w<t;w++)m[w]=n[b+w];return m}var fe,H=s[g],V=s[g+1]||c;if(o){fe=new Array(V-H);for(var Me=H;Me<V;Me++){var Oe=Me*l+u;m=new Array(t);for(var Ue=0;Ue<t;Ue++)m[Ue]=n[Oe+Ue];fe[Me-H]=m}}else if(l===t)fe=n.subarray(H*t+u,V*t+u);else{fe=new n.constructor((V-H)*t);for(var st=0,vt=H;vt<V;vt++)for(var Ct=vt*l+u,mt=0;mt<t;mt++)fe[st++]=n[Ct+mt]}return fe}}function pI(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};return Array.isArray(n)?DV(n,e,[]):e(n)?[n]:[]}function DV(n,e,t){for(var r=-1;++r<n.length;){var i=n[r];Array.isArray(i)?DV(i,e,t):e(i)&&t.push(i)}return t}function dae(n){for(var e=n.target,t=n.source,r=n.start,i=void 0===r?0:r,s=n.count,a=t.length,l=(void 0===s?1:s)*a,u=0,c=i;u<a;u++)e[c++]=t[u];for(;u<l;)u<l-u?(e.copyWithin(i+u,i,i+u),u*=2):(e.copyWithin(i+u,i,i+l-u),u=l);return e}var hae=[],lS=[[0,1/0]];function fae(n,e){if(n===lS||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;for(var t=[],r=n.length,i=0,s=0;s<r;s++){var o=n[s];o[1]<e[0]?(t.push(o),i=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(i,0,e),t}function gI(n){var e=n.source,t=n.target,r=n.start,i=void 0===r?0:r,s=n.end,o=n.size,a=n.getData,l=e.length,u=(s=s||t.length)-i;if(l>u)t.set(e.subarray(0,u),i);else if(t.set(e,i),a)for(var c=l;c<u;)for(var h=a(c,e),p=0;p<o;p++)t[i+c]=h[p]||0,c++}var gae={interpolation:{duration:0,easing:function(e){return e}},spring:{stiffness:.05,damping:.5}};function MV(n,e){return n?(Number.isFinite(n)&&(n={duration:n}),n.type=n.type||"interpolation",Object.assign({},gae[n.type],e,n)):null}function IV(n,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function OV(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function RV(n){n.push(n.shift())}function mI(n,e){var i=n.value,o=n.doublePrecision&&i instanceof Float64Array?2:1;return(n.settings.noAlloc?i.length:e*n.size)*o}function PV(n){var e=n.buffer,r=n.attribute,i=n.fromLength,s=n.fromStartIndices,o=n.getData,a=void 0===o?function(Me){return Me}:o,l=r.doublePrecision&&r.value instanceof Float64Array?2:1,u=r.size*l,c=r.byteOffset,h=r.startIndices,p=s&&h,g=mI(r,n.numInstances),m=r.state.constant;if(p||!(i>=g)){var b=m?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!m){var w=a;a=function(Oe,Ue){return r._normalizeConstant(w(Oe,Ue))}}var H=m?function(Me,Oe){return a(b,Oe)}:function(Me,Oe){return a(b.subarray(Me,Me+u),Oe)},V=e.getData({length:i}),fe=new Float32Array(g);(function(n){var e=n.source,t=n.target,r=n.size,i=n.getData,s=n.sourceStartIndices,o=n.targetStartIndices;if(!Array.isArray(o))return gI({source:e,target:t,size:r,getData:i}),t;for(var a=0,l=0,u=i&&function(m,b){return i(m+l,b)},c=Math.min(s.length,o.length),h=1;h<c;h++){var p=s[h]*r,g=o[h]*r;gI({source:e.subarray(a,p),target:t,start:l,end:g,size:r,getData:u}),a=p,l=g}l<t.length&&gI({source:[],target:t,start:l,size:r,getData:u})})({source:V,target:fe,sourceStartIndices:s,targetStartIndices:h,size:u,getData:H}),e.byteLength<fe.byteLength+c&&e.reallocate(fe.byteLength+c),e.subData({data:fe,offset:c})}}function uS(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return NV(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NV(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function NV(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var _I=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(r){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_n(this,t),i=e.call(this,r,s);var o=s.transition,a=void 0!==o&&o,l=s.noAlloc,u=void 0!==l&&l,c=s.update,h=void 0===c?null:c,p=s.accessor,g=void 0===p?null:p,m=s.transform,b=void 0===m?null:m,w=s.startIndices,H=void 0===w?null:w;return Object.assign(i.settings,{transition:a,noAlloc:u,update:h||g&&i._autoUpdater,accessor:g,transform:b}),Object.assign(i.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:lS,startIndices:H}),Object.seal(i.settings),Object.seal(i.state),i._validateAttributeUpdaters(),i}return Sn(t,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.clearChangedFlags,o=void 0!==s&&s,a=this.state.needsRedraw;return this.state.needsRedraw=a&&!o,a}},{key:"getUpdateTriggers",value:function(){var i=this.settings.accessor;return[this.id].concat("function"!=typeof i&&i||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(i){if(!i||!this.supportsTransition())return null;var s=this.settings.accessor,o=this.settings.transition;return MV(Array.isArray(s)?i[s.find(function(l){return i[l]})]:i[s],o)}},{key:"setNeedsUpdate",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,s=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||i,this.setNeedsRedraw(i),s){var o=s.startRow,a=void 0===o?0:o,l=s.endRow,u=void 0===l?1/0:l;this.state.updateRanges=fae(this.state.updateRanges,[a,u])}else this.state.updateRanges=lS}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=hae}},{key:"setNeedsRedraw",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||i}},{key:"update",value:function(i){this.setData(i)}},{key:"allocate",value:function(i){var s=this.state,o=this.settings;return!o.noAlloc&&!!o.update&&(ms(Number.isFinite(i)),oo(Tn(t.prototype),"allocate",this).call(this,{numInstances:i,copy:s.updateRanges!==lS}),!0)}},{key:"updateBuffer",value:function(i){var s=i.numInstances,o=i.data,a=i.props,l=i.context;if(!this.needsUpdate())return!1;var u=this.state.updateRanges,c=this.settings,h=c.update,p=c.noAlloc,g=!0;if(h){var b,m=uS(u);try{for(m.s();!(b=m.n()).done;){var w=os(b.value,2);h.call(l,this,{data:o,startRow:w[0],endRow:w[1],props:a,numInstances:s})}}catch(mt){m.e(mt)}finally{m.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var Me,fe=uS(u);try{for(fe.s();!(Me=fe.n()).done;){var Oe=os(Me.value,2),Ue=Oe[0],st=Oe[1],vt=Number.isFinite(Ue)?this.getVertexOffset(Ue):0,Ct=Number.isFinite(st)?this.getVertexOffset(st):p||!Number.isFinite(s)?this.value.length:s*this.size;oo(Tn(t.prototype),"updateSubBuffer",this).call(this,{startOffset:vt,endOffset:Ct})}}catch(mt){fe.e(mt)}finally{fe.f()}}this._checkAttributeArray()}else g=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),g}},{key:"setConstantValue",value:function(i){return void 0!==i&&"function"!=typeof i&&(this.setData({constant:!0,value:i})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(i){var s=this.state;return i?(this.clearNeedsUpdate(),s.lastExternalBuffer===i||(s.lastExternalBuffer=i,this.setNeedsRedraw(),this.setData(i)),!0):(s.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.state,a=this.settings;if(!i)return o.binaryValue=null,o.binaryAccessor=null,!1;if(a.noAlloc)return!1;if(o.binaryValue===i)return this.clearNeedsUpdate(),!0;o.binaryValue=i,this.setNeedsRedraw(),ArrayBuffer.isView(i)&&(i={value:i});var l=a.transform||s!==this.startIndices;if(l){ms(ArrayBuffer.isView(i.value),"invalid ".concat(a.accessor));var u=i.size&&i.size!==this.size;return o.binaryAccessor=cae(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:s,nested:u}),!1}return this.clearNeedsUpdate(),this.setData(i),!0}},{key:"getVertexOffset",value:function(i){var s=this.startIndices;return(s?s[i]:i)*this.size}},{key:"getShaderAttributes",value:function(){var i=this.settings.shaderAttributes||Ln({},this.id,null),s={};for(var o in i)Object.assign(s,oo(Tn(t.prototype),"getShaderAttributes",this).call(this,o,i[o]));return s}},{key:"_autoUpdater",value:function(i,s){var o=s.data,a=s.startRow,l=s.endRow,c=s.numInstances;if(!i.constant){var h=i.settings,g=i.value,m=i.size,b=i.startIndices,w=h.accessor,H=h.transform,V=i.state.binaryAccessor||("function"==typeof w?w:s.props[w]);ms("function"==typeof V,'accessor "'.concat(w,'" is not a function'));var vt,fe=i.getVertexOffset(a),Me=TV(o,a,l),Ue=Me.objectInfo,st=uS(Me.iterable);try{for(st.s();!(vt=st.n()).done;){var Ct=vt.value;Ue.index++;var mt=V(Ct,Ue);if(H&&(mt=H.call(this,mt)),b){var Bt=(Ue.index<b.length-1?b[Ue.index+1]:c)-b[Ue.index];if(mt&&Array.isArray(mt[0])){var _t,Rt=fe,ft=uS(mt);try{for(ft.s();!(_t=ft.n()).done;)i._normalizeValue(_t.value,g,Rt),Rt+=m}catch(ut){ft.e(ut)}finally{ft.f()}}else mt&&mt.length>m?g.set(mt,fe):(i._normalizeValue(mt,Ue.target,0),dae({target:g,source:Ue.target,start:fe,count:Bt}));fe+=Bt*m}else i._normalizeValue(mt,g,fe),fe+=m}}catch(ut){st.e(ut)}finally{st.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var i=this.settings;if(!i.noAlloc&&"function"!=typeof i.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var i=this.value,s=Math.min(4,this.size);if(i&&i.length>=s){var o=!0;switch(s){case 4:o=o&&Number.isFinite(i[3]);case 3:o=o&&Number.isFinite(i[2]);case 2:o=o&&Number.isFinite(i[1]);case 1:o=o&&Number.isFinite(i[0]);break;default:o=!1}if(!o)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(i){this.state.startIndices=i}}]),t}(uae),yI={};function Ao(n){var e;Ir.level>0&&yI[n]&&(e=yI[n]).call.apply(e,arguments)}function La(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const kV="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",wae=`#version 300 es\n${kV}`;function FV(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[r,i,s]=t;return e.includes(r)&&i&&s?{qualifier:r,type:i,name:s.split(";")[0]}:null}function LV(n={}){const{version:e=100,input:t,inputType:r,output:i}=n;if(!t)return 300===e?wae:e>300?`#version ${e}\n${kV}`:"void main() {gl_FragColor = vec4(0);}";const s=function(n,e){switch(e){case"float":return`vec4(${n}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${n}, 0.0, 1.0)`;case"vec3":return`vec4(${n}, 1.0)`;case"vec4":return n;default:return La(!1),null}}(t,r);return e>=300?`#version ${e} ${300===e?"es":""}\nin ${r} ${t};\nout vec4 ${i};\nvoid main() {\n  ${i} = ${s};\n}`:`varying ${r} ${t};\nvoid main() {\n  gl_FragColor = ${s};\n}`}class BV extends zc{static isSupported(e){return mr(e)}constructor(e,t={}){Ho(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,kg(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(t);return r<0?(this.unused[e]=i,dn.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,r,i;return e instanceof ri?i=e:(i=e.buffer,r=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==r)&&(t=t||0,r=r||i.byteLength-t),{buffer:i,byteOffset:t,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t,r=0,i){const s=t&&t.handle;return s&&void 0!==i?this.gl.bindBufferRange(35982,e,s,r,i):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Aae{constructor(e,t={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(e={}){const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(e={}){const t=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=t;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],r=e?t[e]:null;return r?r instanceof ri?r:r.buffer:null}getData(e={}){const{varyingName:t}=e,r=this.getBuffer(t);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&nn(mr(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in t&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if("string"==typeof s){const o=t[s],{byteLength:a,usage:l,accessor:u}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:u})}}return r}_setupBuffers(e={}){const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:r})}_setupTransformFeedback(e,{model:t}){const{program:r}=t;e.transformFeedback=new BV(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:t,feedbackBuffers:r})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];t[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],nn(r[s]instanceof ri)}return{sourceBuffers:t,feedbackBuffers:r}}_createNewBuffer(e,t){const r=new ri(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}function jV(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const r=parseInt(t[1],10);Number.isFinite(r)&&(e=r)}return e}const gv="vs",Dae={[gv]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},cS="__LUMA_INJECT_DECLARATIONS__",VV=/void\s+main\s*\([^)]*\)\s*\{\n?/,UV=/}\n?[^{}]*$/,bI=[];function zV(n,e,t,r=!1){const i=e===gv;for(const s in t){const o=t[s];o.sort((l,u)=>l.order-u.order),bI.length=o.length;for(let l=0,u=o.length;l<u;++l)bI[l]=o[l].injection;const a=`${bI.join("\n")}\n`;switch(s){case"vs:#decl":i&&(n=n.replace(cS,a));break;case"vs:#main-start":i&&(n=n.replace(VV,l=>l+a));break;case"vs:#main-end":i&&(n=n.replace(UV,l=>a+l));break;case"fs:#decl":i||(n=n.replace(cS,a));break;case"fs:#main-start":i||(n=n.replace(VV,l=>l+a));break;case"fs:#main-end":i||(n=n.replace(UV,l=>a+l));break;default:n=n.replace(s,l=>l+a)}}return n=n.replace(cS,""),r&&(n=n.replace(/\}\s*$/,s=>s+Dae[e])),n}function wI(n){const e={};return La(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const r in t)e[r]=e[r]?`${e[r]}\n${t[r]}`:t[r]}),e}const Mae={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},dS="transform_uSize_",HV="transform_position";const Lae={10241:9728,10240:9728,10242:33071,10243:33071};class jae{constructor(e,t={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(e={}){const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(e={}){const{sourceBuffers:t,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let u=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=r[this.samplerTextureMap[h]];this._setSourceTextureParameters();const c=function({sourceTextureMap:n,targetTextureVarying:e,targetTexture:t}){const r={};let i,s;e&&(({width:i,height:s}=t),r[`${dS}${e}`]=[i,s]);for(const o in n)({width:i,height:s}=n[o]),r[`${dS}${o}`]=[i,s];return r}({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:u,parameters:l}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:t}=this.bindings[this.currentIndex],r=rS(t);if(!e)return r;const i=r.constructor,s=function(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return La(!1),null}}(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let u=0;u<s;u++)o[a++]=r[l+u];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:t,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:r}=e;if(r instanceof Fa)return r;const i=t[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(e={}){const{sourceBuffers:t,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new ri(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:t,targetTexture:r})}}_updateBinding(e,t){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new Ns(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const r in t)t[r].setParameters(Lae)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function(n,e){nn(n instanceof Fa||n instanceof _oe||n instanceof yoe);const t=n.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c}=n;return new t(r,Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c},{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}}))}(e);return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:t,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=function({vs:n,sourceTextureMap:e,targetTextureVarying:t,targetTexture:r}){let s=Object.keys(e).length,o=null;const a={};let l=n,u={};if(s>0||t){const c=l.split("\n"),h=c.slice();if(c.forEach((p,g,m)=>{if(s>0){const b=function(n,e){const t={},r=function(n){return FV(n,["attribute","in"])}(n);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o=`// ${n} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:u}=function(n){const e=`transform_uSampler_${n}`,t=`${dS}${n}`;return{samplerName:e,sizeName:t,uniformDeclerations:`  uniform sampler2D ${e};\n  uniform vec2 ${t};`}}(s),h=`  ${i} ${s} = transform_getInput(${a}, ${l}).${function(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return La(!1),null}}(i)};\n`;return t[a]=s,{updatedLine:o,inject:{"vs:#decl":u,"vs:#main-start":h},samplerTextureMap:t}}return null}(p,e);if(b){const{updatedLine:w,inject:H}=b;h[g]=w,u=wI([u,H]),Object.assign(a,b.samplerTextureMap),s--}}t&&!o&&(o=function(n,e){const t=FV(n,["varying","out"]);return t&&t.name===e?t.type:null}(p,t))}),t){nn(r);const p=`${dS}${t}`;u=wI([u,{"vs:#decl":`uniform vec2 ${p};\n`,"vs:#main-start":`     vec2 ${HV} = transform_getPos(${p});\n     gl_Position = vec4(${HV}, 0, 1.);\n`}])}l=h.join("\n")}return{vs:l,targetTextureType:o,inject:u,samplerTextureMap:a}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),u=wI([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=l,{vs:i,fs:e._fs||LV({version:jV(i),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Mae].concat(e.modules||[]):e.modules,uniforms:s,inject:u}}}const EI={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function Uae(n){let e=GV(n);return"object"===e?n?"type"in n?Object.assign({},n,EI[n.type]):"value"in n?(e=GV(n.value),Object.assign({type:e},n,EI[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},EI[e])}function GV(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class SI{constructor({name:e,vs:t,fs:r,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:u={},vertexShader:c,fragmentShader:h}){La("string"==typeof e),this.name=e,this.vs=t||c,this.fs=r||h,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(n){const e={vs:{},fs:{}};for(const t in n){let r=n[t];const i=t.slice(0,2);"string"==typeof r&&(r={order:0,injection:r}),e[i][t]=r}return e}(u),s&&(this.uniforms=function(n){const e={};for(const t in n){const i=Uae(n[t]);e[t]=i}return e}(s))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:La(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}\n${t}// END MODULE_${this.name}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?t.deprecated(r.old,r.new)():t.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp(`\\b${t.old}\\(`);break;default:t.regex=new RegExp(`${t.type} ${t.old};`)}}),e}_defaultGetUniforms(e={}){const t={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&La(s.validate(e[i],s),`${this.name}: invalid ${i}`),t[i]=e[i]):t[i]=s.value}return t}}function $ae(n){return function(n){const e={},t={};return CI({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((r,i)=>t[i]-t[r]).map(r=>e[r])}(WV(n))}function CI({modules:n,level:e,moduleMap:t,moduleDepth:r}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const i of n)t[i.name]=i,(void 0===r[i.name]||r[i.name]<e)&&(r[i.name]=e);for(const i of n)i.dependencies&&CI({modules:i.dependencies,level:e+1,moduleMap:t,moduleDepth:r})}function WV(n,e){return n.map(t=>(t instanceof SI||(La("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${t}' and use it directly.`),La(t.name,"shader module has no name"),(t=new SI(t)).dependencies=WV(t.dependencies)),t))}const AI={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Cf={};function Jae(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/Apple/i)||e.match(/Apple/i)?"APPLE":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN"}Object.keys(AI).forEach(n=>{Cf[n]=n});const TI={};function qV(n,e,t={}){const r=AI[e];if(La(r,e),!function(n={}){const e="undefined"!=typeof window&&window.navigator||{},t=n.userAgent||e.userAgent||"",r=-1!==t.indexOf("MSIE "),i=-1!==t.indexOf("Trident/");return r||i}(t))return!0;if(e in TI)return TI[e];const o=`#extension GL_${r[0]} : ${t.behavior||"enable"}\nvoid main(void) {}`,a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const l=n.getShaderParameter(a,35713);return n.deleteShader(a),TI[e]=l,l}function hS(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function(n,e){const t=AI[e];La(t,e);const r=function(n){return"undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||Boolean(n&&2===n._version)}(n)&&t[1]||t[0],i="string"==typeof r?Boolean(n.getExtension(r)):r;return La(!1===i||!0===i),i}(n,t))}function Ug(n){return new RegExp(`\\b${n}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const YV=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],rle=[...YV,[Ug("attribute"),"in $1"],[Ug("varying"),"out $1"]],ile=[...YV,[Ug("varying"),"in $1"]],KV=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],sle=[...KV,[Ug("in"),"attribute $1"],[Ug("out"),"varying $1"]],ole=[...KV,[Ug("in"),"varying $1"]],xI="gl_FragColor",DI=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,ale=/void\s+main\s*\([^)]*\)\s*\{\n?/;function fS(n,e){for(const[t,r]of e)n=n.replace(t,r);return n}const dle=`\n\n${cS}\n\n`,XV={[gv]:"vertex",fs:"fragment"};function QV(n,{id:e,source:t,type:r,modules:i,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:u=!0,log:c}){La("string"==typeof t,"shader source must be a string");const h=r===gv,p=t.split("\n");let g=100,m="",b=t;0===p[0].indexOf("#version ")?(g=300,m=p[0],b=p.slice(1).join("\n")):m=`#version ${g}`;const w={};i.forEach(Ue=>{Object.assign(w,Ue.getDefines())}),Object.assign(w,s);let H=u?`${m}\n${function({id:n,source:e,type:t}){return n&&"string"==typeof n&&-1===e.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${n}_${XV[t]}\n\n`:""}({id:e,source:t,type:r})}\n${function({type:n}){return`\n#define SHADER_TYPE_${XV[n].toUpperCase()}\n`}({type:r})}\n${function(n){switch(function(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:Jae(t,r),vendor:t,renderer:r,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n"}}(n)}\n${function(n,e,t){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return hS(n,Cf.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),hS(n,Cf.GLSL_DERIVATIVES)&&qV(n,Cf.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),hS(n,Cf.GLSL_FRAG_DATA)&&qV(n,Cf.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),hS(n,Cf.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(n)}\n${function(n={}){let e=0,t="";for(const r in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const i=n[r];(i||Number.isFinite(i))&&(t+=`#define ${r.toUpperCase()} ${n[r]}\n`)}return 0===e&&(t+="\n"),t}(w)}\n${h?"":"precision highp float;\n\n"}\n`:`${m}\n`;const V=function(n){const e={vs:{},fs:{}};return n.forEach(t=>{let r;"string"!=typeof t?(r=t,t=r.hook):r={},t=t.trim();const[i,s]=t.split(":"),o=t.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}(o),fe={},Me={},Oe={};for(const Ue in a){const st="string"==typeof a[Ue]?{injection:a[Ue],order:0}:a[Ue],vt=Ue.match(/^(v|f)s:(#)?([\w-]+)$/);if(vt){const mt=vt[3];vt[2]?"decl"===mt?Me[Ue]=[st]:Oe[Ue]=[st]:fe[Ue]=[st]}else Oe[Ue]=[st]}for(const Ue of i){c&&Ue.checkDeprecations(b,c),H+=Ue.getModuleSource(r,g);const vt=Ue.injections[r];for(const Ct in vt){const mt=Ct.match(/^(v|f)s:#([\w-]+)$/);if(mt){const Rt="decl"===mt[2]?Me:Oe;Rt[Ct]=Rt[Ct]||[],Rt[Ct].push(vt[Ct])}else fe[Ct]=fe[Ct]||[],fe[Ct].push(vt[Ct])}}return H+=dle,H=zV(H,r,Me),H+=function(n,e){let t="";for(const r in n){const i=n[r];if(t+=`void ${i.signature} {\n`,i.header&&(t+=`  ${i.header}`),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)t+=`  ${o.injection}\n`}i.footer&&(t+=`  ${i.footer}`),t+="}\n"}return t}(V[r],fe),H+=b,H=zV(H,r,Oe),H=function(n,e,t){switch(e){case 300:return t?fS(n,rle):function(n){const e=(n=fS(n,ile)).match(DI);if(e){const t=e[1];n=n.replace(new RegExp(`\\b${xI}\\b`,"g"),t)}else{const t="fragmentColor";n=n.replace(ale,r=>`out vec4 ${t};\n${r}`).replace(new RegExp(`\\b${xI}\\b`,"g"),t)}return n}(n);case 100:return t?fS(n,sle):function(n){const e=(n=fS(n,ole)).match(DI);if(e){const t=e[1];n=n.replace(DI,"").replace(new RegExp(`\\b${t}\\b`,"g"),xI)}return n}(n);default:throw new Error(`unknown GLSL version ${e}`)}}(H,l?100:g,h),H}function ple(n){return function(t){const r={};for(const i of n){const s=i.getUniforms(t,r);Object.assign(r,s)}return r}}const ble={5126:xi.bind(null,"uniform1fv",Ba,1,To),35664:xi.bind(null,"uniform2fv",Ba,2,To),35665:xi.bind(null,"uniform3fv",Ba,3,To),35666:xi.bind(null,"uniform4fv",Ba,4,To),5124:xi.bind(null,"uniform1iv",ih,1,To),35667:xi.bind(null,"uniform2iv",ih,2,To),35668:xi.bind(null,"uniform3iv",ih,3,To),35669:xi.bind(null,"uniform4iv",ih,4,To),35670:xi.bind(null,"uniform1iv",ih,1,To),35671:xi.bind(null,"uniform2iv",ih,2,To),35672:xi.bind(null,"uniform3iv",ih,3,To),35673:xi.bind(null,"uniform4iv",ih,4,To),35674:xi.bind(null,"uniformMatrix2fv",Ba,4,Wc),35675:xi.bind(null,"uniformMatrix3fv",Ba,9,Wc),35676:xi.bind(null,"uniformMatrix4fv",Ba,16,Wc),35678:ao,35680:ao,5125:xi.bind(null,"uniform1uiv",pS,1,To),36294:xi.bind(null,"uniform2uiv",pS,2,To),36295:xi.bind(null,"uniform3uiv",pS,3,To),36296:xi.bind(null,"uniform4uiv",pS,4,To),35685:xi.bind(null,"uniformMatrix2x3fv",Ba,6,Wc),35686:xi.bind(null,"uniformMatrix2x4fv",Ba,8,Wc),35687:xi.bind(null,"uniformMatrix3x2fv",Ba,6,Wc),35688:xi.bind(null,"uniformMatrix3x4fv",Ba,12,Wc),35689:xi.bind(null,"uniformMatrix4x2fv",Ba,8,Wc),35690:xi.bind(null,"uniformMatrix4x3fv",Ba,12,Wc),35678:ao,35680:ao,35679:ao,35682:ao,36289:ao,36292:ao,36293:ao,36298:ao,36299:ao,36300:ao,36303:ao,36306:ao,36307:ao,36308:ao,36311:ao},wle={},Ele={},Sle={},ZV=[0];function MI(n,e,t,r){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(ZV[0]=n,n=ZV);const i=n.length;if(i%e&&dn.warn(`Uniform size should be multiples of ${e}`,n)(),n instanceof t)return n;let s=r[i];s||(s=new t(i),r[i]=s);for(let o=0;o<i;o++)s[o]=n[o];return s}function Ba(n,e){return MI(n,e,Float32Array,wle)}function ih(n,e){return MI(n,e,Int32Array,Ele)}function pS(n,e){return MI(n,e,Uint32Array,Sle)}function JV(n,e,t){const r=ble[t.type];if(!r)throw new Error(`Unknown GLSL uniform type ${t.type}`);return r().bind(null,n,e)}function Cle(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${n}`);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function Tle(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Lg||n instanceof Bg)||n instanceof Ns&&Boolean(n.texture)}function xle(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const r=n[e];for(let i=0,s=t.length;i<s;++i)r[i]=t[i]}else n[e]=t.slice();else n[e]=t}function ao(){let n=null;return(e,t,r)=>{const i=n!==r;return i&&(e.uniform1i(t,r),n=r),i}}function xi(n,e,t,r){let i=null,s=null;return(o,a,l)=>{const u=e(l,t),c=u.length;let h=!1;if(null===i)i=new Float32Array(c),s=c,h=!0;else{nn(s===c,"Uniform length cannot change.");for(let p=0;p<c;++p)if(u[p]!==i[p]){h=!0;break}}return h&&(r(o,n,a,u),i.set(u)),h}}function To(n,e,t,r){n[e](t,r)}function Wc(n,e,t,r){n[e](t,!1,r)}function gS(n,e="unnamed"){const r=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return r?r[1]:e}function tU(n,e){let t="";for(let r=0;r<e.length;r++){const i=e[r];if((n[r+3]||n[r+2]||n[r+1])&&(t+=`${i}\n`,n[r+1])){const s=n[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0;t+=nU(`^^^ ${a}: ${s.substring(o.join(":").length+1).trim()}\n\n`,l)}}return t}function nU(n,e){let t="";for(let r=0;r<e;++r)t+=" ";return`${t}${n}`}class mv extends zc{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return nn(!1),"unknown"}}constructor(e,t){nS(e),nn("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:gS(t.source,null)||t.id||Yu(`unnamed ${mv.getTypeName(t.shaderType)}`)}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize({source:e}){const t=gS(e,null);t&&(this.id=Yu(t)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${mv.getTypeName(this.shaderType)}:${this.id}`}getName(){return gS(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100\n${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=function(n,e,t,r){const i=n.split(/\r?\n/),s={},o={},a=r||gS(e)||"(unnamed)",l=`${function(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)} shader ${a}`;for(let c=0;c<i.length;c++){const h=i[c];if(h.length<=1)continue;const p=h.split(":"),g=p[0],m=parseInt(p[2],10);if(isNaN(m))throw new Error(`GLSL compilation error in ${l}: ${n}`);"WARNING"!==g?s[m]=h:o[m]=h}const u=function(n,e=1,t=": "){const r=n.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e);return nU(a,i-a.length)+t+s})}(e);return{shaderName:l,errors:tU(s,u),warnings:tU(o,u)}}(r,this.source,this.shaderType,this.id);throw dn.error(`GLSL compilation errors in ${i}\n${s}`)(),dn.warn(`GLSL compilation warnings in ${i}\n${o}`)(),new Error(`GLSL compilation errors in ${i}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class II extends mv{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class OI extends mv{constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ks=5126,_v=5124,yv=5125,RI={[ks]:[ks,1,"float"],35664:[ks,2,"vec2"],35665:[ks,3,"vec3"],35666:[ks,4,"vec4"],[_v]:[_v,1,"int"],35667:[_v,2,"ivec2"],35668:[_v,3,"ivec3"],35669:[_v,4,"ivec4"],[yv]:[yv,1,"uint"],36294:[yv,2,"uvec2"],36295:[yv,3,"uvec3"],36296:[yv,4,"uvec4"],35670:[ks,1,"bool"],35671:[ks,2,"bvec2"],35672:[ks,3,"bvec3"],35673:[ks,4,"bvec4"],35674:[ks,8,"mat2"],35685:[ks,8,"mat2x3"],35686:[ks,8,"mat2x4"],35675:[ks,12,"mat3"],35687:[ks,12,"mat3x2"],35688:[ks,12,"mat3x4"],35676:[ks,16,"mat4"],35689:[ks,16,"mat4x2"],35690:[ks,16,"mat4x3"]};function lU(n){const e=RI[n];if(!e)return null;const[t,r]=e;return{type:t,components:r}}function uU(n,e){switch(n){case 5120:case 5121:case 5122:case 5123:n=ks}for(const t in RI){const[r,i,s]=RI[t];if(r===n&&i===e)return{glType:t,name:s}}return null}class aue{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,r=t.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,i),l=t.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!mr(t))return;const r=t.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,t,r,i){const{type:s,components:o}=lU(r),a={type:s,size:i*o};this._inferProperties(e,t,a);const l={location:e,name:t,accessor:new fa(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,t,r){/instance/i.test(t)&&(r.divisor=1)}_addVarying(e,t,r,i){const{type:s,components:o}=lU(r),l={location:e,name:t,accessor:new fa({type:s,size:i*o})};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const lue=35981,uue=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class dU extends zc{constructor(e,t={}){super(e,t),this.stubRemovedMethods("Program","v6.0",uue),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(e={}){const{hash:t,vs:r,fs:i,varyings:s,bufferMode:o=lue}=e;return this.hash=t||"",this.vs="string"==typeof r?new II(this.gl,{id:`${e.id}-vs`,source:r}):r,this.fs="string"==typeof i?new OI(this.gl,{id:`${e.id}-fs`,source:i}):i,nn(this.vs instanceof II),nn(this.fs instanceof OI),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Ho(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new aue(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:t=4,vertexCount:r,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:u=0,isInstanced:c=u>0,vertexArray:h=null,transformFeedback:p,framebuffer:g,parameters:m={},uniforms:b,samplers:w}){if((b||w)&&(dn.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(b||{})),dn.priority>=e){const H=g?g.id:"default",V=`mode=${rh(this.gl,t)} verts=${r} instances=${u} indexType=${rh(this.gl,l)} isInstanced=${c} isIndexed=${a} Framebuffer=${H}`;dn.log(e,V)()}return nn(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||c&&0===u||(h.bindForDraw(r,u,()=>{if(void 0!==g&&(m=Object.assign({},m,{framebuffer:g})),p){const H=function(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return nn(!1),0}}(t);p.begin(H)}this._bindTextures(),ru(this.gl,m,()=>{a&&c?this.gl2.drawElementsInstanced(t,r,l,i,u):a&&mr(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(t,s,o,r,l,i):a?this.gl.drawElements(t,r,l,i):c?this.gl2.drawArraysInstanced(t,i,r,u):this.gl.drawArrays(t,i,r)}),p&&p.end()}),0))}setUniforms(e={}){dn.priority>=2&&function(n,e,t){for(const r in n){const i=n[r];if((!t||Boolean(t[r]))&&!Tle(i))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${r}`,i),new Error(`${e} Bad uniform ${r}`)}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const r=e[t],i=this._uniformSetters[t];if(i){let s=r,o=!1;if(s instanceof Ns&&(s=s.texture),s instanceof Lg)if(o=this.uniforms[t]!==r,o){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[t]=a}else s=i.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(i(s)||o)&&xle(this.uniforms,t,r)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const r=this._textureUniforms[t];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),r={};for(const i of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new II({handle:i});break;case 35632:r.fs=new OI({handle:i})}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=Yu(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),dn.time(4,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),dn.timeEnd(4,`linkProgram for ${this._getName()}`)(),e.debug||dn.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const r=this.gl.getActiveUniform(this.handle,t),{name:i}=Cle(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=JV(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,`${i}[${o}]`),this._uniformSetters[`${i}[${o}]`]=JV(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class vv{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new vv(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:t="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,u=this._getModuleList(e.modules),c=this._getHash(t),h=this._getHash(r),p=u.map(fe=>this._getHash(fe.name)).sort(),g=o.map(fe=>this._getHash(fe)),m=Object.keys(i).sort(),b=Object.keys(s).sort(),w=[],H=[];for(const fe of m)w.push(this._getHash(fe)),w.push(this._getHash(i[fe]));for(const fe of b)H.push(this._getHash(fe)),H.push(this._getHash(s[fe]));const V=`${c}/${h}D${w.join("/")}M${p.join("/")}I${H.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[V]){const fe=function(n,e){const{vs:t,fs:r}=e,i=$ae(e.modules||[]);return{gl:n,vs:QV(n,Object.assign({},e,{source:t,type:gv,modules:i})),fs:QV(n,Object.assign({},e,{source:r,type:"fs",modules:i})),getUniforms:ple(i)}}(this.gl,{vs:t,fs:r,modules:u,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[V]=new dU(this.gl,{hash:V,vs:fe.vs,fs:fe.fs,varyings:o,bufferMode:a}),this._getUniforms[V]=fe.getUniforms||(Me=>{}),this._useCounts[V]=0}return this._useCounts[V]++,this._programCache[V]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;t[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(t[i++]=a,r[l]=!0)}return t.length=i,t}}let _S=null;class ja extends zc{static isSupported(e,t={}){return!t.constantAttributeZero||mr(e)||"Chrome"===function(n){if(!HM())return"Node";if(fj(n))return"Electron";const t=("undefined"!=typeof navigator?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const r=-1!==t.indexOf("MSIE "),i=-1!==t.indexOf("Trident/");return r||i?"IE":iv.chrome?"Chrome":iv.safari?"Safari":iv.mozInnerScreenX?"Firefox":"Unknown"}()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ja(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ja.MAX_ATTRIBUTES=ja.MAX_ATTRIBUTES||e.getParameter(34921),ja.MAX_ATTRIBUTES}static setConstant(e,t,r){switch(r.constructor){case Float32Array:ja._setConstantFloatArray(e,t,r);break;case Int32Array:ja._setConstantIntArray(e,t,r);break;case Uint32Array:ja._setConstantUintArray(e,t,r);break;default:nn(!1)}}constructor(e,t={}){super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ja.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,t={}){return nn(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:u,divisor:c}=r,{gl:h,gl2:p}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,t.handle),u?(nn(mr(h)),p.vertexAttribIPointer(e,i,s,o,a)):h.vertexAttribPointer(e,i,s,l,o,a),h.enableVertexAttribArray(e),p.vertexAttribDivisor(e,c||0)}),this}enable(e,t=!0){return!t&&0===e&&!ja.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const r=this._normalizeConstantArrayValue(t),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new ri(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=function(n,e){return new n(function(n){return(!_S||_S.byteLength<n)&&(_S=new ArrayBuffer(n)),_S}(n.BYTES_PER_ELEMENT*e),0,e)}(t.constructor,s);(function({target:n,source:e,start:t=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=t;o<i;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s)})({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}static _setConstantFloatArray(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:nn(!1)}}static _setConstantIntArray(e,t,r){switch(nn(mr(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:nn(!1)}}static _setConstantUintArray(e,t,r){switch(nn(mr(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:nn(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:t}){return nn(Number.isFinite(t)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(t,e);default:return this.gl.getVertexAttrib(t,e)}})}}const mue=/^(.+)__LOCATION_([0-9]+)$/,_ue=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class yue{constructor(e,t={}){this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ja(e),Wj(this,"VertexArray","v6.0",_ue),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,t={}){return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t,r={}){if(34963===t.target)return this.setElementBuffer(t,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,r);return i>=0&&(this.values[i]=t,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,t,s)),this}setConstant(e,t,r={}){const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r));return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[i]=t,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new ri(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof ri&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof ri&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),i=r()}),i}_resolveLocationAndAccessor(e,t,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,dn.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=fa.resolve(l.accessor,this.accessors[o]||{},r,i),{size:h,type:p}=c;return nn(Number.isFinite(h)&&Number.isFinite(p)),{location:o,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const r=mue.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,t){if(t instanceof ri)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof ri)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof ri))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const r=Math.max(0|e,0|t);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,t){if(ja.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,t){ja.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const r=this.values[t],i=this.accessors[t];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof ri){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,t={}){return dn.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function bv(n,e={}){const{isInteger:r=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function(n,e){const{maxElts:t=16,size:r=1}=e;let i="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(i+=","+(o%r==0?" ":"")),i+=bv(n[o],e);return`${i}${n.length>t?"...":"]"}`}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return r?"0":"0.";if(r||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const i=n.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function hU(n,e,t,r){const{gl:i}=n;if(!e)return{[r]:"null","Format ":"N/A"};let u,c,h,s="NOT PROVIDED",o=1,a=0,l=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),u=-1!==s.indexOf("nt")),e instanceof ri){const p=e,{data:g,changed:m}=p.getDebugData();let b;return c=m?"*":"",h=g,l=p.byteLength,a=l/g.BYTES_PER_ELEMENT/o,t?b=`${t.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${rh(i,s)})`:(u=!0,b=`${l} bytes`),{[r]:`${c}${bv(h,{size:o,isInteger:u})}`,"Format ":b}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),u=-1!==s.indexOf("nt"),{[r]:`${bv(h,{size:o,isInteger:u})} (constant)`,"Format ":`${o}x${s} (constant)`}}function wue(n,e){const{type:t,size:r}=e,i=uU(t,r);return i?`${n} (${i.name})`:n}function fU({header:n="Uniforms",program:e,uniforms:t,undefinedOnly:r=!1}){nn(e);const s=".*Matrix",a={},l=Object.keys(e._uniformSetters).sort();let u=0;for(const p of l)!p.match(".*_.*")&&!p.match(s)&&PI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:r})&&u++;for(const p of l)p.match(s)&&PI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:r})&&u++;for(const p of l)a[p]||PI({table:a,header:n,uniforms:t,uniformName:p,undefinedOnly:r})&&u++;let c=0;const h={};if(!r)for(const p in t){const g=t[p];a[p]||(c++,h[p]={Type:`NOT USED: ${g}`,[n]:bv(g)})}return{table:a,count:u,unusedTable:h,unusedCount:c}}function PI({table:n,header:e,uniforms:t,uniformName:r,undefinedOnly:i}){const s=t[r],o=function(n){return null!=n}(s);return!(i&&o||(n[r]={[e]:o?bv(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},0))}function pU(n){const{type:e,size:t}=n.accessor,r=uU(e,t);return r?`${r.name} ${n.name}`:n.name}const Cue={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Tue(n,e){const{attributeMap:t=Cue}=e||{};return t&&t[n]||n}function xue(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}nn(Number.isFinite(e.size),`attribute ${n} needs size`)}const gU=()=>{},Iue={};class yS{constructor(e,t={}){const{id:r=Yu("model")}=t;nn(tS(e)),this.id=r,this.gl=e,this.id=t.id||Yu("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||vv.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=e;this.programProps={program:t,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},nn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=e;this.programProps={program:t,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return nn(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return nn(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(n,e,t){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=Tue(s,undefined);if("indices"===s)i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,u=Ls({},o);delete u.value,r[a]=[new ri(n,l),u],xue(s,u)}}if(i){const s=i.value||i;nn(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new ri(n,{data:s,target:34963}),o]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(kg(e))return this;const t={};for(const r in e){const i=e[r];t[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(t),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return sI(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:t=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;let u;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(i),dn.priority>=2&&(u=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:h=c.isIndexed,indexType:p=c.indexType,indexOffset:g=c.indexOffset,vertexArrayInstanced:m=c.isInstanced}=this.props;m&&!this.isInstanced&&dn.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:b,instanceCount:w}=this,{onBeforeRender:H=gU,onAfterRender:V=gU}=this.props;H(),this.program.setUniforms(this.uniforms);const fe=this.program.draw(Object.assign(Iue,e,{logPriority:u,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:h,indexType:p,isInstanced:b,instanceCount:w,offset:h?g:0}));return V(),dn.priority>=2&&this._logDrawCallEnd(u,l,r),fe}transform(e={}){const{discard:t=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),t&&(s=Object.assign({},s,{35977:t})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return dn.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;t=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}nn(t instanceof dU,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new yue(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof ri&&t.delete()}}_setAnimationProps(e){this.animated&&nn(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(kg(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new BV(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),dn.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:dn.level<=2})(),e}_logDrawCallEnd(e,t,r,i){if(void 0===e)return;const s=function({vertexArray:n,header:e="Attributes"}){if(!n.configuration)return{};const t={};n.elements&&(t.ELEMENT_ARRAY_BUFFER=hU(n,n.elements,null,e));const r=n.values;for(const i in r){const s=n._getAttributeInfo(i);if(s){let o=`${i}: ${s.name}`;const a=n.accessors[s.location];a&&(o=`${i}: ${wue(s.name,a)}`),t[o]=hU(n,r[i],a,e)}}return t}({vertexArray:t,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=fU({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:u,count:c}=fU({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});c>0&&dn.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&dn.log("UNUSED UNIFORMS",Object.keys(a))();const h=function(n){const e={},t=`Accessors for ${n.id}`;for(const r of n.attributeInfos)r&&(e[`in ${pU(r)}`]={[t]:JSON.stringify(r.accessor)});for(const r of n.varyingInfos)r&&(e[`out ${pU(r)}`]={[t]:JSON.stringify(r.accessor)});return e}(this.vertexArray.configuration);dn.table(e,s)(),dn.table(e,o)(),dn.table(e+1,h)(),i&&i.log({logLevel:2,message:`Rendered to ${i.id}`}),dn.groupEnd(2,`>>> DRAWING MODEL ${this.id}`)()}}class NI{static isSupported(e){return mr(e)}constructor(e,t={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:r}=this;e&&e.delete(),t&&t.delete(),r&&r.delete()}run(e={}){const{clearRenderTarget:t=!0}=e,r=this._updateDrawOptions(e);t&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t)e=e||r.swap();nn(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of t)r.update(e)}_initialize(e={}){const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new yS(t,Object.assign({},e,{fs:e.fs||LV({version:jV(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)t=i.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function(n){return!(kg(n.feedbackBuffers)&&kg(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new Aae(e,t)),function(n){return!(kg(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new jae(e,t)),nn(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)t=Object.assign(t,i.getDrawOptions(t));return t}}function vS(){}var Pue={onStart:vS,onUpdate:vS,onInterrupt:vS,onEnd:vS},wv=function(){function n(e){_n(this,n),this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}return Sn(n,[{key:"start",value:function(t){this.cancel(),this.settings=Object.assign({},Pue,t),this._inProgress=!0,this.settings.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){if(!this._inProgress)return!1;if(null===this._handle){var t=this.timeline,r=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:r.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),n}();function mU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Nue(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?mU(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _U(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Lue=function(){function n(e){var t=e.gl,r=e.attribute,i=e.timeline;_n(this,n),this.gl=t,this.type="interpolation",this.transition=new wv(i),this.attribute=r,this.attributeInTransition=new _I(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(n,e){var t=OV(e.size);return new NI(n,{vs:Bue,defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(t,r);var s={byteLength:0,usage:35050};this.buffers=[new ri(t,s),new ri(t,s)]}return Sn(n,[{key:"start",value:function(t,r){if(t.duration<=0)this.transition.cancel();else{var s=this.buffers,o=this.attribute;RV(s);var u,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},l=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return _U(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _U(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(s);try{for(l.s();!(u=l.n()).done;)PV(Nue({buffer:u.value},a))}catch(h){l.e(h)}finally{l.f()}this.currentStartIndices=o.startIndices,this.currentLength=mI(o,r),this.attributeInTransition.update({buffer:s[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:s[0],aTo:IV(0,o)},feedbackBuffers:{vCurrent:s[1]}})}}},{key:"update",value:function(){var t=this.transition.update();if(t){var r=this.transition,s=r.settings,l=(0,s.easing)(r.time/s.duration);this.transform.run({uniforms:{time:l}})}return t}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),n}(),Bue="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";function yU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vue(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?yU(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vU(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var que={interpolation:Lue,spring:function(){function n(e){var t=e.gl,r=e.attribute,i=e.timeline;_n(this,n),this.gl=t,this.type="spring",this.transition=new wv(i),this.attribute=r,this.attributeInTransition=new _I(t,Object.assign({},r.settings,{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(n){return new Fa(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(t),this.framebuffer=function(n,e){return new Ns(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Ln({},36064,e)})}(t,this.texture),this.transform=function(n,e,t){var r=OV(e.size);return new NI(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(t,r,this.framebuffer);var s={byteLength:0,usage:35050};this.buffers=[new ri(t,s),new ri(t,s),new ri(t,s)]}return Sn(n,[{key:"start",value:function(t,r){var u,s=this.buffers,o=this.attribute,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter},l=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return vU(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vU(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(s);try{for(l.s();!(u=l.n()).done;)PV(Vue({buffer:u.value},a))}catch(h){l.e(h)}finally{l.f()}this.currentStartIndices=o.startIndices,this.currentLength=mI(o,r),this.attributeInTransition.update({buffer:s[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:IV(0,o)}})}},{key:"update",value:function(){var t=this.buffers,r=this.transform,i=this.framebuffer,s=this.transition;return!!s.update()&&(r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.settings.stiffness,damping:s.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),RV(t),this.attributeInTransition.update({buffer:t[1],value:this.attribute.value}),rS(i)[0]>0||s.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),n}()},Yue=function(){function n(e,t){var r=t.id,i=t.timeline;_n(this,n),this.id=r,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=NI.isSupported(e)}return Sn(n,[{key:"finalize",value:function(){for(var t in this.transitions)this._removeTransition(t)}},{key:"update",value:function(t){var r=t.attributes,i=t.transitions,s=t.numInstances;for(var o in this.numInstances=s||1,r){var a=r[o],l=a.getTransitionSetting(i);!l||this._updateAttribute(o,a,l)}for(var u in this.transitions){var c=r[u];(!c||!c.getTransitionSetting(i))&&this._removeTransition(u)}}},{key:"hasAttribute",value:function(t){var r=this.transitions[t];return r&&r.inProgress}},{key:"getAttributes",value:function(){var t={};for(var r in this.transitions){var i=this.transitions[r];i.inProgress&&(t[r]=i.attributeInTransition)}return t}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);var i=this.needsRedraw;return this.needsRedraw=!1,i}},{key:"_removeTransition",value:function(t){this.transitions[t].cancel(),delete this.transitions[t]}},{key:"_updateAttribute",value:function(t,r,i){var s=this.transitions[t],o=!s||s.type!==i.type;if(o){if(!this.isSupported)return void Ir.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();s&&this._removeTransition(t);var a=que[i.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Ir.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(i,this.numInstances))}}]),n}(),bU="attributeManager.invalidate",Kue="attributeManager.updateStart",Xue="attributeManager.updateEnd",ece=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id,i=void 0===r?"attribute-manager":r,s=t.stats,o=t.timeline;_n(this,n),this.id=i,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=s,this.attributeTransitionManager=new Yue(e,{id:"".concat(i,"-transitions"),timeline:o}),Object.seal(this)}return Sn(n,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!0,this}},{key:"add",value:function(t,r){this._add(t,r)}},{key:"addInstanced",value:function(t,r){this._add(t,r,{instanced:1})}},{key:"remove",value:function(t){for(var r=0;r<t.length;r++){var i=t[r];void 0!==this.attributes[i]&&(this.attributes[i].delete(),delete this.attributes[i])}}},{key:"invalidate",value:function(t,r){var i=this._invalidateTrigger(t,r);Ao(bU,this,t,i)}},{key:"invalidateAll",value:function(t){for(var r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Ao(bU,this,"all")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data,i=t.numInstances,s=t.startIndices,o=void 0===s?null:s,a=t.transitions,l=t.props,u=void 0===l?{}:l,c=t.buffers,h=void 0===c?{}:c,p=t.context,g=void 0===p?{}:p,m=!1;for(var b in Ao(Kue,this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var w=this.attributes[b],H=w.settings.accessor;w.startIndices=o,u[b]&&Ir.removed("props.".concat(b),"data.attributes.".concat(b))(),w.setExternalBuffer(h[b])||w.setBinaryValue(h[H],r.startIndices)||!h[H]&&w.setConstantValue(u[H])||w.needsUpdate()&&(m=!0,this._updateAttribute({attribute:w,numInstances:i,data:r,props:u,context:g})),this.needsRedraw|=w.needsRedraw()}m&&Ao(Xue,this,i),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:i,transitions:a})}},{key:"updateTransition",value:function(){var r=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||r,r}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},r=this.attributes,i=this.attributeTransitionManager,s=Object.assign({},i.getAttributes());for(var o in r){var a=r[o];a.needsRedraw(t)&&!i.hasAttribute(o)&&(s[o]=a)}return s}},{key:"getShaderAttributes",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());var i={};for(var s in t)r[s]||Object.assign(i,t[s].getShaderAttributes());return i}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r&&Ir.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var s={};for(var o in t){var a=t[o],l=this._createAttribute(o,a,i);s[o]=l}Object.assign(this.attributes,s),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(t,r,i){return new _I(this.gl,Object.assign({},r,{id:t,constant:r.constant||!1,isIndexed:r.isIndexed||r.elements,size:r.elements?1:r.size,value:r.value||null,divisor:r.instanced||i.instanced?1:r.divisor}))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,r={},i=function(a){t.attributes[a].getUpdateTriggers().forEach(function(u){r[u]||(r[u]=[]),r[u].push(a)})};for(var s in this.attributes)i(s);this.updateTriggers=r}},{key:"_invalidateTrigger",value:function(t,r){var i=this.attributes,o=this.updateTriggers[t];return o&&o.forEach(function(a){var l=i[a];l&&l.setNeedsUpdate(l.id,r)}),o}},{key:"_updateAttribute",value:function(t){var r=t.attribute,i=t.numInstances;Ao("attribute.updateStart",r),r.allocate(i)&&Ao("attribute.allocate",r,i),r.updateBuffer(t)&&(this.needsRedraw=!0,Ao("attribute.updateEnd",r,i))}}]),n}();function EU(n,e,t,r,i){var s=e-n;return(t-e)*i+-s*r+s+e}function SU(n,e){if(Array.isArray(n)){for(var t=0,r=0;r<n.length;r++){var i=n[r]-e[r];t+=i*i}return Math.sqrt(t)}return Math.abs(n-e)}function CU(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return AU(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AU(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function AU(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function TU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xU(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?TU(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):TU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var uce={interpolation:function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"_onUpdate",value:function(){var s=this.settings,o=s.fromValue,a=s.toValue,c=(0,s.easing)(this.time/s.duration);this._value=iS(o,a,c)}},{key:"value",get:function(){return this._value}}]),t}(wv),spring:function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"_onUpdate",value:function(){var i=this.settings,s=i.fromValue,o=i.toValue,u=this._prevValue,h=this._currValue,p=void 0===h?s:h,g=function(n,e,t,r,i){if(Array.isArray(t)){for(var s=[],o=0;o<t.length;o++)s[o]=EU(n[o],e[o],t[o],r,i);return s}return EU(n,e,t,r,i)}(void 0===u?s:u,p,o,i.damping,i.stiffness),m=SU(g,o),b=SU(g,p);m<1e-5&&b<1e-5&&(g=o,this.end()),this._prevValue=p,this._currValue=g}},{key:"value",get:function(){return this._currValue}}]),t}(wv)},cce=function(){function n(e){_n(this,n),this.transitions=new Map,this.timeline=e}return Sn(n,[{key:"add",value:function(t,r,i,s){var o=this.transitions;if(o.has(t)){var a=o.get(t),l=a.value;r=void 0===l?a.settings.fromValue:l,this.remove(t)}if(s=MV(s)){var c=uce[s.type];if(!c)return void Ir.error("unsupported transition type '".concat(s.type,"'"))();var h=new c(this.timeline);h.start(xU(xU({},s),{},{fromValue:r,toValue:i})),o.set(t,h)}}},{key:"remove",value:function(t){var r=this.transitions;r.has(t)&&(r.get(t).cancel(),r.delete(t))}},{key:"update",value:function(){var i,t={},r=CU(this.transitions);try{for(r.s();!(i=r.n()).done;){var s=os(i.value,2),o=s[0],a=s[1];a.update(),t[o]=a.value,a.inProgress||this.remove(o)}}catch(l){r.e(l)}finally{r.f()}return t}},{key:"clear",value:function(){var r,t=CU(this.transitions.keys());try{for(t.s();!(r=t.n()).done;)this.remove(r.value)}catch(s){t.e(s)}finally{t.f()}}},{key:"active",get:function(){return this.transitions.size>0}}]),n}(),iu={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},dce=iu.COMPONENT;function pce(n,e){if(!n.transitions)return null;var t={},r=FI(n);for(var i in n.transitions){var s=r[i],o=s&&s.type;("number"===o||"color"===o||"array"===o)&&kI(n[i],e[i],s)&&(t[i]=!0)}return t}function DU(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.newProps,t=n.oldProps,r=n.ignoreProps,i=void 0===r?{}:r,s=n.propTypes,o=void 0===s?{}:s,a=n.triggerName,l=void 0===a?"props":a;if(t===e)return null;if("object"!==di(e)||null===e||"object"!==di(t)||null===t)return"".concat(l," changed shallowly");for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];if(!(h in i)){if(!(h in t))return"".concat(l,".").concat(h," added");var p=kI(e[h],t[h],o[h]);if(p)return"".concat(l,".").concat(h," ").concat(p)}}for(var g=0,m=Object.keys(t);g<m.length;g++){var b=m[g];if(!(b in i)){if(!(b in e))return"".concat(l,".").concat(b," dropped");if(!Object.hasOwnProperty.call(e,b)){var w=kI(e[b],t[b],o[b]);if(w)return"".concat(l,".").concat(b," ").concat(w)}}}return null}function kI(n,e,t){var r=t&&t.equal;return r&&!r(n,e,t)||!r&&(r=n&&e&&n.equals)&&!r.call(n,e)?"changed deeply":r||e===n?null:"changed shallowly"}function _ce(n,e){if(null===e)return"oldProps is null, initial diff";var t=e.extensions,r=n.extensions;if(r===t)return!1;if(r.length!==t.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(t[i]))return!0;return!1}function MU(n,e,t){var r=n.updateTriggers[t],i=e.updateTriggers[t];return DU({oldProps:i=null==i?{}:i,newProps:r=null==r?{}:r,triggerName:t})}function FI(n){var e=n[dce],t=e&&e.constructor;return t?t._propTypes:{}}function Sce(n,e){if(n===e)return!0;if(Array.isArray(n)){var t=n.length;if(!e||e.length!==t)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}return!1}function bS(n){var t,e={};return function(r){for(var i in r)if(!Sce(r[i],e[i])){t=n(r),e=r;break}return t}}function IU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ace(n,e){if(!e)return n;var t=Object.assign({},n,e);if("defines"in e&&(t.defines=Object.assign({},n.defines,e.defines)),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(function(o){return"project64"===o.name}))){var r=t.modules.findIndex(function(o){return"project32"===o.name});r>=0&&t.modules.splice(r,1)}if("inject"in e)if(n.inject){var i=function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?IU(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}({},n.inject);for(var s in e.inject)i[s]=(i[s]||"")+e.inject[s];t.inject=i}else t.inject=e.inject;return t}function wS(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],g=e[11],m=e[12],b=e[13],w=e[14],H=e[15],V=t*a-r*o,fe=t*l-i*o,Me=t*u-s*o,Oe=r*l-i*a,Ue=r*u-s*a,st=i*u-s*l,vt=c*b-h*m,Ct=c*w-p*m,mt=c*H-g*m,Bt=h*w-p*b,Rt=h*H-g*b,ft=p*H-g*w,_t=V*ft-fe*Rt+Me*Bt+Oe*mt-Ue*Ct+st*vt;return _t?(n[0]=(a*ft-l*Rt+u*Bt)*(_t=1/_t),n[1]=(i*Rt-r*ft-s*Bt)*_t,n[2]=(b*st-w*Ue+H*Oe)*_t,n[3]=(p*Ue-h*st-g*Oe)*_t,n[4]=(l*mt-o*ft-u*Ct)*_t,n[5]=(t*ft-i*mt+s*Ct)*_t,n[6]=(w*Me-m*st-H*fe)*_t,n[7]=(c*st-p*Me+g*fe)*_t,n[8]=(o*Rt-a*mt+u*vt)*_t,n[9]=(r*mt-t*Rt-s*vt)*_t,n[10]=(m*Ue-b*Me+H*V)*_t,n[11]=(h*Me-c*Ue-g*V)*_t,n[12]=(a*Ct-o*Bt-l*vt)*_t,n[13]=(t*Bt-r*Ct+i*vt)*_t,n[14]=(b*fe-m*Oe-w*V)*_t,n[15]=(c*Oe-h*fe+p*V)*_t,n):null}function Ku(n,e,t){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],g=e[10],m=e[11],b=e[12],w=e[13],H=e[14],V=e[15],fe=t[0],Me=t[1],Oe=t[2],Ue=t[3];return n[0]=fe*r+Me*a+Oe*h+Ue*b,n[1]=fe*i+Me*l+Oe*p+Ue*w,n[2]=fe*s+Me*u+Oe*g+Ue*H,n[3]=fe*o+Me*c+Oe*m+Ue*V,n[4]=(fe=t[4])*r+(Me=t[5])*a+(Oe=t[6])*h+(Ue=t[7])*b,n[5]=fe*i+Me*l+Oe*p+Ue*w,n[6]=fe*s+Me*u+Oe*g+Ue*H,n[7]=fe*o+Me*c+Oe*m+Ue*V,n[8]=(fe=t[8])*r+(Me=t[9])*a+(Oe=t[10])*h+(Ue=t[11])*b,n[9]=fe*i+Me*l+Oe*p+Ue*w,n[10]=fe*s+Me*u+Oe*g+Ue*H,n[11]=fe*o+Me*c+Oe*m+Ue*V,n[12]=(fe=t[12])*r+(Me=t[13])*a+(Oe=t[14])*h+(Ue=t[15])*b,n[13]=fe*i+Me*l+Oe*p+Ue*w,n[14]=fe*s+Me*u+Oe*g+Ue*H,n[15]=fe*o+Me*c+Oe*m+Ue*V,n}function Ev(n,e,t){var o,a,l,u,c,h,p,g,m,b,w,H,r=t[0],i=t[1],s=t[2];return e===n?(n[12]=e[0]*r+e[4]*i+e[8]*s+e[12],n[13]=e[1]*r+e[5]*i+e[9]*s+e[13],n[14]=e[2]*r+e[6]*i+e[10]*s+e[14],n[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(a=e[1],l=e[2],u=e[3],c=e[4],h=e[5],p=e[6],g=e[7],m=e[8],b=e[9],w=e[10],H=e[11],n[0]=o=e[0],n[1]=a,n[2]=l,n[3]=u,n[4]=c,n[5]=h,n[6]=p,n[7]=g,n[8]=m,n[9]=b,n[10]=w,n[11]=H,n[12]=o*r+c*i+m*s+e[12],n[13]=a*r+h*i+b*s+e[13],n[14]=l*r+p*i+w*s+e[14],n[15]=u*r+g*i+H*s+e[15]),n}function Sv(n,e,t){var r=t[0],i=t[1],s=t[2];return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[7]=e[7]*i,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function OU(n,e,t){var r=Math.sin(t),i=Math.cos(t),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*i+u*r,n[5]=o*i+c*r,n[6]=a*i+h*r,n[7]=l*i+p*r,n[8]=u*i-s*r,n[9]=c*i-o*r,n[10]=h*i-a*r,n[11]=p*i-l*r,n}function RU(n,e,t){var r=Math.sin(t),i=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*i+u*r,n[1]=o*i+c*r,n[2]=a*i+h*r,n[3]=l*i+p*r,n[4]=u*i-s*r,n[5]=c*i-o*r,n[6]=h*i-a*r,n[7]=p*i-l*r,n}function PU(n,e,t,r,i){var o,s=1/Math.tan(e/2);return n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=i&&i!==1/0?(n[10]=(i+r)*(o=1/(r-i)),n[14]=2*i*r*o):(n[10]=-1,n[14]=-2*r),n}function NU(n,e){var t=n[0],r=n[1],i=n[2],s=n[3],o=n[4],a=n[5],l=n[6],u=n[7],c=n[8],h=n[9],p=n[10],g=n[11],m=n[12],b=n[13],w=n[14],H=n[15],V=e[0],fe=e[1],Me=e[2],Oe=e[3],Ue=e[4],st=e[5],vt=e[6],Ct=e[7],mt=e[8],Bt=e[9],Rt=e[10],ft=e[11],_t=e[12],kt=e[13],ut=e[14],qt=e[15];return Math.abs(t-V)<=pi*Math.max(1,Math.abs(t),Math.abs(V))&&Math.abs(r-fe)<=pi*Math.max(1,Math.abs(r),Math.abs(fe))&&Math.abs(i-Me)<=pi*Math.max(1,Math.abs(i),Math.abs(Me))&&Math.abs(s-Oe)<=pi*Math.max(1,Math.abs(s),Math.abs(Oe))&&Math.abs(o-Ue)<=pi*Math.max(1,Math.abs(o),Math.abs(Ue))&&Math.abs(a-st)<=pi*Math.max(1,Math.abs(a),Math.abs(st))&&Math.abs(l-vt)<=pi*Math.max(1,Math.abs(l),Math.abs(vt))&&Math.abs(u-Ct)<=pi*Math.max(1,Math.abs(u),Math.abs(Ct))&&Math.abs(c-mt)<=pi*Math.max(1,Math.abs(c),Math.abs(mt))&&Math.abs(h-Bt)<=pi*Math.max(1,Math.abs(h),Math.abs(Bt))&&Math.abs(p-Rt)<=pi*Math.max(1,Math.abs(p),Math.abs(Rt))&&Math.abs(g-ft)<=pi*Math.max(1,Math.abs(g),Math.abs(ft))&&Math.abs(m-_t)<=pi*Math.max(1,Math.abs(m),Math.abs(_t))&&Math.abs(b-kt)<=pi*Math.max(1,Math.abs(b),Math.abs(kt))&&Math.abs(w-ut)<=pi*Math.max(1,Math.abs(w),Math.abs(ut))&&Math.abs(H-qt)<=pi*Math.max(1,Math.abs(H),Math.abs(qt))}function kU(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function ES(n,e,t){var r=e[0],i=e[1],s=e[2],o=e[3];return n[0]=t[0]*r+t[4]*i+t[8]*s+t[12]*o,n[1]=t[1]*r+t[5]*i+t[9]*s+t[13]*o,n[2]=t[2]*r+t[6]*i+t[10]*s+t[14]*o,n[3]=t[3]*r+t[7]*i+t[11]*s+t[15]*o,n}!function(){var n=new pa(4);pa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var Qce=[0,0,0,0],Zce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Jce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ede=[0,0,0],tde=[0,0,0],nde=bS(function(n){var e=n.viewport,t=n.devicePixelRatio,r=n.coordinateSystem,s=function(n,e,t){var r=n.viewMatrixUncentered,i=n.projectionMatrix,s=n.viewMatrix,o=n.viewProjectionMatrix,a=Qce,l=n.cameraPosition,u=FU(n,e,t),c=u.geospatialOrigin,h=u.shaderCoordinateOrigin;if(u.offsetMode){var g=n.projectPosition(c||h);l=[l[0]-g[0],l[1]-g[1],l[2]-g[2]],g[3]=1,a=ES([],g,o),o=Ku([],i,s=r||s),o=Ku([],o,Zce)}return{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:c}}(e,r,n.coordinateOrigin),o=s.projectionCenter,a=s.viewProjectionMatrix,l=s.cameraPosCommon,u=s.shaderCoordinateOrigin,c=s.geospatialOrigin,h=e.getDistanceScales(),g={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:u,project_uCenter:o,project_uViewportSize:[e.width*t,e.height*t],project_uDevicePixelRatio:t,project_uFocalDistance:e.focalDistance||1,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:ede,project_uScale:e.scale,project_uViewProjectionMatrix:a,project_uCameraPosition:l};if(c){var m=e.getDistanceScales(c);switch(r){case Or.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case Or.LNGLAT:case Or.LNGLAT_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case Or.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function FU(n,e){var i,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tde,r=t,s=!0;switch(i=e===Or.LNGLAT_OFFSETS||e===Or.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case Wu.WEB_MERCATOR:(e===Or.LNGLAT||e===Or.CARTESIAN)&&(s=!1);break;case Wu.WEB_MERCATOR_AUTO_OFFSET:e===Or.LNGLAT?r=i:e===Or.CARTESIAN&&(r=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],i=n.unprojectPosition(r),r[0]-=t[0],r[1]-=t[1],r[2]-=t[2]);break;case Wu.IDENTITY:r=n.position.map(Math.fround);break;case Wu.GLOBE:s=!1,i=null;break;default:s=!1}return r[2]=r[2]||0,{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function ide(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.viewport,t=n.devicePixelRatio,r=void 0===t?1:t,i=n.modelMatrix,s=void 0===i?null:i,o=n.coordinateSystem,a=void 0===o?Or.DEFAULT:o,l=n.coordinateOrigin,u=n.autoWrapLongitude,c=void 0!==u&&u;ms(e),a===Or.DEFAULT&&(a=e.isGeospatial?Or.LNGLAT:Or.CARTESIAN);var g=nde({viewport:e,devicePixelRatio:r,coordinateSystem:a,coordinateOrigin:l});return g.project_uWrapLongitude=c,g.project_uModelMatrix=s||Jce,g}class ode extends cI{get ELEMENTS(){return $c(!1),0}get RANK(){return $c(!1),0}toString(){let e="[";if(ai.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,r){return this[t*this.RANK+e]=as(r),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)t[i]=this[r+i];return t}setColumn(e,t){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=t[i];return this}}function SS(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function LU(n,e){return n[0]=-e[0],n[1]=-e[1],n}function BU(n,e,t,r){var i=e[0],s=e[1];return n[0]=i+r*(t[0]-i),n[1]=s+r*(t[1]-s),n}function jU(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[4]*i+t[12],n[1]=t[1]*r+t[5]*i+t[13],n}!function(){var n=new pa(2);pa!=Float32Array&&(n[0]=0,n[1]=0)}();const VU=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),dde=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),hde=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),Wg={};class Xn extends ode{static get IDENTITY(){return Wg.IDENTITY=Wg.IDENTITY||Object.freeze(new Xn(VU)),Wg.IDENTITY}static get ZERO(){return Wg.ZERO=Wg.ZERO||Object.freeze(new Xn(dde)),Wg.ZERO}get INDICES(){return hde}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,r,i,s,o,a,l,u,c,h,p,g,m,b,w){return this[0]=e,this[1]=t,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=u,this[9]=c,this[10]=h,this[11]=p,this[12]=g,this[13]=m,this[14]=b,this[15]=w,this.check()}setRowMajor(e,t,r,i,s,o,a,l,u,c,h,p,g,m,b,w){return this[0]=e,this[1]=s,this[2]=u,this[3]=g,this[4]=t,this[5]=o,this[6]=c,this[7]=m,this[8]=r,this[9]=a,this[10]=h,this[11]=b,this[12]=i,this[13]=l,this[14]=p,this[15]=w,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(VU)}fromQuaternion(e){return function(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=t+t,a=r+r,l=i+i,u=t*o,c=r*o,h=r*a,p=i*o,g=i*a,m=i*l,b=s*o,w=s*a,H=s*l;n[0]=1-h-m,n[1]=c+H,n[2]=p-w,n[3]=0,n[4]=c-H,n[5]=1-u-m,n[6]=g+b,n[7]=0,n[8]=p+w,n[9]=g-b,n[10]=1-u-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum({left:e,right:t,bottom:r,top:i,near:s,far:o}){return o===1/0?Xn._computeInfinitePerspectiveOffCenter(this,e,t,r,i,s):function(n,e,t,r,i,s,o){var a=1/(t-e),l=1/(i-r),u=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*l,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(i+r)*l,n[10]=(o+s)*u,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*u,n[15]=0}(this,e,t,r,i,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,t,r,i,s,o){const l=2*o/(s-i),u=(r+t)/(r-t),c=(s+i)/(s-i),g=-2*o;return e[0]=2*o/(r-t),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=u,e[9]=c,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,t,r){return 1===arguments.length&&({eye:e,center:t,up:r}=e),function(n,e,t,r){var i,s,o,a,l,u,c,h,p,g,m=e[0],b=e[1],w=e[2],H=r[0],V=r[1],fe=r[2],Me=t[0],Oe=t[1],Ue=t[2];Math.abs(m-Me)<pi&&Math.abs(b-Oe)<pi&&Math.abs(w-Ue)<pi?function(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(c=m-Me,h=b-Oe,p=w-Ue,i=V*(p*=g=1/Math.hypot(c,h,p))-fe*(h*=g),s=fe*(c*=g)-H*p,o=H*h-V*c,(g=Math.hypot(i,s,o))?(i*=g=1/g,s*=g,o*=g):(i=0,s=0,o=0),a=h*o-p*s,l=p*i-c*o,u=c*s-h*i,(g=Math.hypot(a,l,u))?(a*=g=1/g,l*=g,u*=g):(a=0,l=0,u=0),n[0]=i,n[1]=a,n[2]=c,n[3]=0,n[4]=s,n[5]=l,n[6]=h,n[7]=0,n[8]=o,n[9]=u,n[10]=p,n[11]=0,n[12]=-(i*m+s*b+o*w),n[13]=-(a*m+l*b+u*w),n[14]=-(c*m+h*b+p*w),n[15]=1)}(this,e,t=t||[0,0,0],r=r||[0,1,0]),this.check()}ortho({left:e,right:t,bottom:r,top:i,near:s=.1,far:o=500}){return function(n,e,t,r,i,s,o){var a=1/(e-t),l=1/(r-i),u=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*u,n[11]=0,n[12]=(e+t)*a,n[13]=(i+r)*l,n[14]=(o+s)*u,n[15]=1}(this,e,t,r,i,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:t=1,focalDistance:r=1,near:i=.1,far:s=500}){if(e>2*Math.PI)throw Error("radians");const a=r*Math.tan(e/2),l=a*t;return(new Xn).ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:s})}perspective({fovy:e,fov:t=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}={}){if((e=e||t)>2*Math.PI)throw Error("radians");return PU(this,e,r,i,s),this.check()}determinant(){return function(n){var e=n[0],t=n[1],r=n[2],i=n[3],s=n[4],o=n[5],a=n[6],l=n[7],u=n[8],c=n[9],h=n[10],p=n[11],g=n[12],m=n[13],b=n[14],w=n[15];return(e*o-t*s)*(h*w-p*b)-(e*a-r*s)*(c*w-p*m)+(e*l-i*s)*(c*b-h*m)+(t*a-r*o)*(u*w-p*g)-(t*l-i*o)*(u*b-h*g)+(r*l-i*a)*(u*m-c*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const r=this.getScale(t||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=null){const r=this.getScale(t||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function(n,e){if(n===e){var t=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=r,n[9]=s,n[11]=e[14],n[12]=i,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return wS(this,this),this.check()}multiplyLeft(e){return Ku(this,e,this),this.check()}multiplyRight(e){return Ku(this,this,e),this.check()}rotateX(e){return OU(this,this,e),this.check()}rotateY(e){return function(n,e,t){var r=Math.sin(t),i=Math.cos(t),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*i-u*r,n[1]=o*i-c*r,n[2]=a*i-h*r,n[3]=l*i-p*r,n[8]=s*r+u*i,n[9]=o*r+c*i,n[10]=a*r+h*i,n[11]=l*r+p*i}(this,this,e),this.check()}rotateZ(e){return RU(this,this,e),this.check()}rotateXYZ([e,t,r]){return this.rotateX(e).rotateY(t).rotateZ(r)}rotateAxis(e,t){return function(n,e,t,r){var l,u,c,h,p,g,m,b,w,H,V,fe,Me,Oe,Ue,st,vt,Ct,mt,Bt,Rt,ft,_t,kt,i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o);a<pi||(i*=a=1/a,s*=a,o*=a,l=Math.sin(t),u=Math.cos(t),p=e[1],g=e[2],m=e[3],w=e[5],H=e[6],V=e[7],Me=e[9],Oe=e[10],Ue=e[11],mt=i*s*(c=1-u)-o*l,Bt=s*s*c+u,Rt=o*s*c+i*l,ft=i*o*c+s*l,_t=s*o*c-i*l,kt=o*o*c+u,n[0]=(h=e[0])*(st=i*i*c+u)+(b=e[4])*(vt=s*i*c+o*l)+(fe=e[8])*(Ct=o*i*c-s*l),n[1]=p*st+w*vt+Me*Ct,n[2]=g*st+H*vt+Oe*Ct,n[3]=m*st+V*vt+Ue*Ct,n[4]=h*mt+b*Bt+fe*Rt,n[5]=p*mt+w*Bt+Me*Rt,n[6]=g*mt+H*Bt+Oe*Rt,n[7]=m*mt+V*Bt+Ue*Rt,n[8]=h*ft+b*_t+fe*kt,n[9]=p*ft+w*_t+Me*kt,n[10]=g*ft+H*_t+Oe*kt,n[11]=m*ft+V*_t+Ue*kt,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return Array.isArray(e)?Sv(this,this,e):Sv(this,this,[e,e,e]),this.check()}translate(e){return Ev(this,this,e),this.check()}transform(e,t){return 4===e.length?(sS(t=ES(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:r}=e;switch(r){case 2:t=jU(t||[-0,-0],e,this);break;case 3:t=_V(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sS(t,e.length),t}transformAsVector(e,t){switch(e.length){case 2:t=yV(t||[-0,-0],e,this);break;case 3:t=vV(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return sS(t,e.length),t}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,r){return this.identity().translate([e,t,r])}transformPoint(e,t){return dI("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}transformVector(e,t){return dI("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}transformDirection(e,t){return dI("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}function qg(n,e){const t=ES([],e,n);return kU(t,t,1/t[3]),t}function UU(n,e){const t=n%e;return t<0?e+t:t}const LI=Math.log2||function(n){return Math.log(n)*Math.LOG2E};function qc(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const su=Math.PI,zU=su/4,ou=su/180,BI=180/su,jI=4003e4;function Yg([n,e]){return qc(Number.isFinite(n)),qc(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude"),[512*(n*ou+su)/(2*su),512*(su+Math.log(Math.tan(zU+e*ou*.5)))/(2*su)]}function sh([n,e]){const t=n/512*(2*su)-su,r=2*(Math.atan(Math.exp(e/512*(2*su)-su))-zU);return[t*BI,r*BI]}function AS({latitude:n,longitude:e,highPrecision:t=!1}){qc(Number.isFinite(n)&&Number.isFinite(e));const r={},s=Math.cos(n*ou),o=512/360,a=o/s,l=512/jI/s;if(r.unitsPerMeter=[l,l,l],r.metersPerUnit=[1/l,1/l,1/l],r.unitsPerDegree=[o,a,l],r.degreesPerUnit=[1/o,1/a,1/l],t){const u=ou*Math.tan(n*ou)/s,h=512/jI*u,p=h/a*l;r.unitsPerDegree2=[0,o*u/2,h],r.unitsPerMeter2=[p,0,p]}return r}function GU(n,e){const[t,r,i]=n,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:u}=AS({longitude:t,latitude:r,highPrecision:!0}),c=Yg(n);c[0]+=s*(l[0]+u[0]*o),c[1]+=o*(l[1]+u[1]*o);const h=sh(c),p=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],p]:h}function $U({height:n,pitch:e,bearing:t,altitude:r,scale:i,center:s=null}){const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return Ev(o,o,[0,0,-r]),OU(o,o,-e*ou),RU(o,o,t*ou),Sv(o,o,[i/=n,i,i]),s&&Ev(o,o,function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],s)),o}function WU({width:n,height:e,fovy:t=TS(1.5),altitude:r,pitch:i=0,nearZMultiplier:s=1,farZMultiplier:o=1}){void 0!==r&&(t=TS(r));const a=.5*t*ou,l=qU(t),u=i*ou,c=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-u-a,.01),Math.PI-.01));return{fov:2*a,aspect:n/e,focalDistance:l,near:s,far:(Math.sin(u)*c+l)*o}}function TS(n){return 2*Math.atan(.5/n)*BI}function qU(n){return.5/Math.tan(.5*n*ou)}function VI(n,e){const[t,r,i=0]=n;return qc(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(i)),qg(e,[t,r,i,1])}function Av(n,e,t=0){const[r,i,s]=n;if(qc(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return qg(e,[r,i,s,1]);const o=qg(e,[r,i,0,1]),a=qg(e,[r,i,1,1]),l=o[2],u=a[2];return BU([],o,a,l===u?0:((t||0)-l)/(u-l))}function YU({width:n,height:e,bounds:t,minExtent:r=0,maxZoom:i=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[u,c]]=t;Number.isFinite(s)?s={top:s,bottom:s,left:s,right:s}:qc(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const h=new xS({width:n,height:e,longitude:0,latitude:0,zoom:0}),p=h.project([a,c]),g=h.project([u,l]),m=[Math.max(Math.abs(g[0]-p[0]),r),Math.max(Math.abs(g[1]-p[1]),r)],b=[n-s.left-s.right-2*Math.abs(o[0]),e-s.top-s.bottom-2*Math.abs(o[1])];qc(b[0]>0&&b[1]>0);const w=b[0]/m[0],H=b[1]/m[1],Oe=h.unproject([(g[0]+p[0])/2+(s.right-s.left)/2/w,(g[1]+p[1])/2+(s.bottom-s.top)/2/H]),Ue=Math.min(i,h.zoom+LI(Math.abs(Math.min(w,H))));return qc(Number.isFinite(Ue)),{longitude:Oe[0],latitude:Oe[1],zoom:Ue}}const KU=Math.PI/180;function XU(n,e=0){const{width:t,height:r,unproject:i}=n,s={targetZ:e},o=i([0,r],s),a=i([t,r],s);let l,u;return(n.fovy?.5*n.fovy*KU:Math.atan(.5/n.altitude))>(90-n.pitch)*KU-.01?(l=QU(n,0,e),u=QU(n,t,e)):(l=i([0,0],s),u=i([t,0],s)),[o,a,u,l]}function QU(n,e,t){const{pixelUnprojectionMatrix:r}=n,i=qg(r,[e,0,1,1]),s=qg(r,[e,n.height,1,1]),u=sh(BU([],i,s,(t*n.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2])));return u[2]=t,u}class xS{constructor({width:e,height:t,latitude:r=0,longitude:i=0,zoom:s=0,pitch:o=0,bearing:a=0,altitude:l=null,fovy:u=null,position:c=null,nearZMultiplier:h=.02,farZMultiplier:p=1.01}={width:1,height:1}){e=e||1,t=t||1,null===u&&null===l?u=TS(l=1.5):null===u?u=TS(l):null===l&&(l=qU(u));const g=function(n){return Math.pow(2,n)}(s);l=Math.max(.75,l);const m=AS({longitude:i,latitude:r}),b=Yg([i,r]);b[2]=0,c&&function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2]}(b,b,function(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}([],c,m.unitsPerMeter)),this.projectionMatrix=function({width:n,height:e,pitch:t,altitude:r,fovy:i,nearZMultiplier:s,farZMultiplier:o}){const{fov:a,aspect:l,near:u,far:c}=WU({width:n,height:e,altitude:r,fovy:i,pitch:t,nearZMultiplier:s,farZMultiplier:o});return PU([],a,l,u,c)}({width:e,height:t,pitch:o,fovy:u,nearZMultiplier:h,farZMultiplier:p}),this.viewMatrix=$U({height:t,scale:g,center:b,pitch:o,bearing:a,altitude:l}),this.width=e,this.height=t,this.scale=g,this.latitude=r,this.longitude=i,this.zoom=s,this.pitch=o,this.bearing=a,this.altitude=l,this.fovy=u,this.center=b,this.meterOffset=c||[0,0,0],this.distanceScales=m,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:e,height:t,projectionMatrix:r,viewMatrix:i}=this,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ku(s,s,r),Ku(s,s,i),this.viewProjectionMatrix=s;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Sv(o,o,[e/2,-t/2,1]),Ev(o,o,[1,-1,0]),Ku(o,o,s);const a=wS([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=a}equals(e){return e instanceof xS&&e.width===this.width&&e.height===this.height&&NU(e.projectionMatrix,this.projectionMatrix)&&NU(e.viewMatrix,this.viewMatrix)}project(e,{topLeft:t=!0}={}){const i=VI(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=i,a=t?o:this.height-o;return 2===e.length?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:t=!0,targetZ:r}={}){const[i,s,o]=e,u=Av([i,t?s:this.height-s,o],this.pixelUnprojectionMatrix,r&&r*this.distanceScales.unitsPerMeter[2]),[c,h,p]=this.unprojectPosition(u);return Number.isFinite(o)?[c,h,p]:Number.isFinite(r)?[c,h,r]:[c,h]}projectPosition(e){const[t,r]=Yg(e);return[t,r,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,r]=sh(e);return[t,r,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){return Yg(e)}unprojectFlat(e){return sh(e)}getMapCenterByLngLatPosition({lngLat:e,pos:t}){const r=Av(t,this.pixelUnprojectionMatrix),s=SS([],Yg(e),LU([],r));return sh(SS([],this.center,s))}getLocationAtPoint({lngLat:e,pos:t}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:t})}fitBounds(e,t={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=YU(Object.assign({width:r,height:i,bounds:e},t));return new xS({width:r,height:i,longitude:s,latitude:o,zoom:a})}getBounds(e){const t=this.getBoundingRegion(e),r=Math.min(...t.map(a=>a[0])),i=Math.max(...t.map(a=>a[0]));return[[r,Math.min(...t.map(a=>a[1]))],[i,Math.max(...t.map(a=>a[1]))]]}getBoundingRegion(e={}){return XU(this,e.z||0)}}var bde=Math.PI/180,wde=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],UI=[0,0,0],Sde={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},Af=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n);var t=e.id,r=void 0===t?null:t,i=e.x,s=void 0===i?0:i,o=e.y,a=void 0===o?0:o,l=e.width,u=void 0===l?1:l,c=e.height,h=void 0===c?1:c;this.id=r||this.constructor.displayName||"viewport",this.x=s,this.y=a,this.width=u||1,this.height=h||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Sn(n,[{key:"equals",value:function(t){return t instanceof n&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&hv(t.projectionMatrix,this.projectionMatrix)&&hv(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.topLeft,s=void 0===i||i,o=this.projectPosition(t),a=VI(o,this.pixelProjectionMatrix),l=os(a,2),u=l[0],c=l[1],h=s?c:this.height-c;return 2===t.length?[u,h]:[u,h,a[2]]}},{key:"unproject",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.topLeft,s=void 0===i||i,o=r.targetZ,a=os(t,3),l=a[0],u=a[1],c=a[2],h=s?u:this.height-u,p=o&&o*this.distanceScales.unitsPerMeter[2],g=Av([l,h,c],this.pixelUnprojectionMatrix,p),m=this.unprojectPosition(g),b=os(m,3),w=b[0],H=b[1],V=b[2];return Number.isFinite(c)?[w,H,V]:Number.isFinite(o)?[w,H,o]:[w,H]}},{key:"projectPosition",value:function(t){var i=os(this.projectFlat(t),2);return[i[0],i[1],(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var i=os(this.unprojectFlat(t),2);return[i[0],i[1],(t[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(t){return this.isGeospatial?Yg(t):t}},{key:"unprojectFlat",value:function(t){return this.isGeospatial?sh(t):t}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={targetZ:t.z||0},i=this.unproject([0,0],r),s=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(i[0],s[0],o[0],a[0]),Math.min(i[1],s[1],o[1],a[1]),Math.max(i[0],s[0],o[0],a[0]),Math.max(i[1],s[1],o[1],a[1])]}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?AS({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(t){var r=t.x,i=t.y,s=t.width,a=t.height;return r<this.x+this.width&&this.x<r+(void 0===s?1:s)&&i<this.y+this.height&&this.y<i+(void 0===a?1:a)}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function(n){var e={};return e.left=jg(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),e.right=jg(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),e.bottom=jg(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),e.top=jg(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),e.near=jg(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),e.far=jg(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14]),e}(this.viewProjectionMatrix)),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(t){var i=t.fovyRadians,s=t.aspect,o=t.focalDistance,a=t.near,l=t.far;return t.orthographic?(new Xn).orthographic({fovy:i,aspect:s,focalDistance:o,near:a,far:l}):(new Xn).perspective({fovy:i,aspect:s,near:a,far:l})}},{key:"_initViewMatrix",value:function(t){var r=t.viewMatrix,i=void 0===r?wde:r,s=t.longitude,o=void 0===s?null:s,a=t.latitude,l=void 0===a?null:a,u=t.zoom,c=void 0===u?null:u,h=t.position,p=void 0===h?null:h,g=t.modelMatrix,m=void 0===g?null:g,b=t.focalDistance,w=void 0===b?1:b,H=t.distanceScales,V=void 0===H?null:H;this.isGeospatial=Number.isFinite(l)&&Number.isFinite(o),this.zoom=c,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function({latitude:n}){qc(Number.isFinite(n));const e=Math.cos(n*ou);return function(n){return LI(n)}(jI*e)-9}({latitude:l})+Math.log2(w):0);var fe=Math.pow(2,this.zoom);this.scale=fe,this.distanceScales=this.isGeospatial?AS({latitude:l,longitude:o}):V||Sde,this.focalDistance=w,this.distanceScales.metersPerUnit=new Co(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new Co(this.distanceScales.unitsPerMeter),this.position=UI,this.meterOffset=UI,p&&(this.position=p,this.modelMatrix=m,this.meterOffset=m?m.transformVector(p):p),this.isGeospatial?(this.longitude=o,this.latitude=l,this.center=this._getCenterInWorld({longitude:o,latitude:l})):this.center=p?this.projectPosition(p):[0,0,0],this.viewMatrixUncentered=i,this.viewMatrix=(new Xn).multiplyRight(this.viewMatrixUncentered).translate(new Co(this.center||UI).negate())}},{key:"_getCenterInWorld",value:function(t){var s=this.meterOffset,o=this.distanceScales,a=new Co(this.projectPosition([t.longitude,t.latitude,0]));if(s){var l=new Co(s).scale(o.unitsPerMeter);a.add(l)}return a}},{key:"_initProjectionMatrix",value:function(t){var r=t.projectionMatrix,s=t.orthographic,l=t.fovy,c=t.near,p=t.far,m=t.focalDistance;this.projectionMatrix=(void 0===r?null:r)||this._createProjectionMatrix({orthographic:void 0!==s&&s,fovyRadians:t.fovyRadians||(void 0===l?75:l)*bde,aspect:this.width/this.height,focalDistance:void 0===m?1:m,near:void 0===c?.1:c,far:void 0===p?1e3:p})}},{key:"_initPixelMatrices",value:function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ku(t,t,this.projectionMatrix),Ku(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=wS([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Sv(r,r,[this.width/2,-this.height/2,1]),Ev(r,r,[1,-1,0]),Ku(i,r,this.viewProjectionMatrix),this.pixelProjectionMatrix=i,this.viewportMatrix=r,this.pixelUnprojectionMatrix=wS([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ir.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?Wu.WEB_MERCATOR:Wu.WEB_MERCATOR_AUTO_OFFSET:Wu.IDENTITY}}]),n}();function nz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rz(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?nz(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}Af.displayName="Viewport";var Kg,zI=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){var r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,t);var s=i.latitude,o=void 0===s?0:s,a=i.longitude,l=void 0===a?0:a,u=i.zoom,c=void 0===u?11:u,h=i.pitch,p=void 0===h?0:h,g=i.bearing,m=void 0===g?0:g,b=i.nearZMultiplier,w=void 0===b?.1:b,H=i.farZMultiplier,V=void 0===H?1.01:H,fe=i.orthographic,Me=void 0!==fe&&fe,Oe=i.repeat,Ue=void 0!==Oe&&Oe,st=i.worldOffset,vt=void 0===st?0:st,Ct=i.width,mt=i.height,Bt=i.altitude,Rt=void 0===Bt?1.5:Bt,ft=Math.pow(2,c),_t=WU({width:Ct=Ct||1,height:mt=mt||1,pitch:p,altitude:Rt=Math.max(.75,Rt),nearZMultiplier:w,farZMultiplier:V}),kt=_t.fov,ut=_t.aspect,qt=_t.focalDistance,$t=_t.near,Xt=_t.far,yn=$U({height:mt,pitch:p,bearing:m,scale:ft,altitude:Rt});if(vt){var dr=(new Xn).translate([512*vt,0,0]);yn=dr.multiplyLeft(yn)}var rn=Object.assign({},i,{width:Ct,height:mt,viewMatrix:yn,longitude:l,latitude:o,zoom:c,orthographic:Me,fovyRadians:kt,aspect:ut,focalDistance:Me?qt:1,near:$t,far:Xt});return(r=e.call(this,rn)).latitude=o,r.longitude=l,r.zoom=c,r.pitch=p,r.bearing=m,r.altitude=Rt,r.orthographic=Me,r._subViewports=Ue?[]:null,Object.freeze(Aj(r)),r}return Sn(t,[{key:"addMetersToLngLat",value:function(i,s){return GU(i,s)}},{key:"getMapCenterByLngLatPosition",value:function(i){var s=i.lngLat,a=Av(i.pos,this.pixelUnprojectionMatrix),u=SS([],this.projectFlat(s),LU([],a)),c=SS([],this.center,u);return this.unprojectFlat(c)}},{key:"getBounds",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=XU(this,i.z||0);return[Math.min(s[0][0],s[1][0],s[2][0],s[3][0]),Math.min(s[0][1],s[1][1],s[2][1],s[3][1]),Math.max(s[0][0],s[1][0],s[2][0],s[3][0]),Math.max(s[0][1],s[1][1],s[2][1],s[3][1])]}},{key:"fitBounds",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.width,a=this.height,l=YU(Object.assign({width:o,height:a,bounds:i},s)),u=l.longitude,c=l.latitude,h=l.zoom;return new t({width:o,height:a,longitude:u,latitude:c,zoom:h})}},{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var i=this.getBounds(),s=Math.floor((i[0]+180)/360),o=Math.ceil((i[2]-180)/360),a=s;a<=o;a++){var l=a?new t(rz(rz({},this),{},{worldOffset:a})):this;this._subViewports.push(l)}return this._subViewports}}]),t}(Af);function HI(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.projectPosition(n);if(t&&e instanceof zI){var i=os(n,3),s=i[0],o=i[1],a=i[2],l=void 0===a?0:a,u=e.getDistanceScales([s,o]);r[2]=l*u.unitsPerMeter[2]}return r}function iz(n,e){var t=e.viewport,r=e.modelMatrix,i=e.coordinateSystem,s=e.coordinateOrigin,o=e.offsetMode,a=os(n,3),l=a[0],u=a[1],c=a[2],h=void 0===c?0:c;if(r){var g=os(ES([],[l,u,h,1],r),3);l=g[0],u=g[1],h=g[2]}switch(i){case Or.LNGLAT:return HI([l,u,h],t,o);case Or.LNGLAT_OFFSETS:return HI([l+s[0],u+s[1],h+(s[2]||0)],t,o);case Or.METER_OFFSETS:return HI(GU(s,[l,u,h]),t,o);case Or.CARTESIAN:default:return t.isGeospatial?[l+s[0],u+s[1],h+s[2]]:t.projectPosition([l,u,h])}}function sz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Tv(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?sz(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}zI.displayName="WebMercatorViewport";var Dde=(Ln(Kg={},10241,9987),Ln(Kg,10240,9729),Ln(Kg,10242,33071),Ln(Kg,10243,33071),Kg),GI={},Ode={boolean:{validate:function(e,t){return!0},equal:function(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return t.optional&&!e||Dv(e)&&(3===e.length||4===e.length)},equal:function(e,t,r){return $I(e,t)}},accessor:{validate:function(e,t){var r=DS(e);return"function"===r||r===DS(t.value)},equal:function(e,t,r){return"function"==typeof t||$I(e,t)}},array:{validate:function(e,t){return t.optional&&!e||Dv(e)},equal:function(e,t,r){return r.compare?$I(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"==typeof e},equal:function(e,t,r){return!r.compare||e===t}},data:{transform:function(e,t,r){var s=(r?r.props:{}).dataTransform;return s&&e?s(e):e}},image:{transform:function(e,t,r){return function(n,e){var t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof Fa)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});var r=null;e.compressed&&(r=Ln({},10241,e.data.length>1?9985:9729));var i=new Fa(t,Tv(Tv({},e),{},{parameters:Tv(Tv(Tv({},Dde),r),n.props.textureParameters)}));return GI[i.id]=!0,i}(r,e)},release:function(e){!function(n){!n||!(n instanceof Fa)||GI[n.id]&&(n.delete(),delete GI[n.id])}(e)}}};function $I(n,e){if(n===e)return!0;if(!Dv(n)||!Dv(e))return!1;var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function Pde(n,e){switch(DS(e)){case"object":return xv(n,e);case"array":return xv(n,{type:"array",value:e,compare:!1});case"boolean":return xv(n,{type:"boolean",value:e});case"number":return xv(n,{type:"number",value:e});case"function":return xv(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function xv(n,e){return"type"in e?Object.assign({name:n},Ode[e.type],e):"value"in e?Object.assign({name:n,type:DS(e.value)},e):{name:n,type:"object",value:e}}function Dv(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function DS(n){return Dv(n)?"array":null===n?"null":di(n)}function oz(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var WI=iu.COMPONENT,MS=iu.ASYNC_ORIGINAL,Mv=iu.ASYNC_RESOLVED,IS=iu.ASYNC_DEFAULTS;function Fde(){var n=this,e=az(n.constructor),t=Object.create(e);t[WI]=n,t[MS]={},t[Mv]={};for(var r=0;r<arguments.length;++r){var i=arguments[r];for(var s in i)t[s]=i[s]}return Object.freeze(t),t}function az(n){return OS(n,"_mergedDefaultProps")||(function(n){if(n.prototype){var t=Object.getPrototypeOf(n),r=az(t),s=function(n){for(var e={},t={},r={},i=0,s=Object.entries(n);i<s.length;i++){var o=os(s[i],2),a=o[0],l=o[1];if(l&&l.deprecatedFor)r[a]=Array.isArray(l.deprecatedFor)?l.deprecatedFor:[l.deprecatedFor];else{var u=Pde(a,l);e[a]=u,t[a]=u.value}}return{propTypes:e,defaultProps:t,deprecatedProps:r}}(OS(n,"defaultProps")||{}),o=function(n,e,t){var r=Object.create(null);Object.assign(r,e,n);var i=function(n){var e=OS(n,"layerName")||OS(n,"componentName");return e||Ir.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(s.defaultProps,r,n),a=Object.assign({},t._propTypes,s.propTypes);!function(n,e){var t={},r={};for(var i in e){var s=e[i],o=s.name;s.async&&(t[o]=s.value,r[o]=Ude(o))}n[IS]=t,n[MS]={},Object.defineProperties(n,r)}(o,a);var l=Object.assign({},t._deprecatedProps,s.deprecatedProps);(function(n,e){var t=function(s){Object.defineProperty(n,s,{enumerable:!1,set:function(a){var c,l="".concat(this.id,": ").concat(s),u=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return oz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oz(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(e[s]);try{for(u.s();!(c=u.n()).done;){var h=c.value;lz(this,h)||(this[h]=a)}}catch(p){u.e(p)}finally{u.f()}Ir.deprecated(l,e[s].join("/"))()}})};for(var r in e)t(r)})(o,l),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=l}}(n),n._mergedDefaultProps)}function Ude(n){return{enumerable:!0,set:function(t){"string"==typeof t||t instanceof Promise||xV(t)?this[MS][n]=t:this[Mv][n]=t},get:function(){if(this[Mv]){if(n in this[Mv])return this[Mv][n]||this[IS][n];if(n in this[MS]){var r=this[WI]&&this[WI].internalState;if(r&&r.hasAsyncProp(n))return r.getAsyncProp(n)||this[IS][n]}}return this[IS][n]}}}function lz(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function OS(n,e){return lz(n,e)&&n[e]}var Hde=Ke(8774),Yt=Ke.n(Hde);function qI(n){var e;if("undefined"!=typeof Symbol&&(Symbol.asyncIterator&&(e=n[Symbol.asyncIterator]),null==e&&Symbol.iterator&&(e=n[Symbol.iterator])),null==e&&(e=n["@@asyncIterator"]),null==e&&(e=n["@@iterator"]),null==e)throw new TypeError("Object is not async iterable");return e.call(n)}var Gde=iu.ASYNC_ORIGINAL,$de=iu.ASYNC_RESOLVED,Wde=iu.ASYNC_DEFAULTS,qde=Object.freeze({}),uz=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_n(this,n),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=qde,this.oldAsyncProps=null}return Sn(n,[{key:"finalize",value:function(){for(var t in this.asyncProps){var r=this.asyncProps[t];r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var t in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var r=this.asyncProps[t];return r&&r.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){if(t){var r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(var i in this.asyncProps)if(this.isAsyncPropLoading(i))return!0;return!1}},{key:"reloadAsyncProp",value:function(t,r){this._watchPromise(t,Promise.resolve(r))}},{key:"setAsyncProps",value:function(t){var r=t[$de]||{},i=t[Gde]||t,s=t[Wde]||{};for(var o in r){var a=r[o];this._createAsyncPropData(o,s[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(var l in i){var u=i[l];this._createAsyncPropData(l,s[l]),this._updateAsyncProp(l,u)}}},{key:"_updateAsyncProp",value:function(t,r){if(this._didAsyncInputValueChange(t,r)){if("string"==typeof r){var i=this.layer&&this.layer.props.fetch;i&&(r=i(r,{propName:t,layer:this.layer}))}if(r instanceof Promise)return void this._watchPromise(t,r);if(xV(r))return void this._resolveAsyncIterable(t,r);this._setPropValue(t,r)}}},{key:"_didAsyncInputValueChange",value:function(t,r){var i=this.asyncProps[t];return r!==i.resolvedValue&&r!==i.lastValue&&(i.lastValue=r,!0)}},{key:"_setPropValue",value:function(t,r){var i=this.asyncProps[t];r=this._postProcessValue(i,r),i.resolvedValue=r,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(t,r,i){var s=this.asyncProps[t];s&&i>=s.resolvedLoadCount&&void 0!==r&&(this.freezeAsyncOldProps(),s.resolvedValue=r,s.resolvedLoadCount=i,this.onAsyncPropUpdated(t,r))}},{key:"_watchPromise",value:function(t,r){var i=this,s=this.asyncProps[t];s.pendingLoadCount++;var o=s.pendingLoadCount;r.then(function(a){a=i._postProcessValue(s,a),i._setAsyncPropValue(t,a,o);var l=i.layer&&i.layer.props.onDataLoad;"data"===t&&l&&l(a,{propName:t,layer:i.layer})}).catch(function(a){return Ir.error(a)()})}},{key:"_resolveAsyncIterable",value:(e=cr(Yt().mark(function r(i,s){var o,a,l,u,c,h,p,g,m,b,w,V,fe;return Yt().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:"data"!==i&&this._setPropValue(i,s),(o=this.asyncProps[i]).pendingLoadCount++,a=o.pendingLoadCount,l=[],u=0,c=!0,h=!1,Oe.prev=8,g=qI(s);case 10:return Oe.next=12,g.next();case 12:return c=(m=Oe.sent).done,Oe.next=16,m.value;case 16:if(b=Oe.sent,c){Oe.next=27;break}w=b,l=(V=(this.component?this.component.props:{}).dataTransform)?V(w,l):l.concat(w),Object.defineProperty(l,"__diff",{enumerable:!1,value:[{startRow:u,endRow:l.length}]}),u=l.length,this._setAsyncPropValue(i,l,a);case 24:c=!0,Oe.next=10;break;case 27:Oe.next=33;break;case 29:Oe.prev=29,Oe.t0=Oe.catch(8),h=!0,p=Oe.t0;case 33:if(Oe.prev=33,Oe.prev=34,c||null==g.return){Oe.next=38;break}return Oe.next=38,g.return();case 38:if(Oe.prev=38,!h){Oe.next=41;break}throw p;case 41:return Oe.finish(38);case 42:return Oe.finish(33);case 43:(fe=this.layer&&this.layer.props.onDataLoad)&&fe(l,{propName:i,layer:this.layer});case 45:case"end":return Oe.stop()}},r,this,[[8,29,33,43],[34,,38,42]])})),function(r,i){return e.apply(this,arguments)})},{key:"_postProcessValue",value:function(t,r){var i=t.type;return i&&(i.release&&i.release(t.resolvedValue,i,this.component),i.transform)?i.transform(r,i,this.component):r}},{key:"_createAsyncPropData",value:function(t,r){if(!this.asyncProps[t]){var s=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:s&&s[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}]),n;var e}(),cz=iu.ASYNC_ORIGINAL,dz=iu.ASYNC_RESOLVED,Yde=iu.ASYNC_DEFAULTS,Xde=0,YI=function(){function n(){_n(this,n),this.props=Fde.apply(this,arguments),this.id=this.props.id,this.count=Xde++,this.lifecycle="Awaiting state",this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Sn(n,[{key:"clone",value:function(t){var r=this.props,i={};for(var s in r[Yde])s in r[dz]?i[s]=r[dz][s]:s in r[cz]&&(i[s]=r[cz][s]);return new this.constructor(Object.assign({},r,i,t))}},{key:"_initState",value:function(){this.internalState=new uz({})}},{key:"stats",get:function(){return this.internalState.stats}}]),n}();YI.componentName="Component",YI.defaultProps={};var Jde=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(r){var i,s=r.attributeManager,o=r.layer;return _n(this,t),(i=e.call(this,o)).attributeManager=s,i.model=null,i.needsRedraw=!0,i.subLayers=null,i.usesPickingColorCache=!1,i}return Sn(t,[{key:"layer",get:function(){return this.component},set:function(i){this.component=i}}]),t}(uz),au=function(e){return"function"==typeof e},oh=function(e){return null!==e&&"object"===di(e)},fz=function(e){return oh(e)&&e.constructor==={}.constructor},ehe=function(e){return e&&"function"==typeof e[Symbol.iterator]},the=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]},Iv=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json},Xg=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},pz=function(e){return function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||oh(e)&&au(e.tee)&&au(e.cancel)&&au(e.getReader)}(e)||function(e){return oh(e)&&au(e.read)&&au(e.pipe)&&function(e){return"boolean"==typeof e}(e.readable)}(e)};function Go(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function gz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function RS(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?gz(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function KI(n){if(!n)return!1;Array.isArray(n)&&(n=n[0]);var e=n.parseTextSync||n.parseSync||n.parse||n.parseStream||n.parseInBatches,t=n.options&&n.options[n.id];return e||t&&t.workerUrl}function XI(n){var e;return Go(n,"null loader"),Go(KI(n),"invalid loader"),Array.isArray(n)&&(e=n[1],n=RS(RS({},n=n[0]),{},{options:RS(RS({},n.options),e)})),n.extension&&(n.extensions=n.extensions||n.extension,delete n.extension),Array.isArray(n.extensions)||(n.extensions=[n.extensions]),Go(n.extensions&&n.extensions.length>0&&n.extensions[0]),(n.parseTextSync||n.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}var Xu={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},Ov=Xu.global||Xu.self||Xu.window,Rv="object"!==("undefined"==typeof process?"undefined":di(process))||"[object process]"!==String(process)||process.browser,QI="function"==typeof importScripts,mz="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),ahe=mz&&parseFloat(mz[1])||0,JI={};function lhe(n){for(var e in JI)n.startsWith(e)&&(n=n.replace(e,JI[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat("").concat(n)),n}var uhe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,che=/^([-\w.]+\/[-\w.+]+)/;function _z(n){if("string"!=typeof n)return"";var e=n.match(uhe);return e?e[1]:""}var hhe=/\?.*/;function PS(n){if(Iv(n)){var e=function(n){if("string"!=typeof n)return"";var e=n.match(che);return e?e[1]:n}(n.headers.get("content-type")),t=_z(n.url);return{url:eO(n.url||""),type:e||t||null}}return Xg(n)?{url:eO(n.name||""),type:n.type||""}:"string"==typeof n?{url:eO(n),type:_z(n)}:{url:"",type:""}}function fhe(n){return Iv(n)?n.headers["content-length"]||-1:Xg(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}function eO(n){return n.replace(hhe,"")}function yz(n){return tO.apply(this,arguments)}function tO(){return(tO=cr(Yt().mark(function n(e){var t,r,i,s,o,a,l;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!Iv(e)){c.next=2;break}return c.abrupt("return",e);case 2:return t={},(r=fhe(e))>=0&&(t["content-length"]=String(r)),i=PS(e),s=i.url,(o=i.type)&&(t["content-type"]=o),c.next=9,mhe(e);case 9:return(a=c.sent)&&(t["x-first-bytes"]=a),"string"==typeof e&&(e=(new TextEncoder).encode(e)),l=new Response(e,{headers:t}),Object.defineProperty(l,"url",{value:s}),c.abrupt("return",l);case 15:case"end":return c.stop()}},n)}))).apply(this,arguments)}function phe(n){return nO.apply(this,arguments)}function nO(){return(nO=cr(Yt().mark(function n(e){return Yt().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e.ok){i.next=5;break}return i.next=3,ghe(e);case 3:throw new Error(i.sent);case 5:case"end":return i.stop()}},n)}))).apply(this,arguments)}function ghe(n){return rO.apply(this,arguments)}function rO(){return(rO=cr(Yt().mark(function n(e){var t,r,i;return Yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),o.prev=1,r=e.headers.get("Content-Type"),i=e.statusText,!r.includes("application/json")){o.next=11;break}return o.t0=i,o.t1=" ",o.next=9,e.text();case 9:o.t2=o.sent,i=o.t0+=o.t1.concat.call(o.t1,o.t2);case 11:t=(t+=i).length>60?"".concat(t.slice(60),"..."):t,o.next=17;break;case 15:o.prev=15,o.t3=o.catch(1);case 17:return o.abrupt("return",t);case 18:case"end":return o.stop()}},n,null,[[1,15]])}))).apply(this,arguments)}function mhe(n){return iO.apply(this,arguments)}function iO(){return(iO=cr(Yt().mark(function n(e){var t,r,i,s;return Yt().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=5,"string"!=typeof e){a.next=3;break}return a.abrupt("return","data:,".concat(e.slice(0,t)));case 3:if(!(e instanceof Blob)){a.next=8;break}return r=e.slice(0,5),a.next=7,new Promise(function(l){var u=new FileReader;u.onload=function(c){return l(c.target&&c.target.result)},u.readAsDataURL(r)});case 7:return a.abrupt("return",a.sent);case 8:if(!(e instanceof ArrayBuffer)){a.next=12;break}return i=e.slice(0,t),s=_he(i),a.abrupt("return","data:base64,".concat(s));case 12:return a.abrupt("return",null);case 13:case"end":return a.stop()}},n)}))).apply(this,arguments)}function _he(n){for(var e="",t=new Uint8Array(n),r=0;r<t.byteLength;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function yhe(n){return sO.apply(this,arguments)}function sO(){return(sO=cr(Yt().mark(function n(e){var t;return Yt().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): "),s.prev=1,!e.headers.get("Content-Type").includes("application/json")){s.next=10;break}return s.t0=t,s.next=7,e.text();case 7:t=s.t0+=s.sent,s.next=11;break;case 10:t+=e.statusText;case 11:s.next=16;break;case 13:return s.prev=13,s.t1=s.catch(1),s.abrupt("return",t);case 16:return s.abrupt("return",t);case 17:case"end":return s.stop()}},n,null,[[1,13]])}))).apply(this,arguments)}function vz(n){return oO.apply(this,arguments)}function oO(){return(oO=cr(Yt().mark(function n(e){var t,r,i=arguments;return Yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=i.length>1&&void 0!==i[1]?i[1]:{},"string"==typeof e){o.next=5;break}return o.next=4,yz(e);case 4:return o.abrupt("return",o.sent);case 5:return e=lhe(e),o.next=8,fetch(e,t);case 8:if((r=o.sent).ok||!t.throws){o.next=15;break}return o.t0=Error,o.next=13,yhe(r);case 13:throw o.t1=o.sent,new o.t0(o.t1);case 15:return o.abrupt("return",r);case 16:case"end":return o.stop()}},n)}))).apply(this,arguments)}var vhe=function(){function n(){_n(this,n)}return Sn(n,[{key:"log",value:function(){return function(t){}}},{key:"info",value:function(){return function(t){}}},{key:"warn",value:function(){return function(t){}}},{key:"error",value:function(){return function(t){}}}]),n}();function bz(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return wz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wz(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function wz(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ez(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function NS(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ez(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ez(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Sz={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function n(){_n(this,n),this.console=console}return Sn(n,[{key:"log",value:function(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=this.console.log).bind.apply(t,[this.console].concat(i))}},{key:"info",value:function(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=this.console.info).bind.apply(t,[this.console].concat(i))}},{key:"warn",value:function(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=this.console.warn).bind.apply(t,[this.console].concat(i))}},{key:"error",value:function(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=this.console.error).bind.apply(t,[this.console].concat(i))}}]),n}()),metadata:!1,transforms:[],reuseWorkers:!0},Ehe={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},aO=function(){Ov.loaders=Ov.loaders||{};var e=Ov.loaders;return e._state=e._state||{},e._state},lO=function(){var e=aO();return e.globalOptions=e.globalOptions||NS({},Sz),e.globalOptions};function She(n,e,t,r){return t=t||[],function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;Az(n,null,t,Sz,Ehe,e);var i,r=bz(e);try{for(r.s();!(i=r.n()).done;){var s=i.value;Az(n&&n[s.id]||{},s.id,t,s.options&&s.options[s.id]||{},s.defaultOptions&&s.defaultOptions[s.id]||{},e)}}catch(u){r.e(u)}finally{r.f()}}(n,t=Array.isArray(t)?t:[t]),function(n,e,t){var i=NS({},n.options||{});return null===i.log&&(i.log=new vhe),xz(i,lO()),xz(i,e),function(n,e){e&&!n.baseUri&&(n.baseUri=e)}(i,t),i}(e,n,r)}function Cz(n,e){var t=lO(),r=n.fetch||t.fetch;return"function"==typeof r?r:oh(r)?function(i){return vz(i,r)}:e&&e.fetch?e.fetch:function(i){return vz(i,n)}}function Az(n,e,t,r,i,s){var o=e||"Top level",a=e?"".concat(e,"."):"";for(var l in n){var u=!e&&oh(n[l]);if(!(l in r))if(l in i)t.warn("".concat(o," loader option '").concat(a).concat(l,"' deprecated, use '").concat(i[l],"'"));else if(!u){var c=Ahe(l,s);t.warn("".concat(o," loader option '").concat(a).concat(l,"' not recognized. ").concat(c))}}}function Ahe(n,e){var s,t=n.toLowerCase(),r="",i=bz(e);try{for(i.s();!(s=i.n()).done;){var o=s.value;for(var a in o.options){if(n===a)return"Did you mean '".concat(o.id,".").concat(a,"'?");var l=a.toLowerCase();(t.startsWith(l)||l.startsWith(t))&&(r=r||"Did you mean '".concat(o.id,".").concat(a,"'?"))}}}catch(c){i.e(c)}finally{i.f()}return r}function xz(n,e){for(var t in e)t in e&&(n[t]=fz(e[t])&&fz(n[t])?NS(NS({},n[t]),e[t]):e[t])}function Dhe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.3.13";Go(n,"no loader provided");var t=n.version;!e||!t||(e=Dz(e),t=Dz(t))}function Dz(n){var e=n.split(".").map(Number);return{major:e[0],minor:e[1]}}var Mz=Ke(2540);function Mhe(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return Iz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Iz(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function Iz(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kS(n){if(Mz.toArrayBuffer&&(n=Mz.toArrayBuffer(n)),n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return n.buffer;if("string"==typeof n){var e=n;return(new TextEncoder).encode(e).buffer}return n&&"object"===di(n)&&n._toArrayBuffer?n._toArrayBuffer():Go(!1)}function Rhe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var l,r=e.map(function(c){return c instanceof ArrayBuffer?new Uint8Array(c):c}),i=r.reduce(function(c,h){return c+h.byteLength},0),s=new Uint8Array(i),o=0,a=Mhe(r);try{for(a.s();!(l=a.n()).done;){var u=l.value;s.set(u,o),o+=u.byteLength}}catch(c){a.e(c)}finally{a.f()}return s.buffer}function Nhe(n){return cO.apply(this,arguments)}function cO(){return(cO=cr(Yt().mark(function n(e){var t,r,i,s,o,a,l,u,c;return Yt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:t=[],r=[],i=!0,s=!1,p.prev=4,a=qI(e);case 6:return p.next=8,a.next();case 8:return i=(l=p.sent).done,p.next=12,l.value;case 12:if(u=p.sent,i){p.next=19;break}"string"==typeof(c=u)?r.push(c):t.push(c);case 16:i=!0,p.next=6;break;case 19:p.next=25;break;case 21:p.prev=21,p.t0=p.catch(4),s=!0,o=p.t0;case 25:if(p.prev=25,p.prev=26,i||null==a.return){p.next=30;break}return p.next=30,a.return();case 30:if(p.prev=30,!s){p.next=33;break}throw o;case 33:return p.finish(30);case 34:return p.finish(25);case 35:if(!(r.length>0)){p.next=38;break}return Go(0===t.length),p.abrupt("return",r.join(""));case 38:return p.abrupt("return",Rhe.apply(void 0,t));case 39:case"end":return p.stop()}},n,null,[[4,21,25,35],[26,,30,34]])}))).apply(this,arguments)}var khe=Yt().mark(Oz);function Oz(n){var t,r,i,s,o,a,l=arguments;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=void 0===(t=(l.length>1&&void 0!==l[1]?l[1]:{}).chunkSize)?262144:t,i=0,s=new TextEncoder;case 4:if(!(i<n.length)){c.next=12;break}return o=Math.min(n.length-i,r),a=n.slice(i,i+o),i+=o,c.next=10,s.encode(a);case 10:c.next=4;break;case 12:case"end":return c.stop()}},khe)}var Fhe=Yt().mark(Rz);function Rz(n){var t,r,i,s,o,a,u=arguments;return Yt().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:r=void 0===(t=(u.length>1&&void 0!==u[1]?u[1]:{}).chunkSize)?262144:t,i=0;case 3:if(!(i<n.byteLength)){h.next=14;break}return s=Math.min(n.byteLength-i,r),o=new ArrayBuffer(s),a=new Uint8Array(n,i,s),new Uint8Array(o).set(a),i+=s,h.next=12,o;case 12:h.next=3;break;case 14:case"end":return h.stop()}},Fhe)}function Pz(n){this.wrapped=n}function Tf(n){return new Pz(n)}function Pv(n){var e,t;function i(o,a){try{var l=n[o](a),u=l.value,c=u instanceof Pz;Promise.resolve(c?u.wrapped:u).then(function(h){c?i("return"===o?"return":"next",h):s(l.done?"return":"normal",h)},function(h){i("throw",h)})}catch(h){s("throw",h)}}function s(o,a){switch(o){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(o,a){return new Promise(function(l,u){var c={key:o,arg:a,resolve:l,reject:u,next:null};t?t=t.next=c:(e=t=c,i(o,a))})},"function"!=typeof n.return&&(this.return=void 0)}function FS(n){return function(){return new Pv(n.apply(this,arguments))}}Pv.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Pv.prototype.next=function(n){return this._invoke("next",n)},Pv.prototype.throw=function(n){return this._invoke("throw",n)},Pv.prototype.return=function(n){return this._invoke("return",n)};var Lhe=1048576;function Bhe(n){return dO.apply(this,arguments)}function dO(){return(dO=FS(Yt().mark(function n(e){var r,i,s,o,a=arguments;return Yt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=(a.length>1&&void 0!==a[1]?a[1]:{}).chunkSize||Lhe,i=0;case 3:if(!(i<e.size)){u.next=13;break}return s=i+r,u.next=7,Tf(Nz(e,i,s));case 7:return o=u.sent,i=s,u.next=11,o;case 11:u.next=3;break;case 13:case"end":return u.stop()}},n)}))).apply(this,arguments)}function Nz(n,e,t){return hO.apply(this,arguments)}function hO(){return(hO=cr(Yt().mark(function n(e,t,r){return Yt().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,new Promise(function(o,a){var l=e.slice(t,r),u=new FileReader;u.onload=function(c){return o(c.target&&c.target.result)},u.onerror=function(c){return a(c)},u.readAsArrayBuffer(l)});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},n)}))).apply(this,arguments)}function kz(n){if(Rv||ahe>=10){if("function"==typeof n[Symbol.asyncIterator])return function(n){return fO.apply(this,arguments)}(n);if("function"==typeof n.getIterator)return n.getIterator()}return Rv?function(n){return pO.apply(this,arguments)}(n):function(n){return gO.apply(this,arguments)}(n)}function fO(){return(fO=FS(Yt().mark(function n(e){var t,r,i,s,o,a,l;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=!0,r=!1,c.prev=2,s=qI(e);case 4:return c.next=6,Tf(s.next());case 6:return t=(o=c.sent).done,c.next=10,Tf(o.value);case 10:if(a=c.sent,t){c.next=18;break}return l=a,c.next=15,kS(l);case 15:t=!0,c.next=4;break;case 18:c.next=24;break;case 20:c.prev=20,c.t0=c.catch(2),r=!0,i=c.t0;case 24:if(c.prev=24,c.prev=25,t||null==s.return){c.next=29;break}return c.next=29,Tf(s.return());case 29:if(c.prev=29,!r){c.next=32;break}throw i;case 32:return c.finish(29);case 33:return c.finish(24);case 34:case"end":return c.stop()}},n,null,[[2,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function pO(){return(pO=FS(Yt().mark(function n(e){var t,r,s;return Yt().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=e.getReader(),a.prev=1;case 2:return a.next=5,Tf(t.read());case 5:if(s=(r=a.sent).value,!r.done){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,kS(s);case 12:a.next=2;break;case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(1),t.releaseLock();case 19:case"end":return a.stop()}},n,null,[[1,16]])}))).apply(this,arguments)}function gO(){return(gO=FS(Yt().mark(function n(e){var t;return Yt().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Tf(e);case 2:e=i.sent;case 3:if(null===(t=e.read())){i.next=9;break}return i.next=8,kS(t);case 8:return i.abrupt("continue",3);case 9:if(!e._readableState.ended){i.next=11;break}return i.abrupt("return");case 11:return i.next=13,Tf(zhe(e));case 13:i.next=3;break;case 15:case"end":return i.stop()}},n)}))).apply(this,arguments)}function zhe(n){return mO.apply(this,arguments)}function mO(){return(mO=cr(Yt().mark(function n(e){return Yt().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(i){e.once("readable",i)}));case 1:case"end":return r.stop()}},n)}))).apply(this,arguments)}function Hhe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof n?Oz(n,e):n instanceof ArrayBuffer?Rz(n,e):Xg(n)?Bhe(n,e):pz(n)?kz(n):Iv(n)?kz(n.body):Go(!1)}var _O="Cannot convert supplied data type";function Ghe(n,e){if(e.text&&"string"==typeof n)return n;if(n instanceof ArrayBuffer){var t=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(t):t}if(ArrayBuffer.isView(n)||function(e){return e&&"object"===di(e)&&e.isBuffer}(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);var s=n.buffer,o=n.byteLength||n.length;return(0!==n.byteOffset||o!==s.byteLength)&&(s=s.slice(n.byteOffset,n.byteOffset+o)),s}throw new Error(_O)}function $he(n,e){return yO.apply(this,arguments)}function yO(){return(yO=cr(Yt().mark(function n(e,t){var r,i;return Yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=e instanceof ArrayBuffer||ArrayBuffer.isView(e),"string"!=typeof e&&!r){o.next=3;break}return o.abrupt("return",Ghe(e,t));case 3:if(!Xg(e)){o.next=7;break}return o.next=6,yz(e);case 6:e=o.sent;case 7:if(!Iv(e)){o.next=21;break}return i=e,o.next=11,phe(i);case 11:if(!t.binary){o.next=17;break}return o.next=14,i.arrayBuffer();case 14:o.t0=o.sent,o.next=20;break;case 17:return o.next=19,i.text();case 19:o.t0=o.sent;case 20:return o.abrupt("return",o.t0);case 21:if(pz(e)&&(e=Hhe(e)),!ehe(e)&&!the(e)){o.next=24;break}return o.abrupt("return",Nhe(e));case 24:throw new Error(_O);case 25:case"end":return o.stop()}},n)}))).apply(this,arguments)}function lu(n){return function(n){if(Array.isArray(n))return WM(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Tj(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xhe(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Fz(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qhe(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t||(n=Xhe({fetch:Cz(e||{},n)},n),Array.isArray(n.loaders)||(n.loaders=null),n)}function Zhe(n,e){if(!e&&n&&!Array.isArray(n))return n;var t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){var r=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[].concat(lu(t),lu(r)):r}return t&&t.length?t:null}var Lz=new Map;function wO(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0,r=t||new Set;if(n)if(Bz(n))r.add(n);else if(Bz(n.buffer))r.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"===di(n))for(var i in n)wO(n[i],e,r);return void 0===t?Array.from(r):[]}function Bz(n){return!!n&&(n instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&n instanceof MessagePort||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas)}var tfe=0;function nfe(n){(0,n.resolve)(n.data)}var rfe=function(){function n(e){var t=e.source,r=e.name,i=void 0===r?"web-worker-".concat(tfe++):r,s=e.onMessage;_n(this,n);var o=function(n){if(Go("string"==typeof n,"worker source"),n.startsWith("url(")&&n.endsWith(")")){var t=n.match(/^url\((.*)\)$/)[1];if(t&&!t.startsWith("http"))return t;n=function(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n}")}(t)}var r=Lz.get(n);if(!r){var i=new Blob([n],{type:"application/javascript"});r=URL.createObjectURL(i),Lz.set(n,r)}return r}(t);this.worker=new Worker(o,{name:i}),this.name=i,this.onMessage=s||nfe}return Sn(n,[{key:"process",value:(e=cr(Yt().mark(function r(i){var s=this;return Yt().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(l,u){s.worker.onmessage=function(h){s.onMessage({worker:s.worker,data:h.data,resolve:l,reject:u})},s.worker.onerror=function(h){var p="".concat(s.name,": WorkerThread.process() failed");h.message&&(p+=" ".concat(h.message," ").concat(h.filename,":").concat(h.lineno,":").concat(h.colno));var g=new Error(p);console.error(h),u(g)};var c=wO(i);s.worker.postMessage(i,c)}));case 1:case"end":return a.stop()}},r)})),function(r){return e.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),n;var e}(),ife=function(){function n(e){var t=e.source,r=e.name,i=void 0===r?"unnamed":r,s=e.maxConcurrency,o=void 0===s?1:s,a=e.onMessage,l=e.onDebug,u=void 0===l?function(){}:l,c=e.reuseWorkers,h=void 0===c||c;_n(this,n),this.source=t,this.name=i,this.maxConcurrency=o,this.onMessage=a,this.onDebug=u,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=h}return Sn(n,[{key:"destroy",value:function(){this.idleQueue.forEach(function(t){return t.destroy()}),this.isDestroyed=!0}},{key:"process",value:function(t,r){var i=this;return new Promise(function(s,o){i.jobQueue.push({data:t,jobName:r,resolve:s,reject:o}),i._startQueuedJob()})}},{key:"_startQueuedJob",value:(e=cr(Yt().mark(function r(){var i,s;return Yt().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.jobQueue.length){a.next=2;break}return a.abrupt("return");case 2:if(i=this._getAvailableWorker()){a.next=5;break}return a.abrupt("return");case 5:return s=this.jobQueue.shift(),this.onDebug({message:"processing",worker:i.name,job:s.jobName,backlog:this.jobQueue.length}),a.prev=7,a.t0=s,a.next=11,i.process(s.data);case 11:a.t1=a.sent,a.t0.resolve.call(a.t0,a.t1),a.next=18;break;case 15:a.prev=15,a.t2=a.catch(7),s.reject(a.t2);case 18:return a.prev=18,this._onWorkerDone(i),a.finish(18);case 21:case"end":return a.stop()}},r,this,[[7,15,18,21]])})),function(){return e.apply(this,arguments)})},{key:"_onWorkerDone",value:function(t){this.isDestroyed?t.destroy():(this.reuseWorkers?this.idleQueue.push(t):(t.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new rfe({source:this.source,onMessage:this.onMessage,name:t})}return null}}]),n;var e}(),jz=function(){function n(e){var t=e.maxConcurrency,r=void 0===t?5:t,i=e.onMessage,s=void 0===i?null:i,o=e.onDebug,a=void 0===o?function(){}:o,l=e.reuseWorkers,u=void 0===l||l;_n(this,n),this.maxConcurrency=r,this.onMessage=s,this.onDebug=a,this.workerPools=new Map,this.reuseWorkers=u}return Sn(n,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),Sn(n,[{key:"setProps",value:function(t){"maxConcurrency"in t&&(this.maxConcurrency=t.maxConcurrency),"onDebug"in t&&(this.onDebug=t.onDebug),"reuseWorkers"in t&&(this.reuseWorkers=t.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach(function(t){return t.destroy()})}},{key:"process",value:(e=cr(Yt().mark(function r(i,s,o){var a;return Yt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=this._getWorkerPool(i,s),u.abrupt("return",a.process(o));case 2:case"end":return u.stop()}},r,this)})),function(r,i,s){return e.apply(this,arguments)})},{key:"_getWorkerPool",value:function(t,r){var i=this.workerPools.get(r);return i||(i=new ife({source:t,name:r,onMessage:ofe.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(r,i)),i}}]),n;var e}();function ofe(n,e){var r=e.data,i=e.resolve,s=e.reject;if(n)n({worker:e.worker,data:r,resolve:i,reject:s});else switch(r.type){case"done":i(r.result);break;case"error":s(r.message)}}var EO="2.3.13";function afe(n,e,t,r){if(!jz.isSupported())return!1;var i=t&&t[n.id];return!!("local"===t.worker&&i&&i.localWorkerUrl||t.worker&&i&&i.workerUrl)&&(!n.useWorker||n.useWorker(t))}function lfe(n,e,t,r){var o=t&&t[n.id]||{},l="url(".concat("local"===(t||{}).worker?o.localWorkerUrl:o.workerUrl,")"),u=n.name,c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return n.maxConcurrency&&(e.maxConcurrency=n.maxConcurrency),n.onDebug&&(e.onDebug=n.onDebug),"reuseWorkers"in n&&(e.reuseWorkers=n.reuseWorkers),LS||(LS=new jz({onMessage:cfe})),LS.setProps(e),LS}(t);t=JSON.parse(JSON.stringify(t));var h=n.version!==EO?"(core version ".concat(EO,")"):"";return c.process(l,"".concat(u,"-worker@").concat(n.version).concat(h),{arraybuffer:kS(e),options:t,source:"loaders.gl@".concat(EO),type:"parse"})}var LS=null;function cfe(n){return SO.apply(this,arguments)}function SO(){return(SO=cr(Yt().mark(function n(e){var t,r,i,s,o;return Yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=e.worker,i=e.resolve,s=e.reject,l.t0=(r=e.data).type,l.next="done"===l.t0?4:"parse"===l.t0?6:"error"===l.t0?17:19;break;case 4:return i(r.result),l.abrupt("break",19);case 6:return l.prev=6,l.next=9,BS(r.arraybuffer,r.options,r.url);case 9:t.postMessage({type:"parse-done",id:r.id,result:o=l.sent},wO(o)),l.next=16;break;case 13:l.prev=13,l.t1=l.catch(6),t.postMessage({type:"parse-error",id:r.id,message:l.t1.message});case 16:return l.abrupt("break",19);case 17:return s(r.message),l.abrupt("break",19);case 19:case"end":return l.stop()}},n,null,[[6,13]])}))).apply(this,arguments)}function Vz(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Uz=function(){var e=aO();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function zz(n){var r,e=Uz(),t=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return Vz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vz(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(n=Array.isArray(n)?n:[n]);try{var i=function(){var a=XI(r.value);e.find(function(l){return a===l})||e.unshift(a)};for(t.s();!(r=t.n()).done;)i()}catch(s){t.e(s)}finally{t.f()}}function ffe(){return Uz()}function Hz(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gz(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Hz(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hz(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nv(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return $z(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $z(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function $z(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var gfe=/\.([^.]+)$/;function mfe(n){return CO.apply(this,arguments)}function CO(){return(CO=cr(Yt().mark(function n(e){var t,r,i,s,o=arguments;return Yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i=o.length>3&&void 0!==o[3]?o[3]:{},!(s=Wz(e,t=o.length>1&&void 0!==o[1]?o[1]:[],Gz(Gz({},r=o.length>2&&void 0!==o[2]?o[2]:{}),{},{nothrow:!0}),i))){l.next=6;break}return l.abrupt("return",s);case 6:if(!Xg(e)){l.next=11;break}return l.next=9,Nz(e,0,10);case 9:s=Wz(e=l.sent,t,r,i);case 11:if(s||r.nothrow){l.next=13;break}throw new Error(qz(e));case 13:return l.abrupt("return",s);case 14:case"end":return l.stop()}},n)}))).apply(this,arguments)}function Wz(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e&&!Array.isArray(e))return XI(e);_fe(e=[].concat(lu(e||[]),lu(ffe())));var i=PS(n),s=i.url,o=i.type,a=yfe(e,s||r.url);if(!(a=(a=a||bfe(e,o))||wfe(e,n))&&!t.nothrow)throw new Error(qz(n));return a}function qz(n){var e=PS(n),t=e.url,r=e.type,i="No valid loader found";return n&&(i+=' data: "'.concat(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?AO(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?AO(n,0,e):""}(n),'", contentType: "').concat(r,'"')),t&&(i+=" url: ".concat(t)),i}function _fe(n){var t,e=Nv(n);try{for(e.s();!(t=e.n()).done;)XI(t.value)}catch(i){e.e(i)}finally{e.f()}}function yfe(n,e){var t=e&&e.match(gfe),r=t&&t[1];return r&&function(n,e){e=e.toLowerCase();var r,t=Nv(n);try{for(t.s();!(r=t.n()).done;){var o,i=r.value,s=Nv(i.extensions);try{for(s.s();!(o=s.n()).done;)if(o.value.toLowerCase()===e)return i}catch(l){s.e(l)}finally{s.f()}}}catch(l){t.e(l)}finally{t.f()}return null}(n,r)}function bfe(n,e){var r,t=Nv(n);try{for(t.s();!(r=t.n()).done;){var i=r.value;if(i.mimeTypes&&i.mimeTypes.includes(e)||e==="application/x.".concat(i.id))return i}}catch(s){t.e(s)}finally{t.f()}return null}function wfe(n,e){if(!e)return null;var r,t=Nv(n);try{for(t.s();!(r=t.n()).done;){var i=r.value;if("string"==typeof e){if(Efe(e,i))return i}else if(ArrayBuffer.isView(e)){if(Yz(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer&&Yz(e,0,i))return i}}catch(o){t.e(o)}finally{t.f()}return null}function Efe(n,e){return e.testText&&e.testText(n)}function Yz(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(function(i){return function(n,e,t,r){if(r instanceof ArrayBuffer)return function(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;for(var r=new Uint8Array(n),i=new Uint8Array(e),s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(r,n,r.byteLength);switch(di(r)){case"function":return r(n,t);case"string":return r===AO(n,e,r.length);default:return!1}}(n,e,t,i)})}function AO(n,e,t){if(n.byteLength<e+t)return"";for(var r=new DataView(n),i="",s=0;s<t;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}function BS(n,e,t,r){return TO.apply(this,arguments)}function TO(){return(TO=cr(Yt().mark(function n(e,t,r,i){var s,o,a,l;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return Go(!i||"string"!=typeof i,"parse no longer accepts final url"),t&&!Array.isArray(t)&&!KI(t)&&(i=r,r=t,t=null),c.next=4,e;case 4:return r=r||{},s=PS(e=c.sent),o=s.url,a=Zhe(t,i),c.next=10,mfe(e,a,r);case 10:if(l=c.sent){c.next=13;break}return c.abrupt("return",null);case 13:return r=She(r,l,a,o),i=Qhe({url:o,parse:BS,loaders:a},r,i),c.next=17,Afe(l,e,r,i);case 17:return c.abrupt("return",c.sent);case 18:case"end":return c.stop()}},n)}))).apply(this,arguments)}function Afe(n,e,t,r){return xO.apply(this,arguments)}function xO(){return(xO=cr(Yt().mark(function n(e,t,r,i){return Yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Dhe(e),o.next=3,$he(t,e);case 3:if(t=o.sent,!e.parseTextSync||"string"!=typeof t){o.next=7;break}return r.dataType="text",o.abrupt("return",e.parseTextSync(t,r,i,e));case 7:if(!afe(e,0,r)){o.next=11;break}return o.next=10,lfe(e,t,r);case 10:return o.abrupt("return",o.sent);case 11:if(!e.parseText||"string"!=typeof t){o.next=15;break}return o.next=14,e.parseText(t,r,i,e);case 14:return o.abrupt("return",o.sent);case 15:if(!e.parse){o.next=19;break}return o.next=18,e.parse(t,r,i,e);case 18:return o.abrupt("return",o.sent);case 19:return Go(!e.parseSync),o.abrupt("return",Go(!1));case 21:case"end":return o.stop()}},n)}))).apply(this,arguments)}function jS(n,e,t){return DO.apply(this,arguments)}function DO(){return(DO=cr(Yt().mark(function n(e,t,r){var i,s;return Yt().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!Array.isArray(t)&&!KI(t)&&(r=t,t=null),i=Cz(r||{}),s=e,"string"!=typeof e){a.next=9;break}return a.next=6,i(e);case 6:s=a.sent,a.next=10;break;case 9:e=null;case 10:if(!Xg(e)){a.next=15;break}return a.next=13,i(e);case 13:s=a.sent,e=null;case 15:return a.next=17,BS(s,t,r);case 17:return a.abrupt("return",a.sent);case 18:case"end":return a.stop()}},n)}))).apply(this,arguments)}function Qu(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return Kz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Kz(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function Kz(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Xz=Math.pow(2,24)-1,Nfe=Object.freeze([]),kfe=bS(function(n){return n.oldViewport.equals(n.viewport)}),Zu=new Uint8ClampedArray(0),Ffe={data:{type:"data",value:Nfe,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(e){return e&&e.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(e,t){var r=t.propName,i=t.layer,s=i.context.resourceManager,o=i.getLoadOptions(),a=i.props.loaders,l=s.contains(e);return!l&&!o&&(s.add({resourceId:e,data:jS(e,a),persistent:!1}),l=!0),l?s.subscribe({resourceId:e,onChange:function(c){return i.internalState.reloadAsyncProp(r,c)},consumerId:i.id,requestId:r}):jS(e,a,o)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Or.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:-1,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Qg=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"toString",value:function(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(i){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,i),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=i)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(i)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(i){var s=this.context.viewport,l=os(VI(iz(i,{viewport:s,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),s.pixelProjectionMatrix),3),u=l[0],c=l[1];return 2===i.length?[u,c]:[u,c,l[2]]}},{key:"unproject",value:function(i){return this.context.viewport.unproject(i)}},{key:"projectPosition",value:function(i){return function(n,e){var t=function(n){var e=Object.assign({},n),t=n.coordinateSystem,i=n.coordinateOrigin,o=n.fromCoordinateOrigin;return t===Or.DEFAULT&&(t=n.viewport.isGeospatial?Or.LNGLAT:Or.CARTESIAN),void 0===n.fromCoordinateSystem&&(e.fromCoordinateSystem=t),void 0===o&&(e.fromCoordinateOrigin=i),e.coordinateSystem=t,e}(e),r=t.viewport,o=t.modelMatrix,a=t.fromCoordinateSystem,l=t.fromCoordinateOrigin,u=FU(r,t.coordinateSystem,t.coordinateOrigin),c=u.geospatialOrigin,h=u.shaderCoordinateOrigin,p=u.offsetMode,g=iz(n,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:l,offsetMode:p});return p&&function(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(g,g,r.projectPosition(c||h)),g}(i,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var i=this.props.coordinateSystem;return i===Or.DEFAULT||i===Or.LNGLAT||i===Or.CARTESIAN}},{key:"onHover",value:function(i,s){return!!this.props.onHover&&this.props.onHover(i,s)}},{key:"onClick",value:function(i,s){return!!this.props.onClick&&this.props.onClick(i,s)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return s[0]=i+1&255,s[1]=i+1>>8&255,s[2]=i+1>>8>>8&255,s}},{key:"decodePickingColor",value:function(i){ms(i instanceof Uint8Array);var s=os(i,3);return s[0]+256*s[1]+65536*s[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(i){var o,s=Qu(this.props.extensions);try{for(s.s();!(o=s.n()).done;){var a=o.value;i=Ace(i,a.getShaders.call(this,a))}}catch(l){s.e(l)}finally{s.f()}return i}},{key:"shouldUpdateState",value:function(i){return i.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(i){var s=i.oldProps,o=i.props,l=i.changeFlags,u=this.getAttributeManager();if(l.dataChanged&&u){var c=l.dataChanged;if(Array.isArray(c)){var p,h=Qu(c);try{for(h.s();!(p=h.n()).done;)u.invalidateAll(p.value)}catch(Me){h.e(Me)}finally{h.f()}}else u.invalidateAll()}var b=o.highlightedObjectIndex>=0||o.pickable;if((s.highlightedObjectIndex>=0||s.pickable)!==b&&u){var w=u.attributes,fe=w.pickingColors||w.instancePickingColors;fe&&(b&&fe.constant&&(fe.constant=!1,u.invalidate(fe.id)),!fe.value&&!b&&(fe.constant=!0,fe.value=[0,0,0]))}}},{key:"finalizeState",value:function(){var s,i=Qu(this.getModels());try{for(i.s();!(s=i.n()).done;)s.value.delete()}catch(l){i.e(l)}finally{i.f()}var a=this.getAttributeManager();a&&a.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}},{key:"draw",value:function(i){var o,s=Qu(this.getModels());try{for(s.s();!(o=s.n()).done;)o.value.draw(i)}catch(l){s.e(l)}finally{s.f()}}},{key:"getPickingInfo",value:function(i){var s=i.info,a=s.index;return a>=0&&Array.isArray(this.props.data)&&(s.object=this.props.data[a]),s}},{key:"activateViewport",value:function(i){var s=this.internalState.viewport;this.internalState.viewport=i,(!s||!kfe({oldViewport:s,viewport:i}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}},{key:"invalidateAttribute",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",o=this.getAttributeManager();!o||("all"===i?o.invalidateAll():o.invalidate(i))}},{key:"updateAttributes",value:function(i){var o,s=Qu(this.getModels());try{for(s.s();!(o=s.n()).done;)this._setModelAttributes(o.value,i)}catch(l){s.e(l)}finally{s.f()}}},{key:"_updateAttributes",value:function(i){var s=this.getAttributeManager();if(s){var o=this.getNumInstances(i),a=this.getStartIndices(i);s.update({data:i.data,numInstances:o,startIndices:a,props:i,transitions:i.transitions,buffers:i.data.attributes,context:this,ignoreUnknownAttributes:!0});var l=s.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(l)}}},{key:"_updateAttributeTransition",value:function(){var i=this.getAttributeManager();i&&i.updateTransition()}},{key:"_updateUniformTransition",value:function(){var i=this.internalState.uniformTransitions;if(i.active){var s=i.update(),o=Object.create(this.props);for(var a in s)Object.defineProperty(o,a,{value:s[a]});return o}return this.props}},{key:"calculateInstancePickingColors",value:function(i,s){var o=s.numInstances;if(!i.constant){var a=Zu.length/3;if(this.internalState.usesPickingColorCache=!0,a<o){o>Xz&&Ir.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")();for(var l=(Zu=dv.allocate(Zu,o,{size:3,copy:!0,maxCount:Math.max(o,Xz)})).length/3,u=[],c=a;c<l;c++)this.encodePickingColor(c,u),Zu[3*c+0]=u[0],Zu[3*c+1]=u[1],Zu[3*c+2]=u[2]}i.value=Zu.subarray(0,3*o)}}},{key:"_setModelAttributes",value:function(i,s){var l=this.getAttributeManager().getShaderAttributes(s,i.userData.excludeAttributes||{});i.setAttributes(l)}},{key:"disablePickingIndex",value:function(i){this._disablePickingIndex(i)}},{key:"_disablePickingIndex",value:function(i){var s=this.getAttributeManager().attributes,l=s.pickingColors||s.instancePickingColors,u=l.getVertexOffset(i),c=l.getVertexOffset(i+1);l.buffer.subData({data:new Uint8Array(c-u),offset:u})}},{key:"restorePickingColors",value:function(){var i=this.getAttributeManager().attributes,a=i.pickingColors||i.instancePickingColors;this.internalState.usesPickingColorCache&&a.value.buffer!==Zu.buffer&&(a.value=Zu.subarray(0,a.value.length)),a.updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(i){return void 0!==(i=i||this.props).numInstances?i.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(n){if(!function(n){return null!==n&&"object"===di(n)}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function(n){return null!==n&&"object"===di(n)&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(i.data)}},{key:"getStartIndices",value:function(i){return void 0!==(i=i||this.props).startIndices?i.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){Ao("layer.initialize",this),this._initState(),this.initializeState(this.context);var s,i=Qu(this.props.extensions);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.initializeState.call(this,this.context,o)}}catch(a){i.e(a)}finally{i.f()}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var i=this.needsUpdate();Ao("layer.update",this,i),i&&this._updateState()}},{key:"_updateState",value:function(){var i=this.props,s=this.context.viewport,o=this._updateUniformTransition();this.internalState.propsInTransition=o,this.context.viewport=this.internalState.viewport||s,this.props=o;try{var a=this._getUpdateParams(),l=this.getModels();if(this.context.gl)this.updateState(a);else try{this.updateState(a)}catch(g){}var c,u=Qu(this.props.extensions);try{for(u.s();!(c=u.n()).done;){var h=c.value;h.updateState.call(this,a,h)}}catch(g){u.e(g)}finally{u.f()}var p=this.getModels()[0]!==l[0];this._updateModules(a,p),this.isComposite?this._renderLayers(a):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=s,this.props=i,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}},{key:"_finalize",value:function(){Ao("layer.finalize",this),ms(this.internalState&&this.state),this.finalizeState(this.context);var s,i=Qu(this.props.extensions);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.finalizeState.call(this,o)}}catch(a){i.e(a)}finally{i.f()}}},{key:"drawLayer",value:function(i){var s=this,o=i.moduleParameters,a=void 0===o?null:o,l=i.uniforms,u=void 0===l?{}:l,c=i.parameters,h=void 0===c?{}:c;this._updateAttributeTransition();var p=this.props;this.props=this.internalState.propsInTransition||p,u.opacity=Math.pow(this.props.opacity,1/2.2);try{a&&this.setModuleParameters(a);var m=this.props.getPolygonOffset,b=m&&m(u)||[0,0];Uc(this.context.gl,{polygonOffset:b}),ru(this.context.gl,h,function(){var V,w={moduleParameters:a,uniforms:u,parameters:h,context:s.context},H=Qu(s.props.extensions);try{for(H.s();!(V=H.n()).done;){var fe=V.value;fe.draw.call(s,w,fe)}}catch(Me){H.e(Me)}finally{H.f()}s.draw(w)})}finally{this.props=p}}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(i){var s=this.internalState.changeFlags;for(var o in i)if(i[o]){var a=!1;switch(o){case"dataChanged":Array.isArray(s[o])&&(s[o]=Array.isArray(i[o])?s[o].concat(i[o]):i[o],a=!0);default:s[o]||(s[o]=i[o],a=!0)}a&&Ao("layer.changeFlag",this,o,i)}var l=s.dataChanged||s.updateTriggersChanged||s.propsChanged||s.extensionsChanged;s.propsOrDataChanged=l,s.somethingChanged=l||i.viewportChanged||i.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(i,s){var o=function(n,e){var t=DU({newProps:n,oldProps:e,propTypes:FI(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(n,e){if(null===e)return"oldProps is null, initial diff";var t=null,r=n.dataComparator,i=n._dataDiff;return r?r(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&i&&(t=i(n.data,e.data)||t),t}(n,e),i=!1;return r||(i=function(n,e){if(null===e)return"oldProps is null, initial diff";if("all"in n.updateTriggers&&MU(n,e,"all"))return{all:!0};var r={},i=!1;for(var s in n.updateTriggers)"all"!==s&&MU(n,e,s)&&(r[s]=!0,i=r);return i}(n,e)),{dataChanged:r,propsChanged:t,updateTriggersChanged:i,extensionsChanged:_ce(n,e),transitionsChanged:pce(n,e)}}(i,s);if(o.updateTriggersChanged)for(var a in o.updateTriggersChanged)o.updateTriggersChanged[a]&&this.invalidateAttribute(a);if(o.transitionsChanged)for(var l in o.transitionsChanged)this.internalState.uniformTransitions.add(l,s[l],i[l],i.transitions[l]);return this.setChangeFlags(o)}},{key:"validateProps",value:function(){!function(n){var e=FI(n);for(var t in e){var r=e[t],i=r.validate;if(i&&!i(n[t],r))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}},{key:"setModuleParameters",value:function(i){var o,s=Qu(this.getModels());try{for(s.s();!(o=s.n()).done;)o.value.updateModuleSettings(i)}catch(l){s.e(l)}finally{s.f()}}},{key:"_updateModules",value:function(i,s){var o=i.props,a=i.oldProps,l=o.autoHighlight,u=o.highlightedObjectIndex,c=o.highlightColor;if(s||a.autoHighlight!==l||a.highlightedObjectIndex!==u||a.highlightColor!==c){var h={};l||(h.pickingSelectedColor=null),Array.isArray(c)&&(h.pickingHighlightColor=c),Number.isInteger(u)&&(h.pickingSelectedColor=u>=0?this.encodePickingColor(u):null),this.setModuleParameters(h)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(i){if(!this.internalState)return!1;var s=!1;s=s||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!i.clearRedrawFlags;var o=this.getAttributeManager(),a=o&&o.getNeedsRedraw(i);return s||a}},{key:"_getAttributeManager",value:function(){return new ece(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){ms(!this.internalState&&!this.state),ms(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var i=this._getAttributeManager();i&&i.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Jde({attributeManager:i,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return Ir.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),i}}),this.internalState.layer=this,this.internalState.uniformTransitions=new cce(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(i){Ao("layer.matched",this,this===i);var s=i.state,o=i.internalState;ms(s&&o),this!==i&&(this.internalState=o,this.internalState.layer=this,this.state=s,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}},{key:"isLoaded",get:function(){return this.internalState&&!this.internalState.isAsyncPropLoading()}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}}]),t}(YI);function Qz(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return Zz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zz(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function Zz(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}Qg.layerName="Layer",Qg.defaultProps=Ffe;var Jz=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(i){oo(Tn(t.prototype),"setState",this).call(this,i),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(i){var s=i.info,o=s.object;return o&&o.__source&&o.__source.parent&&o.__source.parent.id===this.id?Object.assign(s,{object:o.__source.object,index:o.__source.index}):s}},{key:"renderLayers",value:function(){return null}},{key:"shouldRenderSubLayer",value:function(i,s){var o=this.props._subLayerProps;return s&&s.length||o&&o[i]}},{key:"getSubLayerClass",value:function(i,s){var o=this.props._subLayerProps;return o&&o[i]&&o[i].type||s}},{key:"getSubLayerRow",value:function(i,s,o){return i.__source={parent:this,object:s,index:o},i}},{key:"getSubLayerAccessor",value:function(i){if("function"==typeof i){var s={data:this.props.data,target:[]};return function(o,a){return o&&o.__source?(s.index=o.__source.index,i(o.__source.object,s)):i(o,a)}}return i}},{key:"getSubLayerProps",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.props,o=s.opacity,a=s.pickable,l=s.visible,u=s.parameters,c=s.getPolygonOffset,h=s.highlightedObjectIndex,p=s.autoHighlight,g=s.highlightColor,m=s.coordinateSystem,b=s.coordinateOrigin,w=s.wrapLongitude,H=s.positionFormat,V=s.modelMatrix,fe=s.extensions,Me=s._subLayerProps,Oe={opacity:o,pickable:a,visible:l,parameters:u,getPolygonOffset:c,highlightedObjectIndex:h,autoHighlight:p,highlightColor:g,coordinateSystem:m,coordinateOrigin:b,wrapLongitude:w,positionFormat:H,modelMatrix:V,extensions:fe},Ue=Me&&Me[i.id],st=Ue&&Ue.updateTriggers,vt=i.id||"sublayer";if(Ue){var Ct=this.constructor._propTypes;for(var mt in Ue){var Bt=Ct[mt];Bt&&"accessor"===Bt.type&&(Ue[mt]=this.getSubLayerAccessor(Ue[mt]))}}Object.assign(Oe,i,Ue,{id:"".concat(this.props.id,"-").concat(vt),updateTriggers:Object.assign({all:this.props.updateTriggers.all},i.updateTriggers,st)});var ft,Rt=Qz(fe);try{for(Rt.s();!(ft=Rt.n()).done;){var _t=ft.value,kt=_t.getSubLayerProps.call(this,_t);kt&&Object.assign(Oe,kt,{updateTriggers:Object.assign(Oe.updateTriggers,kt.updateTriggers)})}}catch(ut){Rt.e(ut)}finally{Rt.f()}return Oe}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var i=this.internalState.subLayers,s=!i||this.needsUpdate();s&&(i=pI(i=this.renderLayers(),Boolean),this.internalState.subLayers=i),Ao("compositeLayer.renderLayers",this,s,i);var a,o=Qz(i);try{for(o.s();!(a=o.n()).done;)a.value.parent=this}catch(u){o.e(u)}finally{o.f()}}},{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return oo(Tn(t.prototype),"isLoaded",this)&&this.getSubLayers().every(function(i){return i.isLoaded})}}]),t}(Qg);Jz.layerName="CompositeLayer";var Ufe=/([0-9]+\.?[0-9]*)(%|px)/;function VS(n){switch(di(n)){case"number":return{position:n,relative:!1};case"string":var e=n.match(Ufe);if(e&&e.length>=3){var t="%"===e[2],r=parseFloat(e[1]);return{position:t?r/100:r,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function US(n,e){return n.relative?Math.round(n.position*e):n.position}function kv(n,e){if(n===e)return!0;if(!n||!e)return!1;for(var t in n){var r=n[t],i=e[t];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&kv(r,i)))return!1}return!0}function e8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function MO(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?e8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var IO=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n);var t=e.id,r=void 0===t?null:t,i=e.x,s=void 0===i?0:i,o=e.y,a=void 0===o?0:o,l=e.width,u=void 0===l?"100%":l,c=e.height,h=void 0===c?"100%":c,p=e.projectionMatrix,g=void 0===p?null:p,m=e.fovy,b=void 0===m?50:m,w=e.near,H=void 0===w?.1:w,V=e.far,fe=void 0===V?1e3:V,Me=e.modelMatrix,Oe=void 0===Me?null:Me,Ue=e.viewportInstance,st=void 0===Ue?null:Ue,vt=e.type,Ct=void 0===vt?Af:vt;ms(!st||st instanceof Af),this.viewportInstance=st,this.id=r||this.constructor.displayName||"view",this.type=Ct,this.props=Object.assign({},e,{id:this.id,projectionMatrix:g,fovy:b,near:H,far:fe,modelMatrix:Oe}),this._parseDimensions({x:s,y:a,width:u,height:h}),this.equals=this.equals.bind(this),Object.seal(this)}return Sn(n,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):kv(this.props,t.props))}},{key:"makeViewport",value:function(t){var r=t.width,i=t.height,s=t.viewState;if(this.viewportInstance)return this.viewportInstance;s=this.filterViewState(s);var o=this.getDimensions({width:r,height:i});return this._getViewport(s,o)}},{key:"getViewStateId",value:function(){switch(di(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===di(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var r=Object.assign({},t);for(var i in this.props.viewState)"id"!==i&&(r[i]=this.props.viewState[i]);return r}return t}},{key:"getDimensions",value:function(t){var r=t.width,i=t.height;return{x:US(this._x,r),y:US(this._y,i),width:US(this._width,r),height:US(this._height,i)}}},{key:"_getControllerProps",value:function(t){var r=this.props.controller;return r?!0===r?t:("function"==typeof r&&(r={type:r}),Object.assign({},t,r)):null}},{key:"_getViewport",value:function(t,r){return new(0,this.type)(MO(MO(MO({},t),this.props),r))}},{key:"_parseDimensions",value:function(t){var i=t.y,s=t.width,o=t.height;this._x=VS(t.x),this._y=VS(i),this._width=VS(s),this._height=VS(o)}}]),n}(),Fv=function(){},t8={transitionEasing:function(e){return e},transitionInterruption:1,onTransitionStart:Fv,onTransitionInterrupt:Fv,onTransitionEnd:Fv},zfe=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_n(this,n),this.ControllerState=e,this.props=Object.assign({},t8,t),this.propsInTransition=null,this.transition=new wv(t.timeline),this.onViewStateChange=t.onViewStateChange||Fv,this.onStateChange=t.onStateChange||Fv,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Sn(n,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var r=!1,i=this.props;if(t=Object.assign({},t8,t),this.props=t,this._shouldIgnoreViewportChange(i,t))return r;if(this._isTransitionEnabled(t)){var s=this.transition.settings,l=Object.assign({},i,2===s.interruption?s.endProps:this.propsInTransition||i);this._triggerTransition(l,t),r=!0}else this.transition.cancel();return r}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(t){var r=t.transitionDuration;return(r>0||"auto"===r)&&Boolean(t.transitionInterpolator)}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,r){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(r):!this._isTransitionEnabled(r)||r.transitionInterpolator.arePropsEqual(t,r)}},{key:"_triggerTransition",value:function(t,r){var i=new this.ControllerState(t),s=new this.ControllerState(r).shortestPathFrom(i),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(0!==a){var l=r.transitionInterpolator.initializeProps(t,s);this.propsInTransition={},this.duration=a,this.transition.start({duration:a,easing:r.transitionEasing,interpolator:r.transitionInterpolator,interruption:r.transitionInterruption,startProps:l.start,endProps:l.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(t){var r=this;return function(i){r.propsInTransition=null,r.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t(i)}}},{key:"_onTransitionUpdate",value:function(t){var i=t.settings,s=i.interpolator,o=i.startProps,a=i.endProps,c=(0,i.easing)(t.time/i.duration),h=s.interpolateProps(o,a,c);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,h)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}]),n}();function n8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ga(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?n8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):n8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ah={transitionDuration:0},zS=function(e){return 1-(1-e)*(1-e)},Jg_WHEEL=["wheel"],Jg_PAN=["panstart","panmove","panend"],Jg_PINCH=["pinchstart","pinchmove","pinchend"],Jg_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Jg_DOUBLE_TAP=["doubletap"],Jg_KEYBOARD=["keydown"],OO=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_n(this,n),ms(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new zfe(e,ga(ga({},t),{},{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this._events=null,this._interactionState={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.handleEvent=this.handleEvent.bind(this),this.setProps(t)}return Sn(n,[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){this.controllerState=new(0,this.ControllerState)(ga(ga({makeViewport:this.makeViewport},this.controllerStateProps),this._state));var i=this._eventStartBlocked;switch(t.type){case"panstart":return!i&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!i&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!i&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var r=this.controllerStateProps,o=t.offsetCenter;return[o.x-r.x,o.y-r.y]}},{key:"isPointInBounds",value:function(t,r){var i=this.controllerStateProps;if(r&&r.handled)return!1;var a=t[0]>=0&&t[0]<=i.width&&t[1]>=0&&t[1]<=i.height;return a&&r&&r.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(t){var r=t.srcEvent;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"blockEvents",value:function(t){var r=this,i=setTimeout(function(){r._eventStartBlocked===i&&(r._eventStartBlocked=null)},t);this._eventStartBlocked=i}},{key:"setProps",value:function(t){"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),"makeViewport"in t&&(this.makeViewport=t.makeViewport),"dragMode"in t&&(this.dragMode=t.dragMode),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);var r=t.inertia;!0===r&&(r=300),this.inertia=r;var i=t.scrollZoom,s=void 0===i||i,o=t.dragPan,a=void 0===o||o,l=t.dragRotate,u=void 0===l||l,c=t.doubleClickZoom,h=void 0===c||c,p=t.touchZoom,g=void 0===p||p,m=t.touchRotate,b=void 0!==m&&m,w=t.keyboard,H=void 0===w||w,V=Boolean(this.onViewStateChange);this.toggleEvents(Jg_WHEEL,V&&s),this.toggleEvents(Jg_PAN,V&&(a||u)),this.toggleEvents(Jg_PINCH,V&&(g||b)),this.toggleEvents(Jg_TRIPLE_PAN,V&&b),this.toggleEvents(Jg_DOUBLE_TAP,V&&h),this.toggleEvents(Jg_KEYBOARD,V&&H),this.scrollZoom=s,this.dragPan=a,this.dragRotate=u,this.doubleClickZoom=h,this.touchZoom=g,this.touchRotate=b,this.keyboard=H}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(t,r){var i=this;this.eventManager&&t.forEach(function(s){i._events[s]!==r&&(i._events[s]=r,r?i.eventManager.on(s,i.handleEvent):i.eventManager.off(s,i.handleEvent))})}},{key:"updateViewport",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Object.assign({},t.getViewportProps(),r),o=this.controllerState!==t;if(this._state=t.getState(),this._setInteractionState(i),o){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:a})}}},{key:"_onTransition",value:function(t){this.onViewStateChange&&(t.interactionState=this._interactionState,this.onViewStateChange(t))}},{key:"_setInteractionState",value:function(t){Object.assign(this._interactionState,t),this.onStateChange&&this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(t){var r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;var i=this.isFunctionKeyPressed(t)||t.rightButton;(this.invertPan||"pan"===this.dragMode)&&(i=!i);var s=this.controllerState[i?"panStart":"rotateStart"]({pos:r});return this._panMove=i,this.updateViewport(s,ah,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var r=this.getCenter(t),i=this.controllerState.pan({pos:r});return this.updateViewport(i,ah,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){var r=this.inertia;if(this.dragPan&&r&&t.velocity){var i=this.getCenter(t),o=this.controllerState.pan({pos:[i[0]+t.velocityX*r/2,i[1]+t.velocityY*r/2]}).panEnd();this.updateViewport(o,ga(ga({},this._getTransitionProps()),{},{transitionDuration:r,transitionEasing:zS}),{isDragging:!1,isPanning:!0})}else{var a=this.controllerState.panEnd();this.updateViewport(a,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var r=this.getCenter(t),i=this.controllerState.rotate({pos:r});return this.updateViewport(i,ah,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){var r=this.inertia;if(this.dragRotate&&r&&t.velocity){var i=this.getCenter(t),o=this.controllerState.rotate({pos:[i[0]+t.velocityX*r/2,i[1]+t.velocityY*r/2]}).rotateEnd();this.updateViewport(o,ga(ga({},this._getTransitionProps()),{},{transitionDuration:r,transitionEasing:zS}),{isDragging:!1,isRotating:!0})}else{var a=this.controllerState.rotateEnd();this.updateViewport(a,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;var i=this.scrollZoom,s=i.speed,a=i.smooth,l=void 0!==a&&a,u=t.delta,c=2/(1+Math.exp(-Math.abs(u*(void 0===s?.01:s))));u<0&&0!==c&&(c=1/c);var h=this.controllerState.zoom({pos:r,scale:c});return this.updateViewport(h,ga(ga({},this._getTransitionProps({around:r})),{},{transitionDuration:l?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(t){var r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;var i=this.controllerState.rotateStart({pos:r});return this.updateViewport(i,ah,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.touchRotate||!this.isDragging())return!1;var r=this.getCenter(t);r[0]-=t.deltaX;var i=this.controllerState.rotate({pos:r});return this.updateViewport(i,ah,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;var r=this.inertia;if(this.touchRotate&&r&&t.velocityY){var i=this.getCenter(t),s=[i[0],i[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:s});this.updateViewport(o,ga(ga({},this._getTransitionProps()),{},{transitionDuration:r,transitionEasing:zS}),{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{var a=this.controllerState.rotateEnd();this.updateViewport(a,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(t){var r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;var i=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(i,ah,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;var r=this.controllerState;if(this.touchZoom){var i=t.scale,s=this.getCenter(t);r=r.zoom({pos:s,scale:i})}return this.touchRotate&&(r=r.rotate({deltaAngleX:this._startPinchRotation-t.rotation})),this.updateViewport(r,ah,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;var r=this.inertia,i=this._lastPinchEvent;if(this.touchZoom&&r&&i&&t.scale!==i.scale){var s=this.getCenter(t),o=this.controllerState.rotateEnd(),a=Math.log2(t.scale),l=(a-Math.log2(i.scale))/(t.deltaTime-i.deltaTime),u=Math.pow(2,a+l*r/2);o=o.zoom({pos:s,scale:u}).zoomEnd(),this.updateViewport(o,ga(ga({},this._getTransitionProps({around:s})),{},{transitionDuration:r,transitionEasing:zS}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{var c=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(c,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;var i=this.isFunctionKeyPressed(t),s=this.controllerState.zoom({pos:r,scale:i?.5:2});return this.updateViewport(s,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var c,r=this.isFunctionKeyPressed(t),i=this.keyboard,s=i.zoomSpeed,o=i.moveSpeed,a=i.rotateSpeedX,l=i.rotateSpeedY,u=this.controllerState,h={};switch(t.srcEvent.code){case"Minus":c=r?u.zoomOut(s).zoomOut(s):u.zoomOut(s),h.isZooming=!0;break;case"Equal":c=r?u.zoomIn(s).zoomIn(s):u.zoomIn(s),h.isZooming=!0;break;case"ArrowLeft":r?(c=u.rotateLeft(a),h.isRotating=!0):(c=u.moveLeft(o),h.isPanning=!0);break;case"ArrowRight":r?(c=u.rotateRight(a),h.isRotating=!0):(c=u.moveRight(o),h.isPanning=!0);break;case"ArrowUp":r?(c=u.rotateUp(l),h.isRotating=!0):(c=u.moveUp(o),h.isPanning=!0);break;case"ArrowDown":r?(c=u.rotateDown(l),h.isRotating=!0):(c=u.moveDown(o),h.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),h),!0}},{key:"_getTransitionProps",value:function(){return ah}},{key:"events",set:function(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.setProps(this.controllerStateProps)}}]),n}();class Gfe extends fV{constructor(e=0,t=0){super(2),Hc(e)&&1===arguments.length?this.copy(e):(ai.debug&&(as(e),as(t)),this[0]=e,this[1]=t)}set(e,t){return this[0]=e,this[1]=t,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this.check()}fromObject(e){return ai.debug&&(as(e.x),as(e.y)),this[0]=e.x,this[1]=e.y,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return jU(this,this,e),this.check()}transformAsVector(e){return yV(this,this,e),this.check()}transformByMatrix3(e){return function(n,e,t){var r=e[0],i=e[1];n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7]}(this,this,e),this.check()}transformByMatrix2x3(e){return function(n,e,t){var r=e[0],i=e[1];n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5]}(this,this,e),this.check()}transformByMatrix2(e){return function(n,e,t){var r=e[0],i=e[1];n[0]=t[0]*r+t[2]*i,n[1]=t[1]*r+t[3]*i}(this,this,e),this.check()}}var r8=function(){function n(e){_n(this,n),ms(Number.isFinite(e.width),"`width` must be supplied"),ms(Number.isFinite(e.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(e)}return Sn(n,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}]),n}();function i8(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return s8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function s8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Wfe=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var t=e,r=t.compare,i=t.extract,s=t.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=s}return Sn(n,[{key:"arePropsEqual",value:function(t,r){var s,i=i8(this._propsToCompare||Object.keys(r));try{for(i.s();!(s=i.n()).done;){var o=s.value;if(!(o in t)||!(o in r)||!hv(t[o],r[o]))return!1}}catch(a){i.e(a)}finally{i.f()}return!0}},{key:"initializeProps",value:function(t,r){var i;if(this._propsToExtract){var l,s={},o={},a=i8(this._propsToExtract);try{for(a.s();!(l=a.n()).done;){var u=l.value;s[u]=t[u],o[u]=r[u]}}catch(c){a.e(c)}finally{a.f()}i={start:s,end:o}}else i={start:t,end:r};return this._checkRequiredProps(i.start),this._checkRequiredProps(i.end),i}},{key:"interpolateProps",value:function(t,r,i){return r}},{key:"getDuration",value:function(t,r){return r.transitionDuration}},{key:"_checkRequiredProps",value:function(t){!this._requiredProps||this._requiredProps.forEach(function(r){var i=t[r];ms(Number.isFinite(i)||Array.isArray(i),"".concat(r," is required for transition"))})}}]),n}();function o8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function a8(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var u8=["longitude","latitude","zoom","bearing","pitch"],Qfe=["longitude","latitude","zoom"],HS=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){var r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,t);var s=Array.isArray(i)?i:i.transitionProps;return(r=e.call(this,s||{compare:u8,extract:u8,required:Qfe})).opts=i,r}return Sn(t,[{key:"initializeProps",value:function(i,s){var o=oo(Tn(t.prototype),"initializeProps",this).call(this,i,s),a=this.opts,l=a.makeViewport,u=a.around;if(l&&u){var c=l(i),h=l(s),p=c.unproject(u);o.start.around=u,Object.assign(o.end,{around:h.project(p),aroundLngLat:p,width:s.width,height:s.height})}return o}},{key:"interpolateProps",value:function(i,s,o){var u,a={},l=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return l8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(this._propsToExtract);try{for(l.s();!(u=l.n()).done;){var c=u.value;a[c]=iS(i[c]||0,s[c]||0,o)}}catch(w){l.e(w)}finally{l.f()}if(s.aroundLngLat){var g=os(this.opts.makeViewport(a8(a8({},s),a)).getMapCenterByLngLatPosition({lngLat:s.aroundLngLat,pos:iS(i.around,s.around,o)}),2),b=g[1];a.longitude=g[0],a.latitude=b}return a}}]),t}(Wfe);function c8(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}var Yc={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},Jfe={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new HS(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:1},d8=function(e){return Math.pow(2,e)},h8=function(n){Ai(t,n);var e=c8(t);function t(r){var i,s=r.makeViewport,o=r.width,a=r.height,l=r.orbitAxis,u=void 0===l?Yc.orbitAxis:l,c=r.rotationX,h=void 0===c?Yc.rotationX:c,p=r.rotationOrbit,g=void 0===p?Yc.rotationOrbit:p,m=r.target,b=void 0===m?Yc.target:m,w=r.zoom,H=void 0===w?Yc.zoom:w,V=r.minRotationX,fe=void 0===V?Yc.minRotationX:V,Me=r.maxRotationX,Oe=void 0===Me?Yc.maxRotationX:Me,Ue=r.minZoom,st=void 0===Ue?Yc.minZoom:Ue,vt=r.maxZoom,Ct=void 0===vt?Yc.maxZoom:vt,mt=r.startPanPosition,Bt=r.startTarget,Rt=r.startRotatePos,ft=r.startRotationX,_t=r.startRotationOrbit,kt=r.startZoomPosition,ut=r.startZoom;return _n(this,t),(i=e.call(this,{width:o,height:a,orbitAxis:u,rotationX:h,rotationOrbit:g,target:b,zoom:H,minRotationX:fe,maxRotationX:Oe,minZoom:st,maxZoom:Ct}))._state={startPanPosition:mt,startTarget:Bt,startRotatePos:Rt,startRotationX:ft,startRotationOrbit:_t,startZoomPosition:kt,startZoom:ut},i.makeViewport=s,i}return Sn(t,[{key:"panStart",value:function(i){return this._getUpdatedState({startPanPosition:i.pos,startTarget:this._viewportProps.target})}},{key:"pan",value:function(i){var a=this._state,l=a.startPanPosition,u=a.startTarget,c=new Gfe(i.pos).subtract(l);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:u,pixelOffset:c})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(i){return this._getUpdatedState({startRotatePos:i.pos,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(i){var H,s=i.pos,o=i.deltaAngleX,a=void 0===o?0:o,l=i.deltaAngleY,u=void 0===l?0:l,c=this._state,h=c.startRotatePos,p=c.startRotationX,g=c.startRotationOrbit,m=this._viewportProps,b=m.width,w=m.height;if(!h||!Number.isFinite(p)||!Number.isFinite(g))return this;if(s){var V=(s[0]-h[0])/b;(p<-90||p>90)&&(V*=-1),H={rotationX:p+(s[1]-h[1])/w*180,rotationOrbit:g+180*V}}else H={rotationX:p+u,rotationOrbit:g+a};return this._getUpdatedState(H)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(i){var s=i.getViewportProps(),o=Object.assign({},this._viewportProps),a=o.rotationOrbit;return Math.abs(a-s.rotationOrbit)>180&&(o.rotationOrbit=a<0?a+360:a-360),o}},{key:"zoomStart",value:function(i){return this._getUpdatedState({startZoomPosition:i.pos,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(i){var s=i.pos,o=i.startPos,a=i.scale,l=this._viewportProps,u=l.zoom,c=l.width,h=l.height,p=l.target,g=this._state,m=g.startZoom,b=g.startZoomPosition,w=g.startTarget;Number.isFinite(m)||(m=u,w=p,b=o||s);var H=this._calculateNewZoom({scale:a,startZoom:m}),V=d8(m),fe=d8(H);return this._getUpdatedState({zoom:H,target:this._calculateNewTarget({startTarget:w,zoom:H,pixelOffset:[(c/2-b[0])*(fe/V-1),(h/2-b[1])*(fe/V-1)]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:i})})}},{key:"zoomOut",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/i})})}},{key:"moveLeft",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[-i,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"moveRight",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[i,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"moveUp",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[0,-i];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"moveDown",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=[0,i];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:s})})}},{key:"rotateLeft",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-i})}},{key:"rotateRight",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+i})}},{key:"rotateUp",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-i})}},{key:"rotateDown",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+i})}},{key:"_calculateNewZoom",value:function(i){var s=i.scale,o=i.startZoom,a=this._viewportProps,l=a.maxZoom,u=a.minZoom;return Number.isFinite(o)||(o=this._viewportProps.zoom),Sf(o+Math.log2(s),u,l)}},{key:"_calculateNewTarget",value:function(i){var s=i.startTarget,o=i.zoom,a=i.pixelOffset,l=Object.assign({},this._viewportProps);Number.isFinite(o)&&(l.zoom=o),s&&(l.target=s);var u=this.makeViewport(l),c=u.project(l.target);return u.unproject([c[0]-a[0],c[1]-a[1],c[2]])}},{key:"_getUpdatedState",value:function(i){return new t(Object.assign({},this._viewportProps,this._state,i))}},{key:"_applyConstraints",value:function(i){var l=i.maxRotationX,u=i.minRotationX,c=i.rotationOrbit;return i.zoom=Sf(i.zoom,i.minZoom,i.maxZoom),i.rotationX=Sf(i.rotationX,u,l),(c<-180||c>180)&&(i.rotationOrbit=function(n,e){var t=n%360;return t<0?360+t:t}(c+180)-180),i}}]),t}(r8),epe=function(n){Ai(t,n);var e=c8(t);function t(r){return _n(this,t),e.call(this,h8,r)}return Sn(t,[{key:"_getTransitionProps",value:function(){return Jfe}}]),t}(OO);var rpe={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new HS(["target","zoom"]),transitionInterruption:1},ipe=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(r){return _n(this,t),r.dragMode=r.dragMode||"pan",e.call(this,h8,r)}return Sn(t,[{key:"_onPanRotate",value:function(i){return!1}},{key:"_getTransitionProps",value:function(){return rpe}}]),t}(OO);function f8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function p8(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?f8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function g8(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}var ope=(new Xn).lookAt({eye:[0,0,1]});function ape(n){var e=n.width,t=n.height,r=n.near,i=n.far;return e=e||1,t=t||1,(new Xn).ortho({left:-e/2,right:e/2,bottom:-t/2,top:t/2,near:r,far:i})}var lpe=function(n){Ai(t,n);var e=g8(t);function t(r){_n(this,t);var i=r.width,s=r.height,o=r.near,a=void 0===o?.1:o,l=r.far,u=void 0===l?1e3:l,c=r.zoom,h=void 0===c?0:c,p=r.target,g=void 0===p?[0,0,0]:p,m=r.flipY,b=void 0===m||m,w=Math.pow(2,h);return e.call(this,p8(p8({},r),{},{longitude:null,position:g,viewMatrix:ope.clone().scale([w,w*(b?-1:1),w]),projectionMatrix:ape({width:i,height:s,near:a,far:u}),zoom:h}))}return t}(Af),m8=function(n){Ai(t,n);var e=g8(t);function t(r){return _n(this,t),e.call(this,Object.assign({},r,{type:lpe}))}return Sn(t,[{key:"controller",get:function(){return this._getControllerProps({type:ipe})}}]),t}(IO);function _8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function y8(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?_8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function v8(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}m8.displayName="OrthographicView";var GS=Math.PI/180;function cpe(n){var e=n.height,r=n.orbitAxis,i=n.rotationX,s=n.rotationOrbit,o=n.zoom,a=.5/Math.tan(n.fovy*GS/2),l="Z"===r?[0,0,1]:[0,1,0],u="Z"===r?[0,-a,0]:[0,0,a],c=(new Xn).lookAt({eye:u,up:l});c.rotateX(i*GS),"Z"===r?c.rotateZ(s*GS):c.rotateY(s*GS);var h=Math.pow(2,o)/(e||1);return c.scale(h),c}var dpe=function(n){Ai(t,n);var e=v8(t);function t(r){_n(this,t);var i=r.height,s=r.fovy,o=void 0===s?50:s,a=r.orbitAxis,l=void 0===a?"Z":a,u=r.target,c=void 0===u?[0,0,0]:u,h=r.rotationX,p=void 0===h?0:h,g=r.rotationOrbit,m=void 0===g?0:g,b=r.zoom,w=void 0===b?0:b;return e.call(this,y8(y8({},r),{},{longitude:null,viewMatrix:cpe({height:i,fovy:o,orbitAxis:l,rotationX:p,rotationOrbit:m,zoom:w}),fovy:o,position:c,zoom:w}))}return t}(Af),b8=function(n){Ai(t,n);var e=v8(t);function t(r){return _n(this,t),e.call(this,Object.assign({},r,{type:dpe}))}return Sn(t,[{key:"controller",get:function(){return this._getControllerProps({type:epe})}}]),t}(IO);b8.displayName="OrbitView";var hpe=[255,255,255],ppe=0,w8=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n);var t=e.color,r=void 0===t?hpe:t,i=e.intensity,s=void 0===i?1:i;this.id=e.id||"ambient-".concat(ppe++),this.color=r,this.intensity=s,this.type="ambient"},gpe=[255,255,255],_pe=[0,0,-1],ype=0,E8=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n);var t=e.color,r=void 0===t?gpe:t,i=e.intensity,s=void 0===i?1:i,o=e.direction,a=void 0===o?_pe:o,l=e._shadow,u=void 0!==l&&l;this.id=e.id||"directional-".concat(ype++),this.color=r,this.intensity=s,this.type="directional",this.direction=new Co(a).normalize().toArray(),this.shadow=u}return Sn(n,[{key:"getProjectedLight",value:function(){return this}}]),n}(),S8=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n);var t=e.id,r=void 0===t?"effect":t;this.id=r,this.props={},Object.assign(this.props,e)}return Sn(n,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),n}();function RO(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return C8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function C8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var PO=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"render",value:function(i){return Uc(this.gl,{framebuffer:i.target}),this._drawLayers(i)}},{key:"_drawLayers",value:function(i){var s=i.viewports,o=i.views,a=i.onViewportActive,l=i.clearCanvas,c=this.gl;(void 0===l||l)&&function(n){Uc(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(c);var g,h=[],p=RO(s);try{for(p.s();!(g=p.n()).done;){var m=g.value,b=m.viewport||m,w=o&&o[b.id];a(b);var H=this._getDrawLayerParams(b,i);i.view=w;var Me,fe=RO(b.subViewports||[b]);try{for(fe.s();!(Me=fe.n()).done;){i.viewport=Me.value;var Ue=this._drawLayersInViewport(c,i,H);h.push(Ue)}}catch(st){fe.e(st)}finally{fe.f()}}}catch(st){p.e(st)}finally{p.f()}return h}},{key:"_getDrawLayerParams",value:function(i,s){for(var o=s.layers,a=s.pass,l=void 0===a?"unknown":a,u=s.layerFilter,c=s.effects,h=s.moduleParameters,p=[],g=A8(),m=0;m<o.length;m++){var b=o[m],w=this._shouldDrawLayer(b,i,l,u),V={shouldDrawLayer:w,layerRenderIndex:g(b,w)};w&&(V.moduleParameters=this._getModuleParameters(b,c,l,h),V.layerParameters=this.getLayerParameters(b,m)),p[m]=V}return p}},{key:"_drawLayersInViewport",value:function(i,s,o){var a=s.layers,l=s.onError,u=s.viewport,c=s.view,h=function(n,e){var r=n.canvas?n.canvas.clientHeight||n.canvas.height:100,i=e.viewport,s=Ng(n);return[i.x*s,(r-i.y-i.height)*s,i.width*s,i.height*s]}(i,{viewport:u});if(c&&c.props.clear){var p=!0===c.props.clear?{color:!0,depth:!0}:c.props.clear;ru(i,{scissorTest:!0,scissor:h},function(){return sI(i,p)})}var g={totalCount:a.length,visibleCount:0,compositeCount:0,pickableCount:0};Uc(i,{viewport:h});for(var m=0;m<a.length;m++){var b=a[m],w=o[m],H=w.shouldDrawLayer,V=w.layerRenderIndex,fe=w.moduleParameters,Me=w.layerParameters;if(H&&b.props.pickable&&g.pickableCount++,b.isComposite)g.compositeCount++;else if(H){g.visibleCount++,fe.viewport=u;try{b.drawLayer({moduleParameters:fe,uniforms:{layerIndex:V},parameters:Me})}catch(Oe){l?l(Oe,b):Ir.error("error during drawing of ".concat(b),Oe)()}}}return g}},{key:"shouldDrawLayer",value:function(i){return!0}},{key:"getModuleParameters",value:function(i,s){return null}},{key:"getLayerParameters",value:function(i,s){return i.props.parameters}},{key:"_shouldDrawLayer",value:function(i,s,o,a){var l=this.shouldDrawLayer(i)&&i.props.visible;return l&&a&&(l=a({layer:i,viewport:s,isPicking:o.startsWith("picking"),renderPass:o})),l&&i.activateViewport(s),l}},{key:"_getModuleParameters",value:function(i,s,o,a){var l=Object.assign(Object.create(i.props),{autoWrapLongitude:i.wrapLongitude,viewport:i.context.viewport,mousePosition:i.context.mousePosition,pickingActive:0,devicePixelRatio:Ng(this.gl)});if(s){var c,u=RO(s);try{for(u.s();!(c=u.n()).done;)Object.assign(l,c.value.getModuleParameters(i))}catch(p){u.e(p)}finally{u.f()}}return Object.assign(l,this.getModuleParameters(i,s),a)}}]),t}(function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_n(this,n);var r=t.id,i=void 0===r?"pass":r;this.id=i,this.gl=e,this.props={},Object.assign(this.props,t)}return Sn(n,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),n}());function A8(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={},r=function i(s,o){var c,a=s.props._offset,l=s.id,u=s.parent&&s.parent.id;if(u&&!(u in e)&&i(s.parent,!1),u in t){var h=t[u]=t[u]||A8(e[u],e);c=h(s,o),t[l]=h}else Number.isFinite(a)?(c=a+(e[u]||0),t[l]=null):c=n;return o&&c>=n&&(n=c+1),e[l]=c,c};return r}function T8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function x8(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?T8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var xpe=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(r,i){var s,o,a;return _n(this,t),(a=e.call(this,r,i)).shadowMap=new Fa(r,{width:1,height:1,parameters:(s={},Ln(s,10241,9729),Ln(s,10240,9729),Ln(s,10242,33071),Ln(s,10243,33071),s)}),a.depthBuffer=new Bg(r,{format:33189,width:1,height:1}),a.fbo=new Ns(r,{id:"shadowmap",width:1,height:1,attachments:(o={},Ln(o,36064,a.shadowMap),Ln(o,36096,a.depthBuffer),o)}),a}return Sn(t,[{key:"render",value:function(i){var s=this,o=this.fbo;ru(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},function(){var a=i.viewports[0],l=Ng(s.gl),u=a.width*l,c=a.height*l;(u!==o.width||c!==o.height)&&o.resize({width:u,height:c}),oo(Tn(t.prototype),"render",s).call(s,x8(x8({},i),{},{target:o,pass:"shadow"}))})}},{key:"shouldDrawLayer",value:function(i){return!1!==i.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),t}(PO);var Mpe=Object.keys(Or).map(function(n){return"const int COORDINATE_SYSTEM_".concat(n," = ").concat(Or[n],";")}).join(""),Ipe=Object.keys(Wu).map(function(n){return"const int PROJECTION_MODE_".concat(n," = ").concat(Wu[n],";")}).join("");const Ope="".concat(Mpe,"\n").concat(Ipe,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  );\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n");var Rpe={};const NO={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}],vs:Ope,getUniforms:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rpe;return n.viewport?ide(n):{}}};function D8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Bpe=bS(function(n){var t=n.center;return new Xn(n.viewport.viewProjectionMatrix).invert().transform(t)}),jpe=bS(function(n){var l,e=n.viewport,t=n.shadowMatrices,r=[],i=e.pixelUnprojectionMatrix,s=e.isGeospatial?void 0:1,o=[[0,0,s],[e.width,0,s],[0,e.height,s],[e.width,e.height,s],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(function(c){return function(n,e){var t=os(n,3),s=t[2],o=Av([t[0],t[1],s],e);return Number.isFinite(s)?o:[o[0],o[1],0]}(c,i)}),a=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return D8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(t);try{var u=function(){var h=l.value,p=h.clone().translate(new Co(e.center).negate()),g=o.map(function(b){return p.transform(b)}),m=(new Xn).ortho({left:Math.min.apply(Math,lu(g.map(function(b){return b[0]}))),right:Math.max.apply(Math,lu(g.map(function(b){return b[0]}))),bottom:Math.min.apply(Math,lu(g.map(function(b){return b[1]}))),top:Math.max.apply(Math,lu(g.map(function(b){return b[1]}))),near:Math.min.apply(Math,lu(g.map(function(b){return-b[2]}))),far:Math.max.apply(Math,lu(g.map(function(b){return-b[2]})))});r.push(m.multiplyRight(h))};for(a.s();!(l=a.n()).done;)u()}catch(c){a.e(c)}finally{a.f()}return r}),Vpe=[0,0,0,1],Upe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function $pe(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={shadow_uDrawShadowMap:Boolean(n.drawToShadowMap),shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||Vpe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=Bpe({viewport:n.viewport,center:e.project_uCenter}),i=[],s=jpe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice(),o=0;o<n.shadowMatrices.length;o++){var a=s[o],l=a.clone().translate(new Co(n.viewport.center).negate());e.project_uCoordinateSystem===Or.LNGLAT&&e.project_uProjectionMode===Wu.WEB_MERCATOR?(s[o]=l,i[o]=r):(s[o]=a.clone().multiplyRight(Upe),i[o]=l.transform(r))}for(var u=0;u<s.length;u++)t["shadow_uViewProjectionMatrices[".concat(u,"]")]=s[u],t["shadow_uProjectCenters[".concat(u,"]")]=i[u],t["shadow_uShadowMap".concat(u)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[u]:n.dummyShadowMap;return t}const kO={name:"shadow",dependencies:[NO],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){var r={},i=e.shadowEnabled,s=void 0===i||i;return Object.assign(r,s&&e.shadowMatrices&&e.shadowMatrices.length>0?$pe(e,t):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),r}return{}}};function M8(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return I8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function I8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Kpe={color:[255,255,255],intensity:1},O8=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Xpe=[0,0,0,200/255],FO=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(r){var i;for(var s in _n(this,t),(i=e.call(this,r)).ambientLight=null,i.directionalLights=[],i.pointLights=[],i.shadowColor=Xpe,i.shadowPasses=[],i.shadowMaps=[],i.dummyShadowMap=null,i.shadow=!1,i.programManager=null,r){var o=r[s];switch(o.type){case"ambient":i.ambientLight=o;break;case"directional":i.directionalLights.push(o);break;case"point":i.pointLights.push(o)}}return i._applyDefaultLights(),i.shadow=i.directionalLights.some(function(a){return a.shadow}),i}return Sn(t,[{key:"preRender",value:function(i,s){var o=s.layers,a=s.layerFilter,l=s.viewports,u=s.onViewportActive,c=s.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(i),this.programManager||(this.programManager=vv.getDefaultProgramManager(i),kO&&this.programManager.addDefaultModule(kO)),this.dummyShadowMap||(this.dummyShadowMap=new Fa(i,{width:1,height:1}));for(var h=0;h<this.shadowPasses.length;h++)this.shadowPasses[h].render({layers:o,layerFilter:a,viewports:l,onViewportActive:u,views:c,moduleParameters:{shadowLightId:h,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}},{key:"getModuleParameters",value:function(i){var s=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return s.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(function(o){return o.getProjectedLight({layer:i})}),pointLights:this.pointLights.map(function(o){return o.getProjectedLight({layer:i})})},s}},{key:"cleanup",value:function(){var s,i=M8(this.shadowPasses);try{for(i.s();!(s=i.n()).done;)s.value.delete()}catch(a){i.e(a)}finally{i.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(kO),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var o,i=[],s=M8(this.directionalLights);try{for(s.s();!(o=s.n()).done;){var a=o.value,l=(new Xn).lookAt({eye:new Co(a.direction).negate()});i.push(l)}}catch(u){s.e(u)}finally{s.f()}return i}},{key:"_createShadowPasses",value:function(i){for(var s=0;s<this.directionalLights.length;s++){var o=new xpe(i);this.shadowPasses[s]=o,this.shadowMaps[s]=o.shadowMap}}},{key:"_applyDefaultLights",value:function(){!this.ambientLight&&0===this.pointLights.length&&0===this.directionalLights.length&&(this.ambientLight=new w8(Kpe),this.directionalLights.push(new E8(O8[0]),new E8(O8[1])))}}]),t}(S8);let Qpe=1,Zpe=1;class R8{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=Qpe++,a={time:0,delay:t,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,r]of this.animations)r.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const i of t)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const r=Zpe++;return this.animations.set(r,{animation:e,channel:t}),e.setTime(this.getTime(t)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const r=t-e.delay;r>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}function P8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var tge=function(){function n(e,t,r){_n(this,n),this.id=e,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(t)}return Sn(n,[{key:"subscribe",value:function(t){this._subscribers.add(t)}},{key:"unsubscribe",value:function(t){this._subscribers.delete(t)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var t=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(function(){return t.getData()})}},{key:"setData",value:function(t,r){var i=this;if(t!==this._data||r){this._data=t;var s=++this._loadCount,o=t;"string"==typeof t&&(o=jS(t)),o instanceof Promise?(this.isLoaded=!1,this._loader=o.then(function(c){i._loadCount===s&&(i.isLoaded=!0,i._error=null,i._content=c)}).catch(function(c){i._loadCount===s&&(i.isLoaded=!0,i._error=c||!0)})):(this.isLoaded=!0,this._error=null,this._content=t);var l,a=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return P8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(this._subscribers);try{for(a.s();!(l=a.n()).done;)l.value.onChange(this.getData())}catch(c){a.e(c)}finally{a.f()}}}}]),n}(),nge=function(){function n(e){var t=e.gl,r=e.protocol;_n(this,n),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return Sn(n,[{key:"contains",value:function(t){return!!t.startsWith(this.protocol)||t in this._resources}},{key:"add",value:function(t){var r=t.resourceId,i=t.data,s=t.forceUpdate,a=t.persistent,l=void 0===a||a,u=this._resources[r];u?u.setData(i,void 0!==s&&s):(u=new tge(r,i,this._context),this._resources[r]=u),u.persistent=l}},{key:"remove",value:function(t){var r=this._resources[t];r&&(r.delete(),delete this._resources[t])}},{key:"unsubscribe",value:function(t){var r=t.consumerId,i=this._consumers[r];if(i){for(var s in i){var o=i[s];o.resource&&o.resource.unsubscribe(o)}delete this._consumers[r],this.prune()}}},{key:"subscribe",value:function(t){var r=t.resourceId,i=t.onChange,s=t.consumerId,o=t.requestId,a=void 0===o?"default":o,l=this._resources,u=this.protocol;r.startsWith(u)&&(l[r=r.replace(u,"")]||this.add({resourceId:r,data:null,persistent:!1}));var c=l[r];if(this._track(s,a,c,i),c)return c.getData()}},{key:"prune",value:function(){var t=this;this._pruneRequest||(this._pruneRequest=setTimeout(function(){return t._prune()},0))}},{key:"finalize",value:function(){for(var t in this._resources)this._resources[t].delete()}},{key:"_track",value:function(t,r,i,s){var o=this._consumers,a=o[t]=o[t]||{},l=a[r]||{};l.resource&&(l.resource.unsubscribe(l),l.resource=null,this.prune()),i&&(a[r]=l,l.onChange=s,l.resource=i,i.subscribe(l))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var t=0,r=Object.keys(this._resources);t<r.length;t++){var i=r[t],s=this._resources[i];!s.persistent&&!s.inUse()&&(s.delete(),delete this._resources[i])}}}]),n}();function N8(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return k8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function k8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var age=[{name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},NO],lge=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function uge(n){var r,e=vv.getDefaultProgramManager(n),t=N8(age);try{for(t.s();!(r=t.n()).done;)e.addDefaultModule(r.value)}catch(l){t.e(l)}finally{t.f()}var o,s=N8(lge);try{for(s.s();!(o=s.n()).done;)e.addShaderHook(o.value)}catch(l){s.e(l)}finally{s.f()}return e}function Lv(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return F8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function F8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var dge="layerManager.setLayers",fge=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),$S=function(e){return e instanceof Qg?"".concat(e):e?"invalid":"null"},pge=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.deck,i=t.stats,s=t.viewport,o=t.timeline;_n(this,n),this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new nge({gl:e,protocol:"deck://"}),this.context=Object.assign({},fge,{layerManager:this,gl:e,deck:r,programManager:e&&uge(e),stats:i||new ZM({id:"deck.gl"}),viewport:s||new Af({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new R8,resourceManager:this.resourceManager}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this._onError=null,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Sn(n,[{key:"finalize",value:function(){this.resourceManager.finalize();var r,t=Lv(this.layers);try{for(t.s();!(r=t.n()).done;)this._finalizeLayer(r.value)}catch(s){t.e(s)}finally{t.f()}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var s,i=Lv(this.layers);try{for(i.s();!(s=i.n()).done;){var o=s.value,a=o.getNeedsRedraw(t);r=r||a}}catch(l){i.e(l)}finally{i.f()}return r}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.layerIds,i=void 0===r?null:r;return i?this.layers.filter(function(s){return i.find(function(o){return 0===s.id.indexOf(o)})}):this.layers}},{key:"setProps",value:function(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&this.setLayers(t.layers),"onError"in t&&(this._onError=t.onError)}},{key:"setLayers",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r||t!==this.lastRenderedLayers;if(Ao(dge,this,i,t),!i)return this;this.lastRenderedLayers=t;var o,s=Lv(t=pI(t,Boolean));try{for(s.s();!(o=s.n()).done;){var a=o.value;a.context=this.context}}catch(l){s.e(l)}finally{s.f()}return this._updateLayers(this.layers,t),this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this.lastRenderedLayers,!0))}},{key:"activateViewport",value:function(t){return Ao("layerManager.activateViewport",this,t),t&&(this.context.viewport=t),this}},{key:"_handleError",value:function(t,r,i){this._onError?this._onError(r,i):Ir.error("error during ".concat(t," of ").concat($S(i)),r)()}},{key:"_updateLayers",value:function(t,r){var o,i={},s=Lv(t);try{for(s.s();!(o=s.n()).done;){var a=o.value;i[a.id]?Ir.warn("Multiple old layers with same id ".concat($S(a)))():i[a.id]=a}}catch(g){s.e(g)}finally{s.f()}var l=[];this._updateSublayersRecursively(r,i,l),this._finalizeOldLayers(i);for(var u=!1,c=0,h=l;c<h.length;c++)if(h[c].hasUniformTransition()){u=!0;break}this._needsUpdate=u,this.layers=l}},{key:"_updateSublayersRecursively",value:function(t,r,i){var o,s=Lv(t);try{for(s.s();!(o=s.n()).done;){var a=o.value;a.context=this.context;var l=r[a.id];null===l&&Ir.warn("Multiple new layers with same id ".concat($S(a)))(),r[a.id]=null;var u=null;try{this._debug&&l!==a&&a.validateProps(),l?(this._transferLayerState(l,a),this._updateLayer(a)):this._initializeLayer(a),i.push(a),u=a.isComposite&&a.getSubLayers()}catch(c){this._handleError("matching",c,a)}u&&this._updateSublayersRecursively(u,r,i)}}catch(c){s.e(c)}finally{s.f()}}},{key:"_finalizeOldLayers",value:function(t){for(var r in t){var i=t[r];i&&this._finalizeLayer(i)}}},{key:"_initializeLayer",value:function(t){try{t._initialize(),t.lifecycle="Initialized"}catch(r){this._handleError("initialization",r,t)}}},{key:"_transferLayerState",value:function(t,r){r._transferState(t),r.lifecycle="Matched. State transferred from previous layer",r!==t&&(t.lifecycle="Discarded. Awaiting garbage collection")}},{key:"_updateLayer",value:function(t){try{t._update()}catch(r){this._handleError("update",r,t)}}},{key:"_finalizeLayer",value:function(t){this._needsRedraw=this._needsRedraw||"finalized ".concat($S(t)),t.lifecycle="No longer matched. Awaiting garbage collection";try{t._finalize(),t.lifecycle="Finalized! Awaiting garbage collection"}catch(r){this._handleError("finalization",r,t)}}}]),n}();function L8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bv(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?L8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var gge=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_n(this,n),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}return Sn(n,[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"updateViewStates",value:function(){for(var t in this.controllers){var r=this.controllers[t];r&&r.updateTransition()}}},{key:"getViewports",value:function(t){return t?this._viewports.filter(function(r){return r.containsPixel(t)}):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach(function(r){t[r.id]=r}),t}},{key:"getView",value:function(t){return"string"==typeof t?this.views.find(function(r){return r.id===t}):t}},{key:"getViewState",value:function(t){var r=this.getView(t),i=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(i):i}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"unproject",value:function(t,r){for(var i=this.getViewports(),s={x:t[0],y:t[1]},o=i.length-1;o>=0;--o){var a=i[o];if(a.containsPixel(s)){var l=t.slice();return l[0]-=a.x,l[1]-=a.y,a.unproject(l,r)}}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,r){ms(Number.isFinite(t)&&Number.isFinite(r)),(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=pI(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!kv(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Ir.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(t,r){r.viewId=t,this._eventCallbacks.onViewStateChange(r)}},{key:"_createController",value:function(t,r){return new(0,r.type)(Bv({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(a){return t._getViewport(a,{width:a.width,height:a.height})}},r))}},{key:"_updateController",value:function(t,r,i,s){var o=t.controller;return o?(o=Bv(Bv(Bv(Bv({},r),t.props),o),{},{id:t.id,x:i.x,y:i.y,width:i.width,height:i.height}),s?s.setProps(o):s=this._createController(t,o),s):null}},{key:"_rebuildViewports",value:function(){var t=this.width,r=this.height,i=this.views,s=this.controllers;this._viewports=[],this.controllers={};for(var o=i.length;o--;){var a=i[o],l=this.getViewState(a),u=a.makeViewport({width:t,height:r,viewState:l});this.controllers[a.id]=this._updateController(a,l,u,s[a.id]),this._viewports.unshift(u)}for(var c in s)s[c]&&!this.controllers[c]&&s[c].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach(function(r){r.id&&(t._viewportMap[r.id]=t._viewportMap[r.id]||r)})}},{key:"_diffViews",value:function(t,r){return t.length!==r.length||t.some(function(i,s){return!t[s].equals(r[s])})}}]),n}();function B8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function uu(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?B8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function j8(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}var U8={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new HS,transitionInterruption:1},yge=function(n){Ai(t,n);var e=j8(t);function t(){var r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.makeViewport,o=i.width,a=i.height,l=i.latitude,u=i.longitude,c=i.zoom,h=i.bearing,p=void 0===h?0:h,g=i.pitch,m=void 0===g?0:g,b=i.altitude,w=void 0===b?1.5:b,H=i.maxZoom,V=void 0===H?20:H,fe=i.minZoom,Me=void 0===fe?0:fe,Oe=i.maxPitch,Ue=void 0===Oe?60:Oe,st=i.minPitch,vt=void 0===st?0:st,Ct=i.startPanLngLat,mt=i.startZoomLngLat,Bt=i.startRotatePos,Rt=i.startBearing,ft=i.startPitch,_t=i.startZoom;return _n(this,t),ms(Number.isFinite(u),"`longitude` must be supplied"),ms(Number.isFinite(l),"`latitude` must be supplied"),ms(Number.isFinite(c),"`zoom` must be supplied"),(r=e.call(this,{width:o,height:a,latitude:l,longitude:u,zoom:c,bearing:p,pitch:m,altitude:w,maxZoom:V,minZoom:Me,maxPitch:Ue,minPitch:vt}))._state={startPanLngLat:Ct,startZoomLngLat:mt,startRotatePos:Bt,startBearing:Rt,startPitch:ft,startZoom:_t},r.makeViewport=s,r}return Sn(t,[{key:"panStart",value:function(i){return this._getUpdatedState({startPanLngLat:this._unproject(i.pos)})}},{key:"pan",value:function(i){var s=i.pos,a=this._state.startPanLngLat||this._unproject(i.startPos);if(!a)return this;var u=os(this._calculateNewLngLat({startPanLngLat:a,pos:s}),2);return this._getUpdatedState({longitude:u[0],latitude:u[1]})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(i){return this._getUpdatedState({startRotatePos:i.pos,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(i){var m,s=i.pos,o=i.deltaAngleX,a=void 0===o?0:o,l=i.deltaAngleY,u=void 0===l?0:l,c=this._state,h=c.startRotatePos,p=c.startBearing,g=c.startPitch;return h&&Number.isFinite(p)&&Number.isFinite(g)?(m=s?this._calculateNewPitchAndBearing(uu(uu({},this._getRotationParams(s,h)),{},{startBearing:p,startPitch:g})):{bearing:p+a,pitch:g+u},this._getUpdatedState(m)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(i){return this._getUpdatedState({startZoomLngLat:this._unproject(i.pos),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(i){var s=i.pos,o=i.startPos,a=i.scale,l=this._state,u=l.startZoom,c=l.startZoomLngLat;Number.isFinite(u)||(u=this._viewportProps.zoom,c=this._unproject(o)||this._unproject(s));var h=this._calculateNewZoom({scale:a,startZoom:u}),m=os(this.makeViewport(uu(uu({},this._viewportProps),{},{zoom:h})).getMapCenterByLngLatPosition({lngLat:c,pos:s}),2);return this._getUpdatedState({zoom:h,longitude:m[0],latitude:m[1]})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(i)}},{key:"zoomOut",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/i)}},{key:"moveLeft",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([i,0])}},{key:"moveRight",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-i,0])}},{key:"moveUp",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,i])}},{key:"moveDown",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-i])}},{key:"rotateLeft",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing-i})}},{key:"rotateRight",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this._viewportProps.bearing+i})}},{key:"rotateUp",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch+i})}},{key:"rotateDown",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this._viewportProps.pitch-i})}},{key:"shortestPathFrom",value:function(i){var s=i.getViewportProps(),o=Object.assign({},this._viewportProps),a=o.bearing,l=o.longitude;return Math.abs(a-s.bearing)>180&&(o.bearing=a<0?a+360:a-360),Math.abs(l-s.longitude)>180&&(o.longitude=l<0?l+360:l-360),o}},{key:"_zoomFromCenter",value:function(i){var s=this._viewportProps;return this.zoom({pos:[s.width/2,s.height/2],scale:i})}},{key:"_panFromCenter",value:function(i){var s=this._viewportProps,o=s.width,a=s.height;return this.pan({startPos:[o/2,a/2],pos:[o/2+i[0],a/2+i[1]]})}},{key:"_getUpdatedState",value:function(i){return new this.constructor(uu(uu(uu({makeViewport:this.makeViewport},this._viewportProps),this._state),i))}},{key:"_applyConstraints",value:function(i){return i.zoom=Sf(i.zoom,i.minZoom,i.maxZoom),i.pitch=Sf(i.pitch,i.minPitch,i.maxPitch),Object.assign(i,function({width:n,height:e,longitude:t,latitude:r,zoom:i,pitch:s=0,bearing:o=0}){(t<-180||t>180)&&(t=UU(t+180,360)-180),(o<-180||o>180)&&(o=UU(o+180,360)-180);const a=LI(e/512);if(i<=a)i=a,r=0;else{const l=e/2/Math.pow(2,i),u=sh([0,l])[1];if(r<u)r=u;else{const c=sh([0,512-l])[1];r>c&&(r=c)}}return{width:n,height:e,longitude:t,latitude:r,zoom:i,pitch:s,bearing:o}}(i)),i}},{key:"_unproject",value:function(i){var s=this.makeViewport(this._viewportProps);return i&&s.unproject(i)}},{key:"_calculateNewLngLat",value:function(i){var s=i.startPanLngLat,o=i.pos;return this.makeViewport(this._viewportProps).getMapCenterByLngLatPosition({lngLat:s,pos:o})}},{key:"_calculateNewZoom",value:function(i){var a=this._viewportProps,l=a.maxZoom,u=a.minZoom;return Sf(i.startZoom+Math.log2(i.scale),u,l)}},{key:"_calculateNewPitchAndBearing",value:function(i){var s=i.deltaScaleX,o=i.deltaScaleY,a=i.startBearing,l=i.startPitch;o=Sf(o,-1,1);var u=this._viewportProps,g=l;return o>0?g=l+o*(u.maxPitch-l):o<0&&(g=l-o*(u.minPitch-l)),{pitch:g,bearing:a+180*s}}},{key:"_getRotationParams",value:function(i,s){var a=i[1]-s[1],l=i[1],u=s[1],c=this._viewportProps,p=c.height,g=(i[0]-s[0])/c.width,m=0;return a>0?Math.abs(p-u)>5&&(m=a/(u-p)*1.2):a<0&&u>5&&(m=1-l/u),{deltaScaleX:g,deltaScaleY:m=Math.min(1,Math.max(-1,m))}}}]),t}(r8),vge=function(n){Ai(t,n);var e=j8(t);function t(r){return _n(this,t),r.dragMode=r.dragMode||"pan",e.call(this,yge,r)}return Sn(t,[{key:"_getTransitionProps",value:function(i){return i?uu(uu({},U8),{},{transitionInterpolator:new HS(uu(uu({},i),{},{makeViewport:this.controllerState.makeViewport}))}):U8}}]),t}(OO);var z8=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(r){return _n(this,t),e.call(this,Object.assign({},r,{type:zI}))}return Sn(t,[{key:"controller",get:function(){return this._getControllerProps({type:vge})}}]),t}(IO);function H8(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return G8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function G8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}z8.displayName="MapView";var Sge=new FO,Cge=function(){function n(){_n(this,n),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Sn(n,[{key:"setProps",value:function(t){"effects"in t&&(t.effects.length!==this.effects.length||!kv(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t,this._createInternalEffects()}},{key:"cleanup",value:function(){var r,t=H8(this.effects);try{for(t.s();!(r=t.n()).done;)r.value.cleanup()}catch(l){t.e(l)}finally{t.f()}var o,s=H8(this._internalEffects);try{for(s.s();!(o=s.n()).done;)o.value.cleanup()}catch(l){s.e(l)}finally{s.f()}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some(function(t){return t instanceof FO})||this._internalEffects.push(Sge)}}]),n}();var xge=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return t}(PO);function $8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function WS(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?$8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var W8={blendFunc:[1,0,32771,0],blendEquation:32774},q8=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"render",value:function(i){i.pickingFBO?(this.useAlpha=!0,this._drawPickingBuffer(i)):(this.useAlpha=!1,oo(Tn(t.prototype),"render",this).call(this,i))}},{key:"_drawPickingBuffer",value:function(i){var s=this,o=i.layers,a=i.layerFilter,l=i.views,u=i.viewports,c=i.onViewportActive,h=i.pickingFBO,p=i.deviceRect,g=p.x,m=p.y,b=p.width,w=p.height,H=i.pass,V=void 0===H?"picking":H,fe=i.redrawReason,Me=i.pickZ,Oe=this.gl;return this.pickZ=Me,ru(Oe,WS(WS({scissorTest:!0,scissor:[g,m,b,w],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},W8),{},{blend:!Me}),function(){oo(Tn(t.prototype),"render",s).call(s,{target:h,layers:o,layerFilter:a,views:l,viewports:u,onViewportActive:c,pass:V,redrawReason:fe})})}},{key:"shouldDrawLayer",value:function(i){return i.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(i,s){var o=this.pickZ?{blend:!1}:WS(WS({},W8),{},{blend:!0,blendColor:[0,0,0,this.useAlpha?(s+1)/255:1]});return Object.assign({},i.props.parameters,o)}}]),t}(PO);function qS(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return Y8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function Y8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function K8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function X8(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?K8(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Rge=function(){function n(e){_n(this,n),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new xge(e),this.pickLayersPass=new q8(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null,this._onError=null}return Sn(n,[{key:"setProps",value:function(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed"),"onError"in t&&(this._onError=t.onError)}},{key:"renderLayers",value:function(t){var r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=this.layerFilter,t.onError=this._onError,t.effects=t.effects||[],t.target=t.target||Ns.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);var i=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,s=r.render(X8(X8({},t),{},{target:i}));this._postRender(t.effects,t),this.renderCount++,Ao("deckRenderer.renderLayers",this,s,t)}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}},{key:"finalize",value:function(){var i,t=this.renderBuffers,r=qS(t);try{for(r.s();!(i=r.n()).done;)i.value.delete()}catch(o){r.e(o)}finally{r.f()}t.length=0}},{key:"_preRender",value:function(t,r){var o,i=null,s=qS(t);try{for(s.s();!(o=s.n()).done;){var a=o.value;a.preRender(this.gl,r),a.postRender&&(i=a)}}catch(l){s.e(l)}finally{s.f()}i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}},{key:"_resizeRenderBuffers",value:function(){var t=this.renderBuffers;0===t.length&&t.push(new Ns(this.gl),new Ns(this.gl));var i,r=qS(t);try{for(r.s();!(i=r.n()).done;)i.value.resize()}catch(o){r.e(o)}finally{r.f()}}},{key:"_postRender",value:function(t,r){var a,i=this.renderBuffers,s={inputBuffer:i[0],swapBuffer:i[1],target:null},o=qS(t);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(l.postRender){if(l===this.lastPostProcessEffect){s.target=r.target,l.postRender(this.gl,s);break}var u=l.postRender(this.gl,s);s.inputBuffer=u,s.swapBuffer=u===i[0]?i[1]:i[0]}}}catch(c){o.e(c)}finally{o.f()}}}]),n}(),Pge={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Nge(n){var e=n.pickedColors,t=n.layers,r=n.deviceX,i=n.deviceY,s=n.deviceRadius,o=n.deviceRect;if(e){for(var a=o.x,l=o.y,u=o.width,c=o.height,h=s*s,p=-1,g=0,m=0;m<c;m++){var b=m+l-i,w=b*b;if(w>h)g+=4*u;else for(var H=0;H<u;H++){if(e[g+3]-1>=0){var fe=H+a-r,Me=fe*fe+w;Me<=h&&(h=Me,p=g)}g+=4}}if(p>=0){var Oe=e[p+3]-1,Ue=e.slice(p,p+4),st=t[Oe];if(st){var vt=st.decodePickingColor(Ue),Ct=Math.floor(p/4/u);return{pickedColor:Ue,pickedLayer:st,pickedObjectIndex:vt,pickedX:a+(p/4-Ct*u),pickedY:l+Ct}}Ir.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Pge}function Q8(n){var e=n.pickInfo,t=n.mode,i=n.layerFilter,s=n.pixelRatio,o=n.x,a=n.y,l=n.z,u=e&&e.pickedLayer,h=function(n,e,t){for(var r=n.length-1;r>=0;r--){var i=n[r];if(i.containsPixel(e)&&(!t||t(i)))return i}return n[0]}(n.viewports,{x:o,y:a},i&&u&&function(g){return i({layer:u,viewport:g,isPicking:!0,renderPass:"picking:".concat(t)})}),p=h&&h.unproject([o-h.x,a-h.y],{targetZ:l});return{color:null,layer:null,viewport:h,index:-1,picked:!1,x:o,y:a,pixel:[o,a],coordinate:p,devicePixel:e&&[e.pickedX,e.pickedY],pixelRatio:s}}function Fge(n){var e=n.pickInfo,t=n.lastPickedInfo,r=n.mode,s=e.pickedColor,o=e.pickedLayer,a=e.pickedObjectIndex,l=o?[o]:[];if("hover"===r){var c=t.layerId,h=o&&o.props.id;if(h!==c||a!==t.index){if(h!==c){var p=n.layers.find(function(b){return b.props.id===c});p&&l.unshift(p)}t.layerId=h,t.index=a,t.info=null}}var g=Q8(n),m=new Map;return m.set(null,g),l.forEach(function(b){var w=Object.assign({},g);if(b===o&&(w.color=s,w.index=a,w.picked=!0),w=Z8({layer:b,info:w,mode:r}),b===o&&"hover"===r&&(t.info=w),w&&m.set(w.layer.id,w),"hover"===r&&b.props.autoHighlight){var H={pickingSelectedColor:o===b?s:null},V=b.props.highlightColor;o===b&&"function"==typeof V&&(H.pickingHighlightColor=V(w)),b.setModuleParameters(H),b.setNeedsRedraw()}}),m}function Z8(n){for(var e=n.layer,t=n.info,r=n.mode;e&&t;){var i=t.layer||e;t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:i}),e=e.parent}return t}function Bge(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return J8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J8(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function J8(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Vge=function(){function n(e){_n(this,n),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new q8(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null},this._onError=null}return Sn(n,[{key:"setProps",value:function(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"onError"in t&&(this._onError=t.onError),"_pickable"in t&&(this._pickable=t._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(t){return this._pickClosestObject(t)}},{key:"pickObjects",value:function(t){return this._pickVisibleObjects(t)}},{key:"getLastPickedObject",value:function(t){var r=t.x,i=t.y,s=t.layers,o=t.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,l=a&&a.layer&&a.layer.id,u=a&&a.viewport&&a.viewport.id,c=l?s.find(function(m){return m.id===l}):null,h=u&&o.find(function(m){return m.id===u})||o[0],p=h&&h.unproject([r-h.x,i-h.y]),g={x:r,y:i,viewport:h,coordinate:p,layer:c};return c?Object.assign({},a,g):Object.assign(g,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var t=this.gl;return this.pickingFBO||(this.pickingFBO=new Ns(t),Ns.isSupported(t,{colorBufferFloat:!0})&&(this.depthFBO=new Ns(t),this.depthFBO.attach(Ln({},36064,new Fa(t,{format:mr(t)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.pickingFBO}},{key:"_getPickable",value:function(t){if(!1===this._pickable)return null;var r=t.filter(function(i){return i.isPickable()&&!i.isComposite});return r.length>255?(Ir.warn("Too many pickable layers, only picking the first 255")(),r.slice(0,255)):r.length?r:null}},{key:"_pickClosestObject",value:function(t){var r=t.layers,i=t.views,s=t.viewports,o=t.x,a=t.y,l=t.radius,u=void 0===l?0:l,c=t.depth,h=void 0===c?1:c,p=t.mode,g=void 0===p?"query":p,m=t.unproject3D,b=t.onViewportActive;if(!(r=this._getPickable(r)))return{result:[],emptyInfo:Q8({viewports:s,x:o,y:a})};this._resizeBuffer();for(var vt,w=Ng(this.gl),H=KM(this.gl,[o,a],!0),V=[H.x+Math.floor(H.width/2),H.y+Math.floor(H.height/2)],fe=Math.round(u*w),Me=this.pickingFBO,st=this._getPickingRect({deviceX:V[0],deviceY:V[1],deviceRadius:fe,deviceWidth:Me.width,deviceHeight:Me.height}),Ct=[],mt={},Bt=0;Bt<h;Bt++){var ft=Nge({pickedColors:st&&this._drawAndSample({layers:r,views:i,viewports:s,onViewportActive:b,deviceRect:st,pass:"picking:".concat(g),redrawReason:g}),layers:r,deviceX:V[0],deviceY:V[1],deviceRadius:fe,deviceRect:st}),_t=void 0;if(ft.pickedLayer&&m&&this.depthFBO&&(_t=this._drawAndSample({layers:[ft.pickedLayer],views:i,viewports:s,onViewportActive:b,deviceRect:{x:ft.pickedX,y:ft.pickedY,width:1,height:1},pass:"picking:".concat(g),redrawReason:"pick-z",pickZ:!0})[0]*s[0].distanceScales.metersPerUnit[2]+s[0].position[2]),ft.pickedColor&&Bt+1<h){var ut=ft.pickedColor[3]-1;mt[ut]=!0,r[ut].disablePickingIndex(ft.pickedObjectIndex)}var $t,qt=Bge((vt=Fge({pickInfo:ft,lastPickedInfo:this.lastPickedInfo,mode:g,layers:r,layerFilter:this.layerFilter,viewports:s,x:o,y:a,z:_t,pixelRatio:w})).values());try{for(qt.s();!($t=qt.n()).done;){var Xt=$t.value;Xt.layer&&Ct.push(Xt)}}catch(dr){qt.e(dr)}finally{qt.f()}if(!ft.pickedColor)break}for(var yn in mt)r[yn].restorePickingColors();return{result:Ct,emptyInfo:vt&&vt.get(null)}}},{key:"_pickVisibleObjects",value:function(t){var r=t.layers,i=t.views,s=t.viewports,o=t.x,a=t.y,l=t.width,u=void 0===l?1:l,c=t.height,h=void 0===c?1:c,p=t.mode,g=void 0===p?"query":p,m=t.maxObjects,b=void 0===m?null:m,w=t.onViewportActive;if(!(r=this._getPickable(r)))return[];this._resizeBuffer();for(var H=Ng(this.gl),V=KM(this.gl,[o,a],!0),fe=V.x,Me=V.y+V.height,Oe=KM(this.gl,[o+u,a+h],!0),st=Oe.y,mt=function(n){var e=n.pickedColors,t=n.layers,r=new Map;if(e)for(var i=0;i<e.length;i+=4){var s=e[i+3]-1;if(s>=0){var o=e.slice(i,i+4),a=o.join(",");if(!r.has(a)){var l=t[s];l?r.set(a,{pickedColor:o,pickedLayer:l,pickedObjectIndex:l.decodePickingColor(o)}):Ir.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this._drawAndSample({layers:r,views:i,viewports:s,onViewportActive:w,deviceRect:{x:fe,y:st,width:Oe.x+Oe.width-fe,height:Me-st},pass:"picking:".concat(g),redrawReason:g}),layers:r}),Bt=new Map,Rt=Number.isFinite(b),ft=0;ft<mt.length&&!(Rt&&Bt.size>=b);ft++){var _t=mt[ft],kt={color:_t.pickedColor,layer:null,index:_t.pickedObjectIndex,picked:!0,x:o,y:a,width:u,height:h,pixelRatio:H};kt=Z8({layer:_t.pickedLayer,info:kt,mode:g}),Bt.has(kt.object)||Bt.set(kt.object,kt)}return Array.from(Bt.values())}},{key:"_drawAndSample",value:function(t){var r=t.layers,i=t.views,s=t.viewports,o=t.onViewportActive,a=t.deviceRect,l=t.pass,u=t.redrawReason,c=t.pickZ;if(ms(a.width>0&&a.height>0),r.length<1)return null;var h=c?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:r,layerFilter:this.layerFilter,onError:this._onError,views:i,viewports:s,onViewportActive:o,pickingFBO:h,deviceRect:a,pass:l,redrawReason:u,pickZ:c});var p=a.x,g=a.y,m=a.width,b=a.height,w=new(c?Float32Array:Uint8Array)(m*b*4);return rS(h,{sourceX:p,sourceY:g,sourceWidth:m,sourceHeight:b,target:w}),w}},{key:"_getPickingRect",value:function(t){var r=t.deviceX,i=t.deviceY,s=t.deviceRadius,o=t.deviceWidth,a=t.deviceHeight,l=Math.max(0,r-s),u=Math.max(0,i-s),c=Math.min(o,r+s+1)-l,h=Math.min(a,i+s+1)-u;return c<=0||h<=0?null:{x:l,y:u,width:c,height:h}}}]),n}(),Uge={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},zge=function(){function n(e){_n(this,n);var t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Uge),t.appendChild(this.el))}return Sn(n,[{key:"setTooltip",value:function(t,r,i){var s=this.el;if("string"==typeof t)s.innerText=t;else{if(!t)return void(s.style.display="none");"text"in t&&(s.innerText=t.text),"html"in t&&(s.innerHTML=t.html),"className"in t&&(s.className=t.className),Object.assign(s.style,t.style)}s.style.display="block",s.style.transform="translate(".concat(r,"px, ").concat(i,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),n}();function LO(n,e){if(!n)throw new Error(e)}var Ju={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},e4=Ju.global||Ju.self||Ju.window,Hge="object"!==("undefined"==typeof process?"undefined":di(process))||"[object process]"!==String(process)||process.browser,t4="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),YS=(t4&&parseFloat(t4[1]),"undefined"!=typeof Image),BO="undefined"!=typeof ImageBitmap,$ge=Boolean(e4._parseImageNode),KS=!!Hge||$ge;function n4(n){var e=function(n){return"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&n instanceof Image?"image":n&&"object"===di(n)&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}function Yge(n){switch(n4(n)){case"data":return n;case"image":case"imagebitmap":var e=document.createElement("canvas"),t=e.getContext("2d");if(t)return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:return LO(!1)}}var Kge=/^data:image\/svg\+xml/,Xge=/\.svg((\?|#).*)?$/;function jO(n){return n&&(Kge.test(n)||Xge.test(n))}function Qge(n,e){if(jO(e)){var r=(new TextDecoder).decode(n);return"data:image/svg+xml;base64,".concat(btoa(r))}return i4(n,e)}function i4(n,e){if(jO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function s4(n,e,t){return VO.apply(this,arguments)}function VO(){return(VO=cr(Yt().mark(function n(e,t,r){var i,s,o;return Yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=Qge(e,r),s=self.URL||self.webkitURL,o="string"!=typeof i&&s.createObjectURL(i),l.prev=3,l.next=6,Zge(o||i,t);case 6:return l.abrupt("return",l.sent);case 7:return l.prev=7,o&&s.revokeObjectURL(o),l.finish(7);case 10:case"end":return l.stop()}},n,null,[[3,,7,10]])}))).apply(this,arguments)}function Zge(n,e){return UO.apply(this,arguments)}function UO(){return(UO=cr(Yt().mark(function n(e,t){var r;return Yt().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((r=new Image).src=e,!(t.image&&t.image.decode&&r.decode)){s.next=6;break}return s.next=5,r.decode();case 5:return s.abrupt("return",r);case 6:return s.next=8,new Promise(function(o,a){try{r.onload=function(){return o(r)},r.onerror=function(l){return a(new Error("Could not load image ".concat(e,": ").concat(l)))}}catch(l){a(l)}});case 8:return s.abrupt("return",s.sent);case 9:case"end":return s.stop()}},n)}))).apply(this,arguments)}var Jge={},o4=!0;function eme(n,e,t){return zO.apply(this,arguments)}function zO(){return(zO=cr(Yt().mark(function n(e,t,r){var i,o;return Yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!jO(r)){l.next=7;break}return l.next=3,s4(e,t,r);case 3:i=l.sent,l.next=8;break;case 7:i=i4(e,r);case 8:return o=t&&t.imagebitmap,l.next=11,tme(i,o);case 11:return l.abrupt("return",l.sent);case 12:case"end":return l.stop()}},n)}))).apply(this,arguments)}function tme(n){return HO.apply(this,arguments)}function HO(){return(HO=cr(Yt().mark(function n(e){var t,r=arguments;return Yt().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((nme(t=r.length>1&&void 0!==r[1]?r[1]:null)||!o4)&&(t=null),!t){s.next=13;break}return s.prev=3,s.next=6,createImageBitmap(e,t);case 6:return s.abrupt("return",s.sent);case 9:s.prev=9,s.t0=s.catch(3),console.warn(s.t0),o4=!1;case 13:return s.next=15,createImageBitmap(e);case 15:return s.abrupt("return",s.sent);case 16:case"end":return s.stop()}},n,null,[[3,9]])}))).apply(this,arguments)}function nme(n){for(var e in n||Jge)return!1;return!0}var ec=!1,jv=!0;function GO(n){var e=Vv(n);return function(n){var e=Vv(n);return e.byteLength>=24&&2303741511===e.getUint32(0,ec)?{mimeType:"image/png",width:e.getUint32(16,ec),height:e.getUint32(20,ec)}:null}(e)||function(n){var e=Vv(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,ec)&&255===e.getUint8(2)))return null;for(var r=function(){for(var n=new Set([65499,65476,65484,65501,65534]),e=65504;e<65520;++e)n.add(e);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}(),i=r.tableMarkers,s=r.sofMarkers,o=2;o+9<e.byteLength;){var a=e.getUint16(o,ec);if(s.has(a))return{mimeType:"image/jpeg",height:e.getUint16(o+5,ec),width:e.getUint16(o+7,ec)};if(!i.has(a))return null;o+=2,o+=e.getUint16(o,ec)}return null}(e)||function(n){var e=Vv(n);return e.byteLength>=10&&1195984440===e.getUint32(0,ec)?{mimeType:"image/gif",width:e.getUint16(6,jv),height:e.getUint16(8,jv)}:null}(e)||function(n){var e=Vv(n);return e.byteLength>=14&&16973===e.getUint16(0,ec)&&e.getUint32(2,jv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,jv),height:e.getUint32(22,jv)}:null}(e)}function Vv(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function lme(n,e){var r=(GO(n)||{}).mimeType,i=e4._parseImageNode;return LO(i),i(n,r,e)}function $O(){return($O=cr(Yt().mark(function n(e,t,r){var s,a,l,u;return Yt().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:a=(r||{}).url,l=cme(s=((t=t||{}).image||{}).type||"auto"),h.t0=l,h.next="imagebitmap"===h.t0?8:"image"===h.t0?12:"data"===h.t0?16:20;break;case 8:return h.next=10,eme(e,t,a);case 10:return u=h.sent,h.abrupt("break",21);case 12:return h.next=14,s4(e,t,a);case 14:return u=h.sent,h.abrupt("break",21);case 16:return h.next=18,lme(e,t);case 18:return u=h.sent,h.abrupt("break",21);case 20:LO(!1);case 21:return"data"===s&&(u=Yge(u)),h.abrupt("return",u);case 23:case"end":return h.stop()}},n)}))).apply(this,arguments)}function cme(n){switch(n){case"auto":case"data":return function(){if(BO)return"imagebitmap";if(YS)return"image";if(KS)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(n){switch(n){case"auto":return BO||YS||KS;case"imagebitmap":return BO;case"image":return YS;case"data":return KS;case"html":return YS;case"ndarray":return KS;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}const a4={id:"image",name:"Images",version:"2.3.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(n,e,t){return $O.apply(this,arguments)},tests:[function(n){return Boolean(GO(new DataView(n)))}],options:{image:{type:"auto",decode:!0}}},mme={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(n){var e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse};var XS="8.4.9",QS=Ti.CO.deck&&Ti.CO.deck.VERSION;if(QS&&QS!==XS)throw new Error("deck.gl - multiple versions detected: ".concat(QS," vs ").concat(XS));QS||(Ti.CO.deck=Object.assign(Ti.CO.deck||{},{VERSION:XS,version:XS,log:Ir,_registerLoggers:function(n){yI=n}}),zz([mme,[a4,{imagebitmap:{premultiplyAlpha:"none"}}]]));const _me=Ti.CO.deck;class ZS extends zc{static isSupported(e,t=[]){const r=mr(e),i=aV(e,"TIMER_QUERY");let s=r||i;for(const o of t)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:nn(!1)}return s}constructor(e,t={}){super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):t++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return ZS.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const l4=(0,Ti.jU)()&&"undefined"!=typeof document;let xme=0;class Dme{constructor(e={}){const{onCreateContext:t=(w=>zj(w)),onAddHTML:r=null,onInitialize:i=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:g=!0,stats:m=wf.get("animation-loop-"+xme++)}=e;let{useDevicePixels:b=!0}=e;"useDevicePixelRatio"in e&&(dn.deprecated("useDevicePixelRatio","useDevicePixels")(),b=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:u,debug:c,createFramebuffer:h},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:g,useDevicePixels:b}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return nn("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=ZS.isSupported(this.gl,["timers"])?new ZS(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),!1!==r&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return cr(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,t=1){const r=document.getElementById(e);return r?Number(r.value):t}setViewParameters(){return dn.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=l4?new Promise((e,t)=>{l4&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function(n){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(...e){this.display?this.display._renderFrame(...e):this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?QM(this.props.gl,e):this.onCreateContext(e),!tS(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function(n){Uc(n,YM)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const r=this.props.onAddHTML(t);r&&(t.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&t>0&&(r=e/t),{width:e,height:t,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(n,e={}){if(n.canvas)return void function(n,e,t){let r="width"in t?t.width:n.canvas.clientWidth,i="height"in t?t.height:n.canvas.clientHeight;(!r||!i)&&(dn.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=n.canvas.width||1,i=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);n.canvas.width=a,n.canvas.height=l,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==l)&&(dn.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/r,n.drawingBufferHeight/i),n.canvas.width=Math.floor(r*o),n.canvas.height=Math.floor(i*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}(n,function(n){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels),e);const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Ns(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var Mme=Ke(1524),JS=Ke.n(Mme);const Ime={mousedown:1,mousemove:2,mouseup:4};(function(n){const e=n.prototype.handler;n.prototype.handler=function(r){const i=this.store;r.button>0&&"pointerdown"===r.type&&(function(n,e){for(let t=0;t<n.length;t++)if(n[t].pointerId===r.pointerId)return!0;return!1}(i)||i.push(r)),e.call(this,r)}})(JS().PointerEventInput),function(n){n.prototype.handler=function(t){let r=Ime[t.type];1&r&&t.button>=0&&(this.pressed=!0),2&r&&0===t.which&&(r=4),this.pressed&&(4&r&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(JS().MouseInput);const Nme=JS().Manager,tc=JS(),kme=tc?[[tc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[tc.Rotate,{enable:!1}],[tc.Pinch,{enable:!1}],[tc.Swipe,{enable:!1}],[tc.Pan,{threshold:0,enable:!1}],[tc.Press,{enable:!1}],[tc.Tap,{event:"doubletap",taps:2,enable:!1}],[tc.Tap,{event:"anytap",enable:!1}],[tc.Tap,{enable:!1}]]:null,d4={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Fme={doubletap:["tap"]},Lme={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},qO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Bme={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},h4={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},jme="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",em="undefined"!=typeof window?window:global;"undefined"!=typeof global?global:window,"undefined"!=typeof document&&document;let f4=!1;try{const n={get passive(){return f4=!0,!0}};em.addEventListener("test",n,n),em.removeEventListener("test",n,n)}catch(n){}const Vme=-1!==jme.indexOf("firefox"),{WHEEL_EVENTS:Ume}=qO,g4=4.000244140625;class Gme{constructor(e,t,r={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.events=Ume.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,!!f4&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}handleEvent(e){if(!this.options.enable)return;let t=e.deltaY;em.WheelEvent&&(Vme&&e.deltaMode===em.WheelEvent.DOM_DELTA_PIXEL&&(t/=em.devicePixelRatio),e.deltaMode===em.WheelEvent.DOM_DELTA_LINE&&(t*=40));const r={x:e.clientX,y:e.clientY};0!==t&&t%g4==0&&(t=Math.floor(t/g4)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,r)}_onWheel(e,t,r){this.callback({type:"wheel",center:r,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:$me}=qO,m4="pointermove",_4="pointerover",y4="pointerout",v4="pointerleave";class Wme{constructor(e,t,r={}){this.element=e,this.callback=t,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=$me.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===m4&&(this.enableMoveEvent=t),e===_4&&(this.enableOverEvent=t),e===y4&&(this.enableOutEvent=t),e===v4&&(this.enableLeaveEvent=t)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:_4,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:y4,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:v4,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:m4,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}const{KEY_EVENTS:qme}=qO,b4="keydown";class Yme{constructor(e,t,r={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=qme.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=r.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===b4&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}handleEvent(e){const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:b4,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}const E4="contextmenu";class Kme{constructor(e,t,r={}){this.element=e,this.callback=t,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===E4&&(this.options.enable=t)}handleEvent(e){!this.options.enable||this.callback({type:E4,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const Xme={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},S4={srcElement:"root",priority:0};class l_e{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,t,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;r&&("object"!=typeof r||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},S4,r):S4;let l=a.get(r.srcElement);l||(l=[],a.set(r.srcElement,l));const u={type:e,handler:t,srcElement:r.srcElement,priority:r.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let c=l.length-1;for(;c>=0&&!(l[c].priority>=u.priority);)c--;l.splice(c+1,0,u)}remove(e,t){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===t){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const t=this._normalizeEvent(e);let r=e.srcEvent.target;for(;r&&r!==t.rootElement;){if(this._emit(t,r),t.handled)return;r=r.parentNode}this._emit(t,"root")}_emit(e,t){const r=this.handlersByElement.get(t);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:u,handler:c,once:h}=r[l];if(c(Object.assign({},e,{type:u,stopPropagation:s,stopImmediatePropagation:o})),h&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:u,handler:c}=a[l];this.remove(u,c)}}}_normalizeEvent(e){const t=this.eventManager.element;return Object.assign({},e,function(n){const e=Xme[n.srcEvent.type];if(!e)return null;const{buttons:t,button:r,which:i}=n.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(t)?(s=1===i,o=2===i,a=3===i):2===e?(s=Boolean(1&t),o=Boolean(4&t),a=Boolean(2&t)):1===e&&(s=0===r,o=1===r,a=2===r),{leftButton:s,middleButton:o,rightButton:a}}(e),function(n,e){const{srcEvent:t}=n;if(!n.center&&!Number.isFinite(t.clientX))return null;const r=n.center||{x:t.clientX,y:t.clientY},i=e.getBoundingClientRect();return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(r.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}(e,t),{handled:!1,rootElement:t})}}const u_e={events:null,recognizers:null,recognizerOptions:{},Manager:Nme,touchAction:"none",tabIndex:0};class c_e{constructor(e=null,t={}){this.options=Object.assign({},u_e,t),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:r}=t;r&&this.on(r)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||kme}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(d4).forEach(i=>{const s=this.manager.get(i);s&&d4[i].forEach(o=>{s.recognizeWith(o)})});for(const i in t.recognizerOptions){const s=this.manager.get(i);if(s){const o=t.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new Gme(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Wme(e,this._onOtherEvent,{enable:!1}),this.keyInput=new Yme(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new Kme(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,r){this._addEventHandler(e,t,r,!1)}once(e,t,r){this._addEventHandler(e,t,r,!0)}watch(e,t,r){this._addEventHandler(e,t,r,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==t){i.set({enable:t});const s=Fme[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);t?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,r,i,s){if("string"!=typeof e){r=t;for(const c in e)this._addEventHandler(c,e[c],r,i,s);return}const{manager:o,events:a}=this,l=h4[e]||e;let u=a.get(l);u||(u=new l_e(this),a.set(l,u),u.recognizerName=Bme[l]||l,o&&o.on(l,u.handleEvent)),u.add(e,t,r,i,s),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,s=r.get(h4[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:t}=e,r=Lme[t.type];r&&this.manager.emit(r,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function C4(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function A4(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?C4(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):C4(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function T4(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return x4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x4(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function x4(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Df(){}var D4={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:Df,onResize:Df,onViewStateChange:Df,onInteractionStateChange:Df,onBeforeRender:Df,onAfterRender:Df,onLoad:Df,onError:null,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},t1=function(){function n(e){_n(this,n),e=Object.assign({},D4,e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractionStateChange=this._onInteractionStateChange.bind(this),e.viewState&&e.initialViewState&&Ir.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,Ti.qs)()&&Ir.warn("IE 11 support will be deprecated in v8.0")(),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new ZM({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&dv.setProps(e._typedArrayManagerProps),this.animationLoop.start()}return Sn(n,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Ir.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Ir.removed("onLayerClick","onClick")(),t.initialViewState&&!kv(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);var r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var i=this.viewManager.needsRedraw(t),s=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r||i||s||o||a}},{key:"redraw",value:function(t){if(this.layerManager){var r=t||this.needsRedraw({clearRedrawFlags:!0});!r||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}},{key:"pickMultipleObjects",value:function(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}},{key:"pickObjects",value:function(t){return this._pick("pickObjects","pickObjects Time",t)}},{key:"_addResources",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in t)this.layerManager.resourceManager.add({resourceId:i,data:t[i],forceUpdate:r})}},{key:"_removeResources",value:function(t){var i,r=T4(t);try{for(r.s();!(i=r.n()).done;)this.layerManager.resourceManager.remove(i.value)}catch(o){r.e(o)}finally{r.f()}}},{key:"_pick",value:function(t,r,i){var s=this.stats;s.get("Pick Count").incrementCount(),s.get(r).timeStart();var o=this.deckPicker[t](Object.assign({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport},i));return s.get(r).timeEnd(),o}},{key:"_createCanvas",value:function(t){var r=t.canvas;"string"==typeof r&&ms(r=document.getElementById(r)),r||(r=document.createElement("canvas"),(t.parent||document.body).appendChild(r));var o=t.style;return r.id=t.id,Object.assign(r.style,o),r}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var r=t.width,i=t.height;(r||0===r)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.width=r),(i||0===i)&&(i=Number.isFinite(i)?"".concat(i,"px"):i,this.canvas.style.position="absolute",this.canvas.style.height=i)}}},{key:"_updateCanvasSize",value:function(){this._checkForCanvasSizeChange()&&(this.viewManager.setProps({width:this.width,height:this.height}),this.props.onResize({width:this.width,height:this.height}))}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;if(!t)return!1;var r=t.clientWidth||t.width,i=t.clientHeight||t.height;return(r!==this.width||i!==this.height)&&(this.width=r,this.height=i,!0)}},{key:"_createAnimationLoop",value:function(t){var r=this,a=t.glOptions,l=t.debug;return new Dme({width:t.width,height:t.height,useDevicePixels:t.useDevicePixels,autoResizeDrawingBuffer:t.autoResizeDrawingBuffer,autoResizeViewport:!1,gl:t.gl,onCreateContext:function(p){return zj(Object.assign({},a,p,{canvas:r.canvas,debug:l}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender,onError:t.onError})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var t=this.props.views||[new z8({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}},{key:"_onPointerMove",value:function(t){var r=this._pickRequest;if("pointerleave"===t.type)r.x=-1,r.y=-1,r.radius=0;else{if(t.leftButton||t.rightButton)return;var i=t.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=t,r.mode="hover"}},{key:"_pickAndCallback",value:function(){var t=this._pickRequest;if(t.event){var r=this._pick("pickObject","pickObject Time",t),i=r.result,s=r.emptyInfo;this.interactiveState.isHovering=i.length>0;var u,o=s,a=!1,l=T4(i);try{for(l.s();!(u=l.n()).done;){var c=u.value;o=c,a=c.layer.onHover(c,t.event)}}catch(p){l.e(p)}finally{l.f()}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip){var h=this.props.getTooltip(o);this.tooltip.setTooltip(h,o.x,o.y)}t.event=null}}},{key:"_updateCursor",value:function(){var t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(t){if(!this.layerManager){this.canvas||(this.canvas=t.canvas,QM(t,{enable:!0,copyState:!0})),this.tooltip=new zge(this.canvas),Uc(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);var r=new R8;for(var i in r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new c_e(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),Sj)this.eventManager.on(i,this._onEvent);this.viewManager=new gge({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractionStateChange:this._onInteractionStateChange,views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var s=this.viewManager.getViewports()[0];this.layerManager=new pge(t,{deck:this,stats:this.stats,viewport:s,timeline:r}),this.effectManager=new Cge,this.deckRenderer=new Rge(t),this.deckPicker=new Vge(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t,r){var i=this.layerManager.context.gl;Uc(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects()},r)),this.props.onAfterRender({gl:i})}},{key:"_onRendererInitialized",value:function(t){this._setGLContext(t.gl)}},{key:"_onRenderFrame",value:function(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ir.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(t){var r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=A4(A4({},this.viewState),{},Ln({},t.viewId,r)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(t){this.interactiveState.isDragging=t.isDragging,this.props.onInteractionStateChange(t)}},{key:"_onEvent",value:function(t){var r=Sj[t.type],i=t.offsetCenter;if(r&&i){var s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),a=o.layer,l=a&&(a[r.handler]||a.props[r.handler]),u=this.props[r.handler],c=!1;l&&(c=l.call(a,o,t)),!c&&u&&u(o,t)}}},{key:"_onPointerDown",value:function(t){var r=t.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:r.x,y:r.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var t=this.stats;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();var r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var t=this.metrics,r=this.stats;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();var i=wf.get("Memory Usage");t.bufferMemory=i.get("Buffer Memory").count,t.textureMemory=i.get("Texture Memory").count,t.renderbufferMemory=i.get("Renderbuffer Memory").count,t.gpuMemory=i.get("GPU Memory").count}}]),n}();t1.getPropTypes=function(n){return{id:n.string,width:n.oneOfType([n.number,n.string]),height:n.oneOfType([n.number,n.string]),layers:n.oneOfType([n.object,n.array]),layerFilter:n.func,views:n.oneOfType([n.object,n.array]),viewState:n.object,effects:n.arrayOf(n.instanceOf(S8)),controller:n.oneOfType([n.func,n.bool,n.object]),gl:n.object,glOptions:n.object,parameters:n.object,pickingRadius:n.number,useDevicePixels:n.oneOfType([n.bool,n.number]),touchAction:n.string,eventRecognizerOptions:n.object,onWebGLInitialized:n.func,onResize:n.func,onViewStateChange:n.func,onInteractionStateChange:n.func,onBeforeRender:n.func,onAfterRender:n.func,onLoad:n.func,onError:n.func,debug:n.bool,drawPickingColors:n.bool,_framebuffer:n.object,_animate:n.bool,_pickable:n.bool,_typedArrayManagerProps:n.object}},t1.defaultProps=D4,t1.VERSION=_me.VERSION;const M4={name:"project32",dependencies:[NO],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},I4="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",g_e={lightSources:{}};function XO({color:n=[0,0,0],intensity:e=1}={}){return n.map(t=>t*e/255)}const QO={name:"lights",vs:I4,fs:I4,getUniforms:function O4(n=g_e){if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:r}=n.lightSources||{};return e||t&&t.length>0||r&&r.length>0?Object.assign({},function({ambientLight:n,pointLights:e=[],directionalLights:t=[]}){const r={};return r["lighting_uAmbientLight.color"]=n?XO(n):[0,0,0],e.forEach((i,s)=>{r[`lighting_uPointLight[${s}].color`]=XO(i),r[`lighting_uPointLight[${s}].position`]=i.position,r[`lighting_uPointLight[${s}].attenuation`]=i.attenuation||[1,0,0]}),r.lighting_uPointLightCount=e.length,t.forEach((i,s)=>{r[`lighting_uDirectionalLight[${s}].color`]=XO(i),r[`lighting_uDirectionalLight[${s}].direction`]=i.direction}),r.lighting_uDirectionalLightCount=t.length,r}({ambientLight:e,pointLights:t,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return O4({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},__e={};const v_e={name:"phong-lighting",dependencies:[QO],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function(n=__e){if(!("material"in n))return{};const{material:e}=n;return e?function(n){const{ambient:e=.35,diffuse:t=.6,shininess:r=32,specularColor:i=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},w_e={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},N4=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(n=w_e){const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,r=>r/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=Boolean(n.pickingActive),e.picking_uAttribute=Boolean(n.pickingAttribute)),e}}),k4={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class n1{static get DRAW_MODE(){return k4}constructor(e={}){const{id:t=Yu("geometry"),drawMode:r=k4.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|r,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?Ls({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,nn(ArrayBuffer.isView(i.value),`${this._print(r)}: must be typed array or object with value as typed array`),("POSITION"===r||"positions"===r)&&!i.size&&(i.size=3),"indices"===r?(nn(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return nn(Number.isFinite(r)),r}}function F4(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var ZO=Math.PI/180,r1=new Float32Array(16),L4=new Float32Array(12);function B4(n,e,t){var r=e[0]*ZO,i=e[1]*ZO,s=e[2]*ZO,o=Math.sin(s),a=Math.sin(r),l=Math.sin(i),u=Math.cos(s),c=Math.cos(r),h=Math.cos(i),p=t[0],g=t[1],m=t[2];n[0]=p*h*c,n[1]=p*l*c,n[2]=p*-a,n[3]=g*(-l*u+h*a*o),n[4]=g*(h*u+l*a*o),n[5]=g*c*o,n[6]=m*(l*o+h*a*u),n[7]=m*(-h*o+l*a*u),n[8]=m*c*u}function j4(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}var V4={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(e,t){var r=t.startRow,i=t.endRow,s=this.props,o=s.data,a=s.getOrientation,l=s.getScale,u=s.getTranslation,c=s.getTransformMatrix,h=Array.isArray(c),p=h&&16===c.length,g=Array.isArray(l),m=Array.isArray(a),b=Array.isArray(u),w=p||!h&&Boolean(c(o[0]));e.constant=w?p:m&&g&&b;var H=e.value;if(e.constant){var V;w?(r1.set(c),V=j4(r1)):(B4(V=L4,a,l),V.set(u,9)),e.value=new Float32Array(V)}else{var mt,Oe=r*e.size,Ue=TV(o,r,i),vt=Ue.objectInfo,Ct=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return F4(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F4(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(Ue.iterable);try{for(Ct.s();!(mt=Ct.n()).done;){var Bt=mt.value;vt.index++;var Rt=void 0;w?(r1.set(p?c:c(Bt,vt)),Rt=j4(r1)):(B4(Rt=L4,m?a:a(Bt,vt),g?l:l(Bt,vt)),Rt.set(b?u:u(Bt,vt),9)),H[Oe++]=Rt[0],H[Oe++]=Rt[1],H[Oe++]=Rt[2],H[Oe++]=Rt[3],H[Oe++]=Rt[4],H[Oe++]=Rt[5],H[Oe++]=Rt[6],H[Oe++]=Rt[7],H[Oe++]=Rt[8],H[Oe++]=Rt[9],H[Oe++]=Rt[10],H[Oe++]=Rt[11]}}catch(kt){Ct.e(kt)}finally{Ct.f()}}}};function U4(n,e){return e===Or.CARTESIAN||e===Or.METER_OFFSETS||e===Or.DEFAULT&&!n.isGeospatial}function z4(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Ir.assert(n.positions||n.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function M_e(n,e){if(n.attributes)return z4(n.attributes,e),n instanceof n1?n:new n1(n);if(n.positions||n.POSITION)return z4(n,e),new n1({attributes:n});throw Error("Invalid mesh")}var JO=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"getShaders",value:function(){var i=!mr(this.context.gl),s={};return lI(this.context.gl,"GLSL_DERIVATIVES")&&(s.DERIVATIVES_AVAILABLE=1),oo(Tn(t.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[M4,v_e,N4],transpileToGLSL100:i,defines:s})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:V4}),this.setState({emptyTexture:new Fa(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(i){var s=i.props,o=i.oldProps,a=i.changeFlags;if(oo(Tn(t.prototype),"updateState",this).call(this,{props:s,oldProps:o,changeFlags:a}),s.mesh!==o.mesh||a.extensionsChanged){if(this.state.model&&this.state.model.delete(),s.mesh){this.setState({model:this.getModel(s.mesh)});var l=s.mesh.attributes||s.mesh;this.setState({hasNormals:Boolean(l.NORMAL||l.normals)})}this.getAttributeManager().invalidateAll()}s.texture!==o.texture&&this.setTexture(s.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){oo(Tn(t.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete()}},{key:"draw",value:function(i){if(this.state.model){var a=this.props;this.state.model.draw({uniforms:Object.assign({},i.uniforms,{sizeScale:a.sizeScale,composeModelMatrix:!a._instanced||U4(this.context.viewport,a.coordinateSystem),flatShading:!this.state.hasNormals})})}}},{key:"getModel",value:function(i){var s=new yS(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:M_e(i,this.props._useMeshColors),isInstanced:!0})),o=this.props.texture;return s.setUniforms({sampler:o||this.state.emptyTexture,hasTexture:Boolean(o)}),s}},{key:"setTexture",value:function(i){var o=this.state,l=o.model;l&&l.setUniforms({sampler:i||o.emptyTexture,hasTexture:Boolean(i)})}}]),t}(Qg);JO.layerName="SimpleMeshLayer",JO.defaultProps={mesh:{value:null,type:"object",async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}};const H4={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[QO]};class tm{constructor(e={}){const{id:t}=e;this.id=t||Yu(this.constructor.name),this.display=!0,this.position=new Co,this.rotation=new Co,this.scale=new Co(1,1,1),this.matrix=new Xn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return nn(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return nn(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return nn(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e,t=!0){t?this.matrix.copy(e):this.matrix=e}setMatrixComponents({position:e,rotation:t,scale:r,update:i=!0}){return e&&this.setPosition(e),t&&this.setRotation(t),r&&this.setScale(r),i&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(r),this}update(e={}){const{position:t,rotation:r,scale:i}=e;return t&&this.setPosition(t),r&&this.setRotation(r),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(e,t){nn(e),t=t||this.matrix;const r=new Xn(e).multiplyRight(t),i=r.invert(),s=i.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class Uv extends tm{constructor(e={}){e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;dn.assert(t.every(r=>r instanceof tm),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(...e){for(const t of e)Array.isArray(t)?this.add(...t):this.children.push(t);return this}remove(e){const t=this.children,r=t.indexOf(e);return r>-1&&t.splice(r,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}traverse(e,{worldMatrix:t=new Xn}={}){const r=new Xn(t).multiplyRight(this.matrix);for(const i of this.children)i instanceof Uv?i.traverse(e,{worldMatrix:r}):e(i,{worldMatrix:r})}}function G4(){var n=new pa(4);return pa!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function $4(n,e,t){t*=.5;var r=Math.sin(t);return n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=Math.cos(t),n}function W4(n,e,t){var r=e[0],i=e[1],s=e[2],o=e[3],a=t[0],l=t[1],u=t[2],c=t[3];return n[0]=r*c+o*a+i*u-s*l,n[1]=i*c+o*l+s*a-r*u,n[2]=s*c+o*u+r*l-i*a,n[3]=o*c-r*a-i*l-s*u,n}var Y4=kU,W_e=function(){var n=pV(),e=gV(1,0,0),t=gV(0,1,0);return function(r,i,s){var o=mV(i,s);return o<-.999999?(oS(n,e,i),function(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&oS(n,t,i),function(n,e){var t=e[0],r=e[1],i=e[2],s=t*t+r*r+i*i;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),$4(r,n,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(oS(n,i,s),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=1+o,function(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=t*t+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=r*o,n[2]=i*o,n[3]=s*o,n}(r,r))}}();G4(),G4(),function(){var n=new pa(9);pa!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const q_e=[0,0,0,1],K_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},X_e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Q4(n){if(!n._animation){const e=X_e[n.componentType],t=K_e[n.type],r=t*n.count,{buffer:i,byteOffset:s}=n.bufferView.data,o=new e(i,s+(n.byteOffset||0),r);if(1===t)n._animation=Array.from(o);else{const a=[];for(let l=0;l<o.length;l+=t)a.push(Array.from(o.slice(l,l+t)));n._animation=a}}return n._animation}const Q_e=new Xn,eR=new class extends cI{constructor(e=0,t=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,r,i){return this[0]=e,this[1]=t,this[2]=r,this[3]=i,this.check()}fromMatrix3(e){return function(n,e){var r,t=e[0]+e[4]+e[8];if(t>0)r=Math.sqrt(t+1),n[3]=.5*r,n[0]=(e[5]-e[7])*(r=.5/r),n[1]=(e[6]-e[2])*r,n[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*s+s]-e[3*o+o]+1),n[i]=.5*r,n[3]=(e[3*s+o]-e[3*o+s])*(r=.5/r),n[s]=(e[3*s+i]+e[3*i+s])*r,n[o]=(e[3*o+i]+e[3*i+o])*r}}(this,e),this.check()}identity(){return function(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}fromAxisRotation(e,t){return $4(this,e,t),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=as(e)}get y(){return this[1]}set y(e){this[1]=as(e)}get z(){return this[2]}set z(e){this[2]=as(e)}get w(){return this[3]}set w(e){this[3]=as(e)}len(){return function(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function(n){var e=n[0],t=n[1],r=n[2],i=n[3];return e*e+t*t+r*r+i*i}(this)}dot(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return W_e(this,e,t),this.check()}add(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return function(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function(n,e){var t=e[0],r=e[1],i=e[2];n[0]=t,n[1]=r,n[2]=i,n[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i))}(this,this),this.check()}conjugate(){return function(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function(n,e){var t=e[0],r=e[1],i=e[2],s=e[3],o=t*t+r*r+i*i+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-r*a,n[2]=-i*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,r){return function(n,e,t,r){var i=e[0],s=e[1],o=e[2],a=e[3];n[0]=i+r*(t[0]-i),n[1]=s+r*(t[1]-s),n[2]=o+r*(t[2]-o),n[3]=a+r*(t[3]-a)}(this,e,t,r),this.check()}multiplyRight(e,t){return $c(!t),W4(this,this,e),this.check()}multiplyLeft(e,t){return $c(!t),W4(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function(n,e,t){t*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=r*l+o*a,n[1]=i*l+s*a,n[2]=s*l-i*a,n[3]=o*l-r*a}(this,this,e),this.check()}rotateY(e){return function(n,e,t){t*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=r*l-s*a,n[1]=i*l+o*a,n[2]=s*l+r*a,n[3]=o*l-i*a}(this,this,e),this.check()}rotateZ(e){return function(n,e,t){t*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),l=Math.cos(t);n[0]=r*l+i*a,n[1]=i*l-r*a,n[2]=s*l+o*a,n[3]=o*l-s*a}(this,this,e),this.check()}scale(e){return Y4(this,this,e),this.check()}slerp(e,t,r){switch(arguments.length){case 1:({start:e=q_e,target:t,ratio:r}=arguments[0]);break;case 2:[t,r]=arguments,e=this}return function(n,e,t,r){var p,g,m,b,w,i=e[0],s=e[1],o=e[2],a=e[3],l=t[0],u=t[1],c=t[2],h=t[3];(g=i*l+s*u+o*c+a*h)<0&&(g=-g,l=-l,u=-u,c=-c,h=-h),1-g>pi?(p=Math.acos(g),m=Math.sin(p),b=Math.sin((1-r)*p)/m,w=Math.sin(r*p)/m):(b=1-r,w=r),n[0]=b*i+w*l,n[1]=b*s+w*u,n[2]=b*o+w*c,n[3]=b*a+w*h}(this,e,t,r),this.check()}transformVector4(e,t=e){return function(n,e,t){var r=e[0],i=e[1],s=e[2],o=t[0],a=t[1],l=t[2],u=t[3],c=u*r+a*s-l*i,h=u*i+l*r-o*s,p=u*s+o*i-a*r,g=-o*r-a*i-l*s;n[0]=c*u+g*-o+h*-l-p*-a,n[1]=h*u+g*-a+p*-o-c*-l,n[2]=p*u+g*-l+c*-a-h*-o,n[3]=e[3]}(t,e,this),sS(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e,t){return this.multiplyLeft(e,t)}multiply(e,t){return this.multiplyRight(e,t)}};class rye{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const r=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:i,target:s,path:o})=>{(function(n,{input:e,interpolation:t,output:r},i,s){const a=n%e[e.length-1],l=e.findIndex(p=>p>=a),u=Math.max(0,l-1);if(!Array.isArray(i[s]))switch(s){case"translation":i[s]=[0,0,0];break;case"rotation":i[s]=[0,0,0,1];break;case"scale":i[s]=[1,1,1];break;default:dn.warn(`Bad animation path ${s}`)()}nn(i[s].length===r[u].length);const c=e[u],h=e[l];switch(t){case"STEP":!function(n,e,t){for(let r=0;r<t.length;r++)n[e][r]=t[r]}(i,s,r[u]);break;case"LINEAR":h>c&&function(n,e,t,r,i){if("rotation"===e){eR.slerp({start:t,target:r,ratio:i});for(let s=0;s<eR.length;s++)n[e][s]=eR[s]}else for(let s=0;s<t.length;s++)n[e][s]=i*r[s]+(1-i)*t[s]}(i,s,r[u],r[l],(a-c)/(h-c));break;case"CUBICSPLINE":h>c&&function(n,e,{p0:t,outTangent0:r,inTangent1:i,p1:s,tDiff:o,ratio:a}){for(let l=0;l<n[e].length;l++){const u=r[l]*o,c=i[l]*o;n[e][l]=(2*Math.pow(a,3)-3*Math.pow(a,2)+1)*t[l]+(Math.pow(a,3)-2*Math.pow(a,2)+a)*u+(-2*Math.pow(a,3)+3*Math.pow(a,2))*s[l]+(Math.pow(a,3)-Math.pow(a,2))*c}}(i,s,{p0:r[3*u+1],outTangent0:r[3*u+2],inTangent1:r[3*l+0],p1:r[3*l+1],tDiff:h-c,ratio:(a-c)/(h-c)});break;default:dn.warn(`Interpolation ${t} not supported`)()}})(r,i,s,o),function(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=Q_e.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(s,s._node)})}}class iye{constructor(e){this.animations=e.animations.map((t,r)=>{const i=t.name||`Animation-${r}`,s=t.samplers.map(({input:a,interpolation:l="LINEAR",output:u})=>({input:Q4(e.accessors[a]),interpolation:l,output:Q4(e.accessors[u])})),o=t.channels.map(({sampler:a,target:l})=>({sampler:s[a],target:e.nodes[l.node],path:l.path}));return new rye({name:i,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class sye extends tm{constructor(e,t={}){super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof yS?(this.model=e,this._setModelNodeProps(t)):this.model=new yS(e,t),this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(...e){return this.model.draw(...e)}setUniforms(...e){return this.model.setUniforms(...e),this}setAttributes(...e){return this.model.setAttributes(...e),this}updateModuleSettings(...e){return this.model.updateModuleSettings(...e),this}_setModelNodeProps(e){this.model.setProps(e)}}class oye{constructor(e,{attributes:t,material:r,pbrDebug:i,imageBasedLightingEnvironment:s,lights:o,useTangents:a}){this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},lI(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),i&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(t.NORMAL,"HAS_NORMALS"),this.defineIfPresent(t.TANGENT&&a,"HAS_TANGENTS"),this.defineIfPresent(t.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(o,"USE_LIGHTS"),this.defineIfPresent(i,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t,r=null){const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const l=new Fa(this.gl,Ls({id:e.name||e.id,parameters:Ls(Ls({},e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{}),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},o));this.uniforms[t]=l,this.defineIfPresent(r,r),this.generatedTextures.push(l)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:r=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,r]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(dn.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}}function Z4(n,e){return mr(n)?`#version 300 es\n${e}`:e}const cye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dye={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class hye{constructor(e,t={}){this.gl=e,this.options=Object.assign({},dye,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(r=>this.createScene(r))}createAnimator(){return Array.isArray(this.gltf.animations)?new iye(this.gltf):null}createScene(e){const r=(e.nodes||[]).map(s=>this.createNode(s));return new Uv({id:e.name||e.id,children:r})}createNode(e){if(!e._node){const r=(e.children||[]).map(s=>this.createNode(s));e.mesh&&r.push(this.createMesh(e.mesh));const i=new Uv({id:e.name||e.id,children:r});if(e.matrix)i.setMatrix(e.matrix);else{if(i.matrix.identity(),e.translation&&i.matrix.translate(e.translation),e.rotation){const s=(new Xn).fromQuaternion(e.rotation);i.matrix.multiplyRight(s)}e.scale&&i.matrix.scale(e.scale)}e._node=i}return e._node}createMesh(e){if(!e._mesh){const r=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),i=new Uv({id:e.name||e.id,children:r});e._mesh=i}return e._mesh}getVertexCount(e){dn.warn("getVertexCount() not found")()}createPrimitive(e,t,r){return function(n,e){const{id:t,drawMode:r,vertexCount:i,attributes:s,modelOptions:o}=e,a=new oye(n,e);dn.info(4,"createGLTFModel defines: ",a.defines)();const l=[];l.push(...a.generatedTextures),l.push(...Object.values(s).map(c=>c.buffer));const u=new sye(n,Object.assign({id:t,drawMode:r,vertexCount:i,modules:[H4],defines:a.defines,parameters:a.parameters,vs:Z4(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:Z4(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:l},o));return u.setProps({attributes:s}),u.setUniforms(a.uniforms),u}(this.gl,Object.assign({id:e.name||`${r.name||r.id}-primitive-${t}`,drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options))}createAttributes(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=this.createAccessor(e[i],this.createBuffer(e[i],this.gl.ARRAY_BUFFER))}),t&&(r.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),dn.info(4,"glTF Attributes",{attributes:e,indices:t,generated:r})(),r}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:r}=e;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[t]||(r.lumaBuffers[t]=new ri(this.gl,{id:`from-${r.id}`,data:r.data||e.value,target:t})),r.lumaBuffers[t]}createAccessor(e,t){return new fa({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:cye[e.type]})}createSampler(e){return e}needsPOT(){return!1}}function J4(n,e,t){if(n.byteLength<=e+t)return"";for(var r=new DataView(n),i="",s=0;s<t;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}function zv(n){return n+3&-4}function e6(n,e,t){return function(n,e,t){var r=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(r).buffer}(n,e,t)}function mye(n,e,t){var r;return r=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength),e.set(r,t),t+zv(r.byteLength)}function $o(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function t6(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;var r=e.baseUri||e.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return r.substr(0,r.lastIndexOf("/")+1)+n}function n6(n,e,t){var r=n.bufferViews[t];$o(r);var s=e[r.buffer];return $o(s),new Uint8Array(s.arrayBuffer,(r.byteOffset||0)+s.byteOffset,r.byteLength)}var Hv,o1=Ke(2207),tR={};function nR(n){return rR.apply(this,arguments)}function rR(){return(rR=cr(Yt().mark(function n(e){var t,r,i=arguments;return Yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},(t=i.length>1&&void 0!==i[1]?i[1]:null)&&(e=yye(e,t,r)),tR[e]=tR[e]||vye(e),o.next=6,tR[e];case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}},n)}))).apply(this,arguments)}function yye(n,e,t){var r=t.modules||{};return r[n]?r[n]:Rv?t.CDN?(Go(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat("2.3.13","/dist/libs/").concat(n)):QI?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}function vye(n){return iR.apply(this,arguments)}function iR(){return(iR=cr(Yt().mark(function n(e){var t,r;return Yt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!e.endsWith("wasm")){o.next=7;break}return o.next=3,fetch(e);case 3:return t=o.sent,o.next=6,t.arrayBuffer();case 6:return o.abrupt("return",o.sent);case 7:if(Rv){o.next=9;break}return o.abrupt("return",o1.requireFromFile&&o1.requireFromFile(e));case 9:if(!QI){o.next=11;break}return o.abrupt("return",importScripts(e));case 11:return o.next=13,fetch(e);case 13:return r=o.sent,o.next=16,r.text();case 16:return o.abrupt("return",bye(o.sent,e));case 18:case"end":return o.stop()}},n)}))).apply(this,arguments)}function bye(n,e){if(!Rv)return o1.requireFromString&&o1.requireFromString(n,e);if(QI)return eval.call(Ov,n),null;var t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch(r){t.text=n}return document.body.appendChild(t),null}function r6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function i6(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wye(n){return sR.apply(this,arguments)}function sR(){return(sR=cr(Yt().mark(function n(e){var t;return Yt().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return Hv=(t=e.modules||{}).draco3d?Hv||new Promise(function(s){var o=t.draco3d.createDecoderModule({onModuleLoaded:function(){s({draco:o})}})}):Hv||Eye(e),i.next=4,Hv;case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}},n)}))).apply(this,arguments)}function Eye(n){return aR.apply(this,arguments)}function aR(){return(aR=cr(Yt().mark(function n(e){var t,r,s;return Yt().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.draco&&e.draco.decoderType,a.next="js"===a.t0?3:7;break;case 3:return a.next=5,nR("draco_decoder.js","draco",e);case 5:return t=a.sent,a.abrupt("break",21);case 7:return a.t1=Promise,a.next=10,nR("draco_wasm_wrapper.js","draco",e);case 10:return a.t2=a.sent,a.next=13,nR("draco_decoder.wasm","draco",e);case 13:return a.t3=a.sent,a.t4=[a.t2,a.t3],a.next=17,a.t1.all.call(a.t1,a.t4);case 17:s=os(a.sent,2),t=s[0],r=s[1];case 21:return t=t||Ov.DracoDecoderModule,a.next=24,Sye(t,r);case 24:return a.abrupt("return",a.sent);case 25:case"end":return a.stop()}},n)}))).apply(this,arguments)}function Sye(n,e){var t={};return e&&(t.wasmBinary=e),new Promise(function(r){n(i6(i6({},t),{},{onModuleLoaded:function(s){return r({draco:s})}}))})}function Aye(n){if(!n||!n.POSITION)return null;var e=1/0,t=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0,a=n.POSITION.value,l=a&&a.length;if(!l)return null;for(var u=0;u<l;u+=3){var c=a[u],h=a[u+1],p=a[u+2];e=c<e?c:e,t=h<t?h:t,r=p<r?p:r,i=c>i?c:i,s=h>s?h:s,o=p>o?p:o}return[[e,t,r],[i,s,o]]}var o6={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},a6={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},Tye=function(){function n(e){_n(this,n),this.draco=e,this.drawMode="TRIANGLE",this.metadataQuerier={}}return Sn(n,[{key:"destroy",value:function(){}},{key:"destroyGeometry",value:function(t){t&&this.draco.destroy(t.dracoGeometry)}},{key:"parseSync",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.metadataQuerier=new this.draco.MetadataQuerier;var i=new this.draco.DecoderBuffer;i.Init(new Int8Array(t),t.byteLength);var a,l,u,s=new this.draco.Decoder,o={};try{var c=s.GetEncodedGeometryType(i);switch(c){case this.draco.TRIANGULAR_MESH:l=new this.draco.Mesh,a=s.DecodeBufferToMesh(i,l),u={type:0,faceCount:l.num_faces(),attributeCount:l.num_attributes(),vertexCount:l.num_points()};break;case this.draco.POINT_CLOUD:l=new this.draco.PointCloud,a=s.DecodeBufferToPointCloud(i,l),u={type:1,attributeCount:l.num_attributes(),vertexCount:l.num_points()};break;default:throw new Error("Unknown DRACO geometry type.")}if(!a.ok()||!l.ptr){var h="DRACO decompression failed: ".concat(a.error_msg());throw l&&this.draco.destroy(l),new Error(h)}o.loaderData={header:u},this._extractDRACOGeometry(s,l,c,o,r);var p=this._getGeometryMetadata(s,l);o.header={vertexCount:u.vertexCount,boundingBox:Aye(o.attributes),metadata:p}}finally{this.draco.destroy(s),this.draco.destroy(i),this.draco.destroy(l),this.draco.destroy(this.metadataQuerier)}return o}},{key:"_extractDRACOGeometry",value:function(t,r,i,s,o){var a=this._getAttributes(t,r,o);if(!a.POSITION)throw new Error("DRACO decompressor: No position attribute found.");return i===this.draco.TRIANGULAR_MESH?(a.indices="TRIANGLE_STRIP"===this.drawMode?this._getMeshStripIndices(t,r):this._getMeshFaceIndices(t,r),s.mode="TRIANGLE_STRIP"===this.drawMode?5:4):s.mode=0,a.indices&&(s.indices={value:a.indices,size:1},delete a.indices),s.attributes=a,s}},{key:"getPositionAttributeMetadata",value:function(t){this.metadata=this.metadata||{},this.metadata.attributes=this.metadata.attributes||{};var r=new this.draco.AttributeQuantizationTransform;if(r.InitFromAttribute(t)){this.metadata.attributes.position.isQuantized=!0,this.metadata.attributes.position.maxRange=r.range(),this.metadata.attributes.position.numQuantizationBits=r.quantization_bits(),this.metadata.attributes.position.minValues=new Float32Array(3);for(var i=0;i<3;++i)this.metadata.attributes.position.minValues[i]=r.min_value(i)}this.draco.destroy(r)}},{key:"_getAttributes",value:function(t,r,i){for(var s={},o=r.num_points(),a=0;a<r.num_attributes();a++){var l=t.GetAttribute(r,a),u=this._getAttributeMetadata(t,r,a),c={uniqueId:l.unique_id(),attributeType:l.attribute_type(),dataType:a6[l.data_type()],size:l.size(),numComponents:l.num_components(),byteOffset:l.byte_offset(),byteStride:l.byte_stride(),normalized:l.normalized(),metadata:u},h=this._deduceAttributeName(c,i),g=this._getAttributeTypedArray(t,r,l,h).typedArray;s[h]={value:g,size:g.length/o,metadata:u}}return s}},{key:"_getMeshFaceIndices",value:function(t,r){for(var i=r.num_faces(),o=new Uint32Array(3*i),a=new this.draco.DracoInt32Array,l=0;l<i;++l){t.GetFaceFromMesh(r,l,a);var u=3*l;o[u]=a.GetValue(0),o[u+1]=a.GetValue(1),o[u+2]=a.GetValue(2)}return this.draco.destroy(a),o}},{key:"_getMeshStripIndices",value:function(t,r){var i=new this.draco.DracoInt32Array;t.GetTriangleStripsFromMesh(r,i);for(var s=new Uint32Array(i.size()),o=0;o<i.size();++o)s[o]=i.GetValue(o);return this.draco.destroy(i),s}},{key:"_getAttributeTypedArray",value:function(t,r,i,s){if(0===i.ptr){var o="DRACO decode bad attribute ".concat(s);throw new Error(o)}var h,p,a=a6[i.data_type()],l=i.num_components(),c=r.num_points()*l;switch(a){case Float32Array:h=new this.draco.DracoFloat32Array,t.GetAttributeFloatForAllPoints(r,i,h),p=new Float32Array(c);break;case Int8Array:h=new this.draco.DracoInt8Array,t.GetAttributeInt8ForAllPoints(r,i,h),p=new Int8Array(c);break;case Int16Array:h=new this.draco.DracoInt16Array,t.GetAttributeInt16ForAllPoints(r,i,h),p=new Int16Array(c);break;case Int32Array:h=new this.draco.DracoInt32Array,t.GetAttributeInt32ForAllPoints(r,i,h),p=new Int32Array(c);break;case Uint8Array:h=new this.draco.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(r,i,h),p=new Uint8Array(c);break;case Uint16Array:h=new this.draco.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(r,i,h),p=new Uint16Array(c);break;case Uint32Array:h=new this.draco.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(r,i,h),p=new Uint32Array(c);break;default:throw new Error("DRACO decoder: unexpected attribute type.")}for(var m=0;m<c;m++)p[m]=h.GetValue(m);return this.draco.destroy(h),{typedArray:p,components:l}}},{key:"_deduceAttributeName",value:function(t,r){var i=r.extraAttributes,s=void 0===i?{}:i;if(s&&"object"===di(s))for(var o=0,a=Object.entries(s);o<a.length;o++){var l=os(a[o],2);if(l[1]===t.uniqueId)return l[0]}for(var h in o6)if(t.attributeType===this.draco[h])return o6[h];if(t.metadata){var g=r.attributeNameEntry||"name";if(t.metadata[g])return t.metadata[g].string}return"CUSTOM_ATTRIBUTE_".concat(t.uniqueId)}},{key:"_getGeometryMetadata",value:function(t,r){var i=t.GetMetadata(r);return this._queryDracoMetadata(i)}},{key:"_getAttributeMetadata",value:function(t,r,i){var s=t.GetAttributeMetadata(r,i);return this._queryDracoMetadata(s)}},{key:"_queryDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var r={},i=this.metadataQuerier.NumEntries(t),s=0;s<i;s++){var o=this.metadataQuerier.GetEntryName(t,s);r[o]={int:this.metadataQuerier.GetIntEntry(t,o),string:this.metadataQuerier.GetStringEntry(t,o),double:this.metadataQuerier.GetDoubleEntry(t,o),intArray:this.metadataQuerier.GetIntEntryArray(t,o)}}return r}},{key:"decode",value:function(t,r){return this.parseSync(t,r)}}]),n}();function l6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function uR(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var c6={id:"draco",name:"Draco",version:"2.3.13",extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"===("undefined"==typeof WebAssembly?"undefined":di(WebAssembly))?"wasm":"js",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/draco@".concat("2.3.13","/dist/draco-loader.worker.js"),localWorkerUrl:"modules/draco/dist/draco-loader.worker.dev.js",extraAttributes:{}}}},cR=uR(uR({},c6),{},{parse:function(n,e,t,r){return dR.apply(this,arguments)}});function dR(){return(dR=cr(Yt().mark(function n(e,t,r,i){var a;return Yt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,wye(t);case 2:return a=new Tye(u.sent.draco),u.prev=5,u.abrupt("return",a.parseSync(e,uR({extraAttributes:t.draco&&t.draco.extraAttributes||null},t.parseOptions||{})));case 7:return u.prev=7,a.destroy(),u.finish(7);case 10:case"end":return u.stop()}},n,null,[[5,,7,10]])}))).apply(this,arguments)}var d6=["SCALAR","VEC2","VEC3","VEC4"],Mye=new Map([[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126]]),Iye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Oye={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Rye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function h6(n){return d6[n-1]||d6[0]}function f6(n){var e=Mye.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function p6(n,e){var t=Rye[n.componentType],r=Iye[n.type],s=n.count*r,o=n.count*r*Oye[n.componentType];return $o(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}var lh=function(){function n(e){if(_n(this,n),e instanceof n)return e;e||(e={json:{asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},buffers:[]}),this.byteLength=0,this.gltf=e,$o(this.gltf.json)}return Sn(n,[{key:"getApplicationData",value:function(t){return this.json[t]}},{key:"getExtraData",value:function(t){return(this.json.extras||{})[t]}},{key:"getExtension",value:function(t){return this.getUsedExtensions().find(function(s){return s===t})?(this.json.extensions||{})[t]||!0:null}},{key:"getRequiredExtension",value:function(t){return this.getRequiredExtensions().find(function(i){return i===t})?this.getExtension(t):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getObjectExtension",value:function(t,r){return(t.extensions||{})[r]}},{key:"getScene",value:function(t){return this.getObject("scenes",t)}},{key:"getNode",value:function(t){return this.getObject("nodes",t)}},{key:"getSkin",value:function(t){return this.getObject("skins",t)}},{key:"getMesh",value:function(t){return this.getObject("meshes",t)}},{key:"getMaterial",value:function(t){return this.getObject("materials",t)}},{key:"getAccessor",value:function(t){return this.getObject("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this.getObject("textures",t)}},{key:"getSampler",value:function(t){return this.getObject("samplers",t)}},{key:"getImage",value:function(t){return this.getObject("images",t)}},{key:"getBufferView",value:function(t){return this.getObject("bufferViews",t)}},{key:"getBuffer",value:function(t){return this.getObject("buffers",t)}},{key:"getObject",value:function(t,r){if("object"===di(r))return r;var i=this.json[t]&&this.json[t][r];if(!i)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(r,"]"));return i}},{key:"getTypedArrayForBufferView",value:function(t){t=this.getBufferView(t);var i=this.gltf.buffers[t.buffer];return $o(i),new Uint8Array(i.arrayBuffer,(t.byteOffset||0)+i.byteOffset,t.byteLength)}},{key:"getTypedArrayForAccessor",value:function(t){t=this.getAccessor(t);var r=this.getBufferView(t.bufferView),s=this.getBuffer(r.buffer).data,o=p6(t,r);return new(0,o.ArrayType)(s,r.byteOffset+t.byteOffset,o.length)}},{key:"getTypedArrayForImageData",value:function(t){t=this.getAccessor(t);var r=this.getBufferView(t.bufferView),i=this.getBuffer(r.buffer);return new Uint8Array(i.data,r.byteOffset||0,r.byteLength)}},{key:"addApplicationData",value:function(t,r){return this.json[t]=r,this}},{key:"addExtraData",value:function(t,r){return this.json.extras=this.json.extras||{},this.json.extras[t]=r,this}},{key:"addObjectExtension",value:function(t,r,i){return $o(i),t.extensions=t.extensions||{},t.extensions[r]=i,this.registerUsedExtension(r),this}},{key:"setObjectExtension",value:function(t,r,i){(t.extensions||{})[r]=i}},{key:"removeObjectExtension",value:function(t,r){var i=t.extensions||{},s=i[r];return delete i[r],s}},{key:"addExtension",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $o(r),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=r,this.registerUsedExtension(t),r}},{key:"addRequiredExtension",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $o(r),this.addExtension(t,r),this.registerRequiredExtension(t),r}},{key:"registerUsedExtension",value:function(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(r){return r===t})||this.json.extensionsUsed.push(t)}},{key:"registerRequiredExtension",value:function(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(r){return r===t})||this.json.extensionsRequired.push(t)}},{key:"removeExtension",value:function(t){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t]}},{key:"addMesh",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,s=this._addAttributes(t),o={primitives:[{attributes:s,indices:r,mode:i}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(o),this.json.meshes.length-1}},{key:"addPointCloud",value:function(t){var i={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}},{key:"addImage",value:function(t,r){r=r||function(n){var e=GO(n);return e?e.mimeType:null}(t);var s={bufferView:this.addBufferView(t),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}},{key:"addBufferView",value:function(t){var r=t.byteLength;$o(Number.isFinite(r)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);var i={buffer:0,byteOffset:this.byteLength,byteLength:r};return this.byteLength+=zv(r),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(t,r){var i={bufferView:t,type:h6(r.size),componentType:r.componentType,count:r.count};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3},i=this.addBufferView(t),s={size:r.size,componentType:f6(t),count:Math.round(t.length/r.size)};return this.addAccessor(i,Object.assign(s,r))}},{key:"createBinaryChunk",value:function(){if(!this.arrayBuffer){for(var t=this.byteLength,r=new ArrayBuffer(t),i=new Uint8Array(r),s=0,o=0;o<this.sourceBuffers.length;o++)s=mye(this.sourceBuffers[o],i,s);this.json.buffers[0].byteLength=t,this.arrayBuffer=r,this.sourceBuffers=[]}}},{key:"_removeStringFromArray",value:function(t,r){for(var i=!0;i;){var s=t.indexOf(r);s>-1?t.splice(s,1):i=!1}}},{key:"json",get:function(){return this.gltf.json}}]),n}(),g6="KHR_binary_glTF",$v="KHR_draco_mesh_compression",nm="KHR_lights_punctual",a1="KHR_materials_unlit",l1="KHR_techniques_webgl";function m6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _6(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kye(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={};for(var r in n){var i=n[r];if("indices"!==r){var s=y6(i,e[r]||{});t[r]=s}}return t}function y6(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Fye(n),r=t.buffer,i=t.size,s=t.count,o=_6(_6({},e),{},{value:r,size:i,bufferView:null,byteOffset:0,count:s,type:h6(i),componentType:f6(r)});return o}function Fye(n){var e=n,t=1,r=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),r=e.length/t),{buffer:e,size:t,count:r}}function v6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bye(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?v6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var jye=Yt().mark(w6);function u1(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return b6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b6(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function b6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Uye(n,e,t){return hR.apply(this,arguments)}function hR(){return(hR=cr(Yt().mark(function n(e,t,r){var i,s,o,a,l;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t.gltf.decompressMeshes){c.next=2;break}return c.abrupt("return");case 2:i=new lh(e),s=[],o=u1(w6(i));try{for(o.s();!(a=o.n()).done;)i.getObjectExtension(l=a.value,$v)&&s.push(Hye(l,i,t,r))}catch(h){o.e(h)}finally{o.f()}return c.next=8,Promise.all(s);case 8:i.removeExtension($v);case 9:case"end":return c.stop()}},n)}))).apply(this,arguments)}function zye(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new lh(n),r=u1(t.json.meshes||[]);try{for(r.s();!(i=r.n()).done;){var s=i.value;Gye(s,e),t.addRequiredExtension($v)}}catch(o){r.e(o)}finally{r.f()}}function Hye(n,e,t,r){return fR.apply(this,arguments)}function fR(){return(fR=cr(Yt().mark(function n(e,t,r,i){var s,o,a,l,u,c,h,p,g,m;return Yt().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return s=t.getObjectExtension(e,$v),o=t.getTypedArrayForBufferView(s.bufferView),a=e6(o.buffer,o.byteOffset),l=i.parse,delete(u=Bye({},r))["3d-tiles"],V.next=8,l(a,cR,u,i);case 8:for(c=V.sent,h={},p=0,g=[].concat(lu(Object.entries(e.attributes)),[["indices",e.indices]]);p<g.length;p++)m=os(g[p],2),h[m[0]]=t.getAccessor(m[1]);e.attributes=kye(c.attributes,h),c.indices&&(e.indices=y6(c.indices,h.indices||{})),$ye(e);case 14:case"end":return V.stop()}},n)}))).apply(this,arguments)}function Gye(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!r.DracoWriter||!r.DracoLoader)throw new Error("DracoWriter/DracoLoader not available");var s=r.DracoWriter.encodeSync({attributes:n}),o=i.parseSync,a=o({attributes:n}),l=r._addFauxAttributes(a.attributes),u=r.addBufferView(s),c={primitives:[{attributes:l,mode:t,extensions:Ln({},$v,{bufferView:u,attributes:l})}]};return c}function $ye(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("Empty glTF primitive detected: Draco decompression failure?")}function w6(n){var e,t,i,s,o;return Yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=u1(n.json.meshes||[]),l.prev=1,e.s();case 3:if((t=e.n()).done){l.next=24;break}i=u1(t.value.primitives),l.prev=6,i.s();case 8:if((s=i.n()).done){l.next=14;break}return o=s.value,l.next=12,o;case 12:l.next=8;break;case 14:l.next=19;break;case 16:l.prev=16,l.t0=l.catch(6),i.e(l.t0);case 19:return l.prev=19,i.f(),l.finish(19);case 22:l.next=3;break;case 24:l.next=29;break;case 26:l.prev=26,l.t1=l.catch(1),e.e(l.t1);case 29:return l.prev=29,e.f(),l.finish(29);case 32:case"end":return l.stop()}},jye,null,[[1,26,29,32],[6,16,19,22]])}function E6(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return S6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S6(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function S6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function qye(n,e){var t=new lh(n),r=t.json,i=t.getExtension(nm);i&&(t.json.lights=i.lights,t.removeExtension(nm));var o,s=E6(r.nodes||[]);try{for(s.s();!(o=s.n()).done;){var a=o.value,l=t.getObjectExtension(a,nm);l&&(a.light=l.light),t.removeObjectExtension(a,nm)}}catch(u){s.e(u)}finally{s.f()}}function Yye(n,e){var t=new lh(n),r=t.json;if(r.lights){var i=t.addExtension(nm);$o(!i.lights),i.lights=r.lights,delete r.lights}if(t.json.lights){var o,s=E6(t.json.lights);try{for(s.s();!(o=s.n()).done;){var a=o.value;t.addObjectExtension(a.node,nm,a)}}catch(u){s.e(u)}finally{s.f()}delete t.json.lights}}function C6(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return A6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A6(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function A6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Xye(n,e){var t=new lh(n),r=t.json;t.removeExtension(a1);var s,i=C6(r.materials||[]);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.extensions&&o.extensions.KHR_materials_unlit&&(o.unlit=!0),t.removeObjectExtension(o,a1)}}catch(l){i.e(l)}finally{i.f()}}function Qye(n,e){var t=new lh(n);if(t.materials){var s,i=C6(t.json.materials);try{for(i.s();!(s=i.n()).done;){var o=s.value;o.unlit&&(delete o.unlit,t.addObjectExtension(o,a1,{}),t.addExtension(a1))}}catch(a){i.e(a)}finally{i.f()}}}function T6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eve(n,e){var t=new lh(n),r=t.json,i=t.getExtension(l1);if(i){var a,s=function(n,e){var t=n.programs,r=void 0===t?[]:t,i=n.shaders,s=void 0===i?[]:i,o=n.techniques,a=void 0===o?[]:o,l=new TextDecoder;return s.forEach(function(u){if(!Number.isFinite(u.bufferView))throw new Error("KHR_techniques_webgl: no shader code");u.code=l.decode(e.getTypedArrayForBufferView(u.bufferView))}),r.forEach(function(u){u.fragmentShader=s[u.fragmentShader],u.vertexShader=s[u.vertexShader]}),a.forEach(function(u){u.program=r[u.program]}),a}(i,t),o=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return T6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T6(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(r.materials||[]);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=t.getObjectExtension(l,l1);u&&(l.technique=Object.assign({},u,s[u.technique]),l.technique.values=rve(l.technique,t)),t.removeObjectExtension(l,l1)}}catch(c){o.e(c)}finally{o.f()}t.removeExtension(l1)}}function tve(n,e){}function rve(n,e){var t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(function(r){n.uniforms[r].value&&!(r in t)&&(t[r]=n.uniforms[r].value)}),Object.keys(t).forEach(function(r){"object"===di(t[r])&&void 0!==t[r].index&&(t[r].texture=e.getTexture(t[r].index))}),t}var x6={KHR_draco_mesh_compression:gt,KHR_lights_punctual:te,KHR_materials_unlit:Et,KHR_techniques_webgl:dt};function ive(n){return pR.apply(this,arguments)}function pR(){return(pR=cr(Yt().mark(function n(e){var t,r,i,s,a,l=arguments;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=l.length>2?l[2]:void 0,(t=l.length>1&&void 0!==l[1]?l[1]:{}).gltf=t.gltf||{},c.t0=Yt().keys(x6);case 4:if((c.t1=c.t0()).done){c.next=14;break}if((i=c.t1.value)in(s=t.gltf.excludeExtensions||{})&&!s[i]){c.next=12;break}return a=x6[i],c.next=12,a.decode(e,t,r);case 12:c.next=4;break;case 14:case"end":return c.stop()}},n)}))).apply(this,arguments)}var D6=1735152710,rm=!0;function cve(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}function fve(n,e,t,r){Go(n.header.byteLength>20);var i=e.getUint32(t+0,rm),s=e.getUint32(t+4,rm);return t+=8,Go(0===s),mR(n,e,t,i),(t+=i)+_R(n,e,t,n.header.byteLength)}function pve(n,e,t,r){return Go(n.header.byteLength>20),function(n,e,t,r){for(;t+8<=n.header.byteLength;){var i=e.getUint32(t+0,rm),s=e.getUint32(t+4,rm);switch(t+=8,s){case 1313821514:mR(n,e,t,i);break;case 5130562:_R(n,e,t,i);break;case 0:r.glb.strict||mR(n,e,t,i);break;case 1:r.glb.strict||_R(n,e,t,i)}t+=zv(i)}}(n,e,t,r),t+n.header.byteLength}function mR(n,e,t,r,i){var s=new Uint8Array(e.buffer,t,r),a=new TextDecoder("utf8").decode(s);return n.json=JSON.parse(a),zv(r)}function _R(n,e,t,r,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:r,arrayBuffer:e.buffer}),zv(r)}function M6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Mf(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return I6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I6(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}function I6(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var im,O6={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},bve={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},wve=function(){function n(e){_n(this,n),this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}}return Sn(n,[{key:"normalize",value:function(t,r){this.json=t.json;var i=t.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!r.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function(n,e){var s,t=new lh(n),r=t.json,i=function(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return M6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return M6(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=n[Symbol.iterator]()},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&null!=t.return&&t.return()}finally{if(o)throw a}}}}(r.images||[]);try{for(i.s();!(s=i.n()).done;){var o=s.value,a=t.removeObjectExtension(o,g6);a&&Object.assign(o,a)}}catch(l){i.e(l)}finally{i.f()}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,t.removeExtension(g6)}(t),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i)}},{key:"_addAsset",value:function(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(t){for(var r in O6)this._convertTopLevelObjectToArray(t,r)}},{key:"_convertTopLevelObjectToArray",value:function(t,r){var i=t[r];if(i&&!Array.isArray(i))for(var s in t[r]=[],i){var o=i[s];o.id=o.id||s;var a=t[r].length;t[r].push(o),this.idToIndexMap[r][s]=a}}},{key:"_convertObjectIdsToArrayIndices",value:function(t){for(var r in O6)this._convertIdsToIndices(t,r);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));var s,i=Mf(t.textures);try{for(i.s();!(s=i.n()).done;)this._convertTextureIds(s.value)}catch(w){i.e(w)}finally{i.f()}var l,a=Mf(t.meshes);try{for(a.s();!(l=a.n()).done;)this._convertMeshIds(l.value)}catch(w){a.e(w)}finally{a.f()}var h,c=Mf(t.nodes);try{for(c.s();!(h=c.n()).done;)this._convertNodeIds(h.value)}catch(w){c.e(w)}finally{c.f()}var m,g=Mf(t.scenes);try{for(g.s();!(m=g.n()).done;)this._convertSceneIds(m.value)}catch(w){g.e(w)}finally{g.f()}}},{key:"_convertTextureIds",value:function(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}},{key:"_convertMeshIds",value:function(t){var i,r=Mf(t.primitives);try{for(r.s();!(i=r.n()).done;){var s=i.value,o=s.attributes,a=s.indices,l=s.material;for(var u in o)o[u]=this._convertIdToIndex(o[u],"accessor");a&&(s.indices=this._convertIdToIndex(a,"accessor")),l&&(s.material=this._convertIdToIndex(l,"material"))}}catch(c){r.e(c)}finally{r.f()}}},{key:"_convertNodeIds",value:function(t){var r=this;t.children&&(t.children=t.children.map(function(i){return r._convertIdToIndex(i,"node")}))}},{key:"_convertSceneIds",value:function(t){var r=this;t.nodes&&(t.nodes=t.nodes.map(function(i){return r._convertIdToIndex(i,"node")}))}},{key:"_convertIdsToIndices",value:function(t,r){var s,i=Mf(t[r]);try{for(i.s();!(s=i.n()).done;){var o=s.value;for(var a in o){var u=this._convertIdToIndex(o[a],a);o[a]=u}}}catch(c){i.e(c)}finally{i.f()}}},{key:"_convertIdToIndex",value:function(t,r){var i=bve[r];if(i in this.idToIndexMap){var s=this.idToIndexMap[i][t];if(!Number.isFinite(s))throw new Error("gltf v1: failed to resolve ".concat(r," with id ").concat(t));return s}return t}},{key:"_updateObjects",value:function(t){var i,r=Mf(this.json.buffers);try{for(r.s();!(i=r.n()).done;)delete i.value.type}catch(o){r.e(o)}finally{r.f()}}}]),n}();function Eve(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new wve).normalize(n,e)}function R6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function If(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?R6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Sve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Cve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},El={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},Ave={magFilter:El.TEXTURE_MAG_FILTER,minFilter:El.TEXTURE_MIN_FILTER,wrapS:El.TEXTURE_WRAP_S,wrapT:El.TEXTURE_WRAP_T},Tve=(Ln(im={},El.TEXTURE_MAG_FILTER,El.LINEAR),Ln(im,El.TEXTURE_MIN_FILTER,El.NEAREST_MIPMAP_LINEAR),Ln(im,El.TEXTURE_WRAP_S,El.REPEAT),Ln(im,El.TEXTURE_WRAP_,El.REPEAT),im),Mve=function(){function n(){_n(this,n)}return Sn(n,[{key:"postProcess",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.json,s=t.buffers,o=void 0===s?[]:s,a=t.images,l=void 0===a?[]:a,u=t.baseUri,c=void 0===u?"":u;return $o(i),this.baseUri=c,this.json=i,this.buffers=o,this.images=l,this._resolveTree(this.json,r),this.json}},{key:"_resolveTree",value:function(t){var r=this;t.bufferViews&&(t.bufferViews=t.bufferViews.map(function(s,o){return r._resolveBufferView(s,o)})),t.images&&(t.images=t.images.map(function(s,o){return r._resolveImage(s,o)})),t.samplers&&(t.samplers=t.samplers.map(function(s,o){return r._resolveSampler(s,o)})),t.textures&&(t.textures=t.textures.map(function(s,o){return r._resolveTexture(s,o)})),t.accessors&&(t.accessors=t.accessors.map(function(s,o){return r._resolveAccessor(s,o)})),t.materials&&(t.materials=t.materials.map(function(s,o){return r._resolveMaterial(s,o)})),t.meshes&&(t.meshes=t.meshes.map(function(s,o){return r._resolveMesh(s,o)})),t.nodes&&(t.nodes=t.nodes.map(function(s,o){return r._resolveNode(s,o)})),t.skins&&(t.skins=t.skins.map(function(s,o){return r._resolveSkin(s,o)})),t.scenes&&(t.scenes=t.scenes.map(function(s,o){return r._resolveScene(s,o)})),void 0!==t.scene&&(t.scene=t.scenes[this.json.scene])}},{key:"getScene",value:function(t){return this._get("scenes",t)}},{key:"getNode",value:function(t){return this._get("nodes",t)}},{key:"getSkin",value:function(t){return this._get("skins",t)}},{key:"getMesh",value:function(t){return this._get("meshes",t)}},{key:"getMaterial",value:function(t){return this._get("materials",t)}},{key:"getAccessor",value:function(t){return this._get("accessors",t)}},{key:"getCamera",value:function(t){return null}},{key:"getTexture",value:function(t){return this._get("textures",t)}},{key:"getSampler",value:function(t){return this._get("samplers",t)}},{key:"getImage",value:function(t){return this._get("images",t)}},{key:"getBufferView",value:function(t){return this._get("bufferViews",t)}},{key:"getBuffer",value:function(t){return this._get("buffers",t)}},{key:"_get",value:function(t,r){if("object"===di(r))return r;var i=this.json[t]&&this.json[t][r];return i||console.warn("glTF file error: Could not find ".concat(t,"[").concat(r,"]")),i}},{key:"_resolveScene",value:function(t,r){var i=this;return t.id=t.id||"scene-".concat(r),t.nodes=(t.nodes||[]).map(function(s){return i.getNode(s)}),t}},{key:"_resolveNode",value:function(t,r){var i=this;return t.id=t.id||"node-".concat(r),t.children&&(t.children=t.children.map(function(s){return i.getNode(s)})),void 0!==t.mesh&&(t.mesh=this.getMesh(t.mesh)),void 0!==t.camera&&(t.camera=this.getCamera(t.camera)),void 0!==t.skin&&(t.skin=this.getSkin(t.skin)),t}},{key:"_resolveSkin",value:function(t,r){return t.id=t.id||"skin-".concat(r),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}},{key:"_resolveMesh",value:function(t,r){var i=this;return t.id=t.id||"mesh-".concat(r),t.primitives&&(t.primitives=t.primitives.map(function(s){var o=(s=If({},s)).attributes;for(var a in s.attributes={},o)s.attributes[a]=i.getAccessor(o[a]);return void 0!==s.indices&&(s.indices=i.getAccessor(s.indices)),void 0!==s.material&&(s.material=i.getMaterial(s.material)),s})),t}},{key:"_resolveMaterial",value:function(t,r){if(t.id=t.id||"material-".concat(r),t.normalTexture&&(t.normalTexture=If({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=If({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=If({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.pbrMetallicRoughness){t.pbrMetallicRoughness=If({},t.pbrMetallicRoughness);var i=t.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture=If({},i.baseColorTexture),i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture=If({},i.metallicRoughnessTexture),i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return t}},{key:"_resolveAccessor",value:function(t,r){if(t.id=t.id||"accessor-".concat(r),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=function(n){return Cve[n]}(t.componentType),t.components=function(n){return Sve[n]}(t.type),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){var i=t.bufferView.buffer,s=p6(t,t.bufferView);t.value=new(0,s.ArrayType)(i.arrayBuffer,(t.bufferView.byteOffset||0)+(t.byteOffset||0)+i.byteOffset,s.length)}return t}},{key:"_resolveTexture",value:function(t,r){return t.id=t.id||"texture-".concat(r),t.sampler="sampler"in t?this.getSampler(t.sampler):Tve,t.source=this.getImage(t.source),t}},{key:"_resolveSampler",value:function(t,r){for(var i in t.id=t.id||"sampler-".concat(r),t.parameters={},t){var s=this._enumSamplerParameter(i);void 0!==s&&(t.parameters[s]=t[i])}return t}},{key:"_enumSamplerParameter",value:function(t){return Ave[t]}},{key:"_resolveImage",value:function(t,r){t.id=t.id||"image-".concat(r),void 0!==t.bufferView&&(t.bufferView=this.getBufferView(t.bufferView));var i=this.images[r];return i&&(t.image=i),t}},{key:"_resolveBufferView",value:function(t,r){t.id=t.id||"bufferView-".concat(r);var i=t.buffer;t.buffer=this.buffers[i];var o=this.buffers[i].byteOffset||0;return"byteOffset"in t&&(o+=t.byteOffset),t.data=new Uint8Array(this.buffers[i].arrayBuffer,o,t.byteLength),t}},{key:"_resolveCamera",value:function(t,r){return t.id=t.id||"camera-".concat(r),t}}]),n}();function Ive(n,e){return(new Mve).postProcess(n,e)}function Ove(n,e){return yR.apply(this,arguments)}function yR(){return(yR=cr(Yt().mark(function n(e,t){var i,s,o,a,l,u=arguments;return Yt().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(s=u.length>4?u[4]:void 0,Rve(e,t,u.length>2&&void 0!==u[2]?u[2]:0,i=u.length>3?u[3]:void 0),Eve(e,{normalize:i.gltf.normalize}),o=[],!i.gltf.loadBuffers||!e.json.buffers){h.next=9;break}return h.next=9,Pve(e,i,s);case 9:return i.gltf.loadImages&&(a=Nve(e,i,s),o.push(a)),l=ive(e,i,s),o.push(l),h.next=14,Promise.all(o);case 14:return h.abrupt("return",i.gltf.postProcess?Ive(e,i):e);case 15:case"end":return h.stop()}},n)}))).apply(this,arguments)}function Rve(n,e,t,r){if(r.uri&&(n.baseUri=r.uri),e instanceof ArrayBuffer&&!function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new DataView(n),i=t.magic,s=void 0===i?D6:i,o=r.getUint32(e,!1);return o===s||o===D6}(e,t,r)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function(n){try{return JSON.parse(n)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?J4(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?J4(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){var s={};t=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new DataView(e);n.type=cve(i,t+0),n.version=i.getUint32(t+4,rm);var s=i.getUint32(t+8,rm);switch(n.header={byteOffset:t,byteLength:s},n.json={},n.binChunks=[],t+=12,n.version){case 1:return fve(n,i,t);case 2:return pve(n,i,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(s,e,t,r),$o("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),n._glb=s,n.json=s.json}else $o(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){var a=n._glb.binChunks;n.buffers[0]={arrayBuffer:a[0].arrayBuffer,byteOffset:a[0].byteOffset,byteLength:a[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})}function Pve(n,e,t){return vR.apply(this,arguments)}function vR(){return(vR=cr(Yt().mark(function n(e,t,r){var i,s,o,a,l,u;return Yt().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:i=0;case 1:if(!(i<e.json.buffers.length)){h.next=18;break}if(!(s=e.json.buffers[i]).uri){h.next=15;break}return $o(o=r.fetch),a=t6(s.uri,t),h.next=9,o(a);case 9:return l=h.sent,h.next=12,l.arrayBuffer();case 12:e.buffers[i]={arrayBuffer:u=h.sent,byteOffset:0,byteLength:u.byteLength},delete s.uri;case 15:++i,h.next=1;break;case 18:case"end":return h.stop()}},n)}))).apply(this,arguments)}function Nve(n,e,t){return bR.apply(this,arguments)}function bR(){return(bR=cr(Yt().mark(function n(e,t,r){var i,s,o;return Yt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:for(i=e.json.images||[],s=[],o=0;o<i.length;++o)s.push(kve(e,i[o],o,t,r));return l.next=5,Promise.all(s);case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},n)}))).apply(this,arguments)}function kve(n,e,t,r,i){return wR.apply(this,arguments)}function wR(){return(wR=cr(Yt().mark(function n(e,t,r,i,s){var o,a,l,u,c,h;return Yt().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=s.fetch,a=s.parse,!t.uri){m.next=9;break}return u=t6(t.uri,i),m.next=5,o(u);case 5:return c=m.sent,m.next=8,c.arrayBuffer();case 8:l=m.sent;case 9:return Number.isFinite(t.bufferView)&&(h=n6(e.json,e.buffers,t.bufferView),l=e6(h.buffer,h.byteOffset,h.byteLength)),$o(l,"glTF image has no data"),m.next=13,a(l,a4,{},s);case 13:e.images[r]=m.sent;case 15:case"end":return m.stop()}},n)}))).apply(this,arguments)}function P6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function d1(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?P6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ER={id:"gltf",name:"glTF",version:"2.3.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function(n){return SR.apply(this,arguments)},options:{gltf:{normalize:!1,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},baseUri:"",log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};const h1=ER;function SR(){return(SR=cr(Yt().mark(function n(e){var t,r,s,o,a,l=arguments;return Yt().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{},r=l.length>2?l[2]:void 0,(t=d1(d1({},ER.options),t)).gltf=d1(d1({},ER.options.gltf),t.gltf),Bve(t),o=void 0===(s=t.byteOffset)?0:s,a={},c.next=9,Ove(a,e,o,t,r);case 9:return c.abrupt("return",c.sent);case 10:case"end":return c.stop()}},n)}))).apply(this,arguments)}function Bve(n){"fetchImages"in n&&(n.gltf.loadImages=n.fetchImages),"createImages"in n&&(n.gltf.loadImages=n.createImages),"fetchLinkedResources"in n&&(n.gltf.fetchBuffers=n.fetchLinkedResources),"decompress"in n&&(n.gltf.decompressMeshes=n.decompress),"decompress"in n.gltf&&(n.gltf.decompressMeshes=n.gltf.decompress),"postProcess"in n&&(n.gltf.postProcess=n.postProcess)}function CR(){return(CR=cr(Yt().mark(function n(e){var t;return Yt().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=[],e.scenes.forEach(function(s){s.traverse(function(o){Object.values(o.model.getUniforms()).forEach(function(a){!1===a.loaded&&t.push(a)})})}),i.next=4,Vve(function(){return t.some(function(s){return!s.loaded})});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}},n)}))).apply(this,arguments)}function Vve(n){return AR.apply(this,arguments)}function AR(){return(AR=cr(Yt().mark(function n(e){return Yt().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e()){r.next=5;break}return r.next=3,new Promise(function(i){return requestAnimationFrame(i)});case 3:r.next=0;break;case 5:case"end":return r.stop()}},n)}))).apply(this,arguments)}function N6(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hve(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?N6(Object(t),!0).forEach(function(r){Ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N6(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var k6=[255,255,255,255],Wve={scenegraph:{type:"object",value:null,async:!0},getScene:function(e){return e&&e.scenes?"object"===di(e.scene)?e.scene:e.scenes[e.scene||0]:e},getAnimator:function(e){return e&&e.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:k6},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[h1]},TR=function(n){Ai(t,n);var e=function(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var i,r=Tn(n);if(e){var s=Tn(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ss(this,i)}}(t);function t(){return _n(this,t),e.apply(this,arguments)}return Sn(t,[{key:"getShaders",value:function(){var i=[M4,N4];return"pbr"===this.props._lighting&&i.push(H4),{vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\n      geometry.normal = pbr_vNormal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:i}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:k6,transition:!0},instanceModelMatrix:V4})}},{key:"updateState",value:function(i){oo(Tn(t.prototype),"updateState",this).call(this,i);var s=i.props,o=i.oldProps;s.scenegraph!==o.scenegraph?this._updateScenegraph(s):s._animations!==o._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,s._animations)}},{key:"finalizeState",value:function(){oo(Tn(t.prototype),"finalizeState",this).call(this),this._deleteScenegraph()}},{key:"_updateScenegraph",value:function(i){var s=this,o=this.context.gl,a=null;if(i.scenegraph instanceof tm)a={scenes:[i.scenegraph]};else if(i.scenegraph&&!i.scenegraph.gltf){var l=i.scenegraph,u=function(n,e,t){const r=new hye(n,t);return{scenes:r.instantiate(e),animator:r.createAnimator()}}(o,l,this._getModelOptions());a=Object.assign({gltf:l},u),function(n){return CR.apply(this,arguments)}(u).then(function(){return s.setNeedsRedraw()})}else i.scenegraph&&(Ir.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),a=i.scenegraph);var c={layer:this,gl:o},h=i.getScene(a,c),p=i.getAnimator(a,c);h instanceof tm?(this._deleteScenegraph(),this._applyAllAttributes(h),this._applyAnimationsProp(h,p,i._animations),this.setState({scenegraph:h,animator:p})):null!==h&&Ir.warn("invalid scenegraph:",h)()}},{key:"_applyAllAttributes",value:function(i){var s=this;if(this.state.attributesAvailable){var o=this.getAttributeManager().getAttributes();i.traverse(function(a){s._setModelAttributes(a.model,o)})}}},{key:"_applyAnimationsProp",value:function(i,s,o){if(i&&s&&o){var a=s.getAnimations();Object.keys(o).sort().forEach(function(l){var u=o[l];if("*"===l)a.forEach(function(p){Object.assign(p,u)});else if(Number.isFinite(Number(l))){var c=Number(l);c>=0&&c<a.length?Object.assign(a[c],u):Ir.warn("animation ".concat(l," not found"))()}else{var h=a.find(function(p){return p.name===l});h?Object.assign(h,u):Ir.warn("animation ".concat(l," not found"))()}})}}},{key:"_deleteScenegraph",value:function(){var i=this.state.scenegraph;i instanceof tm&&i.delete()}},{key:"_getModelOptions",value:function(){var i=this.props._imageBasedLightingEnvironment,s=null;return i&&(s="function"==typeof i?i({gl:this.context.gl,layer:this}):i),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:s,modelOptions:Hve({isInstanced:!0,transpileToGLSL100:!mr(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(i){var s=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(function(o){s._setModelAttributes(o.model,i)})}},{key:"draw",value:function(i){var s=i.moduleParameters,o=void 0===s?null:s,a=i.parameters,l=void 0===a?{}:a;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(i.context.timeline.getTime()),this.setNeedsRedraw());var c=this.context.viewport,h=this.props,p=h.sizeScale,g=h.sizeMinPixels,m=h.sizeMaxPixels,b=h.opacity,w=h.coordinateSystem,H=this.getNumInstances();this.state.scenegraph.traverse(function(V,fe){var Me=fe.worldMatrix;V.model.setInstanceCount(H),V.updateModuleSettings(o),V.draw({parameters:l,uniforms:{sizeScale:p,opacity:b,sizeMinPixels:g,sizeMaxPixels:m,composeModelMatrix:U4(c,w),sceneModelMatrix:Me,u_Camera:V.model.getUniforms().project_uCameraPosition}})})}}}]),t}(Qg);TR.layerName="ScenegraphLayer",TR.defaultProps=Wve;const qve=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Yve=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Kve=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Xve=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Qve={POSITION:{size:3,value:new Float32Array(Yve)},NORMAL:{size:3,value:new Float32Array(Kve)},TEXCOORD_0:{size:2,value:new Float32Array(Xve)}};class Zve extends n1{constructor(e={}){const{id:t=Yu("cube-geometry")}=e;super(Qf(Ls({},e),{id:t,indices:{size:1,value:new Uint16Array(qve)},attributes:Ls(Ls({},Qve),e.attributes)}))}}class nc{constructor(e=[0,0,0,0,0,0,0,0,0]){this.elements=void 0,this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e=new le){const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t=new le){const r=this.elements,i=e.x,s=e.y,o=e.z;return t.x=r[0]*i+r[1]*s+r[2]*o,t.y=r[3]*i+r[4]*s+r[5]*o,t.z=r[6]*i+r[7]*s+r[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t=new nc){const r=this.elements,i=e.elements,s=t.elements,o=r[0],a=r[1],l=r[2],u=r[3],c=r[4],h=r[5],p=r[6],g=r[7],m=r[8],b=i[0],w=i[1],H=i[2],V=i[3],fe=i[4],Me=i[5],Oe=i[6],Ue=i[7],st=i[8];return s[0]=o*b+a*V+l*Oe,s[1]=o*w+a*fe+l*Ue,s[2]=o*H+a*Me+l*st,s[3]=u*b+c*V+h*Oe,s[4]=u*w+c*fe+h*Ue,s[5]=u*H+c*Me+h*st,s[6]=p*b+g*V+m*Oe,s[7]=p*w+g*fe+m*Ue,s[8]=p*H+g*Me+m*st,t}scale(e,t=new nc){const r=this.elements,i=t.elements;for(let s=0;3!==s;s++)i[3*s+0]=e.x*r[3*s+0],i[3*s+1]=e.y*r[3*s+1],i[3*s+2]=e.z*r[3*s+2];return t}solve(e,t=new le){const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let l=3;const u=l;let c,p;do{if(o=u-l,0===s[o+4*o])for(a=o+1;a<u;a++)if(0!==s[o+4*a]){c=4;do{p=4-c,s[p+4*o]+=s[p+4*a]}while(--c);break}if(0!==s[o+4*o])for(a=o+1;a<u;a++){const g=s[o+4*a]/s[o+4*o];c=4;do{p=4-c,s[p+4*a]=p<=o?0:s[p+4*a]-s[p+4*o]*g}while(--c)}}while(--l);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=["+t.toString()+"], b=["+e.toString()+"], A=["+this.toString()+"]";return t}e(e,t,r){if(void 0===r)return this.elements[t+3*e];this.elements[t+3*e]=r}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let r=0;r<9;r++)e+=this.elements[r]+",";return e}reverse(e=new nc){const i=Jve;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)i[s+6*o]=this.elements[s+3*o];i[3]=1,i[9]=0,i[15]=0,i[4]=0,i[10]=1,i[16]=0,i[5]=0,i[11]=0,i[17]=1;let a=3;const l=a;let u,h;do{if(s=l-a,0===i[s+6*s])for(o=s+1;o<l;o++)if(0!==i[s+6*o]){u=6;do{h=6-u,i[h+6*s]+=i[h+6*o]}while(--u);break}if(0!==i[s+6*s])for(o=s+1;o<l;o++){const p=i[s+6*o]/i[s+6*s];u=6;do{h=6-u,i[h+6*o]=h<=s?0:i[h+6*o]-i[h+6*s]*p}while(--u)}}while(--a);s=2;do{o=s-1;do{const p=i[s+6*o]/i[s+6*s];u=6;do{h=6-u,i[h+6*o]=i[h+6*o]-i[h+6*s]*p}while(--u)}while(o--)}while(--s);s=2;do{const p=1/i[s+6*s];u=6;do{h=6-u,i[h+6*s]=i[h+6*s]*p}while(--u)}while(s--);s=2;do{o=2;do{if(h=i[3+o+6*s],isNaN(h)||h===1/0)throw"Could not reverse! A=["+this.toString()+"]";e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,r=e.y,i=e.z,s=e.w,o=t+t,a=r+r,l=i+i,u=t*o,c=t*a,h=t*l,p=r*a,g=r*l,m=i*l,b=s*o,w=s*a,H=s*l,V=this.elements;return V[0]=1-(p+m),V[1]=c-H,V[2]=h+w,V[3]=c+H,V[4]=1-(u+m),V[5]=g-b,V[6]=h-w,V[7]=g+b,V[8]=1-(u+p),this}transpose(e=new nc){const t=this.elements,r=e.elements;let i;return r[0]=t[0],r[4]=t[4],r[8]=t[8],i=t[1],r[1]=t[3],r[3]=i,i=t[2],r[2]=t[6],r[6]=i,i=t[5],r[5]=t[7],r[7]=i,e}}const Jve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class le{constructor(e=0,t=0,r=0){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=r}cross(e,t=new le){const r=e.x,i=e.y,s=e.z,o=this.x,a=this.y,l=this.z;return t.x=a*s-l*i,t.y=l*r-o*s,t.z=o*i-a*r,t}set(e,t,r){return this.x=e,this.y=t,this.z=r,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new le(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new le(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new nc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,r=this.z,i=Math.sqrt(e*e+t*t+r*r);if(i>0){const s=1/i;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return i}unit(e=new le){const t=this.x,r=this.y,i=this.z;let s=Math.sqrt(t*t+r*r+i*i);return s>0?(s=1/s,e.x=t*s,e.y=r*s,e.z=i*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,r=this.z;return Math.sqrt(e*e+t*t+r*r)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-r)*(o-r)+(a-i)*(a-i))}distanceSquared(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-r)*(o-r)+(a-i)*(a-i)}scale(e,t=new le){const i=this.y,s=this.z;return t.x=e*this.x,t.y=e*i,t.z=e*s,t}vmul(e,t=new le){return t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,r=new le){return r.x=this.x+e*t.x,r.y=this.y+e*t.y,r.z=this.z+e*t.z,r}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e=new le){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const r=this.length();if(r>0){const i=ebe,s=1/r;i.set(this.x*s,this.y*s,this.z*s);const o=tbe;Math.abs(i.x)<.9?(o.set(1,0,0),i.cross(o,e)):(o.set(0,1,0),i.cross(o,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return this.x+","+this.y+","+this.z}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,r){const i=this.x,s=this.y,o=this.z;r.x=i+(e.x-i)*t,r.y=s+(e.y-s)*t,r.z=o+(e.z-o)*t}almostEquals(e,t=1e-6){return!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e=1e-6){return!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(F6),F6.almostEquals(e,t)}clone(){return new le(this.x,this.y,this.z)}}le.ZERO=void 0,le.UNIT_X=void 0,le.UNIT_Y=void 0,le.UNIT_Z=void 0,le.ZERO=new le(0,0,0),le.UNIT_X=new le(1,0,0),le.UNIT_Y=new le(0,1,0),le.UNIT_Z=new le(0,0,1);const ebe=new le,tbe=new le,F6=new le;class li{constructor(e={}){this.lowerBound=void 0,this.upperBound=void 0,this.lowerBound=new le,this.upperBound=new le,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,r,i){const s=this.lowerBound,o=this.upperBound,a=r;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let l=1;l<e.length;l++){let u=e[l];a&&(a.vmult(u,L6),u=L6),u.x>o.x&&(o.x=u.x),u.x<s.x&&(s.x=u.x),u.y>o.y&&(o.y=u.y),u.y<s.y&&(s.y=u.y),u.z>o.z&&(o.z=u.z),u.z<s.z&&(s.z=u.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),i&&(s.x-=i,s.y-=i,s.z-=i,o.x+=i,o.y+=i,o.z+=i),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new li).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,r=this.upperBound,i=e.lowerBound,s=e.upperBound;return(i.x<=r.x&&r.x<=s.x||t.x<=s.x&&s.x<=r.x)&&(i.y<=r.y&&r.y<=s.y||t.y<=s.y&&s.y<=r.y)&&(i.z<=r.z&&r.z<=s.z||t.z<=s.z&&s.z<=r.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,r=this.upperBound,i=e.lowerBound,s=e.upperBound;return t.x<=i.x&&r.x>=s.x&&t.y<=i.y&&r.y>=s.y&&t.z<=i.z&&r.z>=s.z}getCorners(e,t,r,i,s,o,a,l){const u=this.lowerBound,c=this.upperBound;e.copy(u),t.set(c.x,u.y,u.z),r.set(c.x,c.y,u.z),i.set(u.x,c.y,c.z),s.set(c.x,u.y,c.z),o.set(u.x,c.y,u.z),a.set(u.x,u.y,c.z),l.copy(c)}toLocalFrame(e,t){const r=B6;this.getCorners(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);for(let p=0;8!==p;p++){const g=r[p];e.pointToLocal(g,g)}return t.setFromPoints(r)}toWorldFrame(e,t){const r=B6;this.getCorners(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);for(let p=0;8!==p;p++){const g=r[p];e.pointToWorld(g,g)}return t.setFromPoints(r)}overlapsRay(e){const{direction:t,from:r}=e,i=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-r.x)*i,l=(this.upperBound.x-r.x)*i,u=(this.lowerBound.y-r.y)*s,c=(this.upperBound.y-r.y)*s,h=(this.lowerBound.z-r.z)*o,p=(this.upperBound.z-r.z)*o,g=Math.max(Math.max(Math.min(a,l),Math.min(u,c)),Math.min(h,p)),m=Math.min(Math.min(Math.max(a,l),Math.max(u,c)),Math.max(h,p));return!(m<0||g>m)}}const L6=new le,B6=[new le,new le,new le,new le,new le,new le,new le,new le];class ls{constructor(e=0,t=0,r=0,i=1){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0,this.x=e,this.y=t,this.z=r,this.w=i}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}toString(){return this.x+","+this.y+","+this.z+","+this.w}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const r=Math.sin(.5*t);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(.5*t),this}toAxisAngle(e=new le){this.normalize();const t=2*Math.acos(this.w),r=Math.sqrt(1-this.w*this.w);return r<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/r,e.y=this.y/r,e.z=this.z/r),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const r=rbe;e.tangents(r,ibe),this.setFromAxisAngle(r,Math.PI)}else{const r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Ii(e.length(),2)*Ii(t.length(),2))+e.dot(t),this.normalize()}return this}mult(e,t=new ls){const r=this.x,i=this.y,s=this.z,o=this.w,a=e.x,l=e.y,u=e.z,c=e.w;return t.x=r*c+o*a+i*u-s*l,t.y=i*c+o*l+s*a-r*u,t.z=s*c+o*u+r*l-i*a,t.w=o*c-r*a-i*l-s*u,t}inverse(e=new ls){const t=this.x,r=this.y,i=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+r*r+i*i+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e=new ls){return e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t=new le){const r=e.x,i=e.y,s=e.z,o=this.x,a=this.y,l=this.z,u=this.w,c=u*r+a*s-l*i,h=u*i+l*r-o*s,p=u*s+o*i-a*r,g=-o*r-a*i-l*s;return t.x=c*u+g*-o+h*-l-p*-a,t.y=h*u+g*-a+p*-o-c*-l,t.z=p*u+g*-l+c*-a-h*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t="YZX"){let r,i,s;const o=this.x,a=this.y,l=this.z,u=this.w;switch(t){case"YZX":const c=o*a+l*u;if(c>.499&&(r=2*Math.atan2(o,u),i=Math.PI/2,s=0),c<-.499&&(r=-2*Math.atan2(o,u),i=-Math.PI/2,s=0),void 0===r){const h=o*o,g=l*l;r=Math.atan2(2*a*u-2*o*l,1-a*a*2-2*g),i=Math.asin(2*c),s=Math.atan2(2*o*u-2*a*l,1-2*h-2*g)}break;default:throw new Error("Euler order "+t+" not supported yet.")}e.y=r,e.z=i,e.x=s}setFromEuler(e,t,r,i="XYZ"){const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(r/2),l=Math.sin(e/2),u=Math.sin(t/2),c=Math.sin(r/2);return"XYZ"===i?(this.x=l*o*a+s*u*c,this.y=s*u*a-l*o*c,this.z=s*o*c+l*u*a,this.w=s*o*a-l*u*c):"YXZ"===i?(this.x=l*o*a+s*u*c,this.y=s*u*a-l*o*c,this.z=s*o*c-l*u*a,this.w=s*o*a+l*u*c):"ZXY"===i?(this.x=l*o*a-s*u*c,this.y=s*u*a+l*o*c,this.z=s*o*c+l*u*a,this.w=s*o*a-l*u*c):"ZYX"===i?(this.x=l*o*a-s*u*c,this.y=s*u*a+l*o*c,this.z=s*o*c-l*u*a,this.w=s*o*a+l*u*c):"YZX"===i?(this.x=l*o*a+s*u*c,this.y=s*u*a+l*o*c,this.z=s*o*c-l*u*a,this.w=s*o*a-l*u*c):"XZY"===i&&(this.x=l*o*a-s*u*c,this.y=s*u*a-l*o*c,this.z=s*o*c+l*u*a,this.w=s*o*a+l*u*c),this}clone(){return new ls(this.x,this.y,this.z,this.w)}slerp(e,t,r=new ls){const i=this.x,s=this.y,o=this.z,a=this.w;let p,g,m,b,w,l=e.x,u=e.y,c=e.z,h=e.w;return g=i*l+s*u+o*c+a*h,g<0&&(g=-g,l=-l,u=-u,c=-c,h=-h),1-g>1e-6?(p=Math.acos(g),m=Math.sin(p),b=Math.sin((1-t)*p)/m,w=Math.sin(t*p)/m):(b=1-t,w=t),r.x=b*i+w*l,r.y=b*s+w*u,r.z=b*o+w*c,r.w=b*a+w*h,r}integrate(e,t,r,i=new ls){const s=e.x*r.x,o=e.y*r.y,a=e.z*r.z,l=this.x,u=this.y,c=this.z,h=this.w,p=.5*t;return i.x+=p*(s*h+o*c-a*u),i.y+=p*(o*h+a*l-s*c),i.z+=p*(a*h+s*u-o*l),i.w+=p*(-s*l-o*u-a*c),i}}const rbe=new le,ibe=new le,sbe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let hn=(()=>{class n{constructor(t={}){this.id=void 0,this.type=void 0,this.boundingSphereRadius=void 0,this.collisionResponse=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.material=void 0,this.body=void 0,this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type}volume(){throw"volume() not implemented for shape type "+this.type}calculateLocalInertia(t,r){throw"calculateLocalInertia() not implemented for shape type "+this.type}calculateWorldAABB(t,r,i,s){throw"calculateWorldAABB() not implemented for shape type "+this.type}}return n.idCounter=0,n.types=sbe,n})();class kr{constructor(e={}){this.position=void 0,this.quaternion=void 0,this.position=new le,this.quaternion=new ls,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return kr.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return kr.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,r,i=new le){return r.vsub(e,i),t.conjugate(V6),V6.vmult(i,i),i}static pointToWorldFrame(e,t,r,i=new le){return t.vmult(r,i),i.vadd(e,i),i}static vectorToWorldFrame(e,t,r=new le){return e.vmult(t,r),r}static vectorToLocalFrame(e,t,r,i=new le){return t.w*=-1,t.vmult(r,i),t.w*=-1,i}}const V6=new ls;class Of extends hn{constructor(e={}){const{vertices:t=[],faces:r=[],normals:i=[],axes:s,boundingSphereRadius:o}=e;super({type:hn.types.CONVEXPOLYHEDRON}),this.vertices=void 0,this.faces=void 0,this.faceNormals=void 0,this.worldVertices=void 0,this.worldVerticesNeedsUpdate=void 0,this.worldFaceNormals=void 0,this.worldFaceNormalsNeedsUpdate=void 0,this.uniqueAxes=void 0,this.uniqueEdges=void 0,this.vertices=t,this.faces=r,this.faceNormals=i,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,r=this.uniqueEdges;r.length=0;const i=new le;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let l=0;l!==a;l++){t[o[l]].vsub(t[o[(l+1)%a]],i),i.normalize();let c=!1;for(let h=0;h!==r.length;h++)if(r[h].almostEquals(i)||r[h].almostEquals(i)){c=!0;break}c||r.push(i.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let i=0;i<this.faces[e].length;i++)if(!this.vertices[this.faces[e][i]])throw new Error("Vertex "+this.faces[e][i]+" not found!");const t=this.faceNormals[e]||new le;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(".faceNormals["+e+"] = Vec3("+t.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(let i=0;i<this.faces[e].length;i++)console.warn(".vertices["+this.faces[e][i]+"] = Vec3("+this.vertices[this.faces[e][i]].toString()+")")}}}getFaceNormal(e,t){const r=this.faces[e];Of.computeNormal(this.vertices[r[0]],this.vertices[r[1]],this.vertices[r[2]],t)}static computeNormal(e,t,r,i){const s=new le,o=new le;t.vsub(e,o),r.vsub(t,s),s.cross(o,i),i.isZero()||i.normalize()}clipAgainstHull(e,t,r,i,s,o,a,l,u){const c=new le;let h=-1,p=-Number.MAX_VALUE;for(let m=0;m<r.faces.length;m++){c.copy(r.faceNormals[m]),s.vmult(c,c);const b=c.dot(o);b>p&&(p=b,h=m)}const g=[];for(let m=0;m<r.faces[h].length;m++){const b=r.vertices[r.faces[h][m]],w=new le;w.copy(b),s.vmult(w,w),i.vadd(w,w),g.push(w)}h>=0&&this.clipFaceAgainstHull(o,e,t,g,a,l,u)}findSeparatingAxis(e,t,r,i,s,o,a,l){const u=new le,c=new le,h=new le,p=new le,g=new le,m=new le;let b=Number.MAX_VALUE;const w=this;if(w.uniqueAxes)for(let H=0;H!==w.uniqueAxes.length;H++){r.vmult(w.uniqueAxes[H],u);const V=w.testSepAxis(u,e,t,r,i,s);if(!1===V)return!1;V<b&&(b=V,o.copy(u))}else{const H=a?a.length:w.faces.length;for(let V=0;V<H;V++){u.copy(w.faceNormals[a?a[V]:V]),r.vmult(u,u);const Me=w.testSepAxis(u,e,t,r,i,s);if(!1===Me)return!1;Me<b&&(b=Me,o.copy(u))}}if(e.uniqueAxes)for(let H=0;H!==e.uniqueAxes.length;H++){s.vmult(e.uniqueAxes[H],c);const V=w.testSepAxis(c,e,t,r,i,s);if(!1===V)return!1;V<b&&(b=V,o.copy(c))}else{const H=l?l.length:e.faces.length;for(let V=0;V<H;V++){c.copy(e.faceNormals[l?l[V]:V]),s.vmult(c,c);const Me=w.testSepAxis(c,e,t,r,i,s);if(!1===Me)return!1;Me<b&&(b=Me,o.copy(c))}}for(let H=0;H!==w.uniqueEdges.length;H++){r.vmult(w.uniqueEdges[H],p);for(let V=0;V!==e.uniqueEdges.length;V++)if(s.vmult(e.uniqueEdges[V],g),p.cross(g,m),!m.almostZero()){m.normalize();const fe=w.testSepAxis(m,e,t,r,i,s);if(!1===fe)return!1;fe<b&&(b=fe,o.copy(m))}}return i.vsub(t,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,r,i,s,o){Of.project(this,e,r,i,xR),Of.project(t,e,s,o,DR);const l=xR[0],u=xR[1],c=DR[0],h=DR[1];if(l<h||c<u)return!1;const p=l-h,g=c-u;return p<g?p:g}calculateLocalInertia(e,t){const r=new le,i=new le;this.computeLocalAABB(i,r);const s=r.x-i.x,o=r.y-i.y,a=r.z-i.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,r,i,s,o,a){const l=new le,u=new le,c=new le,h=new le,p=new le,g=new le,m=new le,b=new le,w=this,V=i,fe=[];let Me=-1,Oe=Number.MAX_VALUE;for(let mt=0;mt<w.faces.length;mt++){l.copy(w.faceNormals[mt]),r.vmult(l,l);const Bt=l.dot(e);Bt<Oe&&(Oe=Bt,Me=mt)}if(Me<0)return;const Ue=w.faces[Me];Ue.connectedFaces=[];for(let mt=0;mt<w.faces.length;mt++)for(let Bt=0;Bt<w.faces[mt].length;Bt++)-1!==Ue.indexOf(w.faces[mt][Bt])&&mt!==Me&&-1===Ue.connectedFaces.indexOf(mt)&&Ue.connectedFaces.push(mt);const st=Ue.length;for(let mt=0;mt<st;mt++){const Bt=w.vertices[Ue[mt]];Bt.vsub(w.vertices[Ue[(mt+1)%st]],u),c.copy(u),r.vmult(c,c),t.vadd(c,c),h.copy(this.faceNormals[Me]),r.vmult(h,h),t.vadd(h,h),c.cross(h,p),p.negate(p),g.copy(Bt),r.vmult(g,g),t.vadd(g,g);const ft=Ue.connectedFaces[mt];m.copy(this.faceNormals[ft]);const _t=this.getPlaneConstantOfFace(ft);b.copy(m),r.vmult(b,b);const kt=_t-b.dot(t);for(this.clipFaceAgainstPlane(V,fe,b,kt);V.length;)V.shift();for(;fe.length;)V.push(fe.shift())}m.copy(this.faceNormals[Me]);const vt=this.getPlaneConstantOfFace(Me);b.copy(m),r.vmult(b,b);const Ct=vt-b.dot(t);for(let mt=0;mt<V.length;mt++){let Bt=b.dot(V[mt])+Ct;if(Bt<=s&&(console.log("clamped: depth="+Bt+" to minDist="+s),Bt=s),Bt<=o){const Rt=V[mt];Bt<=1e-6&&a.push({point:Rt,normal:b,depth:Bt})}}}clipFaceAgainstPlane(e,t,r,i){let s,o;const a=e.length;if(a<2)return t;let l=e[e.length-1],u=e[0];s=r.dot(l)+i;for(let c=0;c<a;c++){if(u=e[c],o=r.dot(u)+i,s<0)if(o<0){const h=new le;h.copy(u),t.push(h)}else{const h=new le;l.lerp(u,s/(s-o),h),t.push(h)}else if(o<0){const h=new le;l.lerp(u,s/(s-o),h),t.push(h),t.push(u)}l=u,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new le);const r=this.vertices,i=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(r[s],i[s]),e.vadd(i[s],i[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const r=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let i=0;i<this.vertices.length;i++){const s=r[i];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new le);const r=this.faceNormals,i=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(r[s],i[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let r=0;r!==t.length;r++){const i=t[r].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,r,i){const s=this.vertices;let o,a,l,u,c,h,p=new le;for(let g=0;g<s.length;g++){p.copy(s[g]),t.vmult(p,p),e.vadd(p,p);const m=p;(void 0===o||m.x<o)&&(o=m.x),(void 0===u||m.x>u)&&(u=m.x),(void 0===a||m.y<a)&&(a=m.y),(void 0===c||m.y>c)&&(c=m.y),(void 0===l||m.z<l)&&(l=m.z),(void 0===h||m.z>h)&&(h=m.z)}r.set(o,a,l),i.set(u,c,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e=new le){const t=this.vertices;for(let r=0;r<t.length;r++)e.vadd(t[r],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const r=this.vertices.length,i=this.vertices;if(t){for(let s=0;s<r;s++){const o=i[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<r;s++){const o=i[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,r=this.faces,i=this.faceNormals,s=new le;this.getAveragePointLocal(s);for(let o=0;o<this.faces.length;o++){let a=i[o];const l=t[r[o][0]],u=new le;e.vsub(l,u);const c=a.dot(u),h=new le;s.vsub(l,h);const p=a.dot(h);if(c<0&&p>0||c>0&&p<0)return!1}return-1}static project(e,t,r,i,s){const o=e.vertices.length,a=obe;let l=0,u=0;const c=abe,h=e.vertices;c.setZero(),kr.vectorToLocalFrame(r,i,t,a),kr.pointToLocalFrame(r,i,c,c);const p=c.dot(a);u=l=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>l&&(l=m),m<u&&(u=m)}if(u-=p,l-=p,u>l){const g=u;u=l,l=g}s[0]=l,s[1]=u}}const xR=[],DR=[],obe=new le,abe=new le;class f1 extends hn{constructor(e){super({type:hn.types.BOX}),this.halfExtents=void 0,this.convexPolyhedronRepresentation=void 0,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,r=this.halfExtents.z,i=le,s=[new i(-e,-t,-r),new i(e,-t,-r),new i(e,t,-r),new i(-e,t,-r),new i(-e,-t,r),new i(e,-t,r),new i(e,t,r),new i(-e,t,r)],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],l=new Of({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,t=new le){return f1.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,r){const i=e;r.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),r.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),r.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}getSideNormals(e,t){const r=e,i=this.halfExtents;if(r[0].set(i.x,0,0),r[1].set(0,i.y,0),r[2].set(0,0,i.z),r[3].set(-i.x,0,0),r[4].set(0,-i.y,0),r[5].set(0,0,-i.z),void 0!==t)for(let s=0;s!==r.length;s++)t.vmult(r[s],r[s]);return r}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,r){const i=this.halfExtents,s=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]];for(let o=0;o<s.length;o++)uh.set(s[o][0],s[o][1],s[o][2]),t.vmult(uh,uh),e.vadd(uh,uh),r(uh.x,uh.y,uh.z)}calculateWorldAABB(e,t,r,i){const s=this.halfExtents;rc[0].set(s.x,s.y,s.z),rc[1].set(-s.x,s.y,s.z),rc[2].set(-s.x,-s.y,s.z),rc[3].set(-s.x,-s.y,-s.z),rc[4].set(s.x,-s.y,-s.z),rc[5].set(s.x,s.y,-s.z),rc[6].set(-s.x,s.y,-s.z),rc[7].set(s.x,-s.y,s.z);const o=rc[0];t.vmult(o,o),e.vadd(o,o),i.copy(o),r.copy(o);for(let a=1;a<8;a++){const l=rc[a];t.vmult(l,l),e.vadd(l,l);const u=l.x,c=l.y,h=l.z;u>i.x&&(i.x=u),c>i.y&&(i.y=c),h>i.z&&(i.z=h),u<r.x&&(r.x=u),c<r.y&&(r.y=c),h<r.z&&(r.z=h)}}}const uh=new le,rc=[new le,new le,new le,new le,new le,new le,new le,new le];class fn extends class{constructor(){this._listeners=void 0}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;return void 0===r[e]&&(r[e]=[]),r[e].includes(t)||r[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return!(void 0===r[e]||!r[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const r=this._listeners;if(void 0===r[e])return this;const i=r[e].indexOf(t);return-1!==i&&r[e].splice(i,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const r=this._listeners[e.type];if(void 0!==r){e.target=this;for(let i=0,s=r.length;i<s;i++)r[i].call(this,e)}return this}}{constructor(e={}){super(),this.id=void 0,this.index=void 0,this.world=void 0,this.preStep=void 0,this.postStep=void 0,this.vlambda=void 0,this.collisionFilterGroup=void 0,this.collisionFilterMask=void 0,this.collisionResponse=void 0,this.position=void 0,this.previousPosition=void 0,this.interpolatedPosition=void 0,this.initPosition=void 0,this.velocity=void 0,this.initVelocity=void 0,this.force=void 0,this.mass=void 0,this.invMass=void 0,this.material=void 0,this.linearDamping=void 0,this.type=void 0,this.allowSleep=void 0,this.sleepState=void 0,this.sleepSpeedLimit=void 0,this.sleepTimeLimit=void 0,this.timeLastSleepy=void 0,this.wakeUpAfterNarrowphase=void 0,this.torque=void 0,this.quaternion=void 0,this.initQuaternion=void 0,this.previousQuaternion=void 0,this.interpolatedQuaternion=void 0,this.angularVelocity=void 0,this.initAngularVelocity=void 0,this.shapes=void 0,this.shapeOffsets=void 0,this.shapeOrientations=void 0,this.inertia=void 0,this.invInertia=void 0,this.invInertiaWorld=void 0,this.invMassSolve=void 0,this.invInertiaSolve=void 0,this.invInertiaWorldSolve=void 0,this.fixedRotation=void 0,this.angularDamping=void 0,this.linearFactor=void 0,this.angularFactor=void 0,this.aabb=void 0,this.aabbNeedsUpdate=void 0,this.boundingRadius=void 0,this.wlambda=void 0,this.isTrigger=void 0,this.id=fn.idCounter++,this.index=-1,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new le,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new le,this.previousPosition=new le,this.interpolatedPosition=new le,this.initPosition=new le,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new le,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new le,this.force=new le;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?fn.STATIC:fn.DYNAMIC,typeof e.type==typeof fn.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=fn.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new le,this.quaternion=new ls,this.initQuaternion=new ls,this.previousQuaternion=new ls,this.interpolatedQuaternion=new ls,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new le,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new le,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new le,this.invInertia=new le,this.invInertiaWorld=new nc,this.invMassSolve=0,this.invInertiaSolve=new le,this.invInertiaWorldSolve=new nc,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new le(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new le(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new li,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new le,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=fn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===fn.SLEEPING&&this.dispatchEvent(fn.wakeupEvent)}sleep(){this.sleepState=fn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,r=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),i=Ii(this.sleepSpeedLimit,2);t===fn.AWAKE&&r<i?(this.sleepState=fn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(fn.sleepyEvent)):t===fn.SLEEPY&&r>i?this.wakeUp():t===fn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(fn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===fn.SLEEPING||this.type===fn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t=new le){return e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t=new le){return this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t=new le){return this.quaternion.vmult(e,t),t}addShape(e,t,r){const i=new le,s=new ls;return t&&i.copy(t),r&&s.copy(r),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,r=e.length;let i=0;for(let s=0;s!==r;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),l=o.boundingSphereRadius;a+l>i&&(i=a+l)}this.boundingRadius=i}updateAABB(){const e=this.shapes,t=this.shapeOffsets,r=this.shapeOrientations,i=e.length,s=lbe,o=ube,a=this.quaternion,l=this.aabb,u=cbe;for(let c=0;c!==i;c++){const h=e[c];a.vmult(t[c],s),s.vadd(this.position,s),a.mult(r[c],o),h.calculateWorldAABB(s,o,u.lowerBound,u.upperBound),0===c?l.copy(u):l.extend(u)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const r=dbe,i=hbe;r.setRotationFromQuaternion(this.quaternion),r.transpose(i),r.scale(t,r),r.mmult(i,this.invInertiaWorld)}}applyForce(e,t=new le){if(this.type!==fn.DYNAMIC)return;this.sleepState===fn.SLEEPING&&this.wakeUp();const r=fbe;t.cross(e,r),this.force.vadd(e,this.force),this.torque.vadd(r,this.torque)}applyLocalForce(e,t=new le){if(this.type!==fn.DYNAMIC)return;const r=pbe,i=gbe;this.vectorToWorldFrame(e,r),this.vectorToWorldFrame(t,i),this.applyForce(r,i)}applyTorque(e){this.type===fn.DYNAMIC&&(this.sleepState===fn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t=new le){if(this.type!==fn.DYNAMIC)return;this.sleepState===fn.SLEEPING&&this.wakeUp();const r=t,i=mbe;i.copy(e),i.scale(this.invMass,i),this.velocity.vadd(i,this.velocity);const s=_be;r.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t=new le){if(this.type!==fn.DYNAMIC)return;const r=ybe,i=vbe;this.vectorToWorldFrame(e,r),this.vectorToWorldFrame(t,i),this.applyImpulse(r,i)}updateMassProperties(){const e=bbe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,r=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),f1.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!r?1/t.x:0,t.y>0&&!r?1/t.y:0,t.z>0&&!r?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const r=new le;return e.vsub(this.position,r),this.angularVelocity.cross(r,t),this.velocity.vadd(t,t),t}integrate(e,t,r){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==fn.DYNAMIC&&this.type!==fn.KINEMATIC||this.sleepState===fn.SLEEPING)return;const i=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,l=this.torque,u=this.quaternion,h=this.invInertiaWorld,p=this.linearFactor,g=this.invMass*e;i.x+=a.x*g*p.x,i.y+=a.y*g*p.y,i.z+=a.z*g*p.z;const m=h.elements,b=this.angularFactor,w=l.x*b.x,H=l.y*b.y,V=l.z*b.z;s.x+=e*(m[0]*w+m[1]*H+m[2]*V),s.y+=e*(m[3]*w+m[4]*H+m[5]*V),s.z+=e*(m[6]*w+m[7]*H+m[8]*V),o.x+=i.x*e,o.y+=i.y*e,o.z+=i.z*e,u.integrate(this.angularVelocity,e,this.angularFactor,u),t&&(r?u.normalizeFast():u.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}fn.idCounter=0,fn.COLLIDE_EVENT_NAME="collide",fn.DYNAMIC=1,fn.STATIC=2,fn.KINEMATIC=4,fn.AWAKE=0,fn.SLEEPY=1,fn.SLEEPING=2,fn.wakeupEvent={type:"wakeup"},fn.sleepyEvent={type:"sleepy"},fn.sleepEvent={type:"sleep"};const lbe=new le,ube=new ls,cbe=new li,dbe=new nc,hbe=new nc,fbe=new le,pbe=new le,gbe=new le,mbe=new le,_be=new le,ybe=new le,vbe=new le,bbe=new le;new le,new le;class p1{constructor(){this.rayFromWorld=void 0,this.rayToWorld=void 0,this.hitNormalWorld=void 0,this.hitPointWorld=void 0,this.hasHit=void 0,this.shape=void 0,this.body=void 0,this.hitFaceIndex=void 0,this.distance=void 0,this.shouldStop=void 0,this.rayFromWorld=new le,this.rayToWorld=new le,this.hitNormalWorld=new le,this.hitPointWorld=new le,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,r,i,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(r),this.hitPointWorld.copy(i),this.shape=s,this.body=o,this.distance=a}}let U6,z6,H6,G6,$6,W6,q6;U6=hn.types.SPHERE,z6=hn.types.PLANE,H6=hn.types.BOX,G6=hn.types.CYLINDER,$6=hn.types.CONVEXPOLYHEDRON,W6=hn.types.HEIGHTFIELD,q6=hn.types.TRIMESH;class _s{get[U6](){return this._intersectSphere}get[z6](){return this._intersectPlane}get[H6](){return this._intersectBox}get[G6](){return this._intersectConvex}get[$6](){return this._intersectConvex}get[W6](){return this._intersectHeightfield}get[q6](){return this._intersectTrimesh}constructor(e=new le,t=new le){this.from=void 0,this.to=void 0,this.direction=void 0,this.precision=void 0,this.checkCollisionResponse=void 0,this.skipBackfaces=void 0,this.collisionFilterMask=void 0,this.collisionFilterGroup=void 0,this.mode=void 0,this.result=void 0,this.hasHit=void 0,this.callback=void 0,this.from=e.clone(),this.to=t.clone(),this.direction=new le,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=_s.ANY,this.result=new p1,this.hasHit=!1,this.callback=r=>{}}intersectWorld(e,t){return this.mode=t.mode||_s.ANY,this.result=t.result||new p1,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Y6),RR.length=0,e.broadphase.aabbQuery(e,Y6,RR),this.intersectBodies(RR),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const r=this.checkCollisionResponse;if(r&&!e.collisionResponse||0==(this.collisionFilterGroup&e.collisionFilterMask)||0==(e.collisionFilterGroup&this.collisionFilterMask))return;const i=xbe,s=Dbe;for(let o=0,a=e.shapes.length;o<a;o++){const l=e.shapes[o];if((!r||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],i),i.vadd(e.position,i),this.intersectShape(l,s,i,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let r=0,i=e.length;!this.result.shouldStop&&r<i;r++)this.intersectBody(e[r])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,r,i){if(function(n,e,t){t.vsub(n,Rf);const r=Rf.dot(e);return e.scale(r,m1),m1.vadd(n,m1),t.distanceTo(m1)}(this.from,this.direction,r)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,r,i,e)}_intersectBox(e,t,r,i,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,r,i,s)}_intersectPlane(e,t,r,i,s){const o=this.from,a=this.to,l=this.direction,u=new le(0,0,1);t.vmult(u,u);const c=new le;o.vsub(r,c);const h=c.dot(u);if(a.vsub(r,c),h*c.dot(u)>0||o.distanceTo(a)<h)return;const g=u.dot(l);if(Math.abs(g)<this.precision)return;const m=new le,b=new le,w=new le;o.vsub(r,m);const H=-u.dot(m)/g;l.scale(H,b),o.vadd(b,w),this.reportIntersection(u,w,s,i,-1)}getAABB(e){const{lowerBound:t,upperBound:r}=e,i=this.to,s=this.from;t.x=Math.min(i.x,s.x),t.y=Math.min(i.y,s.y),t.z=Math.min(i.z,s.z),r.x=Math.max(i.x,s.x),r.y=Math.max(i.y,s.y),r.z=Math.max(i.z,s.z)}_intersectHeightfield(e,t,r,i,s){const o=Mbe;o.from.copy(this.from),o.to.copy(this.to),kr.pointToLocalFrame(r,t,o.from,o.from),kr.pointToLocalFrame(r,t,o.to,o.to),o.updateDirection();const a=Ibe;let l,u,c,h;l=u=0,c=h=e.data.length-1;const p=new li;o.getAABB(p),e.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,a,!0),l=Math.max(l,a[0]),u=Math.max(u,a[1]),e.getIndexOfPosition(p.upperBound.x,p.upperBound.y,a,!0),c=Math.min(c,a[0]+1),h=Math.min(h,a[1]+1);for(let g=l;g<c;g++)for(let m=u;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,p),p.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),kr.pointToWorldFrame(r,t,e.pillarOffset,g1),this._intersectConvex(e.pillarConvex,t,g1,i,s,K6),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),kr.pointToWorldFrame(r,t,e.pillarOffset,g1),this._intersectConvex(e.pillarConvex,t,g1,i,s,K6)}}}_intersectSphere(e,t,r,i,s){const o=this.from,a=this.to,l=e.radius,u=Ii(a.x-o.x,2)+Ii(a.y-o.y,2)+Ii(a.z-o.z,2),c=2*((a.x-o.x)*(o.x-r.x)+(a.y-o.y)*(o.y-r.y)+(a.z-o.z)*(o.z-r.z)),h=Ii(o.x-r.x,2)+Ii(o.y-r.y,2)+Ii(o.z-r.z,2)-Ii(l,2),p=Ii(c,2)-4*u*h,g=Obe,m=Rbe;if(!(p<0))if(0===p)o.lerp(a,p,g),g.vsub(r,m),m.normalize(),this.reportIntersection(m,g,s,i,-1);else{const b=(-c-Math.sqrt(p))/(2*u),w=(-c+Math.sqrt(p))/(2*u);if(b>=0&&b<=1&&(o.lerp(a,b,g),g.vsub(r,m),m.normalize(),this.reportIntersection(m,g,s,i,-1)),this.result.shouldStop)return;w>=0&&w<=1&&(o.lerp(a,w,g),g.vsub(r,m),m.normalize(),this.reportIntersection(m,g,s,i,-1))}}_intersectConvex(e,t,r,i,s,o){const a=Pbe,l=X6,u=o&&o.faceList||null,c=e.faces,h=e.vertices,p=e.faceNormals,g=this.direction,m=this.from,w=m.distanceTo(this.to),H=u?u.length:c.length,V=this.result;for(let fe=0;!V.shouldStop&&fe<H;fe++){const Me=u?u[fe]:fe,Oe=c[Me],Ue=p[Me],st=t,vt=r;l.copy(h[Oe[0]]),st.vmult(l,l),l.vadd(vt,l),l.vsub(m,l),st.vmult(Ue,a);const Ct=g.dot(a);if(Math.abs(Ct)<this.precision)continue;const mt=a.dot(l)/Ct;if(!(mt<0)){g.scale(mt,ma),ma.vadd(m,ma),cu.copy(h[Oe[0]]),st.vmult(cu,cu),vt.vadd(cu,cu);for(let Bt=1;!V.shouldStop&&Bt<Oe.length-1;Bt++){ic.copy(h[Oe[Bt]]),sc.copy(h[Oe[Bt+1]]),st.vmult(ic,ic),st.vmult(sc,sc),vt.vadd(ic,ic),vt.vadd(sc,sc);const Rt=ma.distanceTo(m);!_s.pointInTriangle(ma,cu,ic,sc)&&!_s.pointInTriangle(ma,ic,cu,sc)||Rt>w||this.reportIntersection(a,ma,s,i,Me)}}}}_intersectTrimesh(e,t,r,i,s,o){const a=Nbe,l=Vbe,u=Ube,c=X6,h=kbe,p=Fbe,g=Lbe,m=jbe,b=Bbe,w=e.indices,H=this.from,V=this.to,fe=this.direction;u.position.copy(r),u.quaternion.copy(t),kr.vectorToLocalFrame(r,t,fe,h),kr.pointToLocalFrame(r,t,H,p),kr.pointToLocalFrame(r,t,V,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,p.x*=e.scale.x,p.y*=e.scale.y,p.z*=e.scale.z,g.vsub(p,h),h.normalize();const Me=p.distanceSquared(g);e.tree.rayQuery(this,u,l);for(let Oe=0,Ue=l.length;!this.result.shouldStop&&Oe!==Ue;Oe++){const st=l[Oe];e.getNormal(st,a),e.getVertex(w[3*st],cu),cu.vsub(p,c);const vt=h.dot(a),Ct=a.dot(c)/vt;if(Ct<0)continue;h.scale(Ct,ma),ma.vadd(p,ma),e.getVertex(w[3*st+1],ic),e.getVertex(w[3*st+2],sc);const mt=ma.distanceSquared(p);!_s.pointInTriangle(ma,ic,cu,sc)&&!_s.pointInTriangle(ma,cu,ic,sc)||mt>Me||(kr.vectorToWorldFrame(t,a,b),kr.pointToWorldFrame(r,t,ma,m),this.reportIntersection(b,m,s,i,st))}l.length=0}reportIntersection(e,t,r,i,s){const o=this.from,a=this.to,l=o.distanceTo(t),u=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(u.hitFaceIndex=void 0!==s?s:-1,this.mode){case _s.ALL:this.hasHit=!0,u.set(o,a,e,t,r,i,l),u.hasHit=!0,this.callback(u);break;case _s.CLOSEST:(l<u.distance||!u.hasHit)&&(this.hasHit=!0,u.hasHit=!0,u.set(o,a,e,t,r,i,l));break;case _s.ANY:this.hasHit=!0,u.hasHit=!0,u.set(o,a,e,t,r,i,l),u.shouldStop=!0}}static pointInTriangle(e,t,r,i){i.vsub(t,Rf),r.vsub(t,Wv),e.vsub(t,PR);const s=Rf.dot(Rf),o=Rf.dot(Wv),a=Rf.dot(PR),l=Wv.dot(Wv),u=Wv.dot(PR);let c,h;return(c=l*a-o*u)>=0&&(h=s*u-o*a)>=0&&c+h<s*l-o*o}}_s.CLOSEST=1,_s.ANY=2,_s.ALL=4;const Y6=new li,RR=[],Wv=new le,PR=new le,xbe=new le,Dbe=new ls,ma=new le,cu=new le,ic=new le,sc=new le,K6={faceList:[0]},g1=new le,Mbe=new _s,Ibe=[],Obe=new le,Rbe=new le,Pbe=new le,X6=new le,Nbe=new le,kbe=new le,Fbe=new le,Lbe=new le,Bbe=new le,jbe=new le;new li;const Vbe=[],Ube=new kr,Rf=new le,m1=new le;let dH,hH,fH,pH,gH,mH,_H,yH,vH,bH,wH,EH,SH,CH,AH,TH,xH,DH,MH,IH,OH,RH,PH,NH,kH;new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new _s,new le,new le,new le(1,0,0),new le(0,1,0),new le(0,0,1),new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new li,new le,new li,new le,new le,new le,new le,new le,new le,new le,new li,new le,new kr,new li;const Di={sphereSphere:hn.types.SPHERE,spherePlane:hn.types.SPHERE|hn.types.PLANE,boxBox:hn.types.BOX|hn.types.BOX,sphereBox:hn.types.SPHERE|hn.types.BOX,planeBox:hn.types.PLANE|hn.types.BOX,convexConvex:hn.types.CONVEXPOLYHEDRON,sphereConvex:hn.types.SPHERE|hn.types.CONVEXPOLYHEDRON,planeConvex:hn.types.PLANE|hn.types.CONVEXPOLYHEDRON,boxConvex:hn.types.BOX|hn.types.CONVEXPOLYHEDRON,sphereHeightfield:hn.types.SPHERE|hn.types.HEIGHTFIELD,boxHeightfield:hn.types.BOX|hn.types.HEIGHTFIELD,convexHeightfield:hn.types.CONVEXPOLYHEDRON|hn.types.HEIGHTFIELD,sphereParticle:hn.types.PARTICLE|hn.types.SPHERE,planeParticle:hn.types.PLANE|hn.types.PARTICLE,boxParticle:hn.types.BOX|hn.types.PARTICLE,convexParticle:hn.types.PARTICLE|hn.types.CONVEXPOLYHEDRON,cylinderCylinder:hn.types.CYLINDER,sphereCylinder:hn.types.SPHERE|hn.types.CYLINDER,planeCylinder:hn.types.PLANE|hn.types.CYLINDER,boxCylinder:hn.types.BOX|hn.types.CYLINDER,convexCylinder:hn.types.CONVEXPOLYHEDRON|hn.types.CYLINDER,heightfieldCylinder:hn.types.HEIGHTFIELD|hn.types.CYLINDER,particleCylinder:hn.types.PARTICLE|hn.types.CYLINDER,sphereTrimesh:hn.types.SPHERE|hn.types.TRIMESH,planeTrimesh:hn.types.PLANE|hn.types.TRIMESH};dH=Di.sphereSphere,hH=Di.spherePlane,fH=Di.boxBox,pH=Di.sphereBox,gH=Di.planeBox,mH=Di.convexConvex,_H=Di.sphereConvex,yH=Di.planeConvex,vH=Di.boxConvex,bH=Di.sphereHeightfield,wH=Di.boxHeightfield,EH=Di.convexHeightfield,SH=Di.sphereParticle,CH=Di.planeParticle,AH=Di.boxParticle,TH=Di.convexParticle,xH=Di.cylinderCylinder,DH=Di.sphereCylinder,MH=Di.planeCylinder,IH=Di.boxCylinder,OH=Di.convexCylinder,RH=Di.heightfieldCylinder,PH=Di.particleCylinder,NH=Di.sphereTrimesh,kH=Di.planeTrimesh,new le,new le,new le,new le,new le,new ls,new ls,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new li,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new le,new ls,new le,new le,new le,new le,new le,new le,new le,new le,new li,new _s;const Qs=globalThis.performance||{};if(!Qs.now){let n=Date.now();Qs.timing&&Qs.timing.navigationStart&&(n=Qs.timing.navigationStart),Qs.now=()=>Date.now()-n}var Ff=Ke(4517);function lm(n,e,t){e||(e=new Xn(Xn.IDENTITY));const r=new Xn(Xn.IDENTITY);if(n.matrix)r.copy(n.matrix);else{if(r.identity(),n.translation&&r.translate(n.translation),n.rotation){const s=new Xn(Xn.IDENTITY).fromQuaternion(n.rotation);r.multiplyRight(s)}n.scale&&r.scale(n.scale)}const i=new Xn(e).multiplyRight(r);if(!1===t(n,i,e))return!1;for(const s of n.nodes||n.children||[])if(!1===lm(s,i,t))return!1;return!0}function UH(){zz([c6,h1])}function zH(n,e){const t=e.nodes.find(r=>r.name===n);if(t){let r=!1;for(const i of e.scenes)r||lm(i,new Xn(Xn.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,r=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function FR(n,e){return Ci(this,void 0,void 0,function*(){const t=n.scenegraph;let r;r=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const i=yield BS(r,h1,{DracoLoader:cR,gltf:{decompressMeshes:!0,postProcess:!0}});return zH(n.scenegraphNode,i)})}function zEe(n,e){return Ci(this,void 0,void 0,function*(){return zH(n,yield e)})}function LR(n,e,t){if(e&&0!==e.length)return new JO(Object.assign({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:Or.CARTESIAN,data:e,mesh:new Zve,wireframe:!1,getTransformMatrix:r=>r.transformMatrix,getColor:r=>r.color||[255,255,255,229.5]},t))}let GEe=(()=>{class n extends Jz{initializeState(){const{data:t}=this.props;this.setState({data:null!=t?t:[],zoomOpacity:.8,doCollisions:!1}),UH()}renderLayers(){const t=this.state,r=t.data.filter(l=>!l.scenegraph&&!l.wireframe&&l.unpickable),i=t.data.filter(l=>!l.scenegraph&&!l.wireframe&&!l.unpickable),s=t.data.filter(l=>!l.scenegraph&&l.wireframe),o=t.data.filter(l=>!!l.scenegraph);t.doCollisions&&function(n){Ci(this,void 0,void 0,function*(){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&!o.wireframe).map(o=>{const a=new Xn(o.transformMatrix),l=a.transformAsPoint([-1,-1,-1],[]),u=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new li({lowerBound:new le(...l.map((c,h)=>Math.min(c,u[h]))),upperBound:new le(...u.map((c,h)=>Math.max(c,l[h])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield jS(o.scenegraph,h1,{DracoLoader:cR,decompress:!0,postProcess:!0});for(const l of a.scenes)lm(l,new Xn(o.transformMatrix),(u,c)=>{if(u.mesh&&u.mesh.primitives&&u.mesh.primitives.length>0)for(const h of u.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const p=c.transformAsPoint(h.attributes.POSITION.min,[]),g=c.transformAsPoint(h.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:u.name,entityId:o.entityId,bbox:new li({lowerBound:new le(...p.map((m,b)=>Math.min(m,g[b]))),upperBound:new le(...g.map((m,b)=>Math.max(m,p[b])))}),gltf:a})}return!0})}const r=[],i=[];for(const o of e){const a=[];for(const l of t)o.bbox.overlaps(l.bbox)&&a.push({"@id":l["@id"],name:l.name});a.length>0?r.push({"@id":o.entityId,name:o.name,hits:a}):i.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:r,sad:i,maxHits:Math.max(...r.map(o=>o.hits.length))});const s=[];for(const o of r){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),r})}(t.data);const a={};for(const l of o)l.scenegraph&&l.scenegraphNode&&!Object.prototype.hasOwnProperty.call(a,l.scenegraph)&&(a[l.scenegraph]=FR({scenegraph:l.scenegraph},n.gltfCache));return[LR("cubes",r,{wireframe:!1,pickable:!1}),LR("pickableCubes",i,{wireframe:!1,pickable:!0}),LR("wireframes",s,{wireframe:!0,pickable:!1}),...o.map(l=>{var u;return new TR({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?t.zoomOpacity:void 0!==l.opacity?l.opacity:1,pickable:!l.unpickable,coordinateSystem:Or.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?zEe(l.scenegraphNode,a[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:null!==(u=l.color)&&void 0!==u?u:[0,255,0,127.5],parameters:{depthMask:!l.zoomBasedOpacity&&(void 0===l.opacity||1===l.opacity)}})})].filter(l=>!!l)}getPickingInfo(t){return t.info}}return n.layerName="BodyUILayer",n.gltfCache={},n})();function HH(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),HH(t,e);return e}let WEe=(()=>{class n{constructor(t){var r,i,s,o,a;this.deckProps=t,this.bodyUILayer=new GEe({}),this.nodeClickSubject=new G,this.nodeHoverStartSubject=new G,this.nodeHoverStopSubject=new G,this.sceneRotationSubject=new Pi([0,0]),this.nodeDragStartSubject=new G,this.nodeDragSubject=new G,this.nodeDragEndSubject=new G,this.nodeClick$=this.nodeClickSubject.pipe(bs()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(bs()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(bs()),this.sceneRotation$=this.sceneRotationSubject.pipe(bs()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(bs()),this.nodeDrag$=this.nodeDragSubject.pipe(bs()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(bs());const l=Object.assign(Object.assign({},t),{views:["orthographic"===t.camera?new m8({flipY:!1,near:-1e3}):new b8({})],controller:void 0===t.interactive||t.interactive,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:u=>{var c;return null!==(c=this.cursor)&&void 0!==c?c:u.isDragging?"grabbing":"grab"}});t.legacyLighting&&(l.effects=[new FO({ambientLight:new w8({color:[255,255,255],intensity:10})})]),this.deck=new t1(l),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:null!==(r=t.minRotationX)&&void 0!==r?r:-15,maxRotationX:null!==(i=t.maxRotationX)&&void 0!==i?i:15,target:null!==(s=t.target)&&void 0!==s?s:[.5,.5,0],rotationX:0,rotationOrbit:null!==(o=t.rotation)&&void 0!==o?o:0,zoom:null!==(a=t.zoom)&&void 0!==a?a:9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return Ci(this,void 0,void 0,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if((null==t?void 0:t.length)>0){let r=this.bodyUILayer.state.zoomOpacity,i=!1;for(const s of t)s.zoomToOnLoad&&(this.zoomTo(s),i=!0);r=i?.05:r,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,r):this.bodyUILayer.setState({data:t,zoomOpacity:r})}}debugSceneNodeProcessing(t,r){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",s=new Xn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function(n,e,t){return Ci(this,void 0,void 0,function*(){UH();const r=yield FR({scenegraph:n,scenegraphNode:"VHF_Kidney_L_Low1"}),i={},s=[];for(const o of r.scenes)lm(o,e=new Xn(e||Xn.IDENTITY),(a,l)=>{const u={"@id":a.name||a.id,"@type":"ProcessedNode",transformMatrix:new Xn(l),wireframe:!0,node:a};if(s.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:u["@id"],transformMatrix:new Xn(e||Xn.IDENTITY),tooltip:a.name||a.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:a}),a.mesh&&a.mesh.primitives&&a.mesh.primitives.length>0)for(const c of a.mesh.primitives)if(c.attributes.POSITION&&c.attributes.POSITION.min){const h=l.transformAsPoint(c.attributes.POSITION.min,[]),p=l.transformAsPoint(c.attributes.POSITION.max,[]);u.bbox=new li({lowerBound:new le(...h.map((g,m)=>Math.min(g,p[m]))),upperBound:new le(...p.map((g,m)=>Math.max(g,h[m])))})}return i[u["@id"]]=u,!0});for(const o of Object.values(i).filter(a=>!a.bbox)){for(const a of HH(o.node).map(l=>i[l]).filter(l=>l.bbox))o.bbox?o.bbox.extend(a.bbox):o.bbox=a.bbox.clone();o.bbox||delete i[o["@id"]]}for(const o of Object.values(i)){const a=o.bbox.lowerBound,c=(o.size=o.bbox.upperBound.clone().vsub(a)).clone().vmul(new le(.5,.5,.5)),h=o.center=a.clone().vadd(c);o.transformMatrix=(new Xn).translate(h.toArray()).scale(c.toArray())}for(const o of s)i[o["@id"]]=o;return i})})(i,s).then(o=>{console.log("results",o),console.log("data",t),(t=t.concat(Object.values(o))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:s,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:r})})}zoomTo(t){const r=new Xn(t.transformMatrix);this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:r.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Object.assign(Object.assign({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_onHover(t){const{lastHovered:r}=this;this.cursor=t.picked?"pointer":void 0,t.picked&&t.object&&t.object["@id"]?r!==t.object&&(r&&this.nodeHoverStopSubject.next(r),this.lastHovered=t.object,this.nodeHoverStartSubject.next(t.object)):r&&(this.nodeHoverStopSubject.next(r),this.lastHovered=void 0)}_onClick(t,r){var i,s;t.picked&&t.object&&t.object["@id"]&&this.nodeClickSubject.next({node:t.object,ctrlClick:null!==(s=null===(i=null==r?void 0:r.srcEvent)||void 0===i?void 0:i.ctrlKey)&&void 0!==s?s:void 0})}_onViewStateChange(t){var r;if(null===(r=t.interactionState)||void 0===r?void 0:r.isZooming){const i=this.bodyUILayer.state,s=Math.min(Math.max(1-(t.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==s&&this.bodyUILayer.setState({data:i.data,zoomOpacity:s})}this.deck.setProps({viewState:Object.assign({},t.viewState)}),this.sceneRotationSubject.next([t.viewState.rotationOrbit,t.viewState.rotationX])}_onDragStart(t,r){this._dragEvent(t,r,this.nodeDragStartSubject)}_onDrag(t,r){this._dragEvent(t,r,this.nodeDragSubject)}_onDragEnd(t,r){this._dragEvent(t,r,this.nodeDragEndSubject)}_dragEvent(t,r,i){var s;(null===(s=null==t?void 0:t.object)||void 0===s?void 0:s["@id"])&&i.next({node:t.object,info:t,e:r})}}return Na([Ff.ZP],n.prototype,"_onHover",null),Na([Ff.ZP],n.prototype,"_onClick",null),Na([Ff.ZP],n.prototype,"_onViewStateChange",null),Na([Ff.ZP],n.prototype,"_onDragStart",null),Na([Ff.ZP],n.prototype,"_onDrag",null),Na([Ff.ZP],n.prototype,"_onDragEnd",null),n})();function qEe(n,e){return n===e}function YEe(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const r=e.length;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function GH(n,e=qEe){let t=null,r=null;function i(){return YEe(e,t,arguments)||(r=n.apply(null,arguments)),t=arguments,r}return i.reset=function(){t=null,r=null},i}const XEe=GH(function(){const n=ID();if(!n)return!1;const e=n.injector.get(D2,null);return!!e&&e.some(r=>(r&&r.providers||[]).some(s=>s&&s.provide&&"MockNgModuleResolver"===s.provide.name||!1))});let BR=(()=>{class n{constructor(){this.bootstrap$=new Cg(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const jR=new Gt("INITIAL_STATE_TOKEN");let QEe=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const $H=new Gt("Internals.StateContextFactory"),WH=new Gt("Internals.StateFactory");function Zv(...n){if(1===n.length){const e=n[0];if(F(e))return S1(e,null);if(se(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return S1(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return S1(n=1===n.length&&F(n[0])?n[0]:n,null).pipe(ue(t=>e(...t)))}return S1(n,null)}function S1(n,e){return new N(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const l=ke(n[a]);let u=!1;t.add(l.subscribe({next:c=>{u||(u=!0,o++),i[a]=c},error:c=>t.error(c),complete:()=>{s++,(s===r||!u)&&(o===r&&t.next(e?e.reduce((c,h,p)=>(c[h]=i[p],c),{}):i),t.complete())}}))}})}function qH(n,e){return e?t=>t.pipe(qH((r,i)=>ke(n(r,i)).pipe(ue((s,o)=>e(r,s,i,o))))):t=>t.lift(new ZEe(n))}class ZEe{constructor(e){this.project=e}call(e,t){return t.subscribe(new JEe(e,this.project))}}class JEe extends ye{constructor(e,t){super(e),this.project=t,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(e){this.hasSubscription||this.tryNext(e)}tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this.hasSubscription=!0,this._innerSub(t)}_innerSub(e){const t=new At(this),r=this.destination;r.add(t);const i=R(e,t);i!==t&&r.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}function us(n){return e=>e.lift(new eSe(n))}class eSe{constructor(e){this.notifier=e}call(e,t){const r=new tSe(e),i=R(this.notifier,new At(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class tSe extends ye{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function um(n,e){return t=>t.lift(new nSe(n,e))}class nSe{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new rSe(e,this.compare,this.keySelector))}}class rSe extends y{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}const Va={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,e,t)=>`State name '${n}' from ${e} already exists in ${t}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let YH=(()=>{class n{constructor(t,r){this._ngZone=t,this._platformId=r,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return function(n){return"server"===n}(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return vn.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return vn.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof vn||console.warn(Va.ZONE_WARNING())}}return n.\u0275fac=function(t){return new(t||n)(Ne(vn),Ne(ju))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const KH=new Gt("ROOT_STATE_TOKEN"),XH=new Gt("FEATURE_STATE_TOKEN"),iSe=new Gt("NGXS_PLUGINS"),QH=new Gt("NG_TEST_MODE"),ZH=new Gt("NG_DEV_MODE"),td="NGXS_META";let Lf=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=YH}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class sSe{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}}const e5=new Gt("NGXS_EXECUTION_STRATEGY");function cm(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const t5=(n,e,t)=>{n=Object.assign({},n);const r=e.split("."),i=r.length-1;return r.reduce((s,o,a)=>(s[o]=a===i?t:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),n),n},C1=(n,e)=>e.split(".").reduce((t,r)=>t&&t[r],n),UR=n=>n&&"object"==typeof n&&!Array.isArray(n),zR=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(UR(n)&&UR(t))for(const r in t)UR(t[r])?(n[r]||Object.assign(n,{[r]:{}}),zR(n[r],t[r])):Object.assign(n,{[r]:t[r]});return zR(n,...e)};function Jv(n){return n[td]}function r5(n,e){const t=C1(e.currentAppState,n.path),r=C1(e.newAppState,n.path);return new sSe(t,r,!n.isInitialised)}function fSe(...n){return function(n,e,t=mSe){const r=function(n){return n.reduce((e,t)=>(e[cm(t)]=!0,e),{})}(n),i=e&&function(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function(n,e){return Zr(t=>{const r=cm(t.action);return n[r]&&(!e||e[t.status])})}(r,i),t())}}(n,["DISPATCHED"])}function mSe(){return ue(n=>n.action)}function A1(n){return e=>new N(t=>e.subscribe({next(r){n.leave(()=>t.next(r))},error(r){n.leave(()=>t.error(r))},complete(){n.leave(()=>t.complete())}}))}let T1=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(Ne(e5))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class vSe extends G{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let x1=(()=>{class n extends vSe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xr(n)))(r||n)}}(),n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),bSe=(()=>{class n extends N{constructor(t,r){super(i=>{const s=t.pipe(A1(r)).subscribe({next:o=>i.next(o),error:o=>i.error(o),complete:()=>i.complete()});i.add(s)})}}return n.\u0275fac=function(t){return new(t||n)(Ne(x1),Ne(T1))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const i5=n=>(...e)=>n.shift()(...e,(...r)=>i5(n)(...r));let D1=(()=>{class n extends Pi{constructor(){super({})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),WR=(()=>{class n{constructor(t,r){this._parentManager=t,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}}return n.\u0275fac=function(t){return new(t||n)(Ne(n,12),Ne(iSe,8))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),qR=(()=>{class n extends G{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xr(n)))(r||n)}}(),n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),s5=(()=>{class n{constructor(t,r,i,s,o,a){this._injector=t,this._actions=r,this._actionResults=i,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){const r=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return r.subscribe({error:i=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(ia),this._errorHandler.handleError(i)}catch(s){}})}),r.pipe(A1(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?on(this._stateStream.getValue()):Zv(t.map(r=>this.dispatchSingle(r))):this.dispatchSingle(t)}dispatchSingle(t){if(!cm(t))return Sg(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const i=this._stateStream.getValue();return i5([...this._pluginManager.plugins,(o,a)=>{o!==i&&this._stateStream.next(o);const l=this.getActionResultStream(a);return l.subscribe(u=>this._actions.next(u)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(i,t).pipe(Vc())}getActionResultStream(t){return this._actionResults.pipe(Zr(r=>r.action===t&&"DISPATCHED"!==r.status),Qr(1),Vc())}createDispatchObservable(t){return t.pipe(qH(r=>{switch(r.status){case"SUCCESSFUL":return on(this._stateStream.getValue());case"ERRORED":return Sg(r.error);default:return Uu}})).pipe(Vc())}}return n.\u0275fac=function(t){return new(t||n)(Ne(Wn),Ne(x1),Ne(qR),Ne(WR),Ne(D1),Ne(T1))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();const o5=n=>{Object.freeze(n);const e="function"==typeof n,t=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(r){t.call(n,r)&&(!e||"caller"!==r&&"callee"!==r&&"arguments"!==r)&&null!==n[r]&&("object"==typeof n[r]||"function"==typeof n[r])&&!Object.isFrozen(n[r])&&o5(n[r])}),n};let a5=(()=>{class n{constructor(t,r){this.isDevMode=t,this.isTestMode=r}}return n.\u0275fac=function(t){return new(t||n)(Ne(ZH),Ne(QH))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),l5=(()=>{class n{constructor(t,r){this._host=t,this._config=r}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(Va.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(Va.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(t){return new(t||n)(Ne(a5),Ne(Lf))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),hm=(()=>{class n{constructor(t,r,i,s){this._stateStream=t,this._dispatcher=r,this._config=i,s.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:r=>{const i=o5(r);return t.setState(i)},dispatch:r=>t.dispatch(r)}}setStateToTheCurrentWithNew(t){const r=this.getRootStateOperations(),i=r.getState();r.setState(Object.assign({},i,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(Ne(D1),Ne(s5),Ne(Lf),Ne(l5))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),M1=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const r=this._internalStateOperations.getRootStateOperations();function i(l){return C1(l,t.path)}function s(l,u){const c=t5(l,t.path,u),h=t.instance;if(h.ngxsOnChanges){const p=r5(t,{currentAppState:l,newAppState:c});h.ngxsOnChanges(p)}return r.setState(c),c}function o(l,u){return s(l,u(i(l)))}return{getState:()=>i(r.getState()),patchState:l=>o(r.getState(),function(n){return e=>{if(Array.isArray(n))throw new Error(Va.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(Va.PATCHING_PRIMITIVE());const t=Object.assign({},e);for(const r in n)t[r]=n[r];return t}}(l)),setState(l){const u=r.getState();return function(l){return"function"==typeof l}(l)?o(u,l):s(u,l)},dispatch:l=>r.dispatch(l)}}}return n.\u0275fac=function(t){return new(t||n)(Ne(hm))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class I1{static stateNameErrorMessage(e){return Va.STATE_NAME(e)}static checkCorrectStateName(e){if(!e)throw new Error(Va.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(e))throw new Error(this.stateNameErrorMessage(e))}static checkStateNameIsUnique(e,t){const i=this.getValidStateMeta(e).name,s=t[i];if(s&&s!==e)throw new Error(Va.STATE_UNIQUE(i,e.name,s.name));return i}static getValidStateMeta(e){const t=Jv(e);if(!t)throw new Error(Va.STATE_DECORATOR());return t}}I1.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let fm=(()=>{class n{constructor(t,r,i,s,o,a,l){this._injector=t,this._config=r,this._parentFactory=i,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=l,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=GH(()=>{const u=this;function c(p){const g=u.statePaths[p];return g?function(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(n){const e=n.slice();return t=>e.reduce((r,i)=>r&&r[i],t)}(n):function(n){const e=n;let t="store."+e[0],r=0;const i=e.length;let s=t;for(;++r<i;)s=s+" && "+(t=t+"."+e[r]);return new Function("store","return "+s+";")}(n)}(g.split("."),u._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(p){let g=c(p);return g||((...m)=>(g||(g=c(p)),g?g(...m):void 0))},getSelectorOptions:p=>Object.assign({},u._config.selectorOptions,p||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let r={};return r=Array.isArray(t)?t.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,r}static checkStatesAreValid(t){t.forEach(I1.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){n.checkStatesAreValid(t);const{newStates:r}=this.addToStatesMap(t);if(!r.length)return[];const i=function(n){const e=t=>{const r=n.find(i=>i===t);if(!r)throw new Error(`Child state not found: ${t}. \r\nYou may have forgotten to add states to module`);return r[td].name};return n.reduce((t,r)=>{const{name:i,children:s}=r[td];return t[i]=(s||[]).map(e),t},{})}(r),s=function(n){const e=[],t={},r=(i,s=[])=>{Array.isArray(s)||(s=[]),s.push(i),t[i]=!0,n[i].forEach(o=>{if(s.indexOf(o)>=0)throw new Error(`Circular dependency '${o}' is required by '${i}': ${s.join(" -> ")}`);t[o]||r(o,s.slice(0))}),e.indexOf(i)<0&&e.push(i)};return Object.keys(n).forEach(i=>r(i)),e.reverse()}(i),o=function(n,e={}){const t=(r,i)=>{for(const s in r)if(r.hasOwnProperty(s)&&r[s].indexOf(i)>=0){const o=t(r,s);return null!==o?`${o}.${s}`:s}return null};for(const r in n)if(n.hasOwnProperty(r)){const i=t(n,r);e[r]=i?`${i}.${r}`:r}return e}(i),a=function(n){return n.reduce((e,t)=>(e[t[td].name]=t,e),{})}(r),l=[];for(const u of s){const c=a[u],h=o[u],p=c[td];this.addRuntimeInfoToMeta(p,h);const g={name:u,path:h,isInitialised:!1,actions:p.actions,instance:this._injector.get(c),defaults:n.cloneDefaults(p.defaults)};this.hasBeenMountedAndBootstrapped(u,h)||l.push(g),this.states.push(g)}return l}addAndReturnDefaults(t){const i=this.add(t||[]);return{defaults:i.reduce((o,a)=>t5(o,a.path,a.defaults),{}),states:i}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(Zr(t=>"DISPATCHED"===t.status),L(({action:t})=>this.invokeActions(this._actions,t).pipe(ue(()=>({action:t,status:"SUCCESSFUL"})),NE({action:t,status:"CANCELED"}),Hu(r=>on({action:t,status:"ERRORED",error:r}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,r){const i=cm(r),s=[];for(const o of this.states){const a=o.actions[i];if(a)for(const l of a){const u=this._stateContextFactory.createStateContext(o);try{let c=o.instance[l.fn](u,r);c instanceof Promise&&(c=ke(c)),c instanceof N?(c=c.pipe(NE({})),l.options.cancelUncompleted&&(c=c.pipe(us(t.pipe(fSe(r)))))):c=on({}).pipe(Vc()),s.push(c)}catch(c){s.push(Sg(c))}}}return s.length||s.push(on({})),Zv(s)}addToStatesMap(t){const r=[],i=this.statesByName;for(const s of t){const o=I1.checkStateNameIsUnique(s,i);!i[o]&&(r.push(s),i[o]=s)}return{newStates:r}}addRuntimeInfoToMeta(t,r){this.statePaths[t.name]=r,t.path=r}hasBeenMountedAndBootstrapped(t,r){const i=void 0!==C1(this._initialState,r);return this.statesByName[t]&&i}}return n.\u0275fac=function(t){return new(t||n)(Ne(Wn),Ne(Lf),Ne(n,12),Ne(x1),Ne(qR),Ne(M1),Ne(jR,8))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),YR=(()=>{class n{constructor(t,r,i){this.internalStateOperations=t,this.stateContextFactory=r,this.bootstrapper=i}ngxsBootstrap(t,r){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(Zr(()=>!!r),is(()=>this.invokeInit(r.states)),L(()=>this.bootstrapper.appBootstrapped$),Zr(i=>!!i)).subscribe(()=>this.invokeBootstrap(r.states))}invokeInit(t){for(const r of t){const i=r.instance;if(i.ngxsOnChanges){const a=r5(r,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});i.ngxsOnChanges(a)}i.ngxsOnInit&&i.ngxsOnInit(this.getStateContext(r)),r.isInitialised=!0}}invokeBootstrap(t){for(const r of t){const i=r.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this.getStateContext(r))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(Ne(hm),Ne(M1),Ne(BR))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();let Bf=(()=>{class n{constructor(t,r,i,s,o,a){this._stateStream=t,this._internalStateOperations=r,this._config=i,this._internalExecutionStrategy=s,this._stateFactory=o,this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const r=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(ue(r),Hu(i=>{const{suppressErrors:s}=this._config.selectorOptions;return i instanceof TypeError&&s?on(void 0):Sg(i)}),um(),A1(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(Qr(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(A1(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return function(n){const e=function(n){return n.NGXS_SELECTOR_META}(n)||Jv(n);return e&&e.makeRootSelector||(()=>n)}(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const r=this._stateStream.value;if(!r||0===Object.keys(r).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(o)}}}return n.\u0275fac=function(t){return new(t||n)(Ne(D1),Ne(hm),Ne(Lf),Ne(T1),Ne(fm),Ne(jR,8))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})(),eb=(()=>{class n{constructor(t,r){n.store=t,n.config=r}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(Ne(Bf),Ne(Lf))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class xSe{static get type(){return"@@INIT"}}class DSe{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}const R1=new Cg(1);let ISe=(()=>{class n{constructor(t,r,i,s,o=[],a){!function(){try{const n=window.ng,t=!(n.probe&&n.coreTokens)&&Pa();R1.next(t)}catch(n){R1.next(!1)}finally{R1.complete()}}();const l=t.addAndReturnDefaults(o);r.setStateToTheCurrentWithNew(l),t.connectActionHandlers(),a.ngxsBootstrap(new xSe,l)}}return n.\u0275fac=function(t){return new(t||n)(Ne(fm),Ne(hm),Ne(Bf),Ne(eb),Ne(KH,8),Ne(YR))},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({}),n})(),OSe=(()=>{class n{constructor(t,r,i,s=[],o){const a=n.flattenStates(s),l=i.addAndReturnDefaults(a);l.states.length&&(r.setStateToTheCurrentWithNew(l),o.ngxsBootstrap(new DSe(l.defaults),l))}static flattenStates(t=[]){return t.reduce((r,i)=>r.concat(i),[])}}return n.\u0275fac=function(t){return new(t||n)(Ne(Bf),Ne(hm),Ne(fm),Ne(XH,8),Ne(YR))},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({}),n})();class Ua{static forRoot(e=[],t={}){return{ngModule:ISe,providers:[fm,M1,bSe,x1,BR,l5,a5,YR,s5,qR,hm,T1,Bf,D1,eb,WR,...e,...Ua.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:OSe,providers:[fm,WR,...e,{provide:XH,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:QH,useValue:XEe},{provide:ZH,useValue:Pa},{provide:e5,useClass:t.executionStrategy||YH},{provide:KH,useValue:e},{provide:Ua.ROOT_OPTIONS,useValue:t},{provide:Lf,useFactory:Ua.ngxsConfigFactory,deps:[Ua.ROOT_OPTIONS]},{provide:Kw,useFactory:Ua.appBootstrapListenerFactory,multi:!0,deps:[BR]},{provide:jR,useFactory:Ua.getInitialState},{provide:$H,useExisting:M1},{provide:WH,useExisting:fm}]}static ngxsConfigFactory(e){return zR(new Lf,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return QEe.pop()}}Ua.\u0275fac=function(e){return new(e||Ua)},Ua.\u0275mod=un({type:Ua}),Ua.\u0275inj=Tt({}),Ua.ROOT_OPTIONS=new Gt("ROOT_OPTIONS");const za=new Gt("NgValueAccessor"),G1=new eu(TE);class U1e{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new z1e(e,this.dueTime,this.scheduler))}}class z1e extends y{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(H1e,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function H1e(n){n.debouncedNext()}function Hr(n){return null!=n&&"false"!=`${n}`}function Ha(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function rd(n){return n instanceof Cn?n.nativeElement:n}let vP;try{vP="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){vP=!1}let ub,bP,Gr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?ff(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vP)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Ne(ju))},n.\u0275prov=qe({factory:function(){return new n(Ne(ju))},token:n,providedIn:"root"}),n})(),lb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({}),n})();function mm(n){return function(){if(null==ub&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ub=!0}))}finally{ub=ub||!1}return ub}()?n:!!n.capture}function Uf(n){return n.composedPath?n.composedPath()[0]:n.target}let wP=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({factory:function(){return new n},token:n,providedIn:"root"}),n})(),bG=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=rd(t);return new N(i=>{const o=this._observeElement(r).subscribe(i);return()=>{o.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new G,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Ne(wP))},n.\u0275prov=qe({factory:function(){return new n(Ne(wP))},token:n,providedIn:"root"}),n})(),wG=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new mn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Hr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ha(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(n,e=G1){return t=>t.lift(new U1e(n,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(Ie(bG),Ie(Cn),Ie(vn))},n.\u0275dir=Ut({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),EP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({providers:[wP]}),n})();function RG(n){return 0===n.offsetX&&0===n.offsetY}function PG(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const NG=new Gt("cdk-input-modality-detector-options"),gCe={ignoreKeys:[18,17,224,91,16]},_m=mm({passive:!0,capture:!0});let FG=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Pi(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(u=>u===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Uf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(RG(o)?"keyboard":"mouse"),this._mostRecentTarget=Uf(o))},this._onTouchstart=o=>{PG(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Uf(o))},this._options=Object.assign(Object.assign({},gCe),s),this.modalityDetected=this._modality.pipe(function(n){return e=>e.lift(new wie(n))}(1)),this.modalityChanged=this.modalityDetected.pipe(um()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,_m),i.addEventListener("mousedown",this._onMousedown,_m),i.addEventListener("touchstart",this._onTouchstart,_m)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,_m),document.removeEventListener("mousedown",this._onMousedown,_m),document.removeEventListener("touchstart",this._onTouchstart,_m))}}return n.\u0275fac=function(t){return new(t||n)(Ne(Gr),Ne(vn),Ne(cn),Ne(NG,8))},n.\u0275prov=qe({factory:function(){return new n(Ne(Gr),Ne(vn),Ne(cn),Ne(NG,8))},token:n,providedIn:"root"}),n})();const jG=new Gt("cdk-focus-monitor-default-options"),X1=mm({passive:!0,capture:!0});let id=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new G,this._rootNodeFocusAndBlurListener=a=>{const l=Uf(a),u="focus"===a.type?this._onFocus:this._onBlur;for(let c=l;c;c=c.parentElement)u.call(this,a,c)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,r=!1){const i=rd(t);if(!this._platform.isBrowser||1!==i.nodeType)return on(null);const s=function(n){if(function(){if(null==bP){const n="undefined"!=typeof document?document.head:null;bP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return bP}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new G,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=rd(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=rd(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,r,i){i?t.classList.add(r):t.classList.remove(r)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){this._toggleClass(t,"cdk-focused",!!r),this._toggleClass(t,"cdk-touch-focused","touch"===r),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(t,"cdk-mouse-focused","mouse"===r),this._toggleClass(t,"cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Uf(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,X1),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,X1)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(us(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,X1),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,X1),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(Ne(vn),Ne(Gr),Ne(FG),Ne(cn,8),Ne(jG,8))},n.\u0275prov=qe({factory:function(){return new n(Ne(vn),Ne(Gr),Ne(FG),Ne(cn,8),Ne(jG,8))},token:n,providedIn:"root"}),n})();const VG="cdk-high-contrast-black-on-white",UG="cdk-high-contrast-white-on-black",CP="cdk-high-contrast-active";let zG=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(CP),t.remove(VG),t.remove(UG),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(CP),t.add(VG)):2===r&&(t.add(CP),t.add(UG))}}}return n.\u0275fac=function(t){return new(t||n)(Ne(Gr),Ne(cn))},n.\u0275prov=qe({factory:function(){return new n(Ne(Gr),Ne(cn))},token:n,providedIn:"root"}),n})(),db=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({}),n})();const GG=new Rc("12.2.5");function qG(n){Promise.resolve(null).then(n)}class vm{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function KG(){return"undefined"!=typeof window&&void 0!==window.document}function TP(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let IP=(n,e)=>!1,OP=(n,e)=>!1,ZG=(n,e,t)=>[];const JG=TP();(JG||"undefined"!=typeof Element)&&(IP=KG()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),OP=(()=>{if(JG||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):OP}})(),ZG=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let zf=null,e$=!1;function RP(n){zf||(zf=("undefined"!=typeof document?document.body:null)||{},e$=!!zf.style&&"WebkitAppearance"in zf.style);let e=!0;return zf.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in zf.style,!e&&e$&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in zf.style)),e}const PP=OP,NP=IP,kP=ZG;let n$=(()=>{class n{validateStyleProperty(t){return RP(t)}matchesElement(t,r){return PP(t,r)}containsElement(t,r){return NP(t,r)}query(t,r,i){return kP(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new vm(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class Q1{}Q1.NOOP=new n$;function o$(n,e,t){return t?e+":"+t+";":""}function a$(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=o$(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=o$(0,MCe(t),n.style[t]));n.setAttribute("style",e)}function lc(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=VP(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),TP()&&a$(n))}function Gf(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=VP(t);n.style[r]=""}),TP()&&a$(n))}const DCe=/-+([a-z0-9])/g;function VP(n){return n.replace(DCe,(...e)=>e[1].toUpperCase())}function MCe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Em{constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=Em.initialStylesByElement.get(e);i||Em.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&lc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lc(this._element,this._initialStyles),this._endStyles&&(lc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Em.initialStylesByElement.delete(this._element),this._startStyles&&(Gf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gf(this._element,this._endStyles),this._endStyles=null),lc(this._element,this._initialStyles),this._state=3)}}Em.initialStylesByElement=new WeakMap;const hu=new Gt("AnimationModuleType"),W$=new Rc("12.2.5"),XAe=new Gt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Wf,mi=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checkIsEnabled(t){return!(!Pa()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&W$.full!==GG.full&&console.warn("The Angular Material version ("+W$.full+") does not match the Angular CDK version ("+GG.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(Ne(zG),Ne(XAe,8),Ne(cn))},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[db],db]}),n})();function mC(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Hr(e)}}}function pb(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function tN(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Hr(e)}}}function nN(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ha(t):this.defaultTabIndex}}}try{Wf="undefined"!=typeof Intl}catch(n){Wf=!1}class uTe{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const K$={enterDuration:225,exitDuration:150},rN=mm({passive:!0}),X$=["mousedown","touchstart"],Q$=["mouseup","mouseleave","touchend","touchcancel"];class dTe{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=rd(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},K$),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,u=s.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=a-o+"px",c.style.top=l-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=r.color&&(c.style.backgroundColor=r.color),c.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(c),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(c),c.style.transform="scale(1)";const h=new uTe(this,c,r);return h.state=0,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const p=h===this._mostRecentTransientRipple;h.state=1,!r.persistent&&(!p||!this._isPointerDown)&&h.fadeOut()},u),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},K$),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=rd(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(X$))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Q$),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=RG(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!PG(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,rN)})})}_removeTriggerEvents(){this._triggerElement&&(X$.forEach(e=>{this._triggerElement.removeEventListener(e,this,rN)}),this._pointerUpEventsRegistered&&Q$.forEach(e=>{this._triggerElement.removeEventListener(e,this,rN)}))}}const pTe=new Gt("mat-ripple-global-options");let Sm=(()=>{class n{constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new dTe(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(Ie(Cn),Ie(vn),Ie(Gr),Ie(pTe,8),Ie(hu,8))},n.\u0275dir=Ut({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&Cr("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),yC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[mi,lb],mi]}),n})();new class extends eu{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,s=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends TE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let TTe=1;const xTe=Promise.resolve(),vC={};function n7(n){return n in vC&&(delete vC[n],!0)}const r7={setImmediate(n){const e=TTe++;return vC[e]=!0,xTe.then(()=>n7(e)&&n()),e},clearImmediate(n){n7(n)}};new class extends eu{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,s=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends TE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=r7.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(r7.clearImmediate(t),e.scheduled=void 0)}});function Wa(n){return null==n}function qa(n){return!Wa(n)}"undefined"!=typeof window&&window,Ke(7266),Ke(5478),new Gt("SECURITY_CONTEXT");let FIe=(()=>{class n{constructor(t){this.sequence$=new Pi(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(t){return new(t||n)(Ne(Bf,8))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();let pu=(()=>{class n{constructor(t,r,i){n.store=t.get(Bf),n.ngZone=t.get(vn),n.factory=r,n.context=i,n.computed=t.get(FIe)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(t){return new(t||n)(Ne(Wn),Ne(WH),Ne($H))},n.\u0275prov=qe({token:n,factory:n.\u0275fac}),n})();class Fs{constructor(){Fs.statesCachedMeta.clear()}static createStateContext(e){return pu.context.createStateContext(e)}static ensureMappedState(e){if(Wa(pu.factory)||Wa(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(qa(e.name)?Fs.statesCachedMeta.get(e.name):null)||Fs.ensureMeta(e)}static getRepositoryByInstance(e){var t;const i=null!==(t=function(n){return n.NGXS_DATA_META}(Fs.getStateClassByInstance(e)))&&void 0!==t?t:null;if(Wa(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(null!=e?e:{}).constructor}static clearMetaByInstance(e){const t=Fs.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const r={},i=Array.from(e);for(let s=0;s<i.length;s++){const o=null==t?void 0:t.getPayloadTypeByIndex(s);qa(o)&&(r[o]=i[s])}return Object.keys(r).length>0?r:null}static createAction(e,t,r){const i=Fs.createPayload(t,r);return new(function(n){return class{constructor(t){t&&Object.keys(t).forEach(r=>{this[r]=t[r]})}static get type(){return n}}}(e.type))(i)}static ensureMeta(e){var t;const r=qa(e.name)?null===(t=pu.factory.states)||void 0===t?void 0:t.find(i=>i.name===e.name):null;return qa(r)&&qa(e.name)&&Fs.statesCachedMeta.set(e.name,r),r}}Fs.statesCachedMeta=new Map,Fs.\u0275fac=function(e){return new(e||Fs)},Fs.\u0275prov=qe({token:Fs,factory:Fs.\u0275fac}),new Cg(1),Error,Error;const vOe=["bodyCanvas"];let bOe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new mn,this.nodeDrag=new mn,this.nodeClick=new mn,this.nodeHoverStart=new mn,this.nodeHoverStop=new mn,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){var r;this._scene=t,null===(r=this.bodyUI)||void 0===r||r.setScene(t)}get rotation(){return this._rotation}set rotation(t){var r;this._rotation=t,null===(r=this.bodyUI)||void 0===r||r.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){var r;this._rotationX=t,null===(r=this.bodyUI)||void 0===r||r.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){var r;this._zoom=t,null===(r=this.bodyUI)||void 0===r||r.setZoom(t)}get target(){return this._target}set target(t){var r;this._target=t,null===(r=this.bodyUI)||void 0===r||r.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,r={x:48,y:48}){if(this.bodyCanvas){const{width:i,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((i-r.x)/o/t.x),Math.log2((s-r.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t;return Ci(this,void 0,void 0,function*(){const r=this.bodyCanvas.nativeElement,i=new WEe({id:"body-ui",canvas:r,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});r.addEventListener("contextmenu",s=>s.preventDefault()),yield i.initialize(),this.bodyUI=i,window.bodyUI=i,(null===(t=this.scene)||void 0===t?void 0:t.length)>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))]})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bn({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(t,r){if(1&t&&Ri(vOe,5,Cn),2&t){let i;pr(i=gr())&&(r.bodyCanvas=i.first)}},hostVars:2,hostBindings:function(t,r){2&t&&ku(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop"},decls:2,vars:0,consts:[[1,"body-ui"],["bodyCanvas",""]],template:function(t,r){1&t&&xr(0,"canvas",0,1)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"]}),n})(),wOe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[Qi]]}),n})();new Gt("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});const GW=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:large_intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:brain",organ:"Brain",name:"Allen Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lymph_nodes",organ:"Lymph Node",name:"Lymph Node, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph_nodes",organ:"Lymph Node",name:"Lymph Node, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:bone_marrow",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:vasculature",organ:"Vasculature",name:"Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}];GW.filter(n=>!0!==n.disabled);!function(){const n=localStorage.getItem("ALLOW_TELEMETRY");null===n||n.toLowerCase()}();function uc(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}let IN;function gu(){return IN||(IN=function(n,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise(t=>{const r=()=>indexedDB.databases().finally(t);e=setInterval(r,100),r()}).finally(()=>clearInterval(e))}().then(()=>{const r=indexedDB.open("keyval-store");return r.onupgradeneeded=()=>r.result.createObjectStore(e),uc(r)});return(r,i)=>t.then(s=>i(s.transaction(e,r).objectStore(e)))}(0,"keyval")),IN}function qW(n,e=gu()){return e("readonly",t=>uc(t.get(n)))}var Kr=Ke(1440),eRe=Ke(698),tRe=Ke(7445),nRe=Ke.n(tRe),_r=Ke(3815),_h=Ke(1609);const $r=Kr.Util.prefixes({ccf:"http://purl.org/ccf/latest/ccf.owl#",entity:"http://purl.org/ccf/latest/ccf-entity.owl#",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/"},Kr.DataFactory),YW={x:$r("rdf"),type:$r("rdf")("type")},Mm={x:$r("rdfs"),label:$r("rdfs")("label"),comment:$r("rdfs")("comment"),isDefinedBy:$r("rdfs")("isDefinedBy"),seeAlso:$r("rdfs")("seeAlso")},Sr={x:$r("entity"),id:$r("entity")("id"),label:Mm.label,description:Mm.comment,link:Mm.seeAlso,sex:$r("entity")("sex"),age:$r("entity")("age"),bmi:$r("entity")("bmi"),Male:Kr.DataFactory.literal("Male"),Female:Kr.DataFactory.literal("Female"),consortiumName:$r("entity")("consortium_name"),providerName:$r("entity")("provider_name"),providerUUID:$r("entity")("provider_uuid"),donor:$r("entity")("has_donor"),sections:$r("entity")("has_tissue_section"),datasets:$r("entity")("has_dataset"),sampleType:$r("entity")("sample_type"),TissueBlock:Kr.DataFactory.literal("Tissue Block"),TissueSection:Kr.DataFactory.literal("Tissue Section"),NonStandard:Kr.DataFactory.literal("Non-standard"),sectionCount:$r("entity")("section_count"),sectionSize:$r("entity")("section_size"),sectionUnits:$r("entity")("section_units"),sectionNumber:$r("entity")("section_number"),spatialEntity:$r("entity")("has_spatial_entity"),ontologyTerms:$r("entity")("has_ontology_term"),technology:$r("entity")("technology"),thumbnail:$r("entity")("has_thumbnail")},Pn=$r("ccf"),ui={x:Pn,ontologyNode:{label:Pn("ccf_preferred_label"),parent:Pn("ccf_part_of"),children:Pn("ccf_part_of"),rui_rank:Pn("ccf_rui_rank"),synonymLabels:Kr.DataFactory.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},spatial:{Female:Pn("VHFemale"),Male:Pn("VHMale"),BothSexes:Pn("VHBothSexes"),FemaleOrgans:Pn("VHFemaleOrgans"),MaleOrgans:Pn("VHMaleOrgans")},SpatialObjectReference:Pn("SpatialObjectReference"),SpatialEntity:Pn("SpatialEntity"),SpatialPlacement:Pn("SpatialPlacement"),spatialObjectReference:{file:Pn("has_object_file"),file_format:Pn("has_object_file_format"),file_subpath:Pn("has_object_file_subpath")},extractionSet:{label:Mm.label,rui_rank:Pn("ccf_rui_rank")},spatialEntity:{label:Mm.label,comment:Mm.comment,creator:$r("dc")("creator"),creator_first_name:Pn("creator_first_name"),creator_last_name:Pn("creator_last_name"),creator_orcid:Pn("creator_orcid"),creation_date:Pn("creation_date"),updated_date:Pn("updated_date"),ccf_annotations:Pn("ccf_annotation"),representation_of:Pn("ccf_representation_of"),reference_organ:Pn("anatomical_structure_of"),extraction_set_for:Pn("extraction_set_for"),extraction_set:Pn("extraction_site_for"),sex:Pn("has_sex"),side:Pn("has_side"),rui_rank:Pn("ccf_rui_rank"),slice_thickness:Pn("ccf_slice_thickness"),slice_count:Pn("ccf_slice_count"),x_dimension:Pn("has_x_dimension"),y_dimension:Pn("has_y_dimension"),z_dimension:Pn("has_z_dimension"),dimension_units:Pn("has_dimension_units"),object:Pn("has_object_reference")},spatialPlacement:{source:Pn("has_placement_source"),target:Pn("has_placement_target"),placement_date:Pn("has_placement_date"),x_scaling:Pn("has_x_scaling"),y_scaling:Pn("has_y_scaling"),z_scaling:Pn("has_z_scaling"),scaling_units:Pn("has_scaling_units"),x_rotation:Pn("has_x_rotation"),y_rotation:Pn("has_y_rotation"),z_rotation:Pn("has_z_rotation"),w_rotation:Pn("has_theta_rotation"),rotation_order:Pn("has_rotation_order"),rotation_units:Pn("has_rotation_units"),x_translation:Pn("has_x_translation"),y_translation:Pn("has_y_translation"),z_translation:Pn("has_z_translation"),translation_units:Pn("has_translation_units")}},Ni={x:$r("uberon")},KW=($r("lmha"),{bladder:Ni.x("0001255"),body:Ni.x("0013702"),brain:Ni.x("0000955"),colon:Ni.x("0001155"),heart:Ni.x("0000948"),kidney:Ni.x("0002113"),large_intestine:Ni.x("0000059"),left_kidney:Ni.x("0004538"),left_lung:Ni.x("0002168"),left_ureter:Ni.x("0001223"),liver:Ni.x("0002107"),lung:Ni.x("0002048"),lymph_node:Ni.x("0000029"),pelvis:Ni.x("0001270"),rectum:Ni.x("0001052"),right_kidney:Ni.x("0004539"),right_lung:Ni.x("0002167"),right_ureter:Ni.x("0001222"),skin:Ni.x("0002097"),small_intestine:Ni.x("0002108"),spleen:Ni.x("0002106"),thymus:Ni.x("0002370"),ureter:Ni.x("0000056"),vasculature:Ni.x("0002049")});function RN(n){const e={};return Object.entries(n).forEach(([t,r])=>{e[r.id]=t}),e}const jC={spatialObjectReference:RN(ui.spatialObjectReference),spatialEntity:RN(ui.spatialEntity),spatialPlacement:RN(ui.spatialPlacement)};function VC(n,e,t,r){const i={"@id":e,"@type":t};return n.some(s=>{const o=r[s.predicate.id];if(o){const a="Literal"===s.object.termType?(0,_h.fromRdf)(s.object):s.object.id;(0,_r.set)(i,o,a)}return!1},Kr.DataFactory.namedNode(e),null,null,null),i}const sRe=(0,_r.memoize)(function(n,e){return VC(n,e,"SpatialObjectReference",jC.spatialObjectReference)},(n,e)=>e),XW=(0,_r.memoize)(function(n,e){const t=VC(n,e,"ExtractionSet",jC.spatialEntity);return t.extractionSites=(0,_r.sortBy)(n.getSubjects(ui.spatialEntity.extraction_set,e,null).map(r=>Xf(n,r.id)),["rui_rank"]),t},(n,e)=>e),lRe=(0,_r.memoize)(function(n,e){return(0,_r.sortBy)(n.getSubjects(ui.spatialEntity.extraction_set_for,e,null).map(t=>XW(n,t.id)),["rui_rank"])},(n,e)=>e),cRe=(0,_r.memoize)(function(n,e){return(0,_r.sortBy)(n.getSubjects(ui.spatialEntity.reference_organ,e,null).map(t=>Xf(n,t.id)).filter(t=>t["@id"]!==e),["rui_rank"])},(n,e)=>e),hRe=(0,_r.memoize)(function(n){const e=[];return n.forEach(t=>{t.subject.id===t.object.id&&e.push(Xf(n,t.subject.id))},null,ui.spatialEntity.reference_organ,null,null),(0,_r.sortBy)(e,["rui_rank"])}),Xf=(0,_r.memoize)(function(n,e){const t=VC(n,e,"SpatialEntity",jC.spatialEntity);return t.object&&(t.object=sRe(n,t.object)),t.ccf_annotations&&(t.ccf_annotations=n.getObjects(e,ui.spatialEntity.ccf_annotations,null).map(r=>r.id)),n.forSubjects(r=>t.entityId=r.id,Sr.spatialEntity,e,null),t},(n,e)=>e),gRe=(0,_r.memoize)(function(n,e){const t=VC(n,e,"SpatialPlacement",jC.spatialPlacement);return t.source&&(t.source=Xf(n,t.source)),t.target&&(t.target=Xf(n,t.target)),t},(n,e)=>e),_Re=(0,_r.memoize)(function(n,e){const t=n.getObjects(Kr.DataFactory.namedNode(e),Sr.spatialEntity,null);if(t.length>0)return Xf(n,t[0].id)},(n,e)=>e);function yRe(n,e){const t=e;let r;switch(t.translation_units){case"centimeter":r=.01;break;case"millimeter":r=.001;break;case"meter":default:r=1}const i=[t.x_translation,t.y_translation,t.z_translation].map(a=>a*r),s=[t.x_rotation,t.y_rotation,t.z_rotation].map(dV),o=[t.x_scaling,t.y_scaling,t.z_scaling];return n.translate(i).rotateXYZ(s).scale(o)}class QW{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new eRe.DirectedGraph;const e=this.db.store;e.forSubjects(r=>{this.addNode(r.id,"SpatialObjectReference")},YW.type,ui.SpatialObjectReference,null),e.forSubjects(r=>{this.addNode(r.id,"SpatialEntity")},YW.type,ui.SpatialEntity,null);const t={};e.some(r=>(t[r.subject.id]=r.object.id,!1),null,ui.spatialPlacement.source,null,null),e.some(r=>{const i=t[r.subject.id];return i&&this.addEdge(r.subject.id,i,r.object.id,"SpatialPlacement"),!1},null,ui.spatialPlacement.target,null,null)}addNode(e,t){this.graph.mergeNode(e,{type:t})}addEdge(e,t,r,i){this.graph.mergeDirectedEdge(t,r,{type:i,id:e})}getTransformationMatrix(e,t){if(e===t)return new Xn(Xn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(t))return;const r=this.db.store,i=new Xn(Xn.IDENTITY),s=nRe()(this.graph,e,t);if(s&&s.length>0){s.reverse();let o="";for(const a of s){if(o){const l=this.graph.getEdgeAttribute(a,o,"id");yRe(i,gRe(r,l))}o=a}return i}}}class ZW{constructor(e){this.db=e}getSpatialEntity(e){return Xf(this.db.store,e)}getExtractionSets(e){return lRe(this.db.store,e)}getExtractionSet(e){return XW(this.db.store,e)}getAnatomicalStructures(e){return cRe(this.db.store,e)}getReferenceOrgans(){return hRe(this.db.store)}getReferenceBody(e){let t;switch(null==e?void 0:e.sex){case"Male":t=ui.spatial.Male.id;break;case"Female":t=ui.spatial.Female.id;break;case"Both":default:t=ui.spatial.BothSexes.id}return this.getSpatialEntity(t)}getReferenceOrganSets(e){let t=this.getReferenceOrgans();switch(null==e?void 0:e.sex){case"Male":t=t.filter(r=>"Male"===r.sex);break;case"Female":t=t.filter(r=>"Female"===r.sex)}return(null==e?void 0:e.debug)&&(t=t.map(r=>[[r],this.getAnatomicalStructures(r["@id"])]).reduce((r,[i,s])=>r.concat(s.length>0?s:i),[])),t}getReferenceSceneNodes(e){const t=this.getReferenceBody(e);let r=[...this.getReferenceOrganSets(e).map(i=>{const s="http://purl.obolibrary.org/obo/UBERON_0002097"===i.representation_of;return this.getSceneNode(i,t,{color:[255,255,255,255],opacity:s?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!s})})];return(null==e?void 0:e.debug)&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ui.x("VHRightKidney").id),t,{color:[0,0,255,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(ui.x("VHLeftKidney").id),t,{color:[255,0,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(ui.x("VHSpleenCC1").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(ui.x("VHSpleenCC2").id),t,{color:[0,255,0,127.5],wireframe:!0}),this.getSceneNode(this.getSpatialEntity(ui.x("VHSpleenCC3").id),t,{color:[0,255,0,127.5],wireframe:!0})])),r.filter(i=>void 0!==i)}getReferenceOrganScene(e,t){var r;const i=this.getReferenceOrgans().filter(s=>s.representation_of===e&&s.sex===(null==t?void 0:t.sex));if(i.length>0){const s=i[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),l=(null!==(r=this.db.getSpatialEntities(t))&&void 0!==r?r:[]).map(u=>this.getSceneNode(u,s,{color:[255,255,255,229.5]}));return[a].concat(l).filter(u=>void 0!==u)}return[]}getEntitySceneNodes(e){const t=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(r=>this.getSceneNode(r,t,{color:[255,255,255,229.5]})).filter(r=>void 0!==r)}getSceneNode(e,t,r={}){var i,s,o,a;const l=null===(s=null===(i=null==e?void 0:e.object)||void 0===i?void 0:i.file_format)||void 0===s?void 0:s.startsWith("model/gltf");let c=this.db.graph.getTransformationMatrix(l&&e.object?e.object["@id"]:e["@id"],t["@id"]);if(c){if(l)c=new Xn(Xn.IDENTITY).rotateX(dV(90)).multiplyLeft(c);else{let h;switch(e.dimension_units){case"centimeter":h=.01;break;case"millimeter":h=.001;break;case"meter":default:h=1}const p=[e.x_dimension,e.y_dimension,e.z_dimension].map(g=>g*h/2);c.scale(p)}return Object.assign({"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,scenegraph:l?null===(o=e.object)||void 0===o?void 0:o.file:void 0,scenegraphNode:l?null===(a=e.object)||void 0===a?void 0:a.file_subpath:void 0,transformMatrix:c,tooltip:e.label},r)}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}const UC="https://entity.api.hubmapconsortium.org/entities/",JW=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),vRe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},zC={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford"},Fr=function(){const n={};return Object.entries(KW).forEach(([e,t])=>n[e]=t.id),n}(),wRe={BL:[Fr.body,Fr.bladder],RK:[Fr.body,Fr.kidney,Fr.right_kidney],LK:[Fr.body,Fr.kidney,Fr.left_kidney],HT:[Fr.body,Fr.heart],LI:[Fr.body,Fr.large_intestine,Fr.colon],SI:[Fr.body,Fr.small_instestine],LL:[Fr.body,Fr.lung,Fr.left_lung],RL:[Fr.body,Fr.lung,Fr.right_lung],LY:[Fr.body,Fr.lymph_node],SP:[Fr.body,Fr.spleen],TH:[Fr.body,Fr.thymus],UR:[Fr.body,Fr.ureter],LV:[Fr.body,Fr.liver],OT:[Fr.body]},e9={"@base":"http://purl.org/ccf/latest/ccf-entity.owl#","@vocab":"http://purl.org/ccf/latest/ccf-entity.owl#",ccf:"http://purl.org/ccf/latest/ccf.owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",label:"rdfs:label",description:"rdfs:comment",link:{"@id":"rdfs:seeAlso","@type":"@id"},samples:{"@reverse":"has_donor"},sections:{"@id":"has_tissue_section","@type":"@id"},datasets:{"@id":"has_dataset","@type":"@id"},rui_location:{"@id":"has_spatial_entity","@type":"@id"},ontologyTerms:{"@id":"has_ontology_term","@type":"@id"},thumbnail:{"@id":"has_thumbnail"}};class CRe{constructor(e,t="",r="",i){var s,o;if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);const u=this.data.descendants||[],c=(this.data.ancestors||[]).find(Ue=>"Donor"===Ue.entity_type);this.donor=this.getDonor(c,r);const h=this.getRuiLocation(e,this.donor);h?this.rui_location=h:this.bad=!0;const p=new Date(e.last_modified_timestamp).toLocaleDateString(),g=zC[e.group_uuid]||e.group_name,m=e.created_by_user_displayname;this["@id"]=UC+e.uuid,this.label=`Registered ${p}, ${m}, ${g}`,this.link=`${r}browse/sample/${e.uuid}`;const b={},w=[];this.sections=w;const H=[];this.datasets=H;for(const Ue of u.filter(st=>"Sample"===st.entity_type)){const st=this.getSection(Ue,e,r);b[Ue.submission_id]=st,w.push(st),st.section_number=null!==(s=st.section_number)&&void 0!==s?s:w.length}for(const Ue of u)if("Dataset"===Ue.entity_type){const st=this.getDataset(Ue,t,r,i),vt=(0,_r.get)(Ue,["ingest_metadata","metadata","tissue_id"]);b[vt]?null===(o=b[vt].datasets)||void 0===o||o.push(st):H.push(st)}const V=null!=h?h:{},fe=`${V.x_dimension} x ${V.y_dimension} x ${V.z_dimension} ${V.dimension_units}`;this.section_count=V.slice_count||w.length;const Me=parseFloat((V.slice_thickness||(V.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=Me;const Oe=V.dimension_units||"millimeter";this.section_units=Oe,this.description=`${fe}, ${Me} ${Oe}, ${e.specimen_type}, ${this.section_count} Sections`,w.forEach((Ue,st)=>{Ue.description=`${V.x_dimension} x ${V.y_dimension} x ${Me} ${Oe}, ${Me} ${Oe}, ${Ue.description}`,Ue.section_number=st+1})}getSection(e,t,r){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":UC+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${zC[e.group_uuid]||e.group_name}`,description:`${t.specimen_type}`,link:`${r}browse/sample/${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,t="",r="",i){var s;const o=new Date(e.last_modified_timestamp).toLocaleDateString(),a=zC[e.group_uuid]||e.group_name,l=e.created_by_user_displayname,u=[...e.data_types,(0,_r.get)(e,["ingest_metadata","metadata","assay_type"],"")],c=u.join("|").toLowerCase();let h,p="assets/icons/ico-unknown.svg";return-1!==c.indexOf("10x")?(h="10x",p="assets/icons/ico-bulk-10x.svg"):-1!==c.indexOf("af")?(h="AF",p="assets/icons/ico-spatial-af.svg"):-1!==c.indexOf("codex")?(h="CODEX",p="assets/icons/ico-spatial-codex.svg"):-1!==c.indexOf("imc")?(h="IMC",p="assets/icons/ico-spatial-imc.svg"):-1!==c.indexOf("lc")&&-1===c.indexOf("af")?(h="LC",p="assets/icons/ico-bulk-lc.svg"):h=-1!==c.indexOf("maldi")?"MALDI":-1!==c.indexOf("pas")?"PAS":"OTHER",p=null!==(s=this.getDatasetThumbnail(e,t,i))&&void 0!==s?s:p,{"@id":UC+e.uuid,"@type":"Dataset",label:`Registered ${o}, ${l}, ${a}`,description:`Data/Assay Types: ${u.join(", ")}`,link:`${r}browse/dataset/${e.uuid}`,technology:h,thumbnail:p}}getDatasetThumbnail(e,t,r){if(e.thumbnail_file){const i=e.thumbnail_file;return`${t}/${i.file_uuid}/${i.filename}`+(r?`?token=${r}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,_r.get)(e,"metadata.files",[]).filter(s=>/\.(ome\.tif|ome\.tiff)$/.test(s.rel_path)).filter(s=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(s.rel_path)).filter(s=>JW.has(s.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(s=>`${t}/${e.uuid}/${s.rel_path}`+(r?`?token=${r}`:""));if(i.length>0){const s=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(JW.has(s))return`assets/thumbnails/TMC-Vanderbilt/DR1/${s}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=vRe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e,t){const r=(e.description||"").toLowerCase();let i;r.includes("female")?i="Female":r.includes("male")&&(i="Male");const s=r.match(/age ([0-9]+)/);let o,a;s&&(o=(0,_r.toNumber)(s[1]));for(const p of(0,_r.get)(e,"metadata.organ_donor_data",[]))"Feminine gender"===p.preferred_term||"Female"===p.preferred_term?i="Female":"Masculine gender"===p.preferred_term||"Male"===p.preferred_term?i="Male":"Current chronological age"===p.preferred_term||"Age"===p.preferred_term?o=(0,_r.toNumber)(p.data_value):"Body mass index"===p.preferred_term&&(a=(0,_r.toNumber)(p.data_value));let l="";i&&o&&(l+=`${i}, Age ${o}`,a&&(l+=`, BMI ${a.toFixed(1)}`));const u=new Date(e.last_modified_timestamp).toLocaleDateString(),c=zC[e.group_uuid]||e.group_name;return{"@id":UC+e.uuid,"@type":"Donor",label:l,description:`Entered ${u}, ${e.created_by_user_displayname}, ${c}`,link:`${t}browse/donor/${e.uuid}`,age:o,sex:i,bmi:a,consortium_name:"HuBMAP",provider_name:c,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,t){var r;const s=(e.ancestors||[]).find(u=>"Sample"===u.entity_type&&"organ"===u.specimen_type),o=wRe[null==s?void 0:s.organ]||[Fr.body];let a,l=e.rui_location;if(l&&("string"==typeof l&&(l=JSON.parse(l)),l.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):l["@id"]&&(a=l)),a){a.ccf_annotations=o.concat(a.ccf_annotations||[]);const u=null!==(r=(0,_r.get)(a,["placement","target"]))&&void 0!==r?r:"";u.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")&&(0,_r.set)(a,["placement","target"],u.replace("#VHSpleenCC","Male"===t.sex?"#VHMSpleenCC":"#VHFSpleenCC")),("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===u||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===u)&&(0,_r.set)(a,["placement","target"],"Male"===t.sex?u.replace("#VH","#VHM")+"_Patch":u.replace("#VH","#VHF")+"_Patch")}return a}getTissueBlock(){return(0,_r.omit)(Object.assign({},this),["data","bad","donor"])}toJsonLd(){return Object.assign(Object.assign({},this.donor),{samples:[this.getTissueBlock()]})}}function t9(n,e,t,r,i="",s=""){return Ci(this,void 0,void 0,function*(){let o;if("static"===e)o=yield fetch(n).then(a=>a.ok?a.json():void 0).catch(()=>{});else if("search-api"===e){const a={"Content-type":"application/json"};r&&r.length>0&&(a.Authorization=`Bearer ${r}`),o=yield fetch(n,{method:"POST",headers:a,body:JSON.stringify({version:!0,size:1e4,_source:{excludes:["donor","immediate_ancestors","immediate_descendants","origin_sample","portal_metadata_upload_files","image_file_metadata","ancestor_ids","descendant_ids"]},stored_fields:["*"],script_fields:{},docvalue_fields:[],query:null!=t?t:{exists:{field:"rui_location"}}})}).then(l=>l.ok?l.json():void 0).catch(()=>{})}if(o)return function(n,e="",t="",r,i=!1){const o={},a=(0,_r.get)(n,"hits.hits",[]).map(u=>(0,_r.get)(u,"_source",{})).map(u=>new CRe(u,e,t,r).toJsonLd());for(const u of a){const c=u["@id"];o[c]?o[c].samples.push(u.samples[0]):o[c]=u}const l=Object.values(o);return i&&(function(n){let e=[],t=0;for(const r of n.filter(i=>i.samples.length>1)){const i=r.samples;for(let s=0;s<i.length;s++){const o=i[s]["@id"];e=e.concat(i[s].datasets);for(const a of i[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<i.length;a++)i[a].sections.find(u=>u["@id"]===o)&&(i[s].deleteMe=!0,t++)}r.samples=i.filter(s=>!0!==s.deleteMe)}t>0&&console.log(`\u26a0 ${t} sections identified as blocks`)}(l),console.log(l.map(u=>Object.assign({"@context":e9},u)))),{"@context":e9,"@graph":l}}(o,i,s,r);console.warn(`Unable to load ${n} as HuBMAP Data`)})}function HC(n,e,t){var r;const i=new Map,s=new Set;n.some(l=>{var u;return e.has(l.subject.id)&&(s.add(l.object.id),i.has(l.object.id)?null===(u=i.get(l.object.id))||void 0===u||u.push(l.subject.id):i.set(l.object.id,[l.subject.id])),!1},null,Sr.donor,null,null);const o=t(s),a=new Set;for(const l of o)for(const u of null!==(r=i.get(l))&&void 0!==r?r:[])a.add(u);return a}function Sb(n,e){return t=>n.has(t.id)?e.add(t.id):void 0}const BRe={[ui.ontologyNode.label.id]:"label",[ui.ontologyNode.parent.id]:"parent",[ui.ontologyNode.synonymLabels.id]:"synonymLabels"};function jRe(n,e){const t=Kr.DataFactory.namedNode(e),r={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""};return n.some(i=>{const s=BRe[i.predicate.id];if(s){const o="Literal"===i.object.termType?(0,_h.fromRdf)(i.object):i.object.id;"synonymLabels"===s?r.synonymLabels.push(o):(0,_r.set)(r,s,o)}return!1},t,null,null,null),r.children=n.getSubjects(ui.ontologyNode.children,t,null).map(i=>i.id),r}const GC={[Sr.label.id]:"label",[Sr.description.id]:"description",[Sr.link.id]:"link"},URe=Object.assign(Object.assign({},GC),{[Sr.providerName.id]:"providerName"}),zRe=Object.assign(Object.assign({},GC),{[Sr.technology.id]:"technology",[Sr.thumbnail.id]:"thumbnail"}),HRe=Object.assign(Object.assign({},GC),{[Sr.sampleType.id]:"sampleType",[Sr.sectionNumber.id]:"sectionNumber",[Sr.datasets.id]:"datasets"}),GRe=Object.assign(Object.assign({},GC),{[Sr.sampleType.id]:"sampleType",[Sr.sectionCount.id]:"sectionCount",[Sr.sectionSize.id]:"sectionSize",[Sr.sectionUnits.id]:"sectionUnits",[Sr.donor.id]:"donor",[Sr.spatialEntity.id]:"spatialEntityId",[Sr.sections.id]:"sections",[Sr.datasets.id]:"datasets"}),WRe=(0,_r.memoize)(function(n,e){const t={"@id":e,"@type":"Donor"};return n.some(r=>{const i=URe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,_h.fromRdf)(r.object):r.object.id;(0,_r.set)(t,i,s)}return!1},Kr.DataFactory.namedNode(e),null,null,null),t},(n,e)=>e);function n9(n,e){const t={"@id":e,"@type":"Dataset"};return n.some(r=>{const i=zRe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,_h.fromRdf)(r.object):r.object.id;(0,_r.set)(t,i,s)}return!1},Kr.DataFactory.namedNode(e),null,null,null),t}const KRe=(0,_r.memoize)(function(n,e){const t={"@id":e,"@type":"Sample",sections:[],datasets:[]};return n.some(r=>{const i=GRe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,_h.fromRdf)(r.object):r.object.id;if("sections"===i){const o=function(n,e){const t={"@id":e,"@type":"Sample",datasets:[]};return n.some(r=>{const i=HRe[r.predicate.id];if(i){const s="Literal"===r.object.termType?(0,_h.fromRdf)(r.object):r.object.id;if("datasets"===i){const o=n9(n,s);t[i].push(o)}else(0,_r.set)(t,i,s)}return!1},Kr.DataFactory.namedNode(e),null,null,null),t}(n,s);t[i].push(o)}else if("datasets"===i){const o=n9(n,s);t[i].push(o)}else"donor"===i?t[i]=WRe(n,s):(0,_r.set)(t,i,s)}return!1},Kr.DataFactory.namedNode(e),null,null,null),t},(n,e)=>e),XRe={ccfOwlUrl:"https://purl.org/ccf/latest/ccf.owl",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class QRe{constructor(e=XRe){this.options=e,this.store=new Kr.Store(void 0,{factory:Kr.DataFactory}),this.graph=new QW(this),this.scene=new ZW(this)}connect(e,t=!1){return Ci(this,void 0,void 0,function*(){return e&&(this.options=e),this.initializing||(this.initializing=t?this.cachedConnect():this.doConnect()),yield this.initializing,this.store.size>0})}cachedConnect(){return Ci(this,void 0,void 0,function*(){const e=(new Date).getTime(),t="ccf-database.last_modified",r="ccf-database",i=yield qW(t).catch(()=>{});let s;i&&e-new Date(+i).getTime()>36e5?yield function(n,e=gu()){return e("readwrite",t=>(n.forEach(r=>t.delete(r)),uc(t.transaction)))}([r,t]).catch(()=>{}):s=yield qW(r).catch(()=>{}),s?yield this.deserialize(s):(yield this.doConnect(),function(n,e=gu()){return e("readwrite",t=>(n.forEach(r=>t.put(r[1],r[0])),uc(t.transaction)))}([[r,this.serialize()],[t,""+e]]).catch(()=>{}))})}doConnect(){var e,t;return Ci(this,void 0,void 0,function*(){const r=[],i=null!==(t=null===(e=this.options.dataSources)||void 0===e?void 0:e.concat())&&void 0!==t?t:[],s=this.options.ccfOwlUrl;if(s.endsWith(".n3store.json")){const o=yield fetch(s).then(a=>a.text()).catch(()=>console.log("Couldn't locate serialized store."));o&&(this.store=(0,Kr.deserializeN3Store)(o,Kr.DataFactory))}else(null==s?void 0:s.length)>0&&i.push(s);this.options.hubmapDataUrl&&(this.options.hubmapDataUrl.endsWith("jsonld")?i.push(this.options.hubmapDataUrl):r.push(t9(this.options.hubmapDataUrl,this.options.hubmapDataService,this.options.hubmapQuery,this.options.hubmapToken,this.options.hubmapAssetsUrl,this.options.hubmapPortalUrl).then(o=>{if(o)return this.addDataSources([o])}))),r.push(this.addDataSources(i)),yield Promise.all(r),yield this.synchronize()})}addDataSources(e,t){return Ci(this,void 0,void 0,function*(){const r=null!=t?t:this.store;return yield Promise.all(e.map(i=>Ci(this,void 0,void 0,function*(){"string"==typeof i?i.endsWith("jsonld")?yield(0,Kr.addJsonLdToStore)(i,r):i.endsWith("n3")?yield(0,Kr.addN3ToStore)(i,r):(i.endsWith("rdf")||i.endsWith("owl")||i.endsWith("xml"))&&(yield(0,Kr.addRdfXmlToStore)(i,r)):yield(0,Kr.addJsonLdToStore)(i,r)}))),this})}synchronize(){return Ci(this,void 0,void 0,function*(){return yield new Promise(e=>{setTimeout(e,500)}),this.graph.createGraph(),this})}serialize(){return(0,Kr.serializeN3Store)(this.store)}deserialize(e){return Ci(this,void 0,void 0,function*(){this.store=(0,Kr.deserializeN3Store)(e,Kr.DataFactory),this.graph=new QW(this),this.scene=new ZW(this),yield new Promise(t=>{setTimeout(t,10)})})}getIds(e={}){return function(n,e){var t,r,i,s,o;let a=function(n){const e=new Set;return n.forSubjects(t=>e.add(t.id),Sr.spatialEntity,null,null),e}(n);if(a.size>0&&(a=function(n,e,t=!0){const r=new Set;if(n.forSubjects(Sb(e,r),Sr.spatialEntity,null,null),!t){const i=new Set;return e.forEach(s=>r.has(s)?void 0:i.add(s)),i}return r}(n,a)),a.size>0&&("Male"===e.sex||"Female"===e.sex)){const l=e.sex;a=HC(n,a,u=>function(n,e,t){const r=new Set;return n.forSubjects(Sb(e,r),Sr.sex,Sr[t],null),r}(n,u,l))}if(a.size>0&&(null===(t=e.tmc)||void 0===t?void 0:t.length)>0&&(a=HC(n,a,l=>function(n,e,t){const r=new Set;for(const i of t){const s=Kr.DataFactory.literal(i);n.forSubjects(Sb(e,r),Sr.providerName,s,null)}return r}(n,l,e.tmc))),a.size>0&&(null===(r=e.technologies)||void 0===r?void 0:r.length)>0&&(a=function(n,e,t){var r;const i=new Map,s=new Set,o=new Set;n.some(u=>(e.has(u.subject.id)&&o.add(u.object.id),!1),null,Sr.sections,null,null),n.some(u=>{var c;return(e.has(u.subject.id)||o.has(u.subject.id))&&(s.add(u.object.id),i.has(u.object.id)?null===(c=i.get(u.object.id))||void 0===c||c.push(u.subject.id):i.set(u.object.id,[u.subject.id])),!1},null,Sr.datasets,null,null);const a=t(s),l=new Set;for(const u of a)for(const c of null!==(r=i.get(u))&&void 0!==r?r:[])l.add(c);return l}(n,a,l=>function(n,e,t){const r=new Set;for(const i of t){const s=Kr.DataFactory.literal(i);n.forSubjects(Sb(e,r),Sr.technology,s,null)}return r}(n,l,e.technologies))),a.size>0&&(null===(i=e.ontologyTerms)||void 0===i?void 0:i.length)>0&&(a=function(n,e,t){var r;const i=new Map,s=new Set;n.some(l=>{var u;return e.has(l.subject.id)&&(s.add(l.object.id),i.has(l.object.id)?null===(u=i.get(l.object.id))||void 0===u||u.push(l.subject.id):i.set(l.object.id,[l.subject.id])),!1},null,Sr.spatialEntity,null,null);const o=t(s),a=new Set;for(const l of o)for(const u of null!==(r=i.get(l))&&void 0!==r?r:[])a.add(u);return a}(n,a,l=>function(n,e,t){const r=new Set;for(const i of t){const s=Kr.DataFactory.namedNode(i);n.forSubjects(Sb(e,r),ui.spatialEntity.ccf_annotations,s,null)}return r}(n,l,e.ontologyTerms))),a.size>0&&2===(null===(s=e.ageRange)||void 0===s?void 0:s.length)&&(0,_r.isFinite)(e.ageRange[0])&&(0,_r.isFinite)(e.ageRange[1])){const l=Math.max(...e.ageRange),u=Math.min(...e.ageRange);1===u&&110===l||(a=HC(n,a,c=>function(n,e,t,r){const i=new Set;return n.some(s=>{if(e.has(s.subject.id)){const o=(0,_h.fromRdf)(s.object);o>=t&&o<=r&&i.add(s.subject.id)}return!1},null,Sr.age,null,null),i}(n,c,u,l)))}if(a.size>0&&2===(null===(o=e.bmiRange)||void 0===o?void 0:o.length)&&(0,_r.isFinite)(e.bmiRange[0])&&(0,_r.isFinite)(e.bmiRange[1])){const l=Math.max(...e.bmiRange),u=Math.min(...e.bmiRange);13===u&&83===l||(a=HC(n,a,c=>function(n,e,t,r){const i=new Set;return n.some(s=>{if(e.has(s.subject.id)){const o=(0,_h.fromRdf)(s.object);o>=t&&o<=r&&i.add(s.subject.id)}return!1},null,Sr.bmi,null,null),i}(n,c,u,l)))}return a}(this.store,e)}get(e){return this.store.getQuads(Kr.DataFactory.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(t=>this.get(t))}getSpatialEntities(e){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>_Re(this.store,t))}getTissueBlockResults(e){return Ci(this,void 0,void 0,function*(){return e=Object.assign(Object.assign({},e),{hasSpatialEntity:!0}),[...this.getIds(e)].map(t=>KRe(this.store,t))})}getAggregateResults(e){return Ci(this,void 0,void 0,function*(){return function(n,e){const t=new Set;e.some(l=>(n.has(l.subject.id)&&t.add(l.object.id),!1),null,Sr.donor,null,null);const r=new Set;e.some(l=>(t.has(l.subject.id)&&r.add(l.object.id),!1),null,Sr.providerUUID,null,null);const i=new Set;e.forSubjects(l=>{n.has(l.id)&&i.add(l.id)},Sr.spatialEntity,null,null);const s=new Set;e.some(l=>(i.has(l.subject.id)&&s.add(l.object.id),!1),null,Sr.sections,null,null);const o=new Set;return e.some(l=>{const u=l.subject;return(i.has(u.id)||s.has(u.id))&&o.add(l.object.id),!1},null,Sr.datasets,null,null),Object.entries({"Tissue Data Providers":r.size,Donors:t.size,"Tissue Blocks":i.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([l,u])=>({label:l,count:u}))}(this.getIds(e),this.store)})}getOntologyTermOccurences(e){return Ci(this,void 0,void 0,function*(){return function(n,e){const t=new Map;e.some(i=>(n.has(i.subject.id)&&(t.has(i.object.id)?t.get(i.object.id).push(i.subject.id):t.set(i.object.id,[i.subject.id])),!1),null,Sr.spatialEntity,null,null);const r={};return e.some(i=>{var s,o;if(t.has(i.subject.id)){const a=null!==(o=null===(s=t.get(i.subject.id))||void 0===s?void 0:s.length)&&void 0!==o?o:0;r[i.object.id]=a+(r[i.object.id]||0)}return!1},null,ui.spatialEntity.ccf_annotations,null,null),r}(this.getIds(e),this.store)})}getOntologyTreeModel(){return Ci(this,void 0,void 0,function*(){return function(n){const e={root:KW.body.id,nodes:{}},t=new Set;n.some(r=>(t.add(r.subject.id),t.add(r.predicate.id),!1),null,ui.ontologyNode.parent,null,null);for(const r of t)e.nodes[r]=jRe(n,r);return e}(this.store)})}getReferenceOrgans(){return Ci(this,void 0,void 0,function*(){return this.scene.getReferenceOrgans()})}getScene(e){return Ci(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getScene(e)})}getReferenceOrganScene(e,t){return Ci(this,void 0,void 0,function*(){return this.graph.createGraph(),this.scene.getReferenceOrganScene(e,t)})}}let JRe=(()=>{class n{constructor(t){this.locator=t,this.subscriptions=new A,this.dbOptions=Og.dbOptions,this.dataSource=function(n,e){return new N(t=>{let r,i;try{r=n()}catch(a){return void t.error(a)}try{i=e(r)}catch(a){return void t.error(a)}const o=(i?ke(i):Uu).subscribe(t);return()=>{o.unsubscribe(),r&&r.unsubscribe()}})}(()=>this.createDataSource(),r=>this.connectDataSource(r.source,this.dbOptions)).pipe(Vc(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(t){return this.dataSource.pipe(Si(r=>r.getTissueBlockResults(t)),Qr(1))}getAggregateResults(t){return this.dataSource.pipe(Si(r=>r.getAggregateResults(t)),Qr(1))}getOntologyTermOccurences(t){return this.dataSource.pipe(Si(r=>r.getOntologyTermOccurences(t)),Qr(1))}getOntologyTreeModel(){return this.dataSource.pipe(Si(t=>t.getOntologyTreeModel()),Qr(1))}getReferenceOrgans(){return this.dataSource.pipe(Si(t=>t.getReferenceOrgans()),Qr(1))}getScene(t){return this.dataSource.pipe(Si(r=>r.getScene(t).then(i=>i.filter(s=>t.ontologyTerms.includes(s.representation_of)))),Qr(1))}getReferenceOrganScene(t,r){return this.dataSource.pipe(Si(i=>i.getReferenceOrganScene(t,r)),Qr(1))}createDataSource(){return{source:new QRe(this.dbOptions),unsubscribe:()=>{}}}connectDataSource(t,r){return Ci(this,void 0,void 0,function*(){Og.production||(globalThis.db=t);const i=(new Date).getTime();return yield t.connect(r,!0),Og.production||console.info(`Loaded CCF database in ${((new Date).getTime()-i)/1e3}s`),t})}}return n.\u0275fac=function(t){return new(t||n)(Ne(hf))},n.\u0275prov=qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ePe=(()=>{class n{constructor(t){this.source=t,this.organs=GW}getOrganInfo(t,r,i="Female"){let s=this.organs.find(o=>o.id===t);if(!s)return on(void 0);if(s.disabled||s.side&&r&&s.side!==r){const o=s.organ;s=this.organs.find(a=>a.organ===o&&a.side===r)}return on(s)}getOrgan(t,r="Female"){return this.source.getReferenceOrgans().pipe(ue(i=>i.find(s=>s.representation_of===t.id&&("Both"===r||s.sex===r))))}getOrganScene(t,r="Female"){return this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:r})}getOrganStats(t,r="Female"){return this.source.getAggregateResults({ontologyTerms:[t.id],sex:r})}}return n.\u0275fac=function(t){return new(t||n)(Ne(JRe))},n.\u0275prov=qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tPe=["thumbContainer"],nPe=["toggleBar"],rPe=["input"],iPe=function(n){return{enterDuration:n}},sPe=["*"],oPe=new Gt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let aPe=0;const lPe={provide:za,useExisting:_e(()=>r9),multi:!0};class uPe{constructor(e,t){this.source=e,this.checked=t}}const cPe=nN(pb(tN(mC(class{constructor(n){this._elementRef=n}}))));let r9=(()=>{class n extends cPe{constructor(t,r,i,s,o,a){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++aPe,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new mn,this.toggleChange=new mn,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a}get required(){return this._required}set required(t){this._required=Hr(t)}get checked(){return this._checked}set checked(t){this._checked=Hr(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new uPe(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(Ie(Cn),Ie(id),Ie(fs),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Fb(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(ts(),n)}("tabindex"),Ie(oPe),Ie(hu,8))},n.\u0275cmp=bn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&(Ri(tPe,5),Ri(nPe,5),Ri(rPe,5)),2&t){let i;pr(i=gr())&&(r._thumbEl=i.first),pr(i=gr())&&(r._thumbBarEl=i.first),pr(i=gr())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,r){2&t&&(Ic("id",r.id),zr("tabindex",r.disabled?null:-1)("aria-label",null)("aria-labelledby",null),Cr("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Yn([lPe]),Rn],ngContentSelectors:sPe,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,r){if(1&t&&(function(n){const e=Vt()[16][6];if(!e.projection){const r=e.projection=Su(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?X9(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),Ft(0,"label",0,1),Ft(2,"div",2,3),Ft(4,"input",4,5),Un("change",function(s){return r._onChangeEvent(s)})("click",function(s){return r._onInputClick(s)}),Lt(),Ft(6,"div",6,7),xr(8,"div",8),Ft(9,"div",9),xr(10,"div",10),Lt(),Lt(),Lt(),Ft(11,"span",11,12),Un("cdkObserveContent",function(){return r._onLabelTextChange()}),Ft(13,"span",13),Ar(14,"\xa0"),Lt(),function(n,e=0,t){const r=Vt(),i=fr(),s=Ud(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),hs(),64!=(64&s.flags)&&function(n,e,t){j_(e[11],0,e,t,M0(n,t,e),P0(t.parent||e[6],t,e))}(i,r,s)}(15),Lt(),Lt()),2&t){const i=ng(1),s=ng(12);zr("for",r.inputId),Zt(2),Cr("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),Zt(2),an("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),zr("name",r.name)("aria-checked",r.checked.toString())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Zt(5),an("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function(n,e,t,r){return QL(Vt(),Cs(),n,e,t,r)}(18,iPe,r._noopAnimations?0:150))}},directives:[Sm,wG],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),n})(),i9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({}),n})(),fPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[i9,yC,mi,EP],i9,mi]}),n})(),pPe=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new mn}get left(){const{value:t,labels:r}=this;return t!==r[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bn({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(t,r){2&t&&ku(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[[1,"slide-label",3,"click"],[1,"slider",3,"disabled","checked","change"],["toggle",""]],template:function(t,r){if(1&t){const i=Mc();Ft(0,"span",0),Un("click",function(){Xo(i);const o=ng(3);return r.left||o.toggle(),r.updateToggle(!0)}),Ar(1),Lt(),Ft(2,"mat-slide-toggle",1,2),Un("change",function(o){return r.updateToggle(!o.checked)}),Lt(),Ft(4,"span",0),Un("click",function(){Xo(i);const o=ng(3);return r.left&&o.toggle(),r.updateToggle(!1)}),Ar(5),Lt()}2&t&&(Cr("disabled",r.disabled)("highlighted",r.left),Zt(1),Os(r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1)),Zt(1),an("disabled",r.disabled)("checked",!r.left),Zt(2),Cr("disabled",r.disabled)("highlighted",!r.left),Zt(1),Os(r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1)))},directives:[r9],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mat-slide-toggle-bar{background-color:#43476580}[_nghost-%COMP%]     .slider .mat-slide-toggle-thumb{background-color:#434765}"],changeDetection:0}),n})();const gPe=["bodyUI"],mPe=function(){return["Male","Female"]},_Pe=function(){return["Left","Right"]};let yPe=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new mn,this.sideChange=new mn}ngOnInit(){this.reset()}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.reset()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}reset(){const{bodyUI:t,organ:r}=this;if(r){r.side||(this.side=void 0);const{x_dimension:i,y_dimension:s,z_dimension:o}=r;t.rotation=t.rotationX=0,t.bounds={x:1.25*i/1e3,y:1.25*s/1e3,z:1.25*o/1e3},t.target=[i/1e3/2,s/1e3/2,o/1e3/2]}}}return n.\u0275fac=function(t){return new(t||n)(Ie(QE))},n.\u0275cmp=bn({type:n,selectors:[["ccf-organ"]],viewQuery:function(t,r){if(1&t&&Ri(gPe,7),2&t){let i;pr(i=gr())&&(r.bodyUI=i.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side"},outputs:{sexChange:"sexChange",sideChange:"sideChange"},features:[jr],decls:5,vars:9,consts:[["camera","perspective",1,"body-ui",3,"scene","interactive","nodeClick"],["bodyUI",""],[1,"stage-options"],[1,"view-slider",3,"labels","value","valueChange"],[1,"view-slider",3,"labels","value","disabled","valueChange"]],template:function(t,r){1&t&&(Ft(0,"ccf-body-ui",0,1),Un("nodeClick",function(s){return r.ga.event("node_click","organ",s.node["@id"])}),Lt(),Ft(2,"div",2),Ft(3,"ccf-slide-toggle",3),Un("valueChange",function(s){return r.updateSex(s)}),Lt(),Ft(4,"ccf-slide-toggle",4),Un("valueChange",function(s){return r.updateSide(s)}),Lt(),Lt()),2&t&&(an("scene",r.scene)("interactive",!0),Zt(3),an("labels",Ww(7,mPe))("value",r.sex),Zt(1),an("labels",Ww(8,_Pe))("value",r.side)("disabled",!r.side))},directives:[bOe,pPe],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0}),n})();function vPe(n,e){if(1&n&&(Ft(0,"div",3),Ft(1,"div",4),Ar(2),Lt(),Ft(3,"div",5),Ar(4),Lt(),Lt()),2&n){const t=e.$implicit;Zt(2),Os(t.count),Zt(2),Os(t.label)}}let bPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bn({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(t,r){1&t&&(Ft(0,"div",0),Ft(1,"div",1),Ar(2),Lt(),Mr(3,vPe,5,2,"div",2),Lt()),2&t&&(Zt(2),Lu(" ",r.statsLabel," "),Zt(1),an("ngForOf",r.stats))},directives:[Qd],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0}),n})();function wPe(n,e){if(1&n){const t=Mc();Ft(0,"div",6),Ft(1,"div",7),Ft(2,"div",8),Ar(3),Lt(),Ft(4,"div",9),Un("click",function(){const s=Xo(t).$implicit;return Ei().goToURL(s.buttonUrl)}),Ar(5),Lt(),Lt(),Lt()}if(2&n){const t=e.$implicit;Zt(3),Os(t.body),Zt(1),an("gaLabel",t.buttonUrl),Zt(1),Lu(" ",t.buttonTitle,"")}}function EPe(n,e){if(1&n){const t=Mc();Ft(0,"div",10),Un("click",function(){const s=Xo(t).$implicit;return Ei().goToURL(s.buttonUrl)}),Ar(1),Lt()}if(2&n){const t=e.$implicit;an("gaLabel",t.buttonUrl),Zt(1),Os(t.buttonTitle)}}let SPe=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the CCF Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the CCF Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"CCF Portal",buttonUrl:"https://hubmapconsortium.github.io/ccf/"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.biorxiv.org/content/10.1101/2021.05.31.446440v2"}]}goToURL(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bn({type:n,selectors:[["ccf-link-cards"]],decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"gaLabel","click"],["gaEvent","visit-link",1,"btn-outline","btn",3,"gaLabel","click"]],template:function(t,r){1&t&&(Ft(0,"div",0),Mr(1,wPe,6,3,"div",1),Lt(),Ft(2,"div",2),Ft(3,"div",3),Ar(4,"Common Coordinate Framework (CCF) Deep Dive"),Lt(),Ft(5,"div",4),Mr(6,EPe,2,2,"div",5),Lt(),Lt()),2&t&&(Zt(1),an("ngForOf",r.linkCards),Zt(5),an("ngForOf",r.deepDives))},directives:[lj,Qd,cj],styles:[".link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444A65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444A65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:Inter Variable,Helvetica,Arial,sans-serif}"],changeDetection:0}),n})();const CPe=["left"],APe=["right"],TPe=function(){return[]},xPe=[{color:[0,0,0,0],opacity:.001}];let DPe=(()=>{class n{constructor(t,r){this.ga=r,this.sex="Female",this.side="Left",this.inputChangedTick$=new Cg(1),this.organInfo$=this.inputChangedTick$.pipe(Si(()=>{var i,s,o;return t.getOrganInfo(null!==(i=this.organIri)&&void 0!==i?i:"",null===(o=null===(s=this.side)||void 0===s?void 0:s.toLowerCase)||void 0===o?void 0:o.call(s),this.sex)}),is(i=>this.logOrganLookup(i)),Vc(1)),this.organ$=this.organInfo$.pipe(Si(i=>i?t.getOrgan(i,this.sex):on(void 0)),Vc(1)),this.scene$=this.organ$.pipe(rv(this.organInfo$),Si(([i,s])=>i&&s?t.getOrganScene(s,this.sex):on(xPe))),this.stats$=this.organInfo$.pipe(Si(i=>i?t.getOrganStats(i,this.sex):on([]))),this.statsLabel$=this.stats$.pipe(rv(this.organInfo$),ue(([i,s])=>this.makeStatsLabel(s)),function(...n){const e=n[n.length-1];return pe(e)?(n.pop(),t=>RE(n,t,e)):t=>RE(n,t)}("Loading..."))}ngAfterViewInit(){const{left:t,right:r}=this;t.nativeElement.style.height=`${r.nativeElement.offsetHeight}px`}ngOnChanges(t){this.handleInputChanges(t)}updateInput(t,r){const i={[t]:new ep(this[t],r,!1)};this[t]=r,this.handleInputChanges(i)}handleInputChanges(t){const r=["organIri","sex","side"];let i=!1;for(const s of r)s in t&&(this.logInputChange(s,t[s].currentValue),i=!0);i&&this.inputChangedTick$.next()}makeStatsLabel(t){var r,i;let s=[`Unknown IRI: ${this.organIri}`];return t&&(s=[this.sex,t.organ,null===(i=null===(r=this.side)||void 0===r?void 0:r.toLowerCase)||void 0===i?void 0:i.call(r)]),s.filter(o=>!!o).join(", ")}logInputChange(t,r){const s=`update_${t.replace(/[A-Z]/g,o=>`_${o.toLowerCase()}`)}`;this.ga.event(s,"organ",`${r}`)}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.organIri} - Sex: ${this.sex} - Side: ${this.side}`)}}return n.\u0275fac=function(t){return new(t||n)(Ie(ePe),Ie(QE))},n.\u0275cmp=bn({type:n,selectors:[["ccf-root"]],viewQuery:function(t,r){if(1&t&&(Ri(CPe,7,Cn),Ri(APe,7,Cn)),2&t){let i;pr(i=gr())&&(r.left=i.first),pr(i=gr())&&(r.right=i.first)}},inputs:{organIri:"organIri",sex:"sex",side:"side"},features:[jr],decls:12,vars:15,consts:[[1,"container"],[1,"left"],["left",""],[3,"sex","side","organ","scene","sexChange","sideChange"],[1,"right"],["right",""],[3,"statsLabel","stats"]],template:function(t,r){if(1&t&&(Ft(0,"div",0),Ft(1,"div",1,2),Ft(3,"ccf-organ",3),Un("sexChange",function(s){return r.updateInput("sex",s)})("sideChange",function(s){return r.updateInput("side",s)}),qd(4,"async"),qd(5,"async"),Lt(),Lt(),Ft(6,"div",4,5),xr(8,"ccf-stats-list",6),qd(9,"async"),qd(10,"async"),xr(11,"ccf-link-cards"),Lt(),Lt()),2&t){let i;Zt(3),an("sex",r.sex)("side",r.side)("organ",Yd(4,6,r.organ$))("scene",null!==(i=Yd(5,8,r.scene$))&&void 0!==i?i:Ww(14,TPe)),Zt(5),an("statsLabel",Yd(9,10,r.statsLabel$))("stats",Yd(10,12,r.stats$))}},directives:[yPe,bPe,SPe],pipes:[bE],styles:[".container[_ngcontent-%COMP%]{width:100%;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:Inter;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:29rem}"],changeDetection:0}),n})(),MPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[Qi,fPe]]}),n})(),IPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[Qi,wOe,MPe]]}),n})(),OPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[Qi,ZE]]}),n})(),RPe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({imports:[[Qi]]}),n})(),PPe=(()=>{class n{constructor(t){this.injector=t}ngDoBootstrap(){const t=function(n,e){const t=function(n,e){return e.get(gl).resolveComponentFactory(n).inputs}(n,e.injector),r=e.strategyFactory||new jte(n,e.injector),i=function(n){const e={};return n.forEach(({propName:t,templateName:r})=>{e[function(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(r)]=t}),e}(t);class s extends Ute{constructor(a){super(),this.injector=a}get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=r.create(this.injector||e.injector);t.forEach(({propName:l})=>{if(!this.hasOwnProperty(l))return;const u=this[l];delete this[l],a.setInputValue(l,u)})}return this._ngElementStrategy}attributeChangedCallback(a,l,u,c){this.ngElementStrategy.setInputValue(i[a],u)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const l=function(n,e,t){if("function"!=typeof CustomEvent){const s=n.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}return new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:t})}(this.ownerDocument,a.name,a.value);this.dispatchEvent(l)})}}return s.observedAttributes=Object.keys(i),t.forEach(({propName:o})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(a){this.ngElementStrategy.setInputValue(o,a)},configurable:!0,enumerable:!0})}),s}(DPe,{injector:this.injector});customElements.define("ccf-organ-info",t)}}return n.\u0275fac=function(t){return new(t||n)(Ne(Wn))},n.\u0275mod=un({type:n}),n.\u0275inj=Tt({providers:[],imports:[[pM,OPe,RPe,IPe,Pie.forRoot({gaToken:Og.googleAnalyticsToken,appName:"organ-info",projectName:"ccf",developmentMode:!Og.production})]]}),n})();Og.production&&function(){if(P2)throw new Error("Cannot enable prod mode after platform setup.");R2=!1}(),lte().bootstrapModule(PPe).catch(n=>console.error(n))},1052:jt=>{function rt(gt,te,Et,dt,Q,xe,me){try{var Y=gt[xe](me),z=Y.value}catch(F){return void Et(F)}Y.done?te(z):Promise.resolve(z).then(dt,Q)}jt.exports=function(gt){return function(){var te=this,Et=arguments;return new Promise(function(dt,Q){var xe=gt.apply(te,Et);function me(z){rt(xe,dt,Q,me,Y,"next",z)}function Y(z){rt(xe,dt,Q,me,Y,"throw",z)}me(void 0)})}},jt.exports.default=jt.exports,jt.exports.__esModule=!0},1948:jt=>{jt.exports=function(Ke){return Ke&&Ke.__esModule?Ke:{default:Ke}},jt.exports.default=jt.exports,jt.exports.__esModule=!0},4321:jt=>{function rt(Ke){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(jt.exports=rt=function(te){return typeof te},jt.exports.default=jt.exports,jt.exports.__esModule=!0):(jt.exports=rt=function(te){return te&&"function"==typeof Symbol&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},jt.exports.default=jt.exports,jt.exports.__esModule=!0),rt(Ke)}jt.exports=rt,jt.exports.default=jt.exports,jt.exports.__esModule=!0},8774:(jt,rt,Ke)=>{jt.exports=Ke(7941)},9082:jt=>{function rt(Ke){return Promise.resolve().then(()=>{var gt=new Error("Cannot find module '"+Ke+"'");throw gt.code="MODULE_NOT_FOUND",gt})}rt.keys=()=>[],rt.resolve=rt,rt.id=9082,jt.exports=rt},2540:()=>{},2207:()=>{},5307:()=>{}},jt=>{jt(jt.s=3470)}]);